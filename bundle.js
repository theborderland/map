(()=>{var Lv=Object.create;var Tp=Object.defineProperty;var Tv=Object.getOwnPropertyDescriptor;var Pv=Object.getOwnPropertyNames;var Rv=Object.getPrototypeOf,Ov=Object.prototype.hasOwnProperty;var pl=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var Ge=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var Av=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Pv(t))!Ov.call(n,i)&&i!==e&&Tp(n,i,{get:()=>t[i],enumerable:!(r=Tv(t,i))||r.enumerable});return n};var Mr=(n,t,e)=>(e=n!=null?Lv(Rv(n)):{},Av(t||!n||!n.__esModule?Tp(e,"default",{value:n,enumerable:!0}):e,n));var Jn=Ge((lu,Pp)=>{(function(n,t){typeof lu=="object"&&typeof Pp<"u"?t(lu):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.leaflet={}))})(lu,function(n){"use strict";var t="1.9.3";function e(v){var P,X,st,ft;for(X=1,st=arguments.length;X<st;X++){ft=arguments[X];for(P in ft)v[P]=ft[P]}return v}var r=Object.create||function(){function v(){}return function(P){return v.prototype=P,new v}}();function i(v,P){var X=Array.prototype.slice;if(v.bind)return v.bind.apply(v,X.call(arguments,1));var st=X.call(arguments,2);return function(){return v.apply(P,st.length?st.concat(X.call(arguments)):arguments)}}var s=0;function o(v){return"_leaflet_id"in v||(v._leaflet_id=++s),v._leaflet_id}function a(v,P,X){var st,ft,Mt,Dt;return Dt=function(){st=!1,ft&&(Mt.apply(X,ft),ft=!1)},Mt=function(){st?ft=arguments:(v.apply(X,arguments),setTimeout(Dt,P),st=!0)},Mt}function l(v,P,X){var st=P[1],ft=P[0],Mt=st-ft;return v===st&&X?v:((v-ft)%Mt+Mt)%Mt+ft}function c(){return!1}function h(v,P){if(P===!1)return v;var X=Math.pow(10,P===void 0?6:P);return Math.round(v*X)/X}function d(v){return v.trim?v.trim():v.replace(/^\s+|\s+$/g,"")}function p(v){return d(v).split(/\s+/)}function g(v,P){Object.prototype.hasOwnProperty.call(v,"options")||(v.options=v.options?r(v.options):{});for(var X in P)v.options[X]=P[X];return v.options}function m(v,P,X){var st=[];for(var ft in v)st.push(encodeURIComponent(X?ft.toUpperCase():ft)+"="+encodeURIComponent(v[ft]));return(!P||P.indexOf("?")===-1?"?":"&")+st.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function y(v,P){return v.replace(b,function(X,st){var ft=P[st];if(ft===void 0)throw new Error("No value provided for variable "+X);return typeof ft=="function"&&(ft=ft(P)),ft})}var x=Array.isArray||function(v){return Object.prototype.toString.call(v)==="[object Array]"};function S(v,P){for(var X=0;X<v.length;X++)if(v[X]===P)return X;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function D(v){return window["webkit"+v]||window["moz"+v]||window["ms"+v]}var U=0;function z(v){var P=+new Date,X=Math.max(0,16-(P-U));return U=P+X,window.setTimeout(v,X)}var q=window.requestAnimationFrame||D("RequestAnimationFrame")||z,G=window.cancelAnimationFrame||D("CancelAnimationFrame")||D("CancelRequestAnimationFrame")||function(v){window.clearTimeout(v)};function tt(v,P,X){if(X&&q===z)v.call(P);else return q.call(window,i(v,P))}function K(v){v&&G.call(window,v)}var B={__proto__:null,extend:e,create:r,bind:i,get lastId(){return s},stamp:o,throttle:a,wrapNum:l,falseFn:c,formatNum:h,trim:d,splitWords:p,setOptions:g,getParamString:m,template:y,isArray:x,indexOf:S,emptyImageUrl:O,requestFn:q,cancelFn:G,requestAnimFrame:tt,cancelAnimFrame:K};function N(){}N.extend=function(v){var P=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},X=P.__super__=this.prototype,st=r(X);st.constructor=P,P.prototype=st;for(var ft in this)Object.prototype.hasOwnProperty.call(this,ft)&&ft!=="prototype"&&ft!=="__super__"&&(P[ft]=this[ft]);return v.statics&&e(P,v.statics),v.includes&&(Z(v.includes),e.apply(null,[st].concat(v.includes))),e(st,v),delete st.statics,delete st.includes,st.options&&(st.options=X.options?r(X.options):{},e(st.options,v.options)),st._initHooks=[],st.callInitHooks=function(){if(!this._initHooksCalled){X.callInitHooks&&X.callInitHooks.call(this),this._initHooksCalled=!0;for(var Mt=0,Dt=st._initHooks.length;Mt<Dt;Mt++)st._initHooks[Mt].call(this)}},P},N.include=function(v){var P=this.prototype.options;return e(this.prototype,v),v.options&&(this.prototype.options=P,this.mergeOptions(v.options)),this},N.mergeOptions=function(v){return e(this.prototype.options,v),this},N.addInitHook=function(v){var P=Array.prototype.slice.call(arguments,1),X=typeof v=="function"?v:function(){this[v].apply(this,P)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(X),this};function Z(v){if(!(typeof L>"u"||!L||!L.Mixin)){v=x(v)?v:[v];for(var P=0;P<v.length;P++)v[P]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var w={on:function(v,P,X){if(typeof v=="object")for(var st in v)this._on(st,v[st],P);else{v=p(v);for(var ft=0,Mt=v.length;ft<Mt;ft++)this._on(v[ft],P,X)}return this},off:function(v,P,X){if(!arguments.length)delete this._events;else if(typeof v=="object")for(var st in v)this._off(st,v[st],P);else{v=p(v);for(var ft=arguments.length===1,Mt=0,Dt=v.length;Mt<Dt;Mt++)ft?this._off(v[Mt]):this._off(v[Mt],P,X)}return this},_on:function(v,P,X,st){if(typeof P!="function"){console.warn("wrong listener type: "+typeof P);return}if(this._listens(v,P,X)===!1){X===this&&(X=void 0);var ft={fn:P,ctx:X};st&&(ft.once=!0),this._events=this._events||{},this._events[v]=this._events[v]||[],this._events[v].push(ft)}},_off:function(v,P,X){var st,ft,Mt;if(this._events&&(st=this._events[v],!!st)){if(arguments.length===1){if(this._firingCount)for(ft=0,Mt=st.length;ft<Mt;ft++)st[ft].fn=c;delete this._events[v];return}if(typeof P!="function"){console.warn("wrong listener type: "+typeof P);return}var Dt=this._listens(v,P,X);if(Dt!==!1){var Wt=st[Dt];this._firingCount&&(Wt.fn=c,this._events[v]=st=st.slice()),st.splice(Dt,1)}}},fire:function(v,P,X){if(!this.listens(v,X))return this;var st=e({},P,{type:v,target:this,sourceTarget:P&&P.sourceTarget||this});if(this._events){var ft=this._events[v];if(ft){this._firingCount=this._firingCount+1||1;for(var Mt=0,Dt=ft.length;Mt<Dt;Mt++){var Wt=ft[Mt],te=Wt.fn;Wt.once&&this.off(v,te,Wt.ctx),te.call(Wt.ctx||this,st)}this._firingCount--}}return X&&this._propagateEvent(st),this},listens:function(v,P,X,st){typeof v!="string"&&console.warn('"string" type argument expected');var ft=P;typeof P!="function"&&(st=!!P,ft=void 0,X=void 0);var Mt=this._events&&this._events[v];if(Mt&&Mt.length&&this._listens(v,ft,X)!==!1)return!0;if(st){for(var Dt in this._eventParents)if(this._eventParents[Dt].listens(v,P,X,st))return!0}return!1},_listens:function(v,P,X){if(!this._events)return!1;var st=this._events[v]||[];if(!P)return!!st.length;X===this&&(X=void 0);for(var ft=0,Mt=st.length;ft<Mt;ft++)if(st[ft].fn===P&&st[ft].ctx===X)return ft;return!1},once:function(v,P,X){if(typeof v=="object")for(var st in v)this._on(st,v[st],P,!0);else{v=p(v);for(var ft=0,Mt=v.length;ft<Mt;ft++)this._on(v[ft],P,X,!0)}return this},addEventParent:function(v){return this._eventParents=this._eventParents||{},this._eventParents[o(v)]=v,this},removeEventParent:function(v){return this._eventParents&&delete this._eventParents[o(v)],this},_propagateEvent:function(v){for(var P in this._eventParents)this._eventParents[P].fire(v.type,e({layer:v.target,propagatedFrom:v.target},v),!0)}};w.addEventListener=w.on,w.removeEventListener=w.clearAllEventListeners=w.off,w.addOneTimeEventListener=w.once,w.fireEvent=w.fire,w.hasEventListeners=w.listens;var C=N.extend(w);function k(v,P,X){this.x=X?Math.round(v):v,this.y=X?Math.round(P):P}var T=Math.trunc||function(v){return v>0?Math.floor(v):Math.ceil(v)};k.prototype={clone:function(){return new k(this.x,this.y)},add:function(v){return this.clone()._add(R(v))},_add:function(v){return this.x+=v.x,this.y+=v.y,this},subtract:function(v){return this.clone()._subtract(R(v))},_subtract:function(v){return this.x-=v.x,this.y-=v.y,this},divideBy:function(v){return this.clone()._divideBy(v)},_divideBy:function(v){return this.x/=v,this.y/=v,this},multiplyBy:function(v){return this.clone()._multiplyBy(v)},_multiplyBy:function(v){return this.x*=v,this.y*=v,this},scaleBy:function(v){return new k(this.x*v.x,this.y*v.y)},unscaleBy:function(v){return new k(this.x/v.x,this.y/v.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=T(this.x),this.y=T(this.y),this},distanceTo:function(v){v=R(v);var P=v.x-this.x,X=v.y-this.y;return Math.sqrt(P*P+X*X)},equals:function(v){return v=R(v),v.x===this.x&&v.y===this.y},contains:function(v){return v=R(v),Math.abs(v.x)<=Math.abs(this.x)&&Math.abs(v.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function R(v,P,X){return v instanceof k?v:x(v)?new k(v[0],v[1]):v==null?v:typeof v=="object"&&"x"in v&&"y"in v?new k(v.x,v.y):new k(v,P,X)}function F(v,P){if(v)for(var X=P?[v,P]:v,st=0,ft=X.length;st<ft;st++)this.extend(X[st])}F.prototype={extend:function(v){var P,X;if(!v)return this;if(v instanceof k||typeof v[0]=="number"||"x"in v)P=X=R(v);else if(v=H(v),P=v.min,X=v.max,!P||!X)return this;return!this.min&&!this.max?(this.min=P.clone(),this.max=X.clone()):(this.min.x=Math.min(P.x,this.min.x),this.max.x=Math.max(X.x,this.max.x),this.min.y=Math.min(P.y,this.min.y),this.max.y=Math.max(X.y,this.max.y)),this},getCenter:function(v){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,v)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(v){var P,X;return typeof v[0]=="number"||v instanceof k?v=R(v):v=H(v),v instanceof F?(P=v.min,X=v.max):P=X=v,P.x>=this.min.x&&X.x<=this.max.x&&P.y>=this.min.y&&X.y<=this.max.y},intersects:function(v){v=H(v);var P=this.min,X=this.max,st=v.min,ft=v.max,Mt=ft.x>=P.x&&st.x<=X.x,Dt=ft.y>=P.y&&st.y<=X.y;return Mt&&Dt},overlaps:function(v){v=H(v);var P=this.min,X=this.max,st=v.min,ft=v.max,Mt=ft.x>P.x&&st.x<X.x,Dt=ft.y>P.y&&st.y<X.y;return Mt&&Dt},isValid:function(){return!!(this.min&&this.max)},pad:function(v){var P=this.min,X=this.max,st=Math.abs(P.x-X.x)*v,ft=Math.abs(P.y-X.y)*v;return H(R(P.x-st,P.y-ft),R(X.x+st,X.y+ft))},equals:function(v){return v?(v=H(v),this.min.equals(v.getTopLeft())&&this.max.equals(v.getBottomRight())):!1}};function H(v,P){return!v||v instanceof F?v:new F(v,P)}function rt(v,P){if(v)for(var X=P?[v,P]:v,st=0,ft=X.length;st<ft;st++)this.extend(X[st])}rt.prototype={extend:function(v){var P=this._southWest,X=this._northEast,st,ft;if(v instanceof dt)st=v,ft=v;else if(v instanceof rt){if(st=v._southWest,ft=v._northEast,!st||!ft)return this}else return v?this.extend($(v)||ot(v)):this;return!P&&!X?(this._southWest=new dt(st.lat,st.lng),this._northEast=new dt(ft.lat,ft.lng)):(P.lat=Math.min(st.lat,P.lat),P.lng=Math.min(st.lng,P.lng),X.lat=Math.max(ft.lat,X.lat),X.lng=Math.max(ft.lng,X.lng)),this},pad:function(v){var P=this._southWest,X=this._northEast,st=Math.abs(P.lat-X.lat)*v,ft=Math.abs(P.lng-X.lng)*v;return new rt(new dt(P.lat-st,P.lng-ft),new dt(X.lat+st,X.lng+ft))},getCenter:function(){return new dt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new dt(this.getNorth(),this.getWest())},getSouthEast:function(){return new dt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(v){typeof v[0]=="number"||v instanceof dt||"lat"in v?v=$(v):v=ot(v);var P=this._southWest,X=this._northEast,st,ft;return v instanceof rt?(st=v.getSouthWest(),ft=v.getNorthEast()):st=ft=v,st.lat>=P.lat&&ft.lat<=X.lat&&st.lng>=P.lng&&ft.lng<=X.lng},intersects:function(v){v=ot(v);var P=this._southWest,X=this._northEast,st=v.getSouthWest(),ft=v.getNorthEast(),Mt=ft.lat>=P.lat&&st.lat<=X.lat,Dt=ft.lng>=P.lng&&st.lng<=X.lng;return Mt&&Dt},overlaps:function(v){v=ot(v);var P=this._southWest,X=this._northEast,st=v.getSouthWest(),ft=v.getNorthEast(),Mt=ft.lat>P.lat&&st.lat<X.lat,Dt=ft.lng>P.lng&&st.lng<X.lng;return Mt&&Dt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(v,P){return v?(v=ot(v),this._southWest.equals(v.getSouthWest(),P)&&this._northEast.equals(v.getNorthEast(),P)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ot(v,P){return v instanceof rt?v:new rt(v,P)}function dt(v,P,X){if(isNaN(v)||isNaN(P))throw new Error("Invalid LatLng object: ("+v+", "+P+")");this.lat=+v,this.lng=+P,X!==void 0&&(this.alt=+X)}dt.prototype={equals:function(v,P){if(!v)return!1;v=$(v);var X=Math.max(Math.abs(this.lat-v.lat),Math.abs(this.lng-v.lng));return X<=(P===void 0?1e-9:P)},toString:function(v){return"LatLng("+h(this.lat,v)+", "+h(this.lng,v)+")"},distanceTo:function(v){return W.distance(this,$(v))},wrap:function(){return W.wrapLatLng(this)},toBounds:function(v){var P=180*v/40075017,X=P/Math.cos(Math.PI/180*this.lat);return ot([this.lat-P,this.lng-X],[this.lat+P,this.lng+X])},clone:function(){return new dt(this.lat,this.lng,this.alt)}};function $(v,P,X){return v instanceof dt?v:x(v)&&typeof v[0]!="object"?v.length===3?new dt(v[0],v[1],v[2]):v.length===2?new dt(v[0],v[1]):null:v==null?v:typeof v=="object"&&"lat"in v?new dt(v.lat,"lng"in v?v.lng:v.lon,v.alt):P===void 0?null:new dt(v,P,X)}var ct={latLngToPoint:function(v,P){var X=this.projection.project(v),st=this.scale(P);return this.transformation._transform(X,st)},pointToLatLng:function(v,P){var X=this.scale(P),st=this.transformation.untransform(v,X);return this.projection.unproject(st)},project:function(v){return this.projection.project(v)},unproject:function(v){return this.projection.unproject(v)},scale:function(v){return 256*Math.pow(2,v)},zoom:function(v){return Math.log(v/256)/Math.LN2},getProjectedBounds:function(v){if(this.infinite)return null;var P=this.projection.bounds,X=this.scale(v),st=this.transformation.transform(P.min,X),ft=this.transformation.transform(P.max,X);return new F(st,ft)},infinite:!1,wrapLatLng:function(v){var P=this.wrapLng?l(v.lng,this.wrapLng,!0):v.lng,X=this.wrapLat?l(v.lat,this.wrapLat,!0):v.lat,st=v.alt;return new dt(X,P,st)},wrapLatLngBounds:function(v){var P=v.getCenter(),X=this.wrapLatLng(P),st=P.lat-X.lat,ft=P.lng-X.lng;if(st===0&&ft===0)return v;var Mt=v.getSouthWest(),Dt=v.getNorthEast(),Wt=new dt(Mt.lat-st,Mt.lng-ft),te=new dt(Dt.lat-st,Dt.lng-ft);return new rt(Wt,te)}},W=e({},ct,{wrapLng:[-180,180],R:6371e3,distance:function(v,P){var X=Math.PI/180,st=v.lat*X,ft=P.lat*X,Mt=Math.sin((P.lat-v.lat)*X/2),Dt=Math.sin((P.lng-v.lng)*X/2),Wt=Mt*Mt+Math.cos(st)*Math.cos(ft)*Dt*Dt,te=2*Math.atan2(Math.sqrt(Wt),Math.sqrt(1-Wt));return this.R*te}}),V=6378137,it={R:V,MAX_LATITUDE:85.0511287798,project:function(v){var P=Math.PI/180,X=this.MAX_LATITUDE,st=Math.max(Math.min(X,v.lat),-X),ft=Math.sin(st*P);return new k(this.R*v.lng*P,this.R*Math.log((1+ft)/(1-ft))/2)},unproject:function(v){var P=180/Math.PI;return new dt((2*Math.atan(Math.exp(v.y/this.R))-Math.PI/2)*P,v.x*P/this.R)},bounds:function(){var v=V*Math.PI;return new F([-v,-v],[v,v])}()};function mt(v,P,X,st){if(x(v)){this._a=v[0],this._b=v[1],this._c=v[2],this._d=v[3];return}this._a=v,this._b=P,this._c=X,this._d=st}mt.prototype={transform:function(v,P){return this._transform(v.clone(),P)},_transform:function(v,P){return P=P||1,v.x=P*(this._a*v.x+this._b),v.y=P*(this._c*v.y+this._d),v},untransform:function(v,P){return P=P||1,new k((v.x/P-this._b)/this._a,(v.y/P-this._d)/this._c)}};function wt(v,P,X,st){return new mt(v,P,X,st)}var _t=e({},W,{code:"EPSG:3857",projection:it,transformation:function(){var v=.5/(Math.PI*it.R);return wt(v,.5,-v,.5)}()}),Ct=e({},_t,{code:"EPSG:900913"});function Ft(v){return document.createElementNS("http://www.w3.org/2000/svg",v)}function It(v,P){var X="",st,ft,Mt,Dt,Wt,te;for(st=0,Mt=v.length;st<Mt;st++){for(Wt=v[st],ft=0,Dt=Wt.length;ft<Dt;ft++)te=Wt[ft],X+=(ft?"L":"M")+te.x+" "+te.y;X+=P?jt.svg?"z":"x":""}return X||"M0 0"}var vt=document.documentElement.style,kt="ActiveXObject"in window,gt=kt&&!document.addEventListener,ut="msLaunchUri"in navigator&&!("documentMode"in document),Q=qt("webkit"),Y=qt("android"),et=qt("android 2")||qt("android 3"),lt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pt=Y&&qt("Google")&&lt<537&&!("AudioNode"in window),bt=!!window.opera,Et=!ut&&qt("chrome"),Ot=qt("gecko")&&!Q&&!bt&&!kt,zt=!Et&&qt("safari"),Gt=qt("phantom"),Jt="OTransition"in vt,Kt=navigator.platform.indexOf("Win")===0,re=kt&&"transition"in vt,Xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!et,Ut="MozPerspective"in vt,_e=!window.L_DISABLE_3D&&(re||Xt||Ut)&&!Jt&&!Gt,le=typeof orientation<"u"||qt("mobile"),ye=le&&Q,Ze=le&&Xt,ce=!window.PointerEvent&&window.MSPointerEvent,ke=!!(window.PointerEvent||ce),He="ontouchstart"in window||!!window.TouchEvent,$t=!window.L_NO_TOUCH&&(He||ke),Te=le&&bt,br=le&&Ot,ue=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fe=function(){var v=!1;try{var P=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("testPassiveEventSupport",c,P),window.removeEventListener("testPassiveEventSupport",c,P)}catch{}return v}(),ar=function(){return!!document.createElement("canvas").getContext}(),Le=!!(document.createElementNS&&Ft("svg").createSVGRect),Oe=!!Le&&function(){var v=document.createElement("div");return v.innerHTML="<svg/>",(v.firstChild&&v.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ri=!Le&&function(){try{var v=document.createElement("div");v.innerHTML='<v:shape adj="1"/>';var P=v.firstChild;return P.style.behavior="url(#default#VML)",P&&typeof P.adj=="object"}catch{return!1}}(),We=navigator.platform.indexOf("Mac")===0,At=navigator.platform.indexOf("Linux")===0;function qt(v){return navigator.userAgent.toLowerCase().indexOf(v)>=0}var jt={ie:kt,ielt9:gt,edge:ut,webkit:Q,android:Y,android23:et,androidStock:pt,opera:bt,chrome:Et,gecko:Ot,safari:zt,phantom:Gt,opera12:Jt,win:Kt,ie3d:re,webkit3d:Xt,gecko3d:Ut,any3d:_e,mobile:le,mobileWebkit:ye,mobileWebkit3d:Ze,msPointer:ce,pointer:ke,touch:$t,touchNative:He,mobileOpera:Te,mobileGecko:br,retina:ue,passiveEvents:Fe,canvas:ar,svg:Le,vml:ri,inlineSvg:Oe,mac:We,linux:At},ae=jt.msPointer?"MSPointerDown":"pointerdown",Qe=jt.msPointer?"MSPointerMove":"pointermove",se=jt.msPointer?"MSPointerUp":"pointerup",ve=jt.msPointer?"MSPointerCancel":"pointercancel",$e={touchstart:ae,touchmove:Qe,touchend:se,touchcancel:ve},Ae={touchstart:kr,touchmove:ci,touchend:ci,touchcancel:ci},fe={},Ye=!1;function Ve(v,P,X){return P==="touchstart"&&or(),Ae[P]?(X=Ae[P].bind(this,X),v.addEventListener($e[P],X,!1),X):(console.warn("wrong event specified:",P),c)}function rr(v,P,X){if(!$e[P]){console.warn("wrong event specified:",P);return}v.removeEventListener($e[P],X,!1)}function Ke(v){fe[v.pointerId]=v}function pi(v){fe[v.pointerId]&&(fe[v.pointerId]=v)}function Je(v){delete fe[v.pointerId]}function or(){Ye||(document.addEventListener(ae,Ke,!0),document.addEventListener(Qe,pi,!0),document.addEventListener(se,Je,!0),document.addEventListener(ve,Je,!0),Ye=!0)}function ci(v,P){if(P.pointerType!==(P.MSPOINTER_TYPE_MOUSE||"mouse")){P.touches=[];for(var X in fe)P.touches.push(fe[X]);P.changedTouches=[P],v(P)}}function kr(v,P){P.MSPOINTER_TYPE_TOUCH&&P.pointerType===P.MSPOINTER_TYPE_TOUCH&&Rt(P),ci(v,P)}function Tt(v){var P={},X,st;for(st in v)X=v[st],P[st]=X&&X.bind?X.bind(v):X;return v=P,P.type="dblclick",P.detail=2,P.isTrusted=!1,P._simulated=!0,P}var Ht=200;function ie(v,P){v.addEventListener("dblclick",P);var X=0,st;function ft(Mt){if(Mt.detail!==1){st=Mt.detail;return}if(!(Mt.pointerType==="mouse"||Mt.sourceCapabilities&&!Mt.sourceCapabilities.firesTouchEvents)){var Dt=Nt(Mt);if(!(Dt.some(function(te){return te instanceof HTMLLabelElement&&te.attributes.for})&&!Dt.some(function(te){return te instanceof HTMLInputElement||te instanceof HTMLSelectElement}))){var Wt=Date.now();Wt-X<=Ht?(st++,st===2&&P(Tt(Mt))):st=1,X=Wt}}}return v.addEventListener("click",ft),{dblclick:P,simDblclick:ft}}function Qt(v,P){v.removeEventListener("dblclick",P.dblclick),v.removeEventListener("click",P.simDblclick)}var he=Vn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ee=Vn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ie=Ee==="webkitTransition"||Ee==="OTransition"?Ee+"End":"transitionend";function tr(v){return typeof v=="string"?document.getElementById(v):v}function Ue(v,P){var X=v.style[P]||v.currentStyle&&v.currentStyle[P];if((!X||X==="auto")&&document.defaultView){var st=document.defaultView.getComputedStyle(v,null);X=st?st[P]:null}return X==="auto"?null:X}function we(v,P,X){var st=document.createElement(v);return st.className=P||"",X&&X.appendChild(st),st}function pe(v){var P=v.parentNode;P&&P.removeChild(v)}function yr(v){for(;v.firstChild;)v.removeChild(v.firstChild)}function ir(v){var P=v.parentNode;P&&P.lastChild!==v&&P.appendChild(v)}function lr(v){var P=v.parentNode;P&&P.firstChild!==v&&P.insertBefore(v,P.firstChild)}function wr(v,P){if(v.classList!==void 0)return v.classList.contains(P);var X=Xi(v);return X.length>0&&new RegExp("(^|\\s)"+P+"(\\s|$)").test(X)}function me(v,P){if(v.classList!==void 0)for(var X=p(P),st=0,ft=X.length;st<ft;st++)v.classList.add(X[st]);else if(!wr(v,P)){var Mt=Xi(v);bi(v,(Mt?Mt+" ":"")+P)}}function ur(v,P){v.classList!==void 0?v.classList.remove(P):bi(v,d((" "+Xi(v)+" ").replace(" "+P+" "," ")))}function bi(v,P){v.className.baseVal===void 0?v.className=P:v.className.baseVal=P}function Xi(v){return v.correspondingElement&&(v=v.correspondingElement),v.className.baseVal===void 0?v.className:v.className.baseVal}function Se(v,P){"opacity"in v.style?v.style.opacity=P:"filter"in v.style&&Ln(v,P)}function Ln(v,P){var X=!1,st="DXImageTransform.Microsoft.Alpha";try{X=v.filters.item(st)}catch{if(P===1)return}P=Math.round(P*100),X?(X.Enabled=P!==100,X.Opacity=P):v.style.filter+=" progid:"+st+"(opacity="+P+")"}function Vn(v){for(var P=document.documentElement.style,X=0;X<v.length;X++)if(v[X]in P)return v[X];return!1}function nr(v,P,X){var st=P||new k(0,0);v.style[he]=(jt.ie3d?"translate("+st.x+"px,"+st.y+"px)":"translate3d("+st.x+"px,"+st.y+"px,0)")+(X?" scale("+X+")":"")}function ze(v,P){v._leaflet_pos=P,jt.any3d?nr(v,P):(v.style.left=P.x+"px",v.style.top=P.y+"px")}function Ti(v){return v._leaflet_pos||new k(0,0)}var Ri,bn,oe;if("onselectstart"in document)Ri=function(){je(window,"selectstart",Rt)},bn=function(){cr(window,"selectstart",Rt)};else{var Ii=Vn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ri=function(){if(Ii){var v=document.documentElement.style;oe=v[Ii],v[Ii]="none"}},bn=function(){Ii&&(document.documentElement.style[Ii]=oe,oe=void 0)}}function gr(){je(window,"dragstart",Rt)}function _i(){cr(window,"dragstart",Rt)}var on,yi;function hr(v){for(;v.tabIndex===-1;)v=v.parentNode;v.style&&(fr(),on=v,yi=v.style.outline,v.style.outline="none",je(window,"keydown",fr))}function fr(){on&&(on.style.outline=yi,on=void 0,yi=void 0,cr(window,"keydown",fr))}function Tr(v){do v=v.parentNode;while((!v.offsetWidth||!v.offsetHeight)&&v!==document.body);return v}function $i(v){var P=v.getBoundingClientRect();return{x:P.width/v.offsetWidth||1,y:P.height/v.offsetHeight||1,boundingClientRect:P}}var us={__proto__:null,TRANSFORM:he,TRANSITION:Ee,TRANSITION_END:Ie,get:tr,getStyle:Ue,create:we,remove:pe,empty:yr,toFront:ir,toBack:lr,hasClass:wr,addClass:me,removeClass:ur,setClass:bi,getClass:Xi,setOpacity:Se,testProp:Vn,setTransform:nr,setPosition:ze,getPosition:Ti,get disableTextSelection(){return Ri},get enableTextSelection(){return bn},disableImageDrag:gr,enableImageDrag:_i,preventOutline:hr,restoreOutline:fr,getSizedParentNode:Tr,getScale:$i};function je(v,P,X,st){if(P&&typeof P=="object")for(var ft in P)j(v,ft,P[ft],X);else{P=p(P);for(var Mt=0,Dt=P.length;Mt<Dt;Mt++)j(v,P[Mt],X,st)}return this}var Yi="_leaflet_events";function cr(v,P,X,st){if(arguments.length===1)M(v),delete v[Yi];else if(P&&typeof P=="object")for(var ft in P)nt(v,ft,P[ft],X);else if(P=p(P),arguments.length===2)M(v,function(Wt){return S(P,Wt)!==-1});else for(var Mt=0,Dt=P.length;Mt<Dt;Mt++)nt(v,P[Mt],X,st);return this}function M(v,P){for(var X in v[Yi]){var st=X.split(/\d/)[0];(!P||P(st))&&nt(v,st,null,null,X)}}var A={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function j(v,P,X,st){var ft=P+o(X)+(st?"_"+o(st):"");if(v[Yi]&&v[Yi][ft])return this;var Mt=function(Wt){return X.call(st||v,Wt||window.event)},Dt=Mt;!jt.touchNative&&jt.pointer&&P.indexOf("touch")===0?Mt=Ve(v,P,Mt):jt.touch&&P==="dblclick"?Mt=ie(v,Mt):"addEventListener"in v?P==="touchstart"||P==="touchmove"||P==="wheel"||P==="mousewheel"?v.addEventListener(A[P]||P,Mt,jt.passiveEvents?{passive:!1}:!1):P==="mouseenter"||P==="mouseleave"?(Mt=function(Wt){Wt=Wt||window.event,ge(v,Wt)&&Dt(Wt)},v.addEventListener(A[P],Mt,!1)):v.addEventListener(P,Dt,!1):v.attachEvent("on"+P,Mt),v[Yi]=v[Yi]||{},v[Yi][ft]=Mt}function nt(v,P,X,st,ft){ft=ft||P+o(X)+(st?"_"+o(st):"");var Mt=v[Yi]&&v[Yi][ft];if(!Mt)return this;!jt.touchNative&&jt.pointer&&P.indexOf("touch")===0?rr(v,P,Mt):jt.touch&&P==="dblclick"?Qt(v,Mt):"removeEventListener"in v?v.removeEventListener(A[P]||P,Mt,!1):v.detachEvent("on"+P,Mt),v[Yi][ft]=null}function ht(v){return v.stopPropagation?v.stopPropagation():v.originalEvent?v.originalEvent._stopped=!0:v.cancelBubble=!0,this}function xt(v){return j(v,"wheel",ht),this}function Lt(v){return je(v,"mousedown touchstart dblclick contextmenu",ht),v._leaflet_disable_click=!0,this}function Rt(v){return v.preventDefault?v.preventDefault():v.returnValue=!1,this}function Pt(v){return Rt(v),ht(v),this}function Nt(v){if(v.composedPath)return v.composedPath();for(var P=[],X=v.target;X;)P.push(X),X=X.parentNode;return P}function Vt(v,P){if(!P)return new k(v.clientX,v.clientY);var X=$i(P),st=X.boundingClientRect;return new k((v.clientX-st.left)/X.x-P.clientLeft,(v.clientY-st.top)/X.y-P.clientTop)}var ne=jt.linux&&jt.chrome?window.devicePixelRatio:jt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zt(v){return jt.edge?v.wheelDeltaY/2:v.deltaY&&v.deltaMode===0?-v.deltaY/ne:v.deltaY&&v.deltaMode===1?-v.deltaY*20:v.deltaY&&v.deltaMode===2?-v.deltaY*60:v.deltaX||v.deltaZ?0:v.wheelDelta?(v.wheelDeltaY||v.wheelDelta)/2:v.detail&&Math.abs(v.detail)<32765?-v.detail*20:v.detail?v.detail/-32765*60:0}function ge(v,P){var X=P.relatedTarget;if(!X)return!0;try{for(;X&&X!==v;)X=X.parentNode}catch{return!1}return X!==v}var Ce={__proto__:null,on:je,off:cr,stopPropagation:ht,disableScrollPropagation:xt,disableClickPropagation:Lt,preventDefault:Rt,stop:Pt,getPropagationPath:Nt,getMousePosition:Vt,getWheelDelta:Zt,isExternalTarget:ge,addListener:je,removeListener:cr},Ne=C.extend({run:function(v,P,X,st){this.stop(),this._el=v,this._inProgress=!0,this._duration=X||.25,this._easeOutPower=1/Math.max(st||.5,.2),this._startPos=Ti(v),this._offset=P.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=tt(this._animate,this),this._step()},_step:function(v){var P=+new Date-this._startTime,X=this._duration*1e3;P<X?this._runFrame(this._easeOut(P/X),v):(this._runFrame(1),this._complete())},_runFrame:function(v,P){var X=this._startPos.add(this._offset.multiplyBy(v));P&&X._round(),ze(this._el,X),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(v){return 1-Math.pow(1-v,this._easeOutPower)}}),be=C.extend({options:{crs:_t,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(v,P){P=g(this,P),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(v),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),P.maxBounds&&this.setMaxBounds(P.maxBounds),P.zoom!==void 0&&(this._zoom=this._limitZoom(P.zoom)),P.center&&P.zoom!==void 0&&this.setView($(P.center),P.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ee&&jt.any3d&&!jt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),je(this._proxy,Ie,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(v,P,X){if(P=P===void 0?this._zoom:this._limitZoom(P),v=this._limitCenter($(v),P,this.options.maxBounds),X=X||{},this._stop(),this._loaded&&!X.reset&&X!==!0){X.animate!==void 0&&(X.zoom=e({animate:X.animate},X.zoom),X.pan=e({animate:X.animate,duration:X.duration},X.pan));var st=this._zoom!==P?this._tryAnimatedZoom&&this._tryAnimatedZoom(v,P,X.zoom):this._tryAnimatedPan(v,X.pan);if(st)return clearTimeout(this._sizeTimer),this}return this._resetView(v,P,X.pan&&X.pan.noMoveStart),this},setZoom:function(v,P){return this._loaded?this.setView(this.getCenter(),v,{zoom:P}):(this._zoom=v,this)},zoomIn:function(v,P){return v=v||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+v,P)},zoomOut:function(v,P){return v=v||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-v,P)},setZoomAround:function(v,P,X){var st=this.getZoomScale(P),ft=this.getSize().divideBy(2),Mt=v instanceof k?v:this.latLngToContainerPoint(v),Dt=Mt.subtract(ft).multiplyBy(1-1/st),Wt=this.containerPointToLatLng(ft.add(Dt));return this.setView(Wt,P,{zoom:X})},_getBoundsCenterZoom:function(v,P){P=P||{},v=v.getBounds?v.getBounds():ot(v);var X=R(P.paddingTopLeft||P.padding||[0,0]),st=R(P.paddingBottomRight||P.padding||[0,0]),ft=this.getBoundsZoom(v,!1,X.add(st));if(ft=typeof P.maxZoom=="number"?Math.min(P.maxZoom,ft):ft,ft===1/0)return{center:v.getCenter(),zoom:ft};var Mt=st.subtract(X).divideBy(2),Dt=this.project(v.getSouthWest(),ft),Wt=this.project(v.getNorthEast(),ft),te=this.unproject(Dt.add(Wt).divideBy(2).add(Mt),ft);return{center:te,zoom:ft}},fitBounds:function(v,P){if(v=ot(v),!v.isValid())throw new Error("Bounds are not valid.");var X=this._getBoundsCenterZoom(v,P);return this.setView(X.center,X.zoom,P)},fitWorld:function(v){return this.fitBounds([[-90,-180],[90,180]],v)},panTo:function(v,P){return this.setView(v,this._zoom,{pan:P})},panBy:function(v,P){if(v=R(v).round(),P=P||{},!v.x&&!v.y)return this.fire("moveend");if(P.animate!==!0&&!this.getSize().contains(v))return this._resetView(this.unproject(this.project(this.getCenter()).add(v)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ne,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),P.noMoveStart||this.fire("movestart"),P.animate!==!1){me(this._mapPane,"leaflet-pan-anim");var X=this._getMapPanePos().subtract(v).round();this._panAnim.run(this._mapPane,X,P.duration||.25,P.easeLinearity)}else this._rawPanBy(v),this.fire("move").fire("moveend");return this},flyTo:function(v,P,X){if(X=X||{},X.animate===!1||!jt.any3d)return this.setView(v,P,X);this._stop();var st=this.project(this.getCenter()),ft=this.project(v),Mt=this.getSize(),Dt=this._zoom;v=$(v),P=P===void 0?Dt:P;var Wt=Math.max(Mt.x,Mt.y),te=Wt*this.getZoomScale(Dt,P),de=ft.distanceTo(st)||1,De=1.42,Xe=De*De;function _r(fi){var sa=fi?-1:1,Kn=fi?te:Wt,Ni=te*te-Wt*Wt+sa*Xe*Xe*de*de,au=2*Kn*Xe*de,Io=Ni/au,u=Math.sqrt(Io*Io+1)-Io,f=u<1e-9?-18:Math.log(u);return f}function Rn(fi){return(Math.exp(fi)-Math.exp(-fi))/2}function Ks(fi){return(Math.exp(fi)+Math.exp(-fi))/2}function Js(fi){return Rn(fi)/Ks(fi)}var Zn=_r(0);function Ao(fi){return Wt*(Ks(Zn)/Ks(Zn+De*fi))}function Uo(fi){return Wt*(Ks(Zn)*Js(Zn+De*fi)-Rn(Zn))/Xe}function po(fi){return 1-Math.pow(1-fi,1.5)}var er=Date.now(),Hs=(_r(1)-Zn)/De,Vo=X.duration?1e3*X.duration:1e3*Hs*.8;function Qs(){var fi=(Date.now()-er)/Vo,sa=po(fi)*Hs;fi<=1?(this._flyToFrame=tt(Qs,this),this._move(this.unproject(st.add(ft.subtract(st).multiplyBy(Uo(sa)/de)),Dt),this.getScaleZoom(Wt/Ao(sa),Dt),{flyTo:!0})):this._move(v,P)._moveEnd(!0)}return this._moveStart(!0,X.noMoveStart),Qs.call(this),this},flyToBounds:function(v,P){var X=this._getBoundsCenterZoom(v,P);return this.flyTo(X.center,X.zoom,P)},setMaxBounds:function(v){return v=ot(v),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),v.isValid()?(this.options.maxBounds=v,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(v){var P=this.options.minZoom;return this.options.minZoom=v,this._loaded&&P!==v&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(v):this},setMaxZoom:function(v){var P=this.options.maxZoom;return this.options.maxZoom=v,this._loaded&&P!==v&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(v):this},panInsideBounds:function(v,P){this._enforcingBounds=!0;var X=this.getCenter(),st=this._limitCenter(X,this._zoom,ot(v));return X.equals(st)||this.panTo(st,P),this._enforcingBounds=!1,this},panInside:function(v,P){P=P||{};var X=R(P.paddingTopLeft||P.padding||[0,0]),st=R(P.paddingBottomRight||P.padding||[0,0]),ft=this.project(this.getCenter()),Mt=this.project(v),Dt=this.getPixelBounds(),Wt=H([Dt.min.add(X),Dt.max.subtract(st)]),te=Wt.getSize();if(!Wt.contains(Mt)){this._enforcingBounds=!0;var de=Mt.subtract(Wt.getCenter()),De=Wt.extend(Mt).getSize().subtract(te);ft.x+=de.x<0?-De.x:De.x,ft.y+=de.y<0?-De.y:De.y,this.panTo(this.unproject(ft),P),this._enforcingBounds=!1}return this},invalidateSize:function(v){if(!this._loaded)return this;v=e({animate:!1,pan:!0},v===!0?{animate:!0}:v);var P=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var X=this.getSize(),st=P.divideBy(2).round(),ft=X.divideBy(2).round(),Mt=st.subtract(ft);return!Mt.x&&!Mt.y?this:(v.animate&&v.pan?this.panBy(Mt):(v.pan&&this._rawPanBy(Mt),this.fire("move"),v.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:P,newSize:X}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(v){if(v=this._locateOptions=e({timeout:1e4,watch:!1},v),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var P=i(this._handleGeolocationResponse,this),X=i(this._handleGeolocationError,this);return v.watch?this._locationWatchId=navigator.geolocation.watchPosition(P,X,v):navigator.geolocation.getCurrentPosition(P,X,v),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(v){if(this._container._leaflet_id){var P=v.code,X=v.message||(P===1?"permission denied":P===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:P,message:"Geolocation error: "+X+"."})}},_handleGeolocationResponse:function(v){if(this._container._leaflet_id){var P=v.coords.latitude,X=v.coords.longitude,st=new dt(P,X),ft=st.toBounds(v.coords.accuracy*2),Mt=this._locateOptions;if(Mt.setView){var Dt=this.getBoundsZoom(ft);this.setView(st,Mt.maxZoom?Math.min(Dt,Mt.maxZoom):Dt)}var Wt={latlng:st,bounds:ft,timestamp:v.timestamp};for(var te in v.coords)typeof v.coords[te]=="number"&&(Wt[te]=v.coords[te]);this.fire("locationfound",Wt)}},addHandler:function(v,P){if(!P)return this;var X=this[v]=new P(this);return this._handlers.push(X),this.options[v]&&X.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var v;for(v in this._layers)this._layers[v].remove();for(v in this._panes)pe(this._panes[v]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(v,P){var X="leaflet-pane"+(v?" leaflet-"+v.replace("Pane","")+"-pane":""),st=we("div",X,P||this._mapPane);return v&&(this._panes[v]=st),st},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var v=this.getPixelBounds(),P=this.unproject(v.getBottomLeft()),X=this.unproject(v.getTopRight());return new rt(P,X)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(v,P,X){v=ot(v),X=R(X||[0,0]);var st=this.getZoom()||0,ft=this.getMinZoom(),Mt=this.getMaxZoom(),Dt=v.getNorthWest(),Wt=v.getSouthEast(),te=this.getSize().subtract(X),de=H(this.project(Wt,st),this.project(Dt,st)).getSize(),De=jt.any3d?this.options.zoomSnap:1,Xe=te.x/de.x,_r=te.y/de.y,Rn=P?Math.max(Xe,_r):Math.min(Xe,_r);return st=this.getScaleZoom(Rn,st),De&&(st=Math.round(st/(De/100))*(De/100),st=P?Math.ceil(st/De)*De:Math.floor(st/De)*De),Math.max(ft,Math.min(Mt,st))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(v,P){var X=this._getTopLeftPoint(v,P);return new F(X,X.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(v){return this.options.crs.getProjectedBounds(v===void 0?this.getZoom():v)},getPane:function(v){return typeof v=="string"?this._panes[v]:v},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(v,P){var X=this.options.crs;return P=P===void 0?this._zoom:P,X.scale(v)/X.scale(P)},getScaleZoom:function(v,P){var X=this.options.crs;P=P===void 0?this._zoom:P;var st=X.zoom(v*X.scale(P));return isNaN(st)?1/0:st},project:function(v,P){return P=P===void 0?this._zoom:P,this.options.crs.latLngToPoint($(v),P)},unproject:function(v,P){return P=P===void 0?this._zoom:P,this.options.crs.pointToLatLng(R(v),P)},layerPointToLatLng:function(v){var P=R(v).add(this.getPixelOrigin());return this.unproject(P)},latLngToLayerPoint:function(v){var P=this.project($(v))._round();return P._subtract(this.getPixelOrigin())},wrapLatLng:function(v){return this.options.crs.wrapLatLng($(v))},wrapLatLngBounds:function(v){return this.options.crs.wrapLatLngBounds(ot(v))},distance:function(v,P){return this.options.crs.distance($(v),$(P))},containerPointToLayerPoint:function(v){return R(v).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(v){return R(v).add(this._getMapPanePos())},containerPointToLatLng:function(v){var P=this.containerPointToLayerPoint(R(v));return this.layerPointToLatLng(P)},latLngToContainerPoint:function(v){return this.layerPointToContainerPoint(this.latLngToLayerPoint($(v)))},mouseEventToContainerPoint:function(v){return Vt(v,this._container)},mouseEventToLayerPoint:function(v){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(v))},mouseEventToLatLng:function(v){return this.layerPointToLatLng(this.mouseEventToLayerPoint(v))},_initContainer:function(v){var P=this._container=tr(v);if(P){if(P._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");je(P,"scroll",this._onScroll,this),this._containerId=o(P)},_initLayout:function(){var v=this._container;this._fadeAnimated=this.options.fadeAnimation&&jt.any3d,me(v,"leaflet-container"+(jt.touch?" leaflet-touch":"")+(jt.retina?" leaflet-retina":"")+(jt.ielt9?" leaflet-oldie":"")+(jt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var P=Ue(v,"position");P!=="absolute"&&P!=="relative"&&P!=="fixed"&&P!=="sticky"&&(v.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var v=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ze(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(v.markerPane,"leaflet-zoom-hide"),me(v.shadowPane,"leaflet-zoom-hide"))},_resetView:function(v,P,X){ze(this._mapPane,new k(0,0));var st=!this._loaded;this._loaded=!0,P=this._limitZoom(P),this.fire("viewprereset");var ft=this._zoom!==P;this._moveStart(ft,X)._move(v,P)._moveEnd(ft),this.fire("viewreset"),st&&this.fire("load")},_moveStart:function(v,P){return v&&this.fire("zoomstart"),P||this.fire("movestart"),this},_move:function(v,P,X,st){P===void 0&&(P=this._zoom);var ft=this._zoom!==P;return this._zoom=P,this._lastCenter=v,this._pixelOrigin=this._getNewPixelOrigin(v),st?X&&X.pinch&&this.fire("zoom",X):((ft||X&&X.pinch)&&this.fire("zoom",X),this.fire("move",X)),this},_moveEnd:function(v){return v&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(v){ze(this._mapPane,this._getMapPanePos().subtract(v))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(v){this._targets={},this._targets[o(this._container)]=this;var P=v?cr:je;P(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&P(window,"resize",this._onResize,this),jt.any3d&&this.options.transform3DLimit&&(v?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=tt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var v=this._getMapPanePos();Math.max(Math.abs(v.x),Math.abs(v.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(v,P){for(var X=[],st,ft=P==="mouseout"||P==="mouseover",Mt=v.target||v.srcElement,Dt=!1;Mt;){if(st=this._targets[o(Mt)],st&&(P==="click"||P==="preclick")&&this._draggableMoved(st)){Dt=!0;break}if(st&&st.listens(P,!0)&&(ft&&!ge(Mt,v)||(X.push(st),ft))||Mt===this._container)break;Mt=Mt.parentNode}return!X.length&&!Dt&&!ft&&this.listens(P,!0)&&(X=[this]),X},_isClickDisabled:function(v){for(;v&&v!==this._container;){if(v._leaflet_disable_click)return!0;v=v.parentNode}},_handleDOMEvent:function(v){var P=v.target||v.srcElement;if(!(!this._loaded||P._leaflet_disable_events||v.type==="click"&&this._isClickDisabled(P))){var X=v.type;X==="mousedown"&&hr(P),this._fireDOMEvent(v,X)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(v,P,X){if(v.type==="click"){var st=e({},v);st.type="preclick",this._fireDOMEvent(st,st.type,X)}var ft=this._findEventTargets(v,P);if(X){for(var Mt=[],Dt=0;Dt<X.length;Dt++)X[Dt].listens(P,!0)&&Mt.push(X[Dt]);ft=Mt.concat(ft)}if(ft.length){P==="contextmenu"&&Rt(v);var Wt=ft[0],te={originalEvent:v};if(v.type!=="keypress"&&v.type!=="keydown"&&v.type!=="keyup"){var de=Wt.getLatLng&&(!Wt._radius||Wt._radius<=10);te.containerPoint=de?this.latLngToContainerPoint(Wt.getLatLng()):this.mouseEventToContainerPoint(v),te.layerPoint=this.containerPointToLayerPoint(te.containerPoint),te.latlng=de?Wt.getLatLng():this.layerPointToLatLng(te.layerPoint)}for(Dt=0;Dt<ft.length;Dt++)if(ft[Dt].fire(P,te,!0),te.originalEvent._stopped||ft[Dt].options.bubblingMouseEvents===!1&&S(this._mouseEvents,P)!==-1)return}},_draggableMoved:function(v){return v=v.dragging&&v.dragging.enabled()?v:this,v.dragging&&v.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var v=0,P=this._handlers.length;v<P;v++)this._handlers[v].disable()},whenReady:function(v,P){return this._loaded?v.call(P||this,{target:this}):this.on("load",v,P),this},_getMapPanePos:function(){return Ti(this._mapPane)||new k(0,0)},_moved:function(){var v=this._getMapPanePos();return v&&!v.equals([0,0])},_getTopLeftPoint:function(v,P){var X=v&&P!==void 0?this._getNewPixelOrigin(v,P):this.getPixelOrigin();return X.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(v,P){var X=this.getSize()._divideBy(2);return this.project(v,P)._subtract(X)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(v,P,X){var st=this._getNewPixelOrigin(X,P);return this.project(v,P)._subtract(st)},_latLngBoundsToNewLayerBounds:function(v,P,X){var st=this._getNewPixelOrigin(X,P);return H([this.project(v.getSouthWest(),P)._subtract(st),this.project(v.getNorthWest(),P)._subtract(st),this.project(v.getSouthEast(),P)._subtract(st),this.project(v.getNorthEast(),P)._subtract(st)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(v){return this.latLngToLayerPoint(v).subtract(this._getCenterLayerPoint())},_limitCenter:function(v,P,X){if(!X)return v;var st=this.project(v,P),ft=this.getSize().divideBy(2),Mt=new F(st.subtract(ft),st.add(ft)),Dt=this._getBoundsOffset(Mt,X,P);return Math.abs(Dt.x)<=1&&Math.abs(Dt.y)<=1?v:this.unproject(st.add(Dt),P)},_limitOffset:function(v,P){if(!P)return v;var X=this.getPixelBounds(),st=new F(X.min.add(v),X.max.add(v));return v.add(this._getBoundsOffset(st,P))},_getBoundsOffset:function(v,P,X){var st=H(this.project(P.getNorthEast(),X),this.project(P.getSouthWest(),X)),ft=st.min.subtract(v.min),Mt=st.max.subtract(v.max),Dt=this._rebound(ft.x,-Mt.x),Wt=this._rebound(ft.y,-Mt.y);return new k(Dt,Wt)},_rebound:function(v,P){return v+P>0?Math.round(v-P)/2:Math.max(0,Math.ceil(v))-Math.max(0,Math.floor(P))},_limitZoom:function(v){var P=this.getMinZoom(),X=this.getMaxZoom(),st=jt.any3d?this.options.zoomSnap:1;return st&&(v=Math.round(v/st)*st),Math.max(P,Math.min(X,v))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ur(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(v,P){var X=this._getCenterOffset(v)._trunc();return(P&&P.animate)!==!0&&!this.getSize().contains(X)?!1:(this.panBy(X,P),!0)},_createAnimProxy:function(){var v=this._proxy=we("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(v),this.on("zoomanim",function(P){var X=he,st=this._proxy.style[X];nr(this._proxy,this.project(P.center,P.zoom),this.getZoomScale(P.zoom,1)),st===this._proxy.style[X]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var v=this.getCenter(),P=this.getZoom();nr(this._proxy,this.project(v,P),this.getZoomScale(P,1))},_catchTransitionEnd:function(v){this._animatingZoom&&v.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(v,P,X){if(this._animatingZoom)return!0;if(X=X||{},!this._zoomAnimated||X.animate===!1||this._nothingToAnimate()||Math.abs(P-this._zoom)>this.options.zoomAnimationThreshold)return!1;var st=this.getZoomScale(P),ft=this._getCenterOffset(v)._divideBy(1-1/st);return X.animate!==!0&&!this.getSize().contains(ft)?!1:(tt(function(){this._moveStart(!0,!1)._animateZoom(v,P,!0)},this),!0)},_animateZoom:function(v,P,X,st){this._mapPane&&(X&&(this._animatingZoom=!0,this._animateToCenter=v,this._animateToZoom=P,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:v,zoom:P,noUpdate:st}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ur(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function vi(v,P){return new be(v,P)}var mi=N.extend({options:{position:"topright"},initialize:function(v){g(this,v)},getPosition:function(){return this.options.position},setPosition:function(v){var P=this._map;return P&&P.removeControl(this),this.options.position=v,P&&P.addControl(this),this},getContainer:function(){return this._container},addTo:function(v){this.remove(),this._map=v;var P=this._container=this.onAdd(v),X=this.getPosition(),st=v._controlCorners[X];return me(P,"leaflet-control"),X.indexOf("bottom")!==-1?st.insertBefore(P,st.firstChild):st.appendChild(P),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(v){this._map&&v&&v.screenX>0&&v.screenY>0&&this._map.getContainer().focus()}}),Er=function(v){return new mi(v)};be.include({addControl:function(v){return v.addTo(this),this},removeControl:function(v){return v.remove(),this},_initControlPos:function(){var v=this._controlCorners={},P="leaflet-",X=this._controlContainer=we("div",P+"control-container",this._container);function st(ft,Mt){var Dt=P+ft+" "+P+Mt;v[ft+Mt]=we("div",Dt,X)}st("top","left"),st("top","right"),st("bottom","left"),st("bottom","right")},_clearControlPos:function(){for(var v in this._controlCorners)pe(this._controlCorners[v]);pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=mi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(v,P,X,st){return X<st?-1:st<X?1:0}},initialize:function(v,P,X){g(this,X),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var st in v)this._addLayer(v[st],st);for(st in P)this._addLayer(P[st],st,!0)},onAdd:function(v){this._initLayout(),this._update(),this._map=v,v.on("zoomend",this._checkDisabledLayers,this);for(var P=0;P<this._layers.length;P++)this._layers[P].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(v){return mi.prototype.addTo.call(this,v),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(v,P){return this._addLayer(v,P),this._map?this._update():this},addOverlay:function(v,P){return this._addLayer(v,P,!0),this._map?this._update():this},removeLayer:function(v){v.off("add remove",this._onLayerChange,this);var P=this._getLayer(o(v));return P&&this._layers.splice(this._layers.indexOf(P),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var v=this._map.getSize().y-(this._container.offsetTop+50);return v<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=v+"px"):ur(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ur(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var v="leaflet-control-layers",P=this._container=we("div",v),X=this.options.collapsed;P.setAttribute("aria-haspopup",!0),Lt(P),xt(P);var st=this._section=we("section",v+"-list");X&&(this._map.on("click",this.collapse,this),je(P,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ft=this._layersLink=we("a",v+"-toggle",P);ft.href="#",ft.title="Layers",ft.setAttribute("role","button"),je(ft,{keydown:function(Mt){Mt.keyCode===13&&this._expandSafely()},click:function(Mt){Rt(Mt),this._expandSafely()}},this),X||this.expand(),this._baseLayersList=we("div",v+"-base",st),this._separator=we("div",v+"-separator",st),this._overlaysList=we("div",v+"-overlays",st),P.appendChild(st)},_getLayer:function(v){for(var P=0;P<this._layers.length;P++)if(this._layers[P]&&o(this._layers[P].layer)===v)return this._layers[P]},_addLayer:function(v,P,X){this._map&&v.on("add remove",this._onLayerChange,this),this._layers.push({layer:v,name:P,overlay:X}),this.options.sortLayers&&this._layers.sort(i(function(st,ft){return this.options.sortFunction(st.layer,ft.layer,st.name,ft.name)},this)),this.options.autoZIndex&&v.setZIndex&&(this._lastZIndex++,v.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;yr(this._baseLayersList),yr(this._overlaysList),this._layerControlInputs=[];var v,P,X,st,ft=0;for(X=0;X<this._layers.length;X++)st=this._layers[X],this._addItem(st),P=P||st.overlay,v=v||!st.overlay,ft+=st.overlay?0:1;return this.options.hideSingleBase&&(v=v&&ft>1,this._baseLayersList.style.display=v?"":"none"),this._separator.style.display=P&&v?"":"none",this},_onLayerChange:function(v){this._handlingClick||this._update();var P=this._getLayer(o(v.target)),X=P.overlay?v.type==="add"?"overlayadd":"overlayremove":v.type==="add"?"baselayerchange":null;X&&this._map.fire(X,P)},_createRadioElement:function(v,P){var X='<input type="radio" class="leaflet-control-layers-selector" name="'+v+'"'+(P?' checked="checked"':"")+"/>",st=document.createElement("div");return st.innerHTML=X,st.firstChild},_addItem:function(v){var P=document.createElement("label"),X=this._map.hasLayer(v.layer),st;v.overlay?(st=document.createElement("input"),st.type="checkbox",st.className="leaflet-control-layers-selector",st.defaultChecked=X):st=this._createRadioElement("leaflet-base-layers_"+o(this),X),this._layerControlInputs.push(st),st.layerId=o(v.layer),je(st,"click",this._onInputClick,this);var ft=document.createElement("span");ft.innerHTML=" "+v.name;var Mt=document.createElement("span");P.appendChild(Mt),Mt.appendChild(st),Mt.appendChild(ft);var Dt=v.overlay?this._overlaysList:this._baseLayersList;return Dt.appendChild(P),this._checkDisabledLayers(),P},_onInputClick:function(){var v=this._layerControlInputs,P,X,st=[],ft=[];this._handlingClick=!0;for(var Mt=v.length-1;Mt>=0;Mt--)P=v[Mt],X=this._getLayer(P.layerId).layer,P.checked?st.push(X):P.checked||ft.push(X);for(Mt=0;Mt<ft.length;Mt++)this._map.hasLayer(ft[Mt])&&this._map.removeLayer(ft[Mt]);for(Mt=0;Mt<st.length;Mt++)this._map.hasLayer(st[Mt])||this._map.addLayer(st[Mt]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var v=this._layerControlInputs,P,X,st=this._map.getZoom(),ft=v.length-1;ft>=0;ft--)P=v[ft],X=this._getLayer(P.layerId).layer,P.disabled=X.options.minZoom!==void 0&&st<X.options.minZoom||X.options.maxZoom!==void 0&&st>X.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var v=this._section;je(v,"click",Rt),this.expand(),setTimeout(function(){cr(v,"click",Rt)})}}),qn=function(v,P,X){return new an(v,P,X)},Mi=mi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(v){var P="leaflet-control-zoom",X=we("div",P+" leaflet-bar"),st=this.options;return this._zoomInButton=this._createButton(st.zoomInText,st.zoomInTitle,P+"-in",X,this._zoomIn),this._zoomOutButton=this._createButton(st.zoomOutText,st.zoomOutTitle,P+"-out",X,this._zoomOut),this._updateDisabled(),v.on("zoomend zoomlevelschange",this._updateDisabled,this),X},onRemove:function(v){v.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(v){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(v.shiftKey?3:1))},_zoomOut:function(v){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(v.shiftKey?3:1))},_createButton:function(v,P,X,st,ft){var Mt=we("a",X,st);return Mt.innerHTML=v,Mt.href="#",Mt.title=P,Mt.setAttribute("role","button"),Mt.setAttribute("aria-label",P),Lt(Mt),je(Mt,"click",Pt),je(Mt,"click",ft,this),je(Mt,"click",this._refocusOnMap,this),Mt},_updateDisabled:function(){var v=this._map,P="leaflet-disabled";ur(this._zoomInButton,P),ur(this._zoomOutButton,P),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||v._zoom===v.getMinZoom())&&(me(this._zoomOutButton,P),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||v._zoom===v.getMaxZoom())&&(me(this._zoomInButton,P),this._zoomInButton.setAttribute("aria-disabled","true"))}});be.mergeOptions({zoomControl:!0}),be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Mi,this.addControl(this.zoomControl))});var gs=function(v){return new Mi(v)},Bi=mi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(v){var P="leaflet-control-scale",X=we("div",P),st=this.options;return this._addScales(st,P+"-line",X),v.on(st.updateWhenIdle?"moveend":"move",this._update,this),v.whenReady(this._update,this),X},onRemove:function(v){v.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(v,P,X){v.metric&&(this._mScale=we("div",P,X)),v.imperial&&(this._iScale=we("div",P,X))},_update:function(){var v=this._map,P=v.getSize().y/2,X=v.distance(v.containerPointToLatLng([0,P]),v.containerPointToLatLng([this.options.maxWidth,P]));this._updateScales(X)},_updateScales:function(v){this.options.metric&&v&&this._updateMetric(v),this.options.imperial&&v&&this._updateImperial(v)},_updateMetric:function(v){var P=this._getRoundNum(v),X=P<1e3?P+" m":P/1e3+" km";this._updateScale(this._mScale,X,P/v)},_updateImperial:function(v){var P=v*3.2808399,X,st,ft;P>5280?(X=P/5280,st=this._getRoundNum(X),this._updateScale(this._iScale,st+" mi",st/X)):(ft=this._getRoundNum(P),this._updateScale(this._iScale,ft+" ft",ft/P))},_updateScale:function(v,P,X){v.style.width=Math.round(this.options.maxWidth*X)+"px",v.innerHTML=P},_getRoundNum:function(v){var P=Math.pow(10,(Math.floor(v)+"").length-1),X=v/P;return X=X>=10?10:X>=5?5:X>=3?3:X>=2?2:1,P*X}}),Wn=function(v){return new Bi(v)},es='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Is=mi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(jt.inlineSvg?es+" ":"")+"Leaflet</a>"},initialize:function(v){g(this,v),this._attributions={}},onAdd:function(v){v.attributionControl=this,this._container=we("div","leaflet-control-attribution"),Lt(this._container);for(var P in v._layers)v._layers[P].getAttribution&&this.addAttribution(v._layers[P].getAttribution());return this._update(),v.on("layeradd",this._addAttribution,this),this._container},onRemove:function(v){v.off("layeradd",this._addAttribution,this)},_addAttribution:function(v){v.layer.getAttribution&&(this.addAttribution(v.layer.getAttribution()),v.layer.once("remove",function(){this.removeAttribution(v.layer.getAttribution())},this))},setPrefix:function(v){return this.options.prefix=v,this._update(),this},addAttribution:function(v){return v?(this._attributions[v]||(this._attributions[v]=0),this._attributions[v]++,this._update(),this):this},removeAttribution:function(v){return v?(this._attributions[v]&&(this._attributions[v]--,this._update()),this):this},_update:function(){if(this._map){var v=[];for(var P in this._attributions)this._attributions[P]&&v.push(P);var X=[];this.options.prefix&&X.push(this.options.prefix),v.length&&X.push(v.join(", ")),this._container.innerHTML=X.join(' <span aria-hidden="true">|</span> ')}}});be.mergeOptions({attributionControl:!0}),be.addInitHook(function(){this.options.attributionControl&&new Is().addTo(this)});var Si=function(v){return new Is(v)};mi.Layers=an,mi.Zoom=Mi,mi.Scale=Bi,mi.Attribution=Is,Er.layers=qn,Er.zoom=gs,Er.scale=Wn,Er.attribution=Si;var Pe=N.extend({initialize:function(v){this._map=v},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Pe.addTo=function(v,P){return v.addHandler(P,this),this};var ba={Events:w},lo=jt.touch?"touchstart mousedown":"mousedown",Fi=C.extend({options:{clickTolerance:3},initialize:function(v,P,X,st){g(this,st),this._element=v,this._dragStartTarget=P||v,this._preventOutline=X},enable:function(){this._enabled||(je(this._dragStartTarget,lo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fi._dragging===this&&this.finishDrag(!0),cr(this._dragStartTarget,lo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(v){if(this._enabled&&(this._moved=!1,!wr(this._element,"leaflet-zoom-anim"))){if(v.touches&&v.touches.length!==1){Fi._dragging===this&&this.finishDrag();return}if(!(Fi._dragging||v.shiftKey||v.which!==1&&v.button!==1&&!v.touches)&&(Fi._dragging=this,this._preventOutline&&hr(this._element),gr(),Ri(),!this._moving)){this.fire("down");var P=v.touches?v.touches[0]:v,X=Tr(this._element);this._startPoint=new k(P.clientX,P.clientY),this._startPos=Ti(this._element),this._parentScale=$i(X);var st=v.type==="mousedown";je(document,st?"mousemove":"touchmove",this._onMove,this),je(document,st?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(v){if(this._enabled){if(v.touches&&v.touches.length>1){this._moved=!0;return}var P=v.touches&&v.touches.length===1?v.touches[0]:v,X=new k(P.clientX,P.clientY)._subtract(this._startPoint);!X.x&&!X.y||Math.abs(X.x)+Math.abs(X.y)<this.options.clickTolerance||(X.x/=this._parentScale.x,X.y/=this._parentScale.y,Rt(v),this._moved||(this.fire("dragstart"),this._moved=!0,me(document.body,"leaflet-dragging"),this._lastTarget=v.target||v.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(X),this._moving=!0,this._lastEvent=v,this._updatePosition())}},_updatePosition:function(){var v={originalEvent:this._lastEvent};this.fire("predrag",v),ze(this._element,this._newPos),this.fire("drag",v)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(v){ur(document.body,"leaflet-dragging"),this._lastTarget&&(ur(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),cr(document,"mousemove touchmove",this._onMove,this),cr(document,"mouseup touchend touchcancel",this._onUp,this),_i(),bn(),this._moved&&this._moving&&this.fire("dragend",{noInertia:v,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Fi._dragging=!1}});function hs(v,P){if(!P||!v.length)return v.slice();var X=P*P;return v=Pr(v,X),v=al(v,X),v}function Vs(v,P,X){return Math.sqrt(dr(v,P,X,!0))}function ra(v,P,X){return dr(v,P,X)}function al(v,P){var X=v.length,st=typeof Uint8Array<"u"?Uint8Array:Array,ft=new st(X);ft[0]=ft[X-1]=1,_a(v,ft,P,0,X-1);var Mt,Dt=[];for(Mt=0;Mt<X;Mt++)ft[Mt]&&Dt.push(v[Mt]);return Dt}function _a(v,P,X,st,ft){var Mt=0,Dt,Wt,te;for(Wt=st+1;Wt<=ft-1;Wt++)te=dr(v[Wt],v[st],v[ft],!0),te>Mt&&(Dt=Wt,Mt=te);Mt>X&&(P[Dt]=1,_a(v,P,X,st,Dt),_a(v,P,X,Dt,ft))}function Pr(v,P){for(var X=[v[0]],st=1,ft=0,Mt=v.length;st<Mt;st++)su(v[st],v[ft])>P&&(X.push(v[st]),ft=st);return ft<Mt-1&&X.push(v[Mt-1]),X}var Ss;function ki(v,P,X,st,ft){var Mt=st?Ss:Zi(v,X),Dt=Zi(P,X),Wt,te,de;for(Ss=Dt;;){if(!(Mt|Dt))return[v,P];if(Mt&Dt)return!1;Wt=Mt||Dt,te=uo(v,P,Wt,X,ft),de=Zi(te,X),Wt===Mt?(v=te,Mt=de):(P=te,Dt=de)}}function uo(v,P,X,st,ft){var Mt=P.x-v.x,Dt=P.y-v.y,Wt=st.min,te=st.max,de,De;return X&8?(de=v.x+Mt*(te.y-v.y)/Dt,De=te.y):X&4?(de=v.x+Mt*(Wt.y-v.y)/Dt,De=Wt.y):X&2?(de=te.x,De=v.y+Dt*(te.x-v.x)/Mt):X&1&&(de=Wt.x,De=v.y+Dt*(Wt.x-v.x)/Mt),new k(de,De,ft)}function Zi(v,P){var X=0;return v.x<P.min.x?X|=1:v.x>P.max.x&&(X|=2),v.y<P.min.y?X|=4:v.y>P.max.y&&(X|=8),X}function su(v,P){var X=P.x-v.x,st=P.y-v.y;return X*X+st*st}function dr(v,P,X,st){var ft=P.x,Mt=P.y,Dt=X.x-ft,Wt=X.y-Mt,te=Dt*Dt+Wt*Wt,de;return te>0&&(de=((v.x-ft)*Dt+(v.y-Mt)*Wt)/te,de>1?(ft=X.x,Mt=X.y):de>0&&(ft+=Dt*de,Mt+=Wt*de)),Dt=v.x-ft,Wt=v.y-Mt,st?Dt*Dt+Wt*Wt:new k(ft,Mt)}function _n(v){return!x(v[0])||typeof v[0][0]!="object"&&typeof v[0][0]<"u"}function wi(v){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_n(v)}function Ho(v,P){var X,st,ft,Mt,Dt,Wt,te,de;if(!v||v.length===0)throw new Error("latlngs not passed");_n(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var De=[];for(var Xe in v)De.push(P.project($(v[Xe])));var _r=De.length;for(X=0,st=0;X<_r-1;X++)st+=De[X].distanceTo(De[X+1])/2;if(st===0)de=De[0];else for(X=0,Mt=0;X<_r-1;X++)if(Dt=De[X],Wt=De[X+1],ft=Dt.distanceTo(Wt),Mt+=ft,Mt>st){te=(Mt-st)/ft,de=[Wt.x-te*(Wt.x-Dt.x),Wt.y-te*(Wt.y-Dt.y)];break}return P.unproject(R(de))}var Tn={__proto__:null,simplify:hs,pointToSegmentDistance:Vs,closestPointOnSegment:ra,clipSegment:ki,_getEdgeIntersection:uo,_getBitCode:Zi,_sqClosestPointOnSegment:dr,isFlat:_n,_flat:wi,polylineCenter:Ho};function ho(v,P,X){var st,ft=[1,4,2,8],Mt,Dt,Wt,te,de,De,Xe,_r;for(Mt=0,De=v.length;Mt<De;Mt++)v[Mt]._code=Zi(v[Mt],P);for(Wt=0;Wt<4;Wt++){for(Xe=ft[Wt],st=[],Mt=0,De=v.length,Dt=De-1;Mt<De;Dt=Mt++)te=v[Mt],de=v[Dt],te._code&Xe?de._code&Xe||(_r=uo(de,te,Xe,P,X),_r._code=Zi(_r,P),st.push(_r)):(de._code&Xe&&(_r=uo(de,te,Xe,P,X),_r._code=Zi(_r,P),st.push(_r)),st.push(te));v=st}return v}function ll(v,P){var X,st,ft,Mt,Dt,Wt,te,de,De;if(!v||v.length===0)throw new Error("latlngs not passed");_n(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var Xe=[];for(var _r in v)Xe.push(P.project($(v[_r])));var Rn=Xe.length;for(Wt=te=de=0,X=0,st=Rn-1;X<Rn;st=X++)ft=Xe[X],Mt=Xe[st],Dt=ft.y*Mt.x-Mt.y*ft.x,te+=(ft.x+Mt.x)*Dt,de+=(ft.y+Mt.y)*Dt,Wt+=Dt*3;return Wt===0?De=Xe[0]:De=[te/Wt,de/Wt],P.unproject(R(De))}var co={__proto__:null,clipPolygon:ho,polygonCenter:ll},Cr={project:function(v){return new k(v.lng,v.lat)},unproject:function(v){return new dt(v.y,v.x)},bounds:new F([-180,-90],[180,90])},Dn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new F([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(v){var P=Math.PI/180,X=this.R,st=v.lat*P,ft=this.R_MINOR/X,Mt=Math.sqrt(1-ft*ft),Dt=Mt*Math.sin(st),Wt=Math.tan(Math.PI/4-st/2)/Math.pow((1-Dt)/(1+Dt),Mt/2);return st=-X*Math.log(Math.max(Wt,1e-10)),new k(v.lng*P*X,st)},unproject:function(v){for(var P=180/Math.PI,X=this.R,st=this.R_MINOR/X,ft=Math.sqrt(1-st*st),Mt=Math.exp(-v.y/X),Dt=Math.PI/2-2*Math.atan(Mt),Wt=0,te=.1,de;Wt<15&&Math.abs(te)>1e-7;Wt++)de=ft*Math.sin(Dt),de=Math.pow((1-de)/(1+de),ft/2),te=Math.PI/2-2*Math.atan(Mt*de)-Dt,Dt+=te;return new dt(Dt*P,v.x*P/X)}},Go={__proto__:null,LonLat:Cr,Mercator:Dn,SphericalMercator:it},ks=e({},W,{code:"EPSG:3395",projection:Dn,transformation:function(){var v=.5/(Math.PI*Dn.R);return wt(v,.5,-v,.5)}()}),Bn=e({},W,{code:"EPSG:4326",projection:Cr,transformation:wt(1/180,1,-1/180,.5)}),mn=e({},ct,{projection:Cr,transformation:wt(1,0,-1,0),scale:function(v){return Math.pow(2,v)},zoom:function(v){return Math.log(v)/Math.LN2},distance:function(v,P){var X=P.lng-v.lng,st=P.lat-v.lat;return Math.sqrt(X*X+st*st)},infinite:!0});ct.Earth=W,ct.EPSG3395=ks,ct.EPSG3857=_t,ct.EPSG900913=Ct,ct.EPSG4326=Bn,ct.Simple=mn;var Ls=C.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(v){return v.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(v){return v&&v.removeLayer(this),this},getPane:function(v){return this._map.getPane(v?this.options[v]||v:this.options.pane)},addInteractiveTarget:function(v){return this._map._targets[o(v)]=this,this},removeInteractiveTarget:function(v){return delete this._map._targets[o(v)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(v){var P=v.target;if(P.hasLayer(this)){if(this._map=P,this._zoomAnimated=P._zoomAnimated,this.getEvents){var X=this.getEvents();P.on(X,this),this.once("remove",function(){P.off(X,this)},this)}this.onAdd(P),this.fire("add"),P.fire("layeradd",{layer:this})}}});be.include({addLayer:function(v){if(!v._layerAdd)throw new Error("The provided object is not a Layer.");var P=o(v);return this._layers[P]?this:(this._layers[P]=v,v._mapToAdd=this,v.beforeAdd&&v.beforeAdd(this),this.whenReady(v._layerAdd,v),this)},removeLayer:function(v){var P=o(v);return this._layers[P]?(this._loaded&&v.onRemove(this),delete this._layers[P],this._loaded&&(this.fire("layerremove",{layer:v}),v.fire("remove")),v._map=v._mapToAdd=null,this):this},hasLayer:function(v){return o(v)in this._layers},eachLayer:function(v,P){for(var X in this._layers)v.call(P,this._layers[X]);return this},_addLayers:function(v){v=v?x(v)?v:[v]:[];for(var P=0,X=v.length;P<X;P++)this.addLayer(v[P])},_addZoomLimit:function(v){(!isNaN(v.options.maxZoom)||!isNaN(v.options.minZoom))&&(this._zoomBoundLayers[o(v)]=v,this._updateZoomLevels())},_removeZoomLimit:function(v){var P=o(v);this._zoomBoundLayers[P]&&(delete this._zoomBoundLayers[P],this._updateZoomLevels())},_updateZoomLevels:function(){var v=1/0,P=-1/0,X=this._getZoomSpan();for(var st in this._zoomBoundLayers){var ft=this._zoomBoundLayers[st].options;v=ft.minZoom===void 0?v:Math.min(v,ft.minZoom),P=ft.maxZoom===void 0?P:Math.max(P,ft.maxZoom)}this._layersMaxZoom=P===-1/0?void 0:P,this._layersMinZoom=v===1/0?void 0:v,X!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ko=Ls.extend({initialize:function(v,P){g(this,P),this._layers={};var X,st;if(v)for(X=0,st=v.length;X<st;X++)this.addLayer(v[X])},addLayer:function(v){var P=this.getLayerId(v);return this._layers[P]=v,this._map&&this._map.addLayer(v),this},removeLayer:function(v){var P=v in this._layers?v:this.getLayerId(v);return this._map&&this._layers[P]&&this._map.removeLayer(this._layers[P]),delete this._layers[P],this},hasLayer:function(v){var P=typeof v=="number"?v:this.getLayerId(v);return P in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(v){var P=Array.prototype.slice.call(arguments,1),X,st;for(X in this._layers)st=this._layers[X],st[v]&&st[v].apply(st,P);return this},onAdd:function(v){this.eachLayer(v.addLayer,v)},onRemove:function(v){this.eachLayer(v.removeLayer,v)},eachLayer:function(v,P){for(var X in this._layers)v.call(P,this._layers[X]);return this},getLayer:function(v){return this._layers[v]},getLayers:function(){var v=[];return this.eachLayer(v.push,v),v},setZIndex:function(v){return this.invoke("setZIndex",v)},getLayerId:function(v){return o(v)}}),qs=function(v,P){return new ko(v,P)},Ki=ko.extend({addLayer:function(v){return this.hasLayer(v)?this:(v.addEventParent(this),ko.prototype.addLayer.call(this,v),this.fire("layeradd",{layer:v}))},removeLayer:function(v){return this.hasLayer(v)?(v in this._layers&&(v=this._layers[v]),v.removeEventParent(this),ko.prototype.removeLayer.call(this,v),this.fire("layerremove",{layer:v})):this},setStyle:function(v){return this.invoke("setStyle",v)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var v=new rt;for(var P in this._layers){var X=this._layers[P];v.extend(X.getBounds?X.getBounds():X.getLatLng())}return v}}),fo=function(v,P){return new Ki(v,P)},ln=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(v){g(this,v)},createIcon:function(v){return this._createIcon("icon",v)},createShadow:function(v){return this._createIcon("shadow",v)},_createIcon:function(v,P){var X=this._getIconUrl(v);if(!X){if(v==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var st=this._createImg(X,P&&P.tagName==="IMG"?P:null);return this._setIconStyles(st,v),(this.options.crossOrigin||this.options.crossOrigin==="")&&(st.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),st},_setIconStyles:function(v,P){var X=this.options,st=X[P+"Size"];typeof st=="number"&&(st=[st,st]);var ft=R(st),Mt=R(P==="shadow"&&X.shadowAnchor||X.iconAnchor||ft&&ft.divideBy(2,!0));v.className="leaflet-marker-"+P+" "+(X.className||""),Mt&&(v.style.marginLeft=-Mt.x+"px",v.style.marginTop=-Mt.y+"px"),ft&&(v.style.width=ft.x+"px",v.style.height=ft.y+"px")},_createImg:function(v,P){return P=P||document.createElement("img"),P.src=v,P},_getIconUrl:function(v){return jt.retina&&this.options[v+"RetinaUrl"]||this.options[v+"Url"]}});function ys(v){return new ln(v)}var Xn=ln.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(v){return typeof Xn.imagePath!="string"&&(Xn.imagePath=this._detectIconPath()),(this.options.imagePath||Xn.imagePath)+ln.prototype._getIconUrl.call(this,v)},_stripUrl:function(v){var P=function(X,st,ft){var Mt=st.exec(X);return Mt&&Mt[ft]};return v=P(v,/^url\((['"])?(.+)\1\)$/,2),v&&P(v,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var v=we("div","leaflet-default-icon-path",document.body),P=Ue(v,"background-image")||Ue(v,"backgroundImage");if(document.body.removeChild(v),P=this._stripUrl(P),P)return P;var X=document.querySelector('link[href$="leaflet.css"]');return X?X.href.substring(0,X.href.length-11-1):""}}),Ws=Pe.extend({initialize:function(v){this._marker=v},addHooks:function(){var v=this._marker._icon;this._draggable||(this._draggable=new Fi(v,v,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(v,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ur(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(v){var P=this._marker,X=P._map,st=this._marker.options.autoPanSpeed,ft=this._marker.options.autoPanPadding,Mt=Ti(P._icon),Dt=X.getPixelBounds(),Wt=X.getPixelOrigin(),te=H(Dt.min._subtract(Wt).add(ft),Dt.max._subtract(Wt).subtract(ft));if(!te.contains(Mt)){var de=R((Math.max(te.max.x,Mt.x)-te.max.x)/(Dt.max.x-te.max.x)-(Math.min(te.min.x,Mt.x)-te.min.x)/(Dt.min.x-te.min.x),(Math.max(te.max.y,Mt.y)-te.max.y)/(Dt.max.y-te.max.y)-(Math.min(te.min.y,Mt.y)-te.min.y)/(Dt.min.y-te.min.y)).multiplyBy(st);X.panBy(de,{animate:!1}),this._draggable._newPos._add(de),this._draggable._startPos._add(de),ze(P._icon,this._draggable._newPos),this._onDrag(v),this._panRequest=tt(this._adjustPan.bind(this,v))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(v){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=tt(this._adjustPan.bind(this,v)))},_onDrag:function(v){var P=this._marker,X=P._shadow,st=Ti(P._icon),ft=P._map.layerPointToLatLng(st);X&&ze(X,st),P._latlng=ft,v.latlng=ft,v.oldLatLng=this._oldLatLng,P.fire("move",v).fire("drag",v)},_onDragEnd:function(v){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",v)}}),cs=Ls.extend({options:{icon:new Xn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(v,P){g(this,P),this._latlng=$(v)},onAdd:function(v){this._zoomAnimated=this._zoomAnimated&&v.options.markerZoomAnimation,this._zoomAnimated&&v.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(v){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&v.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(v){var P=this._latlng;return this._latlng=$(v),this.update(),this.fire("move",{oldLatLng:P,latlng:this._latlng})},setZIndexOffset:function(v){return this.options.zIndexOffset=v,this.update()},getIcon:function(){return this.options.icon},setIcon:function(v){return this.options.icon=v,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var v=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(v)}return this},_initIcon:function(){var v=this.options,P="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),X=v.icon.createIcon(this._icon),st=!1;X!==this._icon&&(this._icon&&this._removeIcon(),st=!0,v.title&&(X.title=v.title),X.tagName==="IMG"&&(X.alt=v.alt||"")),me(X,P),v.keyboard&&(X.tabIndex="0",X.setAttribute("role","button")),this._icon=X,v.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(X,"focus",this._panOnFocus,this);var ft=v.icon.createShadow(this._shadow),Mt=!1;ft!==this._shadow&&(this._removeShadow(),Mt=!0),ft&&(me(ft,P),ft.alt=""),this._shadow=ft,v.opacity<1&&this._updateOpacity(),st&&this.getPane().appendChild(this._icon),this._initInteraction(),ft&&Mt&&this.getPane(v.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&cr(this._icon,"focus",this._panOnFocus,this),pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pe(this._shadow),this._shadow=null},_setPos:function(v){this._icon&&ze(this._icon,v),this._shadow&&ze(this._shadow,v),this._zIndex=v.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(v){this._icon&&(this._icon.style.zIndex=this._zIndex+v)},_animateZoom:function(v){var P=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center).round();this._setPos(P)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ws)){var v=this.options.draggable;this.dragging&&(v=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ws(this),v&&this.dragging.enable()}},setOpacity:function(v){return this.options.opacity=v,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var v=this.options.opacity;this._icon&&Se(this._icon,v),this._shadow&&Se(this._shadow,v)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var v=this._map;if(v){var P=this.options.icon.options,X=P.iconSize?R(P.iconSize):R(0,0),st=P.iconAnchor?R(P.iconAnchor):R(0,0);v.panInside(this._latlng,{paddingTopLeft:st,paddingBottomRight:X.subtract(st)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function un(v,P){return new cs(v,P)}var Xs=Ls.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(v){this._renderer=v.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(v){return g(this,v),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&v&&Object.prototype.hasOwnProperty.call(v,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Lo=Xs.extend({options:{fill:!0,radius:10},initialize:function(v,P){g(this,P),this._latlng=$(v),this._radius=this.options.radius},setLatLng:function(v){var P=this._latlng;return this._latlng=$(v),this.redraw(),this.fire("move",{oldLatLng:P,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(v){return this.options.radius=this._radius=v,this.redraw()},getRadius:function(){return this._radius},setStyle:function(v){var P=v&&v.radius||this._radius;return Xs.prototype.setStyle.call(this,v),this.setRadius(P),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var v=this._radius,P=this._radiusY||v,X=this._clickTolerance(),st=[v+X,P+X];this._pxBounds=new F(this._point.subtract(st),this._point.add(st))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(v){return v.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wn(v,P){return new Lo(v,P)}var Ts=Lo.extend({initialize:function(v,P,X){if(typeof P=="number"&&(P=e({},X,{radius:P})),g(this,P),this._latlng=$(v),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(v){return this._mRadius=v,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var v=[this._radius,this._radiusY||this._radius];return new rt(this._map.layerPointToLatLng(this._point.subtract(v)),this._map.layerPointToLatLng(this._point.add(v)))},setStyle:Xs.prototype.setStyle,_project:function(){var v=this._latlng.lng,P=this._latlng.lat,X=this._map,st=X.options.crs;if(st.distance===W.distance){var ft=Math.PI/180,Mt=this._mRadius/W.R/ft,Dt=X.project([P+Mt,v]),Wt=X.project([P-Mt,v]),te=Dt.add(Wt).divideBy(2),de=X.unproject(te).lat,De=Math.acos((Math.cos(Mt*ft)-Math.sin(P*ft)*Math.sin(de*ft))/(Math.cos(P*ft)*Math.cos(de*ft)))/ft;(isNaN(De)||De===0)&&(De=Mt/Math.cos(Math.PI/180*P)),this._point=te.subtract(X.getPixelOrigin()),this._radius=isNaN(De)?0:te.x-X.project([de,v-De]).x,this._radiusY=te.y-Dt.y}else{var Xe=st.unproject(st.project(this._latlng).subtract([this._mRadius,0]));this._point=X.latLngToLayerPoint(this._latlng),this._radius=this._point.x-X.latLngToLayerPoint(Xe).x}this._updateBounds()}});function vs(v,P,X){return new Ts(v,P,X)}var Ns=Xs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(v,P){g(this,P),this._setLatLngs(v)},getLatLngs:function(){return this._latlngs},setLatLngs:function(v){return this._setLatLngs(v),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(v){for(var P=1/0,X=null,st=dr,ft,Mt,Dt=0,Wt=this._parts.length;Dt<Wt;Dt++)for(var te=this._parts[Dt],de=1,De=te.length;de<De;de++){ft=te[de-1],Mt=te[de];var Xe=st(v,ft,Mt,!0);Xe<P&&(P=Xe,X=st(v,ft,Mt))}return X&&(X.distance=Math.sqrt(P)),X},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ho(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(v,P){return P=P||this._defaultShape(),v=$(v),P.push(v),this._bounds.extend(v),this.redraw()},_setLatLngs:function(v){this._bounds=new rt,this._latlngs=this._convertLatLngs(v)},_defaultShape:function(){return _n(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(v){for(var P=[],X=_n(v),st=0,ft=v.length;st<ft;st++)X?(P[st]=$(v[st]),this._bounds.extend(P[st])):P[st]=this._convertLatLngs(v[st]);return P},_project:function(){var v=new F;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,v),this._bounds.isValid()&&v.isValid()&&(this._rawPxBounds=v,this._updateBounds())},_updateBounds:function(){var v=this._clickTolerance(),P=new k(v,v);this._rawPxBounds&&(this._pxBounds=new F([this._rawPxBounds.min.subtract(P),this._rawPxBounds.max.add(P)]))},_projectLatlngs:function(v,P,X){var st=v[0]instanceof dt,ft=v.length,Mt,Dt;if(st){for(Dt=[],Mt=0;Mt<ft;Mt++)Dt[Mt]=this._map.latLngToLayerPoint(v[Mt]),X.extend(Dt[Mt]);P.push(Dt)}else for(Mt=0;Mt<ft;Mt++)this._projectLatlngs(v[Mt],P,X)},_clipPoints:function(){var v=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}var P=this._parts,X,st,ft,Mt,Dt,Wt,te;for(X=0,ft=0,Mt=this._rings.length;X<Mt;X++)for(te=this._rings[X],st=0,Dt=te.length;st<Dt-1;st++)Wt=ki(te[st],te[st+1],v,st,!0),Wt&&(P[ft]=P[ft]||[],P[ft].push(Wt[0]),(Wt[1]!==te[st+1]||st===Dt-2)&&(P[ft].push(Wt[1]),ft++))}},_simplifyPoints:function(){for(var v=this._parts,P=this.options.smoothFactor,X=0,st=v.length;X<st;X++)v[X]=hs(v[X],P)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(v,P){var X,st,ft,Mt,Dt,Wt,te=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(X=0,Mt=this._parts.length;X<Mt;X++)for(Wt=this._parts[X],st=0,Dt=Wt.length,ft=Dt-1;st<Dt;ft=st++)if(!(!P&&st===0)&&Vs(v,Wt[ft],Wt[st])<=te)return!0;return!1}});function Pn(v,P){return new Ns(v,P)}Ns._flat=wi;var To=Ns.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ll(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(v){var P=Ns.prototype._convertLatLngs.call(this,v),X=P.length;return X>=2&&P[0]instanceof dt&&P[0].equals(P[X-1])&&P.pop(),P},_setLatLngs:function(v){Ns.prototype._setLatLngs.call(this,v),_n(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _n(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var v=this._renderer._bounds,P=this.options.weight,X=new k(P,P);if(v=new F(v.min.subtract(X),v.max.add(X)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}for(var st=0,ft=this._rings.length,Mt;st<ft;st++)Mt=ho(this._rings[st],v,!0),Mt.length&&this._parts.push(Mt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(v){var P=!1,X,st,ft,Mt,Dt,Wt,te,de;if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(Mt=0,te=this._parts.length;Mt<te;Mt++)for(X=this._parts[Mt],Dt=0,de=X.length,Wt=de-1;Dt<de;Wt=Dt++)st=X[Dt],ft=X[Wt],st.y>v.y!=ft.y>v.y&&v.x<(ft.x-st.x)*(v.y-st.y)/(ft.y-st.y)+st.x&&(P=!P);return P||Ns.prototype._containsPoint.call(this,v,!0)}});function ia(v,P){return new To(v,P)}var rs=Ki.extend({initialize:function(v,P){g(this,P),this._layers={},v&&this.addData(v)},addData:function(v){var P=x(v)?v:v.features,X,st,ft;if(P){for(X=0,st=P.length;X<st;X++)ft=P[X],(ft.geometries||ft.geometry||ft.features||ft.coordinates)&&this.addData(ft);return this}var Mt=this.options;if(Mt.filter&&!Mt.filter(v))return this;var Dt=na(v,Mt);return Dt?(Dt.feature=ns(v),Dt.defaultOptions=Dt.options,this.resetStyle(Dt),Mt.onEachFeature&&Mt.onEachFeature(v,Dt),this.addLayer(Dt)):this},resetStyle:function(v){return v===void 0?this.eachLayer(this.resetStyle,this):(v.options=e({},v.defaultOptions),this._setLayerStyle(v,this.options.style),this)},setStyle:function(v){return this.eachLayer(function(P){this._setLayerStyle(P,v)},this)},_setLayerStyle:function(v,P){v.setStyle&&(typeof P=="function"&&(P=P(v.feature)),v.setStyle(P))}});function na(v,P){var X=v.type==="Feature"?v.geometry:v,st=X?X.coordinates:null,ft=[],Mt=P&&P.pointToLayer,Dt=P&&P.coordsToLatLng||$s,Wt,te,de,De;if(!st&&!X)return null;switch(X.type){case"Point":return Wt=Dt(st),ul(Mt,v,Wt,P);case"MultiPoint":for(de=0,De=st.length;de<De;de++)Wt=Dt(st[de]),ft.push(ul(Mt,v,Wt,P));return new Ki(ft);case"LineString":case"MultiLineString":return te=is(st,X.type==="LineString"?0:1,Dt),new Ns(te,P);case"Polygon":case"MultiPolygon":return te=is(st,X.type==="Polygon"?1:2,Dt),new To(te,P);case"GeometryCollection":for(de=0,De=X.geometries.length;de<De;de++){var Xe=na({geometry:X.geometries[de],type:"Feature",properties:v.properties},P);Xe&&ft.push(Xe)}return new Ki(ft);case"FeatureCollection":for(de=0,De=X.features.length;de<De;de++){var _r=na(X.features[de],P);_r&&ft.push(_r)}return new Ki(ft);default:throw new Error("Invalid GeoJSON object.")}}function ul(v,P,X,st){return v?v(P,X):new cs(X,st&&st.markersInheritOptions&&st)}function $s(v){return new dt(v[1],v[0],v[2])}function is(v,P,X){for(var st=[],ft=0,Mt=v.length,Dt;ft<Mt;ft++)Dt=P?is(v[ft],P-1,X):(X||$s)(v[ft]),st.push(Dt);return st}function Hi(v,P){return v=$(v),v.alt!==void 0?[h(v.lng,P),h(v.lat,P),h(v.alt,P)]:[h(v.lng,P),h(v.lat,P)]}function Ys(v,P,X,st){for(var ft=[],Mt=0,Dt=v.length;Mt<Dt;Mt++)ft.push(P?Ys(v[Mt],_n(v[Mt])?0:P-1,X,st):Hi(v[Mt],st));return!P&&X&&ft.push(ft[0].slice()),ft}function zi(v,P){return v.feature?e({},v.feature,{geometry:P}):ns(P)}function ns(v){return v.type==="Feature"||v.type==="FeatureCollection"?v:{type:"Feature",properties:{},geometry:v}}var Ds={toGeoJSON:function(v){return zi(this,{type:"Point",coordinates:Hi(this.getLatLng(),v)})}};cs.include(Ds),Ts.include(Ds),Lo.include(Ds),Ns.include({toGeoJSON:function(v){var P=!_n(this._latlngs),X=Ys(this._latlngs,P?1:0,!1,v);return zi(this,{type:(P?"Multi":"")+"LineString",coordinates:X})}}),To.include({toGeoJSON:function(v){var P=!_n(this._latlngs),X=P&&!_n(this._latlngs[0]),st=Ys(this._latlngs,X?2:P?1:0,!0,v);return P||(st=[st]),zi(this,{type:(X?"Multi":"")+"Polygon",coordinates:st})}}),ko.include({toMultiPoint:function(v){var P=[];return this.eachLayer(function(X){P.push(X.toGeoJSON(v).geometry.coordinates)}),zi(this,{type:"MultiPoint",coordinates:P})},toGeoJSON:function(v){var P=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(P==="MultiPoint")return this.toMultiPoint(v);var X=P==="GeometryCollection",st=[];return this.eachLayer(function(ft){if(ft.toGeoJSON){var Mt=ft.toGeoJSON(v);if(X)st.push(Mt.geometry);else{var Dt=ns(Mt);Dt.type==="FeatureCollection"?st.push.apply(st,Dt.features):st.push(Dt)}}}),X?zi(this,{geometries:st,type:"GeometryCollection"}):{type:"FeatureCollection",features:st}}});function wa(v,P){return new rs(v,P)}var Po=wa,bs=Ls.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(v,P,X){this._url=v,this._bounds=ot(P),g(this,X)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(v){return this.options.opacity=v,this._image&&this._updateOpacity(),this},setStyle:function(v){return v.opacity&&this.setOpacity(v.opacity),this},bringToFront:function(){return this._map&&ir(this._image),this},bringToBack:function(){return this._map&&lr(this._image),this},setUrl:function(v){return this._url=v,this._image&&(this._image.src=v),this},setBounds:function(v){return this._bounds=ot(v),this._map&&this._reset(),this},getEvents:function(){var v={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var v=this._url.tagName==="IMG",P=this._image=v?this._url:we("img");if(me(P,"leaflet-image-layer"),this._zoomAnimated&&me(P,"leaflet-zoom-animated"),this.options.className&&me(P,this.options.className),P.onselectstart=c,P.onmousemove=c,P.onload=i(this.fire,this,"load"),P.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),v){this._url=P.src;return}P.src=this._url,P.alt=this.options.alt},_animateZoom:function(v){var P=this._map.getZoomScale(v.zoom),X=this._map._latLngBoundsToNewLayerBounds(this._bounds,v.zoom,v.center).min;nr(this._image,X,P)},_reset:function(){var v=this._image,P=new F(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),X=P.getSize();ze(v,P.min),v.style.width=X.x+"px",v.style.height=X.y+"px"},_updateOpacity:function(){Se(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var v=this.options.errorOverlayUrl;v&&this._url!==v&&(this._url=v,this._image.src=v)},getCenter:function(){return this._bounds.getCenter()}}),Bs=function(v,P,X){return new bs(v,P,X)},Ji=bs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var v=this._url.tagName==="VIDEO",P=this._image=v?this._url:we("video");if(me(P,"leaflet-image-layer"),this._zoomAnimated&&me(P,"leaflet-zoom-animated"),this.options.className&&me(P,this.options.className),P.onselectstart=c,P.onmousemove=c,P.onloadeddata=i(this.fire,this,"load"),v){for(var X=P.getElementsByTagName("source"),st=[],ft=0;ft<X.length;ft++)st.push(X[ft].src);this._url=X.length>0?st:[P.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(P.style,"objectFit")&&(P.style.objectFit="fill"),P.autoplay=!!this.options.autoplay,P.loop=!!this.options.loop,P.muted=!!this.options.muted,P.playsInline=!!this.options.playsInline;for(var Mt=0;Mt<this._url.length;Mt++){var Dt=we("source");Dt.src=this._url[Mt],P.appendChild(Dt)}}});function fs(v,P,X){return new Ji(v,P,X)}var gn=bs.extend({_initImage:function(){var v=this._image=this._url;me(v,"leaflet-image-layer"),this._zoomAnimated&&me(v,"leaflet-zoom-animated"),this.options.className&&me(v,this.options.className),v.onselectstart=c,v.onmousemove=c}});function ou(v,P,X){return new gn(v,P,X)}var xn=Ls.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(v,P){v&&(v instanceof dt||x(v))?(this._latlng=$(v),g(this,P)):(g(this,v),this._source=P),this.options.content&&(this._content=this.options.content)},openOn:function(v){return v=arguments.length?v:this._source._map,v.hasLayer(this)||v.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(v){return this._map?this.close():(arguments.length?this._source=v:v=this._source,this._prepareOpen(),this.openOn(v._map)),this},onAdd:function(v){this._zoomAnimated=v._zoomAnimated,this._container||this._initLayout(),v._fadeAnimated&&Se(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),v._fadeAnimated&&Se(this._container,1),this.bringToFront(),this.options.interactive&&(me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(v){v._fadeAnimated?(Se(this._container,0),this._removeTimeout=setTimeout(i(pe,void 0,this._container),200)):pe(this._container),this.options.interactive&&(ur(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(v){return this._latlng=$(v),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(v){return this._content=v,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var v={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ir(this._container),this},bringToBack:function(){return this._map&&lr(this._container),this},_prepareOpen:function(v){var P=this._source;if(!P._map)return!1;if(P instanceof Ki){P=null;var X=this._source._layers;for(var st in X)if(X[st]._map){P=X[st];break}if(!P)return!1;this._source=P}if(!v)if(P.getCenter)v=P.getCenter();else if(P.getLatLng)v=P.getLatLng();else if(P.getBounds)v=P.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(v),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var v=this._contentNode,P=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof P=="string")v.innerHTML=P;else{for(;v.hasChildNodes();)v.removeChild(v.firstChild);v.appendChild(P)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var v=this._map.latLngToLayerPoint(this._latlng),P=R(this.options.offset),X=this._getAnchor();this._zoomAnimated?ze(this._container,v.add(X)):P=P.add(v).add(X);var st=this._containerBottom=-P.y,ft=this._containerLeft=-Math.round(this._containerWidth/2)+P.x;this._container.style.bottom=st+"px",this._container.style.left=ft+"px"}},_getAnchor:function(){return[0,0]}});be.include({_initOverlay:function(v,P,X,st){var ft=P;return ft instanceof v||(ft=new v(st).setContent(P)),X&&ft.setLatLng(X),ft}}),Ls.include({_initOverlay:function(v,P,X,st){var ft=X;return ft instanceof v?(g(ft,st),ft._source=this):(ft=P&&!st?P:new v(st,this),ft.setContent(X)),ft}});var Fs=xn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(v){return v=arguments.length?v:this._source._map,!v.hasLayer(this)&&v._popup&&v._popup.options.autoClose&&v.removeLayer(v._popup),v._popup=this,xn.prototype.openOn.call(this,v)},onAdd:function(v){xn.prototype.onAdd.call(this,v),v.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xs||this._source.on("preclick",ht))},onRemove:function(v){xn.prototype.onRemove.call(this,v),v.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xs||this._source.off("preclick",ht))},getEvents:function(){var v=xn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(v.preclick=this.close),this.options.keepInView&&(v.moveend=this._adjustPan),v},_initLayout:function(){var v="leaflet-popup",P=this._container=we("div",v+" "+(this.options.className||"")+" leaflet-zoom-animated"),X=this._wrapper=we("div",v+"-content-wrapper",P);if(this._contentNode=we("div",v+"-content",X),Lt(P),xt(this._contentNode),je(P,"contextmenu",ht),this._tipContainer=we("div",v+"-tip-container",P),this._tip=we("div",v+"-tip",this._tipContainer),this.options.closeButton){var st=this._closeButton=we("a",v+"-close-button",P);st.setAttribute("role","button"),st.setAttribute("aria-label","Close popup"),st.href="#close",st.innerHTML='<span aria-hidden="true">&#215;</span>',je(st,"click",function(ft){Rt(ft),this.close()},this)}},_updateLayout:function(){var v=this._contentNode,P=v.style;P.width="",P.whiteSpace="nowrap";var X=v.offsetWidth;X=Math.min(X,this.options.maxWidth),X=Math.max(X,this.options.minWidth),P.width=X+1+"px",P.whiteSpace="",P.height="";var st=v.offsetHeight,ft=this.options.maxHeight,Mt="leaflet-popup-scrolled";ft&&st>ft?(P.height=ft+"px",me(v,Mt)):ur(v,Mt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(v){var P=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center),X=this._getAnchor();ze(this._container,P.add(X))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var v=this._map,P=parseInt(Ue(this._container,"marginBottom"),10)||0,X=this._container.offsetHeight+P,st=this._containerWidth,ft=new k(this._containerLeft,-X-this._containerBottom);ft._add(Ti(this._container));var Mt=v.layerPointToContainerPoint(ft),Dt=R(this.options.autoPanPadding),Wt=R(this.options.autoPanPaddingTopLeft||Dt),te=R(this.options.autoPanPaddingBottomRight||Dt),de=v.getSize(),De=0,Xe=0;Mt.x+st+te.x>de.x&&(De=Mt.x+st-de.x+te.x),Mt.x-De-Wt.x<0&&(De=Mt.x-Wt.x),Mt.y+X+te.y>de.y&&(Xe=Mt.y+X-de.y+te.y),Mt.y-Xe-Wt.y<0&&(Xe=Mt.y-Wt.y),(De||Xe)&&(this.options.keepInView&&(this._autopanning=!0),v.fire("autopanstart").panBy([De,Xe]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),hn=function(v,P){return new Fs(v,P)};be.mergeOptions({closePopupOnClick:!0}),be.include({openPopup:function(v,P,X){return this._initOverlay(Fs,v,P,X).openOn(this),this},closePopup:function(v){return v=arguments.length?v:this._popup,v&&v.close(),this}}),Ls.include({bindPopup:function(v,P){return this._popup=this._initOverlay(Fs,this._popup,v,P),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(v){return this._popup&&(this instanceof Ki||(this._popup._source=this),this._popup._prepareOpen(v||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(v){return this._popup&&this._popup.setContent(v),this},getPopup:function(){return this._popup},_openPopup:function(v){if(!(!this._popup||!this._map)){Pt(v);var P=v.layer||v.target;if(this._popup._source===P&&!(P instanceof Xs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(v.latlng);return}this._popup._source=P,this.openPopup(v.latlng)}},_movePopup:function(v){this._popup.setLatLng(v.latlng)},_onKeyPress:function(v){v.originalEvent.keyCode===13&&this._openPopup(v)}});var Gi=xn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(v){xn.prototype.onAdd.call(this,v),this.setOpacity(this.options.opacity),v.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(v){xn.prototype.onRemove.call(this,v),v.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var v=xn.prototype.getEvents.call(this);return this.options.permanent||(v.preclick=this.close),v},_initLayout:function(){var v="leaflet-tooltip",P=v+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=we("div",P),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(v){var P,X,st=this._map,ft=this._container,Mt=st.latLngToContainerPoint(st.getCenter()),Dt=st.layerPointToContainerPoint(v),Wt=this.options.direction,te=ft.offsetWidth,de=ft.offsetHeight,De=R(this.options.offset),Xe=this._getAnchor();Wt==="top"?(P=te/2,X=de):Wt==="bottom"?(P=te/2,X=0):Wt==="center"?(P=te/2,X=de/2):Wt==="right"?(P=0,X=de/2):Wt==="left"?(P=te,X=de/2):Dt.x<Mt.x?(Wt="right",P=0,X=de/2):(Wt="left",P=te+(De.x+Xe.x)*2,X=de/2),v=v.subtract(R(P,X,!0)).add(De).add(Xe),ur(ft,"leaflet-tooltip-right"),ur(ft,"leaflet-tooltip-left"),ur(ft,"leaflet-tooltip-top"),ur(ft,"leaflet-tooltip-bottom"),me(ft,"leaflet-tooltip-"+Wt),ze(ft,v)},_updatePosition:function(){var v=this._map.latLngToLayerPoint(this._latlng);this._setPosition(v)},setOpacity:function(v){this.options.opacity=v,this._container&&Se(this._container,v)},_animateZoom:function(v){var P=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center);this._setPosition(P)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_s=function(v,P){return new Gi(v,P)};be.include({openTooltip:function(v,P,X){return this._initOverlay(Gi,v,P,X).openOn(this),this},closeTooltip:function(v){return v.close(),this}}),Ls.include({bindTooltip:function(v,P){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Gi,this._tooltip,v,P),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(v){if(!(!v&&this._tooltipHandlersAdded)){var P=v?"off":"on",X={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?X.add=this._openTooltip:(X.mouseover=this._openTooltip,X.mouseout=this.closeTooltip,X.click=this._openTooltip,this._map?this._addFocusListeners():X.add=this._addFocusListeners),this._tooltip.options.sticky&&(X.mousemove=this._moveTooltip),this[P](X),this._tooltipHandlersAdded=!v}},openTooltip:function(v){return this._tooltip&&(this instanceof Ki||(this._tooltip._source=this),this._tooltip._prepareOpen(v)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(v){return this._tooltip&&this._tooltip.setContent(v),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(v){var P=v.getElement();P&&(je(P,"focus",function(){this._tooltip._source=v,this.openTooltip()},this),je(P,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(v){var P=v.getElement();P&&P.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(v){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=v.layer||v.target,this.openTooltip(this._tooltip.options.sticky?v.latlng:void 0))},_moveTooltip:function(v){var P=v.latlng,X,st;this._tooltip.options.sticky&&v.originalEvent&&(X=this._map.mouseEventToContainerPoint(v.originalEvent),st=this._map.containerPointToLayerPoint(X),P=this._map.layerPointToLatLng(st)),this._tooltip.setLatLng(P)}});var $n=ln.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(v){var P=v&&v.tagName==="DIV"?v:document.createElement("div"),X=this.options;if(X.html instanceof Element?(yr(P),P.appendChild(X.html)):P.innerHTML=X.html!==!1?X.html:"",X.bgPos){var st=R(X.bgPos);P.style.backgroundPosition=-st.x+"px "+-st.y+"px"}return this._setIconStyles(P,"icon"),P},createShadow:function(){return null}});function hl(v){return new $n(v)}ln.Default=Xn;var Ps=Ls.extend({options:{tileSize:256,opacity:1,updateWhenIdle:jt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(v){g(this,v)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(v){v._addZoomLimit(this)},onRemove:function(v){this._removeAllTiles(),pe(this._container),v._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ir(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(lr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(v){return this.options.opacity=v,this._updateOpacity(),this},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var v=this._clampZoom(this._map.getZoom());v!==this._tileZoom&&(this._tileZoom=v,this._updateLevels()),this._update()}return this},getEvents:function(){var v={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),v.move=this._onMove),this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},createTile:function(){return document.createElement("div")},getTileSize:function(){var v=this.options.tileSize;return v instanceof k?v:new k(v,v)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(v){for(var P=this.getPane().children,X=-v(-1/0,1/0),st=0,ft=P.length,Mt;st<ft;st++)Mt=P[st].style.zIndex,P[st]!==this._container&&Mt&&(X=v(X,+Mt));isFinite(X)&&(this.options.zIndex=X+v(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!jt.ielt9){Se(this._container,this.options.opacity);var v=+new Date,P=!1,X=!1;for(var st in this._tiles){var ft=this._tiles[st];if(!(!ft.current||!ft.loaded)){var Mt=Math.min(1,(v-ft.loaded)/200);Se(ft.el,Mt),Mt<1?P=!0:(ft.active?X=!0:this._onOpaqueTile(ft),ft.active=!0)}}X&&!this._noPrune&&this._pruneTiles(),P&&(K(this._fadeFrame),this._fadeFrame=tt(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=we("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var v=this._tileZoom,P=this.options.maxZoom;if(v!==void 0){for(var X in this._levels)X=Number(X),this._levels[X].el.children.length||X===v?(this._levels[X].el.style.zIndex=P-Math.abs(v-X),this._onUpdateLevel(X)):(pe(this._levels[X].el),this._removeTilesAtZoom(X),this._onRemoveLevel(X),delete this._levels[X]);var st=this._levels[v],ft=this._map;return st||(st=this._levels[v]={},st.el=we("div","leaflet-tile-container leaflet-zoom-animated",this._container),st.el.style.zIndex=P,st.origin=ft.project(ft.unproject(ft.getPixelOrigin()),v).round(),st.zoom=v,this._setZoomTransform(st,ft.getCenter(),ft.getZoom()),c(st.el.offsetWidth),this._onCreateLevel(st)),this._level=st,st}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var v,P,X=this._map.getZoom();if(X>this.options.maxZoom||X<this.options.minZoom){this._removeAllTiles();return}for(v in this._tiles)P=this._tiles[v],P.retain=P.current;for(v in this._tiles)if(P=this._tiles[v],P.current&&!P.active){var st=P.coords;this._retainParent(st.x,st.y,st.z,st.z-5)||this._retainChildren(st.x,st.y,st.z,st.z+2)}for(v in this._tiles)this._tiles[v].retain||this._removeTile(v)}},_removeTilesAtZoom:function(v){for(var P in this._tiles)this._tiles[P].coords.z===v&&this._removeTile(P)},_removeAllTiles:function(){for(var v in this._tiles)this._removeTile(v)},_invalidateAll:function(){for(var v in this._levels)pe(this._levels[v].el),this._onRemoveLevel(Number(v)),delete this._levels[v];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(v,P,X,st){var ft=Math.floor(v/2),Mt=Math.floor(P/2),Dt=X-1,Wt=new k(+ft,+Mt);Wt.z=+Dt;var te=this._tileCoordsToKey(Wt),de=this._tiles[te];return de&&de.active?(de.retain=!0,!0):(de&&de.loaded&&(de.retain=!0),Dt>st?this._retainParent(ft,Mt,Dt,st):!1)},_retainChildren:function(v,P,X,st){for(var ft=2*v;ft<2*v+2;ft++)for(var Mt=2*P;Mt<2*P+2;Mt++){var Dt=new k(ft,Mt);Dt.z=X+1;var Wt=this._tileCoordsToKey(Dt),te=this._tiles[Wt];if(te&&te.active){te.retain=!0;continue}else te&&te.loaded&&(te.retain=!0);X+1<st&&this._retainChildren(ft,Mt,X+1,st)}},_resetView:function(v){var P=v&&(v.pinch||v.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),P,P)},_animateZoom:function(v){this._setView(v.center,v.zoom,!0,v.noUpdate)},_clampZoom:function(v){var P=this.options;return P.minNativeZoom!==void 0&&v<P.minNativeZoom?P.minNativeZoom:P.maxNativeZoom!==void 0&&P.maxNativeZoom<v?P.maxNativeZoom:v},_setView:function(v,P,X,st){var ft=Math.round(P);this.options.maxZoom!==void 0&&ft>this.options.maxZoom||this.options.minZoom!==void 0&&ft<this.options.minZoom?ft=void 0:ft=this._clampZoom(ft);var Mt=this.options.updateWhenZooming&&ft!==this._tileZoom;(!st||Mt)&&(this._tileZoom=ft,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ft!==void 0&&this._update(v),X||this._pruneTiles(),this._noPrune=!!X),this._setZoomTransforms(v,P)},_setZoomTransforms:function(v,P){for(var X in this._levels)this._setZoomTransform(this._levels[X],v,P)},_setZoomTransform:function(v,P,X){var st=this._map.getZoomScale(X,v.zoom),ft=v.origin.multiplyBy(st).subtract(this._map._getNewPixelOrigin(P,X)).round();jt.any3d?nr(v.el,ft,st):ze(v.el,ft)},_resetGrid:function(){var v=this._map,P=v.options.crs,X=this._tileSize=this.getTileSize(),st=this._tileZoom,ft=this._map.getPixelWorldBounds(this._tileZoom);ft&&(this._globalTileRange=this._pxBoundsToTileRange(ft)),this._wrapX=P.wrapLng&&!this.options.noWrap&&[Math.floor(v.project([0,P.wrapLng[0]],st).x/X.x),Math.ceil(v.project([0,P.wrapLng[1]],st).x/X.y)],this._wrapY=P.wrapLat&&!this.options.noWrap&&[Math.floor(v.project([P.wrapLat[0],0],st).y/X.x),Math.ceil(v.project([P.wrapLat[1],0],st).y/X.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(v){var P=this._map,X=P._animatingZoom?Math.max(P._animateToZoom,P.getZoom()):P.getZoom(),st=P.getZoomScale(X,this._tileZoom),ft=P.project(v,this._tileZoom).floor(),Mt=P.getSize().divideBy(st*2);return new F(ft.subtract(Mt),ft.add(Mt))},_update:function(v){var P=this._map;if(P){var X=this._clampZoom(P.getZoom());if(v===void 0&&(v=P.getCenter()),this._tileZoom!==void 0){var st=this._getTiledPixelBounds(v),ft=this._pxBoundsToTileRange(st),Mt=ft.getCenter(),Dt=[],Wt=this.options.keepBuffer,te=new F(ft.getBottomLeft().subtract([Wt,-Wt]),ft.getTopRight().add([Wt,-Wt]));if(!(isFinite(ft.min.x)&&isFinite(ft.min.y)&&isFinite(ft.max.x)&&isFinite(ft.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var de in this._tiles){var De=this._tiles[de].coords;(De.z!==this._tileZoom||!te.contains(new k(De.x,De.y)))&&(this._tiles[de].current=!1)}if(Math.abs(X-this._tileZoom)>1){this._setView(v,X);return}for(var Xe=ft.min.y;Xe<=ft.max.y;Xe++)for(var _r=ft.min.x;_r<=ft.max.x;_r++){var Rn=new k(_r,Xe);if(Rn.z=this._tileZoom,!!this._isValidTile(Rn)){var Ks=this._tiles[this._tileCoordsToKey(Rn)];Ks?Ks.current=!0:Dt.push(Rn)}}if(Dt.sort(function(Zn,Ao){return Zn.distanceTo(Mt)-Ao.distanceTo(Mt)}),Dt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Js=document.createDocumentFragment();for(_r=0;_r<Dt.length;_r++)this._addTile(Dt[_r],Js);this._level.el.appendChild(Js)}}}},_isValidTile:function(v){var P=this._map.options.crs;if(!P.infinite){var X=this._globalTileRange;if(!P.wrapLng&&(v.x<X.min.x||v.x>X.max.x)||!P.wrapLat&&(v.y<X.min.y||v.y>X.max.y))return!1}if(!this.options.bounds)return!0;var st=this._tileCoordsToBounds(v);return ot(this.options.bounds).overlaps(st)},_keyToBounds:function(v){return this._tileCoordsToBounds(this._keyToTileCoords(v))},_tileCoordsToNwSe:function(v){var P=this._map,X=this.getTileSize(),st=v.scaleBy(X),ft=st.add(X),Mt=P.unproject(st,v.z),Dt=P.unproject(ft,v.z);return[Mt,Dt]},_tileCoordsToBounds:function(v){var P=this._tileCoordsToNwSe(v),X=new rt(P[0],P[1]);return this.options.noWrap||(X=this._map.wrapLatLngBounds(X)),X},_tileCoordsToKey:function(v){return v.x+":"+v.y+":"+v.z},_keyToTileCoords:function(v){var P=v.split(":"),X=new k(+P[0],+P[1]);return X.z=+P[2],X},_removeTile:function(v){var P=this._tiles[v];P&&(pe(P.el),delete this._tiles[v],this.fire("tileunload",{tile:P.el,coords:this._keyToTileCoords(v)}))},_initTile:function(v){me(v,"leaflet-tile");var P=this.getTileSize();v.style.width=P.x+"px",v.style.height=P.y+"px",v.onselectstart=c,v.onmousemove=c,jt.ielt9&&this.options.opacity<1&&Se(v,this.options.opacity)},_addTile:function(v,P){var X=this._getTilePos(v),st=this._tileCoordsToKey(v),ft=this.createTile(this._wrapCoords(v),i(this._tileReady,this,v));this._initTile(ft),this.createTile.length<2&&tt(i(this._tileReady,this,v,null,ft)),ze(ft,X),this._tiles[st]={el:ft,coords:v,current:!0},P.appendChild(ft),this.fire("tileloadstart",{tile:ft,coords:v})},_tileReady:function(v,P,X){P&&this.fire("tileerror",{error:P,tile:X,coords:v});var st=this._tileCoordsToKey(v);X=this._tiles[st],X&&(X.loaded=+new Date,this._map._fadeAnimated?(Se(X.el,0),K(this._fadeFrame),this._fadeFrame=tt(this._updateOpacity,this)):(X.active=!0,this._pruneTiles()),P||(me(X.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:X.el,coords:v})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),jt.ielt9||!this._map._fadeAnimated?tt(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(v){return v.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(v){var P=new k(this._wrapX?l(v.x,this._wrapX):v.x,this._wrapY?l(v.y,this._wrapY):v.y);return P.z=v.z,P},_pxBoundsToTileRange:function(v){var P=this.getTileSize();return new F(v.min.unscaleBy(P).floor(),v.max.unscaleBy(P).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var v in this._tiles)if(!this._tiles[v].loaded)return!1;return!0}});function Zs(v){return new Ps(v)}var Qi=Ps.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(v,P){this._url=v,P=g(this,P),P.detectRetina&&jt.retina&&P.maxZoom>0?(P.tileSize=Math.floor(P.tileSize/2),P.zoomReverse?(P.zoomOffset--,P.minZoom=Math.min(P.maxZoom,P.minZoom+1)):(P.zoomOffset++,P.maxZoom=Math.max(P.minZoom,P.maxZoom-1)),P.minZoom=Math.max(0,P.minZoom)):P.zoomReverse?P.minZoom=Math.min(P.maxZoom,P.minZoom):P.maxZoom=Math.max(P.minZoom,P.maxZoom),typeof P.subdomains=="string"&&(P.subdomains=P.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(v,P){return this._url===v&&P===void 0&&(P=!0),this._url=v,P||this.redraw(),this},createTile:function(v,P){var X=document.createElement("img");return je(X,"load",i(this._tileOnLoad,this,P,X)),je(X,"error",i(this._tileOnError,this,P,X)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(X.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(X.referrerPolicy=this.options.referrerPolicy),X.alt="",X.src=this.getTileUrl(v),X},getTileUrl:function(v){var P={r:jt.retina?"@2x":"",s:this._getSubdomain(v),x:v.x,y:v.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var X=this._globalTileRange.max.y-v.y;this.options.tms&&(P.y=X),P["-y"]=X}return y(this._url,e(P,this.options))},_tileOnLoad:function(v,P){jt.ielt9?setTimeout(i(v,this,null,P),0):v(null,P)},_tileOnError:function(v,P,X){var st=this.options.errorTileUrl;st&&P.getAttribute("src")!==st&&(P.src=st),v(X,P)},_onTileRemove:function(v){v.tile.onload=null},_getZoomForUrl:function(){var v=this._tileZoom,P=this.options.maxZoom,X=this.options.zoomReverse,st=this.options.zoomOffset;return X&&(v=P-v),v+st},_getSubdomain:function(v){var P=Math.abs(v.x+v.y)%this.options.subdomains.length;return this.options.subdomains[P]},_abortLoading:function(){var v,P;for(v in this._tiles)if(this._tiles[v].coords.z!==this._tileZoom&&(P=this._tiles[v].el,P.onload=c,P.onerror=c,!P.complete)){P.src=O;var X=this._tiles[v].coords;pe(P),delete this._tiles[v],this.fire("tileabort",{tile:P,coords:X})}},_removeTile:function(v){var P=this._tiles[v];if(P)return P.el.setAttribute("src",O),Ps.prototype._removeTile.call(this,v)},_tileReady:function(v,P,X){if(!(!this._map||X&&X.getAttribute("src")===O))return Ps.prototype._tileReady.call(this,v,P,X)}});function xa(v,P){return new Qi(v,P)}var tn=Qi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(v,P){this._url=v;var X=e({},this.defaultWmsParams);for(var st in P)st in this.options||(X[st]=P[st]);P=g(this,P);var ft=P.detectRetina&&jt.retina?2:1,Mt=this.getTileSize();X.width=Mt.x*ft,X.height=Mt.y*ft,this.wmsParams=X},onAdd:function(v){this._crs=this.options.crs||v.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var P=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[P]=this._crs.code,Qi.prototype.onAdd.call(this,v)},getTileUrl:function(v){var P=this._tileCoordsToNwSe(v),X=this._crs,st=H(X.project(P[0]),X.project(P[1])),ft=st.min,Mt=st.max,Dt=(this._wmsVersion>=1.3&&this._crs===Bn?[ft.y,ft.x,Mt.y,Mt.x]:[ft.x,ft.y,Mt.x,Mt.y]).join(","),Wt=Qi.prototype.getTileUrl.call(this,v);return Wt+m(this.wmsParams,Wt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Dt},setParams:function(v,P){return e(this.wmsParams,v),P||this.redraw(),this}});function cl(v,P){return new tn(v,P)}Qi.WMS=tn,xa.wms=cl;var cn=Ls.extend({options:{padding:.1},initialize:function(v){g(this,v),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var v={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(v.zoomanim=this._onAnimZoom),v},_onAnimZoom:function(v){this._updateTransform(v.center,v.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(v,P){var X=this._map.getZoomScale(P,this._zoom),st=this._map.getSize().multiplyBy(.5+this.options.padding),ft=this._map.project(this._center,P),Mt=st.multiplyBy(-X).add(ft).subtract(this._map._getNewPixelOrigin(v,P));jt.any3d?nr(this._container,Mt,X):ze(this._container,Mt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var v in this._layers)this._layers[v]._reset()},_onZoomEnd:function(){for(var v in this._layers)this._layers[v]._project()},_updatePaths:function(){for(var v in this._layers)this._layers[v]._update()},_update:function(){var v=this.options.padding,P=this._map.getSize(),X=this._map.containerPointToLayerPoint(P.multiplyBy(-v)).round();this._bounds=new F(X,X.add(P.multiplyBy(1+v*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ui=cn.extend({options:{tolerance:0},getEvents:function(){var v=cn.prototype.getEvents.call(this);return v.viewprereset=this._onViewPreReset,v},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var v=this._container=document.createElement("canvas");je(v,"mousemove",this._onMouseMove,this),je(v,"click dblclick mousedown mouseup contextmenu",this._onClick,this),je(v,"mouseout",this._handleMouseOut,this),v._leaflet_disable_events=!0,this._ctx=v.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,pe(this._container),cr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var v;this._redrawBounds=null;for(var P in this._layers)v=this._layers[P],v._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cn.prototype._update.call(this);var v=this._bounds,P=this._container,X=v.getSize(),st=jt.retina?2:1;ze(P,v.min),P.width=st*X.x,P.height=st*X.y,P.style.width=X.x+"px",P.style.height=X.y+"px",jt.retina&&this._ctx.scale(2,2),this._ctx.translate(-v.min.x,-v.min.y),this.fire("update")}},_reset:function(){cn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(v){this._updateDashArray(v),this._layers[o(v)]=v;var P=v._order={layer:v,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=P),this._drawLast=P,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(v){this._requestRedraw(v)},_removePath:function(v){var P=v._order,X=P.next,st=P.prev;X?X.prev=st:this._drawLast=st,st?st.next=X:this._drawFirst=X,delete v._order,delete this._layers[o(v)],this._requestRedraw(v)},_updatePath:function(v){this._extendRedrawBounds(v),v._project(),v._update(),this._requestRedraw(v)},_updateStyle:function(v){this._updateDashArray(v),this._requestRedraw(v)},_updateDashArray:function(v){if(typeof v.options.dashArray=="string"){var P=v.options.dashArray.split(/[, ]+/),X=[],st,ft;for(ft=0;ft<P.length;ft++){if(st=Number(P[ft]),isNaN(st))return;X.push(st)}v.options._dashArray=X}else v.options._dashArray=v.options.dashArray},_requestRedraw:function(v){this._map&&(this._extendRedrawBounds(v),this._redrawRequest=this._redrawRequest||tt(this._redraw,this))},_extendRedrawBounds:function(v){if(v._pxBounds){var P=(v.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new F,this._redrawBounds.extend(v._pxBounds.min.subtract([P,P])),this._redrawBounds.extend(v._pxBounds.max.add([P,P]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var v=this._redrawBounds;if(v){var P=v.getSize();this._ctx.clearRect(v.min.x,v.min.y,P.x,P.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var v,P=this._redrawBounds;if(this._ctx.save(),P){var X=P.getSize();this._ctx.beginPath(),this._ctx.rect(P.min.x,P.min.y,X.x,X.y),this._ctx.clip()}this._drawing=!0;for(var st=this._drawFirst;st;st=st.next)v=st.layer,(!P||v._pxBounds&&v._pxBounds.intersects(P))&&v._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(v,P){if(this._drawing){var X,st,ft,Mt,Dt=v._parts,Wt=Dt.length,te=this._ctx;if(Wt){for(te.beginPath(),X=0;X<Wt;X++){for(st=0,ft=Dt[X].length;st<ft;st++)Mt=Dt[X][st],te[st?"lineTo":"moveTo"](Mt.x,Mt.y);P&&te.closePath()}this._fillStroke(te,v)}}},_updateCircle:function(v){if(!(!this._drawing||v._empty())){var P=v._point,X=this._ctx,st=Math.max(Math.round(v._radius),1),ft=(Math.max(Math.round(v._radiusY),1)||st)/st;ft!==1&&(X.save(),X.scale(1,ft)),X.beginPath(),X.arc(P.x,P.y/ft,st,0,Math.PI*2,!1),ft!==1&&X.restore(),this._fillStroke(X,v)}},_fillStroke:function(v,P){var X=P.options;X.fill&&(v.globalAlpha=X.fillOpacity,v.fillStyle=X.fillColor||X.color,v.fill(X.fillRule||"evenodd")),X.stroke&&X.weight!==0&&(v.setLineDash&&v.setLineDash(P.options&&P.options._dashArray||[]),v.globalAlpha=X.opacity,v.lineWidth=X.weight,v.strokeStyle=X.color,v.lineCap=X.lineCap,v.lineJoin=X.lineJoin,v.stroke())},_onClick:function(v){for(var P=this._map.mouseEventToLayerPoint(v),X,st,ft=this._drawFirst;ft;ft=ft.next)X=ft.layer,X.options.interactive&&X._containsPoint(P)&&(!(v.type==="click"||v.type==="preclick")||!this._map._draggableMoved(X))&&(st=X);this._fireEvent(st?[st]:!1,v)},_onMouseMove:function(v){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var P=this._map.mouseEventToLayerPoint(v);this._handleMouseHover(v,P)}},_handleMouseOut:function(v){var P=this._hoveredLayer;P&&(ur(this._container,"leaflet-interactive"),this._fireEvent([P],v,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(v,P){if(!this._mouseHoverThrottled){for(var X,st,ft=this._drawFirst;ft;ft=ft.next)X=ft.layer,X.options.interactive&&X._containsPoint(P)&&(st=X);st!==this._hoveredLayer&&(this._handleMouseOut(v),st&&(me(this._container,"leaflet-interactive"),this._fireEvent([st],v,"mouseover"),this._hoveredLayer=st)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,v),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(v,P,X){this._map._fireDOMEvent(P,X||P.type,v)},_bringToFront:function(v){var P=v._order;if(P){var X=P.next,st=P.prev;if(X)X.prev=st;else return;st?st.next=X:X&&(this._drawFirst=X),P.prev=this._drawLast,this._drawLast.next=P,P.next=null,this._drawLast=P,this._requestRedraw(v)}},_bringToBack:function(v){var P=v._order;if(P){var X=P.next,st=P.prev;if(st)st.next=X;else return;X?X.prev=st:st&&(this._drawLast=st),P.prev=null,P.next=this._drawFirst,this._drawFirst.prev=P,this._drawFirst=P,this._requestRedraw(v)}}});function ss(v){return jt.canvas?new Ui(v):null}var ws=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(v){return document.createElement("<lvml:"+v+' class="lvml">')}}catch{}return function(v){return document.createElement("<"+v+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ro={_initContainer:function(){this._container=we("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cn.prototype._update.call(this),this.fire("update"))},_initPath:function(v){var P=v._container=ws("shape");me(P,"leaflet-vml-shape "+(this.options.className||"")),P.coordsize="1 1",v._path=ws("path"),P.appendChild(v._path),this._updateStyle(v),this._layers[o(v)]=v},_addPath:function(v){var P=v._container;this._container.appendChild(P),v.options.interactive&&v.addInteractiveTarget(P)},_removePath:function(v){var P=v._container;pe(P),v.removeInteractiveTarget(P),delete this._layers[o(v)]},_updateStyle:function(v){var P=v._stroke,X=v._fill,st=v.options,ft=v._container;ft.stroked=!!st.stroke,ft.filled=!!st.fill,st.stroke?(P||(P=v._stroke=ws("stroke")),ft.appendChild(P),P.weight=st.weight+"px",P.color=st.color,P.opacity=st.opacity,st.dashArray?P.dashStyle=x(st.dashArray)?st.dashArray.join(" "):st.dashArray.replace(/( *, *)/g," "):P.dashStyle="",P.endcap=st.lineCap.replace("butt","flat"),P.joinstyle=st.lineJoin):P&&(ft.removeChild(P),v._stroke=null),st.fill?(X||(X=v._fill=ws("fill")),ft.appendChild(X),X.color=st.fillColor||st.color,X.opacity=st.fillOpacity):X&&(ft.removeChild(X),v._fill=null)},_updateCircle:function(v){var P=v._point.round(),X=Math.round(v._radius),st=Math.round(v._radiusY||X);this._setPath(v,v._empty()?"M0 0":"AL "+P.x+","+P.y+" "+X+","+st+" 0,"+65535*360)},_setPath:function(v,P){v._path.v=P},_bringToFront:function(v){ir(v._container)},_bringToBack:function(v){lr(v._container)}},Yn=jt.vml?ws:Ft,Rs=cn.extend({_initContainer:function(){this._container=Yn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pe(this._container),cr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cn.prototype._update.call(this);var v=this._bounds,P=v.getSize(),X=this._container;(!this._svgSize||!this._svgSize.equals(P))&&(this._svgSize=P,X.setAttribute("width",P.x),X.setAttribute("height",P.y)),ze(X,v.min),X.setAttribute("viewBox",[v.min.x,v.min.y,P.x,P.y].join(" ")),this.fire("update")}},_initPath:function(v){var P=v._path=Yn("path");v.options.className&&me(P,v.options.className),v.options.interactive&&me(P,"leaflet-interactive"),this._updateStyle(v),this._layers[o(v)]=v},_addPath:function(v){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(v._path),v.addInteractiveTarget(v._path)},_removePath:function(v){pe(v._path),v.removeInteractiveTarget(v._path),delete this._layers[o(v)]},_updatePath:function(v){v._project(),v._update()},_updateStyle:function(v){var P=v._path,X=v.options;P&&(X.stroke?(P.setAttribute("stroke",X.color),P.setAttribute("stroke-opacity",X.opacity),P.setAttribute("stroke-width",X.weight),P.setAttribute("stroke-linecap",X.lineCap),P.setAttribute("stroke-linejoin",X.lineJoin),X.dashArray?P.setAttribute("stroke-dasharray",X.dashArray):P.removeAttribute("stroke-dasharray"),X.dashOffset?P.setAttribute("stroke-dashoffset",X.dashOffset):P.removeAttribute("stroke-dashoffset")):P.setAttribute("stroke","none"),X.fill?(P.setAttribute("fill",X.fillColor||X.color),P.setAttribute("fill-opacity",X.fillOpacity),P.setAttribute("fill-rule",X.fillRule||"evenodd")):P.setAttribute("fill","none"))},_updatePoly:function(v,P){this._setPath(v,It(v._parts,P))},_updateCircle:function(v){var P=v._point,X=Math.max(Math.round(v._radius),1),st=Math.max(Math.round(v._radiusY),1)||X,ft="a"+X+","+st+" 0 1,0 ",Mt=v._empty()?"M0 0":"M"+(P.x-X)+","+P.y+ft+X*2+",0 "+ft+-X*2+",0 ";this._setPath(v,Mt)},_setPath:function(v,P){v._path.setAttribute("d",P)},_bringToFront:function(v){ir(v._path)},_bringToBack:function(v){lr(v._path)}});jt.vml&&Rs.include(Ro);function En(v){return jt.svg||jt.vml?new Rs(v):null}be.include({getRenderer:function(v){var P=v.options.renderer||this._getPaneRenderer(v.options.pane)||this.options.renderer||this._renderer;return P||(P=this._renderer=this._createRenderer()),this.hasLayer(P)||this.addLayer(P),P},_getPaneRenderer:function(v){if(v==="overlayPane"||v===void 0)return!1;var P=this._paneRenderers[v];return P===void 0&&(P=this._createRenderer({pane:v}),this._paneRenderers[v]=P),P},_createRenderer:function(v){return this.options.preferCanvas&&ss(v)||En(v)}});var xs=To.extend({initialize:function(v,P){To.prototype.initialize.call(this,this._boundsToLatLngs(v),P)},setBounds:function(v){return this.setLatLngs(this._boundsToLatLngs(v))},_boundsToLatLngs:function(v){return v=ot(v),[v.getSouthWest(),v.getNorthWest(),v.getNorthEast(),v.getSouthEast()]}});function Oi(v,P){return new xs(v,P)}Rs.create=Yn,Rs.pointsToPath=It,rs.geometryToLayer=na,rs.coordsToLatLng=$s,rs.coordsToLatLngs=is,rs.latLngToCoords=Hi,rs.latLngsToCoords=Ys,rs.getFeature=zi,rs.asFeature=ns,be.mergeOptions({boxZoom:!0});var fl=Pe.extend({initialize:function(v){this._map=v,this._container=v._container,this._pane=v._panes.overlayPane,this._resetStateTimeout=0,v.on("unload",this._destroy,this)},addHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){cr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(v){if(!v.shiftKey||v.which!==1&&v.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ri(),gr(),this._startPoint=this._map.mouseEventToContainerPoint(v),je(document,{contextmenu:Pt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(v){this._moved||(this._moved=!0,this._box=we("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(v);var P=new F(this._point,this._startPoint),X=P.getSize();ze(this._box,P.min),this._box.style.width=X.x+"px",this._box.style.height=X.y+"px"},_finish:function(){this._moved&&(pe(this._box),ur(this._container,"leaflet-crosshair")),bn(),_i(),cr(document,{contextmenu:Pt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(v){if(!(v.which!==1&&v.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var P=new rt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(P).fire("boxzoomend",{boxZoomBounds:P})}},_onKeyDown:function(v){v.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});be.addInitHook("addHandler","boxZoom",fl),be.mergeOptions({doubleClickZoom:!0});var dl=Pe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(v){var P=this._map,X=P.getZoom(),st=P.options.zoomDelta,ft=v.originalEvent.shiftKey?X-st:X+st;P.options.doubleClickZoom==="center"?P.setZoom(ft):P.setZoomAround(v.containerPoint,ft)}});be.addInitHook("addHandler","doubleClickZoom",dl),be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yn=Pe.extend({addHooks:function(){if(!this._draggable){var v=this._map;this._draggable=new Fi(v._mapPane,v._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),v.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),v.on("zoomend",this._onZoomEnd,this),v.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ur(this._map._container,"leaflet-grab"),ur(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var v=this._map;if(v._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var P=ot(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(P.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(P.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;v.fire("movestart").fire("dragstart"),v.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(v){if(this._map.options.inertia){var P=this._lastTime=+new Date,X=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(X),this._times.push(P),this._prunePositions(P)}this._map.fire("move",v).fire("drag",v)},_prunePositions:function(v){for(;this._positions.length>1&&v-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var v=this._map.getSize().divideBy(2),P=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=P.subtract(v).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(v,P){return v-(v-P)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var v=this._draggable._newPos.subtract(this._draggable._startPos),P=this._offsetLimit;v.x<P.min.x&&(v.x=this._viscousLimit(v.x,P.min.x)),v.y<P.min.y&&(v.y=this._viscousLimit(v.y,P.min.y)),v.x>P.max.x&&(v.x=this._viscousLimit(v.x,P.max.x)),v.y>P.max.y&&(v.y=this._viscousLimit(v.y,P.max.y)),this._draggable._newPos=this._draggable._startPos.add(v)}},_onPreDragWrap:function(){var v=this._worldWidth,P=Math.round(v/2),X=this._initialWorldOffset,st=this._draggable._newPos.x,ft=(st-P+X)%v+P-X,Mt=(st+P+X)%v-P-X,Dt=Math.abs(ft+X)<Math.abs(Mt+X)?ft:Mt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Dt},_onDragEnd:function(v){var P=this._map,X=P.options,st=!X.inertia||v.noInertia||this._times.length<2;if(P.fire("dragend",v),st)P.fire("moveend");else{this._prunePositions(+new Date);var ft=this._lastPos.subtract(this._positions[0]),Mt=(this._lastTime-this._times[0])/1e3,Dt=X.easeLinearity,Wt=ft.multiplyBy(Dt/Mt),te=Wt.distanceTo([0,0]),de=Math.min(X.inertiaMaxSpeed,te),De=Wt.multiplyBy(de/te),Xe=de/(X.inertiaDeceleration*Dt),_r=De.multiplyBy(-Xe/2).round();!_r.x&&!_r.y?P.fire("moveend"):(_r=P._limitOffset(_r,P.options.maxBounds),tt(function(){P.panBy(_r,{duration:Xe,easeLinearity:Dt,noMoveStart:!0,animate:!0})}))}}});be.addInitHook("addHandler","dragging",yn),be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var zs=Pe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(v){this._map=v,this._setPanDelta(v.options.keyboardPanDelta),this._setZoomDelta(v.options.zoomDelta)},addHooks:function(){var v=this._map._container;v.tabIndex<=0&&(v.tabIndex="0"),je(v,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),cr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var v=document.body,P=document.documentElement,X=v.scrollTop||P.scrollTop,st=v.scrollLeft||P.scrollLeft;this._map._container.focus(),window.scrollTo(st,X)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(v){var P=this._panKeys={},X=this.keyCodes,st,ft;for(st=0,ft=X.left.length;st<ft;st++)P[X.left[st]]=[-1*v,0];for(st=0,ft=X.right.length;st<ft;st++)P[X.right[st]]=[v,0];for(st=0,ft=X.down.length;st<ft;st++)P[X.down[st]]=[0,v];for(st=0,ft=X.up.length;st<ft;st++)P[X.up[st]]=[0,-1*v]},_setZoomDelta:function(v){var P=this._zoomKeys={},X=this.keyCodes,st,ft;for(st=0,ft=X.zoomIn.length;st<ft;st++)P[X.zoomIn[st]]=v;for(st=0,ft=X.zoomOut.length;st<ft;st++)P[X.zoomOut[st]]=-v},_addHooks:function(){je(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){cr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(v){if(!(v.altKey||v.ctrlKey||v.metaKey)){var P=v.keyCode,X=this._map,st;if(P in this._panKeys){if(!X._panAnim||!X._panAnim._inProgress)if(st=this._panKeys[P],v.shiftKey&&(st=R(st).multiplyBy(3)),X.options.maxBounds&&(st=X._limitOffset(R(st),X.options.maxBounds)),X.options.worldCopyJump){var ft=X.wrapLatLng(X.unproject(X.project(X.getCenter()).add(st)));X.panTo(ft)}else X.panBy(st)}else if(P in this._zoomKeys)X.setZoom(X.getZoom()+(v.shiftKey?3:1)*this._zoomKeys[P]);else if(P===27&&X._popup&&X._popup.options.closeOnEscapeKey)X.closePopup();else return;Pt(v)}}});be.addInitHook("addHandler","keyboard",zs),be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ea=Pe.extend({addHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){cr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(v){var P=Zt(v),X=this._map.options.wheelDebounceTime;this._delta+=P,this._lastMousePos=this._map.mouseEventToContainerPoint(v),this._startTime||(this._startTime=+new Date);var st=Math.max(X-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),st),Pt(v)},_performZoom:function(){var v=this._map,P=v.getZoom(),X=this._map.options.zoomSnap||0;v._stop();var st=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ft=4*Math.log(2/(1+Math.exp(-Math.abs(st))))/Math.LN2,Mt=X?Math.ceil(ft/X)*X:ft,Dt=v._limitZoom(P+(this._delta>0?Mt:-Mt))-P;this._delta=0,this._startTime=null,Dt&&(v.options.scrollWheelZoom==="center"?v.setZoom(P+Dt):v.setZoomAround(this._lastMousePos,P+Dt))}});be.addInitHook("addHandler","scrollWheelZoom",Ea);var Oo=600;be.mergeOptions({tapHold:jt.touchNative&&jt.safari&&jt.mobile,tapTolerance:15});var js=Pe.extend({addHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){cr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(v){if(clearTimeout(this._holdTimeout),v.touches.length===1){var P=v.touches[0];this._startPos=this._newPos=new k(P.clientX,P.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(je(document,"touchend",Rt),je(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",P))},this),Oo),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function v(){cr(document,"touchend",Rt),cr(document,"touchend touchcancel",v)},_cancel:function(){clearTimeout(this._holdTimeout),cr(document,"touchend touchcancel contextmenu",this._cancel,this),cr(document,"touchmove",this._onMove,this)},_onMove:function(v){var P=v.touches[0];this._newPos=new k(P.clientX,P.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(v,P){var X=new MouseEvent(v,{bubbles:!0,cancelable:!0,view:window,screenX:P.screenX,screenY:P.screenY,clientX:P.clientX,clientY:P.clientY});X._simulated=!0,P.target.dispatchEvent(X)}});be.addInitHook("addHandler","tapHold",js),be.mergeOptions({touchZoom:jt.touch,bounceAtZoomLimits:!0});var Vi=Pe.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ur(this._map._container,"leaflet-touch-zoom"),cr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(v){var P=this._map;if(!(!v.touches||v.touches.length!==2||P._animatingZoom||this._zooming)){var X=P.mouseEventToContainerPoint(v.touches[0]),st=P.mouseEventToContainerPoint(v.touches[1]);this._centerPoint=P.getSize()._divideBy(2),this._startLatLng=P.containerPointToLatLng(this._centerPoint),P.options.touchZoom!=="center"&&(this._pinchStartLatLng=P.containerPointToLatLng(X.add(st)._divideBy(2))),this._startDist=X.distanceTo(st),this._startZoom=P.getZoom(),this._moved=!1,this._zooming=!0,P._stop(),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),Rt(v)}},_onTouchMove:function(v){if(!(!v.touches||v.touches.length!==2||!this._zooming)){var P=this._map,X=P.mouseEventToContainerPoint(v.touches[0]),st=P.mouseEventToContainerPoint(v.touches[1]),ft=X.distanceTo(st)/this._startDist;if(this._zoom=P.getScaleZoom(ft,this._startZoom),!P.options.bounceAtZoomLimits&&(this._zoom<P.getMinZoom()&&ft<1||this._zoom>P.getMaxZoom()&&ft>1)&&(this._zoom=P._limitZoom(this._zoom)),P.options.touchZoom==="center"){if(this._center=this._startLatLng,ft===1)return}else{var Mt=X._add(st)._divideBy(2)._subtract(this._centerPoint);if(ft===1&&Mt.x===0&&Mt.y===0)return;this._center=P.unproject(P.project(this._pinchStartLatLng,this._zoom).subtract(Mt),this._zoom)}this._moved||(P._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var Dt=i(P._move,P,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=tt(Dt,this,!0),Rt(v)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),cr(document,"touchmove",this._onTouchMove,this),cr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});be.addInitHook("addHandler","touchZoom",Vi),be.BoxZoom=fl,be.DoubleClickZoom=dl,be.Drag=yn,be.Keyboard=zs,be.ScrollWheelZoom=Ea,be.TapHold=js,be.TouchZoom=Vi,n.Bounds=F,n.Browser=jt,n.CRS=ct,n.Canvas=Ui,n.Circle=Ts,n.CircleMarker=Lo,n.Class=N,n.Control=mi,n.DivIcon=$n,n.DivOverlay=xn,n.DomEvent=Ce,n.DomUtil=us,n.Draggable=Fi,n.Evented=C,n.FeatureGroup=Ki,n.GeoJSON=rs,n.GridLayer=Ps,n.Handler=Pe,n.Icon=ln,n.ImageOverlay=bs,n.LatLng=dt,n.LatLngBounds=rt,n.Layer=Ls,n.LayerGroup=ko,n.LineUtil=Tn,n.Map=be,n.Marker=cs,n.Mixin=ba,n.Path=Xs,n.Point=k,n.PolyUtil=co,n.Polygon=To,n.Polyline=Ns,n.Popup=Fs,n.PosAnimation=Ne,n.Projection=Go,n.Rectangle=xs,n.Renderer=cn,n.SVG=Rs,n.SVGOverlay=gn,n.TileLayer=Qi,n.Tooltip=Gi,n.Transformation=mt,n.Util=B,n.VideoOverlay=Ji,n.bind=i,n.bounds=H,n.canvas=ss,n.circle=vs,n.circleMarker=wn,n.control=Er,n.divIcon=hl,n.extend=e,n.featureGroup=fo,n.geoJSON=wa,n.geoJson=Po,n.gridLayer=Zs,n.icon=ys,n.imageOverlay=Bs,n.latLng=$,n.latLngBounds=ot,n.layerGroup=qs,n.map=vi,n.marker=un,n.point=R,n.polygon=ia,n.polyline=Pn,n.popup=hn,n.rectangle=Oi,n.setOptions=g,n.stamp=o,n.svg=En,n.svgOverlay=ou,n.tileLayer=xa,n.tooltip=_s,n.transformation=wt,n.version=t,n.videoOverlay=fs;var Cn=window.L;n.noConflict=function(){return window.L=Cn,this},window.L=n})});var Op=Ge((Rp,Uh)=>{(function(n,t){typeof define=="function"&&define.amd?define(["leaflet"],n):typeof Rp=="object"&&(typeof t<"u"&&t.L?Uh.exports=n(L):Uh.exports=n(Jn())),typeof t<"u"&&t.L&&(t.L.Control.Locate=n(L))})(function(n){let t=(a,l,c)=>{c=c.split(" "),c.forEach(function(h){n.DomUtil[a].call(this,l,h)})},e=(a,l)=>t("addClass",a,l),r=(a,l)=>t("removeClass",a,l),i=n.Marker.extend({initialize(a,l){n.Util.setOptions(this,l),this._latlng=a,this.createIcon()},createIcon(){let a=this.options,l="";a.color!==void 0&&(l+=`stroke:${a.color};`),a.weight!==void 0&&(l+=`stroke-width:${a.weight};`),a.fillColor!==void 0&&(l+=`fill:${a.fillColor};`),a.fillOpacity!==void 0&&(l+=`fill-opacity:${a.fillOpacity};`),a.opacity!==void 0&&(l+=`opacity:${a.opacity};`);let c=this._getIconSVG(a,l);this._locationIcon=n.divIcon({className:c.className,html:c.svg,iconSize:[c.w,c.h]}),this.setIcon(this._locationIcon)},_getIconSVG(a,l){let c=a.radius,h=a.weight,d=c+h,p=d*2;return{className:"leaflet-control-locate-location",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${p}" height="${p}" version="1.1" viewBox="-${d} -${d} ${p} ${p}"><circle r="`+c+'" style="'+l+'" /></svg>',w:p,h:p}},setStyle(a){n.Util.setOptions(this,a),this.createIcon()}}),s=i.extend({initialize(a,l,c){n.Util.setOptions(this,c),this._latlng=a,this._heading=l,this.createIcon()},setHeading(a){this._heading=a},_getIconSVG(a,l){let c=a.radius,h=a.width+a.weight,d=(c+a.depth+a.weight)*2,p=`M0,0 l${a.width/2},${a.depth} l-${h},0 z`,g=`transform: rotate(${this._heading}deg)`;return{className:"leaflet-control-locate-heading",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${h}" height="${d}" version="1.1" viewBox="-${h/2} 0 ${h} ${d}" style="${g}"><path d="`+p+'" style="'+l+'" /></svg>',w:h,h:d}}}),o=n.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds(a){return a.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:i,compassClass:s,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"leaflet-control-locate-location-arrow",iconLoading:"leaflet-control-locate-spinner",iconElementTag:"span",textElementTag:"small",circlePadding:[0,0],metric:!0,createButtonCallback(a,l){let c=n.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",a);c.title=l.strings.title,c.href="#",c.setAttribute("role","button");let h=n.DomUtil.create(l.iconElementTag,l.icon,c);if(l.strings.text!==void 0){let d=n.DomUtil.create(l.textElementTag,"leaflet-locate-text",c);d.textContent=l.strings.text,c.classList.add("leaflet-locate-text-active"),c.parentNode.style.display="flex",l.icon.length>0&&h.classList.add("leaflet-locate-icon")}return{link:c,icon:h}},onLocationError(a,l){alert(a.message)},onLocationOutsideMapBounds(a){a.stop(),alert(a.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize(a){for(let l in a)typeof this.options[l]=="object"?n.extend(this.options[l],a[l]):this.options[l]=a[l];this.options.followMarkerStyle=n.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=n.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=n.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd(a){let l=n.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=l,this._map=a,this._layer=this.options.layer||new n.LayerGroup,this._layer.addTo(a),this._event=void 0,this._compassHeading=null,this._prevBounds=null;let c=this.options.createButtonCallback(l,this.options);return this._link=c.link,this._icon=c.icon,n.DomEvent.on(this._link,"click",function(h){n.DomEvent.stopPropagation(h),n.DomEvent.preventDefault(h),this._onClick()},this).on(this._link,"dblclick",n.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),l},_onClick(){this._justClicked=!0;let a=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){let l=this.options.clickBehavior,c=l.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(c=a?l.inView:l.inViewNotFollowing),l[c]&&(c=l[c]),c){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds);break}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate(){if(!this._active&&(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),this.options.showCompass)){let a="ondeviceorientationabsolute"in window;if(a||"ondeviceorientation"in window){let l=this,c=function(){n.DomEvent.on(window,a?"deviceorientationabsolute":"deviceorientation",l._onDeviceOrientation,l)};DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(h){h==="granted"&&c()}):c()}}},_deactivate(){this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?n.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&n.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this._justClicked&&this.options.initialZoomLevel!==!1){var a=this.options.flyTo?this._map.flyTo:this._map.setView;a.bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel)}else if(this.options.keepCurrentZoomLevel){var a=this.options.flyTo?this._map.flyTo:this._map.panTo;a.bind(this._map)([this._event.latitude,this._event.longitude])}else{var a=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;this._ignoreEvent=!0,a.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.initialZoomLevel||this.options.locateOptions.maxZoom}),n.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this)}},_drawCompass(){if(!this._event)return;let a=this._event.latlng;if(this.options.showCompass&&a&&this._compassHeading!==null){let l=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle;this._compass?(this._compass.setLatLng(a),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(l)):this._compass=new this.options.compassClass(a,this._compassHeading,l).addTo(this._layer)}this._compass&&(!this.options.showCompass||this._compassHeading===null)&&(this._compass.removeFrom(this._layer),this._compass=null)},_drawMarker(){this._event.accuracy===void 0&&(this._event.accuracy=0);let a=this._event.accuracy,l=this._event.latlng;if(this.options.drawCircle){let g=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(l).setRadius(a).setStyle(g):this._circle=n.circle(l,a,g).addTo(this._layer)}let c,h;if(this.options.metric?(c=a.toFixed(0),h=this.options.strings.metersUnit):(c=(a*3.2808399).toFixed(0),h=this.options.strings.feetUnit),this.options.drawMarker){let g=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(l),this._marker.setStyle&&this._marker.setStyle(g)):this._marker=new this.options.markerClass(l,g).addTo(this._layer)}this._drawCompass();let d=this.options.strings.popup;function p(){return typeof d=="string"?n.Util.template(d,{distance:c,unit:h}):typeof d=="function"?d({distance:c,unit:h}):d}this.options.showPopup&&d&&this._marker&&this._marker.bindPopup(p())._popup.setLatLng(l),this.options.showPopup&&d&&this._compass&&this._compass.bindPopup(p())._popup.setLatLng(l)},_removeMarker(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading(a){!isNaN(parseFloat(a))&&isFinite(a)?(a=Math.round(a),this._compassHeading=a,n.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration(){this._setCompassHeading()},_onDeviceOrientation(a){this._active&&(a.webkitCompassHeading?this._setCompassHeading(a.webkitCompassHeading):a.absolute&&a.alpha&&this._setCompassHeading(360-a.alpha))},_onLocationError(a){a.code==3&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(a,this))},_onLocationFound(a){if(!(this._event&&this._event.latlng.lat===a.latlng.lat&&this._event.latlng.lng===a.latlng.lng&&this._event.accuracy===a.accuracy)&&this._active){switch(this._event=a,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":!this._userPanned&&!this._userZoomed&&this.setView();break;case"always":this.setView();break;case!1:break}this._justClicked=!1}},_onDrag(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing(){if(!this._active)return!1;if(this.options.setView==="always")return!0;if(this.options.setView==="untilPan")return!this._userPanned;if(this.options.setView==="untilPanOrZoom")return!this._userPanned&&!this._userZoomed},_isOutsideMapBounds(){return this._event===void 0?!1:this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses(a){a=="requesting"?(r(this._container,"active following"),e(this._container,"requesting"),r(this._icon,this.options.icon),e(this._icon,this.options.iconLoading)):a=="active"?(r(this._container,"requesting following"),e(this._container,"active"),r(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)):a=="following"&&(r(this._container,"requesting"),e(this._container,"active following"),r(this._icon,this.options.iconLoading),e(this._icon,this.options.icon))},_cleanClasses(){n.DomUtil.removeClass(this._container,"requesting"),n.DomUtil.removeClass(this._container,"active"),n.DomUtil.removeClass(this._container,"following"),r(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)},_resetVariables(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return n.control.locate=a=>new n.Control.Locate(a),o},window)});var Ap=Ge((UC,Vh)=>{(function(n){if(typeof define=="function"&&define.amd)define(["leaflet"],n);else if(typeof Vh<"u")Vh.exports=n(Jn());else{if(typeof window.L>"u")throw new Error("Leaflet must be loaded first");n(window.L)}})(function(n){var t="polyline-measure-control",e="polyline-measure-unicode-icon";return n.Control.PolylineMeasure=n.Control.extend({options:{position:"topleft",unit:"metres",clearMeasurementsOnStop:!0,showBearings:!1,bearingTextIn:"In",bearingTextOut:"Out",tooltipTextFinish:"Click to <b>finish line</b><br>",tooltipTextDelete:"Press SHIFT-key and click to <b>delete point</b>",tooltipTextMove:"Click and drag to <b>move point</b><br>",tooltipTextResume:"<br>Press CTRL-key and click to <b>resume line</b>",tooltipTextAdd:"Press CTRL-key and click to <b>add point</b>",measureControlTitleOn:"Turn on PolylineMeasure",measureControlTitleOff:"Turn off PolylineMeasure",measureControlLabel:"&#8614;",measureControlClasses:[],showClearControl:!1,clearControlTitle:"Clear Measurements",clearControlLabel:"&times;",clearControlClasses:[],showUnitControl:!1,distanceShowSameUnit:!1,unitControlTitle:{text:"Change Units",metres:"metres",landmiles:"land miles",nauticalmiles:"nautical miles"},unitControlLabel:{metres:"m",kilometres:"km",feet:"ft",landmiles:"mi",nauticalmiles:"nm"},tempLine:{color:"#00f",weight:2},fixedLine:{color:"#006",weight:2},startCircle:{color:"#000",weight:1,fillColor:"#0f0",fillOpacity:1,radius:3},intermedCircle:{color:"#000",weight:1,fillColor:"#ff0",fillOpacity:1,radius:3},currentCircle:{color:"#000",weight:1,fillColor:"#f0f",fillOpacity:1,radius:6},endCircle:{color:"#000",weight:1,fillColor:"#f00",fillOpacity:1,radius:3}},_arcpoints:100,_circleNr:-1,_lineNr:-1,_createControl:function(r,i,s,o,a,l){var c=document.createElement("a");return c.innerHTML=r,c.setAttribute("title",i),s.forEach(function(h){c.classList.add(h)}),n.DomEvent.on(c,"click",a,l),o.appendChild(c),c},onAdd:function(r){var i=this;r.on("movestart ",function(){i._mapdragging=!0}),this._container=document.createElement("div"),this._container.classList.add("leaflet-bar"),n.DomEvent.disableClickPropagation(this._container);var s=this.options.measureControlTitleOn,o=this.options.measureControlLabel,a=this.options.measureControlClasses;if(o.indexOf("&")!=-1&&a.push(e),this._arrPolylines=[],this._measureControl=this._createControl(o,s,a,this._container,this._toggleMeasure,this),this._defaultControlBgColor=this._measureControl.style.backgroundColor,this._measureControl.setAttribute("id",t),this.options.showClearControl){var s=this.options.clearControlTitle,o=this.options.clearControlLabel,a=this.options.clearControlClasses;o.indexOf("&")!=-1&&a.push(e),this._clearMeasureControl=this._createControl(o,s,a,this._container,this._clearAllMeasurements,this),this._clearMeasureControl.classList.add("polyline-measure-clearControl")}if(this.options.showUnitControl){if(this.options.unit=="metres")var o=this.options.unitControlLabel.metres,s=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]";else if(this.options.unit=="landmiles")var o=this.options.unitControlLabel.landmiles,s=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]";else var o=this.options.unitControlLabel.nauticalmiles,s=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]";var a=[];this._unitControl=this._createControl(o,s,a,this._container,this._changeUnit,this),this._unitControl.setAttribute("id","unitControlId")}return this._container},onRemove:function(){this._measuring&&this._toggleMeasure()},_saveNonpolylineEvents:function(){this._nonpolylineTargets=this._map._targets,typeof this._polylineTargets<"u"?this._map._targets=this._polylineTargets:this._map._targets={}},_savePolylineEvents:function(){this._polylineTargets=this._map._targets,this._map._targets=this._nonpolylineTargets},_toggleMeasure:function(){this._measuring=!this._measuring,this._measuring?(this._mapdragging=!1,this._saveNonpolylineEvents(),this._measureControl.classList.add("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this.options.backgroundColor,this._measureControl.title=this.options.measureControlTitleOff,this._oldCursor=this._map._container.style.cursor,this._map._container.style.cursor="crosshair",this._doubleClickZoom=this._map.doubleClickZoom.enabled(),this._map.doubleClickZoom.disable(),this._layerPaint||(this._layerPaint=n.layerGroup().addTo(this._map)),this._map.on("mousemove",this._mouseMove,this),this._map.on("click",this._mouseClick,this),n.DomEvent.on(document,"keydown",this._onKeyDown,this),this._resetPathVariables()):(this._savePolylineEvents(),this._measureControl.classList.remove("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this._defaultControlBgColor,this._measureControl.title=this.options.measureControlTitleOn,this._map._container.style.cursor=this._oldCursor,this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.off("mouseup",this._dragCircleMouseup,this),n.DomEvent.off(document,"keydown",this._onKeyDown,this),this._doubleClickZoom&&this._map.doubleClickZoom.enable(),this.options.clearMeasurementsOnStop&&this._layerPaint&&this._clearAllMeasurements(),this._cntCircle!==0&&this._finishPolylinePath()),this._map.fire("polylinemeasure:toggle",{sttus:this._measuring})},_clearAllMeasurements:function(){this._cntCircle!==void 0&&this._cntCircle!==0&&this._finishPolylinePath(),this._layerPaint&&this._layerPaint.clearLayers(),this._arrPolylines=[],this._map.fire("polylinemeasure:clear")},_changeUnit:function(){this.options.unit=="metres"?(this.options.unit="landmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.landmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):this.options.unit=="landmiles"?(this.options.unit="nauticalmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.nauticalmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"):(this.options.unit="metres",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.metres,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"),this._currentLine&&this._computeDistance(this._currentLine),this._arrPolylines.map(this._computeDistance.bind(this))},_computeDistance:function(r){var i=0;r.circleCoords.map(function(s,o){if(o>=1){var a=r.circleCoords[o-1].distanceTo(r.circleCoords[o]);i+=a,this._updateTooltip(r.tooltips[o],r.tooltips[o-1],i,a,r.circleCoords[o-1],r.circleCoords[o])}}.bind(this))},_onKeyDown:function(r){if(r.keyCode===27){if(this._resumeFirstpointFlag===!0){this._resumeFirstpointFlag=!1;var i=this._lineNr;this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._layerPaint.removeLayer(this._tooltipNew),this._arrPolylines[i].circleMarkers[0].setStyle(this.options.startCircle);var s="",o=0;this.options.showBearings===!0&&(s=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),s=s+'<div class="polyline-measure-tooltip-difference">+0</div>',s=s+'<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[i].tooltips[0]._icon.innerHTML=s,this._arrPolylines[i].tooltips.map(function(a,l){if(l>=1){var c=this._arrPolylines[i].circleCoords[l-1].distanceTo(this._arrPolylines[i].circleCoords[l]),h=this._arrPolylines[i].circleCoords[l-1],d=this._arrPolylines[i].circleCoords[l];o+=c;var p=this._arrPolylines[i].tooltips[l-1];this._updateTooltip(a,p,o,c,h,d)}}.bind(this)),this._map.on("mousemove",this._mouseMove,this);return}this._currentLine?this._finishPolylinePath(r):this._toggleMeasure()}},_getDistance:function(r){var i=r,s;return this.options.unit==="nauticalmiles"?(s=this.options.unitControlLabel.nauticalmiles,i>=185200?i=(i/1852).toFixed(0):i>=18520?i=(i/1852).toFixed(1):i>=1852?i=(i/1852).toFixed(2):this.options.distanceShowSameUnit?i=(i/1852).toFixed(3):(i=(i/.3048).toFixed(0),s=this.options.unitControlLabel.feet)):this.options.unit==="landmiles"?(s=this.options.unitControlLabel.landmiles,i>=160934.4?i=(i/1609.344).toFixed(0):i>=16093.44?i=(i/1609.344).toFixed(1):i>=1609.344?i=(i/1609.344).toFixed(2):this.options.distanceShowSameUnit?i=(i/1609.344).toFixed(3):(i=(i/.3048).toFixed(0),s=this.options.unitControlLabel.feet)):(s=this.options.unitControlLabel.kilometres,i>=1e5?i=(i/1e3).toFixed(0):i>=1e4?i=(i/1e3).toFixed(1):i>=1e3?i=(i/1e3).toFixed(2):this.options.distanceShowSameUnit?i=(i/1e3).toFixed(3):(i=i.toFixed(0),s=this.options.unitControlLabel.metres)),{value:i,unit:s}},_polylineArc:function(r,i){function s(g){var m=Math.sin((1-g)*d)/Math.sin(d),b=Math.sin(g*d)/Math.sin(d),y=m*Math.cos(a)*Math.cos(l)+b*Math.cos(c)*Math.cos(h),x=m*Math.cos(a)*Math.sin(l)+b*Math.cos(c)*Math.sin(h),S=m*Math.sin(a)+b*Math.sin(c),O=180/Math.PI*Math.atan2(S,Math.sqrt(Math.pow(y,2)+Math.pow(x,2))),D=180/Math.PI*Math.atan2(x,y),U=D-l*180/Math.PI;function z(q){return Math[q>0?"floor":"ceil"](q)}return U<0?D=D-z((U-180)/360)*360:D=D-z((U+180)/360)*360,[O,D]}function o(g){for(var m=[],b=1/(g-1),y=0;y<g;y++){var x=b*y,S=s(x);m.push(S)}return m}var a=r.lat,l=r.lng,c=i.lat,h=i.lng;a=a*Math.PI/180,l=l*Math.PI/180,c=c*Math.PI/180,h=h*Math.PI/180;var d=2*Math.asin(Math.sqrt(Math.pow(Math.sin((a-c)/2),2)+Math.cos(a)*Math.cos(c)*Math.pow(Math.sin((l-h)/2),2))),p;return d===0?p=[[a,l]]:p=o(this._arcpoints),p},_updateTooltip:function(r,i,s,o,a,l){var c=function(S,O,D){var U=S.lat/180*Math.PI,z=O.lat/180*Math.PI,q=S.lng/180*Math.PI,G=O.lng/180*Math.PI,tt=Math.sin(G-q)*Math.cos(z),K=Math.cos(U)*Math.sin(z)-Math.sin(U)*Math.cos(z)*Math.cos(G-q);if(D==="inbound")var B=(Math.atan2(tt,K)*180/Math.PI+180).toFixed(0);else var B=(Math.atan2(tt,K)*180/Math.PI+360).toFixed(0);return B%360},h=c(l,a,"inbound"),d=c(a,l,"outbound"),p=this._getDistance(s),g=this._getDistance(o),m="";if(g.value>0&&(this.options.showBearings===!0&&(m=this.options.bearingTextIn+": "+h+"\xB0<br>"+this.options.bearingTextOut+":---\xB0"),m+='<div class="polyline-measure-tooltip-difference">+'+g.value+"&nbsp;"+g.unit+"</div>"),m+='<div class="polyline-measure-tooltip-total">'+p.value+"&nbsp;"+p.unit+"</div>",r._icon.innerHTML=m,this.options.showBearings===!0&&i){var b=i._icon.innerHTML,y=new RegExp(this.options.bearingTextOut+".*\xB0"),x=b.replace(y,this.options.bearingTextOut+": "+d+"\xB0");i._icon.innerHTML=x}},_drawArrow:function(r){var i=Math.round(r.length/2),s=r[i-1],o=r[i],a=o[1]-s[1],l=o[0]-s[0],c=[s[0]+l/2,s[1]+a/2],h=-Math.atan2(l,a)*57.29578,d=n.divIcon({className:"",iconSize:[16,16],iconAnchor:[8,8],html:"<div style = 'font-size: 16px; line-height: 16px; vertical-align:top; transform: rotate("+h+"deg)'>&#x27a4;</div>"}),p=n.marker(c,{icon:d,zIndexOffset:-50}).addTo(this._layerPaint);return this._currentLine||p.bindTooltip(this.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),p.on("click",this._clickedArrow,this),p},_mouseMove:function(r){var i=r.latlng;if(this._map.on("click",this._mouseClick,this),!(!i||!this._currentLine)){var s=this._currentLine.circleCoords.last();this._rubberlinePath.setLatLngs(this._polylineArc(s,i));var o=this._currentLine.tooltips.last(),a=this._currentLine.tooltips.slice(-2,-1)[0];o.setLatLng(i);var l=i.distanceTo(s);this._updateTooltip(o,a,this._currentLine.distance+l,l,s,i)}},_startLine:function(r){var i=n.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),s=function(){return this.slice(-1)[0]};this._rubberlinePath=n.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack();var o=this;this._currentLine={id:0,circleCoords:[],circleMarkers:[],arrowMarkers:[],tooltips:[],distance:0,polylinePath:n.polyline([],{color:this.options.fixedLine.color,weight:this.options.fixedLine.weight,interactive:!1}).addTo(this._layerPaint).bringToBack(),handleMarkers:function(c){var h=this.circleMarkers.last();h&&(h.bindTooltip(o.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),h.off("click",o._finishPolylinePath,o),this.circleMarkers.length===1?h.setStyle(o.options.startCircle):h.setStyle(o.options.intermedCircle));var d=new n.CircleMarker(c,o.options.currentCircle).addTo(o._layerPaint);d.bindTooltip(o.options.tooltipTextFinish+o.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),d.cntLine=o._currentLine.id,d.cntCircle=o._cntCircle,o._cntCircle++,d.on("mousedown",o._dragCircle,o),d.on("click",o._finishPolylinePath,o),this.circleMarkers.push(d)},getNewToolTip:function(c){return n.marker(c,{icon:i,interactive:!1})},addPoint:function(c){var h=this.circleCoords.last();if(!(h&&h.equals(c))){if(this.circleCoords.push(c),this.circleCoords.length>1){var d=o._polylineArc(h,c);this.circleCoords.length>2&&d.shift(),this.polylinePath.setLatLngs(this.polylinePath.getLatLngs().concat(d));var p=o._drawArrow(d);p.cntLine=o._currentLine.id,p.cntArrow=o._cntCircle-1,o._currentLine.arrowMarkers.push(p);var g=h.distanceTo(c);this.distance+=g;var m=o._currentLine.tooltips.last(),b=o._currentLine.tooltips.slice(-1,-2)[0];o._updateTooltip(m,b,this.distance,g,h,c)}m&&m.setLatLng(c);var y=this.getNewToolTip(c);y.addTo(o._layerPaint),this.tooltips.push(y),this.handleMarkers(c)}},finalize:function(){if(o._layerPaint.removeLayer(this.tooltips.last()),this.tooltips.pop(),o._layerPaint.removeLayer(o._rubberlinePath),this.circleCoords.length>1){this.tooltips.last()._icon.classList.add("polyline-measure-tooltip-end");var c=this.circleMarkers.last();c.setStyle(o.options.endCircle),c.unbindTooltip(),o._currentLine.circleMarkers.map(function(h){h.bindTooltip(o.options.tooltipTextMove+o.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})}),o._currentLine.circleMarkers[0].bindTooltip(o.options.tooltipTextMove+o.options.tooltipTextDelete+o.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),c.bindTooltip(o.options.tooltipTextMove+o.options.tooltipTextDelete+o.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),o._currentLine.arrowMarkers.map(function(h){h.bindTooltip(o.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})}),c.off("click",o._finishPolylinePath,o),c.on("click",o._resumePolylinePath,o),o._arrPolylines.push(this)}else o._layerPaint.removeLayer(this.circleMarkers.last()),o._layerPaint.removeLayer(this.tooltips.last());o._resetPathVariables()}};var a=n.marker(r,{icon:i,interactive:!1});a.addTo(this._layerPaint);var l="";this.options.showBearings===!0&&(l=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),l=l+'<div class="polyline-measure-tooltip-difference">+0</div>',l=l+'<div class="polyline-measure-tooltip-total">0</div>',a._icon.innerHTML=l,this._currentLine.tooltips.push(a),this._currentLine.circleCoords.last=s,this._currentLine.tooltips.last=s,this._currentLine.circleMarkers.last=s,this._currentLine.id=this._arrPolylines.length},_mouseClick:function(r){!r.latlng||this._finishCircleScreencoords&&this._finishCircleScreencoords.equals(r.containerPoint)||(!this._currentLine&&!this._mapdragging&&(this._startLine(r.latlng),this._map.fire("polylinemeasure:start",this._currentLine)),this._mapdragging?this._mapdragging=!1:(this._currentLine.addPoint(r.latlng),this._map.fire("polylinemeasure:add",r),this._map.fire("polylinemeasure:change",this._currentLine)))},_finishPolylinePath:function(r){this._map.fire("polylinemeasure:finish",this._currentLine),this._currentLine.finalize(),r&&(this._finishCircleScreencoords=r.containerPoint)},_resumePolylinePath:function(r){if(r.originalEvent.ctrlKey===!0){this._currentLine=this._arrPolylines[r.target.cntLine],this._rubberlinePath=n.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._currentLine.tooltips.last()._icon.classList.remove("polyline-measure-tooltip-end");var i=this._currentLine.getNewToolTip(r.latlng);i.addTo(this._layerPaint),this._currentLine.tooltips.push(i),this._currentLine.circleMarkers.last().unbindTooltip(),this._currentLine.circleMarkers.last().bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.last().setStyle(this.options.currentCircle),this._cntCircle=this._currentLine.circleCoords.length,this._map.fire("polylinemeasure:resume",this._currentLine)}},_resetPathVariables:function(){this._cntCircle=0,this._currentLine=null},_clickedArrow:function(r){if(r.originalEvent.ctrlKey){var i=r.target.cntLine,s=r.target.cntArrow;this._arrPolylines[i].arrowMarkers[s].removeFrom(this._layerPaint);var o=new n.CircleMarker(r.latlng,this.options.intermedCircle).addTo(this._layerPaint);o.cntLine=i,o.on("mousedown",this._dragCircle,this),o.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[i].circleMarkers.splice(s+1,0,o),this._arrPolylines[i].circleMarkers.map(function(d,p){d.cntCircle=p}),this._arrPolylines[i].circleCoords.splice(s+1,0,r.latlng),lineCoords=this._arrPolylines[i].polylinePath.getLatLngs();var a=this._polylineArc(this._arrPolylines[i].circleCoords[s],r.latlng);a.pop();var l=this._polylineArc(r.latlng,this._arrPolylines[i].circleCoords[s+2]);Array.prototype.splice.apply(lineCoords,[s*(this._arcpoints-1),this._arcpoints].concat(a,l)),this._arrPolylines[i].polylinePath.setLatLngs(lineCoords);var c=this._drawArrow(a);this._arrPolylines[i].arrowMarkers[s]=c,c=this._drawArrow(l),this._arrPolylines[i].arrowMarkers.splice(s+1,0,c),this._arrPolylines[i].arrowMarkers.map(function(d,p){d.cntLine=i,d.cntArrow=p}),this._tooltipNew=n.marker(r.latlng,{icon:n.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint),this._arrPolylines[i].tooltips.splice(s+1,0,this._tooltipNew);var h=0;this._arrPolylines[i].tooltips.map(function(d,p){if(p>=1){var g=this._arrPolylines[i].circleCoords[p-1].distanceTo(this._arrPolylines[i].circleCoords[p]),m=this._arrPolylines[i].circleCoords[p-1],b=this._arrPolylines[i].circleCoords[p];h+=g;var y=this._arrPolylines[i].tooltips[p-1];this._updateTooltip(d,y,h,g,m,b)}}.bind(this)),this._map.fire("polylinemeasure:insert",r),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])}},_dragCircleMouseup:function(){this._circleNr===0||this._circleNr===this._arrPolylines[this._lineNr].circleCoords.length-1?this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}):this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._resetPathVariables(),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.dragging.enable(),this._map.on("mousemove",this._mouseMove,this),this._map.off("mouseup",this._dragCircleMouseup,this),this._map.fire("polylinemeasure:move",this._e1),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])},_dragCircleMousemove:function(r){var i=r.latlng.lat,s=r.latlng.lng,o=i-this._mouseStartingLat,a=s-this._mouseStartingLng,l=n.latLng(this._circleStartingLat+o,this._circleStartingLng+a),c=this._arcpoints,h=this._e1.target.cntLine;this._lineNr=h;var d=this._e1.target.cntCircle;this._circleNr=d,this._e1.target.setLatLng(l),this._e1.target.unbindTooltip(),this._arrPolylines[h].circleCoords[d]=l;var p=this._arrPolylines[h].polylinePath.getLatLngs();if(d>=1){var g=this._polylineArc(this._arrPolylines[h].circleCoords[d-1],l);Array.prototype.splice.apply(p,[(d-1)*(c-1),c].concat(g));var m=this._drawArrow(g);m.cntLine=h,m.cntArrow=d-1,this._arrPolylines[h].arrowMarkers[d-1].removeFrom(this._layerPaint),this._arrPolylines[h].arrowMarkers[d-1]=m}if(d<this._arrPolylines[h].circleCoords.length-1){var b=this._polylineArc(l,this._arrPolylines[h].circleCoords[d+1]);Array.prototype.splice.apply(p,[d*(c-1),c].concat(b)),m=this._drawArrow(b),m.cntLine=h,m.cntArrow=d,this._arrPolylines[h].arrowMarkers[d].removeFrom(this._layerPaint),this._arrPolylines[h].arrowMarkers[d]=m}this._arrPolylines[h].polylinePath.setLatLngs(p),d>=0&&this._arrPolylines[h].tooltips[d].setLatLng(l);var y=0;this._arrPolylines[h].tooltips.map(function(x,S){if(S>=1){var O=this._arrPolylines[h].circleCoords[S-1].distanceTo(this._arrPolylines[h].circleCoords[S]),D=this._arrPolylines[h].circleCoords[S-1],U=this._arrPolylines[h].circleCoords[S];y+=O,this._arrPolylines[h].distance=y;var z=this._arrPolylines[h].tooltips[S-1];this._updateTooltip(x,z,y,O,D,U)}}.bind(this)),this._map.on("mouseup",this._dragCircleMouseup,this)},_resumeFirstpointMousemove:function(r){var i=this._lineNr;this._map.on("click",this._resumeFirstpointClick,this);var s=r.latlng;this._rubberlinePath2.setLatLngs(this._polylineArc(s,currentCircleCoords)),this._tooltipNew.setLatLng(s);var o=0,a=s.distanceTo(this._arrPolylines[i].circleCoords[0]),l=s,c=this._arrPolylines[i].circleCoords[0];o+=a;var h=this._tooltipNew,d=this._arrPolylines[i].tooltips[0];this._updateTooltip(d,h,o,a,l,c),this._arrPolylines[i].tooltips.map(function(p,g){if(g>=1){var m=this._arrPolylines[i].circleCoords[g-1].distanceTo(this._arrPolylines[i].circleCoords[g]),b=this._arrPolylines[i].circleCoords[g-1],y=this._arrPolylines[i].circleCoords[g];o+=m;var x=this._arrPolylines[i].tooltips[g-1];this._updateTooltip(p,x,o,m,b,y)}}.bind(this))},_resumeFirstpointClick:function(r){var i=this._lineNr;this._resumeFirstpointFlag=!1,this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._arrPolylines[i].circleMarkers[0].setStyle(this.options.intermedCircle),this._arrPolylines[i].circleMarkers[0].unbindTooltip(),this._arrPolylines[i].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"});var s=new n.CircleMarker(r.latlng,this.options.startCircle).addTo(this._layerPaint);s.cntLine=i,s.cntCircle=0,s.on("mousedown",this._dragCircle,this),s.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[i].circleMarkers.unshift(s),this._arrPolylines[i].circleMarkers.map(function(l,c){l.cntCircle=c}),this._arrPolylines[i].circleCoords.unshift(r.latlng);var o=this._polylineArc(r.latlng,currentCircleCoords),a=this._drawArrow(o);this._arrPolylines[i].arrowMarkers.unshift(a),this._arrPolylines[i].arrowMarkers.map(function(l,c){l.cntLine=i,l.cntArrow=c}),o.pop(),this._arrPolylines[i].polylinePath.setLatLngs(o.concat(this._arrPolylines[i].polylinePath.getLatLngs())),this._arrPolylines[i].tooltips.unshift(this._tooltipNew),this._map.on("mousemove",this._mouseMove,this)},_dragCircle:function(r){var i=this._arcpoints;if(r.originalEvent.ctrlKey){if(this._map.off("click",this._mouseClick,this),r.target.cntCircle===0){this._resumeFirstpointFlag=!0,this._lineNr=r.target.cntLine;var s=this._lineNr;this._circleNr=r.target.cntCircle,currentCircleCoords=r.latlng,this._arrPolylines[s].circleMarkers[0].setStyle(this.options.currentCircle),this._rubberlinePath2=n.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._tooltipNew=n.marker(currentCircleCoords,{icon:n.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint);var o="";this.options.showBearings===!0&&(o=o+this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),o=o+'<div class="polyline-measure-tooltip-difference">+0</div>',o=o+'<div class="polyline-measure-tooltip-total">0</div>',this._tooltipNew._icon.innerHTML=o,this._map.off("mousemove",this._mouseMove,this),this._map.on("mousemove",this._resumeFirstpointMousemove,this)}return}if(r.originalEvent.shiftKey){this._lineNr=r.target.cntLine;var s=this._lineNr;this._circleNr=r.target.cntCircle;var a=this._circleNr;if(this._arrPolylines[s]){if(this._arrPolylines[s].circleMarkers.length===2){this._layerPaint.removeLayer(this._arrPolylines[s].circleMarkers[1]),this._layerPaint.removeLayer(this._arrPolylines[s].tooltips[1]),this._layerPaint.removeLayer(this._arrPolylines[s].circleMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[s].tooltips[0]),this._layerPaint.removeLayer(this._arrPolylines[s].arrowMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[s].polylinePath),this._map.fire("polylinemeasure:remove",r),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);return}this._arrPolylines[s].circleCoords.splice(a,1),this._arrPolylines[s].circleMarkers[a].removeFrom(this._layerPaint),this._arrPolylines[s].circleMarkers.splice(a,1),this._arrPolylines[s].circleMarkers.map(function(g,m){g.cntCircle=m});var l=this._arrPolylines[s].polylinePath.getLatLngs();if(this._arrPolylines[s].tooltips[a].removeFrom(this._layerPaint),this._arrPolylines[s].tooltips.splice(a,1),!this._arrPolylines[s].circleMarkers.length){this._arrPolylines.splice(s,1),this._arrPolylines.forEach(function(g,m){g.circleMarkers.map(function(b){b.cntLine=m}),g.arrowMarkers.map(function(b){b.cntLine=m})});return}if(a===0){this._arrPolylines[s].circleMarkers[0].setStyle(this.options.startCircle),l.splice(0,i-1),this._arrPolylines[s].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[s].arrowMarkers[a].removeFrom(this._layerPaint),this._arrPolylines[s].arrowMarkers.splice(0,1);var o="";this.options.showBearings===!0&&(o=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),o=o+'<div class="polyline-measure-tooltip-difference">+0</div>',o=o+'<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[s].tooltips[0]._icon.innerHTML=o}else if(a===this._arrPolylines[s].circleCoords.length)this._arrPolylines[s].circleMarkers[a-1].on("click",this._resumePolylinePath,this),this._arrPolylines[s].circleMarkers[a-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[s].circleMarkers.slice(-1)[0].setStyle(this.options.endCircle),this._arrPolylines[s].tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),l.splice(-(i-1),i-1),this._arrPolylines[s].arrowMarkers[a-1].removeFrom(this._layerPaint),this._arrPolylines[s].arrowMarkers.splice(-1,1);else{newLineSegment=this._polylineArc(this._arrPolylines[s].circleCoords[a-1],this._arrPolylines[s].circleCoords[a]),Array.prototype.splice.apply(l,[(a-1)*(i-1),2*i-1].concat(newLineSegment)),this._arrPolylines[s].arrowMarkers[a-1].removeFrom(this._layerPaint),this._arrPolylines[s].arrowMarkers[a].removeFrom(this._layerPaint);var c=this._drawArrow(newLineSegment);this._arrPolylines[s].arrowMarkers.splice(a-1,2,c)}this._arrPolylines[s].polylinePath.setLatLngs(l),this._arrPolylines[s].arrowMarkers.map(function(g,m){g.cntLine=s,g.cntArrow=m});var h=0;this._arrPolylines[s].tooltips.map(function(g,m){if(m>=1){var b=this._arrPolylines[s].circleCoords[m-1].distanceTo(this._arrPolylines[s].circleCoords[m]),y=this._arrPolylines[s].circleCoords[m-1],x=this._arrPolylines[s].circleCoords[m];h+=b,this._arrPolylines[s].distance=h;var S=this._arrPolylines[s].tooltips[m-1];this._updateTooltip(g,S,h,b,y,x)}}.bind(this))}else{if(this._cntCircle--,this._currentLine.circleMarkers.length===1){this._currentLine.finalize();return}if(this._currentLine.circleCoords.splice(a,1),this._currentLine.circleMarkers[a].removeFrom(this._layerPaint),this._currentLine.circleMarkers.splice(a,1),this._currentLine.circleMarkers.map(function(g,m){g.cntCircle=m}),l=this._currentLine.polylinePath.getLatLngs(),this._currentLine.tooltips[a].removeFrom(this._layerPaint),this._currentLine.tooltips.splice(a,1),a===0){this._currentLine.circleMarkers.length===1?this._currentLine.circleMarkers[0].setStyle(this.options.currentCircle):this._currentLine.circleMarkers[0].setStyle(this.options.startCircle),l.splice(0,i-1),this._currentLine.circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.arrowMarkers[a].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(0,1);var o="";this.options.showBearings===!0&&(o=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),o=o+'<div class="polyline-measure-tooltip-difference">+0</div>',o=o+'<div class="polyline-measure-tooltip-total">0</div>',this._currentLine.tooltips[0]._icon.innerHTML=o}else a===this._currentLine.circleCoords.length?(this._currentLine.circleMarkers[a-1].on("click",this._resumePolylinePath,this),this._currentLine.circleMarkers[a-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.slice(-1)[0].setStyle(this.options.currentCircle),this._currentLine.tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),l.splice(-(i-1),i-1),this._currentLine.arrowMarkers[a-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(-1,1)):(newLineSegment=this._polylineArc(this._currentLine.circleCoords[a-1],this._currentLine.circleCoords[a]),Array.prototype.splice.apply(l,[(a-1)*(i-1),2*i-1].concat(newLineSegment)),this._currentLine.arrowMarkers[a-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers[a].removeFrom(this._layerPaint),c=this._drawArrow(newLineSegment),this._currentLine.arrowMarkers.splice(a-1,2,c));this._currentLine.polylinePath.setLatLngs(l),this._currentLine.arrowMarkers.map(function(g,m){g.cntLine=s,g.cntArrow=m});var d=0;this._currentLine.tooltips.map(function(g,m,b){if(m>=1){var y,x,S=this._currentLine.tooltips[m-1],O=this._currentLine.circleCoords[m-1];m===b.length-1?(y=this._currentLine.circleCoords[m-1].distanceTo(r.latlng),x=r.latlng,this._updateTooltip(g,S,d+y,y,O,x)):(y=this._currentLine.circleCoords[m-1].distanceTo(this._currentLine.circleCoords[m]),x=this._currentLine.circleCoords[m],d+=y,this._updateTooltip(g,S,d,y,O,x))}}.bind(this)),this._currentLine.distance=d}this._map.fire("polylinemeasure:remove",r),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);return}this._e1=r,this._measuring&&this._cntCircle===0&&(this._map.dragging.disable(),this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._mouseStartingLat=r.latlng.lat,this._mouseStartingLng=r.latlng.lng,this._circleStartingLat=r.target._latlng.lat,this._circleStartingLng=r.target._latlng.lng,this._map.on("mousemove",this._dragCircleMousemove,this))},seed:function(r){r.forEach(i=>{this._toggleMeasure(),this._startLine(i[0]),i.forEach((s,o)=>{let a=n.latLng(s);this._mouseMove({latLng:a}),this._currentLine.addPoint(a),o===i.length-1&&(this._finishPolylinePath(),this._toggleMeasure())})})}}),n.Map.mergeOptions({PolylineMeasureControl:!1}),n.Map.addInitHook(function(){this.options.polylineMeasureControl&&(this.PMControl=new n.Control.PolylineMeasure,this.addControl(this.PMControl))}),n.control.polylineMeasure=function(r){return new n.Control.PolylineMeasure(r)},n.Control.PolylineMeasure})});var qh=Ge((qC,Ip)=>{var Iv=Ip.exports=function n(t,e){var r;if(t!=null)return e=(e||"").replace(/[^&"<>\']/g,""),r=`([&"<>'])`.replace(new RegExp("["+e+"]","g"),""),t.replace(new RegExp(r,"g"),function(i,s){return n.map[s]})},VC=Iv.map={">":"&gt;","<":"&lt;","'":"&apos;",'"':"&quot;","&":"&amp;"}});var Np=Ge((WC,uu)=>{var Nv=qh();uu.exports.attr=Wh;uu.exports.tagClose=Dv;uu.exports.tag=Bv;function Wh(n){return Object.keys(n).length?" "+Object.keys(n).map(function(t){return t+'="'+Nv(n[t])+'"'}).join(" "):""}function Dv(n,t){return"<"+n+Wh(t)+"/>"}function Bv(n,t,e){return(Array.isArray(t)||typeof t=="string")&&(e=t,t={}),Array.isArray(e)&&(e=`
`+e.map(function(r){return"  "+r}).join(`
`)+`
`),"<"+n+Wh(t)+">"+e+"</"+n+">"}});var Fp=Ge((XC,Bp)=>{var hu=qh(),Fv=Np(),Lr=Fv.tag;Bp.exports=function(t,e){return e=e||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+Lr("kml",{xmlns:"http://www.opengis.net/kml/2.2"},Lr("Document",jv(e)+Hv(e)+zv(t,e)))};function Xh(n,t){return function(e){if(!e.properties||!Gs.valid(e.geometry))return"";var r=Gs.any(e.geometry);if(!r)return"";var i="",s="";if(n.simplestyle){var o=eb(e.properties);o&&(Gs.isPoint(e.geometry)&&Xv(e.properties)?(t.indexOf(o)===-1&&(i=Yv(e.properties,o),t.push(o)),s=Lr("styleUrl","#"+o),$v(e.properties)):(Gs.isPolygon(e.geometry)||Gs.isLine(e.geometry))&&Jv(e.properties)&&(t.indexOf(o)===-1&&(i=tb(e.properties,o),t.push(o)),s=Lr("styleUrl","#"+o),Qv(e.properties)))}var a={};return e.id&&(a.id=e.id.toString()),i+Lr("Placemark",a,Gv(e.properties,n)+Uv(e.properties,n)+qv(e.properties)+Vv(e.properties,n)+r+s)}}function zv(n,t){if(!n.type)return"";var e=[];switch(n.type){case"FeatureCollection":return n.features?n.features.map(Xh(t,e)).join(""):"";case"Feature":return Xh(t,e)(n);default:return Xh(t,e)({type:"Feature",geometry:n,properties:{}})}}function jv(n){return n.documentName!==void 0?Lr("name",n.documentName):""}function Hv(n){return n.documentDescription!==void 0?Lr("description",n.documentDescription):""}function Gv(n,t){return n[t.name]?Lr("name",hu(n[t.name])):""}function Uv(n,t){return n[t.description]?Lr("description",hu(n[t.description])):""}function Vv(n,t){return n[t.timestamp]?Lr("TimeStamp",Lr("when",hu(n[t.timestamp]))):""}var Gs={Point:function(n){return Lr("Point",Lr("coordinates",n.coordinates.join(",")))},LineString:function(n){return Lr("LineString",Lr("coordinates",$h(n.coordinates)))},Polygon:function(n){if(!n.coordinates.length)return"";var t=n.coordinates[0],e=n.coordinates.slice(1),r=Lr("outerBoundaryIs",Lr("LinearRing",Lr("coordinates",$h(t)))),i=e.map(function(s){return Lr("innerBoundaryIs",Lr("LinearRing",Lr("coordinates",$h(s))))}).join("");return Lr("Polygon",r+i)},MultiPoint:function(n){return n.coordinates.length?Lr("MultiGeometry",n.coordinates.map(function(t){return Gs.Point({coordinates:t})}).join("")):""},MultiPolygon:function(n){return n.coordinates.length?Lr("MultiGeometry",n.coordinates.map(function(t){return Gs.Polygon({coordinates:t})}).join("")):""},MultiLineString:function(n){return n.coordinates.length?Lr("MultiGeometry",n.coordinates.map(function(t){return Gs.LineString({coordinates:t})}).join("")):""},GeometryCollection:function(n){return Lr("MultiGeometry",n.geometries.map(Gs.any).join(""))},valid:function(n){return n&&n.type&&(n.coordinates||n.type==="GeometryCollection"&&n.geometries&&n.geometries.every(Gs.valid))},any:function(n){return Gs[n.type]?Gs[n.type](n):""},isPoint:function(n){return n.type==="Point"||n.type==="MultiPoint"},isPolygon:function(n){return n.type==="Polygon"||n.type==="MultiPolygon"},isLine:function(n){return n.type==="LineString"||n.type==="MultiLineString"}};function $h(n){return n.map(function(t){return t.join(",")}).join(" ")}function qv(n){return Lr("ExtendedData",{},rb(n).map(Wv).join(""))}function Wv(n){return Lr("Data",{name:n[0]},Lr("value",{},hu(n[1]?n[1].toString():"")))}function Xv(n){return!!(n["marker-size"]||n["marker-symbol"]||n["marker-color"])}function $v(n){delete n["marker-size"],delete n["marker-symbol"],delete n["marker-color"],delete n["marker-shape"]}function Yv(n,t){return Lr("Style",{id:t},Lr("IconStyle",Lr("Icon",Lr("href",Zv(n))))+Kv(n))}function Zv(n){var t=n["marker-size"]||"medium",e=n["marker-symbol"]?"-"+n["marker-symbol"]:"",r=(n["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+t.charAt(0)+e+"+"+r+".png"}function Kv(n){return Lr("hotSpot",{xunits:"fraction",yunits:"fraction",x:"0.5",y:"0.5"},"")}function Jv(n){for(var t in n)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[t])return!0}function Qv(n){delete n.stroke,delete n["stroke-opacity"],delete n["stroke-width"],delete n.fill,delete n["fill-opacity"]}function tb(n,t){var e=Lr("LineStyle",Lr("color",Dp(n.stroke,n["stroke-opacity"])||"ff555555")+Lr("width",{},n["stroke-width"]===void 0?2:n["stroke-width"])),r="";return(n.fill||n["fill-opacity"])&&(r=Lr("PolyStyle",Lr("color",{},Dp(n.fill,n["fill-opacity"])||"88555555"))),Lr("Style",{id:t},e+r)}function eb(n){var t="";return n["marker-symbol"]&&(t=t+"ms"+n["marker-symbol"]),n["marker-color"]&&(t=t+"mc"+n["marker-color"].replace("#","")),n["marker-size"]&&(t=t+"ms"+n["marker-size"]),n.stroke&&(t=t+"s"+n.stroke.replace("#","")),n["stroke-width"]&&(t=t+"sw"+n["stroke-width"].toString().replace(".","")),n["stroke-opacity"]&&(t=t+"mo"+n["stroke-opacity"].toString().replace(".","")),n.fill&&(t=t+"f"+n.fill.replace("#","")),n["fill-opacity"]&&(t=t+"fo"+n["fill-opacity"].toString().replace(".","")),t}function Dp(n,t){if(typeof n!="string")return"";if(n=n.replace("#","").toLowerCase(),n.length===3)n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2];else if(n.length!==6)return"";var e=n[0]+n[1],r=n[2]+n[3],i=n[4]+n[5],s="ff";return typeof t=="number"&&t>=0&&t<=1&&(s=(t*255).toString(16),s.indexOf(".")>-1&&(s=s.substr(0,s.indexOf("."))),s.length<2&&(s="0"+s)),s+i+r+e}function rb(n){var t=[];for(var e in n)n[e]?t.push([e,n[e]]):t.push([e,""]);return t}});var gu=Ge((w3,em)=>{"use strict";var tm=Object.getOwnPropertySymbols,fb=Object.prototype.hasOwnProperty,db=Object.prototype.propertyIsEnumerable;function pb(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function mb(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}em.exports=mb()?Object.assign:function(n,t){for(var e,r=pb(n),i,s=1;s<arguments.length;s++){e=Object(arguments[s]);for(var o in e)fb.call(e,o)&&(r[o]=e[o]);if(tm){i=tm(e);for(var a=0;a<i.length;a++)db.call(e,i[a])&&(r[i[a]]=e[i[a]])}}return r}});var lc=Ge((oc,ac)=>{(function(n,t){typeof oc=="object"&&typeof ac<"u"?ac.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self).RBush=t()})(oc,function(){"use strict";function n(y,x,S,O,D){(function U(z,q,G,tt,K){for(;tt>G;){if(tt-G>600){var B=tt-G+1,N=q-G+1,Z=Math.log(B),w=.5*Math.exp(2*Z/3),C=.5*Math.sqrt(Z*w*(B-w)/B)*(N-B/2<0?-1:1),k=Math.max(G,Math.floor(q-N*w/B+C)),T=Math.min(tt,Math.floor(q+(B-N)*w/B+C));U(z,q,k,T,K)}var R=z[q],F=G,H=tt;for(t(z,G,q),K(z[tt],R)>0&&t(z,G,tt);F<H;){for(t(z,F,H),F++,H--;K(z[F],R)<0;)F++;for(;K(z[H],R)>0;)H--}K(z[G],R)===0?t(z,G,H):t(z,++H,tt),H<=q&&(G=H+1),q<=H&&(tt=H-1)}})(y,x,S||0,O||y.length-1,D||e)}function t(y,x,S){var O=y[x];y[x]=y[S],y[S]=O}function e(y,x){return y<x?-1:y>x?1:0}var r=function(y){y===void 0&&(y=9),this._maxEntries=Math.max(4,y),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(y,x,S){if(!S)return x.indexOf(y);for(var O=0;O<x.length;O++)if(S(y,x[O]))return O;return-1}function s(y,x){o(y,0,y.children.length,x,y)}function o(y,x,S,O,D){D||(D=m(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var U=x;U<S;U++){var z=y.children[U];a(D,y.leaf?O(z):z)}return D}function a(y,x){return y.minX=Math.min(y.minX,x.minX),y.minY=Math.min(y.minY,x.minY),y.maxX=Math.max(y.maxX,x.maxX),y.maxY=Math.max(y.maxY,x.maxY),y}function l(y,x){return y.minX-x.minX}function c(y,x){return y.minY-x.minY}function h(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function d(y){return y.maxX-y.minX+(y.maxY-y.minY)}function p(y,x){return y.minX<=x.minX&&y.minY<=x.minY&&x.maxX<=y.maxX&&x.maxY<=y.maxY}function g(y,x){return x.minX<=y.maxX&&x.minY<=y.maxY&&x.maxX>=y.minX&&x.maxY>=y.minY}function m(y){return{children:y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(y,x,S,O,D){for(var U=[x,S];U.length;)if(!((S=U.pop())-(x=U.pop())<=O)){var z=x+Math.ceil((S-x)/O/2)*O;n(y,z,x,S,D),U.push(x,z,z,S)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(y){var x=this.data,S=[];if(!g(y,x))return S;for(var O=this.toBBox,D=[];x;){for(var U=0;U<x.children.length;U++){var z=x.children[U],q=x.leaf?O(z):z;g(y,q)&&(x.leaf?S.push(z):p(y,q)?this._all(z,S):D.push(z))}x=D.pop()}return S},r.prototype.collides=function(y){var x=this.data;if(!g(y,x))return!1;for(var S=[];x;){for(var O=0;O<x.children.length;O++){var D=x.children[O],U=x.leaf?this.toBBox(D):D;if(g(y,U)){if(x.leaf||p(y,U))return!0;S.push(D)}}x=S.pop()}return!1},r.prototype.load=function(y){if(!y||!y.length)return this;if(y.length<this._minEntries){for(var x=0;x<y.length;x++)this.insert(y[x]);return this}var S=this._build(y.slice(),0,y.length-1,0);if(this.data.children.length)if(this.data.height===S.height)this._splitRoot(this.data,S);else{if(this.data.height<S.height){var O=this.data;this.data=S,S=O}this._insert(S,this.data.height-S.height-1,!0)}else this.data=S;return this},r.prototype.insert=function(y){return y&&this._insert(y,this.data.height-1),this},r.prototype.clear=function(){return this.data=m([]),this},r.prototype.remove=function(y,x){if(!y)return this;for(var S,O,D,U=this.data,z=this.toBBox(y),q=[],G=[];U||q.length;){if(U||(U=q.pop(),O=q[q.length-1],S=G.pop(),D=!0),U.leaf){var tt=i(y,U.children,x);if(tt!==-1)return U.children.splice(tt,1),q.push(U),this._condense(q),this}D||U.leaf||!p(U,z)?O?(S++,U=O.children[S],D=!1):U=null:(q.push(U),G.push(S),S=0,O=U,U=U.children[0])}return this},r.prototype.toBBox=function(y){return y},r.prototype.compareMinX=function(y,x){return y.minX-x.minX},r.prototype.compareMinY=function(y,x){return y.minY-x.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(y){return this.data=y,this},r.prototype._all=function(y,x){for(var S=[];y;)y.leaf?x.push.apply(x,y.children):S.push.apply(S,y.children),y=S.pop();return x},r.prototype._build=function(y,x,S,O){var D,U=S-x+1,z=this._maxEntries;if(U<=z)return s(D=m(y.slice(x,S+1)),this.toBBox),D;O||(O=Math.ceil(Math.log(U)/Math.log(z)),z=Math.ceil(U/Math.pow(z,O-1))),(D=m([])).leaf=!1,D.height=O;var q=Math.ceil(U/z),G=q*Math.ceil(Math.sqrt(z));b(y,x,S,G,this.compareMinX);for(var tt=x;tt<=S;tt+=G){var K=Math.min(tt+G-1,S);b(y,tt,K,q,this.compareMinY);for(var B=tt;B<=K;B+=q){var N=Math.min(B+q-1,K);D.children.push(this._build(y,B,N,O-1))}}return s(D,this.toBBox),D},r.prototype._chooseSubtree=function(y,x,S,O){for(;O.push(x),!x.leaf&&O.length-1!==S;){for(var D=1/0,U=1/0,z=void 0,q=0;q<x.children.length;q++){var G=x.children[q],tt=h(G),K=(B=y,N=G,(Math.max(N.maxX,B.maxX)-Math.min(N.minX,B.minX))*(Math.max(N.maxY,B.maxY)-Math.min(N.minY,B.minY))-tt);K<U?(U=K,D=tt<D?tt:D,z=G):K===U&&tt<D&&(D=tt,z=G)}x=z||x.children[0]}var B,N;return x},r.prototype._insert=function(y,x,S){var O=S?y:this.toBBox(y),D=[],U=this._chooseSubtree(O,this.data,x,D);for(U.children.push(y),a(U,O);x>=0&&D[x].children.length>this._maxEntries;)this._split(D,x),x--;this._adjustParentBBoxes(O,D,x)},r.prototype._split=function(y,x){var S=y[x],O=S.children.length,D=this._minEntries;this._chooseSplitAxis(S,D,O);var U=this._chooseSplitIndex(S,D,O),z=m(S.children.splice(U,S.children.length-U));z.height=S.height,z.leaf=S.leaf,s(S,this.toBBox),s(z,this.toBBox),x?y[x-1].children.push(z):this._splitRoot(S,z)},r.prototype._splitRoot=function(y,x){this.data=m([y,x]),this.data.height=y.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(y,x,S){for(var O,D,U,z,q,G,tt,K=1/0,B=1/0,N=x;N<=S-x;N++){var Z=o(y,0,N,this.toBBox),w=o(y,N,S,this.toBBox),C=(D=Z,U=w,z=void 0,q=void 0,G=void 0,tt=void 0,z=Math.max(D.minX,U.minX),q=Math.max(D.minY,U.minY),G=Math.min(D.maxX,U.maxX),tt=Math.min(D.maxY,U.maxY),Math.max(0,G-z)*Math.max(0,tt-q)),k=h(Z)+h(w);C<K?(K=C,O=N,B=k<B?k:B):C===K&&k<B&&(B=k,O=N)}return O||S-x},r.prototype._chooseSplitAxis=function(y,x,S){var O=y.leaf?this.compareMinX:l,D=y.leaf?this.compareMinY:c;this._allDistMargin(y,x,S,O)<this._allDistMargin(y,x,S,D)&&y.children.sort(O)},r.prototype._allDistMargin=function(y,x,S,O){y.children.sort(O);for(var D=this.toBBox,U=o(y,0,x,D),z=o(y,S-x,S,D),q=d(U)+d(z),G=x;G<S-x;G++){var tt=y.children[G];a(U,y.leaf?D(tt):tt),q+=d(U)}for(var K=S-x-1;K>=x;K--){var B=y.children[K];a(z,y.leaf?D(B):B),q+=d(z)}return q},r.prototype._adjustParentBBoxes=function(y,x,S){for(var O=S;O>=0;O--)a(x[O],y)},r.prototype._condense=function(y){for(var x=y.length-1,S=void 0;x>=0;x--)y[x].children.length===0?x>0?(S=y[x-1].children).splice(S.indexOf(y[x]),1):this.clear():s(y[x],this.toBBox)},r})});var rm=Ge((uc,hc)=>{(function(n,t){typeof uc=="object"&&typeof hc<"u"?hc.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self,n.TinyQueue=t())})(uc,function(){"use strict";var n=function(r,i){if(r===void 0&&(r=[]),i===void 0&&(i=t),this.data=r,this.length=this.data.length,this.compare=i,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};n.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},n.prototype.pop=function(){if(this.length!==0){var r=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),r}},n.prototype.peek=function(){return this.data[0]},n.prototype._up=function(r){for(var i=this,s=i.data,o=i.compare,a=s[r];r>0;){var l=r-1>>1,c=s[l];if(o(a,c)>=0)break;s[r]=c,r=l}s[r]=a},n.prototype._down=function(r){for(var i=this,s=i.data,o=i.compare,a=this.length>>1,l=s[r];r<a;){var c=(r<<1)+1,h=s[c],d=c+1;if(d<this.length&&o(s[d],h)<0&&(c=d,h=s[d]),o(h,l)>=0)break;s[r]=h,r=c}s[r]=l};function t(e,r){return e<r?-1:e>r?1:0}return n})});var nm=Ge((k3,im)=>{im.exports=function(t,e,r,i){var s=t[0],o=t[1],a=!1;r===void 0&&(r=0),i===void 0&&(i=e.length);for(var l=(i-r)/2,c=0,h=l-1;c<l;h=c++){var d=e[r+c*2+0],p=e[r+c*2+1],g=e[r+h*2+0],m=e[r+h*2+1],b=p>o!=m>o&&s<(g-d)*(o-p)/(m-p)+d;b&&(a=!a)}return a}});var om=Ge((L3,sm)=>{sm.exports=function(t,e,r,i){var s=t[0],o=t[1],a=!1;r===void 0&&(r=0),i===void 0&&(i=e.length);for(var l=i-r,c=0,h=l-1;c<l;h=c++){var d=e[c+r][0],p=e[c+r][1],g=e[h+r][0],m=e[h+r][1],b=p>o!=m>o&&s<(g-d)*(o-p)/(m-p)+d;b&&(a=!a)}return a}});var um=Ge((T3,bu)=>{var am=nm(),lm=om();bu.exports=function(t,e,r,i){return e.length>0&&Array.isArray(e[0])?lm(t,e,r,i):am(t,e,r,i)};bu.exports.nested=lm;bu.exports.flat=am});var cm=Ge((_u,hm)=>{(function(n,t){typeof _u=="object"&&typeof hm<"u"?t(_u):typeof define=="function"&&define.amd?define(["exports"],t):t((n=n||self).predicates={})})(_u,function(n){"use strict";let e=33306690738754706e-32;function r(g,m,b,y,x){let S,O,D,U,z=m[0],q=y[0],G=0,tt=0;q>z==q>-z?(S=z,z=m[++G]):(S=q,q=y[++tt]);let K=0;if(G<g&&tt<b)for(q>z==q>-z?(D=S-((O=z+S)-z),z=m[++G]):(D=S-((O=q+S)-q),q=y[++tt]),S=O,D!==0&&(x[K++]=D);G<g&&tt<b;)q>z==q>-z?(D=S-((O=S+z)-(U=O-S))+(z-U),z=m[++G]):(D=S-((O=S+q)-(U=O-S))+(q-U),q=y[++tt]),S=O,D!==0&&(x[K++]=D);for(;G<g;)D=S-((O=S+z)-(U=O-S))+(z-U),z=m[++G],S=O,D!==0&&(x[K++]=D);for(;tt<b;)D=S-((O=S+q)-(U=O-S))+(q-U),q=y[++tt],S=O,D!==0&&(x[K++]=D);return S===0&&K!==0||(x[K++]=S),K}function i(g){return new Float64Array(g)}let s=33306690738754716e-32,o=22204460492503146e-32,a=11093356479670487e-47,l=i(4),c=i(8),h=i(12),d=i(16),p=i(4);n.orient2d=function(g,m,b,y,x,S){let O=(m-S)*(b-x),D=(g-x)*(y-S),U=O-D;if(O===0||D===0||O>0!=D>0)return U;let z=Math.abs(O+D);return Math.abs(U)>=s*z?U:-function(q,G,tt,K,B,N,Z){let w,C,k,T,R,F,H,rt,ot,dt,$,ct,W,V,it,mt,wt,_t,Ct=q-B,Ft=tt-B,It=G-N,vt=K-N;R=(it=(rt=Ct-(H=(F=134217729*Ct)-(F-Ct)))*(dt=vt-(ot=(F=134217729*vt)-(F-vt)))-((V=Ct*vt)-H*ot-rt*ot-H*dt))-($=it-(wt=(rt=It-(H=(F=134217729*It)-(F-It)))*(dt=Ft-(ot=(F=134217729*Ft)-(F-Ft)))-((mt=It*Ft)-H*ot-rt*ot-H*dt))),l[0]=it-($+R)+(R-wt),R=(W=V-((ct=V+$)-(R=ct-V))+($-R))-($=W-mt),l[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,l[2]=ct-(_t-R)+($-R),l[3]=_t;let kt=function(et,lt){let pt=lt[0];for(let bt=1;bt<et;bt++)pt+=lt[bt];return pt}(4,l),gt=o*Z;if(kt>=gt||-kt>=gt||(w=q-(Ct+(R=q-Ct))+(R-B),k=tt-(Ft+(R=tt-Ft))+(R-B),C=G-(It+(R=G-It))+(R-N),T=K-(vt+(R=K-vt))+(R-N),w===0&&C===0&&k===0&&T===0)||(gt=a*Z+e*Math.abs(kt),(kt+=Ct*T+vt*w-(It*k+Ft*C))>=gt||-kt>=gt))return kt;R=(it=(rt=w-(H=(F=134217729*w)-(F-w)))*(dt=vt-(ot=(F=134217729*vt)-(F-vt)))-((V=w*vt)-H*ot-rt*ot-H*dt))-($=it-(wt=(rt=C-(H=(F=134217729*C)-(F-C)))*(dt=Ft-(ot=(F=134217729*Ft)-(F-Ft)))-((mt=C*Ft)-H*ot-rt*ot-H*dt))),p[0]=it-($+R)+(R-wt),R=(W=V-((ct=V+$)-(R=ct-V))+($-R))-($=W-mt),p[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,p[2]=ct-(_t-R)+($-R),p[3]=_t;let ut=r(4,l,4,p,c);R=(it=(rt=Ct-(H=(F=134217729*Ct)-(F-Ct)))*(dt=T-(ot=(F=134217729*T)-(F-T)))-((V=Ct*T)-H*ot-rt*ot-H*dt))-($=it-(wt=(rt=It-(H=(F=134217729*It)-(F-It)))*(dt=k-(ot=(F=134217729*k)-(F-k)))-((mt=It*k)-H*ot-rt*ot-H*dt))),p[0]=it-($+R)+(R-wt),R=(W=V-((ct=V+$)-(R=ct-V))+($-R))-($=W-mt),p[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,p[2]=ct-(_t-R)+($-R),p[3]=_t;let Q=r(ut,c,4,p,h);R=(it=(rt=w-(H=(F=134217729*w)-(F-w)))*(dt=T-(ot=(F=134217729*T)-(F-T)))-((V=w*T)-H*ot-rt*ot-H*dt))-($=it-(wt=(rt=C-(H=(F=134217729*C)-(F-C)))*(dt=k-(ot=(F=134217729*k)-(F-k)))-((mt=C*k)-H*ot-rt*ot-H*dt))),p[0]=it-($+R)+(R-wt),R=(W=V-((ct=V+$)-(R=ct-V))+($-R))-($=W-mt),p[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,p[2]=ct-(_t-R)+($-R),p[3]=_t;let Y=r(Q,h,4,p,d);return d[Y-1]}(g,m,b,y,x,S,z)},n.orient2dfast=function(g,m,b,y,x,S){return(m-S)*(b-x)-(g-x)*(y-S)},Object.defineProperty(n,"__esModule",{value:!0})})});var ym=Ge((P3,pc)=>{"use strict";var fm=lc(),xu=rm(),yb=um(),vb=cm().orient2d;xu.default&&(xu=xu.default);pc.exports=gm;pc.exports.default=gm;function gm(n,t,e){t=Math.max(0,t===void 0?2:t),e=e||0;var r=Eb(n),i=new fm(16);i.toBBox=function(S){return{minX:S[0],minY:S[1],maxX:S[0],maxY:S[1]}},i.compareMinX=function(S,O){return S[0]-O[0]},i.compareMinY=function(S,O){return S[1]-O[1]},i.load(n);for(var s=[],o=0,a;o<r.length;o++){var l=r[o];i.remove(l),a=mm(l,a),s.push(a)}var c=new fm(16);for(o=0;o<s.length;o++)c.insert(cc(s[o]));for(var h=t*t,d=e*e;s.length;){var p=s.shift(),g=p.p,m=p.next.p,b=fc(g,m);if(!(b<d)){var y=b/h;l=bb(i,p.prev.p,g,m,p.next.next.p,y,c),l&&Math.min(fc(l,g),fc(l,m))<=y&&(s.push(p),s.push(mm(l,p)),i.remove(l),c.remove(p),c.insert(cc(p)),c.insert(cc(p.next)))}}p=a;var x=[];do x.push(p.p),p=p.next;while(p!==a);return x.push(p.p),x}function bb(n,t,e,r,i,s,o){for(var a=new xu([],_b),l=n.data;l;){for(var c=0;c<l.children.length;c++){var h=l.children[c],d=l.leaf?dc(h,e,r):wb(e,r,h);d>s||a.push({node:h,dist:d})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),g=p.node,m=dc(g,t,e),b=dc(g,r,i);if(p.dist<m&&p.dist<b&&pm(e,g,o)&&pm(r,g,o))return g}l=a.pop(),l&&(l=l.node)}return null}function _b(n,t){return n.dist-t.dist}function wb(n,t,e){if(dm(n,e)||dm(t,e))return 0;var r=wu(n[0],n[1],t[0],t[1],e.minX,e.minY,e.maxX,e.minY);if(r===0)return 0;var i=wu(n[0],n[1],t[0],t[1],e.minX,e.minY,e.minX,e.maxY);if(i===0)return 0;var s=wu(n[0],n[1],t[0],t[1],e.maxX,e.minY,e.maxX,e.maxY);if(s===0)return 0;var o=wu(n[0],n[1],t[0],t[1],e.minX,e.maxY,e.maxX,e.maxY);return o===0?0:Math.min(r,i,s,o)}function dm(n,t){return n[0]>=t.minX&&n[0]<=t.maxX&&n[1]>=t.minY&&n[1]<=t.maxY}function pm(n,t,e){for(var r=Math.min(n[0],t[0]),i=Math.min(n[1],t[1]),s=Math.max(n[0],t[0]),o=Math.max(n[1],t[1]),a=e.search({minX:r,minY:i,maxX:s,maxY:o}),l=0;l<a.length;l++)if(xb(a[l].p,a[l].next.p,n,t))return!1;return!0}function Ta(n,t,e){return vb(n[0],n[1],t[0],t[1],e[0],e[1])}function xb(n,t,e,r){return n!==r&&t!==e&&Ta(n,t,e)>0!=Ta(n,t,r)>0&&Ta(e,r,n)>0!=Ta(e,r,t)>0}function cc(n){var t=n.p,e=n.next.p;return n.minX=Math.min(t[0],e[0]),n.minY=Math.min(t[1],e[1]),n.maxX=Math.max(t[0],e[0]),n.maxY=Math.max(t[1],e[1]),n}function Eb(n){for(var t=n[0],e=n[0],r=n[0],i=n[0],s=0;s<n.length;s++){var o=n[s];o[0]<t[0]&&(t=o),o[0]>r[0]&&(r=o),o[1]<e[1]&&(e=o),o[1]>i[1]&&(i=o)}var a=[t,e,r,i],l=a.slice();for(s=0;s<n.length;s++)yb(n[s],a)||l.push(n[s]);return Mb(l)}function mm(n,t){var e={p:n,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(e.next=t.next,e.prev=t,t.next.prev=e,t.next=e):(e.prev=e,e.next=e),e}function fc(n,t){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function dc(n,t,e){var r=t[0],i=t[1],s=e[0]-r,o=e[1]-i;if(s!==0||o!==0){var a=((n[0]-r)*s+(n[1]-i)*o)/(s*s+o*o);a>1?(r=e[0],i=e[1]):a>0&&(r+=s*a,i+=o*a)}return s=n[0]-r,o=n[1]-i,s*s+o*o}function wu(n,t,e,r,i,s,o,a){var l=e-n,c=r-t,h=o-i,d=a-s,p=n-i,g=t-s,m=l*l+c*c,b=l*h+c*d,y=h*h+d*d,x=l*p+c*g,S=h*p+d*g,O=m*y-b*b,D,U,z,q,G=O,tt=O;O===0?(U=0,G=1,q=S,tt=y):(U=b*S-y*x,q=m*S-b*x,U<0?(U=0,q=S,tt=y):U>G&&(U=G,q=S+b,tt=y)),q<0?(q=0,-x<0?U=0:-x>m?U=G:(U=-x,G=m)):q>tt&&(q=tt,-x+b<0?U=0:-x+b>m?U=G:(U=-x+b,G=m)),D=U===0?0:U/G,z=q===0?0:q/tt;var K=(1-D)*n+D*e,B=(1-D)*t+D*r,N=(1-z)*i+z*o,Z=(1-z)*s+z*a,w=N-K,C=Z-B;return w*w+C*C}function Cb(n,t){return n[0]===t[0]?n[1]-t[1]:n[0]-t[0]}function Mb(n){n.sort(Cb);for(var t=[],e=0;e<n.length;e++){for(;t.length>=2&&Ta(t[t.length-2],t[t.length-1],n[e])<=0;)t.pop();t.push(n[e])}for(var r=[],i=n.length-1;i>=0;i--){for(;r.length>=2&&Ta(r[r.length-2],r[r.length-1],n[i])<=0;)r.pop();r.push(n[i])}return r.pop(),t.pop(),t.concat(r)}});var xm=Ge((gc,yc)=>{(function(n,t){typeof gc=="object"&&typeof yc<"u"?yc.exports=t():typeof define=="function"&&define.amd?define(t):n.quickselect=t()})(gc,function(){"use strict";function n(i,s,o,a,l){t(i,s,o||0,a||i.length-1,l||r)}function t(i,s,o,a,l){for(;a>o;){if(a-o>600){var c=a-o+1,h=s-o+1,d=Math.log(c),p=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*p*(c-p)/c)*(h-c/2<0?-1:1),m=Math.max(o,Math.floor(s-h*p/c+g)),b=Math.min(a,Math.floor(s+(c-h)*p/c+g));t(i,s,m,b,l)}var y=i[s],x=o,S=a;for(e(i,o,s),l(i[a],y)>0&&e(i,o,a);x<S;){for(e(i,x,S),x++,S--;l(i[x],y)<0;)x++;for(;l(i[S],y)>0;)S--}l(i[o],y)===0?e(i,o,S):(S++,e(i,S,a)),S<=s&&(o=S+1),s<=S&&(a=S-1)}}function e(i,s,o){var a=i[s];i[s]=i[o],i[o]=a}function r(i,s){return i<s?-1:i>s?1:0}return n})});var Sm=Ge((rk,_c)=>{"use strict";_c.exports=bl;_c.exports.default=bl;var zb=xm();function bl(n,t){if(!(this instanceof bl))return new bl(n,t);this._maxEntries=Math.max(4,n||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}bl.prototype={all:function(){return this._all(this.data,[])},search:function(n){var t=this.data,e=[],r=this.toBBox;if(!Cu(n,t))return e;for(var i=[],s,o,a,l;t;){for(s=0,o=t.children.length;s<o;s++)a=t.children[s],l=t.leaf?r(a):a,Cu(n,l)&&(t.leaf?e.push(a):bc(n,l)?this._all(a,e):i.push(a));t=i.pop()}return e},collides:function(n){var t=this.data,e=this.toBBox;if(!Cu(n,t))return!1;for(var r=[],i,s,o,a;t;){for(i=0,s=t.children.length;i<s;i++)if(o=t.children[i],a=t.leaf?e(o):o,Cu(n,a)){if(t.leaf||bc(n,a))return!0;r.push(o)}t=r.pop()}return!1},load:function(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(var t=0,e=n.length;t<e;t++)this.insert(n[t]);return this}var r=this._build(n.slice(),0,n.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}return this},insert:function(n){return n&&this._insert(n,this.data.height-1),this},clear:function(){return this.data=Ra([]),this},remove:function(n,t){if(!n)return this;for(var e=this.data,r=this.toBBox(n),i=[],s=[],o,a,l,c;e||i.length;){if(e||(e=i.pop(),a=i[i.length-1],o=s.pop(),c=!0),e.leaf&&(l=jb(n,e.children,t),l!==-1))return e.children.splice(l,1),i.push(e),this._condense(i),this;!c&&!e.leaf&&bc(e,r)?(i.push(e),s.push(o),o=0,a=e,e=e.children[0]):a?(o++,e=a.children[o],c=!1):e=null}return this},toBBox:function(n){return n},compareMinX:Em,compareMinY:Cm,toJSON:function(){return this.data},fromJSON:function(n){return this.data=n,this},_all:function(n,t){for(var e=[];n;)n.leaf?t.push.apply(t,n.children):e.push.apply(e,n.children),n=e.pop();return t},_build:function(n,t,e,r){var i=e-t+1,s=this._maxEntries,o;if(i<=s)return o=Ra(n.slice(t,e+1)),Pa(o,this.toBBox),o;r||(r=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,r-1))),o=Ra([]),o.leaf=!1,o.height=r;var a=Math.ceil(i/s),l=a*Math.ceil(Math.sqrt(s)),c,h,d,p;for(Mm(n,t,e,l,this.compareMinX),c=t;c<=e;c+=l)for(d=Math.min(c+l-1,e),Mm(n,c,d,a,this.compareMinY),h=c;h<=d;h+=a)p=Math.min(h+a-1,d),o.children.push(this._build(n,h,p,r-1));return Pa(o,this.toBBox),o},_chooseSubtree:function(n,t,e,r){for(var i,s,o,a,l,c,h,d;r.push(t),!(t.leaf||r.length-1===e);){for(h=d=1/0,i=0,s=t.children.length;i<s;i++)o=t.children[i],l=vc(o),c=Hb(n,o)-l,c<d?(d=c,h=l<h?l:h,a=o):c===d&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(n,t,e){var r=this.toBBox,i=e?n:r(n),s=[],o=this._chooseSubtree(i,this.data,t,s);for(o.children.push(n),vl(o,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)},_split:function(n,t){var e=n[t],r=e.children.length,i=this._minEntries;this._chooseSplitAxis(e,i,r);var s=this._chooseSplitIndex(e,i,r),o=Ra(e.children.splice(s,e.children.length-s));o.height=e.height,o.leaf=e.leaf,Pa(e,this.toBBox),Pa(o,this.toBBox),t?n[t-1].children.push(o):this._splitRoot(e,o)},_splitRoot:function(n,t){this.data=Ra([n,t]),this.data.height=n.height+1,this.data.leaf=!1,Pa(this.data,this.toBBox)},_chooseSplitIndex:function(n,t,e){var r,i,s,o,a,l,c,h;for(l=c=1/0,r=t;r<=e-t;r++)i=yl(n,0,r,this.toBBox),s=yl(n,r,e,this.toBBox),o=Gb(i,s),a=vc(i)+vc(s),o<l?(l=o,h=r,c=a<c?a:c):o===l&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(n,t,e){var r=n.leaf?this.compareMinX:Em,i=n.leaf?this.compareMinY:Cm,s=this._allDistMargin(n,t,e,r),o=this._allDistMargin(n,t,e,i);s<o&&n.children.sort(r)},_allDistMargin:function(n,t,e,r){n.children.sort(r);var i=this.toBBox,s=yl(n,0,t,i),o=yl(n,e-t,e,i),a=Eu(s)+Eu(o),l,c;for(l=t;l<e-t;l++)c=n.children[l],vl(s,n.leaf?i(c):c),a+=Eu(s);for(l=e-t-1;l>=t;l--)c=n.children[l],vl(o,n.leaf?i(c):c),a+=Eu(o);return a},_adjustParentBBoxes:function(n,t,e){for(var r=e;r>=0;r--)vl(t[r],n)},_condense:function(n){for(var t=n.length-1,e;t>=0;t--)n[t].children.length===0?t>0?(e=n[t-1].children,e.splice(e.indexOf(n[t]),1)):this.clear():Pa(n[t],this.toBBox)},_initFormat:function(n){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(n[0])),this.compareMinY=new Function("a","b",t.join(n[1])),this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};function jb(n,t,e){if(!e)return t.indexOf(n);for(var r=0;r<t.length;r++)if(e(n,t[r]))return r;return-1}function Pa(n,t){yl(n,0,n.children.length,t,n)}function yl(n,t,e,r,i){i||(i=Ra(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s=t,o;s<e;s++)o=n.children[s],vl(i,n.leaf?r(o):o);return i}function vl(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function Em(n,t){return n.minX-t.minX}function Cm(n,t){return n.minY-t.minY}function vc(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Eu(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Hb(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function Gb(n,t){var e=Math.max(n.minX,t.minX),r=Math.max(n.minY,t.minY),i=Math.min(n.maxX,t.maxX),s=Math.min(n.maxY,t.maxY);return Math.max(0,i-e)*Math.max(0,s-r)}function bc(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function Cu(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function Ra(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Mm(n,t,e,r,i){for(var s=[t,e],o;s.length;)e=s.pop(),t=s.pop(),!(e-t<=r)&&(o=t+Math.ceil((e-t)/r/2)*r,zb(n,o,t,e,i),s.push(t,o,o,e))}});var Rm=Ge((m4,Mc)=>{"use strict";Mc.exports=Lu;Mc.exports.default=Lu;function Lu(n,t,e){e=e||2;var r=t&&t.length,i=r?t[0]*e:n.length,s=Lm(n,0,i,e,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,h,d,p,g;if(r&&(s=t1(n,t,s,e)),n.length>80*e){a=c=n[0],l=h=n[1];for(var m=e;m<i;m+=e)d=n[m],p=n[m+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>h&&(h=p);g=Math.max(c-a,h-l),g=g!==0?32767/g:0}return xl(s,o,e,a,l,g,0),o}function Lm(n,t,e,r,i){var s,o;if(i===Cc(n,t,e,r)>0)for(s=t;s<e;s+=r)o=km(s,n[s],n[s+1],o);else for(s=e-r;s>=t;s-=r)o=km(s,n[s],n[s+1],o);return o&&Tu(o,o.next)&&(Cl(o),o=o.next),o}function aa(n,t){if(!n)return n;t||(t=n);var e=n,r;do if(r=!1,!e.steiner&&(Tu(e,e.next)||nn(e.prev,e,e.next)===0)){if(Cl(e),e=t=e.prev,e===e.next)break;r=!0}else e=e.next;while(r||e!==t);return t}function xl(n,t,e,r,i,s,o){if(n){!o&&s&&s1(n,r,i,s);for(var a=n,l,c;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Kb(n,r,i,s):Zb(n)){t.push(l.i/e|0),t.push(n.i/e|0),t.push(c.i/e|0),Cl(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=Jb(aa(n),t,e),xl(n,t,e,r,i,s,2)):o===2&&Qb(n,t,e,r,i,s):xl(aa(n),t,e,r,i,s,1);break}}}}function Zb(n){var t=n.prev,e=n,r=n.next;if(nn(t,e,r)>=0)return!1;for(var i=t.x,s=e.x,o=r.x,a=t.y,l=e.y,c=r.y,h=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,g=a>l?a>c?a:c:l>c?l:c,m=r.next;m!==t;){if(m.x>=h&&m.x<=p&&m.y>=d&&m.y<=g&&Aa(i,a,s,l,o,c,m.x,m.y)&&nn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Kb(n,t,e,r){var i=n.prev,s=n,o=n.next;if(nn(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,h=i.y,d=s.y,p=o.y,g=a<l?a<c?a:c:l<c?l:c,m=h<d?h<p?h:p:d<p?d:p,b=a>l?a>c?a:c:l>c?l:c,y=h>d?h>p?h:p:d>p?d:p,x=xc(g,m,t,e,r),S=xc(b,y,t,e,r),O=n.prevZ,D=n.nextZ;O&&O.z>=x&&D&&D.z<=S;){if(O.x>=g&&O.x<=b&&O.y>=m&&O.y<=y&&O!==i&&O!==o&&Aa(a,h,l,d,c,p,O.x,O.y)&&nn(O.prev,O,O.next)>=0||(O=O.prevZ,D.x>=g&&D.x<=b&&D.y>=m&&D.y<=y&&D!==i&&D!==o&&Aa(a,h,l,d,c,p,D.x,D.y)&&nn(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;O&&O.z>=x;){if(O.x>=g&&O.x<=b&&O.y>=m&&O.y<=y&&O!==i&&O!==o&&Aa(a,h,l,d,c,p,O.x,O.y)&&nn(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;D&&D.z<=S;){if(D.x>=g&&D.x<=b&&D.y>=m&&D.y<=y&&D!==i&&D!==o&&Aa(a,h,l,d,c,p,D.x,D.y)&&nn(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function Jb(n,t,e){var r=n;do{var i=r.prev,s=r.next.next;!Tu(i,s)&&Tm(i,r,r.next,s)&&El(i,s)&&El(s,i)&&(t.push(i.i/e|0),t.push(r.i/e|0),t.push(s.i/e|0),Cl(r),Cl(r.next),r=n=s),r=r.next}while(r!==n);return aa(r)}function Qb(n,t,e,r,i,s){var o=n;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&l1(o,a)){var l=Pm(o,a);o=aa(o,o.next),l=aa(l,l.next),xl(o,t,e,r,i,s,0),xl(l,t,e,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function t1(n,t,e,r){var i=[],s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*r,l=s<o-1?t[s+1]*r:n.length,c=Lm(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(a1(c));for(i.sort(e1),s=0;s<i.length;s++)e=r1(i[s],e);return e}function e1(n,t){return n.x-t.x}function r1(n,t){var e=i1(n,t);if(!e)return t;var r=Pm(e,n);return aa(r,r.next),aa(e,e.next)}function i1(n,t){var e=t,r=n.x,i=n.y,s=-1/0,o;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){var a=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=r&&a>s&&(s=a,o=e.x<e.next.x?e:e.next,a===r))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,c=o.x,h=o.y,d=1/0,p;e=o;do r>=e.x&&e.x>=c&&r!==e.x&&Aa(i<h?r:s,i,c,h,i<h?s:r,i,e.x,e.y)&&(p=Math.abs(i-e.y)/(r-e.x),El(e,n)&&(p<d||p===d&&(e.x>o.x||e.x===o.x&&n1(o,e)))&&(o=e,d=p)),e=e.next;while(e!==l);return o}function n1(n,t){return nn(n.prev,n,t.prev)<0&&nn(t.next,n,n.next)<0}function s1(n,t,e,r){var i=n;do i.z===0&&(i.z=xc(i.x,i.y,t,e,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,o1(i)}function o1(n){var t,e,r,i,s,o,a,l,c=1;do{for(e=n,n=null,s=null,o=0;e;){for(o++,r=e,a=0,t=0;t<c&&(a++,r=r.nextZ,!!r);t++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||e.z<=r.z)?(i=e,e=e.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;e=r}s.nextZ=null,c*=2}while(o>1);return n}function xc(n,t,e,r,i){return n=(n-e)*i|0,t=(t-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function a1(n){var t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function Aa(n,t,e,r,i,s,o,a){return(i-o)*(t-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(e-o)*(t-a)&&(e-o)*(s-a)>=(i-o)*(r-a)}function l1(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!u1(n,t)&&(El(n,t)&&El(t,n)&&h1(n,t)&&(nn(n.prev,n,t.prev)||nn(n,t.prev,t))||Tu(n,t)&&nn(n.prev,n,n.next)>0&&nn(t.prev,t,t.next)>0)}function nn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Tu(n,t){return n.x===t.x&&n.y===t.y}function Tm(n,t,e,r){var i=ku(nn(n,t,e)),s=ku(nn(n,t,r)),o=ku(nn(e,r,n)),a=ku(nn(e,r,t));return!!(i!==s&&o!==a||i===0&&Su(n,e,t)||s===0&&Su(n,r,t)||o===0&&Su(e,n,r)||a===0&&Su(e,t,r))}function Su(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function ku(n){return n>0?1:n<0?-1:0}function u1(n,t){var e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&Tm(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function El(n,t){return nn(n.prev,n,n.next)<0?nn(n,t,n.next)>=0&&nn(n,n.prev,t)>=0:nn(n,t,n.prev)<0||nn(n,n.next,t)<0}function h1(n,t){var e=n,r=!1,i=(n.x+t.x)/2,s=(n.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&i<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next;while(e!==n);return r}function Pm(n,t){var e=new Ec(n.i,n.x,n.y),r=new Ec(t.i,t.x,t.y),i=n.next,s=t.prev;return n.next=t,t.prev=n,e.next=i,i.prev=e,r.next=e,e.prev=r,s.next=r,r.prev=s,r}function km(n,t,e,r){var i=new Ec(n,t,e);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Cl(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Ec(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Lu.deviation=function(n,t,e,r){var i=t&&t.length,s=i?t[0]*e:n.length,o=Math.abs(Cc(n,0,s,e));if(i)for(var a=0,l=t.length;a<l;a++){var c=t[a]*e,h=a<l-1?t[a+1]*e:n.length;o-=Math.abs(Cc(n,c,h,e))}var d=0;for(a=0;a<r.length;a+=3){var p=r[a]*e,g=r[a+1]*e,m=r[a+2]*e;d+=Math.abs((n[p]-n[m])*(n[g+1]-n[p+1])-(n[p]-n[g])*(n[m+1]-n[p+1]))}return o===0&&d===0?0:Math.abs((d-o)/o)};function Cc(n,t,e,r){for(var i=0,s=t,o=e-r;s<e;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}Lu.flatten=function(n){for(var t=n[0][0].length,e={vertices:[],holes:[],dimensions:t},r=0,i=0;i<n.length;i++){for(var s=0;s<n[i].length;s++)for(var o=0;o<t;o++)e.vertices.push(n[i][s][o]);i>0&&(r+=n[i-1].length,e.holes.push(r))}return e}});var Pc=Ge(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.earthRadius=63710088e-1;sr.factors={centimeters:sr.earthRadius*100,centimetres:sr.earthRadius*100,degrees:sr.earthRadius/111325,feet:sr.earthRadius*3.28084,inches:sr.earthRadius*39.37,kilometers:sr.earthRadius/1e3,kilometres:sr.earthRadius/1e3,meters:sr.earthRadius,metres:sr.earthRadius,miles:sr.earthRadius/1609.344,millimeters:sr.earthRadius*1e3,millimetres:sr.earthRadius*1e3,nauticalmiles:sr.earthRadius/1852,radians:1,yards:sr.earthRadius*1.0936};sr.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/sr.earthRadius,yards:1.0936133};sr.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function $o(n,t,e){e===void 0&&(e={});var r={type:"Feature"};return(e.id===0||e.id)&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.properties=t||{},r.geometry=n,r}sr.feature=$o;function g1(n,t,e){switch(e===void 0&&(e={}),n){case"Point":return Sc(t).geometry;case"LineString":return Lc(t).geometry;case"Polygon":return kc(t).geometry;case"MultiPoint":return Am(t).geometry;case"MultiLineString":return Om(t).geometry;case"MultiPolygon":return Im(t).geometry;default:throw new Error(n+" is invalid")}}sr.geometry=g1;function Sc(n,t,e){if(e===void 0&&(e={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Pu(n[0])||!Pu(n[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:n};return $o(r,t,e)}sr.point=Sc;function y1(n,t,e){return e===void 0&&(e={}),Ru(n.map(function(r){return Sc(r,t)}),e)}sr.points=y1;function kc(n,t,e){e===void 0&&(e={});for(var r=0,i=n;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:n};return $o(a,t,e)}sr.polygon=kc;function v1(n,t,e){return e===void 0&&(e={}),Ru(n.map(function(r){return kc(r,t)}),e)}sr.polygons=v1;function Lc(n,t,e){if(e===void 0&&(e={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:n};return $o(r,t,e)}sr.lineString=Lc;function b1(n,t,e){return e===void 0&&(e={}),Ru(n.map(function(r){return Lc(r,t)}),e)}sr.lineStrings=b1;function Ru(n,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=n,e}sr.featureCollection=Ru;function Om(n,t,e){e===void 0&&(e={});var r={type:"MultiLineString",coordinates:n};return $o(r,t,e)}sr.multiLineString=Om;function Am(n,t,e){e===void 0&&(e={});var r={type:"MultiPoint",coordinates:n};return $o(r,t,e)}sr.multiPoint=Am;function Im(n,t,e){e===void 0&&(e={});var r={type:"MultiPolygon",coordinates:n};return $o(r,t,e)}sr.multiPolygon=Im;function _1(n,t,e){e===void 0&&(e={});var r={type:"GeometryCollection",geometries:n};return $o(r,t,e)}sr.geometryCollection=_1;function w1(n,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var e=Math.pow(10,t||0);return Math.round(n*e)/e}sr.round=w1;function Nm(n,t){t===void 0&&(t="kilometers");var e=sr.factors[t];if(!e)throw new Error(t+" units is invalid");return n*e}sr.radiansToLength=Nm;function Tc(n,t){t===void 0&&(t="kilometers");var e=sr.factors[t];if(!e)throw new Error(t+" units is invalid");return n/e}sr.lengthToRadians=Tc;function x1(n,t){return Dm(Tc(n,t))}sr.lengthToDegrees=x1;function E1(n){var t=n%360;return t<0&&(t+=360),t}sr.bearingToAzimuth=E1;function Dm(n){var t=n%(2*Math.PI);return t*180/Math.PI}sr.radiansToDegrees=Dm;function C1(n){var t=n%360;return t*Math.PI/180}sr.degreesToRadians=C1;function M1(n,t,e){if(t===void 0&&(t="kilometers"),e===void 0&&(e="kilometers"),!(n>=0))throw new Error("length must be a positive number");return Nm(Tc(n,t),e)}sr.convertLength=M1;function S1(n,t,e){if(t===void 0&&(t="meters"),e===void 0&&(e="kilometers"),!(n>=0))throw new Error("area must be a positive number");var r=sr.areaFactors[t];if(!r)throw new Error("invalid original units");var i=sr.areaFactors[e];if(!i)throw new Error("invalid final units");return n/r*i}sr.convertArea=S1;function Pu(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}sr.isNumber=Pu;function k1(n){return!!n&&n.constructor===Object}sr.isObject=k1;function L1(n){if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be an Array");if(n.length!==4&&n.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");n.forEach(function(t){if(!Pu(t))throw new Error("bbox must only contain numbers")})}sr.validateBBox=L1;function T1(n){if(!n)throw new Error("id is required");if(["string","number"].indexOf(typeof n)===-1)throw new Error("id must be a number or a string")}sr.validateId=T1});var Oc=Ge(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var ls=Pc();function Ml(n,t,e){if(n!==null)for(var r,i,s,o,a,l,c,h=0,d=0,p,g=n.type,m=g==="FeatureCollection",b=g==="Feature",y=m?n.features.length:1,x=0;x<y;x++){c=m?n.features[x].geometry:b?n.geometry:n,p=c?c.type==="GeometryCollection":!1,a=p?c.geometries.length:1;for(var S=0;S<a;S++){var O=0,D=0;if(o=p?c.geometries[S]:c,o!==null){l=o.coordinates;var U=o.type;switch(h=e&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(l,d,x,O,D)===!1)return!1;d++,O++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(t(l[r],d,x,O,D)===!1)return!1;d++,U==="MultiPoint"&&O++}U==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(t(l[r][i],d,x,O,D)===!1)return!1;d++}U==="MultiLineString"&&O++,U==="Polygon"&&D++}U==="Polygon"&&O++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(D=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(t(l[r][i][s],d,x,O,D)===!1)return!1;d++}D++}O++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(Ml(o.geometries[r],t,e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function P1(n,t,e,r){var i=e;return Ml(n,function(s,o,a,l,c){o===0&&e===void 0?i=s:i=t(i,s,o,a,l,c)},r),i}function Bm(n,t){var e;switch(n.type){case"FeatureCollection":for(e=0;e<n.features.length&&t(n.features[e].properties,e)!==!1;e++);break;case"Feature":t(n.properties,0);break}}function R1(n,t,e){var r=e;return Bm(n,function(i,s){s===0&&e===void 0?r=i:r=t(r,i,s)}),r}function Fm(n,t){if(n.type==="Feature")t(n,0);else if(n.type==="FeatureCollection")for(var e=0;e<n.features.length&&t(n.features[e],e)!==!1;e++);}function O1(n,t,e){var r=e;return Fm(n,function(i,s){s===0&&e===void 0?r=i:r=t(r,i,s)}),r}function A1(n){var t=[];return Ml(n,function(e){t.push(e)}),t}function Rc(n,t){var e,r,i,s,o,a,l,c,h,d,p=0,g=n.type==="FeatureCollection",m=n.type==="Feature",b=g?n.features.length:1;for(e=0;e<b;e++){for(a=g?n.features[e].geometry:m?n.geometry:n,c=g?n.features[e].properties:m?n.properties:{},h=g?n.features[e].bbox:m?n.bbox:void 0,d=g?n.features[e].id:m?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(t(null,p,c,h,d)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,p,c,h,d)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],p,c,h,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function I1(n,t,e){var r=e;return Rc(n,function(i,s,o,a,l){s===0&&e===void 0?r=i:r=t(r,i,s,o,a,l)}),r}function Ou(n,t){Rc(n,function(e,r,i,s,o){var a=e===null?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(ls.feature(e,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<e.coordinates.length;c++){var h=e.coordinates[c],d={type:l,coordinates:h};if(t(ls.feature(d,i),r,c)===!1)return!1}})}function N1(n,t,e){var r=e;return Ou(n,function(i,s,o){s===0&&o===0&&e===void 0?r=i:r=t(r,i,s,o)}),r}function zm(n,t){Ou(n,function(e,r,i){var s=0;if(e.geometry){var o=e.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,h=0;if(Ml(e,function(d,p,g,m,b){if(a===void 0||r>l||m>c||b>h){a=d,l=r,c=m,h=b,s=0;return}var y=ls.lineString([a,d],e.properties);if(t(y,r,i,b,s)===!1)return!1;s++,a=d})===!1)return!1}}})}function D1(n,t,e){var r=e,i=!1;return zm(n,function(s,o,a,l,c){i===!1&&e===void 0?r=s:r=t(r,s,o,a,l,c),i=!0}),r}function jm(n,t){if(!n)throw new Error("geojson is required");Ou(n,function(e,r,i){if(e.geometry!==null){var s=e.geometry.type,o=e.geometry.coordinates;switch(s){case"LineString":if(t(e,r,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(t(ls.lineString(o[a],e.properties),r,i,a)===!1)return!1;break}}})}function B1(n,t,e){var r=e;return jm(n,function(i,s,o,a){s===0&&e===void 0?r=i:r=t(r,i,s,o,a)}),r}function F1(n,t){if(t=t||{},!ls.isObject(t))throw new Error("options is invalid");var e=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.segmentIndex||0,o=t.properties,a;switch(n.type){case"FeatureCollection":e<0&&(e=n.features.length+e),o=o||n.features[e].properties,a=n.features[e].geometry;break;case"Feature":o=o||n.properties,a=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=n;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),ls.lineString([l[s],l[s+1]],o,t);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),ls.lineString([l[i][s],l[i][s+1]],o,t);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s-1),ls.lineString([l[r][s],l[r][s+1]],o,t);case"MultiPolygon":return r<0&&(r=l.length+r),i<0&&(i=l[r].length+i),s<0&&(s=l[r][i].length-s-1),ls.lineString([l[r][i][s],l[r][i][s+1]],o,t)}throw new Error("geojson is invalid")}function z1(n,t){if(t=t||{},!ls.isObject(t))throw new Error("options is invalid");var e=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.coordIndex||0,o=t.properties,a;switch(n.type){case"FeatureCollection":e<0&&(e=n.features.length+e),o=o||n.features[e].properties,a=n.features[e].geometry;break;case"Feature":o=o||n.properties,a=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=n;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":return ls.point(l,o,t);case"MultiPoint":return r<0&&(r=l.length+r),ls.point(l[r],o,t);case"LineString":return s<0&&(s=l.length+s),ls.point(l[s],o,t);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),ls.point(l[i][s],o,t);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s),ls.point(l[r][s],o,t);case"MultiPolygon":return r<0&&(r=l.length+r),i<0&&(i=l[r].length+i),s<0&&(s=l[r][i].length-s),ls.point(l[r][i][s],o,t)}throw new Error("geojson is invalid")}An.coordAll=A1;An.coordEach=Ml;An.coordReduce=P1;An.featureEach=Fm;An.featureReduce=O1;An.findPoint=z1;An.findSegment=F1;An.flattenEach=Ou;An.flattenReduce=N1;An.geomEach=Rc;An.geomReduce=I1;An.lineEach=jm;An.lineReduce=B1;An.propEach=Bm;An.propReduce=R1;An.segmentEach=zm;An.segmentReduce=D1});var Hm=Ge(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});var j1=Oc();function Ac(n){var t=[1/0,1/0,-1/0,-1/0];return j1.coordEach(n,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}Ac.default=Ac;Ic.default=Ac});var Au=Ge((R4,Nc)=>{var bo=lc(),Um=Pc(),Vm=Oc(),Ia=Hm().default,H1=Vm.featureEach,T4=Vm.coordEach,P4=Um.polygon,Gm=Um.featureCollection;function qm(n){var t=new bo(n);return t.insert=function(e){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:Ia(e),bo.prototype.insert.call(this,e)},t.load=function(e){var r=[];return Array.isArray(e)?e.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Ia(i),r.push(i)}):H1(e,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Ia(i),r.push(i)}),bo.prototype.load.call(this,r)},t.remove=function(e,r){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:Ia(e),bo.prototype.remove.call(this,e,r)},t.clear=function(){return bo.prototype.clear.call(this)},t.search=function(e){var r=bo.prototype.search.call(this,this.toBBox(e));return Gm(r)},t.collides=function(e){return bo.prototype.collides.call(this,this.toBBox(e))},t.all=function(){var e=bo.prototype.all.call(this);return Gm(e)},t.toJSON=function(){return bo.prototype.toJSON.call(this)},t.fromJSON=function(e){return bo.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var r;if(e.bbox)r=e.bbox;else if(Array.isArray(e)&&e.length===4)r=e;else if(Array.isArray(e)&&e.length===6)r=[e[0],e[1],e[3],e[4]];else if(e.type==="Feature")r=Ia(e);else if(e.type==="FeatureCollection")r=Ia(e);else throw new Error("invalid geojson");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}},t}Nc.exports=qm;Nc.exports.default=qm});var Jm=Ge((jc,Hc)=>{(function(n,t){typeof jc=="object"&&typeof Hc<"u"?Hc.exports=t():typeof define=="function"&&define.amd?define(t):n.quickselect=t()})(jc,function(){"use strict";function n(i,s,o,a,l){t(i,s,o||0,a||i.length-1,l||r)}function t(i,s,o,a,l){for(;a>o;){if(a-o>600){var c=a-o+1,h=s-o+1,d=Math.log(c),p=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*p*(c-p)/c)*(h-c/2<0?-1:1),m=Math.max(o,Math.floor(s-h*p/c+g)),b=Math.min(a,Math.floor(s+(c-h)*p/c+g));t(i,s,m,b,l)}var y=i[s],x=o,S=a;for(e(i,o,s),l(i[a],y)>0&&e(i,o,a);x<S;){for(e(i,x,S),x++,S--;l(i[x],y)<0;)x++;for(;l(i[S],y)>0;)S--}l(i[o],y)===0?e(i,o,S):(S++,e(i,S,a)),S<=s&&(o=S+1),s<=S&&(a=S-1)}}function e(i,s,o){var a=i[s];i[s]=i[o],i[o]=a}function r(i,s){return i<s?-1:i>s?1:0}return n})});var rg=Ge((r6,Vc)=>{"use strict";Vc.exports=Ll;Vc.exports.default=Ll;var K1=Jm();function Ll(n,t){if(!(this instanceof Ll))return new Ll(n,t);this._maxEntries=Math.max(4,n||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}Ll.prototype={all:function(){return this._all(this.data,[])},search:function(n){var t=this.data,e=[],r=this.toBBox;if(!Du(n,t))return e;for(var i=[],s,o,a,l;t;){for(s=0,o=t.children.length;s<o;s++)a=t.children[s],l=t.leaf?r(a):a,Du(n,l)&&(t.leaf?e.push(a):Uc(n,l)?this._all(a,e):i.push(a));t=i.pop()}return e},collides:function(n){var t=this.data,e=this.toBBox;if(!Du(n,t))return!1;for(var r=[],i,s,o,a;t;){for(i=0,s=t.children.length;i<s;i++)if(o=t.children[i],a=t.leaf?e(o):o,Du(n,a)){if(t.leaf||Uc(n,a))return!0;r.push(o)}t=r.pop()}return!1},load:function(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(var t=0,e=n.length;t<e;t++)this.insert(n[t]);return this}var r=this._build(n.slice(),0,n.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}return this},insert:function(n){return n&&this._insert(n,this.data.height-1),this},clear:function(){return this.data=Da([]),this},remove:function(n,t){if(!n)return this;for(var e=this.data,r=this.toBBox(n),i=[],s=[],o,a,l,c;e||i.length;){if(e||(e=i.pop(),a=i[i.length-1],o=s.pop(),c=!0),e.leaf&&(l=J1(n,e.children,t),l!==-1))return e.children.splice(l,1),i.push(e),this._condense(i),this;!c&&!e.leaf&&Uc(e,r)?(i.push(e),s.push(o),o=0,a=e,e=e.children[0]):a?(o++,e=a.children[o],c=!1):e=null}return this},toBBox:function(n){return n},compareMinX:Qm,compareMinY:tg,toJSON:function(){return this.data},fromJSON:function(n){return this.data=n,this},_all:function(n,t){for(var e=[];n;)n.leaf?t.push.apply(t,n.children):e.push.apply(e,n.children),n=e.pop();return t},_build:function(n,t,e,r){var i=e-t+1,s=this._maxEntries,o;if(i<=s)return o=Da(n.slice(t,e+1)),Na(o,this.toBBox),o;r||(r=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,r-1))),o=Da([]),o.leaf=!1,o.height=r;var a=Math.ceil(i/s),l=a*Math.ceil(Math.sqrt(s)),c,h,d,p;for(eg(n,t,e,l,this.compareMinX),c=t;c<=e;c+=l)for(d=Math.min(c+l-1,e),eg(n,c,d,a,this.compareMinY),h=c;h<=d;h+=a)p=Math.min(h+a-1,d),o.children.push(this._build(n,h,p,r-1));return Na(o,this.toBBox),o},_chooseSubtree:function(n,t,e,r){for(var i,s,o,a,l,c,h,d;r.push(t),!(t.leaf||r.length-1===e);){for(h=d=1/0,i=0,s=t.children.length;i<s;i++)o=t.children[i],l=Gc(o),c=Q1(n,o)-l,c<d?(d=c,h=l<h?l:h,a=o):c===d&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(n,t,e){var r=this.toBBox,i=e?n:r(n),s=[],o=this._chooseSubtree(i,this.data,t,s);for(o.children.push(n),kl(o,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)},_split:function(n,t){var e=n[t],r=e.children.length,i=this._minEntries;this._chooseSplitAxis(e,i,r);var s=this._chooseSplitIndex(e,i,r),o=Da(e.children.splice(s,e.children.length-s));o.height=e.height,o.leaf=e.leaf,Na(e,this.toBBox),Na(o,this.toBBox),t?n[t-1].children.push(o):this._splitRoot(e,o)},_splitRoot:function(n,t){this.data=Da([n,t]),this.data.height=n.height+1,this.data.leaf=!1,Na(this.data,this.toBBox)},_chooseSplitIndex:function(n,t,e){var r,i,s,o,a,l,c,h;for(l=c=1/0,r=t;r<=e-t;r++)i=Sl(n,0,r,this.toBBox),s=Sl(n,r,e,this.toBBox),o=t_(i,s),a=Gc(i)+Gc(s),o<l?(l=o,h=r,c=a<c?a:c):o===l&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(n,t,e){var r=n.leaf?this.compareMinX:Qm,i=n.leaf?this.compareMinY:tg,s=this._allDistMargin(n,t,e,r),o=this._allDistMargin(n,t,e,i);s<o&&n.children.sort(r)},_allDistMargin:function(n,t,e,r){n.children.sort(r);var i=this.toBBox,s=Sl(n,0,t,i),o=Sl(n,e-t,e,i),a=Nu(s)+Nu(o),l,c;for(l=t;l<e-t;l++)c=n.children[l],kl(s,n.leaf?i(c):c),a+=Nu(s);for(l=e-t-1;l>=t;l--)c=n.children[l],kl(o,n.leaf?i(c):c),a+=Nu(o);return a},_adjustParentBBoxes:function(n,t,e){for(var r=e;r>=0;r--)kl(t[r],n)},_condense:function(n){for(var t=n.length-1,e;t>=0;t--)n[t].children.length===0?t>0?(e=n[t-1].children,e.splice(e.indexOf(n[t]),1)):this.clear():Na(n[t],this.toBBox)},_initFormat:function(n){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(n[0])),this.compareMinY=new Function("a","b",t.join(n[1])),this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};function J1(n,t,e){if(!e)return t.indexOf(n);for(var r=0;r<t.length;r++)if(e(n,t[r]))return r;return-1}function Na(n,t){Sl(n,0,n.children.length,t,n)}function Sl(n,t,e,r,i){i||(i=Da(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s=t,o;s<e;s++)o=n.children[s],kl(i,n.leaf?r(o):o);return i}function kl(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function Qm(n,t){return n.minX-t.minX}function tg(n,t){return n.minY-t.minY}function Gc(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Nu(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Q1(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function t_(n,t){var e=Math.max(n.minX,t.minX),r=Math.max(n.minY,t.minY),i=Math.min(n.maxX,t.maxX),s=Math.min(n.maxY,t.maxY);return Math.max(0,i-e)*Math.max(0,s-r)}function Uc(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function Du(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function Da(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function eg(n,t,e,r,i){for(var s=[t,e],o;s.length;)e=s.pop(),t=s.pop(),!(e-t<=r)&&(o=t+Math.ceil((e-t)/r/2)*r,K1(n,o,t,e,i),s.push(t,o,o,e))}});var Wc=Ge((j6,ug)=>{"use strict";var lg=Object.prototype.toString;ug.exports=function(t){var e=lg.call(t),r=e==="[object Arguments]";return r||(r=e!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&lg.call(t.callee)==="[object Function]"),r}});var vg=Ge((H6,yg)=>{"use strict";var gg;Object.keys||(Pl=Object.prototype.hasOwnProperty,Xc=Object.prototype.toString,hg=Wc(),$c=Object.prototype.propertyIsEnumerable,cg=!$c.call({toString:null},"toString"),fg=$c.call(function(){},"prototype"),Rl=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Bu=function(n){var t=n.constructor;return t&&t.prototype===n},dg={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},pg=function(){if(typeof window>"u")return!1;for(var n in window)try{if(!dg["$"+n]&&Pl.call(window,n)&&window[n]!==null&&typeof window[n]=="object")try{Bu(window[n])}catch{return!0}}catch{return!0}return!1}(),mg=function(n){if(typeof window>"u"||!pg)return Bu(n);try{return Bu(n)}catch{return!1}},gg=function(t){var e=t!==null&&typeof t=="object",r=Xc.call(t)==="[object Function]",i=hg(t),s=e&&Xc.call(t)==="[object String]",o=[];if(!e&&!r&&!i)throw new TypeError("Object.keys called on a non-object");var a=fg&&r;if(s&&t.length>0&&!Pl.call(t,0))for(var l=0;l<t.length;++l)o.push(String(l));if(i&&t.length>0)for(var c=0;c<t.length;++c)o.push(String(c));else for(var h in t)!(a&&h==="prototype")&&Pl.call(t,h)&&o.push(String(h));if(cg)for(var d=mg(t),p=0;p<Rl.length;++p)!(d&&Rl[p]==="constructor")&&Pl.call(t,Rl[p])&&o.push(Rl[p]);return o});var Pl,Xc,hg,$c,cg,fg,Rl,Bu,dg,pg,mg;yg.exports=gg});var Yc=Ge((G6,wg)=>{"use strict";var s_=Array.prototype.slice,o_=Wc(),bg=Object.keys,Fu=bg?function(t){return bg(t)}:vg(),_g=Object.keys;Fu.shim=function(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);t||(Object.keys=function(r){return o_(r)?_g(s_.call(r)):_g(r)})}else Object.keys=Fu;return Object.keys||Fu};wg.exports=Fu});var Zc=Ge((U6,xg)=>{"use strict";xg.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[e]=i;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var zu=Ge((V6,Eg)=>{"use strict";var a_=Zc();Eg.exports=function(){return a_()&&!!Symbol.toStringTag}});var Sg=Ge((q6,Mg)=>{"use strict";var Cg=typeof Symbol<"u"&&Symbol,l_=Zc();Mg.exports=function(){return typeof Cg!="function"||typeof Symbol!="function"||typeof Cg("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:l_()}});var Lg=Ge((W6,kg)=>{"use strict";var u_="Function.prototype.bind called on incompatible ",Kc=Array.prototype.slice,h_=Object.prototype.toString,c_="[object Function]";kg.exports=function(t){var e=this;if(typeof e!="function"||h_.call(e)!==c_)throw new TypeError(u_+e);for(var r=Kc.call(arguments,1),i,s=function(){if(this instanceof i){var h=e.apply(this,r.concat(Kc.call(arguments)));return Object(h)===h?h:this}else return e.apply(t,r.concat(Kc.call(arguments)))},o=Math.max(0,e.length-r.length),a=[],l=0;l<o;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var c=function(){};c.prototype=e.prototype,i.prototype=new c,c.prototype=null}return i}});var ju=Ge((X6,Tg)=>{"use strict";var f_=Lg();Tg.exports=Function.prototype.bind||f_});var Rg=Ge(($6,Pg)=>{"use strict";var d_=ju();Pg.exports=d_.call(Function.call,Object.prototype.hasOwnProperty)});var Uu=Ge((Y6,Dg)=>{"use strict";var di,ja=SyntaxError,Ng=Function,za=TypeError,Jc=function(n){try{return Ng('"use strict"; return ('+n+").constructor;")()}catch{}},la=Object.getOwnPropertyDescriptor;if(la)try{la({},"")}catch{la=null}var Qc=function(){throw new za},p_=la?function(){try{return arguments.callee,Qc}catch{try{return la(arguments,"callee").get}catch{return Qc}}}():Qc,Ba=Sg()(),wo=Object.getPrototypeOf||function(n){return n.__proto__},Fa={},m_=typeof Uint8Array>"u"?di:wo(Uint8Array),ua={"%AggregateError%":typeof AggregateError>"u"?di:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?di:ArrayBuffer,"%ArrayIteratorPrototype%":Ba?wo([][Symbol.iterator]()):di,"%AsyncFromSyncIteratorPrototype%":di,"%AsyncFunction%":Fa,"%AsyncGenerator%":Fa,"%AsyncGeneratorFunction%":Fa,"%AsyncIteratorPrototype%":Fa,"%Atomics%":typeof Atomics>"u"?di:Atomics,"%BigInt%":typeof BigInt>"u"?di:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?di:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?di:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?di:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?di:Float32Array,"%Float64Array%":typeof Float64Array>"u"?di:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?di:FinalizationRegistry,"%Function%":Ng,"%GeneratorFunction%":Fa,"%Int8Array%":typeof Int8Array>"u"?di:Int8Array,"%Int16Array%":typeof Int16Array>"u"?di:Int16Array,"%Int32Array%":typeof Int32Array>"u"?di:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ba?wo(wo([][Symbol.iterator]())):di,"%JSON%":typeof JSON=="object"?JSON:di,"%Map%":typeof Map>"u"?di:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ba?di:wo(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?di:Promise,"%Proxy%":typeof Proxy>"u"?di:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?di:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?di:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ba?di:wo(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?di:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ba?wo(""[Symbol.iterator]()):di,"%Symbol%":Ba?Symbol:di,"%SyntaxError%":ja,"%ThrowTypeError%":p_,"%TypedArray%":m_,"%TypeError%":za,"%Uint8Array%":typeof Uint8Array>"u"?di:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?di:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?di:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?di:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?di:WeakMap,"%WeakRef%":typeof WeakRef>"u"?di:WeakRef,"%WeakSet%":typeof WeakSet>"u"?di:WeakSet};try{null.error}catch(n){Og=wo(wo(n)),ua["%Error.prototype%"]=Og}var Og,g_=function n(t){var e;if(t==="%AsyncFunction%")e=Jc("async function () {}");else if(t==="%GeneratorFunction%")e=Jc("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Jc("async function* () {}");else if(t==="%AsyncGenerator%"){var r=n("%AsyncGeneratorFunction%");r&&(e=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=n("%AsyncGenerator%");i&&(e=wo(i.prototype))}return ua[t]=e,e},Ag={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ol=ju(),Hu=Rg(),y_=Ol.call(Function.call,Array.prototype.concat),v_=Ol.call(Function.apply,Array.prototype.splice),Ig=Ol.call(Function.call,String.prototype.replace),Gu=Ol.call(Function.call,String.prototype.slice),b_=Ol.call(Function.call,RegExp.prototype.exec),__=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w_=/\\(\\)?/g,x_=function(t){var e=Gu(t,0,1),r=Gu(t,-1);if(e==="%"&&r!=="%")throw new ja("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&e!=="%")throw new ja("invalid intrinsic syntax, expected opening `%`");var i=[];return Ig(t,__,function(s,o,a,l){i[i.length]=a?Ig(l,w_,"$1"):o||s}),i},E_=function(t,e){var r=t,i;if(Hu(Ag,r)&&(i=Ag[r],r="%"+i[0]+"%"),Hu(ua,r)){var s=ua[r];if(s===Fa&&(s=g_(r)),typeof s>"u"&&!e)throw new za("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new ja("intrinsic "+t+" does not exist!")};Dg.exports=function(t,e){if(typeof t!="string"||t.length===0)throw new za("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new za('"allowMissing" argument must be a boolean');if(b_(/^%?[^%]*%?$/,t)===null)throw new ja("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=x_(t),i=r.length>0?r[0]:"",s=E_("%"+i+"%",e),o=s.name,a=s.value,l=!1,c=s.alias;c&&(i=c[0],v_(r,y_([0,1],c)));for(var h=1,d=!0;h<r.length;h+=1){var p=r[h],g=Gu(p,0,1),m=Gu(p,-1);if((g==='"'||g==="'"||g==="`"||m==='"'||m==="'"||m==="`")&&g!==m)throw new ja("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(l=!0),i+="."+p,o="%"+i+"%",Hu(ua,o))a=ua[o];else if(a!=null){if(!(p in a)){if(!e)throw new za("base intrinsic for "+t+" exists, but the property is not available.");return}if(la&&h+1>=r.length){var b=la(a,p);d=!!b,d&&"get"in b&&!("originalValue"in b.get)?a=b.get:a=a[p]}else d=Hu(a,p),a=a[p];d&&!l&&(ua[o]=a)}}return a}});var qu=Ge((Z6,Vu)=>{"use strict";var tf=ju(),Ha=Uu(),zg=Ha("%Function.prototype.apply%"),jg=Ha("%Function.prototype.call%"),Hg=Ha("%Reflect.apply%",!0)||tf.call(jg,zg),Bg=Ha("%Object.getOwnPropertyDescriptor%",!0),ha=Ha("%Object.defineProperty%",!0),C_=Ha("%Math.max%");if(ha)try{ha({},"a",{value:1})}catch{ha=null}Vu.exports=function(t){var e=Hg(tf,jg,arguments);if(Bg&&ha){var r=Bg(e,"length");r.configurable&&ha(e,"length",{value:1+C_(0,t.length-(arguments.length-1))})}return e};var Fg=function(){return Hg(tf,zg,arguments)};ha?ha(Vu.exports,"apply",{value:Fg}):Vu.exports.apply=Fg});var ef=Ge((K6,Vg)=>{"use strict";var Gg=Uu(),Ug=qu(),M_=Ug(Gg("String.prototype.indexOf"));Vg.exports=function(t,e){var r=Gg(t,!!e);return typeof r=="function"&&M_(t,".prototype.")>-1?Ug(r):r}});var Xg=Ge((J6,Wg)=>{"use strict";var S_=zu()(),k_=ef(),rf=k_("Object.prototype.toString"),Wu=function(t){return S_&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:rf(t)==="[object Arguments]"},qg=function(t){return Wu(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&rf(t)!=="[object Array]"&&rf(t.callee)==="[object Function]"},L_=function(){return Wu(arguments)}();Wu.isLegacyArguments=qg;Wg.exports=L_?Wu:qg});var Yg=Ge((Q6,$g)=>{"use strict";var T_=Uu(),nf=T_("%Object.defineProperty%",!0),sf=function(){if(nf)try{return nf({},"a",{value:1}),!0}catch{return!1}return!1};sf.hasArrayLengthDefineBug=function(){if(!sf())return null;try{return nf([],"length",{value:1}).length!==1}catch{return!0}};$g.exports=sf});var Ga=Ge((tT,Qg)=>{"use strict";var P_=Yc(),R_=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",O_=Object.prototype.toString,A_=Array.prototype.concat,Zg=Object.defineProperty,I_=function(n){return typeof n=="function"&&O_.call(n)==="[object Function]"},N_=Yg()(),Kg=Zg&&N_,D_=function(n,t,e,r){if(t in n){if(r===!0){if(n[t]===e)return}else if(!I_(r)||!r())return}Kg?Zg(n,t,{configurable:!0,enumerable:!1,value:e,writable:!0}):n[t]=e},Jg=function(n,t){var e=arguments.length>2?arguments[2]:{},r=P_(t);R_&&(r=A_.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)D_(n,r[i],t[r[i]],e[r[i]])};Jg.supportsDescriptors=!!Kg;Qg.exports=Jg});var of=Ge((eT,e0)=>{"use strict";var t0=function(n){return n!==n};e0.exports=function(t,e){return t===0&&e===0?1/t===1/e:!!(t===e||t0(t)&&t0(e))}});var af=Ge((rT,r0)=>{"use strict";var B_=of();r0.exports=function(){return typeof Object.is=="function"?Object.is:B_}});var n0=Ge((iT,i0)=>{"use strict";var F_=af(),z_=Ga();i0.exports=function(){var t=F_();return z_(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var l0=Ge((nT,a0)=>{"use strict";var j_=Ga(),H_=qu(),G_=of(),s0=af(),U_=n0(),o0=H_(s0(),Object);j_(o0,{getPolyfill:s0,implementation:G_,shim:U_});a0.exports=o0});var d0=Ge((sT,f0)=>{"use strict";var lf=ef(),u0=zu()(),h0,c0,uf,hf;u0&&(h0=lf("Object.prototype.hasOwnProperty"),c0=lf("RegExp.prototype.exec"),uf={},Xu=function(){throw uf},hf={toString:Xu,valueOf:Xu},typeof Symbol.toPrimitive=="symbol"&&(hf[Symbol.toPrimitive]=Xu));var Xu,V_=lf("Object.prototype.toString"),q_=Object.getOwnPropertyDescriptor,W_="[object RegExp]";f0.exports=u0?function(t){if(!t||typeof t!="object")return!1;var e=q_(t,"lastIndex"),r=e&&h0(e,"value");if(!r)return!1;try{c0(t,hf)}catch(i){return i===uf}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:V_(t)===W_}});var m0=Ge((oT,p0)=>{"use strict";var Il=function(){return typeof function(){}.name=="string"},Al=Object.getOwnPropertyDescriptor;if(Al)try{Al([],"length")}catch{Al=null}Il.functionsHaveConfigurableNames=function(){if(!Il()||!Al)return!1;var t=Al(function(){},"name");return!!t&&!!t.configurable};var X_=Function.prototype.bind;Il.boundFunctionsHaveNames=function(){return Il()&&typeof X_=="function"&&function(){}.bind().name!==""};p0.exports=Il});var ff=Ge((aT,cf)=>{"use strict";var $_=m0().functionsHaveConfigurableNames(),Y_=Object,Z_=TypeError;cf.exports=function(){if(this!=null&&this!==Y_(this))throw new Z_("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t};$_&&Object.defineProperty&&Object.defineProperty(cf.exports,"name",{value:"get flags"})});var df=Ge((lT,g0)=>{"use strict";var K_=ff(),J_=Ga().supportsDescriptors,Q_=Object.getOwnPropertyDescriptor;g0.exports=function(){if(J_&&/a/mig.flags==="gim"){var t=Q_(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var e="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(r,"sticky",{get:function(){e+="y"}}),e==="dy")return t.get}}return K_}});var b0=Ge((uT,v0)=>{"use strict";var tw=Ga().supportsDescriptors,ew=df(),rw=Object.getOwnPropertyDescriptor,iw=Object.defineProperty,nw=TypeError,y0=Object.getPrototypeOf,sw=/a/;v0.exports=function(){if(!tw||!y0)throw new nw("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=ew(),e=y0(sw),r=rw(e,"flags");return(!r||r.get!==t)&&iw(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var E0=Ge((hT,x0)=>{"use strict";var ow=Ga(),aw=qu(),lw=ff(),_0=df(),uw=b0(),w0=aw(_0());ow(w0,{getPolyfill:_0,implementation:lw,shim:uw});x0.exports=w0});var M0=Ge((cT,C0)=>{"use strict";var hw=Date.prototype.getDay,cw=function(t){try{return hw.call(t),!0}catch{return!1}},fw=Object.prototype.toString,dw="[object Date]",pw=zu()();C0.exports=function(t){return typeof t!="object"||t===null?!1:pw?cw(t):fw.call(t)===dw}});var pf=Ge((fT,D0)=>{var S0=Yc(),k0=Xg(),L0=l0(),T0=d0(),P0=E0(),R0=M0(),O0=Date.prototype.getTime;function N0(n,t,e){var r=e||{};return(r.strict?L0(n,t):n===t)?!0:!n||!t||typeof n!="object"&&typeof t!="object"?r.strict?L0(n,t):n==t:mw(n,t,r)}function A0(n){return n==null}function I0(n){return!(!n||typeof n!="object"||typeof n.length!="number"||typeof n.copy!="function"||typeof n.slice!="function"||n.length>0&&typeof n[0]!="number")}function mw(n,t,e){var r,i;if(typeof n!=typeof t||A0(n)||A0(t)||n.prototype!==t.prototype||k0(n)!==k0(t))return!1;var s=T0(n),o=T0(t);if(s!==o)return!1;if(s||o)return n.source===t.source&&P0(n)===P0(t);if(R0(n)&&R0(t))return O0.call(n)===O0.call(t);var a=I0(n),l=I0(t);if(a!==l)return!1;if(a||l){if(n.length!==t.length)return!1;for(r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0}if(typeof n!=typeof t)return!1;try{var c=S0(n),h=S0(t)}catch{return!1}if(c.length!==h.length)return!1;for(c.sort(),h.sort(),r=c.length-1;r>=0;r--)if(c[r]!=h[r])return!1;for(r=c.length-1;r>=0;r--)if(i=c[r],!N0(n[i],t[i],e))return!1;return!0}D0.exports=N0});var Tf=Ge((v8,q0)=>{var fx=pf(),xo=function(n){this.precision=n&&n.precision?n.precision:17,this.direction=n&&n.direction?n.direction:!1,this.pseudoNode=n&&n.pseudoNode?n.pseudoNode:!1,this.objectComparator=n&&n.objectComparator?n.objectComparator:dx};xo.prototype.compare=function(n,t){if(n.type!==t.type||!V0(n,t))return!1;switch(n.type){case"Point":return this.compareCoord(n.coordinates,t.coordinates);case"LineString":return this.compareLine(n.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(n,t);case"Feature":return this.compareFeature(n,t);default:if(n.type.indexOf("Multi")===0){var e=this,r=U0(n),i=U0(t);return r.every(function(s){return this.some(function(o){return e.compare(s,o)})},i)}}return!1};function U0(n){return n.coordinates.map(function(t){return{type:n.type.replace("Multi",""),coordinates:t}})}function V0(n,t){return n.hasOwnProperty("coordinates")?n.coordinates.length===t.coordinates.length:n.length===t.length}xo.prototype.compareCoord=function(n,t){if(n.length!==t.length)return!1;for(var e=0;e<n.length;e++)if(n[e].toFixed(this.precision)!==t[e].toFixed(this.precision))return!1;return!0};xo.prototype.compareLine=function(n,t,e,r){if(!V0(n,t))return!1;var i=this.pseudoNode?n:this.removePseudo(n),s=this.pseudoNode?t:this.removePseudo(t);if(!(r&&!this.compareCoord(i[0],s[0])&&(s=this.fixStartIndex(s,i),!s))){var o=this.compareCoord(i[e],s[e]);return this.direction||o?this.comparePath(i,s):this.compareCoord(i[e],s[s.length-(1+e)])?this.comparePath(i.slice().reverse(),s):!1}};xo.prototype.fixStartIndex=function(n,t){for(var e,r=-1,i=0;i<n.length;i++)if(this.compareCoord(n[i],t[0])){r=i;break}return r>=0&&(e=[].concat(n.slice(r,n.length),n.slice(1,r+1))),e};xo.prototype.comparePath=function(n,t){var e=this;return n.every(function(r,i){return e.compareCoord(r,this[i])},t)};xo.prototype.comparePolygon=function(n,t){if(this.compareLine(n.coordinates[0],t.coordinates[0],1,!0)){var e=n.coordinates.slice(1,n.coordinates.length),r=t.coordinates.slice(1,t.coordinates.length),i=this;return e.every(function(s){return this.some(function(o){return i.compareLine(s,o,1,!0)})},r)}else return!1};xo.prototype.compareFeature=function(n,t){return n.id!==t.id||!this.objectComparator(n.properties,t.properties)||!this.compareBBox(n,t)?!1:this.compare(n.geometry,t.geometry)};xo.prototype.compareBBox=function(n,t){return!!(!n.bbox&&!t.bbox||n.bbox&&t.bbox&&this.compareCoord(n.bbox,t.bbox))};xo.prototype.removePseudo=function(n){return n};function dx(n,t){return fx(n,t,{strict:!0})}q0.exports=xo});var X0=Ge((P8,Zu)=>{function Ko(n,t,e,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(n,t,e,r)}Ko.prototype.run=function(n,t,e,r){this._init(n,t,e,r);for(var i=0;i<this._datasetLength;i++)if(this._visited[i]!==1){this._visited[i]=1;var s=this._regionQuery(i);if(s.length<this.minPts)this.noise.push(i);else{var o=this.clusters.length;this.clusters.push([]),this._addToCluster(i,o),this._expandCluster(o,s)}}return this.clusters};Ko.prototype._init=function(n,t,e,r){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this.noise=[],this._datasetLength=n.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t),e&&(this.minPts=e),r&&(this.distance=r)};Ko.prototype._expandCluster=function(n,t){for(var e=0;e<t.length;e++){var r=t[e];if(this._visited[r]!==1){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(t=this._mergeArrays(t,i))}this._assigned[r]!==1&&this._addToCluster(r,n)}};Ko.prototype._addToCluster=function(n,t){this.clusters[t].push(n),this._assigned[n]=1};Ko.prototype._regionQuery=function(n){for(var t=[],e=0;e<this._datasetLength;e++){var r=this.distance(this.dataset[n],this.dataset[e]);r<this.epsilon&&t.push(e)}return t};Ko.prototype._mergeArrays=function(n,t){for(var e=t.length,r=0;r<e;r++){var i=t[r];n.indexOf(i)<0&&n.push(i)}return n};Ko.prototype._euclideanDistance=function(n,t){for(var e=0,r=Math.min(n.length,t.length);r--;)e+=(n[r]-t[r])*(n[r]-t[r]);return Math.sqrt(e)};typeof Zu<"u"&&Zu.exports&&(Zu.exports=Ko)});var $0=Ge((R8,Ku)=>{function Jo(n,t,e){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(n,t,e)}Jo.prototype.init=function(n,t,e){this.assignments=[],this.centroids=[],typeof n<"u"&&(this.dataset=n),typeof t<"u"&&(this.k=t),typeof e<"u"&&(this.distance=e)};Jo.prototype.run=function(n,t){this.init(n,t);for(var e=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var s=0;s<this.k;s++){for(var o=new Array(h),a=0,l=0;l<h;l++)o[l]=0;for(var c=0;c<e;c++){var h=this.dataset[c].length;if(s===this.assignments[c]){for(var l=0;l<h;l++)o[l]+=this.dataset[c][l];a++}}if(a>0){for(var l=0;l<h;l++)o[l]/=a;this.centroids[s]=o}else this.centroids[s]=this.randomCentroid(),i=!0}}return this.getClusters()};Jo.prototype.randomCentroid=function(){var n=this.dataset.length-1,t,e;do e=Math.round(Math.random()*n),t=this.dataset[e];while(this.centroids.indexOf(t)>=0);return t};Jo.prototype.assign=function(){for(var n=!1,t=this.dataset.length,e,r=0;r<t;r++)e=this.argmin(this.dataset[r],this.centroids,this.distance),e!=this.assignments[r]&&(this.assignments[r]=e,n=!0);return n};Jo.prototype.getClusters=function(){for(var n=new Array(this.k),t,e=0;e<this.assignments.length;e++)t=this.assignments[e],typeof n[t]>"u"&&(n[t]=[]),n[t].push(e);return n};Jo.prototype.argmin=function(n,t,e){for(var r=Number.MAX_VALUE,i=0,s=t.length,o,a=0;a<s;a++)o=e(n,t[a]),o<r&&(r=o,i=a);return i};Jo.prototype.distance=function(n,t){for(var e=0,r=Math.min(n.length,t.length);r--;){var i=n[r]-t[r];e+=i*i}return Math.sqrt(e)};typeof Ku<"u"&&Ku.exports&&(Ku.exports=Jo)});var Pf=Ge((O8,Ju)=>{function Eo(n,t,e){this._queue=[],this._priorities=[],this._sorting="desc",this._init(n,t,e)}Eo.prototype.insert=function(n,t){for(var e=this._queue.length,r=e;r--;){var i=this._priorities[r];this._sorting==="desc"?t>i&&(e=r):t<i&&(e=r)}this._insertAt(n,t,e)};Eo.prototype.remove=function(n){for(var t=this._queue.length;t--;){var e=this._queue[t];if(n===e){this._queue.splice(t,1),this._priorities.splice(t,1);break}}};Eo.prototype.forEach=function(n){this._queue.forEach(n)};Eo.prototype.getElements=function(){return this._queue};Eo.prototype.getElementPriority=function(n){return this._priorities[n]};Eo.prototype.getPriorities=function(){return this._priorities};Eo.prototype.getElementsWithPriorities=function(){for(var n=[],t=0,e=this._queue.length;t<e;t++)n.push([this._queue[t],this._priorities[t]]);return n};Eo.prototype._init=function(n,t,e){if(n&&t){if(this._queue=[],this._priorities=[],n.length!==t.length)throw new Error("Arrays must have the same length");for(var r=0;r<n.length;r++)this.insert(n[r],t[r])}e&&(this._sorting=e)};Eo.prototype._insertAt=function(n,t,e){this._queue.length===e?(this._queue.push(n),this._priorities.push(t)):(this._queue.splice(e,0,n),this._priorities.splice(e,0,t))};typeof Ju<"u"&&Ju.exports&&(Ju.exports=Eo)});var Z0=Ge((A8,qa)=>{typeof qa<"u"&&qa.exports&&(Y0=Pf());var Y0;function Fo(n,t,e,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,t,e,r)}Fo.prototype.run=function(n,t,e,r){this._init(n,t,e,r);for(var i=0,s=this.dataset.length;i<s;i++)if(this._processed[i]!==1){this._processed[i]=1,this.clusters.push([i]);var o=this.clusters.length-1;this._orderedList.push(i);var a=new Y0(null,null,"asc"),l=this._regionQuery(i);this._distanceToCore(i)!==void 0&&(this._updateQueue(i,l,a),this._expandCluster(o,a))}return this.clusters};Fo.prototype.getReachabilityPlot=function(){for(var n=[],t=0,e=this._orderedList.length;t<e;t++){var r=this._orderedList[t],i=this._reachability[r];n.push([r,i])}return n};Fo.prototype._init=function(n,t,e,r){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}t&&(this.epsilon=t),e&&(this.minPts=e),r&&(this.distance=r)};Fo.prototype._updateQueue=function(n,t,e){var r=this;this._coreDistance=this._distanceToCore(n),t.forEach(function(i){if(r._processed[i]===void 0){var s=r.distance(r.dataset[n],r.dataset[i]),o=Math.max(r._coreDistance,s);r._reachability[i]===void 0?(r._reachability[i]=o,e.insert(i,o)):o<r._reachability[i]&&(r._reachability[i]=o,e.remove(i),e.insert(i,o))}})};Fo.prototype._expandCluster=function(n,t){for(var e=t.getElements(),r=0,i=e.length;r<i;r++){var s=e[r];if(this._processed[s]===void 0){var o=this._regionQuery(s);this._processed[s]=1,this.clusters[n].push(s),this._orderedList.push(s),this._distanceToCore(s)!==void 0&&(this._updateQueue(s,o,t),this._expandCluster(n,t))}}};Fo.prototype._distanceToCore=function(n){for(var t=this.epsilon,e=0;e<t;e++){var r=this._regionQuery(n,e);if(r.length>=this.minPts)return e}};Fo.prototype._regionQuery=function(n,t){t=t||this.epsilon;for(var e=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[n],this.dataset[r])<t&&e.push(r);return e};Fo.prototype._euclideanDistance=function(n,t){for(var e=0,r=Math.min(n.length,t.length);r--;)e+=(n[r]-t[r])*(n[r]-t[r]);return Math.sqrt(e)};typeof qa<"u"&&qa.exports&&(qa.exports=Fo)});var K0=Ge((I8,Qu)=>{typeof Qu<"u"&&Qu.exports&&(Qu.exports={DBSCAN:X0(),KMEANS:$0(),OPTICS:Z0(),PriorityQueue:Pf()})});var Rf=Ge((j8,Q0)=>{"use strict";Q0.exports={eudist:function(t,e,r){for(var i=t.length,s=0,o=0;o<i;o++){var a=(t[o]||0)-(e[o]||0);s+=a*a}return r?Math.sqrt(s):s},mandist:function(t,e,r){for(var i=t.length,s=0,o=0;o<i;o++)s+=Math.abs((t[o]||0)-(e[o]||0));return r?Math.sqrt(s):s},dist:function(t,e,r){var i=Math.abs(t-e);return r?i:i*i}}});var ry=Ge((H8,ey)=>{"use strict";var ty=Rf(),yx=ty.eudist,vx=ty.dist;ey.exports={kmrand:function(t,e){for(var r={},i=[],s=e<<2,o=t.length,a=t[0].length>0;i.length<e&&s-- >0;){var l=t[Math.floor(Math.random()*o)],c=a?l.join("_"):""+l;r[c]||(r[c]=!0,i.push(l))}if(i.length<e)throw new Error("Error initializating clusters");return i},kmpp:function(t,e){var r=t[0].length?yx:vx,i=[],s=t.length,o=t[0].length>0,a={},l=t[Math.floor(Math.random()*s)],c=o?l.join("_"):""+l;for(i.push(l),a[c]=!0;i.length<e;){for(var h=[],d=i.length,p=0,g=[],m=0;m<s;m++){for(var b=1/0,y=0;y<d;y++){var x=r(t[m],i[y]);x<=b&&(b=x)}h[m]=b}for(var S=0;S<s;S++)p+=h[S];for(var O=0;O<s;O++)g[O]={i:O,v:t[O],pr:h[O]/p,cs:0};g.sort(function(q,G){return q.pr-G.pr}),g[0].cs=g[0].pr;for(var D=1;D<s;D++)g[D].cs=g[D-1].cs+g[D].pr;for(var U=Math.random(),z=0;z<s-1&&g[z++].cs<U;);i.push(g[z-1].v)}return i}}});var ay=Ge((V8,oy)=>{"use strict";var Of=Rf(),sy=ry(),bx=Of.eudist,G8=Of.mandist,U8=Of.dist,_x=sy.kmrand,wx=sy.kmpp,iy=1e4;function ny(n,t,e){e=e||[];for(var r=0;r<n;r++)e[r]=t;return e}function xx(n,t,e,r){var i=[],s=[],o=[],a=[],l=!1,c=r||iy,h=n.length,d=n[0].length,p=d>0,g=[];if(e)e=="kmrand"?i=_x(n,t):e=="kmpp"?i=wx(n,t):i=e;else for(var m={};i.length<t;){var b=Math.floor(Math.random()*h);m[b]||(m[b]=!0,i.push(n[b]))}do{ny(t,0,g);for(var y=0;y<h;y++){for(var x=1/0,S=0,O=0;O<t;O++){var a=p?bx(n[y],i[O]):Math.abs(n[y]-i[O]);a<=x&&(x=a,S=O)}o[y]=S,g[S]++}for(var D=[],s=[],U=0,z=0;z<t;z++)D[z]=p?ny(d,0,D[z]):0,s[z]=i[z];if(p){for(var q=0;q<t;q++)i[q]=[];for(var G=0;G<h;G++)for(var tt=o[G],K=D[tt],B=n[G],N=0;N<d;N++)K[N]+=B[N];l=!0;for(var Z=0;Z<t;Z++){for(var w=i[Z],C=D[Z],k=s[Z],T=g[Z],R=0;R<d;R++)w[R]=C[R]/T||0;if(l){for(var F=0;F<d;F++)if(k[F]!=w[F]){l=!1;break}}}}else{for(var H=0;H<h;H++){var rt=o[H];D[rt]+=n[H]}for(var ot=0;ot<t;ot++)i[ot]=D[ot]/g[ot]||0;l=!0;for(var dt=0;dt<t;dt++)if(s[dt]!=i[dt]){l=!1;break}}l=l||--c<=0}while(!l);return{it:iy-c,k:t,idxs:o,centroids:i}}oy.exports=xx});var Za=Ge((Ff,zf)=>{(function(n,t){typeof Ff=="object"&&typeof zf<"u"?zf.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis<"u"?globalThis:n||self,n.polygonClipping=t())})(Ff,function(){"use strict";function n(gt,ut){if(!(gt instanceof ut))throw new TypeError("Cannot call a class as a function")}function t(gt,ut){for(var Q=0;Q<ut.length;Q++){var Y=ut[Q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(gt,Y.key,Y)}}function e(gt,ut,Q){return ut&&t(gt.prototype,ut),Q&&t(gt,Q),gt}var r=function(){function gt(ut,Q){this.next=null,this.key=ut,this.data=Q,this.left=null,this.right=null}return gt}();function i(gt,ut){return gt>ut?1:gt<ut?-1:0}function s(gt,ut,Q){for(var Y=new r(null,null),et=Y,lt=Y;;){var pt=Q(gt,ut.key);if(pt<0){if(ut.left===null)break;if(Q(gt,ut.left.key)<0){var bt=ut.left;if(ut.left=bt.right,bt.right=ut,ut=bt,ut.left===null)break}lt.left=ut,lt=ut,ut=ut.left}else if(pt>0){if(ut.right===null)break;if(Q(gt,ut.right.key)>0){var bt=ut.right;if(ut.right=bt.left,bt.left=ut,ut=bt,ut.right===null)break}et.right=ut,et=ut,ut=ut.right}else break}return et.right=ut.left,lt.left=ut.right,ut.left=Y.right,ut.right=Y.left,ut}function o(gt,ut,Q,Y){var et=new r(gt,ut);if(Q===null)return et.left=et.right=null,et;Q=s(gt,Q,Y);var lt=Y(gt,Q.key);return lt<0?(et.left=Q.left,et.right=Q,Q.left=null):lt>=0&&(et.right=Q.right,et.left=Q,Q.right=null),et}function a(gt,ut,Q){var Y=null,et=null;if(ut){ut=s(gt,ut,Q);var lt=Q(ut.key,gt);lt===0?(Y=ut.left,et=ut.right):lt<0?(et=ut.right,ut.right=null,Y=ut):(Y=ut.left,ut.left=null,et=ut)}return{left:Y,right:et}}function l(gt,ut,Q){return ut===null?gt:(gt===null||(ut=s(gt.key,ut,Q),ut.left=gt),ut)}function c(gt,ut,Q,Y,et){if(gt){Y(""+ut+(Q?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+et(gt)+`
`);var lt=ut+(Q?"    ":"\u2502   ");gt.left&&c(gt.left,lt,!1,Y,et),gt.right&&c(gt.right,lt,!0,Y,et)}}var h=function(){function gt(ut){ut===void 0&&(ut=i),this._root=null,this._size=0,this._comparator=ut}return gt.prototype.insert=function(ut,Q){return this._size++,this._root=o(ut,Q,this._root,this._comparator)},gt.prototype.add=function(ut,Q){var Y=new r(ut,Q);this._root===null&&(Y.left=Y.right=null,this._size++,this._root=Y);var et=this._comparator,lt=s(ut,this._root,et),pt=et(ut,lt.key);return pt===0?this._root=lt:(pt<0?(Y.left=lt.left,Y.right=lt,lt.left=null):pt>0&&(Y.right=lt.right,Y.left=lt,lt.right=null),this._size++,this._root=Y),this._root},gt.prototype.remove=function(ut){this._root=this._remove(ut,this._root,this._comparator)},gt.prototype._remove=function(ut,Q,Y){var et;if(Q===null)return null;Q=s(ut,Q,Y);var lt=Y(ut,Q.key);return lt===0?(Q.left===null?et=Q.right:(et=s(ut,Q.left,Y),et.right=Q.right),this._size--,et):Q},gt.prototype.pop=function(){var ut=this._root;if(ut){for(;ut.left;)ut=ut.left;return this._root=s(ut.key,this._root,this._comparator),this._root=this._remove(ut.key,this._root,this._comparator),{key:ut.key,data:ut.data}}return null},gt.prototype.findStatic=function(ut){for(var Q=this._root,Y=this._comparator;Q;){var et=Y(ut,Q.key);if(et===0)return Q;et<0?Q=Q.left:Q=Q.right}return null},gt.prototype.find=function(ut){return this._root&&(this._root=s(ut,this._root,this._comparator),this._comparator(ut,this._root.key)!==0)?null:this._root},gt.prototype.contains=function(ut){for(var Q=this._root,Y=this._comparator;Q;){var et=Y(ut,Q.key);if(et===0)return!0;et<0?Q=Q.left:Q=Q.right}return!1},gt.prototype.forEach=function(ut,Q){for(var Y=this._root,et=[],lt=!1;!lt;)Y!==null?(et.push(Y),Y=Y.left):et.length!==0?(Y=et.pop(),ut.call(Q,Y),Y=Y.right):lt=!0;return this},gt.prototype.range=function(ut,Q,Y,et){for(var lt=[],pt=this._comparator,bt=this._root,Et;lt.length!==0||bt;)if(bt)lt.push(bt),bt=bt.left;else{if(bt=lt.pop(),Et=pt(bt.key,Q),Et>0)break;if(pt(bt.key,ut)>=0&&Y.call(et,bt))return this;bt=bt.right}return this},gt.prototype.keys=function(){var ut=[];return this.forEach(function(Q){var Y=Q.key;return ut.push(Y)}),ut},gt.prototype.values=function(){var ut=[];return this.forEach(function(Q){var Y=Q.data;return ut.push(Y)}),ut},gt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},gt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},gt.prototype.minNode=function(ut){if(ut===void 0&&(ut=this._root),ut)for(;ut.left;)ut=ut.left;return ut},gt.prototype.maxNode=function(ut){if(ut===void 0&&(ut=this._root),ut)for(;ut.right;)ut=ut.right;return ut},gt.prototype.at=function(ut){for(var Q=this._root,Y=!1,et=0,lt=[];!Y;)if(Q)lt.push(Q),Q=Q.left;else if(lt.length>0){if(Q=lt.pop(),et===ut)return Q;et++,Q=Q.right}else Y=!0;return null},gt.prototype.next=function(ut){var Q=this._root,Y=null;if(ut.right){for(Y=ut.right;Y.left;)Y=Y.left;return Y}for(var et=this._comparator;Q;){var lt=et(ut.key,Q.key);if(lt===0)break;lt<0?(Y=Q,Q=Q.left):Q=Q.right}return Y},gt.prototype.prev=function(ut){var Q=this._root,Y=null;if(ut.left!==null){for(Y=ut.left;Y.right;)Y=Y.right;return Y}for(var et=this._comparator;Q;){var lt=et(ut.key,Q.key);if(lt===0)break;lt<0?Q=Q.left:(Y=Q,Q=Q.right)}return Y},gt.prototype.clear=function(){return this._root=null,this._size=0,this},gt.prototype.toList=function(){return g(this._root)},gt.prototype.load=function(ut,Q,Y){Q===void 0&&(Q=[]),Y===void 0&&(Y=!1);var et=ut.length,lt=this._comparator;if(Y&&y(ut,Q,0,et-1,lt),this._root===null)this._root=d(ut,Q,0,et),this._size=et;else{var pt=b(this.toList(),p(ut,Q),lt);et=this._size+et,this._root=m({head:pt},0,et)}return this},gt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(gt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(gt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),gt.prototype.toString=function(ut){ut===void 0&&(ut=function(et){return String(et.key)});var Q=[];return c(this._root,"",!0,function(Y){return Q.push(Y)},ut),Q.join("")},gt.prototype.update=function(ut,Q,Y){var et=this._comparator,lt=a(ut,this._root,et),pt=lt.left,bt=lt.right;et(ut,Q)<0?bt=o(Q,Y,bt,et):pt=o(Q,Y,pt,et),this._root=l(pt,bt,et)},gt.prototype.split=function(ut){return a(ut,this._root,this._comparator)},gt}();function d(gt,ut,Q,Y){var et=Y-Q;if(et>0){var lt=Q+Math.floor(et/2),pt=gt[lt],bt=ut[lt],Et=new r(pt,bt);return Et.left=d(gt,ut,Q,lt),Et.right=d(gt,ut,lt+1,Y),Et}return null}function p(gt,ut){for(var Q=new r(null,null),Y=Q,et=0;et<gt.length;et++)Y=Y.next=new r(gt[et],ut[et]);return Y.next=null,Q.next}function g(gt){for(var ut=gt,Q=[],Y=!1,et=new r(null,null),lt=et;!Y;)ut?(Q.push(ut),ut=ut.left):Q.length>0?(ut=lt=lt.next=Q.pop(),ut=ut.right):Y=!0;return lt.next=null,et.next}function m(gt,ut,Q){var Y=Q-ut;if(Y>0){var et=ut+Math.floor(Y/2),lt=m(gt,ut,et),pt=gt.head;return pt.left=lt,gt.head=gt.head.next,pt.right=m(gt,et+1,Q),pt}return null}function b(gt,ut,Q){for(var Y=new r(null,null),et=Y,lt=gt,pt=ut;lt!==null&&pt!==null;)Q(lt.key,pt.key)<0?(et.next=lt,lt=lt.next):(et.next=pt,pt=pt.next),et=et.next;return lt!==null?et.next=lt:pt!==null&&(et.next=pt),Y.next}function y(gt,ut,Q,Y,et){if(!(Q>=Y)){for(var lt=gt[Q+Y>>1],pt=Q-1,bt=Y+1;;){do pt++;while(et(gt[pt],lt)<0);do bt--;while(et(gt[bt],lt)>0);if(pt>=bt)break;var Et=gt[pt];gt[pt]=gt[bt],gt[bt]=Et,Et=ut[pt],ut[pt]=ut[bt],ut[bt]=Et}y(gt,ut,Q,bt,et),y(gt,ut,bt+1,Y,et)}}var x=function(ut,Q){return ut.ll.x<=Q.x&&Q.x<=ut.ur.x&&ut.ll.y<=Q.y&&Q.y<=ut.ur.y},S=function(ut,Q){if(Q.ur.x<ut.ll.x||ut.ur.x<Q.ll.x||Q.ur.y<ut.ll.y||ut.ur.y<Q.ll.y)return null;var Y=ut.ll.x<Q.ll.x?Q.ll.x:ut.ll.x,et=ut.ur.x<Q.ur.x?ut.ur.x:Q.ur.x,lt=ut.ll.y<Q.ll.y?Q.ll.y:ut.ll.y,pt=ut.ur.y<Q.ur.y?ut.ur.y:Q.ur.y;return{ll:{x:Y,y:lt},ur:{x:et,y:pt}}},O=Number.EPSILON;O===void 0&&(O=Math.pow(2,-52));var D=O*O,U=function(ut,Q){if(-O<ut&&ut<O&&-O<Q&&Q<O)return 0;var Y=ut-Q;return Y*Y<D*ut*Q?0:ut<Q?-1:1},z=function(){function gt(){n(this,gt),this.reset()}return e(gt,[{key:"reset",value:function(){this.xRounder=new q,this.yRounder=new q}},{key:"round",value:function(Q,Y){return{x:this.xRounder.round(Q),y:this.yRounder.round(Y)}}}]),gt}(),q=function(){function gt(){n(this,gt),this.tree=new h,this.round(0)}return e(gt,[{key:"round",value:function(Q){var Y=this.tree.add(Q),et=this.tree.prev(Y);if(et!==null&&U(Y.key,et.key)===0)return this.tree.remove(Q),et.key;var lt=this.tree.next(Y);return lt!==null&&U(Y.key,lt.key)===0?(this.tree.remove(Q),lt.key):Q}}]),gt}(),G=new z,tt=function(ut,Q){return ut.x*Q.y-ut.y*Q.x},K=function(ut,Q){return ut.x*Q.x+ut.y*Q.y},B=function(ut,Q,Y){var et={x:Q.x-ut.x,y:Q.y-ut.y},lt={x:Y.x-ut.x,y:Y.y-ut.y},pt=tt(et,lt);return U(pt,0)},N=function(ut){return Math.sqrt(K(ut,ut))},Z=function(ut,Q,Y){var et={x:Q.x-ut.x,y:Q.y-ut.y},lt={x:Y.x-ut.x,y:Y.y-ut.y};return tt(lt,et)/N(lt)/N(et)},w=function(ut,Q,Y){var et={x:Q.x-ut.x,y:Q.y-ut.y},lt={x:Y.x-ut.x,y:Y.y-ut.y};return K(lt,et)/N(lt)/N(et)},C=function(ut,Q,Y){return Q.y===0?null:{x:ut.x+Q.x/Q.y*(Y-ut.y),y:Y}},k=function(ut,Q,Y){return Q.x===0?null:{x:Y,y:ut.y+Q.y/Q.x*(Y-ut.x)}},T=function(ut,Q,Y,et){if(Q.x===0)return k(Y,et,ut.x);if(et.x===0)return k(ut,Q,Y.x);if(Q.y===0)return C(Y,et,ut.y);if(et.y===0)return C(ut,Q,Y.y);var lt=tt(Q,et);if(lt==0)return null;var pt={x:Y.x-ut.x,y:Y.y-ut.y},bt=tt(pt,Q)/lt,Et=tt(pt,et)/lt,Ot=ut.x+Et*Q.x,zt=Y.x+bt*et.x,Gt=ut.y+Et*Q.y,Jt=Y.y+bt*et.y,Kt=(Ot+zt)/2,re=(Gt+Jt)/2;return{x:Kt,y:re}},R=function(){e(gt,null,[{key:"compare",value:function(Q,Y){var et=gt.comparePoints(Q.point,Y.point);return et!==0?et:(Q.point!==Y.point&&Q.link(Y),Q.isLeft!==Y.isLeft?Q.isLeft?1:-1:H.compare(Q.segment,Y.segment))}},{key:"comparePoints",value:function(Q,Y){return Q.x<Y.x?-1:Q.x>Y.x?1:Q.y<Y.y?-1:Q.y>Y.y?1:0}}]);function gt(ut,Q){n(this,gt),ut.events===void 0?ut.events=[this]:ut.events.push(this),this.point=ut,this.isLeft=Q}return e(gt,[{key:"link",value:function(Q){if(Q.point===this.point)throw new Error("Tried to link already linked events");for(var Y=Q.point.events,et=0,lt=Y.length;et<lt;et++){var pt=Y[et];this.point.events.push(pt),pt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Q=this.point.events.length,Y=0;Y<Q;Y++){var et=this.point.events[Y];if(et.segment.consumedBy===void 0)for(var lt=Y+1;lt<Q;lt++){var pt=this.point.events[lt];pt.consumedBy===void 0&&et.otherSE.point.events===pt.otherSE.point.events&&et.segment.consume(pt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Q=[],Y=0,et=this.point.events.length;Y<et;Y++){var lt=this.point.events[Y];lt!==this&&!lt.segment.ringOut&&lt.segment.isInResult()&&Q.push(lt)}return Q}},{key:"getLeftmostComparator",value:function(Q){var Y=this,et=new Map,lt=function(bt){var Et=bt.otherSE;et.set(bt,{sine:Z(Y.point,Q.point,Et.point),cosine:w(Y.point,Q.point,Et.point)})};return function(pt,bt){et.has(pt)||lt(pt),et.has(bt)||lt(bt);var Et=et.get(pt),Ot=Et.sine,zt=Et.cosine,Gt=et.get(bt),Jt=Gt.sine,Kt=Gt.cosine;return Ot>=0&&Jt>=0?zt<Kt?1:zt>Kt?-1:0:Ot<0&&Jt<0?zt<Kt?-1:zt>Kt?1:0:Jt<Ot?-1:Jt>Ot?1:0}}}]),gt}(),F=0,H=function(){e(gt,null,[{key:"compare",value:function(Q,Y){var et=Q.leftSE.point.x,lt=Y.leftSE.point.x,pt=Q.rightSE.point.x,bt=Y.rightSE.point.x;if(bt<et)return 1;if(pt<lt)return-1;var Et=Q.leftSE.point.y,Ot=Y.leftSE.point.y,zt=Q.rightSE.point.y,Gt=Y.rightSE.point.y;if(et<lt){if(Ot<Et&&Ot<zt)return 1;if(Ot>Et&&Ot>zt)return-1;var Jt=Q.comparePoint(Y.leftSE.point);if(Jt<0)return 1;if(Jt>0)return-1;var Kt=Y.comparePoint(Q.rightSE.point);return Kt!==0?Kt:-1}if(et>lt){if(Et<Ot&&Et<Gt)return-1;if(Et>Ot&&Et>Gt)return 1;var re=Y.comparePoint(Q.leftSE.point);if(re!==0)return re;var Xt=Q.comparePoint(Y.rightSE.point);return Xt<0?1:Xt>0?-1:1}if(Et<Ot)return-1;if(Et>Ot)return 1;if(pt<bt){var Ut=Y.comparePoint(Q.rightSE.point);if(Ut!==0)return Ut}if(pt>bt){var _e=Q.comparePoint(Y.rightSE.point);if(_e<0)return 1;if(_e>0)return-1}if(pt!==bt){var le=zt-Et,ye=pt-et,Ze=Gt-Ot,ce=bt-lt;if(le>ye&&Ze<ce)return 1;if(le<ye&&Ze>ce)return-1}return pt>bt?1:pt<bt||zt<Gt?-1:zt>Gt?1:Q.id<Y.id?-1:Q.id>Y.id?1:0}}]);function gt(ut,Q,Y,et){n(this,gt),this.id=++F,this.leftSE=ut,ut.segment=this,ut.otherSE=Q,this.rightSE=Q,Q.segment=this,Q.otherSE=ut,this.rings=Y,this.windings=et}return e(gt,[{key:"replaceRightSE",value:function(Q){this.rightSE=Q,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Q=this.leftSE.point.y,Y=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Q<Y?Q:Y},ur:{x:this.rightSE.point.x,y:Q>Y?Q:Y}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Q){return Q.x===this.leftSE.point.x&&Q.y===this.leftSE.point.y||Q.x===this.rightSE.point.x&&Q.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Q){if(this.isAnEndpoint(Q))return 0;var Y=this.leftSE.point,et=this.rightSE.point,lt=this.vector();if(Y.x===et.x)return Q.x===Y.x?0:Q.x<Y.x?1:-1;var pt=(Q.y-Y.y)/lt.y,bt=Y.x+pt*lt.x;if(Q.x===bt)return 0;var Et=(Q.x-Y.x)/lt.x,Ot=Y.y+Et*lt.y;return Q.y===Ot?0:Q.y<Ot?-1:1}},{key:"getIntersection",value:function(Q){var Y=this.bbox(),et=Q.bbox(),lt=S(Y,et);if(lt===null)return null;var pt=this.leftSE.point,bt=this.rightSE.point,Et=Q.leftSE.point,Ot=Q.rightSE.point,zt=x(Y,Et)&&this.comparePoint(Et)===0,Gt=x(et,pt)&&Q.comparePoint(pt)===0,Jt=x(Y,Ot)&&this.comparePoint(Ot)===0,Kt=x(et,bt)&&Q.comparePoint(bt)===0;if(Gt&&zt)return Kt&&!Jt?bt:!Kt&&Jt?Ot:null;if(Gt)return Jt&&pt.x===Ot.x&&pt.y===Ot.y?null:pt;if(zt)return Kt&&bt.x===Et.x&&bt.y===Et.y?null:Et;if(Kt&&Jt)return null;if(Kt)return bt;if(Jt)return Ot;var re=T(pt,this.vector(),Et,Q.vector());return re===null||!x(lt,re)?null:G.round(re.x,re.y)}},{key:"split",value:function(Q){var Y=[],et=Q.events!==void 0,lt=new R(Q,!0),pt=new R(Q,!1),bt=this.rightSE;this.replaceRightSE(pt),Y.push(pt),Y.push(lt);var Et=new gt(lt,bt,this.rings.slice(),this.windings.slice());return R.comparePoints(Et.leftSE.point,Et.rightSE.point)>0&&Et.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),et&&(lt.checkForConsuming(),pt.checkForConsuming()),Y}},{key:"swapEvents",value:function(){var Q=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Q,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var Y=0,et=this.windings.length;Y<et;Y++)this.windings[Y]*=-1}},{key:"consume",value:function(Q){for(var Y=this,et=Q;Y.consumedBy;)Y=Y.consumedBy;for(;et.consumedBy;)et=et.consumedBy;var lt=gt.compare(Y,et);if(lt!==0){if(lt>0){var pt=Y;Y=et,et=pt}if(Y.prev===et){var bt=Y;Y=et,et=bt}for(var Et=0,Ot=et.rings.length;Et<Ot;Et++){var zt=et.rings[Et],Gt=et.windings[Et],Jt=Y.rings.indexOf(zt);Jt===-1?(Y.rings.push(zt),Y.windings.push(Gt)):Y.windings[Jt]+=Gt}et.rings=null,et.windings=null,et.consumedBy=Y,et.leftSE.consumedBy=Y.leftSE,et.rightSE.consumedBy=Y.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var Q=this.prev.consumedBy||this.prev;this._beforeState=Q.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var Q=this.beforeState();this._afterState={rings:Q.rings.slice(0),windings:Q.windings.slice(0),multiPolys:[]};for(var Y=this._afterState.rings,et=this._afterState.windings,lt=this._afterState.multiPolys,pt=0,bt=this.rings.length;pt<bt;pt++){var Et=this.rings[pt],Ot=this.windings[pt],zt=Y.indexOf(Et);zt===-1?(Y.push(Et),et.push(Ot)):et[zt]+=Ot}for(var Gt=[],Jt=[],Kt=0,re=Y.length;Kt<re;Kt++)if(et[Kt]!==0){var Xt=Y[Kt],Ut=Xt.poly;if(Jt.indexOf(Ut)===-1)if(Xt.isExterior)Gt.push(Ut);else{Jt.indexOf(Ut)===-1&&Jt.push(Ut);var _e=Gt.indexOf(Xt.poly);_e!==-1&&Gt.splice(_e,1)}}for(var le=0,ye=Gt.length;le<ye;le++){var Ze=Gt[le].multiPoly;lt.indexOf(Ze)===-1&&lt.push(Ze)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var Q=this.beforeState().multiPolys,Y=this.afterState().multiPolys;switch(_t.type){case"union":{var et=Q.length===0,lt=Y.length===0;this._isInResult=et!==lt;break}case"intersection":{var pt,bt;Q.length<Y.length?(pt=Q.length,bt=Y.length):(pt=Y.length,bt=Q.length),this._isInResult=bt===_t.numMultiPolys&&pt<bt;break}case"xor":{var Et=Math.abs(Q.length-Y.length);this._isInResult=Et%2===1;break}case"difference":{var Ot=function(Gt){return Gt.length===1&&Gt[0].isSubject};this._isInResult=Ot(Q)!==Ot(Y);break}default:throw new Error("Unrecognized operation type found ".concat(_t.type))}return this._isInResult}}],[{key:"fromRing",value:function(Q,Y,et){var lt,pt,bt,Et=R.comparePoints(Q,Y);if(Et<0)lt=Q,pt=Y,bt=1;else if(Et>0)lt=Y,pt=Q,bt=-1;else throw new Error("Tried to create degenerate segment at [".concat(Q.x,", ").concat(Q.y,"]"));var Ot=new R(lt,!0),zt=new R(pt,!1);return new gt(Ot,zt,[et],[bt])}}]),gt}(),rt=function(){function gt(ut,Q,Y){if(n(this,gt),!Array.isArray(ut)||ut.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Q,this.isExterior=Y,this.segments=[],typeof ut[0][0]!="number"||typeof ut[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var et=G.round(ut[0][0],ut[0][1]);this.bbox={ll:{x:et.x,y:et.y},ur:{x:et.x,y:et.y}};for(var lt=et,pt=1,bt=ut.length;pt<bt;pt++){if(typeof ut[pt][0]!="number"||typeof ut[pt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Et=G.round(ut[pt][0],ut[pt][1]);Et.x===lt.x&&Et.y===lt.y||(this.segments.push(H.fromRing(lt,Et,this)),Et.x<this.bbox.ll.x&&(this.bbox.ll.x=Et.x),Et.y<this.bbox.ll.y&&(this.bbox.ll.y=Et.y),Et.x>this.bbox.ur.x&&(this.bbox.ur.x=Et.x),Et.y>this.bbox.ur.y&&(this.bbox.ur.y=Et.y),lt=Et)}(et.x!==lt.x||et.y!==lt.y)&&this.segments.push(H.fromRing(lt,et,this))}return e(gt,[{key:"getSweepEvents",value:function(){for(var Q=[],Y=0,et=this.segments.length;Y<et;Y++){var lt=this.segments[Y];Q.push(lt.leftSE),Q.push(lt.rightSE)}return Q}}]),gt}(),ot=function(){function gt(ut,Q){if(n(this,gt),!Array.isArray(ut))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new rt(ut[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Y=1,et=ut.length;Y<et;Y++){var lt=new rt(ut[Y],this,!1);lt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=lt.bbox.ll.x),lt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=lt.bbox.ll.y),lt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=lt.bbox.ur.x),lt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=lt.bbox.ur.y),this.interiorRings.push(lt)}this.multiPoly=Q}return e(gt,[{key:"getSweepEvents",value:function(){for(var Q=this.exteriorRing.getSweepEvents(),Y=0,et=this.interiorRings.length;Y<et;Y++)for(var lt=this.interiorRings[Y].getSweepEvents(),pt=0,bt=lt.length;pt<bt;pt++)Q.push(lt[pt]);return Q}}]),gt}(),dt=function(){function gt(ut,Q){if(n(this,gt),!Array.isArray(ut))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof ut[0][0][0]=="number"&&(ut=[ut])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Y=0,et=ut.length;Y<et;Y++){var lt=new ot(ut[Y],this);lt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=lt.bbox.ll.x),lt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=lt.bbox.ll.y),lt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=lt.bbox.ur.x),lt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=lt.bbox.ur.y),this.polys.push(lt)}this.isSubject=Q}return e(gt,[{key:"getSweepEvents",value:function(){for(var Q=[],Y=0,et=this.polys.length;Y<et;Y++)for(var lt=this.polys[Y].getSweepEvents(),pt=0,bt=lt.length;pt<bt;pt++)Q.push(lt[pt]);return Q}}]),gt}(),$=function(){e(gt,null,[{key:"factory",value:function(Q){for(var Y=[],et=0,lt=Q.length;et<lt;et++){var pt=Q[et];if(!(!pt.isInResult()||pt.ringOut)){for(var bt=null,Et=pt.leftSE,Ot=pt.rightSE,zt=[Et],Gt=Et.point,Jt=[];bt=Et,Et=Ot,zt.push(Et),Et.point!==Gt;)for(;;){var Kt=Et.getAvailableLinkedEvents();if(Kt.length===0){var re=zt[0].point,Xt=zt[zt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(re.x,",")+" ".concat(re.y,"]. Last matching segment found ends at")+" [".concat(Xt.x,", ").concat(Xt.y,"]."))}if(Kt.length===1){Ot=Kt[0].otherSE;break}for(var Ut=null,_e=0,le=Jt.length;_e<le;_e++)if(Jt[_e].point===Et.point){Ut=_e;break}if(Ut!==null){var ye=Jt.splice(Ut)[0],Ze=zt.splice(ye.index);Ze.unshift(Ze[0].otherSE),Y.push(new gt(Ze.reverse()));continue}Jt.push({index:zt.length,point:Et.point});var ce=Et.getLeftmostComparator(bt);Ot=Kt.sort(ce)[0].otherSE;break}Y.push(new gt(zt))}}return Y}}]);function gt(ut){n(this,gt),this.events=ut;for(var Q=0,Y=ut.length;Q<Y;Q++)ut[Q].segment.ringOut=this;this.poly=null}return e(gt,[{key:"getGeom",value:function(){for(var Q=this.events[0].point,Y=[Q],et=1,lt=this.events.length-1;et<lt;et++){var pt=this.events[et].point,bt=this.events[et+1].point;B(pt,Q,bt)!==0&&(Y.push(pt),Q=pt)}if(Y.length===1)return null;var Et=Y[0],Ot=Y[1];B(Et,Q,Ot)===0&&Y.shift(),Y.push(Y[0]);for(var zt=this.isExteriorRing()?1:-1,Gt=this.isExteriorRing()?0:Y.length-1,Jt=this.isExteriorRing()?Y.length:-1,Kt=[],re=Gt;re!=Jt;re+=zt)Kt.push([Y[re].x,Y[re].y]);return Kt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var Q=this.enclosingRing();this._isExteriorRing=Q?!Q.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Q=this.events[0],Y=1,et=this.events.length;Y<et;Y++){var lt=this.events[Y];R.compare(Q,lt)>0&&(Q=lt)}for(var pt=Q.segment.prevInResult(),bt=pt?pt.prevInResult():null;;){if(!pt)return null;if(!bt)return pt.ringOut;if(bt.ringOut!==pt.ringOut)return bt.ringOut.enclosingRing()!==pt.ringOut?pt.ringOut:pt.ringOut.enclosingRing();pt=bt.prevInResult(),bt=pt?pt.prevInResult():null}}}]),gt}(),ct=function(){function gt(ut){n(this,gt),this.exteriorRing=ut,ut.poly=this,this.interiorRings=[]}return e(gt,[{key:"addInterior",value:function(Q){this.interiorRings.push(Q),Q.poly=this}},{key:"getGeom",value:function(){var Q=[this.exteriorRing.getGeom()];if(Q[0]===null)return null;for(var Y=0,et=this.interiorRings.length;Y<et;Y++){var lt=this.interiorRings[Y].getGeom();lt!==null&&Q.push(lt)}return Q}}]),gt}(),W=function(){function gt(ut){n(this,gt),this.rings=ut,this.polys=this._composePolys(ut)}return e(gt,[{key:"getGeom",value:function(){for(var Q=[],Y=0,et=this.polys.length;Y<et;Y++){var lt=this.polys[Y].getGeom();lt!==null&&Q.push(lt)}return Q}},{key:"_composePolys",value:function(Q){for(var Y=[],et=0,lt=Q.length;et<lt;et++){var pt=Q[et];if(!pt.poly)if(pt.isExteriorRing())Y.push(new ct(pt));else{var bt=pt.enclosingRing();bt.poly||Y.push(new ct(bt)),bt.poly.addInterior(pt)}}return Y}}]),gt}(),V=function(){function gt(ut){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.compare;n(this,gt),this.queue=ut,this.tree=new h(Q),this.segments=[]}return e(gt,[{key:"process",value:function(Q){var Y=Q.segment,et=[];if(Q.consumedBy)return Q.isLeft?this.queue.remove(Q.otherSE):this.tree.remove(Y),et;var lt=Q.isLeft?this.tree.insert(Y):this.tree.find(Y);if(!lt)throw new Error("Unable to find segment #".concat(Y.id," ")+"[".concat(Y.leftSE.point.x,", ").concat(Y.leftSE.point.y,"] -> ")+"[".concat(Y.rightSE.point.x,", ").concat(Y.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var pt=lt,bt=lt,Et=void 0,Ot=void 0;Et===void 0;)pt=this.tree.prev(pt),pt===null?Et=null:pt.key.consumedBy===void 0&&(Et=pt.key);for(;Ot===void 0;)bt=this.tree.next(bt),bt===null?Ot=null:bt.key.consumedBy===void 0&&(Ot=bt.key);if(Q.isLeft){var zt=null;if(Et){var Gt=Et.getIntersection(Y);if(Gt!==null&&(Y.isAnEndpoint(Gt)||(zt=Gt),!Et.isAnEndpoint(Gt)))for(var Jt=this._splitSafely(Et,Gt),Kt=0,re=Jt.length;Kt<re;Kt++)et.push(Jt[Kt])}var Xt=null;if(Ot){var Ut=Ot.getIntersection(Y);if(Ut!==null&&(Y.isAnEndpoint(Ut)||(Xt=Ut),!Ot.isAnEndpoint(Ut)))for(var _e=this._splitSafely(Ot,Ut),le=0,ye=_e.length;le<ye;le++)et.push(_e[le])}if(zt!==null||Xt!==null){var Ze=null;if(zt===null)Ze=Xt;else if(Xt===null)Ze=zt;else{var ce=R.comparePoints(zt,Xt);Ze=ce<=0?zt:Xt}this.queue.remove(Y.rightSE),et.push(Y.rightSE);for(var ke=Y.split(Ze),He=0,$t=ke.length;He<$t;He++)et.push(ke[He])}et.length>0?(this.tree.remove(Y),et.push(Q)):(this.segments.push(Y),Y.prev=Et)}else{if(Et&&Ot){var Te=Et.getIntersection(Ot);if(Te!==null){if(!Et.isAnEndpoint(Te))for(var br=this._splitSafely(Et,Te),ue=0,Fe=br.length;ue<Fe;ue++)et.push(br[ue]);if(!Ot.isAnEndpoint(Te))for(var ar=this._splitSafely(Ot,Te),Le=0,Oe=ar.length;Le<Oe;Le++)et.push(ar[Le])}}this.tree.remove(Y)}return et}},{key:"_splitSafely",value:function(Q,Y){this.tree.remove(Q);var et=Q.rightSE;this.queue.remove(et);var lt=Q.split(Y);return lt.push(et),Q.consumedBy===void 0&&this.tree.insert(Q),lt}}]),gt}(),it=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,mt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,wt=function(){function gt(){n(this,gt)}return e(gt,[{key:"run",value:function(Q,Y,et){_t.type=Q,G.reset();for(var lt=[new dt(Y,!0)],pt=0,bt=et.length;pt<bt;pt++)lt.push(new dt(et[pt],!1));if(_t.numMultiPolys=lt.length,_t.type==="difference")for(var Et=lt[0],Ot=1;Ot<lt.length;)S(lt[Ot].bbox,Et.bbox)!==null?Ot++:lt.splice(Ot,1);if(_t.type==="intersection"){for(var zt=0,Gt=lt.length;zt<Gt;zt++)for(var Jt=lt[zt],Kt=zt+1,re=lt.length;Kt<re;Kt++)if(S(Jt.bbox,lt[Kt].bbox)===null)return[]}for(var Xt=new h(R.compare),Ut=0,_e=lt.length;Ut<_e;Ut++)for(var le=lt[Ut].getSweepEvents(),ye=0,Ze=le.length;ye<Ze;ye++)if(Xt.insert(le[ye]),Xt.size>it)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var ce=new V(Xt),ke=Xt.size,He=Xt.pop();He;){var $t=He.key;if(Xt.size===ke){var Te=$t.segment;throw new Error("Unable to pop() ".concat($t.isLeft?"left":"right"," SweepEvent ")+"[".concat($t.point.x,", ").concat($t.point.y,"] from segment #").concat(Te.id," ")+"[".concat(Te.leftSE.point.x,", ").concat(Te.leftSE.point.y,"] -> ")+"[".concat(Te.rightSE.point.x,", ").concat(Te.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Xt.size>it)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(ce.segments.length>mt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var br=ce.process($t),ue=0,Fe=br.length;ue<Fe;ue++){var ar=br[ue];ar.consumedBy===void 0&&Xt.insert(ar)}ke=Xt.size,He=Xt.pop()}G.reset();var Le=$.factory(ce.segments),Oe=new W(Le);return Oe.getGeom()}}]),gt}(),_t=new wt,Ct=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("union",ut,Y)},Ft=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("intersection",ut,Y)},It=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("xor",ut,Y)},vt=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("difference",ut,Y)},kt={union:Ct,intersection:Ft,xor:It,difference:vt};return kt})});var Sy=Ge((ih,My)=>{(function(n,t){typeof ih=="object"&&typeof My<"u"?t(ih):typeof define=="function"&&define.amd?define(["exports"],t):t(n.jsts={})})(ih,function(n){"use strict";function t(){}function e(u){this.message=u||""}function r(u){this.message=u||""}function i(u){this.message=u||""}function s(){}function o(u){return u===null?qt:u.color}function a(u){return u===null?null:u.parent}function l(u,f){u!==null&&(u.color=f)}function c(u){return u===null?null:u.left}function h(u){return u===null?null:u.right}function d(){this.root_=null,this.size_=0}function p(){}function g(){this.array_=[],arguments[0]instanceof ce&&this.addAll(arguments[0])}function m(){}function b(u){this.message=u||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(u){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var f=Object(this),_=Math.max(Math.min(f.length,9007199254740991),0)||0,E=1 in arguments&&parseInt(Number(arguments[1]),10)||0;E=E<0?Math.max(_+E,0):Math.min(E,_);var I=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:_;for(I=I<0?Math.max(_+arguments[2],0):Math.min(I,_);E<I;)f[E]=u,++E;return f},writable:!0}),Number.isFinite=Number.isFinite||function(u){return typeof u=="number"&&isFinite(u)},Number.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(u){return u!=u},Math.trunc=Math.trunc||function(u){return u<0?Math.ceil(u):Math.floor(u)};var x=function(){};x.prototype.interfaces_=function(){return[]},x.prototype.getClass=function(){return x},x.prototype.equalsWithTolerance=function(u,f,_){return Math.abs(u-f)<=_};var S=function(u){function f(_){u.call(this,_),this.name="IllegalArgumentException",this.message=_,this.stack=new u().stack}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f}(Error),O=function(){},D={MAX_VALUE:{configurable:!0}};O.isNaN=function(u){return Number.isNaN(u)},O.doubleToLongBits=function(u){return u},O.longBitsToDouble=function(u){return u},O.isInfinite=function(u){return!Number.isFinite(u)},D.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(O,D);var U=function(){},z=function(){},q=function(){},G=function u(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=u.NULL_ORDINATE;else if(arguments.length===1){var f=arguments[0];this.x=f.x,this.y=f.y,this.z=f.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=u.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},tt={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};G.prototype.setOrdinate=function(u,f){switch(u){case G.X:this.x=f;break;case G.Y:this.y=f;break;case G.Z:this.z=f;break;default:throw new S("Invalid ordinate index: "+u)}},G.prototype.equals2D=function(){if(arguments.length===1){var u=arguments[0];return this.x===u.x&&this.y===u.y}if(arguments.length===2){var f=arguments[0],_=arguments[1];return!!x.equalsWithTolerance(this.x,f.x,_)&&!!x.equalsWithTolerance(this.y,f.y,_)}},G.prototype.getOrdinate=function(u){switch(u){case G.X:return this.x;case G.Y:return this.y;case G.Z:return this.z}throw new S("Invalid ordinate index: "+u)},G.prototype.equals3D=function(u){return this.x===u.x&&this.y===u.y&&(this.z===u.z||O.isNaN(this.z))&&O.isNaN(u.z)},G.prototype.equals=function(u){return u instanceof G&&this.equals2D(u)},G.prototype.equalInZ=function(u,f){return x.equalsWithTolerance(this.z,u.z,f)},G.prototype.compareTo=function(u){var f=u;return this.x<f.x?-1:this.x>f.x?1:this.y<f.y?-1:this.y>f.y?1:0},G.prototype.clone=function(){},G.prototype.copy=function(){return new G(this)},G.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},G.prototype.distance3D=function(u){var f=this.x-u.x,_=this.y-u.y,E=this.z-u.z;return Math.sqrt(f*f+_*_+E*E)},G.prototype.distance=function(u){var f=this.x-u.x,_=this.y-u.y;return Math.sqrt(f*f+_*_)},G.prototype.hashCode=function(){var u=17;return u=37*u+G.hashCode(this.x),u=37*u+G.hashCode(this.y)},G.prototype.setCoordinate=function(u){this.x=u.x,this.y=u.y,this.z=u.z},G.prototype.interfaces_=function(){return[U,z,t]},G.prototype.getClass=function(){return G},G.hashCode=function(){if(arguments.length===1){var u=arguments[0],f=O.doubleToLongBits(u);return Math.trunc((f^f)>>>32)}},tt.DimensionalComparator.get=function(){return K},tt.serialVersionUID.get=function(){return 6683108902428367e3},tt.NULL_ORDINATE.get=function(){return O.NaN},tt.X.get=function(){return 0},tt.Y.get=function(){return 1},tt.Z.get=function(){return 2},Object.defineProperties(G,tt);var K=function(u){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var f=arguments[0];if(f!==2&&f!==3)throw new S("only 2 or 3 dimensions may be specified");this._dimensionsToTest=f}}};K.prototype.compare=function(u,f){var _=u,E=f,I=K.compare(_.x,E.x);if(I!==0)return I;var J=K.compare(_.y,E.y);return J!==0?J:this._dimensionsToTest<=2?0:K.compare(_.z,E.z)},K.prototype.interfaces_=function(){return[q]},K.prototype.getClass=function(){return K},K.compare=function(u,f){return u<f?-1:u>f?1:O.isNaN(u)?O.isNaN(f)?0:-1:O.isNaN(f)?1:0};var B=function(){};B.prototype.create=function(){},B.prototype.interfaces_=function(){return[]},B.prototype.getClass=function(){return B};var N=function(){},Z={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};N.prototype.interfaces_=function(){return[]},N.prototype.getClass=function(){return N},N.toLocationSymbol=function(u){switch(u){case N.EXTERIOR:return"e";case N.BOUNDARY:return"b";case N.INTERIOR:return"i";case N.NONE:return"-"}throw new S("Unknown location value: "+u)},Z.INTERIOR.get=function(){return 0},Z.BOUNDARY.get=function(){return 1},Z.EXTERIOR.get=function(){return 2},Z.NONE.get=function(){return-1},Object.defineProperties(N,Z);var w=function(u,f){return u.interfaces_&&u.interfaces_().indexOf(f)>-1},C=function(){},k={LOG_10:{configurable:!0}};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.log10=function(u){var f=Math.log(u);return O.isInfinite(f)||O.isNaN(f)?f:f/C.LOG_10},C.min=function(u,f,_,E){var I=u;return f<I&&(I=f),_<I&&(I=_),E<I&&(I=E),I},C.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],f=arguments[1],_=arguments[2];return u<f?f:u>_?_:u}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var E=arguments[0],I=arguments[1],J=arguments[2];return E<I?I:E>J?J:E}},C.wrap=function(u,f){return u<0?f- -u%f:u%f},C.max=function(){if(arguments.length===3){var u=arguments[0],f=arguments[1],_=arguments[2],E=u;return f>E&&(E=f),_>E&&(E=_),E}if(arguments.length===4){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3],St=I;return J>St&&(St=J),at>St&&(St=at),yt>St&&(St=yt),St}},C.average=function(u,f){return(u+f)/2},k.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(C,k);var T=function(u){this.str=u};T.prototype.append=function(u){this.str+=u},T.prototype.setCharAt=function(u,f){this.str=this.str.substr(0,u)+f+this.str.substr(u+1)},T.prototype.toString=function(u){return this.str};var R=function(u){this.value=u};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(u){return this.value<u?-1:this.value>u?1:0},R.isNaN=function(u){return Number.isNaN(u)};var F=function(){};F.isWhitespace=function(u){return u<=32&&u>=0||u===127},F.toUpperCase=function(u){return u.toUpperCase()};var H=function u(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var f=arguments[0];this.init(f)}else if(arguments[0]instanceof u){var _=arguments[0];this.init(_)}else if(typeof arguments[0]=="string"){var E=arguments[0];u.call(this,u.parse(E))}}else if(arguments.length===2){var I=arguments[0],J=arguments[1];this.init(I,J)}},rt={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};H.prototype.le=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<=u._lo},H.prototype.extractSignificantDigits=function(u,f){var _=this.abs(),E=H.magnitude(_._hi),I=H.TEN.pow(E);(_=_.divide(I)).gt(H.TEN)?(_=_.divide(H.TEN),E+=1):_.lt(H.ONE)&&(_=_.multiply(H.TEN),E-=1);for(var J=E+1,at=new T,yt=H.MAX_PRINT_DIGITS-1,St=0;St<=yt;St++){u&&St===J&&at.append(".");var Bt=Math.trunc(_._hi);if(Bt<0)break;var Yt=!1,ee=0;Bt>9?(Yt=!0,ee="9"):ee="0"+Bt,at.append(ee),_=_.subtract(H.valueOf(Bt)).multiply(H.TEN),Yt&&_.selfAdd(H.TEN);var xe=!0,Me=H.magnitude(_._hi);if(Me<0&&Math.abs(Me)>=yt-St&&(xe=!1),!xe)break}return f[0]=E,at.toString()},H.prototype.sqr=function(){return this.multiply(this)},H.prototype.doubleValue=function(){return this._hi+this._lo},H.prototype.subtract=function(){if(arguments[0]instanceof H){var u=arguments[0];return this.add(u.negate())}if(typeof arguments[0]=="number"){var f=arguments[0];return this.add(-f)}},H.prototype.equals=function(){if(arguments.length===1){var u=arguments[0];return this._hi===u._hi&&this._lo===u._lo}},H.prototype.isZero=function(){return this._hi===0&&this._lo===0},H.prototype.selfSubtract=function(){if(arguments[0]instanceof H){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u._hi,-u._lo)}if(typeof arguments[0]=="number"){var f=arguments[0];return this.isNaN()?this:this.selfAdd(-f,0)}},H.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},H.prototype.min=function(u){return this.le(u)?this:u},H.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof H){var u=arguments[0];return this.selfDivide(u._hi,u._lo)}if(typeof arguments[0]=="number"){var f=arguments[0];return this.selfDivide(f,0)}}else if(arguments.length===2){var _=arguments[0],E=arguments[1],I=null,J=null,at=null,yt=null,St=null,Bt=null,Yt=null,ee=null;return St=this._hi/_,Bt=H.SPLIT*St,I=Bt-St,ee=H.SPLIT*_,I=Bt-I,J=St-I,at=ee-_,Yt=St*_,at=ee-at,yt=_-at,ee=I*at-Yt+I*yt+J*at+J*yt,Bt=(this._hi-Yt-ee+this._lo-St*E)/_,ee=St+Bt,this._hi=ee,this._lo=St-ee+Bt,this}},H.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},H.prototype.divide=function(){if(arguments[0]instanceof H){var u=arguments[0],f=null,_=null,E=null,I=null,J=null,at=null,yt=null,St=null;return _=(J=this._hi/u._hi)-(f=(at=H.SPLIT*J)-(f=at-J)),St=f*(E=(St=H.SPLIT*u._hi)-(E=St-u._hi))-(yt=J*u._hi)+f*(I=u._hi-E)+_*E+_*I,at=(this._hi-yt-St+this._lo-J*u._lo)/u._hi,new H(St=J+at,J-St+at)}if(typeof arguments[0]=="number"){var Bt=arguments[0];return O.isNaN(Bt)?H.createNaN():H.copy(this).selfDivide(Bt,0)}},H.prototype.ge=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>=u._lo},H.prototype.pow=function(u){if(u===0)return H.valueOf(1);var f=new H(this),_=H.valueOf(1),E=Math.abs(u);if(E>1)for(;E>0;)E%2==1&&_.selfMultiply(f),(E/=2)>0&&(f=f.sqr());else _=f;return u<0?_.reciprocal():_},H.prototype.ceil=function(){if(this.isNaN())return H.NaN;var u=Math.ceil(this._hi),f=0;return u===this._hi&&(f=Math.ceil(this._lo)),new H(u,f)},H.prototype.compareTo=function(u){var f=u;return this._hi<f._hi?-1:this._hi>f._hi?1:this._lo<f._lo?-1:this._lo>f._lo?1:0},H.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},H.prototype.setValue=function(){if(arguments[0]instanceof H){var u=arguments[0];return this.init(u),this}if(typeof arguments[0]=="number"){var f=arguments[0];return this.init(f),this}},H.prototype.max=function(u){return this.ge(u)?this:u},H.prototype.sqrt=function(){if(this.isZero())return H.valueOf(0);if(this.isNegative())return H.NaN;var u=1/Math.sqrt(this._hi),f=this._hi*u,_=H.valueOf(f),E=this.subtract(_.sqr())._hi*(.5*u);return _.add(E)},H.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof H){var u=arguments[0];return this.selfAdd(u._hi,u._lo)}if(typeof arguments[0]=="number"){var f=arguments[0],_=null,E=null,I=null,J=null,at=null,yt=null;return I=this._hi+f,at=I-this._hi,J=I-at,J=f-at+(this._hi-J),yt=J+this._lo,_=I+yt,E=yt+(I-_),this._hi=_+E,this._lo=E+(_-this._hi),this}}else if(arguments.length===2){var St=arguments[0],Bt=arguments[1],Yt=null,ee=null,xe=null,Me=null,Be=null,qe=null,gi=null;Me=this._hi+St,ee=this._lo+Bt,Be=Me-(qe=Me-this._hi),xe=ee-(gi=ee-this._lo);var qi=(Yt=Me+(qe=(Be=St-qe+(this._hi-Be))+ee))+(qe=(xe=Bt-gi+(this._lo-xe))+(qe+(Me-Yt))),Fn=qe+(Yt-qi);return this._hi=qi,this._lo=Fn,this}},H.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof H){var u=arguments[0];return this.selfMultiply(u._hi,u._lo)}if(typeof arguments[0]=="number"){var f=arguments[0];return this.selfMultiply(f,0)}}else if(arguments.length===2){var _=arguments[0],E=arguments[1],I=null,J=null,at=null,yt=null,St=null,Bt=null;I=(St=H.SPLIT*this._hi)-this._hi,Bt=H.SPLIT*_,I=St-I,J=this._hi-I,at=Bt-_;var Yt=(St=this._hi*_)+(Bt=I*(at=Bt-at)-St+I*(yt=_-at)+J*at+J*yt+(this._hi*E+this._lo*_)),ee=Bt+(I=St-Yt);return this._hi=Yt,this._lo=ee,this}},H.prototype.selfSqr=function(){return this.selfMultiply(this)},H.prototype.floor=function(){if(this.isNaN())return H.NaN;var u=Math.floor(this._hi),f=0;return u===this._hi&&(f=Math.floor(this._lo)),new H(u,f)},H.prototype.negate=function(){return this.isNaN()?this:new H(-this._hi,-this._lo)},H.prototype.clone=function(){},H.prototype.multiply=function(){if(arguments[0]instanceof H){var u=arguments[0];return u.isNaN()?H.createNaN():H.copy(this).selfMultiply(u)}if(typeof arguments[0]=="number"){var f=arguments[0];return O.isNaN(f)?H.createNaN():H.copy(this).selfMultiply(f,0)}},H.prototype.isNaN=function(){return O.isNaN(this._hi)},H.prototype.intValue=function(){return Math.trunc(this._hi)},H.prototype.toString=function(){var u=H.magnitude(this._hi);return u>=-3&&u<=20?this.toStandardNotation():this.toSciNotation()},H.prototype.toStandardNotation=function(){var u=this.getSpecialNumberString();if(u!==null)return u;var f=new Array(1).fill(null),_=this.extractSignificantDigits(!0,f),E=f[0]+1,I=_;if(_.charAt(0)===".")I="0"+_;else if(E<0)I="0."+H.stringOfChar("0",-E)+_;else if(_.indexOf(".")===-1){var J=E-_.length;I=_+H.stringOfChar("0",J)+".0"}return this.isNegative()?"-"+I:I},H.prototype.reciprocal=function(){var u=null,f=null,_=null,E=null,I=null,J=null,at=null,yt=null;f=(I=1/this._hi)-(u=(J=H.SPLIT*I)-(u=J-I)),_=(yt=H.SPLIT*this._hi)-this._hi;var St=I+(J=(1-(at=I*this._hi)-(yt=u*(_=yt-_)-at+u*(E=this._hi-_)+f*_+f*E)-I*this._lo)/this._hi);return new H(St,I-St+J)},H.prototype.toSciNotation=function(){if(this.isZero())return H.SCI_NOT_ZERO;var u=this.getSpecialNumberString();if(u!==null)return u;var f=new Array(1).fill(null),_=this.extractSignificantDigits(!1,f),E=H.SCI_NOT_EXPONENT_CHAR+f[0];if(_.charAt(0)==="0")throw new Error("Found leading zero: "+_);var I="";_.length>1&&(I=_.substring(1));var J=_.charAt(0)+"."+I;return this.isNegative()?"-"+J+E:J+E},H.prototype.abs=function(){return this.isNaN()?H.NaN:this.isNegative()?this.negate():new H(this)},H.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},H.prototype.lt=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<u._lo},H.prototype.add=function(){if(arguments[0]instanceof H){var u=arguments[0];return H.copy(this).selfAdd(u)}if(typeof arguments[0]=="number"){var f=arguments[0];return H.copy(this).selfAdd(f)}},H.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this._hi=u,this._lo=0}else if(arguments[0]instanceof H){var f=arguments[0];this._hi=f._hi,this._lo=f._lo}}else if(arguments.length===2){var _=arguments[0],E=arguments[1];this._hi=_,this._lo=E}},H.prototype.gt=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>u._lo},H.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},H.prototype.trunc=function(){return this.isNaN()?H.NaN:this.isPositive()?this.floor():this.ceil()},H.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},H.prototype.interfaces_=function(){return[t,U,z]},H.prototype.getClass=function(){return H},H.sqr=function(u){return H.valueOf(u).selfMultiply(u)},H.valueOf=function(){if(typeof arguments[0]=="string"){var u=arguments[0];return H.parse(u)}if(typeof arguments[0]=="number"){var f=arguments[0];return new H(f)}},H.sqrt=function(u){return H.valueOf(u).sqrt()},H.parse=function(u){for(var f=0,_=u.length;F.isWhitespace(u.charAt(f));)f++;var E=!1;if(f<_){var I=u.charAt(f);I!=="-"&&I!=="+"||(f++,I==="-"&&(E=!0))}for(var J=new H,at=0,yt=0,St=0;!(f>=_);){var Bt=u.charAt(f);if(f++,F.isDigit(Bt)){var Yt=Bt-"0";J.selfMultiply(H.TEN),J.selfAdd(Yt),at++}else{if(Bt!=="."){if(Bt==="e"||Bt==="E"){var ee=u.substring(f);try{St=R.parseInt(ee)}catch(gi){throw gi instanceof Error?new Error("Invalid exponent "+ee+" in string "+u):gi}break}throw new Error("Unexpected character '"+Bt+"' at position "+f+" in string "+u)}yt=at}}var xe=J,Me=at-yt-St;if(Me===0)xe=J;else if(Me>0){var Be=H.TEN.pow(Me);xe=J.divide(Be)}else if(Me<0){var qe=H.TEN.pow(-Me);xe=J.multiply(qe)}return E?xe.negate():xe},H.createNaN=function(){return new H(O.NaN,O.NaN)},H.copy=function(u){return new H(u)},H.magnitude=function(u){var f=Math.abs(u),_=Math.log(f)/Math.log(10),E=Math.trunc(Math.floor(_));return 10*Math.pow(10,E)<=f&&(E+=1),E},H.stringOfChar=function(u,f){for(var _=new T,E=0;E<f;E++)_.append(u);return _.toString()},rt.PI.get=function(){return new H(3.141592653589793,12246467991473532e-32)},rt.TWO_PI.get=function(){return new H(6.283185307179586,24492935982947064e-32)},rt.PI_2.get=function(){return new H(1.5707963267948966,6123233995736766e-32)},rt.E.get=function(){return new H(2.718281828459045,14456468917292502e-32)},rt.NaN.get=function(){return new H(O.NaN,O.NaN)},rt.EPS.get=function(){return 123259516440783e-46},rt.SPLIT.get=function(){return 134217729},rt.MAX_PRINT_DIGITS.get=function(){return 32},rt.TEN.get=function(){return H.valueOf(10)},rt.ONE.get=function(){return H.valueOf(1)},rt.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},rt.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(H,rt);var ot=function(){},dt={DP_SAFE_EPSILON:{configurable:!0}};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(u,f,_){var E=ot.orientationIndexFilter(u,f,_);if(E<=1)return E;var I=H.valueOf(f.x).selfAdd(-u.x),J=H.valueOf(f.y).selfAdd(-u.y),at=H.valueOf(_.x).selfAdd(-f.x),yt=H.valueOf(_.y).selfAdd(-f.y);return I.selfMultiply(yt).selfSubtract(J.selfMultiply(at)).signum()},ot.signOfDet2x2=function(u,f,_,E){return u.multiply(E).selfSubtract(f.multiply(_)).signum()},ot.intersection=function(u,f,_,E){var I=H.valueOf(E.y).selfSubtract(_.y).selfMultiply(H.valueOf(f.x).selfSubtract(u.x)),J=H.valueOf(E.x).selfSubtract(_.x).selfMultiply(H.valueOf(f.y).selfSubtract(u.y)),at=I.subtract(J),yt=H.valueOf(E.x).selfSubtract(_.x).selfMultiply(H.valueOf(u.y).selfSubtract(_.y)),St=H.valueOf(E.y).selfSubtract(_.y).selfMultiply(H.valueOf(u.x).selfSubtract(_.x)),Bt=yt.subtract(St).selfDivide(at).doubleValue(),Yt=H.valueOf(u.x).selfAdd(H.valueOf(f.x).selfSubtract(u.x).selfMultiply(Bt)).doubleValue(),ee=H.valueOf(f.x).selfSubtract(u.x).selfMultiply(H.valueOf(u.y).selfSubtract(_.y)),xe=H.valueOf(f.y).selfSubtract(u.y).selfMultiply(H.valueOf(u.x).selfSubtract(_.x)),Me=ee.subtract(xe).selfDivide(at).doubleValue(),Be=H.valueOf(_.y).selfAdd(H.valueOf(E.y).selfSubtract(_.y).selfMultiply(Me)).doubleValue();return new G(Yt,Be)},ot.orientationIndexFilter=function(u,f,_){var E=null,I=(u.x-_.x)*(f.y-_.y),J=(u.y-_.y)*(f.x-_.x),at=I-J;if(I>0){if(J<=0)return ot.signum(at);E=I+J}else{if(!(I<0)||J>=0)return ot.signum(at);E=-I-J}var yt=ot.DP_SAFE_EPSILON*E;return at>=yt||-at>=yt?ot.signum(at):2},ot.signum=function(u){return u>0?1:u<0?-1:0},dt.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(ot,dt);var $=function(){},ct={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ct.X.get=function(){return 0},ct.Y.get=function(){return 1},ct.Z.get=function(){return 2},ct.M.get=function(){return 3},$.prototype.setOrdinate=function(u,f,_){},$.prototype.size=function(){},$.prototype.getOrdinate=function(u,f){},$.prototype.getCoordinate=function(){},$.prototype.getCoordinateCopy=function(u){},$.prototype.getDimension=function(){},$.prototype.getX=function(u){},$.prototype.clone=function(){},$.prototype.expandEnvelope=function(u){},$.prototype.copy=function(){},$.prototype.getY=function(u){},$.prototype.toCoordinateArray=function(){},$.prototype.interfaces_=function(){return[z]},$.prototype.getClass=function(){return $},Object.defineProperties($,ct);var W=function(){},V=function(u){function f(){u.call(this,"Projective point not representable on the Cartesian plane.")}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(W),it=function(){};it.arraycopy=function(u,f,_,E,I){for(var J=0,at=f;at<f+I;at++)_[E+J]=u[at],J++},it.getProperty=function(u){return{"line.separator":`
`}[u]};var mt=function u(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var f=arguments[0];this.x=f.x,this.y=f.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var _=arguments[0],E=arguments[1];this.x=_,this.y=E,this.w=1}else if(arguments[0]instanceof u&&arguments[1]instanceof u){var I=arguments[0],J=arguments[1];this.x=I.y*J.w-J.y*I.w,this.y=J.x*I.w-I.x*J.w,this.w=I.x*J.y-J.x*I.y}else if(arguments[0]instanceof G&&arguments[1]instanceof G){var at=arguments[0],yt=arguments[1];this.x=at.y-yt.y,this.y=yt.x-at.x,this.w=at.x*yt.y-yt.x*at.y}}else if(arguments.length===3){var St=arguments[0],Bt=arguments[1],Yt=arguments[2];this.x=St,this.y=Bt,this.w=Yt}else if(arguments.length===4){var ee=arguments[0],xe=arguments[1],Me=arguments[2],Be=arguments[3],qe=ee.y-xe.y,gi=xe.x-ee.x,qi=ee.x*xe.y-xe.x*ee.y,Fn=Me.y-Be.y,to=Be.x-Me.x,No=Me.x*Be.y-Be.x*Me.y;this.x=gi*No-to*qi,this.y=Fn*qi-qe*No,this.w=qe*to-Fn*gi}};mt.prototype.getY=function(){var u=this.y/this.w;if(O.isNaN(u)||O.isInfinite(u))throw new V;return u},mt.prototype.getX=function(){var u=this.x/this.w;if(O.isNaN(u)||O.isInfinite(u))throw new V;return u},mt.prototype.getCoordinate=function(){var u=new G;return u.x=this.getX(),u.y=this.getY(),u},mt.prototype.interfaces_=function(){return[]},mt.prototype.getClass=function(){return mt},mt.intersection=function(u,f,_,E){var I=u.y-f.y,J=f.x-u.x,at=u.x*f.y-f.x*u.y,yt=_.y-E.y,St=E.x-_.x,Bt=_.x*E.y-E.x*_.y,Yt=I*St-yt*J,ee=(J*Bt-St*at)/Yt,xe=(yt*at-I*Bt)/Yt;if(O.isNaN(ee)||O.isInfinite(ee)||O.isNaN(xe)||O.isInfinite(xe))throw new V;return new G(ee,xe)};var wt=function u(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof G){var f=arguments[0];this.init(f.x,f.x,f.y,f.y)}else if(arguments[0]instanceof u){var _=arguments[0];this.init(_)}}else if(arguments.length===2){var E=arguments[0],I=arguments[1];this.init(E.x,I.x,E.y,I.y)}else if(arguments.length===4){var J=arguments[0],at=arguments[1],yt=arguments[2],St=arguments[3];this.init(J,at,yt,St)}},_t={serialVersionUID:{configurable:!0}};wt.prototype.getArea=function(){return this.getWidth()*this.getHeight()},wt.prototype.equals=function(u){if(!(u instanceof wt))return!1;var f=u;return this.isNull()?f.isNull():this._maxx===f.getMaxX()&&this._maxy===f.getMaxY()&&this._minx===f.getMinX()&&this._miny===f.getMinY()},wt.prototype.intersection=function(u){if(this.isNull()||u.isNull()||!this.intersects(u))return new wt;var f=this._minx>u._minx?this._minx:u._minx,_=this._miny>u._miny?this._miny:u._miny,E=this._maxx<u._maxx?this._maxx:u._maxx,I=this._maxy<u._maxy?this._maxy:u._maxy;return new wt(f,E,_,I)},wt.prototype.isNull=function(){return this._maxx<this._minx},wt.prototype.getMaxX=function(){return this._maxx},wt.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof G){var u=arguments[0];return this.covers(u.x,u.y)}if(arguments[0]instanceof wt){var f=arguments[0];return!this.isNull()&&!f.isNull()&&f.getMinX()>=this._minx&&f.getMaxX()<=this._maxx&&f.getMinY()>=this._miny&&f.getMaxY()<=this._maxy}}else if(arguments.length===2){var _=arguments[0],E=arguments[1];return!this.isNull()&&_>=this._minx&&_<=this._maxx&&E>=this._miny&&E<=this._maxy}},wt.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof wt){var u=arguments[0];return!this.isNull()&&!u.isNull()&&!(u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny)}if(arguments[0]instanceof G){var f=arguments[0];return this.intersects(f.x,f.y)}}else if(arguments.length===2){var _=arguments[0],E=arguments[1];return!this.isNull()&&!(_>this._maxx||_<this._minx||E>this._maxy||E<this._miny)}},wt.prototype.getMinY=function(){return this._miny},wt.prototype.getMinX=function(){return this._minx},wt.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof G){var u=arguments[0];this.expandToInclude(u.x,u.y)}else if(arguments[0]instanceof wt){var f=arguments[0];if(f.isNull())return null;this.isNull()?(this._minx=f.getMinX(),this._maxx=f.getMaxX(),this._miny=f.getMinY(),this._maxy=f.getMaxY()):(f._minx<this._minx&&(this._minx=f._minx),f._maxx>this._maxx&&(this._maxx=f._maxx),f._miny<this._miny&&(this._miny=f._miny),f._maxy>this._maxy&&(this._maxy=f._maxy))}}else if(arguments.length===2){var _=arguments[0],E=arguments[1];this.isNull()?(this._minx=_,this._maxx=_,this._miny=E,this._maxy=E):(_<this._minx&&(this._minx=_),_>this._maxx&&(this._maxx=_),E<this._miny&&(this._miny=E),E>this._maxy&&(this._maxy=E))}},wt.prototype.minExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),f=this.getHeight();return u<f?u:f},wt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},wt.prototype.compareTo=function(u){var f=u;return this.isNull()?f.isNull()?0:-1:f.isNull()?1:this._minx<f._minx?-1:this._minx>f._minx?1:this._miny<f._miny?-1:this._miny>f._miny?1:this._maxx<f._maxx?-1:this._maxx>f._maxx?1:this._maxy<f._maxy?-1:this._maxy>f._maxy?1:0},wt.prototype.translate=function(u,f){if(this.isNull())return null;this.init(this.getMinX()+u,this.getMaxX()+u,this.getMinY()+f,this.getMaxY()+f)},wt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},wt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},wt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},wt.prototype.maxExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),f=this.getHeight();return u>f?u:f},wt.prototype.expandBy=function(){if(arguments.length===1){var u=arguments[0];this.expandBy(u,u)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this.isNull())return null;this._minx-=f,this._maxx+=f,this._miny-=_,this._maxy+=_,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},wt.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof wt){var u=arguments[0];return this.covers(u)}if(arguments[0]instanceof G){var f=arguments[0];return this.covers(f)}}else if(arguments.length===2){var _=arguments[0],E=arguments[1];return this.covers(_,E)}},wt.prototype.centre=function(){return this.isNull()?null:new G((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},wt.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof G){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof wt){var f=arguments[0];this._minx=f._minx,this._maxx=f._maxx,this._miny=f._miny,this._maxy=f._maxy}}else if(arguments.length===2){var _=arguments[0],E=arguments[1];this.init(_.x,E.x,_.y,E.y)}else if(arguments.length===4){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3];I<J?(this._minx=I,this._maxx=J):(this._minx=J,this._maxx=I),at<yt?(this._miny=at,this._maxy=yt):(this._miny=yt,this._maxy=at)}},wt.prototype.getMaxY=function(){return this._maxy},wt.prototype.distance=function(u){if(this.intersects(u))return 0;var f=0;this._maxx<u._minx?f=u._minx-this._maxx:this._minx>u._maxx&&(f=this._minx-u._maxx);var _=0;return this._maxy<u._miny?_=u._miny-this._maxy:this._miny>u._maxy&&(_=this._miny-u._maxy),f===0?_:_===0?f:Math.sqrt(f*f+_*_)},wt.prototype.hashCode=function(){var u=17;return u=37*u+G.hashCode(this._minx),u=37*u+G.hashCode(this._maxx),u=37*u+G.hashCode(this._miny),u=37*u+G.hashCode(this._maxy)},wt.prototype.interfaces_=function(){return[U,t]},wt.prototype.getClass=function(){return wt},wt.intersects=function(){if(arguments.length===3){var u=arguments[0],f=arguments[1],_=arguments[2];return _.x>=(u.x<f.x?u.x:f.x)&&_.x<=(u.x>f.x?u.x:f.x)&&_.y>=(u.y<f.y?u.y:f.y)&&_.y<=(u.y>f.y?u.y:f.y)}if(arguments.length===4){var E=arguments[0],I=arguments[1],J=arguments[2],at=arguments[3],yt=Math.min(J.x,at.x),St=Math.max(J.x,at.x),Bt=Math.min(E.x,I.x),Yt=Math.max(E.x,I.x);return!(Bt>St)&&!(Yt<yt)&&(yt=Math.min(J.y,at.y),St=Math.max(J.y,at.y),Bt=Math.min(E.y,I.y),Yt=Math.max(E.y,I.y),!(Bt>St)&&!(Yt<yt))}},_t.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(wt,_t);var Ct={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ft=function(u){this.geometryFactory=u||new Se};Ft.prototype.read=function(u){var f,_,E;u=u.replace(/[\n\r]/g," ");var I=Ct.typeStr.exec(u);if(u.search("EMPTY")!==-1&&((I=Ct.emptyTypeStr.exec(u))[2]=void 0),I&&(_=I[1].toLowerCase(),E=I[2],vt[_]&&(f=vt[_].apply(this,[E]))),f===void 0)throw new Error("Could not parse WKT "+u);return f},Ft.prototype.write=function(u){return this.extractGeometry(u)},Ft.prototype.extractGeometry=function(u){var f=u.getGeometryType().toLowerCase();if(!It[f])return null;var _=f.toUpperCase();return u.isEmpty()?_+" EMPTY":_+"("+It[f].apply(this,[u])+")"};var It={coordinate:function(u){return u.x+" "+u.y},point:function(u){return It.coordinate.call(this,u._coordinates._coordinates[0])},multipoint:function(u){for(var f=[],_=0,E=u._geometries.length;_<E;++_)f.push("("+It.point.apply(this,[u._geometries[_]])+")");return f.join(",")},linestring:function(u){for(var f=[],_=0,E=u._points._coordinates.length;_<E;++_)f.push(It.coordinate.apply(this,[u._points._coordinates[_]]));return f.join(",")},linearring:function(u){for(var f=[],_=0,E=u._points._coordinates.length;_<E;++_)f.push(It.coordinate.apply(this,[u._points._coordinates[_]]));return f.join(",")},multilinestring:function(u){for(var f=[],_=0,E=u._geometries.length;_<E;++_)f.push("("+It.linestring.apply(this,[u._geometries[_]])+")");return f.join(",")},polygon:function(u){var f=[];f.push("("+It.linestring.apply(this,[u._shell])+")");for(var _=0,E=u._holes.length;_<E;++_)f.push("("+It.linestring.apply(this,[u._holes[_]])+")");return f.join(",")},multipolygon:function(u){for(var f=[],_=0,E=u._geometries.length;_<E;++_)f.push("("+It.polygon.apply(this,[u._geometries[_]])+")");return f.join(",")},geometrycollection:function(u){for(var f=[],_=0,E=u._geometries.length;_<E;++_)f.push(this.extractGeometry(u._geometries[_]));return f.join(",")}},vt={point:function(u){if(u===void 0)return this.geometryFactory.createPoint();var f=u.trim().split(Ct.spaces);return this.geometryFactory.createPoint(new G(Number.parseFloat(f[0]),Number.parseFloat(f[1])))},multipoint:function(u){if(u===void 0)return this.geometryFactory.createMultiPoint();for(var f,_=u.trim().split(","),E=[],I=0,J=_.length;I<J;++I)f=_[I].replace(Ct.trimParens,"$1"),E.push(vt.point.apply(this,[f]));return this.geometryFactory.createMultiPoint(E)},linestring:function(u){if(u===void 0)return this.geometryFactory.createLineString();for(var f,_=u.trim().split(","),E=[],I=0,J=_.length;I<J;++I)f=_[I].trim().split(Ct.spaces),E.push(new G(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLineString(E)},linearring:function(u){if(u===void 0)return this.geometryFactory.createLinearRing();for(var f,_=u.trim().split(","),E=[],I=0,J=_.length;I<J;++I)f=_[I].trim().split(Ct.spaces),E.push(new G(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLinearRing(E)},multilinestring:function(u){if(u===void 0)return this.geometryFactory.createMultiLineString();for(var f,_=u.trim().split(Ct.parenComma),E=[],I=0,J=_.length;I<J;++I)f=_[I].replace(Ct.trimParens,"$1"),E.push(vt.linestring.apply(this,[f]));return this.geometryFactory.createMultiLineString(E)},polygon:function(u){if(u===void 0)return this.geometryFactory.createPolygon();for(var f,_,E,I,J=u.trim().split(Ct.parenComma),at=[],yt=0,St=J.length;yt<St;++yt)f=J[yt].replace(Ct.trimParens,"$1"),_=vt.linestring.apply(this,[f]),E=this.geometryFactory.createLinearRing(_._points),yt===0?I=E:at.push(E);return this.geometryFactory.createPolygon(I,at)},multipolygon:function(u){if(u===void 0)return this.geometryFactory.createMultiPolygon();for(var f,_=u.trim().split(Ct.doubleParenComma),E=[],I=0,J=_.length;I<J;++I)f=_[I].replace(Ct.trimParens,"$1"),E.push(vt.polygon.apply(this,[f]));return this.geometryFactory.createMultiPolygon(E)},geometrycollection:function(u){if(u===void 0)return this.geometryFactory.createGeometryCollection();for(var f=(u=u.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),_=[],E=0,I=f.length;E<I;++E)_.push(this.read(f[E]));return this.geometryFactory.createGeometryCollection(_)}},kt=function(u){this.parser=new Ft(u)};kt.prototype.write=function(u){return this.parser.write(u)},kt.toLineString=function(u,f){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+u.x+" "+u.y+", "+f.x+" "+f.y+" )"};var gt=function(u){function f(_){u.call(this,_),this.name="RuntimeException",this.message=_,this.stack=new u().stack}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f}(Error),ut=function(u){function f(){if(u.call(this),arguments.length===0)u.call(this);else if(arguments.length===1){var _=arguments[0];u.call(this,_)}}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(gt),Q=function(){};Q.prototype.interfaces_=function(){return[]},Q.prototype.getClass=function(){return Q},Q.shouldNeverReachHere=function(){if(arguments.length===0)Q.shouldNeverReachHere(null);else if(arguments.length===1){var u=arguments[0];throw new ut("Should never reach here"+(u!==null?": "+u:""))}},Q.isTrue=function(){var u,f;if(arguments.length===1)u=arguments[0],Q.isTrue(u,null);else if(arguments.length===2&&(u=arguments[0],f=arguments[1],!u))throw f===null?new ut:new ut(f)},Q.equals=function(){var u,f,_;if(arguments.length===2)u=arguments[0],f=arguments[1],Q.equals(u,f,null);else if(arguments.length===3&&(u=arguments[0],f=arguments[1],_=arguments[2],!f.equals(u)))throw new ut("Expected "+u+" but encountered "+f+(_!==null?": "+_:""))};var Y=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new G,this._intPt[1]=new G,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},et={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Y.prototype.getIndexAlongSegment=function(u,f){return this.computeIntLineIndex(),this._intLineIndex[u][f]},Y.prototype.getTopologySummary=function(){var u=new T;return this.isEndPoint()&&u.append(" endpoint"),this._isProper&&u.append(" proper"),this.isCollinear()&&u.append(" collinear"),u.toString()},Y.prototype.computeIntersection=function(u,f,_,E){this._inputLines[0][0]=u,this._inputLines[0][1]=f,this._inputLines[1][0]=_,this._inputLines[1][1]=E,this._result=this.computeIntersect(u,f,_,E)},Y.prototype.getIntersectionNum=function(){return this._result},Y.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var u=arguments[0];this.getEdgeDistance(u,0)>this.getEdgeDistance(u,1)?(this._intLineIndex[u][0]=0,this._intLineIndex[u][1]=1):(this._intLineIndex[u][0]=1,this._intLineIndex[u][1]=0)}},Y.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Y.prototype.setPrecisionModel=function(u){this._precisionModel=u},Y.prototype.isInteriorIntersection=function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var u=arguments[0],f=0;f<this._result;f++)if(!this._intPt[f].equals2D(this._inputLines[u][0])&&!this._intPt[f].equals2D(this._inputLines[u][1]))return!0;return!1}},Y.prototype.getIntersection=function(u){return this._intPt[u]},Y.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Y.prototype.hasIntersection=function(){return this._result!==Y.NO_INTERSECTION},Y.prototype.getEdgeDistance=function(u,f){return Y.computeEdgeDistance(this._intPt[f],this._inputLines[u][0],this._inputLines[u][1])},Y.prototype.isCollinear=function(){return this._result===Y.COLLINEAR_INTERSECTION},Y.prototype.toString=function(){return kt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+kt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Y.prototype.getEndpoint=function(u,f){return this._inputLines[u][f]},Y.prototype.isIntersection=function(u){for(var f=0;f<this._result;f++)if(this._intPt[f].equals2D(u))return!0;return!1},Y.prototype.getIntersectionAlongSegment=function(u,f){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[u][f]]},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.computeEdgeDistance=function(u,f,_){var E=Math.abs(_.x-f.x),I=Math.abs(_.y-f.y),J=-1;if(u.equals(f))J=0;else if(u.equals(_))J=E>I?E:I;else{var at=Math.abs(u.x-f.x),yt=Math.abs(u.y-f.y);(J=E>I?at:yt)!==0||u.equals(f)||(J=Math.max(at,yt))}return Q.isTrue(!(J===0&&!u.equals(f)),"Bad distance calculation"),J},Y.nonRobustComputeEdgeDistance=function(u,f,_){var E=u.x-f.x,I=u.y-f.y,J=Math.sqrt(E*E+I*I);return Q.isTrue(!(J===0&&!u.equals(f)),"Invalid distance calculation"),J},et.DONT_INTERSECT.get=function(){return 0},et.DO_INTERSECT.get=function(){return 1},et.COLLINEAR.get=function(){return 2},et.NO_INTERSECTION.get=function(){return 0},et.POINT_INTERSECTION.get=function(){return 1},et.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Y,et);var lt=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.isInSegmentEnvelopes=function(_){var E=new wt(this._inputLines[0][0],this._inputLines[0][1]),I=new wt(this._inputLines[1][0],this._inputLines[1][1]);return E.contains(_)&&I.contains(_)},f.prototype.computeIntersection=function(){if(arguments.length!==3)return u.prototype.computeIntersection.apply(this,arguments);var _=arguments[0],E=arguments[1],I=arguments[2];if(this._isProper=!1,wt.intersects(E,I,_)&&Et.orientationIndex(E,I,_)===0&&Et.orientationIndex(I,E,_)===0)return this._isProper=!0,(_.equals(E)||_.equals(I))&&(this._isProper=!1),this._result=u.POINT_INTERSECTION,null;this._result=u.NO_INTERSECTION},f.prototype.normalizeToMinimum=function(_,E,I,J,at){at.x=this.smallestInAbsValue(_.x,E.x,I.x,J.x),at.y=this.smallestInAbsValue(_.y,E.y,I.y,J.y),_.x-=at.x,_.y-=at.y,E.x-=at.x,E.y-=at.y,I.x-=at.x,I.y-=at.y,J.x-=at.x,J.y-=at.y},f.prototype.safeHCoordinateIntersection=function(_,E,I,J){var at=null;try{at=mt.intersection(_,E,I,J)}catch(yt){if(!(yt instanceof V))throw yt;at=f.nearestEndpoint(_,E,I,J)}return at},f.prototype.intersection=function(_,E,I,J){var at=this.intersectionWithNormalization(_,E,I,J);return this.isInSegmentEnvelopes(at)||(at=new G(f.nearestEndpoint(_,E,I,J))),this._precisionModel!==null&&this._precisionModel.makePrecise(at),at},f.prototype.smallestInAbsValue=function(_,E,I,J){var at=_,yt=Math.abs(at);return Math.abs(E)<yt&&(at=E,yt=Math.abs(E)),Math.abs(I)<yt&&(at=I,yt=Math.abs(I)),Math.abs(J)<yt&&(at=J),at},f.prototype.checkDD=function(_,E,I,J,at){var yt=ot.intersection(_,E,I,J),St=this.isInSegmentEnvelopes(yt);it.out.println("DD in env = "+St+"  --------------------- "+yt),at.distance(yt)>1e-4&&it.out.println("Distance = "+at.distance(yt))},f.prototype.intersectionWithNormalization=function(_,E,I,J){var at=new G(_),yt=new G(E),St=new G(I),Bt=new G(J),Yt=new G;this.normalizeToEnvCentre(at,yt,St,Bt,Yt);var ee=this.safeHCoordinateIntersection(at,yt,St,Bt);return ee.x+=Yt.x,ee.y+=Yt.y,ee},f.prototype.computeCollinearIntersection=function(_,E,I,J){var at=wt.intersects(_,E,I),yt=wt.intersects(_,E,J),St=wt.intersects(I,J,_),Bt=wt.intersects(I,J,E);return at&&yt?(this._intPt[0]=I,this._intPt[1]=J,u.COLLINEAR_INTERSECTION):St&&Bt?(this._intPt[0]=_,this._intPt[1]=E,u.COLLINEAR_INTERSECTION):at&&St?(this._intPt[0]=I,this._intPt[1]=_,!I.equals(_)||yt||Bt?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):at&&Bt?(this._intPt[0]=I,this._intPt[1]=E,!I.equals(E)||yt||St?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):yt&&St?(this._intPt[0]=J,this._intPt[1]=_,!J.equals(_)||at||Bt?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):yt&&Bt?(this._intPt[0]=J,this._intPt[1]=E,!J.equals(E)||at||St?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):u.NO_INTERSECTION},f.prototype.normalizeToEnvCentre=function(_,E,I,J,at){var yt=_.x<E.x?_.x:E.x,St=_.y<E.y?_.y:E.y,Bt=_.x>E.x?_.x:E.x,Yt=_.y>E.y?_.y:E.y,ee=I.x<J.x?I.x:J.x,xe=I.y<J.y?I.y:J.y,Me=I.x>J.x?I.x:J.x,Be=I.y>J.y?I.y:J.y,qe=((yt>ee?yt:ee)+(Bt<Me?Bt:Me))/2,gi=((St>xe?St:xe)+(Yt<Be?Yt:Be))/2;at.x=qe,at.y=gi,_.x-=at.x,_.y-=at.y,E.x-=at.x,E.y-=at.y,I.x-=at.x,I.y-=at.y,J.x-=at.x,J.y-=at.y},f.prototype.computeIntersect=function(_,E,I,J){if(this._isProper=!1,!wt.intersects(_,E,I,J))return u.NO_INTERSECTION;var at=Et.orientationIndex(_,E,I),yt=Et.orientationIndex(_,E,J);if(at>0&&yt>0||at<0&&yt<0)return u.NO_INTERSECTION;var St=Et.orientationIndex(I,J,_),Bt=Et.orientationIndex(I,J,E);return St>0&&Bt>0||St<0&&Bt<0?u.NO_INTERSECTION:at===0&&yt===0&&St===0&&Bt===0?this.computeCollinearIntersection(_,E,I,J):(at===0||yt===0||St===0||Bt===0?(this._isProper=!1,_.equals2D(I)||_.equals2D(J)?this._intPt[0]=_:E.equals2D(I)||E.equals2D(J)?this._intPt[0]=E:at===0?this._intPt[0]=new G(I):yt===0?this._intPt[0]=new G(J):St===0?this._intPt[0]=new G(_):Bt===0&&(this._intPt[0]=new G(E))):(this._isProper=!0,this._intPt[0]=this.intersection(_,E,I,J)),u.POINT_INTERSECTION)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.nearestEndpoint=function(_,E,I,J){var at=_,yt=Et.distancePointLine(_,I,J),St=Et.distancePointLine(E,I,J);return St<yt&&(yt=St,at=E),(St=Et.distancePointLine(I,_,E))<yt&&(yt=St,at=I),(St=Et.distancePointLine(J,_,E))<yt&&(yt=St,at=J),at},f}(Y),pt=function(){};pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt},pt.orientationIndex=function(u,f,_){var E=f.x-u.x,I=f.y-u.y,J=_.x-f.x,at=_.y-f.y;return pt.signOfDet2x2(E,I,J,at)},pt.signOfDet2x2=function(u,f,_,E){var I=null,J=null,at=null;if(I=1,u===0||E===0)return f===0||_===0?0:f>0?_>0?-I:I:_>0?I:-I;if(f===0||_===0)return E>0?u>0?I:-I:u>0?-I:I;if(f>0?E>0?f<=E||(I=-I,J=u,u=_,_=J,J=f,f=E,E=J):f<=-E?(I=-I,_=-_,E=-E):(J=u,u=-_,_=J,J=f,f=-E,E=J):E>0?-f<=E?(I=-I,u=-u,f=-f):(J=-u,u=_,_=J,J=-f,f=E,E=J):f>=E?(u=-u,f=-f,_=-_,E=-E):(I=-I,J=-u,u=-_,_=J,J=-f,f=-E,E=J),u>0){if(!(_>0)||!(u<=_))return I}else{if(_>0||!(u>=_))return-I;I=-I,u=-u,_=-_}for(;;){if(at=Math.floor(_/u),_-=at*u,(E-=at*f)<0)return-I;if(E>f)return I;if(u>_+_){if(f<E+E)return I}else{if(f>E+E)return-I;_=u-_,E=f-E,I=-I}if(E===0)return _===0?0:-I;if(_===0||(at=Math.floor(u/_),u-=at*_,(f-=at*E)<0))return I;if(f>E)return-I;if(_>u+u){if(E<f+f)return-I}else{if(E>f+f)return I;u=_-u,f=E-f,I=-I}if(f===0)return u===0?0:I;if(u===0)return-I}};var bt=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var u=arguments[0];this._p=u};bt.prototype.countSegment=function(u,f){if(u.x<this._p.x&&f.x<this._p.x)return null;if(this._p.x===f.x&&this._p.y===f.y)return this._isPointOnSegment=!0,null;if(u.y===this._p.y&&f.y===this._p.y){var _=u.x,E=f.x;return _>E&&(_=f.x,E=u.x),this._p.x>=_&&this._p.x<=E&&(this._isPointOnSegment=!0),null}if(u.y>this._p.y&&f.y<=this._p.y||f.y>this._p.y&&u.y<=this._p.y){var I=u.x-this._p.x,J=u.y-this._p.y,at=f.x-this._p.x,yt=f.y-this._p.y,St=pt.signOfDet2x2(I,J,at,yt);if(St===0)return this._isPointOnSegment=!0,null;yt<J&&(St=-St),St>0&&this._crossingCount++}},bt.prototype.isPointInPolygon=function(){return this.getLocation()!==N.EXTERIOR},bt.prototype.getLocation=function(){return this._isPointOnSegment?N.BOUNDARY:this._crossingCount%2==1?N.INTERIOR:N.EXTERIOR},bt.prototype.isOnSegment=function(){return this._isPointOnSegment},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.locatePointInRing=function(){if(arguments[0]instanceof G&&w(arguments[1],$)){for(var u=arguments[0],f=arguments[1],_=new bt(u),E=new G,I=new G,J=1;J<f.size();J++)if(f.getCoordinate(J,E),f.getCoordinate(J-1,I),_.countSegment(E,I),_.isOnSegment())return _.getLocation();return _.getLocation()}if(arguments[0]instanceof G&&arguments[1]instanceof Array){for(var at=arguments[0],yt=arguments[1],St=new bt(at),Bt=1;Bt<yt.length;Bt++){var Yt=yt[Bt],ee=yt[Bt-1];if(St.countSegment(Yt,ee),St.isOnSegment())return St.getLocation()}return St.getLocation()}};var Et=function(){},Ot={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Et.prototype.interfaces_=function(){return[]},Et.prototype.getClass=function(){return Et},Et.orientationIndex=function(u,f,_){return ot.orientationIndex(u,f,_)},Et.signedArea=function(){if(arguments[0]instanceof Array){var u=arguments[0];if(u.length<3)return 0;for(var f=0,_=u[0].x,E=1;E<u.length-1;E++){var I=u[E].x-_,J=u[E+1].y;f+=I*(u[E-1].y-J)}return f/2}if(w(arguments[0],$)){var at=arguments[0],yt=at.size();if(yt<3)return 0;var St=new G,Bt=new G,Yt=new G;at.getCoordinate(0,Bt),at.getCoordinate(1,Yt);var ee=Bt.x;Yt.x-=ee;for(var xe=0,Me=1;Me<yt-1;Me++)St.y=Bt.y,Bt.x=Yt.x,Bt.y=Yt.y,at.getCoordinate(Me+1,Yt),Yt.x-=ee,xe+=Bt.x*(St.y-Yt.y);return xe/2}},Et.distanceLineLine=function(u,f,_,E){if(u.equals(f))return Et.distancePointLine(u,_,E);if(_.equals(E))return Et.distancePointLine(E,u,f);var I=!1;if(wt.intersects(u,f,_,E)){var J=(f.x-u.x)*(E.y-_.y)-(f.y-u.y)*(E.x-_.x);if(J===0)I=!0;else{var at=(u.y-_.y)*(E.x-_.x)-(u.x-_.x)*(E.y-_.y),yt=((u.y-_.y)*(f.x-u.x)-(u.x-_.x)*(f.y-u.y))/J,St=at/J;(St<0||St>1||yt<0||yt>1)&&(I=!0)}}else I=!0;return I?C.min(Et.distancePointLine(u,_,E),Et.distancePointLine(f,_,E),Et.distancePointLine(_,u,f),Et.distancePointLine(E,u,f)):0},Et.isPointInRing=function(u,f){return Et.locatePointInRing(u,f)!==N.EXTERIOR},Et.computeLength=function(u){var f=u.size();if(f<=1)return 0;var _=0,E=new G;u.getCoordinate(0,E);for(var I=E.x,J=E.y,at=1;at<f;at++){u.getCoordinate(at,E);var yt=E.x,St=E.y,Bt=yt-I,Yt=St-J;_+=Math.sqrt(Bt*Bt+Yt*Yt),I=yt,J=St}return _},Et.isCCW=function(u){var f=u.length-1;if(f<3)throw new S("Ring has fewer than 4 points, so orientation cannot be determined");for(var _=u[0],E=0,I=1;I<=f;I++){var J=u[I];J.y>_.y&&(_=J,E=I)}var at=E;do(at-=1)<0&&(at=f);while(u[at].equals2D(_)&&at!==E);var yt=E;do yt=(yt+1)%f;while(u[yt].equals2D(_)&&yt!==E);var St=u[at],Bt=u[yt];if(St.equals2D(_)||Bt.equals2D(_)||St.equals2D(Bt))return!1;var Yt=Et.computeOrientation(St,_,Bt),ee=!1;return ee=Yt===0?St.x>Bt.x:Yt>0,ee},Et.locatePointInRing=function(u,f){return bt.locatePointInRing(u,f)},Et.distancePointLinePerpendicular=function(u,f,_){var E=(_.x-f.x)*(_.x-f.x)+(_.y-f.y)*(_.y-f.y),I=((f.y-u.y)*(_.x-f.x)-(f.x-u.x)*(_.y-f.y))/E;return Math.abs(I)*Math.sqrt(E)},Et.computeOrientation=function(u,f,_){return Et.orientationIndex(u,f,_)},Et.distancePointLine=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];if(f.length===0)throw new S("Line array must contain at least one vertex");for(var _=u.distance(f[0]),E=0;E<f.length-1;E++){var I=Et.distancePointLine(u,f[E],f[E+1]);I<_&&(_=I)}return _}if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];if(at.x===yt.x&&at.y===yt.y)return J.distance(at);var St=(yt.x-at.x)*(yt.x-at.x)+(yt.y-at.y)*(yt.y-at.y),Bt=((J.x-at.x)*(yt.x-at.x)+(J.y-at.y)*(yt.y-at.y))/St;if(Bt<=0)return J.distance(at);if(Bt>=1)return J.distance(yt);var Yt=((at.y-J.y)*(yt.x-at.x)-(at.x-J.x)*(yt.y-at.y))/St;return Math.abs(Yt)*Math.sqrt(St)}},Et.isOnLine=function(u,f){for(var _=new lt,E=1;E<f.length;E++){var I=f[E-1],J=f[E];if(_.computeIntersection(u,I,J),_.hasIntersection())return!0}return!1},Ot.CLOCKWISE.get=function(){return-1},Ot.RIGHT.get=function(){return Et.CLOCKWISE},Ot.COUNTERCLOCKWISE.get=function(){return 1},Ot.LEFT.get=function(){return Et.COUNTERCLOCKWISE},Ot.COLLINEAR.get=function(){return 0},Ot.STRAIGHT.get=function(){return Et.COLLINEAR},Object.defineProperties(Et,Ot);var zt=function(){};zt.prototype.filter=function(u){},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var Gt=function(){var u=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=u,this._SRID=u.getSRID()},Jt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Gt.prototype.isGeometryCollection=function(){return this.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION},Gt.prototype.getFactory=function(){return this._factory},Gt.prototype.getGeometryN=function(u){return this},Gt.prototype.getArea=function(){return 0},Gt.prototype.isRectangle=function(){return!1},Gt.prototype.equals=function(){if(arguments[0]instanceof Gt){var u=arguments[0];return u!==null&&this.equalsTopo(u)}if(arguments[0]instanceof Object){var f=arguments[0];if(!(f instanceof Gt))return!1;var _=f;return this.equalsExact(_)}},Gt.prototype.equalsExact=function(u){return this===u||this.equalsExact(u,0)},Gt.prototype.geometryChanged=function(){this.apply(Gt.geometryChangedFilter)},Gt.prototype.geometryChangedAction=function(){this._envelope=null},Gt.prototype.equalsNorm=function(u){return u!==null&&this.norm().equalsExact(u.norm())},Gt.prototype.getLength=function(){return 0},Gt.prototype.getNumGeometries=function(){return 1},Gt.prototype.compareTo=function(){if(arguments.length===1){var u=arguments[0],f=u;return this.getSortIndex()!==f.getSortIndex()?this.getSortIndex()-f.getSortIndex():this.isEmpty()&&f.isEmpty()?0:this.isEmpty()?-1:f.isEmpty()?1:this.compareToSameClass(u)}if(arguments.length===2){var _=arguments[0],E=arguments[1];return this.getSortIndex()!==_.getSortIndex()?this.getSortIndex()-_.getSortIndex():this.isEmpty()&&_.isEmpty()?0:this.isEmpty()?-1:_.isEmpty()?1:this.compareToSameClass(_,E)}},Gt.prototype.getUserData=function(){return this._userData},Gt.prototype.getSRID=function(){return this._SRID},Gt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Gt.prototype.checkNotGeometryCollection=function(u){if(u.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION)throw new S("This method does not support GeometryCollection arguments")},Gt.prototype.equal=function(u,f,_){return _===0?u.equals(f):u.distance(f)<=_},Gt.prototype.norm=function(){var u=this.copy();return u.normalize(),u},Gt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Gt.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new wt(this._envelope)},Gt.prototype.setSRID=function(u){this._SRID=u},Gt.prototype.setUserData=function(u){this._userData=u},Gt.prototype.compare=function(u,f){for(var _=u.iterator(),E=f.iterator();_.hasNext()&&E.hasNext();){var I=_.next(),J=E.next(),at=I.compareTo(J);if(at!==0)return at}return _.hasNext()?1:E.hasNext()?-1:0},Gt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Gt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Gt.SORTINDEX_MULTIPOINT||this.getSortIndex()===Gt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Gt.SORTINDEX_MULTIPOLYGON},Gt.prototype.interfaces_=function(){return[z,U,t]},Gt.prototype.getClass=function(){return Gt},Gt.hasNonEmptyElements=function(u){for(var f=0;f<u.length;f++)if(!u[f].isEmpty())return!0;return!1},Gt.hasNullElements=function(u){for(var f=0;f<u.length;f++)if(u[f]===null)return!0;return!1},Jt.serialVersionUID.get=function(){return 8763622679187377e3},Jt.SORTINDEX_POINT.get=function(){return 0},Jt.SORTINDEX_MULTIPOINT.get=function(){return 1},Jt.SORTINDEX_LINESTRING.get=function(){return 2},Jt.SORTINDEX_LINEARRING.get=function(){return 3},Jt.SORTINDEX_MULTILINESTRING.get=function(){return 4},Jt.SORTINDEX_POLYGON.get=function(){return 5},Jt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Jt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Jt.geometryChangedFilter.get=function(){return Kt},Object.defineProperties(Gt,Jt);var Kt=function(){};Kt.interfaces_=function(){return[zt]},Kt.filter=function(u){u.geometryChangedAction()};var re=function(){};re.prototype.filter=function(u){},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re};var Xt=function(){},Ut={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Xt.prototype.isInBoundary=function(u){},Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Ut.Mod2BoundaryNodeRule.get=function(){return _e},Ut.EndPointBoundaryNodeRule.get=function(){return le},Ut.MultiValentEndPointBoundaryNodeRule.get=function(){return ye},Ut.MonoValentEndPointBoundaryNodeRule.get=function(){return Ze},Ut.MOD2_BOUNDARY_RULE.get=function(){return new _e},Ut.ENDPOINT_BOUNDARY_RULE.get=function(){return new le},Ut.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ye},Ut.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ze},Ut.OGC_SFS_BOUNDARY_RULE.get=function(){return Xt.MOD2_BOUNDARY_RULE},Object.defineProperties(Xt,Ut);var _e=function(){};_e.prototype.isInBoundary=function(u){return u%2==1},_e.prototype.interfaces_=function(){return[Xt]},_e.prototype.getClass=function(){return _e};var le=function(){};le.prototype.isInBoundary=function(u){return u>0},le.prototype.interfaces_=function(){return[Xt]},le.prototype.getClass=function(){return le};var ye=function(){};ye.prototype.isInBoundary=function(u){return u>1},ye.prototype.interfaces_=function(){return[Xt]},ye.prototype.getClass=function(){return ye};var Ze=function(){};Ze.prototype.isInBoundary=function(u){return u===1},Ze.prototype.interfaces_=function(){return[Xt]},Ze.prototype.getClass=function(){return Ze};var ce=function(){};ce.prototype.add=function(){},ce.prototype.addAll=function(){},ce.prototype.isEmpty=function(){},ce.prototype.iterator=function(){},ce.prototype.size=function(){},ce.prototype.toArray=function(){},ce.prototype.remove=function(){},(e.prototype=new Error).name="IndexOutOfBoundsException";var ke=function(){};ke.prototype.hasNext=function(){},ke.prototype.next=function(){},ke.prototype.remove=function(){};var He=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.get=function(){},f.prototype.set=function(){},f.prototype.isEmpty=function(){},f}(ce);(r.prototype=new Error).name="NoSuchElementException";var $t=function(u){function f(){u.call(this),this.array_=[],arguments[0]instanceof ce&&this.addAll(arguments[0])}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.ensureCapacity=function(){},f.prototype.interfaces_=function(){return[u,ce]},f.prototype.add=function(_){return arguments.length===1?this.array_.push(_):this.array_.splice(arguments[0],arguments[1]),!0},f.prototype.clear=function(){this.array_=[]},f.prototype.addAll=function(_){for(var E=_.iterator();E.hasNext();)this.add(E.next());return!0},f.prototype.set=function(_,E){var I=this.array_[_];return this.array_[_]=E,I},f.prototype.iterator=function(){return new Te(this)},f.prototype.get=function(_){if(_<0||_>=this.size())throw new e;return this.array_[_]},f.prototype.isEmpty=function(){return this.array_.length===0},f.prototype.size=function(){return this.array_.length},f.prototype.toArray=function(){for(var _=[],E=0,I=this.array_.length;E<I;E++)_.push(this.array_[E]);return _},f.prototype.remove=function(_){for(var E=!1,I=0,J=this.array_.length;I<J;I++)if(this.array_[I]===_){this.array_.splice(I,1),E=!0;break}return E},f}(He),Te=function(u){function f(_){u.call(this),this.arrayList_=_,this.position_=0}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},f.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},f.prototype.set=function(_){return this.arrayList_.set(this.position_-1,_)},f.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},f}(ke),br=function(u){function f(){if(u.call(this),arguments.length!==0){if(arguments.length===1){var E=arguments[0];this.ensureCapacity(E.length),this.add(E,!0)}else if(arguments.length===2){var I=arguments[0],J=arguments[1];this.ensureCapacity(I.length),this.add(I,J)}}}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={coordArrayType:{configurable:!0}};return _.coordArrayType.get=function(){return new Array(0).fill(null)},f.prototype.getCoordinate=function(E){return this.get(E)},f.prototype.addAll=function(){if(arguments.length===2){for(var E=arguments[0],I=arguments[1],J=!1,at=E.iterator();at.hasNext();)this.add(at.next(),I),J=!0;return J}return u.prototype.addAll.apply(this,arguments)},f.prototype.clone=function(){for(var E=u.prototype.clone.call(this),I=0;I<this.size();I++)E.add(I,this.get(I).copy());return E},f.prototype.toCoordinateArray=function(){return this.toArray(f.coordArrayType)},f.prototype.add=function(){if(arguments.length===1){var E=arguments[0];u.prototype.add.call(this,E)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var I=arguments[0],J=arguments[1];return this.add(I,J,!0),!0}if(arguments[0]instanceof G&&typeof arguments[1]=="boolean"){var at=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(at))return null;u.prototype.add.call(this,at)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var yt=arguments[0],St=arguments[1];return this.add(yt,St),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Bt=arguments[0],Yt=arguments[1];if(arguments[2])for(var ee=0;ee<Bt.length;ee++)this.add(Bt[ee],Yt);else for(var xe=Bt.length-1;xe>=0;xe--)this.add(Bt[xe],Yt);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof G){var Me=arguments[0],Be=arguments[1];if(!arguments[2]){var qe=this.size();if(qe>0&&(Me>0&&this.get(Me-1).equals2D(Be)||Me<qe&&this.get(Me).equals2D(Be)))return null}u.prototype.add.call(this,Me,Be)}}else if(arguments.length===4){var gi=arguments[0],qi=arguments[1],Fn=arguments[2],to=arguments[3],No=1;Fn>to&&(No=-1);for(var Gh=Fn;Gh!==to;Gh+=No)this.add(gi[Gh],qi);return!0}},f.prototype.closeRing=function(){this.size()>0&&this.add(new G(this.get(0)),!1)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},Object.defineProperties(f,_),f}($t),ue=function(){},Fe={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Fe.ForwardComparator.get=function(){return ar},Fe.BidirectionalComparator.get=function(){return Le},Fe.coordArrayType.get=function(){return new Array(0).fill(null)},ue.prototype.interfaces_=function(){return[]},ue.prototype.getClass=function(){return ue},ue.isRing=function(u){return!(u.length<4)&&!!u[0].equals2D(u[u.length-1])},ue.ptNotInList=function(u,f){for(var _=0;_<u.length;_++){var E=u[_];if(ue.indexOf(E,f)<0)return E}return null},ue.scroll=function(u,f){var _=ue.indexOf(f,u);if(_<0)return null;var E=new Array(u.length).fill(null);it.arraycopy(u,_,E,0,u.length-_),it.arraycopy(u,0,E,u.length-_,_),it.arraycopy(E,0,u,0,u.length)},ue.equals=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];if(u===f)return!0;if(u===null||f===null||u.length!==f.length)return!1;for(var _=0;_<u.length;_++)if(!u[_].equals(f[_]))return!1;return!0}if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];if(E===I)return!0;if(E===null||I===null||E.length!==I.length)return!1;for(var at=0;at<E.length;at++)if(J.compare(E[at],I[at])!==0)return!1;return!0}},ue.intersection=function(u,f){for(var _=new br,E=0;E<u.length;E++)f.intersects(u[E])&&_.add(u[E],!0);return _.toCoordinateArray()},ue.hasRepeatedPoints=function(u){for(var f=1;f<u.length;f++)if(u[f-1].equals(u[f]))return!0;return!1},ue.removeRepeatedPoints=function(u){return ue.hasRepeatedPoints(u)?new br(u,!1).toCoordinateArray():u},ue.reverse=function(u){for(var f=u.length-1,_=Math.trunc(f/2),E=0;E<=_;E++){var I=u[E];u[E]=u[f-E],u[f-E]=I}},ue.removeNull=function(u){for(var f=0,_=0;_<u.length;_++)u[_]!==null&&f++;var E=new Array(f).fill(null);if(f===0)return E;for(var I=0,J=0;J<u.length;J++)u[J]!==null&&(E[I++]=u[J]);return E},ue.copyDeep=function(){if(arguments.length===1){for(var u=arguments[0],f=new Array(u.length).fill(null),_=0;_<u.length;_++)f[_]=new G(u[_]);return f}if(arguments.length===5)for(var E=arguments[0],I=arguments[1],J=arguments[2],at=arguments[3],yt=arguments[4],St=0;St<yt;St++)J[at+St]=new G(E[I+St])},ue.isEqualReversed=function(u,f){for(var _=0;_<u.length;_++){var E=u[_],I=f[u.length-_-1];if(E.compareTo(I)!==0)return!1}return!0},ue.envelope=function(u){for(var f=new wt,_=0;_<u.length;_++)f.expandToInclude(u[_]);return f},ue.toCoordinateArray=function(u){return u.toArray(ue.coordArrayType)},ue.atLeastNCoordinatesOrNothing=function(u,f){return f.length>=u?f:[]},ue.indexOf=function(u,f){for(var _=0;_<f.length;_++)if(u.equals(f[_]))return _;return-1},ue.increasingDirection=function(u){for(var f=0;f<Math.trunc(u.length/2);f++){var _=u.length-1-f,E=u[f].compareTo(u[_]);if(E!==0)return E}return 1},ue.compare=function(u,f){for(var _=0;_<u.length&&_<f.length;){var E=u[_].compareTo(f[_]);if(E!==0)return E;_++}return _<f.length?-1:_<u.length?1:0},ue.minCoordinate=function(u){for(var f=null,_=0;_<u.length;_++)(f===null||f.compareTo(u[_])>0)&&(f=u[_]);return f},ue.extract=function(u,f,_){f=C.clamp(f,0,u.length);var E=(_=C.clamp(_,-1,u.length))-f+1;_<0&&(E=0),f>=u.length&&(E=0),_<f&&(E=0);var I=new Array(E).fill(null);if(E===0)return I;for(var J=0,at=f;at<=_;at++)I[J++]=u[at];return I},Object.defineProperties(ue,Fe);var ar=function(){};ar.prototype.compare=function(u,f){return ue.compare(u,f)},ar.prototype.interfaces_=function(){return[q]},ar.prototype.getClass=function(){return ar};var Le=function(){};Le.prototype.compare=function(u,f){var _=u,E=f;if(_.length<E.length)return-1;if(_.length>E.length)return 1;if(_.length===0)return 0;var I=ue.compare(_,E);return ue.isEqualReversed(_,E)?0:I},Le.prototype.OLDcompare=function(u,f){var _=u,E=f;if(_.length<E.length)return-1;if(_.length>E.length)return 1;if(_.length===0)return 0;for(var I=ue.increasingDirection(_),J=ue.increasingDirection(E),at=I>0?0:_.length-1,yt=J>0?0:_.length-1,St=0;St<_.length;St++){var Bt=_[at].compareTo(E[yt]);if(Bt!==0)return Bt;at+=I,yt+=J}return 0},Le.prototype.interfaces_=function(){return[q]},Le.prototype.getClass=function(){return Le};var Oe=function(){};Oe.prototype.get=function(){},Oe.prototype.put=function(){},Oe.prototype.size=function(){},Oe.prototype.values=function(){},Oe.prototype.entrySet=function(){};var ri=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f}(Oe);(i.prototype=new Error).name="OperationNotSupported",(s.prototype=new ce).contains=function(){};var We=function(u){function f(){u.call(this),this.array_=[],arguments[0]instanceof ce&&this.addAll(arguments[0])}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.contains=function(_){for(var E=0,I=this.array_.length;E<I;E++)if(this.array_[E]===_)return!0;return!1},f.prototype.add=function(_){return!this.contains(_)&&(this.array_.push(_),!0)},f.prototype.addAll=function(_){for(var E=_.iterator();E.hasNext();)this.add(E.next());return!0},f.prototype.remove=function(_){throw new Error},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return this.array_.length===0},f.prototype.toArray=function(){for(var _=[],E=0,I=this.array_.length;E<I;E++)_.push(this.array_[E]);return _},f.prototype.iterator=function(){return new At(this)},f}(s),At=function(u){function f(_){u.call(this),this.hashSet_=_,this.position_=0}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},f.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},f.prototype.remove=function(){throw new i},f}(ke),qt=0;(d.prototype=new ri).get=function(u){for(var f=this.root_;f!==null;){var _=u.compareTo(f.key);if(_<0)f=f.left;else{if(!(_>0))return f.value;f=f.right}}return null},d.prototype.put=function(u,f){if(this.root_===null)return this.root_={key:u,value:f,left:null,right:null,parent:null,color:qt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var _,E,I=this.root_;do if(_=I,(E=u.compareTo(I.key))<0)I=I.left;else{if(!(E>0)){var J=I.value;return I.value=f,J}I=I.right}while(I!==null);var at={key:u,left:null,right:null,value:f,parent:_,color:qt,getValue:function(){return this.value},getKey:function(){return this.key}};return E<0?_.left=at:_.right=at,this.fixAfterInsertion(at),this.size_++,null},d.prototype.fixAfterInsertion=function(u){for(u.color=1;u!=null&&u!==this.root_&&u.parent.color===1;)if(a(u)===c(a(a(u)))){var f=h(a(a(u)));o(f)===1?(l(a(u),qt),l(f,qt),l(a(a(u)),1),u=a(a(u))):(u===h(a(u))&&(u=a(u),this.rotateLeft(u)),l(a(u),qt),l(a(a(u)),1),this.rotateRight(a(a(u))))}else{var _=c(a(a(u)));o(_)===1?(l(a(u),qt),l(_,qt),l(a(a(u)),1),u=a(a(u))):(u===c(a(u))&&(u=a(u),this.rotateRight(u)),l(a(u),qt),l(a(a(u)),1),this.rotateLeft(a(a(u))))}this.root_.color=qt},d.prototype.values=function(){var u=new $t,f=this.getFirstEntry();if(f!==null)for(u.add(f.value);(f=d.successor(f))!==null;)u.add(f.value);return u},d.prototype.entrySet=function(){var u=new We,f=this.getFirstEntry();if(f!==null)for(u.add(f);(f=d.successor(f))!==null;)u.add(f);return u},d.prototype.rotateLeft=function(u){if(u!=null){var f=u.right;u.right=f.left,f.left!=null&&(f.left.parent=u),f.parent=u.parent,u.parent===null?this.root_=f:u.parent.left===u?u.parent.left=f:u.parent.right=f,f.left=u,u.parent=f}},d.prototype.rotateRight=function(u){if(u!=null){var f=u.left;u.left=f.right,f.right!=null&&(f.right.parent=u),f.parent=u.parent,u.parent===null?this.root_=f:u.parent.right===u?u.parent.right=f:u.parent.left=f,f.right=u,u.parent=f}},d.prototype.getFirstEntry=function(){var u=this.root_;if(u!=null)for(;u.left!=null;)u=u.left;return u},d.successor=function(u){if(u===null)return null;if(u.right!==null){for(var f=u.right;f.left!==null;)f=f.left;return f}for(var _=u.parent,E=u;_!==null&&E===_.right;)E=_,_=_.parent;return _},d.prototype.size=function(){return this.size_};var jt=function(){};jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},p.prototype=new s,(g.prototype=new p).contains=function(u){for(var f=0,_=this.array_.length;f<_;f++)if(this.array_[f].compareTo(u)===0)return!0;return!1},g.prototype.add=function(u){if(this.contains(u))return!1;for(var f=0,_=this.array_.length;f<_;f++)if(this.array_[f].compareTo(u)===1)return this.array_.splice(f,0,u),!0;return this.array_.push(u),!0},g.prototype.addAll=function(u){for(var f=u.iterator();f.hasNext();)this.add(f.next());return!0},g.prototype.remove=function(u){throw new i},g.prototype.size=function(){return this.array_.length},g.prototype.isEmpty=function(){return this.array_.length===0},g.prototype.toArray=function(){for(var u=[],f=0,_=this.array_.length;f<_;f++)u.push(this.array_[f]);return u},g.prototype.iterator=function(){return new ae(this)};var ae=function(u){this.treeSet_=u,this.position_=0};ae.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},ae.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ae.prototype.remove=function(){throw new i};var Qe=function(){};Qe.sort=function(){var u,f,_,E,I=arguments[0];if(arguments.length===1)E=function(at,yt){return at.compareTo(yt)},I.sort(E);else if(arguments.length===2)_=arguments[1],E=function(at,yt){return _.compare(at,yt)},I.sort(E);else if(arguments.length===3){(f=I.slice(arguments[1],arguments[2])).sort();var J=I.slice(0,arguments[1]).concat(f,I.slice(arguments[2],I.length));for(I.splice(0,I.length),u=0;u<J.length;u++)I.push(J[u])}else if(arguments.length===4)for(f=I.slice(arguments[1],arguments[2]),_=arguments[3],E=function(at,yt){return _.compare(at,yt)},f.sort(E),J=I.slice(0,arguments[1]).concat(f,I.slice(arguments[2],I.length)),I.splice(0,I.length),u=0;u<J.length;u++)I.push(J[u])},Qe.asList=function(u){for(var f=new $t,_=0,E=u.length;_<E;_++)f.add(u[_]);return f};var se=function(){},ve={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};ve.P.get=function(){return 0},ve.L.get=function(){return 1},ve.A.get=function(){return 2},ve.FALSE.get=function(){return-1},ve.TRUE.get=function(){return-2},ve.DONTCARE.get=function(){return-3},ve.SYM_FALSE.get=function(){return"F"},ve.SYM_TRUE.get=function(){return"T"},ve.SYM_DONTCARE.get=function(){return"*"},ve.SYM_P.get=function(){return"0"},ve.SYM_L.get=function(){return"1"},ve.SYM_A.get=function(){return"2"},se.prototype.interfaces_=function(){return[]},se.prototype.getClass=function(){return se},se.toDimensionSymbol=function(u){switch(u){case se.FALSE:return se.SYM_FALSE;case se.TRUE:return se.SYM_TRUE;case se.DONTCARE:return se.SYM_DONTCARE;case se.P:return se.SYM_P;case se.L:return se.SYM_L;case se.A:return se.SYM_A}throw new S("Unknown dimension value: "+u)},se.toDimensionValue=function(u){switch(F.toUpperCase(u)){case se.SYM_FALSE:return se.FALSE;case se.SYM_TRUE:return se.TRUE;case se.SYM_DONTCARE:return se.DONTCARE;case se.SYM_P:return se.P;case se.SYM_L:return se.L;case se.SYM_A:return se.A}throw new S("Unknown dimension symbol: "+u)},Object.defineProperties(se,ve);var $e=function(){};$e.prototype.filter=function(u){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ae=function(){};Ae.prototype.filter=function(u,f){},Ae.prototype.isDone=function(){},Ae.prototype.isGeometryChanged=function(){},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae};var fe=function(u){function f(E,I){if(u.call(this,I),this._geometries=E||[],u.hasNullElements(this._geometries))throw new S("geometries must not contain null elements")}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){for(var E=new wt,I=0;I<this._geometries.length;I++)E.expandToInclude(this._geometries[I].getEnvelopeInternal());return E},f.prototype.getGeometryN=function(E){return this._geometries[E]},f.prototype.getSortIndex=function(){return u.SORTINDEX_GEOMETRYCOLLECTION},f.prototype.getCoordinates=function(){for(var E=new Array(this.getNumPoints()).fill(null),I=-1,J=0;J<this._geometries.length;J++)for(var at=this._geometries[J].getCoordinates(),yt=0;yt<at.length;yt++)E[++I]=at[yt];return E},f.prototype.getArea=function(){for(var E=0,I=0;I<this._geometries.length;I++)E+=this._geometries[I].getArea();return E},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];if(!this.isEquivalentClass(E))return!1;var J=E;if(this._geometries.length!==J._geometries.length)return!1;for(var at=0;at<this._geometries.length;at++)if(!this._geometries[at].equalsExact(J._geometries[at],I))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){for(var E=0;E<this._geometries.length;E++)this._geometries[E].normalize();Qe.sort(this._geometries)},f.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},f.prototype.getBoundaryDimension=function(){for(var E=se.FALSE,I=0;I<this._geometries.length;I++)E=Math.max(E,this._geometries[I].getBoundaryDimension());return E},f.prototype.getDimension=function(){for(var E=se.FALSE,I=0;I<this._geometries.length;I++)E=Math.max(E,this._geometries[I].getDimension());return E},f.prototype.getLength=function(){for(var E=0,I=0;I<this._geometries.length;I++)E+=this._geometries[I].getLength();return E},f.prototype.getNumPoints=function(){for(var E=0,I=0;I<this._geometries.length;I++)E+=this._geometries[I].getNumPoints();return E},f.prototype.getNumGeometries=function(){return this._geometries.length},f.prototype.reverse=function(){for(var E=this._geometries.length,I=new Array(E).fill(null),J=0;J<this._geometries.length;J++)I[J]=this._geometries[J].reverse();return this.getFactory().createGeometryCollection(I)},f.prototype.compareToSameClass=function(){if(arguments.length===1){var E=arguments[0],I=new g(Qe.asList(this._geometries)),J=new g(Qe.asList(E._geometries));return this.compare(I,J)}if(arguments.length===2){for(var at=arguments[0],yt=arguments[1],St=at,Bt=this.getNumGeometries(),Yt=St.getNumGeometries(),ee=0;ee<Bt&&ee<Yt;){var xe=this.getGeometryN(ee),Me=St.getGeometryN(ee),Be=xe.compareToSameClass(Me,yt);if(Be!==0)return Be;ee++}return ee<Bt?1:ee<Yt?-1:0}},f.prototype.apply=function(){if(w(arguments[0],re))for(var E=arguments[0],I=0;I<this._geometries.length;I++)this._geometries[I].apply(E);else if(w(arguments[0],Ae)){var J=arguments[0];if(this._geometries.length===0)return null;for(var at=0;at<this._geometries.length&&(this._geometries[at].apply(J),!J.isDone());at++);J.isGeometryChanged()&&this.geometryChanged()}else if(w(arguments[0],$e)){var yt=arguments[0];yt.filter(this);for(var St=0;St<this._geometries.length;St++)this._geometries[St].apply(yt)}else if(w(arguments[0],zt)){var Bt=arguments[0];Bt.filter(this);for(var Yt=0;Yt<this._geometries.length;Yt++)this._geometries[Yt].apply(Bt)}},f.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Q.shouldNeverReachHere(),null},f.prototype.clone=function(){var E=u.prototype.clone.call(this);E._geometries=new Array(this._geometries.length).fill(null);for(var I=0;I<this._geometries.length;I++)E._geometries[I]=this._geometries[I].clone();return E},f.prototype.getGeometryType=function(){return"GeometryCollection"},f.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),I=0;I<E.length;I++)E[I]=this._geometries[I].copy();return new f(E,this._factory)},f.prototype.isEmpty=function(){for(var E=0;E<this._geometries.length;E++)if(!this._geometries[E].isEmpty())return!1;return!0},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},_.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(f,_),f}(Gt),Ye=function(u){function f(){u.apply(this,arguments)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTILINESTRING},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return!!this.isEquivalentClass(E)&&u.prototype.equalsExact.call(this,E,I)}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return this.isClosed()?se.FALSE:0},f.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var E=0;E<this._geometries.length;E++)if(!this._geometries[E].isClosed())return!1;return!0},f.prototype.getDimension=function(){return 1},f.prototype.reverse=function(){for(var E=this._geometries.length,I=new Array(E).fill(null),J=0;J<this._geometries.length;J++)I[E-1-J]=this._geometries[J].reverse();return this.getFactory().createMultiLineString(I)},f.prototype.getBoundary=function(){return new Ve(this).getBoundary()},f.prototype.getGeometryType=function(){return"MultiLineString"},f.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),I=0;I<E.length;I++)E[I]=this._geometries[I].copy();return new f(E,this._factory)},f.prototype.interfaces_=function(){return[jt]},f.prototype.getClass=function(){return f},_.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(f,_),f}(fe),Ve=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var u=arguments[0],f=Xt.MOD2_BOUNDARY_RULE;this._geom=u,this._geomFact=u.getFactory(),this._bnRule=f}else if(arguments.length===2){var _=arguments[0],E=arguments[1];this._geom=_,this._geomFact=_.getFactory(),this._bnRule=E}};Ve.prototype.boundaryMultiLineString=function(u){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var f=this.computeBoundaryCoordinates(u);return f.length===1?this._geomFact.createPoint(f[0]):this._geomFact.createMultiPointFromCoords(f)},Ve.prototype.getBoundary=function(){return this._geom instanceof or?this.boundaryLineString(this._geom):this._geom instanceof Ye?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ve.prototype.boundaryLineString=function(u){return this._geom.isEmpty()?this.getEmptyMultiPoint():u.isClosed()?this._bnRule.isInBoundary(2)?u.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([u.getStartPoint(),u.getEndPoint()])},Ve.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ve.prototype.computeBoundaryCoordinates=function(u){var f=new $t;this._endpointMap=new d;for(var _=0;_<u.getNumGeometries();_++){var E=u.getGeometryN(_);E.getNumPoints()!==0&&(this.addEndpoint(E.getCoordinateN(0)),this.addEndpoint(E.getCoordinateN(E.getNumPoints()-1)))}for(var I=this._endpointMap.entrySet().iterator();I.hasNext();){var J=I.next(),at=J.getValue().count;this._bnRule.isInBoundary(at)&&f.add(J.getKey())}return ue.toCoordinateArray(f)},Ve.prototype.addEndpoint=function(u){var f=this._endpointMap.get(u);f===null&&(f=new rr,this._endpointMap.put(u,f)),f.count++},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.getBoundary=function(){if(arguments.length===1){var u=arguments[0];return new Ve(u).getBoundary()}if(arguments.length===2){var f=arguments[0],_=arguments[1];return new Ve(f,_).getBoundary()}};var rr=function(){this.count=null};rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr};var Ke=function(){},pi={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke},Ke.chars=function(u,f){for(var _=new Array(f).fill(null),E=0;E<f;E++)_[E]=u;return String(_)},Ke.getStackTrace=function(){if(arguments.length===1){var u=arguments[0],f=new function(){},_=new function(){}(f);return u.printStackTrace(_),f.toString()}if(arguments.length===2){for(var E=arguments[0],I=arguments[1],J="",at=new function(){}(new function(){}(Ke.getStackTrace(E))),yt=0;yt<I;yt++)try{J+=at.readLine()+Ke.NEWLINE}catch(St){if(!(St instanceof m))throw St;Q.shouldNeverReachHere()}return J}},Ke.split=function(u,f){for(var _=f.length,E=new $t,I=""+u,J=I.indexOf(f);J>=0;){var at=I.substring(0,J);E.add(at),J=(I=I.substring(J+_)).indexOf(f)}I.length>0&&E.add(I);for(var yt=new Array(E.size()).fill(null),St=0;St<yt.length;St++)yt[St]=E.get(St);return yt},Ke.toString=function(){if(arguments.length===1){var u=arguments[0];return Ke.SIMPLE_ORDINATE_FORMAT.format(u)}},Ke.spaces=function(u){return Ke.chars(" ",u)},pi.NEWLINE.get=function(){return it.getProperty("line.separator")},pi.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Ke,pi);var Je=function(){};Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.copyCoord=function(u,f,_,E){for(var I=Math.min(u.getDimension(),_.getDimension()),J=0;J<I;J++)_.setOrdinate(E,J,u.getOrdinate(f,J))},Je.isRing=function(u){var f=u.size();return f===0||!(f<=3)&&u.getOrdinate(0,$.X)===u.getOrdinate(f-1,$.X)&&u.getOrdinate(0,$.Y)===u.getOrdinate(f-1,$.Y)},Je.isEqual=function(u,f){var _=u.size();if(_!==f.size())return!1;for(var E=Math.min(u.getDimension(),f.getDimension()),I=0;I<_;I++)for(var J=0;J<E;J++){var at=u.getOrdinate(I,J),yt=f.getOrdinate(I,J);if(u.getOrdinate(I,J)!==f.getOrdinate(I,J)&&(!O.isNaN(at)||!O.isNaN(yt)))return!1}return!0},Je.extend=function(u,f,_){var E=u.create(_,f.getDimension()),I=f.size();if(Je.copy(f,0,E,0,I),I>0)for(var J=I;J<_;J++)Je.copy(f,I-1,E,J,1);return E},Je.reverse=function(u){for(var f=u.size()-1,_=Math.trunc(f/2),E=0;E<=_;E++)Je.swap(u,E,f-E)},Je.swap=function(u,f,_){if(f===_)return null;for(var E=0;E<u.getDimension();E++){var I=u.getOrdinate(f,E);u.setOrdinate(f,E,u.getOrdinate(_,E)),u.setOrdinate(_,E,I)}},Je.copy=function(u,f,_,E,I){for(var J=0;J<I;J++)Je.copyCoord(u,f+J,_,E+J)},Je.toString=function(){if(arguments.length===1){var u=arguments[0],f=u.size();if(f===0)return"()";var _=u.getDimension(),E=new T;E.append("(");for(var I=0;I<f;I++){I>0&&E.append(" ");for(var J=0;J<_;J++)J>0&&E.append(","),E.append(Ke.toString(u.getOrdinate(I,J)))}return E.append(")"),E.toString()}},Je.ensureValidRing=function(u,f){var _=f.size();return _===0?f:_<=3?Je.createClosedRing(u,f,4):f.getOrdinate(0,$.X)===f.getOrdinate(_-1,$.X)&&f.getOrdinate(0,$.Y)===f.getOrdinate(_-1,$.Y)?f:Je.createClosedRing(u,f,_+1)},Je.createClosedRing=function(u,f,_){var E=u.create(_,f.getDimension()),I=f.size();Je.copy(f,0,E,0,I);for(var J=I;J<_;J++)Je.copy(f,0,E,J,1);return E};var or=function(u){function f(E,I){u.call(this,I),this._points=null,this.init(E)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new wt:this._points.expandEnvelope(new wt)},f.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},f.prototype.getSortIndex=function(){return u.SORTINDEX_LINESTRING},f.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];if(!this.isEquivalentClass(E))return!1;var J=E;if(this._points.size()!==J._points.size())return!1;for(var at=0;at<this._points.size();at++)if(!this.equal(this._points.getCoordinate(at),J._points.getCoordinate(at),I))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){for(var E=0;E<Math.trunc(this._points.size()/2);E++){var I=this._points.size()-1-E;if(!this._points.getCoordinate(E).equals(this._points.getCoordinate(I)))return this._points.getCoordinate(E).compareTo(this._points.getCoordinate(I))>0&&Je.reverse(this._points),null}},f.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},f.prototype.getBoundaryDimension=function(){return this.isClosed()?se.FALSE:0},f.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},f.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},f.prototype.getDimension=function(){return 1},f.prototype.getLength=function(){return Et.computeLength(this._points)},f.prototype.getNumPoints=function(){return this._points.size()},f.prototype.reverse=function(){var E=this._points.copy();return Je.reverse(E),this.getFactory().createLineString(E)},f.prototype.compareToSameClass=function(){if(arguments.length===1){for(var E=arguments[0],I=0,J=0;I<this._points.size()&&J<E._points.size();){var at=this._points.getCoordinate(I).compareTo(E._points.getCoordinate(J));if(at!==0)return at;I++,J++}return I<this._points.size()?1:J<E._points.size()?-1:0}if(arguments.length===2){var yt=arguments[0];return arguments[1].compare(this._points,yt._points)}},f.prototype.apply=function(){if(w(arguments[0],re))for(var E=arguments[0],I=0;I<this._points.size();I++)E.filter(this._points.getCoordinate(I));else if(w(arguments[0],Ae)){var J=arguments[0];if(this._points.size()===0)return null;for(var at=0;at<this._points.size()&&(J.filter(this._points,at),!J.isDone());at++);J.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],$e)?arguments[0].filter(this):w(arguments[0],zt)&&arguments[0].filter(this)},f.prototype.getBoundary=function(){return new Ve(this).getBoundary()},f.prototype.isEquivalentClass=function(E){return E instanceof f},f.prototype.clone=function(){var E=u.prototype.clone.call(this);return E._points=this._points.clone(),E},f.prototype.getCoordinateN=function(E){return this._points.getCoordinate(E)},f.prototype.getGeometryType=function(){return"LineString"},f.prototype.copy=function(){return new f(this._points.copy(),this._factory)},f.prototype.getCoordinateSequence=function(){return this._points},f.prototype.isEmpty=function(){return this._points.size()===0},f.prototype.init=function(E){if(E===null&&(E=this.getFactory().getCoordinateSequenceFactory().create([])),E.size()===1)throw new S("Invalid number of points in LineString (found "+E.size()+" - must be 0 or >= 2)");this._points=E},f.prototype.isCoordinate=function(E){for(var I=0;I<this._points.size();I++)if(this._points.getCoordinate(I).equals(E))return!0;return!1},f.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},f.prototype.getPointN=function(E){return this.getFactory().createPoint(this._points.getCoordinate(E))},f.prototype.interfaces_=function(){return[jt]},f.prototype.getClass=function(){return f},_.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(f,_),f}(Gt),ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var kr=function(u){function f(E,I){u.call(this,I),this._coordinates=E||null,this.init(this._coordinates)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new wt;var E=new wt;return E.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),E},f.prototype.getSortIndex=function(){return u.SORTINDEX_POINT},f.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return!!this.isEquivalentClass(E)&&(!(!this.isEmpty()||!E.isEmpty())||this.isEmpty()===E.isEmpty()&&this.equal(E.getCoordinate(),this.getCoordinate(),I))}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){},f.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},f.prototype.getBoundaryDimension=function(){return se.FALSE},f.prototype.getDimension=function(){return 0},f.prototype.getNumPoints=function(){return this.isEmpty()?0:1},f.prototype.reverse=function(){return this.copy()},f.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},f.prototype.compareToSameClass=function(){if(arguments.length===1){var E=arguments[0];return this.getCoordinate().compareTo(E.getCoordinate())}if(arguments.length===2){var I=arguments[0];return arguments[1].compare(this._coordinates,I._coordinates)}},f.prototype.apply=function(){if(w(arguments[0],re)){var E=arguments[0];if(this.isEmpty())return null;E.filter(this.getCoordinate())}else if(w(arguments[0],Ae)){var I=arguments[0];if(this.isEmpty())return null;I.filter(this._coordinates,0),I.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],$e)?arguments[0].filter(this):w(arguments[0],zt)&&arguments[0].filter(this)},f.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},f.prototype.clone=function(){var E=u.prototype.clone.call(this);return E._coordinates=this._coordinates.clone(),E},f.prototype.getGeometryType=function(){return"Point"},f.prototype.copy=function(){return new f(this._coordinates.copy(),this._factory)},f.prototype.getCoordinateSequence=function(){return this._coordinates},f.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},f.prototype.isEmpty=function(){return this._coordinates.size()===0},f.prototype.init=function(E){E===null&&(E=this.getFactory().getCoordinateSequenceFactory().create([])),Q.isTrue(E.size()<=1),this._coordinates=E},f.prototype.isSimple=function(){return!0},f.prototype.interfaces_=function(){return[ci]},f.prototype.getClass=function(){return f},_.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(f,_),f}(Gt),Tt=function(){};Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt};var Ht=function(u){function f(E,I,J){if(u.call(this,J),this._shell=null,this._holes=null,E===null&&(E=this.getFactory().createLinearRing()),I===null&&(I=[]),u.hasNullElements(I))throw new S("holes must not contain null elements");if(E.isEmpty()&&u.hasNonEmptyElements(I))throw new S("shell is empty but holes are not");this._shell=E,this._holes=I}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},f.prototype.getSortIndex=function(){return u.SORTINDEX_POLYGON},f.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var E=new Array(this.getNumPoints()).fill(null),I=-1,J=this._shell.getCoordinates(),at=0;at<J.length;at++)E[++I]=J[at];for(var yt=0;yt<this._holes.length;yt++)for(var St=this._holes[yt].getCoordinates(),Bt=0;Bt<St.length;Bt++)E[++I]=St[Bt];return E},f.prototype.getArea=function(){var E=0;E+=Math.abs(Et.signedArea(this._shell.getCoordinateSequence()));for(var I=0;I<this._holes.length;I++)E-=Math.abs(Et.signedArea(this._holes[I].getCoordinateSequence()));return E},f.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var E=this._shell.getCoordinateSequence(),I=this.getEnvelopeInternal(),J=0;J<5;J++){var at=E.getX(J);if(at!==I.getMinX()&&at!==I.getMaxX())return!1;var yt=E.getY(J);if(yt!==I.getMinY()&&yt!==I.getMaxY())return!1}for(var St=E.getX(0),Bt=E.getY(0),Yt=1;Yt<=4;Yt++){var ee=E.getX(Yt),xe=E.getY(Yt);if(ee!==St==(xe!==Bt))return!1;St=ee,Bt=xe}return!0},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];if(!this.isEquivalentClass(E))return!1;var J=E,at=this._shell,yt=J._shell;if(!at.equalsExact(yt,I)||this._holes.length!==J._holes.length)return!1;for(var St=0;St<this._holes.length;St++)if(!this._holes[St].equalsExact(J._holes[St],I))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){if(arguments.length===0){this.normalize(this._shell,!0);for(var E=0;E<this._holes.length;E++)this.normalize(this._holes[E],!1);Qe.sort(this._holes)}else if(arguments.length===2){var I=arguments[0],J=arguments[1];if(I.isEmpty())return null;var at=new Array(I.getCoordinates().length-1).fill(null);it.arraycopy(I.getCoordinates(),0,at,0,at.length);var yt=ue.minCoordinate(I.getCoordinates());ue.scroll(at,yt),it.arraycopy(at,0,I.getCoordinates(),0,at.length),I.getCoordinates()[at.length]=at[0],Et.isCCW(I.getCoordinates())===J&&ue.reverse(I.getCoordinates())}},f.prototype.getCoordinate=function(){return this._shell.getCoordinate()},f.prototype.getNumInteriorRing=function(){return this._holes.length},f.prototype.getBoundaryDimension=function(){return 1},f.prototype.getDimension=function(){return 2},f.prototype.getLength=function(){var E=0;E+=this._shell.getLength();for(var I=0;I<this._holes.length;I++)E+=this._holes[I].getLength();return E},f.prototype.getNumPoints=function(){for(var E=this._shell.getNumPoints(),I=0;I<this._holes.length;I++)E+=this._holes[I].getNumPoints();return E},f.prototype.reverse=function(){var E=this.copy();E._shell=this._shell.copy().reverse(),E._holes=new Array(this._holes.length).fill(null);for(var I=0;I<this._holes.length;I++)E._holes[I]=this._holes[I].copy().reverse();return E},f.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},f.prototype.compareToSameClass=function(){if(arguments.length===1){var E=arguments[0],I=this._shell,J=E._shell;return I.compareToSameClass(J)}if(arguments.length===2){var at=arguments[0],yt=arguments[1],St=at,Bt=this._shell,Yt=St._shell,ee=Bt.compareToSameClass(Yt,yt);if(ee!==0)return ee;for(var xe=this.getNumInteriorRing(),Me=St.getNumInteriorRing(),Be=0;Be<xe&&Be<Me;){var qe=this.getInteriorRingN(Be),gi=St.getInteriorRingN(Be),qi=qe.compareToSameClass(gi,yt);if(qi!==0)return qi;Be++}return Be<xe?1:Be<Me?-1:0}},f.prototype.apply=function(E){if(w(E,re)){this._shell.apply(E);for(var I=0;I<this._holes.length;I++)this._holes[I].apply(E)}else if(w(E,Ae)){if(this._shell.apply(E),!E.isDone())for(var J=0;J<this._holes.length&&(this._holes[J].apply(E),!E.isDone());J++);E.isGeometryChanged()&&this.geometryChanged()}else if(w(E,$e))E.filter(this);else if(w(E,zt)){E.filter(this),this._shell.apply(E);for(var at=0;at<this._holes.length;at++)this._holes[at].apply(E)}},f.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var E=new Array(this._holes.length+1).fill(null);E[0]=this._shell;for(var I=0;I<this._holes.length;I++)E[I+1]=this._holes[I];return E.length<=1?this.getFactory().createLinearRing(E[0].getCoordinateSequence()):this.getFactory().createMultiLineString(E)},f.prototype.clone=function(){var E=u.prototype.clone.call(this);E._shell=this._shell.clone(),E._holes=new Array(this._holes.length).fill(null);for(var I=0;I<this._holes.length;I++)E._holes[I]=this._holes[I].clone();return E},f.prototype.getGeometryType=function(){return"Polygon"},f.prototype.copy=function(){for(var E=this._shell.copy(),I=new Array(this._holes.length).fill(null),J=0;J<I.length;J++)I[J]=this._holes[J].copy();return new f(E,I,this._factory)},f.prototype.getExteriorRing=function(){return this._shell},f.prototype.isEmpty=function(){return this._shell.isEmpty()},f.prototype.getInteriorRingN=function(E){return this._holes[E]},f.prototype.interfaces_=function(){return[Tt]},f.prototype.getClass=function(){return f},_.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(f,_),f}(Gt),ie=function(u){function f(){u.apply(this,arguments)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTIPOINT},f.prototype.isValid=function(){return!0},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return!!this.isEquivalentClass(E)&&u.prototype.equalsExact.call(this,E,I)}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.getCoordinate=function(){if(arguments.length===1){var E=arguments[0];return this._geometries[E].getCoordinate()}return u.prototype.getCoordinate.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return se.FALSE},f.prototype.getDimension=function(){return 0},f.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},f.prototype.getGeometryType=function(){return"MultiPoint"},f.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),I=0;I<E.length;I++)E[I]=this._geometries[I].copy();return new f(E,this._factory)},f.prototype.interfaces_=function(){return[ci]},f.prototype.getClass=function(){return f},_.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(f,_),f}(fe),Qt=function(u){function f(E,I){E instanceof G&&I instanceof Se&&(E=I.getCoordinateSequenceFactory().create(E)),u.call(this,E,I),this.validateConstruction()}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return Gt.SORTINDEX_LINEARRING},f.prototype.getBoundaryDimension=function(){return se.FALSE},f.prototype.isClosed=function(){return!!this.isEmpty()||u.prototype.isClosed.call(this)},f.prototype.reverse=function(){var E=this._points.copy();return Je.reverse(E),this.getFactory().createLinearRing(E)},f.prototype.validateConstruction=function(){if(!this.isEmpty()&&!u.prototype.isClosed.call(this))throw new S("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<f.MINIMUM_VALID_SIZE)throw new S("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},f.prototype.getGeometryType=function(){return"LinearRing"},f.prototype.copy=function(){return new f(this._points.copy(),this._factory)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},_.MINIMUM_VALID_SIZE.get=function(){return 4},_.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(f,_),f}(or),he=function(u){function f(){u.apply(this,arguments)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTIPOLYGON},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return!!this.isEquivalentClass(E)&&u.prototype.equalsExact.call(this,E,I)}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return 1},f.prototype.getDimension=function(){return 2},f.prototype.reverse=function(){for(var E=this._geometries.length,I=new Array(E).fill(null),J=0;J<this._geometries.length;J++)I[J]=this._geometries[J].reverse();return this.getFactory().createMultiPolygon(I)},f.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var E=new $t,I=0;I<this._geometries.length;I++)for(var J=this._geometries[I].getBoundary(),at=0;at<J.getNumGeometries();at++)E.add(J.getGeometryN(at));var yt=new Array(E.size()).fill(null);return this.getFactory().createMultiLineString(E.toArray(yt))},f.prototype.getGeometryType=function(){return"MultiPolygon"},f.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),I=0;I<E.length;I++)E[I]=this._geometries[I].copy();return new f(E,this._factory)},f.prototype.interfaces_=function(){return[Tt]},f.prototype.getClass=function(){return f},_.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(f,_),f}(fe),Ee=function(u){this._factory=u||null,this._isUserDataCopied=!1},Ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Ee.prototype.setCopyUserData=function(u){this._isUserDataCopied=u},Ee.prototype.edit=function(u,f){if(u===null)return null;var _=this.editInternal(u,f);return this._isUserDataCopied&&_.setUserData(u.getUserData()),_},Ee.prototype.editInternal=function(u,f){return this._factory===null&&(this._factory=u.getFactory()),u instanceof fe?this.editGeometryCollection(u,f):u instanceof Ht?this.editPolygon(u,f):u instanceof kr?f.edit(u,this._factory):u instanceof or?f.edit(u,this._factory):(Q.shouldNeverReachHere("Unsupported Geometry class: "+u.getClass().getName()),null)},Ee.prototype.editGeometryCollection=function(u,f){for(var _=f.edit(u,this._factory),E=new $t,I=0;I<_.getNumGeometries();I++){var J=this.edit(_.getGeometryN(I),f);J===null||J.isEmpty()||E.add(J)}return _.getClass()===ie?this._factory.createMultiPoint(E.toArray([])):_.getClass()===Ye?this._factory.createMultiLineString(E.toArray([])):_.getClass()===he?this._factory.createMultiPolygon(E.toArray([])):this._factory.createGeometryCollection(E.toArray([]))},Ee.prototype.editPolygon=function(u,f){var _=f.edit(u,this._factory);if(_===null&&(_=this._factory.createPolygon(null)),_.isEmpty())return _;var E=this.edit(_.getExteriorRing(),f);if(E===null||E.isEmpty())return this._factory.createPolygon();for(var I=new $t,J=0;J<_.getNumInteriorRing();J++){var at=this.edit(_.getInteriorRingN(J),f);at===null||at.isEmpty()||I.add(at)}return this._factory.createPolygon(E,I.toArray([]))},Ee.prototype.interfaces_=function(){return[]},Ee.prototype.getClass=function(){return Ee},Ee.GeometryEditorOperation=function(){},Ie.NoOpGeometryOperation.get=function(){return tr},Ie.CoordinateOperation.get=function(){return Ue},Ie.CoordinateSequenceOperation.get=function(){return we},Object.defineProperties(Ee,Ie);var tr=function(){};tr.prototype.edit=function(u,f){return u},tr.prototype.interfaces_=function(){return[Ee.GeometryEditorOperation]},tr.prototype.getClass=function(){return tr};var Ue=function(){};Ue.prototype.edit=function(u,f){var _=this.editCoordinates(u.getCoordinates(),u);return _===null?u:u instanceof Qt?f.createLinearRing(_):u instanceof or?f.createLineString(_):u instanceof kr?_.length>0?f.createPoint(_[0]):f.createPoint():u},Ue.prototype.interfaces_=function(){return[Ee.GeometryEditorOperation]},Ue.prototype.getClass=function(){return Ue};var we=function(){};we.prototype.edit=function(u,f){return u instanceof Qt?f.createLinearRing(this.edit(u.getCoordinateSequence(),u)):u instanceof or?f.createLineString(this.edit(u.getCoordinateSequence(),u)):u instanceof kr?f.createPoint(this.edit(u.getCoordinateSequence(),u)):u},we.prototype.interfaces_=function(){return[Ee.GeometryEditorOperation]},we.prototype.getClass=function(){return we};var pe=function(){if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var u=arguments[0];this._coordinates=new Array(u).fill(null);for(var f=0;f<u;f++)this._coordinates[f]=new G}else if(w(arguments[0],$)){var _=arguments[0];if(_===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=_.getDimension(),this._coordinates=new Array(_.size()).fill(null);for(var E=0;E<this._coordinates.length;E++)this._coordinates[E]=_.getCoordinateCopy(E)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var I=arguments[0],J=arguments[1];this._coordinates=I,this._dimension=J,I===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var at=arguments[0],yt=arguments[1];this._coordinates=new Array(at).fill(null),this._dimension=yt;for(var St=0;St<at;St++)this._coordinates[St]=new G}}},yr={serialVersionUID:{configurable:!0}};pe.prototype.setOrdinate=function(u,f,_){switch(f){case $.X:this._coordinates[u].x=_;break;case $.Y:this._coordinates[u].y=_;break;case $.Z:this._coordinates[u].z=_;break;default:throw new S("invalid ordinateIndex")}},pe.prototype.size=function(){return this._coordinates.length},pe.prototype.getOrdinate=function(u,f){switch(f){case $.X:return this._coordinates[u].x;case $.Y:return this._coordinates[u].y;case $.Z:return this._coordinates[u].z}return O.NaN},pe.prototype.getCoordinate=function(){if(arguments.length===1){var u=arguments[0];return this._coordinates[u]}if(arguments.length===2){var f=arguments[0],_=arguments[1];_.x=this._coordinates[f].x,_.y=this._coordinates[f].y,_.z=this._coordinates[f].z}},pe.prototype.getCoordinateCopy=function(u){return new G(this._coordinates[u])},pe.prototype.getDimension=function(){return this._dimension},pe.prototype.getX=function(u){return this._coordinates[u].x},pe.prototype.clone=function(){for(var u=new Array(this.size()).fill(null),f=0;f<this._coordinates.length;f++)u[f]=this._coordinates[f].clone();return new pe(u,this._dimension)},pe.prototype.expandEnvelope=function(u){for(var f=0;f<this._coordinates.length;f++)u.expandToInclude(this._coordinates[f]);return u},pe.prototype.copy=function(){for(var u=new Array(this.size()).fill(null),f=0;f<this._coordinates.length;f++)u[f]=this._coordinates[f].copy();return new pe(u,this._dimension)},pe.prototype.toString=function(){if(this._coordinates.length>0){var u=new T(17*this._coordinates.length);u.append("("),u.append(this._coordinates[0]);for(var f=1;f<this._coordinates.length;f++)u.append(", "),u.append(this._coordinates[f]);return u.append(")"),u.toString()}return"()"},pe.prototype.getY=function(u){return this._coordinates[u].y},pe.prototype.toCoordinateArray=function(){return this._coordinates},pe.prototype.interfaces_=function(){return[$,t]},pe.prototype.getClass=function(){return pe},yr.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(pe,yr);var ir=function(){},lr={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ir.prototype.readResolve=function(){return ir.instance()},ir.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new pe(u)}if(w(arguments[0],$)){var f=arguments[0];return new pe(f)}}else if(arguments.length===2){var _=arguments[0],E=arguments[1];return E>3&&(E=3),E<2?new pe(_):new pe(_,E)}},ir.prototype.interfaces_=function(){return[B,t]},ir.prototype.getClass=function(){return ir},ir.instance=function(){return ir.instanceObject},lr.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},lr.instanceObject.get=function(){return new ir},Object.defineProperties(ir,lr);var wr=function(u){function f(){u.call(this),this.map_=new Map}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.get=function(_){return this.map_.get(_)||null},f.prototype.put=function(_,E){return this.map_.set(_,E),E},f.prototype.values=function(){for(var _=new $t,E=this.map_.values(),I=E.next();!I.done;)_.add(I.value),I=E.next();return _},f.prototype.entrySet=function(){var _=new We;return this.map_.entries().forEach(function(E){return _.add(E)}),_},f.prototype.size=function(){return this.map_.size()},f}(Oe),me=function u(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=u.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof bi){var f=arguments[0];this._modelType=f,f===u.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var _=arguments[0];this._modelType=u.FIXED,this.setScale(_)}else if(arguments[0]instanceof u){var E=arguments[0];this._modelType=E._modelType,this._scale=E._scale}}},ur={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};me.prototype.equals=function(u){if(!(u instanceof me))return!1;var f=u;return this._modelType===f._modelType&&this._scale===f._scale},me.prototype.compareTo=function(u){var f=u,_=this.getMaximumSignificantDigits(),E=f.getMaximumSignificantDigits();return new R(_).compareTo(new R(E))},me.prototype.getScale=function(){return this._scale},me.prototype.isFloating=function(){return this._modelType===me.FLOATING||this._modelType===me.FLOATING_SINGLE},me.prototype.getType=function(){return this._modelType},me.prototype.toString=function(){var u="UNKNOWN";return this._modelType===me.FLOATING?u="Floating":this._modelType===me.FLOATING_SINGLE?u="Floating-Single":this._modelType===me.FIXED&&(u="Fixed (Scale="+this.getScale()+")"),u},me.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var u=arguments[0];return O.isNaN(u)||this._modelType===me.FLOATING_SINGLE?u:this._modelType===me.FIXED?Math.round(u*this._scale)/this._scale:u}if(arguments[0]instanceof G){var f=arguments[0];if(this._modelType===me.FLOATING)return null;f.x=this.makePrecise(f.x),f.y=this.makePrecise(f.y)}},me.prototype.getMaximumSignificantDigits=function(){var u=16;return this._modelType===me.FLOATING?u=16:this._modelType===me.FLOATING_SINGLE?u=6:this._modelType===me.FIXED&&(u=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),u},me.prototype.setScale=function(u){this._scale=Math.abs(u)},me.prototype.interfaces_=function(){return[t,U]},me.prototype.getClass=function(){return me},me.mostPrecise=function(u,f){return u.compareTo(f)>=0?u:f},ur.serialVersionUID.get=function(){return 7777263578777804e3},ur.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(me,ur);var bi=function u(f){this._name=f||null,u.nameToTypeMap.put(f,this)},Xi={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};bi.prototype.readResolve=function(){return bi.nameToTypeMap.get(this._name)},bi.prototype.toString=function(){return this._name},bi.prototype.interfaces_=function(){return[t]},bi.prototype.getClass=function(){return bi},Xi.serialVersionUID.get=function(){return-552860263173159e4},Xi.nameToTypeMap.get=function(){return new wr},Object.defineProperties(bi,Xi),me.Type=bi,me.FIXED=new bi("FIXED"),me.FLOATING=new bi("FLOATING"),me.FLOATING_SINGLE=new bi("FLOATING SINGLE");var Se=function u(){this._precisionModel=new me,this._SRID=0,this._coordinateSequenceFactory=u.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?w(arguments[0],B)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof me&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Ln={serialVersionUID:{configurable:!0}};Se.prototype.toGeometry=function(u){return u.isNull()?this.createPoint(null):u.getMinX()===u.getMaxX()&&u.getMinY()===u.getMaxY()?this.createPoint(new G(u.getMinX(),u.getMinY())):u.getMinX()===u.getMaxX()||u.getMinY()===u.getMaxY()?this.createLineString([new G(u.getMinX(),u.getMinY()),new G(u.getMaxX(),u.getMaxY())]):this.createPolygon(this.createLinearRing([new G(u.getMinX(),u.getMinY()),new G(u.getMinX(),u.getMaxY()),new G(u.getMaxX(),u.getMaxY()),new G(u.getMaxX(),u.getMinY()),new G(u.getMinX(),u.getMinY())]),null)},Se.prototype.createLineString=function(u){return u?u instanceof Array?new or(this.getCoordinateSequenceFactory().create(u),this):w(u,$)?new or(u,this):void 0:new or(this.getCoordinateSequenceFactory().create([]),this)},Se.prototype.createMultiLineString=function(){if(arguments.length===0)return new Ye(null,this);if(arguments.length===1){var u=arguments[0];return new Ye(u,this)}},Se.prototype.buildGeometry=function(u){for(var f=null,_=!1,E=!1,I=u.iterator();I.hasNext();){var J=I.next(),at=J.getClass();f===null&&(f=at),at!==f&&(_=!0),J.isGeometryCollectionOrDerived()&&(E=!0)}if(f===null)return this.createGeometryCollection();if(_||E)return this.createGeometryCollection(Se.toGeometryArray(u));var yt=u.iterator().next();if(u.size()>1){if(yt instanceof Ht)return this.createMultiPolygon(Se.toPolygonArray(u));if(yt instanceof or)return this.createMultiLineString(Se.toLineStringArray(u));if(yt instanceof kr)return this.createMultiPoint(Se.toPointArray(u));Q.shouldNeverReachHere("Unhandled class: "+yt.getClass().getName())}return yt},Se.prototype.createMultiPointFromCoords=function(u){return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)},Se.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof G){var u=arguments[0];return this.createPoint(u!==null?this.getCoordinateSequenceFactory().create([u]):null)}if(w(arguments[0],$)){var f=arguments[0];return new kr(f,this)}}},Se.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Se.prototype.createPolygon=function(){if(arguments.length===0)return new Ht(null,null,this);if(arguments.length===1){if(w(arguments[0],$)){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof Array){var f=arguments[0];return this.createPolygon(this.createLinearRing(f))}if(arguments[0]instanceof Qt){var _=arguments[0];return this.createPolygon(_,null)}}else if(arguments.length===2){var E=arguments[0],I=arguments[1];return new Ht(E,I,this)}},Se.prototype.getSRID=function(){return this._SRID},Se.prototype.createGeometryCollection=function(){if(arguments.length===0)return new fe(null,this);if(arguments.length===1){var u=arguments[0];return new fe(u,this)}},Se.prototype.createGeometry=function(u){return new Ee(this).edit(u,{edit:function(){if(arguments.length===2){var f=arguments[0];return this._coordinateSequenceFactory.create(f)}}})},Se.prototype.getPrecisionModel=function(){return this._precisionModel},Se.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLinearRing(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(w(arguments[0],$)){var f=arguments[0];return new Qt(f,this)}}},Se.prototype.createMultiPolygon=function(){if(arguments.length===0)return new he(null,this);if(arguments.length===1){var u=arguments[0];return new he(u,this)}},Se.prototype.createMultiPoint=function(){if(arguments.length===0)return new ie(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new ie(u,this)}if(arguments[0]instanceof Array){var f=arguments[0];return this.createMultiPoint(f!==null?this.getCoordinateSequenceFactory().create(f):null)}if(w(arguments[0],$)){var _=arguments[0];if(_===null)return this.createMultiPoint(new Array(0).fill(null));for(var E=new Array(_.size()).fill(null),I=0;I<_.size();I++){var J=this.getCoordinateSequenceFactory().create(1,_.getDimension());Je.copy(_,I,J,0,1),E[I]=this.createPoint(J)}return this.createMultiPoint(E)}}},Se.prototype.interfaces_=function(){return[t]},Se.prototype.getClass=function(){return Se},Se.toMultiPolygonArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toGeometryArray=function(u){if(u===null)return null;var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.getDefaultCoordinateSequenceFactory=function(){return ir.instance()},Se.toMultiLineStringArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toLineStringArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toMultiPointArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toLinearRingArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toPointArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toPolygonArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.createPointFromInternalCoord=function(u,f){return f.getPrecisionModel().makePrecise(u),f.getFactory().createPoint(u)},Ln.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(Se,Ln);var Vn=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],nr=function(u){this.geometryFactory=u||new Se};nr.prototype.read=function(u){var f,_=(f=typeof u=="string"?JSON.parse(u):u).type;if(!ze[_])throw new Error("Unknown GeoJSON type: "+f.type);return Vn.indexOf(_)!==-1?ze[_].apply(this,[f.coordinates]):_==="GeometryCollection"?ze[_].apply(this,[f.geometries]):ze[_].apply(this,[f])},nr.prototype.write=function(u){var f=u.getGeometryType();if(!Ti[f])throw new Error("Geometry is not supported");return Ti[f].apply(this,[u])};var ze={Feature:function(u){var f={};for(var _ in u)f[_]=u[_];if(u.geometry){var E=u.geometry.type;if(!ze[E])throw new Error("Unknown GeoJSON type: "+u.type);f.geometry=this.read(u.geometry)}return u.bbox&&(f.bbox=ze.bbox.apply(this,[u.bbox])),f},FeatureCollection:function(u){var f={};if(u.features){f.features=[];for(var _=0;_<u.features.length;++_)f.features.push(this.read(u.features[_]))}return u.bbox&&(f.bbox=this.parse.bbox.apply(this,[u.bbox])),f},coordinates:function(u){for(var f=[],_=0;_<u.length;++_){var E=u[_];f.push(new G(E[0],E[1]))}return f},bbox:function(u){return this.geometryFactory.createLinearRing([new G(u[0],u[1]),new G(u[2],u[1]),new G(u[2],u[3]),new G(u[0],u[3]),new G(u[0],u[1])])},Point:function(u){var f=new G(u[0],u[1]);return this.geometryFactory.createPoint(f)},MultiPoint:function(u){for(var f=[],_=0;_<u.length;++_)f.push(ze.Point.apply(this,[u[_]]));return this.geometryFactory.createMultiPoint(f)},LineString:function(u){var f=ze.coordinates.apply(this,[u]);return this.geometryFactory.createLineString(f)},MultiLineString:function(u){for(var f=[],_=0;_<u.length;++_)f.push(ze.LineString.apply(this,[u[_]]));return this.geometryFactory.createMultiLineString(f)},Polygon:function(u){for(var f=ze.coordinates.apply(this,[u[0]]),_=this.geometryFactory.createLinearRing(f),E=[],I=1;I<u.length;++I){var J=u[I],at=ze.coordinates.apply(this,[J]),yt=this.geometryFactory.createLinearRing(at);E.push(yt)}return this.geometryFactory.createPolygon(_,E)},MultiPolygon:function(u){for(var f=[],_=0;_<u.length;++_){var E=u[_];f.push(ze.Polygon.apply(this,[E]))}return this.geometryFactory.createMultiPolygon(f)},GeometryCollection:function(u){for(var f=[],_=0;_<u.length;++_){var E=u[_];f.push(this.read(E))}return this.geometryFactory.createGeometryCollection(f)}},Ti={coordinate:function(u){return[u.x,u.y]},Point:function(u){return{type:"Point",coordinates:Ti.coordinate.apply(this,[u.getCoordinate()])}},MultiPoint:function(u){for(var f=[],_=0;_<u._geometries.length;++_){var E=u._geometries[_],I=Ti.Point.apply(this,[E]);f.push(I.coordinates)}return{type:"MultiPoint",coordinates:f}},LineString:function(u){for(var f=[],_=u.getCoordinates(),E=0;E<_.length;++E){var I=_[E];f.push(Ti.coordinate.apply(this,[I]))}return{type:"LineString",coordinates:f}},MultiLineString:function(u){for(var f=[],_=0;_<u._geometries.length;++_){var E=u._geometries[_],I=Ti.LineString.apply(this,[E]);f.push(I.coordinates)}return{type:"MultiLineString",coordinates:f}},Polygon:function(u){var f=[],_=Ti.LineString.apply(this,[u._shell]);f.push(_.coordinates);for(var E=0;E<u._holes.length;++E){var I=u._holes[E],J=Ti.LineString.apply(this,[I]);f.push(J.coordinates)}return{type:"Polygon",coordinates:f}},MultiPolygon:function(u){for(var f=[],_=0;_<u._geometries.length;++_){var E=u._geometries[_],I=Ti.Polygon.apply(this,[E]);f.push(I.coordinates)}return{type:"MultiPolygon",coordinates:f}},GeometryCollection:function(u){for(var f=[],_=0;_<u._geometries.length;++_){var E=u._geometries[_],I=E.getGeometryType();f.push(Ti[I].apply(this,[E]))}return{type:"GeometryCollection",geometries:f}}},Ri=function(u){this.geometryFactory=u||new Se,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new nr(this.geometryFactory)};Ri.prototype.read=function(u){var f=this.parser.read(u);return this.precisionModel.getType()===me.FIXED&&this.reducePrecision(f),f},Ri.prototype.reducePrecision=function(u){var f,_;if(u.coordinate)this.precisionModel.makePrecise(u.coordinate);else if(u.points)for(f=0,_=u.points.length;f<_;f++)this.precisionModel.makePrecise(u.points[f]);else if(u.geometries)for(f=0,_=u.geometries.length;f<_;f++)this.reducePrecision(u.geometries[f])};var bn=function(){this.parser=new nr(this.geometryFactory)};bn.prototype.write=function(u){return this.parser.write(u)};var oe=function(){},Ii={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.opposite=function(u){return u===oe.LEFT?oe.RIGHT:u===oe.RIGHT?oe.LEFT:u},Ii.ON.get=function(){return 0},Ii.LEFT.get=function(){return 1},Ii.RIGHT.get=function(){return 2},Object.defineProperties(oe,Ii),(b.prototype=new Error).name="EmptyStackException",(y.prototype=new He).add=function(u){return this.array_.push(u),!0},y.prototype.get=function(u){if(u<0||u>=this.size())throw new Error;return this.array_[u]},y.prototype.push=function(u){return this.array_.push(u),u},y.prototype.pop=function(u){if(this.array_.length===0)throw new b;return this.array_.pop()},y.prototype.peek=function(){if(this.array_.length===0)throw new b;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return this.array_.length===0},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(u){return this.array_.indexOf(u)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var u=[],f=0,_=this.array_.length;f<_;f++)u.push(this.array_[f]);return u};var gr=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};gr.prototype.getCoordinate=function(){return this._minCoord},gr.prototype.getRightmostSide=function(u,f){var _=this.getRightmostSideOfSegment(u,f);return _<0&&(_=this.getRightmostSideOfSegment(u,f-1)),_<0&&(this._minCoord=null,this.checkForRightmostCoordinate(u)),_},gr.prototype.findRightmostEdgeAtVertex=function(){var u=this._minDe.getEdge().getCoordinates();Q.isTrue(this._minIndex>0&&this._minIndex<u.length,"rightmost point expected to be interior vertex of edge");var f=u[this._minIndex-1],_=u[this._minIndex+1],E=Et.computeOrientation(this._minCoord,_,f),I=!1;(f.y<this._minCoord.y&&_.y<this._minCoord.y&&E===Et.COUNTERCLOCKWISE||f.y>this._minCoord.y&&_.y>this._minCoord.y&&E===Et.CLOCKWISE)&&(I=!0),I&&(this._minIndex=this._minIndex-1)},gr.prototype.getRightmostSideOfSegment=function(u,f){var _=u.getEdge().getCoordinates();if(f<0||f+1>=_.length||_[f].y===_[f+1].y)return-1;var E=oe.LEFT;return _[f].y<_[f+1].y&&(E=oe.RIGHT),E},gr.prototype.getEdge=function(){return this._orientedDe},gr.prototype.checkForRightmostCoordinate=function(u){for(var f=u.getEdge().getCoordinates(),_=0;_<f.length-1;_++)(this._minCoord===null||f[_].x>this._minCoord.x)&&(this._minDe=u,this._minIndex=_,this._minCoord=f[_])},gr.prototype.findRightmostEdgeAtNode=function(){var u=this._minDe.getNode().getEdges();this._minDe=u.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},gr.prototype.findEdge=function(u){for(var f=u.iterator();f.hasNext();){var _=f.next();_.isForward()&&this.checkForRightmostCoordinate(_)}Q.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===oe.LEFT&&(this._orientedDe=this._minDe.getSym())},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr};var _i=function(u){function f(_,E){u.call(this,f.msgWithCoord(_,E)),this.pt=E?new G(E):null,this.name="TopologyException"}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.getCoordinate=function(){return this.pt},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.msgWithCoord=function(_,E){return E?_:_+" [ "+E+" ]"},f}(gt),on=function(){this.array_=[]};on.prototype.addLast=function(u){this.array_.push(u)},on.prototype.removeFirst=function(){return this.array_.shift()},on.prototype.isEmpty=function(){return this.array_.length===0};var yi=function(){this._finder=null,this._dirEdgeList=new $t,this._nodes=new $t,this._rightMostCoord=null,this._env=null,this._finder=new gr};yi.prototype.clearVisitedEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();)u.next().setVisited(!1)},yi.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},yi.prototype.computeNodeDepth=function(u){for(var f=null,_=u.getEdges().iterator();_.hasNext();){var E=_.next();if(E.isVisited()||E.getSym().isVisited()){f=E;break}}if(f===null)throw new _i("unable to find edge to compute depths at "+u.getCoordinate());u.getEdges().computeDepths(f);for(var I=u.getEdges().iterator();I.hasNext();){var J=I.next();J.setVisited(!0),this.copySymDepths(J)}},yi.prototype.computeDepth=function(u){this.clearVisitedEdges();var f=this._finder.getEdge();f.setEdgeDepths(oe.RIGHT,u),this.copySymDepths(f),this.computeDepths(f)},yi.prototype.create=function(u){this.addReachable(u),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},yi.prototype.findResultEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();){var f=u.next();f.getDepth(oe.RIGHT)>=1&&f.getDepth(oe.LEFT)<=0&&!f.isInteriorAreaEdge()&&f.setInResult(!0)}},yi.prototype.computeDepths=function(u){var f=new We,_=new on,E=u.getNode();for(_.addLast(E),f.add(E),u.setVisited(!0);!_.isEmpty();){var I=_.removeFirst();f.add(I),this.computeNodeDepth(I);for(var J=I.getEdges().iterator();J.hasNext();){var at=J.next().getSym();if(!at.isVisited()){var yt=at.getNode();f.contains(yt)||(_.addLast(yt),f.add(yt))}}}},yi.prototype.compareTo=function(u){var f=u;return this._rightMostCoord.x<f._rightMostCoord.x?-1:this._rightMostCoord.x>f._rightMostCoord.x?1:0},yi.prototype.getEnvelope=function(){if(this._env===null){for(var u=new wt,f=this._dirEdgeList.iterator();f.hasNext();)for(var _=f.next().getEdge().getCoordinates(),E=0;E<_.length-1;E++)u.expandToInclude(_[E]);this._env=u}return this._env},yi.prototype.addReachable=function(u){var f=new y;for(f.add(u);!f.empty();){var _=f.pop();this.add(_,f)}},yi.prototype.copySymDepths=function(u){var f=u.getSym();f.setDepth(oe.LEFT,u.getDepth(oe.RIGHT)),f.setDepth(oe.RIGHT,u.getDepth(oe.LEFT))},yi.prototype.add=function(u,f){u.setVisited(!0),this._nodes.add(u);for(var _=u.getEdges().iterator();_.hasNext();){var E=_.next();this._dirEdgeList.add(E);var I=E.getSym().getNode();I.isVisited()||f.push(I)}},yi.prototype.getNodes=function(){return this._nodes},yi.prototype.getDirectedEdges=function(){return this._dirEdgeList},yi.prototype.interfaces_=function(){return[U]},yi.prototype.getClass=function(){return yi};var hr=function u(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var f=arguments[0];this.init(f.length)}else if(Number.isInteger(arguments[0])){var _=arguments[0];this.init(1),this.location[oe.ON]=_}else if(arguments[0]instanceof u){var E=arguments[0];if(this.init(E.location.length),E!==null)for(var I=0;I<this.location.length;I++)this.location[I]=E.location[I]}}else if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];this.init(3),this.location[oe.ON]=J,this.location[oe.LEFT]=at,this.location[oe.RIGHT]=yt}};hr.prototype.setAllLocations=function(u){for(var f=0;f<this.location.length;f++)this.location[f]=u},hr.prototype.isNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]!==N.NONE)return!1;return!0},hr.prototype.setAllLocationsIfNull=function(u){for(var f=0;f<this.location.length;f++)this.location[f]===N.NONE&&(this.location[f]=u)},hr.prototype.isLine=function(){return this.location.length===1},hr.prototype.merge=function(u){if(u.location.length>this.location.length){var f=new Array(3).fill(null);f[oe.ON]=this.location[oe.ON],f[oe.LEFT]=N.NONE,f[oe.RIGHT]=N.NONE,this.location=f}for(var _=0;_<this.location.length;_++)this.location[_]===N.NONE&&_<u.location.length&&(this.location[_]=u.location[_])},hr.prototype.getLocations=function(){return this.location},hr.prototype.flip=function(){if(this.location.length<=1)return null;var u=this.location[oe.LEFT];this.location[oe.LEFT]=this.location[oe.RIGHT],this.location[oe.RIGHT]=u},hr.prototype.toString=function(){var u=new T;return this.location.length>1&&u.append(N.toLocationSymbol(this.location[oe.LEFT])),u.append(N.toLocationSymbol(this.location[oe.ON])),this.location.length>1&&u.append(N.toLocationSymbol(this.location[oe.RIGHT])),u.toString()},hr.prototype.setLocations=function(u,f,_){this.location[oe.ON]=u,this.location[oe.LEFT]=f,this.location[oe.RIGHT]=_},hr.prototype.get=function(u){return u<this.location.length?this.location[u]:N.NONE},hr.prototype.isArea=function(){return this.location.length>1},hr.prototype.isAnyNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]===N.NONE)return!0;return!1},hr.prototype.setLocation=function(){if(arguments.length===1){var u=arguments[0];this.setLocation(oe.ON,u)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this.location[f]=_}},hr.prototype.init=function(u){this.location=new Array(u).fill(null),this.setAllLocations(N.NONE)},hr.prototype.isEqualOnSide=function(u,f){return this.location[f]===u.location[f]},hr.prototype.allPositionsEqual=function(u){for(var f=0;f<this.location.length;f++)if(this.location[f]!==u)return!1;return!0},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr};var fr=function u(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var f=arguments[0];this.elt[0]=new hr(f),this.elt[1]=new hr(f)}else if(arguments[0]instanceof u){var _=arguments[0];this.elt[0]=new hr(_.elt[0]),this.elt[1]=new hr(_.elt[1])}}else if(arguments.length===2){var E=arguments[0],I=arguments[1];this.elt[0]=new hr(N.NONE),this.elt[1]=new hr(N.NONE),this.elt[E].setLocation(I)}else if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];this.elt[0]=new hr(J,at,yt),this.elt[1]=new hr(J,at,yt)}else if(arguments.length===4){var St=arguments[0],Bt=arguments[1],Yt=arguments[2],ee=arguments[3];this.elt[0]=new hr(N.NONE,N.NONE,N.NONE),this.elt[1]=new hr(N.NONE,N.NONE,N.NONE),this.elt[St].setLocations(Bt,Yt,ee)}};fr.prototype.getGeometryCount=function(){var u=0;return this.elt[0].isNull()||u++,this.elt[1].isNull()||u++,u},fr.prototype.setAllLocations=function(u,f){this.elt[u].setAllLocations(f)},fr.prototype.isNull=function(u){return this.elt[u].isNull()},fr.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var u=arguments[0];this.setAllLocationsIfNull(0,u),this.setAllLocationsIfNull(1,u)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this.elt[f].setAllLocationsIfNull(_)}},fr.prototype.isLine=function(u){return this.elt[u].isLine()},fr.prototype.merge=function(u){for(var f=0;f<2;f++)this.elt[f]===null&&u.elt[f]!==null?this.elt[f]=new hr(u.elt[f]):this.elt[f].merge(u.elt[f])},fr.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},fr.prototype.getLocation=function(){if(arguments.length===1){var u=arguments[0];return this.elt[u].get(oe.ON)}if(arguments.length===2){var f=arguments[0],_=arguments[1];return this.elt[f].get(_)}},fr.prototype.toString=function(){var u=new T;return this.elt[0]!==null&&(u.append("A:"),u.append(this.elt[0].toString())),this.elt[1]!==null&&(u.append(" B:"),u.append(this.elt[1].toString())),u.toString()},fr.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var u=arguments[0];return this.elt[u].isArea()}},fr.prototype.isAnyNull=function(u){return this.elt[u].isAnyNull()},fr.prototype.setLocation=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];this.elt[u].setLocation(oe.ON,f)}else if(arguments.length===3){var _=arguments[0],E=arguments[1],I=arguments[2];this.elt[_].setLocation(E,I)}},fr.prototype.isEqualOnSide=function(u,f){return this.elt[0].isEqualOnSide(u.elt[0],f)&&this.elt[1].isEqualOnSide(u.elt[1],f)},fr.prototype.allPositionsEqual=function(u,f){return this.elt[u].allPositionsEqual(f)},fr.prototype.toLine=function(u){this.elt[u].isArea()&&(this.elt[u]=new hr(this.elt[u].location[0]))},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr},fr.toLineLabel=function(u){for(var f=new fr(N.NONE),_=0;_<2;_++)f.setLocation(_,u.getLocation(_));return f};var Tr=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new $t,this._pts=new $t,this._label=new fr(N.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new $t,this._geometryFactory=null;var u=arguments[0],f=arguments[1];this._geometryFactory=f,this.computePoints(u),this.computeRing()};Tr.prototype.computeRing=function(){if(this._ring!==null)return null;for(var u=new Array(this._pts.size()).fill(null),f=0;f<this._pts.size();f++)u[f]=this._pts.get(f);this._ring=this._geometryFactory.createLinearRing(u),this._isHole=Et.isCCW(this._ring.getCoordinates())},Tr.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Tr.prototype.computePoints=function(u){this._startDe=u;var f=u,_=!0;do{if(f===null)throw new _i("Found null DirectedEdge");if(f.getEdgeRing()===this)throw new _i("Directed Edge visited twice during ring-building at "+f.getCoordinate());this._edges.add(f);var E=f.getLabel();Q.isTrue(E.isArea()),this.mergeLabel(E),this.addPoints(f.getEdge(),f.isForward(),_),_=!1,this.setEdgeRing(f,this),f=this.getNext(f)}while(f!==this._startDe)},Tr.prototype.getLinearRing=function(){return this._ring},Tr.prototype.getCoordinate=function(u){return this._pts.get(u)},Tr.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var u=this._startDe;do{var f=u.getNode().getEdges().getOutgoingDegree(this);f>this._maxNodeDegree&&(this._maxNodeDegree=f),u=this.getNext(u)}while(u!==this._startDe);this._maxNodeDegree*=2},Tr.prototype.addPoints=function(u,f,_){var E=u.getCoordinates();if(f){var I=1;_&&(I=0);for(var J=I;J<E.length;J++)this._pts.add(E[J])}else{var at=E.length-2;_&&(at=E.length-1);for(var yt=at;yt>=0;yt--)this._pts.add(E[yt])}},Tr.prototype.isHole=function(){return this._isHole},Tr.prototype.setInResult=function(){var u=this._startDe;do u.getEdge().setInResult(!0),u=u.getNext();while(u!==this._startDe)},Tr.prototype.containsPoint=function(u){var f=this.getLinearRing();if(!f.getEnvelopeInternal().contains(u)||!Et.isPointInRing(u,f.getCoordinates()))return!1;for(var _=this._holes.iterator();_.hasNext();)if(_.next().containsPoint(u))return!1;return!0},Tr.prototype.addHole=function(u){this._holes.add(u)},Tr.prototype.isShell=function(){return this._shell===null},Tr.prototype.getLabel=function(){return this._label},Tr.prototype.getEdges=function(){return this._edges},Tr.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Tr.prototype.getShell=function(){return this._shell},Tr.prototype.mergeLabel=function(){if(arguments.length===1){var u=arguments[0];this.mergeLabel(u,0),this.mergeLabel(u,1)}else if(arguments.length===2){var f=arguments[0],_=arguments[1],E=f.getLocation(_,oe.RIGHT);if(E===N.NONE)return null;if(this._label.getLocation(_)===N.NONE)return this._label.setLocation(_,E),null}},Tr.prototype.setShell=function(u){this._shell=u,u!==null&&u.addHole(this)},Tr.prototype.toPolygon=function(u){for(var f=new Array(this._holes.size()).fill(null),_=0;_<this._holes.size();_++)f[_]=this._holes.get(_).getLinearRing();return u.createPolygon(this.getLinearRing(),f)},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr};var $i=function(u){function f(){var _=arguments[0],E=arguments[1];u.call(this,_,E)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.setEdgeRing=function(_,E){_.setMinEdgeRing(E)},f.prototype.getNext=function(_){return _.getNextMin()},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Tr),us=function(u){function f(){var _=arguments[0],E=arguments[1];u.call(this,_,E)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.buildMinimalRings=function(){var _=new $t,E=this._startDe;do{if(E.getMinEdgeRing()===null){var I=new $i(E,this._geometryFactory);_.add(I)}E=E.getNext()}while(E!==this._startDe);return _},f.prototype.setEdgeRing=function(_,E){_.setEdgeRing(E)},f.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var _=this._startDe;do _.getNode().getEdges().linkMinimalDirectedEdges(this),_=_.getNext();while(_!==this._startDe)},f.prototype.getNext=function(_){return _.getNext()},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Tr),je=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._label=u}}};je.prototype.setVisited=function(u){this._isVisited=u},je.prototype.setInResult=function(u){this._isInResult=u},je.prototype.isCovered=function(){return this._isCovered},je.prototype.isCoveredSet=function(){return this._isCoveredSet},je.prototype.setLabel=function(u){this._label=u},je.prototype.getLabel=function(){return this._label},je.prototype.setCovered=function(u){this._isCovered=u,this._isCoveredSet=!0},je.prototype.updateIM=function(u){Q.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(u)},je.prototype.isInResult=function(){return this._isInResult},je.prototype.isVisited=function(){return this._isVisited},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var Yi=function(u){function f(){u.call(this),this._coord=null,this._edges=null;var _=arguments[0],E=arguments[1];this._coord=_,this._edges=E,this._label=new fr(0,N.NONE)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.isIncidentEdgeInResult=function(){for(var _=this.getEdges().getEdges().iterator();_.hasNext();)if(_.next().getEdge().isInResult())return!0;return!1},f.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},f.prototype.getCoordinate=function(){return this._coord},f.prototype.print=function(_){_.println("node "+this._coord+" lbl: "+this._label)},f.prototype.computeIM=function(_){},f.prototype.computeMergedLocation=function(_,E){var I=N.NONE;if(I=this._label.getLocation(E),!_.isNull(E)){var J=_.getLocation(E);I!==N.BOUNDARY&&(I=J)}return I},f.prototype.setLabel=function(){if(arguments.length!==2)return u.prototype.setLabel.apply(this,arguments);var _=arguments[0],E=arguments[1];this._label===null?this._label=new fr(_,E):this._label.setLocation(_,E)},f.prototype.getEdges=function(){return this._edges},f.prototype.mergeLabel=function(){if(arguments[0]instanceof f){var _=arguments[0];this.mergeLabel(_._label)}else if(arguments[0]instanceof fr)for(var E=arguments[0],I=0;I<2;I++){var J=this.computeMergedLocation(E,I);this._label.getLocation(I)===N.NONE&&this._label.setLocation(I,J)}},f.prototype.add=function(_){this._edges.insert(_),_.setNode(this)},f.prototype.setLabelBoundary=function(_){if(this._label===null)return null;var E=N.NONE;this._label!==null&&(E=this._label.getLocation(_));var I=null;switch(E){case N.BOUNDARY:I=N.INTERIOR;break;case N.INTERIOR:default:I=N.BOUNDARY}this._label.setLocation(_,I)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(je),cr=function(){this.nodeMap=new d,this.nodeFact=null;var u=arguments[0];this.nodeFact=u};cr.prototype.find=function(u){return this.nodeMap.get(u)},cr.prototype.addNode=function(){if(arguments[0]instanceof G){var u=arguments[0],f=this.nodeMap.get(u);return f===null&&(f=this.nodeFact.createNode(u),this.nodeMap.put(u,f)),f}if(arguments[0]instanceof Yi){var _=arguments[0],E=this.nodeMap.get(_.getCoordinate());return E===null?(this.nodeMap.put(_.getCoordinate(),_),_):(E.mergeLabel(_),E)}},cr.prototype.print=function(u){for(var f=this.iterator();f.hasNext();)f.next().print(u)},cr.prototype.iterator=function(){return this.nodeMap.values().iterator()},cr.prototype.values=function(){return this.nodeMap.values()},cr.prototype.getBoundaryNodes=function(u){for(var f=new $t,_=this.iterator();_.hasNext();){var E=_.next();E.getLabel().getLocation(u)===N.BOUNDARY&&f.add(E)}return f},cr.prototype.add=function(u){var f=u.getCoordinate();this.addNode(f).add(u)},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var M=function(){},A={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.isNorthern=function(u){return u===M.NE||u===M.NW},M.isOpposite=function(u,f){return u===f?!1:(u-f+4)%4===2},M.commonHalfPlane=function(u,f){if(u===f)return u;if((u-f+4)%4===2)return-1;var _=u<f?u:f;return _===0&&(u>f?u:f)===3?3:_},M.isInHalfPlane=function(u,f){return f===M.SE?u===M.SE||u===M.SW:u===f||u===f+1},M.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],f=arguments[1];if(u===0&&f===0)throw new S("Cannot compute the quadrant for point ( "+u+", "+f+" )");return u>=0?f>=0?M.NE:M.SE:f>=0?M.NW:M.SW}if(arguments[0]instanceof G&&arguments[1]instanceof G){var _=arguments[0],E=arguments[1];if(E.x===_.x&&E.y===_.y)throw new S("Cannot compute the quadrant for two identical points "+_);return E.x>=_.x?E.y>=_.y?M.NE:M.SE:E.y>=_.y?M.NW:M.SW}},A.NE.get=function(){return 0},A.NW.get=function(){return 1},A.SW.get=function(){return 2},A.SE.get=function(){return 3},Object.defineProperties(M,A);var j=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var u=arguments[0];this._edge=u}else if(arguments.length===3){var f=arguments[0],_=arguments[1],E=arguments[2];this._edge=f,this.init(_,E),this._label=null}else if(arguments.length===4){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3];this._edge=I,this.init(J,at),this._label=yt}};j.prototype.compareDirection=function(u){return this._dx===u._dx&&this._dy===u._dy?0:this._quadrant>u._quadrant?1:this._quadrant<u._quadrant?-1:Et.computeOrientation(u._p0,u._p1,this._p1)},j.prototype.getDy=function(){return this._dy},j.prototype.getCoordinate=function(){return this._p0},j.prototype.setNode=function(u){this._node=u},j.prototype.print=function(u){var f=Math.atan2(this._dy,this._dx),_=this.getClass().getName(),E=_.lastIndexOf("."),I=_.substring(E+1);u.print("  "+I+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+f+"   "+this._label)},j.prototype.compareTo=function(u){var f=u;return this.compareDirection(f)},j.prototype.getDirectedCoordinate=function(){return this._p1},j.prototype.getDx=function(){return this._dx},j.prototype.getLabel=function(){return this._label},j.prototype.getEdge=function(){return this._edge},j.prototype.getQuadrant=function(){return this._quadrant},j.prototype.getNode=function(){return this._node},j.prototype.toString=function(){var u=Math.atan2(this._dy,this._dx),f=this.getClass().getName(),_=f.lastIndexOf(".");return"  "+f.substring(_+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+u+"   "+this._label},j.prototype.computeLabel=function(u){},j.prototype.init=function(u,f){this._p0=u,this._p1=f,this._dx=f.x-u.x,this._dy=f.y-u.y,this._quadrant=M.quadrant(this._dx,this._dy),Q.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},j.prototype.interfaces_=function(){return[U]},j.prototype.getClass=function(){return j};var nt=function(u){function f(){var _=arguments[0],E=arguments[1];if(u.call(this,_),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=E,E)this.init(_.getCoordinate(0),_.getCoordinate(1));else{var I=_.getNumPoints()-1;this.init(_.getCoordinate(I),_.getCoordinate(I-1))}this.computeDirectedLabel()}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.getNextMin=function(){return this._nextMin},f.prototype.getDepth=function(_){return this._depth[_]},f.prototype.setVisited=function(_){this._isVisited=_},f.prototype.computeDirectedLabel=function(){this._label=new fr(this._edge.getLabel()),this._isForward||this._label.flip()},f.prototype.getNext=function(){return this._next},f.prototype.setDepth=function(_,E){if(this._depth[_]!==-999&&this._depth[_]!==E)throw new _i("assigned depths do not match",this.getCoordinate());this._depth[_]=E},f.prototype.isInteriorAreaEdge=function(){for(var _=!0,E=0;E<2;E++)this._label.isArea(E)&&this._label.getLocation(E,oe.LEFT)===N.INTERIOR&&this._label.getLocation(E,oe.RIGHT)===N.INTERIOR||(_=!1);return _},f.prototype.setNextMin=function(_){this._nextMin=_},f.prototype.print=function(_){u.prototype.print.call(this,_),_.print(" "+this._depth[oe.LEFT]+"/"+this._depth[oe.RIGHT]),_.print(" ("+this.getDepthDelta()+")"),this._isInResult&&_.print(" inResult")},f.prototype.setMinEdgeRing=function(_){this._minEdgeRing=_},f.prototype.isLineEdge=function(){var _=this._label.isLine(0)||this._label.isLine(1),E=!this._label.isArea(0)||this._label.allPositionsEqual(0,N.EXTERIOR),I=!this._label.isArea(1)||this._label.allPositionsEqual(1,N.EXTERIOR);return _&&E&&I},f.prototype.setEdgeRing=function(_){this._edgeRing=_},f.prototype.getMinEdgeRing=function(){return this._minEdgeRing},f.prototype.getDepthDelta=function(){var _=this._edge.getDepthDelta();return this._isForward||(_=-_),_},f.prototype.setInResult=function(_){this._isInResult=_},f.prototype.getSym=function(){return this._sym},f.prototype.isForward=function(){return this._isForward},f.prototype.getEdge=function(){return this._edge},f.prototype.printEdge=function(_){this.print(_),_.print(" "),this._isForward?this._edge.print(_):this._edge.printReverse(_)},f.prototype.setSym=function(_){this._sym=_},f.prototype.setVisitedEdge=function(_){this.setVisited(_),this._sym.setVisited(_)},f.prototype.setEdgeDepths=function(_,E){var I=this.getEdge().getDepthDelta();this._isForward||(I=-I);var J=1;_===oe.LEFT&&(J=-1);var at=oe.opposite(_),yt=E+I*J;this.setDepth(_,E),this.setDepth(at,yt)},f.prototype.getEdgeRing=function(){return this._edgeRing},f.prototype.isInResult=function(){return this._isInResult},f.prototype.setNext=function(_){this._next=_},f.prototype.isVisited=function(){return this._isVisited},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.depthFactor=function(_,E){return _===N.EXTERIOR&&E===N.INTERIOR?1:_===N.INTERIOR&&E===N.EXTERIOR?-1:0},f}(j),ht=function(){};ht.prototype.createNode=function(u){return new Yi(u,null)},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var xt=function(){if(this._edges=new $t,this._nodes=null,this._edgeEndList=new $t,arguments.length===0)this._nodes=new cr(new ht);else if(arguments.length===1){var u=arguments[0];this._nodes=new cr(u)}};xt.prototype.printEdges=function(u){u.println("Edges:");for(var f=0;f<this._edges.size();f++){u.println("edge "+f+":");var _=this._edges.get(f);_.print(u),_.eiList.print(u)}},xt.prototype.find=function(u){return this._nodes.find(u)},xt.prototype.addNode=function(){if(arguments[0]instanceof Yi){var u=arguments[0];return this._nodes.addNode(u)}if(arguments[0]instanceof G){var f=arguments[0];return this._nodes.addNode(f)}},xt.prototype.getNodeIterator=function(){return this._nodes.iterator()},xt.prototype.linkResultDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkResultDirectedEdges()},xt.prototype.debugPrintln=function(u){it.out.println(u)},xt.prototype.isBoundaryNode=function(u,f){var _=this._nodes.find(f);if(_===null)return!1;var E=_.getLabel();return E!==null&&E.getLocation(u)===N.BOUNDARY},xt.prototype.linkAllDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkAllDirectedEdges()},xt.prototype.matchInSameDirection=function(u,f,_,E){return!!u.equals(_)&&Et.computeOrientation(u,f,E)===Et.COLLINEAR&&M.quadrant(u,f)===M.quadrant(_,E)},xt.prototype.getEdgeEnds=function(){return this._edgeEndList},xt.prototype.debugPrint=function(u){it.out.print(u)},xt.prototype.getEdgeIterator=function(){return this._edges.iterator()},xt.prototype.findEdgeInSameDirection=function(u,f){for(var _=0;_<this._edges.size();_++){var E=this._edges.get(_),I=E.getCoordinates();if(this.matchInSameDirection(u,f,I[0],I[1])||this.matchInSameDirection(u,f,I[I.length-1],I[I.length-2]))return E}return null},xt.prototype.insertEdge=function(u){this._edges.add(u)},xt.prototype.findEdgeEnd=function(u){for(var f=this.getEdgeEnds().iterator();f.hasNext();){var _=f.next();if(_.getEdge()===u)return _}return null},xt.prototype.addEdges=function(u){for(var f=u.iterator();f.hasNext();){var _=f.next();this._edges.add(_);var E=new nt(_,!0),I=new nt(_,!1);E.setSym(I),I.setSym(E),this.add(E),this.add(I)}},xt.prototype.add=function(u){this._nodes.add(u),this._edgeEndList.add(u)},xt.prototype.getNodes=function(){return this._nodes.values()},xt.prototype.findEdge=function(u,f){for(var _=0;_<this._edges.size();_++){var E=this._edges.get(_),I=E.getCoordinates();if(u.equals(I[0])&&f.equals(I[1]))return E}return null},xt.prototype.interfaces_=function(){return[]},xt.prototype.getClass=function(){return xt},xt.linkResultDirectedEdges=function(u){for(var f=u.iterator();f.hasNext();)f.next().getEdges().linkResultDirectedEdges()};var Lt=function(){this._geometryFactory=null,this._shellList=new $t;var u=arguments[0];this._geometryFactory=u};Lt.prototype.sortShellsAndHoles=function(u,f,_){for(var E=u.iterator();E.hasNext();){var I=E.next();I.isHole()?_.add(I):f.add(I)}},Lt.prototype.computePolygons=function(u){for(var f=new $t,_=u.iterator();_.hasNext();){var E=_.next().toPolygon(this._geometryFactory);f.add(E)}return f},Lt.prototype.placeFreeHoles=function(u,f){for(var _=f.iterator();_.hasNext();){var E=_.next();if(E.getShell()===null){var I=this.findEdgeRingContaining(E,u);if(I===null)throw new _i("unable to assign hole to a shell",E.getCoordinate(0));E.setShell(I)}}},Lt.prototype.buildMinimalEdgeRings=function(u,f,_){for(var E=new $t,I=u.iterator();I.hasNext();){var J=I.next();if(J.getMaxNodeDegree()>2){J.linkDirectedEdgesForMinimalEdgeRings();var at=J.buildMinimalRings(),yt=this.findShell(at);yt!==null?(this.placePolygonHoles(yt,at),f.add(yt)):_.addAll(at)}else E.add(J)}return E},Lt.prototype.containsPoint=function(u){for(var f=this._shellList.iterator();f.hasNext();)if(f.next().containsPoint(u))return!0;return!1},Lt.prototype.buildMaximalEdgeRings=function(u){for(var f=new $t,_=u.iterator();_.hasNext();){var E=_.next();if(E.isInResult()&&E.getLabel().isArea()&&E.getEdgeRing()===null){var I=new us(E,this._geometryFactory);f.add(I),I.setInResult()}}return f},Lt.prototype.placePolygonHoles=function(u,f){for(var _=f.iterator();_.hasNext();){var E=_.next();E.isHole()&&E.setShell(u)}},Lt.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Lt.prototype.findEdgeRingContaining=function(u,f){for(var _=u.getLinearRing(),E=_.getEnvelopeInternal(),I=_.getCoordinateN(0),J=null,at=null,yt=f.iterator();yt.hasNext();){var St=yt.next(),Bt=St.getLinearRing(),Yt=Bt.getEnvelopeInternal();J!==null&&(at=J.getLinearRing().getEnvelopeInternal());var ee=!1;Yt.contains(E)&&Et.isPointInRing(I,Bt.getCoordinates())&&(ee=!0),ee&&(J===null||at.contains(Yt))&&(J=St)}return J},Lt.prototype.findShell=function(u){for(var f=0,_=null,E=u.iterator();E.hasNext();){var I=E.next();I.isHole()||(_=I,f++)}return Q.isTrue(f<=1,"found two shells in MinimalEdgeRing list"),_},Lt.prototype.add=function(){if(arguments.length===1){var u=arguments[0];this.add(u.getEdgeEnds(),u.getNodes())}else if(arguments.length===2){var f=arguments[0],_=arguments[1];xt.linkResultDirectedEdges(_);var E=this.buildMaximalEdgeRings(f),I=new $t,J=this.buildMinimalEdgeRings(E,this._shellList,I);this.sortShellsAndHoles(J,this._shellList,I),this.placeFreeHoles(this._shellList,I)}},Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt};var Rt=function(){};Rt.prototype.getBounds=function(){},Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt};var Pt=function(){this._bounds=null,this._item=null;var u=arguments[0],f=arguments[1];this._bounds=u,this._item=f};Pt.prototype.getItem=function(){return this._item},Pt.prototype.getBounds=function(){return this._bounds},Pt.prototype.interfaces_=function(){return[Rt,t]},Pt.prototype.getClass=function(){return Pt};var Nt=function(){this._size=null,this._items=null,this._size=0,this._items=new $t,this._items.add(null)};Nt.prototype.poll=function(){if(this.isEmpty())return null;var u=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),u},Nt.prototype.size=function(){return this._size},Nt.prototype.reorder=function(u){for(var f=null,_=this._items.get(u);2*u<=this._size&&((f=2*u)!==this._size&&this._items.get(f+1).compareTo(this._items.get(f))<0&&f++,this._items.get(f).compareTo(_)<0);u=f)this._items.set(u,this._items.get(f));this._items.set(u,_)},Nt.prototype.clear=function(){this._size=0,this._items.clear()},Nt.prototype.isEmpty=function(){return this._size===0},Nt.prototype.add=function(u){this._items.add(null),this._size+=1;var f=this._size;for(this._items.set(0,u);u.compareTo(this._items.get(Math.trunc(f/2)))<0;f/=2)this._items.set(f,this._items.get(Math.trunc(f/2)));this._items.set(f,u)},Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt};var Vt=function(){};Vt.prototype.visitItem=function(u){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var ne=function(){};ne.prototype.insert=function(u,f){},ne.prototype.remove=function(u,f){},ne.prototype.query=function(){},ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne};var Zt=function(){if(this._childBoundables=new $t,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._level=u}}},ge={serialVersionUID:{configurable:!0}};Zt.prototype.getLevel=function(){return this._level},Zt.prototype.size=function(){return this._childBoundables.size()},Zt.prototype.getChildBoundables=function(){return this._childBoundables},Zt.prototype.addChildBoundable=function(u){Q.isTrue(this._bounds===null),this._childBoundables.add(u)},Zt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Zt.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},Zt.prototype.interfaces_=function(){return[Rt,t]},Zt.prototype.getClass=function(){return Zt},ge.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(Zt,ge);var Ce=function(){};Ce.reverseOrder=function(){return{compare:function(u,f){return f.compareTo(u)}}},Ce.min=function(u){return Ce.sort(u),u.get(0)},Ce.sort=function(u,f){var _=u.toArray();f?Qe.sort(_,f):Qe.sort(_);for(var E=u.iterator(),I=0,J=_.length;I<J;I++)E.next(),E.set(_[I])},Ce.singletonList=function(u){var f=new $t;return f.add(u),f};var Ne=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var u=arguments[0],f=arguments[1],_=arguments[2];this._boundable1=u,this._boundable2=f,this._itemDistance=_,this._distance=this.distance()};Ne.prototype.expandToQueue=function(u,f){var _=Ne.isComposite(this._boundable1),E=Ne.isComposite(this._boundable2);if(_&&E)return Ne.area(this._boundable1)>Ne.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,u,f),null):(this.expand(this._boundable2,this._boundable1,u,f),null);if(_)return this.expand(this._boundable1,this._boundable2,u,f),null;if(E)return this.expand(this._boundable2,this._boundable1,u,f),null;throw new S("neither boundable is composite")},Ne.prototype.isLeaves=function(){return!(Ne.isComposite(this._boundable1)||Ne.isComposite(this._boundable2))},Ne.prototype.compareTo=function(u){var f=u;return this._distance<f._distance?-1:this._distance>f._distance?1:0},Ne.prototype.expand=function(u,f,_,E){for(var I=u.getChildBoundables().iterator();I.hasNext();){var J=I.next(),at=new Ne(J,f,this._itemDistance);at.getDistance()<E&&_.add(at)}},Ne.prototype.getBoundable=function(u){return u===0?this._boundable1:this._boundable2},Ne.prototype.getDistance=function(){return this._distance},Ne.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Ne.prototype.interfaces_=function(){return[U]},Ne.prototype.getClass=function(){return Ne},Ne.area=function(u){return u.getBounds().getArea()},Ne.isComposite=function(u){return u instanceof Zt};var be=function u(){if(this._root=null,this._built=!1,this._itemBoundables=new $t,this._nodeCapacity=null,arguments.length===0){var f=u.DEFAULT_NODE_CAPACITY;this._nodeCapacity=f}else if(arguments.length===1){var _=arguments[0];Q.isTrue(_>1,"Node capacity must be greater than 1"),this._nodeCapacity=_}},vi={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};be.prototype.getNodeCapacity=function(){return this._nodeCapacity},be.prototype.lastNode=function(u){return u.get(u.size()-1)},be.prototype.size=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var u=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var _=f.next();_ instanceof Zt?u+=this.size(_):_ instanceof Pt&&(u+=1)}return u}},be.prototype.removeItem=function(u,f){for(var _=null,E=u.getChildBoundables().iterator();E.hasNext();){var I=E.next();I instanceof Pt&&I.getItem()===f&&(_=I)}return _!==null&&(u.getChildBoundables().remove(_),!0)},be.prototype.itemsTree=function(){if(arguments.length===0){this.build();var u=this.itemsTree(this._root);return u===null?new $t:u}if(arguments.length===1){for(var f=arguments[0],_=new $t,E=f.getChildBoundables().iterator();E.hasNext();){var I=E.next();if(I instanceof Zt){var J=this.itemsTree(I);J!==null&&_.add(J)}else I instanceof Pt?_.add(I.getItem()):Q.shouldNeverReachHere()}return _.size()<=0?null:_}},be.prototype.insert=function(u,f){Q.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Pt(u,f))},be.prototype.boundablesAtLevel=function(){if(arguments.length===1){var u=arguments[0],f=new $t;return this.boundablesAtLevel(u,this._root,f),f}if(arguments.length===3){var _=arguments[0],E=arguments[1],I=arguments[2];if(Q.isTrue(_>-2),E.getLevel()===_)return I.add(E),null;for(var J=E.getChildBoundables().iterator();J.hasNext();){var at=J.next();at instanceof Zt?this.boundablesAtLevel(_,at,I):(Q.isTrue(at instanceof Pt),_===-1&&I.add(at))}return null}},be.prototype.query=function(){if(arguments.length===1){var u=arguments[0];this.build();var f=new $t;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.query(u,this._root,f),f}if(arguments.length===2){var _=arguments[0],E=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),_)&&this.query(_,this._root,E)}else if(arguments.length===3){if(w(arguments[2],Vt)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt)for(var I=arguments[0],J=arguments[1],at=arguments[2],yt=J.getChildBoundables(),St=0;St<yt.size();St++){var Bt=yt.get(St);this.getIntersectsOp().intersects(Bt.getBounds(),I)&&(Bt instanceof Zt?this.query(I,Bt,at):Bt instanceof Pt?at.visitItem(Bt.getItem()):Q.shouldNeverReachHere())}else if(w(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt)for(var Yt=arguments[0],ee=arguments[1],xe=arguments[2],Me=ee.getChildBoundables(),Be=0;Be<Me.size();Be++){var qe=Me.get(Be);this.getIntersectsOp().intersects(qe.getBounds(),Yt)&&(qe instanceof Zt?this.query(Yt,qe,xe):qe instanceof Pt?xe.add(qe.getItem()):Q.shouldNeverReachHere())}}},be.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},be.prototype.getRoot=function(){return this.build(),this._root},be.prototype.remove=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.remove(u,this._root,f)}if(arguments.length===3){var _=arguments[0],E=arguments[1],I=arguments[2],J=this.removeItem(E,I);if(J)return!0;for(var at=null,yt=E.getChildBoundables().iterator();yt.hasNext();){var St=yt.next();if(this.getIntersectsOp().intersects(St.getBounds(),_)&&St instanceof Zt&&(J=this.remove(_,St,I))){at=St;break}}return at!==null&&at.getChildBoundables().isEmpty()&&E.getChildBoundables().remove(at),J}},be.prototype.createHigherLevels=function(u,f){Q.isTrue(!u.isEmpty());var _=this.createParentBoundables(u,f+1);return _.size()===1?_.get(0):this.createHigherLevels(_,f+1)},be.prototype.depth=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var u=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var _=f.next();if(_ instanceof Zt){var E=this.depth(_);E>u&&(u=E)}}return u+1}},be.prototype.createParentBoundables=function(u,f){Q.isTrue(!u.isEmpty());var _=new $t;_.add(this.createNode(f));var E=new $t(u);Ce.sort(E,this.getComparator());for(var I=E.iterator();I.hasNext();){var J=I.next();this.lastNode(_).getChildBoundables().size()===this.getNodeCapacity()&&_.add(this.createNode(f)),this.lastNode(_).addChildBoundable(J)}return _},be.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},be.prototype.interfaces_=function(){return[t]},be.prototype.getClass=function(){return be},be.compareDoubles=function(u,f){return u>f?1:u<f?-1:0},vi.IntersectsOp.get=function(){return mi},vi.serialVersionUID.get=function(){return-3886435814360241e3},vi.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(be,vi);var mi=function(){},Er=function(){};Er.prototype.distance=function(u,f){},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er};var an=function(u){function f(E){E=E||f.DEFAULT_NODE_CAPACITY,u.call(this,E)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return f.prototype.createParentBoundablesFromVerticalSlices=function(E,I){Q.isTrue(E.length>0);for(var J=new $t,at=0;at<E.length;at++)J.addAll(this.createParentBoundablesFromVerticalSlice(E[at],I));return J},f.prototype.createNode=function(E){return new qn(E)},f.prototype.size=function(){return arguments.length===0?u.prototype.size.call(this):u.prototype.size.apply(this,arguments)},f.prototype.insert=function(){if(arguments.length!==2)return u.prototype.insert.apply(this,arguments);var E=arguments[0],I=arguments[1];if(E.isNull())return null;u.prototype.insert.call(this,E,I)},f.prototype.getIntersectsOp=function(){return f.intersectsOp},f.prototype.verticalSlices=function(E,I){for(var J=Math.trunc(Math.ceil(E.size()/I)),at=new Array(I).fill(null),yt=E.iterator(),St=0;St<I;St++){at[St]=new $t;for(var Bt=0;yt.hasNext()&&Bt<J;){var Yt=yt.next();at[St].add(Yt),Bt++}}return at},f.prototype.query=function(){if(arguments.length===1){var E=arguments[0];return u.prototype.query.call(this,E)}if(arguments.length===2){var I=arguments[0],J=arguments[1];u.prototype.query.call(this,I,J)}else if(arguments.length===3){if(w(arguments[2],Vt)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt){var at=arguments[0],yt=arguments[1],St=arguments[2];u.prototype.query.call(this,at,yt,St)}else if(w(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt){var Bt=arguments[0],Yt=arguments[1],ee=arguments[2];u.prototype.query.call(this,Bt,Yt,ee)}}},f.prototype.getComparator=function(){return f.yComparator},f.prototype.createParentBoundablesFromVerticalSlice=function(E,I){return u.prototype.createParentBoundables.call(this,E,I)},f.prototype.remove=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return u.prototype.remove.call(this,E,I)}return u.prototype.remove.apply(this,arguments)},f.prototype.depth=function(){return arguments.length===0?u.prototype.depth.call(this):u.prototype.depth.apply(this,arguments)},f.prototype.createParentBoundables=function(E,I){Q.isTrue(!E.isEmpty());var J=Math.trunc(Math.ceil(E.size()/this.getNodeCapacity())),at=new $t(E);Ce.sort(at,f.xComparator);var yt=this.verticalSlices(at,Math.trunc(Math.ceil(Math.sqrt(J))));return this.createParentBoundablesFromVerticalSlices(yt,I)},f.prototype.nearestNeighbour=function(){if(arguments.length===1){if(w(arguments[0],Er)){var E=arguments[0],I=new Ne(this.getRoot(),this.getRoot(),E);return this.nearestNeighbour(I)}if(arguments[0]instanceof Ne){var J=arguments[0];return this.nearestNeighbour(J,O.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof f&&w(arguments[1],Er)){var at=arguments[0],yt=arguments[1],St=new Ne(this.getRoot(),at.getRoot(),yt);return this.nearestNeighbour(St)}if(arguments[0]instanceof Ne&&typeof arguments[1]=="number"){var Bt=arguments[0],Yt=arguments[1],ee=null,xe=new Nt;for(xe.add(Bt);!xe.isEmpty()&&Yt>0;){var Me=xe.poll(),Be=Me.getDistance();if(Be>=Yt)break;Me.isLeaves()?(Yt=Be,ee=Me):Me.expandToQueue(xe,Yt)}return[ee.getBoundable(0).getItem(),ee.getBoundable(1).getItem()]}}else if(arguments.length===3){var qe=arguments[0],gi=arguments[1],qi=arguments[2],Fn=new Pt(qe,gi),to=new Ne(this.getRoot(),Fn,qi);return this.nearestNeighbour(to)[0]}},f.prototype.interfaces_=function(){return[ne,t]},f.prototype.getClass=function(){return f},f.centreX=function(E){return f.avg(E.getMinX(),E.getMaxX())},f.avg=function(E,I){return(E+I)/2},f.centreY=function(E){return f.avg(E.getMinY(),E.getMaxY())},_.STRtreeNode.get=function(){return qn},_.serialVersionUID.get=function(){return 0x39920f7d5f261e0},_.xComparator.get=function(){return{interfaces_:function(){return[q]},compare:function(E,I){return u.compareDoubles(f.centreX(E.getBounds()),f.centreX(I.getBounds()))}}},_.yComparator.get=function(){return{interfaces_:function(){return[q]},compare:function(E,I){return u.compareDoubles(f.centreY(E.getBounds()),f.centreY(I.getBounds()))}}},_.intersectsOp.get=function(){return{interfaces_:function(){return[u.IntersectsOp]},intersects:function(E,I){return E.intersects(I)}}},_.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(f,_),f}(be),qn=function(u){function f(){var _=arguments[0];u.call(this,_)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.computeBounds=function(){for(var _=null,E=this.getChildBoundables().iterator();E.hasNext();){var I=E.next();_===null?_=new wt(I.getBounds()):_.expandToInclude(I.getBounds())}return _},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Zt),Mi=function(){};Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.relativeSign=function(u,f){return u<f?-1:u>f?1:0},Mi.compare=function(u,f,_){if(f.equals2D(_))return 0;var E=Mi.relativeSign(f.x,_.x),I=Mi.relativeSign(f.y,_.y);switch(u){case 0:return Mi.compareValue(E,I);case 1:return Mi.compareValue(I,E);case 2:return Mi.compareValue(I,-E);case 3:return Mi.compareValue(-E,I);case 4:return Mi.compareValue(-E,-I);case 5:return Mi.compareValue(-I,-E);case 6:return Mi.compareValue(-I,E);case 7:return Mi.compareValue(E,-I)}return Q.shouldNeverReachHere("invalid octant value"),0},Mi.compareValue=function(u,f){return u<0?-1:u>0?1:f<0?-1:f>0?1:0};var gs=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var u=arguments[0],f=arguments[1],_=arguments[2],E=arguments[3];this._segString=u,this.coord=new G(f),this.segmentIndex=_,this._segmentOctant=E,this._isInterior=!f.equals2D(u.getCoordinate(_))};gs.prototype.getCoordinate=function(){return this.coord},gs.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex)},gs.prototype.compareTo=function(u){var f=u;return this.segmentIndex<f.segmentIndex?-1:this.segmentIndex>f.segmentIndex?1:this.coord.equals2D(f.coord)?0:Mi.compare(this._segmentOctant,this.coord,f.coord)},gs.prototype.isEndPoint=function(u){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===u},gs.prototype.isInterior=function(){return this._isInterior},gs.prototype.interfaces_=function(){return[U]},gs.prototype.getClass=function(){return gs};var Bi=function(){this._nodeMap=new d,this._edge=null;var u=arguments[0];this._edge=u};Bi.prototype.getSplitCoordinates=function(){var u=new br;this.addEndpoints();for(var f=this.iterator(),_=f.next();f.hasNext();){var E=f.next();this.addEdgeCoordinates(_,E,u),_=E}return u.toCoordinateArray()},Bi.prototype.addCollapsedNodes=function(){var u=new $t;this.findCollapsesFromInsertedNodes(u),this.findCollapsesFromExistingVertices(u);for(var f=u.iterator();f.hasNext();){var _=f.next().intValue();this.add(this._edge.getCoordinate(_),_)}},Bi.prototype.print=function(u){u.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(u)},Bi.prototype.findCollapsesFromExistingVertices=function(u){for(var f=0;f<this._edge.size()-2;f++){var _=this._edge.getCoordinate(f),E=this._edge.getCoordinate(f+2);_.equals2D(E)&&u.add(new R(f+1))}},Bi.prototype.addEdgeCoordinates=function(u,f,_){var E=this._edge.getCoordinate(f.segmentIndex),I=f.isInterior()||!f.coord.equals2D(E);_.add(new G(u.coord),!1);for(var J=u.segmentIndex+1;J<=f.segmentIndex;J++)_.add(this._edge.getCoordinate(J));I&&_.add(new G(f.coord))},Bi.prototype.iterator=function(){return this._nodeMap.values().iterator()},Bi.prototype.addSplitEdges=function(u){this.addEndpoints(),this.addCollapsedNodes();for(var f=this.iterator(),_=f.next();f.hasNext();){var E=f.next(),I=this.createSplitEdge(_,E);u.add(I),_=E}},Bi.prototype.findCollapseIndex=function(u,f,_){if(!u.coord.equals2D(f.coord))return!1;var E=f.segmentIndex-u.segmentIndex;return f.isInterior()||E--,E===1&&(_[0]=u.segmentIndex+1,!0)},Bi.prototype.findCollapsesFromInsertedNodes=function(u){for(var f=new Array(1).fill(null),_=this.iterator(),E=_.next();_.hasNext();){var I=_.next();this.findCollapseIndex(E,I,f)&&u.add(new R(f[0])),E=I}},Bi.prototype.getEdge=function(){return this._edge},Bi.prototype.addEndpoints=function(){var u=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(u),u)},Bi.prototype.createSplitEdge=function(u,f){var _=f.segmentIndex-u.segmentIndex+2,E=this._edge.getCoordinate(f.segmentIndex),I=f.isInterior()||!f.coord.equals2D(E);I||_--;var J=new Array(_).fill(null),at=0;J[at++]=new G(u.coord);for(var yt=u.segmentIndex+1;yt<=f.segmentIndex;yt++)J[at++]=this._edge.getCoordinate(yt);return I&&(J[at]=new G(f.coord)),new Si(J,this._edge.getData())},Bi.prototype.add=function(u,f){var _=new gs(this._edge,u,f,this._edge.getSegmentOctant(f)),E=this._nodeMap.get(_);return E!==null?(Q.isTrue(E.coord.equals2D(u),"Found equal nodes with different coordinates"),E):(this._nodeMap.put(_,_),_)},Bi.prototype.checkSplitEdgesCorrectness=function(u){var f=this._edge.getCoordinates(),_=u.get(0).getCoordinate(0);if(!_.equals2D(f[0]))throw new gt("bad split edge start point at "+_);var E=u.get(u.size()-1).getCoordinates(),I=E[E.length-1];if(!I.equals2D(f[f.length-1]))throw new gt("bad split edge end point at "+I)},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi};var Wn=function(){};Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn},Wn.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],f=arguments[1];if(u===0&&f===0)throw new S("Cannot compute the octant for point ( "+u+", "+f+" )");var _=Math.abs(u),E=Math.abs(f);return u>=0?f>=0?_>=E?0:1:_>=E?7:6:f>=0?_>=E?3:2:_>=E?4:5}if(arguments[0]instanceof G&&arguments[1]instanceof G){var I=arguments[0],J=arguments[1],at=J.x-I.x,yt=J.y-I.y;if(at===0&&yt===0)throw new S("Cannot compute the octant for two identical points "+I);return Wn.octant(at,yt)}};var es=function(){};es.prototype.getCoordinates=function(){},es.prototype.size=function(){},es.prototype.getCoordinate=function(u){},es.prototype.isClosed=function(){},es.prototype.setData=function(u){},es.prototype.getData=function(){},es.prototype.interfaces_=function(){return[]},es.prototype.getClass=function(){return es};var Is=function(){};Is.prototype.addIntersection=function(u,f){},Is.prototype.interfaces_=function(){return[es]},Is.prototype.getClass=function(){return Is};var Si=function(){this._nodeList=new Bi(this),this._pts=null,this._data=null;var u=arguments[0],f=arguments[1];this._pts=u,this._data=f};Si.prototype.getCoordinates=function(){return this._pts},Si.prototype.size=function(){return this._pts.length},Si.prototype.getCoordinate=function(u){return this._pts[u]},Si.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Si.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(u),this.getCoordinate(u+1))},Si.prototype.setData=function(u){this._data=u},Si.prototype.safeOctant=function(u,f){return u.equals2D(f)?0:Wn.octant(u,f)},Si.prototype.getData=function(){return this._data},Si.prototype.addIntersection=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];this.addIntersectionNode(u,f)}else if(arguments.length===4){var _=arguments[0],E=arguments[1],I=arguments[3],J=new G(_.getIntersection(I));this.addIntersection(J,E)}},Si.prototype.toString=function(){return kt.toLineString(new pe(this._pts))},Si.prototype.getNodeList=function(){return this._nodeList},Si.prototype.addIntersectionNode=function(u,f){var _=f,E=_+1;if(E<this._pts.length){var I=this._pts[E];u.equals2D(I)&&(_=E)}return this._nodeList.add(u,_)},Si.prototype.addIntersections=function(u,f,_){for(var E=0;E<u.getIntersectionNum();E++)this.addIntersection(u,f,_,E)},Si.prototype.interfaces_=function(){return[Is]},Si.prototype.getClass=function(){return Si},Si.getNodedSubstrings=function(){if(arguments.length===1){var u=arguments[0],f=new $t;return Si.getNodedSubstrings(u,f),f}if(arguments.length===2)for(var _=arguments[0],E=arguments[1],I=_.iterator();I.hasNext();)I.next().getNodeList().addSplitEdges(E)};var Pe=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new G,this.p1=new G;else if(arguments.length===1){var u=arguments[0];this.p0=new G(u.p0),this.p1=new G(u.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var f=arguments[0],_=arguments[1],E=arguments[2],I=arguments[3];this.p0=new G(f,_),this.p1=new G(E,I)}},ba={serialVersionUID:{configurable:!0}};Pe.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Pe.prototype.orientationIndex=function(){if(arguments[0]instanceof Pe){var u=arguments[0],f=Et.orientationIndex(this.p0,this.p1,u.p0),_=Et.orientationIndex(this.p0,this.p1,u.p1);return f>=0&&_>=0||f<=0&&_<=0?Math.max(f,_):0}if(arguments[0]instanceof G){var E=arguments[0];return Et.orientationIndex(this.p0,this.p1,E)}},Pe.prototype.toGeometry=function(u){return u.createLineString([this.p0,this.p1])},Pe.prototype.isVertical=function(){return this.p0.x===this.p1.x},Pe.prototype.equals=function(u){if(!(u instanceof Pe))return!1;var f=u;return this.p0.equals(f.p0)&&this.p1.equals(f.p1)},Pe.prototype.intersection=function(u){var f=new lt;return f.computeIntersection(this.p0,this.p1,u.p0,u.p1),f.hasIntersection()?f.getIntersection(0):null},Pe.prototype.project=function(){if(arguments[0]instanceof G){var u=arguments[0];if(u.equals(this.p0)||u.equals(this.p1))return new G(u);var f=this.projectionFactor(u),_=new G;return _.x=this.p0.x+f*(this.p1.x-this.p0.x),_.y=this.p0.y+f*(this.p1.y-this.p0.y),_}if(arguments[0]instanceof Pe){var E=arguments[0],I=this.projectionFactor(E.p0),J=this.projectionFactor(E.p1);if(I>=1&&J>=1||I<=0&&J<=0)return null;var at=this.project(E.p0);I<0&&(at=this.p0),I>1&&(at=this.p1);var yt=this.project(E.p1);return J<0&&(yt=this.p0),J>1&&(yt=this.p1),new Pe(at,yt)}},Pe.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Pe.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Pe.prototype.getCoordinate=function(u){return u===0?this.p0:this.p1},Pe.prototype.distancePerpendicular=function(u){return Et.distancePointLinePerpendicular(u,this.p0,this.p1)},Pe.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Pe.prototype.midPoint=function(){return Pe.midPoint(this.p0,this.p1)},Pe.prototype.projectionFactor=function(u){if(u.equals(this.p0))return 0;if(u.equals(this.p1))return 1;var f=this.p1.x-this.p0.x,_=this.p1.y-this.p0.y,E=f*f+_*_;return E<=0?O.NaN:((u.x-this.p0.x)*f+(u.y-this.p0.y)*_)/E},Pe.prototype.closestPoints=function(u){var f=this.intersection(u);if(f!==null)return[f,f];var _=new Array(2).fill(null),E=O.MAX_VALUE,I=null,J=this.closestPoint(u.p0);E=J.distance(u.p0),_[0]=J,_[1]=u.p0;var at=this.closestPoint(u.p1);(I=at.distance(u.p1))<E&&(E=I,_[0]=at,_[1]=u.p1);var yt=u.closestPoint(this.p0);(I=yt.distance(this.p0))<E&&(E=I,_[0]=this.p0,_[1]=yt);var St=u.closestPoint(this.p1);return(I=St.distance(this.p1))<E&&(E=I,_[0]=this.p1,_[1]=St),_},Pe.prototype.closestPoint=function(u){var f=this.projectionFactor(u);return f>0&&f<1?this.project(u):this.p0.distance(u)<this.p1.distance(u)?this.p0:this.p1},Pe.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Pe.prototype.getLength=function(){return this.p0.distance(this.p1)},Pe.prototype.compareTo=function(u){var f=u,_=this.p0.compareTo(f.p0);return _!==0?_:this.p1.compareTo(f.p1)},Pe.prototype.reverse=function(){var u=this.p0;this.p0=this.p1,this.p1=u},Pe.prototype.equalsTopo=function(u){return this.p0.equals(u.p0)&&(this.p1.equals(u.p1)||this.p0.equals(u.p1))&&this.p1.equals(u.p0)},Pe.prototype.lineIntersection=function(u){try{return mt.intersection(this.p0,this.p1,u.p0,u.p1)}catch(f){if(!(f instanceof V))throw f}return null},Pe.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Pe.prototype.pointAlongOffset=function(u,f){var _=this.p0.x+u*(this.p1.x-this.p0.x),E=this.p0.y+u*(this.p1.y-this.p0.y),I=this.p1.x-this.p0.x,J=this.p1.y-this.p0.y,at=Math.sqrt(I*I+J*J),yt=0,St=0;if(f!==0){if(at<=0)throw new Error("Cannot compute offset from zero-length line segment");yt=f*I/at,St=f*J/at}return new G(_-St,E+yt)},Pe.prototype.setCoordinates=function(){if(arguments.length===1){var u=arguments[0];this.setCoordinates(u.p0,u.p1)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this.p0.x=f.x,this.p0.y=f.y,this.p1.x=_.x,this.p1.y=_.y}},Pe.prototype.segmentFraction=function(u){var f=this.projectionFactor(u);return f<0?f=0:(f>1||O.isNaN(f))&&(f=1),f},Pe.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Pe.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Pe.prototype.distance=function(){if(arguments[0]instanceof Pe){var u=arguments[0];return Et.distanceLineLine(this.p0,this.p1,u.p0,u.p1)}if(arguments[0]instanceof G){var f=arguments[0];return Et.distancePointLine(f,this.p0,this.p1)}},Pe.prototype.pointAlong=function(u){var f=new G;return f.x=this.p0.x+u*(this.p1.x-this.p0.x),f.y=this.p0.y+u*(this.p1.y-this.p0.y),f},Pe.prototype.hashCode=function(){var u=O.doubleToLongBits(this.p0.x);u^=31*O.doubleToLongBits(this.p0.y);var f=Math.trunc(u)^Math.trunc(u>>32),_=O.doubleToLongBits(this.p1.x);return _^=31*O.doubleToLongBits(this.p1.y),f^(Math.trunc(_)^Math.trunc(_>>32))},Pe.prototype.interfaces_=function(){return[U,t]},Pe.prototype.getClass=function(){return Pe},Pe.midPoint=function(u,f){return new G((u.x+f.x)/2,(u.y+f.y)/2)},ba.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Pe,ba);var lo=function(){this.tempEnv1=new wt,this.tempEnv2=new wt,this._overlapSeg1=new Pe,this._overlapSeg2=new Pe};lo.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var u=arguments[0],f=arguments[1],_=arguments[2],E=arguments[3];u.getLineSegment(f,this._overlapSeg1),_.getLineSegment(E,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},lo.prototype.interfaces_=function(){return[]},lo.prototype.getClass=function(){return lo};var Fi=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var u=arguments[0],f=arguments[1],_=arguments[2],E=arguments[3];this._pts=u,this._start=f,this._end=_,this._context=E};Fi.prototype.getLineSegment=function(u,f){f.p0=this._pts[u],f.p1=this._pts[u+1]},Fi.prototype.computeSelect=function(u,f,_,E){var I=this._pts[f],J=this._pts[_];if(E.tempEnv1.init(I,J),_-f==1)return E.select(this,f),null;if(!u.intersects(E.tempEnv1))return null;var at=Math.trunc((f+_)/2);f<at&&this.computeSelect(u,f,at,E),at<_&&this.computeSelect(u,at,_,E)},Fi.prototype.getCoordinates=function(){for(var u=new Array(this._end-this._start+1).fill(null),f=0,_=this._start;_<=this._end;_++)u[f++]=this._pts[_];return u},Fi.prototype.computeOverlaps=function(u,f){this.computeOverlapsInternal(this._start,this._end,u,u._start,u._end,f)},Fi.prototype.setId=function(u){this._id=u},Fi.prototype.select=function(u,f){this.computeSelect(u,this._start,this._end,f)},Fi.prototype.getEnvelope=function(){if(this._env===null){var u=this._pts[this._start],f=this._pts[this._end];this._env=new wt(u,f)}return this._env},Fi.prototype.getEndIndex=function(){return this._end},Fi.prototype.getStartIndex=function(){return this._start},Fi.prototype.getContext=function(){return this._context},Fi.prototype.getId=function(){return this._id},Fi.prototype.computeOverlapsInternal=function(u,f,_,E,I,J){var at=this._pts[u],yt=this._pts[f],St=_._pts[E],Bt=_._pts[I];if(f-u==1&&I-E==1)return J.overlap(this,u,_,E),null;if(J.tempEnv1.init(at,yt),J.tempEnv2.init(St,Bt),!J.tempEnv1.intersects(J.tempEnv2))return null;var Yt=Math.trunc((u+f)/2),ee=Math.trunc((E+I)/2);u<Yt&&(E<ee&&this.computeOverlapsInternal(u,Yt,_,E,ee,J),ee<I&&this.computeOverlapsInternal(u,Yt,_,ee,I,J)),Yt<f&&(E<ee&&this.computeOverlapsInternal(Yt,f,_,E,ee,J),ee<I&&this.computeOverlapsInternal(Yt,f,_,ee,I,J))},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi};var hs=function(){};hs.prototype.interfaces_=function(){return[]},hs.prototype.getClass=function(){return hs},hs.getChainStartIndices=function(u){var f=0,_=new $t;_.add(new R(f));do{var E=hs.findChainEnd(u,f);_.add(new R(E)),f=E}while(f<u.length-1);return hs.toIntArray(_)},hs.findChainEnd=function(u,f){for(var _=f;_<u.length-1&&u[_].equals2D(u[_+1]);)_++;if(_>=u.length-1)return u.length-1;for(var E=M.quadrant(u[_],u[_+1]),I=f+1;I<u.length&&!(!u[I-1].equals2D(u[I])&&M.quadrant(u[I-1],u[I])!==E);)I++;return I-1},hs.getChains=function(){if(arguments.length===1){var u=arguments[0];return hs.getChains(u,null)}if(arguments.length===2){for(var f=arguments[0],_=arguments[1],E=new $t,I=hs.getChainStartIndices(f),J=0;J<I.length-1;J++){var at=new Fi(f,I[J],I[J+1],_);E.add(at)}return E}},hs.toIntArray=function(u){for(var f=new Array(u.size()).fill(null),_=0;_<f.length;_++)f[_]=u.get(_).intValue();return f};var Vs=function(){};Vs.prototype.computeNodes=function(u){},Vs.prototype.getNodedSubstrings=function(){},Vs.prototype.interfaces_=function(){return[]},Vs.prototype.getClass=function(){return Vs};var ra=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setSegmentIntersector(u)}}};ra.prototype.setSegmentIntersector=function(u){this._segInt=u},ra.prototype.interfaces_=function(){return[Vs]},ra.prototype.getClass=function(){return ra};var al=function(u){function f(E){E?u.call(this,E):u.call(this),this._monoChains=new $t,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var _={SegmentOverlapAction:{configurable:!0}};return f.prototype.getMonotoneChains=function(){return this._monoChains},f.prototype.getNodedSubstrings=function(){return Si.getNodedSubstrings(this._nodedSegStrings)},f.prototype.getIndex=function(){return this._index},f.prototype.add=function(E){for(var I=hs.getChains(E.getCoordinates(),E).iterator();I.hasNext();){var J=I.next();J.setId(this._idCounter++),this._index.insert(J.getEnvelope(),J),this._monoChains.add(J)}},f.prototype.computeNodes=function(E){this._nodedSegStrings=E;for(var I=E.iterator();I.hasNext();)this.add(I.next());this.intersectChains()},f.prototype.intersectChains=function(){for(var E=new _a(this._segInt),I=this._monoChains.iterator();I.hasNext();)for(var J=I.next(),at=this._index.query(J.getEnvelope()).iterator();at.hasNext();){var yt=at.next();if(yt.getId()>J.getId()&&(J.computeOverlaps(yt,E),this._nOverlaps++),this._segInt.isDone())return null}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},_.SegmentOverlapAction.get=function(){return _a},Object.defineProperties(f,_),f}(ra),_a=function(u){function f(){u.call(this),this._si=null;var _=arguments[0];this._si=_}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.overlap=function(){if(arguments.length!==4)return u.prototype.overlap.apply(this,arguments);var _=arguments[0],E=arguments[1],I=arguments[2],J=arguments[3],at=_.getContext(),yt=I.getContext();this._si.processIntersections(at,E,yt,J)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(lo),Pr=function u(){if(this._quadrantSegments=u.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=u.CAP_ROUND,this._joinStyle=u.JOIN_ROUND,this._mitreLimit=u.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=u.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var f=arguments[0];this.setQuadrantSegments(f)}else if(arguments.length===2){var _=arguments[0],E=arguments[1];this.setQuadrantSegments(_),this.setEndCapStyle(E)}else if(arguments.length===4){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3];this.setQuadrantSegments(I),this.setEndCapStyle(J),this.setJoinStyle(at),this.setMitreLimit(yt)}}},Ss={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Pr.prototype.getEndCapStyle=function(){return this._endCapStyle},Pr.prototype.isSingleSided=function(){return this._isSingleSided},Pr.prototype.setQuadrantSegments=function(u){this._quadrantSegments=u,this._quadrantSegments===0&&(this._joinStyle=Pr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Pr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),u<=0&&(this._quadrantSegments=1),this._joinStyle!==Pr.JOIN_ROUND&&(this._quadrantSegments=Pr.DEFAULT_QUADRANT_SEGMENTS)},Pr.prototype.getJoinStyle=function(){return this._joinStyle},Pr.prototype.setJoinStyle=function(u){this._joinStyle=u},Pr.prototype.setSimplifyFactor=function(u){this._simplifyFactor=u<0?0:u},Pr.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Pr.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Pr.prototype.setEndCapStyle=function(u){this._endCapStyle=u},Pr.prototype.getMitreLimit=function(){return this._mitreLimit},Pr.prototype.setMitreLimit=function(u){this._mitreLimit=u},Pr.prototype.setSingleSided=function(u){this._isSingleSided=u},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.bufferDistanceError=function(u){var f=Math.PI/2/u;return 1-Math.cos(f/2)},Ss.CAP_ROUND.get=function(){return 1},Ss.CAP_FLAT.get=function(){return 2},Ss.CAP_SQUARE.get=function(){return 3},Ss.JOIN_ROUND.get=function(){return 1},Ss.JOIN_MITRE.get=function(){return 2},Ss.JOIN_BEVEL.get=function(){return 3},Ss.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Ss.DEFAULT_MITRE_LIMIT.get=function(){return 5},Ss.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(Pr,Ss);var ki=function(u){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Et.COUNTERCLOCKWISE,this._inputLine=u||null},uo={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};ki.prototype.isDeletable=function(u,f,_,E){var I=this._inputLine[u],J=this._inputLine[f],at=this._inputLine[_];return!!this.isConcave(I,J,at)&&!!this.isShallow(I,J,at,E)&&this.isShallowSampled(I,J,u,_,E)},ki.prototype.deleteShallowConcavities=function(){for(var u=1,f=this.findNextNonDeletedIndex(u),_=this.findNextNonDeletedIndex(f),E=!1;_<this._inputLine.length;){var I=!1;this.isDeletable(u,f,_,this._distanceTol)&&(this._isDeleted[f]=ki.DELETE,I=!0,E=!0),u=I?_:f,f=this.findNextNonDeletedIndex(u),_=this.findNextNonDeletedIndex(f)}return E},ki.prototype.isShallowConcavity=function(u,f,_,E){return Et.computeOrientation(u,f,_)!==this._angleOrientation?!1:Et.distancePointLine(f,u,_)<E},ki.prototype.isShallowSampled=function(u,f,_,E,I){var J=Math.trunc((E-_)/ki.NUM_PTS_TO_CHECK);J<=0&&(J=1);for(var at=_;at<E;at+=J)if(!this.isShallow(u,f,this._inputLine[at],I))return!1;return!0},ki.prototype.isConcave=function(u,f,_){var E=Et.computeOrientation(u,f,_)===this._angleOrientation;return E},ki.prototype.simplify=function(u){this._distanceTol=Math.abs(u),u<0&&(this._angleOrientation=Et.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var f=!1;do f=this.deleteShallowConcavities();while(f);return this.collapseLine()},ki.prototype.findNextNonDeletedIndex=function(u){for(var f=u+1;f<this._inputLine.length&&this._isDeleted[f]===ki.DELETE;)f++;return f},ki.prototype.isShallow=function(u,f,_,E){return Et.distancePointLine(f,u,_)<E},ki.prototype.collapseLine=function(){for(var u=new br,f=0;f<this._inputLine.length;f++)this._isDeleted[f]!==ki.DELETE&&u.add(this._inputLine[f]);return u.toCoordinateArray()},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.simplify=function(u,f){return new ki(u).simplify(f)},uo.INIT.get=function(){return 0},uo.DELETE.get=function(){return 1},uo.KEEP.get=function(){return 1},uo.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(ki,uo);var Zi=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new $t},su={COORDINATE_ARRAY_TYPE:{configurable:!0}};Zi.prototype.getCoordinates=function(){return this._ptList.toArray(Zi.COORDINATE_ARRAY_TYPE)},Zi.prototype.setPrecisionModel=function(u){this._precisionModel=u},Zi.prototype.addPt=function(u){var f=new G(u);if(this._precisionModel.makePrecise(f),this.isRedundant(f))return null;this._ptList.add(f)},Zi.prototype.revere=function(){},Zi.prototype.addPts=function(u,f){if(f)for(var _=0;_<u.length;_++)this.addPt(u[_]);else for(var E=u.length-1;E>=0;E--)this.addPt(u[E])},Zi.prototype.isRedundant=function(u){if(this._ptList.size()<1)return!1;var f=this._ptList.get(this._ptList.size()-1);return u.distance(f)<this._minimimVertexDistance},Zi.prototype.toString=function(){return new Se().createLineString(this.getCoordinates()).toString()},Zi.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var u=new G(this._ptList.get(0)),f=this._ptList.get(this._ptList.size()-1);if(u.equals(f))return null;this._ptList.add(u)},Zi.prototype.setMinimumVertexDistance=function(u){this._minimimVertexDistance=u},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi},su.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Zi,su);var dr=function(){},_n={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},dr.toDegrees=function(u){return 180*u/Math.PI},dr.normalize=function(u){for(;u>Math.PI;)u-=dr.PI_TIMES_2;for(;u<=-Math.PI;)u+=dr.PI_TIMES_2;return u},dr.angle=function(){if(arguments.length===1){var u=arguments[0];return Math.atan2(u.y,u.x)}if(arguments.length===2){var f=arguments[0],_=arguments[1],E=_.x-f.x,I=_.y-f.y;return Math.atan2(I,E)}},dr.isAcute=function(u,f,_){var E=u.x-f.x,I=u.y-f.y;return E*(_.x-f.x)+I*(_.y-f.y)>0},dr.isObtuse=function(u,f,_){var E=u.x-f.x,I=u.y-f.y;return E*(_.x-f.x)+I*(_.y-f.y)<0},dr.interiorAngle=function(u,f,_){var E=dr.angle(f,u),I=dr.angle(f,_);return Math.abs(I-E)},dr.normalizePositive=function(u){if(u<0){for(;u<0;)u+=dr.PI_TIMES_2;u>=dr.PI_TIMES_2&&(u=0)}else{for(;u>=dr.PI_TIMES_2;)u-=dr.PI_TIMES_2;u<0&&(u=0)}return u},dr.angleBetween=function(u,f,_){var E=dr.angle(f,u),I=dr.angle(f,_);return dr.diff(E,I)},dr.diff=function(u,f){var _=null;return(_=u<f?f-u:u-f)>Math.PI&&(_=2*Math.PI-_),_},dr.toRadians=function(u){return u*Math.PI/180},dr.getTurn=function(u,f){var _=Math.sin(f-u);return _>0?dr.COUNTERCLOCKWISE:_<0?dr.CLOCKWISE:dr.NONE},dr.angleBetweenOriented=function(u,f,_){var E=dr.angle(f,u),I=dr.angle(f,_)-E;return I<=-Math.PI?I+dr.PI_TIMES_2:I>Math.PI?I-dr.PI_TIMES_2:I},_n.PI_TIMES_2.get=function(){return 2*Math.PI},_n.PI_OVER_2.get=function(){return Math.PI/2},_n.PI_OVER_4.get=function(){return Math.PI/4},_n.COUNTERCLOCKWISE.get=function(){return Et.COUNTERCLOCKWISE},_n.CLOCKWISE.get=function(){return Et.CLOCKWISE},_n.NONE.get=function(){return Et.COLLINEAR},Object.defineProperties(dr,_n);var wi=function u(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Pe,this._seg1=new Pe,this._offset0=new Pe,this._offset1=new Pe,this._side=0,this._hasNarrowConcaveAngle=!1;var f=arguments[0],_=arguments[1],E=arguments[2];this._precisionModel=f,this._bufParams=_,this._li=new lt,this._filletAngleQuantum=Math.PI/2/_.getQuadrantSegments(),_.getQuadrantSegments()>=8&&_.getJoinStyle()===Pr.JOIN_ROUND&&(this._closingSegLengthFactor=u.MAX_CLOSING_SEG_LEN_FACTOR),this.init(E)},Ho={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};wi.prototype.addNextSegment=function(u,f){if(this._s0=this._s1,this._s1=this._s2,this._s2=u,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var _=Et.computeOrientation(this._s0,this._s1,this._s2),E=_===Et.CLOCKWISE&&this._side===oe.LEFT||_===Et.COUNTERCLOCKWISE&&this._side===oe.RIGHT;_===0?this.addCollinear(f):E?this.addOutsideTurn(_,f):this.addInsideTurn(_,f)},wi.prototype.addLineEndCap=function(u,f){var _=new Pe(u,f),E=new Pe;this.computeOffsetSegment(_,oe.LEFT,this._distance,E);var I=new Pe;this.computeOffsetSegment(_,oe.RIGHT,this._distance,I);var J=f.x-u.x,at=f.y-u.y,yt=Math.atan2(at,J);switch(this._bufParams.getEndCapStyle()){case Pr.CAP_ROUND:this._segList.addPt(E.p1),this.addFilletArc(f,yt+Math.PI/2,yt-Math.PI/2,Et.CLOCKWISE,this._distance),this._segList.addPt(I.p1);break;case Pr.CAP_FLAT:this._segList.addPt(E.p1),this._segList.addPt(I.p1);break;case Pr.CAP_SQUARE:var St=new G;St.x=Math.abs(this._distance)*Math.cos(yt),St.y=Math.abs(this._distance)*Math.sin(yt);var Bt=new G(E.p1.x+St.x,E.p1.y+St.y),Yt=new G(I.p1.x+St.x,I.p1.y+St.y);this._segList.addPt(Bt),this._segList.addPt(Yt)}},wi.prototype.getCoordinates=function(){return this._segList.getCoordinates()},wi.prototype.addMitreJoin=function(u,f,_,E){var I=!0,J=null;try{J=mt.intersection(f.p0,f.p1,_.p0,_.p1),(E<=0?1:J.distance(u)/Math.abs(E))>this._bufParams.getMitreLimit()&&(I=!1)}catch(at){if(!(at instanceof V))throw at;J=new G(0,0),I=!1}I?this._segList.addPt(J):this.addLimitedMitreJoin(f,_,E,this._bufParams.getMitreLimit())},wi.prototype.addFilletCorner=function(u,f,_,E,I){var J=f.x-u.x,at=f.y-u.y,yt=Math.atan2(at,J),St=_.x-u.x,Bt=_.y-u.y,Yt=Math.atan2(Bt,St);E===Et.CLOCKWISE?yt<=Yt&&(yt+=2*Math.PI):yt>=Yt&&(yt-=2*Math.PI),this._segList.addPt(f),this.addFilletArc(u,yt,Yt,E,I),this._segList.addPt(_)},wi.prototype.addOutsideTurn=function(u,f){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*wi.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Pr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Pr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(f&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,u,this._distance),this._segList.addPt(this._offset1.p0))},wi.prototype.createSquare=function(u){this._segList.addPt(new G(u.x+this._distance,u.y+this._distance)),this._segList.addPt(new G(u.x+this._distance,u.y-this._distance)),this._segList.addPt(new G(u.x-this._distance,u.y-this._distance)),this._segList.addPt(new G(u.x-this._distance,u.y+this._distance)),this._segList.closeRing()},wi.prototype.addSegments=function(u,f){this._segList.addPts(u,f)},wi.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},wi.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},wi.prototype.initSideSegments=function(u,f,_){this._s1=u,this._s2=f,this._side=_,this._seg1.setCoordinates(u,f),this.computeOffsetSegment(this._seg1,_,this._distance,this._offset1)},wi.prototype.addLimitedMitreJoin=function(u,f,_,E){var I=this._seg0.p1,J=dr.angle(I,this._seg0.p0),at=dr.angleBetweenOriented(this._seg0.p0,I,this._seg1.p1)/2,yt=dr.normalize(J+at),St=dr.normalize(yt+Math.PI),Bt=E*_,Yt=_-Bt*Math.abs(Math.sin(at)),ee=I.x+Bt*Math.cos(St),xe=I.y+Bt*Math.sin(St),Me=new G(ee,xe),Be=new Pe(I,Me),qe=Be.pointAlongOffset(1,Yt),gi=Be.pointAlongOffset(1,-Yt);this._side===oe.LEFT?(this._segList.addPt(qe),this._segList.addPt(gi)):(this._segList.addPt(gi),this._segList.addPt(qe))},wi.prototype.computeOffsetSegment=function(u,f,_,E){var I=f===oe.LEFT?1:-1,J=u.p1.x-u.p0.x,at=u.p1.y-u.p0.y,yt=Math.sqrt(J*J+at*at),St=I*_*J/yt,Bt=I*_*at/yt;E.p0.x=u.p0.x-Bt,E.p0.y=u.p0.y+St,E.p1.x=u.p1.x-Bt,E.p1.y=u.p1.y+St},wi.prototype.addFilletArc=function(u,f,_,E,I){var J=E===Et.CLOCKWISE?-1:1,at=Math.abs(f-_),yt=Math.trunc(at/this._filletAngleQuantum+.5);if(yt<1)return null;for(var St=at/yt,Bt=0,Yt=new G;Bt<at;){var ee=f+J*Bt;Yt.x=u.x+I*Math.cos(ee),Yt.y=u.y+I*Math.sin(ee),this._segList.addPt(Yt),Bt+=St}},wi.prototype.addInsideTurn=function(u,f){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*wi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var _=new G((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(_);var E=new G((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(E)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},wi.prototype.createCircle=function(u){var f=new G(u.x+this._distance,u.y);this._segList.addPt(f),this.addFilletArc(u,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},wi.prototype.addBevelJoin=function(u,f){this._segList.addPt(u.p1),this._segList.addPt(f.p0)},wi.prototype.init=function(u){this._distance=u,this._maxCurveSegmentError=u*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Zi,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(u*wi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},wi.prototype.addCollinear=function(u){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Pr.JOIN_BEVEL||this._bufParams.getJoinStyle()===Pr.JOIN_MITRE?(u&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Et.CLOCKWISE,this._distance))},wi.prototype.closeRing=function(){this._segList.closeRing()},wi.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi},Ho.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},Ho.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},Ho.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ho.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(wi,Ho);var Tn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var u=arguments[0],f=arguments[1];this._precisionModel=u,this._bufParams=f};Tn.prototype.getOffsetCurve=function(u,f){if(this._distance=f,f===0)return null;var _=f<0,E=Math.abs(f),I=this.getSegGen(E);u.length<=1?this.computePointCurve(u[0],I):this.computeOffsetCurve(u,_,I);var J=I.getCoordinates();return _&&ue.reverse(J),J},Tn.prototype.computeSingleSidedBufferCurve=function(u,f,_){var E=this.simplifyTolerance(this._distance);if(f){_.addSegments(u,!0);var I=ki.simplify(u,-E),J=I.length-1;_.initSideSegments(I[J],I[J-1],oe.LEFT),_.addFirstSegment();for(var at=J-2;at>=0;at--)_.addNextSegment(I[at],!0)}else{_.addSegments(u,!1);var yt=ki.simplify(u,E),St=yt.length-1;_.initSideSegments(yt[0],yt[1],oe.LEFT),_.addFirstSegment();for(var Bt=2;Bt<=St;Bt++)_.addNextSegment(yt[Bt],!0)}_.addLastSegment(),_.closeRing()},Tn.prototype.computeRingBufferCurve=function(u,f,_){var E=this.simplifyTolerance(this._distance);f===oe.RIGHT&&(E=-E);var I=ki.simplify(u,E),J=I.length-1;_.initSideSegments(I[J-1],I[0],f);for(var at=1;at<=J;at++){var yt=at!==1;_.addNextSegment(I[at],yt)}_.closeRing()},Tn.prototype.computeLineBufferCurve=function(u,f){var _=this.simplifyTolerance(this._distance),E=ki.simplify(u,_),I=E.length-1;f.initSideSegments(E[0],E[1],oe.LEFT);for(var J=2;J<=I;J++)f.addNextSegment(E[J],!0);f.addLastSegment(),f.addLineEndCap(E[I-1],E[I]);var at=ki.simplify(u,-_),yt=at.length-1;f.initSideSegments(at[yt],at[yt-1],oe.LEFT);for(var St=yt-2;St>=0;St--)f.addNextSegment(at[St],!0);f.addLastSegment(),f.addLineEndCap(at[1],at[0]),f.closeRing()},Tn.prototype.computePointCurve=function(u,f){switch(this._bufParams.getEndCapStyle()){case Pr.CAP_ROUND:f.createCircle(u);break;case Pr.CAP_SQUARE:f.createSquare(u)}},Tn.prototype.getLineCurve=function(u,f){if(this._distance=f,f<0&&!this._bufParams.isSingleSided()||f===0)return null;var _=Math.abs(f),E=this.getSegGen(_);if(u.length<=1)this.computePointCurve(u[0],E);else if(this._bufParams.isSingleSided()){var I=f<0;this.computeSingleSidedBufferCurve(u,I,E)}else this.computeLineBufferCurve(u,E);return E.getCoordinates()},Tn.prototype.getBufferParameters=function(){return this._bufParams},Tn.prototype.simplifyTolerance=function(u){return u*this._bufParams.getSimplifyFactor()},Tn.prototype.getRingCurve=function(u,f,_){if(this._distance=_,u.length<=2)return this.getLineCurve(u,_);if(_===0)return Tn.copyCoordinates(u);var E=this.getSegGen(_);return this.computeRingBufferCurve(u,f,E),E.getCoordinates()},Tn.prototype.computeOffsetCurve=function(u,f,_){var E=this.simplifyTolerance(this._distance);if(f){var I=ki.simplify(u,-E),J=I.length-1;_.initSideSegments(I[J],I[J-1],oe.LEFT),_.addFirstSegment();for(var at=J-2;at>=0;at--)_.addNextSegment(I[at],!0)}else{var yt=ki.simplify(u,E),St=yt.length-1;_.initSideSegments(yt[0],yt[1],oe.LEFT),_.addFirstSegment();for(var Bt=2;Bt<=St;Bt++)_.addNextSegment(yt[Bt],!0)}_.addLastSegment()},Tn.prototype.getSegGen=function(u){return new wi(this._precisionModel,this._bufParams,u)},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.copyCoordinates=function(u){for(var f=new Array(u.length).fill(null),_=0;_<f.length;_++)f[_]=new G(u[_]);return f};var ho=function(){this._subgraphs=null,this._seg=new Pe,this._cga=new Et;var u=arguments[0];this._subgraphs=u},ll={DepthSegment:{configurable:!0}};ho.prototype.findStabbedSegments=function(){if(arguments.length===1){for(var u=arguments[0],f=new $t,_=this._subgraphs.iterator();_.hasNext();){var E=_.next(),I=E.getEnvelope();u.y<I.getMinY()||u.y>I.getMaxY()||this.findStabbedSegments(u,E.getDirectedEdges(),f)}return f}if(arguments.length===3){if(w(arguments[2],He)&&arguments[0]instanceof G&&arguments[1]instanceof nt){for(var J=arguments[0],at=arguments[1],yt=arguments[2],St=at.getEdge().getCoordinates(),Bt=0;Bt<St.length-1;Bt++)if(this._seg.p0=St[Bt],this._seg.p1=St[Bt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<J.x)&&!(this._seg.isHorizontal()||J.y<this._seg.p0.y||J.y>this._seg.p1.y||Et.computeOrientation(this._seg.p0,this._seg.p1,J)===Et.RIGHT)){var Yt=at.getDepth(oe.LEFT);this._seg.p0.equals(St[Bt])||(Yt=at.getDepth(oe.RIGHT));var ee=new co(this._seg,Yt);yt.add(ee)}}else if(w(arguments[2],He)&&arguments[0]instanceof G&&w(arguments[1],He))for(var xe=arguments[0],Me=arguments[1],Be=arguments[2],qe=Me.iterator();qe.hasNext();){var gi=qe.next();gi.isForward()&&this.findStabbedSegments(xe,gi,Be)}}},ho.prototype.getDepth=function(u){var f=this.findStabbedSegments(u);return f.size()===0?0:Ce.min(f)._leftDepth},ho.prototype.interfaces_=function(){return[]},ho.prototype.getClass=function(){return ho},ll.DepthSegment.get=function(){return co},Object.defineProperties(ho,ll);var co=function(){this._upwardSeg=null,this._leftDepth=null;var u=arguments[0],f=arguments[1];this._upwardSeg=new Pe(u),this._leftDepth=f};co.prototype.compareTo=function(u){var f=u;if(this._upwardSeg.minX()>=f._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=f._upwardSeg.minX())return-1;var _=this._upwardSeg.orientationIndex(f._upwardSeg);return _!==0||(_=-1*f._upwardSeg.orientationIndex(this._upwardSeg))!=0?_:this._upwardSeg.compareTo(f._upwardSeg)},co.prototype.compareX=function(u,f){var _=u.p0.compareTo(f.p0);return _!==0?_:u.p1.compareTo(f.p1)},co.prototype.toString=function(){return this._upwardSeg.toString()},co.prototype.interfaces_=function(){return[U]},co.prototype.getClass=function(){return co};var Cr=function(u,f,_){this.p0=u||null,this.p1=f||null,this.p2=_||null};Cr.prototype.area=function(){return Cr.area(this.p0,this.p1,this.p2)},Cr.prototype.signedArea=function(){return Cr.signedArea(this.p0,this.p1,this.p2)},Cr.prototype.interpolateZ=function(u){if(u===null)throw new S("Supplied point is null.");return Cr.interpolateZ(u,this.p0,this.p1,this.p2)},Cr.prototype.longestSideLength=function(){return Cr.longestSideLength(this.p0,this.p1,this.p2)},Cr.prototype.isAcute=function(){return Cr.isAcute(this.p0,this.p1,this.p2)},Cr.prototype.circumcentre=function(){return Cr.circumcentre(this.p0,this.p1,this.p2)},Cr.prototype.area3D=function(){return Cr.area3D(this.p0,this.p1,this.p2)},Cr.prototype.centroid=function(){return Cr.centroid(this.p0,this.p1,this.p2)},Cr.prototype.inCentre=function(){return Cr.inCentre(this.p0,this.p1,this.p2)},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Cr.area=function(u,f,_){return Math.abs(((_.x-u.x)*(f.y-u.y)-(f.x-u.x)*(_.y-u.y))/2)},Cr.signedArea=function(u,f,_){return((_.x-u.x)*(f.y-u.y)-(f.x-u.x)*(_.y-u.y))/2},Cr.det=function(u,f,_,E){return u*E-f*_},Cr.interpolateZ=function(u,f,_,E){var I=f.x,J=f.y,at=_.x-I,yt=E.x-I,St=_.y-J,Bt=E.y-J,Yt=at*Bt-yt*St,ee=u.x-I,xe=u.y-J,Me=(Bt*ee-yt*xe)/Yt,Be=(-St*ee+at*xe)/Yt;return f.z+Me*(_.z-f.z)+Be*(E.z-f.z)},Cr.longestSideLength=function(u,f,_){var E=u.distance(f),I=f.distance(_),J=_.distance(u),at=E;return I>at&&(at=I),J>at&&(at=J),at},Cr.isAcute=function(u,f,_){return!!dr.isAcute(u,f,_)&&!!dr.isAcute(f,_,u)&&!!dr.isAcute(_,u,f)},Cr.circumcentre=function(u,f,_){var E=_.x,I=_.y,J=u.x-E,at=u.y-I,yt=f.x-E,St=f.y-I,Bt=2*Cr.det(J,at,yt,St),Yt=Cr.det(at,J*J+at*at,St,yt*yt+St*St),ee=Cr.det(J,J*J+at*at,yt,yt*yt+St*St);return new G(E-Yt/Bt,I+ee/Bt)},Cr.perpendicularBisector=function(u,f){var _=f.x-u.x,E=f.y-u.y,I=new mt(u.x+_/2,u.y+E/2,1),J=new mt(u.x-E+_/2,u.y+_+E/2,1);return new mt(I,J)},Cr.angleBisector=function(u,f,_){var E=f.distance(u),I=E/(E+f.distance(_)),J=_.x-u.x,at=_.y-u.y;return new G(u.x+I*J,u.y+I*at)},Cr.area3D=function(u,f,_){var E=f.x-u.x,I=f.y-u.y,J=f.z-u.z,at=_.x-u.x,yt=_.y-u.y,St=_.z-u.z,Bt=I*St-J*yt,Yt=J*at-E*St,ee=E*yt-I*at,xe=Bt*Bt+Yt*Yt+ee*ee,Me=Math.sqrt(xe)/2;return Me},Cr.centroid=function(u,f,_){var E=(u.x+f.x+_.x)/3,I=(u.y+f.y+_.y)/3;return new G(E,I)},Cr.inCentre=function(u,f,_){var E=f.distance(_),I=u.distance(_),J=u.distance(f),at=E+I+J,yt=(E*u.x+I*f.x+J*_.x)/at,St=(E*u.y+I*f.y+J*_.y)/at;return new G(yt,St)};var Dn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new $t;var u=arguments[0],f=arguments[1],_=arguments[2];this._inputGeom=u,this._distance=f,this._curveBuilder=_};Dn.prototype.addPoint=function(u){if(this._distance<=0)return null;var f=u.getCoordinates(),_=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(_,N.EXTERIOR,N.INTERIOR)},Dn.prototype.addPolygon=function(u){var f=this._distance,_=oe.LEFT;this._distance<0&&(f=-this._distance,_=oe.RIGHT);var E=u.getExteriorRing(),I=ue.removeRepeatedPoints(E.getCoordinates());if(this._distance<0&&this.isErodedCompletely(E,this._distance)||this._distance<=0&&I.length<3)return null;this.addPolygonRing(I,f,_,N.EXTERIOR,N.INTERIOR);for(var J=0;J<u.getNumInteriorRing();J++){var at=u.getInteriorRingN(J),yt=ue.removeRepeatedPoints(at.getCoordinates());this._distance>0&&this.isErodedCompletely(at,-this._distance)||this.addPolygonRing(yt,f,oe.opposite(_),N.INTERIOR,N.EXTERIOR)}},Dn.prototype.isTriangleErodedCompletely=function(u,f){var _=new Cr(u[0],u[1],u[2]),E=_.inCentre();return Et.distancePointLine(E,_.p0,_.p1)<Math.abs(f)},Dn.prototype.addLineString=function(u){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var f=ue.removeRepeatedPoints(u.getCoordinates()),_=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(_,N.EXTERIOR,N.INTERIOR)},Dn.prototype.addCurve=function(u,f,_){if(u===null||u.length<2)return null;var E=new Si(u,new fr(0,N.BOUNDARY,f,_));this._curveList.add(E)},Dn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Dn.prototype.addPolygonRing=function(u,f,_,E,I){if(f===0&&u.length<Qt.MINIMUM_VALID_SIZE)return null;var J=E,at=I;u.length>=Qt.MINIMUM_VALID_SIZE&&Et.isCCW(u)&&(J=I,at=E,_=oe.opposite(_));var yt=this._curveBuilder.getRingCurve(u,_,f);this.addCurve(yt,J,at)},Dn.prototype.add=function(u){if(u.isEmpty())return null;u instanceof Ht?this.addPolygon(u):u instanceof or?this.addLineString(u):u instanceof kr?this.addPoint(u):u instanceof ie?this.addCollection(u):u instanceof Ye?this.addCollection(u):u instanceof he?this.addCollection(u):u instanceof fe&&this.addCollection(u)},Dn.prototype.isErodedCompletely=function(u,f){var _=u.getCoordinates();if(_.length<4)return f<0;if(_.length===4)return this.isTriangleErodedCompletely(_,f);var E=u.getEnvelopeInternal(),I=Math.min(E.getHeight(),E.getWidth());return f<0&&2*Math.abs(f)>I},Dn.prototype.addCollection=function(u){for(var f=0;f<u.getNumGeometries();f++){var _=u.getGeometryN(f);this.add(_)}},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn};var Go=function(){};Go.prototype.locate=function(u){},Go.prototype.interfaces_=function(){return[]},Go.prototype.getClass=function(){return Go};var ks=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var u=arguments[0];this._parent=u,this._atStart=!0,this._index=0,this._max=u.getNumGeometries()};ks.prototype.next=function(){if(this._atStart)return this._atStart=!1,ks.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var u=this._parent.getGeometryN(this._index++);return u instanceof fe?(this._subcollectionIterator=new ks(u),this._subcollectionIterator.next()):u},ks.prototype.remove=function(){throw new Error(this.getClass().getName())},ks.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},ks.prototype.interfaces_=function(){return[ke]},ks.prototype.getClass=function(){return ks},ks.isAtomic=function(u){return!(u instanceof fe)};var Bn=function(){this._geom=null;var u=arguments[0];this._geom=u};Bn.prototype.locate=function(u){return Bn.locate(u,this._geom)},Bn.prototype.interfaces_=function(){return[Go]},Bn.prototype.getClass=function(){return Bn},Bn.isPointInRing=function(u,f){return!!f.getEnvelopeInternal().intersects(u)&&Et.isPointInRing(u,f.getCoordinates())},Bn.containsPointInPolygon=function(u,f){if(f.isEmpty())return!1;var _=f.getExteriorRing();if(!Bn.isPointInRing(u,_))return!1;for(var E=0;E<f.getNumInteriorRing();E++){var I=f.getInteriorRingN(E);if(Bn.isPointInRing(u,I))return!1}return!0},Bn.containsPoint=function(u,f){if(f instanceof Ht)return Bn.containsPointInPolygon(u,f);if(f instanceof fe)for(var _=new ks(f);_.hasNext();){var E=_.next();if(E!==f&&Bn.containsPoint(u,E))return!0}return!1},Bn.locate=function(u,f){return f.isEmpty()?N.EXTERIOR:Bn.containsPoint(u,f)?N.INTERIOR:N.EXTERIOR};var mn=function(){this._edgeMap=new d,this._edgeList=null,this._ptInAreaLocation=[N.NONE,N.NONE]};mn.prototype.getNextCW=function(u){this.getEdges();var f=this._edgeList.indexOf(u),_=f-1;return f===0&&(_=this._edgeList.size()-1),this._edgeList.get(_)},mn.prototype.propagateSideLabels=function(u){for(var f=N.NONE,_=this.iterator();_.hasNext();){var E=_.next().getLabel();E.isArea(u)&&E.getLocation(u,oe.LEFT)!==N.NONE&&(f=E.getLocation(u,oe.LEFT))}if(f===N.NONE)return null;for(var I=f,J=this.iterator();J.hasNext();){var at=J.next(),yt=at.getLabel();if(yt.getLocation(u,oe.ON)===N.NONE&&yt.setLocation(u,oe.ON,I),yt.isArea(u)){var St=yt.getLocation(u,oe.LEFT),Bt=yt.getLocation(u,oe.RIGHT);if(Bt!==N.NONE){if(Bt!==I)throw new _i("side location conflict",at.getCoordinate());St===N.NONE&&Q.shouldNeverReachHere("found single null side (at "+at.getCoordinate()+")"),I=St}else Q.isTrue(yt.getLocation(u,oe.LEFT)===N.NONE,"found single null side"),yt.setLocation(u,oe.RIGHT,I),yt.setLocation(u,oe.LEFT,I)}}},mn.prototype.getCoordinate=function(){var u=this.iterator();return u.hasNext()?u.next().getCoordinate():null},mn.prototype.print=function(u){it.out.println("EdgeEndStar:   "+this.getCoordinate());for(var f=this.iterator();f.hasNext();)f.next().print(u)},mn.prototype.isAreaLabelsConsistent=function(u){return this.computeEdgeEndLabels(u.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},mn.prototype.checkAreaLabelsConsistent=function(u){var f=this.getEdges();if(f.size()<=0)return!0;var _=f.size()-1,E=f.get(_).getLabel().getLocation(u,oe.LEFT);Q.isTrue(E!==N.NONE,"Found unlabelled area edge");for(var I=E,J=this.iterator();J.hasNext();){var at=J.next().getLabel();Q.isTrue(at.isArea(u),"Found non-area edge");var yt=at.getLocation(u,oe.LEFT),St=at.getLocation(u,oe.RIGHT);if(yt===St||St!==I)return!1;I=yt}return!0},mn.prototype.findIndex=function(u){this.iterator();for(var f=0;f<this._edgeList.size();f++)if(this._edgeList.get(f)===u)return f;return-1},mn.prototype.iterator=function(){return this.getEdges().iterator()},mn.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new $t(this._edgeMap.values())),this._edgeList},mn.prototype.getLocation=function(u,f,_){return this._ptInAreaLocation[u]===N.NONE&&(this._ptInAreaLocation[u]=Bn.locate(f,_[u].getGeometry())),this._ptInAreaLocation[u]},mn.prototype.toString=function(){var u=new T;u.append("EdgeEndStar:   "+this.getCoordinate()),u.append(`
`);for(var f=this.iterator();f.hasNext();){var _=f.next();u.append(_),u.append(`
`)}return u.toString()},mn.prototype.computeEdgeEndLabels=function(u){for(var f=this.iterator();f.hasNext();)f.next().computeLabel(u)},mn.prototype.computeLabelling=function(u){this.computeEdgeEndLabels(u[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var f=[!1,!1],_=this.iterator();_.hasNext();)for(var E=_.next().getLabel(),I=0;I<2;I++)E.isLine(I)&&E.getLocation(I)===N.BOUNDARY&&(f[I]=!0);for(var J=this.iterator();J.hasNext();)for(var at=J.next(),yt=at.getLabel(),St=0;St<2;St++)if(yt.isAnyNull(St)){var Bt=N.NONE;if(f[St])Bt=N.EXTERIOR;else{var Yt=at.getCoordinate();Bt=this.getLocation(St,Yt,u)}yt.setAllLocationsIfNull(St,Bt)}},mn.prototype.getDegree=function(){return this._edgeMap.size()},mn.prototype.insertEdgeEnd=function(u,f){this._edgeMap.put(u,f),this._edgeList=null},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var Ls=function(u){function f(){u.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var _=null,E=null,I=this._SCANNING_FOR_INCOMING,J=0;J<this._resultAreaEdgeList.size();J++){var at=this._resultAreaEdgeList.get(J),yt=at.getSym();if(at.getLabel().isArea())switch(_===null&&at.isInResult()&&(_=at),I){case this._SCANNING_FOR_INCOMING:if(!yt.isInResult())continue;E=yt,I=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!at.isInResult())continue;E.setNext(at),I=this._SCANNING_FOR_INCOMING}}if(I===this._LINKING_TO_OUTGOING){if(_===null)throw new _i("no outgoing dirEdge found",this.getCoordinate());Q.isTrue(_.isInResult(),"unable to link last incoming dirEdge"),E.setNext(_)}},f.prototype.insert=function(_){var E=_;this.insertEdgeEnd(E,E)},f.prototype.getRightmostEdge=function(){var _=this.getEdges(),E=_.size();if(E<1)return null;var I=_.get(0);if(E===1)return I;var J=_.get(E-1),at=I.getQuadrant(),yt=J.getQuadrant();return M.isNorthern(at)&&M.isNorthern(yt)?I:M.isNorthern(at)||M.isNorthern(yt)?I.getDy()!==0?I:J.getDy()!==0?J:(Q.shouldNeverReachHere("found two horizontal edges incident on node"),null):J},f.prototype.print=function(_){it.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var E=this.iterator();E.hasNext();){var I=E.next();_.print("out "),I.print(_),_.println(),_.print("in "),I.getSym().print(_),_.println()}},f.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new $t;for(var _=this.iterator();_.hasNext();){var E=_.next();(E.isInResult()||E.getSym().isInResult())&&this._resultAreaEdgeList.add(E)}return this._resultAreaEdgeList},f.prototype.updateLabelling=function(_){for(var E=this.iterator();E.hasNext();){var I=E.next().getLabel();I.setAllLocationsIfNull(0,_.getLocation(0)),I.setAllLocationsIfNull(1,_.getLocation(1))}},f.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var _=null,E=null,I=this._edgeList.size()-1;I>=0;I--){var J=this._edgeList.get(I),at=J.getSym();E===null&&(E=at),_!==null&&at.setNext(_),_=J}E.setNext(_)},f.prototype.computeDepths=function(){if(arguments.length===1){var _=arguments[0],E=this.findIndex(_),I=_.getDepth(oe.LEFT),J=_.getDepth(oe.RIGHT),at=this.computeDepths(E+1,this._edgeList.size(),I);if(this.computeDepths(0,E,at)!==J)throw new _i("depth mismatch at "+_.getCoordinate())}else if(arguments.length===3){for(var yt=arguments[0],St=arguments[1],Bt=arguments[2],Yt=yt;Yt<St;Yt++){var ee=this._edgeList.get(Yt);ee.setEdgeDepths(oe.RIGHT,Bt),Bt=ee.getDepth(oe.LEFT)}return Bt}},f.prototype.mergeSymLabels=function(){for(var _=this.iterator();_.hasNext();){var E=_.next();E.getLabel().merge(E.getSym().getLabel())}},f.prototype.linkMinimalDirectedEdges=function(_){for(var E=null,I=null,J=this._SCANNING_FOR_INCOMING,at=this._resultAreaEdgeList.size()-1;at>=0;at--){var yt=this._resultAreaEdgeList.get(at),St=yt.getSym();switch(E===null&&yt.getEdgeRing()===_&&(E=yt),J){case this._SCANNING_FOR_INCOMING:if(St.getEdgeRing()!==_)continue;I=St,J=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(yt.getEdgeRing()!==_)continue;I.setNextMin(yt),J=this._SCANNING_FOR_INCOMING}}J===this._LINKING_TO_OUTGOING&&(Q.isTrue(E!==null,"found null for first outgoing dirEdge"),Q.isTrue(E.getEdgeRing()===_,"unable to link last incoming dirEdge"),I.setNextMin(E))},f.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var _=0,E=this.iterator();E.hasNext();)E.next().isInResult()&&_++;return _}if(arguments.length===1){for(var I=arguments[0],J=0,at=this.iterator();at.hasNext();)at.next().getEdgeRing()===I&&J++;return J}},f.prototype.getLabel=function(){return this._label},f.prototype.findCoveredLineEdges=function(){for(var _=N.NONE,E=this.iterator();E.hasNext();){var I=E.next(),J=I.getSym();if(!I.isLineEdge()){if(I.isInResult()){_=N.INTERIOR;break}if(J.isInResult()){_=N.EXTERIOR;break}}}if(_===N.NONE)return null;for(var at=_,yt=this.iterator();yt.hasNext();){var St=yt.next(),Bt=St.getSym();St.isLineEdge()?St.getEdge().setCovered(at===N.INTERIOR):(St.isInResult()&&(at=N.EXTERIOR),Bt.isInResult()&&(at=N.INTERIOR))}},f.prototype.computeLabelling=function(_){u.prototype.computeLabelling.call(this,_),this._label=new fr(N.NONE);for(var E=this.iterator();E.hasNext();)for(var I=E.next().getEdge().getLabel(),J=0;J<2;J++){var at=I.getLocation(J);at!==N.INTERIOR&&at!==N.BOUNDARY||this._label.setLocation(J,N.INTERIOR)}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(mn),ko=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.createNode=function(_){return new Yi(_,new Ls)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(ht),qs=function u(){this._pts=null,this._orientation=null;var f=arguments[0];this._pts=f,this._orientation=u.orientation(f)};qs.prototype.compareTo=function(u){var f=u;return qs.compareOriented(this._pts,this._orientation,f._pts,f._orientation)},qs.prototype.interfaces_=function(){return[U]},qs.prototype.getClass=function(){return qs},qs.orientation=function(u){return ue.increasingDirection(u)===1},qs.compareOriented=function(u,f,_,E){for(var I=f?1:-1,J=E?1:-1,at=f?u.length:-1,yt=E?_.length:-1,St=f?0:u.length-1,Bt=E?0:_.length-1;;){var Yt=u[St].compareTo(_[Bt]);if(Yt!==0)return Yt;var ee=(St+=I)===at,xe=(Bt+=J)===yt;if(ee&&!xe)return-1;if(!ee&&xe)return 1;if(ee&&xe)return 0}};var Ki=function(){this._edges=new $t,this._ocaMap=new d};Ki.prototype.print=function(u){u.print("MULTILINESTRING ( ");for(var f=0;f<this._edges.size();f++){var _=this._edges.get(f);f>0&&u.print(","),u.print("(");for(var E=_.getCoordinates(),I=0;I<E.length;I++)I>0&&u.print(","),u.print(E[I].x+" "+E[I].y);u.println(")")}u.print(")  ")},Ki.prototype.addAll=function(u){for(var f=u.iterator();f.hasNext();)this.add(f.next())},Ki.prototype.findEdgeIndex=function(u){for(var f=0;f<this._edges.size();f++)if(this._edges.get(f).equals(u))return f;return-1},Ki.prototype.iterator=function(){return this._edges.iterator()},Ki.prototype.getEdges=function(){return this._edges},Ki.prototype.get=function(u){return this._edges.get(u)},Ki.prototype.findEqualEdge=function(u){var f=new qs(u.getCoordinates());return this._ocaMap.get(f)},Ki.prototype.add=function(u){this._edges.add(u);var f=new qs(u.getCoordinates());this._ocaMap.put(f,u)},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki};var fo=function(){};fo.prototype.processIntersections=function(u,f,_,E){},fo.prototype.isDone=function(){},fo.prototype.interfaces_=function(){return[]},fo.prototype.getClass=function(){return fo};var ln=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var u=arguments[0];this._li=u};ln.prototype.isTrivialIntersection=function(u,f,_,E){if(u===_&&this._li.getIntersectionNum()===1){if(ln.isAdjacentSegments(f,E))return!0;if(u.isClosed()){var I=u.size()-1;if(f===0&&E===I||E===0&&f===I)return!0}}return!1},ln.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ln.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ln.prototype.getLineIntersector=function(){return this._li},ln.prototype.hasProperIntersection=function(){return this._hasProper},ln.prototype.processIntersections=function(u,f,_,E){if(u===_&&f===E)return null;this.numTests++;var I=u.getCoordinates()[f],J=u.getCoordinates()[f+1],at=_.getCoordinates()[E],yt=_.getCoordinates()[E+1];this._li.computeIntersection(I,J,at,yt),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(u,f,_,E)||(this._hasIntersection=!0,u.addIntersections(this._li,f,0),_.addIntersections(this._li,E,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},ln.prototype.hasIntersection=function(){return this._hasIntersection},ln.prototype.isDone=function(){return!1},ln.prototype.hasInteriorIntersection=function(){return this._hasInterior},ln.prototype.interfaces_=function(){return[fo]},ln.prototype.getClass=function(){return ln},ln.isAdjacentSegments=function(u,f){return Math.abs(u-f)===1};var ys=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var u=arguments[0],f=arguments[1],_=arguments[2];this.coord=new G(u),this.segmentIndex=f,this.dist=_};ys.prototype.getSegmentIndex=function(){return this.segmentIndex},ys.prototype.getCoordinate=function(){return this.coord},ys.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex),u.println(" dist = "+this.dist)},ys.prototype.compareTo=function(u){var f=u;return this.compare(f.segmentIndex,f.dist)},ys.prototype.isEndPoint=function(u){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===u},ys.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},ys.prototype.getDistance=function(){return this.dist},ys.prototype.compare=function(u,f){return this.segmentIndex<u?-1:this.segmentIndex>u?1:this.dist<f?-1:this.dist>f?1:0},ys.prototype.interfaces_=function(){return[U]},ys.prototype.getClass=function(){return ys};var Xn=function(){this._nodeMap=new d,this.edge=null;var u=arguments[0];this.edge=u};Xn.prototype.print=function(u){u.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(u)},Xn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Xn.prototype.addSplitEdges=function(u){this.addEndpoints();for(var f=this.iterator(),_=f.next();f.hasNext();){var E=f.next(),I=this.createSplitEdge(_,E);u.add(I),_=E}},Xn.prototype.addEndpoints=function(){var u=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[u],u,0)},Xn.prototype.createSplitEdge=function(u,f){var _=f.segmentIndex-u.segmentIndex+2,E=this.edge.pts[f.segmentIndex],I=f.dist>0||!f.coord.equals2D(E);I||_--;var J=new Array(_).fill(null),at=0;J[at++]=new G(u.coord);for(var yt=u.segmentIndex+1;yt<=f.segmentIndex;yt++)J[at++]=this.edge.pts[yt];return I&&(J[at]=f.coord),new Lo(J,new fr(this.edge._label))},Xn.prototype.add=function(u,f,_){var E=new ys(u,f,_),I=this._nodeMap.get(E);return I!==null?I:(this._nodeMap.put(E,E),E)},Xn.prototype.isIntersection=function(u){for(var f=this.iterator();f.hasNext();)if(f.next().coord.equals(u))return!0;return!1},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Ws=function(){};Ws.prototype.getChainStartIndices=function(u){var f=0,_=new $t;_.add(new R(f));do{var E=this.findChainEnd(u,f);_.add(new R(E)),f=E}while(f<u.length-1);return Ws.toIntArray(_)},Ws.prototype.findChainEnd=function(u,f){for(var _=M.quadrant(u[f],u[f+1]),E=f+1;E<u.length&&M.quadrant(u[E-1],u[E])===_;)E++;return E-1},Ws.prototype.interfaces_=function(){return[]},Ws.prototype.getClass=function(){return Ws},Ws.toIntArray=function(u){for(var f=new Array(u.size()).fill(null),_=0;_<f.length;_++)f[_]=u.get(_).intValue();return f};var cs=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new wt,this.env2=new wt;var u=arguments[0];this.e=u,this.pts=u.getCoordinates();var f=new Ws;this.startIndex=f.getChainStartIndices(this.pts)};cs.prototype.getCoordinates=function(){return this.pts},cs.prototype.getMaxX=function(u){var f=this.pts[this.startIndex[u]].x,_=this.pts[this.startIndex[u+1]].x;return f>_?f:_},cs.prototype.getMinX=function(u){var f=this.pts[this.startIndex[u]].x,_=this.pts[this.startIndex[u+1]].x;return f<_?f:_},cs.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var u=arguments[0],f=arguments[1],_=arguments[2],E=arguments[3];this.computeIntersectsForChain(this.startIndex[u],this.startIndex[u+1],f,f.startIndex[_],f.startIndex[_+1],E)}else if(arguments.length===6){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3],St=arguments[4],Bt=arguments[5],Yt=this.pts[I],ee=this.pts[J],xe=at.pts[yt],Me=at.pts[St];if(J-I==1&&St-yt==1)return Bt.addIntersections(this.e,I,at.e,yt),null;if(this.env1.init(Yt,ee),this.env2.init(xe,Me),!this.env1.intersects(this.env2))return null;var Be=Math.trunc((I+J)/2),qe=Math.trunc((yt+St)/2);I<Be&&(yt<qe&&this.computeIntersectsForChain(I,Be,at,yt,qe,Bt),qe<St&&this.computeIntersectsForChain(I,Be,at,qe,St,Bt)),Be<J&&(yt<qe&&this.computeIntersectsForChain(Be,J,at,yt,qe,Bt),qe<St&&this.computeIntersectsForChain(Be,J,at,qe,St,Bt))}},cs.prototype.getStartIndexes=function(){return this.startIndex},cs.prototype.computeIntersects=function(u,f){for(var _=0;_<this.startIndex.length-1;_++)for(var E=0;E<u.startIndex.length-1;E++)this.computeIntersectsForChain(_,u,E,f)},cs.prototype.interfaces_=function(){return[]},cs.prototype.getClass=function(){return cs};var un=function u(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var f=0;f<2;f++)for(var _=0;_<3;_++)this._depth[f][_]=u.NULL_VALUE},Xs={NULL_VALUE:{configurable:!0}};un.prototype.getDepth=function(u,f){return this._depth[u][f]},un.prototype.setDepth=function(u,f,_){this._depth[u][f]=_},un.prototype.isNull=function(){if(arguments.length===0){for(var u=0;u<2;u++)for(var f=0;f<3;f++)if(this._depth[u][f]!==un.NULL_VALUE)return!1;return!0}if(arguments.length===1){var _=arguments[0];return this._depth[_][1]===un.NULL_VALUE}if(arguments.length===2){var E=arguments[0],I=arguments[1];return this._depth[E][I]===un.NULL_VALUE}},un.prototype.normalize=function(){for(var u=0;u<2;u++)if(!this.isNull(u)){var f=this._depth[u][1];this._depth[u][2]<f&&(f=this._depth[u][2]),f<0&&(f=0);for(var _=1;_<3;_++){var E=0;this._depth[u][_]>f&&(E=1),this._depth[u][_]=E}}},un.prototype.getDelta=function(u){return this._depth[u][oe.RIGHT]-this._depth[u][oe.LEFT]},un.prototype.getLocation=function(u,f){return this._depth[u][f]<=0?N.EXTERIOR:N.INTERIOR},un.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},un.prototype.add=function(){if(arguments.length===1)for(var u=arguments[0],f=0;f<2;f++)for(var _=1;_<3;_++){var E=u.getLocation(f,_);E!==N.EXTERIOR&&E!==N.INTERIOR||(this.isNull(f,_)?this._depth[f][_]=un.depthAtLocation(E):this._depth[f][_]+=un.depthAtLocation(E))}else if(arguments.length===3){var I=arguments[0],J=arguments[1];arguments[2]===N.INTERIOR&&this._depth[I][J]++}},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.depthAtLocation=function(u){return u===N.EXTERIOR?0:u===N.INTERIOR?1:un.NULL_VALUE},Xs.NULL_VALUE.get=function(){return-1},Object.defineProperties(un,Xs);var Lo=function(u){function f(){if(u.call(this),this.pts=null,this._env=null,this.eiList=new Xn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new un,this._depthDelta=0,arguments.length===1){var _=arguments[0];f.call(this,_,null)}else if(arguments.length===2){var E=arguments[0],I=arguments[1];this.pts=E,this._label=I}}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.getDepth=function(){return this._depth},f.prototype.getCollapsedEdge=function(){var _=new Array(2).fill(null);return _[0]=this.pts[0],_[1]=this.pts[1],new f(_,fr.toLineLabel(this._label))},f.prototype.isIsolated=function(){return this._isIsolated},f.prototype.getCoordinates=function(){return this.pts},f.prototype.setIsolated=function(_){this._isIsolated=_},f.prototype.setName=function(_){this._name=_},f.prototype.equals=function(_){if(!(_ instanceof f))return!1;var E=_;if(this.pts.length!==E.pts.length)return!1;for(var I=!0,J=!0,at=this.pts.length,yt=0;yt<this.pts.length;yt++)if(this.pts[yt].equals2D(E.pts[yt])||(I=!1),this.pts[yt].equals2D(E.pts[--at])||(J=!1),!I&&!J)return!1;return!0},f.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var _=arguments[0];return this.pts[_]}},f.prototype.print=function(_){_.print("edge "+this._name+": "),_.print("LINESTRING (");for(var E=0;E<this.pts.length;E++)E>0&&_.print(","),_.print(this.pts[E].x+" "+this.pts[E].y);_.print(")  "+this._label+" "+this._depthDelta)},f.prototype.computeIM=function(_){f.updateIM(this._label,_)},f.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},f.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},f.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},f.prototype.getDepthDelta=function(){return this._depthDelta},f.prototype.getNumPoints=function(){return this.pts.length},f.prototype.printReverse=function(_){_.print("edge "+this._name+": ");for(var E=this.pts.length-1;E>=0;E--)_.print(this.pts[E]+" ");_.println("")},f.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new cs(this)),this._mce},f.prototype.getEnvelope=function(){if(this._env===null){this._env=new wt;for(var _=0;_<this.pts.length;_++)this._env.expandToInclude(this.pts[_])}return this._env},f.prototype.addIntersection=function(_,E,I,J){var at=new G(_.getIntersection(J)),yt=E,St=_.getEdgeDistance(I,J),Bt=yt+1;if(Bt<this.pts.length){var Yt=this.pts[Bt];at.equals2D(Yt)&&(yt=Bt,St=0)}this.eiList.add(at,yt,St)},f.prototype.toString=function(){var _=new T;_.append("edge "+this._name+": "),_.append("LINESTRING (");for(var E=0;E<this.pts.length;E++)E>0&&_.append(","),_.append(this.pts[E].x+" "+this.pts[E].y);return _.append(")  "+this._label+" "+this._depthDelta),_.toString()},f.prototype.isPointwiseEqual=function(_){if(this.pts.length!==_.pts.length)return!1;for(var E=0;E<this.pts.length;E++)if(!this.pts[E].equals2D(_.pts[E]))return!1;return!0},f.prototype.setDepthDelta=function(_){this._depthDelta=_},f.prototype.getEdgeIntersectionList=function(){return this.eiList},f.prototype.addIntersections=function(_,E,I){for(var J=0;J<_.getIntersectionNum();J++)this.addIntersection(_,E,I,J)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.updateIM=function(){if(arguments.length!==2)return u.prototype.updateIM.apply(this,arguments);var _=arguments[0],E=arguments[1];E.setAtLeastIfValid(_.getLocation(0,oe.ON),_.getLocation(1,oe.ON),1),_.isArea()&&(E.setAtLeastIfValid(_.getLocation(0,oe.LEFT),_.getLocation(1,oe.LEFT),2),E.setAtLeastIfValid(_.getLocation(0,oe.RIGHT),_.getLocation(1,oe.RIGHT),2))},f}(je),wn=function(u){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ki,this._bufParams=u||null};wn.prototype.setWorkingPrecisionModel=function(u){this._workingPrecisionModel=u},wn.prototype.insertUniqueEdge=function(u){var f=this._edgeList.findEqualEdge(u);if(f!==null){var _=f.getLabel(),E=u.getLabel();f.isPointwiseEqual(u)||(E=new fr(u.getLabel())).flip(),_.merge(E);var I=wn.depthDelta(E),J=f.getDepthDelta()+I;f.setDepthDelta(J)}else this._edgeList.add(u),u.setDepthDelta(wn.depthDelta(u.getLabel()))},wn.prototype.buildSubgraphs=function(u,f){for(var _=new $t,E=u.iterator();E.hasNext();){var I=E.next(),J=I.getRightmostCoordinate(),at=new ho(_).getDepth(J);I.computeDepth(at),I.findResultEdges(),_.add(I),f.add(I.getDirectedEdges(),I.getNodes())}},wn.prototype.createSubgraphs=function(u){for(var f=new $t,_=u.getNodes().iterator();_.hasNext();){var E=_.next();if(!E.isVisited()){var I=new yi;I.create(E),f.add(I)}}return Ce.sort(f,Ce.reverseOrder()),f},wn.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},wn.prototype.getNoder=function(u){if(this._workingNoder!==null)return this._workingNoder;var f=new al,_=new lt;return _.setPrecisionModel(u),f.setSegmentIntersector(new ln(_)),f},wn.prototype.buffer=function(u,f){var _=this._workingPrecisionModel;_===null&&(_=u.getPrecisionModel()),this._geomFact=u.getFactory();var E=new Tn(_,this._bufParams),I=new Dn(u,f,E).getCurves();if(I.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(I,_),this._graph=new xt(new ko),this._graph.addEdges(this._edgeList.getEdges());var J=this.createSubgraphs(this._graph),at=new Lt(this._geomFact);this.buildSubgraphs(J,at);var yt=at.getPolygons();return yt.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(yt)},wn.prototype.computeNodedEdges=function(u,f){var _=this.getNoder(f);_.computeNodes(u);for(var E=_.getNodedSubstrings().iterator();E.hasNext();){var I=E.next(),J=I.getCoordinates();if(J.length!==2||!J[0].equals2D(J[1])){var at=I.getData(),yt=new Lo(I.getCoordinates(),new fr(at));this.insertUniqueEdge(yt)}}},wn.prototype.setNoder=function(u){this._workingNoder=u},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.depthDelta=function(u){var f=u.getLocation(0,oe.LEFT),_=u.getLocation(0,oe.RIGHT);return f===N.INTERIOR&&_===N.EXTERIOR?1:f===N.EXTERIOR&&_===N.INTERIOR?-1:0},wn.convertSegStrings=function(u){for(var f=new Se,_=new $t;u.hasNext();){var E=u.next(),I=f.createLineString(E.getCoordinates());_.add(I)}return f.buildGeometry(_)};var Ts=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var u=arguments[0],f=arguments[1];this._noder=u,this._scaleFactor=f,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var _=arguments[0],E=arguments[1],I=arguments[2],J=arguments[3];this._noder=_,this._scaleFactor=E,this._offsetX=I,this._offsetY=J,this._isScaled=!this.isIntegerPrecision()}};Ts.prototype.rescale=function(){if(w(arguments[0],ce))for(var u=arguments[0].iterator();u.hasNext();){var f=u.next();this.rescale(f.getCoordinates())}else if(arguments[0]instanceof Array){for(var _=arguments[0],E=0;E<_.length;E++)_[E].x=_[E].x/this._scaleFactor+this._offsetX,_[E].y=_[E].y/this._scaleFactor+this._offsetY;_.length===2&&_[0].equals2D(_[1])&&it.out.println(_)}},Ts.prototype.scale=function(){if(w(arguments[0],ce)){for(var u=arguments[0],f=new $t,_=u.iterator();_.hasNext();){var E=_.next();f.add(new Si(this.scale(E.getCoordinates()),E.getData()))}return f}if(arguments[0]instanceof Array){for(var I=arguments[0],J=new Array(I.length).fill(null),at=0;at<I.length;at++)J[at]=new G(Math.round((I[at].x-this._offsetX)*this._scaleFactor),Math.round((I[at].y-this._offsetY)*this._scaleFactor),I[at].z);return ue.removeRepeatedPoints(J)}},Ts.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},Ts.prototype.getNodedSubstrings=function(){var u=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(u),u},Ts.prototype.computeNodes=function(u){var f=u;this._isScaled&&(f=this.scale(u)),this._noder.computeNodes(f)},Ts.prototype.interfaces_=function(){return[Vs]},Ts.prototype.getClass=function(){return Ts};var vs=function(){this._li=new lt,this._segStrings=null;var u=arguments[0];this._segStrings=u},Ns={fact:{configurable:!0}};vs.prototype.checkEndPtVertexIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var f=u.next().getCoordinates();this.checkEndPtVertexIntersections(f[0],this._segStrings),this.checkEndPtVertexIntersections(f[f.length-1],this._segStrings)}else if(arguments.length===2){for(var _=arguments[0],E=arguments[1].iterator();E.hasNext();)for(var I=E.next().getCoordinates(),J=1;J<I.length-1;J++)if(I[J].equals(_))throw new gt("found endpt/interior pt intersection at index "+J+" :pt "+_)}},vs.prototype.checkInteriorIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();)for(var f=u.next(),_=this._segStrings.iterator();_.hasNext();){var E=_.next();this.checkInteriorIntersections(f,E)}else if(arguments.length===2)for(var I=arguments[0],J=arguments[1],at=I.getCoordinates(),yt=J.getCoordinates(),St=0;St<at.length-1;St++)for(var Bt=0;Bt<yt.length-1;Bt++)this.checkInteriorIntersections(I,St,J,Bt);else if(arguments.length===4){var Yt=arguments[0],ee=arguments[1],xe=arguments[2],Me=arguments[3];if(Yt===xe&&ee===Me)return null;var Be=Yt.getCoordinates()[ee],qe=Yt.getCoordinates()[ee+1],gi=xe.getCoordinates()[Me],qi=xe.getCoordinates()[Me+1];if(this._li.computeIntersection(Be,qe,gi,qi),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Be,qe)||this.hasInteriorIntersection(this._li,gi,qi)))throw new gt("found non-noded intersection at "+Be+"-"+qe+" and "+gi+"-"+qi)}},vs.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},vs.prototype.checkCollapses=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var f=u.next();this.checkCollapses(f)}else if(arguments.length===1)for(var _=arguments[0].getCoordinates(),E=0;E<_.length-2;E++)this.checkCollapse(_[E],_[E+1],_[E+2])},vs.prototype.hasInteriorIntersection=function(u,f,_){for(var E=0;E<u.getIntersectionNum();E++){var I=u.getIntersection(E);if(!I.equals(f)&&!I.equals(_))return!0}return!1},vs.prototype.checkCollapse=function(u,f,_){if(u.equals(_))throw new gt("found non-noded collapse at "+vs.fact.createLineString([u,f,_]))},vs.prototype.interfaces_=function(){return[]},vs.prototype.getClass=function(){return vs},Ns.fact.get=function(){return new Se},Object.defineProperties(vs,Ns);var Pn=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var u=arguments[0],f=arguments[1],_=arguments[2];if(this._originalPt=u,this._pt=u,this._scaleFactor=f,this._li=_,f<=0)throw new S("Scale factor must be non-zero");f!==1&&(this._pt=new G(this.scale(u.x),this.scale(u.y)),this._p0Scaled=new G,this._p1Scaled=new G),this.initCorners(this._pt)},To={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Pn.prototype.intersectsScaled=function(u,f){var _=Math.min(u.x,f.x),E=Math.max(u.x,f.x),I=Math.min(u.y,f.y),J=Math.max(u.y,f.y),at=this._maxx<_||this._minx>E||this._maxy<I||this._miny>J;if(at)return!1;var yt=this.intersectsToleranceSquare(u,f);return Q.isTrue(!(at&&yt),"Found bad envelope test"),yt},Pn.prototype.initCorners=function(u){this._minx=u.x-.5,this._maxx=u.x+.5,this._miny=u.y-.5,this._maxy=u.y+.5,this._corner[0]=new G(this._maxx,this._maxy),this._corner[1]=new G(this._minx,this._maxy),this._corner[2]=new G(this._minx,this._miny),this._corner[3]=new G(this._maxx,this._miny)},Pn.prototype.intersects=function(u,f){return this._scaleFactor===1?this.intersectsScaled(u,f):(this.copyScaled(u,this._p0Scaled),this.copyScaled(f,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Pn.prototype.scale=function(u){return Math.round(u*this._scaleFactor)},Pn.prototype.getCoordinate=function(){return this._originalPt},Pn.prototype.copyScaled=function(u,f){f.x=this.scale(u.x),f.y=this.scale(u.y)},Pn.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var u=Pn.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new wt(this._originalPt.x-u,this._originalPt.x+u,this._originalPt.y-u,this._originalPt.y+u)}return this._safeEnv},Pn.prototype.intersectsPixelClosure=function(u,f){return this._li.computeIntersection(u,f,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,f,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,f,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,f,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},Pn.prototype.intersectsToleranceSquare=function(u,f){var _=!1,E=!1;return this._li.computeIntersection(u,f,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(u,f,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(_=!0),this._li.computeIntersection(u,f,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(E=!0),this._li.computeIntersection(u,f,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!_||!E)||!!u.equals(this._pt)||!!f.equals(this._pt))))},Pn.prototype.addSnappedNode=function(u,f){var _=u.getCoordinate(f),E=u.getCoordinate(f+1);return!!this.intersects(_,E)&&(u.addIntersection(this.getCoordinate(),f),!0)},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},To.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(Pn,To);var ia=function(){this.tempEnv1=new wt,this.selectedSegment=new Pe};ia.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var u=arguments[0],f=arguments[1];u.getLineSegment(f,this.selectedSegment),this.select(this.selectedSegment)}}},ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia};var rs=function(){this._index=null;var u=arguments[0];this._index=u},na={HotPixelSnapAction:{configurable:!0}};rs.prototype.snap=function(){if(arguments.length===1){var u=arguments[0];return this.snap(u,null,-1)}if(arguments.length===3){var f=arguments[0],_=arguments[1],E=arguments[2],I=f.getSafeEnvelope(),J=new ul(f,_,E);return this._index.query(I,{interfaces_:function(){return[Vt]},visitItem:function(at){at.select(I,J)}}),J.isNodeAdded()}},rs.prototype.interfaces_=function(){return[]},rs.prototype.getClass=function(){return rs},na.HotPixelSnapAction.get=function(){return ul},Object.defineProperties(rs,na);var ul=function(u){function f(){u.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var _=arguments[0],E=arguments[1],I=arguments[2];this._hotPixel=_,this._parentEdge=E,this._hotPixelVertexIndex=I}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.isNodeAdded=function(){return this._isNodeAdded},f.prototype.select=function(){if(arguments.length!==2)return u.prototype.select.apply(this,arguments);var _=arguments[0],E=arguments[1],I=_.getContext();if(this._parentEdge!==null&&I===this._parentEdge&&E===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(I,E)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(ia),$s=function(){this._li=null,this._interiorIntersections=null;var u=arguments[0];this._li=u,this._interiorIntersections=new $t};$s.prototype.processIntersections=function(u,f,_,E){if(u===_&&f===E)return null;var I=u.getCoordinates()[f],J=u.getCoordinates()[f+1],at=_.getCoordinates()[E],yt=_.getCoordinates()[E+1];if(this._li.computeIntersection(I,J,at,yt),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var St=0;St<this._li.getIntersectionNum();St++)this._interiorIntersections.add(this._li.getIntersection(St));u.addIntersections(this._li,f,0),_.addIntersections(this._li,E,1)}},$s.prototype.isDone=function(){return!1},$s.prototype.getInteriorIntersections=function(){return this._interiorIntersections},$s.prototype.interfaces_=function(){return[fo]},$s.prototype.getClass=function(){return $s};var is=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var u=arguments[0];this._pm=u,this._li=new lt,this._li.setPrecisionModel(u),this._scaleFactor=u.getScale()};is.prototype.checkCorrectness=function(u){var f=Si.getNodedSubstrings(u),_=new vs(f);try{_.checkValid()}catch(E){if(!(E instanceof W))throw E;E.printStackTrace()}},is.prototype.getNodedSubstrings=function(){return Si.getNodedSubstrings(this._nodedSegStrings)},is.prototype.snapRound=function(u,f){var _=this.findInteriorIntersections(u,f);this.computeIntersectionSnaps(_),this.computeVertexSnaps(u)},is.prototype.findInteriorIntersections=function(u,f){var _=new $s(f);return this._noder.setSegmentIntersector(_),this._noder.computeNodes(u),_.getInteriorIntersections()},is.prototype.computeVertexSnaps=function(){if(w(arguments[0],ce))for(var u=arguments[0].iterator();u.hasNext();){var f=u.next();this.computeVertexSnaps(f)}else if(arguments[0]instanceof Si)for(var _=arguments[0],E=_.getCoordinates(),I=0;I<E.length;I++){var J=new Pn(E[I],this._scaleFactor,this._li);this._pointSnapper.snap(J,_,I)&&_.addIntersection(E[I],I)}},is.prototype.computeNodes=function(u){this._nodedSegStrings=u,this._noder=new al,this._pointSnapper=new rs(this._noder.getIndex()),this.snapRound(u,this._li)},is.prototype.computeIntersectionSnaps=function(u){for(var f=u.iterator();f.hasNext();){var _=f.next(),E=new Pn(_,this._scaleFactor,this._li);this._pointSnapper.snap(E)}},is.prototype.interfaces_=function(){return[Vs]},is.prototype.getClass=function(){return is};var Hi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Pr,this._resultGeometry=null,this._saveException=null,arguments.length===1){var u=arguments[0];this._argGeom=u}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this._argGeom=f,this._bufParams=_}},Ys={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Hi.prototype.bufferFixedPrecision=function(u){var f=new Ts(new is(new me(1)),u.getScale()),_=new wn(this._bufParams);_.setWorkingPrecisionModel(u),_.setNoder(f),this._resultGeometry=_.buffer(this._argGeom,this._distance)},Hi.prototype.bufferReducedPrecision=function(){var u=this;if(arguments.length===0){for(var f=Hi.MAX_PRECISION_DIGITS;f>=0;f--){try{u.bufferReducedPrecision(f)}catch(J){if(!(J instanceof _i))throw J;u._saveException=J}if(u._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var _=arguments[0],E=Hi.precisionScaleFactor(this._argGeom,this._distance,_),I=new me(E);this.bufferFixedPrecision(I)}},Hi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var u=this._argGeom.getFactory().getPrecisionModel();u.getType()===me.FIXED?this.bufferFixedPrecision(u):this.bufferReducedPrecision()},Hi.prototype.setQuadrantSegments=function(u){this._bufParams.setQuadrantSegments(u)},Hi.prototype.bufferOriginalPrecision=function(){try{var u=new wn(this._bufParams);this._resultGeometry=u.buffer(this._argGeom,this._distance)}catch(f){if(!(f instanceof gt))throw f;this._saveException=f}},Hi.prototype.getResultGeometry=function(u){return this._distance=u,this.computeGeometry(),this._resultGeometry},Hi.prototype.setEndCapStyle=function(u){this._bufParams.setEndCapStyle(u)},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi},Hi.bufferOp=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];return new Hi(u).getResultGeometry(f)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Gt&&typeof arguments[1]=="number"){var _=arguments[0],E=arguments[1],I=arguments[2],J=new Hi(_);return J.setQuadrantSegments(I),J.getResultGeometry(E)}if(arguments[2]instanceof Pr&&arguments[0]instanceof Gt&&typeof arguments[1]=="number"){var at=arguments[0],yt=arguments[1],St=arguments[2];return new Hi(at,St).getResultGeometry(yt)}}else if(arguments.length===4){var Bt=arguments[0],Yt=arguments[1],ee=arguments[2],xe=arguments[3],Me=new Hi(Bt);return Me.setQuadrantSegments(ee),Me.setEndCapStyle(xe),Me.getResultGeometry(Yt)}},Hi.precisionScaleFactor=function(u,f,_){var E=u.getEnvelopeInternal(),I=C.max(Math.abs(E.getMaxX()),Math.abs(E.getMaxY()),Math.abs(E.getMinX()),Math.abs(E.getMinY()))+2*(f>0?f:0),J=_-Math.trunc(Math.log(I)/Math.log(10)+1);return Math.pow(10,J)},Ys.CAP_ROUND.get=function(){return Pr.CAP_ROUND},Ys.CAP_BUTT.get=function(){return Pr.CAP_FLAT},Ys.CAP_FLAT.get=function(){return Pr.CAP_FLAT},Ys.CAP_SQUARE.get=function(){return Pr.CAP_SQUARE},Ys.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Hi,Ys);var zi=function(){this._pt=[new G,new G],this._distance=O.NaN,this._isNull=!0};zi.prototype.getCoordinates=function(){return this._pt},zi.prototype.getCoordinate=function(u){return this._pt[u]},zi.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(f,_),null;var E=f.distance(_);E<this._distance&&this.initialize(f,_,E)}},zi.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],f=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(f),this._distance=u.distance(f),this._isNull=!1}else if(arguments.length===3){var _=arguments[0],E=arguments[1],I=arguments[2];this._pt[0].setCoordinate(_),this._pt[1].setCoordinate(E),this._distance=I,this._isNull=!1}},zi.prototype.getDistance=function(){return this._distance},zi.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(f,_),null;var E=f.distance(_);E>this._distance&&this.initialize(f,_,E)}},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi};var ns=function(){};ns.prototype.interfaces_=function(){return[]},ns.prototype.getClass=function(){return ns},ns.computeDistance=function(){if(arguments[2]instanceof zi&&arguments[0]instanceof or&&arguments[1]instanceof G)for(var u=arguments[0],f=arguments[1],_=arguments[2],E=u.getCoordinates(),I=new Pe,J=0;J<E.length-1;J++){I.setCoordinates(E[J],E[J+1]);var at=I.closestPoint(f);_.setMinimum(at,f)}else if(arguments[2]instanceof zi&&arguments[0]instanceof Ht&&arguments[1]instanceof G){var yt=arguments[0],St=arguments[1],Bt=arguments[2];ns.computeDistance(yt.getExteriorRing(),St,Bt);for(var Yt=0;Yt<yt.getNumInteriorRing();Yt++)ns.computeDistance(yt.getInteriorRingN(Yt),St,Bt)}else if(arguments[2]instanceof zi&&arguments[0]instanceof Gt&&arguments[1]instanceof G){var ee=arguments[0],xe=arguments[1],Me=arguments[2];if(ee instanceof or)ns.computeDistance(ee,xe,Me);else if(ee instanceof Ht)ns.computeDistance(ee,xe,Me);else if(ee instanceof fe)for(var Be=ee,qe=0;qe<Be.getNumGeometries();qe++){var gi=Be.getGeometryN(qe);ns.computeDistance(gi,xe,Me)}else Me.setMinimum(ee.getCoordinate(),xe)}else if(arguments[2]instanceof zi&&arguments[0]instanceof Pe&&arguments[1]instanceof G){var qi=arguments[0],Fn=arguments[1],to=arguments[2],No=qi.closestPoint(Fn);to.setMinimum(No,Fn)}};var Ds=function(u){this._maxPtDist=new zi,this._inputGeom=u||null},wa={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ds.prototype.computeMaxMidpointDistance=function(u){var f=new bs(this._inputGeom);u.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())},Ds.prototype.computeMaxVertexDistance=function(u){var f=new Po(this._inputGeom);u.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())},Ds.prototype.findDistance=function(u){return this.computeMaxVertexDistance(u),this.computeMaxMidpointDistance(u),this._maxPtDist.getDistance()},Ds.prototype.getDistancePoints=function(){return this._maxPtDist},Ds.prototype.interfaces_=function(){return[]},Ds.prototype.getClass=function(){return Ds},wa.MaxPointDistanceFilter.get=function(){return Po},wa.MaxMidpointDistanceFilter.get=function(){return bs},Object.defineProperties(Ds,wa);var Po=function(u){this._maxPtDist=new zi,this._minPtDist=new zi,this._geom=u||null};Po.prototype.filter=function(u){this._minPtDist.initialize(),ns.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Po.prototype.getMaxPointDistance=function(){return this._maxPtDist},Po.prototype.interfaces_=function(){return[re]},Po.prototype.getClass=function(){return Po};var bs=function(u){this._maxPtDist=new zi,this._minPtDist=new zi,this._geom=u||null};bs.prototype.filter=function(u,f){if(f===0)return null;var _=u.getCoordinate(f-1),E=u.getCoordinate(f),I=new G((_.x+E.x)/2,(_.y+E.y)/2);this._minPtDist.initialize(),ns.computeDistance(this._geom,I,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},bs.prototype.isDone=function(){return!1},bs.prototype.isGeometryChanged=function(){return!1},bs.prototype.getMaxPointDistance=function(){return this._maxPtDist},bs.prototype.interfaces_=function(){return[Ae]},bs.prototype.getClass=function(){return bs};var Bs=function(u){this._comps=u||null};Bs.prototype.filter=function(u){u instanceof Ht&&this._comps.add(u)},Bs.prototype.interfaces_=function(){return[$e]},Bs.prototype.getClass=function(){return Bs},Bs.getPolygons=function(){if(arguments.length===1){var u=arguments[0];return Bs.getPolygons(u,new $t)}if(arguments.length===2){var f=arguments[0],_=arguments[1];return f instanceof Ht?_.add(f):f instanceof fe&&f.apply(new Bs(_)),_}};var Ji=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var u=arguments[0];this._lines=u}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this._lines=f,this._isForcedToLineString=_}};Ji.prototype.filter=function(u){if(this._isForcedToLineString&&u instanceof Qt){var f=u.getFactory().createLineString(u.getCoordinateSequence());return this._lines.add(f),null}u instanceof or&&this._lines.add(u)},Ji.prototype.setForceToLineString=function(u){this._isForcedToLineString=u},Ji.prototype.interfaces_=function(){return[zt]},Ji.prototype.getClass=function(){return Ji},Ji.getGeometry=function(){if(arguments.length===1){var u=arguments[0];return u.getFactory().buildGeometry(Ji.getLines(u))}if(arguments.length===2){var f=arguments[0],_=arguments[1];return f.getFactory().buildGeometry(Ji.getLines(f,_))}},Ji.getLines=function(){if(arguments.length===1){var u=arguments[0];return Ji.getLines(u,!1)}if(arguments.length===2){if(w(arguments[0],ce)&&w(arguments[1],ce)){for(var f=arguments[0],_=arguments[1],E=f.iterator();E.hasNext();){var I=E.next();Ji.getLines(I,_)}return _}if(arguments[0]instanceof Gt&&typeof arguments[1]=="boolean"){var J=arguments[0],at=arguments[1],yt=new $t;return J.apply(new Ji(yt,at)),yt}if(arguments[0]instanceof Gt&&w(arguments[1],ce)){var St=arguments[0],Bt=arguments[1];return St instanceof or?Bt.add(St):St.apply(new Ji(Bt)),Bt}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&w(arguments[0],ce)&&w(arguments[1],ce)){for(var Yt=arguments[0],ee=arguments[1],xe=arguments[2],Me=Yt.iterator();Me.hasNext();){var Be=Me.next();Ji.getLines(Be,ee,xe)}return ee}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Gt&&w(arguments[1],ce)){var qe=arguments[0],gi=arguments[1],qi=arguments[2];return qe.apply(new Ji(gi,qi)),gi}}};var fs=function(){if(this._boundaryRule=Xt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];if(u===null)throw new S("Rule must be non-null");this._boundaryRule=u}}};fs.prototype.locateInternal=function(){if(arguments[0]instanceof G&&arguments[1]instanceof Ht){var u=arguments[0],f=arguments[1];if(f.isEmpty())return N.EXTERIOR;var _=f.getExteriorRing(),E=this.locateInPolygonRing(u,_);if(E===N.EXTERIOR)return N.EXTERIOR;if(E===N.BOUNDARY)return N.BOUNDARY;for(var I=0;I<f.getNumInteriorRing();I++){var J=f.getInteriorRingN(I),at=this.locateInPolygonRing(u,J);if(at===N.INTERIOR)return N.EXTERIOR;if(at===N.BOUNDARY)return N.BOUNDARY}return N.INTERIOR}if(arguments[0]instanceof G&&arguments[1]instanceof or){var yt=arguments[0],St=arguments[1];if(!St.getEnvelopeInternal().intersects(yt))return N.EXTERIOR;var Bt=St.getCoordinates();return St.isClosed()||!yt.equals(Bt[0])&&!yt.equals(Bt[Bt.length-1])?Et.isOnLine(yt,Bt)?N.INTERIOR:N.EXTERIOR:N.BOUNDARY}if(arguments[0]instanceof G&&arguments[1]instanceof kr){var Yt=arguments[0];return arguments[1].getCoordinate().equals2D(Yt)?N.INTERIOR:N.EXTERIOR}},fs.prototype.locateInPolygonRing=function(u,f){return f.getEnvelopeInternal().intersects(u)?Et.locatePointInRing(u,f.getCoordinates()):N.EXTERIOR},fs.prototype.intersects=function(u,f){return this.locate(u,f)!==N.EXTERIOR},fs.prototype.updateLocationInfo=function(u){u===N.INTERIOR&&(this._isIn=!0),u===N.BOUNDARY&&this._numBoundaries++},fs.prototype.computeLocation=function(u,f){if(f instanceof kr&&this.updateLocationInfo(this.locateInternal(u,f)),f instanceof or)this.updateLocationInfo(this.locateInternal(u,f));else if(f instanceof Ht)this.updateLocationInfo(this.locateInternal(u,f));else if(f instanceof Ye)for(var _=f,E=0;E<_.getNumGeometries();E++){var I=_.getGeometryN(E);this.updateLocationInfo(this.locateInternal(u,I))}else if(f instanceof he)for(var J=f,at=0;at<J.getNumGeometries();at++){var yt=J.getGeometryN(at);this.updateLocationInfo(this.locateInternal(u,yt))}else if(f instanceof fe)for(var St=new ks(f);St.hasNext();){var Bt=St.next();Bt!==f&&this.computeLocation(u,Bt)}},fs.prototype.locate=function(u,f){return f.isEmpty()?N.EXTERIOR:f instanceof or?this.locateInternal(u,f):f instanceof Ht?this.locateInternal(u,f):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(u,f),this._boundaryRule.isInBoundary(this._numBoundaries)?N.BOUNDARY:this._numBoundaries>0||this._isIn?N.INTERIOR:N.EXTERIOR)},fs.prototype.interfaces_=function(){return[]},fs.prototype.getClass=function(){return fs};var gn=function u(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var f=arguments[0],_=arguments[1];u.call(this,f,u.INSIDE_AREA,_)}else if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];this._component=E,this._segIndex=I,this._pt=J}},ou={INSIDE_AREA:{configurable:!0}};gn.prototype.isInsideArea=function(){return this._segIndex===gn.INSIDE_AREA},gn.prototype.getCoordinate=function(){return this._pt},gn.prototype.getGeometryComponent=function(){return this._component},gn.prototype.getSegmentIndex=function(){return this._segIndex},gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn},ou.INSIDE_AREA.get=function(){return-1},Object.defineProperties(gn,ou);var xn=function(u){this._pts=u||null};xn.prototype.filter=function(u){u instanceof kr&&this._pts.add(u)},xn.prototype.interfaces_=function(){return[$e]},xn.prototype.getClass=function(){return xn},xn.getPoints=function(){if(arguments.length===1){var u=arguments[0];return u instanceof kr?Ce.singletonList(u):xn.getPoints(u,new $t)}if(arguments.length===2){var f=arguments[0],_=arguments[1];return f instanceof kr?_.add(f):f instanceof fe&&f.apply(new xn(_)),_}};var Fs=function(){this._locations=null;var u=arguments[0];this._locations=u};Fs.prototype.filter=function(u){(u instanceof kr||u instanceof or||u instanceof Ht)&&this._locations.add(new gn(u,0,u.getCoordinate()))},Fs.prototype.interfaces_=function(){return[$e]},Fs.prototype.getClass=function(){return Fs},Fs.getLocations=function(u){var f=new $t;return u.apply(new Fs(f)),f};var hn=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new fs,this._minDistanceLocation=null,this._minDistance=O.MAX_VALUE,arguments.length===2){var u=arguments[0],f=arguments[1];this._geom=[u,f],this._terminateDistance=0}else if(arguments.length===3){var _=arguments[0],E=arguments[1],I=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=_,this._geom[1]=E,this._terminateDistance=I}};hn.prototype.computeContainmentDistance=function(){if(arguments.length===0){var u=new Array(2).fill(null);if(this.computeContainmentDistance(0,u),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,u)}else if(arguments.length===2){var f=arguments[0],_=arguments[1],E=1-f,I=Bs.getPolygons(this._geom[f]);if(I.size()>0){var J=Fs.getLocations(this._geom[E]);if(this.computeContainmentDistance(J,I,_),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[E]=_[0],this._minDistanceLocation[f]=_[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&w(arguments[0],He)&&w(arguments[1],He)){for(var at=arguments[0],yt=arguments[1],St=arguments[2],Bt=0;Bt<at.size();Bt++)for(var Yt=at.get(Bt),ee=0;ee<yt.size();ee++)if(this.computeContainmentDistance(Yt,yt.get(ee),St),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof gn&&arguments[1]instanceof Ht){var xe=arguments[0],Me=arguments[1],Be=arguments[2],qe=xe.getCoordinate();if(N.EXTERIOR!==this._ptLocator.locate(qe,Me))return this._minDistance=0,Be[0]=xe,Be[1]=new gn(Me,qe),null}}},hn.prototype.computeMinDistanceLinesPoints=function(u,f,_){for(var E=0;E<u.size();E++)for(var I=u.get(E),J=0;J<f.size();J++){var at=f.get(J);if(this.computeMinDistance(I,at,_),this._minDistance<=this._terminateDistance)return null}},hn.prototype.computeFacetDistance=function(){var u=new Array(2).fill(null),f=Ji.getLines(this._geom[0]),_=Ji.getLines(this._geom[1]),E=xn.getPoints(this._geom[0]),I=xn.getPoints(this._geom[1]);return this.computeMinDistanceLines(f,_,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(f,I,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(_,E,u),this.updateMinDistance(u,!0),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistancePoints(E,I,u),void this.updateMinDistance(u,!1))))},hn.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},hn.prototype.updateMinDistance=function(u,f){if(u[0]===null)return null;f?(this._minDistanceLocation[0]=u[1],this._minDistanceLocation[1]=u[0]):(this._minDistanceLocation[0]=u[0],this._minDistanceLocation[1]=u[1])},hn.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},hn.prototype.computeMinDistance=function(){if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof or&&arguments[1]instanceof kr){var u=arguments[0],f=arguments[1],_=arguments[2];if(u.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this._minDistance)return null;for(var E=u.getCoordinates(),I=f.getCoordinate(),J=0;J<E.length-1;J++){var at=Et.distancePointLine(I,E[J],E[J+1]);if(at<this._minDistance){this._minDistance=at;var yt=new Pe(E[J],E[J+1]).closestPoint(I);_[0]=new gn(u,J,yt),_[1]=new gn(f,0,I)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof or&&arguments[1]instanceof or){var St=arguments[0],Bt=arguments[1],Yt=arguments[2];if(St.getEnvelopeInternal().distance(Bt.getEnvelopeInternal())>this._minDistance)return null;for(var ee=St.getCoordinates(),xe=Bt.getCoordinates(),Me=0;Me<ee.length-1;Me++)for(var Be=0;Be<xe.length-1;Be++){var qe=Et.distanceLineLine(ee[Me],ee[Me+1],xe[Be],xe[Be+1]);if(qe<this._minDistance){this._minDistance=qe;var gi=new Pe(ee[Me],ee[Me+1]),qi=new Pe(xe[Be],xe[Be+1]),Fn=gi.closestPoints(qi);Yt[0]=new gn(St,Me,Fn[0]),Yt[1]=new gn(Bt,Be,Fn[1])}if(this._minDistance<=this._terminateDistance)return null}}}},hn.prototype.computeMinDistancePoints=function(u,f,_){for(var E=0;E<u.size();E++)for(var I=u.get(E),J=0;J<f.size();J++){var at=f.get(J),yt=I.getCoordinate().distance(at.getCoordinate());if(yt<this._minDistance&&(this._minDistance=yt,_[0]=new gn(I,0,I.getCoordinate()),_[1]=new gn(at,0,at.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},hn.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new S("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},hn.prototype.computeMinDistanceLines=function(u,f,_){for(var E=0;E<u.size();E++)for(var I=u.get(E),J=0;J<f.size();J++){var at=f.get(J);if(this.computeMinDistance(I,at,_),this._minDistance<=this._terminateDistance)return null}},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.distance=function(u,f){return new hn(u,f).distance()},hn.isWithinDistance=function(u,f,_){return new hn(u,f,_).distance()<=_},hn.nearestPoints=function(u,f){return new hn(u,f).nearestPoints()};var Gi=function(){this._pt=[new G,new G],this._distance=O.NaN,this._isNull=!0};Gi.prototype.getCoordinates=function(){return this._pt},Gi.prototype.getCoordinate=function(u){return this._pt[u]},Gi.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(f,_),null;var E=f.distance(_);E<this._distance&&this.initialize(f,_,E)}},Gi.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],f=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(f),this._distance=u.distance(f),this._isNull=!1}else if(arguments.length===3){var _=arguments[0],E=arguments[1],I=arguments[2];this._pt[0].setCoordinate(_),this._pt[1].setCoordinate(E),this._distance=I,this._isNull=!1}},Gi.prototype.toString=function(){return kt.toLineString(this._pt[0],this._pt[1])},Gi.prototype.getDistance=function(){return this._distance},Gi.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(f,_),null;var E=f.distance(_);E>this._distance&&this.initialize(f,_,E)}},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi};var _s=function(){};_s.prototype.interfaces_=function(){return[]},_s.prototype.getClass=function(){return _s},_s.computeDistance=function(){if(arguments[2]instanceof Gi&&arguments[0]instanceof or&&arguments[1]instanceof G)for(var u=arguments[0],f=arguments[1],_=arguments[2],E=new Pe,I=u.getCoordinates(),J=0;J<I.length-1;J++){E.setCoordinates(I[J],I[J+1]);var at=E.closestPoint(f);_.setMinimum(at,f)}else if(arguments[2]instanceof Gi&&arguments[0]instanceof Ht&&arguments[1]instanceof G){var yt=arguments[0],St=arguments[1],Bt=arguments[2];_s.computeDistance(yt.getExteriorRing(),St,Bt);for(var Yt=0;Yt<yt.getNumInteriorRing();Yt++)_s.computeDistance(yt.getInteriorRingN(Yt),St,Bt)}else if(arguments[2]instanceof Gi&&arguments[0]instanceof Gt&&arguments[1]instanceof G){var ee=arguments[0],xe=arguments[1],Me=arguments[2];if(ee instanceof or)_s.computeDistance(ee,xe,Me);else if(ee instanceof Ht)_s.computeDistance(ee,xe,Me);else if(ee instanceof fe)for(var Be=ee,qe=0;qe<Be.getNumGeometries();qe++){var gi=Be.getGeometryN(qe);_s.computeDistance(gi,xe,Me)}else Me.setMinimum(ee.getCoordinate(),xe)}else if(arguments[2]instanceof Gi&&arguments[0]instanceof Pe&&arguments[1]instanceof G){var qi=arguments[0],Fn=arguments[1],to=arguments[2],No=qi.closestPoint(Fn);to.setMinimum(No,Fn)}};var $n=function(){this._g0=null,this._g1=null,this._ptDist=new Gi,this._densifyFrac=0;var u=arguments[0],f=arguments[1];this._g0=u,this._g1=f},hl={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};$n.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},$n.prototype.setDensifyFraction=function(u){if(u>1||u<=0)throw new S("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=u},$n.prototype.compute=function(u,f){this.computeOrientedDistance(u,f,this._ptDist),this.computeOrientedDistance(f,u,this._ptDist)},$n.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},$n.prototype.computeOrientedDistance=function(u,f,_){var E=new Ps(f);if(u.apply(E),_.setMaximum(E.getMaxPointDistance()),this._densifyFrac>0){var I=new Zs(f,this._densifyFrac);u.apply(I),_.setMaximum(I.getMaxPointDistance())}},$n.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.distance=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];return new $n(u,f).distance()}if(arguments.length===3){var _=arguments[0],E=arguments[1],I=arguments[2],J=new $n(_,E);return J.setDensifyFraction(I),J.distance()}},hl.MaxPointDistanceFilter.get=function(){return Ps},hl.MaxDensifiedByFractionDistanceFilter.get=function(){return Zs},Object.defineProperties($n,hl);var Ps=function(){this._maxPtDist=new Gi,this._minPtDist=new Gi,this._euclideanDist=new _s,this._geom=null;var u=arguments[0];this._geom=u};Ps.prototype.filter=function(u){this._minPtDist.initialize(),_s.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ps.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ps.prototype.interfaces_=function(){return[re]},Ps.prototype.getClass=function(){return Ps};var Zs=function(){this._maxPtDist=new Gi,this._minPtDist=new Gi,this._geom=null,this._numSubSegs=0;var u=arguments[0],f=arguments[1];this._geom=u,this._numSubSegs=Math.trunc(Math.round(1/f))};Zs.prototype.filter=function(u,f){if(f===0)return null;for(var _=u.getCoordinate(f-1),E=u.getCoordinate(f),I=(E.x-_.x)/this._numSubSegs,J=(E.y-_.y)/this._numSubSegs,at=0;at<this._numSubSegs;at++){var yt=_.x+at*I,St=_.y+at*J,Bt=new G(yt,St);this._minPtDist.initialize(),_s.computeDistance(this._geom,Bt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Zs.prototype.isDone=function(){return!1},Zs.prototype.isGeometryChanged=function(){return!1},Zs.prototype.getMaxPointDistance=function(){return this._maxPtDist},Zs.prototype.interfaces_=function(){return[Ae]},Zs.prototype.getClass=function(){return Zs};var Qi=function(u,f,_){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._bufDistance=f||null,this._result=_||null},xa={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Qi.prototype.checkMaximumDistance=function(u,f,_){var E=new $n(f,u);if(E.setDensifyFraction(.25),this._maxDistanceFound=E.orientedDistance(),this._maxDistanceFound>_){this._isValid=!1;var I=E.getCoordinates();this._errorLocation=I[1],this._errorIndicator=u.getFactory().createLineString(I),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+kt.toLineString(I[0],I[1])+")"}},Qi.prototype.isValid=function(){var u=Math.abs(this._bufDistance),f=Qi.MAX_DISTANCE_DIFF_FRAC*u;return this._minValidDistance=u-f,this._maxValidDistance=u+f,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Qi.VERBOSE&&it.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Qi.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ht||this._input instanceof he||this._input instanceof fe))return null;var u=this.getPolygonLines(this._input);if(this.checkMinimumDistance(u,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(u,this._result,this._maxValidDistance)},Qi.prototype.getErrorIndicator=function(){return this._errorIndicator},Qi.prototype.checkMinimumDistance=function(u,f,_){var E=new hn(u,f,_);if(this._minDistanceFound=E.distance(),this._minDistanceFound<_){this._isValid=!1;var I=E.nearestPoints();this._errorLocation=E.nearestPoints()[1],this._errorIndicator=u.getFactory().createLineString(I),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+kt.toLineString(I[0],I[1])+" )"}},Qi.prototype.checkPositiveValid=function(){var u=this._result.getBoundary();if(this.checkMinimumDistance(this._input,u,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,u,this._maxValidDistance)},Qi.prototype.getErrorLocation=function(){return this._errorLocation},Qi.prototype.getPolygonLines=function(u){for(var f=new $t,_=new Ji(f),E=Bs.getPolygons(u).iterator();E.hasNext();)E.next().apply(_);return u.getFactory().buildGeometry(f)},Qi.prototype.getErrorMessage=function(){return this._errMsg},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},xa.VERBOSE.get=function(){return!1},xa.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(Qi,xa);var tn=function(u,f,_){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._distance=f||null,this._result=_||null},cl={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};tn.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},tn.prototype.checkEnvelope=function(){if(this._distance<0)return null;var u=this._distance*tn.MAX_ENV_DIFF_FRAC;u===0&&(u=.001);var f=new wt(this._input.getEnvelopeInternal());f.expandBy(this._distance);var _=new wt(this._result.getEnvelopeInternal());_.expandBy(u),_.contains(f)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(_)),this.report("Envelope")},tn.prototype.checkDistance=function(){var u=new Qi(this._input,this._distance,this._result);u.isValid()||(this._isValid=!1,this._errorMsg=u.getErrorMessage(),this._errorLocation=u.getErrorLocation(),this._errorIndicator=u.getErrorIndicator()),this.report("Distance")},tn.prototype.checkArea=function(){var u=this._input.getArea(),f=this._result.getArea();this._distance>0&&u>f&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&u<f&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},tn.prototype.checkPolygonal=function(){this._result instanceof Ht||this._result instanceof he||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},tn.prototype.getErrorIndicator=function(){return this._errorIndicator},tn.prototype.getErrorLocation=function(){return this._errorLocation},tn.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},tn.prototype.report=function(u){if(!tn.VERBOSE)return null;it.out.println("Check "+u+": "+(this._isValid?"passed":"FAILED"))},tn.prototype.getErrorMessage=function(){return this._errorMsg},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn},tn.isValidMsg=function(u,f,_){var E=new tn(u,f,_);return E.isValid()?null:E.getErrorMessage()},tn.isValid=function(u,f,_){return!!new tn(u,f,_).isValid()},cl.VERBOSE.get=function(){return!1},cl.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(tn,cl);var cn=function(){this._pts=null,this._data=null;var u=arguments[0],f=arguments[1];this._pts=u,this._data=f};cn.prototype.getCoordinates=function(){return this._pts},cn.prototype.size=function(){return this._pts.length},cn.prototype.getCoordinate=function(u){return this._pts[u]},cn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},cn.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:Wn.octant(this.getCoordinate(u),this.getCoordinate(u+1))},cn.prototype.setData=function(u){this._data=u},cn.prototype.getData=function(){return this._data},cn.prototype.toString=function(){return kt.toLineString(new pe(this._pts))},cn.prototype.interfaces_=function(){return[es]},cn.prototype.getClass=function(){return cn};var Ui=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new $t,this._intersectionCount=0,this._keepIntersections=!0;var u=arguments[0];this._li=u,this._interiorIntersection=null};Ui.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Ui.prototype.setCheckEndSegmentsOnly=function(u){this._isCheckEndSegmentsOnly=u},Ui.prototype.getIntersectionSegments=function(){return this._intSegments},Ui.prototype.count=function(){return this._intersectionCount},Ui.prototype.getIntersections=function(){return this._intersections},Ui.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},Ui.prototype.setKeepIntersections=function(u){this._keepIntersections=u},Ui.prototype.processIntersections=function(u,f,_,E){if(!this._findAllIntersections&&this.hasIntersection()||u===_&&f===E||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(u,f)||this.isEndSegment(_,E)))return null;var I=u.getCoordinates()[f],J=u.getCoordinates()[f+1],at=_.getCoordinates()[E],yt=_.getCoordinates()[E+1];this._li.computeIntersection(I,J,at,yt),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=I,this._intSegments[1]=J,this._intSegments[2]=at,this._intSegments[3]=yt,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Ui.prototype.isEndSegment=function(u,f){return f===0||f>=u.size()-2},Ui.prototype.hasIntersection=function(){return this._interiorIntersection!==null},Ui.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},Ui.prototype.interfaces_=function(){return[fo]},Ui.prototype.getClass=function(){return Ui},Ui.createAllIntersectionsFinder=function(u){var f=new Ui(u);return f.setFindAllIntersections(!0),f},Ui.createAnyIntersectionFinder=function(u){return new Ui(u)},Ui.createIntersectionCounter=function(u){var f=new Ui(u);return f.setFindAllIntersections(!0),f.setKeepIntersections(!1),f};var ss=function(){this._li=new lt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var u=arguments[0];this._segStrings=u};ss.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},ss.prototype.getIntersections=function(){return this._segInt.getIntersections()},ss.prototype.isValid=function(){return this.execute(),this._isValid},ss.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},ss.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ui(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var u=new al;if(u.setSegmentIntersector(this._segInt),u.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},ss.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new _i(this.getErrorMessage(),this._segInt.getInteriorIntersection())},ss.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var u=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+kt.toLineString(u[0],u[1])+" and "+kt.toLineString(u[2],u[3])},ss.prototype.interfaces_=function(){return[]},ss.prototype.getClass=function(){return ss},ss.computeIntersections=function(u){var f=new ss(u);return f.setFindAllIntersections(!0),f.isValid(),f.getIntersections()};var ws=function u(){this._nv=null;var f=arguments[0];this._nv=new ss(u.toSegmentStrings(f))};ws.prototype.checkValid=function(){this._nv.checkValid()},ws.prototype.interfaces_=function(){return[]},ws.prototype.getClass=function(){return ws},ws.toSegmentStrings=function(u){for(var f=new $t,_=u.iterator();_.hasNext();){var E=_.next();f.add(new cn(E.getCoordinates(),E))}return f},ws.checkValid=function(u){new ws(u).checkValid()};var Ro=function(u){this._mapOp=u};Ro.prototype.map=function(u){for(var f=new $t,_=0;_<u.getNumGeometries();_++){var E=this._mapOp.map(u.getGeometryN(_));E.isEmpty()||f.add(E)}return u.getFactory().createGeometryCollection(Se.toGeometryArray(f))},Ro.prototype.interfaces_=function(){return[]},Ro.prototype.getClass=function(){return Ro},Ro.map=function(u,f){return new Ro(f).map(u)};var Yn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new $t,this._resultLineList=new $t;var u=arguments[0],f=arguments[1],_=arguments[2];this._op=u,this._geometryFactory=f,this._ptLocator=_};Yn.prototype.collectLines=function(u){for(var f=this._op.getGraph().getEdgeEnds().iterator();f.hasNext();){var _=f.next();this.collectLineEdge(_,u,this._lineEdgesList),this.collectBoundaryTouchEdge(_,u,this._lineEdgesList)}},Yn.prototype.labelIsolatedLine=function(u,f){var _=this._ptLocator.locate(u.getCoordinate(),this._op.getArgGeometry(f));u.getLabel().setLocation(f,_)},Yn.prototype.build=function(u){return this.findCoveredLineEdges(),this.collectLines(u),this.buildLines(u),this._resultLineList},Yn.prototype.collectLineEdge=function(u,f,_){var E=u.getLabel(),I=u.getEdge();u.isLineEdge()&&(u.isVisited()||!er.isResultOfOp(E,f)||I.isCovered()||(_.add(I),u.setVisitedEdge(!0)))},Yn.prototype.findCoveredLineEdges=function(){for(var u=this._op.getGraph().getNodes().iterator();u.hasNext();)u.next().getEdges().findCoveredLineEdges();for(var f=this._op.getGraph().getEdgeEnds().iterator();f.hasNext();){var _=f.next(),E=_.getEdge();if(_.isLineEdge()&&!E.isCoveredSet()){var I=this._op.isCoveredByA(_.getCoordinate());E.setCovered(I)}}},Yn.prototype.labelIsolatedLines=function(u){for(var f=u.iterator();f.hasNext();){var _=f.next(),E=_.getLabel();_.isIsolated()&&(E.isNull(0)?this.labelIsolatedLine(_,0):this.labelIsolatedLine(_,1))}},Yn.prototype.buildLines=function(u){for(var f=this._lineEdgesList.iterator();f.hasNext();){var _=f.next(),E=this._geometryFactory.createLineString(_.getCoordinates());this._resultLineList.add(E),_.setInResult(!0)}},Yn.prototype.collectBoundaryTouchEdge=function(u,f,_){var E=u.getLabel();return u.isLineEdge()||u.isVisited()||u.isInteriorAreaEdge()||u.getEdge().isInResult()?null:(Q.isTrue(!(u.isInResult()||u.getSym().isInResult())||!u.getEdge().isInResult()),void(er.isResultOfOp(E,f)&&f===er.INTERSECTION&&(_.add(u.getEdge()),u.setVisitedEdge(!0))))},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Rs=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new $t;var u=arguments[0],f=arguments[1];this._op=u,this._geometryFactory=f};Rs.prototype.filterCoveredNodeToPoint=function(u){var f=u.getCoordinate();if(!this._op.isCoveredByLA(f)){var _=this._geometryFactory.createPoint(f);this._resultPointList.add(_)}},Rs.prototype.extractNonCoveredResultNodes=function(u){for(var f=this._op.getGraph().getNodes().iterator();f.hasNext();){var _=f.next();if(!_.isInResult()&&!_.isIncidentEdgeInResult()&&(_.getEdges().getDegree()===0||u===er.INTERSECTION)){var E=_.getLabel();er.isResultOfOp(E,u)&&this.filterCoveredNodeToPoint(_)}}},Rs.prototype.build=function(u){return this.extractNonCoveredResultNodes(u),this._resultPointList},Rs.prototype.interfaces_=function(){return[]},Rs.prototype.getClass=function(){return Rs};var En=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};En.prototype.transformPoint=function(u,f){return this._factory.createPoint(this.transformCoordinates(u.getCoordinateSequence(),u))},En.prototype.transformPolygon=function(u,f){var _=!0,E=this.transformLinearRing(u.getExteriorRing(),u);E!==null&&E instanceof Qt&&!E.isEmpty()||(_=!1);for(var I=new $t,J=0;J<u.getNumInteriorRing();J++){var at=this.transformLinearRing(u.getInteriorRingN(J),u);at===null||at.isEmpty()||(at instanceof Qt||(_=!1),I.add(at))}if(_)return this._factory.createPolygon(E,I.toArray([]));var yt=new $t;return E!==null&&yt.add(E),yt.addAll(I),this._factory.buildGeometry(yt)},En.prototype.createCoordinateSequence=function(u){return this._factory.getCoordinateSequenceFactory().create(u)},En.prototype.getInputGeometry=function(){return this._inputGeom},En.prototype.transformMultiLineString=function(u,f){for(var _=new $t,E=0;E<u.getNumGeometries();E++){var I=this.transformLineString(u.getGeometryN(E),u);I!==null&&(I.isEmpty()||_.add(I))}return this._factory.buildGeometry(_)},En.prototype.transformCoordinates=function(u,f){return this.copy(u)},En.prototype.transformLineString=function(u,f){return this._factory.createLineString(this.transformCoordinates(u.getCoordinateSequence(),u))},En.prototype.transformMultiPoint=function(u,f){for(var _=new $t,E=0;E<u.getNumGeometries();E++){var I=this.transformPoint(u.getGeometryN(E),u);I!==null&&(I.isEmpty()||_.add(I))}return this._factory.buildGeometry(_)},En.prototype.transformMultiPolygon=function(u,f){for(var _=new $t,E=0;E<u.getNumGeometries();E++){var I=this.transformPolygon(u.getGeometryN(E),u);I!==null&&(I.isEmpty()||_.add(I))}return this._factory.buildGeometry(_)},En.prototype.copy=function(u){return u.copy()},En.prototype.transformGeometryCollection=function(u,f){for(var _=new $t,E=0;E<u.getNumGeometries();E++){var I=this.transform(u.getGeometryN(E));I!==null&&(this._pruneEmptyGeometry&&I.isEmpty()||_.add(I))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Se.toGeometryArray(_)):this._factory.buildGeometry(_)},En.prototype.transform=function(u){if(this._inputGeom=u,this._factory=u.getFactory(),u instanceof kr)return this.transformPoint(u,null);if(u instanceof ie)return this.transformMultiPoint(u,null);if(u instanceof Qt)return this.transformLinearRing(u,null);if(u instanceof or)return this.transformLineString(u,null);if(u instanceof Ye)return this.transformMultiLineString(u,null);if(u instanceof Ht)return this.transformPolygon(u,null);if(u instanceof he)return this.transformMultiPolygon(u,null);if(u instanceof fe)return this.transformGeometryCollection(u,null);throw new S("Unknown Geometry subtype: "+u.getClass().getName())},En.prototype.transformLinearRing=function(u,f){var _=this.transformCoordinates(u.getCoordinateSequence(),u);if(_===null)return this._factory.createLinearRing(null);var E=_.size();return E>0&&E<4&&!this._preserveType?this._factory.createLineString(_):this._factory.createLinearRing(_)},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En};var xs=function u(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Pe,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof or&&typeof arguments[1]=="number"){var f=arguments[0],_=arguments[1];u.call(this,f.getCoordinates(),_)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var E=arguments[0],I=arguments[1];this._srcPts=E,this._isClosed=u.isClosed(E),this._snapTolerance=I}};xs.prototype.snapVertices=function(u,f){for(var _=this._isClosed?u.size()-1:u.size(),E=0;E<_;E++){var I=u.get(E),J=this.findSnapForVertex(I,f);J!==null&&(u.set(E,new G(J)),E===0&&this._isClosed&&u.set(u.size()-1,new G(J)))}},xs.prototype.findSnapForVertex=function(u,f){for(var _=0;_<f.length;_++){if(u.equals2D(f[_]))return null;if(u.distance(f[_])<this._snapTolerance)return f[_]}return null},xs.prototype.snapTo=function(u){var f=new br(this._srcPts);return this.snapVertices(f,u),this.snapSegments(f,u),f.toCoordinateArray()},xs.prototype.snapSegments=function(u,f){if(f.length===0)return null;var _=f.length;f[0].equals2D(f[f.length-1])&&(_=f.length-1);for(var E=0;E<_;E++){var I=f[E],J=this.findSegmentIndexToSnap(I,u);J>=0&&u.add(J+1,new G(I),!1)}},xs.prototype.findSegmentIndexToSnap=function(u,f){for(var _=O.MAX_VALUE,E=-1,I=0;I<f.size()-1;I++){if(this._seg.p0=f.get(I),this._seg.p1=f.get(I+1),this._seg.p0.equals2D(u)||this._seg.p1.equals2D(u)){if(this._allowSnappingToSourceVertices)continue;return-1}var J=this._seg.distance(u);J<this._snapTolerance&&J<_&&(_=J,E=I)}return E},xs.prototype.setAllowSnappingToSourceVertices=function(u){this._allowSnappingToSourceVertices=u},xs.prototype.interfaces_=function(){return[]},xs.prototype.getClass=function(){return xs},xs.isClosed=function(u){return!(u.length<=1)&&u[0].equals2D(u[u.length-1])};var Oi=function(u){this._srcGeom=u||null},fl={SNAP_PRECISION_FACTOR:{configurable:!0}};Oi.prototype.snapTo=function(u,f){var _=this.extractTargetCoordinates(u);return new dl(f,_).transform(this._srcGeom)},Oi.prototype.snapToSelf=function(u,f){var _=this.extractTargetCoordinates(this._srcGeom),E=new dl(u,_,!0).transform(this._srcGeom),I=E;return f&&w(I,Tt)&&(I=E.buffer(0)),I},Oi.prototype.computeSnapTolerance=function(u){return this.computeMinimumSegmentLength(u)/10},Oi.prototype.extractTargetCoordinates=function(u){for(var f=new g,_=u.getCoordinates(),E=0;E<_.length;E++)f.add(_[E]);return f.toArray(new Array(0).fill(null))},Oi.prototype.computeMinimumSegmentLength=function(u){for(var f=O.MAX_VALUE,_=0;_<u.length-1;_++){var E=u[_].distance(u[_+1]);E<f&&(f=E)}return f},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.snap=function(u,f,_){var E=new Array(2).fill(null),I=new Oi(u);E[0]=I.snapTo(f,_);var J=new Oi(f);return E[1]=J.snapTo(E[0],_),E},Oi.computeOverlaySnapTolerance=function(){if(arguments.length===1){var u=arguments[0],f=Oi.computeSizeBasedSnapTolerance(u),_=u.getPrecisionModel();if(_.getType()===me.FIXED){var E=1/_.getScale()*2/1.415;E>f&&(f=E)}return f}if(arguments.length===2){var I=arguments[0],J=arguments[1];return Math.min(Oi.computeOverlaySnapTolerance(I),Oi.computeOverlaySnapTolerance(J))}},Oi.computeSizeBasedSnapTolerance=function(u){var f=u.getEnvelopeInternal();return Math.min(f.getHeight(),f.getWidth())*Oi.SNAP_PRECISION_FACTOR},Oi.snapToSelf=function(u,f,_){return new Oi(u).snapToSelf(f,_)},fl.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Oi,fl);var dl=function(u){function f(_,E,I){u.call(this),this._snapTolerance=_||null,this._snapPts=E||null,this._isSelfSnap=I!==void 0&&I}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.snapLine=function(_,E){var I=new xs(_,this._snapTolerance);return I.setAllowSnappingToSourceVertices(this._isSelfSnap),I.snapTo(E)},f.prototype.transformCoordinates=function(_,E){var I=_.toCoordinateArray(),J=this.snapLine(I,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(J)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(En),yn=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};yn.prototype.getCommon=function(){return O.longBitsToDouble(this._commonBits)},yn.prototype.add=function(u){var f=O.doubleToLongBits(u);if(this._isFirst)return this._commonBits=f,this._commonSignExp=yn.signExpBits(this._commonBits),this._isFirst=!1,null;if(yn.signExpBits(f)!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=yn.numCommonMostSigMantissaBits(this._commonBits,f),this._commonBits=yn.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},yn.prototype.toString=function(){if(arguments.length===1){var u=arguments[0],f=O.longBitsToDouble(u),_="0000000000000000000000000000000000000000000000000000000000000000"+O.toBinaryString(u),E=_.substring(_.length-64);return E.substring(0,1)+"  "+E.substring(1,12)+"(exp) "+E.substring(12)+" [ "+f+" ]"}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn},yn.getBit=function(u,f){return u&1<<f?1:0},yn.signExpBits=function(u){return u>>52},yn.zeroLowerBits=function(u,f){return u&~((1<<f)-1)},yn.numCommonMostSigMantissaBits=function(u,f){for(var _=0,E=52;E>=0;E--){if(yn.getBit(u,E)!==yn.getBit(f,E))return _;_++}return 52};var zs=function(){this._commonCoord=null,this._ccFilter=new Oo},Ea={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};zs.prototype.addCommonBits=function(u){var f=new js(this._commonCoord);u.apply(f),u.geometryChanged()},zs.prototype.removeCommonBits=function(u){if(this._commonCoord.x===0&&this._commonCoord.y===0)return u;var f=new G(this._commonCoord);f.x=-f.x,f.y=-f.y;var _=new js(f);return u.apply(_),u.geometryChanged(),u},zs.prototype.getCommonCoordinate=function(){return this._commonCoord},zs.prototype.add=function(u){u.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},zs.prototype.interfaces_=function(){return[]},zs.prototype.getClass=function(){return zs},Ea.CommonCoordinateFilter.get=function(){return Oo},Ea.Translater.get=function(){return js},Object.defineProperties(zs,Ea);var Oo=function(){this._commonBitsX=new yn,this._commonBitsY=new yn};Oo.prototype.filter=function(u){this._commonBitsX.add(u.x),this._commonBitsY.add(u.y)},Oo.prototype.getCommonCoordinate=function(){return new G(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Oo.prototype.interfaces_=function(){return[re]},Oo.prototype.getClass=function(){return Oo};var js=function(){this.trans=null;var u=arguments[0];this.trans=u};js.prototype.filter=function(u,f){var _=u.getOrdinate(f,0)+this.trans.x,E=u.getOrdinate(f,1)+this.trans.y;u.setOrdinate(f,0,_),u.setOrdinate(f,1,E)},js.prototype.isDone=function(){return!1},js.prototype.isGeometryChanged=function(){return!0},js.prototype.interfaces_=function(){return[Ae]},js.prototype.getClass=function(){return js};var Vi=function(u,f){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=u,this._geom[1]=f,this.computeSnapTolerance()};Vi.prototype.selfSnap=function(u){return new Oi(u).snapTo(u,this._snapTolerance)},Vi.prototype.removeCommonBits=function(u){this._cbr=new zs,this._cbr.add(u[0]),this._cbr.add(u[1]);var f=new Array(2).fill(null);return f[0]=this._cbr.removeCommonBits(u[0].copy()),f[1]=this._cbr.removeCommonBits(u[1].copy()),f},Vi.prototype.prepareResult=function(u){return this._cbr.addCommonBits(u),u},Vi.prototype.getResultGeometry=function(u){var f=this.snap(this._geom),_=er.overlayOp(f[0],f[1],u);return this.prepareResult(_)},Vi.prototype.checkValid=function(u){u.isValid()||it.out.println("Snapped geometry is invalid")},Vi.prototype.computeSnapTolerance=function(){this._snapTolerance=Oi.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Vi.prototype.snap=function(u){var f=this.removeCommonBits(u);return Oi.snap(f[0],f[1],this._snapTolerance)},Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi},Vi.overlayOp=function(u,f,_){return new Vi(u,f).getResultGeometry(_)},Vi.union=function(u,f){return Vi.overlayOp(u,f,er.UNION)},Vi.intersection=function(u,f){return Vi.overlayOp(u,f,er.INTERSECTION)},Vi.symDifference=function(u,f){return Vi.overlayOp(u,f,er.SYMDIFFERENCE)},Vi.difference=function(u,f){return Vi.overlayOp(u,f,er.DIFFERENCE)};var Cn=function(u,f){this._geom=new Array(2).fill(null),this._geom[0]=u,this._geom[1]=f};Cn.prototype.getResultGeometry=function(u){var f=null,_=!1,E=null;try{f=er.overlayOp(this._geom[0],this._geom[1],u),_=!0}catch(I){if(!(I instanceof gt))throw I;E=I}if(!_)try{f=Vi.overlayOp(this._geom[0],this._geom[1],u)}catch(I){throw I instanceof gt?E:I}return f},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.overlayOp=function(u,f,_){return new Cn(u,f).getResultGeometry(_)},Cn.union=function(u,f){return Cn.overlayOp(u,f,er.UNION)},Cn.intersection=function(u,f){return Cn.overlayOp(u,f,er.INTERSECTION)},Cn.symDifference=function(u,f){return Cn.overlayOp(u,f,er.SYMDIFFERENCE)},Cn.difference=function(u,f){return Cn.overlayOp(u,f,er.DIFFERENCE)};var v=function(){this.mce=null,this.chainIndex=null;var u=arguments[0],f=arguments[1];this.mce=u,this.chainIndex=f};v.prototype.computeIntersections=function(u,f){this.mce.computeIntersectsForChain(this.chainIndex,u.mce,u.chainIndex,f)},v.prototype.interfaces_=function(){return[]},v.prototype.getClass=function(){return v};var P=function u(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var f=arguments[0],_=arguments[1];this._eventType=u.DELETE,this._xValue=f,this._insertEvent=_}else if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];this._eventType=u.INSERT,this._label=E,this._xValue=I,this._obj=J}},X={INSERT:{configurable:!0},DELETE:{configurable:!0}};P.prototype.isDelete=function(){return this._eventType===P.DELETE},P.prototype.setDeleteEventIndex=function(u){this._deleteEventIndex=u},P.prototype.getObject=function(){return this._obj},P.prototype.compareTo=function(u){var f=u;return this._xValue<f._xValue?-1:this._xValue>f._xValue?1:this._eventType<f._eventType?-1:this._eventType>f._eventType?1:0},P.prototype.getInsertEvent=function(){return this._insertEvent},P.prototype.isInsert=function(){return this._eventType===P.INSERT},P.prototype.isSameLabel=function(u){return this._label!==null&&this._label===u._label},P.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},P.prototype.interfaces_=function(){return[U]},P.prototype.getClass=function(){return P},X.INSERT.get=function(){return 1},X.DELETE.get=function(){return 2},Object.defineProperties(P,X);var st=function(){};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st};var ft=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var u=arguments[0],f=arguments[1],_=arguments[2];this._li=u,this._includeProper=f,this._recordIsolated=_};ft.prototype.isTrivialIntersection=function(u,f,_,E){if(u===_&&this._li.getIntersectionNum()===1){if(ft.isAdjacentSegments(f,E))return!0;if(u.isClosed()){var I=u.getNumPoints()-1;if(f===0&&E===I||E===0&&f===I)return!0}}return!1},ft.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ft.prototype.setIsDoneIfProperInt=function(u){this._isDoneWhenProperInt=u},ft.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ft.prototype.isBoundaryPointInternal=function(u,f){for(var _=f.iterator();_.hasNext();){var E=_.next().getCoordinate();if(u.isIntersection(E))return!0}return!1},ft.prototype.hasProperIntersection=function(){return this._hasProper},ft.prototype.hasIntersection=function(){return this._hasIntersection},ft.prototype.isDone=function(){return this._isDone},ft.prototype.isBoundaryPoint=function(u,f){return f!==null&&(!!this.isBoundaryPointInternal(u,f[0])||!!this.isBoundaryPointInternal(u,f[1]))},ft.prototype.setBoundaryNodes=function(u,f){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=u,this._bdyNodes[1]=f},ft.prototype.addIntersections=function(u,f,_,E){if(u===_&&f===E)return null;this.numTests++;var I=u.getCoordinates()[f],J=u.getCoordinates()[f+1],at=_.getCoordinates()[E],yt=_.getCoordinates()[E+1];this._li.computeIntersection(I,J,at,yt),this._li.hasIntersection()&&(this._recordIsolated&&(u.setIsolated(!1),_.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(u,f,_,E)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(u.addIntersections(this._li,f,0),_.addIntersections(this._li,E,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft},ft.isAdjacentSegments=function(u,f){return Math.abs(u-f)===1};var Mt=function(u){function f(){u.call(this),this.events=new $t,this.nOverlaps=null}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.prepareEvents=function(){Ce.sort(this.events);for(var _=0;_<this.events.size();_++){var E=this.events.get(_);E.isDelete()&&E.getInsertEvent().setDeleteEventIndex(_)}},f.prototype.computeIntersections=function(){if(arguments.length===1){var _=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var E=0;E<this.events.size();E++){var I=this.events.get(E);if(I.isInsert()&&this.processOverlaps(E,I.getDeleteEventIndex(),I,_),_.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof ft&&w(arguments[0],He)&&w(arguments[1],He)){var J=arguments[0],at=arguments[1],yt=arguments[2];this.addEdges(J,J),this.addEdges(at,at),this.computeIntersections(yt)}else if(typeof arguments[2]=="boolean"&&w(arguments[0],He)&&arguments[1]instanceof ft){var St=arguments[0],Bt=arguments[1];arguments[2]?this.addEdges(St,null):this.addEdges(St),this.computeIntersections(Bt)}}},f.prototype.addEdge=function(_,E){for(var I=_.getMonotoneChainEdge(),J=I.getStartIndexes(),at=0;at<J.length-1;at++){var yt=new v(I,at),St=new P(E,I.getMinX(at),yt);this.events.add(St),this.events.add(new P(I.getMaxX(at),St))}},f.prototype.processOverlaps=function(_,E,I,J){for(var at=I.getObject(),yt=_;yt<E;yt++){var St=this.events.get(yt);if(St.isInsert()){var Bt=St.getObject();I.isSameLabel(St)||(at.computeIntersections(Bt,J),this.nOverlaps++)}}},f.prototype.addEdges=function(){if(arguments.length===1)for(var _=arguments[0].iterator();_.hasNext();){var E=_.next();this.addEdge(E,E)}else if(arguments.length===2)for(var I=arguments[0],J=arguments[1],at=I.iterator();at.hasNext();){var yt=at.next();this.addEdge(yt,J)}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(st),Dt=function(){this._min=O.POSITIVE_INFINITY,this._max=O.NEGATIVE_INFINITY},Wt={NodeComparator:{configurable:!0}};Dt.prototype.getMin=function(){return this._min},Dt.prototype.intersects=function(u,f){return!(this._min>f||this._max<u)},Dt.prototype.getMax=function(){return this._max},Dt.prototype.toString=function(){return kt.toLineString(new G(this._min,0),new G(this._max,0))},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},Wt.NodeComparator.get=function(){return te},Object.defineProperties(Dt,Wt);var te=function(){};te.prototype.compare=function(u,f){var _=u,E=f,I=(_._min+_._max)/2,J=(E._min+E._max)/2;return I<J?-1:I>J?1:0},te.prototype.interfaces_=function(){return[q]},te.prototype.getClass=function(){return te};var de=function(u){function f(){u.call(this),this._item=null;var _=arguments[0],E=arguments[1],I=arguments[2];this._min=_,this._max=E,this._item=I}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.query=function(_,E,I){if(!this.intersects(_,E))return null;I.visitItem(this._item)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Dt),De=function(u){function f(){u.call(this),this._node1=null,this._node2=null;var _=arguments[0],E=arguments[1];this._node1=_,this._node2=E,this.buildExtent(this._node1,this._node2)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.buildExtent=function(_,E){this._min=Math.min(_._min,E._min),this._max=Math.max(_._max,E._max)},f.prototype.query=function(_,E,I){if(!this.intersects(_,E))return null;this._node1!==null&&this._node1.query(_,E,I),this._node2!==null&&this._node2.query(_,E,I)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Dt),Xe=function(){this._leaves=new $t,this._root=null,this._level=0};Xe.prototype.buildTree=function(){Ce.sort(this._leaves,new Dt.NodeComparator);for(var u=this._leaves,f=null,_=new $t;;){if(this.buildLevel(u,_),_.size()===1)return _.get(0);f=u,u=_,_=f}},Xe.prototype.insert=function(u,f,_){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new de(u,f,_))},Xe.prototype.query=function(u,f,_){this.init(),this._root.query(u,f,_)},Xe.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},Xe.prototype.printNode=function(u){it.out.println(kt.toLineString(new G(u._min,this._level),new G(u._max,this._level)))},Xe.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},Xe.prototype.buildLevel=function(u,f){this._level++,f.clear();for(var _=0;_<u.size();_+=2){var E=u.get(_);if((_+1<u.size()?u.get(_):null)===null)f.add(E);else{var I=new De(u.get(_),u.get(_+1));f.add(I)}}},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var _r=function(){this._items=new $t};_r.prototype.visitItem=function(u){this._items.add(u)},_r.prototype.getItems=function(){return this._items},_r.prototype.interfaces_=function(){return[Vt]},_r.prototype.getClass=function(){return _r};var Rn=function(){this._index=null;var u=arguments[0];if(!w(u,Tt))throw new S("Argument must be Polygonal");this._index=new Zn(u)},Ks={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Rn.prototype.locate=function(u){var f=new bt(u),_=new Js(f);return this._index.query(u.y,u.y,_),f.getLocation()},Rn.prototype.interfaces_=function(){return[Go]},Rn.prototype.getClass=function(){return Rn},Ks.SegmentVisitor.get=function(){return Js},Ks.IntervalIndexedGeometry.get=function(){return Zn},Object.defineProperties(Rn,Ks);var Js=function(){this._counter=null;var u=arguments[0];this._counter=u};Js.prototype.visitItem=function(u){var f=u;this._counter.countSegment(f.getCoordinate(0),f.getCoordinate(1))},Js.prototype.interfaces_=function(){return[Vt]},Js.prototype.getClass=function(){return Js};var Zn=function(){this._index=new Xe;var u=arguments[0];this.init(u)};Zn.prototype.init=function(u){for(var f=Ji.getLines(u).iterator();f.hasNext();){var _=f.next().getCoordinates();this.addLine(_)}},Zn.prototype.addLine=function(u){for(var f=1;f<u.length;f++){var _=new Pe(u[f-1],u[f]),E=Math.min(_.p0.y,_.p1.y),I=Math.max(_.p0.y,_.p1.y);this._index.insert(E,I,_)}},Zn.prototype.query=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1],_=new _r;return this._index.query(u,f,_),_.getItems()}if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];this._index.query(E,I,J)}},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Ao=function(u){function f(){if(u.call(this),this._parentGeom=null,this._lineEdgeMap=new wr,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new fs,arguments.length===2){var _=arguments[0],E=arguments[1],I=Xt.OGC_SFS_BOUNDARY_RULE;this._argIndex=_,this._parentGeom=E,this._boundaryNodeRule=I,E!==null&&this.add(E)}else if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];this._argIndex=J,this._parentGeom=at,this._boundaryNodeRule=yt,at!==null&&this.add(at)}}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.insertBoundaryPoint=function(_,E){var I=this._nodes.addNode(E).getLabel(),J=1;N.NONE,I.getLocation(_,oe.ON)===N.BOUNDARY&&J++;var at=f.determineBoundary(this._boundaryNodeRule,J);I.setLocation(_,at)},f.prototype.computeSelfNodes=function(){if(arguments.length===2){var _=arguments[0],E=arguments[1];return this.computeSelfNodes(_,E,!1)}if(arguments.length===3){var I=arguments[0],J=arguments[1],at=arguments[2],yt=new ft(I,!0,!1);yt.setIsDoneIfProperInt(at);var St=this.createEdgeSetIntersector(),Bt=this._parentGeom instanceof Qt||this._parentGeom instanceof Ht||this._parentGeom instanceof he,Yt=J||!Bt;return St.computeIntersections(this._edges,yt,Yt),this.addSelfIntersectionNodes(this._argIndex),yt}},f.prototype.computeSplitEdges=function(_){for(var E=this._edges.iterator();E.hasNext();)E.next().eiList.addSplitEdges(_)},f.prototype.computeEdgeIntersections=function(_,E,I){var J=new ft(E,I,!0);return J.setBoundaryNodes(this.getBoundaryNodes(),_.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,_._edges,J),J},f.prototype.getGeometry=function(){return this._parentGeom},f.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},f.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},f.prototype.addPoint=function(){if(arguments[0]instanceof kr){var _=arguments[0].getCoordinate();this.insertPoint(this._argIndex,_,N.INTERIOR)}else if(arguments[0]instanceof G){var E=arguments[0];this.insertPoint(this._argIndex,E,N.INTERIOR)}},f.prototype.addPolygon=function(_){this.addPolygonRing(_.getExteriorRing(),N.EXTERIOR,N.INTERIOR);for(var E=0;E<_.getNumInteriorRing();E++){var I=_.getInteriorRingN(E);this.addPolygonRing(I,N.INTERIOR,N.EXTERIOR)}},f.prototype.addEdge=function(_){this.insertEdge(_);var E=_.getCoordinates();this.insertPoint(this._argIndex,E[0],N.BOUNDARY),this.insertPoint(this._argIndex,E[E.length-1],N.BOUNDARY)},f.prototype.addLineString=function(_){var E=ue.removeRepeatedPoints(_.getCoordinates());if(E.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=E[0],null;var I=new Lo(E,new fr(this._argIndex,N.INTERIOR));this._lineEdgeMap.put(_,I),this.insertEdge(I),Q.isTrue(E.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,E[0]),this.insertBoundaryPoint(this._argIndex,E[E.length-1])},f.prototype.getInvalidPoint=function(){return this._invalidPoint},f.prototype.getBoundaryPoints=function(){for(var _=this.getBoundaryNodes(),E=new Array(_.size()).fill(null),I=0,J=_.iterator();J.hasNext();){var at=J.next();E[I++]=at.getCoordinate().copy()}return E},f.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},f.prototype.addSelfIntersectionNode=function(_,E,I){if(this.isBoundaryNode(_,E))return null;I===N.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(_,E):this.insertPoint(_,E,I)},f.prototype.addPolygonRing=function(_,E,I){if(_.isEmpty())return null;var J=ue.removeRepeatedPoints(_.getCoordinates());if(J.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=J[0],null;var at=E,yt=I;Et.isCCW(J)&&(at=I,yt=E);var St=new Lo(J,new fr(this._argIndex,N.BOUNDARY,at,yt));this._lineEdgeMap.put(_,St),this.insertEdge(St),this.insertPoint(this._argIndex,J[0],N.BOUNDARY)},f.prototype.insertPoint=function(_,E,I){var J=this._nodes.addNode(E),at=J.getLabel();at===null?J._label=new fr(_,I):at.setLocation(_,I)},f.prototype.createEdgeSetIntersector=function(){return new Mt},f.prototype.addSelfIntersectionNodes=function(_){for(var E=this._edges.iterator();E.hasNext();)for(var I=E.next(),J=I.getLabel().getLocation(_),at=I.eiList.iterator();at.hasNext();){var yt=at.next();this.addSelfIntersectionNode(_,yt.coord,J)}},f.prototype.add=function(){if(arguments.length!==1)return u.prototype.add.apply(this,arguments);var _=arguments[0];if(_.isEmpty())return null;if(_ instanceof he&&(this._useBoundaryDeterminationRule=!1),_ instanceof Ht)this.addPolygon(_);else if(_ instanceof or)this.addLineString(_);else if(_ instanceof kr)this.addPoint(_);else if(_ instanceof ie)this.addCollection(_);else if(_ instanceof Ye)this.addCollection(_);else if(_ instanceof he)this.addCollection(_);else{if(!(_ instanceof fe))throw new Error(_.getClass().getName());this.addCollection(_)}},f.prototype.addCollection=function(_){for(var E=0;E<_.getNumGeometries();E++){var I=_.getGeometryN(E);this.add(I)}},f.prototype.locate=function(_){return w(this._parentGeom,Tt)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Rn(this._parentGeom)),this._areaPtLocator.locate(_)):this._ptLocator.locate(_,this._parentGeom)},f.prototype.findEdge=function(){if(arguments.length===1){var _=arguments[0];return this._lineEdgeMap.get(_)}return u.prototype.findEdge.apply(this,arguments)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.determineBoundary=function(_,E){return _.isInBoundary(E)?N.BOUNDARY:N.INTERIOR},f}(xt),Uo=function(){if(this._li=new lt,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var u=arguments[0];this.setComputationPrecision(u.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ao(0,u)}else if(arguments.length===2){var f=arguments[0],_=arguments[1],E=Xt.OGC_SFS_BOUNDARY_RULE;f.getPrecisionModel().compareTo(_.getPrecisionModel())>=0?this.setComputationPrecision(f.getPrecisionModel()):this.setComputationPrecision(_.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ao(0,f,E),this._arg[1]=new Ao(1,_,E)}else if(arguments.length===3){var I=arguments[0],J=arguments[1],at=arguments[2];I.getPrecisionModel().compareTo(J.getPrecisionModel())>=0?this.setComputationPrecision(I.getPrecisionModel()):this.setComputationPrecision(J.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ao(0,I,at),this._arg[1]=new Ao(1,J,at)}};Uo.prototype.getArgGeometry=function(u){return this._arg[u].getGeometry()},Uo.prototype.setComputationPrecision=function(u){this._resultPrecisionModel=u,this._li.setPrecisionModel(this._resultPrecisionModel)},Uo.prototype.interfaces_=function(){return[]},Uo.prototype.getClass=function(){return Uo};var po=function(){};po.prototype.interfaces_=function(){return[]},po.prototype.getClass=function(){return po},po.map=function(){if(arguments[0]instanceof Gt&&w(arguments[1],po.MapOp)){for(var u=arguments[0],f=arguments[1],_=new $t,E=0;E<u.getNumGeometries();E++){var I=f.map(u.getGeometryN(E));I!==null&&_.add(I)}return u.getFactory().buildGeometry(_)}if(w(arguments[0],ce)&&w(arguments[1],po.MapOp)){for(var J=arguments[0],at=arguments[1],yt=new $t,St=J.iterator();St.hasNext();){var Bt=St.next(),Yt=at.map(Bt);Yt!==null&&yt.add(Yt)}return yt}},po.MapOp=function(){};var er=function(u){function f(){var _=arguments[0],E=arguments[1];u.call(this,_,E),this._ptLocator=new fs,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Ki,this._resultPolyList=new $t,this._resultLineList=new $t,this._resultPointList=new $t,this._graph=new xt(new ko),this._geomFact=_.getFactory()}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.insertUniqueEdge=function(_){var E=this._edgeList.findEqualEdge(_);if(E!==null){var I=E.getLabel(),J=_.getLabel();E.isPointwiseEqual(_)||(J=new fr(_.getLabel())).flip();var at=E.getDepth();at.isNull()&&at.add(I),at.add(J),I.merge(J)}else this._edgeList.add(_)},f.prototype.getGraph=function(){return this._graph},f.prototype.cancelDuplicateResultEdges=function(){for(var _=this._graph.getEdgeEnds().iterator();_.hasNext();){var E=_.next(),I=E.getSym();E.isInResult()&&I.isInResult()&&(E.setInResult(!1),I.setInResult(!1))}},f.prototype.isCoveredByLA=function(_){return!!this.isCovered(_,this._resultLineList)||!!this.isCovered(_,this._resultPolyList)},f.prototype.computeGeometry=function(_,E,I,J){var at=new $t;return at.addAll(_),at.addAll(E),at.addAll(I),at.isEmpty()?f.createEmptyResult(J,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(at)},f.prototype.mergeSymLabels=function(){for(var _=this._graph.getNodes().iterator();_.hasNext();)_.next().getEdges().mergeSymLabels()},f.prototype.isCovered=function(_,E){for(var I=E.iterator();I.hasNext();){var J=I.next();if(this._ptLocator.locate(_,J)!==N.EXTERIOR)return!0}return!1},f.prototype.replaceCollapsedEdges=function(){for(var _=new $t,E=this._edgeList.iterator();E.hasNext();){var I=E.next();I.isCollapsed()&&(E.remove(),_.add(I.getCollapsedEdge()))}this._edgeList.addAll(_)},f.prototype.updateNodeLabelling=function(){for(var _=this._graph.getNodes().iterator();_.hasNext();){var E=_.next(),I=E.getEdges().getLabel();E.getLabel().merge(I)}},f.prototype.getResultGeometry=function(_){return this.computeOverlay(_),this._resultGeom},f.prototype.insertUniqueEdges=function(_){for(var E=_.iterator();E.hasNext();){var I=E.next();this.insertUniqueEdge(I)}},f.prototype.computeOverlay=function(_){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var E=new $t;this._arg[0].computeSplitEdges(E),this._arg[1].computeSplitEdges(E),this.insertUniqueEdges(E),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ws.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(_),this.cancelDuplicateResultEdges();var I=new Lt(this._geomFact);I.add(this._graph),this._resultPolyList=I.getPolygons();var J=new Yn(this,this._geomFact,this._ptLocator);this._resultLineList=J.build(_);var at=new Rs(this,this._geomFact,this._ptLocator);this._resultPointList=at.build(_),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,_)},f.prototype.labelIncompleteNode=function(_,E){var I=this._ptLocator.locate(_.getCoordinate(),this._arg[E].getGeometry());_.getLabel().setLocation(E,I)},f.prototype.copyPoints=function(_){for(var E=this._arg[_].getNodeIterator();E.hasNext();){var I=E.next();this._graph.addNode(I.getCoordinate()).setLabel(_,I.getLabel().getLocation(_))}},f.prototype.findResultAreaEdges=function(_){for(var E=this._graph.getEdgeEnds().iterator();E.hasNext();){var I=E.next(),J=I.getLabel();J.isArea()&&!I.isInteriorAreaEdge()&&f.isResultOfOp(J.getLocation(0,oe.RIGHT),J.getLocation(1,oe.RIGHT),_)&&I.setInResult(!0)}},f.prototype.computeLabelsFromDepths=function(){for(var _=this._edgeList.iterator();_.hasNext();){var E=_.next(),I=E.getLabel(),J=E.getDepth();if(!J.isNull()){J.normalize();for(var at=0;at<2;at++)I.isNull(at)||!I.isArea()||J.isNull(at)||(J.getDelta(at)===0?I.toLine(at):(Q.isTrue(!J.isNull(at,oe.LEFT),"depth of LEFT side has not been initialized"),I.setLocation(at,oe.LEFT,J.getLocation(at,oe.LEFT)),Q.isTrue(!J.isNull(at,oe.RIGHT),"depth of RIGHT side has not been initialized"),I.setLocation(at,oe.RIGHT,J.getLocation(at,oe.RIGHT))))}}},f.prototype.computeLabelling=function(){for(var _=this._graph.getNodes().iterator();_.hasNext();)_.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},f.prototype.labelIncompleteNodes=function(){for(var _=this._graph.getNodes().iterator();_.hasNext();){var E=_.next(),I=E.getLabel();E.isIsolated()&&(I.isNull(0)?this.labelIncompleteNode(E,0):this.labelIncompleteNode(E,1)),E.getEdges().updateLabelling(I)}},f.prototype.isCoveredByA=function(_){return!!this.isCovered(_,this._resultPolyList)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Uo);er.overlayOp=function(u,f,_){return new er(u,f).getResultGeometry(_)},er.intersection=function(u,f){if(u.isEmpty()||f.isEmpty())return er.createEmptyResult(er.INTERSECTION,u,f,u.getFactory());if(u.isGeometryCollection()){var _=f;return Ro.map(u,{interfaces_:function(){return[po.MapOp]},map:function(E){return E.intersection(_)}})}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(f),Cn.overlayOp(u,f,er.INTERSECTION)},er.symDifference=function(u,f){if(u.isEmpty()||f.isEmpty()){if(u.isEmpty()&&f.isEmpty())return er.createEmptyResult(er.SYMDIFFERENCE,u,f,u.getFactory());if(u.isEmpty())return f.copy();if(f.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(f),Cn.overlayOp(u,f,er.SYMDIFFERENCE)},er.resultDimension=function(u,f,_){var E=f.getDimension(),I=_.getDimension(),J=-1;switch(u){case er.INTERSECTION:J=Math.min(E,I);break;case er.UNION:J=Math.max(E,I);break;case er.DIFFERENCE:J=E;break;case er.SYMDIFFERENCE:J=Math.max(E,I)}return J},er.createEmptyResult=function(u,f,_,E){var I=null;switch(er.resultDimension(u,f,_)){case-1:I=E.createGeometryCollection(new Array(0).fill(null));break;case 0:I=E.createPoint();break;case 1:I=E.createLineString();break;case 2:I=E.createPolygon()}return I},er.difference=function(u,f){return u.isEmpty()?er.createEmptyResult(er.DIFFERENCE,u,f,u.getFactory()):f.isEmpty()?u.copy():(u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(f),Cn.overlayOp(u,f,er.DIFFERENCE))},er.isResultOfOp=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1],_=u.getLocation(0),E=u.getLocation(1);return er.isResultOfOp(_,E,f)}if(arguments.length===3){var I=arguments[0],J=arguments[1],at=arguments[2];switch(I===N.BOUNDARY&&(I=N.INTERIOR),J===N.BOUNDARY&&(J=N.INTERIOR),at){case er.INTERSECTION:return I===N.INTERIOR&&J===N.INTERIOR;case er.UNION:return I===N.INTERIOR||J===N.INTERIOR;case er.DIFFERENCE:return I===N.INTERIOR&&J!==N.INTERIOR;case er.SYMDIFFERENCE:return I===N.INTERIOR&&J!==N.INTERIOR||I!==N.INTERIOR&&J===N.INTERIOR}return!1}},er.INTERSECTION=1,er.UNION=2,er.DIFFERENCE=3,er.SYMDIFFERENCE=4;var Hs=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new fs,this._seg=new Pe;var u=arguments[0],f=arguments[1];this._g=u,this._boundaryDistanceTolerance=f,this._linework=this.extractLinework(u)};Hs.prototype.isWithinToleranceOfBoundary=function(u){for(var f=0;f<this._linework.getNumGeometries();f++)for(var _=this._linework.getGeometryN(f).getCoordinateSequence(),E=0;E<_.size()-1;E++)if(_.getCoordinate(E,this._seg.p0),_.getCoordinate(E+1,this._seg.p1),this._seg.distance(u)<=this._boundaryDistanceTolerance)return!0;return!1},Hs.prototype.getLocation=function(u){return this.isWithinToleranceOfBoundary(u)?N.BOUNDARY:this._ptLocator.locate(u,this._g)},Hs.prototype.extractLinework=function(u){var f=new Vo;u.apply(f);var _=f.getLinework(),E=Se.toLineStringArray(_);return u.getFactory().createMultiLineString(E)},Hs.prototype.interfaces_=function(){return[]},Hs.prototype.getClass=function(){return Hs};var Vo=function(){this._linework=null,this._linework=new $t};Vo.prototype.getLinework=function(){return this._linework},Vo.prototype.filter=function(u){if(u instanceof Ht){var f=u;this._linework.add(f.getExteriorRing());for(var _=0;_<f.getNumInteriorRing();_++)this._linework.add(f.getInteriorRingN(_))}},Vo.prototype.interfaces_=function(){return[$e]},Vo.prototype.getClass=function(){return Vo};var Qs=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var u=arguments[0];this._g=u};Qs.prototype.extractPoints=function(u,f,_){for(var E=u.getCoordinates(),I=0;I<E.length-1;I++)this.computeOffsetPoints(E[I],E[I+1],f,_)},Qs.prototype.setSidesToGenerate=function(u,f){this._doLeft=u,this._doRight=f},Qs.prototype.getPoints=function(u){for(var f=new $t,_=Ji.getLines(this._g).iterator();_.hasNext();){var E=_.next();this.extractPoints(E,u,f)}return f},Qs.prototype.computeOffsetPoints=function(u,f,_,E){var I=f.x-u.x,J=f.y-u.y,at=Math.sqrt(I*I+J*J),yt=_*I/at,St=_*J/at,Bt=(f.x+u.x)/2,Yt=(f.y+u.y)/2;if(this._doLeft){var ee=new G(Bt-St,Yt+yt);E.add(ee)}if(this._doRight){var xe=new G(Bt+St,Yt-yt);E.add(xe)}},Qs.prototype.interfaces_=function(){return[]},Qs.prototype.getClass=function(){return Qs};var fi=function u(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=u.TOLERANCE,this._testCoords=new $t;var f=arguments[0],_=arguments[1],E=arguments[2];this._boundaryDistanceTolerance=u.computeBoundaryDistanceTolerance(f,_),this._geom=[f,_,E],this._locFinder=[new Hs(this._geom[0],this._boundaryDistanceTolerance),new Hs(this._geom[1],this._boundaryDistanceTolerance),new Hs(this._geom[2],this._boundaryDistanceTolerance)]},sa={TOLERANCE:{configurable:!0}};fi.prototype.reportResult=function(u,f,_){it.out.println("Overlay result invalid - A:"+N.toLocationSymbol(f[0])+" B:"+N.toLocationSymbol(f[1])+" expected:"+(_?"i":"e")+" actual:"+N.toLocationSymbol(f[2]))},fi.prototype.isValid=function(u){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var f=this.checkValid(u);return f},fi.prototype.checkValid=function(){if(arguments.length===1){for(var u=arguments[0],f=0;f<this._testCoords.size();f++){var _=this._testCoords.get(f);if(!this.checkValid(u,_))return this._invalidLocation=_,!1}return!0}if(arguments.length===2){var E=arguments[0],I=arguments[1];return this._location[0]=this._locFinder[0].getLocation(I),this._location[1]=this._locFinder[1].getLocation(I),this._location[2]=this._locFinder[2].getLocation(I),!!fi.hasLocation(this._location,N.BOUNDARY)||this.isValidResult(E,this._location)}},fi.prototype.addTestPts=function(u){var f=new Qs(u);this._testCoords.addAll(f.getPoints(5*this._boundaryDistanceTolerance))},fi.prototype.isValidResult=function(u,f){var _=er.isResultOfOp(f[0],f[1],u),E=!(_^f[2]===N.INTERIOR);return E||this.reportResult(u,f,_),E},fi.prototype.getInvalidLocation=function(){return this._invalidLocation},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},fi.hasLocation=function(u,f){for(var _=0;_<3;_++)if(u[_]===f)return!0;return!1},fi.computeBoundaryDistanceTolerance=function(u,f){return Math.min(Oi.computeSizeBasedSnapTolerance(u),Oi.computeSizeBasedSnapTolerance(f))},fi.isValid=function(u,f,_,E){return new fi(u,f,E).isValid(_)},sa.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(fi,sa);var Kn=function u(f){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=u.extractFactory(f),this._inputGeoms=f};Kn.prototype.extractElements=function(u,f){if(u===null)return null;for(var _=0;_<u.getNumGeometries();_++){var E=u.getGeometryN(_);this._skipEmpty&&E.isEmpty()||f.add(E)}},Kn.prototype.combine=function(){for(var u=new $t,f=this._inputGeoms.iterator();f.hasNext();){var _=f.next();this.extractElements(_,u)}return u.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(u)},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.combine=function(){if(arguments.length===1){var u=arguments[0];return new Kn(u).combine()}if(arguments.length===2){var f=arguments[0],_=arguments[1];return new Kn(Kn.createList(f,_)).combine()}if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];return new Kn(Kn.createList(E,I,J)).combine()}},Kn.extractFactory=function(u){return u.isEmpty()?null:u.iterator().next().getFactory()},Kn.createList=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1],_=new $t;return _.add(u),_.add(f),_}if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2],at=new $t;return at.add(E),at.add(I),at.add(J),at}};var Ni=function(){this._inputPolys=null,this._geomFactory=null;var u=arguments[0];this._inputPolys=u,this._inputPolys===null&&(this._inputPolys=new $t)},au={STRTREE_NODE_CAPACITY:{configurable:!0}};Ni.prototype.reduceToGeometries=function(u){for(var f=new $t,_=u.iterator();_.hasNext();){var E=_.next(),I=null;w(E,He)?I=this.unionTree(E):E instanceof Gt&&(I=E),f.add(I)}return f},Ni.prototype.extractByEnvelope=function(u,f,_){for(var E=new $t,I=0;I<f.getNumGeometries();I++){var J=f.getGeometryN(I);J.getEnvelopeInternal().intersects(u)?E.add(J):_.add(J)}return this._geomFactory.buildGeometry(E)},Ni.prototype.unionOptimized=function(u,f){var _=u.getEnvelopeInternal(),E=f.getEnvelopeInternal();if(!_.intersects(E))return Kn.combine(u,f);if(u.getNumGeometries()<=1&&f.getNumGeometries()<=1)return this.unionActual(u,f);var I=_.intersection(E);return this.unionUsingEnvelopeIntersection(u,f,I)},Ni.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var u=new an(Ni.STRTREE_NODE_CAPACITY),f=this._inputPolys.iterator();f.hasNext();){var _=f.next();u.insert(_.getEnvelopeInternal(),_)}this._inputPolys=null;var E=u.itemsTree();return this.unionTree(E)},Ni.prototype.binaryUnion=function(){if(arguments.length===1){var u=arguments[0];return this.binaryUnion(u,0,u.size())}if(arguments.length===3){var f=arguments[0],_=arguments[1],E=arguments[2];if(E-_<=1){var I=Ni.getGeometry(f,_);return this.unionSafe(I,null)}if(E-_==2)return this.unionSafe(Ni.getGeometry(f,_),Ni.getGeometry(f,_+1));var J=Math.trunc((E+_)/2),at=this.binaryUnion(f,_,J),yt=this.binaryUnion(f,J,E);return this.unionSafe(at,yt)}},Ni.prototype.repeatedUnion=function(u){for(var f=null,_=u.iterator();_.hasNext();){var E=_.next();f=f===null?E.copy():f.union(E)}return f},Ni.prototype.unionSafe=function(u,f){return u===null&&f===null?null:u===null?f.copy():f===null?u.copy():this.unionOptimized(u,f)},Ni.prototype.unionActual=function(u,f){return Ni.restrictToPolygons(u.union(f))},Ni.prototype.unionTree=function(u){var f=this.reduceToGeometries(u);return this.binaryUnion(f)},Ni.prototype.unionUsingEnvelopeIntersection=function(u,f,_){var E=new $t,I=this.extractByEnvelope(_,u,E),J=this.extractByEnvelope(_,f,E),at=this.unionActual(I,J);return E.add(at),Kn.combine(E)},Ni.prototype.bufferUnion=function(){if(arguments.length===1){var u=arguments[0];return u.get(0).getFactory().buildGeometry(u).buffer(0)}if(arguments.length===2){var f=arguments[0],_=arguments[1];return f.getFactory().createGeometryCollection([f,_]).buffer(0)}},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.restrictToPolygons=function(u){if(w(u,Tt))return u;var f=Bs.getPolygons(u);return f.size()===1?f.get(0):u.getFactory().createMultiPolygon(Se.toPolygonArray(f))},Ni.getGeometry=function(u,f){return f>=u.size()?null:u.get(f)},Ni.union=function(u){return new Ni(u).union()},au.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ni,au);var Io=function(){};Io.prototype.interfaces_=function(){return[]},Io.prototype.getClass=function(){return Io},Io.union=function(u,f){if(u.isEmpty()||f.isEmpty()){if(u.isEmpty()&&f.isEmpty())return er.createEmptyResult(er.UNION,u,f,u.getFactory());if(u.isEmpty())return f.copy();if(f.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(f),Cn.overlayOp(u,f,er.UNION)},n.GeoJSONReader=Ri,n.GeoJSONWriter=bn,n.OverlayOp=er,n.UnionOp=Io,n.BufferOp=Hi,Object.defineProperty(n,"__esModule",{value:!0})})});var Mh=Ge((rd,id)=>{(function(n,t){typeof rd=="object"&&typeof id<"u"?id.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis<"u"?globalThis:n||self,n.DOMPurify=t())})(rd,function(){"use strict";let{entries:n,setPrototypeOf:t,isFrozen:e,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object,{freeze:s,seal:o,create:a}=Object,{apply:l,construct:c}=typeof Reflect<"u"&&Reflect;l||(l=function(kt,gt,ut){return kt.apply(gt,ut)}),s||(s=function(kt){return kt}),o||(o=function(kt){return kt}),c||(c=function(kt,gt){return new kt(...gt)});let h=U(Array.prototype.forEach),d=U(Array.prototype.pop),p=U(Array.prototype.push),g=U(String.prototype.toLowerCase),m=U(String.prototype.toString),b=U(String.prototype.match),y=U(String.prototype.replace),x=U(String.prototype.indexOf),S=U(String.prototype.trim),O=U(RegExp.prototype.test),D=z(TypeError);function U(vt){return function(kt){for(var gt=arguments.length,ut=new Array(gt>1?gt-1:0),Q=1;Q<gt;Q++)ut[Q-1]=arguments[Q];return l(vt,kt,ut)}}function z(vt){return function(){for(var kt=arguments.length,gt=new Array(kt),ut=0;ut<kt;ut++)gt[ut]=arguments[ut];return c(vt,gt)}}function q(vt,kt,gt){gt=gt||g,t&&t(vt,null);let ut=kt.length;for(;ut--;){let Q=kt[ut];if(typeof Q=="string"){let Y=gt(Q);Y!==Q&&(e(kt)||(kt[ut]=Y),Q=Y)}vt[Q]=!0}return vt}function G(vt){let kt=a(null);for(let[gt,ut]of n(vt))kt[gt]=ut;return kt}function tt(vt,kt){for(;vt!==null;){let ut=i(vt,kt);if(ut){if(ut.get)return U(ut.get);if(typeof ut.value=="function")return U(ut.value)}vt=r(vt)}function gt(ut){return console.warn("fallback value for",ut),null}return gt}let K=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),B=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Z=s(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),w=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),C=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),k=s(["#text"]),T=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),F=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),H=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),rt=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ot=o(/<%[\w\W]*|[\w\W]*%>/gm),dt=o(/\${[\w\W]*}/gm),$=o(/^data-[\-\w.\u00B7-\uFFFF]/),ct=o(/^aria-[\-\w]+$/),W=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),V=o(/^(?:\w+script|data):/i),it=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mt=o(/^html$/i);var wt=Object.freeze({__proto__:null,MUSTACHE_EXPR:rt,ERB_EXPR:ot,TMPLIT_EXPR:dt,DATA_ATTR:$,ARIA_ATTR:ct,IS_ALLOWED_URI:W,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:it,DOCTYPE_NAME:mt});let _t=()=>typeof window>"u"?null:window,Ct=function(kt,gt){if(typeof kt!="object"||typeof kt.createPolicy!="function")return null;let ut=null,Q="data-tt-policy-suffix";gt.currentScript&&gt.currentScript.hasAttribute(Q)&&(ut=gt.currentScript.getAttribute(Q));let Y="dompurify"+(ut?"#"+ut:"");try{return kt.createPolicy(Y,{createHTML(et){return et},createScriptURL(et){return et}})}catch{return console.warn("TrustedTypes policy "+Y+" could not be created."),null}};function Ft(){let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_t(),kt=A=>Ft(A);if(kt.version="3.0.2",kt.removed=[],!vt||!vt.document||vt.document.nodeType!==9)return kt.isSupported=!1,kt;let gt=vt.document,{document:ut}=vt,{DocumentFragment:Q,HTMLTemplateElement:Y,Node:et,Element:lt,NodeFilter:pt,NamedNodeMap:bt=vt.NamedNodeMap||vt.MozNamedAttrMap,HTMLFormElement:Et,DOMParser:Ot,trustedTypes:zt}=vt,Gt=lt.prototype,Jt=tt(Gt,"cloneNode"),Kt=tt(Gt,"nextSibling"),re=tt(Gt,"childNodes"),Xt=tt(Gt,"parentNode");if(typeof Y=="function"){let A=ut.createElement("template");A.content&&A.content.ownerDocument&&(ut=A.content.ownerDocument)}let Ut=Ct(zt,gt),_e=Ut?Ut.createHTML(""):"",{implementation:le,createNodeIterator:ye,createDocumentFragment:Ze,getElementsByTagName:ce}=ut,{importNode:ke}=gt,He={};kt.isSupported=typeof n=="function"&&typeof Xt=="function"&&le&&typeof le.createHTMLDocument<"u";let{MUSTACHE_EXPR:$t,ERB_EXPR:Te,TMPLIT_EXPR:br,DATA_ATTR:ue,ARIA_ATTR:Fe,IS_SCRIPT_OR_DATA:ar,ATTR_WHITESPACE:Le}=wt,{IS_ALLOWED_URI:Oe}=wt,ri=null,We=q({},[...K,...B,...N,...w,...k]),At=null,qt=q({},[...T,...R,...F,...H]),jt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ae=null,Qe=null,se=!0,ve=!0,$e=!1,Ae=!0,fe=!1,Ye=!1,Ve=!1,rr=!1,Ke=!1,pi=!1,Je=!1,or=!0,ci=!1,kr="user-content-",Tt=!0,Ht=!1,ie={},Qt=null,he=q({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ee=null,Ie=q({},["audio","video","img","source","image","track"]),tr=null,Ue=q({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),we="http://www.w3.org/1998/Math/MathML",pe="http://www.w3.org/2000/svg",yr="http://www.w3.org/1999/xhtml",ir=yr,lr=!1,wr=null,me=q({},[we,pe,yr],m),ur,bi=["application/xhtml+xml","text/html"],Xi="text/html",Se,Ln=null,Vn=ut.createElement("form"),nr=function(j){return j instanceof RegExp||j instanceof Function},ze=function(j){Ln&&Ln===j||((!j||typeof j!="object")&&(j={}),j=G(j),ur=bi.indexOf(j.PARSER_MEDIA_TYPE)===-1?ur=Xi:ur=j.PARSER_MEDIA_TYPE,Se=ur==="application/xhtml+xml"?m:g,ri="ALLOWED_TAGS"in j?q({},j.ALLOWED_TAGS,Se):We,At="ALLOWED_ATTR"in j?q({},j.ALLOWED_ATTR,Se):qt,wr="ALLOWED_NAMESPACES"in j?q({},j.ALLOWED_NAMESPACES,m):me,tr="ADD_URI_SAFE_ATTR"in j?q(G(Ue),j.ADD_URI_SAFE_ATTR,Se):Ue,Ee="ADD_DATA_URI_TAGS"in j?q(G(Ie),j.ADD_DATA_URI_TAGS,Se):Ie,Qt="FORBID_CONTENTS"in j?q({},j.FORBID_CONTENTS,Se):he,ae="FORBID_TAGS"in j?q({},j.FORBID_TAGS,Se):{},Qe="FORBID_ATTR"in j?q({},j.FORBID_ATTR,Se):{},ie="USE_PROFILES"in j?j.USE_PROFILES:!1,se=j.ALLOW_ARIA_ATTR!==!1,ve=j.ALLOW_DATA_ATTR!==!1,$e=j.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,fe=j.SAFE_FOR_TEMPLATES||!1,Ye=j.WHOLE_DOCUMENT||!1,Ke=j.RETURN_DOM||!1,pi=j.RETURN_DOM_FRAGMENT||!1,Je=j.RETURN_TRUSTED_TYPE||!1,rr=j.FORCE_BODY||!1,or=j.SANITIZE_DOM!==!1,ci=j.SANITIZE_NAMED_PROPS||!1,Tt=j.KEEP_CONTENT!==!1,Ht=j.IN_PLACE||!1,Oe=j.ALLOWED_URI_REGEXP||W,ir=j.NAMESPACE||yr,jt=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&nr(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(jt.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&nr(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(jt.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(jt.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),fe&&(ve=!1),pi&&(Ke=!0),ie&&(ri=q({},[...k]),At=[],ie.html===!0&&(q(ri,K),q(At,T)),ie.svg===!0&&(q(ri,B),q(At,R),q(At,H)),ie.svgFilters===!0&&(q(ri,N),q(At,R),q(At,H)),ie.mathMl===!0&&(q(ri,w),q(At,F),q(At,H))),j.ADD_TAGS&&(ri===We&&(ri=G(ri)),q(ri,j.ADD_TAGS,Se)),j.ADD_ATTR&&(At===qt&&(At=G(At)),q(At,j.ADD_ATTR,Se)),j.ADD_URI_SAFE_ATTR&&q(tr,j.ADD_URI_SAFE_ATTR,Se),j.FORBID_CONTENTS&&(Qt===he&&(Qt=G(Qt)),q(Qt,j.FORBID_CONTENTS,Se)),Tt&&(ri["#text"]=!0),Ye&&q(ri,["html","head","body"]),ri.table&&(q(ri,["tbody"]),delete ae.tbody),s&&s(j),Ln=j)},Ti=q({},["mi","mo","mn","ms","mtext"]),Ri=q({},["foreignobject","desc","title","annotation-xml"]),bn=q({},["title","style","font","a","script"]),oe=q({},B);q(oe,N),q(oe,Z);let Ii=q({},w);q(Ii,C);let gr=function(j){let nt=Xt(j);(!nt||!nt.tagName)&&(nt={namespaceURI:ir,tagName:"template"});let ht=g(j.tagName),xt=g(nt.tagName);return wr[j.namespaceURI]?j.namespaceURI===pe?nt.namespaceURI===yr?ht==="svg":nt.namespaceURI===we?ht==="svg"&&(xt==="annotation-xml"||Ti[xt]):!!oe[ht]:j.namespaceURI===we?nt.namespaceURI===yr?ht==="math":nt.namespaceURI===pe?ht==="math"&&Ri[xt]:!!Ii[ht]:j.namespaceURI===yr?nt.namespaceURI===pe&&!Ri[xt]||nt.namespaceURI===we&&!Ti[xt]?!1:!Ii[ht]&&(bn[ht]||!oe[ht]):!!(ur==="application/xhtml+xml"&&wr[j.namespaceURI]):!1},_i=function(j){p(kt.removed,{element:j});try{j.parentNode.removeChild(j)}catch{j.remove()}},on=function(j,nt){try{p(kt.removed,{attribute:nt.getAttributeNode(j),from:nt})}catch{p(kt.removed,{attribute:null,from:nt})}if(nt.removeAttribute(j),j==="is"&&!At[j])if(Ke||pi)try{_i(nt)}catch{}else try{nt.setAttribute(j,"")}catch{}},yi=function(j){let nt,ht;if(rr)j="<remove></remove>"+j;else{let Rt=b(j,/^[\r\n\t ]+/);ht=Rt&&Rt[0]}ur==="application/xhtml+xml"&&ir===yr&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");let xt=Ut?Ut.createHTML(j):j;if(ir===yr)try{nt=new Ot().parseFromString(xt,ur)}catch{}if(!nt||!nt.documentElement){nt=le.createDocument(ir,"template",null);try{nt.documentElement.innerHTML=lr?_e:xt}catch{}}let Lt=nt.body||nt.documentElement;return j&&ht&&Lt.insertBefore(ut.createTextNode(ht),Lt.childNodes[0]||null),ir===yr?ce.call(nt,Ye?"html":"body")[0]:Ye?nt.documentElement:Lt},hr=function(j){return ye.call(j.ownerDocument||j,j,pt.SHOW_ELEMENT|pt.SHOW_COMMENT|pt.SHOW_TEXT,null,!1)},fr=function(j){return j instanceof Et&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof bt)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},Tr=function(j){return typeof et=="object"?j instanceof et:j&&typeof j=="object"&&typeof j.nodeType=="number"&&typeof j.nodeName=="string"},$i=function(j,nt,ht){He[j]&&h(He[j],xt=>{xt.call(kt,nt,ht,Ln)})},us=function(j){let nt;if($i("beforeSanitizeElements",j,null),fr(j))return _i(j),!0;let ht=Se(j.nodeName);if($i("uponSanitizeElement",j,{tagName:ht,allowedTags:ri}),j.hasChildNodes()&&!Tr(j.firstElementChild)&&(!Tr(j.content)||!Tr(j.content.firstElementChild))&&O(/<[/\w]/g,j.innerHTML)&&O(/<[/\w]/g,j.textContent))return _i(j),!0;if(!ri[ht]||ae[ht]){if(!ae[ht]&&Yi(ht)&&(jt.tagNameCheck instanceof RegExp&&O(jt.tagNameCheck,ht)||jt.tagNameCheck instanceof Function&&jt.tagNameCheck(ht)))return!1;if(Tt&&!Qt[ht]){let xt=Xt(j)||j.parentNode,Lt=re(j)||j.childNodes;if(Lt&&xt){let Rt=Lt.length;for(let Pt=Rt-1;Pt>=0;--Pt)xt.insertBefore(Jt(Lt[Pt],!0),Kt(j))}}return _i(j),!0}return j instanceof lt&&!gr(j)||(ht==="noscript"||ht==="noembed")&&O(/<\/no(script|embed)/i,j.innerHTML)?(_i(j),!0):(fe&&j.nodeType===3&&(nt=j.textContent,nt=y(nt,$t," "),nt=y(nt,Te," "),nt=y(nt,br," "),j.textContent!==nt&&(p(kt.removed,{element:j.cloneNode()}),j.textContent=nt)),$i("afterSanitizeElements",j,null),!1)},je=function(j,nt,ht){if(or&&(nt==="id"||nt==="name")&&(ht in ut||ht in Vn))return!1;if(!(ve&&!Qe[nt]&&O(ue,nt))){if(!(se&&O(Fe,nt))){if(!At[nt]||Qe[nt]){if(!(Yi(j)&&(jt.tagNameCheck instanceof RegExp&&O(jt.tagNameCheck,j)||jt.tagNameCheck instanceof Function&&jt.tagNameCheck(j))&&(jt.attributeNameCheck instanceof RegExp&&O(jt.attributeNameCheck,nt)||jt.attributeNameCheck instanceof Function&&jt.attributeNameCheck(nt))||nt==="is"&&jt.allowCustomizedBuiltInElements&&(jt.tagNameCheck instanceof RegExp&&O(jt.tagNameCheck,ht)||jt.tagNameCheck instanceof Function&&jt.tagNameCheck(ht))))return!1}else if(!tr[nt]){if(!O(Oe,y(ht,Le,""))){if(!((nt==="src"||nt==="xlink:href"||nt==="href")&&j!=="script"&&x(ht,"data:")===0&&Ee[j])){if(!($e&&!O(ar,y(ht,Le,"")))){if(ht)return!1}}}}}}return!0},Yi=function(j){return j.indexOf("-")>0},cr=function(j){let nt,ht,xt,Lt;$i("beforeSanitizeAttributes",j,null);let{attributes:Rt}=j;if(!Rt)return;let Pt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:At};for(Lt=Rt.length;Lt--;){nt=Rt[Lt];let{name:Nt,namespaceURI:Vt}=nt;if(ht=Nt==="value"?nt.value:S(nt.value),xt=Se(Nt),Pt.attrName=xt,Pt.attrValue=ht,Pt.keepAttr=!0,Pt.forceKeepAttr=void 0,$i("uponSanitizeAttribute",j,Pt),ht=Pt.attrValue,Pt.forceKeepAttr||(on(Nt,j),!Pt.keepAttr))continue;if(!Ae&&O(/\/>/i,ht)){on(Nt,j);continue}fe&&(ht=y(ht,$t," "),ht=y(ht,Te," "),ht=y(ht,br," "));let ne=Se(j.nodeName);if(je(ne,xt,ht)){if(ci&&(xt==="id"||xt==="name")&&(on(Nt,j),ht=kr+ht),Ut&&typeof zt=="object"&&typeof zt.getAttributeType=="function"&&!Vt)switch(zt.getAttributeType(ne,xt)){case"TrustedHTML":ht=Ut.createHTML(ht);break;case"TrustedScriptURL":ht=Ut.createScriptURL(ht);break}try{Vt?j.setAttributeNS(Vt,Nt,ht):j.setAttribute(Nt,ht),d(kt.removed)}catch{}}}$i("afterSanitizeAttributes",j,null)},M=function A(j){let nt,ht=hr(j);for($i("beforeSanitizeShadowDOM",j,null);nt=ht.nextNode();)$i("uponSanitizeShadowNode",nt,null),!us(nt)&&(nt.content instanceof Q&&A(nt.content),cr(nt));$i("afterSanitizeShadowDOM",j,null)};return kt.sanitize=function(A){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt,ht,xt,Lt;if(lr=!A,lr&&(A="<!-->"),typeof A!="string"&&!Tr(A)){if(typeof A.toString!="function")throw D("toString is not a function");if(A=A.toString(),typeof A!="string")throw D("dirty is not a string, aborting")}if(!kt.isSupported)return A;if(Ve||ze(j),kt.removed=[],typeof A=="string"&&(Ht=!1),Ht){if(A.nodeName){let Nt=Se(A.nodeName);if(!ri[Nt]||ae[Nt])throw D("root node is forbidden and cannot be sanitized in-place")}}else if(A instanceof et)nt=yi("<!---->"),ht=nt.ownerDocument.importNode(A,!0),ht.nodeType===1&&ht.nodeName==="BODY"||ht.nodeName==="HTML"?nt=ht:nt.appendChild(ht);else{if(!Ke&&!fe&&!Ye&&A.indexOf("<")===-1)return Ut&&Je?Ut.createHTML(A):A;if(nt=yi(A),!nt)return Ke?null:Je?_e:""}nt&&rr&&_i(nt.firstChild);let Rt=hr(Ht?A:nt);for(;xt=Rt.nextNode();)us(xt)||(xt.content instanceof Q&&M(xt.content),cr(xt));if(Ht)return A;if(Ke){if(pi)for(Lt=Ze.call(nt.ownerDocument);nt.firstChild;)Lt.appendChild(nt.firstChild);else Lt=nt;return(At.shadowroot||At.shadowrootmod)&&(Lt=ke.call(gt,Lt,!0)),Lt}let Pt=Ye?nt.outerHTML:nt.innerHTML;return Ye&&ri["!doctype"]&&nt.ownerDocument&&nt.ownerDocument.doctype&&nt.ownerDocument.doctype.name&&O(mt,nt.ownerDocument.doctype.name)&&(Pt="<!DOCTYPE "+nt.ownerDocument.doctype.name+`>
`+Pt),fe&&(Pt=y(Pt,$t," "),Pt=y(Pt,Te," "),Pt=y(Pt,br," ")),Ut&&Je?Ut.createHTML(Pt):Pt},kt.setConfig=function(A){ze(A),Ve=!0},kt.clearConfig=function(){Ln=null,Ve=!1},kt.isValidAttribute=function(A,j,nt){Ln||ze({});let ht=Se(A),xt=Se(j);return je(ht,xt,nt)},kt.addHook=function(A,j){typeof j=="function"&&(He[A]=He[A]||[],p(He[A],j))},kt.removeHook=function(A){if(He[A])return d(He[A])},kt.removeHooks=function(A){He[A]&&(He[A]=[])},kt.removeAllHooks=function(){He={}},kt}var It=Ft();return It})});var pv=Ge((yH,dd)=>{(function(n){if(typeof define=="function"&&define.amd)define(["leaflet"],n);else if(typeof dd<"u")dd.exports=n(Jn());else{if(typeof window.L>"u")throw new Error("Leaflet must be loaded first");n(window.L)}})(function(n){return n.Control.Search=n.Control.extend({includes:n.version[0]==="1"?n.Evented.prototype:n.Mixin.Events,options:{url:"",layer:null,sourceData:null,jsonpParam:null,propertyLoc:"loc",propertyName:"title",formatData:null,filterData:null,moveToLocation:null,buildTip:null,container:"",zoom:null,minLength:1,initial:!0,casesensitive:!1,autoType:!0,delayType:400,tooltipLimit:-1,tipAutoSubmit:!0,firstTipSubmit:!1,autoResize:!0,collapsed:!0,autoCollapse:!1,autoCollapseTime:1200,textErr:"Location not found",textCancel:"Cancel",textPlaceholder:"Search...",hideMarkerOnCollapse:!1,position:"topleft",marker:{icon:!1,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}}},_getPath:function(t,e){let r=e.split("."),i=r.pop(),s=r.length,o=r[0],a=1;if(s>0)for(;(t=t[o])&&a<s;)o=r[a++];if(t)return t[i]},_isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},initialize:function(t){n.Util.setOptions(this,t||{}),this._inputMinSize=this.options.textPlaceholder?this.options.textPlaceholder.length:10,this._layer=this.options.layer||new n.LayerGroup,this._filterData=this.options.filterData||this._defaultFilterData,this._formatData=this.options.formatData||this._defaultFormatData,this._moveToLocation=this.options.moveToLocation||this._defaultMoveToLocation,this._autoTypeTmp=this.options.autoType,this._countertips=0,this._recordsCache={},this._curReq=null},onAdd:function(t){return this._map=t,this._container=n.DomUtil.create("div","leaflet-control-search"),this._input=this._createInput(this.options.textPlaceholder,"search-input"),this._tooltip=this._createTooltip("search-tooltip"),this._cancel=this._createCancel(this.options.textCancel,"search-cancel"),this._button=this._createButton(this.options.textPlaceholder,"search-button"),this._alert=this._createAlert("search-alert"),this.options.collapsed===!1&&this.expand(this.options.collapsed),this.options.marker&&(this.options.marker instanceof n.Marker||this.options.marker instanceof n.CircleMarker?this._markerSearch=this.options.marker:this._isObject(this.options.marker)&&(this._markerSearch=new n.Control.Search.Marker([0,0],this.options.marker)),this._markerSearch._isMarkerSearch=!0),this.setLayer(this._layer),t.on({resize:this._handleAutoresize},this),this._container},addTo:function(t){return this.options.container?(this._container=this.onAdd(t),this._wrapper=n.DomUtil.get(this.options.container),this._wrapper.style.position="relative",this._wrapper.appendChild(this._container)):n.Control.prototype.addTo.call(this,t),this},onRemove:function(t){this._recordsCache={},t.off({resize:this._handleAutoresize},this)},setLayer:function(t){return this._layer=t,this._layer.addTo(this._map),this},showAlert:function(t){let e=this;return t=t||this.options.textErr,this._alert.style.display="block",this._alert.innerHTML=t,clearTimeout(this.timerAlert),this.timerAlert=setTimeout(function(){e.hideAlert()},this.options.autoCollapseTime),this},hideAlert:function(){return this._alert.style.display="none",this},cancel:function(){return this._input.value="",this._handleKeypress({keyCode:8}),this._input.size=this._inputMinSize,this._input.focus(),this._cancel.style.display="none",this._hideTooltip(),this.fire("search:cancel"),this},expand:function(t){return t=typeof t=="boolean"?t:!0,this._input.style.display="block",n.DomUtil.addClass(this._container,"search-exp"),t!==!1&&(this._input.focus(),this._map.on("dragstart click",this.collapse,this)),this.fire("search:expanded"),this},collapse:function(){return this._hideTooltip(),this.cancel(),this._alert.style.display="none",this._input.blur(),this.options.collapsed&&(this._input.style.display="none",this._cancel.style.display="none",n.DomUtil.removeClass(this._container,"search-exp"),this.options.hideMarkerOnCollapse&&this._map.removeLayer(this._markerSearch),this._map.off("dragstart click",this.collapse,this)),this.fire("search:collapsed"),this},collapseDelayed:function(){let t=this;return this.options.autoCollapse?(clearTimeout(this.timerCollapse),this.timerCollapse=setTimeout(function(){t.collapse()},this.options.autoCollapseTime),this):this},collapseDelayedStop:function(){return clearTimeout(this.timerCollapse),this},_createAlert:function(t){let e=n.DomUtil.create("div",t,this._container);return e.style.display="none",n.DomEvent.on(e,"click",n.DomEvent.stop,this).on(e,"click",this.hideAlert,this),e},_createInput:function(t,e){let r=this,i=n.DomUtil.create("label",e,this._container),s=n.DomUtil.create("input",e,this._container);return s.type="text",s.size=this._inputMinSize,s.value="",s.autocomplete="off",s.autocorrect="off",s.autocapitalize="off",s.placeholder=t,s.style.display="none",s.role="search",s.id=s.role+s.type+s.size,i.htmlFor=s.id,i.style.display="none",i.value=t,n.DomEvent.disableClickPropagation(s).on(s,"keyup",this._handleKeypress,this).on(s,"paste",function(o){setTimeout(function(a){r._handleKeypress(a)},10,o)},this).on(s,"blur",this.collapseDelayed,this).on(s,"focus",this.collapseDelayedStop,this),s},_createCancel:function(t,e){let r=n.DomUtil.create("a",e,this._container);return r.href="#",r.title=t,r.style.display="none",r.innerHTML="<span>&otimes;</span>",n.DomEvent.on(r,"click",n.DomEvent.stop,this).on(r,"click",this.cancel,this),r},_createButton:function(t,e){let r=n.DomUtil.create("a",e,this._container);return r.href="#",r.title=t,n.DomEvent.on(r,"click",n.DomEvent.stop,this).on(r,"click",this._handleSubmit,this).on(r,"focus",this.collapseDelayedStop,this).on(r,"blur",this.collapseDelayed,this),r},_createTooltip:function(t){let e=this,r=n.DomUtil.create("ul",t,this._container);return r.style.display="none",n.DomEvent.disableClickPropagation(r).on(r,"blur",this.collapseDelayed,this).on(r,"wheel",function(i){e.collapseDelayedStop(),n.DomEvent.stopPropagation(i)},this).on(r,"mouseover",function(i){e.collapseDelayedStop()},this),r},_createTip:function(t,e){let r;if(this.options.buildTip){if(r=this.options.buildTip.call(this,t,e),typeof r=="string"){let i=n.DomUtil.create("div");i.innerHTML=r,r=i.firstChild}}else r=n.DomUtil.create("li",""),r.innerHTML=t;return n.DomUtil.addClass(r,"search-tip"),r._text=t,this.options.tipAutoSubmit&&n.DomEvent.disableClickPropagation(r).on(r,"click",n.DomEvent.stop,this).on(r,"click",function(i){this._input.value=t,this._handleAutoresize(),this._input.focus(),this._hideTooltip(),this._handleSubmit()},this),r},_getUrl:function(t){return typeof this.options.url=="function"?this.options.url(t):this.options.url},_defaultFilterData:function(t,e){let r={};if(t=t.replace(new RegExp("[.*+?^${}()|[]\\]","g"),""),t==="")return[];let i=this.options.initial?"^":"",s=this.options.casesensitive?void 0:"i",o=new RegExp(i+t,s);for(let a in e)o.test(a)&&(r[a]=e[a]);return r},showTooltip:function(t){if(this._countertips=0,this._tooltip.innerHTML="",this._tooltip.currentSelection=-1,this.options.tooltipLimit)for(let e in t){if(this._countertips===this.options.tooltipLimit)break;this._countertips++,this._tooltip.appendChild(this._createTip(e,t[e]))}return this._countertips>0?(this._tooltip.style.display="block",this._autoTypeTmp&&this._autoType(),this._autoTypeTmp=this.options.autoType):this._hideTooltip(),this._tooltip.scrollTop=0,this._countertips},_hideTooltip:function(){return this._tooltip.style.display="none",this._tooltip.innerHTML="",0},_defaultFormatData:function(t){let e=this,r=this.options.propertyName,i=this.options.propertyLoc,s={};if(n.Util.isArray(i))for(let o in t)s[e._getPath(t[o],r)]=n.latLng(e._getPath(t[o],i[0]),e._getPath(t[o],i[1]));else for(let o in t)s[e._getPath(t[o],r)]=n.latLng(e._getPath(t[o],i));return s},_recordsFromJsonp:function(t,e){n.Control.Search.callJsonp=e;let r=n.DomUtil.create("script","leaflet-search-jsonp",document.getElementsByTagName("body")[0]),i=n.Util.template(this._getUrl(t)+"&"+this.options.jsonpParam+"=L.Control.Search.callJsonp",{s:t});return r.type="text/javascript",r.src=i,{abort:function(){r.parentNode.removeChild(r)}}},_recordsFromAjax:function(t,e){let r;try{r=new window.XMLHttpRequest}catch{throw new Error("XMLHttpRequest is not supported")}let i=n.Util.template(this._getUrl(t),{s:t});return r.open("GET",i),r.onload=function(){e(JSON.parse(r.responseText))},r.onreadystatechange=function(){r.readyState===4&&r.status===200&&this.onload()},r.send(),r},_searchInLayer:function(t,e,r){let i=this,s;t instanceof n.Control.Search.Marker||(t instanceof n.Marker||t instanceof n.CircleMarker?i._getPath(t.options,r)?(s=t.getLatLng(),s.layer=t,e[i._getPath(t.options,r)]=s):i._getPath(t.feature.properties,r)&&(s=t.getLatLng(),s.layer=t,e[i._getPath(t.feature.properties,r)]=s):t instanceof n.Path||t instanceof n.Polyline||t instanceof n.Polygon?i._getPath(t.options,r)?(s=t.getBounds().getCenter(),s.layer=t,e[i._getPath(t.options,r)]=s):i._getPath(t.feature.properties,r)&&(s=t.getBounds().getCenter(),s.layer=t,e[i._getPath(t.feature.properties,r)]=s):Object.prototype.hasOwnProperty.call(t,"feature")?Object.prototype.hasOwnProperty.call(t.feature.properties,r)&&(t.getLatLng&&typeof t.getLatLng=="function"?(s=t.getLatLng(),s.layer=t,e[t.feature.properties[r]]=s):t.getBounds&&typeof t.getBounds=="function"&&(s=t.getBounds().getCenter(),s.layer=t,e[t.feature.properties[r]]=s)):t instanceof n.LayerGroup&&t.eachLayer(function(o){i._searchInLayer(o,e,r)}))},_recordsFromLayer:function(){let t=this,e={},r=this.options.propertyName;return this._layer.eachLayer(function(i){t._searchInLayer(i,e,r)}),e},_autoType:function(){let t=this._input.value.length,e=this._tooltip.firstChild?this._tooltip.firstChild._text:"",r=e.length;if(e.indexOf(this._input.value)===0)if(this._input.value=e,this._handleAutoresize(),this._input.createTextRange){let i=this._input.createTextRange();i.collapse(!0),i.moveStart("character",t),i.moveEnd("character",r),i.select()}else this._input.setSelectionRange?this._input.setSelectionRange(t,r):this._input.selectionStart&&(this._input.selectionStart=t,this._input.selectionEnd=r)},_hideAutoType:function(){let t;if((t=this._input.selection)&&t.empty)t.empty();else if(this._input.createTextRange){t=this._input.createTextRange(),t.collapse(!0);let e=this._input.value.length;t.moveStart("character",e),t.moveEnd("character",e),t.select()}else this._input.getSelection&&this._input.getSelection().removeAllRanges(),this._input.selectionStart=this._input.selectionEnd},_handleKeypress:function(t){let e=this;switch(t.keyCode){case 27:this.collapse();break;case 13:(this._countertips===1||this.options.firstTipSubmit&&this._countertips>0)&&this._tooltip.currentSelection===-1&&this._handleArrowSelect(1),this._handleSubmit();break;case 38:this._handleArrowSelect(-1);break;case 40:this._handleArrowSelect(1);break;case 45:case 46:this._autoTypeTmp=!1;break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:this._input.value.length?this._cancel.style.display="block":this._cancel.style.display="none",this._input.value.length>=this.options.minLength?(clearTimeout(this.timerKeypress),this.timerKeypress=setTimeout(function(){e._fillRecordsCache()},this.options.delayType)):this._hideTooltip()}this._handleAutoresize()},searchText:function(t){let e=t.charCodeAt(t.length);this._input.value=t,this._input.style.display="block",n.DomUtil.addClass(this._container,"search-exp"),this._autoTypeTmp=!1,this._handleKeypress({keyCode:e})},_fillRecordsCache:function(){let t=this,e=this._input.value,r;this._curReq&&this._curReq.abort&&this._curReq.abort(),n.DomUtil.addClass(this._container,"search-load"),this.options.layer?(this._recordsCache=this._recordsFromLayer(),r=this._filterData(this._input.value,this._recordsCache),this.showTooltip(r),n.DomUtil.removeClass(this._container,"search-load")):(this.options.sourceData?this._retrieveData=this.options.sourceData:this.options.url&&(this._retrieveData=this.options.jsonpParam?this._recordsFromJsonp:this._recordsFromAjax),this._curReq=this._retrieveData(this,e,function(i){t._recordsCache=t._formatData(t,i),t.options.sourceData?r=t._filterData(t._input.value,t._recordsCache):r=t._recordsCache,t.showTooltip(r),n.DomUtil.removeClass(t._container,"search-load")}))},_handleAutoresize:function(){let t;this._input.style.maxWidth!==this._map._container.offsetWidth&&(t=this._map._container.clientWidth,t-=83,this._input.style.maxWidth=t.toString()+"px"),this.options.autoResize&&this._container.offsetWidth+20<this._map._container.offsetWidth&&(this._input.size=this._input.value.length<this._inputMinSize?this._inputMinSize:this._input.value.length)},_handleArrowSelect:function(t){let e=this._tooltip.hasChildNodes()?this._tooltip.childNodes:[];for(let r=0;r<e.length;r++)n.DomUtil.removeClass(e[r],"search-tip-select");if(t===1&&this._tooltip.currentSelection>=e.length-1)n.DomUtil.addClass(e[this._tooltip.currentSelection],"search-tip-select");else if(t===-1&&this._tooltip.currentSelection<=0)this._tooltip.currentSelection=-1;else if(this._tooltip.style.display!=="none"){this._tooltip.currentSelection+=t,n.DomUtil.addClass(e[this._tooltip.currentSelection],"search-tip-select"),this._input.value=e[this._tooltip.currentSelection]._text;let r=e[this._tooltip.currentSelection].offsetTop;r+e[this._tooltip.currentSelection].clientHeight>=this._tooltip.scrollTop+this._tooltip.clientHeight?this._tooltip.scrollTop=r-this._tooltip.clientHeight+e[this._tooltip.currentSelection].clientHeight:r<=this._tooltip.scrollTop&&(this._tooltip.scrollTop=r)}},_handleSubmit:function(){if(this._hideAutoType(),this.hideAlert(),this._hideTooltip(),this._input.style.display==="none")this.expand();else if(this._input.value==="")this.collapse();else{let t=this._getLocation(this._input.value);t?(this.showLocation(t,this._input.value),this.fire("search:locationfound",{latlng:t,text:this._input.value,layer:t.layer?t.layer:null})):this.showAlert()}},_getLocation:function(t){return Object.prototype.hasOwnProperty.call(this._recordsCache,t)?this._recordsCache[t]:!1},_defaultMoveToLocation:function(t,e,r){this.options.zoom?this._map.setView(t,this.options.zoom):this._map.panTo(t)},showLocation:function(t,e){let r=this;return r._map.once("moveend zoomend",function(i){r._markerSearch&&r._markerSearch.addTo(r._map).setLatLng(t)}),r._moveToLocation(t,e,r._map),r.options.autoCollapse&&r.collapse(),r}}),n.Control.Search.Marker=n.Marker.extend({includes:n.version[0]==="1"?n.Evented.prototype:n.Mixin.Events,options:{icon:new n.Icon.Default,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}},initialize:function(t,e){n.setOptions(this,e),e.icon===!0&&(e.icon=new n.Icon.Default),n.Marker.prototype.initialize.call(this,t,e),n.Control.Search.prototype._isObject(this.options.circle)&&(this._circleLoc=new n.CircleMarker(t,this.options.circle))},onAdd:function(t){n.Marker.prototype.onAdd.call(this,t),this._circleLoc&&(t.addLayer(this._circleLoc),this.options.animate&&this.animate())},onRemove:function(t){n.Marker.prototype.onRemove.call(this,t),this._circleLoc&&t.removeLayer(this._circleLoc)},setLatLng:function(t){return n.Marker.prototype.setLatLng.call(this,t),this._circleLoc&&this._circleLoc.setLatLng(t),this},_initIcon:function(){this.options.icon&&n.Marker.prototype._initIcon.call(this)},_removeIcon:function(){this.options.icon&&n.Marker.prototype._removeIcon.call(this)},animate:function(){if(this._circleLoc){let t=this._circleLoc,e=200,i=parseInt(t._radius/5),s=this.options.circle.radius,o=t._radius*2,a=0;t._timerAnimLoc=setInterval(function(){a+=.5,i+=a,o-=i,t.setRadius(o),o<s&&(clearInterval(t._timerAnimLoc),t.setRadius(s))},e)}return this}}),n.Map.addInitHook(function(){this.options.searchControl&&(this.searchControl=n.control.search(this.options.searchControl),this.addControl(this.searchControl))}),n.control.search=function(t){return new n.Control.Search(t)},n.Control.Search})});var Mv=Ge((Cv,Lp)=>{(function(n){typeof Cv=="object"&&typeof Lp<"u"?Lp.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).ExcelJS=n()})(function(){return function n(t,e,r){function i(a,l){if(!e[a]){if(!t[a]){var c=typeof pl=="function"&&pl;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var d=e[a]={exports:{}};t[a][0].call(d.exports,function(p){return i(t[a][1][p]||p)},d,d.exports,n,t,e,r)}return e[a].exports}for(var s=typeof pl=="function"&&pl,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(n,t,e){"use strict";let r=n("fs"),i=n("fast-csv"),s=n("dayjs/plugin/customParseFormat"),o=n("dayjs/plugin/utc"),a=n("dayjs").extend(s).extend(o),l=n("../utils/stream-buf"),{fs:{exists:c}}=n("../utils/utils"),h={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};t.exports=class{constructor(d){this.workbook=d,this.worksheet=null}async readFile(d,p){if(p=p||{},!await c(d))throw new Error("File not found: "+d);let g=r.createReadStream(d),m=await this.read(g,p);return g.close(),m}read(d,p){return p=p||{},new Promise((g,m)=>{let b=this.workbook.addWorksheet(p.sheetName),y=p.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],x=p.map||function(O){if(O==="")return null;let D=Number(O);if(!Number.isNaN(D)&&D!==1/0)return D;let U=y.reduce((q,G)=>{if(q)return q;let tt=a(O,G,!0);return tt.isValid()?tt:null},null);if(U)return new Date(U.valueOf());let z=h[O];return z!==void 0?z:O},S=i.parse(p.parserOptions).on("data",O=>{b.addRow(O.map(x))}).on("end",()=>{S.emit("worksheet",b)});S.on("worksheet",g).on("error",m),d.pipe(S)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(d,p){return new Promise((g,m)=>{p=p||{};let b=this.workbook.getWorksheet(p.sheetName||p.sheetId),y=i.format(p.formatterOptions);d.on("finish",()=>{g()}),y.on("error",m),y.pipe(d);let{dateFormat:x,dateUTC:S}=p,O=p.map||(z=>{if(z){if(z.text||z.hyperlink)return z.hyperlink||z.text||"";if(z.formula||z.result)return z.result||"";if(z instanceof Date)return x?S?a.utc(z).format(x):a(z).format(x):S?a.utc(z).format():a(z).format();if(z.error)return z.error;if(typeof z=="object")return JSON.stringify(z)}return z}),D=p.includeEmptyRows===void 0||p.includeEmptyRows,U=1;b&&b.eachRow((z,q)=>{if(D)for(;U++<q-1;)y.write([]);let{values:G}=z;G.shift(),y.write(G.map(O)),U=q}),y.end()})}writeFile(d,p){let g={encoding:(p=p||{}).encoding||"utf8"},m=r.createWriteStream(d,g);return this.write(m,p)}async writeBuffer(d){let p=new l;return await this.write(p,d),p.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(n,t,e){"use strict";let r=n("../utils/col-cache");class i{constructor(o,a){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=o,a)if(typeof a=="string"){let c=r.decodeAddress(a);this.nativeCol=c.col+l,this.nativeColOff=0,this.nativeRow=c.row+l,this.nativeRowOff=0}else a.nativeCol!==void 0?(this.nativeCol=a.nativeCol||0,this.nativeColOff=a.nativeColOff||0,this.nativeRow=a.nativeRow||0,this.nativeRowOff=a.nativeRowOff||0):a.col!==void 0?(this.col=a.col+l,this.row=a.row+l):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(o){return o instanceof i||o==null?o:new i(o)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(o){this.nativeCol=Math.floor(o),this.nativeColOff=Math.floor((o-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(o){this.nativeRow=Math.floor(o),this.nativeRowOff=Math.floor((o-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(o){this.nativeCol=o.nativeCol,this.nativeColOff=o.nativeColOff,this.nativeRow=o.nativeRow,this.nativeRowOff=o.nativeRowOff}}t.exports=i},{"../utils/col-cache":19}],3:[function(n,t,e){"use strict";let r=n("../utils/col-cache"),i=n("../utils/under-dash"),s=n("./enums"),{slideFormula:o}=n("../utils/shared-formula"),a=n("./note");class l{constructor(d,p,g){if(!d||!p)throw new Error("A Cell needs a Row");this._row=d,this._column=p,r.validateAddress(g),this._address=g,this._value=c.create(l.Types.Null,this),this.style=this._mergeStyle(d.style,p.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(d){this.style.numFmt=d}get font(){return this.style.font}set font(d){this.style.font=d}get alignment(){return this.style.alignment}set alignment(d){this.style.alignment=d}get border(){return this.style.border}set border(d){this.style.border=d}get fill(){return this.style.fill}set fill(d){this.style.fill=d}get protection(){return this.style.protection}set protection(d){this.style.protection=d}_mergeStyle(d,p,g){let m=d&&d.numFmt||p&&p.numFmt;m&&(g.numFmt=m);let b=d&&d.font||p&&p.font;b&&(g.font=b);let y=d&&d.alignment||p&&p.alignment;y&&(g.alignment=y);let x=d&&d.border||p&&p.border;x&&(g.border=x);let S=d&&d.fill||p&&p.fill;S&&(g.fill=S);let O=d&&d.protection||p&&p.protection;return O&&(g.protection=O),g}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===l.Types.Merge}merge(d,p){this._value.release(),this._value=c.create(l.Types.Merge,this,d),p||(this.style=d.style)}unmerge(){this.type===l.Types.Merge&&(this._value.release(),this._value=c.create(l.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(d){return this._value.type===l.Types.Merge&&this._value.isMergedTo(d)}get master(){return this.type===l.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===l.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(d){this.type!==l.Types.Merge?(this._value.release(),this._value=c.create(c.getType(d),this,d)):this._value.master.value=d}get note(){return this._comment&&this._comment.note}set note(d){this._comment=new a(d)}get text(){return this._value.toString()}get html(){return i.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(d){this.type===l.Types.String&&(this._value=c.create(l.Types.Hyperlink,this,{text:this._value.value,hyperlink:d}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){let{worksheet:d}=this._row;return{sheetName:d.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(d){this.names=[d]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(d){let{definedNames:p}=this.workbook;p.removeAllNames(this.fullAddress),d.forEach(g=>{p.addEx(this.fullAddress,g)})}addName(d){this.workbook.definedNames.addEx(this.fullAddress,d)}removeName(d){this.workbook.definedNames.removeEx(this.fullAddress,d)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(d){this._dataValidations.add(this.address,d)}get model(){let{model:d}=this._value;return d.style=this.style,this._comment&&(d.comment=this._comment.model),d}set model(d){if(this._value.release(),this._value=c.create(d.type,this),this._value.model=d,d.comment)switch(d.comment.type){case"note":this._comment=a.fromModel(d.comment)}d.style?this.style=d.style:this.style={}}}l.Types=s.ValueType;let c={getType:h=>h==null?l.Types.Null:h instanceof String||typeof h=="string"?l.Types.String:typeof h=="number"?l.Types.Number:typeof h=="boolean"?l.Types.Boolean:h instanceof Date?l.Types.Date:h.text&&h.hyperlink?l.Types.Hyperlink:h.formula||h.sharedFormula?l.Types.Formula:h.richText?l.Types.RichText:h.sharedString?l.Types.SharedString:h.error?l.Types.Error:l.Types.JSON,types:[{t:l.Types.Null,f:class{constructor(h){this.model={address:h.address,type:l.Types.Null}}get value(){return null}set value(h){}get type(){return l.Types.Null}get effectiveType(){return l.Types.Null}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){}toString(){return""}}},{t:l.Types.Number,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Number,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.Number}get effectiveType(){return l.Types.Number}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.String,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.String,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.String}get effectiveType(){return l.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:l.Types.Date,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Date,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.Date}get effectiveType(){return l.Types.Date}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.Hyperlink,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Hyperlink,text:d?d.text:void 0,hyperlink:d?d.hyperlink:void 0},d&&d.tooltip&&(this.model.tooltip=d.tooltip)}get value(){let h={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(h.tooltip=this.model.tooltip),h}set value(h){this.model={text:h.text,hyperlink:h.hyperlink},h.tooltip&&(this.model.tooltip=h.tooltip)}get text(){return this.model.text}set text(h){this.model.text=h}get hyperlink(){return this.model.hyperlink}set hyperlink(h){this.model.hyperlink=h}get type(){return l.Types.Hyperlink}get effectiveType(){return l.Types.Hyperlink}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:l.Types.Formula,f:class{constructor(h,d){this.cell=h,this.model={address:h.address,type:l.Types.Formula,shareType:d?d.shareType:void 0,ref:d?d.ref:void 0,formula:d?d.formula:void 0,sharedFormula:d?d.sharedFormula:void 0,result:d?d.result:void 0}}_copyModel(h){let d={},p=g=>{let m=h[g];m&&(d[g]=m)};return p("formula"),p("result"),p("ref"),p("shareType"),p("sharedFormula"),d}get value(){return this._copyModel(this.model)}set value(h){this.model=this._copyModel(h)}validate(h){switch(c.getType(h)){case l.Types.Null:case l.Types.String:case l.Types.Number:case l.Types.Date:break;case l.Types.Hyperlink:case l.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(h){this.model.formula=h}get formulaType(){return this.model.formula?s.FormulaType.Master:this.model.sharedFormula?s.FormulaType.Shared:s.FormulaType.None}get result(){return this.model.result}set result(h){this.model.result=h}get type(){return l.Types.Formula}get effectiveType(){let h=this.model.result;return h==null?s.ValueType.Null:h instanceof String||typeof h=="string"?s.ValueType.String:typeof h=="number"?s.ValueType.Number:h instanceof Date?s.ValueType.Date:h.text&&h.hyperlink?s.ValueType.Hyperlink:h.formula?s.ValueType.Formula:s.ValueType.Null}get address(){return this.model.address}set address(h){this.model.address=h}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){let{worksheet:h}=this.cell,d=h.findCell(this.model.sharedFormula);this._translatedFormula=d&&o(d.formula,d.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:l.Types.Merge,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Merge,master:d?d.address:void 0},this._master=d,d&&d.addMergeRef()}get value(){return this._master.value}set value(h){h instanceof l?(this._master&&this._master.releaseMergeRef(),h.addMergeRef(),this._master=h):this._master.value=h}isMergedTo(h){return h===this._master}get master(){return this._master}get type(){return l.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:l.Types.JSON,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.String,value:JSON.stringify(d),rawValue:d}}get value(){return this.model.rawValue}set value(h){this.model.rawValue=h,this.model.value=JSON.stringify(h)}get type(){return l.Types.String}get effectiveType(){return l.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:l.Types.SharedString,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.SharedString,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.SharedString}get effectiveType(){return l.Types.SharedString}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.RichText,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.String,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}toString(){return this.model.value.richText.map(h=>h.text).join("")}get type(){return l.Types.RichText}get effectiveType(){return l.Types.RichText}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:l.Types.Boolean,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Boolean,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.Boolean}get effectiveType(){return l.Types.Boolean}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.Error,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Error,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.Error}get effectiveType(){return l.Types.Error}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((h,d)=>(h[d.t]=d.f,h),[]),create(h,d,p){let g=this.types[h];if(!g)throw new Error("Could not create Value of type "+h);return new g(d,p)}};t.exports=l},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(n,t,e){"use strict";let r=n("../utils/under-dash"),i=n("./enums"),s=n("../utils/col-cache");class o{constructor(l,c,h){this._worksheet=l,this._number=c,h!==!1&&(this.defn=h)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return s.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(l){l?(this.key=l.key,this.width=l.width!==void 0?l.width:9,this.outlineLevel=l.outlineLevel,l.style?this.style=l.style:this.style={},this.header=l.header,this._hidden=!!l.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(l){l!==void 0?(this._header=l,this.headers.forEach((c,h)=>{this._worksheet.getCell(h+1,this.number).value=c})):this._header=void 0}get key(){return this._key}set key(l){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=l,l&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(l){this._hidden=l}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(l){this._outlineLevel=l}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(l){return this.width===l.width&&this.hidden===l.hidden&&this.outlineLevel===l.outlineLevel&&r.isEqual(this.style,l.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;let l=this.style;return!l||!(l.font||l.numFmt||l.alignment||l.border||l.fill||l.protection)}get headerCount(){return this.headers.length}eachCell(l,c){let h=this.number;c||(c=l,l=null),this._worksheet.eachRow(l,(d,p)=>{c(d.getCell(h),p)})}get values(){let l=[];return this.eachCell((c,h)=>{c&&c.type!==i.ValueType.Null&&(l[h]=c.value)}),l}set values(l){if(!l)return;let c=this.number,h=0;l.hasOwnProperty("0")&&(h=1),l.forEach((d,p)=>{this._worksheet.getCell(p+h,c).value=d})}_applyStyle(l,c){return this.style[l]=c,this.eachCell(h=>{h[l]=c}),c}get numFmt(){return this.style.numFmt}set numFmt(l){this._applyStyle("numFmt",l)}get font(){return this.style.font}set font(l){this._applyStyle("font",l)}get alignment(){return this.style.alignment}set alignment(l){this._applyStyle("alignment",l)}get protection(){return this.style.protection}set protection(l){this._applyStyle("protection",l)}get border(){return this.style.border}set border(l){this._applyStyle("border",l)}get fill(){return this.style.fill}set fill(l){this._applyStyle("fill",l)}static toModel(l){let c=[],h=null;return l&&l.forEach((d,p)=>{d.isDefault?h&&(h=null):h&&d.equivalentTo(h)?h.max=p+1:(h={min:p+1,max:p+1,width:d.width!==void 0?d.width:9,style:d.style,isCustomWidth:d.isCustomWidth,hidden:d.hidden,outlineLevel:d.outlineLevel,collapsed:d.collapsed},c.push(h))}),c.length?c:void 0}static fromModel(l,c){let h=[],d=1,p=0;for(c=(c=c||[]).sort(function(g,m){return g.min-m.min});p<c.length;){let g=c[p++];for(;d<g.min;)h.push(new o(l,d++));for(;d<=g.max;)h.push(new o(l,d++,g))}return h.length?h:null}}t.exports=o},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(n,t,e){"use strict";t.exports=class{constructor(r){this.model=r||{}}add(r,i){return this.model[r]=i}find(r){return this.model[r]}remove(r){this.model[r]=void 0}}},{}],6:[function(n,t,e){"use strict";let r=n("../utils/under-dash"),i=n("../utils/col-cache"),s=n("../utils/cell-matrix"),o=n("./range"),a=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;t.exports=class{constructor(){this.matrixMap={}}getMatrix(l){return this.matrixMap[l]||(this.matrixMap[l]=new s)}add(l,c){let h=i.decodeEx(l);this.addEx(h,c)}addEx(l,c){let h=this.getMatrix(c);if(l.top)for(let d=l.left;d<=l.right;d++)for(let p=l.top;p<=l.bottom;p++){let g={sheetName:l.sheetName,address:i.n2l(d)+p,row:p,col:d};h.addCellEx(g)}else h.addCellEx(l)}remove(l,c){let h=i.decodeEx(l);this.removeEx(h,c)}removeEx(l,c){this.getMatrix(c).removeCellEx(l)}removeAllNames(l){r.each(this.matrixMap,c=>{c.removeCellEx(l)})}forEach(l){r.each(this.matrixMap,(c,h)=>{c.forEach(d=>{l(h,d)})})}getNames(l){return this.getNamesEx(i.decodeEx(l))}getNamesEx(l){return r.map(this.matrixMap,(c,h)=>c.findCellEx(l)&&h).filter(Boolean)}_explore(l,c){c.mark=!1;let{sheetName:h}=c,d=new o(c.row,c.col,c.row,c.col,h),p,g;function m(y,x){let S=l.findCellAt(h,y,c.col);return!(!S||!S.mark)&&(d[x]=y,S.mark=!1,!0)}for(g=c.row-1;m(g,"top");g--);for(g=c.row+1;m(g,"bottom");g++);function b(y,x){let S=[];for(g=d.top;g<=d.bottom;g++){let O=l.findCellAt(h,g,y);if(!O||!O.mark)return!1;S.push(O)}d[x]=y;for(let O=0;O<S.length;O++)S[O].mark=!1;return!0}for(p=c.col-1;b(p,"left");p--);for(p=c.col+1;b(p,"right");p++);return d}getRanges(l,c){return(c=c||this.matrixMap[l])?(c.forEach(h=>{h.mark=!0}),{name:l,ranges:c.map(h=>h.mark&&this._explore(c,h)).filter(Boolean).map(h=>h.$shortRange)}):{name:l,ranges:[]}}normaliseMatrix(l,c){l.forEachInSheet(c,(h,d,p)=>{h&&(h.row===d&&h.col===p||(h.row=d,h.col=p,h.address=i.n2l(p)+d))})}spliceRows(l,c,h,d){r.each(this.matrixMap,p=>{p.spliceRows(l,c,h,d),this.normaliseMatrix(p,l)})}spliceColumns(l,c,h,d){r.each(this.matrixMap,p=>{p.spliceColumns(l,c,h,d),this.normaliseMatrix(p,l)})}get model(){return r.map(this.matrixMap,(l,c)=>this.getRanges(c,l)).filter(l=>l.ranges.length)}set model(l){let c=this.matrixMap={};l.forEach(h=>{let d=c[h.name]=new s;h.ranges.forEach(p=>{a.test(p.split("!").pop()||"")&&d.addCell(p)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(n,t,e){"use strict";t.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(n,t,e){"use strict";let r=n("../utils/col-cache"),i=n("./anchor");t.exports=class{constructor(s,o){this.worksheet=s,this.model=o}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(s){let{type:o,imageId:a,range:l,hyperlinks:c}=s;if(this.type=o,this.imageId=a,o==="image")if(typeof l=="string"){let h=r.decode(l);this.range={tl:new i(this.worksheet,{col:h.left,row:h.top},-1),br:new i(this.worksheet,{col:h.right,row:h.bottom},0),editAs:"oneCell"}}else this.range={tl:new i(this.worksheet,l.tl,0),br:l.br&&new i(this.worksheet,l.br,0),ext:l.ext,editAs:l.editAs,hyperlinks:c||l.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(n,t,e){"use strict";let r=n("../utils/under-dash");class i{constructor(o){this.note=o}get model(){let o=null;switch(typeof this.note){case"string":o={type:"note",note:{texts:[{text:this.note}]}};break;default:o={type:"note",note:this.note}}return r.deepMerge({},i.DEFAULT_CONFIGS,o)}set model(o){let{note:a}=o,{texts:l}=a;l.length===1&&Object.keys(l[0]).length===1?this.note=l[0].text:this.note=a}static fromModel(o){let a=new i;return a.model=o,a}}i.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},t.exports=i},{"../utils/under-dash":26}],10:[function(n,t,e){"use strict";let r=n("../utils/col-cache");class i{constructor(){this.decode(arguments)}setTLBR(o,a,l,c,h){if(arguments.length<4){let d=r.decodeAddress(o),p=r.decodeAddress(a);this.model={top:Math.min(d.row,p.row),left:Math.min(d.col,p.col),bottom:Math.max(d.row,p.row),right:Math.max(d.col,p.col),sheetName:l},this.setTLBR(d.row,d.col,p.row,p.col,h)}else this.model={top:Math.min(o,l),left:Math.min(a,c),bottom:Math.max(o,l),right:Math.max(a,c),sheetName:h}}decode(o){switch(o.length){case 5:this.setTLBR(o[0],o[1],o[2],o[3],o[4]);break;case 4:this.setTLBR(o[0],o[1],o[2],o[3]);break;case 3:this.setTLBR(o[0],o[1],o[2]);break;case 2:this.setTLBR(o[0],o[1]);break;case 1:{let a=o[0];if(a instanceof i)this.model={top:a.model.top,left:a.model.left,bottom:a.model.bottom,right:a.model.right,sheetName:a.sheetName};else if(a instanceof Array)this.decode(a);else if(a.top&&a.left&&a.bottom&&a.right)this.model={top:a.top,left:a.left,bottom:a.bottom,right:a.right,sheetName:a.sheetName};else{let l=r.decodeEx(a);l.top?this.model={top:l.top,left:l.left,bottom:l.bottom,right:l.right,sheetName:l.sheetName}:this.model={top:l.row,left:l.col,bottom:l.row,right:l.col,sheetName:l.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+o.length)}}get top(){return this.model.top||1}set top(o){this.model.top=o}get left(){return this.model.left||1}set left(o){this.model.left=o}get bottom(){return this.model.bottom||1}set bottom(o){this.model.bottom=o}get right(){return this.model.right||1}set right(o){this.model.right=o}get sheetName(){return this.model.sheetName}set sheetName(o){this.model.sheetName=o}get _serialisedSheetName(){let{sheetName:o}=this.model;return o?/^[a-zA-Z0-9]*$/.test(o)?o+"!":`'${o}'!`:""}expand(o,a,l,c){(!this.model.top||o<this.top)&&(this.top=o),(!this.model.left||a<this.left)&&(this.left=a),(!this.model.bottom||l>this.bottom)&&(this.bottom=l),(!this.model.right||c>this.right)&&(this.right=c)}expandRow(o){if(o){let{dimensions:a,number:l}=o;a&&this.expand(l,a.min,l,a.max)}}expandToAddress(o){let a=r.decodeEx(o);this.expand(a.row,a.col,a.row,a.col)}get tl(){return r.n2l(this.left)+this.top}get $t$l(){return`$${r.n2l(this.left)}$${this.top}`}get br(){return r.n2l(this.right)+this.bottom}get $b$r(){return`$${r.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(o){return(!o.sheetName||!this.sheetName||o.sheetName===this.sheetName)&&!(o.bottom<this.top)&&!(o.top>this.bottom)&&!(o.right<this.left)&&!(o.left>this.right)}contains(o){let a=r.decodeEx(o);return this.containsEx(a)}containsEx(o){return(!o.sheetName||!this.sheetName||o.sheetName===this.sheetName)&&o.row>=this.top&&o.row<=this.bottom&&o.col>=this.left&&o.col<=this.right}forEachAddress(o){for(let a=this.left;a<=this.right;a++)for(let l=this.top;l<=this.bottom;l++)o(r.encodeAddress(l,a),l,a)}}t.exports=i},{"../utils/col-cache":19}],11:[function(n,t,e){"use strict";let r=n("../utils/under-dash"),i=n("./enums"),s=n("../utils/col-cache"),o=n("./cell");t.exports=class{constructor(a,l){this._worksheet=a,this._number=l,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(a){return this._cells[a-1]}getCellEx(a){let l=this._cells[a.col-1];if(!l){let c=this._worksheet.getColumn(a.col);l=new o(this,c,a.address),this._cells[a.col-1]=l}return l}getCell(a){if(typeof a=="string"){let l=this._worksheet.getColumnKey(a);a=l?l.number:s.l2n(a)}return this._cells[a-1]||this.getCellEx({address:s.encodeAddress(this._number,a),row:this._number,col:a})}splice(a,l){let c=a+l;for(var h=arguments.length,d=new Array(h>2?h-2:0),p=2;p<h;p++)d[p-2]=arguments[p];let g=d.length-l,m=this._cells.length,b,y,x;if(g<0)for(b=a+d.length;b<=m;b++)x=this._cells[b-1],y=this._cells[b-g-1],y?(x=this.getCell(b),x.value=y.value,x.style=y.style,x._comment=y._comment):x&&(x.value=null,x.style={},x._comment=void 0);else if(g>0)for(b=m;b>=c;b--)y=this._cells[b-1],y?(x=this.getCell(b+g),x.value=y.value,x.style=y.style,x._comment=y._comment):this._cells[b+g-1]=void 0;for(b=0;b<d.length;b++)x=this.getCell(a+b),x.value=d[b],x.style={},x._comment=void 0}eachCell(a,l){if(l||(l=a,a=null),a&&a.includeEmpty){let c=this._cells.length;for(let h=1;h<=c;h++)l(this.getCell(h),h)}else this._cells.forEach((c,h)=>{c&&c.type!==i.ValueType.Null&&l(c,h+1)})}addPageBreak(a,l){let c=this._worksheet,h=Math.max(0,a-1)||0,d=Math.max(0,l-1)||16838,p={id:this._number,max:d,man:1};h&&(p.min=h),c.rowBreaks.push(p)}get values(){let a=[];return this._cells.forEach(l=>{l&&l.type!==i.ValueType.Null&&(a[l.col]=l.value)}),a}set values(a){if(this._cells=[],a)if(a instanceof Array){let l=0;a.hasOwnProperty("0")&&(l=1),a.forEach((c,h)=>{c!==void 0&&(this.getCellEx({address:s.encodeAddress(this._number,h+l),row:this._number,col:h+l}).value=c)})}else this._worksheet.eachColumnKey((l,c)=>{a[c]!==void 0&&(this.getCellEx({address:s.encodeAddress(this._number,l.number),row:this._number,col:l.number}).value=a[c])})}get hasValues(){return r.some(this._cells,a=>a&&a.type!==i.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let a=0;return this.eachCell(()=>{a++}),a}get dimensions(){let a=0,l=0;return this._cells.forEach(c=>{c&&c.type!==i.ValueType.Null&&((!a||a>c.col)&&(a=c.col),l<c.col&&(l=c.col))}),a>0?{min:a,max:l}:null}_applyStyle(a,l){return this.style[a]=l,this._cells.forEach(c=>{c&&(c[a]=l)}),l}get numFmt(){return this.style.numFmt}set numFmt(a){this._applyStyle("numFmt",a)}get font(){return this.style.font}set font(a){this._applyStyle("font",a)}get alignment(){return this.style.alignment}set alignment(a){this._applyStyle("alignment",a)}get protection(){return this.style.protection}set protection(a){this._applyStyle("protection",a)}get border(){return this.style.border}set border(a){this._applyStyle("border",a)}get fill(){return this.style.fill}set fill(a){this._applyStyle("fill",a)}get hidden(){return!!this._hidden}set hidden(a){this._hidden=a}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(a){this._outlineLevel=a}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){let a=[],l=0,c=0;return this._cells.forEach(h=>{if(h){let d=h.model;d&&((!l||l>h.col)&&(l=h.col),c<h.col&&(c=h.col),a.push(d))}}),this.height||a.length?{cells:a,number:this.number,min:l,max:c,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(a){if(a.number!==this._number)throw new Error("Invalid row number in model");let l;this._cells=[],a.cells.forEach(c=>{switch(c.type){case o.Types.Merge:break;default:{let h;if(c.address)h=s.decodeAddress(c.address);else if(l){let{row:d}=l,p=l.col+1;h={row:d,col:p,address:s.encodeAddress(d,p),$col$row:`$${s.n2l(p)}$${d}`}}l=h,this.getCellEx(h).model=c;break}}}),a.height?this.height=a.height:delete this.height,this.hidden=a.hidden,this.outlineLevel=a.outlineLevel||0,this.style=a.style&&JSON.parse(JSON.stringify(a.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(n,t,e){"use strict";let r=n("../utils/col-cache");class i{constructor(o,a,l){this.table=o,this.column=a,this.index=l}_set(o,a){this.table.cacheState(),this.column[o]=a}get name(){return this.column.name}set name(o){this._set("name",o)}get filterButton(){return this.column.filterButton}set filterButton(o){this.column.filterButton=o}get style(){return this.column.style}set style(o){this.column.style=o}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(o){this._set("totalsRowLabel",o)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(o){this._set("totalsRowFunction",o)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(o){this._set("totalsRowResult",o)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(o){this._set("totalsRowFormula",o)}}t.exports=class{constructor(s,o){this.worksheet=s,o&&(this.table=o,this.validate(),this.store())}getFormula(s){switch(s.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${s.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${s.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${s.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${s.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${s.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${s.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${s.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${s.name}])`;case"custom":return s.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+s.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){let{table:s}=this,o=(g,m,b)=>{g[m]===void 0&&(g[m]=b)};o(s,"headerRow",!0),o(s,"totalsRow",!1),o(s,"style",{}),o(s.style,"theme","TableStyleMedium2"),o(s.style,"showFirstColumn",!1),o(s.style,"showLastColumn",!1),o(s.style,"showRowStripes",!1),o(s.style,"showColumnStripes",!1);let a=(g,m)=>{if(!g)throw new Error(m)};a(s.ref,"Table must have ref"),a(s.columns,"Table must have column definitions"),a(s.rows,"Table must have row definitions"),s.tl=r.decodeAddress(s.ref);let{row:l,col:c}=s.tl;a(l>0,"Table must be on valid row"),a(c>0,"Table must be on valid col");let{width:h,filterHeight:d,tableHeight:p}=this;s.autoFilterRef=r.encode(l,c,l+d-1,c+h-1),s.tableRef=r.encode(l,c,l+p-1,c+h-1),s.columns.forEach((g,m)=>{a(g.name,`Column ${m} must have a name`),m===0?o(g,"totalsRowLabel","Total"):(o(g,"totalsRowFunction","none"),g.totalsRowFormula=this.getFormula(g))})}store(){let s=(d,p)=>{p&&Object.keys(p).forEach(g=>{d[g]=p[g]})},{worksheet:o,table:a}=this,{row:l,col:c}=a.tl,h=0;if(a.headerRow){let d=o.getRow(l+h++);a.columns.forEach((p,g)=>{let{style:m,name:b}=p,y=d.getCell(c+g);y.value=b,s(y,m)})}if(a.rows.forEach(d=>{let p=o.getRow(l+h++);d.forEach((g,m)=>{let b=p.getCell(c+m);b.value=g,s(b,a.columns[m].style)})}),a.totalsRow){let d=o.getRow(l+h++);a.columns.forEach((p,g)=>{let m=d.getCell(c+g);if(g===0)m.value=p.totalsRowLabel;else{let b=this.getFormula(p);m.value=b?{formula:p.totalsRowFormula,result:p.totalsRowResult}:null}s(m,p.style)})}}load(s){let{table:o}=this,{row:a,col:l}=o.tl,c=0;if(o.headerRow){let h=s.getRow(a+c++);o.columns.forEach((d,p)=>{h.getCell(l+p).value=d.name})}if(o.rows.forEach(h=>{let d=s.getRow(a+c++);h.forEach((p,g)=>{d.getCell(l+g).value=p})}),o.totalsRow){let h=s.getRow(a+c++);o.columns.forEach((d,p)=>{let g=h.getCell(l+p);p===0?g.value=d.totalsRowLabel:this.getFormula(d)&&(g.value={formula:d.totalsRowFormula,result:d.totalsRowResult})})}}get model(){return this.table}set model(s){this.table=s}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();let s=r.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let o=0;o<this._cache.tableHeight;o++){let a=this.worksheet.getRow(s.row+o);for(let l=0;l<this._cache.width;l++)a.getCell(s.col+l).value=null}else{for(let o=this.tableHeight;o<this._cache.tableHeight;o++){let a=this.worksheet.getRow(s.row+o);for(let l=0;l<this._cache.width;l++)a.getCell(s.col+l).value=null}for(let o=0;o<this.tableHeight;o++){let a=this.worksheet.getRow(s.row+o);for(let l=this.width;l<this._cache.width;l++)a.getCell(s.col+l).value=null}}this.store()}addRow(s,o){this.cacheState(),o===void 0?this.table.rows.push(s):this.table.rows.splice(o,0,s)}removeRows(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(s,o)}getColumn(s){let o=this.table.columns[s];return new i(this,o,s)}addColumn(s,o,a){this.cacheState(),a===void 0?(this.table.columns.push(s),this.table.rows.forEach((l,c)=>{l.push(o[c])})):(this.table.columns.splice(a,0,s),this.table.rows.forEach((l,c)=>{l.splice(a,0,o[c])}))}removeColumns(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(s,o),this.table.rows.forEach(a=>{a.splice(s,o)})}_assign(s,o,a){this.cacheState(),s[o]=a}get ref(){return this.table.ref}set ref(s){this._assign(this.table,"ref",s)}get name(){return this.table.name}set name(s){this.table.name=s}get displayName(){return this.table.displyName||this.table.name}set displayNamename(s){this.table.displayName=s}get headerRow(){return this.table.headerRow}set headerRow(s){this._assign(this.table,"headerRow",s)}get totalsRow(){return this.table.totalsRow}set totalsRow(s){this._assign(this.table,"totalsRow",s)}get theme(){return this.table.style.name}set theme(s){this.table.style.name=s}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(s){this.table.style.showFirstColumn=s}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(s){this.table.style.showLastColumn=s}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(s){this.table.style.showRowStripes=s}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(s){this.table.style.showColumnStripes=s}}},{"../utils/col-cache":19}],13:[function(n,t,e){"use strict";let r=n("./worksheet"),i=n("./defined-names"),s=n("../xlsx/xlsx"),o=n("../csv/csv");t.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new i}get xlsx(){return this._xlsx||(this._xlsx=new s(this)),this._xlsx}get csv(){return this._csv||(this._csv=new o(this)),this._csv}get nextId(){for(let a=1;a<this._worksheets.length;a++)if(!this._worksheets[a])return a;return this._worksheets.length||1}addWorksheet(a,l){let c=this.nextId;l&&(typeof l=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),l={properties:{tabColor:{argb:l}}}):(l.argb||l.theme||l.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),l={properties:{tabColor:l}}));let h=this._worksheets.reduce((g,m)=>(m&&m.orderNo)>g?m.orderNo:g,0),d=Object.assign({},l,{id:c,name:a,orderNo:h+1,workbook:this}),p=new r(d);return this._worksheets[c]=p,p}removeWorksheetEx(a){delete this._worksheets[a.id]}removeWorksheet(a){let l=this.getWorksheet(a);l&&l.destroy()}getWorksheet(a){return a===void 0?this._worksheets.find(Boolean):typeof a=="number"?this._worksheets[a]:typeof a=="string"?this._worksheets.find(l=>l&&l.name===a):void 0}get worksheets(){return this._worksheets.slice(1).sort((a,l)=>a.orderNo-l.orderNo).filter(Boolean)}eachSheet(a){this.worksheets.forEach(l=>{a(l,l.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(a){let l=this.media.length;return this.media.push(Object.assign({},a,{type:"image"})),l}getImage(a){return this.media[a]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(a=>a.model),sheets:this.worksheets.map(a=>a.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(a){this.creator=a.creator,this.lastModifiedBy=a.lastModifiedBy,this.lastPrinted=a.lastPrinted,this.created=a.created,this.modified=a.modified,this.company=a.company,this.manager=a.manager,this.title=a.title,this.subject=a.subject,this.keywords=a.keywords,this.category=a.category,this.description=a.description,this.language=a.language,this.revision=a.revision,this.contentStatus=a.contentStatus,this.properties=a.properties,this.calcProperties=a.calcProperties,this._worksheets=[],a.worksheets.forEach(l=>{let{id:c,name:h,state:d}=l,p=a.sheets&&a.sheets.findIndex(g=>g.id===c);(this._worksheets[c]=new r({id:c,name:h,orderNo:p,state:d,workbook:this})).model=l}),this._definedNames.model=a.definedNames,this.views=a.views,this._themes=a.themes,this.media=a.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(n,t,e){"use strict";let r=n("../utils/under-dash"),i=n("../utils/col-cache"),s=n("./range"),o=n("./row"),a=n("./column"),l=n("./enums"),c=n("./image"),h=n("./table"),d=n("./data-validations"),p=n("../utils/encryptor"),{copyStyle:g}=n("../utils/copy-style");t.exports=class{constructor(m){m=m||{},this._workbook=m.workbook,this.id=m.id,this.orderNo=m.orderNo,this.name=m.name,this.state=m.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},m.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!m.pageSetup||!m.pageSetup.fitToWidth&&!m.pageSetup.fitToHeight||m.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},m.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},m.headerFooter),this.dataValidations=new d,this.views=m.views||[],this.autoFilter=m.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(m){if(m===void 0&&(m="sheet"+this.id),this._name!==m){if(typeof m!="string")throw new Error("The name has to be a string.");if(m==="")throw new Error("The name can't be empty.");if(m==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(m))throw new Error(`Worksheet name ${m} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(m))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+m);if(m&&m.length>31&&(console.warn(`Worksheet name ${m} exceeds 31 chars. This will be truncated`),m=m.substring(0,31)),this._workbook._worksheets.find(b=>b&&b.name.toLowerCase()===m.toLowerCase()))throw new Error("Worksheet name already exists: "+m);this._name=m}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){let m=new s;return this._rows.forEach(b=>{if(b){let y=b.dimensions;y&&m.expand(b.number,y.min,b.number,y.max)}}),m}get columns(){return this._columns}set columns(m){this._headerRowCount=m.reduce((x,S)=>{let O=(S.header?1:S.headers&&S.headers.length)||0;return Math.max(x,O)},0);let b=1,y=this._columns=[];m.forEach(x=>{let S=new a(this,b++,!1);y.push(S),S.defn=x})}getColumnKey(m){return this._keys[m]}setColumnKey(m,b){this._keys[m]=b}deleteColumnKey(m){delete this._keys[m]}eachColumnKey(m){r.each(this._keys,m)}getColumn(m){if(typeof m=="string"){let b=this._keys[m];if(b)return b;m=i.l2n(m)}if(this._columns||(this._columns=[]),m>this._columns.length){let b=this._columns.length+1;for(;b<=m;)this._columns.push(new a(this,b++))}return this._columns[m-1]}spliceColumns(m,b){let y=this._rows.length;for(var x=arguments.length,S=new Array(x>2?x-2:0),O=2;O<x;O++)S[O-2]=arguments[O];if(S.length>0)for(let q=0;q<y;q++){let G=[m,b];S.forEach(K=>{G.push(K[q]||null)});let tt=this.getRow(q+1);tt.splice.apply(tt,G)}else this._rows.forEach(q=>{q&&q.splice(m,b)});let D=S.length-b,U=m+b,z=this._columns.length;if(D<0)for(let q=m+S.length;q<=z;q++)this.getColumn(q).defn=this.getColumn(q-D).defn;else if(D>0)for(let q=z;q>=U;q--)this.getColumn(q+D).defn=this.getColumn(q).defn;for(let q=m;q<m+S.length;q++)this.getColumn(q).defn=null;this.workbook.definedNames.spliceColumns(this.name,m,b,S.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let m=0;return this.eachRow(b=>{m=Math.max(m,b.cellCount)}),m}get actualColumnCount(){let m=[],b=0;return this.eachRow(y=>{y.eachCell(x=>{let{col:S}=x;m[S]||(m[S]=!0,b++)})}),b}_commitRow(){}get _lastRowNumber(){let m=this._rows,b=m.length;for(;b>0&&m[b-1]===void 0;)b--;return b}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(m){return this._rows[m-1]}findRows(m,b){return this._rows.slice(m-1,m-1+b)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let m=0;return this.eachRow(()=>{m++}),m}getRow(m){let b=this._rows[m-1];return b||(b=this._rows[m-1]=new o(this,m)),b}getRows(m,b){if(b<1)return;let y=[];for(let x=m;x<m+b;x++)y.push(this.getRow(x));return y}addRow(m){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n",y=this._nextRow,x=this.getRow(y);return x.values=m,this._setStyleOption(y,b[0]==="i"?b:"n"),x}addRows(m){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n",y=[];return m.forEach(x=>{y.push(this.addRow(x,b))}),y}insertRow(m,b){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(m,0,b),this._setStyleOption(m,y),this.getRow(m)}insertRows(m,b){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(m,0,...b),y!=="n")for(let x=0;x<b.length;x++)y[0]==="o"&&this.findRow(b.length+m+x)!==void 0?this._copyStyle(b.length+m+x,m+x,y[1]==="+"):y[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m+x,y[1]==="+");return this.getRows(m,b.length)}_setStyleOption(m){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";b[0]==="o"&&this.findRow(m+1)!==void 0?this._copyStyle(m+1,m,b[1]==="+"):b[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m,b[1]==="+")}_copyStyle(m,b){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2],x=this.getRow(m),S=this.getRow(b);S.style=g(x.style),x.eachCell({includeEmpty:y},(O,D)=>{S.getCell(D).style=g(O.style)}),S.height=x.height}duplicateRow(m,b){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2],x=this._rows[m-1],S=new Array(b).fill(x.values);this.spliceRows(m+1,y?0:b,...S);for(let O=0;O<b;O++){let D=this._rows[m+O];D.style=x.style,D.height=x.height,x.eachCell({includeEmpty:!0},(U,z)=>{D.getCell(z).style=U.style})}}spliceRows(m,b){let y=m+b;for(var x=arguments.length,S=new Array(x>2?x-2:0),O=2;O<x;O++)S[O-2]=arguments[O];let D=S.length,U=D-b,z=this._rows.length,q,G;if(U<0)for(m===z&&(this._rows[z-1]=void 0),q=y;q<=z;q++)if(G=this._rows[q-1],G){let tt=this.getRow(q+U);tt.values=G.values,tt.style=G.style,tt.height=G.height,G.eachCell({includeEmpty:!0},(K,B)=>{tt.getCell(B).style=K.style}),this._rows[q-1]=void 0}else this._rows[q+U-1]=void 0;else if(U>0)for(q=z;q>=y;q--)if(G=this._rows[q-1],G){let tt=this.getRow(q+U);tt.values=G.values,tt.style=G.style,tt.height=G.height,G.eachCell({includeEmpty:!0},(K,B)=>{if(tt.getCell(B).style=K.style,K._value.constructor.name==="MergeValue"){let N=this.getRow(K._row._number+D).getCell(B),Z=K._value._master,w=this.getRow(Z._row._number+D).getCell(Z._column._number);N.merge(w)}})}else this._rows[q+U-1]=void 0;for(q=0;q<D;q++){let tt=this.getRow(m+q);tt.style={},tt.values=S[q]}this.workbook.definedNames.spliceRows(this.name,m,b,D)}eachRow(m,b){if(b||(b=m,m=void 0),m&&m.includeEmpty){let y=this._rows.length;for(let x=1;x<=y;x++)b(this.getRow(x),x)}else this._rows.forEach(y=>{y&&y.hasValues&&b(y,y.number)})}getSheetValues(){let m=[];return this._rows.forEach(b=>{b&&(m[b.number]=b.values)}),m}findCell(m,b){let y=i.getAddress(m,b),x=this._rows[y.row-1];return x?x.findCell(y.col):void 0}getCell(m,b){let y=i.getAddress(m,b);return this.getRow(y.row).getCellEx(y)}mergeCells(){for(var m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];let x=new s(b);this._mergeCellsInternal(x)}mergeCellsWithoutStyle(){for(var m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];let x=new s(b);this._mergeCellsInternal(x,!0)}_mergeCellsInternal(m,b){r.each(this._merges,x=>{if(x.intersects(m))throw new Error("Cannot merge already merged cells")});let y=this.getCell(m.top,m.left);for(let x=m.top;x<=m.bottom;x++)for(let S=m.left;S<=m.right;S++)(x>m.top||S>m.left)&&this.getCell(x,S).merge(y,b);this._merges[y.address]=m}_unMergeMaster(m){let b=this._merges[m.address];if(b){for(let y=b.top;y<=b.bottom;y++)for(let x=b.left;x<=b.right;x++)this.getCell(y,x).unmerge();delete this._merges[m.address]}}get hasMerges(){return r.some(this._merges,Boolean)}unMergeCells(){for(var m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];let x=new s(b);for(let S=x.top;S<=x.bottom;S++)for(let O=x.left;O<=x.right;O++){let D=this.findCell(S,O);D&&(D.type===l.ValueType.Merge?this._unMergeMaster(D.master):this._merges[D.address]&&this._unMergeMaster(D))}}fillFormula(m,b,y){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared",S=i.decode(m),{top:O,left:D,bottom:U,right:z}=S,q=z-D+1,G=i.encodeAddress(O,D),tt=x==="shared",K;K=typeof y=="function"?y:Array.isArray(y)?Array.isArray(y[0])?(N,Z)=>y[N-O][Z-D]:(N,Z)=>y[(N-O)*q+(Z-D)]:()=>{};let B=!0;for(let N=O;N<=U;N++)for(let Z=D;Z<=z;Z++)B?(this.getCell(N,Z).value={shareType:x,formula:b,ref:m,result:K(N,Z)},B=!1):this.getCell(N,Z).value=tt?{sharedFormula:G,result:K(N,Z)}:K(N,Z)}addImage(m,b){let y={type:"image",imageId:m,range:b};this._media.push(new c(this,y))}getImages(){return this._media.filter(m=>m.type==="image")}addBackgroundImage(m){let b={type:"background",imageId:m};this._media.push(new c(this,b))}getBackgroundImageId(){let m=this._media.find(b=>b.type==="background");return m&&m.imageId}protect(m,b){return new Promise(y=>{this.sheetProtection={sheet:!0},b&&"spinCount"in b&&(b.spinCount=Number.isFinite(b.spinCount)?Math.round(Math.max(0,b.spinCount)):1e5),m&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=p.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=b&&"spinCount"in b?b.spinCount:1e5,this.sheetProtection.hashValue=p.convertPasswordToHash(m,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),b&&(this.sheetProtection=Object.assign(this.sheetProtection,b),!m&&"spinCount"in b&&delete this.sheetProtection.spinCount),y()})}unprotect(){this.sheetProtection=null}addTable(m){let b=new h(this,m);return this.tables[m.name]=b,b}getTable(m){return this.tables[m]}removeTable(m){delete this.tables[m]}getTables(){return Object.values(this.tables)}addConditionalFormatting(m){this.conditionalFormattings.push(m)}removeConditionalFormatting(m){typeof m=="number"?this.conditionalFormattings.splice(m,1):this.conditionalFormattings=m instanceof Function?this.conditionalFormattings.filter(m):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(m){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=m}get model(){let m={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(x=>x.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(x=>x.model),conditionalFormattings:this.conditionalFormattings};m.cols=a.toModel(this.columns);let b=m.rows=[],y=m.dimensions=new s;return this._rows.forEach(x=>{let S=x&&x.model;S&&(y.expand(S.number,S.min,S.number,S.max),b.push(S))}),m.merges=[],r.each(this._merges,x=>{m.merges.push(x.range)}),m}_parseRows(m){this._rows=[],m.rows.forEach(b=>{let y=new o(this,b.number);this._rows[y.number-1]=y,y.model=b})}_parseMergeCells(m){r.each(m.mergeCells,b=>{this.mergeCellsWithoutStyle(b)})}set model(m){this.name=m.name,this._columns=a.fromModel(this,m.cols),this._parseRows(m),this._parseMergeCells(m),this.dataValidations=new d(m.dataValidations),this.properties=m.properties,this.pageSetup=m.pageSetup,this.headerFooter=m.headerFooter,this.views=m.views,this.autoFilter=m.autoFilter,this._media=m.media.map(b=>new c(this,b)),this.sheetProtection=m.sheetProtection,this.tables=m.tables.reduce((b,y)=>{let x=new h;return x.model=y,b[y.name]=x,b},{}),this.conditionalFormattings=m.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(n,t,e){"use strict";n("core-js/modules/es.promise"),n("core-js/modules/es.promise.finally"),n("core-js/modules/es.object.assign"),n("core-js/modules/es.object.keys"),n("core-js/modules/es.object.values"),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.async-iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.includes"),n("core-js/modules/es.array.find-index"),n("core-js/modules/es.array.find"),n("core-js/modules/es.string.from-code-point"),n("core-js/modules/es.string.includes"),n("core-js/modules/es.number.is-nan"),n("regenerator-runtime/runtime");let r={Workbook:n("./doc/workbook")},i=n("./doc/enums");Object.keys(i).forEach(s=>{r[s]=i[s]}),t.exports=r},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(n,t,e){"use strict";let r=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");e.bufferToString=function(i){return typeof i=="string"?i:r?r.decode(i):i.toString()}},{}],17:[function(n,t,e){"use strict";let r=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:i}=n("buffer");e.stringToBuffer=function(s){return typeof s!="string"?s:r?i.from(r.encode(s).buffer):i.from(s)}},{buffer:220}],18:[function(n,t,e){"use strict";let r=n("./under-dash"),i=n("./col-cache");t.exports=class{constructor(s){this.template=s,this.sheets={}}addCell(s){this.addCellEx(i.decodeEx(s))}getCell(s){return this.findCellEx(i.decodeEx(s),!0)}findCell(s){return this.findCellEx(i.decodeEx(s),!1)}findCellAt(s,o,a){let l=this.sheets[s],c=l&&l[o];return c&&c[a]}addCellEx(s){if(s.top)for(let o=s.top;o<=s.bottom;o++)for(let a=s.left;a<=s.right;a++)this.getCellAt(s.sheetName,o,a);else this.findCellEx(s,!0)}getCellEx(s){return this.findCellEx(s,!0)}findCellEx(s,o){let a=this.findSheet(s,o),l=this.findSheetRow(a,s,o);return this.findRowCell(l,s,o)}getCellAt(s,o,a){let l=this.sheets[s]||(this.sheets[s]=[]),c=l[o]||(l[o]=[]);return c[a]||(c[a]={sheetName:s,address:i.n2l(a)+o,row:o,col:a})}removeCellEx(s){let o=this.findSheet(s);if(!o)return;let a=this.findSheetRow(o,s);a&&delete a[s.col]}forEachInSheet(s,o){let a=this.sheets[s];a&&a.forEach((l,c)=>{l&&l.forEach((h,d)=>{h&&o(h,c,d)})})}forEach(s){r.each(this.sheets,(o,a)=>{this.forEachInSheet(a,s)})}map(s){let o=[];return this.forEach(a=>{o.push(s(a))}),o}findSheet(s,o){let a=s.sheetName;return this.sheets[a]?this.sheets[a]:o?this.sheets[a]=[]:void 0}findSheetRow(s,o,a){let{row:l}=o;return s&&s[l]?s[l]:a?s[l]=[]:void 0}findRowCell(s,o,a){let{col:l}=o;return s&&s[l]?s[l]:a?s[l]=this.template?Object.assign(o,JSON.parse(JSON.stringify(this.template))):o:void 0}spliceRows(s,o,a,l){let c=this.sheets[s];if(c){let h=[];for(let d=0;d<l;d++)h.push([]);c.splice(o,a,...h)}}spliceColumns(s,o,a,l){let c=this.sheets[s];if(c){let h=[];for(let d=0;d<l;d++)h.push(null);r.each(c,d=>{d.splice(o,a,...h)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(n,t,e){"use strict";let r=/^[A-Z]+\d+$/,i={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:s=>s<=26?1:s<=676?2:3,_fill(s){let o,a,l,c,h,d=1;if(s>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&s>=1){for(;d<=26;)o=this._dictionary[d-1],this._n2l[d]=o,this._l2n[o]=d,d++;this._l2nFill=1}if(this._l2nFill<2&&s>=2){for(d=27;d<=702;)a=d-27,l=a%26,c=Math.floor(a/26),o=this._dictionary[c]+this._dictionary[l],this._n2l[d]=o,this._l2n[o]=d,d++;this._l2nFill=2}if(this._l2nFill<3&&s>=3){for(d=703;d<=16384;)a=d-703,l=a%26,c=Math.floor(a/26)%26,h=Math.floor(a/676),o=this._dictionary[h]+this._dictionary[c]+this._dictionary[l],this._n2l[d]=o,this._l2n[o]=d,d++;this._l2nFill=3}},l2n(s){if(this._l2n[s]||this._fill(s.length),!this._l2n[s])throw new Error("Out of bounds. Invalid column letter: "+s);return this._l2n[s]},n2l(s){if(s<1||s>16384)throw new Error(s+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[s]||this._fill(this._level(s)),this._n2l[s]},_hash:{},validateAddress(s){if(!r.test(s))throw new Error("Invalid Address: "+s);return!0},decodeAddress(s){let o=s.length<5&&this._hash[s];if(o)return o;let a=!1,l="",c=0,h=!1,d="",p=0;for(let m,b=0;b<s.length;b++)if(m=s.charCodeAt(b),!h&&m>=65&&m<=90)a=!0,l+=s[b],c=26*c+m-64;else if(m>=48&&m<=57)h=!0,d+=s[b],p=10*p+m-48;else if(h&&a&&m!==36)break;if(a){if(c>16384)throw new Error("Out of bounds. Invalid column letter: "+l)}else c=void 0;h||(p=void 0);let g={address:s=l+d,col:c,row:p,$col$row:`$${l}$${d}`};return c<=100&&p<=100&&(this._hash[s]=g,this._hash[g.$col$row]=g),g},getAddress(s,o){if(o){let a=this.n2l(o)+s;return this.decodeAddress(a)}return this.decodeAddress(s)},decode(s){let o=s.split(":");if(o.length===2){let a=this.decodeAddress(o[0]),l=this.decodeAddress(o[1]),c={top:Math.min(a.row,l.row),left:Math.min(a.col,l.col),bottom:Math.max(a.row,l.row),right:Math.max(a.col,l.col)};return c.tl=this.n2l(c.left)+c.top,c.br=this.n2l(c.right)+c.bottom,c.dimensions=`${c.tl}:${c.br}`,c}return this.decodeAddress(s)},decodeEx(s){let o=s.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),a=o[1]||o[2],l=o[3],c=l.split(":");if(c.length>1){let d=this.decodeAddress(c[0]),p=this.decodeAddress(c[1]),g=Math.min(d.row,p.row),m=Math.min(d.col,p.col),b=Math.max(d.row,p.row),y=Math.max(d.col,p.col);return d=this.n2l(m)+g,p=this.n2l(y)+b,{top:g,left:m,bottom:b,right:y,sheetName:a,tl:{address:d,col:m,row:g,$col$row:`$${this.n2l(m)}$${g}`,sheetName:a},br:{address:p,col:y,row:b,$col$row:`$${this.n2l(y)}$${b}`,sheetName:a},dimensions:`${d}:${p}`}}if(l.startsWith("#"))return a?{sheetName:a,error:l}:{error:l};let h=this.decodeAddress(l);return a?{sheetName:a,...h}:h},encodeAddress:(s,o)=>i.n2l(o)+s,encode(){switch(arguments.length){case 2:return i.encodeAddress(arguments[0],arguments[1]);case 4:return`${i.encodeAddress(arguments[0],arguments[1])}:${i.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(s,o){let[a,l,,c,h]=s,[d,p]=o;return d>=a&&d<=c&&p>=l&&p<=h}};t.exports=i},{}],20:[function(n,t,e){"use strict";let r=(s,o)=>({...s,...o.reduce((a,l)=>(s[l]&&(a[l]={...s[l]}),a),{})}),i=function(s,o,a){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];s[a]&&(o[a]=r(s[a],l))};e.copyStyle=s=>{if(!s)return s;if(o=s,Object.keys(o).length===0)return{};var o;let a={...s};return i(s,a,"font",["color"]),i(s,a,"alignment"),i(s,a,"protection"),s.border&&(i(s,a,"border"),i(s.border,a.border,"top",["color"]),i(s.border,a.border,"left",["color"]),i(s.border,a.border,"bottom",["color"]),i(s.border,a.border,"right",["color"]),i(s.border,a.border,"diagonal",["color"])),s.fill&&(i(s,a,"fill",["fgColor","bgColor","center"]),s.fill.stops&&(a.fill.stops=s.fill.stops.map(l=>r(l,["color"])))),a}},{}],21:[function(n,t,e){(function(r){(function(){"use strict";let i=n("crypto"),s={hash(o){let a=i.createHash(o);for(var l=arguments.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];return a.update(r.concat(c)),a.digest()},convertPasswordToHash(o,a,l,c){if(a=a.toLowerCase(),i.getHashes().indexOf(a)<0)throw new Error(`Hash algorithm '${a}' not supported!`);let h=r.from(o,"utf16le"),d=this.hash(a,r.from(l,"base64"),h);for(let p=0;p<c;p++){let g=r.alloc(4);g.writeUInt32LE(p,0),d=this.hash(a,d,g)}return d.toString("base64")},randomBytes:o=>i.randomBytes(o)};t.exports=s}).call(this)}).call(this,n("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(n,t,e){"use strict";let{SaxesParser:r}=n("saxes"),{PassThrough:i}=n("readable-stream"),{bufferToString:s}=n("./browser-buffer-decode");t.exports=async function*(o){o.pipe&&!o[Symbol.asyncIterator]&&(o=o.pipe(new i));let a=new r,l;a.on("error",h=>{l=h});let c=[];a.on("opentag",h=>c.push({eventType:"opentag",value:h})),a.on("text",h=>c.push({eventType:"text",value:h})),a.on("closetag",h=>c.push({eventType:"closetag",value:h}));for await(let h of o){if(a.write(s(h)),l)throw l;yield c,c=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(n,t,e){"use strict";let r=n("./col-cache"),i=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,s=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;t.exports={slideFormula:function(o,a,l){let c=r.decode(a),h=r.decode(l);return o.replace(i,(d,p,g,m,b)=>{if(b)return d;let y=s.exec(m);if(y){let x=y[1],S=y[2].toUpperCase(),O=y[3],D=y[4];if(S.length>3||S.length===3&&S>"XFD")return d;let U=r.l2n(S),z=parseInt(D,10);return x||(U+=h.col-c.col),O||(z+=h.row-c.row),(p||"")+(x||"")+r.n2l(U)+(O||"")+z}return d})}}},{"./col-cache":19}],24:[function(n,t,e){(function(r,i){(function(){"use strict";let s=n("readable-stream"),o=n("./utils"),a=n("./string-buf");class l{constructor(m,b){this._data=m,this._encoding=b}get length(){return this.toBuffer().length}copy(m,b,y,x){return this.toBuffer().copy(m,b,y,x)}toBuffer(){return this._buffer||(this._buffer=i.from(this._data,this._encoding)),this._buffer}}class c{constructor(m){this._data=m}get length(){return this._data.length}copy(m,b,y,x){return this._data._buf.copy(m,b,y,x)}toBuffer(){return this._data.toBuffer()}}class h{constructor(m){this._data=m}get length(){return this._data.length}copy(m,b,y,x){this._data.copy(m,b,y,x)}toBuffer(){return this._data}}class d{constructor(m){this.size=m,this.buffer=i.alloc(m),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;let m=i.alloc(this.iWrite-this.iRead);return this.buffer.copy(m,0,this.iRead,this.iWrite),m}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(m){let b;return m===0?null:m===void 0||m>=this.length?(b=this.toBuffer(),this.iRead=this.iWrite,b):(b=i.alloc(m),this.buffer.copy(b,0,this.iRead,m),this.iRead+=m,b)}write(m,b,y){let x=Math.min(y,this.size-this.iWrite);return m.copy(this.buffer,this.iWrite,b,b+x),this.iWrite+=x,x}}let p=function(g){g=g||{},this.bufSize=g.bufSize||1048576,this.buffers=[],this.batch=g.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};o.inherits(p,s.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return i.concat(this.buffers.map(g=>g.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){let m=this.buffers[this.buffers.length-1];if(!m.full)return m}let g=new d(this.bufSize);return this.buffers.push(g),g},async _pipe(g){await Promise.all(this.pipes.map(function(m){return new Promise(b=>{m.write(g.toBuffer(),()=>{b()})})}))},_writeToBuffers(g){let m=0,b=g.length;for(;m<b;)m+=this._getWritableBuffer().write(g,m,b-m)},async write(g,m,b){let y;if(m instanceof Function&&(b=m,m="utf8"),b=b||o.nop,g instanceof a)y=new c(g);else if(g instanceof i)y=new h(g);else{if(!(typeof g=="string"||g instanceof String||g instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");y=new l(g,m)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(y);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(y),r.nextTick(b)):(await this._pipe(y),b());else this.paused||this.emit("data",y.toBuffer()),this._writeToBuffers(y),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(g,m,b){let y=x=>{x?b(x):(this._flush(),this.pipes.forEach(S=>{S.end()}),this.emit("finish"))};g?this.write(g,m,y):y()},read(g){let m;if(g){for(m=[];g&&this.buffers.length&&!this.buffers[0].eod;){let b=this.buffers[0],y=b.read(g);g-=y.length,m.push(y),b.eod&&b.full&&this.buffers.shift()}return i.concat(m)}return m=this.buffers.map(b=>b.toBuffer()).filter(Boolean),this.buffers=[],i.concat(m)},setEncoding(g){this.encoding=g},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(g){this.pipes.push(g),!this.paused&&this.buffers.length&&this.end()},unpipe(g){this.pipes=this.pipes.filter(m=>m!==g)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),t.exports=p}).call(this)}).call(this,n("_process"),n("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(n,t,e){(function(r){(function(){"use strict";t.exports=class{constructor(i){this._buf=r.alloc(i&&i.size||16384),this._encoding=i&&i.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=r.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(i){i=i||0,this._buffer=void 0,this._inPos=i}_grow(i){let s=2*this._buf.length;for(;s<i;)s*=2;let o=r.alloc(s);this._buf.copy(o,0),this._buf=o}addText(i){this._buffer=void 0;let s=this._inPos+this._buf.write(i,this._inPos,this._encoding);for(;s>=this._buf.length-4;)this._grow(this._inPos+i.length),s=this._inPos+this._buf.write(i,this._inPos,this._encoding);this._inPos=s}addStringBuf(i){i.length&&(this._buffer=void 0,this.length+i.length>this.capacity&&this._grow(this.length+i.length),i._buf.copy(this._buf,this._inPos,0,i.length),this._inPos+=i.length)}}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:220}],26:[function(n,t,e){"use strict";let{toString:r}=Object.prototype,i=/["&<>]/,s={each:function(o,a){o&&(Array.isArray(o)?o.forEach(a):Object.keys(o).forEach(l=>{a(o[l],l)}))},some:function(o,a){return!!o&&(Array.isArray(o)?o.some(a):Object.keys(o).some(l=>a(o[l],l)))},every:function(o,a){return!o||(Array.isArray(o)?o.every(a):Object.keys(o).every(l=>a(o[l],l)))},map:function(o,a){return o?Array.isArray(o)?o.map(a):Object.keys(o).map(l=>a(o[l],l)):[]},keyBy:(o,a)=>o.reduce((l,c)=>(l[c[a]]=c,l),{}),isEqual:function(o,a){let l=typeof o,c=typeof a,h=Array.isArray(o),d=Array.isArray(a),p;if(l!==c)return!1;switch(typeof o){case"object":if(h||d)return!(!h||!d)&&o.length===a.length&&o.every((g,m)=>{let b=a[m];return s.isEqual(g,b)});if(o===null||a===null)return o===a;if(p=Object.keys(o),Object.keys(a).length!==p.length)return!1;for(let g of p)if(!a.hasOwnProperty(g))return!1;return s.every(o,(g,m)=>{let b=a[m];return s.isEqual(g,b)});default:return o===a}},escapeHtml(o){let a=i.exec(o);if(!a)return o;let l="",c="",h=0,d=a.index;for(;d<o.length;d++){switch(o.charAt(d)){case'"':c="&quot;";break;case"&":c="&amp;";break;case"'":c="&apos;";break;case"<":c="&lt;";break;case">":c="&gt;";break;default:continue}h!==d&&(l+=o.substring(h,d)),h=d+1,l+=c}return h!==d?l+o.substring(h,d):l},strcmp:(o,a)=>o<a?-1:o>a?1:0,isUndefined:o=>r.call(o)==="[object Undefined]",isObject:o=>r.call(o)==="[object Object]",deepMerge(){let o=arguments[0]||{},{length:a}=arguments,l,c,h;function d(p,g){l=o[g],h=Array.isArray(p),s.isObject(p)||h?(h?(h=!1,c=l&&Array.isArray(l)?l:[]):c=l&&s.isObject(l)?l:{},o[g]=s.deepMerge(c,p)):s.isUndefined(p)||(o[g]=p)}for(let p=0;p<a;p++)s.each(arguments[p],d);return o}};t.exports=s},{}],27:[function(n,t,e){(function(r,i){(function(){"use strict";let s=n("fs"),o=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,a={nop(){},promiseImmediate:l=>new Promise(c=>{r.setImmediate?i(()=>{c(l)}):setTimeout(()=>{c(l)},1)}),inherits:function(l,c,h,d){l.super_=c,d||(d=h,h=null),h&&Object.keys(h).forEach(g=>{Object.defineProperty(l,g,Object.getOwnPropertyDescriptor(h,g))});let p={constructor:{value:l,enumerable:!1,writable:!1,configurable:!0}};d&&Object.keys(d).forEach(g=>{p[g]=Object.getOwnPropertyDescriptor(d,g)}),l.prototype=Object.create(c.prototype,p)},dateToExcel:(l,c)=>25569+l.getTime()/864e5-(c?1462:0),excelToDate(l,c){let h=Math.round(24*(l-25569+(c?1462:0))*3600*1e3);return new Date(h)},parsePath(l){let c=l.lastIndexOf("/");return{path:l.substring(0,c),name:l.substring(c+1)}},getRelsPath(l){let c=a.parsePath(l);return`${c.path}/_rels/${c.name}.rels`},xmlEncode(l){let c=o.exec(l);if(!c)return l;let h="",d="",p=0,g=c.index;for(;g<l.length;g++){let m=l.charCodeAt(g);switch(m){case 34:d="&quot;";break;case 38:d="&amp;";break;case 39:d="&apos;";break;case 60:d="&lt;";break;case 62:d="&gt;";break;case 127:d="";break;default:if(m<=31&&(m<=8||m>=11&&m!==13)){d="";break}continue}p!==g&&(h+=l.substring(p,g)),p=g+1,d&&(h+=d)}return p!==g?h+l.substring(p,g):h},xmlDecode:l=>l.replace(/&([a-z]*);/g,c=>{switch(c){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return c}}),validInt(l){let c=parseInt(l,10);return Number.isNaN(c)?0:c},isDateFmt(l){return l?(l=(l=l.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:l=>new Promise(c=>{s.access(l,s.constants.F_OK,h=>{c(!h)})})},toIsoDateString:l=>l.toIsoString().subsstr(0,10),parseBoolean:l=>l===!0||l==="true"||l===1||l==="1"};t.exports=a}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},n("timers").setImmediate)},{fs:216,timers:523}],28:[function(n,t,e){"use strict";let r=n("./under-dash"),i=n("./utils");function s(l,c,h){l.push(` ${c}="${i.xmlEncode(h.toString())}"`)}function o(l,c){if(c){let h=[];r.each(c,(d,p)=>{d!==void 0&&s(h,p,d)}),l.push(h.join(""))}}class a{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(c){let h=this._xml;h.push("<?xml"),o(h,c),h.push(`?>
`)}openNode(c,h){let d=this.tos,p=this._xml;d&&this.open&&p.push(">"),this._stack.push(c),p.push("<"),p.push(c),o(p,h),this.leaf=!0,this.open=!0}addAttribute(c,h){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");h!==void 0&&s(this._xml,c,h)}addAttributes(c){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");o(this._xml,c)}writeText(c){let h=this._xml;this.open&&(h.push(">"),this.open=!1),this.leaf=!1,h.push(i.xmlEncode(c.toString()))}writeXml(c){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(c)}closeNode(){let c=this._stack.pop(),h=this._xml;this.leaf?h.push("/>"):(h.push("</"),h.push(c),h.push(">")),this.open=!1,this.leaf=!1}leafNode(c,h,d){this.openNode(c,h),d!==void 0&&this.writeText(d),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){let c=this._rollbacks.pop();this._xml.length>c.xml&&this._xml.splice(c.xml,this._xml.length-c.xml),this._stack.length>c.stack&&this._stack.splice(c.stack,this._stack.length-c.stack),this.leaf=c.leaf,this.open=c.open}get xml(){return this.closeAll(),this._xml.join("")}}a.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},t.exports=a},{"./under-dash":26,"./utils":27}],29:[function(n,t,e){(function(r){(function(){"use strict";let i=n("events"),s=n("jszip"),o=n("./stream-buf"),{stringToBuffer:a}=n("./browser-buffer-encode");class l extends i.EventEmitter{constructor(h){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},h),this.zip=new s,this.stream=new o}append(h,d){d.hasOwnProperty("base64")&&d.base64?this.zip.file(d.name,h,{base64:!0}):(r.browser&&typeof h=="string"&&(h=a(h)),this.zip.file(d.name,h))}async finalize(){let h=await this.zip.generateAsync(this.options);this.stream.end(h),this.emit("finish")}read(h){return this.stream.read(h)}setEncoding(h){return this.stream.setEncoding(h)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(h,d){return this.stream.pipe(h,d)}unpipe(h){return this.stream.unpipe(h)}unshift(h){return this.stream.unshift(h)}wrap(h){return this.stream.wrap(h)}}t.exports={ZipWriter:l}}).call(this)}).call(this,n("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(n,t,e){"use strict";t.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},28:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'yyyy"\u5E74"m"\u6708"d"\u65E5"',"ja-jp":'yyyy"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":'yyyy"\uB144" mm"\uC6D4" dd"\uC77C"'},32:{"zh-tw":'hh"\u6642"mm"\u5206"',"zh-cn":'h"\u65F6"mm"\u5206"',"ja-jp":'h"\u6642"mm"\u5206"',"ko-kr":'h"\uC2DC" mm"\uBD84"'},33:{"zh-tw":'hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'h"\u65F6"mm"\u5206"ss"\u79D2"',"ja-jp":'h"\u6642"mm"\u5206"ss"\u79D2"',"ko-kr":'h"\uC2DC" mm"\uBD84" ss"\uCD08"'},34:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"',"ja-jp":'yyyy"\u5E74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"ss"\u79D2"',"ja-jp":'m"\u6708"d"\u65E5"',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},51:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},52:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":'yyyy"\u5E74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'m"\u6708"d"\u65E5"',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},55:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"',"ja-jp":'yyyy"\u5E74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"ss"\u79D2"',"ja-jp":'m"\u6708"d"\u65E5"',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},58:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(n,t,e){"use strict";t.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(n,t,e){"use strict";let r=n("../../utils/parse-sax"),i=n("../../utils/xml-stream");class s{prepare(){}render(){}parseOpen(a){}parseText(a){}parseClose(a){}reconcile(a,l){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(a=>{a instanceof s?a.reset():a.xform&&a.xform.reset()})}mergeModel(a){this.model=Object.assign(this.model||{},a)}async parse(a){for await(let l of a)for(let{eventType:c,value:h}of l)if(c==="opentag")this.parseOpen(h);else if(c==="text")this.parseText(h);else if(c==="closetag"&&!this.parseClose(h.name))return this.model;return this.model}async parseStream(a){return this.parse(r(a))}get xml(){return this.toXml(this.model)}toXml(a){let l=new i;return this.render(l,a),l.xml}static toAttribute(a,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(a===void 0){if(c)return l}else if(c||a!==l)return a.toString()}static toStringAttribute(a,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return s.toAttribute(a,l,c)}static toStringValue(a,l){return a===void 0?l:a}static toBoolAttribute(a,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(a===void 0){if(c)return l}else if(c||a!==l)return a?"1":"0"}static toBoolValue(a,l){return a===void 0?l:a==="1"}static toIntAttribute(a,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return s.toAttribute(a,l,c)}static toIntValue(a,l){return a===void 0?l:parseInt(a,10)}static toFloatAttribute(a,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return s.toAttribute(a,l,c)}static toFloatValue(a,l){return a===void 0?l:parseFloat(a)}}t.exports=s},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("../../../utils/col-cache");function s(a){try{return i.decodeEx(a),!0}catch{return!1}}function o(a){let l=[],c=!1,h="";return a.split(",").forEach(d=>{if(!d)return;let p=(d.match(/'/g)||[]).length;if(!p)return void(c?h+=d+",":s(d)&&l.push(d));let g=p%2==0;!c&&g&&s(d)?l.push(d):c&&!g?(c=!1,s(h+d)&&l.push(h+d),h=""):(c=!0,h+=d+",")}),l}t.exports=class extends r{render(a,l){a.openNode("definedName",{name:l.name,localSheetId:l.localSheetId}),a.writeText(l.ranges.join(",")),a.closeNode()}parseOpen(a){switch(a.name){case"definedName":return this._parsedName=a.attributes.name,this._parsedLocalSheetId=a.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(a){this._parsedText.push(a)}parseClose(){return this.model={name:this._parsedName,ranges:o(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(n,t,e){"use strict";let r=n("../../../utils/utils"),i=n("../base-xform");t.exports=class extends i{render(s,o){s.leafNode("sheet",{sheetId:o.id,name:o.name,state:o.state,"r:id":o.rId})}parseOpen(s){return s.name==="sheet"&&(this.model={name:r.xmlDecode(s.attributes.name),id:parseInt(s.attributes.sheetId,10),state:s.attributes.state,rId:s.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{render(i,s){i.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:s.fullCalcOnLoad?1:void 0})}parseOpen(i){return i.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{render(i,s){i.leafNode("workbookPr",{date1904:s.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(i){return i.name==="workbookPr"&&(this.model={date1904:i.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{render(i,s){let o={xWindow:s.x||0,yWindow:s.y||0,windowWidth:s.width||12e3,windowHeight:s.height||24e3,firstSheet:s.firstSheet,activeTab:s.activeTab};s.visibility&&s.visibility!=="visible"&&(o.visibility=s.visibility),i.leafNode("workbookView",o)}parseOpen(i){if(i.name==="workbookView"){let s=this.model={},o=function(l,c,h){let d=c!==void 0?s[l]=c:h;d!==void 0&&(s[l]=d)},a=function(l,c,h){let d=c!==void 0?s[l]=parseInt(c,10):h;d!==void 0&&(s[l]=d)};return a("x",i.attributes.xWindow,0),a("y",i.attributes.yWindow,0),a("width",i.attributes.windowWidth,25e3),a("height",i.attributes.windowHeight,1e4),o("visibility",i.attributes.visibility,"visible"),a("activeTab",i.attributes.activeTab,void 0),a("firstSheet",i.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../../../utils/col-cache"),s=n("../../../utils/xml-stream"),o=n("../base-xform"),a=n("../static-xform"),l=n("../list-xform"),c=n("./defined-name-xform"),h=n("./sheet-xform"),d=n("./workbook-view-xform"),p=n("./workbook-properties-xform"),g=n("./workbook-calc-properties-xform");class m extends o{constructor(){super(),this.map={fileVersion:m.STATIC_XFORMS.fileVersion,workbookPr:new p,bookViews:new l({tag:"bookViews",count:!1,childXform:new d}),sheets:new l({tag:"sheets",count:!1,childXform:new h}),definedNames:new l({tag:"definedNames",count:!1,childXform:new c}),calcPr:new g}}prepare(y){y.sheets=y.worksheets;let x=[],S=0;y.sheets.forEach(O=>{if(O.pageSetup&&O.pageSetup.printArea&&O.pageSetup.printArea.split("&&").forEach(D=>{let U=D.split(":"),z={name:"_xlnm.Print_Area",ranges:[`'${O.name}'!$${U[0]}:$${U[1]}`],localSheetId:S};x.push(z)}),O.pageSetup&&(O.pageSetup.printTitlesRow||O.pageSetup.printTitlesColumn)){let D=[];if(O.pageSetup.printTitlesColumn){let z=O.pageSetup.printTitlesColumn.split(":");D.push(`'${O.name}'!$${z[0]}:$${z[1]}`)}if(O.pageSetup.printTitlesRow){let z=O.pageSetup.printTitlesRow.split(":");D.push(`'${O.name}'!$${z[0]}:$${z[1]}`)}let U={name:"_xlnm.Print_Titles",ranges:D,localSheetId:S};x.push(U)}S++}),x.length&&(y.definedNames=y.definedNames.concat(x)),(y.media||[]).forEach((O,D)=>{O.name=O.type+(D+1)})}render(y,x){y.openXml(s.StdDocAttributes),y.openNode("workbook",m.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(y),this.map.workbookPr.render(y,x.properties),this.map.bookViews.render(y,x.views),this.map.sheets.render(y,x.sheets),this.map.definedNames.render(y,x.definedNames),this.map.calcPr.render(y,x.calcProperties),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"workbook":return!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(y){let x=(y.workbookRels||[]).reduce((z,q)=>(z[q.Id]=q,z),{}),S=[],O,D=0;(y.sheets||[]).forEach(z=>{let q=x[z.rId];q&&(O=y.worksheetHash["xl/"+q.Target.replace(/^(\s|\/xl\/)+/,"")],O&&(O.name=z.name,O.id=z.id,O.state=z.state,S[D++]=O))});let U=[];r.each(y.definedNames,z=>{if(z.name==="_xlnm.Print_Area"){if(O=S[z.localSheetId],O){O.pageSetup||(O.pageSetup={});let q=i.decodeEx(z.ranges[0]);O.pageSetup.printArea=O.pageSetup.printArea?`${O.pageSetup.printArea}&&${q.dimensions}`:q.dimensions}}else if(z.name==="_xlnm.Print_Titles"){if(O=S[z.localSheetId],O){O.pageSetup||(O.pageSetup={});let q=z.ranges.join(","),G=/\$/g,tt=/\$\d+:\$\d+/,K=q.match(tt);if(K&&K.length){let Z=K[0];O.pageSetup.printTitlesRow=Z.replace(G,"")}let B=/\$[A-Z]+:\$[A-Z]+/,N=q.match(B);if(N&&N.length){let Z=N[0];O.pageSetup.printTitlesColumn=Z.replace(G,"")}}}else U.push(z)}),y.definedNames=U,y.media.forEach((z,q)=>{z.index=q})}}m.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},m.STATIC_XFORMS={fileVersion:new a({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},t.exports=m},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(n,t,e){"use strict";let r=n("../strings/rich-text-xform"),i=n("../../../utils/utils"),s=n("../base-xform"),o=t.exports=function(a){this.model=a};i.inherits(o,s,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new r),this._richTextXform},render(a,l){l=l||this.model,a.openNode("comment",{ref:l.ref,authorId:0}),a.openNode("text"),l&&l.note&&l.note.texts&&l.note.texts.forEach(c=>{this.richTextXform.render(a,c)}),a.closeNode(),a.closeNode()},parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"comment":return this.model={type:"note",note:{texts:[]},...a.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(a),!0;default:return!1}},parseText(a){this.parser&&this.parser.parseText(a)},parseClose(a){switch(a){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(a),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(n,t,e){"use strict";let r=n("../../../utils/xml-stream"),i=n("../../../utils/utils"),s=n("../base-xform"),o=n("./comment-xform"),a=t.exports=function(){this.map={comment:new o}};i.inherits(a,s,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(l,c){c=c||this.model,l.openXml(r.StdDocAttributes),l.openNode("comments",a.COMMENTS_ATTRIBUTES),l.openNode("authors"),l.leafNode("author",null,"Author"),l.closeNode(),l.openNode("commentList"),c.comments.forEach(h=>{this.map.comment.render(l,h)}),l.closeNode(),l.closeNode()},parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(l),!0;default:return!1}},parseText(l){this.parser&&this.parser.parseText(l)},parseClose(l){switch(l){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(l),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(n,t,e){"use strict";let r=n("../../base-xform");t.exports=class extends r{constructor(i){super(),this._model=i}get tag(){return this._model&&this._model.tag}render(i,s,o){(s===o[2]||this.tag==="x:SizeWithCells"&&s===o[1])&&i.leafNode(this.tag)}parseOpen(i){switch(i.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(n,t,e){"use strict";let r=n("../../base-xform");t.exports=class extends r{constructor(i){super(),this._model=i}get tag(){return this._model&&this._model.tag}render(i,s){i.leafNode(this.tag,null,s)}parseOpen(i){switch(i.name){case this.tag:return this.text="",!0;default:return!1}}parseText(i){this.text=i}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"x:Anchor"}getAnchorRect(i){let s=Math.floor(i.left),o=Math.floor(68*(i.left-s)),a=Math.floor(i.top),l=Math.floor(18*(i.top-a)),c=Math.floor(i.right),h=Math.floor(68*(i.right-c)),d=Math.floor(i.bottom);return[s,o,a,l,c,h,d,Math.floor(18*(i.bottom-d))]}getDefaultRect(i){let s=i.col,o=Math.max(i.row-2,0);return[s,6,o,14,s+2,2,o+4,16]}render(i,s){let o=s.anchor?this.getAnchorRect(s.anchor):this.getDefaultRect(s.refAddress);i.leafNode("x:Anchor",null,o.join(", "))}parseOpen(i){switch(i.name){case this.tag:return this.text="",!0;default:return!1}}parseText(i){this.text=i}parseClose(){return!1}}},{"../base-xform":32}],44:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("./vml-anchor-xform"),s=n("./style/vml-protection-xform"),o=n("./style/vml-position-xform"),a=["twoCells","oneCells","absolute"];t.exports=class extends r{constructor(){super(),this.map={"x:Anchor":new i,"x:Locked":new s({tag:"x:Locked"}),"x:LockText":new s({tag:"x:LockText"}),"x:SizeWithCells":new o({tag:"x:SizeWithCells"}),"x:MoveWithCells":new o({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(l,c){let{protection:h,editAs:d}=c.note;l.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(l,d,a),this.map["x:SizeWithCells"].render(l,d,a),this.map["x:Anchor"].render(l,c),this.map["x:Locked"].render(l,h.locked),l.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(l,h.lockText),l.leafNode("x:Row",null,c.refAddress.row-1),l.leafNode("x:Column",null,c.refAddress.col-1),l.closeNode()}parseOpen(l){switch(l.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){let l=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),c=Object.keys(l).length;this.model.editAs=a[c],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(n,t,e){"use strict";let r=n("../../../utils/xml-stream"),i=n("../base-xform"),s=n("./vml-shape-xform");class o extends i{constructor(){super(),this.map={"v:shape":new s}}get tag(){return"xml"}render(l,c){l.openXml(r.StdDocAttributes),l.openNode(this.tag,o.DRAWING_ATTRIBUTES),l.openNode("o:shapelayout",{"v:ext":"edit"}),l.leafNode("o:idmap",{"v:ext":"edit",data:1}),l.closeNode(),l.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),l.leafNode("v:stroke",{joinstyle:"miter"}),l.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),l.closeNode(),c.comments.forEach((h,d)=>{this.map["v:shape"].render(l,h,d)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(l){case this.tag:return!1;default:return!0}}reconcile(l,c){l.anchors.forEach(h=>{h.br?this.map["xdr:twoCellAnchor"].reconcile(h,c):this.map["xdr:oneCellAnchor"].reconcile(h,c)})}}o.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},t.exports=o},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("./vml-textbox-xform"),s=n("./vml-client-data-xform");class o extends r{constructor(){super(),this.map={"v:textbox":new i,"x:ClientData":new s}}get tag(){return"v:shape"}render(l,c,h){l.openNode("v:shape",o.V_SHAPE_ATTRIBUTES(c,h)),l.leafNode("v:fill",{color2:"infoBackground [80]"}),l.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),l.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(l,c),this.map["x:ClientData"].render(l,c),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset(),this.model={margins:{insetmode:l.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}o.V_SHAPE_ATTRIBUTES=(a,l)=>({id:"_x0000_s"+(1025+l),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":a.note.margins&&a.note.margins.insetmode}),t.exports=o},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"v:textbox"}conversionUnit(i,s,o){return`${parseFloat(i)*s.toFixed(2)}${o}`}reverseConversionUnit(i){return(i||"").split(",").map(s=>Number(parseFloat(this.conversionUnit(parseFloat(s),.1,"")).toFixed(2)))}render(i,s){let o={style:"mso-direction-alt:auto"};if(s&&s.note){let{inset:a}=s.note&&s.note.margins;Array.isArray(a)&&(a=a.map(l=>this.conversionUnit(l,10,"mm")).join(",")),a&&(o.inset=a)}i.openNode("v:textbox",o),i.leafNode("div",{style:"text-align:left"}),i.closeNode()}parseOpen(i){switch(i.name){case this.tag:return this.model={inset:this.reverseConversionUnit(i.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(i){switch(i){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(n,t,e){"use strict";let r=n("./base-xform");t.exports=class extends r{createNewModel(i){return{}}parseOpen(i){return this.parser=this.parser||this.map[i.name],this.parser?(this.parser.parseOpen(i),!0):i.name===this.tag&&(this.model=this.createNewModel(i),!0)}parseText(i){this.parser&&this.parser.parseText(i)}onParserClose(i,s){this.model[i]=s.model}parseClose(i){return this.parser?(this.parser.parseClose(i)||(this.onParserClose(i,this.parser),this.parser=void 0),!0):i!==this.tag}}},{"./base-xform":32}],49:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{render(i,s){i.openNode("HeadingPairs"),i.openNode("vt:vector",{size:2,baseType:"variant"}),i.openNode("vt:variant"),i.leafNode("vt:lpstr",void 0,"Worksheets"),i.closeNode(),i.openNode("vt:variant"),i.leafNode("vt:i4",void 0,s.length),i.closeNode(),i.closeNode(),i.closeNode()}parseOpen(i){return i.name==="HeadingPairs"}parseText(){}parseClose(i){return i!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{render(i,s){i.openNode("TitlesOfParts"),i.openNode("vt:vector",{size:s.length,baseType:"lpstr"}),s.forEach(o=>{i.leafNode("vt:lpstr",void 0,o.name)}),i.closeNode(),i.closeNode()}parseOpen(i){return i.name==="TitlesOfParts"}parseText(){}parseClose(i){return i!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(n,t,e){"use strict";let r=n("../../../utils/xml-stream"),i=n("../base-xform"),s=n("../simple/string-xform"),o=n("./app-heading-pairs-xform"),a=n("./app-titles-of-parts-xform");class l extends i{constructor(){super(),this.map={Company:new s({tag:"Company"}),Manager:new s({tag:"Manager"}),HeadingPairs:new o,TitleOfParts:new a}}render(h,d){h.openXml(r.StdDocAttributes),h.openNode("Properties",l.PROPERTY_ATTRIBUTES),h.leafNode("Application",void 0,"Microsoft Excel"),h.leafNode("DocSecurity",void 0,"0"),h.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(h,d.worksheets),this.map.TitleOfParts.render(h,d.worksheets),this.map.Company.render(h,d.company||""),this.map.Manager.render(h,d.manager),h.leafNode("LinksUpToDate",void 0,"false"),h.leafNode("SharedDoc",void 0,"false"),h.leafNode("HyperlinksChanged",void 0,"false"),h.leafNode("AppVersion",void 0,"16.0300"),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"Properties":return!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}l.DateFormat=function(c){return c.toISOString().replace(/[.]\d{3,6}/,"")},l.DateAttrs={"xsi:type":"dcterms:W3CDTF"},l.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},t.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(n,t,e){"use strict";let r=n("../../../utils/xml-stream"),i=n("../base-xform");class s extends i{render(a,l){a.openXml(r.StdDocAttributes),a.openNode("Types",s.PROPERTY_ATTRIBUTES);let c={};(l.media||[]).forEach(h=>{if(h.type==="image"){let d=h.extension;c[d]||(c[d]=!0,a.leafNode("Default",{Extension:d,ContentType:"image/"+d}))}}),a.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),a.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),a.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),l.worksheets.forEach(h=>{let d=`/xl/worksheets/sheet${h.id}.xml`;a.leafNode("Override",{PartName:d,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),a.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),a.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),l.sharedStrings&&l.sharedStrings.count&&a.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),l.tables&&l.tables.forEach(h=>{a.leafNode("Override",{PartName:"/xl/tables/"+h.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),l.drawings&&l.drawings.forEach(h=>{a.leafNode("Override",{PartName:`/xl/drawings/${h.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),l.commentRefs&&(a.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),l.commentRefs.forEach(h=>{let{commentName:d}=h;a.leafNode("Override",{PartName:`/xl/${d}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),a.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),a.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),a.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}s.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},t.exports=s},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(n,t,e){"use strict";let r=n("../../../utils/xml-stream"),i=n("../base-xform"),s=n("../simple/date-xform"),o=n("../simple/string-xform"),a=n("../simple/integer-xform");class l extends i{constructor(){super(),this.map={"dc:creator":new o({tag:"dc:creator"}),"dc:title":new o({tag:"dc:title"}),"dc:subject":new o({tag:"dc:subject"}),"dc:description":new o({tag:"dc:description"}),"dc:identifier":new o({tag:"dc:identifier"}),"dc:language":new o({tag:"dc:language"}),"cp:keywords":new o({tag:"cp:keywords"}),"cp:category":new o({tag:"cp:category"}),"cp:lastModifiedBy":new o({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new s({tag:"cp:lastPrinted",format:l.DateFormat}),"cp:revision":new a({tag:"cp:revision"}),"cp:version":new o({tag:"cp:version"}),"cp:contentStatus":new o({tag:"cp:contentStatus"}),"cp:contentType":new o({tag:"cp:contentType"}),"dcterms:created":new s({tag:"dcterms:created",attrs:l.DateAttrs,format:l.DateFormat}),"dcterms:modified":new s({tag:"dcterms:modified",attrs:l.DateAttrs,format:l.DateFormat})}}render(h,d){h.openXml(r.StdDocAttributes),h.openNode("cp:coreProperties",l.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(h,d.creator),this.map["dc:title"].render(h,d.title),this.map["dc:subject"].render(h,d.subject),this.map["dc:description"].render(h,d.description),this.map["dc:identifier"].render(h,d.identifier),this.map["dc:language"].render(h,d.language),this.map["cp:keywords"].render(h,d.keywords),this.map["cp:category"].render(h,d.category),this.map["cp:lastModifiedBy"].render(h,d.lastModifiedBy),this.map["cp:lastPrinted"].render(h,d.lastPrinted),this.map["cp:revision"].render(h,d.revision),this.map["cp:version"].render(h,d.version),this.map["cp:contentStatus"].render(h,d.contentStatus),this.map["cp:contentType"].render(h,d.contentType),this.map["dcterms:created"].render(h,d.created),this.map["dcterms:modified"].render(h,d.modified),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[h.name],this.parser)return this.parser.parseOpen(h),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(h))}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+h)}}}l.DateFormat=function(c){return c.toISOString().replace(/[.]\d{3}/,"")},l.DateAttrs={"xsi:type":"dcterms:W3CDTF"},l.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},t.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{render(i,s){i.leafNode("Relationship",s)}parseOpen(i){switch(i.name){case"Relationship":return this.model=i.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(n,t,e){"use strict";let r=n("../../../utils/xml-stream"),i=n("../base-xform"),s=n("./relationship-xform");class o extends i{constructor(){super(),this.map={Relationship:new s}}render(l,c){c=c||this._values,l.openXml(r.StdDocAttributes),l.openNode("Relationships",o.RELATIONSHIPS_ATTRIBUTES),c.forEach(h=>{this.map.Relationship.render(l,h)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[l.name],this.parser)return this.parser.parseOpen(l),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(l){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}o.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},t.exports=o},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case this.tag:this.reset(),this.model={range:{editAs:i.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[i.name],this.parser&&this.parser.parseOpen(i)}return!0}parseText(i){this.parser&&this.parser.parseText(i)}reconcilePicture(i,s){if(i&&i.rId){let o=s.rels[i.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(o){let a=o[1],l=s.mediaIndex[a];return s.media[l]}}}}},{"../base-xform":32}],57:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("./blip-xform");t.exports=class extends r{constructor(){super(),this.map={"a:blip":new i}}get tag(){return"xdr:blipFill"}render(s,o){s.openNode(this.tag),this.map["a:blip"].render(s,o),s.openNode("a:stretch"),s.leafNode("a:fillRect"),s.closeNode(),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset();break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(){}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;switch(s){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"a:blip"}render(i,s){i.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":s.rId,cstate:"print"})}parseOpen(i){switch(i.name){case this.tag:return this.model={rId:i.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(i){switch(i){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"xdr:cNvPicPr"}render(i){i.openNode(this.tag),i.leafNode("a:picLocks",{noChangeAspect:"1"}),i.closeNode()}parseOpen(i){switch(i.name){case this.tag:default:return!0}}parseText(){}parseClose(i){switch(i){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("./hlink-click-xform"),s=n("./ext-lst-xform");t.exports=class extends r{constructor(){super(),this.map={"a:hlinkClick":new i,"a:extLst":new s}}get tag(){return"xdr:cNvPr"}render(o,a){o.openNode(this.tag,{id:a.index,name:"Picture "+a.index}),this.map["a:hlinkClick"].render(o,a),this.map["a:extLst"].render(o,a),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(){}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("../simple/integer-xform");t.exports=class extends r{constructor(s){super(),this.tag=s.tag,this.map={"xdr:col":new i({tag:"xdr:col",zero:!0}),"xdr:colOff":new i({tag:"xdr:colOff",zero:!0}),"xdr:row":new i({tag:"xdr:row",zero:!0}),"xdr:rowOff":new i({tag:"xdr:rowOff",zero:!0})}}render(s,o){s.openNode(this.tag),this.map["xdr:col"].render(s,o.nativeCol),this.map["xdr:colOff"].render(s,o.nativeColOff),this.map["xdr:row"].render(s,o.nativeRow),this.map["xdr:rowOff"].render(s,o.nativeRowOff),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset();break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;switch(s){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(n,t,e){"use strict";let r=n("../../../utils/col-cache"),i=n("../../../utils/xml-stream"),s=n("../base-xform"),o=n("./two-cell-anchor-xform"),a=n("./one-cell-anchor-xform");class l extends s{constructor(){super(),this.map={"xdr:twoCellAnchor":new o,"xdr:oneCellAnchor":new a}}prepare(h){h.anchors.forEach((d,p)=>{d.anchorType=function(g){return(typeof g.range=="string"?r.decode(g.range):g.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(d),this.map[d.anchorType].prepare(d,{index:p})})}get tag(){return"xdr:wsDr"}render(h,d){h.openXml(i.StdDocAttributes),h.openNode(this.tag,l.DRAWING_ATTRIBUTES),d.anchors.forEach(p=>{this.map[p.anchorType].render(h,p)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(h){case this.tag:return!1;default:return!0}}reconcile(h,d){h.anchors.forEach(p=>{p.br?this.map["xdr:twoCellAnchor"].reconcile(p,d):this.map["xdr:oneCellAnchor"].reconcile(p,d)})}}l.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},t.exports=l},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"a:extLst"}render(i){i.openNode(this.tag),i.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),i.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),i.closeNode(),i.closeNode()}parseOpen(i){switch(i.name){case this.tag:default:return!0}}parseText(){}parseClose(i){switch(i){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{constructor(i){super(),this.tag=i.tag,this.map={}}render(i,s){i.openNode(this.tag);let o=Math.floor(9525*s.width),a=Math.floor(9525*s.height);i.addAttribute("cx",o),i.addAttribute("cy",a),i.closeNode()}parseOpen(i){return i.name===this.tag&&(this.model={width:parseInt(i.attributes.cx||"0",10)/9525,height:parseInt(i.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"a:hlinkClick"}render(i,s){s.hyperlinks&&s.hyperlinks.rId&&i.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":s.hyperlinks.rId,tooltip:s.hyperlinks.tooltip})}parseOpen(i){switch(i.name){case this.tag:return this.model={hyperlinks:{rId:i.attributes["r:id"],tooltip:i.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("./c-nv-pr-xform"),s=n("./c-nv-pic-pr-xform");t.exports=class extends r{constructor(){super(),this.map={"xdr:cNvPr":new i,"xdr:cNvPicPr":new s}}get tag(){return"xdr:nvPicPr"}render(o,a){o.openNode(this.tag),this.map["xdr:cNvPr"].render(o,a),this.map["xdr:cNvPicPr"].render(o,a),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(){}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(n,t,e){"use strict";let r=n("./base-cell-anchor-xform"),i=n("../static-xform"),s=n("./cell-position-xform"),o=n("./ext-xform"),a=n("./pic-xform");t.exports=class extends r{constructor(){super(),this.map={"xdr:from":new s({tag:"xdr:from"}),"xdr:ext":new o({tag:"xdr:ext"}),"xdr:pic":new a,"xdr:clientData":new i({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(l,c){this.map["xdr:pic"].prepare(l.picture,c)}render(l,c){l.openNode(this.tag,{editAs:c.range.editAs||"oneCell"}),this.map["xdr:from"].render(l,c.range.tl),this.map["xdr:ext"].render(l,c.range.ext),this.map["xdr:pic"].render(l,c.picture),this.map["xdr:clientData"].render(l,{}),l.closeNode()}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(l,c){l.medium=this.reconcilePicture(l.picture,c)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("../static-xform"),s=n("./blip-fill-xform"),o=n("./nv-pic-pr-xform"),a=n("./sp-pr");t.exports=class extends r{constructor(){super(),this.map={"xdr:nvPicPr":new o,"xdr:blipFill":new s,"xdr:spPr":new i(a)}}get tag(){return"xdr:pic"}prepare(l,c){l.index=c.index+1}render(l,c){l.openNode(this.tag),this.map["xdr:nvPicPr"].render(l,c),this.map["xdr:blipFill"].render(l,c),this.map["xdr:spPr"].render(l,c),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(n,t,e){"use strict";t.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(n,t,e){"use strict";let r=n("./base-cell-anchor-xform"),i=n("../static-xform"),s=n("./cell-position-xform"),o=n("./pic-xform");t.exports=class extends r{constructor(){super(),this.map={"xdr:from":new s({tag:"xdr:from"}),"xdr:to":new s({tag:"xdr:to"}),"xdr:pic":new o,"xdr:clientData":new i({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(a,l){this.map["xdr:pic"].prepare(a.picture,l)}render(a,l){a.openNode(this.tag,{editAs:l.range.editAs||"oneCell"}),this.map["xdr:from"].render(a,l.range.tl),this.map["xdr:to"].render(a,l.range.br),this.map["xdr:pic"].render(a,l.picture),this.map["xdr:clientData"].render(a,{}),a.closeNode()}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(a,l){a.medium=this.reconcilePicture(a.picture,l)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(n,t,e){"use strict";let r=n("./base-xform");t.exports=class extends r{constructor(i){super(),this.tag=i.tag,this.always=!!i.always,this.count=i.count,this.empty=i.empty,this.$count=i.$count||"count",this.$=i.$,this.childXform=i.childXform,this.maxItems=i.maxItems}prepare(i,s){let{childXform:o}=this;i&&i.forEach((a,l)=>{s.index=l,o.prepare(a,s)})}render(i,s){if(this.always||s&&s.length){i.openNode(this.tag,this.$),this.count&&i.addAttribute(this.$count,s&&s.length||0);let{childXform:o}=this;(s||[]).forEach((a,l)=>{o.render(i,a,l)}),i.closeNode()}else this.empty&&i.leafNode(this.tag)}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(i)&&(this.parser=this.childXform,!0)}}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){if(this.parser){if(!this.parser.parseClose(i)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(i,s){if(i){let{childXform:o}=this;i.forEach(a=>{o.reconcile(a,s)})}}}},{"./base-xform":32}],72:[function(n,t,e){"use strict";let r=n("../../../utils/col-cache"),i=n("../base-xform");t.exports=class extends i{get tag(){return"autoFilter"}render(s,o){if(o)if(typeof o=="string")s.leafNode("autoFilter",{ref:o});else{let a=function(h){return typeof h=="string"?h:r.getAddress(h.row,h.column).address},l=a(o.from),c=a(o.to);l&&c&&s.leafNode("autoFilter",{ref:`${l}:${c}`})}}parseOpen(s){s.name==="autoFilter"&&(this.model=s.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(n,t,e){"use strict";let r=n("../../../utils/utils"),i=n("../base-xform"),s=n("../../../doc/range"),o=n("../../../doc/enums"),a=n("../strings/rich-text-xform");function l(c){if(c==null)return o.ValueType.Null;if(c instanceof String||typeof c=="string")return o.ValueType.String;if(typeof c=="number")return o.ValueType.Number;if(typeof c=="boolean")return o.ValueType.Boolean;if(c instanceof Date)return o.ValueType.Date;if(c.text&&c.hyperlink)return o.ValueType.Hyperlink;if(c.formula)return o.ValueType.Formula;if(c.error)return o.ValueType.Error;throw new Error("I could not understand type of value")}t.exports=class extends i{constructor(){super(),this.richTextXForm=new a}get tag(){return"c"}prepare(c,h){let d=h.styles.addStyleModel(c.style||{},function(p){switch(p.type){case o.ValueType.Formula:return l(p.result);default:return p.type}}(c));switch(d&&(c.styleId=d),c.comment&&h.comments.push({...c.comment,ref:c.address}),c.type){case o.ValueType.String:case o.ValueType.RichText:h.sharedStrings&&(c.ssId=h.sharedStrings.add(c.value));break;case o.ValueType.Date:h.date1904&&(c.date1904=!0);break;case o.ValueType.Hyperlink:h.sharedStrings&&c.text!==void 0&&c.text!==null&&(c.ssId=h.sharedStrings.add(c.text)),h.hyperlinks.push({address:c.address,target:c.hyperlink,tooltip:c.tooltip});break;case o.ValueType.Merge:h.merges.add(c);break;case o.ValueType.Formula:if(h.date1904&&(c.date1904=!0),c.shareType==="shared"&&(c.si=h.siFormulae++),c.formula)h.formulae[c.address]=c;else if(c.sharedFormula){let p=h.formulae[c.sharedFormula];if(!p)throw new Error("Shared Formula master must exist above and or left of clone for cell "+c.address);p.si===void 0?(p.shareType="shared",p.si=h.siFormulae++,p.range=new s(p.address,c.address)):p.range&&p.range.expandToAddress(c.address),c.si=p.si}}}renderFormula(c,h){let d=null;switch(h.shareType){case"shared":d={t:"shared",ref:h.ref||h.range.range,si:h.si};break;case"array":d={t:"array",ref:h.ref};break;default:h.si!==void 0&&(d={t:"shared",si:h.si})}switch(l(h.result)){case o.ValueType.Null:c.leafNode("f",d,h.formula);break;case o.ValueType.String:c.addAttribute("t","str"),c.leafNode("f",d,h.formula),c.leafNode("v",null,h.result);break;case o.ValueType.Number:c.leafNode("f",d,h.formula),c.leafNode("v",null,h.result);break;case o.ValueType.Boolean:c.addAttribute("t","b"),c.leafNode("f",d,h.formula),c.leafNode("v",null,h.result?1:0);break;case o.ValueType.Error:c.addAttribute("t","e"),c.leafNode("f",d,h.formula),c.leafNode("v",null,h.result.error);break;case o.ValueType.Date:c.leafNode("f",d,h.formula),c.leafNode("v",null,r.dateToExcel(h.result,h.date1904));break;default:throw new Error("I could not understand type of value")}}render(c,h){if(h.type!==o.ValueType.Null||h.styleId){switch(c.openNode("c"),c.addAttribute("r",h.address),h.styleId&&c.addAttribute("s",h.styleId),h.type){case o.ValueType.Null:break;case o.ValueType.Number:c.leafNode("v",null,h.value);break;case o.ValueType.Boolean:c.addAttribute("t","b"),c.leafNode("v",null,h.value?"1":"0");break;case o.ValueType.Error:c.addAttribute("t","e"),c.leafNode("v",null,h.value.error);break;case o.ValueType.String:case o.ValueType.RichText:h.ssId!==void 0?(c.addAttribute("t","s"),c.leafNode("v",null,h.ssId)):h.value&&h.value.richText?(c.addAttribute("t","inlineStr"),c.openNode("is"),h.value.richText.forEach(d=>{this.richTextXForm.render(c,d)}),c.closeNode("is")):(c.addAttribute("t","str"),c.leafNode("v",null,h.value));break;case o.ValueType.Date:c.leafNode("v",null,r.dateToExcel(h.value,h.date1904));break;case o.ValueType.Hyperlink:h.ssId!==void 0?(c.addAttribute("t","s"),c.leafNode("v",null,h.ssId)):(c.addAttribute("t","str"),c.leafNode("v",null,h.text));break;case o.ValueType.Formula:this.renderFormula(c,h);break;case o.ValueType.Merge:}c.closeNode()}}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"c":return this.model={address:c.attributes.r},this.t=c.attributes.t,c.attributes.s&&(this.model.styleId=parseInt(c.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=c.attributes.si,this.model.shareType=c.attributes.t,this.model.ref=c.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){if(this.parser)this.parser.parseText(c);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+c:c;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+c:c:this.model.value=this.model.value?this.model.value+c:c}}parseClose(c){switch(c){case"c":{let{model:h}=this;if(h.formula||h.shareType)h.type=o.ValueType.Formula,h.value&&(this.t==="str"?h.result=r.xmlDecode(h.value):this.t==="b"?h.result=parseInt(h.value,10)!==0:this.t==="e"?h.result={error:h.value}:h.result=parseFloat(h.value),h.value=void 0);else if(h.value!==void 0)switch(this.t){case"s":h.type=o.ValueType.String,h.value=parseInt(h.value,10);break;case"str":h.type=o.ValueType.String,h.value=r.xmlDecode(h.value);break;case"inlineStr":h.type=o.ValueType.String;break;case"b":h.type=o.ValueType.Boolean,h.value=parseInt(h.value,10)!==0;break;case"e":h.type=o.ValueType.Error,h.value={error:h.value};break;default:h.type=o.ValueType.Number,h.value=parseFloat(h.value)}else h.styleId?h.type=o.ValueType.Null:h.type=o.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(c),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(c),!0)}}reconcile(c,h){let d=c.styleId&&h.styles&&h.styles.getStyleModel(c.styleId);switch(d&&(c.style=d),c.styleId!==void 0&&(c.styleId=void 0),c.type){case o.ValueType.String:typeof c.value=="number"&&h.sharedStrings&&(c.value=h.sharedStrings.getString(c.value)),c.value.richText&&(c.type=o.ValueType.RichText);break;case o.ValueType.Number:d&&r.isDateFmt(d.numFmt)&&(c.type=o.ValueType.Date,c.value=r.excelToDate(c.value,h.date1904));break;case o.ValueType.Formula:c.result!==void 0&&d&&r.isDateFmt(d.numFmt)&&(c.result=r.excelToDate(c.result,h.date1904)),c.shareType==="shared"&&(c.ref?h.formulae[c.si]=c.address:(c.sharedFormula=h.formulae[c.si],delete c.shareType),delete c.si)}let p=h.hyperlinkMap[c.address];p&&(c.type===o.ValueType.Formula?(c.text=c.result,c.result=void 0):(c.text=c.value,c.value=void 0),c.type=o.ValueType.Hyperlink,c.hyperlink=p);let g=h.commentsMap&&h.commentsMap[c.address];g&&(c.comment=g)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(n,t,e){"use strict";let r=n("../../base-xform");t.exports=class extends r{get tag(){return"x14:cfIcon"}render(i,s){i.leafNode(this.tag,{iconSet:s.iconSet,iconId:s.iconId})}parseOpen(i){let{attributes:s}=i;this.model={iconSet:s.iconSet,iconId:r.toIntValue(s.iconId)}}parseClose(i){return i!==this.tag}}},{"../../base-xform":32}],75:[function(n,t,e){"use strict";let{v4:r}=n("uuid"),i=n("../../base-xform"),s=n("../../composite-xform"),o=n("./databar-ext-xform"),a=n("./icon-set-ext-xform"),l={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class c extends s{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new o,"x14:iconSet":this.iconSetXform=new a}}get tag(){return"x14:cfRule"}static isExt(d){return d.type==="dataBar"?o.isExt(d):!(d.type!=="iconSet"||!d.custom&&!l[d.iconSet])}prepare(d){c.isExt(d)&&(d.x14Id=`{${r()}}`.toUpperCase())}render(d,p){if(c.isExt(p))switch(p.type){case"dataBar":this.renderDataBar(d,p);break;case"iconSet":this.renderIconSet(d,p)}}renderDataBar(d,p){d.openNode(this.tag,{type:"dataBar",id:p.x14Id}),this.databarXform.render(d,p),d.closeNode()}renderIconSet(d,p){d.openNode(this.tag,{type:"iconSet",priority:p.priority,id:p.x14Id||`{${r()}}`}),this.iconSetXform.render(d,p),d.closeNode()}createNewModel(d){let{attributes:p}=d;return{type:p.type,x14Id:p.id,priority:i.toIntValue(p.priority)}}onParserClose(d,p){Object.assign(this.model,p.model)}}t.exports=c},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(n,t,e){"use strict";let r=n("../../composite-xform"),i=n("./f-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"xm:f":this.fExtXform=new i}}get tag(){return"x14:cfvo"}render(s,o){s.openNode(this.tag,{type:o.type}),o.value!==void 0&&this.fExtXform.render(s,o.value),s.closeNode()}createNewModel(s){return{type:s.attributes.type}}onParserClose(s,o){switch(s){case"xm:f":this.model.value=o.model?parseFloat(o.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(n,t,e){"use strict";let r=n("../../composite-xform"),i=n("./sqref-ext-xform"),s=n("./cf-rule-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"xm:sqref":this.sqRef=new i,"x14:cfRule":this.cfRule=new s}}get tag(){return"x14:conditionalFormatting"}prepare(o,a){o.rules.forEach(l=>{this.cfRule.prepare(l,a)})}render(o,a){a.rules.some(s.isExt)&&(o.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),a.rules.filter(s.isExt).forEach(l=>this.cfRule.render(o,l)),this.sqRef.render(o,a.ref),o.closeNode())}createNewModel(){return{rules:[]}}onParserClose(o,a){switch(o){case"xm:sqref":this.model.ref=a.model;break;case"x14:cfRule":this.model.rules.push(a.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(n,t,e){"use strict";let r=n("../../composite-xform"),i=n("./cf-rule-ext-xform"),s=n("./conditional-formatting-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new s}}get tag(){return"x14:conditionalFormattings"}hasContent(o){return o.hasExtContent===void 0&&(o.hasExtContent=o.some(a=>a.rules.some(i.isExt))),o.hasExtContent}prepare(o,a){o.forEach(l=>{this.cfXform.prepare(l,a)})}render(o,a){this.hasContent(a)&&(o.openNode(this.tag),a.forEach(l=>this.cfXform.render(o,l)),o.closeNode())}createNewModel(){return[]}onParserClose(o,a){this.model.push(a.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(n,t,e){"use strict";let r=n("../../base-xform"),i=n("../../composite-xform"),s=n("../../style/color-xform"),o=n("./cfvo-ext-xform");t.exports=class extends i{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new o,"x14:borderColor":this.borderColorXform=new s("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new s("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new s("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new s("x14:axisColor")}}static isExt(a){return!a.gradient}get tag(){return"x14:dataBar"}render(a,l){a.openNode(this.tag,{minLength:r.toIntAttribute(l.minLength,0,!0),maxLength:r.toIntAttribute(l.maxLength,100,!0),border:r.toBoolAttribute(l.border,!1),gradient:r.toBoolAttribute(l.gradient,!0),negativeBarColorSameAsPositive:r.toBoolAttribute(l.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:r.toBoolAttribute(l.negativeBarBorderColorSameAsPositive,!0),axisPosition:r.toAttribute(l.axisPosition,"auto"),direction:r.toAttribute(l.direction,"leftToRight")}),l.cfvo.forEach(c=>{this.cfvoXform.render(a,c)}),this.borderColorXform.render(a,l.borderColor),this.negativeBorderColorXform.render(a,l.negativeBorderColor),this.negativeFillColorXform.render(a,l.negativeFillColor),this.axisColorXform.render(a,l.axisColor),a.closeNode()}createNewModel(a){let{attributes:l}=a;return{cfvo:[],minLength:r.toIntValue(l.minLength,0),maxLength:r.toIntValue(l.maxLength,100),border:r.toBoolValue(l.border,!1),gradient:r.toBoolValue(l.gradient,!0),negativeBarColorSameAsPositive:r.toBoolValue(l.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:r.toBoolValue(l.negativeBarBorderColorSameAsPositive,!0),axisPosition:r.toStringValue(l.axisPosition,"auto"),direction:r.toStringValue(l.direction,"leftToRight")}}onParserClose(a,l){let[,c]=a.split(":");switch(c){case"cfvo":this.model.cfvo.push(l.model);break;default:this.model[c]=l.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(n,t,e){"use strict";let r=n("../../base-xform");t.exports=class extends r{get tag(){return"xm:f"}render(i,s){i.leafNode(this.tag,null,s)}parseOpen(){this.model=""}parseText(i){this.model+=i}parseClose(i){return i!==this.tag}}},{"../../base-xform":32}],81:[function(n,t,e){"use strict";let r=n("../../base-xform"),i=n("../../composite-xform"),s=n("./cfvo-ext-xform"),o=n("./cf-icon-ext-xform");t.exports=class extends i{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new s,"x14:cfIcon":this.cfIconXform=new o}}get tag(){return"x14:iconSet"}render(a,l){a.openNode(this.tag,{iconSet:r.toStringAttribute(l.iconSet),reverse:r.toBoolAttribute(l.reverse,!1),showValue:r.toBoolAttribute(l.showValue,!0),custom:r.toBoolAttribute(l.icons,!1)}),l.cfvo.forEach(c=>{this.cfvoXform.render(a,c)}),l.icons&&l.icons.forEach((c,h)=>{c.iconId=h,this.cfIconXform.render(a,c)}),a.closeNode()}createNewModel(a){let{attributes:l}=a;return{cfvo:[],iconSet:r.toStringValue(l.iconSet,"3TrafficLights"),reverse:r.toBoolValue(l.reverse,!1),showValue:r.toBoolValue(l.showValue,!0)}}onParserClose(a,l){let[,c]=a.split(":");switch(c){case"cfvo":this.model.cfvo.push(l.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(l.model);break;default:this.model[c]=l.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(n,t,e){"use strict";let r=n("../../base-xform");t.exports=class extends r{get tag(){return"xm:sqref"}render(i,s){i.leafNode(this.tag,null,s)}parseOpen(){this.model=""}parseText(i){this.model+=i}parseClose(i){return i!==this.tag}}},{"../../base-xform":32}],83:[function(n,t,e){"use strict";let r=n("../../base-xform"),i=n("../../composite-xform"),s=n("../../../../doc/range"),o=n("./databar-xform"),a=n("./ext-lst-ref-xform"),l=n("./formula-xform"),c=n("./color-scale-xform"),h=n("./icon-set-xform"),d={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},p=m=>{let{type:b,operator:y}=m;switch(b){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:b};default:return{type:b,operator:y}}};class g extends i{constructor(){super(),this.map={dataBar:this.databarXform=new o,extLst:this.extLstRefXform=new a,formula:this.formulaXform=new l,colorScale:this.colorScaleXform=new c,iconSet:this.iconSetXform=new h}}get tag(){return"cfRule"}static isPrimitive(b){return b.type!=="iconSet"||!b.custom&&!d[b.iconSet]}render(b,y){switch(y.type){case"expression":this.renderExpression(b,y);break;case"cellIs":this.renderCellIs(b,y);break;case"top10":this.renderTop10(b,y);break;case"aboveAverage":this.renderAboveAverage(b,y);break;case"dataBar":this.renderDataBar(b,y);break;case"colorScale":this.renderColorScale(b,y);break;case"iconSet":this.renderIconSet(b,y);break;case"containsText":this.renderText(b,y);break;case"timePeriod":this.renderTimePeriod(b,y)}}renderExpression(b,y){b.openNode(this.tag,{type:"expression",dxfId:y.dxfId,priority:y.priority}),this.formulaXform.render(b,y.formulae[0]),b.closeNode()}renderCellIs(b,y){b.openNode(this.tag,{type:"cellIs",dxfId:y.dxfId,priority:y.priority,operator:y.operator}),y.formulae.forEach(x=>{this.formulaXform.render(b,x)}),b.closeNode()}renderTop10(b,y){b.leafNode(this.tag,{type:"top10",dxfId:y.dxfId,priority:y.priority,percent:r.toBoolAttribute(y.percent,!1),bottom:r.toBoolAttribute(y.bottom,!1),rank:r.toIntValue(y.rank,10,!0)})}renderAboveAverage(b,y){b.leafNode(this.tag,{type:"aboveAverage",dxfId:y.dxfId,priority:y.priority,aboveAverage:r.toBoolAttribute(y.aboveAverage,!0)})}renderDataBar(b,y){b.openNode(this.tag,{type:"dataBar",priority:y.priority}),this.databarXform.render(b,y),this.extLstRefXform.render(b,y),b.closeNode()}renderColorScale(b,y){b.openNode(this.tag,{type:"colorScale",priority:y.priority}),this.colorScaleXform.render(b,y),b.closeNode()}renderIconSet(b,y){g.isPrimitive(y)&&(b.openNode(this.tag,{type:"iconSet",priority:y.priority}),this.iconSetXform.render(b,y),b.closeNode())}renderText(b,y){b.openNode(this.tag,{type:y.operator,dxfId:y.dxfId,priority:y.priority,operator:r.toStringAttribute(y.operator,"containsText")});let x=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];let O=new s(S.ref),{tl:D}=O;switch(S.operator){case"containsText":return`NOT(ISERROR(SEARCH("${S.text}",${D})))`;case"containsBlanks":return`LEN(TRIM(${D}))=0`;case"notContainsBlanks":return`LEN(TRIM(${D}))>0`;case"containsErrors":return`ISERROR(${D})`;case"notContainsErrors":return`NOT(ISERROR(${D}))`;default:return}})(y);x&&this.formulaXform.render(b,x),b.closeNode()}renderTimePeriod(b,y){b.openNode(this.tag,{type:"timePeriod",dxfId:y.dxfId,priority:y.priority,timePeriod:y.timePeriod});let x=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];let O=new s(S.ref),{tl:D}=O;switch(S.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${D},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${D},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${D},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${D},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${D},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${D},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${D},1)=TODAY()-1`;case"today":return`FLOOR(${D},1)=TODAY()`;case"tomorrow":return`FLOOR(${D},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${D},1)<=6,FLOOR(${D},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${D})=MONTH(EDATE(TODAY(),0-1)),YEAR(${D})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${D})=MONTH(TODAY()),YEAR(${D})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${D})=MONTH(EDATE(TODAY(),0+1)),YEAR(${D})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(y);x&&this.formulaXform.render(b,x),b.closeNode()}createNewModel(b){let{attributes:y}=b;return{...p(y),dxfId:r.toIntValue(y.dxfId),priority:r.toIntValue(y.priority),timePeriod:y.timePeriod,percent:r.toBoolValue(y.percent),bottom:r.toBoolValue(y.bottom),rank:r.toIntValue(y.rank),aboveAverage:r.toBoolValue(y.aboveAverage)}}onParserClose(b,y){switch(b){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,y.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(y.model)}}}t.exports=g},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(n,t,e){"use strict";let r=n("../../base-xform");t.exports=class extends r{get tag(){return"cfvo"}render(i,s){i.leafNode(this.tag,{type:s.type,val:s.value})}parseOpen(i){this.model={type:i.attributes.type,value:r.toFloatValue(i.attributes.val)}}parseClose(i){return i!==this.tag}}},{"../../base-xform":32}],85:[function(n,t,e){"use strict";let r=n("../../composite-xform"),i=n("../../style/color-xform"),s=n("./cfvo-xform");t.exports=class extends r{constructor(){super(),this.map={cfvo:this.cfvoXform=new s,color:this.colorXform=new i}}get tag(){return"colorScale"}render(o,a){o.openNode(this.tag),a.cfvo.forEach(l=>{this.cfvoXform.render(o,l)}),a.color.forEach(l=>{this.colorXform.render(o,l)}),o.closeNode()}createNewModel(o){return{cfvo:[],color:[]}}onParserClose(o,a){this.model[o].push(a.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(n,t,e){"use strict";let r=n("../../composite-xform"),i=n("./cf-rule-xform");t.exports=class extends r{constructor(){super(),this.map={cfRule:new i}}get tag(){return"conditionalFormatting"}render(s,o){o.rules.some(i.isPrimitive)&&(s.openNode(this.tag,{sqref:o.ref}),o.rules.forEach(a=>{i.isPrimitive(a)&&(a.ref=o.ref,this.map.cfRule.render(s,a))}),s.closeNode())}createNewModel(s){let{attributes:o}=s;return{ref:o.sqref,rules:[]}}onParserClose(s,o){this.model.rules.push(o.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(n,t,e){"use strict";let r=n("../../base-xform"),i=n("./conditional-formatting-xform");t.exports=class extends r{constructor(){super(),this.cfXform=new i}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(s,o){let a=s.reduce((l,c)=>Math.max(l,...c.rules.map(h=>h.priority||0)),1);s.forEach(l=>{l.rules.forEach(c=>{c.priority||(c.priority=a++),c.style&&(c.dxfId=o.styles.addDxfStyle(c.style))})})}render(s,o){o.forEach(a=>{this.cfXform.render(s,a)})}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(s),!0;default:return!1}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){return!!this.parser&&(!!this.parser.parseClose(s)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(s,o){s.forEach(a=>{a.rules.forEach(l=>{l.dxfId!==void 0&&(l.style=o.styles.getDxfStyle(l.dxfId),delete l.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(n,t,e){"use strict";let r=n("../../composite-xform"),i=n("../../style/color-xform"),s=n("./cfvo-xform");t.exports=class extends r{constructor(){super(),this.map={cfvo:this.cfvoXform=new s,color:this.colorXform=new i}}get tag(){return"dataBar"}render(o,a){o.openNode(this.tag),a.cfvo.forEach(l=>{this.cfvoXform.render(o,l)}),this.colorXform.render(o,a.color),o.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(o,a){switch(o){case"cfvo":this.model.cfvo.push(a.model);break;case"color":this.model.color=a.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(n,t,e){"use strict";let r=n("../../base-xform"),i=n("../../composite-xform");class s extends r{get tag(){return"x14:id"}render(l,c){l.leafNode(this.tag,null,c)}parseOpen(){this.model=""}parseText(l){this.model+=l}parseClose(l){return l!==this.tag}}class o extends i{constructor(){super(),this.map={"x14:id":this.idXform=new s}}get tag(){return"ext"}render(l,c){l.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(l,c.x14Id),l.closeNode()}createNewModel(){return{}}onParserClose(l,c){this.model.x14Id=c.model}}t.exports=class extends i{constructor(){super(),this.map={ext:new o}}get tag(){return"extLst"}render(a,l){a.openNode(this.tag),this.map.ext.render(a,l),a.closeNode()}createNewModel(){return{}}onParserClose(a,l){Object.assign(this.model,l.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(n,t,e){"use strict";let r=n("../../base-xform");t.exports=class extends r{get tag(){return"formula"}render(i,s){i.leafNode(this.tag,null,s)}parseOpen(){this.model=""}parseText(i){this.model+=i}parseClose(i){return i!==this.tag}}},{"../../base-xform":32}],91:[function(n,t,e){"use strict";let r=n("../../base-xform"),i=n("../../composite-xform"),s=n("./cfvo-xform");t.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new s}}get tag(){return"iconSet"}render(o,a){o.openNode(this.tag,{iconSet:r.toStringAttribute(a.iconSet,"3TrafficLights"),reverse:r.toBoolAttribute(a.reverse,!1),showValue:r.toBoolAttribute(a.showValue,!0)}),a.cfvo.forEach(l=>{this.cfvoXform.render(o,l)}),o.closeNode()}createNewModel(o){let{attributes:a}=o;return{iconSet:r.toStringValue(a.iconSet,"3TrafficLights"),reverse:r.toBoolValue(a.reverse),showValue:r.toBoolValue(a.showValue),cfvo:[]}}onParserClose(o,a){this.model[o].push(a.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(n,t,e){"use strict";let r=n("../../../utils/utils"),i=n("../base-xform");t.exports=class extends i{get tag(){return"col"}prepare(s,o){let a=o.styles.addStyleModel(s.style||{});a&&(s.styleId=a)}render(s,o){s.openNode("col"),s.addAttribute("min",o.min),s.addAttribute("max",o.max),o.width&&s.addAttribute("width",o.width),o.styleId&&s.addAttribute("style",o.styleId),o.hidden&&s.addAttribute("hidden","1"),o.bestFit&&s.addAttribute("bestFit","1"),o.outlineLevel&&s.addAttribute("outlineLevel",o.outlineLevel),o.collapsed&&s.addAttribute("collapsed","1"),s.addAttribute("customWidth","1"),s.closeNode()}parseOpen(s){if(s.name==="col"){let o=this.model={min:parseInt(s.attributes.min||"0",10),max:parseInt(s.attributes.max||"0",10),width:s.attributes.width===void 0?void 0:parseFloat(s.attributes.width||"0")};return s.attributes.style&&(o.styleId=parseInt(s.attributes.style,10)),r.parseBoolean(s.attributes.hidden)&&(o.hidden=!0),r.parseBoolean(s.attributes.bestFit)&&(o.bestFit=!0),s.attributes.outlineLevel&&(o.outlineLevel=parseInt(s.attributes.outlineLevel,10)),r.parseBoolean(s.attributes.collapsed)&&(o.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(s,o){s.styleId&&(s.style=o.styles.getStyleModel(s.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../../../utils/utils"),s=n("../../../utils/col-cache"),o=n("../base-xform"),a=n("../../../doc/range");function l(h,d,p,g){let m=d[p];m!==void 0?h[p]=m:g!==void 0&&(h[p]=g)}function c(h,d,p,g){let m=d[p];m!==void 0?h[p]=i.parseBoolean(m):g!==void 0&&(h[p]=g)}t.exports=class extends o{get tag(){return"dataValidations"}render(h,d){let p=function(g){let m=r.map(g,(x,S)=>({address:S,dataValidation:x,marked:!1})).sort((x,S)=>r.strcmp(x.address,S.address)),b=r.keyBy(m,"address"),y=(x,S,O)=>{for(let D=0;D<S;D++){let U=s.encodeAddress(x.row+D,O);if(!g[U]||!r.isEqual(g[x.address],g[U]))return!1}return!0};return m.map(x=>{if(!x.marked){let S=s.decodeEx(x.address);if(S.dimensions)return b[S.dimensions].marked=!0,{...x.dataValidation,sqref:x.address};let O=1,D=s.encodeAddress(S.row+O,S.col);for(;g[D]&&r.isEqual(x.dataValidation,g[D]);)O++,D=s.encodeAddress(S.row+O,S.col);let U=1;for(;y(S,O,S.col+U);)U++;for(let z=0;z<O;z++)for(let q=0;q<U;q++)D=s.encodeAddress(S.row+z,S.col+q),b[D].marked=!0;if(O>1||U>1){let z=S.row+(O-1),q=S.col+(U-1);return{...x.dataValidation,sqref:`${x.address}:${s.encodeAddress(z,q)}`}}return{...x.dataValidation,sqref:x.address}}return null}).filter(Boolean)}(d);p.length&&(h.openNode("dataValidations",{count:p.length}),p.forEach(g=>{h.openNode("dataValidation"),g.type!=="any"&&(h.addAttribute("type",g.type),g.operator&&g.type!=="list"&&g.operator!=="between"&&h.addAttribute("operator",g.operator),g.allowBlank&&h.addAttribute("allowBlank","1")),g.showInputMessage&&h.addAttribute("showInputMessage","1"),g.promptTitle&&h.addAttribute("promptTitle",g.promptTitle),g.prompt&&h.addAttribute("prompt",g.prompt),g.showErrorMessage&&h.addAttribute("showErrorMessage","1"),g.errorStyle&&h.addAttribute("errorStyle",g.errorStyle),g.errorTitle&&h.addAttribute("errorTitle",g.errorTitle),g.error&&h.addAttribute("error",g.error),h.addAttribute("sqref",g.sqref),(g.formulae||[]).forEach((m,b)=>{h.openNode("formula"+(b+1)),g.type==="date"?h.writeText(i.dateToExcel(new Date(m))):h.writeText(m),h.closeNode()}),h.closeNode()}),h.closeNode())}parseOpen(h){switch(h.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=h.attributes.sqref;let d={type:h.attributes.type||"any",formulae:[]};switch(h.attributes.type&&c(d,h.attributes,"allowBlank"),c(d,h.attributes,"showInputMessage"),c(d,h.attributes,"showErrorMessage"),d.type){case"any":case"list":case"custom":break;default:l(d,h.attributes,"operator","between")}return l(d,h.attributes,"promptTitle"),l(d,h.attributes,"prompt"),l(d,h.attributes,"errorStyle"),l(d,h.attributes,"errorTitle"),l(d,h.attributes,"error"),this._dataValidation=d,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(h){this._formula&&this._formula.push(h)}parseClose(h){switch(h){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(d=>{d.includes(":")?new a(d).forEachAddress(p=>{this.model[p]=this._dataValidation}):this.model[d]=this._dataValidation}),!0;case"formula1":case"formula2":{let d=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":d=parseInt(d,10);break;case"decimal":d=parseFloat(d);break;case"date":d=i.excelToDate(parseFloat(d))}return this._dataValidation.formulae.push(d),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"dimension"}render(i,s){s&&i.leafNode("dimension",{ref:s})}parseOpen(i){return i.name==="dimension"&&(this.model=i.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"drawing"}render(i,s){s&&i.leafNode(this.tag,{"r:id":s.rId})}parseOpen(i){switch(i.name){case this.tag:return this.model={rId:i.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(n,t,e){"use strict";let r=n("../composite-xform"),i=n("./cf-ext/conditional-formattings-ext-xform");class s extends r{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new i}}get tag(){return"ext"}hasContent(a){return this.conditionalFormattings.hasContent(a.conditionalFormattings)}prepare(a,l){this.conditionalFormattings.prepare(a.conditionalFormattings,l)}render(a,l){a.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(a,l.conditionalFormattings),a.closeNode()}createNewModel(){return{}}onParserClose(a,l){this.model[a]=l.model}}t.exports=class extends r{constructor(){super(),this.map={ext:this.ext=new s}}get tag(){return"extLst"}prepare(o,a){this.ext.prepare(o,a)}hasContent(o){return this.ext.hasContent(o)}render(o,a){this.hasContent(a)&&(o.openNode("extLst"),this.ext.render(o,a),o.closeNode())}createNewModel(){return{}}onParserClose(o,a){Object.assign(this.model,a.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"headerFooter"}render(i,s){if(s){i.addRollback();let o=!1;i.openNode("headerFooter"),s.differentFirst&&(i.addAttribute("differentFirst","1"),o=!0),s.differentOddEven&&(i.addAttribute("differentOddEven","1"),o=!0),s.oddHeader&&typeof s.oddHeader=="string"&&(i.leafNode("oddHeader",null,s.oddHeader),o=!0),s.oddFooter&&typeof s.oddFooter=="string"&&(i.leafNode("oddFooter",null,s.oddFooter),o=!0),s.evenHeader&&typeof s.evenHeader=="string"&&(i.leafNode("evenHeader",null,s.evenHeader),o=!0),s.evenFooter&&typeof s.evenFooter=="string"&&(i.leafNode("evenFooter",null,s.evenFooter),o=!0),s.firstHeader&&typeof s.firstHeader=="string"&&(i.leafNode("firstHeader",null,s.firstHeader),o=!0),s.firstFooter&&typeof s.firstFooter=="string"&&(i.leafNode("firstFooter",null,s.firstFooter),o=!0),o?(i.closeNode(),i.commit()):i.rollback()}}parseOpen(i){switch(i.name){case"headerFooter":return this.model={},i.attributes.differentFirst&&(this.model.differentFirst=parseInt(i.attributes.differentFirst,0)===1),i.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(i.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(i){switch(this.currentNode){case"oddHeader":this.model.oddHeader=i;break;case"oddFooter":this.model.oddFooter=i;break;case"evenHeader":this.model.evenHeader=i;break;case"evenFooter":this.model.evenFooter=i;break;case"firstHeader":this.model.firstHeader=i;break;case"firstFooter":this.model.firstFooter=i}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"hyperlink"}render(i,s){this.isInternalLink(s)?i.leafNode("hyperlink",{ref:s.address,"r:id":s.rId,tooltip:s.tooltip,location:s.target}):i.leafNode("hyperlink",{ref:s.address,"r:id":s.rId,tooltip:s.tooltip})}parseOpen(i){return i.name==="hyperlink"&&(this.model={address:i.attributes.ref,rId:i.attributes["r:id"],tooltip:i.attributes.tooltip},i.attributes.location&&(this.model.target=i.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(i){return i.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(i.target)}}},{"../base-xform":32}],99:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"mergeCell"}render(i,s){i.leafNode("mergeCell",{ref:s})}parseOpen(i){return i.name==="mergeCell"&&(this.model=i.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../../../doc/range"),s=n("../../../utils/col-cache"),o=n("../../../doc/enums");t.exports=class{constructor(){this.merges={}}add(a){if(this.merges[a.master])this.merges[a.master].expandToAddress(a.address);else{let l=`${a.master}:${a.address}`;this.merges[a.master]=new i(l)}}get mergeCells(){return r.map(this.merges,a=>a.range)}reconcile(a,l){r.each(a,c=>{let h=s.decode(c);for(let d=h.top;d<=h.bottom;d++){let p=l[d-1];for(let g=h.left;g<=h.right;g++){let m=p.cells[g-1];m?m.type===o.ValueType.Merge&&(m.master=h.tl):p.cells[g]={type:o.ValueType.Null,address:s.encodeAddress(d,g)}}}})}getMasterAddress(a){let l=this.hash[a];return l&&l.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(n,t,e){"use strict";let r=n("../base-xform"),i=s=>s!==void 0;t.exports=class extends r{get tag(){return"outlinePr"}render(s,o){return!(!o||!i(o.summaryBelow)&&!i(o.summaryRight))&&(s.leafNode(this.tag,{summaryBelow:i(o.summaryBelow)?Number(o.summaryBelow):void 0,summaryRight:i(o.summaryRight)?Number(o.summaryRight):void 0}),!0)}parseOpen(s){return s.name===this.tag&&(this.model={summaryBelow:i(s.attributes.summaryBelow)?!!Number(s.attributes.summaryBelow):void 0,summaryRight:i(s.attributes.summaryRight)?!!Number(s.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"brk"}render(i,s){i.leafNode("brk",s)}parseOpen(i){return i.name==="brk"&&(this.model=i.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../base-xform");t.exports=class extends i{get tag(){return"pageMargins"}render(s,o){if(o){let a={left:o.left,right:o.right,top:o.top,bottom:o.bottom,header:o.header,footer:o.footer};r.some(a,l=>l!==void 0)&&s.leafNode(this.tag,a)}}parseOpen(s){switch(s.name){case this.tag:return this.model={left:parseFloat(s.attributes.left||.7),right:parseFloat(s.attributes.right||.7),top:parseFloat(s.attributes.top||.75),bottom:parseFloat(s.attributes.bottom||.75),header:parseFloat(s.attributes.header||.3),footer:parseFloat(s.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"pageSetUpPr"}render(i,s){return!(!s||!s.fitToPage)&&(i.leafNode(this.tag,{fitToPage:s.fitToPage?"1":void 0}),!0)}parseOpen(i){return i.name===this.tag&&(this.model={fitToPage:i.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../base-xform");function s(c){return c?"1":void 0}function o(c){switch(c){case"overThenDown":return c;default:return}}function a(c){switch(c){case"atEnd":case"asDisplyed":return c;default:return}}function l(c){switch(c){case"dash":case"blank":case"NA":return c;default:return}}t.exports=class extends i{get tag(){return"pageSetup"}render(c,h){if(h){let d={paperSize:h.paperSize,orientation:h.orientation,horizontalDpi:h.horizontalDpi,verticalDpi:h.verticalDpi,pageOrder:o(h.pageOrder),blackAndWhite:s(h.blackAndWhite),draft:s(h.draft),cellComments:a(h.cellComments),errors:l(h.errors),scale:h.scale,fitToWidth:h.fitToWidth,fitToHeight:h.fitToHeight,firstPageNumber:h.firstPageNumber,useFirstPageNumber:s(h.firstPageNumber),usePrinterDefaults:s(h.usePrinterDefaults),copies:h.copies};r.some(d,p=>p!==void 0)&&c.leafNode(this.tag,d)}}parseOpen(c){switch(c.name){case this.tag:return this.model={paperSize:(h=c.attributes.paperSize,h!==void 0?parseInt(h,10):void 0),orientation:c.attributes.orientation||"portrait",horizontalDpi:parseInt(c.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(c.attributes.verticalDpi||"4294967295",10),pageOrder:c.attributes.pageOrder||"downThenOver",blackAndWhite:c.attributes.blackAndWhite==="1",draft:c.attributes.draft==="1",cellComments:c.attributes.cellComments||"None",errors:c.attributes.errors||"displayed",scale:parseInt(c.attributes.scale||"100",10),fitToWidth:parseInt(c.attributes.fitToWidth||"1",10),fitToHeight:parseInt(c.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(c.attributes.firstPageNumber||"1",10),useFirstPageNumber:c.attributes.useFirstPageNumber==="1",usePrinterDefaults:c.attributes.usePrinterDefaults==="1",copies:parseInt(c.attributes.copies||"1",10)},!0;default:return!1}var h}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"picture"}render(i,s){s&&i.leafNode(this.tag,{"r:id":s.rId})}parseOpen(i){switch(i.name){case this.tag:return this.model={rId:i.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../base-xform");function s(o){return o?"1":void 0}t.exports=class extends i{get tag(){return"printOptions"}render(o,a){if(a){let l={headings:s(a.showRowColHeaders),gridLines:s(a.showGridLines),horizontalCentered:s(a.horizontalCentered),verticalCentered:s(a.verticalCentered)};r.some(l,c=>c!==void 0)&&o.leafNode(this.tag,l)}}parseOpen(o){switch(o.name){case this.tag:return this.model={showRowColHeaders:o.attributes.headings==="1",showGridLines:o.attributes.gridLines==="1",horizontalCentered:o.attributes.horizontalCentered==="1",verticalCentered:o.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(n,t,e){"use strict";let r=n("./page-breaks-xform"),i=n("../list-xform");t.exports=class extends i{constructor(){super({tag:"rowBreaks",count:!0,childXform:new r})}render(s,o){if(o&&o.length){s.openNode(this.tag,this.$),this.count&&(s.addAttribute(this.$count,o.length),s.addAttribute("manualBreakCount",o.length));let{childXform:a}=this;o.forEach(l=>{a.render(s,l)}),s.closeNode()}else this.empty&&s.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("../../../utils/utils"),s=n("./cell-xform");t.exports=class extends r{constructor(o){super(),this.maxItems=o&&o.maxItems,this.map={c:new s}}get tag(){return"row"}prepare(o,a){let l=a.styles.addStyleModel(o.style);l&&(o.styleId=l);let c=this.map.c;o.cells.forEach(h=>{c.prepare(h,a)})}render(o,a,l){o.openNode("row"),o.addAttribute("r",a.number),a.height&&(o.addAttribute("ht",a.height),o.addAttribute("customHeight","1")),a.hidden&&o.addAttribute("hidden","1"),a.min>0&&a.max>0&&a.min<=a.max&&o.addAttribute("spans",`${a.min}:${a.max}`),a.styleId&&(o.addAttribute("s",a.styleId),o.addAttribute("customFormat","1")),o.addAttribute("x14ac:dyDescent","0.25"),a.outlineLevel&&o.addAttribute("outlineLevel",a.outlineLevel),a.collapsed&&o.addAttribute("collapsed","1");let c=this.map.c;a.cells.forEach(h=>{c.render(o,h,l)}),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;if(o.name==="row"){this.numRowsSeen+=1;let a=o.attributes.spans?o.attributes.spans.split(":").map(c=>parseInt(c,10)):[void 0,void 0],l=this.model={number:parseInt(o.attributes.r,10),min:a[0],max:a[1],cells:[]};return o.attributes.s&&(l.styleId=parseInt(o.attributes.s,10)),i.parseBoolean(o.attributes.hidden)&&(l.hidden=!0),i.parseBoolean(o.attributes.bestFit)&&(l.bestFit=!0),o.attributes.ht&&(l.height=parseFloat(o.attributes.ht)),o.attributes.outlineLevel&&(l.outlineLevel=parseInt(o.attributes.outlineLevel,10)),i.parseBoolean(o.attributes.collapsed)&&(l.collapsed=!0),!0}return this.parser=this.map[o.name],!!this.parser&&(this.parser.parseOpen(o),!0)}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser){if(!this.parser.parseClose(o)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(o,a){o.style=o.styleId?a.styles.getStyleModel(o.styleId):{},o.styleId!==void 0&&(o.styleId=void 0);let l=this.map.c;o.cells.forEach(c=>{l.reconcile(c,a)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../base-xform");t.exports=class extends i{get tag(){return"sheetFormatPr"}render(s,o){if(o){let a={defaultRowHeight:o.defaultRowHeight,outlineLevelRow:o.outlineLevelRow,outlineLevelCol:o.outlineLevelCol,"x14ac:dyDescent":o.dyDescent};o.defaultColWidth&&(a.defaultColWidth=o.defaultColWidth),o.defaultRowHeight&&o.defaultRowHeight===15||(a.customHeight="1"),r.some(a,l=>l!==void 0)&&s.leafNode("sheetFormatPr",a)}}parseOpen(s){return s.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(s.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(s.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(s.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(s.attributes.outlineLevelCol||"0",10)},s.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(s.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("../style/color-xform"),s=n("./page-setup-properties-xform"),o=n("./outline-properties-xform");t.exports=class extends r{constructor(){super(),this.map={tabColor:new i("tabColor"),pageSetUpPr:new s,outlinePr:new o}}get tag(){return"sheetPr"}render(a,l){if(l){a.addRollback(),a.openNode("sheetPr");let c=!1;c=this.map.tabColor.render(a,l.tabColor)||c,c=this.map.pageSetUpPr.render(a,l.pageSetup)||c,c=this.map.outlinePr.render(a,l.outlineProperties)||c,c?(a.closeNode(),a.commit()):a.rollback()}}parseOpen(a){return this.parser?(this.parser.parseOpen(a),!0):a.name===this.tag?(this.reset(),!0):!!this.map[a.name]&&(this.parser=this.map[a.name],this.parser.parseOpen(a),!0)}parseText(a){return!!this.parser&&(this.parser.parseText(a),!0)}parseClose(a){return this.parser?(this.parser.parseClose(a)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../base-xform");function s(a,l){return a?l:void 0}function o(a,l){return a===l||void 0}t.exports=class extends i{get tag(){return"sheetProtection"}render(a,l){if(l){let c={sheet:s(l.sheet,"1"),selectLockedCells:l.selectLockedCells===!1?"1":void 0,selectUnlockedCells:l.selectUnlockedCells===!1?"1":void 0,formatCells:s(l.formatCells,"0"),formatColumns:s(l.formatColumns,"0"),formatRows:s(l.formatRows,"0"),insertColumns:s(l.insertColumns,"0"),insertRows:s(l.insertRows,"0"),insertHyperlinks:s(l.insertHyperlinks,"0"),deleteColumns:s(l.deleteColumns,"0"),deleteRows:s(l.deleteRows,"0"),sort:s(l.sort,"0"),autoFilter:s(l.autoFilter,"0"),pivotTables:s(l.pivotTables,"0")};l.sheet&&(c.algorithmName=l.algorithmName,c.hashValue=l.hashValue,c.saltValue=l.saltValue,c.spinCount=l.spinCount,c.objects=s(l.objects===!1,"1"),c.scenarios=s(l.scenarios===!1,"1")),r.some(c,h=>h!==void 0)&&a.leafNode(this.tag,c)}}parseOpen(a){switch(a.name){case this.tag:return this.model={sheet:o(a.attributes.sheet,"1"),objects:a.attributes.objects!=="1"&&void 0,scenarios:a.attributes.scenarios!=="1"&&void 0,selectLockedCells:a.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:a.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:o(a.attributes.formatCells,"0"),formatColumns:o(a.attributes.formatColumns,"0"),formatRows:o(a.attributes.formatRows,"0"),insertColumns:o(a.attributes.insertColumns,"0"),insertRows:o(a.attributes.insertRows,"0"),insertHyperlinks:o(a.attributes.insertHyperlinks,"0"),deleteColumns:o(a.attributes.deleteColumns,"0"),deleteRows:o(a.attributes.deleteRows,"0"),sort:o(a.attributes.sort,"0"),autoFilter:o(a.attributes.autoFilter,"0"),pivotTables:o(a.attributes.pivotTables,"0")},a.attributes.algorithmName&&(this.model.algorithmName=a.attributes.algorithmName,this.model.hashValue=a.attributes.hashValue,this.model.saltValue=a.attributes.saltValue,this.model.spinCount=parseInt(a.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(n,t,e){"use strict";let r=n("../../../utils/col-cache"),i=n("../base-xform"),s={frozen:"frozen",frozenSplit:"frozen",split:"split"};t.exports=class extends i{get tag(){return"sheetView"}prepare(o){switch(o.state){case"frozen":case"split":break;default:o.state="normal"}}render(o,a){o.openNode("sheetView",{workbookViewId:a.workbookViewId||0});let l=function(g,m,b){b&&o.addAttribute(g,m)},c,h,d,p;switch(l("rightToLeft","1",a.rightToLeft===!0),l("tabSelected","1",a.tabSelected),l("showRuler","0",a.showRuler===!1),l("showRowColHeaders","0",a.showRowColHeaders===!1),l("showGridLines","0",a.showGridLines===!1),l("zoomScale",a.zoomScale,a.zoomScale),l("zoomScaleNormal",a.zoomScaleNormal,a.zoomScaleNormal),l("view",a.style,a.style),a.state){case"frozen":h=a.xSplit||0,d=a.ySplit||0,c=a.topLeftCell||r.getAddress(d+1,h+1).address,p=(a.xSplit&&a.ySplit?"bottomRight":a.xSplit&&"topRight")||"bottomLeft",o.leafNode("pane",{xSplit:a.xSplit||void 0,ySplit:a.ySplit||void 0,topLeftCell:c,activePane:p,state:"frozen"}),o.leafNode("selection",{pane:p,activeCell:a.activeCell,sqref:a.activeCell});break;case"split":a.activePane==="topLeft"&&(a.activePane=void 0),o.leafNode("pane",{xSplit:a.xSplit||void 0,ySplit:a.ySplit||void 0,topLeftCell:a.topLeftCell,activePane:a.activePane}),o.leafNode("selection",{pane:a.activePane,activeCell:a.activeCell,sqref:a.activeCell});break;case"normal":a.activeCell&&o.leafNode("selection",{activeCell:a.activeCell,sqref:a.activeCell})}o.closeNode()}parseOpen(o){switch(o.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(o.attributes.workbookViewId,10),rightToLeft:o.attributes.rightToLeft==="1",tabSelected:o.attributes.tabSelected==="1",showRuler:o.attributes.showRuler!=="0",showRowColHeaders:o.attributes.showRowColHeaders!=="0",showGridLines:o.attributes.showGridLines!=="0",zoomScale:parseInt(o.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(o.attributes.zoomScaleNormal||"100",10),style:o.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(o.attributes.xSplit||"0",10),ySplit:parseInt(o.attributes.ySplit||"0",10),topLeftCell:o.attributes.topLeftCell,activePane:o.attributes.activePane||"topLeft",state:o.attributes.state},!0;case"selection":{let a=o.attributes.pane||"topLeft";return this.selections[a]={pane:a,activeCell:o.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(o){let a,l;switch(o){case"sheetView":return this.sheetView&&this.pane?(a=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:s[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(a.activePane=this.pane.activePane),l=this.selections[this.pane.activePane],l&&l.activeCell&&(a.activeCell=l.activeCell),this.sheetView.style&&(a.style=this.sheetView.style)):(a=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},l=this.selections.topLeft,l&&l.activeCell&&(a.activeCell=l.activeCell),this.sheetView.style&&(a.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"tablePart"}render(i,s){s&&i.leafNode(this.tag,{"r:id":s.rId})}parseOpen(i){switch(i.name){case this.tag:return this.model={rId:i.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../../../utils/col-cache"),s=n("../../../utils/xml-stream"),o=n("../../rel-type"),a=n("./merges"),l=n("../base-xform"),c=n("../list-xform"),h=n("./row-xform"),d=n("./col-xform"),p=n("./dimension-xform"),g=n("./hyperlink-xform"),m=n("./merge-cell-xform"),b=n("./data-validations-xform"),y=n("./sheet-properties-xform"),x=n("./sheet-format-properties-xform"),S=n("./sheet-view-xform"),O=n("./sheet-protection-xform"),D=n("./page-margins-xform"),U=n("./page-setup-xform"),z=n("./print-options-xform"),q=n("./auto-filter-xform"),G=n("./picture-xform"),tt=n("./drawing-xform"),K=n("./table-part-xform"),B=n("./row-breaks-xform"),N=n("./header-footer-xform"),Z=n("./cf/conditional-formattings-xform"),w=n("./ext-lst-xform"),C=(T,R)=>{if(!R||!R.length)return T;if(!T||!T.length)return R;let F={},H={};return T.forEach(rt=>{F[rt.ref]=rt,rt.rules.forEach(ot=>{let{x14Id:dt}=ot;dt&&(H[dt]=ot)})}),R.forEach(rt=>{rt.rules.forEach(ot=>{let dt=H[ot.x14Id];dt?(($,ct)=>{Object.keys(ct).forEach(W=>{let V=$[W],it=ct[W];V===void 0&&it!==void 0&&($[W]=it)})})(dt,ot):F[rt.ref]?F[rt.ref].rules.push(ot):T.push({ref:rt.ref,rules:[ot]})})}),T};class k extends l{constructor(R){super();let{maxRows:F,maxCols:H,ignoreNodes:rt}=R||{};this.ignoreNodes=rt||[],this.map={sheetPr:new y,dimension:new p,sheetViews:new c({tag:"sheetViews",count:!1,childXform:new S}),sheetFormatPr:new x,cols:new c({tag:"cols",count:!1,childXform:new d}),sheetData:new c({tag:"sheetData",count:!1,empty:!0,childXform:new h({maxItems:H}),maxItems:F}),autoFilter:new q,mergeCells:new c({tag:"mergeCells",count:!0,childXform:new m}),rowBreaks:new B,hyperlinks:new c({tag:"hyperlinks",count:!1,childXform:new g}),pageMargins:new D,dataValidations:new b,pageSetup:new U,headerFooter:new N,printOptions:new z,picture:new G,drawing:new tt,sheetProtection:new O,tableParts:new c({tag:"tableParts",count:!0,childXform:new K}),conditionalFormatting:new Z,extLst:new w}}prepare(R,F){F.merges=new a,R.hyperlinks=F.hyperlinks=[],R.comments=F.comments=[],F.formulae={},F.siFormulae=0,this.map.cols.prepare(R.cols,F),this.map.sheetData.prepare(R.rows,F),this.map.conditionalFormatting.prepare(R.conditionalFormattings,F),R.mergeCells=F.merges.mergeCells;let H=R.rels=[];function rt($){return"rId"+($.length+1)}if(R.hyperlinks.forEach($=>{let ct=rt(H);$.rId=ct,H.push({Id:ct,Type:o.Hyperlink,Target:$.target,TargetMode:"External"})}),R.comments.length>0){let $={Id:rt(H),Type:o.Comments,Target:`../comments${R.id}.xml`};H.push($);let ct={Id:rt(H),Type:o.VmlDrawing,Target:`../drawings/vmlDrawing${R.id}.vml`};H.push(ct),R.comments.forEach(W=>{W.refAddress=i.decodeAddress(W.ref)}),F.commentRefs.push({commentName:"comments"+R.id,vmlDrawing:"vmlDrawing"+R.id})}let ot=[],dt;R.media.forEach($=>{if($.type==="background"){let ct=rt(H);dt=F.media[$.imageId],H.push({Id:ct,Type:o.Image,Target:`../media/${dt.name}.${dt.extension}`}),R.background={rId:ct},R.image=F.media[$.imageId]}else if($.type==="image"){let{drawing:ct}=R;dt=F.media[$.imageId],ct||(ct=R.drawing={rId:rt(H),name:"drawing"+ ++F.drawingsCount,anchors:[],rels:[]},F.drawings.push(ct),H.push({Id:ct.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${ct.name}.xml`}));let W=this.preImageId===$.imageId?ot[$.imageId]:ot[ct.rels.length];W||(W=rt(ct.rels),ot[ct.rels.length]=W,ct.rels.push({Id:W,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${dt.name}.${dt.extension}`}));let V={picture:{rId:W},range:$.range};if($.hyperlinks&&$.hyperlinks.hyperlink){let it=rt(ct.rels);ot[ct.rels.length]=it,V.picture.hyperlinks={tooltip:$.hyperlinks.tooltip,rId:it},ct.rels.push({Id:it,Type:o.Hyperlink,Target:$.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=$.imageId,ct.anchors.push(V)}}),R.tables.forEach($=>{let ct=rt(H);$.rId=ct,H.push({Id:ct,Type:o.Table,Target:"../tables/"+$.target}),$.columns.forEach(W=>{let{style:V}=W;V&&(W.dxfId=F.styles.addDxfStyle(V))})}),this.map.extLst.prepare(R,F)}render(R,F){R.openXml(s.StdDocAttributes),R.openNode("worksheet",k.WORKSHEET_ATTRIBUTES);let H=F.properties?{defaultRowHeight:F.properties.defaultRowHeight,dyDescent:F.properties.dyDescent,outlineLevelCol:F.properties.outlineLevelCol,outlineLevelRow:F.properties.outlineLevelRow}:void 0;F.properties&&F.properties.defaultColWidth&&(H.defaultColWidth=F.properties.defaultColWidth);let rt={outlineProperties:F.properties&&F.properties.outlineProperties,tabColor:F.properties&&F.properties.tabColor,pageSetup:F.pageSetup&&F.pageSetup.fitToPage?{fitToPage:F.pageSetup.fitToPage}:void 0},ot=F.pageSetup&&F.pageSetup.margins,dt={showRowColHeaders:F.pageSetup&&F.pageSetup.showRowColHeaders,showGridLines:F.pageSetup&&F.pageSetup.showGridLines,horizontalCentered:F.pageSetup&&F.pageSetup.horizontalCentered,verticalCentered:F.pageSetup&&F.pageSetup.verticalCentered},$=F.sheetProtection;this.map.sheetPr.render(R,rt),this.map.dimension.render(R,F.dimensions),this.map.sheetViews.render(R,F.views),this.map.sheetFormatPr.render(R,H),this.map.cols.render(R,F.cols),this.map.sheetData.render(R,F.rows),this.map.sheetProtection.render(R,$),this.map.autoFilter.render(R,F.autoFilter),this.map.mergeCells.render(R,F.mergeCells),this.map.conditionalFormatting.render(R,F.conditionalFormattings),this.map.dataValidations.render(R,F.dataValidations),this.map.hyperlinks.render(R,F.hyperlinks),this.map.printOptions.render(R,dt),this.map.pageMargins.render(R,ot),this.map.pageSetup.render(R,F.pageSetup),this.map.headerFooter.render(R,F.headerFooter),this.map.rowBreaks.render(R,F.rowBreaks),this.map.drawing.render(R,F.drawing),this.map.picture.render(R,F.background),this.map.tableParts.render(R,F.tables),this.map.extLst.render(R,F),F.rels&&F.rels.forEach(ct=>{ct.Type===o.VmlDrawing&&R.leafNode("legacyDrawing",{"r:id":ct.Id})}),R.closeNode()}parseOpen(R){return this.parser?(this.parser.parseOpen(R),!0):R.name==="worksheet"?(r.each(this.map,F=>{F.reset()}),!0):(this.map[R.name]&&!this.ignoreNodes.includes(R.name)&&(this.parser=this.map[R.name],this.parser.parseOpen(R)),!0)}parseText(R){this.parser&&this.parser.parseText(R)}parseClose(R){if(this.parser)return this.parser.parseClose(R)||(this.parser=void 0),!0;switch(R){case"worksheet":{let F=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(F.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(F.outlineProperties=this.map.sheetPr.model.outlineProperties);let H={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},rt=Object.assign(H,this.map.pageSetup.model,this.map.printOptions.model),ot=C(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:F,views:this.map.sheetViews.model,pageSetup:rt,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:ot},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(R,F){let H=(R.relationships||[]).reduce((ot,dt)=>{if(ot[dt.Id]=dt,dt.Type===o.Comments&&(R.comments=F.comments[dt.Target].comments),dt.Type===o.VmlDrawing&&R.comments&&R.comments.length){let $=F.vmlDrawings[dt.Target].comments;R.comments.forEach((ct,W)=>{ct.note=Object.assign({},ct.note,$[W])})}return ot},{});if(F.commentsMap=(R.comments||[]).reduce((ot,dt)=>(dt.ref&&(ot[dt.ref]=dt),ot),{}),F.hyperlinkMap=(R.hyperlinks||[]).reduce((ot,dt)=>(dt.rId&&(ot[dt.address]=H[dt.rId].Target),ot),{}),F.formulae={},R.rows=R.rows&&R.rows.filter(Boolean)||[],R.rows.forEach(ot=>{ot.cells=ot.cells&&ot.cells.filter(Boolean)||[]}),this.map.cols.reconcile(R.cols,F),this.map.sheetData.reconcile(R.rows,F),this.map.conditionalFormatting.reconcile(R.conditionalFormattings,F),R.media=[],R.drawing){let ot=H[R.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(ot){let dt=ot[1];F.drawings[dt].anchors.forEach($=>{if($.medium){let ct={type:"image",imageId:$.medium.index,range:$.range,hyperlinks:$.picture.hyperlinks};R.media.push(ct)}})}}let rt=R.background&&H[R.background.rId];if(rt){let ot=rt.Target.split("/media/")[1],dt=F.mediaIndex&&F.mediaIndex[ot];dt!==void 0&&R.media.push({type:"background",imageId:dt})}R.tables=(R.tables||[]).map(ot=>{let dt=H[ot.rId];return F.tables[dt.Target]}),delete R.relationships,delete R.hyperlinks,delete R.comments}}k.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},t.exports=k},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{constructor(i){super(),this.tag=i.tag,this.attr=i.attr}render(i,s){s&&(i.openNode(this.tag),i.closeNode())}parseOpen(i){i.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{constructor(i){super(),this.tag=i.tag,this.attr=i.attr,this.attrs=i.attrs,this._format=i.format||function(s){try{return Number.isNaN(s.getTime())?"":s.toISOString()}catch{return""}},this._parse=i.parse||function(s){return new Date(s)}}render(i,s){s&&(i.openNode(this.tag),this.attrs&&i.addAttributes(this.attrs),this.attr?i.addAttribute(this.attr,this._format(s)):i.writeText(this._format(s)),i.closeNode())}parseOpen(i){i.name===this.tag&&(this.attr?this.model=this._parse(i.attributes[this.attr]):this.text=[])}parseText(i){this.attr||this.text.push(i)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{constructor(i){super(),this.tag=i.tag,this.attr=i.attr,this.attrs=i.attrs,this.zero=i.zero}render(i,s){(s||this.zero)&&(i.openNode(this.tag),this.attrs&&i.addAttributes(this.attrs),this.attr?i.addAttribute(this.attr,s):i.writeText(s),i.closeNode())}parseOpen(i){return i.name===this.tag&&(this.attr?this.model=parseInt(i.attributes[this.attr],10):this.text=[],!0)}parseText(i){this.attr||this.text.push(i)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{constructor(i){super(),this.tag=i.tag,this.attr=i.attr,this.attrs=i.attrs}render(i,s){s!==void 0&&(i.openNode(this.tag),this.attrs&&i.addAttributes(this.attrs),this.attr?i.addAttribute(this.attr,s):i.writeText(s),i.closeNode())}parseOpen(i){i.name===this.tag&&(this.attr?this.model=i.attributes[this.attr]:this.text=[])}parseText(i){this.attr||this.text.push(i)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(n,t,e){"use strict";let r=n("./base-xform"),i=n("../../utils/xml-stream");t.exports=class extends r{constructor(s){super(),this._model=s}render(s){if(!this._xml){let o=new i;(function a(l,c){l.openNode(c.tag,c.$),c.c&&c.c.forEach(h=>{a(l,h)}),c.t&&l.writeText(c.t),l.closeNode()})(o,this._model),this._xml=o.xml}s.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(s){switch(s){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(n,t,e){"use strict";let r=n("./text-xform"),i=n("./rich-text-xform"),s=n("../base-xform");t.exports=class extends s{constructor(){super(),this.map={r:new i,t:new r}}get tag(){return"rPh"}render(o,a){if(o.openNode(this.tag,{sb:a.sb||0,eb:a.eb||0}),a&&a.hasOwnProperty("richText")&&a.richText){let{r:l}=this.map;a.richText.forEach(c=>{l.render(o,c)})}else a&&this.map.t.render(o,a.text);o.closeNode()}parseOpen(o){let{name:a}=o;return this.parser?(this.parser.parseOpen(o),!0):a===this.tag?(this.model={sb:parseInt(o.attributes.sb,10),eb:parseInt(o.attributes.eb,10)},!0):(this.parser=this.map[a],!!this.parser&&(this.parser.parseOpen(o),!0))}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser){if(!this.parser.parseClose(o)){switch(o){case"r":{let a=this.model.richText;a||(a=this.model.richText=[]),a.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(n,t,e){"use strict";let r=n("./text-xform"),i=n("../style/font-xform"),s=n("../base-xform");class o extends s{constructor(l){super(),this.model=l}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new r)}get fontXform(){return this._fontXform||(this._fontXform=new i(o.FONT_OPTIONS))}render(l,c){c=c||this.model,l.openNode("r"),c.font&&this.fontXform.render(l,c.font),this.textXform.render(l,c.text),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(l),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){switch(l){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(l),!0}}}o.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},t.exports=o},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(n,t,e){"use strict";let r=n("./text-xform"),i=n("./rich-text-xform"),s=n("./phonetic-text-xform"),o=n("../base-xform");t.exports=class extends o{constructor(a){super(),this.model=a,this.map={r:new i,t:new r,rPh:new s}}get tag(){return"si"}render(a,l){a.openNode(this.tag),l&&l.hasOwnProperty("richText")&&l.richText?l.richText.length?l.richText.forEach(c=>{this.map.r.render(a,c)}):this.map.t.render(a,""):l!=null&&this.map.t.render(a,l),a.closeNode()}parseOpen(a){let{name:l}=a;return this.parser?(this.parser.parseOpen(a),!0):l===this.tag?(this.model={},!0):(this.parser=this.map[l],!!this.parser&&(this.parser.parseOpen(a),!0))}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser){if(!this.parser.parseClose(a)){switch(a){case"r":{let l=this.model.richText;l||(l=this.model.richText=[]),l.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(n,t,e){"use strict";let r=n("../../../utils/xml-stream"),i=n("../base-xform"),s=n("./shared-string-xform");t.exports=class extends i{constructor(o){super(),this.model=o||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new s)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(o){return this.model.values[o]}add(o){return o.richText?this.addRichText(o):this.addText(o)}addText(o){let a=this.hash[o];return a===void 0&&(a=this.hash[o]=this.model.values.length,this.model.values.push(o)),this.model.count++,a}addRichText(o){let a=this.sharedStringXform.toXml(o),l=this.rich[a];return l===void 0&&(l=this.rich[a]=this.model.values.length,this.model.values.push(o)),this.model.count++,l}render(o,a){a=a||this._values,o.openXml(r.StdDocAttributes),o.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:a.count,uniqueCount:a.values.length});let l=this.sharedStringXform;a.values.forEach(c=>{l.render(o,c)}),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(o),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(o))}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(o){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+o)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"t"}render(i,s){i.openNode("t"),/^\s|\n|\s$/.test(s)&&i.addAttribute("xml:space","preserve"),i.writeText(s),i.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(i,s)=>String.fromCharCode(parseInt(s,16)))}parseOpen(i){switch(i.name){case"t":return this._text=[],!0;default:return!1}}parseText(i){this._text.push(i)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(n,t,e){"use strict";let r=n("../../../doc/enums"),i=n("../../../utils/utils"),s=n("../base-xform"),o={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((l,c)=>(l[c]=!0,l),{}),horizontal(l){return this.horizontalValues[l]?l:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((l,c)=>(l[c]=!0,l),{}),vertical(l){return l==="middle"?"center":this.verticalValues[l]?l:void 0},wrapText:l=>!!l||void 0,shrinkToFit:l=>!!l||void 0,textRotation(l){switch(l){case"vertical":return l;default:return(l=i.validInt(l))>=-90&&l<=90?l:void 0}},indent:l=>(l=i.validInt(l),Math.max(0,l)),readingOrder(l){switch(l){case"ltr":return r.ReadingOrder.LeftToRight;case"rtl":return r.ReadingOrder.RightToLeft;default:return}}},a={toXml(l){if(l=o.textRotation(l)){if(l==="vertical")return 255;let c=Math.round(l);if(c>=0&&c<=90)return c;if(c<0&&c>=-90)return 90-c}},toModel(l){let c=i.validInt(l);if(c!==void 0){if(c===255)return"vertical";if(c>=0&&c<=90)return c;if(c>90&&c<=180)return 90-c}}};t.exports=class extends s{get tag(){return"alignment"}render(l,c){l.addRollback(),l.openNode("alignment");let h=!1;function d(p,g){g&&(l.addAttribute(p,g),h=!0)}d("horizontal",o.horizontal(c.horizontal)),d("vertical",o.vertical(c.vertical)),d("wrapText",!!o.wrapText(c.wrapText)&&"1"),d("shrinkToFit",!!o.shrinkToFit(c.shrinkToFit)&&"1"),d("indent",o.indent(c.indent)),d("textRotation",a.toXml(c.textRotation)),d("readingOrder",o.readingOrder(c.readingOrder)),l.closeNode(),h?l.commit():l.rollback()}parseOpen(l){let c={},h=!1;function d(p,g,m){p&&(c[g]=m,h=!0)}d(l.attributes.horizontal,"horizontal",l.attributes.horizontal),d(l.attributes.vertical,"vertical",l.attributes.vertical==="center"?"middle":l.attributes.vertical),d(l.attributes.wrapText,"wrapText",i.parseBoolean(l.attributes.wrapText)),d(l.attributes.shrinkToFit,"shrinkToFit",i.parseBoolean(l.attributes.shrinkToFit)),d(l.attributes.indent,"indent",parseInt(l.attributes.indent,10)),d(l.attributes.textRotation,"textRotation",a.toModel(l.attributes.textRotation)),d(l.attributes.readingOrder,"readingOrder",l.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=h?c:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("../../../utils/utils"),s=n("./color-xform");class o extends r{constructor(l){super(),this.name=l,this.map={color:new s}}get tag(){return this.name}render(l,c,h){let d=c&&c.color||h||this.defaultColor;l.openNode(this.name),c&&c.style&&(l.addAttribute("style",c.style),d&&this.map.color.render(l,d)),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.name:{let{style:c}=l.attributes;return this.model=c?{style:c}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return this.parser?(this.parser.parseClose(l)||(this.parser=void 0),!0):(l===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(l){return o.validStyleValues[l]}}o.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((a,l)=>(a[l]=!0,a),{}),t.exports=class extends r{constructor(){super(),this.map={top:new o("top"),left:new o("left"),bottom:new o("bottom"),right:new o("right"),diagonal:new o("diagonal")}}render(a,l){let{color:c}=l;function h(d,p){d&&!d.color&&l.color&&(d={...d,color:l.color}),p.render(a,d,c)}a.openNode("border"),l.diagonal&&l.diagonal.style&&(l.diagonal.up&&a.addAttribute("diagonalUp","1"),l.diagonal.down&&a.addAttribute("diagonalDown","1")),h(l.left,this.map.left),h(l.right,this.map.right),h(l.top,this.map.top),h(l.bottom,this.map.bottom),h(l.diagonal,this.map.diagonal),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"border":return this.reset(),this.diagonalUp=i.parseBoolean(a.attributes.diagonalUp),this.diagonalDown=i.parseBoolean(a.attributes.diagonalDown),!0;default:return this.parser=this.map[a.name],!!this.parser&&(this.parser.parseOpen(a),!0)}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;if(a==="border"){let l=this.model={},c=function(h,d,p){d&&(p&&Object.assign(d,p),l[h]=d)};c("left",this.map.left.model),c("right",this.map.right.model),c("top",this.map.top.model),c("bottom",this.map.bottom.model),c("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{constructor(i){super(),this.name=i||"color"}get tag(){return this.name}render(i,s){return!!s&&(i.openNode(this.name),s.argb?i.addAttribute("rgb",s.argb):s.theme!==void 0?(i.addAttribute("theme",s.theme),s.tint!==void 0&&i.addAttribute("tint",s.tint)):s.indexed!==void 0?i.addAttribute("indexed",s.indexed):i.addAttribute("auto","1"),i.closeNode(),!0)}parseOpen(i){return i.name===this.name&&(i.attributes.rgb?this.model={argb:i.attributes.rgb}:i.attributes.theme?(this.model={theme:parseInt(i.attributes.theme,10)},i.attributes.tint&&(this.model.tint=parseFloat(i.attributes.tint))):i.attributes.indexed?this.model={indexed:parseInt(i.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("./alignment-xform"),s=n("./border-xform"),o=n("./fill-xform"),a=n("./font-xform"),l=n("./numfmt-xform"),c=n("./protection-xform");t.exports=class extends r{constructor(){super(),this.map={alignment:new i,border:new s,fill:new o,font:new a,numFmt:new l,protection:new c}}get tag(){return"dxf"}render(h,d){if(h.openNode(this.tag),d.font&&this.map.font.render(h,d.font),d.numFmt&&d.numFmtId){let p={id:d.numFmtId,formatCode:d.numFmt};this.map.numFmt.render(h,p)}d.fill&&this.map.fill.render(h,d.fill),d.alignment&&this.map.alignment.render(h,d.alignment),d.border&&this.map.border.render(h,d.border),d.protection&&this.map.protection.render(h,d.protection),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h),!0}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return this.parser?(this.parser.parseClose(h)||(this.parser=void 0),!0):h!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("./color-xform");class s extends r{constructor(){super(),this.map={color:new i}}get tag(){return"stop"}render(h,d){h.openNode("stop"),h.addAttribute("position",d.position),this.map.color.render(h,d.color),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"stop":return this.model={position:parseFloat(h.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(h),!0;default:return!1}}parseText(){}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class o extends r{constructor(){super(),this.map={fgColor:new i("fgColor"),bgColor:new i("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(h,d){h.openNode("patternFill"),h.addAttribute("patternType",d.pattern),d.fgColor&&this.map.fgColor.render(h,d.fgColor),d.bgColor&&this.map.bgColor.render(h,d.bgColor),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"patternFill":return this.model={type:"pattern",pattern:h.attributes.patternType},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.parser.model&&(this.model[h]=this.parser.model),this.parser=void 0),!0)}}class a extends r{constructor(){super(),this.map={stop:new s}}get name(){return"gradient"}get tag(){return"gradientFill"}render(h,d){switch(h.openNode("gradientFill"),d.gradient){case"angle":h.addAttribute("degree",d.degree);break;case"path":h.addAttribute("type","path"),d.center.left&&(h.addAttribute("left",d.center.left),d.center.right===void 0&&h.addAttribute("right",d.center.left)),d.center.right&&h.addAttribute("right",d.center.right),d.center.top&&(h.addAttribute("top",d.center.top),d.center.bottom===void 0&&h.addAttribute("bottom",d.center.top)),d.center.bottom&&h.addAttribute("bottom",d.center.bottom)}let p=this.map.stop;d.stops.forEach(g=>{p.render(h,g)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"gradientFill":{let d=this.model={stops:[]};return h.attributes.degree?(d.gradient="angle",d.degree=parseInt(h.attributes.degree,10)):h.attributes.type==="path"&&(d.gradient="path",d.center={left:h.attributes.left?parseFloat(h.attributes.left):0,top:h.attributes.top?parseFloat(h.attributes.top):0},h.attributes.right!==h.attributes.left&&(d.center.right=h.attributes.right?parseFloat(h.attributes.right):0),h.attributes.bottom!==h.attributes.top&&(d.center.bottom=h.attributes.bottom?parseFloat(h.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(h),!0;default:return!1}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class l extends r{constructor(){super(),this.map={patternFill:new o,gradientFill:new a}}get tag(){return"fill"}render(h,d){switch(h.addRollback(),h.openNode("fill"),d.type){case"pattern":this.map.patternFill.render(h,d);break;case"gradient":this.map.gradientFill.render(h,d);break;default:return void h.rollback()}h.closeNode(),h.commit()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"fill":return this.model={},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(h){return l.validPatternValues[h]}}l.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((c,h)=>(c[h]=!0,c),{}),l.StopXform=s,l.PatternFillXform=o,l.GradientFillXform=a,t.exports=l},{"../base-xform":32,"./color-xform":128}],131:[function(n,t,e){"use strict";let r=n("./color-xform"),i=n("../simple/boolean-xform"),s=n("../simple/integer-xform"),o=n("../simple/string-xform"),a=n("./underline-xform"),l=n("../../../utils/under-dash"),c=n("../base-xform");class h extends c{constructor(p){super(),this.options=p||h.OPTIONS,this.map={b:{prop:"bold",xform:new i({tag:"b",attr:"val"})},i:{prop:"italic",xform:new i({tag:"i",attr:"val"})},u:{prop:"underline",xform:new a},charset:{prop:"charset",xform:new s({tag:"charset",attr:"val"})},color:{prop:"color",xform:new r},condense:{prop:"condense",xform:new i({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new i({tag:"extend",attr:"val"})},family:{prop:"family",xform:new s({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new i({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new o({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new o({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new i({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new i({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new s({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new o({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(p,g){let{map:m}=this;p.openNode(this.options.tagName),l.each(this.map,(b,y)=>{m[y].xform.render(p,g[b.prop])}),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;if(this.map[p.name])return this.parser=this.map[p.name].xform,this.parser.parseOpen(p);switch(p.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser&&!this.parser.parseClose(p)){let g=this.map[p];return this.parser.model&&(this.model[g.prop]=this.parser.model),this.parser=void 0,!0}switch(p){case this.options.tagName:return!1;default:return!0}}}h.OPTIONS={tagName:"font",fontNameTag:"name"},t.exports=h},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(n,t,e){"use strict";let r=n("../../../utils/under-dash"),i=n("../../defaultnumformats"),s=n("../base-xform"),o=function(){let l={};return r.each(i,(c,h)=>{c.f&&(l[c.f]=parseInt(h,10))}),l}();class a extends s{constructor(c,h){super(),this.id=c,this.formatCode=h}get tag(){return"numFmt"}render(c,h){c.leafNode("numFmt",{numFmtId:h.id,formatCode:h.formatCode})}parseOpen(c){switch(c.name){case"numFmt":return this.model={id:parseInt(c.attributes.numFmtId,10),formatCode:c.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}a.getDefaultFmtId=function(l){return o[l]},a.getDefaultFmtCode=function(l){return i[l]&&i[l].f},t.exports=a},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(n,t,e){"use strict";let r=n("../base-xform"),i={boolean:(s,o)=>s===void 0?o:s};t.exports=class extends r{get tag(){return"protection"}render(s,o){s.addRollback(),s.openNode("protection");let a=!1;function l(c,h){h!==void 0&&(s.addAttribute(c,h),a=!0)}l("locked",i.boolean(o.locked,!0)?void 0:"0"),l("hidden",i.boolean(o.hidden,!1)?"1":void 0),s.closeNode(),a?s.commit():s.rollback()}parseOpen(s){let o={locked:s.attributes.locked!=="0",hidden:s.attributes.hidden==="1"},a=!o.locked||o.hidden;this.model=a?o:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("./alignment-xform"),s=n("./protection-xform");t.exports=class extends r{constructor(o){super(),this.xfId=!(!o||!o.xfId),this.map={alignment:new i,protection:new s}}get tag(){return"xf"}render(o,a){o.openNode("xf",{numFmtId:a.numFmtId||0,fontId:a.fontId||0,fillId:a.fillId||0,borderId:a.borderId||0}),this.xfId&&o.addAttribute("xfId",a.xfId||0),a.numFmtId&&o.addAttribute("applyNumberFormat","1"),a.fontId&&o.addAttribute("applyFont","1"),a.fillId&&o.addAttribute("applyFill","1"),a.borderId&&o.addAttribute("applyBorder","1"),a.alignment&&o.addAttribute("applyAlignment","1"),a.protection&&o.addAttribute("applyProtection","1"),a.alignment&&this.map.alignment.render(o,a.alignment),a.protection&&this.map.protection.render(o,a.protection),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case"xf":return this.model={numFmtId:parseInt(o.attributes.numFmtId,10),fontId:parseInt(o.attributes.fontId,10),fillId:parseInt(o.attributes.fillId,10),borderId:parseInt(o.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(o.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(o),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(o),!0;default:return!1}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){return this.parser?(this.parser.parseClose(o)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):o!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(n,t,e){"use strict";let r=n("../../../doc/enums"),i=n("../../../utils/xml-stream"),s=n("../base-xform"),o=n("../static-xform"),a=n("../list-xform"),l=n("./font-xform"),c=n("./fill-xform"),h=n("./border-xform"),d=n("./numfmt-xform"),p=n("./style-xform"),g=n("./dxf-xform");class m extends s{constructor(y){super(),this.map={numFmts:new a({tag:"numFmts",count:!0,childXform:new d}),fonts:new a({tag:"fonts",count:!0,childXform:new l,$:{"x14ac:knownFonts":1}}),fills:new a({tag:"fills",count:!0,childXform:new c}),borders:new a({tag:"borders",count:!0,childXform:new h}),cellStyleXfs:new a({tag:"cellStyleXfs",count:!0,childXform:new p}),cellXfs:new a({tag:"cellXfs",count:!0,childXform:new p({xfId:!0})}),dxfs:new a({tag:"dxfs",always:!0,count:!0,childXform:new g}),numFmt:new d,font:new l,fill:new c,border:new h,style:new p({xfId:!0}),cellStyles:m.STATIC_XFORMS.cellStyles,tableStyles:m.STATIC_XFORMS.tableStyles,extLst:m.STATIC_XFORMS.extLst},y&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(y,x){x=x||this.model,y.openXml(i.StdDocAttributes),y.openNode("styleSheet",m.STYLESHEET_ATTRIBUTES),this.index?(x.numFmts&&x.numFmts.length&&(y.openNode("numFmts",{count:x.numFmts.length}),x.numFmts.forEach(S=>{y.writeXml(S)}),y.closeNode()),x.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),y.openNode("fonts",{count:x.fonts.length,"x14ac:knownFonts":1}),x.fonts.forEach(S=>{y.writeXml(S)}),y.closeNode(),y.openNode("fills",{count:x.fills.length}),x.fills.forEach(S=>{y.writeXml(S)}),y.closeNode(),y.openNode("borders",{count:x.borders.length}),x.borders.forEach(S=>{y.writeXml(S)}),y.closeNode(),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),y.openNode("cellXfs",{count:x.styles.length}),x.styles.forEach(S=>{y.writeXml(S)}),y.closeNode()):(this.map.numFmts.render(y,x.numFmts),this.map.fonts.render(y,x.fonts),this.map.fills.render(y,x.fills),this.map.borders.render(y,x.borders),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(y,x.styles)),m.STATIC_XFORMS.cellStyles.render(y),this.map.dxfs.render(y,x.dxfs),m.STATIC_XFORMS.tableStyles.render(y),m.STATIC_XFORMS.extLst.render(y),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"styleSheet":{this.model={};let x=(S,O)=>{O.model&&O.model.length&&(this.model[S]=O.model)};if(x("numFmts",this.map.numFmts),x("fonts",this.map.fonts),x("fills",this.map.fills),x("borders",this.map.borders),x("styles",this.map.cellXfs),x("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){let S=this.index.numFmt;this.model.numFmts.forEach(O=>{S[O.id]=O.formatCode})}return!1}default:return!0}}addStyleModel(y,x){if(!y)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(y))return this.weakMap.get(y);let S={};if(x=x||r.ValueType.Number,y.numFmt)S.numFmtId=this._addNumFmtStr(y.numFmt);else switch(x){case r.ValueType.Number:S.numFmtId=this._addNumFmtStr("General");break;case r.ValueType.Date:S.numFmtId=this._addNumFmtStr("mm-dd-yy")}y.font&&(S.fontId=this._addFont(y.font)),y.border&&(S.borderId=this._addBorder(y.border)),y.fill&&(S.fillId=this._addFill(y.fill)),y.alignment&&(S.alignment=y.alignment),y.protection&&(S.protection=y.protection);let O=this._addStyle(S);return this.weakMap&&this.weakMap.set(y,O),O}getStyleModel(y){let x=this.model.styles[y];if(!x)return null;let S=this.index.model[y];if(S)return S;if(S=this.index.model[y]={},x.numFmtId){let D=this.index.numFmt[x.numFmtId]||d.getDefaultFmtCode(x.numFmtId);D&&(S.numFmt=D)}function O(D,U,z){if(z||z===0){let q=U[z];q&&(S[D]=q)}}return O("font",this.model.fonts,x.fontId),O("border",this.model.borders,x.borderId),O("fill",this.model.fills,x.fillId),x.alignment&&(S.alignment=x.alignment),x.protection&&(S.protection=x.protection),S}addDxfStyle(y){return y.numFmt&&(y.numFmtId=this._addNumFmtStr(y.numFmt)),this.model.dxfs.push(y),this.model.dxfs.length-1}getDxfStyle(y){return this.model.dxfs[y]}_addStyle(y){let x=this.map.style.toXml(y),S=this.index.style[x];return S===void 0&&(S=this.index.style[x]=this.model.styles.length,this.model.styles.push(x)),S}_addNumFmtStr(y){let x=d.getDefaultFmtId(y);if(x!==void 0||(x=this.index.numFmt[y],x!==void 0))return x;x=this.index.numFmt[y]=164+this.model.numFmts.length;let S=this.map.numFmt.toXml({id:x,formatCode:y});return this.model.numFmts.push(S),x}_addFont(y){let x=this.map.font.toXml(y),S=this.index.font[x];return S===void 0&&(S=this.index.font[x]=this.model.fonts.length,this.model.fonts.push(x)),S}_addBorder(y){let x=this.map.border.toXml(y),S=this.index.border[x];return S===void 0&&(S=this.index.border[x]=this.model.borders.length,this.model.borders.push(x)),S}_addFill(y){let x=this.map.fill.toXml(y),S=this.index.fill[x];return S===void 0&&(S=this.index.fill[x]=this.model.fills.length,this.model.fills.push(x)),S}}m.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},m.STATIC_XFORMS={cellStyles:new o({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new o({tag:"dxfs",$:{count:0}}),tableStyles:new o({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new o({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},m.Mock=class extends m{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(b){return b.autodrain(),Promise.resolve()}addStyleModel(b,y){switch(y){case r.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){let b={numFmtId:d.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(b)}return this._dateStyleId}getStyleModel(){return{}}},t.exports=m},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(n,t,e){"use strict";let r=n("../base-xform");class i extends r{constructor(o){super(),this.model=o}get tag(){return"u"}render(o,a){if((a=a||this.model)===!0)o.leafNode("u");else{let l=i.Attributes[a];l&&o.leafNode("u",l)}}parseOpen(o){o.name==="u"&&(this.model=o.attributes.val||!0)}parseText(){}parseClose(){return!1}}i.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},t.exports=i},{"../base-xform":32}],137:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("./filter-column-xform");t.exports=class extends r{constructor(){super(),this.map={filterColumn:new i}}get tag(){return"autoFilter"}prepare(s){s.columns.forEach((o,a)=>{this.map.filterColumn.prepare(o,{index:a})})}render(s,o){return s.openNode(this.tag,{ref:o.autoFilterRef}),o.columns.forEach(a=>{this.map.filterColumn.render(s,a)}),s.closeNode(),!0}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:return this.model={autoFilterRef:s.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[s.name],this.parser)return this.parseOpen(s),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(s))}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(s){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+s)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"customFilter"}render(i,s){i.leafNode(this.tag,{val:s.val,operator:s.operator})}parseOpen(i){return i.name===this.tag&&(this.model={val:i.attributes.val,operator:i.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(n,t,e){"use strict";let r=n("../base-xform"),i=n("../list-xform"),s=n("./custom-filter-xform"),o=n("./filter-xform");t.exports=class extends r{constructor(){super(),this.map={customFilters:new i({tag:"customFilters",count:!1,empty:!0,childXform:new s}),filters:new i({tag:"filters",count:!1,empty:!0,childXform:new o})}}get tag(){return"filterColumn"}prepare(a,l){a.colId=l.index.toString()}render(a,l){return l.customFilters?(a.openNode(this.tag,{colId:l.colId,hiddenButton:l.filterButton?"0":"1"}),this.map.customFilters.render(a,l.customFilters),a.closeNode(),!0):(a.leafNode(this.tag,{colId:l.colId,hiddenButton:l.filterButton?"0":"1"}),!0)}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;let{attributes:l}=a;switch(a.name){case this.tag:return this.model={filterButton:l.hiddenButton==="0"},!0;default:if(this.parser=this.map[a.name],this.parser)return this.parseOpen(a),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"filter"}render(i,s){i.leafNode(this.tag,{val:s.val})}parseOpen(i){return i.name===this.tag&&(this.model={val:i.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"tableColumn"}prepare(i,s){i.id=s.index+1}render(i,s){return i.leafNode(this.tag,{id:s.id.toString(),name:s.name,totalsRowLabel:s.totalsRowLabel,totalsRowFunction:s.totalsRowFunction,dxfId:s.dxfId}),!0}parseOpen(i){if(i.name===this.tag){let{attributes:s}=i;return this.model={name:s.name,totalsRowLabel:s.totalsRowLabel,totalsRowFunction:s.totalsRowFunction,dxfId:s.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(n,t,e){"use strict";let r=n("../base-xform");t.exports=class extends r{get tag(){return"tableStyleInfo"}render(i,s){return i.leafNode(this.tag,{name:s.theme?s.theme:void 0,showFirstColumn:s.showFirstColumn?"1":"0",showLastColumn:s.showLastColumn?"1":"0",showRowStripes:s.showRowStripes?"1":"0",showColumnStripes:s.showColumnStripes?"1":"0"}),!0}parseOpen(i){if(i.name===this.tag){let{attributes:s}=i;return this.model={theme:s.name?s.name:null,showFirstColumn:s.showFirstColumn==="1",showLastColumn:s.showLastColumn==="1",showRowStripes:s.showRowStripes==="1",showColumnStripes:s.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(n,t,e){"use strict";let r=n("../../../utils/xml-stream"),i=n("../base-xform"),s=n("../list-xform"),o=n("./auto-filter-xform"),a=n("./table-column-xform"),l=n("./table-style-info-xform");class c extends i{constructor(){super(),this.map={autoFilter:new o,tableColumns:new s({tag:"tableColumns",count:!0,empty:!0,childXform:new a}),tableStyleInfo:new l}}prepare(d,p){this.map.autoFilter.prepare(d),this.map.tableColumns.prepare(d.columns,p)}get tag(){return"table"}render(d,p){d.openXml(r.StdDocAttributes),d.openNode(this.tag,{...c.TABLE_ATTRIBUTES,id:p.id,name:p.name,displayName:p.displayName||p.name,ref:p.tableRef,totalsRowCount:p.totalsRow?"1":void 0,totalsRowShown:p.totalsRow?void 0:"1",headerRowCount:p.headerRow?"1":"0"}),this.map.autoFilter.render(d,p),this.map.tableColumns.render(d,p.columns),this.map.tableStyleInfo.render(d,p.style),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;let{name:p,attributes:g}=d;switch(p){case this.tag:this.reset(),this.model={name:g.name,displayName:g.displayName||g.name,tableRef:g.ref,totalsRow:g.totalsRowCount==="1",headerRow:g.headerRowCount==="1"};break;default:this.parser=this.map[d.name],this.parser&&this.parser.parseOpen(d)}return!0}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((p,g)=>{this.model.columns[g].filterButton=p.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(d,p){d.columns.forEach(g=>{g.dxfId!==void 0&&(g.style=p.styles.getDxfStyle(g.dxfId))})}}c.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},t.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(n,t,e){(function(r,i){(function(){"use strict";let s=n("fs"),o=n("jszip"),{PassThrough:a}=n("readable-stream"),l=n("../utils/zip-stream"),c=n("../utils/stream-buf"),h=n("../utils/utils"),d=n("../utils/xml-stream"),{bufferToString:p}=n("../utils/browser-buffer-decode"),g=n("./xform/style/styles-xform"),m=n("./xform/core/core-xform"),b=n("./xform/strings/shared-strings-xform"),y=n("./xform/core/relationships-xform"),x=n("./xform/core/content-types-xform"),S=n("./xform/core/app-xform"),O=n("./xform/book/workbook-xform"),D=n("./xform/sheet/worksheet-xform"),U=n("./xform/drawing/drawing-xform"),z=n("./xform/table/table-xform"),q=n("./xform/comment/comments-xform"),G=n("./xform/comment/vml-notes-xform"),tt=n("./xml/theme1");class K{constructor(N){this.workbook=N}async readFile(N,Z){if(!await h.fs.exists(N))throw new Error("File not found: "+N);let w=s.createReadStream(N);try{let C=await this.read(w,Z);return w.close(),C}catch(C){throw w.close(),C}}parseRels(N){return new y().parseStream(N)}parseWorkbook(N){return new O().parseStream(N)}parseSharedStrings(N){return new b().parseStream(N)}reconcile(N,Z){let w=new O,C=new D(Z),k=new U,T=new z;w.reconcile(N);let R={media:N.media,mediaIndex:N.mediaIndex};Object.keys(N.drawings).forEach(rt=>{let ot=N.drawings[rt],dt=N.drawingRels[rt];dt&&(R.rels=dt.reduce(($,ct)=>($[ct.Id]=ct,$),{}),(ot.anchors||[]).forEach($=>{let ct=$.picture&&$.picture.hyperlinks;ct&&R.rels[ct.rId]&&(ct.hyperlink=R.rels[ct.rId].Target,delete ct.rId)}),k.reconcile(ot,R))});let F={styles:N.styles};Object.values(N.tables).forEach(rt=>{T.reconcile(rt,F)});let H={styles:N.styles,sharedStrings:N.sharedStrings,media:N.media,mediaIndex:N.mediaIndex,date1904:N.properties&&N.properties.date1904,drawings:N.drawings,comments:N.comments,tables:N.tables,vmlDrawings:N.vmlDrawings};N.worksheets.forEach(rt=>{rt.relationships=N.worksheetRels[rt.sheetNo],C.reconcile(rt,H)}),delete N.worksheetHash,delete N.worksheetRels,delete N.globalRels,delete N.sharedStrings,delete N.workbookRels,delete N.sheetDefs,delete N.styles,delete N.mediaIndex,delete N.drawings,delete N.drawingRels,delete N.vmlDrawings}async _processWorksheetEntry(N,Z,w,C,k){let T=new D(C),R=await T.parseStream(N);R.sheetNo=w,Z.worksheetHash[k]=R,Z.worksheets.push(R)}async _processCommentEntry(N,Z,w){let C=new q,k=await C.parseStream(N);Z.comments[`../${w}.xml`]=k}async _processTableEntry(N,Z,w){let C=new z,k=await C.parseStream(N);Z.tables[`../tables/${w}.xml`]=k}async _processWorksheetRelsEntry(N,Z,w){let C=new y,k=await C.parseStream(N);Z.worksheetRels[w]=k}async _processMediaEntry(N,Z,w){let C=w.lastIndexOf(".");if(C>=1){let k=w.substr(C+1),T=w.substr(0,C);await new Promise((R,F)=>{let H=new c;H.on("finish",()=>{Z.mediaIndex[w]=Z.media.length,Z.mediaIndex[T]=Z.media.length;let rt={type:"image",name:T,extension:k,buffer:H.toBuffer()};Z.media.push(rt),R()}),N.on("error",rt=>{F(rt)}),N.pipe(H)})}}async _processDrawingEntry(N,Z,w){let C=new U,k=await C.parseStream(N);Z.drawings[w]=k}async _processDrawingRelsEntry(N,Z,w){let C=new y,k=await C.parseStream(N);Z.drawingRels[w]=k}async _processVmlDrawingEntry(N,Z,w){let C=new G,k=await C.parseStream(N);Z.vmlDrawings[`../drawings/${w}.vml`]=k}async _processThemeEntry(N,Z,w){await new Promise((C,k)=>{let T=new c;N.on("error",k),T.on("error",k),T.on("finish",()=>{Z.themes[w]=T.read().toString(),C()}),N.pipe(T)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(N,Z){!N[Symbol.asyncIterator]&&N.pipe&&(N=N.pipe(new a));let w=[];for await(let C of N)w.push(C);return this.load(i.concat(w),Z)}async load(N,Z){let w;w=Z&&Z.base64?i.from(N.toString(),"base64"):N;let C={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},k=await o.loadAsync(w);for(let T of Object.values(k.files))if(!T.dir){let R,F=T.name;if(F[0]==="/"&&(F=F.substr(1)),F.match(/xl\/media\//)||F.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))R=new a,R.write(await T.async("nodebuffer"));else{let H;R=new a({writableObjectMode:!0,readableObjectMode:!0}),H=r.browser?p(await T.async("nodebuffer")):await T.async("string");let rt=16384;for(let ot=0;ot<H.length;ot+=rt)R.write(H.substring(ot,ot+rt))}switch(R.end(),F){case"_rels/.rels":C.globalRels=await this.parseRels(R);break;case"xl/workbook.xml":{let H=await this.parseWorkbook(R);C.sheets=H.sheets,C.definedNames=H.definedNames,C.views=H.views,C.properties=H.properties,C.calcProperties=H.calcProperties;break}case"xl/_rels/workbook.xml.rels":C.workbookRels=await this.parseRels(R);break;case"xl/sharedStrings.xml":C.sharedStrings=new b,await C.sharedStrings.parseStream(R);break;case"xl/styles.xml":C.styles=new g,await C.styles.parseStream(R);break;case"docProps/app.xml":{let H=new S,rt=await H.parseStream(R);C.company=rt.company,C.manager=rt.manager;break}case"docProps/core.xml":{let H=new m,rt=await H.parseStream(R);Object.assign(C,rt);break}default:{let H=F.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(H){await this._processWorksheetEntry(R,C,H[1],Z,F);break}if(H=F.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),H){await this._processWorksheetRelsEntry(R,C,H[1]);break}if(H=F.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),H){await this._processThemeEntry(R,C,H[1]);break}if(H=F.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),H){await this._processMediaEntry(R,C,H[1]);break}if(H=F.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),H){await this._processDrawingEntry(R,C,H[1]);break}if(H=F.match(/xl\/(comments\d+)[.]xml/),H){await this._processCommentEntry(R,C,H[1]);break}if(H=F.match(/xl\/tables\/(table\d+)[.]xml/),H){await this._processTableEntry(R,C,H[1]);break}if(H=F.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),H){await this._processDrawingRelsEntry(R,C,H[1]);break}if(H=F.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),H){await this._processVmlDrawingEntry(R,C,H[1]);break}}}}return this.reconcile(C,Z),this.workbook.model=C,this.workbook}async addMedia(N,Z){await Promise.all(Z.media.map(async w=>{if(w.type==="image"){let C=`xl/media/${w.name}.${w.extension}`;if(w.filename){let k=await function(T,R){return new Promise((F,H)=>{s.readFile(T,R,(rt,ot)=>{rt?H(rt):F(ot)})})}(w.filename);return N.append(k,{name:C})}if(w.buffer)return N.append(w.buffer,{name:C});if(w.base64){let k=w.base64,T=k.substring(k.indexOf(",")+1);return N.append(T,{name:C,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(N,Z){let w=new U,C=new y;Z.worksheets.forEach(k=>{let{drawing:T}=k;if(T){w.prepare(T,{});let R=w.toXml(T);N.append(R,{name:`xl/drawings/${T.name}.xml`}),R=C.toXml(T.rels),N.append(R,{name:`xl/drawings/_rels/${T.name}.xml.rels`})}})}addTables(N,Z){let w=new z;Z.worksheets.forEach(C=>{let{tables:k}=C;k.forEach(T=>{w.prepare(T,{});let R=w.toXml(T);N.append(R,{name:"xl/tables/"+T.target})})})}async addContentTypes(N,Z){let w=new x().toXml(Z);N.append(w,{name:"[Content_Types].xml"})}async addApp(N,Z){let w=new S().toXml(Z);N.append(w,{name:"docProps/app.xml"})}async addCore(N,Z){let w=new m;N.append(w.toXml(Z),{name:"docProps/core.xml"})}async addThemes(N,Z){let w=Z.themes||{theme1:tt};Object.keys(w).forEach(C=>{let k=w[C],T=`xl/theme/${C}.xml`;N.append(k,{name:T})})}async addOfficeRels(N){let Z=new y().toXml([{Id:"rId1",Type:K.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:K.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:K.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);N.append(Z,{name:"_rels/.rels"})}async addWorkbookRels(N,Z){let w=1,C=[{Id:"rId"+w++,Type:K.RelType.Styles,Target:"styles.xml"},{Id:"rId"+w++,Type:K.RelType.Theme,Target:"theme/theme1.xml"}];Z.sharedStrings.count&&C.push({Id:"rId"+w++,Type:K.RelType.SharedStrings,Target:"sharedStrings.xml"}),Z.worksheets.forEach(T=>{T.rId="rId"+w++,C.push({Id:T.rId,Type:K.RelType.Worksheet,Target:`worksheets/sheet${T.id}.xml`})});let k=new y().toXml(C);N.append(k,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(N,Z){Z.sharedStrings&&Z.sharedStrings.count&&N.append(Z.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(N,Z){let{xml:w}=Z.styles;w&&N.append(w,{name:"xl/styles.xml"})}async addWorkbook(N,Z){let w=new O;N.append(w.toXml(Z),{name:"xl/workbook.xml"})}async addWorksheets(N,Z){let w=new D,C=new y,k=new q,T=new G;Z.worksheets.forEach(R=>{let F=new d;w.render(F,R),N.append(F.xml,{name:`xl/worksheets/sheet${R.id}.xml`}),R.rels&&R.rels.length&&(F=new d,C.render(F,R.rels),N.append(F.xml,{name:`xl/worksheets/_rels/sheet${R.id}.xml.rels`})),R.comments.length>0&&(F=new d,k.render(F,R),N.append(F.xml,{name:`xl/comments${R.id}.xml`}),F=new d,T.render(F,R),N.append(F.xml,{name:`xl/drawings/vmlDrawing${R.id}.vml`}))})}_finalize(N){return new Promise((Z,w)=>{N.on("finish",()=>{Z(this)}),N.on("error",w),N.finalize()})}prepareModel(N,Z){N.creator=N.creator||"ExcelJS",N.lastModifiedBy=N.lastModifiedBy||"ExcelJS",N.created=N.created||new Date,N.modified=N.modified||new Date,N.useSharedStrings=Z.useSharedStrings===void 0||Z.useSharedStrings,N.useStyles=Z.useStyles===void 0||Z.useStyles,N.sharedStrings=new b,N.styles=N.useStyles?new g(!0):new g.Mock;let w=new O,C=new D;w.prepare(N);let k={sharedStrings:N.sharedStrings,styles:N.styles,date1904:N.properties.date1904,drawingsCount:0,media:N.media};k.drawings=N.drawings=[],k.commentRefs=N.commentRefs=[];let T=0;N.tables=[],N.worksheets.forEach(R=>{R.tables.forEach(F=>{T++,F.target=`table${T}.xml`,F.id=T,N.tables.push(F)}),C.prepare(R,k)})}async write(N,Z){Z=Z||{};let{model:w}=this.workbook,C=new l.ZipWriter(Z.zip);return C.pipe(N),this.prepareModel(w,Z),await this.addContentTypes(C,w),await this.addOfficeRels(C,w),await this.addWorkbookRels(C,w),await this.addWorksheets(C,w),await this.addSharedStrings(C,w),await this.addDrawings(C,w),await this.addTables(C,w),await Promise.all([this.addThemes(C,w),this.addStyles(C,w)]),await this.addMedia(C,w),await Promise.all([this.addApp(C,w),this.addCore(C,w)]),await this.addWorkbook(C,w),this._finalize(C)}writeFile(N,Z){let w=s.createWriteStream(N);return new Promise((C,k)=>{w.on("finish",()=>{C()}),w.on("error",T=>{k(T)}),this.write(w,Z).then(()=>{w.end()}).catch(T=>{k(T)})})}async writeBuffer(N){let Z=new c;return await this.write(Z,N),Z.read()}}K.RelType=n("./rel-type"),t.exports=K}).call(this)}).call(this,n("_process"),n("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(n,t,e){"use strict";t.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/> <a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/> <a:font script="Hans" typeface="\u5B8B\u4F53"/> <a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/> <a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/> <a:font script="Hans" typeface="\u5B8B\u4F53"/> <a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(n,t,e){(function(r){(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CsvFormatterStream=void 0;let i=n("stream"),s=n("./formatter");class o extends i.Transform{constructor(l){super({writableObjectMode:l.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=l,this.rowFormatter=new s.RowFormatter(l),this.hasWrittenBOM=!l.writeBOM}transform(l){return this.rowFormatter.rowTransform=l,this}_transform(l,c,h){let d=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(l,(p,g)=>p?(d=!0,h(p)):(g&&g.forEach(m=>{this.push(r.from(m,"utf8"))}),d=!0,h()))}catch(p){if(d)throw p;h(p)}}_flush(l){this.rowFormatter.finish((c,h)=>c?l(c):(h&&h.forEach(d=>{this.push(r.from(d,"utf8"))}),l()))}}e.CsvFormatterStream=o}).call(this)}).call(this,n("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormatterOptions=void 0,e.FormatterOptions=class{constructor(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var i;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,r||{}),r?.quoteHeaders===void 0&&(this.quoteHeaders=this.quoteColumns),r?.quote===!0?this.quote='"':r?.quote===!1&&(this.quote=""),typeof r?.escape!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((i=r.writeHeaders)===null||i===void 0||i),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(n,t,e){"use strict";var r=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.FieldFormatter=void 0;let i=r(n("lodash.isboolean")),s=r(n("lodash.isnil")),o=r(n("lodash.escaperegexp"));e.FieldFormatter=class{constructor(a){this._headers=null,this.formatterOptions=a,a.headers!==null&&(this.headers=a.headers),this.REPLACE_REGEXP=new RegExp(a.quote,"g");let l=`[${a.delimiter}${o.default(a.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(l)}set headers(a){this._headers=a}shouldQuote(a,l){let c=l?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return i.default(c)?c:Array.isArray(c)?c[a]:this._headers!==null&&c[this._headers[a]]}format(a,l,c){let h=(""+(s.default(a)?"":a)).replace(/\0/g,""),{formatterOptions:d}=this;return d.quote!==""&&h.indexOf(d.quote)!==-1?this.quoteField(h.replace(this.REPLACE_REGEXP,d.escapedQuote)):h.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(l,c)?this.quoteField(h):h}quoteField(a){let{quote:l}=this.formatterOptions;return`${l}${a}${l}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(n,t,e){"use strict";var r=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RowFormatter=void 0;let i=r(n("lodash.isfunction")),s=r(n("lodash.isequal")),o=n("./FieldFormatter"),a=n("../types");class l{constructor(h){this.rowCount=0,this.formatterOptions=h,this.fieldFormatter=new o.FieldFormatter(h),this.headers=h.headers,this.shouldWriteHeaders=h.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),h.transform&&(this.rowTransform=h.transform)}static isRowHashArray(h){return!!Array.isArray(h)&&Array.isArray(h[0])&&h[0].length===2}static isRowArray(h){return Array.isArray(h)&&!this.isRowHashArray(h)}static gatherHeaders(h){return l.isRowHashArray(h)?h.map(d=>d[0]):Array.isArray(h)?h:Object.keys(h)}static createTransform(h){return a.isSyncTransform(h)?(d,p)=>{let g=null;try{g=h(d)}catch(m){return p(m)}return p(null,g)}:(d,p)=>{h(d,p)}}set rowTransform(h){if(!i.default(h))throw new TypeError("The transform should be a function");this._rowTransform=l.createTransform(h)}format(h,d){this.callTransformer(h,(p,g)=>{if(p)return d(p);if(!h)return d(null);let m=[];if(g){let{shouldFormatColumns:b,headers:y}=this.checkHeaders(g);if(this.shouldWriteHeaders&&y&&!this.hasWrittenHeaders&&(m.push(this.formatColumns(y,!0)),this.hasWrittenHeaders=!0),b){let x=this.gatherColumns(g);m.push(this.formatColumns(x,!1))}}return d(null,m)})}finish(h){let d=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return h(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));d.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&d.push(this.formatterOptions.rowDelimiter),h(null,d)}checkHeaders(h){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};let d=l.gatherHeaders(h);return this.headers=d,this.fieldFormatter.headers=d,this.shouldWriteHeaders?{shouldFormatColumns:!s.default(d,h),headers:d}:{shouldFormatColumns:!0,headers:null}}gatherColumns(h){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(h)?l.isRowHashArray(h)?this.headers.map((d,p)=>{let g=h[p];return g?g[1]:""}):l.isRowArray(h)&&!this.shouldWriteHeaders?h:this.headers.map((d,p)=>h[p]):this.headers.map(d=>h[d])}callTransformer(h,d){return this._rowTransform?this._rowTransform(h,d):d(null,h)}formatColumns(h,d){let p=h.map((m,b)=>this.fieldFormatter.format(m,b,d)).join(this.formatterOptions.delimiter),{rowCount:g}=this;return this.rowCount+=1,g?[this.formatterOptions.rowDelimiter,p].join(""):p}}e.RowFormatter=l},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FieldFormatter=e.RowFormatter=void 0;var r=n("./RowFormatter");Object.defineProperty(e,"RowFormatter",{enumerable:!0,get:function(){return r.RowFormatter}});var i=n("./FieldFormatter");Object.defineProperty(e,"FieldFormatter",{enumerable:!0,get:function(){return i.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(n,t,e){(function(r){(function(){"use strict";var i=Object.create?function(b,y,x,S){S===void 0&&(S=x),Object.defineProperty(b,S,{enumerable:!0,get:function(){return y[x]}})}:function(b,y,x,S){S===void 0&&(S=x),b[S]=y[x]},s=Object.create?function(b,y){Object.defineProperty(b,"default",{enumerable:!0,value:y})}:function(b,y){b.default=y},o=function(b){if(b&&b.__esModule)return b;var y={};if(b!=null)for(var x in b)x!=="default"&&Object.prototype.hasOwnProperty.call(b,x)&&i(y,b,x);return s(y,b),y},a=function(b,y){for(var x in b)x==="default"||Object.prototype.hasOwnProperty.call(y,x)||i(y,b,x)};Object.defineProperty(e,"__esModule",{value:!0}),e.writeToPath=e.writeToString=e.writeToBuffer=e.writeToStream=e.write=e.format=e.FormatterOptions=e.CsvFormatterStream=void 0;let l=n("util"),c=n("stream"),h=o(n("fs")),d=n("./FormatterOptions"),p=n("./CsvFormatterStream");a(n("./types"),e);var g=n("./CsvFormatterStream");Object.defineProperty(e,"CsvFormatterStream",{enumerable:!0,get:function(){return g.CsvFormatterStream}});var m=n("./FormatterOptions");Object.defineProperty(e,"FormatterOptions",{enumerable:!0,get:function(){return m.FormatterOptions}}),e.format=b=>new p.CsvFormatterStream(new d.FormatterOptions(b)),e.write=(b,y)=>{let x=e.format(y),S=l.promisify((O,D)=>{x.write(O,void 0,D)});return b.reduce((O,D)=>O.then(()=>S(D)),Promise.resolve()).then(()=>x.end()).catch(O=>{x.emit("error",O)}),x},e.writeToStream=(b,y,x)=>e.write(y,x).pipe(b),e.writeToBuffer=function(b){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=[],S=new c.Writable({write(O,D,U){x.push(O),U()}});return new Promise((O,D)=>{S.on("error",D).on("finish",()=>O(r.concat(x))),e.write(b,y).pipe(S)})},e.writeToString=(b,y)=>e.writeToBuffer(b,y).then(x=>x.toString()),e.writeToPath=(b,y,x)=>{let S=h.createWriteStream(b,{encoding:"utf8"});return e.write(y,x).pipe(S)}}).call(this)}).call(this,n("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSyncTransform=void 0,e.isSyncTransform=r=>r.length===1},{}],153:[function(n,t,e){(function(r){(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CsvParserStream=void 0;let i=n("string_decoder"),s=n("stream"),o=n("./transforms"),a=n("./parser");class l extends s.Transform{constructor(h){super({objectMode:h.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=h,this.parser=new a.Parser(h),this.headerTransformer=new o.HeaderTransformer(h),this.decoder=new i.StringDecoder(h.encoding),this.rowTransformerValidator=new o.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(h){return this.rowTransformerValidator.rowTransform=h,this}validate(h){return this.rowTransformerValidator.rowValidator=h,this}emit(h){if(h==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var d=arguments.length,p=new Array(d>1?d-1:0),g=1;g<d;g++)p[g-1]=arguments[g];return super.emit(h,...p)}_transform(h,d,p){if(this.hasHitRowLimit)return p();let g=l.wrapDoneCallback(p);try{let{lines:m}=this,b=m+this.decoder.write(h),y=this.parse(b,!0);return this.processRows(y,g)}catch(m){return g(m)}}_flush(h){let d=l.wrapDoneCallback(h);if(this.hasHitRowLimit)return d();try{let p=this.lines+this.decoder.end(),g=this.parse(p,!1);return this.processRows(g,d)}catch(p){return d(p)}}parse(h,d){if(!h)return[];let{line:p,rows:g}=this.parser.parse(h,d);return this.lines=p,g}processRows(h,d){let p=h.length,g=m=>{let b=S=>S?d(S):m%100!=0?g(m+1):void r(()=>g(m+1));if(this.checkAndEmitHeaders(),m>=p||this.hasHitRowLimit)return d();if(this.parsedLineCount+=1,this.shouldSkipLine)return b();let y=h[m];this.rowCount+=1,this.parsedRowCount+=1;let x=this.rowCount;return this.transformRow(y,(S,O)=>{if(S)return this.rowCount-=1,b(S);if(!O)return b(new Error("expected transform result"));if(O.isValid){if(O.row)return this.pushRow(O.row,b)}else this.emit("data-invalid",O.row,x,O.reason);return b()})};g(0)}transformRow(h,d){try{this.headerTransformer.transform(h,(p,g)=>p?d(p):g?g.isValid?g.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(g.row,d):this.skipRow(d):(this.rowCount-=1,this.parsedRowCount-=1,d(null,{row:null,isValid:!0})):this.shouldEmitRows?d(null,{isValid:!1,row:h}):this.skipRow(d):d(new Error("Expected result from header transform")))}catch(p){d(p)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(h){return this.rowCount-=1,h(null,{row:null,isValid:!0})}pushRow(h,d){try{this.parserOptions.objectMode?this.push(h):this.push(JSON.stringify(h)),d()}catch(p){d(p)}}static wrapDoneCallback(h){let d=!1;return function(p){if(p){if(d)throw p;return d=!0,void h(p)}for(var g=arguments.length,m=new Array(g>1?g-1:0),b=1;b<g;b++)m[b-1]=arguments[b];h(...m)}}}e.CsvParserStream=l}).call(this)}).call(this,n("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(n,t,e){"use strict";var r=function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.ParserOptions=void 0;let i=r(n("lodash.escaperegexp")),s=r(n("lodash.isnil"));e.ParserOptions=class{constructor(o){var a;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,o||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=i.default(this.delimiter),this.escapeChar=(a=this.escape)!==null&&a!==void 0?a:this.quote,this.supportsComments=!s.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(n,t,e){"use strict";var r=Object.create?function(g,m,b,y){y===void 0&&(y=b),Object.defineProperty(g,y,{enumerable:!0,get:function(){return m[b]}})}:function(g,m,b,y){y===void 0&&(y=b),g[y]=m[b]},i=Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m},s=function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var b in g)b!=="default"&&Object.prototype.hasOwnProperty.call(g,b)&&r(m,g,b);return i(m,g),m},o=function(g,m){for(var b in g)b==="default"||Object.prototype.hasOwnProperty.call(m,b)||r(m,g,b)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseString=e.parseFile=e.parseStream=e.parse=e.ParserOptions=e.CsvParserStream=void 0;let a=s(n("fs")),l=n("stream"),c=n("./ParserOptions"),h=n("./CsvParserStream");o(n("./types"),e);var d=n("./CsvParserStream");Object.defineProperty(e,"CsvParserStream",{enumerable:!0,get:function(){return d.CsvParserStream}});var p=n("./ParserOptions");Object.defineProperty(e,"ParserOptions",{enumerable:!0,get:function(){return p.ParserOptions}}),e.parse=g=>new h.CsvParserStream(new c.ParserOptions(g)),e.parseStream=(g,m)=>g.pipe(new h.CsvParserStream(new c.ParserOptions(m))),e.parseFile=function(g){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a.createReadStream(g).pipe(new h.CsvParserStream(new c.ParserOptions(m)))},e.parseString=(g,m)=>{let b=new l.Readable;return b.push(g),b.push(null),b.pipe(new h.CsvParserStream(new c.ParserOptions(m)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;let r=n("./Scanner"),i=n("./RowParser"),s=n("./Token");class o{constructor(l){this.parserOptions=l,this.rowParser=new i.RowParser(this.parserOptions)}static removeBOM(l){return l&&l.charCodeAt(0)===65279?l.slice(1):l}parse(l,c){let h=new r.Scanner({line:o.removeBOM(l),parserOptions:this.parserOptions,hasMoreData:c});return this.parserOptions.supportsComments?this.parseWithComments(h):this.parseWithoutComments(h)}parseWithoutComments(l){let c=[],h=!0;for(;h;)h=this.parseRow(l,c);return{line:l.line,rows:c}}parseWithComments(l){let{parserOptions:c}=this,h=[];for(let d=l.nextCharacterToken;d!==null;d=l.nextCharacterToken)if(s.Token.isTokenComment(d,c)){if(l.advancePastLine()===null)return{line:l.lineFromCursor,rows:h};if(!l.hasMoreCharacters)return{line:l.lineFromCursor,rows:h};l.truncateToCursor()}else if(!this.parseRow(l,h))break;return{line:l.line,rows:h}}parseRow(l,c){if(!l.nextNonSpaceToken)return!1;let h=this.rowParser.parse(l);return h!==null&&(this.parserOptions.ignoreEmpty&&i.RowParser.isEmptyRow(h)||c.push(h),!0)}}e.Parser=o},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RowParser=void 0;let r=n("./column"),i=n("./Token");e.RowParser=class{constructor(s){this.parserOptions=s,this.columnParser=new r.ColumnParser(s)}static isEmptyRow(s){return s.join("").replace(/\s+/g,"")===""}parse(s){let{parserOptions:o}=this,{hasMoreData:a}=s,l=s,c=[],h=this.getStartToken(l,c);for(;h;){if(i.Token.isTokenRowDelimiter(h))return l.advancePastToken(h),!l.hasMoreCharacters&&i.Token.isTokenCarriageReturn(h,o)&&a?null:(l.truncateToCursor(),c);if(!this.shouldSkipColumnParse(l,h,c)){let d=this.columnParser.parse(l);if(d===null)return null;c.push(d)}h=l.nextNonSpaceToken}return a?null:(l.truncateToCursor(),c)}getStartToken(s,o){let a=s.nextNonSpaceToken;return a!==null&&i.Token.isTokenDelimiter(a,this.parserOptions)?(o.push(""),s.nextNonSpaceToken):a}shouldSkipColumnParse(s,o,a){let{parserOptions:l}=this;if(i.Token.isTokenDelimiter(o,l)){s.advancePastToken(o);let c=s.nextCharacterToken;if(!s.hasMoreCharacters||c!==null&&i.Token.isTokenRowDelimiter(c)||c!==null&&i.Token.isTokenDelimiter(c,l))return a.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scanner=void 0;let r=n("./Token"),i=/((?:\r\n)|\n|\r)/;e.Scanner=class{constructor(s){this.cursor=0,this.line=s.line,this.lineLength=this.line.length,this.parserOptions=s.parserOptions,this.hasMoreData=s.hasMoreData,this.cursor=s.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){let{lineFromCursor:s}=this,o=this.parserOptions.NEXT_TOKEN_REGEXP;if(s.search(o)===-1)return null;let a=o.exec(s);if(a==null)return null;let l=a[1],c=this.cursor+(a.index||0);return new r.Token({token:l,startCursor:c,endCursor:c+l.length-1})}get nextCharacterToken(){let{cursor:s,lineLength:o}=this;return o<=s?null:new r.Token({token:this.line[s],startCursor:s,endCursor:s})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){let s=i.exec(this.lineFromCursor);return s?(this.cursor+=(s.index||0)+s[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(s){return this.cursor=s,this}advanceToToken(s){return this.cursor=s.startCursor,this}advancePastToken(s){return this.cursor=s.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Token=void 0,e.Token=class{constructor(r){this.token=r.token,this.startCursor=r.startCursor,this.endCursor=r.endCursor}static isTokenRowDelimiter(r){let i=r.token;return i==="\r"||i===`
`||i===`\r
`}static isTokenCarriageReturn(r,i){return r.token===i.carriageReturn}static isTokenComment(r,i){return i.supportsComments&&!!r&&r.token===i.comment}static isTokenEscapeCharacter(r,i){return r.token===i.escapeChar}static isTokenQuote(r,i){return r.token===i.quote}static isTokenDelimiter(r,i){return r.token===i.delimiter}}},{}],160:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnFormatter=void 0,e.ColumnFormatter=class{constructor(r){r.trim?this.format=i=>i.trim():r.ltrim?this.format=i=>i.trimLeft():r.rtrim?this.format=i=>i.trimRight():this.format=i=>i}}},{}],161:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnParser=void 0;let r=n("./NonQuotedColumnParser"),i=n("./QuotedColumnParser"),s=n("../Token");e.ColumnParser=class{constructor(o){this.parserOptions=o,this.quotedColumnParser=new i.QuotedColumnParser(o),this.nonQuotedColumnParser=new r.NonQuotedColumnParser(o)}parse(o){let{nextNonSpaceToken:a}=o;return a!==null&&s.Token.isTokenQuote(a,this.parserOptions)?(o.advanceToToken(a),this.quotedColumnParser.parse(o)):this.nonQuotedColumnParser.parse(o)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonQuotedColumnParser=void 0;let r=n("./ColumnFormatter"),i=n("../Token");e.NonQuotedColumnParser=class{constructor(s){this.parserOptions=s,this.columnFormatter=new r.ColumnFormatter(s)}parse(s){if(!s.hasMoreCharacters)return null;let{parserOptions:o}=this,a=[],l=s.nextCharacterToken;for(;l&&!i.Token.isTokenDelimiter(l,o)&&!i.Token.isTokenRowDelimiter(l);l=s.nextCharacterToken)a.push(l.token),s.advancePastToken(l);return this.columnFormatter.format(a.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuotedColumnParser=void 0;let r=n("./ColumnFormatter"),i=n("../Token");e.QuotedColumnParser=class{constructor(s){this.parserOptions=s,this.columnFormatter=new r.ColumnFormatter(s)}parse(s){if(!s.hasMoreCharacters)return null;let o=s.cursor,{foundClosingQuote:a,col:l}=this.gatherDataBetweenQuotes(s);if(!a){if(s.advanceTo(o),!s.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${s.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(s),l}gatherDataBetweenQuotes(s){let{parserOptions:o}=this,a=!1,l=!1,c=[],h=s.nextCharacterToken;for(;!l&&h!==null;h=s.nextCharacterToken){let d=i.Token.isTokenQuote(h,o);if(!a&&d)a=!0;else if(a)if(i.Token.isTokenEscapeCharacter(h,o)){s.advancePastToken(h);let p=s.nextCharacterToken;p!==null&&(i.Token.isTokenQuote(p,o)||i.Token.isTokenEscapeCharacter(p,o))?(c.push(p.token),h=p):d?l=!0:c.push(h.token)}else d?l=!0:c.push(h.token);s.advancePastToken(h)}return{col:this.columnFormatter.format(c.join("")),foundClosingQuote:l}}checkForMalformedColumn(s){let{parserOptions:o}=this,{nextNonSpaceToken:a}=s;if(a){let l=i.Token.isTokenDelimiter(a,o),c=i.Token.isTokenRowDelimiter(a);if(!l&&!c){let h=s.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${o.escapedDelimiter}' OR new line got: '${a.token}'. at '${h}`)}s.advanceToToken(a)}else s.hasMoreData||s.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnFormatter=e.QuotedColumnParser=e.NonQuotedColumnParser=e.ColumnParser=void 0;var r=n("./ColumnParser");Object.defineProperty(e,"ColumnParser",{enumerable:!0,get:function(){return r.ColumnParser}});var i=n("./NonQuotedColumnParser");Object.defineProperty(e,"NonQuotedColumnParser",{enumerable:!0,get:function(){return i.NonQuotedColumnParser}});var s=n("./QuotedColumnParser");Object.defineProperty(e,"QuotedColumnParser",{enumerable:!0,get:function(){return s.QuotedColumnParser}});var o=n("./ColumnFormatter");Object.defineProperty(e,"ColumnFormatter",{enumerable:!0,get:function(){return o.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuotedColumnParser=e.NonQuotedColumnParser=e.ColumnParser=e.Token=e.Scanner=e.RowParser=e.Parser=void 0;var r=n("./Parser");Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return r.Parser}});var i=n("./RowParser");Object.defineProperty(e,"RowParser",{enumerable:!0,get:function(){return i.RowParser}});var s=n("./Scanner");Object.defineProperty(e,"Scanner",{enumerable:!0,get:function(){return s.Scanner}});var o=n("./Token");Object.defineProperty(e,"Token",{enumerable:!0,get:function(){return o.Token}});var a=n("./column");Object.defineProperty(e,"ColumnParser",{enumerable:!0,get:function(){return a.ColumnParser}}),Object.defineProperty(e,"NonQuotedColumnParser",{enumerable:!0,get:function(){return a.NonQuotedColumnParser}}),Object.defineProperty(e,"QuotedColumnParser",{enumerable:!0,get:function(){return a.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(n,t,e){"use strict";var r=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.HeaderTransformer=void 0;let i=r(n("lodash.isundefined")),s=r(n("lodash.isfunction")),o=r(n("lodash.uniq")),a=r(n("lodash.groupby"));e.HeaderTransformer=class{constructor(l){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=l,l.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(l.headers)?this.setHeaders(l.headers):s.default(l.headers)&&(this.headersTransform=l.headers)}transform(l,c){return this.shouldMapRow(l)?c(null,this.processRow(l)):c(null,{row:null,isValid:!0})}shouldMapRow(l){let{parserOptions:c}=this;if(!this.headersTransform&&c.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(l)){if(this.headersTransform)this.setHeaders(this.headersTransform(l));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(l)}return!1}return!0}processRow(l){if(!this.headers)return{row:l,isValid:!0};let{parserOptions:c}=this;if(!c.discardUnmappedColumns&&l.length>this.headersLength){if(!c.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${l.length}`);return{row:l,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${l.length}`}}return c.strictColumnHandling&&l.length<this.headersLength?{row:l,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${l.length}`}:{row:this.mapHeaders(l),isValid:!0}}mapHeaders(l){let c={},{headers:h,headersLength:d}=this;for(let p=0;p<d;p+=1){let g=h[p];if(!i.default(g)){let m=l[p];i.default(m)?c[g]="":c[g]=m}}return c}setHeaders(l){var c;let h=l.filter(d=>!!d);if(o.default(h).length!==h.length){let d=a.default(h),p=Object.keys(d).filter(g=>d[g].length>1);throw new Error("Duplicate headers found "+JSON.stringify(p))}this.headers=l,this.receivedHeaders=!0,this.headersLength=((c=this.headers)===null||c===void 0?void 0:c.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(n,t,e){"use strict";var r=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RowTransformerValidator=void 0;let i=r(n("lodash.isfunction")),s=n("../types");class o{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(l){return s.isSyncTransform(l)?(c,h)=>{let d=null;try{d=l(c)}catch(p){return h(p)}return h(null,d)}:l}static createValidator(l){return s.isSyncValidate(l)?(c,h)=>{h(null,{row:c,isValid:l(c)})}:(c,h)=>{l(c,(d,p,g)=>d?h(d):h(null,p?{row:c,isValid:p,reason:g}:{row:c,isValid:!1,reason:g}))}}set rowTransform(l){if(!i.default(l))throw new TypeError("The transform should be a function");this._rowTransform=o.createTransform(l)}set rowValidator(l){if(!i.default(l))throw new TypeError("The validate should be a function");this._rowValidator=o.createValidator(l)}transformAndValidate(l,c){return this.callTransformer(l,(h,d)=>h?c(h):d?this.callValidator(d,(p,g)=>p?c(p):g&&!g.isValid?c(null,{row:d,isValid:!1,reason:g.reason}):c(null,{row:d,isValid:!0})):c(null,{row:null,isValid:!0}))}callTransformer(l,c){return this._rowTransform?this._rowTransform(l,c):c(null,l)}callValidator(l,c){return this._rowValidator?this._rowValidator(l,c):c(null,{row:l,isValid:!0})}}e.RowTransformerValidator=o},{"../types":169,"lodash.isfunction":446}],168:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeaderTransformer=e.RowTransformerValidator=void 0;var r=n("./RowTransformerValidator");Object.defineProperty(e,"RowTransformerValidator",{enumerable:!0,get:function(){return r.RowTransformerValidator}});var i=n("./HeaderTransformer");Object.defineProperty(e,"HeaderTransformer",{enumerable:!0,get:function(){return i.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSyncValidate=e.isSyncTransform=void 0,e.isSyncTransform=r=>r.length===1,e.isSyncValidate=r=>r.length===1},{}],170:[function(n,t,e){"use strict";let r=e;r.bignum=n("bn.js"),r.define=n("./asn1/api").define,r.base=n("./asn1/base"),r.constants=n("./asn1/constants"),r.decoders=n("./asn1/decoders"),r.encoders=n("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(n,t,e){"use strict";let r=n("./encoders"),i=n("./decoders"),s=n("inherits");function o(a,l){this.name=a,this.body=l,this.decoders={},this.encoders={}}e.define=function(a,l){return new o(a,l)},o.prototype._createNamed=function(a){let l=this.name;function c(h){this._initNamed(h,l)}return s(c,a),c.prototype._initNamed=function(h,d){a.call(this,h,d)},new c(this)},o.prototype._getDecoder=function(a){return a=a||"der",this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(i[a])),this.decoders[a]},o.prototype.decode=function(a,l,c){return this._getDecoder(l).decode(a,c)},o.prototype._getEncoder=function(a){return a=a||"der",this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(r[a])),this.encoders[a]},o.prototype.encode=function(a,l,c){return this._getEncoder(l).encode(a,c)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(n,t,e){"use strict";let r=n("inherits"),i=n("../base/reporter").Reporter,s=n("safer-buffer").Buffer;function o(l,c){i.call(this,c),s.isBuffer(l)?(this.base=l,this.offset=0,this.length=l.length):this.error("Input not Buffer")}function a(l,c){if(Array.isArray(l))this.length=0,this.value=l.map(function(h){return a.isEncoderBuffer(h)||(h=new a(h,c)),this.length+=h.length,h},this);else if(typeof l=="number"){if(!(0<=l&&l<=255))return c.error("non-byte EncoderBuffer value");this.value=l,this.length=1}else if(typeof l=="string")this.value=l,this.length=s.byteLength(l);else{if(!s.isBuffer(l))return c.error("Unsupported type: "+typeof l);this.value=l,this.length=l.length}}r(o,i),e.DecoderBuffer=o,o.isDecoderBuffer=function(l){return l instanceof o?!0:typeof l=="object"&&s.isBuffer(l.base)&&l.constructor.name==="DecoderBuffer"&&typeof l.offset=="number"&&typeof l.length=="number"&&typeof l.save=="function"&&typeof l.restore=="function"&&typeof l.isEmpty=="function"&&typeof l.readUInt8=="function"&&typeof l.skip=="function"&&typeof l.raw=="function"},o.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},o.prototype.restore=function(l){let c=new o(this.base);return c.offset=l.offset,c.length=this.offset,this.offset=l.offset,i.prototype.restore.call(this,l.reporter),c},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(l){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(l||"DecoderBuffer overrun")},o.prototype.skip=function(l,c){if(!(this.offset+l<=this.length))return this.error(c||"DecoderBuffer overrun");let h=new o(this.base);return h._reporterState=this._reporterState,h.offset=this.offset,h.length=this.offset+l,this.offset+=l,h},o.prototype.raw=function(l){return this.base.slice(l?l.offset:this.offset,this.length)},e.EncoderBuffer=a,a.isEncoderBuffer=function(l){return l instanceof a?!0:typeof l=="object"&&l.constructor.name==="EncoderBuffer"&&typeof l.length=="number"&&typeof l.join=="function"},a.prototype.join=function(l,c){return l||(l=s.alloc(this.length)),c||(c=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(h){h.join(l,c),c+=h.length}):(typeof this.value=="number"?l[c]=this.value:typeof this.value=="string"?l.write(this.value,c):s.isBuffer(this.value)&&this.value.copy(l,c),c+=this.length)),l}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(n,t,e){"use strict";let r=e;r.Reporter=n("./reporter").Reporter,r.DecoderBuffer=n("./buffer").DecoderBuffer,r.EncoderBuffer=n("./buffer").EncoderBuffer,r.Node=n("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(n,t,e){"use strict";let r=n("../base/reporter").Reporter,i=n("../base/buffer").EncoderBuffer,s=n("../base/buffer").DecoderBuffer,o=n("minimalistic-assert"),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function c(d,p,g){let m={};this._baseState=m,m.name=g,m.enc=d,m.parent=p||null,m.children=null,m.tag=null,m.args=null,m.reverseArgs=null,m.choice=null,m.optional=!1,m.any=!1,m.obj=!1,m.use=null,m.useDecoder=null,m.key=null,m.default=null,m.explicit=null,m.implicit=null,m.contains=null,m.parent||(m.children=[],this._wrap())}t.exports=c;let h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){let d=this._baseState,p={};h.forEach(function(m){p[m]=d[m]});let g=new this.constructor(p.parent);return g._baseState=p,g},c.prototype._wrap=function(){let d=this._baseState;l.forEach(function(p){this[p]=function(){let g=new this.constructor(this);return d.children.push(g),g[p].apply(g,arguments)}},this)},c.prototype._init=function(d){let p=this._baseState;o(p.parent===null),d.call(this),p.children=p.children.filter(function(g){return g._baseState.parent===this},this),o.equal(p.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(d){let p=this._baseState,g=d.filter(function(m){return m instanceof this.constructor},this);d=d.filter(function(m){return!(m instanceof this.constructor)},this),g.length!==0&&(o(p.children===null),p.children=g,g.forEach(function(m){m._baseState.parent=this},this)),d.length!==0&&(o(p.args===null),p.args=d,p.reverseArgs=d.map(function(m){if(typeof m!="object"||m.constructor!==Object)return m;let b={};return Object.keys(m).forEach(function(y){y==(0|y)&&(y|=0);let x=m[y];b[x]=y}),b}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(d){c.prototype[d]=function(){let p=this._baseState;throw new Error(d+" not implemented for encoding: "+p.enc)}}),a.forEach(function(d){c.prototype[d]=function(){let p=this._baseState,g=Array.prototype.slice.call(arguments);return o(p.tag===null),p.tag=d,this._useArgs(g),this}}),c.prototype.use=function(d){o(d);let p=this._baseState;return o(p.use===null),p.use=d,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(d){let p=this._baseState;return o(p.default===null),p.default=d,p.optional=!0,this},c.prototype.explicit=function(d){let p=this._baseState;return o(p.explicit===null&&p.implicit===null),p.explicit=d,this},c.prototype.implicit=function(d){let p=this._baseState;return o(p.explicit===null&&p.implicit===null),p.implicit=d,this},c.prototype.obj=function(){let d=this._baseState,p=Array.prototype.slice.call(arguments);return d.obj=!0,p.length!==0&&this._useArgs(p),this},c.prototype.key=function(d){let p=this._baseState;return o(p.key===null),p.key=d,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(d){let p=this._baseState;return o(p.choice===null),p.choice=d,this._useArgs(Object.keys(d).map(function(g){return d[g]})),this},c.prototype.contains=function(d){let p=this._baseState;return o(p.use===null),p.contains=d,this},c.prototype._decode=function(d,p){let g=this._baseState;if(g.parent===null)return d.wrapResult(g.children[0]._decode(d,p));let m,b=g.default,y=!0,x=null;if(g.key!==null&&(x=d.enterKey(g.key)),g.optional){let S=null;if(g.explicit!==null?S=g.explicit:g.implicit!==null?S=g.implicit:g.tag!==null&&(S=g.tag),S!==null||g.any){if(y=this._peekTag(d,S,g.any),d.isError(y))return y}else{let O=d.save();try{g.choice===null?this._decodeGeneric(g.tag,d,p):this._decodeChoice(d,p),y=!0}catch{y=!1}d.restore(O)}}if(g.obj&&y&&(m=d.enterObject()),y){if(g.explicit!==null){let O=this._decodeTag(d,g.explicit);if(d.isError(O))return O;d=O}let S=d.offset;if(g.use===null&&g.choice===null){let O;g.any&&(O=d.save());let D=this._decodeTag(d,g.implicit!==null?g.implicit:g.tag,g.any);if(d.isError(D))return D;g.any?b=d.raw(O):d=D}if(p&&p.track&&g.tag!==null&&p.track(d.path(),S,d.length,"tagged"),p&&p.track&&g.tag!==null&&p.track(d.path(),d.offset,d.length,"content"),g.any||(b=g.choice===null?this._decodeGeneric(g.tag,d,p):this._decodeChoice(d,p)),d.isError(b))return b;if(g.any||g.choice!==null||g.children===null||g.children.forEach(function(O){O._decode(d,p)}),g.contains&&(g.tag==="octstr"||g.tag==="bitstr")){let O=new s(b);b=this._getUse(g.contains,d._reporterState.obj)._decode(O,p)}}return g.obj&&y&&(b=d.leaveObject(m)),g.key===null||b===null&&y!==!0?x!==null&&d.exitKey(x):d.leaveKey(x,g.key,b),b},c.prototype._decodeGeneric=function(d,p,g){let m=this._baseState;return d==="seq"||d==="set"?null:d==="seqof"||d==="setof"?this._decodeList(p,d,m.args[0],g):/str$/.test(d)?this._decodeStr(p,d,g):d==="objid"&&m.args?this._decodeObjid(p,m.args[0],m.args[1],g):d==="objid"?this._decodeObjid(p,null,null,g):d==="gentime"||d==="utctime"?this._decodeTime(p,d,g):d==="null_"?this._decodeNull(p,g):d==="bool"?this._decodeBool(p,g):d==="objDesc"?this._decodeStr(p,d,g):d==="int"||d==="enum"?this._decodeInt(p,m.args&&m.args[0],g):m.use!==null?this._getUse(m.use,p._reporterState.obj)._decode(p,g):p.error("unknown tag: "+d)},c.prototype._getUse=function(d,p){let g=this._baseState;return g.useDecoder=this._use(d,p),o(g.useDecoder._baseState.parent===null),g.useDecoder=g.useDecoder._baseState.children[0],g.implicit!==g.useDecoder._baseState.implicit&&(g.useDecoder=g.useDecoder.clone(),g.useDecoder._baseState.implicit=g.implicit),g.useDecoder},c.prototype._decodeChoice=function(d,p){let g=this._baseState,m=null,b=!1;return Object.keys(g.choice).some(function(y){let x=d.save(),S=g.choice[y];try{let O=S._decode(d,p);if(d.isError(O))return!1;m={type:y,value:O},b=!0}catch{return d.restore(x),!1}return!0},this),b?m:d.error("Choice not matched")},c.prototype._createEncoderBuffer=function(d){return new i(d,this.reporter)},c.prototype._encode=function(d,p,g){let m=this._baseState;if(m.default!==null&&m.default===d)return;let b=this._encodeValue(d,p,g);return b===void 0||this._skipDefault(b,p,g)?void 0:b},c.prototype._encodeValue=function(d,p,g){let m=this._baseState;if(m.parent===null)return m.children[0]._encode(d,p||new r);let b=null;if(this.reporter=p,m.optional&&d===void 0){if(m.default===null)return;d=m.default}let y=null,x=!1;if(m.any)b=this._createEncoderBuffer(d);else if(m.choice)b=this._encodeChoice(d,p);else if(m.contains)y=this._getUse(m.contains,g)._encode(d,p),x=!0;else if(m.children)y=m.children.map(function(S){if(S._baseState.tag==="null_")return S._encode(null,p,d);if(S._baseState.key===null)return p.error("Child should have a key");let O=p.enterKey(S._baseState.key);if(typeof d!="object")return p.error("Child expected, but input is not object");let D=S._encode(d[S._baseState.key],p,d);return p.leaveKey(O),D},this).filter(function(S){return S}),y=this._createEncoderBuffer(y);else if(m.tag==="seqof"||m.tag==="setof"){if(!m.args||m.args.length!==1)return p.error("Too many args for : "+m.tag);if(!Array.isArray(d))return p.error("seqof/setof, but data is not Array");let S=this.clone();S._baseState.implicit=null,y=this._createEncoderBuffer(d.map(function(O){let D=this._baseState;return this._getUse(D.args[0],d)._encode(O,p)},S))}else m.use!==null?b=this._getUse(m.use,g)._encode(d,p):(y=this._encodePrimitive(m.tag,d),x=!0);if(!m.any&&m.choice===null){let S=m.implicit!==null?m.implicit:m.tag,O=m.implicit===null?"universal":"context";S===null?m.use===null&&p.error("Tag could be omitted only for .use()"):m.use===null&&(b=this._encodeComposite(S,x,O,y))}return m.explicit!==null&&(b=this._encodeComposite(m.explicit,!1,"context",b)),b},c.prototype._encodeChoice=function(d,p){let g=this._baseState,m=g.choice[d.type];return m||o(!1,d.type+" not found in "+JSON.stringify(Object.keys(g.choice))),m._encode(d.value,p)},c.prototype._encodePrimitive=function(d,p){let g=this._baseState;if(/str$/.test(d))return this._encodeStr(p,d);if(d==="objid"&&g.args)return this._encodeObjid(p,g.reverseArgs[0],g.args[1]);if(d==="objid")return this._encodeObjid(p,null,null);if(d==="gentime"||d==="utctime")return this._encodeTime(p,d);if(d==="null_")return this._encodeNull();if(d==="int"||d==="enum")return this._encodeInt(p,g.args&&g.reverseArgs[0]);if(d==="bool")return this._encodeBool(p);if(d==="objDesc")return this._encodeStr(p,d);throw new Error("Unsupported tag: "+d)},c.prototype._isNumstr=function(d){return/^[0-9 ]*$/.test(d)},c.prototype._isPrintstr=function(d){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(d)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(n,t,e){"use strict";let r=n("inherits");function i(o){this._reporterState={obj:null,path:[],options:o||{},errors:[]}}function s(o,a){this.path=o,this.rethrow(a)}e.Reporter=i,i.prototype.isError=function(o){return o instanceof s},i.prototype.save=function(){let o=this._reporterState;return{obj:o.obj,pathLen:o.path.length}},i.prototype.restore=function(o){let a=this._reporterState;a.obj=o.obj,a.path=a.path.slice(0,o.pathLen)},i.prototype.enterKey=function(o){return this._reporterState.path.push(o)},i.prototype.exitKey=function(o){let a=this._reporterState;a.path=a.path.slice(0,o-1)},i.prototype.leaveKey=function(o,a,l){let c=this._reporterState;this.exitKey(o),c.obj!==null&&(c.obj[a]=l)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){let o=this._reporterState,a=o.obj;return o.obj={},a},i.prototype.leaveObject=function(o){let a=this._reporterState,l=a.obj;return a.obj=o,l},i.prototype.error=function(o){let a,l=this._reporterState,c=o instanceof s;if(a=c?o:new s(l.path.map(function(h){return"["+JSON.stringify(h)+"]"}).join(""),o.message||o,o.stack),!l.options.partial)throw a;return c||l.errors.push(a),a},i.prototype.wrapResult=function(o){let a=this._reporterState;return a.options.partial?{result:this.isError(o)?null:o,errors:a.errors}:o},r(s,Error),s.prototype.rethrow=function(o){if(this.message=o+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(a){this.stack=a.stack}return this}},{inherits:440}],176:[function(n,t,e){"use strict";function r(i){let s={};return Object.keys(i).forEach(function(o){(0|o)==o&&(o|=0);let a=i[o];s[a]=o}),s}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=r(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=r(e.tag)},{}],177:[function(n,t,e){"use strict";let r=e;r._reverse=function(i){let s={};return Object.keys(i).forEach(function(o){(0|o)==o&&(o|=0);let a=i[o];s[a]=o}),s},r.der=n("./der")},{"./der":176}],178:[function(n,t,e){"use strict";let r=n("inherits"),i=n("bn.js"),s=n("../base/buffer").DecoderBuffer,o=n("../base/node"),a=n("../constants/der");function l(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new c,this.tree._init(p.body)}function c(p){o.call(this,"der",p)}function h(p,g){let m=p.readUInt8(g);if(p.isError(m))return m;let b=a.tagClass[m>>6],y=(32&m)==0;if((31&m)==31){let x=m;for(m=0;(128&x)==128;){if(x=p.readUInt8(g),p.isError(x))return x;m<<=7,m|=127&x}}else m&=31;return{cls:b,primitive:y,tag:m,tagStr:a.tag[m]}}function d(p,g,m){let b=p.readUInt8(m);if(p.isError(b))return b;if(!g&&b===128)return null;if(!(128&b))return b;let y=127&b;if(y>4)return p.error("length octect is too long");b=0;for(let x=0;x<y;x++){b<<=8;let S=p.readUInt8(m);if(p.isError(S))return S;b|=S}return b}t.exports=l,l.prototype.decode=function(p,g){return s.isDecoderBuffer(p)||(p=new s(p,g)),this.tree._decode(p,g)},r(c,o),c.prototype._peekTag=function(p,g,m){if(p.isEmpty())return!1;let b=p.save(),y=h(p,'Failed to peek tag: "'+g+'"');return p.isError(y)?y:(p.restore(b),y.tag===g||y.tagStr===g||y.tagStr+"of"===g||m)},c.prototype._decodeTag=function(p,g,m){let b=h(p,'Failed to decode tag of "'+g+'"');if(p.isError(b))return b;let y=d(p,b.primitive,'Failed to get length of "'+g+'"');if(p.isError(y))return y;if(!m&&b.tag!==g&&b.tagStr!==g&&b.tagStr+"of"!==g)return p.error('Failed to match tag: "'+g+'"');if(b.primitive||y!==null)return p.skip(y,'Failed to match body of: "'+g+'"');let x=p.save(),S=this._skipUntilEnd(p,'Failed to skip indefinite length body: "'+this.tag+'"');return p.isError(S)?S:(y=p.offset-x.offset,p.restore(x),p.skip(y,'Failed to match body of: "'+g+'"'))},c.prototype._skipUntilEnd=function(p,g){for(;;){let m=h(p,g);if(p.isError(m))return m;let b=d(p,m.primitive,g);if(p.isError(b))return b;let y;if(y=m.primitive||b!==null?p.skip(b):this._skipUntilEnd(p,g),p.isError(y))return y;if(m.tagStr==="end")break}},c.prototype._decodeList=function(p,g,m,b){let y=[];for(;!p.isEmpty();){let x=this._peekTag(p,"end");if(p.isError(x))return x;let S=m.decode(p,"der",b);if(p.isError(S)&&x)break;y.push(S)}return y},c.prototype._decodeStr=function(p,g){if(g==="bitstr"){let m=p.readUInt8();return p.isError(m)?m:{unused:m,data:p.raw()}}if(g==="bmpstr"){let m=p.raw();if(m.length%2==1)return p.error("Decoding of string type: bmpstr length mismatch");let b="";for(let y=0;y<m.length/2;y++)b+=String.fromCharCode(m.readUInt16BE(2*y));return b}if(g==="numstr"){let m=p.raw().toString("ascii");return this._isNumstr(m)?m:p.error("Decoding of string type: numstr unsupported characters")}if(g==="octstr"||g==="objDesc")return p.raw();if(g==="printstr"){let m=p.raw().toString("ascii");return this._isPrintstr(m)?m:p.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(g)?p.raw().toString():p.error("Decoding of string type: "+g+" unsupported")},c.prototype._decodeObjid=function(p,g,m){let b,y=[],x=0,S=0;for(;!p.isEmpty();)S=p.readUInt8(),x<<=7,x|=127&S,!(128&S)&&(y.push(x),x=0);128&S&&y.push(x);let O=y[0]/40|0,D=y[0]%40;if(b=m?y:[O,D].concat(y.slice(1)),g){let U=g[b.join(" ")];U===void 0&&(U=g[b.join(".")]),U!==void 0&&(b=U)}return b},c.prototype._decodeTime=function(p,g){let m=p.raw().toString(),b,y,x,S,O,D;if(g==="gentime")b=0|m.slice(0,4),y=0|m.slice(4,6),x=0|m.slice(6,8),S=0|m.slice(8,10),O=0|m.slice(10,12),D=0|m.slice(12,14);else{if(g!=="utctime")return p.error("Decoding "+g+" time is not supported yet");b=0|m.slice(0,2),y=0|m.slice(2,4),x=0|m.slice(4,6),S=0|m.slice(6,8),O=0|m.slice(8,10),D=0|m.slice(10,12),b=b<70?2e3+b:1900+b}return Date.UTC(b,y-1,x,S,O,D,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(p){let g=p.readUInt8();return p.isError(g)?g:g!==0},c.prototype._decodeInt=function(p,g){let m=p.raw(),b=new i(m);return g&&(b=g[b.toString(10)]||b),b},c.prototype._use=function(p,g){return typeof p=="function"&&(p=p(g)),p._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(n,t,e){"use strict";let r=e;r.der=n("./der"),r.pem=n("./pem")},{"./der":178,"./pem":180}],180:[function(n,t,e){"use strict";let r=n("inherits"),i=n("safer-buffer").Buffer,s=n("./der");function o(a){s.call(this,a),this.enc="pem"}r(o,s),t.exports=o,o.prototype.decode=function(a,l){let c=a.toString().split(/[\r\n]+/g),h=l.label.toUpperCase(),d=/^-----(BEGIN|END) ([^-]+)-----$/,p=-1,g=-1;for(let y=0;y<c.length;y++){let x=c[y].match(d);if(x!==null&&x[2]===h){if(p!==-1){if(x[1]!=="END")break;g=y;break}if(x[1]!=="BEGIN")break;p=y}}if(p===-1||g===-1)throw new Error("PEM section not found for: "+h);let m=c.slice(p+1,g).join("");m.replace(/[^a-z0-9+/=]+/gi,"");let b=i.from(m,"base64");return s.prototype.decode.call(this,b,l)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(n,t,e){"use strict";let r=n("inherits"),i=n("safer-buffer").Buffer,s=n("../base/node"),o=n("../constants/der");function a(h){this.enc="der",this.name=h.name,this.entity=h,this.tree=new l,this.tree._init(h.body)}function l(h){s.call(this,"der",h)}function c(h){return h<10?"0"+h:h}t.exports=a,a.prototype.encode=function(h,d){return this.tree._encode(h,d).join()},r(l,s),l.prototype._encodeComposite=function(h,d,p,g){let m=function(x,S,O,D){let U;if(x==="seqof"?x="seq":x==="setof"&&(x="set"),o.tagByName.hasOwnProperty(x))U=o.tagByName[x];else{if(typeof x!="number"||(0|x)!==x)return D.error("Unknown tag: "+x);U=x}return U>=31?D.error("Multi-octet tag encoding unsupported"):(S||(U|=32),U|=o.tagClassByName[O||"universal"]<<6,U)}(h,d,p,this.reporter);if(g.length<128){let x=i.alloc(2);return x[0]=m,x[1]=g.length,this._createEncoderBuffer([x,g])}let b=1;for(let x=g.length;x>=256;x>>=8)b++;let y=i.alloc(2+b);y[0]=m,y[1]=128|b;for(let x=1+b,S=g.length;S>0;x--,S>>=8)y[x]=255&S;return this._createEncoderBuffer([y,g])},l.prototype._encodeStr=function(h,d){if(d==="bitstr")return this._createEncoderBuffer([0|h.unused,h.data]);if(d==="bmpstr"){let p=i.alloc(2*h.length);for(let g=0;g<h.length;g++)p.writeUInt16BE(h.charCodeAt(g),2*g);return this._createEncoderBuffer(p)}return d==="numstr"?this._isNumstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: numstr supports only digits and space"):d==="printstr"?this._isPrintstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(d)||d==="objDesc"?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: "+d+" unsupported")},l.prototype._encodeObjid=function(h,d,p){if(typeof h=="string"){if(!d)return this.reporter.error("string objid given, but no values map found");if(!d.hasOwnProperty(h))return this.reporter.error("objid not found in values map");h=d[h].split(/[\s.]+/g);for(let y=0;y<h.length;y++)h[y]|=0}else if(Array.isArray(h)){h=h.slice();for(let y=0;y<h.length;y++)h[y]|=0}if(!Array.isArray(h))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(h));if(!p){if(h[1]>=40)return this.reporter.error("Second objid identifier OOB");h.splice(0,2,40*h[0]+h[1])}let g=0;for(let y=0;y<h.length;y++){let x=h[y];for(g++;x>=128;x>>=7)g++}let m=i.alloc(g),b=m.length-1;for(let y=h.length-1;y>=0;y--){let x=h[y];for(m[b--]=127&x;(x>>=7)>0;)m[b--]=128|127&x}return this._createEncoderBuffer(m)},l.prototype._encodeTime=function(h,d){let p,g=new Date(h);return d==="gentime"?p=[c(g.getUTCFullYear()),c(g.getUTCMonth()+1),c(g.getUTCDate()),c(g.getUTCHours()),c(g.getUTCMinutes()),c(g.getUTCSeconds()),"Z"].join(""):d==="utctime"?p=[c(g.getUTCFullYear()%100),c(g.getUTCMonth()+1),c(g.getUTCDate()),c(g.getUTCHours()),c(g.getUTCMinutes()),c(g.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+d+" time is not supported yet"),this._encodeStr(p,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(h,d){if(typeof h=="string"){if(!d)return this.reporter.error("String int or enum given, but no values map");if(!d.hasOwnProperty(h))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(h));h=d[h]}if(typeof h!="number"&&!i.isBuffer(h)){let m=h.toArray();!h.sign&&128&m[0]&&m.unshift(0),h=i.from(m)}if(i.isBuffer(h)){let m=h.length;h.length===0&&m++;let b=i.alloc(m);return h.copy(b),h.length===0&&(b[0]=0),this._createEncoderBuffer(b)}if(h<128)return this._createEncoderBuffer(h);if(h<256)return this._createEncoderBuffer([0,h]);let p=1;for(let m=h;m>=256;m>>=8)p++;let g=new Array(p);for(let m=g.length-1;m>=0;m--)g[m]=255&h,h>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(i.from(g))},l.prototype._encodeBool=function(h){return this._createEncoderBuffer(h?255:0)},l.prototype._use=function(h,d){return typeof h=="function"&&(h=h(d)),h._getEncoder("der").tree},l.prototype._skipDefault=function(h,d,p){let g=this._baseState,m;if(g.default===null)return!1;let b=h.join();if(g.defaultBuffer===void 0&&(g.defaultBuffer=this._encodeValue(g.default,d,p).join()),b.length!==g.defaultBuffer.length)return!1;for(m=0;m<b.length;m++)if(b[m]!==g.defaultBuffer[m])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(n,t,e){"use strict";let r=e;r.der=n("./der"),r.pem=n("./pem")},{"./der":181,"./pem":183}],183:[function(n,t,e){"use strict";let r=n("inherits"),i=n("./der");function s(o){i.call(this,o),this.enc="pem"}r(s,i),t.exports=s,s.prototype.encode=function(o,a){let l=i.prototype.encode.call(this,o).toString("base64"),c=["-----BEGIN "+a.label+"-----"];for(let h=0;h<l.length;h+=64)c.push(l.slice(h,h+64));return c.push("-----END "+a.label+"-----"),c.join(`
`)}},{"./der":181,inherits:440}],184:[function(n,t,e){"use strict";(function(r,i){function s(B,N){if(!B)throw new Error(N||"Assertion failed")}function o(B,N){B.super_=N;var Z=function(){};Z.prototype=N.prototype,B.prototype=new Z,B.prototype.constructor=B}function a(B,N,Z){if(a.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&(N!=="le"&&N!=="be"||(Z=N,N=10),this._init(B||0,N||10,Z||"be"))}var l;typeof r=="object"?r.exports=a:(void 0).BN=a,a.BN=a,a.wordSize=26;try{l=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:n("buffer").Buffer}catch{}function c(B,N){var Z=B.charCodeAt(N);return Z>=65&&Z<=70?Z-55:Z>=97&&Z<=102?Z-87:Z-48&15}function h(B,N,Z){var w=c(B,Z);return Z-1>=N&&(w|=c(B,Z-1)<<4),w}function d(B,N,Z,w){for(var C=0,k=Math.min(B.length,Z),T=N;T<k;T++){var R=B.charCodeAt(T)-48;C*=w,C+=R>=49?R-49+10:R>=17?R-17+10:R}return C}a.isBN=function(B){return B instanceof a||B!==null&&typeof B=="object"&&B.constructor.wordSize===a.wordSize&&Array.isArray(B.words)},a.max=function(B,N){return B.cmp(N)>0?B:N},a.min=function(B,N){return B.cmp(N)<0?B:N},a.prototype._init=function(B,N,Z){if(typeof B=="number")return this._initNumber(B,N,Z);if(typeof B=="object")return this._initArray(B,N,Z);N==="hex"&&(N=16),s(N===(0|N)&&N>=2&&N<=36);var w=0;(B=B.toString().replace(/\s+/g,""))[0]==="-"&&(w++,this.negative=1),w<B.length&&(N===16?this._parseHex(B,w,Z):(this._parseBase(B,N,w),Z==="le"&&this._initArray(this.toArray(),N,Z)))},a.prototype._initNumber=function(B,N,Z){B<0&&(this.negative=1,B=-B),B<67108864?(this.words=[67108863&B],this.length=1):B<4503599627370496?(this.words=[67108863&B,B/67108864&67108863],this.length=2):(s(B<9007199254740992),this.words=[67108863&B,B/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),N,Z)},a.prototype._initArray=function(B,N,Z){if(s(typeof B.length=="number"),B.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(B.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C,k,T=0;if(Z==="be")for(w=B.length-1,C=0;w>=0;w-=3)k=B[w]|B[w-1]<<8|B[w-2]<<16,this.words[C]|=k<<T&67108863,this.words[C+1]=k>>>26-T&67108863,(T+=24)>=26&&(T-=26,C++);else if(Z==="le")for(w=0,C=0;w<B.length;w+=3)k=B[w]|B[w+1]<<8|B[w+2]<<16,this.words[C]|=k<<T&67108863,this.words[C+1]=k>>>26-T&67108863,(T+=24)>=26&&(T-=26,C++);return this.strip()},a.prototype._parseHex=function(B,N,Z){this.length=Math.ceil((B.length-N)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C,k=0,T=0;if(Z==="be")for(w=B.length-1;w>=N;w-=2)C=h(B,N,w)<<k,this.words[T]|=67108863&C,k>=18?(k-=18,T+=1,this.words[T]|=C>>>26):k+=8;else for(w=(B.length-N)%2==0?N+1:N;w<B.length;w+=2)C=h(B,N,w)<<k,this.words[T]|=67108863&C,k>=18?(k-=18,T+=1,this.words[T]|=C>>>26):k+=8;this.strip()},a.prototype._parseBase=function(B,N,Z){this.words=[0],this.length=1;for(var w=0,C=1;C<=67108863;C*=N)w++;w--,C=C/N|0;for(var k=B.length-Z,T=k%w,R=Math.min(k,k-T)+Z,F=0,H=Z;H<R;H+=w)F=d(B,H,H+w,N),this.imuln(C),this.words[0]+F<67108864?this.words[0]+=F:this._iaddn(F);if(T!==0){var rt=1;for(F=d(B,H,B.length,N),H=0;H<T;H++)rt*=N;this.imuln(rt),this.words[0]+F<67108864?this.words[0]+=F:this._iaddn(F)}this.strip()},a.prototype.copy=function(B){B.words=new Array(this.length);for(var N=0;N<this.length;N++)B.words[N]=this.words[N];B.length=this.length,B.negative=this.negative,B.red=this.red},a.prototype.clone=function(){var B=new a(null);return this.copy(B),B},a.prototype._expand=function(B){for(;this.length<B;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function b(B,N,Z){Z.negative=N.negative^B.negative;var w=B.length+N.length|0;Z.length=w,w=w-1|0;var C=0|B.words[0],k=0|N.words[0],T=C*k,R=67108863&T,F=T/67108864|0;Z.words[0]=R;for(var H=1;H<w;H++){for(var rt=F>>>26,ot=67108863&F,dt=Math.min(H,N.length-1),$=Math.max(0,H-B.length+1);$<=dt;$++){var ct=H-$|0;rt+=(T=(C=0|B.words[ct])*(k=0|N.words[$])+ot)/67108864|0,ot=67108863&T}Z.words[H]=0|ot,F=0|rt}return F!==0?Z.words[H]=0|F:Z.length--,Z.strip()}a.prototype.toString=function(B,N){var Z;if(N=0|N||1,(B=B||10)===16||B==="hex"){Z="";for(var w=0,C=0,k=0;k<this.length;k++){var T=this.words[k],R=(16777215&(T<<w|C)).toString(16);Z=(C=T>>>24-w&16777215)!==0||k!==this.length-1?p[6-R.length]+R+Z:R+Z,(w+=2)>=26&&(w-=26,k--)}for(C!==0&&(Z=C.toString(16)+Z);Z.length%N!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(B===(0|B)&&B>=2&&B<=36){var F=g[B],H=m[B];Z="";var rt=this.clone();for(rt.negative=0;!rt.isZero();){var ot=rt.modn(H).toString(B);Z=(rt=rt.idivn(H)).isZero()?ot+Z:p[F-ot.length]+ot+Z}for(this.isZero()&&(Z="0"+Z);Z.length%N!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var B=this.words[0];return this.length===2?B+=67108864*this.words[1]:this.length===3&&this.words[2]===1?B+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-B:B},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(B,N){return s(l!==void 0),this.toArrayLike(l,B,N)},a.prototype.toArray=function(B,N){return this.toArrayLike(Array,B,N)},a.prototype.toArrayLike=function(B,N,Z){var w=this.byteLength(),C=Z||Math.max(1,w);s(w<=C,"byte array longer than desired length"),s(C>0,"Requested array length <= 0"),this.strip();var k,T,R=N==="le",F=new B(C),H=this.clone();if(R){for(T=0;!H.isZero();T++)k=H.andln(255),H.iushrn(8),F[T]=k;for(;T<C;T++)F[T]=0}else{for(T=0;T<C-w;T++)F[T]=0;for(T=0;!H.isZero();T++)k=H.andln(255),H.iushrn(8),F[C-T-1]=k}return F},Math.clz32?a.prototype._countBits=function(B){return 32-Math.clz32(B)}:a.prototype._countBits=function(B){var N=B,Z=0;return N>=4096&&(Z+=13,N>>>=13),N>=64&&(Z+=7,N>>>=7),N>=8&&(Z+=4,N>>>=4),N>=2&&(Z+=2,N>>>=2),Z+N},a.prototype._zeroBits=function(B){if(B===0)return 26;var N=B,Z=0;return!(8191&N)&&(Z+=13,N>>>=13),!(127&N)&&(Z+=7,N>>>=7),!(15&N)&&(Z+=4,N>>>=4),!(3&N)&&(Z+=2,N>>>=2),!(1&N)&&Z++,Z},a.prototype.bitLength=function(){var B=this.words[this.length-1],N=this._countBits(B);return 26*(this.length-1)+N},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var B=0,N=0;N<this.length;N++){var Z=this._zeroBits(this.words[N]);if(B+=Z,Z!==26)break}return B},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(B){return this.negative!==0?this.abs().inotn(B).iaddn(1):this.clone()},a.prototype.fromTwos=function(B){return this.testn(B-1)?this.notn(B).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(B){for(;this.length<B.length;)this.words[this.length++]=0;for(var N=0;N<B.length;N++)this.words[N]=this.words[N]|B.words[N];return this.strip()},a.prototype.ior=function(B){return s((this.negative|B.negative)==0),this.iuor(B)},a.prototype.or=function(B){return this.length>B.length?this.clone().ior(B):B.clone().ior(this)},a.prototype.uor=function(B){return this.length>B.length?this.clone().iuor(B):B.clone().iuor(this)},a.prototype.iuand=function(B){var N;N=this.length>B.length?B:this;for(var Z=0;Z<N.length;Z++)this.words[Z]=this.words[Z]&B.words[Z];return this.length=N.length,this.strip()},a.prototype.iand=function(B){return s((this.negative|B.negative)==0),this.iuand(B)},a.prototype.and=function(B){return this.length>B.length?this.clone().iand(B):B.clone().iand(this)},a.prototype.uand=function(B){return this.length>B.length?this.clone().iuand(B):B.clone().iuand(this)},a.prototype.iuxor=function(B){var N,Z;this.length>B.length?(N=this,Z=B):(N=B,Z=this);for(var w=0;w<Z.length;w++)this.words[w]=N.words[w]^Z.words[w];if(this!==N)for(;w<N.length;w++)this.words[w]=N.words[w];return this.length=N.length,this.strip()},a.prototype.ixor=function(B){return s((this.negative|B.negative)==0),this.iuxor(B)},a.prototype.xor=function(B){return this.length>B.length?this.clone().ixor(B):B.clone().ixor(this)},a.prototype.uxor=function(B){return this.length>B.length?this.clone().iuxor(B):B.clone().iuxor(this)},a.prototype.inotn=function(B){s(typeof B=="number"&&B>=0);var N=0|Math.ceil(B/26),Z=B%26;this._expand(N),Z>0&&N--;for(var w=0;w<N;w++)this.words[w]=67108863&~this.words[w];return Z>0&&(this.words[w]=~this.words[w]&67108863>>26-Z),this.strip()},a.prototype.notn=function(B){return this.clone().inotn(B)},a.prototype.setn=function(B,N){s(typeof B=="number"&&B>=0);var Z=B/26|0,w=B%26;return this._expand(Z+1),this.words[Z]=N?this.words[Z]|1<<w:this.words[Z]&~(1<<w),this.strip()},a.prototype.iadd=function(B){var N,Z,w;if(this.negative!==0&&B.negative===0)return this.negative=0,N=this.isub(B),this.negative^=1,this._normSign();if(this.negative===0&&B.negative!==0)return B.negative=0,N=this.isub(B),B.negative=1,N._normSign();this.length>B.length?(Z=this,w=B):(Z=B,w=this);for(var C=0,k=0;k<w.length;k++)N=(0|Z.words[k])+(0|w.words[k])+C,this.words[k]=67108863&N,C=N>>>26;for(;C!==0&&k<Z.length;k++)N=(0|Z.words[k])+C,this.words[k]=67108863&N,C=N>>>26;if(this.length=Z.length,C!==0)this.words[this.length]=C,this.length++;else if(Z!==this)for(;k<Z.length;k++)this.words[k]=Z.words[k];return this},a.prototype.add=function(B){var N;return B.negative!==0&&this.negative===0?(B.negative=0,N=this.sub(B),B.negative^=1,N):B.negative===0&&this.negative!==0?(this.negative=0,N=B.sub(this),this.negative=1,N):this.length>B.length?this.clone().iadd(B):B.clone().iadd(this)},a.prototype.isub=function(B){if(B.negative!==0){B.negative=0;var N=this.iadd(B);return B.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(B),this.negative=1,this._normSign();var Z,w,C=this.cmp(B);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;C>0?(Z=this,w=B):(Z=B,w=this);for(var k=0,T=0;T<w.length;T++)k=(N=(0|Z.words[T])-(0|w.words[T])+k)>>26,this.words[T]=67108863&N;for(;k!==0&&T<Z.length;T++)k=(N=(0|Z.words[T])+k)>>26,this.words[T]=67108863&N;if(k===0&&T<Z.length&&Z!==this)for(;T<Z.length;T++)this.words[T]=Z.words[T];return this.length=Math.max(this.length,T),Z!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(B){return this.clone().isub(B)};var y=function(B,N,Z){var w,C,k,T=B.words,R=N.words,F=Z.words,H=0,rt=0|T[0],ot=8191&rt,dt=rt>>>13,$=0|T[1],ct=8191&$,W=$>>>13,V=0|T[2],it=8191&V,mt=V>>>13,wt=0|T[3],_t=8191&wt,Ct=wt>>>13,Ft=0|T[4],It=8191&Ft,vt=Ft>>>13,kt=0|T[5],gt=8191&kt,ut=kt>>>13,Q=0|T[6],Y=8191&Q,et=Q>>>13,lt=0|T[7],pt=8191&lt,bt=lt>>>13,Et=0|T[8],Ot=8191&Et,zt=Et>>>13,Gt=0|T[9],Jt=8191&Gt,Kt=Gt>>>13,re=0|R[0],Xt=8191&re,Ut=re>>>13,_e=0|R[1],le=8191&_e,ye=_e>>>13,Ze=0|R[2],ce=8191&Ze,ke=Ze>>>13,He=0|R[3],$t=8191&He,Te=He>>>13,br=0|R[4],ue=8191&br,Fe=br>>>13,ar=0|R[5],Le=8191&ar,Oe=ar>>>13,ri=0|R[6],We=8191&ri,At=ri>>>13,qt=0|R[7],jt=8191&qt,ae=qt>>>13,Qe=0|R[8],se=8191&Qe,ve=Qe>>>13,$e=0|R[9],Ae=8191&$e,fe=$e>>>13;Z.negative=B.negative^N.negative,Z.length=19;var Ye=(H+(w=Math.imul(ot,Xt))|0)+((8191&(C=(C=Math.imul(ot,Ut))+Math.imul(dt,Xt)|0))<<13)|0;H=((k=Math.imul(dt,Ut))+(C>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,w=Math.imul(ct,Xt),C=(C=Math.imul(ct,Ut))+Math.imul(W,Xt)|0,k=Math.imul(W,Ut);var Ve=(H+(w=w+Math.imul(ot,le)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ye)|0)+Math.imul(dt,le)|0))<<13)|0;H=((k=k+Math.imul(dt,ye)|0)+(C>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,w=Math.imul(it,Xt),C=(C=Math.imul(it,Ut))+Math.imul(mt,Xt)|0,k=Math.imul(mt,Ut),w=w+Math.imul(ct,le)|0,C=(C=C+Math.imul(ct,ye)|0)+Math.imul(W,le)|0,k=k+Math.imul(W,ye)|0;var rr=(H+(w=w+Math.imul(ot,ce)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ke)|0)+Math.imul(dt,ce)|0))<<13)|0;H=((k=k+Math.imul(dt,ke)|0)+(C>>>13)|0)+(rr>>>26)|0,rr&=67108863,w=Math.imul(_t,Xt),C=(C=Math.imul(_t,Ut))+Math.imul(Ct,Xt)|0,k=Math.imul(Ct,Ut),w=w+Math.imul(it,le)|0,C=(C=C+Math.imul(it,ye)|0)+Math.imul(mt,le)|0,k=k+Math.imul(mt,ye)|0,w=w+Math.imul(ct,ce)|0,C=(C=C+Math.imul(ct,ke)|0)+Math.imul(W,ce)|0,k=k+Math.imul(W,ke)|0;var Ke=(H+(w=w+Math.imul(ot,$t)|0)|0)+((8191&(C=(C=C+Math.imul(ot,Te)|0)+Math.imul(dt,$t)|0))<<13)|0;H=((k=k+Math.imul(dt,Te)|0)+(C>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,w=Math.imul(It,Xt),C=(C=Math.imul(It,Ut))+Math.imul(vt,Xt)|0,k=Math.imul(vt,Ut),w=w+Math.imul(_t,le)|0,C=(C=C+Math.imul(_t,ye)|0)+Math.imul(Ct,le)|0,k=k+Math.imul(Ct,ye)|0,w=w+Math.imul(it,ce)|0,C=(C=C+Math.imul(it,ke)|0)+Math.imul(mt,ce)|0,k=k+Math.imul(mt,ke)|0,w=w+Math.imul(ct,$t)|0,C=(C=C+Math.imul(ct,Te)|0)+Math.imul(W,$t)|0,k=k+Math.imul(W,Te)|0;var pi=(H+(w=w+Math.imul(ot,ue)|0)|0)+((8191&(C=(C=C+Math.imul(ot,Fe)|0)+Math.imul(dt,ue)|0))<<13)|0;H=((k=k+Math.imul(dt,Fe)|0)+(C>>>13)|0)+(pi>>>26)|0,pi&=67108863,w=Math.imul(gt,Xt),C=(C=Math.imul(gt,Ut))+Math.imul(ut,Xt)|0,k=Math.imul(ut,Ut),w=w+Math.imul(It,le)|0,C=(C=C+Math.imul(It,ye)|0)+Math.imul(vt,le)|0,k=k+Math.imul(vt,ye)|0,w=w+Math.imul(_t,ce)|0,C=(C=C+Math.imul(_t,ke)|0)+Math.imul(Ct,ce)|0,k=k+Math.imul(Ct,ke)|0,w=w+Math.imul(it,$t)|0,C=(C=C+Math.imul(it,Te)|0)+Math.imul(mt,$t)|0,k=k+Math.imul(mt,Te)|0,w=w+Math.imul(ct,ue)|0,C=(C=C+Math.imul(ct,Fe)|0)+Math.imul(W,ue)|0,k=k+Math.imul(W,Fe)|0;var Je=(H+(w=w+Math.imul(ot,Le)|0)|0)+((8191&(C=(C=C+Math.imul(ot,Oe)|0)+Math.imul(dt,Le)|0))<<13)|0;H=((k=k+Math.imul(dt,Oe)|0)+(C>>>13)|0)+(Je>>>26)|0,Je&=67108863,w=Math.imul(Y,Xt),C=(C=Math.imul(Y,Ut))+Math.imul(et,Xt)|0,k=Math.imul(et,Ut),w=w+Math.imul(gt,le)|0,C=(C=C+Math.imul(gt,ye)|0)+Math.imul(ut,le)|0,k=k+Math.imul(ut,ye)|0,w=w+Math.imul(It,ce)|0,C=(C=C+Math.imul(It,ke)|0)+Math.imul(vt,ce)|0,k=k+Math.imul(vt,ke)|0,w=w+Math.imul(_t,$t)|0,C=(C=C+Math.imul(_t,Te)|0)+Math.imul(Ct,$t)|0,k=k+Math.imul(Ct,Te)|0,w=w+Math.imul(it,ue)|0,C=(C=C+Math.imul(it,Fe)|0)+Math.imul(mt,ue)|0,k=k+Math.imul(mt,Fe)|0,w=w+Math.imul(ct,Le)|0,C=(C=C+Math.imul(ct,Oe)|0)+Math.imul(W,Le)|0,k=k+Math.imul(W,Oe)|0;var or=(H+(w=w+Math.imul(ot,We)|0)|0)+((8191&(C=(C=C+Math.imul(ot,At)|0)+Math.imul(dt,We)|0))<<13)|0;H=((k=k+Math.imul(dt,At)|0)+(C>>>13)|0)+(or>>>26)|0,or&=67108863,w=Math.imul(pt,Xt),C=(C=Math.imul(pt,Ut))+Math.imul(bt,Xt)|0,k=Math.imul(bt,Ut),w=w+Math.imul(Y,le)|0,C=(C=C+Math.imul(Y,ye)|0)+Math.imul(et,le)|0,k=k+Math.imul(et,ye)|0,w=w+Math.imul(gt,ce)|0,C=(C=C+Math.imul(gt,ke)|0)+Math.imul(ut,ce)|0,k=k+Math.imul(ut,ke)|0,w=w+Math.imul(It,$t)|0,C=(C=C+Math.imul(It,Te)|0)+Math.imul(vt,$t)|0,k=k+Math.imul(vt,Te)|0,w=w+Math.imul(_t,ue)|0,C=(C=C+Math.imul(_t,Fe)|0)+Math.imul(Ct,ue)|0,k=k+Math.imul(Ct,Fe)|0,w=w+Math.imul(it,Le)|0,C=(C=C+Math.imul(it,Oe)|0)+Math.imul(mt,Le)|0,k=k+Math.imul(mt,Oe)|0,w=w+Math.imul(ct,We)|0,C=(C=C+Math.imul(ct,At)|0)+Math.imul(W,We)|0,k=k+Math.imul(W,At)|0;var ci=(H+(w=w+Math.imul(ot,jt)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ae)|0)+Math.imul(dt,jt)|0))<<13)|0;H=((k=k+Math.imul(dt,ae)|0)+(C>>>13)|0)+(ci>>>26)|0,ci&=67108863,w=Math.imul(Ot,Xt),C=(C=Math.imul(Ot,Ut))+Math.imul(zt,Xt)|0,k=Math.imul(zt,Ut),w=w+Math.imul(pt,le)|0,C=(C=C+Math.imul(pt,ye)|0)+Math.imul(bt,le)|0,k=k+Math.imul(bt,ye)|0,w=w+Math.imul(Y,ce)|0,C=(C=C+Math.imul(Y,ke)|0)+Math.imul(et,ce)|0,k=k+Math.imul(et,ke)|0,w=w+Math.imul(gt,$t)|0,C=(C=C+Math.imul(gt,Te)|0)+Math.imul(ut,$t)|0,k=k+Math.imul(ut,Te)|0,w=w+Math.imul(It,ue)|0,C=(C=C+Math.imul(It,Fe)|0)+Math.imul(vt,ue)|0,k=k+Math.imul(vt,Fe)|0,w=w+Math.imul(_t,Le)|0,C=(C=C+Math.imul(_t,Oe)|0)+Math.imul(Ct,Le)|0,k=k+Math.imul(Ct,Oe)|0,w=w+Math.imul(it,We)|0,C=(C=C+Math.imul(it,At)|0)+Math.imul(mt,We)|0,k=k+Math.imul(mt,At)|0,w=w+Math.imul(ct,jt)|0,C=(C=C+Math.imul(ct,ae)|0)+Math.imul(W,jt)|0,k=k+Math.imul(W,ae)|0;var kr=(H+(w=w+Math.imul(ot,se)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ve)|0)+Math.imul(dt,se)|0))<<13)|0;H=((k=k+Math.imul(dt,ve)|0)+(C>>>13)|0)+(kr>>>26)|0,kr&=67108863,w=Math.imul(Jt,Xt),C=(C=Math.imul(Jt,Ut))+Math.imul(Kt,Xt)|0,k=Math.imul(Kt,Ut),w=w+Math.imul(Ot,le)|0,C=(C=C+Math.imul(Ot,ye)|0)+Math.imul(zt,le)|0,k=k+Math.imul(zt,ye)|0,w=w+Math.imul(pt,ce)|0,C=(C=C+Math.imul(pt,ke)|0)+Math.imul(bt,ce)|0,k=k+Math.imul(bt,ke)|0,w=w+Math.imul(Y,$t)|0,C=(C=C+Math.imul(Y,Te)|0)+Math.imul(et,$t)|0,k=k+Math.imul(et,Te)|0,w=w+Math.imul(gt,ue)|0,C=(C=C+Math.imul(gt,Fe)|0)+Math.imul(ut,ue)|0,k=k+Math.imul(ut,Fe)|0,w=w+Math.imul(It,Le)|0,C=(C=C+Math.imul(It,Oe)|0)+Math.imul(vt,Le)|0,k=k+Math.imul(vt,Oe)|0,w=w+Math.imul(_t,We)|0,C=(C=C+Math.imul(_t,At)|0)+Math.imul(Ct,We)|0,k=k+Math.imul(Ct,At)|0,w=w+Math.imul(it,jt)|0,C=(C=C+Math.imul(it,ae)|0)+Math.imul(mt,jt)|0,k=k+Math.imul(mt,ae)|0,w=w+Math.imul(ct,se)|0,C=(C=C+Math.imul(ct,ve)|0)+Math.imul(W,se)|0,k=k+Math.imul(W,ve)|0;var Tt=(H+(w=w+Math.imul(ot,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(ot,fe)|0)+Math.imul(dt,Ae)|0))<<13)|0;H=((k=k+Math.imul(dt,fe)|0)+(C>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,w=Math.imul(Jt,le),C=(C=Math.imul(Jt,ye))+Math.imul(Kt,le)|0,k=Math.imul(Kt,ye),w=w+Math.imul(Ot,ce)|0,C=(C=C+Math.imul(Ot,ke)|0)+Math.imul(zt,ce)|0,k=k+Math.imul(zt,ke)|0,w=w+Math.imul(pt,$t)|0,C=(C=C+Math.imul(pt,Te)|0)+Math.imul(bt,$t)|0,k=k+Math.imul(bt,Te)|0,w=w+Math.imul(Y,ue)|0,C=(C=C+Math.imul(Y,Fe)|0)+Math.imul(et,ue)|0,k=k+Math.imul(et,Fe)|0,w=w+Math.imul(gt,Le)|0,C=(C=C+Math.imul(gt,Oe)|0)+Math.imul(ut,Le)|0,k=k+Math.imul(ut,Oe)|0,w=w+Math.imul(It,We)|0,C=(C=C+Math.imul(It,At)|0)+Math.imul(vt,We)|0,k=k+Math.imul(vt,At)|0,w=w+Math.imul(_t,jt)|0,C=(C=C+Math.imul(_t,ae)|0)+Math.imul(Ct,jt)|0,k=k+Math.imul(Ct,ae)|0,w=w+Math.imul(it,se)|0,C=(C=C+Math.imul(it,ve)|0)+Math.imul(mt,se)|0,k=k+Math.imul(mt,ve)|0;var Ht=(H+(w=w+Math.imul(ct,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(ct,fe)|0)+Math.imul(W,Ae)|0))<<13)|0;H=((k=k+Math.imul(W,fe)|0)+(C>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,w=Math.imul(Jt,ce),C=(C=Math.imul(Jt,ke))+Math.imul(Kt,ce)|0,k=Math.imul(Kt,ke),w=w+Math.imul(Ot,$t)|0,C=(C=C+Math.imul(Ot,Te)|0)+Math.imul(zt,$t)|0,k=k+Math.imul(zt,Te)|0,w=w+Math.imul(pt,ue)|0,C=(C=C+Math.imul(pt,Fe)|0)+Math.imul(bt,ue)|0,k=k+Math.imul(bt,Fe)|0,w=w+Math.imul(Y,Le)|0,C=(C=C+Math.imul(Y,Oe)|0)+Math.imul(et,Le)|0,k=k+Math.imul(et,Oe)|0,w=w+Math.imul(gt,We)|0,C=(C=C+Math.imul(gt,At)|0)+Math.imul(ut,We)|0,k=k+Math.imul(ut,At)|0,w=w+Math.imul(It,jt)|0,C=(C=C+Math.imul(It,ae)|0)+Math.imul(vt,jt)|0,k=k+Math.imul(vt,ae)|0,w=w+Math.imul(_t,se)|0,C=(C=C+Math.imul(_t,ve)|0)+Math.imul(Ct,se)|0,k=k+Math.imul(Ct,ve)|0;var ie=(H+(w=w+Math.imul(it,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(it,fe)|0)+Math.imul(mt,Ae)|0))<<13)|0;H=((k=k+Math.imul(mt,fe)|0)+(C>>>13)|0)+(ie>>>26)|0,ie&=67108863,w=Math.imul(Jt,$t),C=(C=Math.imul(Jt,Te))+Math.imul(Kt,$t)|0,k=Math.imul(Kt,Te),w=w+Math.imul(Ot,ue)|0,C=(C=C+Math.imul(Ot,Fe)|0)+Math.imul(zt,ue)|0,k=k+Math.imul(zt,Fe)|0,w=w+Math.imul(pt,Le)|0,C=(C=C+Math.imul(pt,Oe)|0)+Math.imul(bt,Le)|0,k=k+Math.imul(bt,Oe)|0,w=w+Math.imul(Y,We)|0,C=(C=C+Math.imul(Y,At)|0)+Math.imul(et,We)|0,k=k+Math.imul(et,At)|0,w=w+Math.imul(gt,jt)|0,C=(C=C+Math.imul(gt,ae)|0)+Math.imul(ut,jt)|0,k=k+Math.imul(ut,ae)|0,w=w+Math.imul(It,se)|0,C=(C=C+Math.imul(It,ve)|0)+Math.imul(vt,se)|0,k=k+Math.imul(vt,ve)|0;var Qt=(H+(w=w+Math.imul(_t,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(_t,fe)|0)+Math.imul(Ct,Ae)|0))<<13)|0;H=((k=k+Math.imul(Ct,fe)|0)+(C>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,w=Math.imul(Jt,ue),C=(C=Math.imul(Jt,Fe))+Math.imul(Kt,ue)|0,k=Math.imul(Kt,Fe),w=w+Math.imul(Ot,Le)|0,C=(C=C+Math.imul(Ot,Oe)|0)+Math.imul(zt,Le)|0,k=k+Math.imul(zt,Oe)|0,w=w+Math.imul(pt,We)|0,C=(C=C+Math.imul(pt,At)|0)+Math.imul(bt,We)|0,k=k+Math.imul(bt,At)|0,w=w+Math.imul(Y,jt)|0,C=(C=C+Math.imul(Y,ae)|0)+Math.imul(et,jt)|0,k=k+Math.imul(et,ae)|0,w=w+Math.imul(gt,se)|0,C=(C=C+Math.imul(gt,ve)|0)+Math.imul(ut,se)|0,k=k+Math.imul(ut,ve)|0;var he=(H+(w=w+Math.imul(It,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(It,fe)|0)+Math.imul(vt,Ae)|0))<<13)|0;H=((k=k+Math.imul(vt,fe)|0)+(C>>>13)|0)+(he>>>26)|0,he&=67108863,w=Math.imul(Jt,Le),C=(C=Math.imul(Jt,Oe))+Math.imul(Kt,Le)|0,k=Math.imul(Kt,Oe),w=w+Math.imul(Ot,We)|0,C=(C=C+Math.imul(Ot,At)|0)+Math.imul(zt,We)|0,k=k+Math.imul(zt,At)|0,w=w+Math.imul(pt,jt)|0,C=(C=C+Math.imul(pt,ae)|0)+Math.imul(bt,jt)|0,k=k+Math.imul(bt,ae)|0,w=w+Math.imul(Y,se)|0,C=(C=C+Math.imul(Y,ve)|0)+Math.imul(et,se)|0,k=k+Math.imul(et,ve)|0;var Ee=(H+(w=w+Math.imul(gt,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(gt,fe)|0)+Math.imul(ut,Ae)|0))<<13)|0;H=((k=k+Math.imul(ut,fe)|0)+(C>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,w=Math.imul(Jt,We),C=(C=Math.imul(Jt,At))+Math.imul(Kt,We)|0,k=Math.imul(Kt,At),w=w+Math.imul(Ot,jt)|0,C=(C=C+Math.imul(Ot,ae)|0)+Math.imul(zt,jt)|0,k=k+Math.imul(zt,ae)|0,w=w+Math.imul(pt,se)|0,C=(C=C+Math.imul(pt,ve)|0)+Math.imul(bt,se)|0,k=k+Math.imul(bt,ve)|0;var Ie=(H+(w=w+Math.imul(Y,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(Y,fe)|0)+Math.imul(et,Ae)|0))<<13)|0;H=((k=k+Math.imul(et,fe)|0)+(C>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,w=Math.imul(Jt,jt),C=(C=Math.imul(Jt,ae))+Math.imul(Kt,jt)|0,k=Math.imul(Kt,ae),w=w+Math.imul(Ot,se)|0,C=(C=C+Math.imul(Ot,ve)|0)+Math.imul(zt,se)|0,k=k+Math.imul(zt,ve)|0;var tr=(H+(w=w+Math.imul(pt,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(pt,fe)|0)+Math.imul(bt,Ae)|0))<<13)|0;H=((k=k+Math.imul(bt,fe)|0)+(C>>>13)|0)+(tr>>>26)|0,tr&=67108863,w=Math.imul(Jt,se),C=(C=Math.imul(Jt,ve))+Math.imul(Kt,se)|0,k=Math.imul(Kt,ve);var Ue=(H+(w=w+Math.imul(Ot,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(Ot,fe)|0)+Math.imul(zt,Ae)|0))<<13)|0;H=((k=k+Math.imul(zt,fe)|0)+(C>>>13)|0)+(Ue>>>26)|0,Ue&=67108863;var we=(H+(w=Math.imul(Jt,Ae))|0)+((8191&(C=(C=Math.imul(Jt,fe))+Math.imul(Kt,Ae)|0))<<13)|0;return H=((k=Math.imul(Kt,fe))+(C>>>13)|0)+(we>>>26)|0,we&=67108863,F[0]=Ye,F[1]=Ve,F[2]=rr,F[3]=Ke,F[4]=pi,F[5]=Je,F[6]=or,F[7]=ci,F[8]=kr,F[9]=Tt,F[10]=Ht,F[11]=ie,F[12]=Qt,F[13]=he,F[14]=Ee,F[15]=Ie,F[16]=tr,F[17]=Ue,F[18]=we,H!==0&&(F[19]=H,Z.length++),Z};function x(B,N,Z){return new S().mulp(B,N,Z)}function S(B,N){this.x=B,this.y=N}Math.imul||(y=b),a.prototype.mulTo=function(B,N){var Z=this.length+B.length;return this.length===10&&B.length===10?y(this,B,N):Z<63?b(this,B,N):Z<1024?function(w,C,k){k.negative=C.negative^w.negative,k.length=w.length+C.length;for(var T=0,R=0,F=0;F<k.length-1;F++){var H=R;R=0;for(var rt=67108863&T,ot=Math.min(F,C.length-1),dt=Math.max(0,F-w.length+1);dt<=ot;dt++){var $=F-dt,ct=(0|w.words[$])*(0|C.words[dt]),W=67108863&ct;rt=67108863&(W=W+rt|0),R+=(H=(H=H+(ct/67108864|0)|0)+(W>>>26)|0)>>>26,H&=67108863}k.words[F]=rt,T=H,H=R}return T!==0?k.words[F]=T:k.length--,k.strip()}(this,B,N):x(this,B,N)},S.prototype.makeRBT=function(B){for(var N=new Array(B),Z=a.prototype._countBits(B)-1,w=0;w<B;w++)N[w]=this.revBin(w,Z,B);return N},S.prototype.revBin=function(B,N,Z){if(B===0||B===Z-1)return B;for(var w=0,C=0;C<N;C++)w|=(1&B)<<N-C-1,B>>=1;return w},S.prototype.permute=function(B,N,Z,w,C,k){for(var T=0;T<k;T++)w[T]=N[B[T]],C[T]=Z[B[T]]},S.prototype.transform=function(B,N,Z,w,C,k){this.permute(k,B,N,Z,w,C);for(var T=1;T<C;T<<=1)for(var R=T<<1,F=Math.cos(2*Math.PI/R),H=Math.sin(2*Math.PI/R),rt=0;rt<C;rt+=R)for(var ot=F,dt=H,$=0;$<T;$++){var ct=Z[rt+$],W=w[rt+$],V=Z[rt+$+T],it=w[rt+$+T],mt=ot*V-dt*it;it=ot*it+dt*V,V=mt,Z[rt+$]=ct+V,w[rt+$]=W+it,Z[rt+$+T]=ct-V,w[rt+$+T]=W-it,$!==R&&(mt=F*ot-H*dt,dt=F*dt+H*ot,ot=mt)}},S.prototype.guessLen13b=function(B,N){var Z=1|Math.max(N,B),w=1&Z,C=0;for(Z=Z/2|0;Z;Z>>>=1)C++;return 1<<C+1+w},S.prototype.conjugate=function(B,N,Z){if(!(Z<=1))for(var w=0;w<Z/2;w++){var C=B[w];B[w]=B[Z-w-1],B[Z-w-1]=C,C=N[w],N[w]=-N[Z-w-1],N[Z-w-1]=-C}},S.prototype.normalize13b=function(B,N){for(var Z=0,w=0;w<N/2;w++){var C=8192*Math.round(B[2*w+1]/N)+Math.round(B[2*w]/N)+Z;B[w]=67108863&C,Z=C<67108864?0:C/67108864|0}return B},S.prototype.convert13b=function(B,N,Z,w){for(var C=0,k=0;k<N;k++)C+=0|B[k],Z[2*k]=8191&C,C>>>=13,Z[2*k+1]=8191&C,C>>>=13;for(k=2*N;k<w;++k)Z[k]=0;s(C===0),s((-8192&C)==0)},S.prototype.stub=function(B){for(var N=new Array(B),Z=0;Z<B;Z++)N[Z]=0;return N},S.prototype.mulp=function(B,N,Z){var w=2*this.guessLen13b(B.length,N.length),C=this.makeRBT(w),k=this.stub(w),T=new Array(w),R=new Array(w),F=new Array(w),H=new Array(w),rt=new Array(w),ot=new Array(w),dt=Z.words;dt.length=w,this.convert13b(B.words,B.length,T,w),this.convert13b(N.words,N.length,H,w),this.transform(T,k,R,F,w,C),this.transform(H,k,rt,ot,w,C);for(var $=0;$<w;$++){var ct=R[$]*rt[$]-F[$]*ot[$];F[$]=R[$]*ot[$]+F[$]*rt[$],R[$]=ct}return this.conjugate(R,F,w),this.transform(R,F,dt,k,w,C),this.conjugate(dt,k,w),this.normalize13b(dt,w),Z.negative=B.negative^N.negative,Z.length=B.length+N.length,Z.strip()},a.prototype.mul=function(B){var N=new a(null);return N.words=new Array(this.length+B.length),this.mulTo(B,N)},a.prototype.mulf=function(B){var N=new a(null);return N.words=new Array(this.length+B.length),x(this,B,N)},a.prototype.imul=function(B){return this.clone().mulTo(B,this)},a.prototype.imuln=function(B){s(typeof B=="number"),s(B<67108864);for(var N=0,Z=0;Z<this.length;Z++){var w=(0|this.words[Z])*B,C=(67108863&w)+(67108863&N);N>>=26,N+=w/67108864|0,N+=C>>>26,this.words[Z]=67108863&C}return N!==0&&(this.words[Z]=N,this.length++),this},a.prototype.muln=function(B){return this.clone().imuln(B)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(B){var N=function(k){for(var T=new Array(k.bitLength()),R=0;R<T.length;R++){var F=R/26|0,H=R%26;T[R]=(k.words[F]&1<<H)>>>H}return T}(B);if(N.length===0)return new a(1);for(var Z=this,w=0;w<N.length&&N[w]===0;w++,Z=Z.sqr());if(++w<N.length)for(var C=Z.sqr();w<N.length;w++,C=C.sqr())N[w]!==0&&(Z=Z.mul(C));return Z},a.prototype.iushln=function(B){s(typeof B=="number"&&B>=0);var N,Z=B%26,w=(B-Z)/26,C=67108863>>>26-Z<<26-Z;if(Z!==0){var k=0;for(N=0;N<this.length;N++){var T=this.words[N]&C,R=(0|this.words[N])-T<<Z;this.words[N]=R|k,k=T>>>26-Z}k&&(this.words[N]=k,this.length++)}if(w!==0){for(N=this.length-1;N>=0;N--)this.words[N+w]=this.words[N];for(N=0;N<w;N++)this.words[N]=0;this.length+=w}return this.strip()},a.prototype.ishln=function(B){return s(this.negative===0),this.iushln(B)},a.prototype.iushrn=function(B,N,Z){var w;s(typeof B=="number"&&B>=0),w=N?(N-N%26)/26:0;var C=B%26,k=Math.min((B-C)/26,this.length),T=67108863^67108863>>>C<<C,R=Z;if(w-=k,w=Math.max(0,w),R){for(var F=0;F<k;F++)R.words[F]=this.words[F];R.length=k}if(k!==0)if(this.length>k)for(this.length-=k,F=0;F<this.length;F++)this.words[F]=this.words[F+k];else this.words[0]=0,this.length=1;var H=0;for(F=this.length-1;F>=0&&(H!==0||F>=w);F--){var rt=0|this.words[F];this.words[F]=H<<26-C|rt>>>C,H=rt&T}return R&&H!==0&&(R.words[R.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(B,N,Z){return s(this.negative===0),this.iushrn(B,N,Z)},a.prototype.shln=function(B){return this.clone().ishln(B)},a.prototype.ushln=function(B){return this.clone().iushln(B)},a.prototype.shrn=function(B){return this.clone().ishrn(B)},a.prototype.ushrn=function(B){return this.clone().iushrn(B)},a.prototype.testn=function(B){s(typeof B=="number"&&B>=0);var N=B%26,Z=(B-N)/26,w=1<<N;return!(this.length<=Z)&&!!(this.words[Z]&w)},a.prototype.imaskn=function(B){s(typeof B=="number"&&B>=0);var N=B%26,Z=(B-N)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(N!==0&&Z++,this.length=Math.min(Z,this.length),N!==0){var w=67108863^67108863>>>N<<N;this.words[this.length-1]&=w}return this.strip()},a.prototype.maskn=function(B){return this.clone().imaskn(B)},a.prototype.iaddn=function(B){return s(typeof B=="number"),s(B<67108864),B<0?this.isubn(-B):this.negative!==0?this.length===1&&(0|this.words[0])<B?(this.words[0]=B-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(B),this.negative=1,this):this._iaddn(B)},a.prototype._iaddn=function(B){this.words[0]+=B;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},a.prototype.isubn=function(B){if(s(typeof B=="number"),s(B<67108864),B<0)return this.iaddn(-B);if(this.negative!==0)return this.negative=0,this.iaddn(B),this.negative=1,this;if(this.words[0]-=B,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},a.prototype.addn=function(B){return this.clone().iaddn(B)},a.prototype.subn=function(B){return this.clone().isubn(B)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(B,N,Z){var w,C,k=B.length+Z;this._expand(k);var T=0;for(w=0;w<B.length;w++){C=(0|this.words[w+Z])+T;var R=(0|B.words[w])*N;T=((C-=67108863&R)>>26)-(R/67108864|0),this.words[w+Z]=67108863&C}for(;w<this.length-Z;w++)T=(C=(0|this.words[w+Z])+T)>>26,this.words[w+Z]=67108863&C;if(T===0)return this.strip();for(s(T===-1),T=0,w=0;w<this.length;w++)T=(C=-(0|this.words[w])+T)>>26,this.words[w]=67108863&C;return this.negative=1,this.strip()},a.prototype._wordDiv=function(B,N){var Z=(this.length,B.length),w=this.clone(),C=B,k=0|C.words[C.length-1];(Z=26-this._countBits(k))!==0&&(C=C.ushln(Z),w.iushln(Z),k=0|C.words[C.length-1]);var T,R=w.length-C.length;if(N!=="mod"){(T=new a(null)).length=R+1,T.words=new Array(T.length);for(var F=0;F<T.length;F++)T.words[F]=0}var H=w.clone()._ishlnsubmul(C,1,R);H.negative===0&&(w=H,T&&(T.words[R]=1));for(var rt=R-1;rt>=0;rt--){var ot=67108864*(0|w.words[C.length+rt])+(0|w.words[C.length+rt-1]);for(ot=Math.min(ot/k|0,67108863),w._ishlnsubmul(C,ot,rt);w.negative!==0;)ot--,w.negative=0,w._ishlnsubmul(C,1,rt),w.isZero()||(w.negative^=1);T&&(T.words[rt]=ot)}return T&&T.strip(),w.strip(),N!=="div"&&Z!==0&&w.iushrn(Z),{div:T||null,mod:w}},a.prototype.divmod=function(B,N,Z){return s(!B.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&B.negative===0?(k=this.neg().divmod(B,N),N!=="mod"&&(w=k.div.neg()),N!=="div"&&(C=k.mod.neg(),Z&&C.negative!==0&&C.iadd(B)),{div:w,mod:C}):this.negative===0&&B.negative!==0?(k=this.divmod(B.neg(),N),N!=="mod"&&(w=k.div.neg()),{div:w,mod:k.mod}):this.negative&B.negative?(k=this.neg().divmod(B.neg(),N),N!=="div"&&(C=k.mod.neg(),Z&&C.negative!==0&&C.isub(B)),{div:k.div,mod:C}):B.length>this.length||this.cmp(B)<0?{div:new a(0),mod:this}:B.length===1?N==="div"?{div:this.divn(B.words[0]),mod:null}:N==="mod"?{div:null,mod:new a(this.modn(B.words[0]))}:{div:this.divn(B.words[0]),mod:new a(this.modn(B.words[0]))}:this._wordDiv(B,N);var w,C,k},a.prototype.div=function(B){return this.divmod(B,"div",!1).div},a.prototype.mod=function(B){return this.divmod(B,"mod",!1).mod},a.prototype.umod=function(B){return this.divmod(B,"mod",!0).mod},a.prototype.divRound=function(B){var N=this.divmod(B);if(N.mod.isZero())return N.div;var Z=N.div.negative!==0?N.mod.isub(B):N.mod,w=B.ushrn(1),C=B.andln(1),k=Z.cmp(w);return k<0||C===1&&k===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},a.prototype.modn=function(B){s(B<=67108863);for(var N=(1<<26)%B,Z=0,w=this.length-1;w>=0;w--)Z=(N*Z+(0|this.words[w]))%B;return Z},a.prototype.idivn=function(B){s(B<=67108863);for(var N=0,Z=this.length-1;Z>=0;Z--){var w=(0|this.words[Z])+67108864*N;this.words[Z]=w/B|0,N=w%B}return this.strip()},a.prototype.divn=function(B){return this.clone().idivn(B)},a.prototype.egcd=function(B){s(B.negative===0),s(!B.isZero());var N=this,Z=B.clone();N=N.negative!==0?N.umod(B):N.clone();for(var w=new a(1),C=new a(0),k=new a(0),T=new a(1),R=0;N.isEven()&&Z.isEven();)N.iushrn(1),Z.iushrn(1),++R;for(var F=Z.clone(),H=N.clone();!N.isZero();){for(var rt=0,ot=1;!(N.words[0]&ot)&&rt<26;++rt,ot<<=1);if(rt>0)for(N.iushrn(rt);rt-- >0;)(w.isOdd()||C.isOdd())&&(w.iadd(F),C.isub(H)),w.iushrn(1),C.iushrn(1);for(var dt=0,$=1;!(Z.words[0]&$)&&dt<26;++dt,$<<=1);if(dt>0)for(Z.iushrn(dt);dt-- >0;)(k.isOdd()||T.isOdd())&&(k.iadd(F),T.isub(H)),k.iushrn(1),T.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),w.isub(k),C.isub(T)):(Z.isub(N),k.isub(w),T.isub(C))}return{a:k,b:T,gcd:Z.iushln(R)}},a.prototype._invmp=function(B){s(B.negative===0),s(!B.isZero());var N=this,Z=B.clone();N=N.negative!==0?N.umod(B):N.clone();for(var w,C=new a(1),k=new a(0),T=Z.clone();N.cmpn(1)>0&&Z.cmpn(1)>0;){for(var R=0,F=1;!(N.words[0]&F)&&R<26;++R,F<<=1);if(R>0)for(N.iushrn(R);R-- >0;)C.isOdd()&&C.iadd(T),C.iushrn(1);for(var H=0,rt=1;!(Z.words[0]&rt)&&H<26;++H,rt<<=1);if(H>0)for(Z.iushrn(H);H-- >0;)k.isOdd()&&k.iadd(T),k.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),C.isub(k)):(Z.isub(N),k.isub(C))}return(w=N.cmpn(1)===0?C:k).cmpn(0)<0&&w.iadd(B),w},a.prototype.gcd=function(B){if(this.isZero())return B.abs();if(B.isZero())return this.abs();var N=this.clone(),Z=B.clone();N.negative=0,Z.negative=0;for(var w=0;N.isEven()&&Z.isEven();w++)N.iushrn(1),Z.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var C=N.cmp(Z);if(C<0){var k=N;N=Z,Z=k}else if(C===0||Z.cmpn(1)===0)break;N.isub(Z)}return Z.iushln(w)},a.prototype.invm=function(B){return this.egcd(B).a.umod(B)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(B){return this.words[0]&B},a.prototype.bincn=function(B){s(typeof B=="number");var N=B%26,Z=(B-N)/26,w=1<<N;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=w,this;for(var C=w,k=Z;C!==0&&k<this.length;k++){var T=0|this.words[k];C=(T+=C)>>>26,T&=67108863,this.words[k]=T}return C!==0&&(this.words[k]=C,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(B){var N,Z=B<0;if(this.negative!==0&&!Z)return-1;if(this.negative===0&&Z)return 1;if(this.strip(),this.length>1)N=1;else{Z&&(B=-B),s(B<=67108863,"Number is too big");var w=0|this.words[0];N=w===B?0:w<B?-1:1}return this.negative!==0?0|-N:N},a.prototype.cmp=function(B){if(this.negative!==0&&B.negative===0)return-1;if(this.negative===0&&B.negative!==0)return 1;var N=this.ucmp(B);return this.negative!==0?0|-N:N},a.prototype.ucmp=function(B){if(this.length>B.length)return 1;if(this.length<B.length)return-1;for(var N=0,Z=this.length-1;Z>=0;Z--){var w=0|this.words[Z],C=0|B.words[Z];if(w!==C){w<C?N=-1:w>C&&(N=1);break}}return N},a.prototype.gtn=function(B){return this.cmpn(B)===1},a.prototype.gt=function(B){return this.cmp(B)===1},a.prototype.gten=function(B){return this.cmpn(B)>=0},a.prototype.gte=function(B){return this.cmp(B)>=0},a.prototype.ltn=function(B){return this.cmpn(B)===-1},a.prototype.lt=function(B){return this.cmp(B)===-1},a.prototype.lten=function(B){return this.cmpn(B)<=0},a.prototype.lte=function(B){return this.cmp(B)<=0},a.prototype.eqn=function(B){return this.cmpn(B)===0},a.prototype.eq=function(B){return this.cmp(B)===0},a.red=function(B){return new tt(B)},a.prototype.toRed=function(B){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),B.convertTo(this)._forceRed(B)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(B){return this.red=B,this},a.prototype.forceRed=function(B){return s(!this.red,"Already a number in reduction context"),this._forceRed(B)},a.prototype.redAdd=function(B){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,B)},a.prototype.redIAdd=function(B){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,B)},a.prototype.redSub=function(B){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,B)},a.prototype.redISub=function(B){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,B)},a.prototype.redShl=function(B){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,B)},a.prototype.redMul=function(B){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,B),this.red.mul(this,B)},a.prototype.redIMul=function(B){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,B),this.red.imul(this,B)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(B){return s(this.red&&!B.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,B)};var O={k256:null,p224:null,p192:null,p25519:null};function D(B,N){this.name=B,this.p=new a(N,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function z(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function G(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function tt(B){if(typeof B=="string"){var N=a._prime(B);this.m=N.p,this.prime=N}else s(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}function K(B){tt.call(this,B),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}D.prototype._tmp=function(){var B=new a(null);return B.words=new Array(Math.ceil(this.n/13)),B},D.prototype.ireduce=function(B){var N,Z=B;do this.split(Z,this.tmp),N=(Z=(Z=this.imulK(Z)).iadd(this.tmp)).bitLength();while(N>this.n);var w=N<this.n?-1:Z.ucmp(this.p);return w===0?(Z.words[0]=0,Z.length=1):w>0?Z.isub(this.p):Z.strip!==void 0?Z.strip():Z._strip(),Z},D.prototype.split=function(B,N){B.iushrn(this.n,0,N)},D.prototype.imulK=function(B){return B.imul(this.k)},o(U,D),U.prototype.split=function(B,N){for(var Z=Math.min(B.length,9),w=0;w<Z;w++)N.words[w]=B.words[w];if(N.length=Z,B.length<=9)return B.words[0]=0,void(B.length=1);var C=B.words[9];for(N.words[N.length++]=4194303&C,w=10;w<B.length;w++){var k=0|B.words[w];B.words[w-10]=(4194303&k)<<4|C>>>22,C=k}C>>>=22,B.words[w-10]=C,C===0&&B.length>10?B.length-=10:B.length-=9},U.prototype.imulK=function(B){B.words[B.length]=0,B.words[B.length+1]=0,B.length+=2;for(var N=0,Z=0;Z<B.length;Z++){var w=0|B.words[Z];N+=977*w,B.words[Z]=67108863&N,N=64*w+(N/67108864|0)}return B.words[B.length-1]===0&&(B.length--,B.words[B.length-1]===0&&B.length--),B},o(z,D),o(q,D),o(G,D),G.prototype.imulK=function(B){for(var N=0,Z=0;Z<B.length;Z++){var w=19*(0|B.words[Z])+N,C=67108863&w;w>>>=26,B.words[Z]=C,N=w}return N!==0&&(B.words[B.length++]=N),B},a._prime=function(B){if(O[B])return O[B];var N;if(B==="k256")N=new U;else if(B==="p224")N=new z;else if(B==="p192")N=new q;else{if(B!=="p25519")throw new Error("Unknown prime "+B);N=new G}return O[B]=N,N},tt.prototype._verify1=function(B){s(B.negative===0,"red works only with positives"),s(B.red,"red works only with red numbers")},tt.prototype._verify2=function(B,N){s((B.negative|N.negative)==0,"red works only with positives"),s(B.red&&B.red===N.red,"red works only with red numbers")},tt.prototype.imod=function(B){return this.prime?this.prime.ireduce(B)._forceRed(this):B.umod(this.m)._forceRed(this)},tt.prototype.neg=function(B){return B.isZero()?B.clone():this.m.sub(B)._forceRed(this)},tt.prototype.add=function(B,N){this._verify2(B,N);var Z=B.add(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},tt.prototype.iadd=function(B,N){this._verify2(B,N);var Z=B.iadd(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},tt.prototype.sub=function(B,N){this._verify2(B,N);var Z=B.sub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},tt.prototype.isub=function(B,N){this._verify2(B,N);var Z=B.isub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},tt.prototype.shl=function(B,N){return this._verify1(B),this.imod(B.ushln(N))},tt.prototype.imul=function(B,N){return this._verify2(B,N),this.imod(B.imul(N))},tt.prototype.mul=function(B,N){return this._verify2(B,N),this.imod(B.mul(N))},tt.prototype.isqr=function(B){return this.imul(B,B.clone())},tt.prototype.sqr=function(B){return this.mul(B,B)},tt.prototype.sqrt=function(B){if(B.isZero())return B.clone();var N=this.m.andln(3);if(s(N%2==1),N===3){var Z=this.m.add(new a(1)).iushrn(2);return this.pow(B,Z)}for(var w=this.m.subn(1),C=0;!w.isZero()&&w.andln(1)===0;)C++,w.iushrn(1);s(!w.isZero());var k=new a(1).toRed(this),T=k.redNeg(),R=this.m.subn(1).iushrn(1),F=this.m.bitLength();for(F=new a(2*F*F).toRed(this);this.pow(F,R).cmp(T)!==0;)F.redIAdd(T);for(var H=this.pow(F,w),rt=this.pow(B,w.addn(1).iushrn(1)),ot=this.pow(B,w),dt=C;ot.cmp(k)!==0;){for(var $=ot,ct=0;$.cmp(k)!==0;ct++)$=$.redSqr();s(ct<dt);var W=this.pow(H,new a(1).iushln(dt-ct-1));rt=rt.redMul(W),H=W.redSqr(),ot=ot.redMul(H),dt=ct}return rt},tt.prototype.invm=function(B){var N=B._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},tt.prototype.pow=function(B,N){if(N.isZero())return new a(1).toRed(this);if(N.cmpn(1)===0)return B.clone();var Z=new Array(16);Z[0]=new a(1).toRed(this),Z[1]=B;for(var w=2;w<Z.length;w++)Z[w]=this.mul(Z[w-1],B);var C=Z[0],k=0,T=0,R=N.bitLength()%26;for(R===0&&(R=26),w=N.length-1;w>=0;w--){for(var F=N.words[w],H=R-1;H>=0;H--){var rt=F>>H&1;C!==Z[0]&&(C=this.sqr(C)),rt!==0||k!==0?(k<<=1,k|=rt,(++T===4||w===0&&H===0)&&(C=this.mul(C,Z[k]),T=0,k=0)):T=0}R=26}return C},tt.prototype.convertTo=function(B){var N=B.umod(this.m);return N===B?N.clone():N},tt.prototype.convertFrom=function(B){var N=B.clone();return N.red=null,N},a.mont=function(B){return new K(B)},o(K,tt),K.prototype.convertTo=function(B){return this.imod(B.ushln(this.shift))},K.prototype.convertFrom=function(B){var N=this.imod(B.mul(this.rinv));return N.red=null,N},K.prototype.imul=function(B,N){if(B.isZero()||N.isZero())return B.words[0]=0,B.length=1,B;var Z=B.imul(N),w=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=Z.isub(w).iushrn(this.shift),k=C;return C.cmp(this.m)>=0?k=C.isub(this.m):C.cmpn(0)<0&&(k=C.iadd(this.m)),k._forceRed(this)},K.prototype.mul=function(B,N){if(B.isZero()||N.isZero())return new a(0)._forceRed(this);var Z=B.mul(N),w=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=Z.isub(w).iushrn(this.shift),k=C;return C.cmp(this.m)>=0?k=C.isub(this.m):C.cmpn(0)<0&&(k=C.iadd(this.m)),k._forceRed(this)},K.prototype.invm=function(B){return this.imod(B._invmp(this.m).mul(this.r2))._forceRed(this)}})(t===void 0||t)},{buffer:188}],185:[function(n,t,e){"use strict";e.byteLength=function(d){var p=c(d),g=p[0],m=p[1];return 3*(g+m)/4-m},e.toByteArray=function(d){var p,g,m=c(d),b=m[0],y=m[1],x=new s(function(D,U,z){return 3*(U+z)/4-z}(0,b,y)),S=0,O=y>0?b-4:b;for(g=0;g<O;g+=4)p=i[d.charCodeAt(g)]<<18|i[d.charCodeAt(g+1)]<<12|i[d.charCodeAt(g+2)]<<6|i[d.charCodeAt(g+3)],x[S++]=p>>16&255,x[S++]=p>>8&255,x[S++]=255&p;return y===2&&(p=i[d.charCodeAt(g)]<<2|i[d.charCodeAt(g+1)]>>4,x[S++]=255&p),y===1&&(p=i[d.charCodeAt(g)]<<10|i[d.charCodeAt(g+1)]<<4|i[d.charCodeAt(g+2)]>>2,x[S++]=p>>8&255,x[S++]=255&p),x},e.fromByteArray=function(d){for(var p,g=d.length,m=g%3,b=[],y=0,x=g-m;y<x;y+=16383)b.push(h(d,y,y+16383>x?x:y+16383));return m===1?(p=d[g-1],b.push(r[p>>2]+r[p<<4&63]+"==")):m===2&&(p=(d[g-2]<<8)+d[g-1],b.push(r[p>>10]+r[p>>4&63]+r[p<<2&63]+"=")),b.join("")};for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;function c(d){var p=d.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=d.indexOf("=");return g===-1&&(g=p),[g,g===p?0:4-g%4]}function h(d,p,g){for(var m,b,y=[],x=p;x<g;x+=3)m=(d[x]<<16&16711680)+(d[x+1]<<8&65280)+(255&d[x+2]),y.push(r[(b=m)>>18&63]+r[b>>12&63]+r[b>>6&63]+r[63&b]);return y.join("")}i[45]=62,i[95]=63},{}],186:[function(n,t,e){"use strict";(function(r,i){function s(w,C){if(!w)throw new Error(C||"Assertion failed")}function o(w,C){w.super_=C;var k=function(){};k.prototype=C.prototype,w.prototype=new k,w.prototype.constructor=w}function a(w,C,k){if(a.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&(C!=="le"&&C!=="be"||(k=C,C=10),this._init(w||0,C||10,k||"be"))}var l;typeof r=="object"?r.exports=a:(void 0).BN=a,a.BN=a,a.wordSize=26;try{l=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:n("buffer").Buffer}catch{}function c(w,C){var k=w.charCodeAt(C);return k>=48&&k<=57?k-48:k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:void s(!1,"Invalid character in "+w)}function h(w,C,k){var T=c(w,k);return k-1>=C&&(T|=c(w,k-1)<<4),T}function d(w,C,k,T){for(var R=0,F=0,H=Math.min(w.length,k),rt=C;rt<H;rt++){var ot=w.charCodeAt(rt)-48;R*=T,F=ot>=49?ot-49+10:ot>=17?ot-17+10:ot,s(ot>=0&&F<T,"Invalid character"),R+=F}return R}function p(w,C){w.words=C.words,w.length=C.length,w.negative=C.negative,w.red=C.red}if(a.isBN=function(w){return w instanceof a||w!==null&&typeof w=="object"&&w.constructor.wordSize===a.wordSize&&Array.isArray(w.words)},a.max=function(w,C){return w.cmp(C)>0?w:C},a.min=function(w,C){return w.cmp(C)<0?w:C},a.prototype._init=function(w,C,k){if(typeof w=="number")return this._initNumber(w,C,k);if(typeof w=="object")return this._initArray(w,C,k);C==="hex"&&(C=16),s(C===(0|C)&&C>=2&&C<=36);var T=0;(w=w.toString().replace(/\s+/g,""))[0]==="-"&&(T++,this.negative=1),T<w.length&&(C===16?this._parseHex(w,T,k):(this._parseBase(w,C,T),k==="le"&&this._initArray(this.toArray(),C,k)))},a.prototype._initNumber=function(w,C,k){w<0&&(this.negative=1,w=-w),w<67108864?(this.words=[67108863&w],this.length=1):w<4503599627370496?(this.words=[67108863&w,w/67108864&67108863],this.length=2):(s(w<9007199254740992),this.words=[67108863&w,w/67108864&67108863,1],this.length=3),k==="le"&&this._initArray(this.toArray(),C,k)},a.prototype._initArray=function(w,C,k){if(s(typeof w.length=="number"),w.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(w.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var R,F,H=0;if(k==="be")for(T=w.length-1,R=0;T>=0;T-=3)F=w[T]|w[T-1]<<8|w[T-2]<<16,this.words[R]|=F<<H&67108863,this.words[R+1]=F>>>26-H&67108863,(H+=24)>=26&&(H-=26,R++);else if(k==="le")for(T=0,R=0;T<w.length;T+=3)F=w[T]|w[T+1]<<8|w[T+2]<<16,this.words[R]|=F<<H&67108863,this.words[R+1]=F>>>26-H&67108863,(H+=24)>=26&&(H-=26,R++);return this._strip()},a.prototype._parseHex=function(w,C,k){this.length=Math.ceil((w.length-C)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var R,F=0,H=0;if(k==="be")for(T=w.length-1;T>=C;T-=2)R=h(w,C,T)<<F,this.words[H]|=67108863&R,F>=18?(F-=18,H+=1,this.words[H]|=R>>>26):F+=8;else for(T=(w.length-C)%2==0?C+1:C;T<w.length;T+=2)R=h(w,C,T)<<F,this.words[H]|=67108863&R,F>=18?(F-=18,H+=1,this.words[H]|=R>>>26):F+=8;this._strip()},a.prototype._parseBase=function(w,C,k){this.words=[0],this.length=1;for(var T=0,R=1;R<=67108863;R*=C)T++;T--,R=R/C|0;for(var F=w.length-k,H=F%T,rt=Math.min(F,F-H)+k,ot=0,dt=k;dt<rt;dt+=T)ot=d(w,dt,dt+T,C),this.imuln(R),this.words[0]+ot<67108864?this.words[0]+=ot:this._iaddn(ot);if(H!==0){var $=1;for(ot=d(w,dt,w.length,C),dt=0;dt<H;dt++)$*=C;this.imuln($),this.words[0]+ot<67108864?this.words[0]+=ot:this._iaddn(ot)}this._strip()},a.prototype.copy=function(w){w.words=new Array(this.length);for(var C=0;C<this.length;C++)w.words[C]=this.words[C];w.length=this.length,w.negative=this.negative,w.red=this.red},a.prototype._move=function(w){p(w,this)},a.prototype.clone=function(){var w=new a(null);return this.copy(w),w},a.prototype._expand=function(w){for(;this.length<w;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{a.prototype.inspect=g}else a.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(w,C){var k;if(C=0|C||1,(w=w||10)===16||w==="hex"){k="";for(var T=0,R=0,F=0;F<this.length;F++){var H=this.words[F],rt=(16777215&(H<<T|R)).toString(16);R=H>>>24-T&16777215,(T+=2)>=26&&(T-=26,F--),k=R!==0||F!==this.length-1?m[6-rt.length]+rt+k:rt+k}for(R!==0&&(k=R.toString(16)+k);k.length%C!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}if(w===(0|w)&&w>=2&&w<=36){var ot=b[w],dt=y[w];k="";var $=this.clone();for($.negative=0;!$.isZero();){var ct=$.modrn(dt).toString(w);k=($=$.idivn(dt)).isZero()?ct+k:m[ot-ct.length]+ct+k}for(this.isZero()&&(k="0"+k);k.length%C!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var w=this.words[0];return this.length===2?w+=67108864*this.words[1]:this.length===3&&this.words[2]===1?w+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-w:w},a.prototype.toJSON=function(){return this.toString(16,2)},l&&(a.prototype.toBuffer=function(w,C){return this.toArrayLike(l,w,C)}),a.prototype.toArray=function(w,C){return this.toArrayLike(Array,w,C)};function x(w,C,k){k.negative=C.negative^w.negative;var T=w.length+C.length|0;k.length=T,T=T-1|0;var R=0|w.words[0],F=0|C.words[0],H=R*F,rt=67108863&H,ot=H/67108864|0;k.words[0]=rt;for(var dt=1;dt<T;dt++){for(var $=ot>>>26,ct=67108863&ot,W=Math.min(dt,C.length-1),V=Math.max(0,dt-w.length+1);V<=W;V++){var it=dt-V|0;$+=(H=(R=0|w.words[it])*(F=0|C.words[V])+ct)/67108864|0,ct=67108863&H}k.words[dt]=0|ct,ot=0|$}return ot!==0?k.words[dt]=0|ot:k.length--,k._strip()}a.prototype.toArrayLike=function(w,C,k){this._strip();var T=this.byteLength(),R=k||Math.max(1,T);s(T<=R,"byte array longer than desired length"),s(R>0,"Requested array length <= 0");var F=function(H,rt){return H.allocUnsafe?H.allocUnsafe(rt):new H(rt)}(w,R);return this["_toArrayLike"+(C==="le"?"LE":"BE")](F,T),F},a.prototype._toArrayLikeLE=function(w,C){for(var k=0,T=0,R=0,F=0;R<this.length;R++){var H=this.words[R]<<F|T;w[k++]=255&H,k<w.length&&(w[k++]=H>>8&255),k<w.length&&(w[k++]=H>>16&255),F===6?(k<w.length&&(w[k++]=H>>24&255),T=0,F=0):(T=H>>>24,F+=2)}if(k<w.length)for(w[k++]=T;k<w.length;)w[k++]=0},a.prototype._toArrayLikeBE=function(w,C){for(var k=w.length-1,T=0,R=0,F=0;R<this.length;R++){var H=this.words[R]<<F|T;w[k--]=255&H,k>=0&&(w[k--]=H>>8&255),k>=0&&(w[k--]=H>>16&255),F===6?(k>=0&&(w[k--]=H>>24&255),T=0,F=0):(T=H>>>24,F+=2)}if(k>=0)for(w[k--]=T;k>=0;)w[k--]=0},Math.clz32?a.prototype._countBits=function(w){return 32-Math.clz32(w)}:a.prototype._countBits=function(w){var C=w,k=0;return C>=4096&&(k+=13,C>>>=13),C>=64&&(k+=7,C>>>=7),C>=8&&(k+=4,C>>>=4),C>=2&&(k+=2,C>>>=2),k+C},a.prototype._zeroBits=function(w){if(w===0)return 26;var C=w,k=0;return!(8191&C)&&(k+=13,C>>>=13),!(127&C)&&(k+=7,C>>>=7),!(15&C)&&(k+=4,C>>>=4),!(3&C)&&(k+=2,C>>>=2),!(1&C)&&k++,k},a.prototype.bitLength=function(){var w=this.words[this.length-1],C=this._countBits(w);return 26*(this.length-1)+C},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var w=0,C=0;C<this.length;C++){var k=this._zeroBits(this.words[C]);if(w+=k,k!==26)break}return w},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(w){return this.negative!==0?this.abs().inotn(w).iaddn(1):this.clone()},a.prototype.fromTwos=function(w){return this.testn(w-1)?this.notn(w).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(w){for(;this.length<w.length;)this.words[this.length++]=0;for(var C=0;C<w.length;C++)this.words[C]=this.words[C]|w.words[C];return this._strip()},a.prototype.ior=function(w){return s((this.negative|w.negative)==0),this.iuor(w)},a.prototype.or=function(w){return this.length>w.length?this.clone().ior(w):w.clone().ior(this)},a.prototype.uor=function(w){return this.length>w.length?this.clone().iuor(w):w.clone().iuor(this)},a.prototype.iuand=function(w){var C;C=this.length>w.length?w:this;for(var k=0;k<C.length;k++)this.words[k]=this.words[k]&w.words[k];return this.length=C.length,this._strip()},a.prototype.iand=function(w){return s((this.negative|w.negative)==0),this.iuand(w)},a.prototype.and=function(w){return this.length>w.length?this.clone().iand(w):w.clone().iand(this)},a.prototype.uand=function(w){return this.length>w.length?this.clone().iuand(w):w.clone().iuand(this)},a.prototype.iuxor=function(w){var C,k;this.length>w.length?(C=this,k=w):(C=w,k=this);for(var T=0;T<k.length;T++)this.words[T]=C.words[T]^k.words[T];if(this!==C)for(;T<C.length;T++)this.words[T]=C.words[T];return this.length=C.length,this._strip()},a.prototype.ixor=function(w){return s((this.negative|w.negative)==0),this.iuxor(w)},a.prototype.xor=function(w){return this.length>w.length?this.clone().ixor(w):w.clone().ixor(this)},a.prototype.uxor=function(w){return this.length>w.length?this.clone().iuxor(w):w.clone().iuxor(this)},a.prototype.inotn=function(w){s(typeof w=="number"&&w>=0);var C=0|Math.ceil(w/26),k=w%26;this._expand(C),k>0&&C--;for(var T=0;T<C;T++)this.words[T]=67108863&~this.words[T];return k>0&&(this.words[T]=~this.words[T]&67108863>>26-k),this._strip()},a.prototype.notn=function(w){return this.clone().inotn(w)},a.prototype.setn=function(w,C){s(typeof w=="number"&&w>=0);var k=w/26|0,T=w%26;return this._expand(k+1),this.words[k]=C?this.words[k]|1<<T:this.words[k]&~(1<<T),this._strip()},a.prototype.iadd=function(w){var C,k,T;if(this.negative!==0&&w.negative===0)return this.negative=0,C=this.isub(w),this.negative^=1,this._normSign();if(this.negative===0&&w.negative!==0)return w.negative=0,C=this.isub(w),w.negative=1,C._normSign();this.length>w.length?(k=this,T=w):(k=w,T=this);for(var R=0,F=0;F<T.length;F++)C=(0|k.words[F])+(0|T.words[F])+R,this.words[F]=67108863&C,R=C>>>26;for(;R!==0&&F<k.length;F++)C=(0|k.words[F])+R,this.words[F]=67108863&C,R=C>>>26;if(this.length=k.length,R!==0)this.words[this.length]=R,this.length++;else if(k!==this)for(;F<k.length;F++)this.words[F]=k.words[F];return this},a.prototype.add=function(w){var C;return w.negative!==0&&this.negative===0?(w.negative=0,C=this.sub(w),w.negative^=1,C):w.negative===0&&this.negative!==0?(this.negative=0,C=w.sub(this),this.negative=1,C):this.length>w.length?this.clone().iadd(w):w.clone().iadd(this)},a.prototype.isub=function(w){if(w.negative!==0){w.negative=0;var C=this.iadd(w);return w.negative=1,C._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(w),this.negative=1,this._normSign();var k,T,R=this.cmp(w);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;R>0?(k=this,T=w):(k=w,T=this);for(var F=0,H=0;H<T.length;H++)F=(C=(0|k.words[H])-(0|T.words[H])+F)>>26,this.words[H]=67108863&C;for(;F!==0&&H<k.length;H++)F=(C=(0|k.words[H])+F)>>26,this.words[H]=67108863&C;if(F===0&&H<k.length&&k!==this)for(;H<k.length;H++)this.words[H]=k.words[H];return this.length=Math.max(this.length,H),k!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(w){return this.clone().isub(w)};var S=function(w,C,k){var T,R,F,H=w.words,rt=C.words,ot=k.words,dt=0,$=0|H[0],ct=8191&$,W=$>>>13,V=0|H[1],it=8191&V,mt=V>>>13,wt=0|H[2],_t=8191&wt,Ct=wt>>>13,Ft=0|H[3],It=8191&Ft,vt=Ft>>>13,kt=0|H[4],gt=8191&kt,ut=kt>>>13,Q=0|H[5],Y=8191&Q,et=Q>>>13,lt=0|H[6],pt=8191&lt,bt=lt>>>13,Et=0|H[7],Ot=8191&Et,zt=Et>>>13,Gt=0|H[8],Jt=8191&Gt,Kt=Gt>>>13,re=0|H[9],Xt=8191&re,Ut=re>>>13,_e=0|rt[0],le=8191&_e,ye=_e>>>13,Ze=0|rt[1],ce=8191&Ze,ke=Ze>>>13,He=0|rt[2],$t=8191&He,Te=He>>>13,br=0|rt[3],ue=8191&br,Fe=br>>>13,ar=0|rt[4],Le=8191&ar,Oe=ar>>>13,ri=0|rt[5],We=8191&ri,At=ri>>>13,qt=0|rt[6],jt=8191&qt,ae=qt>>>13,Qe=0|rt[7],se=8191&Qe,ve=Qe>>>13,$e=0|rt[8],Ae=8191&$e,fe=$e>>>13,Ye=0|rt[9],Ve=8191&Ye,rr=Ye>>>13;k.negative=w.negative^C.negative,k.length=19;var Ke=(dt+(T=Math.imul(ct,le))|0)+((8191&(R=(R=Math.imul(ct,ye))+Math.imul(W,le)|0))<<13)|0;dt=((F=Math.imul(W,ye))+(R>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,T=Math.imul(it,le),R=(R=Math.imul(it,ye))+Math.imul(mt,le)|0,F=Math.imul(mt,ye);var pi=(dt+(T=T+Math.imul(ct,ce)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ke)|0)+Math.imul(W,ce)|0))<<13)|0;dt=((F=F+Math.imul(W,ke)|0)+(R>>>13)|0)+(pi>>>26)|0,pi&=67108863,T=Math.imul(_t,le),R=(R=Math.imul(_t,ye))+Math.imul(Ct,le)|0,F=Math.imul(Ct,ye),T=T+Math.imul(it,ce)|0,R=(R=R+Math.imul(it,ke)|0)+Math.imul(mt,ce)|0,F=F+Math.imul(mt,ke)|0;var Je=(dt+(T=T+Math.imul(ct,$t)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Te)|0)+Math.imul(W,$t)|0))<<13)|0;dt=((F=F+Math.imul(W,Te)|0)+(R>>>13)|0)+(Je>>>26)|0,Je&=67108863,T=Math.imul(It,le),R=(R=Math.imul(It,ye))+Math.imul(vt,le)|0,F=Math.imul(vt,ye),T=T+Math.imul(_t,ce)|0,R=(R=R+Math.imul(_t,ke)|0)+Math.imul(Ct,ce)|0,F=F+Math.imul(Ct,ke)|0,T=T+Math.imul(it,$t)|0,R=(R=R+Math.imul(it,Te)|0)+Math.imul(mt,$t)|0,F=F+Math.imul(mt,Te)|0;var or=(dt+(T=T+Math.imul(ct,ue)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Fe)|0)+Math.imul(W,ue)|0))<<13)|0;dt=((F=F+Math.imul(W,Fe)|0)+(R>>>13)|0)+(or>>>26)|0,or&=67108863,T=Math.imul(gt,le),R=(R=Math.imul(gt,ye))+Math.imul(ut,le)|0,F=Math.imul(ut,ye),T=T+Math.imul(It,ce)|0,R=(R=R+Math.imul(It,ke)|0)+Math.imul(vt,ce)|0,F=F+Math.imul(vt,ke)|0,T=T+Math.imul(_t,$t)|0,R=(R=R+Math.imul(_t,Te)|0)+Math.imul(Ct,$t)|0,F=F+Math.imul(Ct,Te)|0,T=T+Math.imul(it,ue)|0,R=(R=R+Math.imul(it,Fe)|0)+Math.imul(mt,ue)|0,F=F+Math.imul(mt,Fe)|0;var ci=(dt+(T=T+Math.imul(ct,Le)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Oe)|0)+Math.imul(W,Le)|0))<<13)|0;dt=((F=F+Math.imul(W,Oe)|0)+(R>>>13)|0)+(ci>>>26)|0,ci&=67108863,T=Math.imul(Y,le),R=(R=Math.imul(Y,ye))+Math.imul(et,le)|0,F=Math.imul(et,ye),T=T+Math.imul(gt,ce)|0,R=(R=R+Math.imul(gt,ke)|0)+Math.imul(ut,ce)|0,F=F+Math.imul(ut,ke)|0,T=T+Math.imul(It,$t)|0,R=(R=R+Math.imul(It,Te)|0)+Math.imul(vt,$t)|0,F=F+Math.imul(vt,Te)|0,T=T+Math.imul(_t,ue)|0,R=(R=R+Math.imul(_t,Fe)|0)+Math.imul(Ct,ue)|0,F=F+Math.imul(Ct,Fe)|0,T=T+Math.imul(it,Le)|0,R=(R=R+Math.imul(it,Oe)|0)+Math.imul(mt,Le)|0,F=F+Math.imul(mt,Oe)|0;var kr=(dt+(T=T+Math.imul(ct,We)|0)|0)+((8191&(R=(R=R+Math.imul(ct,At)|0)+Math.imul(W,We)|0))<<13)|0;dt=((F=F+Math.imul(W,At)|0)+(R>>>13)|0)+(kr>>>26)|0,kr&=67108863,T=Math.imul(pt,le),R=(R=Math.imul(pt,ye))+Math.imul(bt,le)|0,F=Math.imul(bt,ye),T=T+Math.imul(Y,ce)|0,R=(R=R+Math.imul(Y,ke)|0)+Math.imul(et,ce)|0,F=F+Math.imul(et,ke)|0,T=T+Math.imul(gt,$t)|0,R=(R=R+Math.imul(gt,Te)|0)+Math.imul(ut,$t)|0,F=F+Math.imul(ut,Te)|0,T=T+Math.imul(It,ue)|0,R=(R=R+Math.imul(It,Fe)|0)+Math.imul(vt,ue)|0,F=F+Math.imul(vt,Fe)|0,T=T+Math.imul(_t,Le)|0,R=(R=R+Math.imul(_t,Oe)|0)+Math.imul(Ct,Le)|0,F=F+Math.imul(Ct,Oe)|0,T=T+Math.imul(it,We)|0,R=(R=R+Math.imul(it,At)|0)+Math.imul(mt,We)|0,F=F+Math.imul(mt,At)|0;var Tt=(dt+(T=T+Math.imul(ct,jt)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ae)|0)+Math.imul(W,jt)|0))<<13)|0;dt=((F=F+Math.imul(W,ae)|0)+(R>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,T=Math.imul(Ot,le),R=(R=Math.imul(Ot,ye))+Math.imul(zt,le)|0,F=Math.imul(zt,ye),T=T+Math.imul(pt,ce)|0,R=(R=R+Math.imul(pt,ke)|0)+Math.imul(bt,ce)|0,F=F+Math.imul(bt,ke)|0,T=T+Math.imul(Y,$t)|0,R=(R=R+Math.imul(Y,Te)|0)+Math.imul(et,$t)|0,F=F+Math.imul(et,Te)|0,T=T+Math.imul(gt,ue)|0,R=(R=R+Math.imul(gt,Fe)|0)+Math.imul(ut,ue)|0,F=F+Math.imul(ut,Fe)|0,T=T+Math.imul(It,Le)|0,R=(R=R+Math.imul(It,Oe)|0)+Math.imul(vt,Le)|0,F=F+Math.imul(vt,Oe)|0,T=T+Math.imul(_t,We)|0,R=(R=R+Math.imul(_t,At)|0)+Math.imul(Ct,We)|0,F=F+Math.imul(Ct,At)|0,T=T+Math.imul(it,jt)|0,R=(R=R+Math.imul(it,ae)|0)+Math.imul(mt,jt)|0,F=F+Math.imul(mt,ae)|0;var Ht=(dt+(T=T+Math.imul(ct,se)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ve)|0)+Math.imul(W,se)|0))<<13)|0;dt=((F=F+Math.imul(W,ve)|0)+(R>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,T=Math.imul(Jt,le),R=(R=Math.imul(Jt,ye))+Math.imul(Kt,le)|0,F=Math.imul(Kt,ye),T=T+Math.imul(Ot,ce)|0,R=(R=R+Math.imul(Ot,ke)|0)+Math.imul(zt,ce)|0,F=F+Math.imul(zt,ke)|0,T=T+Math.imul(pt,$t)|0,R=(R=R+Math.imul(pt,Te)|0)+Math.imul(bt,$t)|0,F=F+Math.imul(bt,Te)|0,T=T+Math.imul(Y,ue)|0,R=(R=R+Math.imul(Y,Fe)|0)+Math.imul(et,ue)|0,F=F+Math.imul(et,Fe)|0,T=T+Math.imul(gt,Le)|0,R=(R=R+Math.imul(gt,Oe)|0)+Math.imul(ut,Le)|0,F=F+Math.imul(ut,Oe)|0,T=T+Math.imul(It,We)|0,R=(R=R+Math.imul(It,At)|0)+Math.imul(vt,We)|0,F=F+Math.imul(vt,At)|0,T=T+Math.imul(_t,jt)|0,R=(R=R+Math.imul(_t,ae)|0)+Math.imul(Ct,jt)|0,F=F+Math.imul(Ct,ae)|0,T=T+Math.imul(it,se)|0,R=(R=R+Math.imul(it,ve)|0)+Math.imul(mt,se)|0,F=F+Math.imul(mt,ve)|0;var ie=(dt+(T=T+Math.imul(ct,Ae)|0)|0)+((8191&(R=(R=R+Math.imul(ct,fe)|0)+Math.imul(W,Ae)|0))<<13)|0;dt=((F=F+Math.imul(W,fe)|0)+(R>>>13)|0)+(ie>>>26)|0,ie&=67108863,T=Math.imul(Xt,le),R=(R=Math.imul(Xt,ye))+Math.imul(Ut,le)|0,F=Math.imul(Ut,ye),T=T+Math.imul(Jt,ce)|0,R=(R=R+Math.imul(Jt,ke)|0)+Math.imul(Kt,ce)|0,F=F+Math.imul(Kt,ke)|0,T=T+Math.imul(Ot,$t)|0,R=(R=R+Math.imul(Ot,Te)|0)+Math.imul(zt,$t)|0,F=F+Math.imul(zt,Te)|0,T=T+Math.imul(pt,ue)|0,R=(R=R+Math.imul(pt,Fe)|0)+Math.imul(bt,ue)|0,F=F+Math.imul(bt,Fe)|0,T=T+Math.imul(Y,Le)|0,R=(R=R+Math.imul(Y,Oe)|0)+Math.imul(et,Le)|0,F=F+Math.imul(et,Oe)|0,T=T+Math.imul(gt,We)|0,R=(R=R+Math.imul(gt,At)|0)+Math.imul(ut,We)|0,F=F+Math.imul(ut,At)|0,T=T+Math.imul(It,jt)|0,R=(R=R+Math.imul(It,ae)|0)+Math.imul(vt,jt)|0,F=F+Math.imul(vt,ae)|0,T=T+Math.imul(_t,se)|0,R=(R=R+Math.imul(_t,ve)|0)+Math.imul(Ct,se)|0,F=F+Math.imul(Ct,ve)|0,T=T+Math.imul(it,Ae)|0,R=(R=R+Math.imul(it,fe)|0)+Math.imul(mt,Ae)|0,F=F+Math.imul(mt,fe)|0;var Qt=(dt+(T=T+Math.imul(ct,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(ct,rr)|0)+Math.imul(W,Ve)|0))<<13)|0;dt=((F=F+Math.imul(W,rr)|0)+(R>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,T=Math.imul(Xt,ce),R=(R=Math.imul(Xt,ke))+Math.imul(Ut,ce)|0,F=Math.imul(Ut,ke),T=T+Math.imul(Jt,$t)|0,R=(R=R+Math.imul(Jt,Te)|0)+Math.imul(Kt,$t)|0,F=F+Math.imul(Kt,Te)|0,T=T+Math.imul(Ot,ue)|0,R=(R=R+Math.imul(Ot,Fe)|0)+Math.imul(zt,ue)|0,F=F+Math.imul(zt,Fe)|0,T=T+Math.imul(pt,Le)|0,R=(R=R+Math.imul(pt,Oe)|0)+Math.imul(bt,Le)|0,F=F+Math.imul(bt,Oe)|0,T=T+Math.imul(Y,We)|0,R=(R=R+Math.imul(Y,At)|0)+Math.imul(et,We)|0,F=F+Math.imul(et,At)|0,T=T+Math.imul(gt,jt)|0,R=(R=R+Math.imul(gt,ae)|0)+Math.imul(ut,jt)|0,F=F+Math.imul(ut,ae)|0,T=T+Math.imul(It,se)|0,R=(R=R+Math.imul(It,ve)|0)+Math.imul(vt,se)|0,F=F+Math.imul(vt,ve)|0,T=T+Math.imul(_t,Ae)|0,R=(R=R+Math.imul(_t,fe)|0)+Math.imul(Ct,Ae)|0,F=F+Math.imul(Ct,fe)|0;var he=(dt+(T=T+Math.imul(it,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(it,rr)|0)+Math.imul(mt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(mt,rr)|0)+(R>>>13)|0)+(he>>>26)|0,he&=67108863,T=Math.imul(Xt,$t),R=(R=Math.imul(Xt,Te))+Math.imul(Ut,$t)|0,F=Math.imul(Ut,Te),T=T+Math.imul(Jt,ue)|0,R=(R=R+Math.imul(Jt,Fe)|0)+Math.imul(Kt,ue)|0,F=F+Math.imul(Kt,Fe)|0,T=T+Math.imul(Ot,Le)|0,R=(R=R+Math.imul(Ot,Oe)|0)+Math.imul(zt,Le)|0,F=F+Math.imul(zt,Oe)|0,T=T+Math.imul(pt,We)|0,R=(R=R+Math.imul(pt,At)|0)+Math.imul(bt,We)|0,F=F+Math.imul(bt,At)|0,T=T+Math.imul(Y,jt)|0,R=(R=R+Math.imul(Y,ae)|0)+Math.imul(et,jt)|0,F=F+Math.imul(et,ae)|0,T=T+Math.imul(gt,se)|0,R=(R=R+Math.imul(gt,ve)|0)+Math.imul(ut,se)|0,F=F+Math.imul(ut,ve)|0,T=T+Math.imul(It,Ae)|0,R=(R=R+Math.imul(It,fe)|0)+Math.imul(vt,Ae)|0,F=F+Math.imul(vt,fe)|0;var Ee=(dt+(T=T+Math.imul(_t,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(_t,rr)|0)+Math.imul(Ct,Ve)|0))<<13)|0;dt=((F=F+Math.imul(Ct,rr)|0)+(R>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,T=Math.imul(Xt,ue),R=(R=Math.imul(Xt,Fe))+Math.imul(Ut,ue)|0,F=Math.imul(Ut,Fe),T=T+Math.imul(Jt,Le)|0,R=(R=R+Math.imul(Jt,Oe)|0)+Math.imul(Kt,Le)|0,F=F+Math.imul(Kt,Oe)|0,T=T+Math.imul(Ot,We)|0,R=(R=R+Math.imul(Ot,At)|0)+Math.imul(zt,We)|0,F=F+Math.imul(zt,At)|0,T=T+Math.imul(pt,jt)|0,R=(R=R+Math.imul(pt,ae)|0)+Math.imul(bt,jt)|0,F=F+Math.imul(bt,ae)|0,T=T+Math.imul(Y,se)|0,R=(R=R+Math.imul(Y,ve)|0)+Math.imul(et,se)|0,F=F+Math.imul(et,ve)|0,T=T+Math.imul(gt,Ae)|0,R=(R=R+Math.imul(gt,fe)|0)+Math.imul(ut,Ae)|0,F=F+Math.imul(ut,fe)|0;var Ie=(dt+(T=T+Math.imul(It,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(It,rr)|0)+Math.imul(vt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(vt,rr)|0)+(R>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,T=Math.imul(Xt,Le),R=(R=Math.imul(Xt,Oe))+Math.imul(Ut,Le)|0,F=Math.imul(Ut,Oe),T=T+Math.imul(Jt,We)|0,R=(R=R+Math.imul(Jt,At)|0)+Math.imul(Kt,We)|0,F=F+Math.imul(Kt,At)|0,T=T+Math.imul(Ot,jt)|0,R=(R=R+Math.imul(Ot,ae)|0)+Math.imul(zt,jt)|0,F=F+Math.imul(zt,ae)|0,T=T+Math.imul(pt,se)|0,R=(R=R+Math.imul(pt,ve)|0)+Math.imul(bt,se)|0,F=F+Math.imul(bt,ve)|0,T=T+Math.imul(Y,Ae)|0,R=(R=R+Math.imul(Y,fe)|0)+Math.imul(et,Ae)|0,F=F+Math.imul(et,fe)|0;var tr=(dt+(T=T+Math.imul(gt,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(gt,rr)|0)+Math.imul(ut,Ve)|0))<<13)|0;dt=((F=F+Math.imul(ut,rr)|0)+(R>>>13)|0)+(tr>>>26)|0,tr&=67108863,T=Math.imul(Xt,We),R=(R=Math.imul(Xt,At))+Math.imul(Ut,We)|0,F=Math.imul(Ut,At),T=T+Math.imul(Jt,jt)|0,R=(R=R+Math.imul(Jt,ae)|0)+Math.imul(Kt,jt)|0,F=F+Math.imul(Kt,ae)|0,T=T+Math.imul(Ot,se)|0,R=(R=R+Math.imul(Ot,ve)|0)+Math.imul(zt,se)|0,F=F+Math.imul(zt,ve)|0,T=T+Math.imul(pt,Ae)|0,R=(R=R+Math.imul(pt,fe)|0)+Math.imul(bt,Ae)|0,F=F+Math.imul(bt,fe)|0;var Ue=(dt+(T=T+Math.imul(Y,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(Y,rr)|0)+Math.imul(et,Ve)|0))<<13)|0;dt=((F=F+Math.imul(et,rr)|0)+(R>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,T=Math.imul(Xt,jt),R=(R=Math.imul(Xt,ae))+Math.imul(Ut,jt)|0,F=Math.imul(Ut,ae),T=T+Math.imul(Jt,se)|0,R=(R=R+Math.imul(Jt,ve)|0)+Math.imul(Kt,se)|0,F=F+Math.imul(Kt,ve)|0,T=T+Math.imul(Ot,Ae)|0,R=(R=R+Math.imul(Ot,fe)|0)+Math.imul(zt,Ae)|0,F=F+Math.imul(zt,fe)|0;var we=(dt+(T=T+Math.imul(pt,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(pt,rr)|0)+Math.imul(bt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(bt,rr)|0)+(R>>>13)|0)+(we>>>26)|0,we&=67108863,T=Math.imul(Xt,se),R=(R=Math.imul(Xt,ve))+Math.imul(Ut,se)|0,F=Math.imul(Ut,ve),T=T+Math.imul(Jt,Ae)|0,R=(R=R+Math.imul(Jt,fe)|0)+Math.imul(Kt,Ae)|0,F=F+Math.imul(Kt,fe)|0;var pe=(dt+(T=T+Math.imul(Ot,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(Ot,rr)|0)+Math.imul(zt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(zt,rr)|0)+(R>>>13)|0)+(pe>>>26)|0,pe&=67108863,T=Math.imul(Xt,Ae),R=(R=Math.imul(Xt,fe))+Math.imul(Ut,Ae)|0,F=Math.imul(Ut,fe);var yr=(dt+(T=T+Math.imul(Jt,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(Jt,rr)|0)+Math.imul(Kt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(Kt,rr)|0)+(R>>>13)|0)+(yr>>>26)|0,yr&=67108863;var ir=(dt+(T=Math.imul(Xt,Ve))|0)+((8191&(R=(R=Math.imul(Xt,rr))+Math.imul(Ut,Ve)|0))<<13)|0;return dt=((F=Math.imul(Ut,rr))+(R>>>13)|0)+(ir>>>26)|0,ir&=67108863,ot[0]=Ke,ot[1]=pi,ot[2]=Je,ot[3]=or,ot[4]=ci,ot[5]=kr,ot[6]=Tt,ot[7]=Ht,ot[8]=ie,ot[9]=Qt,ot[10]=he,ot[11]=Ee,ot[12]=Ie,ot[13]=tr,ot[14]=Ue,ot[15]=we,ot[16]=pe,ot[17]=yr,ot[18]=ir,dt!==0&&(ot[19]=dt,k.length++),k};function O(w,C,k){k.negative=C.negative^w.negative,k.length=w.length+C.length;for(var T=0,R=0,F=0;F<k.length-1;F++){var H=R;R=0;for(var rt=67108863&T,ot=Math.min(F,C.length-1),dt=Math.max(0,F-w.length+1);dt<=ot;dt++){var $=F-dt,ct=(0|w.words[$])*(0|C.words[dt]),W=67108863&ct;rt=67108863&(W=W+rt|0),R+=(H=(H=H+(ct/67108864|0)|0)+(W>>>26)|0)>>>26,H&=67108863}k.words[F]=rt,T=H,H=R}return T!==0?k.words[F]=T:k.length--,k._strip()}function D(w,C,k){return O(w,C,k)}function U(w,C){this.x=w,this.y=C}Math.imul||(S=x),a.prototype.mulTo=function(w,C){var k=this.length+w.length;return this.length===10&&w.length===10?S(this,w,C):k<63?x(this,w,C):k<1024?O(this,w,C):D(this,w,C)},U.prototype.makeRBT=function(w){for(var C=new Array(w),k=a.prototype._countBits(w)-1,T=0;T<w;T++)C[T]=this.revBin(T,k,w);return C},U.prototype.revBin=function(w,C,k){if(w===0||w===k-1)return w;for(var T=0,R=0;R<C;R++)T|=(1&w)<<C-R-1,w>>=1;return T},U.prototype.permute=function(w,C,k,T,R,F){for(var H=0;H<F;H++)T[H]=C[w[H]],R[H]=k[w[H]]},U.prototype.transform=function(w,C,k,T,R,F){this.permute(F,w,C,k,T,R);for(var H=1;H<R;H<<=1)for(var rt=H<<1,ot=Math.cos(2*Math.PI/rt),dt=Math.sin(2*Math.PI/rt),$=0;$<R;$+=rt)for(var ct=ot,W=dt,V=0;V<H;V++){var it=k[$+V],mt=T[$+V],wt=k[$+V+H],_t=T[$+V+H],Ct=ct*wt-W*_t;_t=ct*_t+W*wt,wt=Ct,k[$+V]=it+wt,T[$+V]=mt+_t,k[$+V+H]=it-wt,T[$+V+H]=mt-_t,V!==rt&&(Ct=ot*ct-dt*W,W=ot*W+dt*ct,ct=Ct)}},U.prototype.guessLen13b=function(w,C){var k=1|Math.max(C,w),T=1&k,R=0;for(k=k/2|0;k;k>>>=1)R++;return 1<<R+1+T},U.prototype.conjugate=function(w,C,k){if(!(k<=1))for(var T=0;T<k/2;T++){var R=w[T];w[T]=w[k-T-1],w[k-T-1]=R,R=C[T],C[T]=-C[k-T-1],C[k-T-1]=-R}},U.prototype.normalize13b=function(w,C){for(var k=0,T=0;T<C/2;T++){var R=8192*Math.round(w[2*T+1]/C)+Math.round(w[2*T]/C)+k;w[T]=67108863&R,k=R<67108864?0:R/67108864|0}return w},U.prototype.convert13b=function(w,C,k,T){for(var R=0,F=0;F<C;F++)R+=0|w[F],k[2*F]=8191&R,R>>>=13,k[2*F+1]=8191&R,R>>>=13;for(F=2*C;F<T;++F)k[F]=0;s(R===0),s((-8192&R)==0)},U.prototype.stub=function(w){for(var C=new Array(w),k=0;k<w;k++)C[k]=0;return C},U.prototype.mulp=function(w,C,k){var T=2*this.guessLen13b(w.length,C.length),R=this.makeRBT(T),F=this.stub(T),H=new Array(T),rt=new Array(T),ot=new Array(T),dt=new Array(T),$=new Array(T),ct=new Array(T),W=k.words;W.length=T,this.convert13b(w.words,w.length,H,T),this.convert13b(C.words,C.length,dt,T),this.transform(H,F,rt,ot,T,R),this.transform(dt,F,$,ct,T,R);for(var V=0;V<T;V++){var it=rt[V]*$[V]-ot[V]*ct[V];ot[V]=rt[V]*ct[V]+ot[V]*$[V],rt[V]=it}return this.conjugate(rt,ot,T),this.transform(rt,ot,W,F,T,R),this.conjugate(W,F,T),this.normalize13b(W,T),k.negative=w.negative^C.negative,k.length=w.length+C.length,k._strip()},a.prototype.mul=function(w){var C=new a(null);return C.words=new Array(this.length+w.length),this.mulTo(w,C)},a.prototype.mulf=function(w){var C=new a(null);return C.words=new Array(this.length+w.length),D(this,w,C)},a.prototype.imul=function(w){return this.clone().mulTo(w,this)},a.prototype.imuln=function(w){var C=w<0;C&&(w=-w),s(typeof w=="number"),s(w<67108864);for(var k=0,T=0;T<this.length;T++){var R=(0|this.words[T])*w,F=(67108863&R)+(67108863&k);k>>=26,k+=R/67108864|0,k+=F>>>26,this.words[T]=67108863&F}return k!==0&&(this.words[T]=k,this.length++),C?this.ineg():this},a.prototype.muln=function(w){return this.clone().imuln(w)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(w){var C=function(F){for(var H=new Array(F.bitLength()),rt=0;rt<H.length;rt++){var ot=rt/26|0,dt=rt%26;H[rt]=F.words[ot]>>>dt&1}return H}(w);if(C.length===0)return new a(1);for(var k=this,T=0;T<C.length&&C[T]===0;T++,k=k.sqr());if(++T<C.length)for(var R=k.sqr();T<C.length;T++,R=R.sqr())C[T]!==0&&(k=k.mul(R));return k},a.prototype.iushln=function(w){s(typeof w=="number"&&w>=0);var C,k=w%26,T=(w-k)/26,R=67108863>>>26-k<<26-k;if(k!==0){var F=0;for(C=0;C<this.length;C++){var H=this.words[C]&R,rt=(0|this.words[C])-H<<k;this.words[C]=rt|F,F=H>>>26-k}F&&(this.words[C]=F,this.length++)}if(T!==0){for(C=this.length-1;C>=0;C--)this.words[C+T]=this.words[C];for(C=0;C<T;C++)this.words[C]=0;this.length+=T}return this._strip()},a.prototype.ishln=function(w){return s(this.negative===0),this.iushln(w)},a.prototype.iushrn=function(w,C,k){var T;s(typeof w=="number"&&w>=0),T=C?(C-C%26)/26:0;var R=w%26,F=Math.min((w-R)/26,this.length),H=67108863^67108863>>>R<<R,rt=k;if(T-=F,T=Math.max(0,T),rt){for(var ot=0;ot<F;ot++)rt.words[ot]=this.words[ot];rt.length=F}if(F!==0)if(this.length>F)for(this.length-=F,ot=0;ot<this.length;ot++)this.words[ot]=this.words[ot+F];else this.words[0]=0,this.length=1;var dt=0;for(ot=this.length-1;ot>=0&&(dt!==0||ot>=T);ot--){var $=0|this.words[ot];this.words[ot]=dt<<26-R|$>>>R,dt=$&H}return rt&&dt!==0&&(rt.words[rt.length++]=dt),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(w,C,k){return s(this.negative===0),this.iushrn(w,C,k)},a.prototype.shln=function(w){return this.clone().ishln(w)},a.prototype.ushln=function(w){return this.clone().iushln(w)},a.prototype.shrn=function(w){return this.clone().ishrn(w)},a.prototype.ushrn=function(w){return this.clone().iushrn(w)},a.prototype.testn=function(w){s(typeof w=="number"&&w>=0);var C=w%26,k=(w-C)/26,T=1<<C;return!(this.length<=k)&&!!(this.words[k]&T)},a.prototype.imaskn=function(w){s(typeof w=="number"&&w>=0);var C=w%26,k=(w-C)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=k)return this;if(C!==0&&k++,this.length=Math.min(k,this.length),C!==0){var T=67108863^67108863>>>C<<C;this.words[this.length-1]&=T}return this._strip()},a.prototype.maskn=function(w){return this.clone().imaskn(w)},a.prototype.iaddn=function(w){return s(typeof w=="number"),s(w<67108864),w<0?this.isubn(-w):this.negative!==0?this.length===1&&(0|this.words[0])<=w?(this.words[0]=w-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(w),this.negative=1,this):this._iaddn(w)},a.prototype._iaddn=function(w){this.words[0]+=w;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},a.prototype.isubn=function(w){if(s(typeof w=="number"),s(w<67108864),w<0)return this.iaddn(-w);if(this.negative!==0)return this.negative=0,this.iaddn(w),this.negative=1,this;if(this.words[0]-=w,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this._strip()},a.prototype.addn=function(w){return this.clone().iaddn(w)},a.prototype.subn=function(w){return this.clone().isubn(w)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(w,C,k){var T,R,F=w.length+k;this._expand(F);var H=0;for(T=0;T<w.length;T++){R=(0|this.words[T+k])+H;var rt=(0|w.words[T])*C;H=((R-=67108863&rt)>>26)-(rt/67108864|0),this.words[T+k]=67108863&R}for(;T<this.length-k;T++)H=(R=(0|this.words[T+k])+H)>>26,this.words[T+k]=67108863&R;if(H===0)return this._strip();for(s(H===-1),H=0,T=0;T<this.length;T++)H=(R=-(0|this.words[T])+H)>>26,this.words[T]=67108863&R;return this.negative=1,this._strip()},a.prototype._wordDiv=function(w,C){var k=(this.length,w.length),T=this.clone(),R=w,F=0|R.words[R.length-1];(k=26-this._countBits(F))!==0&&(R=R.ushln(k),T.iushln(k),F=0|R.words[R.length-1]);var H,rt=T.length-R.length;if(C!=="mod"){(H=new a(null)).length=rt+1,H.words=new Array(H.length);for(var ot=0;ot<H.length;ot++)H.words[ot]=0}var dt=T.clone()._ishlnsubmul(R,1,rt);dt.negative===0&&(T=dt,H&&(H.words[rt]=1));for(var $=rt-1;$>=0;$--){var ct=67108864*(0|T.words[R.length+$])+(0|T.words[R.length+$-1]);for(ct=Math.min(ct/F|0,67108863),T._ishlnsubmul(R,ct,$);T.negative!==0;)ct--,T.negative=0,T._ishlnsubmul(R,1,$),T.isZero()||(T.negative^=1);H&&(H.words[$]=ct)}return H&&H._strip(),T._strip(),C!=="div"&&k!==0&&T.iushrn(k),{div:H||null,mod:T}},a.prototype.divmod=function(w,C,k){return s(!w.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&w.negative===0?(F=this.neg().divmod(w,C),C!=="mod"&&(T=F.div.neg()),C!=="div"&&(R=F.mod.neg(),k&&R.negative!==0&&R.iadd(w)),{div:T,mod:R}):this.negative===0&&w.negative!==0?(F=this.divmod(w.neg(),C),C!=="mod"&&(T=F.div.neg()),{div:T,mod:F.mod}):this.negative&w.negative?(F=this.neg().divmod(w.neg(),C),C!=="div"&&(R=F.mod.neg(),k&&R.negative!==0&&R.isub(w)),{div:F.div,mod:R}):w.length>this.length||this.cmp(w)<0?{div:new a(0),mod:this}:w.length===1?C==="div"?{div:this.divn(w.words[0]),mod:null}:C==="mod"?{div:null,mod:new a(this.modrn(w.words[0]))}:{div:this.divn(w.words[0]),mod:new a(this.modrn(w.words[0]))}:this._wordDiv(w,C);var T,R,F},a.prototype.div=function(w){return this.divmod(w,"div",!1).div},a.prototype.mod=function(w){return this.divmod(w,"mod",!1).mod},a.prototype.umod=function(w){return this.divmod(w,"mod",!0).mod},a.prototype.divRound=function(w){var C=this.divmod(w);if(C.mod.isZero())return C.div;var k=C.div.negative!==0?C.mod.isub(w):C.mod,T=w.ushrn(1),R=w.andln(1),F=k.cmp(T);return F<0||R===1&&F===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},a.prototype.modrn=function(w){var C=w<0;C&&(w=-w),s(w<=67108863);for(var k=(1<<26)%w,T=0,R=this.length-1;R>=0;R--)T=(k*T+(0|this.words[R]))%w;return C?-T:T},a.prototype.modn=function(w){return this.modrn(w)},a.prototype.idivn=function(w){var C=w<0;C&&(w=-w),s(w<=67108863);for(var k=0,T=this.length-1;T>=0;T--){var R=(0|this.words[T])+67108864*k;this.words[T]=R/w|0,k=R%w}return this._strip(),C?this.ineg():this},a.prototype.divn=function(w){return this.clone().idivn(w)},a.prototype.egcd=function(w){s(w.negative===0),s(!w.isZero());var C=this,k=w.clone();C=C.negative!==0?C.umod(w):C.clone();for(var T=new a(1),R=new a(0),F=new a(0),H=new a(1),rt=0;C.isEven()&&k.isEven();)C.iushrn(1),k.iushrn(1),++rt;for(var ot=k.clone(),dt=C.clone();!C.isZero();){for(var $=0,ct=1;!(C.words[0]&ct)&&$<26;++$,ct<<=1);if($>0)for(C.iushrn($);$-- >0;)(T.isOdd()||R.isOdd())&&(T.iadd(ot),R.isub(dt)),T.iushrn(1),R.iushrn(1);for(var W=0,V=1;!(k.words[0]&V)&&W<26;++W,V<<=1);if(W>0)for(k.iushrn(W);W-- >0;)(F.isOdd()||H.isOdd())&&(F.iadd(ot),H.isub(dt)),F.iushrn(1),H.iushrn(1);C.cmp(k)>=0?(C.isub(k),T.isub(F),R.isub(H)):(k.isub(C),F.isub(T),H.isub(R))}return{a:F,b:H,gcd:k.iushln(rt)}},a.prototype._invmp=function(w){s(w.negative===0),s(!w.isZero());var C=this,k=w.clone();C=C.negative!==0?C.umod(w):C.clone();for(var T,R=new a(1),F=new a(0),H=k.clone();C.cmpn(1)>0&&k.cmpn(1)>0;){for(var rt=0,ot=1;!(C.words[0]&ot)&&rt<26;++rt,ot<<=1);if(rt>0)for(C.iushrn(rt);rt-- >0;)R.isOdd()&&R.iadd(H),R.iushrn(1);for(var dt=0,$=1;!(k.words[0]&$)&&dt<26;++dt,$<<=1);if(dt>0)for(k.iushrn(dt);dt-- >0;)F.isOdd()&&F.iadd(H),F.iushrn(1);C.cmp(k)>=0?(C.isub(k),R.isub(F)):(k.isub(C),F.isub(R))}return(T=C.cmpn(1)===0?R:F).cmpn(0)<0&&T.iadd(w),T},a.prototype.gcd=function(w){if(this.isZero())return w.abs();if(w.isZero())return this.abs();var C=this.clone(),k=w.clone();C.negative=0,k.negative=0;for(var T=0;C.isEven()&&k.isEven();T++)C.iushrn(1),k.iushrn(1);for(;;){for(;C.isEven();)C.iushrn(1);for(;k.isEven();)k.iushrn(1);var R=C.cmp(k);if(R<0){var F=C;C=k,k=F}else if(R===0||k.cmpn(1)===0)break;C.isub(k)}return k.iushln(T)},a.prototype.invm=function(w){return this.egcd(w).a.umod(w)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(w){return this.words[0]&w},a.prototype.bincn=function(w){s(typeof w=="number");var C=w%26,k=(w-C)/26,T=1<<C;if(this.length<=k)return this._expand(k+1),this.words[k]|=T,this;for(var R=T,F=k;R!==0&&F<this.length;F++){var H=0|this.words[F];R=(H+=R)>>>26,H&=67108863,this.words[F]=H}return R!==0&&(this.words[F]=R,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(w){var C,k=w<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;if(this._strip(),this.length>1)C=1;else{k&&(w=-w),s(w<=67108863,"Number is too big");var T=0|this.words[0];C=T===w?0:T<w?-1:1}return this.negative!==0?0|-C:C},a.prototype.cmp=function(w){if(this.negative!==0&&w.negative===0)return-1;if(this.negative===0&&w.negative!==0)return 1;var C=this.ucmp(w);return this.negative!==0?0|-C:C},a.prototype.ucmp=function(w){if(this.length>w.length)return 1;if(this.length<w.length)return-1;for(var C=0,k=this.length-1;k>=0;k--){var T=0|this.words[k],R=0|w.words[k];if(T!==R){T<R?C=-1:T>R&&(C=1);break}}return C},a.prototype.gtn=function(w){return this.cmpn(w)===1},a.prototype.gt=function(w){return this.cmp(w)===1},a.prototype.gten=function(w){return this.cmpn(w)>=0},a.prototype.gte=function(w){return this.cmp(w)>=0},a.prototype.ltn=function(w){return this.cmpn(w)===-1},a.prototype.lt=function(w){return this.cmp(w)===-1},a.prototype.lten=function(w){return this.cmpn(w)<=0},a.prototype.lte=function(w){return this.cmp(w)<=0},a.prototype.eqn=function(w){return this.cmpn(w)===0},a.prototype.eq=function(w){return this.cmp(w)===0},a.red=function(w){return new N(w)},a.prototype.toRed=function(w){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),w.convertTo(this)._forceRed(w)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(w){return this.red=w,this},a.prototype.forceRed=function(w){return s(!this.red,"Already a number in reduction context"),this._forceRed(w)},a.prototype.redAdd=function(w){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,w)},a.prototype.redIAdd=function(w){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,w)},a.prototype.redSub=function(w){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,w)},a.prototype.redISub=function(w){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,w)},a.prototype.redShl=function(w){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,w)},a.prototype.redMul=function(w){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.mul(this,w)},a.prototype.redIMul=function(w){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.imul(this,w)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(w){return s(this.red&&!w.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,w)};var z={k256:null,p224:null,p192:null,p25519:null};function q(w,C){this.name=w,this.p=new a(C,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function G(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function tt(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function K(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function B(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(w){if(typeof w=="string"){var C=a._prime(w);this.m=C.p,this.prime=C}else s(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}function Z(w){N.call(this,w),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}q.prototype._tmp=function(){var w=new a(null);return w.words=new Array(Math.ceil(this.n/13)),w},q.prototype.ireduce=function(w){var C,k=w;do this.split(k,this.tmp),C=(k=(k=this.imulK(k)).iadd(this.tmp)).bitLength();while(C>this.n);var T=C<this.n?-1:k.ucmp(this.p);return T===0?(k.words[0]=0,k.length=1):T>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},q.prototype.split=function(w,C){w.iushrn(this.n,0,C)},q.prototype.imulK=function(w){return w.imul(this.k)},o(G,q),G.prototype.split=function(w,C){for(var k=Math.min(w.length,9),T=0;T<k;T++)C.words[T]=w.words[T];if(C.length=k,w.length<=9)return w.words[0]=0,void(w.length=1);var R=w.words[9];for(C.words[C.length++]=4194303&R,T=10;T<w.length;T++){var F=0|w.words[T];w.words[T-10]=(4194303&F)<<4|R>>>22,R=F}R>>>=22,w.words[T-10]=R,R===0&&w.length>10?w.length-=10:w.length-=9},G.prototype.imulK=function(w){w.words[w.length]=0,w.words[w.length+1]=0,w.length+=2;for(var C=0,k=0;k<w.length;k++){var T=0|w.words[k];C+=977*T,w.words[k]=67108863&C,C=64*T+(C/67108864|0)}return w.words[w.length-1]===0&&(w.length--,w.words[w.length-1]===0&&w.length--),w},o(tt,q),o(K,q),o(B,q),B.prototype.imulK=function(w){for(var C=0,k=0;k<w.length;k++){var T=19*(0|w.words[k])+C,R=67108863&T;T>>>=26,w.words[k]=R,C=T}return C!==0&&(w.words[w.length++]=C),w},a._prime=function(w){if(z[w])return z[w];var C;if(w==="k256")C=new G;else if(w==="p224")C=new tt;else if(w==="p192")C=new K;else{if(w!=="p25519")throw new Error("Unknown prime "+w);C=new B}return z[w]=C,C},N.prototype._verify1=function(w){s(w.negative===0,"red works only with positives"),s(w.red,"red works only with red numbers")},N.prototype._verify2=function(w,C){s((w.negative|C.negative)==0,"red works only with positives"),s(w.red&&w.red===C.red,"red works only with red numbers")},N.prototype.imod=function(w){return this.prime?this.prime.ireduce(w)._forceRed(this):(p(w,w.umod(this.m)._forceRed(this)),w)},N.prototype.neg=function(w){return w.isZero()?w.clone():this.m.sub(w)._forceRed(this)},N.prototype.add=function(w,C){this._verify2(w,C);var k=w.add(C);return k.cmp(this.m)>=0&&k.isub(this.m),k._forceRed(this)},N.prototype.iadd=function(w,C){this._verify2(w,C);var k=w.iadd(C);return k.cmp(this.m)>=0&&k.isub(this.m),k},N.prototype.sub=function(w,C){this._verify2(w,C);var k=w.sub(C);return k.cmpn(0)<0&&k.iadd(this.m),k._forceRed(this)},N.prototype.isub=function(w,C){this._verify2(w,C);var k=w.isub(C);return k.cmpn(0)<0&&k.iadd(this.m),k},N.prototype.shl=function(w,C){return this._verify1(w),this.imod(w.ushln(C))},N.prototype.imul=function(w,C){return this._verify2(w,C),this.imod(w.imul(C))},N.prototype.mul=function(w,C){return this._verify2(w,C),this.imod(w.mul(C))},N.prototype.isqr=function(w){return this.imul(w,w.clone())},N.prototype.sqr=function(w){return this.mul(w,w)},N.prototype.sqrt=function(w){if(w.isZero())return w.clone();var C=this.m.andln(3);if(s(C%2==1),C===3){var k=this.m.add(new a(1)).iushrn(2);return this.pow(w,k)}for(var T=this.m.subn(1),R=0;!T.isZero()&&T.andln(1)===0;)R++,T.iushrn(1);s(!T.isZero());var F=new a(1).toRed(this),H=F.redNeg(),rt=this.m.subn(1).iushrn(1),ot=this.m.bitLength();for(ot=new a(2*ot*ot).toRed(this);this.pow(ot,rt).cmp(H)!==0;)ot.redIAdd(H);for(var dt=this.pow(ot,T),$=this.pow(w,T.addn(1).iushrn(1)),ct=this.pow(w,T),W=R;ct.cmp(F)!==0;){for(var V=ct,it=0;V.cmp(F)!==0;it++)V=V.redSqr();s(it<W);var mt=this.pow(dt,new a(1).iushln(W-it-1));$=$.redMul(mt),dt=mt.redSqr(),ct=ct.redMul(dt),W=it}return $},N.prototype.invm=function(w){var C=w._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},N.prototype.pow=function(w,C){if(C.isZero())return new a(1).toRed(this);if(C.cmpn(1)===0)return w.clone();var k=new Array(16);k[0]=new a(1).toRed(this),k[1]=w;for(var T=2;T<k.length;T++)k[T]=this.mul(k[T-1],w);var R=k[0],F=0,H=0,rt=C.bitLength()%26;for(rt===0&&(rt=26),T=C.length-1;T>=0;T--){for(var ot=C.words[T],dt=rt-1;dt>=0;dt--){var $=ot>>dt&1;R!==k[0]&&(R=this.sqr(R)),$!==0||F!==0?(F<<=1,F|=$,(++H===4||T===0&&dt===0)&&(R=this.mul(R,k[F]),H=0,F=0)):H=0}rt=26}return R},N.prototype.convertTo=function(w){var C=w.umod(this.m);return C===w?C.clone():C},N.prototype.convertFrom=function(w){var C=w.clone();return C.red=null,C},a.mont=function(w){return new Z(w)},o(Z,N),Z.prototype.convertTo=function(w){return this.imod(w.ushln(this.shift))},Z.prototype.convertFrom=function(w){var C=this.imod(w.mul(this.rinv));return C.red=null,C},Z.prototype.imul=function(w,C){if(w.isZero()||C.isZero())return w.words[0]=0,w.length=1,w;var k=w.imul(C),T=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=k.isub(T).iushrn(this.shift),F=R;return R.cmp(this.m)>=0?F=R.isub(this.m):R.cmpn(0)<0&&(F=R.iadd(this.m)),F._forceRed(this)},Z.prototype.mul=function(w,C){if(w.isZero()||C.isZero())return new a(0)._forceRed(this);var k=w.mul(C),T=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=k.isub(T).iushrn(this.shift),F=R;return R.cmp(this.m)>=0?F=R.isub(this.m):R.cmpn(0)<0&&(F=R.iadd(this.m)),F._forceRed(this)},Z.prototype.invm=function(w){return this.imod(w._invmp(this.m).mul(this.r2))._forceRed(this)}})(t===void 0||t)},{buffer:188}],187:[function(n,t,e){"use strict";var r;function i(o){this.rand=o}if(t.exports=function(o){return r||(r=new i(null)),r.generate(o)},t.exports.Rand=i,i.prototype.generate=function(o){return this._rand(o)},i.prototype._rand=function(o){if(this.rand.getBytes)return this.rand.getBytes(o);for(var a=new Uint8Array(o),l=0;l<a.length;l++)a[l]=this.rand.getByte();return a},typeof self=="object")self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(o){var a=new Uint8Array(o);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(o){var a=new Uint8Array(o);return self.msCrypto.getRandomValues(a),a}:typeof window=="object"&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=n("crypto");if(typeof s.randomBytes!="function")throw new Error("Not supported");i.prototype._rand=function(o){return s.randomBytes(o)}}catch{}},{crypto:188}],188:[function(n,t,e){},{}],189:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer;function i(h){r.isBuffer(h)||(h=r.from(h));for(var d=h.length/4|0,p=new Array(d),g=0;g<d;g++)p[g]=h.readUInt32BE(4*g);return p}function s(h){for(;0<h.length;h++)h[0]=0}function o(h,d,p,g,m){for(var b,y,x,S,O=p[0],D=p[1],U=p[2],z=p[3],q=h[0]^d[0],G=h[1]^d[1],tt=h[2]^d[2],K=h[3]^d[3],B=4,N=1;N<m;N++)b=O[q>>>24]^D[G>>>16&255]^U[tt>>>8&255]^z[255&K]^d[B++],y=O[G>>>24]^D[tt>>>16&255]^U[K>>>8&255]^z[255&q]^d[B++],x=O[tt>>>24]^D[K>>>16&255]^U[q>>>8&255]^z[255&G]^d[B++],S=O[K>>>24]^D[q>>>16&255]^U[G>>>8&255]^z[255&tt]^d[B++],q=b,G=y,tt=x,K=S;return b=(g[q>>>24]<<24|g[G>>>16&255]<<16|g[tt>>>8&255]<<8|g[255&K])^d[B++],y=(g[G>>>24]<<24|g[tt>>>16&255]<<16|g[K>>>8&255]<<8|g[255&q])^d[B++],x=(g[tt>>>24]<<24|g[K>>>16&255]<<16|g[q>>>8&255]<<8|g[255&G])^d[B++],S=(g[K>>>24]<<24|g[q>>>16&255]<<16|g[G>>>8&255]<<8|g[255&tt])^d[B++],[b>>>=0,y>>>=0,x>>>=0,S>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var h=new Array(256),d=0;d<256;d++)h[d]=d<128?d<<1:d<<1^283;for(var p=[],g=[],m=[[],[],[],[]],b=[[],[],[],[]],y=0,x=0,S=0;S<256;++S){var O=x^x<<1^x<<2^x<<3^x<<4;O=O>>>8^255&O^99,p[y]=O,g[O]=y;var D=h[y],U=h[D],z=h[U],q=257*h[O]^16843008*O;m[0][y]=q<<24|q>>>8,m[1][y]=q<<16|q>>>16,m[2][y]=q<<8|q>>>24,m[3][y]=q,q=16843009*z^65537*U^257*D^16843008*y,b[0][O]=q<<24|q>>>8,b[1][O]=q<<16|q>>>16,b[2][O]=q<<8|q>>>24,b[3][O]=q,y===0?y=x=1:(y=D^h[h[h[z^D]]],x^=h[h[x]])}return{SBOX:p,INV_SBOX:g,SUB_MIX:m,INV_SUB_MIX:b}}();function c(h){this._key=i(h),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var h=this._key,d=h.length,p=d+6,g=4*(p+1),m=[],b=0;b<d;b++)m[b]=h[b];for(b=d;b<g;b++){var y=m[b-1];b%d==0?(y=y<<8|y>>>24,y=l.SBOX[y>>>24]<<24|l.SBOX[y>>>16&255]<<16|l.SBOX[y>>>8&255]<<8|l.SBOX[255&y],y^=a[b/d|0]<<24):d>6&&b%d==4&&(y=l.SBOX[y>>>24]<<24|l.SBOX[y>>>16&255]<<16|l.SBOX[y>>>8&255]<<8|l.SBOX[255&y]),m[b]=m[b-d]^y}for(var x=[],S=0;S<g;S++){var O=g-S,D=m[O-(S%4?0:4)];x[S]=S<4||O<=4?D:l.INV_SUB_MIX[0][l.SBOX[D>>>24]]^l.INV_SUB_MIX[1][l.SBOX[D>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[D>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&D]]}this._nRounds=p,this._keySchedule=m,this._invKeySchedule=x},c.prototype.encryptBlockRaw=function(h){return o(h=i(h),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},c.prototype.encryptBlock=function(h){var d=this.encryptBlockRaw(h),p=r.allocUnsafe(16);return p.writeUInt32BE(d[0],0),p.writeUInt32BE(d[1],4),p.writeUInt32BE(d[2],8),p.writeUInt32BE(d[3],12),p},c.prototype.decryptBlock=function(h){var d=(h=i(h))[1];h[1]=h[3],h[3]=d;var p=o(h,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),g=r.allocUnsafe(16);return g.writeUInt32BE(p[0],0),g.writeUInt32BE(p[3],4),g.writeUInt32BE(p[2],8),g.writeUInt32BE(p[1],12),g},c.prototype.scrub=function(){s(this._keySchedule),s(this._invKeySchedule),s(this._key)},t.exports.AES=c},{"safe-buffer":494}],190:[function(n,t,e){"use strict";var r=n("./aes"),i=n("safe-buffer").Buffer,s=n("cipher-base"),o=n("inherits"),a=n("./ghash"),l=n("buffer-xor"),c=n("./incr32");function h(d,p,g,m){s.call(this);var b=i.alloc(4,0);this._cipher=new r.AES(p);var y=this._cipher.encryptBlock(b);this._ghash=new a(y),g=function(x,S,O){if(S.length===12)return x._finID=i.concat([S,i.from([0,0,0,1])]),i.concat([S,i.from([0,0,0,2])]);var D=new a(O),U=S.length,z=U%16;D.update(S),z&&(z=16-z,D.update(i.alloc(z,0))),D.update(i.alloc(8,0));var q=8*U,G=i.alloc(8);G.writeUIntBE(q,0,8),D.update(G),x._finID=D.state;var tt=i.from(x._finID);return c(tt),tt}(this,g,y),this._prev=i.from(g),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=m,this._alen=0,this._len=0,this._mode=d,this._authTag=null,this._called=!1}o(h,s),h.prototype._update=function(d){if(!this._called&&this._alen){var p=16-this._alen%16;p<16&&(p=i.alloc(p,0),this._ghash.update(p))}this._called=!0;var g=this._mode.encrypt(this,d);return this._decrypt?this._ghash.update(d):this._ghash.update(g),this._len+=d.length,g},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var d=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(p,g){var m=0;p.length!==g.length&&m++;for(var b=Math.min(p.length,g.length),y=0;y<b;++y)m+=p[y]^g[y];return m}(d,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=d,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(d){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=d},h.prototype.setAAD=function(d){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(d),this._alen+=d.length},t.exports=h},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(n,t,e){"use strict";var r=n("./encrypter"),i=n("./decrypter"),s=n("./modes/list.json");e.createCipher=e.Cipher=r.createCipher,e.createCipheriv=e.Cipheriv=r.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(s)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(n,t,e){"use strict";var r=n("./authCipher"),i=n("safe-buffer").Buffer,s=n("./modes"),o=n("./streamCipher"),a=n("cipher-base"),l=n("./aes"),c=n("evp_bytestokey");function h(g,m,b){a.call(this),this._cache=new d,this._last=void 0,this._cipher=new l.AES(m),this._prev=i.from(b),this._mode=g,this._autopadding=!0}function d(){this.cache=i.allocUnsafe(0)}function p(g,m,b){var y=s[g.toLowerCase()];if(!y)throw new TypeError("invalid suite type");if(typeof b=="string"&&(b=i.from(b)),y.mode!=="GCM"&&b.length!==y.iv)throw new TypeError("invalid iv length "+b.length);if(typeof m=="string"&&(m=i.from(m)),m.length!==y.key/8)throw new TypeError("invalid key length "+m.length);return y.type==="stream"?new o(y.module,m,b,!0):y.type==="auth"?new r(y.module,m,b,!0):new h(y.module,m,b)}n("inherits")(h,a),h.prototype._update=function(g){var m,b;this._cache.add(g);for(var y=[];m=this._cache.get(this._autopadding);)b=this._mode.decrypt(this,m),y.push(b);return i.concat(y)},h.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return function(m){var b=m[15];if(b<1||b>16)throw new Error("unable to decrypt data");for(var y=-1;++y<b;)if(m[y+(16-b)]!==b)throw new Error("unable to decrypt data");if(b!==16)return m.slice(0,16-b)}(this._mode.decrypt(this,g));if(g)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this},d.prototype.add=function(g){this.cache=i.concat([this.cache,g])},d.prototype.get=function(g){var m;if(g){if(this.cache.length>16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m}else if(this.cache.length>=16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(g,m){var b=s[g.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var y=c(m,!1,b.key,b.iv);return p(g,y.key,y.iv)},e.createDecipheriv=p},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(n,t,e){"use strict";var r=n("./modes"),i=n("./authCipher"),s=n("safe-buffer").Buffer,o=n("./streamCipher"),a=n("cipher-base"),l=n("./aes"),c=n("evp_bytestokey");function h(m,b,y){a.call(this),this._cache=new p,this._cipher=new l.AES(b),this._prev=s.from(y),this._mode=m,this._autopadding=!0}n("inherits")(h,a),h.prototype._update=function(m){var b,y;this._cache.add(m);for(var x=[];b=this._cache.get();)y=this._mode.encrypt(this,b),x.push(y);return s.concat(x)};var d=s.alloc(16,16);function p(){this.cache=s.allocUnsafe(0)}function g(m,b,y){var x=r[m.toLowerCase()];if(!x)throw new TypeError("invalid suite type");if(typeof b=="string"&&(b=s.from(b)),b.length!==x.key/8)throw new TypeError("invalid key length "+b.length);if(typeof y=="string"&&(y=s.from(y)),x.mode!=="GCM"&&y.length!==x.iv)throw new TypeError("invalid iv length "+y.length);return x.type==="stream"?new o(x.module,b,y):x.type==="auth"?new i(x.module,b,y):new h(x.module,b,y)}h.prototype._final=function(){var m=this._cache.flush();if(this._autopadding)return m=this._mode.encrypt(this,m),this._cipher.scrub(),m;if(!m.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(m){return this._autopadding=!!m,this},p.prototype.add=function(m){this.cache=s.concat([this.cache,m])},p.prototype.get=function(){if(this.cache.length>15){var m=this.cache.slice(0,16);return this.cache=this.cache.slice(16),m}return null},p.prototype.flush=function(){for(var m=16-this.cache.length,b=s.allocUnsafe(m),y=-1;++y<m;)b.writeUInt8(m,y);return s.concat([this.cache,b])},e.createCipheriv=g,e.createCipher=function(m,b){var y=r[m.toLowerCase()];if(!y)throw new TypeError("invalid suite type");var x=c(b,!1,y.key,y.iv);return g(m,x.key,x.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=r.alloc(16,0);function s(a){var l=r.allocUnsafe(16);return l.writeUInt32BE(a[0]>>>0,0),l.writeUInt32BE(a[1]>>>0,4),l.writeUInt32BE(a[2]>>>0,8),l.writeUInt32BE(a[3]>>>0,12),l}function o(a){this.h=a,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}o.prototype.ghash=function(a){for(var l=-1;++l<a.length;)this.state[l]^=a[l];this._multiply()},o.prototype._multiply=function(){for(var a,l,c,h=[(a=this.h).readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)],d=[0,0,0,0],p=-1;++p<128;){for(this.state[~~(p/8)]&1<<7-p%8&&(d[0]^=h[0],d[1]^=h[1],d[2]^=h[2],d[3]^=h[3]),c=(1&h[3])!=0,l=3;l>0;l--)h[l]=h[l]>>>1|(1&h[l-1])<<31;h[0]=h[0]>>>1,c&&(h[0]=h[0]^225<<24)}this.state=s(d)},o.prototype.update=function(a){var l;for(this.cache=r.concat([this.cache,a]);this.cache.length>=16;)l=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(l)},o.prototype.final=function(a,l){return this.cache.length&&this.ghash(r.concat([this.cache,i],16)),this.ghash(s([0,a,0,l])),this.state},t.exports=o},{"safe-buffer":494}],195:[function(n,t,e){"use strict";t.exports=function(r){for(var i,s=r.length;s--;){if((i=r.readUInt8(s))!==255){i++,r.writeUInt8(i,s);break}r.writeUInt8(0,s)}}},{}],196:[function(n,t,e){"use strict";var r=n("buffer-xor");e.encrypt=function(i,s){var o=r(s,i._prev);return i._prev=i._cipher.encryptBlock(o),i._prev},e.decrypt=function(i,s){var o=i._prev;i._prev=s;var a=i._cipher.decryptBlock(s);return r(a,o)}},{"buffer-xor":219}],197:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=n("buffer-xor");function s(o,a,l){var c=a.length,h=i(a,o._cache);return o._cache=o._cache.slice(c),o._prev=r.concat([o._prev,l?a:h]),h}e.encrypt=function(o,a,l){for(var c,h=r.allocUnsafe(0);a.length;){if(o._cache.length===0&&(o._cache=o._cipher.encryptBlock(o._prev),o._prev=r.allocUnsafe(0)),!(o._cache.length<=a.length)){h=r.concat([h,s(o,a,l)]);break}c=o._cache.length,h=r.concat([h,s(o,a.slice(0,c),l)]),a=a.slice(c)}return h}},{"buffer-xor":219,"safe-buffer":494}],198:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer;function i(o,a,l){for(var c,h,d=-1,p=0;++d<8;)c=a&1<<7-d?128:0,p+=(128&(h=o._cipher.encryptBlock(o._prev)[0]^c))>>d%8,o._prev=s(o._prev,l?c:h);return p}function s(o,a){var l=o.length,c=-1,h=r.allocUnsafe(o.length);for(o=r.concat([o,r.from([a])]);++c<l;)h[c]=o[c]<<1|o[c+1]>>7;return h}e.encrypt=function(o,a,l){for(var c=a.length,h=r.allocUnsafe(c),d=-1;++d<c;)h[d]=i(o,a[d],l);return h}},{"safe-buffer":494}],199:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer;function i(s,o,a){var l=s._cipher.encryptBlock(s._prev)[0]^o;return s._prev=r.concat([s._prev.slice(1),r.from([a?o:l])]),l}e.encrypt=function(s,o,a){for(var l=o.length,c=r.allocUnsafe(l),h=-1;++h<l;)c[h]=i(s,o[h],a);return c}},{"safe-buffer":494}],200:[function(n,t,e){"use strict";var r=n("buffer-xor"),i=n("safe-buffer").Buffer,s=n("../incr32");function o(a){var l=a._cipher.encryptBlockRaw(a._prev);return s(a._prev),l}e.encrypt=function(a,l){var c=Math.ceil(l.length/16),h=a._cache.length;a._cache=i.concat([a._cache,i.allocUnsafe(16*c)]);for(var d=0;d<c;d++){var p=o(a),g=h+16*d;a._cache.writeUInt32BE(p[0],g+0),a._cache.writeUInt32BE(p[1],g+4),a._cache.writeUInt32BE(p[2],g+8),a._cache.writeUInt32BE(p[3],g+12)}var m=a._cache.slice(0,l.length);return a._cache=a._cache.slice(l.length),r(l,m)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(n,t,e){"use strict";e.encrypt=function(r,i){return r._cipher.encryptBlock(i)},e.decrypt=function(r,i){return r._cipher.decryptBlock(i)}},{}],202:[function(n,t,e){"use strict";var r={ECB:n("./ecb"),CBC:n("./cbc"),CFB:n("./cfb"),CFB8:n("./cfb8"),CFB1:n("./cfb1"),OFB:n("./ofb"),CTR:n("./ctr"),GCM:n("./ctr")},i=n("./list.json");for(var s in i)i[s].module=r[i[s].mode];t.exports=i},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(n,t,e){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(n,t,e){(function(r){(function(){"use strict";var i=n("buffer-xor");function s(o){return o._prev=o._cipher.encryptBlock(o._prev),o._prev}e.encrypt=function(o,a){for(;o._cache.length<a.length;)o._cache=r.concat([o._cache,s(o)]);var l=o._cache.slice(0,a.length);return o._cache=o._cache.slice(a.length),i(a,l)}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(n,t,e){"use strict";var r=n("./aes"),i=n("safe-buffer").Buffer,s=n("cipher-base");function o(a,l,c,h){s.call(this),this._cipher=new r.AES(l),this._prev=i.from(c),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=h,this._mode=a}n("inherits")(o,s),o.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},t.exports=o},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(n,t,e){"use strict";var r=n("browserify-des"),i=n("browserify-aes/browser"),s=n("browserify-aes/modes"),o=n("browserify-des/modes"),a=n("evp_bytestokey");function l(h,d,p){if(h=h.toLowerCase(),s[h])return i.createCipheriv(h,d,p);if(o[h])return new r({key:d,iv:p,mode:h});throw new TypeError("invalid suite type")}function c(h,d,p){if(h=h.toLowerCase(),s[h])return i.createDecipheriv(h,d,p);if(o[h])return new r({key:d,iv:p,mode:h,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(h,d){var p,g;if(h=h.toLowerCase(),s[h])p=s[h].key,g=s[h].iv;else{if(!o[h])throw new TypeError("invalid suite type");p=8*o[h].key,g=o[h].iv}var m=a(d,!1,p,g);return l(h,m.key,m.iv)},e.createCipheriv=e.Cipheriv=l,e.createDecipher=e.Decipher=function(h,d){var p,g;if(h=h.toLowerCase(),s[h])p=s[h].key,g=s[h].iv;else{if(!o[h])throw new TypeError("invalid suite type");p=8*o[h].key,g=o[h].iv}var m=a(d,!1,p,g);return c(h,m.key,m.iv)},e.createDecipheriv=e.Decipheriv=c,e.listCiphers=e.getCiphers=function(){return Object.keys(o).concat(i.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(n,t,e){"use strict";var r=n("cipher-base"),i=n("des.js"),s=n("inherits"),o=n("safe-buffer").Buffer,a={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function l(c){r.call(this);var h,d=c.mode.toLowerCase(),p=a[d];h=c.decrypt?"decrypt":"encrypt";var g=c.key;o.isBuffer(g)||(g=o.from(g)),d!=="des-ede"&&d!=="des-ede-cbc"||(g=o.concat([g,g.slice(0,8)]));var m=c.iv;o.isBuffer(m)||(m=o.from(m)),this._des=p.create({key:g,iv:m,type:h})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=l,s(l,r),l.prototype._update=function(c){return o.from(this._des.update(c))},l.prototype._final=function(){return o.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(n,t,e){"use strict";e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},{}],209:[function(n,t,e){(function(r){(function(){"use strict";var i=n("bn.js"),s=n("randombytes");function o(l){var c,h=l.modulus.byteLength();do c=new i(s(h));while(c.cmp(l.modulus)>=0||!c.umod(l.prime1)||!c.umod(l.prime2));return c}function a(l,c){var h=function(U){var z=o(U);return{blinder:z.toRed(i.mont(U.modulus)).redPow(new i(U.publicExponent)).fromRed(),unblinder:z.invm(U.modulus)}}(c),d=c.modulus.byteLength(),p=new i(l).mul(h.blinder).umod(c.modulus),g=p.toRed(i.mont(c.prime1)),m=p.toRed(i.mont(c.prime2)),b=c.coefficient,y=c.prime1,x=c.prime2,S=g.redPow(c.exponent1).fromRed(),O=m.redPow(c.exponent2).fromRed(),D=S.isub(O).imul(b).umod(y).imul(x);return O.iadd(D).imul(h.unblinder).umod(c.modulus).toArrayLike(r,"be",d)}a.getr=o,t.exports=a}).call(this)}).call(this,n("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(n,t,e){"use strict";t.exports=n("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(n,t,e){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(n,t,e){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=n("create-hash"),s=n("readable-stream"),o=n("inherits"),a=n("./sign"),l=n("./verify"),c=n("./algorithms.json");function h(m){s.Writable.call(this);var b=c[m];if(!b)throw new Error("Unknown message digest");this._hashType=b.hash,this._hash=i(b.hash),this._tag=b.id,this._signType=b.sign}function d(m){s.Writable.call(this);var b=c[m];if(!b)throw new Error("Unknown message digest");this._hash=i(b.hash),this._tag=b.id,this._signType=b.sign}function p(m){return new h(m)}function g(m){return new d(m)}Object.keys(c).forEach(function(m){c[m].id=r.from(c[m].id,"hex"),c[m.toLowerCase()]=c[m]}),o(h,s.Writable),h.prototype._write=function(m,b,y){this._hash.update(m),y()},h.prototype.update=function(m,b){return typeof m=="string"&&(m=r.from(m,b)),this._hash.update(m),this},h.prototype.sign=function(m,b){this.end();var y=this._hash.digest(),x=a(y,m,this._hashType,this._signType,this._tag);return b?x.toString(b):x},o(d,s.Writable),d.prototype._write=function(m,b,y){this._hash.update(m),y()},d.prototype.update=function(m,b){return typeof m=="string"&&(m=r.from(m,b)),this._hash.update(m),this},d.prototype.verify=function(m,b,y){typeof b=="string"&&(b=r.from(b,y)),this.end();var x=this._hash.digest();return l(b,x,m,this._signType,this._tag)},t.exports={Sign:p,Verify:g,createSign:p,createVerify:g}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=n("create-hmac"),s=n("browserify-rsa"),o=n("elliptic").ec,a=n("bn.js"),l=n("parse-asn1"),c=n("./curves.json");function h(m,b,y,x){if((m=r.from(m.toArray())).length<b.byteLength()){var S=r.alloc(b.byteLength()-m.length);m=r.concat([S,m])}var O=y.length,D=function(q,G){q=(q=d(q,G)).mod(G);var tt=r.from(q.toArray());if(tt.length<G.byteLength()){var K=r.alloc(G.byteLength()-tt.length);tt=r.concat([K,tt])}return tt}(y,b),U=r.alloc(O);U.fill(1);var z=r.alloc(O);return z=i(x,z).update(U).update(r.from([0])).update(m).update(D).digest(),U=i(x,z).update(U).digest(),{k:z=i(x,z).update(U).update(r.from([1])).update(m).update(D).digest(),v:U=i(x,z).update(U).digest()}}function d(m,b){var y=new a(m),x=(m.length<<3)-b.bitLength();return x>0&&y.ishrn(x),y}function p(m,b,y){var x,S;do{for(x=r.alloc(0);8*x.length<m.bitLength();)b.v=i(y,b.k).update(b.v).digest(),x=r.concat([x,b.v]);S=d(x,m),b.k=i(y,b.k).update(b.v).update(r.from([0])).digest(),b.v=i(y,b.k).update(b.v).digest()}while(S.cmp(m)!==-1);return S}function g(m,b,y,x){return m.toRed(a.mont(y)).redPow(b).fromRed().mod(x)}t.exports=function(m,b,y,x,S){var O=l(b);if(O.curve){if(x!=="ecdsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");return function(q,G){var tt=c[G.curve.join(".")];if(!tt)throw new Error("unknown curve "+G.curve.join("."));var K=new o(tt).keyFromPrivate(G.privateKey).sign(q);return r.from(K.toDER())}(m,O)}if(O.type==="dsa"){if(x!=="dsa")throw new Error("wrong private key type");return function(q,G,tt){for(var K,B=G.params.priv_key,N=G.params.p,Z=G.params.q,w=G.params.g,C=new a(0),k=d(q,Z).mod(Z),T=!1,R=h(B,Z,q,tt);T===!1;)K=p(Z,R,tt),C=g(w,K,N,Z),(T=K.invm(Z).imul(k.add(B.mul(C))).mod(Z)).cmpn(0)===0&&(T=!1,C=new a(0));return function(F,H){F=F.toArray(),H=H.toArray(),128&F[0]&&(F=[0].concat(F)),128&H[0]&&(H=[0].concat(H));var rt=[48,F.length+H.length+4,2,F.length];return rt=rt.concat(F,[2,H.length],H),r.from(rt)}(C,T)}(m,O,y)}if(x!=="rsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");m=r.concat([S,m]);for(var D=O.modulus.byteLength(),U=[0,1];m.length+U.length+1<D;)U.push(255);U.push(0);for(var z=-1;++z<m.length;)U.push(m[z]);return s(U,O)},t.exports.getKey=h,t.exports.makeKey=p},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=n("bn.js"),s=n("elliptic").ec,o=n("parse-asn1"),a=n("./curves.json");function l(c,h){if(c.cmpn(0)<=0)throw new Error("invalid sig");if(c.cmp(h)>=h)throw new Error("invalid sig")}t.exports=function(c,h,d,p,g){var m=o(d);if(m.type==="ec"){if(p!=="ecdsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");return function(U,z,q){var G=a[q.data.algorithm.curve.join(".")];if(!G)throw new Error("unknown curve "+q.data.algorithm.curve.join("."));var tt=new s(G),K=q.data.subjectPrivateKey.data;return tt.verify(z,U,K)}(c,h,m)}if(m.type==="dsa"){if(p!=="dsa")throw new Error("wrong public key type");return function(U,z,q){var G=q.data.p,tt=q.data.q,K=q.data.g,B=q.data.pub_key,N=o.signature.decode(U,"der"),Z=N.s,w=N.r;l(Z,tt),l(w,tt);var C=i.mont(G),k=Z.invm(tt);return K.toRed(C).redPow(new i(z).mul(k).mod(tt)).fromRed().mul(B.toRed(C).redPow(w.mul(k).mod(tt)).fromRed()).mod(G).mod(tt).cmp(w)===0}(c,h,m)}if(p!=="rsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");h=r.concat([g,h]);for(var b=m.modulus.byteLength(),y=[1],x=0;h.length+y.length+2<b;)y.push(255),x++;y.push(0);for(var S=-1;++S<h.length;)y.push(h[S]);y=r.from(y);var O=i.mont(m.modulus);c=(c=new i(c).toRed(O)).redPow(new i(m.publicExponent)),c=r.from(c.fromRed().toArray());var D=x<8?1:0;for(b=Math.min(c.length,y.length),c.length!==y.length&&(D=1),S=-1;++S<b;)D|=c[S]^y[S];return D===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(n,t,e){},{}],217:[function(n,t,e){"use strict";var r=n("buffer"),i=r.Buffer;function s(a,l){for(var c in a)l[c]=a[c]}function o(a,l,c){return i(a,l,c)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=o),s(i,o),o.from=function(a,l,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return i(a,l,c)},o.alloc=function(a,l,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var h=i(a);return l!==void 0?typeof c=="string"?h.fill(l,c):h.fill(l):h.fill(0),h},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}},{buffer:220}],218:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=r.isEncoding||function(m){switch((m=""+m)&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(m){var b;switch(this.encoding=function(y){var x=function(S){if(!S)return"utf8";for(var O;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(O)return;S=(""+S).toLowerCase(),O=!0}}(y);if(typeof x!="string"&&(r.isEncoding===i||!i(y)))throw new Error("Unknown encoding: "+y);return x||y}(m),this.encoding){case"utf16le":this.text=l,this.end=c,b=4;break;case"utf8":this.fillLast=a,b=4;break;case"base64":this.text=h,this.end=d,b=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(b)}function o(m){return m<=127?0:m>>5==6?2:m>>4==14?3:m>>3==30?4:m>>6==2?-1:-2}function a(m){var b=this.lastTotal-this.lastNeed,y=function(x,S,O){if((192&S[0])!=128)return x.lastNeed=0,"\uFFFD";if(x.lastNeed>1&&S.length>1){if((192&S[1])!=128)return x.lastNeed=1,"\uFFFD";if(x.lastNeed>2&&S.length>2&&(192&S[2])!=128)return x.lastNeed=2,"\uFFFD"}}(this,m);return y!==void 0?y:this.lastNeed<=m.length?(m.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(m.copy(this.lastChar,b,0,m.length),void(this.lastNeed-=m.length))}function l(m,b){if((m.length-b)%2==0){var y=m.toString("utf16le",b);if(y){var x=y.charCodeAt(y.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",b,m.length-1)}function c(m){var b=m&&m.length?this.write(m):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,y)}return b}function h(m,b){var y=(m.length-b)%3;return y===0?m.toString("base64",b):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",b,m.length-y))}function d(m){var b=m&&m.length?this.write(m):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function p(m){return m.toString(this.encoding)}function g(m){return m&&m.length?this.write(m):""}e.StringDecoder=s,s.prototype.write=function(m){if(m.length===0)return"";var b,y;if(this.lastNeed){if((b=this.fillLast(m))===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<m.length?b?b+this.text(m,y):this.text(m,y):b||""},s.prototype.end=function(m){var b=m&&m.length?this.write(m):"";return this.lastNeed?b+"\uFFFD":b},s.prototype.text=function(m,b){var y=function(S,O,D){var U=O.length-1;if(U<D)return 0;var z=o(O[U]);return z>=0?(z>0&&(S.lastNeed=z-1),z):--U<D||z===-2?0:(z=o(O[U]))>=0?(z>0&&(S.lastNeed=z-2),z):--U<D||z===-2?0:(z=o(O[U]))>=0?(z>0&&(z===2?z=0:S.lastNeed=z-3),z):0}(this,m,b);if(!this.lastNeed)return m.toString("utf8",b);this.lastTotal=y;var x=m.length-(y-this.lastNeed);return m.copy(this.lastChar,0,x),m.toString("utf8",b,x)},s.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length}},{"safe-buffer":217}],219:[function(n,t,e){(function(r){(function(){"use strict";t.exports=function(i,s){for(var o=Math.min(i.length,s.length),a=new r(o),l=0;l<o;++l)a[l]=i[l]^s[l];return a}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:220}],220:[function(n,t,e){(function(r){(function(){"use strict";var i=n("base64-js"),s=n("ieee754");e.Buffer=a,e.SlowBuffer=function(W){return+W!=W&&(W=0),a.alloc(+W)},e.INSPECT_MAX_BYTES=50;function o(W){if(W>2147483647)throw new RangeError('The value "'+W+'" is invalid for option "size"');var V=new Uint8Array(W);return V.__proto__=a.prototype,V}function a(W,V,it){if(typeof W=="number"){if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(W)}return l(W,V,it)}function l(W,V,it){if(typeof W=="string")return function(_t,Ct){if(typeof Ct=="string"&&Ct!==""||(Ct="utf8"),!a.isEncoding(Ct))throw new TypeError("Unknown encoding: "+Ct);var Ft=0|g(_t,Ct),It=o(Ft),vt=It.write(_t,Ct);return vt!==Ft&&(It=It.slice(0,vt)),It}(W,V);if(ArrayBuffer.isView(W))return d(W);if(W==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if($(W,ArrayBuffer)||W&&$(W.buffer,ArrayBuffer))return function(_t,Ct,Ft){if(Ct<0||_t.byteLength<Ct)throw new RangeError('"offset" is outside of buffer bounds');if(_t.byteLength<Ct+(Ft||0))throw new RangeError('"length" is outside of buffer bounds');var It;return It=Ct===void 0&&Ft===void 0?new Uint8Array(_t):Ft===void 0?new Uint8Array(_t,Ct):new Uint8Array(_t,Ct,Ft),It.__proto__=a.prototype,It}(W,V,it);if(typeof W=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var mt=W.valueOf&&W.valueOf();if(mt!=null&&mt!==W)return a.from(mt,V,it);var wt=function(_t){if(a.isBuffer(_t)){var Ct=0|p(_t.length),Ft=o(Ct);return Ft.length===0||_t.copy(Ft,0,0,Ct),Ft}if(_t.length!==void 0)return typeof _t.length!="number"||ct(_t.length)?o(0):d(_t);if(_t.type==="Buffer"&&Array.isArray(_t.data))return d(_t.data)}(W);if(wt)return wt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof W[Symbol.toPrimitive]=="function")return a.from(W[Symbol.toPrimitive]("string"),V,it);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}function c(W){if(typeof W!="number")throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function h(W){return c(W),o(W<0?0:0|p(W))}function d(W){for(var V=W.length<0?0:0|p(W.length),it=o(V),mt=0;mt<V;mt+=1)it[mt]=255&W[mt];return it}function p(W){if(W>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|W}function g(W,V){if(a.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||$(W,ArrayBuffer))return W.byteLength;if(typeof W!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);var it=W.length,mt=arguments.length>2&&arguments[2]===!0;if(!mt&&it===0)return 0;for(var wt=!1;;)switch(V){case"ascii":case"latin1":case"binary":return it;case"utf8":case"utf-8":return rt(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*it;case"hex":return it>>>1;case"base64":return ot(W).length;default:if(wt)return mt?-1:rt(W).length;V=(""+V).toLowerCase(),wt=!0}}function m(W,V,it){var mt=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((it===void 0||it>this.length)&&(it=this.length),it<=0)||(it>>>=0)<=(V>>>=0))return"";for(W||(W="utf8");;)switch(W){case"hex":return N(this,V,it);case"utf8":case"utf-8":return tt(this,V,it);case"ascii":return K(this,V,it);case"latin1":case"binary":return B(this,V,it);case"base64":return G(this,V,it);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,V,it);default:if(mt)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),mt=!0}}function b(W,V,it){var mt=W[V];W[V]=W[it],W[it]=mt}function y(W,V,it,mt,wt){if(W.length===0)return-1;if(typeof it=="string"?(mt=it,it=0):it>2147483647?it=2147483647:it<-2147483648&&(it=-2147483648),ct(it=+it)&&(it=wt?0:W.length-1),it<0&&(it=W.length+it),it>=W.length){if(wt)return-1;it=W.length-1}else if(it<0){if(!wt)return-1;it=0}if(typeof V=="string"&&(V=a.from(V,mt)),a.isBuffer(V))return V.length===0?-1:x(W,V,it,mt,wt);if(typeof V=="number")return V&=255,typeof Uint8Array.prototype.indexOf=="function"?wt?Uint8Array.prototype.indexOf.call(W,V,it):Uint8Array.prototype.lastIndexOf.call(W,V,it):x(W,[V],it,mt,wt);throw new TypeError("val must be string, number or Buffer")}function x(W,V,it,mt,wt){var _t,Ct=1,Ft=W.length,It=V.length;if(mt!==void 0&&((mt=String(mt).toLowerCase())==="ucs2"||mt==="ucs-2"||mt==="utf16le"||mt==="utf-16le")){if(W.length<2||V.length<2)return-1;Ct=2,Ft/=2,It/=2,it/=2}function vt(Q,Y){return Ct===1?Q[Y]:Q.readUInt16BE(Y*Ct)}if(wt){var kt=-1;for(_t=it;_t<Ft;_t++)if(vt(W,_t)===vt(V,kt===-1?0:_t-kt)){if(kt===-1&&(kt=_t),_t-kt+1===It)return kt*Ct}else kt!==-1&&(_t-=_t-kt),kt=-1}else for(it+It>Ft&&(it=Ft-It),_t=it;_t>=0;_t--){for(var gt=!0,ut=0;ut<It;ut++)if(vt(W,_t+ut)!==vt(V,ut)){gt=!1;break}if(gt)return _t}return-1}function S(W,V,it,mt){it=Number(it)||0;var wt=W.length-it;mt?(mt=Number(mt))>wt&&(mt=wt):mt=wt;var _t=V.length;mt>_t/2&&(mt=_t/2);for(var Ct=0;Ct<mt;++Ct){var Ft=parseInt(V.substr(2*Ct,2),16);if(ct(Ft))return Ct;W[it+Ct]=Ft}return Ct}function O(W,V,it,mt){return dt(rt(V,W.length-it),W,it,mt)}function D(W,V,it,mt){return dt(function(wt){for(var _t=[],Ct=0;Ct<wt.length;++Ct)_t.push(255&wt.charCodeAt(Ct));return _t}(V),W,it,mt)}function U(W,V,it,mt){return D(W,V,it,mt)}function z(W,V,it,mt){return dt(ot(V),W,it,mt)}function q(W,V,it,mt){return dt(function(wt,_t){for(var Ct,Ft,It,vt=[],kt=0;kt<wt.length&&!((_t-=2)<0);++kt)Ct=wt.charCodeAt(kt),Ft=Ct>>8,It=Ct%256,vt.push(It),vt.push(Ft);return vt}(V,W.length-it),W,it,mt)}function G(W,V,it){return V===0&&it===W.length?i.fromByteArray(W):i.fromByteArray(W.slice(V,it))}function tt(W,V,it){it=Math.min(W.length,it);for(var mt=[],wt=V;wt<it;){var _t,Ct,Ft,It,vt=W[wt],kt=null,gt=vt>239?4:vt>223?3:vt>191?2:1;if(wt+gt<=it)switch(gt){case 1:vt<128&&(kt=vt);break;case 2:(192&(_t=W[wt+1]))==128&&(It=(31&vt)<<6|63&_t)>127&&(kt=It);break;case 3:_t=W[wt+1],Ct=W[wt+2],(192&_t)==128&&(192&Ct)==128&&(It=(15&vt)<<12|(63&_t)<<6|63&Ct)>2047&&(It<55296||It>57343)&&(kt=It);break;case 4:_t=W[wt+1],Ct=W[wt+2],Ft=W[wt+3],(192&_t)==128&&(192&Ct)==128&&(192&Ft)==128&&(It=(15&vt)<<18|(63&_t)<<12|(63&Ct)<<6|63&Ft)>65535&&It<1114112&&(kt=It)}kt===null?(kt=65533,gt=1):kt>65535&&(kt-=65536,mt.push(kt>>>10&1023|55296),kt=56320|1023&kt),mt.push(kt),wt+=gt}return function(ut){var Q=ut.length;if(Q<=4096)return String.fromCharCode.apply(String,ut);for(var Y="",et=0;et<Q;)Y+=String.fromCharCode.apply(String,ut.slice(et,et+=4096));return Y}(mt)}e.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=function(){try{var W=new Uint8Array(1);return W.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},W.foo()===42}catch{return!1}}(),a.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(W,V,it){return l(W,V,it)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(W,V,it){return function(mt,wt,_t){return c(mt),mt<=0?o(mt):wt!==void 0?typeof _t=="string"?o(mt).fill(wt,_t):o(mt).fill(wt):o(mt)}(W,V,it)},a.allocUnsafe=function(W){return h(W)},a.allocUnsafeSlow=function(W){return h(W)},a.isBuffer=function(W){return W!=null&&W._isBuffer===!0&&W!==a.prototype},a.compare=function(W,V){if($(W,Uint8Array)&&(W=a.from(W,W.offset,W.byteLength)),$(V,Uint8Array)&&(V=a.from(V,V.offset,V.byteLength)),!a.isBuffer(W)||!a.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===V)return 0;for(var it=W.length,mt=V.length,wt=0,_t=Math.min(it,mt);wt<_t;++wt)if(W[wt]!==V[wt]){it=W[wt],mt=V[wt];break}return it<mt?-1:mt<it?1:0},a.isEncoding=function(W){switch(String(W).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(W,V){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(W.length===0)return a.alloc(0);var it;if(V===void 0)for(V=0,it=0;it<W.length;++it)V+=W[it].length;var mt=a.allocUnsafe(V),wt=0;for(it=0;it<W.length;++it){var _t=W[it];if($(_t,Uint8Array)&&(_t=a.from(_t)),!a.isBuffer(_t))throw new TypeError('"list" argument must be an Array of Buffers');_t.copy(mt,wt),wt+=_t.length}return mt},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var W=this.length;if(W%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var V=0;V<W;V+=2)b(this,V,V+1);return this},a.prototype.swap32=function(){var W=this.length;if(W%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var V=0;V<W;V+=4)b(this,V,V+3),b(this,V+1,V+2);return this},a.prototype.swap64=function(){var W=this.length;if(W%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var V=0;V<W;V+=8)b(this,V,V+7),b(this,V+1,V+6),b(this,V+2,V+5),b(this,V+3,V+4);return this},a.prototype.toString=function(){var W=this.length;return W===0?"":arguments.length===0?tt(this,0,W):m.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(W){if(!a.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W||a.compare(this,W)===0},a.prototype.inspect=function(){var W="",V=e.INSPECT_MAX_BYTES;return W=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(W+=" ... "),"<Buffer "+W+">"},a.prototype.compare=function(W,V,it,mt,wt){if($(W,Uint8Array)&&(W=a.from(W,W.offset,W.byteLength)),!a.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof W);if(V===void 0&&(V=0),it===void 0&&(it=W?W.length:0),mt===void 0&&(mt=0),wt===void 0&&(wt=this.length),V<0||it>W.length||mt<0||wt>this.length)throw new RangeError("out of range index");if(mt>=wt&&V>=it)return 0;if(mt>=wt)return-1;if(V>=it)return 1;if(this===W)return 0;for(var _t=(wt>>>=0)-(mt>>>=0),Ct=(it>>>=0)-(V>>>=0),Ft=Math.min(_t,Ct),It=this.slice(mt,wt),vt=W.slice(V,it),kt=0;kt<Ft;++kt)if(It[kt]!==vt[kt]){_t=It[kt],Ct=vt[kt];break}return _t<Ct?-1:Ct<_t?1:0},a.prototype.includes=function(W,V,it){return this.indexOf(W,V,it)!==-1},a.prototype.indexOf=function(W,V,it){return y(this,W,V,it,!0)},a.prototype.lastIndexOf=function(W,V,it){return y(this,W,V,it,!1)},a.prototype.write=function(W,V,it,mt){if(V===void 0)mt="utf8",it=this.length,V=0;else if(it===void 0&&typeof V=="string")mt=V,it=this.length,V=0;else{if(!isFinite(V))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");V>>>=0,isFinite(it)?(it>>>=0,mt===void 0&&(mt="utf8")):(mt=it,it=void 0)}var wt=this.length-V;if((it===void 0||it>wt)&&(it=wt),W.length>0&&(it<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");mt||(mt="utf8");for(var _t=!1;;)switch(mt){case"hex":return S(this,W,V,it);case"utf8":case"utf-8":return O(this,W,V,it);case"ascii":return D(this,W,V,it);case"latin1":case"binary":return U(this,W,V,it);case"base64":return z(this,W,V,it);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,W,V,it);default:if(_t)throw new TypeError("Unknown encoding: "+mt);mt=(""+mt).toLowerCase(),_t=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(W,V,it){var mt="";it=Math.min(W.length,it);for(var wt=V;wt<it;++wt)mt+=String.fromCharCode(127&W[wt]);return mt}function B(W,V,it){var mt="";it=Math.min(W.length,it);for(var wt=V;wt<it;++wt)mt+=String.fromCharCode(W[wt]);return mt}function N(W,V,it){var mt=W.length;(!V||V<0)&&(V=0),(!it||it<0||it>mt)&&(it=mt);for(var wt="",_t=V;_t<it;++_t)wt+=H(W[_t]);return wt}function Z(W,V,it){for(var mt=W.slice(V,it),wt="",_t=0;_t<mt.length;_t+=2)wt+=String.fromCharCode(mt[_t]+256*mt[_t+1]);return wt}function w(W,V,it){if(W%1!=0||W<0)throw new RangeError("offset is not uint");if(W+V>it)throw new RangeError("Trying to access beyond buffer length")}function C(W,V,it,mt,wt,_t){if(!a.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>wt||V<_t)throw new RangeError('"value" argument is out of bounds');if(it+mt>W.length)throw new RangeError("Index out of range")}function k(W,V,it,mt,wt,_t){if(it+mt>W.length)throw new RangeError("Index out of range");if(it<0)throw new RangeError("Index out of range")}function T(W,V,it,mt,wt){return V=+V,it>>>=0,wt||k(W,0,it,4),s.write(W,V,it,mt,23,4),it+4}function R(W,V,it,mt,wt){return V=+V,it>>>=0,wt||k(W,0,it,8),s.write(W,V,it,mt,52,8),it+8}a.prototype.slice=function(W,V){var it=this.length;(W=~~W)<0?(W+=it)<0&&(W=0):W>it&&(W=it),(V=V===void 0?it:~~V)<0?(V+=it)<0&&(V=0):V>it&&(V=it),V<W&&(V=W);var mt=this.subarray(W,V);return mt.__proto__=a.prototype,mt},a.prototype.readUIntLE=function(W,V,it){W>>>=0,V>>>=0,it||w(W,V,this.length);for(var mt=this[W],wt=1,_t=0;++_t<V&&(wt*=256);)mt+=this[W+_t]*wt;return mt},a.prototype.readUIntBE=function(W,V,it){W>>>=0,V>>>=0,it||w(W,V,this.length);for(var mt=this[W+--V],wt=1;V>0&&(wt*=256);)mt+=this[W+--V]*wt;return mt},a.prototype.readUInt8=function(W,V){return W>>>=0,V||w(W,1,this.length),this[W]},a.prototype.readUInt16LE=function(W,V){return W>>>=0,V||w(W,2,this.length),this[W]|this[W+1]<<8},a.prototype.readUInt16BE=function(W,V){return W>>>=0,V||w(W,2,this.length),this[W]<<8|this[W+1]},a.prototype.readUInt32LE=function(W,V){return W>>>=0,V||w(W,4,this.length),(this[W]|this[W+1]<<8|this[W+2]<<16)+16777216*this[W+3]},a.prototype.readUInt32BE=function(W,V){return W>>>=0,V||w(W,4,this.length),16777216*this[W]+(this[W+1]<<16|this[W+2]<<8|this[W+3])},a.prototype.readIntLE=function(W,V,it){W>>>=0,V>>>=0,it||w(W,V,this.length);for(var mt=this[W],wt=1,_t=0;++_t<V&&(wt*=256);)mt+=this[W+_t]*wt;return mt>=(wt*=128)&&(mt-=Math.pow(2,8*V)),mt},a.prototype.readIntBE=function(W,V,it){W>>>=0,V>>>=0,it||w(W,V,this.length);for(var mt=V,wt=1,_t=this[W+--mt];mt>0&&(wt*=256);)_t+=this[W+--mt]*wt;return _t>=(wt*=128)&&(_t-=Math.pow(2,8*V)),_t},a.prototype.readInt8=function(W,V){return W>>>=0,V||w(W,1,this.length),128&this[W]?-1*(255-this[W]+1):this[W]},a.prototype.readInt16LE=function(W,V){W>>>=0,V||w(W,2,this.length);var it=this[W]|this[W+1]<<8;return 32768&it?4294901760|it:it},a.prototype.readInt16BE=function(W,V){W>>>=0,V||w(W,2,this.length);var it=this[W+1]|this[W]<<8;return 32768&it?4294901760|it:it},a.prototype.readInt32LE=function(W,V){return W>>>=0,V||w(W,4,this.length),this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24},a.prototype.readInt32BE=function(W,V){return W>>>=0,V||w(W,4,this.length),this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]},a.prototype.readFloatLE=function(W,V){return W>>>=0,V||w(W,4,this.length),s.read(this,W,!0,23,4)},a.prototype.readFloatBE=function(W,V){return W>>>=0,V||w(W,4,this.length),s.read(this,W,!1,23,4)},a.prototype.readDoubleLE=function(W,V){return W>>>=0,V||w(W,8,this.length),s.read(this,W,!0,52,8)},a.prototype.readDoubleBE=function(W,V){return W>>>=0,V||w(W,8,this.length),s.read(this,W,!1,52,8)},a.prototype.writeUIntLE=function(W,V,it,mt){W=+W,V>>>=0,it>>>=0,mt||C(this,W,V,it,Math.pow(2,8*it)-1,0);var wt=1,_t=0;for(this[V]=255&W;++_t<it&&(wt*=256);)this[V+_t]=W/wt&255;return V+it},a.prototype.writeUIntBE=function(W,V,it,mt){W=+W,V>>>=0,it>>>=0,mt||C(this,W,V,it,Math.pow(2,8*it)-1,0);var wt=it-1,_t=1;for(this[V+wt]=255&W;--wt>=0&&(_t*=256);)this[V+wt]=W/_t&255;return V+it},a.prototype.writeUInt8=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,1,255,0),this[V]=255&W,V+1},a.prototype.writeUInt16LE=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,2,65535,0),this[V]=255&W,this[V+1]=W>>>8,V+2},a.prototype.writeUInt16BE=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,2,65535,0),this[V]=W>>>8,this[V+1]=255&W,V+2},a.prototype.writeUInt32LE=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,4,4294967295,0),this[V+3]=W>>>24,this[V+2]=W>>>16,this[V+1]=W>>>8,this[V]=255&W,V+4},a.prototype.writeUInt32BE=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,4,4294967295,0),this[V]=W>>>24,this[V+1]=W>>>16,this[V+2]=W>>>8,this[V+3]=255&W,V+4},a.prototype.writeIntLE=function(W,V,it,mt){if(W=+W,V>>>=0,!mt){var wt=Math.pow(2,8*it-1);C(this,W,V,it,wt-1,-wt)}var _t=0,Ct=1,Ft=0;for(this[V]=255&W;++_t<it&&(Ct*=256);)W<0&&Ft===0&&this[V+_t-1]!==0&&(Ft=1),this[V+_t]=(W/Ct>>0)-Ft&255;return V+it},a.prototype.writeIntBE=function(W,V,it,mt){if(W=+W,V>>>=0,!mt){var wt=Math.pow(2,8*it-1);C(this,W,V,it,wt-1,-wt)}var _t=it-1,Ct=1,Ft=0;for(this[V+_t]=255&W;--_t>=0&&(Ct*=256);)W<0&&Ft===0&&this[V+_t+1]!==0&&(Ft=1),this[V+_t]=(W/Ct>>0)-Ft&255;return V+it},a.prototype.writeInt8=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,1,127,-128),W<0&&(W=255+W+1),this[V]=255&W,V+1},a.prototype.writeInt16LE=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,2,32767,-32768),this[V]=255&W,this[V+1]=W>>>8,V+2},a.prototype.writeInt16BE=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,2,32767,-32768),this[V]=W>>>8,this[V+1]=255&W,V+2},a.prototype.writeInt32LE=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,4,2147483647,-2147483648),this[V]=255&W,this[V+1]=W>>>8,this[V+2]=W>>>16,this[V+3]=W>>>24,V+4},a.prototype.writeInt32BE=function(W,V,it){return W=+W,V>>>=0,it||C(this,W,V,4,2147483647,-2147483648),W<0&&(W=4294967295+W+1),this[V]=W>>>24,this[V+1]=W>>>16,this[V+2]=W>>>8,this[V+3]=255&W,V+4},a.prototype.writeFloatLE=function(W,V,it){return T(this,W,V,!0,it)},a.prototype.writeFloatBE=function(W,V,it){return T(this,W,V,!1,it)},a.prototype.writeDoubleLE=function(W,V,it){return R(this,W,V,!0,it)},a.prototype.writeDoubleBE=function(W,V,it){return R(this,W,V,!1,it)},a.prototype.copy=function(W,V,it,mt){if(!a.isBuffer(W))throw new TypeError("argument should be a Buffer");if(it||(it=0),mt||mt===0||(mt=this.length),V>=W.length&&(V=W.length),V||(V=0),mt>0&&mt<it&&(mt=it),mt===it||W.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(it<0||it>=this.length)throw new RangeError("Index out of range");if(mt<0)throw new RangeError("sourceEnd out of bounds");mt>this.length&&(mt=this.length),W.length-V<mt-it&&(mt=W.length-V+it);var wt=mt-it;if(this===W&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(V,it,mt);else if(this===W&&it<V&&V<mt)for(var _t=wt-1;_t>=0;--_t)W[_t+V]=this[_t+it];else Uint8Array.prototype.set.call(W,this.subarray(it,mt),V);return wt},a.prototype.fill=function(W,V,it,mt){if(typeof W=="string"){if(typeof V=="string"?(mt=V,V=0,it=this.length):typeof it=="string"&&(mt=it,it=this.length),mt!==void 0&&typeof mt!="string")throw new TypeError("encoding must be a string");if(typeof mt=="string"&&!a.isEncoding(mt))throw new TypeError("Unknown encoding: "+mt);if(W.length===1){var wt=W.charCodeAt(0);(mt==="utf8"&&wt<128||mt==="latin1")&&(W=wt)}}else typeof W=="number"&&(W&=255);if(V<0||this.length<V||this.length<it)throw new RangeError("Out of range index");if(it<=V)return this;var _t;if(V>>>=0,it=it===void 0?this.length:it>>>0,W||(W=0),typeof W=="number")for(_t=V;_t<it;++_t)this[_t]=W;else{var Ct=a.isBuffer(W)?W:a.from(W,mt),Ft=Ct.length;if(Ft===0)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(_t=0;_t<it-V;++_t)this[_t+V]=Ct[_t%Ft]}return this};var F=/[^+/0-9A-Za-z-_]/g;function H(W){return W<16?"0"+W.toString(16):W.toString(16)}function rt(W,V){var it;V=V||1/0;for(var mt=W.length,wt=null,_t=[],Ct=0;Ct<mt;++Ct){if((it=W.charCodeAt(Ct))>55295&&it<57344){if(!wt){if(it>56319){(V-=3)>-1&&_t.push(239,191,189);continue}if(Ct+1===mt){(V-=3)>-1&&_t.push(239,191,189);continue}wt=it;continue}if(it<56320){(V-=3)>-1&&_t.push(239,191,189),wt=it;continue}it=65536+(wt-55296<<10|it-56320)}else wt&&(V-=3)>-1&&_t.push(239,191,189);if(wt=null,it<128){if((V-=1)<0)break;_t.push(it)}else if(it<2048){if((V-=2)<0)break;_t.push(it>>6|192,63&it|128)}else if(it<65536){if((V-=3)<0)break;_t.push(it>>12|224,it>>6&63|128,63&it|128)}else{if(!(it<1114112))throw new Error("Invalid code point");if((V-=4)<0)break;_t.push(it>>18|240,it>>12&63|128,it>>6&63|128,63&it|128)}}return _t}function ot(W){return i.toByteArray(function(V){if((V=(V=V.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;V.length%4!=0;)V+="=";return V}(W))}function dt(W,V,it,mt){for(var wt=0;wt<mt&&!(wt+it>=V.length||wt>=W.length);++wt)V[wt+it]=W[wt];return wt}function $(W,V){return W instanceof V||W!=null&&W.constructor!=null&&W.constructor.name!=null&&W.constructor.name===V.name}function ct(W){return W!=W}}).call(this)}).call(this,n("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=n("stream").Transform,s=n("string_decoder").StringDecoder;function o(a){i.call(this),this.hashMode=typeof a=="string",this.hashMode?this[a]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n("inherits")(o,i),o.prototype.update=function(a,l,c){typeof a=="string"&&(a=r.from(a,l));var h=this._update(a);return this.hashMode?this:(c&&(h=this._toString(h,c)),h)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(a,l,c){var h;try{this.hashMode?this._update(a):this.push(this._update(a))}catch(d){h=d}finally{c(h)}},o.prototype._flush=function(a){var l;try{this.push(this.__final())}catch(c){l=c}a(l)},o.prototype._finalOrDigest=function(a){var l=this.__final()||r.alloc(0);return a&&(l=this._toString(l,a,!0)),l},o.prototype._toString=function(a,l,c){if(this._decoder||(this._decoder=new s(l),this._encoding=l),this._encoding!==l)throw new Error("can't switch encodings");var h=this._decoder.write(a);return c&&(h+=this._decoder.end()),h},t.exports=o},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(n,t,e){"use strict";var r=n("../internals/is-callable"),i=n("../internals/try-to-string"),s=TypeError;t.exports=function(o){if(r(o))return o;throw new s(i(o)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(n,t,e){"use strict";var r=n("../internals/is-constructor"),i=n("../internals/try-to-string"),s=TypeError;t.exports=function(o){if(r(o))return o;throw new s(i(o)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(n,t,e){"use strict";var r=n("../internals/is-callable"),i=String,s=TypeError;t.exports=function(o){if(typeof o=="object"||r(o))return o;throw new s("Can't set "+i(o)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(n,t,e){"use strict";var r=n("../internals/well-known-symbol"),i=n("../internals/object-create"),s=n("../internals/object-define-property").f,o=r("unscopables"),a=Array.prototype;a[o]===void 0&&s(a,o,{configurable:!0,value:i(null)}),t.exports=function(l){a[o][l]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(n,t,e){"use strict";var r=n("../internals/object-is-prototype-of"),i=TypeError;t.exports=function(s,o){if(r(o,s))return s;throw new i("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(n,t,e){"use strict";var r=n("../internals/is-object"),i=String,s=TypeError;t.exports=function(o){if(r(o))return o;throw new s(i(o)+" is not an object")}},{"../internals/is-object":289}],228:[function(n,t,e){"use strict";var r=n("../internals/to-indexed-object"),i=n("../internals/to-absolute-index"),s=n("../internals/length-of-array-like"),o=function(a){return function(l,c,h){var d,p=r(l),g=s(p),m=i(h,g);if(a&&c!=c){for(;g>m;)if((d=p[m++])!=d)return!0}else for(;g>m;m++)if((a||m in p)&&p[m]===c)return a||m||0;return!a&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(n,t,e){"use strict";var r=n("../internals/function-bind-context"),i=n("../internals/function-uncurry-this"),s=n("../internals/indexed-object"),o=n("../internals/to-object"),a=n("../internals/length-of-array-like"),l=n("../internals/array-species-create"),c=i([].push),h=function(d){var p=d===1,g=d===2,m=d===3,b=d===4,y=d===6,x=d===7,S=d===5||y;return function(O,D,U,z){for(var q,G,tt=o(O),K=s(tt),B=r(D,U),N=a(K),Z=0,w=z||l,C=p?w(O,N):g||x?w(O,0):void 0;N>Z;Z++)if((S||Z in K)&&(G=B(q=K[Z],Z,tt),d))if(p)C[Z]=G;else if(G)switch(d){case 3:return!0;case 5:return q;case 6:return Z;case 2:c(C,q)}else switch(d){case 4:return!1;case 7:c(C,q)}return y?-1:m||b?b:C}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(n,t,e){"use strict";var r=n("../internals/to-absolute-index"),i=n("../internals/length-of-array-like"),s=n("../internals/create-property"),o=Array,a=Math.max;t.exports=function(l,c,h){for(var d=i(l),p=r(c,d),g=r(h===void 0?d:h,d),m=o(a(g-p,0)),b=0;p<g;p++,b++)s(m,b,l[p]);return m.length=b,m}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this");t.exports=r([].slice)},{"../internals/function-uncurry-this":268}],232:[function(n,t,e){"use strict";var r=n("../internals/is-array"),i=n("../internals/is-constructor"),s=n("../internals/is-object"),o=n("../internals/well-known-symbol")("species"),a=Array;t.exports=function(l){var c;return r(l)&&(c=l.constructor,(i(c)&&(c===a||r(c.prototype))||s(c)&&(c=c[o])===null)&&(c=void 0)),c===void 0?a:c}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(n,t,e){"use strict";var r=n("../internals/array-species-constructor");t.exports=function(i,s){return new(r(i))(s===0?0:s)}},{"../internals/array-species-constructor":232}],234:[function(n,t,e){"use strict";var r=n("../internals/well-known-symbol")("iterator"),i=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){i=!0}};o[r]=function(){return this},Array.from(o,function(){throw 2})}catch{}t.exports=function(a,l){try{if(!l&&!i)return!1}catch{return!1}var c=!1;try{var h={};h[r]=function(){return{next:function(){return{done:c=!0}}}},a(h)}catch{}return c}},{"../internals/well-known-symbol":357}],235:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=r({}.toString),s=r("".slice);t.exports=function(o){return s(i(o),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(n,t,e){"use strict";var r=n("../internals/to-string-tag-support"),i=n("../internals/is-callable"),s=n("../internals/classof-raw"),o=n("../internals/well-known-symbol")("toStringTag"),a=Object,l=s(function(){return arguments}())==="Arguments";t.exports=r?s:function(c){var h,d,p;return c===void 0?"Undefined":c===null?"Null":typeof(d=function(g,m){try{return g[m]}catch{}}(h=a(c),o))=="string"?d:l?s(h):(p=s(h))==="Object"&&i(h.callee)?"Arguments":p}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(n,t,e){"use strict";var r=n("../internals/has-own-property"),i=n("../internals/own-keys"),s=n("../internals/object-get-own-property-descriptor"),o=n("../internals/object-define-property");t.exports=function(a,l,c){for(var h=i(l),d=o.f,p=s.f,g=0;g<h.length;g++){var m=h[g];r(a,m)||c&&r(c,m)||d(a,m,p(l,m))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(n,t,e){"use strict";var r=n("../internals/well-known-symbol")("match");t.exports=function(i){var s=/./;try{"/./"[i](s)}catch{try{return s[r]=!1,"/./"[i](s)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(n,t,e){"use strict";var r=n("../internals/fails");t.exports=!r(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})},{"../internals/fails":260}],240:[function(n,t,e){"use strict";t.exports=function(r,i){return{value:r,done:i}}},{}],241:[function(n,t,e){"use strict";var r=n("../internals/descriptors"),i=n("../internals/object-define-property"),s=n("../internals/create-property-descriptor");t.exports=r?function(o,a,l){return i.f(o,a,s(1,l))}:function(o,a,l){return o[a]=l,o}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(n,t,e){"use strict";t.exports=function(r,i){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:i}}},{}],243:[function(n,t,e){"use strict";var r=n("../internals/to-property-key"),i=n("../internals/object-define-property"),s=n("../internals/create-property-descriptor");t.exports=function(o,a,l){var c=r(a);c in o?i.f(o,c,s(0,l)):o[c]=l}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(n,t,e){"use strict";var r=n("../internals/make-built-in"),i=n("../internals/object-define-property");t.exports=function(s,o,a){return a.get&&r(a.get,o,{getter:!0}),a.set&&r(a.set,o,{setter:!0}),i.f(s,o,a)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(n,t,e){"use strict";var r=n("../internals/is-callable"),i=n("../internals/object-define-property"),s=n("../internals/make-built-in"),o=n("../internals/define-global-property");t.exports=function(a,l,c,h){h||(h={});var d=h.enumerable,p=h.name!==void 0?h.name:l;if(r(c)&&s(c,p,h),h.global)d?a[l]=c:o(l,c);else{try{h.unsafe?a[l]&&(d=!0):delete a[l]}catch{}d?a[l]=c:i.f(a,l,{value:c,enumerable:!1,configurable:!h.nonConfigurable,writable:!h.nonWritable})}return a}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(n,t,e){"use strict";var r=n("../internals/global"),i=Object.defineProperty;t.exports=function(s,o){try{i(r,s,{value:o,configurable:!0,writable:!0})}catch{r[s]=o}return o}},{"../internals/global":274}],247:[function(n,t,e){"use strict";var r=n("../internals/fails");t.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(n,t,e){"use strict";var r=typeof document=="object"&&document.all,i=r===void 0&&r!==void 0;t.exports={all:r,IS_HTMLDDA:i}},{}],249:[function(n,t,e){"use strict";var r=n("../internals/global"),i=n("../internals/is-object"),s=r.document,o=i(s)&&i(s.createElement);t.exports=function(a){return o?s.createElement(a):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(n,t,e){"use strict";var r=n("../internals/engine-is-deno"),i=n("../internals/engine-is-node");t.exports=!r&&!i&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(n,t,e){"use strict";t.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(n,t,e){"use strict";var r=n("../internals/engine-user-agent");t.exports=/ipad|iphone|ipod/i.test(r)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(n,t,e){"use strict";var r=n("../internals/engine-user-agent");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},{"../internals/engine-user-agent":256}],254:[function(n,t,e){"use strict";var r=n("../internals/global"),i=n("../internals/classof-raw");t.exports=i(r.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(n,t,e){"use strict";var r=n("../internals/engine-user-agent");t.exports=/web0s(?!.*chrome)/i.test(r)},{"../internals/engine-user-agent":256}],256:[function(n,t,e){"use strict";t.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(n,t,e){"use strict";var r,i,s=n("../internals/global"),o=n("../internals/engine-user-agent"),a=s.process,l=s.Deno,c=a&&a.versions||l&&l.version,h=c&&c.v8;h&&(i=(r=h.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=+r[1]),t.exports=i},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(n,t,e){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(n,t,e){"use strict";var r=n("../internals/global"),i=n("../internals/object-get-own-property-descriptor").f,s=n("../internals/create-non-enumerable-property"),o=n("../internals/define-built-in"),a=n("../internals/define-global-property"),l=n("../internals/copy-constructor-properties"),c=n("../internals/is-forced");t.exports=function(h,d){var p,g,m,b,y,x=h.target,S=h.global,O=h.stat;if(p=S?r:O?r[x]||a(x,{}):(r[x]||{}).prototype)for(g in d){if(b=d[g],m=h.dontCallGetSet?(y=i(p,g))&&y.value:p[g],!c(S?g:x+(O?".":"#")+g,h.forced)&&m!==void 0){if(typeof b==typeof m)continue;l(b,m)}(h.sham||m&&m.sham)&&s(b,"sham",!0),o(p,g,b,h)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(n,t,e){"use strict";t.exports=function(r){try{return!!r()}catch{return!0}}},{}],261:[function(n,t,e){"use strict";var r=n("../internals/function-bind-native"),i=Function.prototype,s=i.apply,o=i.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(r?o.bind(s):function(){return o.apply(s,arguments)})},{"../internals/function-bind-native":263}],262:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this-clause"),i=n("../internals/a-callable"),s=n("../internals/function-bind-native"),o=r(r.bind);t.exports=function(a,l){return i(a),l===void 0?a:s?o(a,l):function(){return a.apply(l,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(n,t,e){"use strict";var r=n("../internals/fails");t.exports=!r(function(){var i=function(){}.bind();return typeof i!="function"||i.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(n,t,e){"use strict";var r=n("../internals/function-bind-native"),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},{"../internals/function-bind-native":263}],265:[function(n,t,e){"use strict";var r=n("../internals/descriptors"),i=n("../internals/has-own-property"),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),l=a&&function(){}.name==="something",c=a&&(!r||r&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=n("../internals/a-callable");t.exports=function(s,o,a){try{return r(i(Object.getOwnPropertyDescriptor(s,o)[a]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(n,t,e){"use strict";var r=n("../internals/classof-raw"),i=n("../internals/function-uncurry-this");t.exports=function(s){if(r(s)==="Function")return i(s)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(n,t,e){"use strict";var r=n("../internals/function-bind-native"),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);t.exports=r?o:function(a){return function(){return s.apply(a,arguments)}}},{"../internals/function-bind-native":263}],269:[function(n,t,e){"use strict";var r=n("../internals/global"),i=n("../internals/is-callable"),s=function(o){return i(o)?o:void 0};t.exports=function(o,a){return arguments.length<2?s(r[o]):r[o]&&r[o][a]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(n,t,e){"use strict";var r=n("../internals/classof"),i=n("../internals/get-method"),s=n("../internals/is-null-or-undefined"),o=n("../internals/iterators"),a=n("../internals/well-known-symbol")("iterator");t.exports=function(l){if(!s(l))return i(l,a)||i(l,"@@iterator")||o[r(l)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(n,t,e){"use strict";var r=n("../internals/function-call"),i=n("../internals/a-callable"),s=n("../internals/an-object"),o=n("../internals/try-to-string"),a=n("../internals/get-iterator-method"),l=TypeError;t.exports=function(c,h){var d=arguments.length<2?a(c):h;if(i(d))return s(r(d,c));throw new l(o(c)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=n("../internals/is-array"),s=n("../internals/is-callable"),o=n("../internals/classof-raw"),a=n("../internals/to-string"),l=r([].push);t.exports=function(c){if(s(c))return c;if(i(c)){for(var h=c.length,d=[],p=0;p<h;p++){var g=c[p];typeof g=="string"?l(d,g):typeof g!="number"&&o(g)!=="Number"&&o(g)!=="String"||l(d,a(g))}var m=d.length,b=!0;return function(y,x){if(b)return b=!1,x;if(i(this))return x;for(var S=0;S<m;S++)if(d[S]===y)return x}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(n,t,e){"use strict";var r=n("../internals/a-callable"),i=n("../internals/is-null-or-undefined");t.exports=function(s,o){var a=s[o];return i(a)?void 0:r(a)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(n,t,e){(function(r){(function(){"use strict";var i=function(s){return s&&s.Math===Math&&s};t.exports=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof r=="object"&&r)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=n("../internals/to-object"),s=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(o,a){return s(i(o),a)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(n,t,e){"use strict";t.exports={}},{}],277:[function(n,t,e){"use strict";t.exports=function(r,i){try{arguments.length===1?console.error(r):console.error(r,i)}catch{}}},{}],278:[function(n,t,e){"use strict";var r=n("../internals/get-built-in");t.exports=r("document","documentElement")},{"../internals/get-built-in":269}],279:[function(n,t,e){"use strict";var r=n("../internals/descriptors"),i=n("../internals/fails"),s=n("../internals/document-create-element");t.exports=!r&&!i(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=n("../internals/fails"),s=n("../internals/classof-raw"),o=Object,a=r("".split);t.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(l){return s(l)==="String"?a(l,""):o(l)}:o},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=n("../internals/is-callable"),s=n("../internals/shared-store"),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(a){return o(a)}),t.exports=s.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(n,t,e){"use strict";var r,i,s,o=n("../internals/weak-map-basic-detection"),a=n("../internals/global"),l=n("../internals/is-object"),c=n("../internals/create-non-enumerable-property"),h=n("../internals/has-own-property"),d=n("../internals/shared-store"),p=n("../internals/shared-key"),g=n("../internals/hidden-keys"),m=a.TypeError,b=a.WeakMap;if(o||d.state){var y=d.state||(d.state=new b);y.get=y.get,y.has=y.has,y.set=y.set,r=function(S,O){if(y.has(S))throw new m("Object already initialized");return O.facade=S,y.set(S,O),O},i=function(S){return y.get(S)||{}},s=function(S){return y.has(S)}}else{var x=p("state");g[x]=!0,r=function(S,O){if(h(S,x))throw new m("Object already initialized");return O.facade=S,c(S,x,O),O},i=function(S){return h(S,x)?S[x]:{}},s=function(S){return h(S,x)}}t.exports={set:r,get:i,has:s,enforce:function(S){return s(S)?i(S):r(S,{})},getterFor:function(S){return function(O){var D;if(!l(O)||(D=i(O)).type!==S)throw new m("Incompatible receiver, "+S+" required");return D}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(n,t,e){"use strict";var r=n("../internals/well-known-symbol"),i=n("../internals/iterators"),s=r("iterator"),o=Array.prototype;t.exports=function(a){return a!==void 0&&(i.Array===a||o[s]===a)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(n,t,e){"use strict";var r=n("../internals/classof-raw");t.exports=Array.isArray||function(i){return r(i)==="Array"}},{"../internals/classof-raw":235}],285:[function(n,t,e){"use strict";var r=n("../internals/document-all"),i=r.all;t.exports=r.IS_HTMLDDA?function(s){return typeof s=="function"||s===i}:function(s){return typeof s=="function"}},{"../internals/document-all":248}],286:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=n("../internals/fails"),s=n("../internals/is-callable"),o=n("../internals/classof"),a=n("../internals/get-built-in"),l=n("../internals/inspect-source"),c=function(){},h=[],d=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,g=r(p.exec),m=!p.test(c),b=function(x){if(!s(x))return!1;try{return d(c,h,x),!0}catch{return!1}},y=function(x){if(!s(x))return!1;switch(o(x)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!g(p,l(x))}catch{return!0}};y.sham=!0,t.exports=!d||i(function(){var x;return b(b.call)||!b(Object)||!b(function(){x=!0})||x})?y:b},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(n,t,e){"use strict";var r=n("../internals/fails"),i=n("../internals/is-callable"),s=/#|\.prototype\./,o=function(d,p){var g=l[a(d)];return g===h||g!==c&&(i(p)?r(p):!!p)},a=o.normalize=function(d){return String(d).replace(s,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",h=o.POLYFILL="P";t.exports=o},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(n,t,e){"use strict";t.exports=function(r){return r==null}},{}],289:[function(n,t,e){"use strict";var r=n("../internals/is-callable"),i=n("../internals/document-all"),s=i.all;t.exports=i.IS_HTMLDDA?function(o){return typeof o=="object"?o!==null:r(o)||o===s}:function(o){return typeof o=="object"?o!==null:r(o)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(n,t,e){"use strict";t.exports=!1},{}],291:[function(n,t,e){"use strict";var r=n("../internals/is-object"),i=n("../internals/classof-raw"),s=n("../internals/well-known-symbol")("match");t.exports=function(o){var a;return r(o)&&((a=o[s])!==void 0?!!a:i(o)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(n,t,e){"use strict";var r=n("../internals/get-built-in"),i=n("../internals/is-callable"),s=n("../internals/object-is-prototype-of"),o=n("../internals/use-symbol-as-uid"),a=Object;t.exports=o?function(l){return typeof l=="symbol"}:function(l){var c=r("Symbol");return i(c)&&s(c.prototype,a(l))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(n,t,e){"use strict";var r=n("../internals/function-bind-context"),i=n("../internals/function-call"),s=n("../internals/an-object"),o=n("../internals/try-to-string"),a=n("../internals/is-array-iterator-method"),l=n("../internals/length-of-array-like"),c=n("../internals/object-is-prototype-of"),h=n("../internals/get-iterator"),d=n("../internals/get-iterator-method"),p=n("../internals/iterator-close"),g=TypeError,m=function(y,x){this.stopped=y,this.result=x},b=m.prototype;t.exports=function(y,x,S){var O,D,U,z,q,G,tt,K=S&&S.that,B=!(!S||!S.AS_ENTRIES),N=!(!S||!S.IS_RECORD),Z=!(!S||!S.IS_ITERATOR),w=!(!S||!S.INTERRUPTED),C=r(x,K),k=function(R){return O&&p(O,"normal",R),new m(!0,R)},T=function(R){return B?(s(R),w?C(R[0],R[1],k):C(R[0],R[1])):w?C(R,k):C(R)};if(N)O=y.iterator;else if(Z)O=y;else{if(!(D=d(y)))throw new g(o(y)+" is not iterable");if(a(D)){for(U=0,z=l(y);z>U;U++)if((q=T(y[U]))&&c(b,q))return q;return new m(!1)}O=h(y,D)}for(G=N?y.next:O.next;!(tt=i(G,O)).done;){try{q=T(tt.value)}catch(R){p(O,"throw",R)}if(typeof q=="object"&&q&&c(b,q))return q}return new m(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(n,t,e){"use strict";var r=n("../internals/function-call"),i=n("../internals/an-object"),s=n("../internals/get-method");t.exports=function(o,a,l){var c,h;i(o);try{if(!(c=s(o,"return"))){if(a==="throw")throw l;return l}c=r(c,o)}catch(d){h=!0,c=d}if(a==="throw")throw l;if(h)throw c;return i(c),l}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(n,t,e){"use strict";var r=n("../internals/iterators-core").IteratorPrototype,i=n("../internals/object-create"),s=n("../internals/create-property-descriptor"),o=n("../internals/set-to-string-tag"),a=n("../internals/iterators"),l=function(){return this};t.exports=function(c,h,d,p){var g=h+" Iterator";return c.prototype=i(r,{next:s(+!p,d)}),o(c,g,!1,!0),a[g]=l,c}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/function-call"),s=n("../internals/is-pure"),o=n("../internals/function-name"),a=n("../internals/is-callable"),l=n("../internals/iterator-create-constructor"),c=n("../internals/object-get-prototype-of"),h=n("../internals/object-set-prototype-of"),d=n("../internals/set-to-string-tag"),p=n("../internals/create-non-enumerable-property"),g=n("../internals/define-built-in"),m=n("../internals/well-known-symbol"),b=n("../internals/iterators"),y=n("../internals/iterators-core"),x=o.PROPER,S=o.CONFIGURABLE,O=y.IteratorPrototype,D=y.BUGGY_SAFARI_ITERATORS,U=m("iterator"),z=function(){return this};t.exports=function(q,G,tt,K,B,N,Z){l(tt,G,K);var w,C,k,T=function($){if($===B&&ot)return ot;if(!D&&$&&$ in H)return H[$];switch($){case"keys":case"values":case"entries":return function(){return new tt(this,$)}}return function(){return new tt(this)}},R=G+" Iterator",F=!1,H=q.prototype,rt=H[U]||H["@@iterator"]||B&&H[B],ot=!D&&rt||T(B),dt=G==="Array"&&H.entries||rt;if(dt&&(w=c(dt.call(new q)))!==Object.prototype&&w.next&&(s||c(w)===O||(h?h(w,O):a(w[U])||g(w,U,z)),d(w,R,!0,!0),s&&(b[R]=z)),x&&B==="values"&&rt&&rt.name!=="values"&&(!s&&S?p(H,"name","values"):(F=!0,ot=function(){return i(rt,this)})),B)if(C={values:T("values"),keys:N?ot:T("keys"),entries:T("entries")},Z)for(k in C)(D||F||!(k in H))&&g(H,k,C[k]);else r({target:G,proto:!0,forced:D||F},C);return s&&!Z||H[U]===ot||g(H,U,ot,{name:B}),b[G]=ot,C}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(n,t,e){"use strict";var r,i,s,o=n("../internals/fails"),a=n("../internals/is-callable"),l=n("../internals/is-object"),c=n("../internals/object-create"),h=n("../internals/object-get-prototype-of"),d=n("../internals/define-built-in"),p=n("../internals/well-known-symbol"),g=n("../internals/is-pure"),m=p("iterator"),b=!1;[].keys&&("next"in(s=[].keys())?(i=h(h(s)))!==Object.prototype&&(r=i):b=!0),!l(r)||o(function(){var y={};return r[m].call(y)!==y})?r={}:g&&(r=c(r)),a(r[m])||d(r,m,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:b}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(n,t,e){arguments[4][276][0].apply(e,arguments)},{dup:276}],299:[function(n,t,e){"use strict";var r=n("../internals/to-length");t.exports=function(i){return r(i.length)}},{"../internals/to-length":343}],300:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=n("../internals/fails"),s=n("../internals/is-callable"),o=n("../internals/has-own-property"),a=n("../internals/descriptors"),l=n("../internals/function-name").CONFIGURABLE,c=n("../internals/inspect-source"),h=n("../internals/internal-state"),d=h.enforce,p=h.get,g=String,m=Object.defineProperty,b=r("".slice),y=r("".replace),x=r([].join),S=a&&!i(function(){return m(function(){},"length",{value:8}).length!==8}),O=String(String).split("String"),D=t.exports=function(U,z,q){b(g(z),0,7)==="Symbol("&&(z="["+y(g(z),/^Symbol\(([^)]*)\)/,"$1")+"]"),q&&q.getter&&(z="get "+z),q&&q.setter&&(z="set "+z),(!o(U,"name")||l&&U.name!==z)&&(a?m(U,"name",{value:z,configurable:!0}):U.name=z),S&&q&&o(q,"arity")&&U.length!==q.arity&&m(U,"length",{value:q.arity});try{q&&o(q,"constructor")&&q.constructor?a&&m(U,"prototype",{writable:!1}):U.prototype&&(U.prototype=void 0)}catch{}var G=d(U);return o(G,"source")||(G.source=x(O,typeof z=="string"?z:"")),U};Function.prototype.toString=D(function(){return s(this)&&p(this).source||c(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(n,t,e){"use strict";var r=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(s){var o=+s;return(o>0?i:r)(o)}},{}],302:[function(n,t,e){"use strict";var r,i,s,o,a,l=n("../internals/global"),c=n("../internals/function-bind-context"),h=n("../internals/object-get-own-property-descriptor").f,d=n("../internals/task").set,p=n("../internals/queue"),g=n("../internals/engine-is-ios"),m=n("../internals/engine-is-ios-pebble"),b=n("../internals/engine-is-webos-webkit"),y=n("../internals/engine-is-node"),x=l.MutationObserver||l.WebKitMutationObserver,S=l.document,O=l.process,D=l.Promise,U=h(l,"queueMicrotask"),z=U&&U.value;if(!z){var q=new p,G=function(){var tt,K;for(y&&(tt=O.domain)&&tt.exit();K=q.get();)try{K()}catch(B){throw q.head&&r(),B}tt&&tt.enter()};g||y||b||!x||!S?!m&&D&&D.resolve?((o=D.resolve(void 0)).constructor=D,a=c(o.then,o),r=function(){a(G)}):y?r=function(){O.nextTick(G)}:(d=c(d,l),r=function(){d(G)}):(i=!0,s=S.createTextNode(""),new x(G).observe(s,{characterData:!0}),r=function(){s.data=i=!i}),z=function(tt){q.head||r(),q.add(tt)}}t.exports=z},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(n,t,e){"use strict";var r=n("../internals/a-callable"),i=TypeError,s=function(o){var a,l;this.promise=new o(function(c,h){if(a!==void 0||l!==void 0)throw new i("Bad Promise constructor");a=c,l=h}),this.resolve=r(a),this.reject=r(l)};t.exports.f=function(o){return new s(o)}},{"../internals/a-callable":222}],304:[function(n,t,e){"use strict";var r=n("../internals/is-regexp"),i=TypeError;t.exports=function(s){if(r(s))throw new i("The method doesn't accept regular expressions");return s}},{"../internals/is-regexp":291}],305:[function(n,t,e){"use strict";var r=n("../internals/descriptors"),i=n("../internals/function-uncurry-this"),s=n("../internals/function-call"),o=n("../internals/fails"),a=n("../internals/object-keys"),l=n("../internals/object-get-own-property-symbols"),c=n("../internals/object-property-is-enumerable"),h=n("../internals/to-object"),d=n("../internals/indexed-object"),p=Object.assign,g=Object.defineProperty,m=i([].concat);t.exports=!p||o(function(){if(r&&p({b:1},p(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var b={},y={},x=Symbol("assign detection");return b[x]=7,"abcdefghijklmnopqrst".split("").forEach(function(S){y[S]=S}),p({},b)[x]!==7||a(p({},y)).join("")!=="abcdefghijklmnopqrst"})?function(b,y){for(var x=h(b),S=arguments.length,O=1,D=l.f,U=c.f;S>O;)for(var z,q=d(arguments[O++]),G=D?m(a(q),D(q)):a(q),tt=G.length,K=0;tt>K;)z=G[K++],r&&!s(U,q,z)||(x[z]=q[z]);return x}:p},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(n,t,e){"use strict";var r,i=n("../internals/an-object"),s=n("../internals/object-define-properties"),o=n("../internals/enum-bug-keys"),a=n("../internals/hidden-keys"),l=n("../internals/html"),c=n("../internals/document-create-element"),h=n("../internals/shared-key"),d=h("IE_PROTO"),p=function(){},g=function(y){return"<script>"+y+"<\/script>"},m=function(y){y.write(g("")),y.close();var x=y.parentWindow.Object;return y=null,x},b=function(){try{r=new ActiveXObject("htmlfile")}catch{}var y,x;b=typeof document<"u"?document.domain&&r?m(r):((x=c("iframe")).style.display="none",l.appendChild(x),x.src="javascript:",(y=x.contentWindow.document).open(),y.write(g("document.F=Object")),y.close(),y.F):m(r);for(var S=o.length;S--;)delete b.prototype[o[S]];return b()};a[d]=!0,t.exports=Object.create||function(y,x){var S;return y!==null?(p.prototype=i(y),S=new p,p.prototype=null,S[d]=y):S=b(),x===void 0?S:s.f(S,x)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(n,t,e){"use strict";var r=n("../internals/descriptors"),i=n("../internals/v8-prototype-define-bug"),s=n("../internals/object-define-property"),o=n("../internals/an-object"),a=n("../internals/to-indexed-object"),l=n("../internals/object-keys");e.f=r&&!i?Object.defineProperties:function(c,h){o(c);for(var d,p=a(h),g=l(h),m=g.length,b=0;m>b;)s.f(c,d=g[b++],p[d]);return c}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(n,t,e){"use strict";var r=n("../internals/descriptors"),i=n("../internals/ie8-dom-define"),s=n("../internals/v8-prototype-define-bug"),o=n("../internals/an-object"),a=n("../internals/to-property-key"),l=TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor;e.f=r?s?function(d,p,g){if(o(d),p=a(p),o(g),typeof d=="function"&&p==="prototype"&&"value"in g&&"writable"in g&&!g.writable){var m=h(d,p);m&&m.writable&&(d[p]=g.value,g={configurable:"configurable"in g?g.configurable:m.configurable,enumerable:"enumerable"in g?g.enumerable:m.enumerable,writable:!1})}return c(d,p,g)}:c:function(d,p,g){if(o(d),p=a(p),o(g),i)try{return c(d,p,g)}catch{}if("get"in g||"set"in g)throw new l("Accessors not supported");return"value"in g&&(d[p]=g.value),d}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(n,t,e){"use strict";var r=n("../internals/descriptors"),i=n("../internals/function-call"),s=n("../internals/object-property-is-enumerable"),o=n("../internals/create-property-descriptor"),a=n("../internals/to-indexed-object"),l=n("../internals/to-property-key"),c=n("../internals/has-own-property"),h=n("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;e.f=r?d:function(p,g){if(p=a(p),g=l(g),h)try{return d(p,g)}catch{}if(c(p,g))return o(!i(s.f,p,g),p[g])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(n,t,e){"use strict";var r=n("../internals/classof-raw"),i=n("../internals/to-indexed-object"),s=n("../internals/object-get-own-property-names").f,o=n("../internals/array-slice-simple"),a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(l){return a&&r(l)==="Window"?function(c){try{return s(c)}catch{return o(a)}}(l):s(i(l))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(n,t,e){"use strict";var r=n("../internals/object-keys-internal"),i=n("../internals/enum-bug-keys").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(s){return r(s,i)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(n,t,e){"use strict";e.f=Object.getOwnPropertySymbols},{}],313:[function(n,t,e){"use strict";var r=n("../internals/has-own-property"),i=n("../internals/is-callable"),s=n("../internals/to-object"),o=n("../internals/shared-key"),a=n("../internals/correct-prototype-getter"),l=o("IE_PROTO"),c=Object,h=c.prototype;t.exports=a?c.getPrototypeOf:function(d){var p=s(d);if(r(p,l))return p[l];var g=p.constructor;return i(g)&&p instanceof g?g.prototype:p instanceof c?h:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this");t.exports=r({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=n("../internals/has-own-property"),s=n("../internals/to-indexed-object"),o=n("../internals/array-includes").indexOf,a=n("../internals/hidden-keys"),l=r([].push);t.exports=function(c,h){var d,p=s(c),g=0,m=[];for(d in p)!i(a,d)&&i(p,d)&&l(m,d);for(;h.length>g;)i(p,d=h[g++])&&(~o(m,d)||l(m,d));return m}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(n,t,e){"use strict";var r=n("../internals/object-keys-internal"),i=n("../internals/enum-bug-keys");t.exports=Object.keys||function(s){return r(s,i)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(n,t,e){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!r.call({1:2},1);e.f=s?function(o){var a=i(this,o);return!!a&&a.enumerable}:r},{}],318:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this-accessor"),i=n("../internals/an-object"),s=n("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,a=!1,l={};try{(o=r(Object.prototype,"__proto__","set"))(l,[]),a=l instanceof Array}catch{}return function(c,h){return i(c),s(h),a?o(c,h):c.__proto__=h,c}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(n,t,e){"use strict";var r=n("../internals/descriptors"),i=n("../internals/fails"),s=n("../internals/function-uncurry-this"),o=n("../internals/object-get-prototype-of"),a=n("../internals/object-keys"),l=n("../internals/to-indexed-object"),c=s(n("../internals/object-property-is-enumerable").f),h=s([].push),d=r&&i(function(){var g=Object.create(null);return g[2]=2,!c(g,2)}),p=function(g){return function(m){for(var b,y=l(m),x=a(y),S=d&&o(y)===null,O=x.length,D=0,U=[];O>D;)b=x[D++],r&&!(S?b in y:c(y,b))||h(U,g?[b,y[b]]:y[b]);return U}};t.exports={entries:p(!0),values:p(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(n,t,e){"use strict";var r=n("../internals/function-call"),i=n("../internals/is-callable"),s=n("../internals/is-object"),o=TypeError;t.exports=function(a,l){var c,h;if(l==="string"&&i(c=a.toString)&&!s(h=r(c,a))||i(c=a.valueOf)&&!s(h=r(c,a))||l!=="string"&&i(c=a.toString)&&!s(h=r(c,a)))return h;throw new o("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(n,t,e){"use strict";var r=n("../internals/get-built-in"),i=n("../internals/function-uncurry-this"),s=n("../internals/object-get-own-property-names"),o=n("../internals/object-get-own-property-symbols"),a=n("../internals/an-object"),l=i([].concat);t.exports=r("Reflect","ownKeys")||function(c){var h=s.f(a(c)),d=o.f;return d?l(h,d(c)):h}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(n,t,e){"use strict";var r=n("../internals/global");t.exports=r},{"../internals/global":274}],323:[function(n,t,e){"use strict";t.exports=function(r){try{return{error:!1,value:r()}}catch(i){return{error:!0,value:i}}}},{}],324:[function(n,t,e){"use strict";var r=n("../internals/global"),i=n("../internals/promise-native-constructor"),s=n("../internals/is-callable"),o=n("../internals/is-forced"),a=n("../internals/inspect-source"),l=n("../internals/well-known-symbol"),c=n("../internals/engine-is-browser"),h=n("../internals/engine-is-deno"),d=n("../internals/is-pure"),p=n("../internals/engine-v8-version"),g=i&&i.prototype,m=l("species"),b=!1,y=s(r.PromiseRejectionEvent),x=o("Promise",function(){var S=a(i),O=S!==String(i);if(!O&&p===66||d&&(!g.catch||!g.finally))return!0;if(!p||p<51||!/native code/.test(S)){var D=new i(function(z){z(1)}),U=function(z){z(function(){},function(){})};if((D.constructor={})[m]=U,!(b=D.then(function(){})instanceof U))return!0}return!O&&(c||h)&&!y});t.exports={CONSTRUCTOR:x,REJECTION_EVENT:y,SUBCLASSING:b}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(n,t,e){"use strict";var r=n("../internals/global");t.exports=r.Promise},{"../internals/global":274}],326:[function(n,t,e){"use strict";var r=n("../internals/an-object"),i=n("../internals/is-object"),s=n("../internals/new-promise-capability");t.exports=function(o,a){if(r(o),i(a)&&a.constructor===o)return a;var l=s.f(o);return(0,l.resolve)(a),l.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(n,t,e){"use strict";var r=n("../internals/promise-native-constructor"),i=n("../internals/check-correctness-of-iteration"),s=n("../internals/promise-constructor-detection").CONSTRUCTOR;t.exports=s||!i(function(o){r.all(o).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(n,t,e){"use strict";var r=function(){this.head=null,this.tail=null};r.prototype={add:function(i){var s={item:i,next:null},o=this.tail;o?o.next=s:this.head=s,this.tail=s},get:function(){var i=this.head;if(i)return(this.head=i.next)===null&&(this.tail=null),i.item}},t.exports=r},{}],329:[function(n,t,e){"use strict";var r=n("../internals/is-null-or-undefined"),i=TypeError;t.exports=function(s){if(r(s))throw new i("Can't call method on "+s);return s}},{"../internals/is-null-or-undefined":288}],330:[function(n,t,e){"use strict";var r=n("../internals/get-built-in"),i=n("../internals/define-built-in-accessor"),s=n("../internals/well-known-symbol"),o=n("../internals/descriptors"),a=s("species");t.exports=function(l){var c=r(l);o&&c&&!c[a]&&i(c,a,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(n,t,e){"use strict";var r=n("../internals/object-define-property").f,i=n("../internals/has-own-property"),s=n("../internals/well-known-symbol")("toStringTag");t.exports=function(o,a,l){o&&!l&&(o=o.prototype),o&&!i(o,s)&&r(o,s,{configurable:!0,value:a})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(n,t,e){"use strict";var r=n("../internals/shared"),i=n("../internals/uid"),s=r("keys");t.exports=function(o){return s[o]||(s[o]=i(o))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(n,t,e){"use strict";var r=n("../internals/global"),i=n("../internals/define-global-property"),s=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=s},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(n,t,e){"use strict";var r=n("../internals/is-pure"),i=n("../internals/shared-store");(t.exports=function(s,o){return i[s]||(i[s]=o!==void 0?o:{})})("versions",[]).push({version:"3.33.0",mode:r?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(n,t,e){"use strict";var r=n("../internals/an-object"),i=n("../internals/a-constructor"),s=n("../internals/is-null-or-undefined"),o=n("../internals/well-known-symbol")("species");t.exports=function(a,l){var c,h=r(a).constructor;return h===void 0||s(c=r(h)[o])?l:i(c)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(n,t,e){"use strict";var r=n("../internals/engine-v8-version"),i=n("../internals/fails"),s=n("../internals/global").String;t.exports=!!Object.getOwnPropertySymbols&&!i(function(){var o=Symbol("symbol detection");return!s(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&r&&r<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(n,t,e){"use strict";var r=n("../internals/function-call"),i=n("../internals/get-built-in"),s=n("../internals/well-known-symbol"),o=n("../internals/define-built-in");t.exports=function(){var a=i("Symbol"),l=a&&a.prototype,c=l&&l.valueOf,h=s("toPrimitive");l&&!l[h]&&o(l,h,function(d){return r(c,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(n,t,e){"use strict";var r=n("../internals/symbol-constructor-detection");t.exports=r&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(n,t,e){"use strict";var r,i,s,o,a=n("../internals/global"),l=n("../internals/function-apply"),c=n("../internals/function-bind-context"),h=n("../internals/is-callable"),d=n("../internals/has-own-property"),p=n("../internals/fails"),g=n("../internals/html"),m=n("../internals/array-slice"),b=n("../internals/document-create-element"),y=n("../internals/validate-arguments-length"),x=n("../internals/engine-is-ios"),S=n("../internals/engine-is-node"),O=a.setImmediate,D=a.clearImmediate,U=a.process,z=a.Dispatch,q=a.Function,G=a.MessageChannel,tt=a.String,K=0,B={};p(function(){r=a.location});var N=function(k){if(d(B,k)){var T=B[k];delete B[k],T()}},Z=function(k){return function(){N(k)}},w=function(k){N(k.data)},C=function(k){a.postMessage(tt(k),r.protocol+"//"+r.host)};O&&D||(O=function(k){y(arguments.length,1);var T=h(k)?k:q(k),R=m(arguments,1);return B[++K]=function(){l(T,void 0,R)},i(K),K},D=function(k){delete B[k]},S?i=function(k){U.nextTick(Z(k))}:z&&z.now?i=function(k){z.now(Z(k))}:G&&!x?(o=(s=new G).port2,s.port1.onmessage=w,i=c(o.postMessage,o)):a.addEventListener&&h(a.postMessage)&&!a.importScripts&&r&&r.protocol!=="file:"&&!p(C)?(i=C,a.addEventListener("message",w,!1)):i="onreadystatechange"in b("script")?function(k){g.appendChild(b("script")).onreadystatechange=function(){g.removeChild(this),N(k)}}:function(k){setTimeout(Z(k),0)}),t.exports={set:O,clear:D}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(n,t,e){"use strict";var r=n("../internals/to-integer-or-infinity"),i=Math.max,s=Math.min;t.exports=function(o,a){var l=r(o);return l<0?i(l+a,0):s(l,a)}},{"../internals/to-integer-or-infinity":342}],341:[function(n,t,e){"use strict";var r=n("../internals/indexed-object"),i=n("../internals/require-object-coercible");t.exports=function(s){return r(i(s))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(n,t,e){"use strict";var r=n("../internals/math-trunc");t.exports=function(i){var s=+i;return s!=s||s===0?0:r(s)}},{"../internals/math-trunc":301}],343:[function(n,t,e){"use strict";var r=n("../internals/to-integer-or-infinity"),i=Math.min;t.exports=function(s){return s>0?i(r(s),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(n,t,e){"use strict";var r=n("../internals/require-object-coercible"),i=Object;t.exports=function(s){return i(r(s))}},{"../internals/require-object-coercible":329}],345:[function(n,t,e){"use strict";var r=n("../internals/function-call"),i=n("../internals/is-object"),s=n("../internals/is-symbol"),o=n("../internals/get-method"),a=n("../internals/ordinary-to-primitive"),l=n("../internals/well-known-symbol"),c=TypeError,h=l("toPrimitive");t.exports=function(d,p){if(!i(d)||s(d))return d;var g,m=o(d,h);if(m){if(p===void 0&&(p="default"),g=r(m,d,p),!i(g)||s(g))return g;throw new c("Can't convert object to primitive value")}return p===void 0&&(p="number"),a(d,p)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(n,t,e){"use strict";var r=n("../internals/to-primitive"),i=n("../internals/is-symbol");t.exports=function(s){var o=r(s,"string");return i(o)?o:o+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(n,t,e){"use strict";var r={};r[n("../internals/well-known-symbol")("toStringTag")]="z",t.exports=String(r)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(n,t,e){"use strict";var r=n("../internals/classof"),i=String;t.exports=function(s){if(r(s)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return i(s)}},{"../internals/classof":236}],349:[function(n,t,e){"use strict";var r=String;t.exports=function(i){try{return r(i)}catch{return"Object"}}},{}],350:[function(n,t,e){"use strict";var r=n("../internals/function-uncurry-this"),i=0,s=Math.random(),o=r(1 .toString);t.exports=function(a){return"Symbol("+(a===void 0?"":a)+")_"+o(++i+s,36)}},{"../internals/function-uncurry-this":268}],351:[function(n,t,e){"use strict";var r=n("../internals/symbol-constructor-detection");t.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(n,t,e){"use strict";var r=n("../internals/descriptors"),i=n("../internals/fails");t.exports=r&&i(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(n,t,e){"use strict";var r=TypeError;t.exports=function(i,s){if(i<s)throw new r("Not enough arguments");return i}},{}],354:[function(n,t,e){"use strict";var r=n("../internals/global"),i=n("../internals/is-callable"),s=r.WeakMap;t.exports=i(s)&&/native code/.test(String(s))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(n,t,e){"use strict";var r=n("../internals/path"),i=n("../internals/has-own-property"),s=n("../internals/well-known-symbol-wrapped"),o=n("../internals/object-define-property").f;t.exports=function(a){var l=r.Symbol||(r.Symbol={});i(l,a)||o(l,a,{value:s.f(a)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(n,t,e){"use strict";var r=n("../internals/well-known-symbol");e.f=r},{"../internals/well-known-symbol":357}],357:[function(n,t,e){"use strict";var r=n("../internals/global"),i=n("../internals/shared"),s=n("../internals/has-own-property"),o=n("../internals/uid"),a=n("../internals/symbol-constructor-detection"),l=n("../internals/use-symbol-as-uid"),c=r.Symbol,h=i("wks"),d=l?c.for||c:c&&c.withoutSetter||o;t.exports=function(p){return s(h,p)||(h[p]=a&&s(c,p)?c[p]:d("Symbol."+p)),h[p]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/array-iteration").findIndex,s=n("../internals/add-to-unscopables"),o=!0;"findIndex"in[]&&Array(1).findIndex(function(){o=!1}),r({target:"Array",proto:!0,forced:o},{findIndex:function(a){return i(this,a,arguments.length>1?arguments[1]:void 0)}}),s("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/array-iteration").find,s=n("../internals/add-to-unscopables"),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r({target:"Array",proto:!0,forced:o},{find:function(a){return i(this,a,arguments.length>1?arguments[1]:void 0)}}),s("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/array-includes").includes,s=n("../internals/fails"),o=n("../internals/add-to-unscopables");r({target:"Array",proto:!0,forced:s(function(){return!Array(1).includes()})},{includes:function(a){return i(this,a,arguments.length>1?arguments[1]:void 0)}}),o("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(n,t,e){"use strict";var r=n("../internals/to-indexed-object"),i=n("../internals/add-to-unscopables"),s=n("../internals/iterators"),o=n("../internals/internal-state"),a=n("../internals/object-define-property").f,l=n("../internals/iterator-define"),c=n("../internals/create-iter-result-object"),h=n("../internals/is-pure"),d=n("../internals/descriptors"),p=o.set,g=o.getterFor("Array Iterator");t.exports=l(Array,"Array",function(b,y){p(this,{type:"Array Iterator",target:r(b),index:0,kind:y})},function(){var b=g(this),y=b.target,x=b.kind,S=b.index++;if(!y||S>=y.length)return b.target=void 0,c(void 0,!0);switch(x){case"keys":return c(S,!1);case"values":return c(y[S],!1)}return c([S,y[S]],!1)},"values");var m=s.Arguments=s.Array;if(i("keys"),i("values"),i("entries"),!h&&d&&m.name!=="values")try{a(m,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/get-built-in"),s=n("../internals/function-apply"),o=n("../internals/function-call"),a=n("../internals/function-uncurry-this"),l=n("../internals/fails"),c=n("../internals/is-callable"),h=n("../internals/is-symbol"),d=n("../internals/array-slice"),p=n("../internals/get-json-replacer-function"),g=n("../internals/symbol-constructor-detection"),m=String,b=i("JSON","stringify"),y=a(/./.exec),x=a("".charAt),S=a("".charCodeAt),O=a("".replace),D=a(1 .toString),U=/[\uD800-\uDFFF]/g,z=/^[\uD800-\uDBFF]$/,q=/^[\uDC00-\uDFFF]$/,G=!g||l(function(){var N=i("Symbol")("stringify detection");return b([N])!=="[null]"||b({a:N})!=="{}"||b(Object(N))!=="{}"}),tt=l(function(){return b("\uDF06\uD834")!=='"\\udf06\\ud834"'||b("\uDEAD")!=='"\\udead"'}),K=function(N,Z){var w=d(arguments),C=p(Z);if(c(C)||N!==void 0&&!h(N))return w[1]=function(k,T){if(c(C)&&(T=o(C,this,m(k),T)),!h(T))return T},s(b,null,w)},B=function(N,Z,w){var C=x(w,Z-1),k=x(w,Z+1);return y(z,N)&&!y(q,k)||y(q,N)&&!y(z,C)?"\\u"+D(S(N,0),16):N};b&&r({target:"JSON",stat:!0,arity:3,forced:G||tt},{stringify:function(N,Z,w){var C=d(arguments),k=s(G?K:b,null,C);return tt&&typeof k=="string"?O(k,U,B):k}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(n,t,e){"use strict";n("../internals/export")({target:"Number",stat:!0},{isNaN:function(r){return r!=r}})},{"../internals/export":259}],364:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/object-assign");r({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/symbol-constructor-detection"),s=n("../internals/fails"),o=n("../internals/object-get-own-property-symbols"),a=n("../internals/to-object");r({target:"Object",stat:!0,forced:!i||s(function(){o.f(1)})},{getOwnPropertySymbols:function(l){var c=o.f;return c?c(a(l)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/to-object"),s=n("../internals/object-keys");r({target:"Object",stat:!0,forced:n("../internals/fails")(function(){s(1)})},{keys:function(o){return s(i(o))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/object-to-array").values;r({target:"Object",stat:!0},{values:function(s){return i(s)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/function-call"),s=n("../internals/a-callable"),o=n("../internals/new-promise-capability"),a=n("../internals/perform"),l=n("../internals/iterate");r({target:"Promise",stat:!0,forced:n("../internals/promise-statics-incorrect-iteration")},{all:function(c){var h=this,d=o.f(h),p=d.resolve,g=d.reject,m=a(function(){var b=s(h.resolve),y=[],x=0,S=1;l(c,function(O){var D=x++,U=!1;S++,i(b,h,O).then(function(z){U||(U=!0,y[D]=z,--S||p(y))},g)}),--S||p(y)});return m.error&&g(m.value),d.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/is-pure"),s=n("../internals/promise-constructor-detection").CONSTRUCTOR,o=n("../internals/promise-native-constructor"),a=n("../internals/get-built-in"),l=n("../internals/is-callable"),c=n("../internals/define-built-in"),h=o&&o.prototype;if(r({target:"Promise",proto:!0,forced:s,real:!0},{catch:function(p){return this.then(void 0,p)}}),!i&&l(o)){var d=a("Promise").prototype.catch;h.catch!==d&&c(h,"catch",d,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(n,t,e){"use strict";var r,i,s,o=n("../internals/export"),a=n("../internals/is-pure"),l=n("../internals/engine-is-node"),c=n("../internals/global"),h=n("../internals/function-call"),d=n("../internals/define-built-in"),p=n("../internals/object-set-prototype-of"),g=n("../internals/set-to-string-tag"),m=n("../internals/set-species"),b=n("../internals/a-callable"),y=n("../internals/is-callable"),x=n("../internals/is-object"),S=n("../internals/an-instance"),O=n("../internals/species-constructor"),D=n("../internals/task").set,U=n("../internals/microtask"),z=n("../internals/host-report-errors"),q=n("../internals/perform"),G=n("../internals/queue"),tt=n("../internals/internal-state"),K=n("../internals/promise-native-constructor"),B=n("../internals/promise-constructor-detection"),N=n("../internals/new-promise-capability"),Z=B.CONSTRUCTOR,w=B.REJECTION_EVENT,C=B.SUBCLASSING,k=tt.getterFor("Promise"),T=tt.set,R=K&&K.prototype,F=K,H=R,rt=c.TypeError,ot=c.document,dt=c.process,$=N.f,ct=$,W=!!(ot&&ot.createEvent&&c.dispatchEvent),V=function(gt){var ut;return!(!x(gt)||!y(ut=gt.then))&&ut},it=function(gt,ut){var Q,Y,et,lt=ut.value,pt=ut.state===1,bt=pt?gt.ok:gt.fail,Et=gt.resolve,Ot=gt.reject,zt=gt.domain;try{bt?(pt||(ut.rejection===2&&Ft(ut),ut.rejection=1),bt===!0?Q=lt:(zt&&zt.enter(),Q=bt(lt),zt&&(zt.exit(),et=!0)),Q===gt.promise?Ot(new rt("Promise-chain cycle")):(Y=V(Q))?h(Y,Q,Et,Ot):Et(Q)):Ot(lt)}catch(Gt){zt&&!et&&zt.exit(),Ot(Gt)}},mt=function(gt,ut){gt.notified||(gt.notified=!0,U(function(){for(var Q,Y=gt.reactions;Q=Y.get();)it(Q,gt);gt.notified=!1,ut&&!gt.rejection&&_t(gt)}))},wt=function(gt,ut,Q){var Y,et;W?((Y=ot.createEvent("Event")).promise=ut,Y.reason=Q,Y.initEvent(gt,!1,!0),c.dispatchEvent(Y)):Y={promise:ut,reason:Q},!w&&(et=c["on"+gt])?et(Y):gt==="unhandledrejection"&&z("Unhandled promise rejection",Q)},_t=function(gt){h(D,c,function(){var ut,Q=gt.facade,Y=gt.value;if(Ct(gt)&&(ut=q(function(){l?dt.emit("unhandledRejection",Y,Q):wt("unhandledrejection",Q,Y)}),gt.rejection=l||Ct(gt)?2:1,ut.error))throw ut.value})},Ct=function(gt){return gt.rejection!==1&&!gt.parent},Ft=function(gt){h(D,c,function(){var ut=gt.facade;l?dt.emit("rejectionHandled",ut):wt("rejectionhandled",ut,gt.value)})},It=function(gt,ut,Q){return function(Y){gt(ut,Y,Q)}},vt=function(gt,ut,Q){gt.done||(gt.done=!0,Q&&(gt=Q),gt.value=ut,gt.state=2,mt(gt,!0))},kt=function(gt,ut,Q){if(!gt.done){gt.done=!0,Q&&(gt=Q);try{if(gt.facade===ut)throw new rt("Promise can't be resolved itself");var Y=V(ut);Y?U(function(){var et={done:!1};try{h(Y,ut,It(kt,et,gt),It(vt,et,gt))}catch(lt){vt(et,lt,gt)}}):(gt.value=ut,gt.state=1,mt(gt,!1))}catch(et){vt({done:!1},et,gt)}}};if(Z&&(H=(F=function(gt){S(this,H),b(gt),h(r,this);var ut=k(this);try{gt(It(kt,ut),It(vt,ut))}catch(Q){vt(ut,Q)}}).prototype,(r=function(gt){T(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new G,rejection:!1,state:0,value:void 0})}).prototype=d(H,"then",function(gt,ut){var Q=k(this),Y=$(O(this,F));return Q.parent=!0,Y.ok=!y(gt)||gt,Y.fail=y(ut)&&ut,Y.domain=l?dt.domain:void 0,Q.state===0?Q.reactions.add(Y):U(function(){it(Y,Q)}),Y.promise}),i=function(){var gt=new r,ut=k(gt);this.promise=gt,this.resolve=It(kt,ut),this.reject=It(vt,ut)},N.f=$=function(gt){return gt===F||gt===void 0?new i(gt):ct(gt)},!a&&y(K)&&R!==Object.prototype)){s=R.then,C||d(R,"then",function(gt,ut){var Q=this;return new F(function(Y,et){h(s,Q,Y,et)}).then(gt,ut)},{unsafe:!0});try{delete R.constructor}catch{}p&&p(R,H)}o({global:!0,constructor:!0,wrap:!0,forced:Z},{Promise:F}),g(F,"Promise",!1,!0),m("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/is-pure"),s=n("../internals/promise-native-constructor"),o=n("../internals/fails"),a=n("../internals/get-built-in"),l=n("../internals/is-callable"),c=n("../internals/species-constructor"),h=n("../internals/promise-resolve"),d=n("../internals/define-built-in"),p=s&&s.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!s&&o(function(){p.finally.call({then:function(){}},function(){})})},{finally:function(m){var b=c(this,a("Promise")),y=l(m);return this.then(y?function(x){return h(b,m()).then(function(){return x})}:m,y?function(x){return h(b,m()).then(function(){throw x})}:m)}}),!i&&l(s)){var g=a("Promise").prototype.finally;p.finally!==g&&d(p,"finally",g,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(n,t,e){"use strict";n("../modules/es.promise.constructor"),n("../modules/es.promise.all"),n("../modules/es.promise.catch"),n("../modules/es.promise.race"),n("../modules/es.promise.reject"),n("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/function-call"),s=n("../internals/a-callable"),o=n("../internals/new-promise-capability"),a=n("../internals/perform"),l=n("../internals/iterate");r({target:"Promise",stat:!0,forced:n("../internals/promise-statics-incorrect-iteration")},{race:function(c){var h=this,d=o.f(h),p=d.reject,g=a(function(){var m=s(h.resolve);l(c,function(b){i(m,h,b).then(d.resolve,p)})});return g.error&&p(g.value),d.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/function-call"),s=n("../internals/new-promise-capability");r({target:"Promise",stat:!0,forced:n("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(o){var a=s.f(this);return i(a.reject,void 0,o),a.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/get-built-in"),s=n("../internals/is-pure"),o=n("../internals/promise-native-constructor"),a=n("../internals/promise-constructor-detection").CONSTRUCTOR,l=n("../internals/promise-resolve"),c=i("Promise"),h=s&&!a;r({target:"Promise",stat:!0,forced:s||a},{resolve:function(d){return l(h&&this===c?o:this,d)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/function-uncurry-this"),s=n("../internals/to-absolute-index"),o=RangeError,a=String.fromCharCode,l=String.fromCodePoint,c=i([].join);r({target:"String",stat:!0,arity:1,forced:!!l&&l.length!==1},{fromCodePoint:function(h){for(var d,p=[],g=arguments.length,m=0;g>m;){if(d=+arguments[m++],s(d,1114111)!==d)throw new o(d+" is not a valid code point");p[m]=d<65536?a(d):a(55296+((d-=65536)>>10),d%1024+56320)}return c(p,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/function-uncurry-this"),s=n("../internals/not-a-regexp"),o=n("../internals/require-object-coercible"),a=n("../internals/to-string"),l=n("../internals/correct-is-regexp-logic"),c=i("".indexOf);r({target:"String",proto:!0,forced:!l("includes")},{includes:function(h){return!!~c(a(o(this)),a(s(h)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(n,t,e){"use strict";n("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/global"),s=n("../internals/function-call"),o=n("../internals/function-uncurry-this"),a=n("../internals/is-pure"),l=n("../internals/descriptors"),c=n("../internals/symbol-constructor-detection"),h=n("../internals/fails"),d=n("../internals/has-own-property"),p=n("../internals/object-is-prototype-of"),g=n("../internals/an-object"),m=n("../internals/to-indexed-object"),b=n("../internals/to-property-key"),y=n("../internals/to-string"),x=n("../internals/create-property-descriptor"),S=n("../internals/object-create"),O=n("../internals/object-keys"),D=n("../internals/object-get-own-property-names"),U=n("../internals/object-get-own-property-names-external"),z=n("../internals/object-get-own-property-symbols"),q=n("../internals/object-get-own-property-descriptor"),G=n("../internals/object-define-property"),tt=n("../internals/object-define-properties"),K=n("../internals/object-property-is-enumerable"),B=n("../internals/define-built-in"),N=n("../internals/define-built-in-accessor"),Z=n("../internals/shared"),w=n("../internals/shared-key"),C=n("../internals/hidden-keys"),k=n("../internals/uid"),T=n("../internals/well-known-symbol"),R=n("../internals/well-known-symbol-wrapped"),F=n("../internals/well-known-symbol-define"),H=n("../internals/symbol-define-to-primitive"),rt=n("../internals/set-to-string-tag"),ot=n("../internals/internal-state"),dt=n("../internals/array-iteration").forEach,$=w("hidden"),ct=ot.set,W=ot.getterFor("Symbol"),V=Object.prototype,it=i.Symbol,mt=it&&it.prototype,wt=i.RangeError,_t=i.TypeError,Ct=i.QObject,Ft=q.f,It=G.f,vt=U.f,kt=K.f,gt=o([].push),ut=Z("symbols"),Q=Z("op-symbols"),Y=Z("wks"),et=!Ct||!Ct.prototype||!Ct.prototype.findChild,lt=function(re,Xt,Ut){var _e=Ft(V,Xt);_e&&delete V[Xt],It(re,Xt,Ut),_e&&re!==V&&It(V,Xt,_e)},pt=l&&h(function(){return S(It({},"a",{get:function(){return It(this,"a",{value:7}).a}})).a!==7})?lt:It,bt=function(re,Xt){var Ut=ut[re]=S(mt);return ct(Ut,{type:"Symbol",tag:re,description:Xt}),l||(Ut.description=Xt),Ut},Et=function(re,Xt,Ut){re===V&&Et(Q,Xt,Ut),g(re);var _e=b(Xt);return g(Ut),d(ut,_e)?(Ut.enumerable?(d(re,$)&&re[$][_e]&&(re[$][_e]=!1),Ut=S(Ut,{enumerable:x(0,!1)})):(d(re,$)||It(re,$,x(1,{})),re[$][_e]=!0),pt(re,_e,Ut)):It(re,_e,Ut)},Ot=function(re,Xt){g(re);var Ut=m(Xt),_e=O(Ut).concat(Kt(Ut));return dt(_e,function(le){l&&!s(zt,Ut,le)||Et(re,le,Ut[le])}),re},zt=function(re){var Xt=b(re),Ut=s(kt,this,Xt);return!(this===V&&d(ut,Xt)&&!d(Q,Xt))&&(!(Ut||!d(this,Xt)||!d(ut,Xt)||d(this,$)&&this[$][Xt])||Ut)},Gt=function(re,Xt){var Ut=m(re),_e=b(Xt);if(Ut!==V||!d(ut,_e)||d(Q,_e)){var le=Ft(Ut,_e);return!le||!d(ut,_e)||d(Ut,$)&&Ut[$][_e]||(le.enumerable=!0),le}},Jt=function(re){var Xt=vt(m(re)),Ut=[];return dt(Xt,function(_e){d(ut,_e)||d(C,_e)||gt(Ut,_e)}),Ut},Kt=function(re){var Xt=re===V,Ut=vt(Xt?Q:m(re)),_e=[];return dt(Ut,function(le){!d(ut,le)||Xt&&!d(V,le)||gt(_e,ut[le])}),_e};c||(B(mt=(it=function(){if(p(mt,this))throw new _t("Symbol is not a constructor");var re=arguments.length&&arguments[0]!==void 0?y(arguments[0]):void 0,Xt=k(re),Ut=function(_e){this===V&&s(Ut,Q,_e),d(this,$)&&d(this[$],Xt)&&(this[$][Xt]=!1);var le=x(1,_e);try{pt(this,Xt,le)}catch(ye){if(!(ye instanceof wt))throw ye;lt(this,Xt,le)}};return l&&et&&pt(V,Xt,{configurable:!0,set:Ut}),bt(Xt,re)}).prototype,"toString",function(){return W(this).tag}),B(it,"withoutSetter",function(re){return bt(k(re),re)}),K.f=zt,G.f=Et,tt.f=Ot,q.f=Gt,D.f=U.f=Jt,z.f=Kt,R.f=function(re){return bt(T(re),re)},l&&(N(mt,"description",{configurable:!0,get:function(){return W(this).description}}),a||B(V,"propertyIsEnumerable",zt,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:it}),dt(O(Y),function(re){F(re)}),r({target:"Symbol",stat:!0,forced:!c},{useSetter:function(){et=!0},useSimple:function(){et=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(re,Xt){return Xt===void 0?S(re):Ot(S(re),Xt)},defineProperty:Et,defineProperties:Ot,getOwnPropertyDescriptor:Gt}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:Jt}),H(),rt(it,"Symbol"),C[$]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/get-built-in"),s=n("../internals/has-own-property"),o=n("../internals/to-string"),a=n("../internals/shared"),l=n("../internals/symbol-registry-detection"),c=a("string-to-symbol-registry"),h=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{for:function(d){var p=o(d);if(s(c,p))return c[p];var g=i("Symbol")(p);return c[p]=g,h[g]=p,g}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(n,t,e){"use strict";n("../modules/es.symbol.constructor"),n("../modules/es.symbol.for"),n("../modules/es.symbol.key-for"),n("../modules/es.json.stringify"),n("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(n,t,e){"use strict";var r=n("../internals/export"),i=n("../internals/has-own-property"),s=n("../internals/is-symbol"),o=n("../internals/try-to-string"),a=n("../internals/shared"),l=n("../internals/symbol-registry-detection"),c=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{keyFor:function(h){if(!s(h))throw new TypeError(o(h)+" is not a symbol");if(i(c,h))return c[h]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(n,t,e){"use strict";function r(i){return Object.prototype.toString.call(i)}e.isArray=function(i){return Array.isArray?Array.isArray(i):r(i)==="[object Array]"},e.isBoolean=function(i){return typeof i=="boolean"},e.isNull=function(i){return i===null},e.isNullOrUndefined=function(i){return i==null},e.isNumber=function(i){return typeof i=="number"},e.isString=function(i){return typeof i=="string"},e.isSymbol=function(i){return typeof i=="symbol"},e.isUndefined=function(i){return i===void 0},e.isRegExp=function(i){return r(i)==="[object RegExp]"},e.isObject=function(i){return typeof i=="object"&&i!==null},e.isDate=function(i){return r(i)==="[object Date]"},e.isError=function(i){return r(i)==="[object Error]"||i instanceof Error},e.isFunction=function(i){return typeof i=="function"},e.isPrimitive=function(i){return i===null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||typeof i=="symbol"||i===void 0},e.isBuffer=n("buffer").Buffer.isBuffer},{buffer:220}],384:[function(n,t,e){(function(r){(function(){"use strict";var i=n("elliptic"),s=n("bn.js");t.exports=function(c){return new a(c)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(c){this.curveType=o[c],this.curveType||(this.curveType={name:c}),this.curve=new i.ec(this.curveType.name),this.keys=void 0}function l(c,h,d){Array.isArray(c)||(c=c.toArray());var p=new r(c);if(d&&p.length<d){var g=new r(d-p.length);g.fill(0),p=r.concat([g,p])}return h?p.toString(h):p}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(c,h){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,h)},a.prototype.computeSecret=function(c,h,d){return h=h||"utf8",r.isBuffer(c)||(c=new r(c,h)),l(this.curve.keyFromPublic(c).getPublic().mul(this.keys.getPrivate()).getX(),d,this.curveType.byteLength)},a.prototype.getPublicKey=function(c,h){var d=this.keys.getPublic(h==="compressed",!0);return h==="hybrid"&&(d[d.length-1]%2?d[0]=7:d[0]=6),l(d,c)},a.prototype.getPrivateKey=function(c){return l(this.keys.getPrivate(),c)},a.prototype.setPublicKey=function(c,h){return h=h||"utf8",r.isBuffer(c)||(c=new r(c,h)),this.keys._importPublic(c),this},a.prototype.setPrivateKey=function(c,h){h=h||"utf8",r.isBuffer(c)||(c=new r(c,h));var d=new s(c);return d=d.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(d),this}}).call(this)}).call(this,n("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],386:[function(n,t,e){"use strict";var r=n("inherits"),i=n("md5.js"),s=n("ripemd160"),o=n("sha.js"),a=n("cipher-base");function l(c){a.call(this,"digest"),this._hash=c}r(l,a),l.prototype._update=function(c){this._hash.update(c)},l.prototype._final=function(){return this._hash.digest()},t.exports=function(c){return(c=c.toLowerCase())==="md5"?new i:c==="rmd160"||c==="ripemd160"?new s:new l(o(c))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(n,t,e){"use strict";var r=n("md5.js");t.exports=function(i){return new r().update(i).digest()}},{"md5.js":450}],388:[function(n,t,e){"use strict";var r=n("inherits"),i=n("./legacy"),s=n("cipher-base"),o=n("safe-buffer").Buffer,a=n("create-hash/md5"),l=n("ripemd160"),c=n("sha.js"),h=o.alloc(128);function d(p,g){s.call(this,"digest"),typeof g=="string"&&(g=o.from(g));var m=p==="sha512"||p==="sha384"?128:64;this._alg=p,this._key=g,g.length>m?g=(p==="rmd160"?new l:c(p)).update(g).digest():g.length<m&&(g=o.concat([g,h],m));for(var b=this._ipad=o.allocUnsafe(m),y=this._opad=o.allocUnsafe(m),x=0;x<m;x++)b[x]=54^g[x],y[x]=92^g[x];this._hash=p==="rmd160"?new l:c(p),this._hash.update(b)}r(d,s),d.prototype._update=function(p){this._hash.update(p)},d.prototype._final=function(){var p=this._hash.digest();return(this._alg==="rmd160"?new l:c(this._alg)).update(this._opad).update(p).digest()},t.exports=function(p,g){return(p=p.toLowerCase())==="rmd160"||p==="ripemd160"?new d("rmd160",g):p==="md5"?new i(a,g):new d(p,g)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(n,t,e){"use strict";var r=n("inherits"),i=n("safe-buffer").Buffer,s=n("cipher-base"),o=i.alloc(128);function a(l,c){s.call(this,"digest"),typeof c=="string"&&(c=i.from(c)),this._alg=l,this._key=c,c.length>64?c=l(c):c.length<64&&(c=i.concat([c,o],64));for(var h=this._ipad=i.allocUnsafe(64),d=this._opad=i.allocUnsafe(64),p=0;p<64;p++)h[p]=54^c[p],d[p]=92^c[p];this._hash=[h]}r(a,s),a.prototype._update=function(l){this._hash.push(l)},a.prototype._final=function(){var l=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,l]))},t.exports=a},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(n,t,e){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=n("randombytes"),e.createHash=e.Hash=n("create-hash"),e.createHmac=e.Hmac=n("create-hmac");var r=n("browserify-sign/algos"),i=Object.keys(r),s=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return s};var o=n("pbkdf2");e.pbkdf2=o.pbkdf2,e.pbkdf2Sync=o.pbkdf2Sync;var a=n("browserify-cipher");e.Cipher=a.Cipher,e.createCipher=a.createCipher,e.Cipheriv=a.Cipheriv,e.createCipheriv=a.createCipheriv,e.Decipher=a.Decipher,e.createDecipher=a.createDecipher,e.Decipheriv=a.Decipheriv,e.createDecipheriv=a.createDecipheriv,e.getCiphers=a.getCiphers,e.listCiphers=a.listCiphers;var l=n("diffie-hellman");e.DiffieHellmanGroup=l.DiffieHellmanGroup,e.createDiffieHellmanGroup=l.createDiffieHellmanGroup,e.getDiffieHellman=l.getDiffieHellman,e.createDiffieHellman=l.createDiffieHellman,e.DiffieHellman=l.DiffieHellman;var c=n("browserify-sign");e.createSign=c.createSign,e.Sign=c.Sign,e.createVerify=c.createVerify,e.Verify=c.Verify,e.createECDH=n("create-ecdh");var h=n("public-encrypt");e.publicEncrypt=h.publicEncrypt,e.privateEncrypt=h.privateEncrypt,e.publicDecrypt=h.publicDecrypt,e.privateDecrypt=h.privateDecrypt;var d=n("randomfill");e.randomFill=d.randomFill,e.randomFillSync=d.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(n,t,e){"use strict";(function(r,i){typeof e=="object"&&t!==void 0?t.exports=i():(r=typeof globalThis<"u"?globalThis:r||self).dayjs=i()})(void 0,function(){var r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",d="month",p="quarter",g="year",m="date",b="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var C=["th","st","nd","rd"],k=w%100;return"["+w+(C[(k-20)%10]||C[k]||C[0])+"]"}},O=function(w,C,k){var T=String(w);return!T||T.length>=C?w:""+Array(C+1-T.length).join(k)+w},D={s:O,z:function(w){var C=-w.utcOffset(),k=Math.abs(C),T=Math.floor(k/60),R=k%60;return(C<=0?"+":"-")+O(T,2,"0")+":"+O(R,2,"0")},m:function w(C,k){if(C.date()<k.date())return-w(k,C);var T=12*(k.year()-C.year())+(k.month()-C.month()),R=C.clone().add(T,d),F=k-R<0,H=C.clone().add(T+(F?-1:1),d);return+(-(T+(k-R)/(F?R-H:H-R))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:d,y:g,w:h,d:c,D:m,h:l,m:a,s:o,ms:s,Q:p}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},U="en",z={};z[U]=S;var q="$isDayjsObject",G=function(w){return w instanceof N||!(!w||!w[q])},tt=function w(C,k,T){var R;if(!C)return U;if(typeof C=="string"){var F=C.toLowerCase();z[F]&&(R=F),k&&(z[F]=k,R=F);var H=C.split("-");if(!R&&H.length>1)return w(H[0])}else{var rt=C.name;z[rt]=C,R=rt}return!T&&R&&(U=R),R||!T&&U},K=function(w,C){if(G(w))return w.clone();var k=typeof C=="object"?C:{};return k.date=w,k.args=arguments,new N(k)},B=D;B.l=tt,B.i=G,B.w=function(w,C){return K(w,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var N=function(){function w(k){this.$L=tt(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[q]=!0}var C=w.prototype;return C.parse=function(k){this.$d=function(T){var R=T.date,F=T.utc;if(R===null)return new Date(NaN);if(B.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var H=R.match(y);if(H){var rt=H[2]-1||0,ot=(H[7]||"0").substring(0,3);return F?new Date(Date.UTC(H[1],rt,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ot)):new Date(H[1],rt,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ot)}}return new Date(R)}(k),this.init()},C.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},C.$utils=function(){return B},C.isValid=function(){return this.$d.toString()!==b},C.isSame=function(k,T){var R=K(k);return this.startOf(T)<=R&&R<=this.endOf(T)},C.isAfter=function(k,T){return K(k)<this.startOf(T)},C.isBefore=function(k,T){return this.endOf(T)<K(k)},C.$g=function(k,T,R){return B.u(k)?this[T]:this.set(R,k)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(k,T){var R=this,F=!!B.u(T)||T,H=B.p(k),rt=function(mt,wt){var _t=B.w(R.$u?Date.UTC(R.$y,wt,mt):new Date(R.$y,wt,mt),R);return F?_t:_t.endOf(c)},ot=function(mt,wt){return B.w(R.toDate()[mt].apply(R.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(wt)),R)},dt=this.$W,$=this.$M,ct=this.$D,W="set"+(this.$u?"UTC":"");switch(H){case g:return F?rt(1,0):rt(31,11);case d:return F?rt(1,$):rt(0,$+1);case h:var V=this.$locale().weekStart||0,it=(dt<V?dt+7:dt)-V;return rt(F?ct-it:ct+(6-it),$);case c:case m:return ot(W+"Hours",0);case l:return ot(W+"Minutes",1);case a:return ot(W+"Seconds",2);case o:return ot(W+"Milliseconds",3);default:return this.clone()}},C.endOf=function(k){return this.startOf(k,!1)},C.$set=function(k,T){var R,F=B.p(k),H="set"+(this.$u?"UTC":""),rt=(R={},R[c]=H+"Date",R[m]=H+"Date",R[d]=H+"Month",R[g]=H+"FullYear",R[l]=H+"Hours",R[a]=H+"Minutes",R[o]=H+"Seconds",R[s]=H+"Milliseconds",R)[F],ot=F===c?this.$D+(T-this.$W):T;if(F===d||F===g){var dt=this.clone().set(m,1);dt.$d[rt](ot),dt.init(),this.$d=dt.set(m,Math.min(this.$D,dt.daysInMonth())).$d}else rt&&this.$d[rt](ot);return this.init(),this},C.set=function(k,T){return this.clone().$set(k,T)},C.get=function(k){return this[B.p(k)]()},C.add=function(k,T){var R,F=this;k=Number(k);var H=B.p(T),rt=function($){var ct=K(F);return B.w(ct.date(ct.date()+Math.round($*k)),F)};if(H===d)return this.set(d,this.$M+k);if(H===g)return this.set(g,this.$y+k);if(H===c)return rt(1);if(H===h)return rt(7);var ot=(R={},R[a]=r,R[l]=i,R[o]=1e3,R)[H]||1,dt=this.$d.getTime()+k*ot;return B.w(dt,this)},C.subtract=function(k,T){return this.add(-1*k,T)},C.format=function(k){var T=this,R=this.$locale();if(!this.isValid())return R.invalidDate||b;var F=k||"YYYY-MM-DDTHH:mm:ssZ",H=B.z(this),rt=this.$H,ot=this.$m,dt=this.$M,$=R.weekdays,ct=R.months,W=R.meridiem,V=function(wt,_t,Ct,Ft){return wt&&(wt[_t]||wt(T,F))||Ct[_t].slice(0,Ft)},it=function(wt){return B.s(rt%12||12,wt,"0")},mt=W||function(wt,_t,Ct){var Ft=wt<12?"AM":"PM";return Ct?Ft.toLowerCase():Ft};return F.replace(x,function(wt,_t){return _t||function(Ct){switch(Ct){case"YY":return String(T.$y).slice(-2);case"YYYY":return B.s(T.$y,4,"0");case"M":return dt+1;case"MM":return B.s(dt+1,2,"0");case"MMM":return V(R.monthsShort,dt,ct,3);case"MMMM":return V(ct,dt);case"D":return T.$D;case"DD":return B.s(T.$D,2,"0");case"d":return String(T.$W);case"dd":return V(R.weekdaysMin,T.$W,$,2);case"ddd":return V(R.weekdaysShort,T.$W,$,3);case"dddd":return $[T.$W];case"H":return String(rt);case"HH":return B.s(rt,2,"0");case"h":return it(1);case"hh":return it(2);case"a":return mt(rt,ot,!0);case"A":return mt(rt,ot,!1);case"m":return String(ot);case"mm":return B.s(ot,2,"0");case"s":return String(T.$s);case"ss":return B.s(T.$s,2,"0");case"SSS":return B.s(T.$ms,3,"0");case"Z":return H}return null}(wt)||H.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(k,T,R){var F,H=this,rt=B.p(T),ot=K(k),dt=(ot.utcOffset()-this.utcOffset())*r,$=this-ot,ct=function(){return B.m(H,ot)};switch(rt){case g:F=ct()/12;break;case d:F=ct();break;case p:F=ct()/3;break;case h:F=($-dt)/6048e5;break;case c:F=($-dt)/864e5;break;case l:F=$/i;break;case a:F=$/r;break;case o:F=$/1e3;break;default:F=$}return R?F:B.a(F)},C.daysInMonth=function(){return this.endOf(d).$D},C.$locale=function(){return z[this.$L]},C.locale=function(k,T){if(!k)return this.$L;var R=this.clone(),F=tt(k,T,!0);return F&&(R.$L=F),R},C.clone=function(){return B.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},w}(),Z=N.prototype;return K.prototype=Z,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",g],["$D",m]].forEach(function(w){Z[w[1]]=function(C){return this.$g(C,w[0],w[1])}}),K.extend=function(w,C){return w.$i||(w(C,N,K),w.$i=!0),K},K.locale=tt,K.isDayjs=G,K.unix=function(w){return K(1e3*w)},K.en=z[U],K.Ls=z,K.p={},K})},{}],392:[function(n,t,e){"use strict";(function(r,i){typeof e=="object"&&t!==void 0?t.exports=i():(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=i()})(void 0,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d\d/,o=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,l={},c=function(y){return(y=+y)+(y>68?1900:2e3)},h=function(y){return function(x){this[y]=+x}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(x){if(!x||x==="Z")return 0;var S=x.match(/([+-]|\d\d)/g),O=60*S[1]+(+S[2]||0);return O===0?0:S[0]==="+"?-O:O}(y)}],p=function(y){var x=l[y];return x&&(x.indexOf?x:x.s.concat(x.f))},g=function(y,x){var S,O=l.meridiem;if(O){for(var D=1;D<=24;D+=1)if(y.indexOf(O(D,0,x))>-1){S=D>12;break}}else S=y===(x?"pm":"PM");return S},m={A:[a,function(y){this.afternoon=g(y,!1)}],a:[a,function(y){this.afternoon=g(y,!0)}],S:[/\d/,function(y){this.milliseconds=100*+y}],SS:[s,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[o,h("seconds")],ss:[o,h("seconds")],m:[o,h("minutes")],mm:[o,h("minutes")],H:[o,h("hours")],h:[o,h("hours")],HH:[o,h("hours")],hh:[o,h("hours")],D:[o,h("day")],DD:[s,h("day")],Do:[a,function(y){var x=l.ordinal,S=y.match(/\d+/);if(this.day=S[0],x)for(var O=1;O<=31;O+=1)x(O).replace(/\[|\]/g,"")===y&&(this.day=O)}],M:[o,h("month")],MM:[s,h("month")],MMM:[a,function(y){var x=p("months"),S=(p("monthsShort")||x.map(function(O){return O.slice(0,3)})).indexOf(y)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[a,function(y){var x=p("months").indexOf(y)+1;if(x<1)throw new Error;this.month=x%12||x}],Y:[/[+-]?\d+/,h("year")],YY:[s,function(y){this.year=c(y)}],YYYY:[/\d{4}/,h("year")],Z:d,ZZ:d};function b(y){var x,S;x=y,S=l&&l.formats;for(var O=(y=x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(K,B,N){var Z=N&&N.toUpperCase();return B||S[N]||r[N]||S[Z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,C,k){return C||k.slice(1)})})).match(i),D=O.length,U=0;U<D;U+=1){var z=O[U],q=m[z],G=q&&q[0],tt=q&&q[1];O[U]=tt?{regex:G,parser:tt}:z.replace(/^\[|\]$/g,"")}return function(K){for(var B={},N=0,Z=0;N<D;N+=1){var w=O[N];if(typeof w=="string")Z+=w.length;else{var C=w.regex,k=w.parser,T=K.slice(Z),R=C.exec(T)[0];k.call(B,R),K=K.replace(R,"")}}return function(F){var H=F.afternoon;if(H!==void 0){var rt=F.hours;H?rt<12&&(F.hours+=12):rt===12&&(F.hours=0),delete F.afternoon}}(B),B}}return function(y,x,S){S.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(c=y.parseTwoDigitYear);var O=x.prototype,D=O.parse;O.parse=function(U){var z=U.date,q=U.utc,G=U.args;this.$u=q;var tt=G[1];if(typeof tt=="string"){var K=G[2]===!0,B=G[3]===!0,N=K||B,Z=G[2];B&&(Z=G[2]),l=this.$locale(),!K&&Z&&(l=S.Ls[Z]),this.$d=function(T,R,F){try{if(["x","X"].indexOf(R)>-1)return new Date((R==="X"?1e3:1)*T);var H=b(R)(T),rt=H.year,ot=H.month,dt=H.day,$=H.hours,ct=H.minutes,W=H.seconds,V=H.milliseconds,it=H.zone,mt=new Date,wt=dt||(rt||ot?1:mt.getDate()),_t=rt||mt.getFullYear(),Ct=0;rt&&!ot||(Ct=ot>0?ot-1:mt.getMonth());var Ft=$||0,It=ct||0,vt=W||0,kt=V||0;return it?new Date(Date.UTC(_t,Ct,wt,Ft,It,vt,kt+60*it.offset*1e3)):F?new Date(Date.UTC(_t,Ct,wt,Ft,It,vt,kt)):new Date(_t,Ct,wt,Ft,It,vt,kt)}catch{return new Date("")}}(z,tt,q),this.init(),Z&&Z!==!0&&(this.$L=this.locale(Z).$L),N&&z!=this.format(tt)&&(this.$d=new Date("")),l={}}else if(tt instanceof Array)for(var w=tt.length,C=1;C<=w;C+=1){G[1]=tt[C-1];var k=S.apply(this,G);if(k.isValid()){this.$d=k.$d,this.$L=k.$L,this.init();break}C===w&&(this.$d=new Date(""))}else D.call(this,U)}}})},{}],393:[function(n,t,e){"use strict";(function(r,i){typeof e=="object"&&t!==void 0?t.exports=i():(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=i()})(void 0,function(){var r="minute",i=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(o,a,l){var c=a.prototype;l.utc=function(y){var x={date:y,utc:!0,args:arguments};return new a(x)},c.utc=function(y){var x=l(this.toDate(),{locale:this.$L,utc:!0});return y?x.add(this.utcOffset(),r):x},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var h=c.parse;c.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),h.call(this,y)};var d=c.init;c.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else d.call(this)};var p=c.utcOffset;c.utcOffset=function(y,x){var S=this.$utils().u;if(S(y))return this.$u?0:S(this.$offset)?p.call(this):this.$offset;if(typeof y=="string"&&(y=function(z){z===void 0&&(z="");var q=z.match(i);if(!q)return null;var G=(""+q[0]).match(s)||["-",0,0],tt=G[0],K=60*+G[1]+ +G[2];return K===0?0:tt==="+"?K:-K}(y))===null)return this;var O=Math.abs(y)<=16?60*y:y,D=this;if(x)return D.$offset=O,D.$u=y===0,D;if(y!==0){var U=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(D=this.local().add(O+U,r)).$offset=O,D.$x.$localOffset=U}else D=this.utc();return D};var g=c.format;c.format=function(y){var x=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,x)},c.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var m=c.toDate;c.toDate=function(y){return y==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var b=c.diff;c.diff=function(y,x,S){if(y&&this.$u===y.$u)return b.call(this,y,x,S);var O=this.local(),D=l(y).local();return b.call(O,D,x,S)}}})},{}],394:[function(n,t,e){"use strict";e.utils=n("./des/utils"),e.Cipher=n("./des/cipher"),e.DES=n("./des/des"),e.CBC=n("./des/cbc"),e.EDE=n("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(n,t,e){"use strict";var r=n("minimalistic-assert"),i=n("inherits"),s={};function o(a){r.equal(a.length,8,"Invalid IV length"),this.iv=new Array(8);for(var l=0;l<this.iv.length;l++)this.iv[l]=a[l]}e.instantiate=function(a){function l(p){a.call(this,p),this._cbcInit()}i(l,a);for(var c=Object.keys(s),h=0;h<c.length;h++){var d=c[h];l.prototype[d]=s[d]}return l.create=function(p){return new l(p)},l},s._cbcInit=function(){var a=new o(this.options.iv);this._cbcState=a},s._update=function(a,l,c,h){var d=this._cbcState,p=this.constructor.super_.prototype,g=d.iv;if(this.type==="encrypt"){for(var m=0;m<this.blockSize;m++)g[m]^=a[l+m];for(p._update.call(this,g,0,c,h),m=0;m<this.blockSize;m++)g[m]=c[h+m]}else{for(p._update.call(this,a,l,c,h),m=0;m<this.blockSize;m++)c[h+m]^=g[m];for(m=0;m<this.blockSize;m++)g[m]=a[l+m]}}},{inherits:440,"minimalistic-assert":453}],396:[function(n,t,e){"use strict";var r=n("minimalistic-assert");function i(s){this.options=s,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=s.padding!==!1}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(s){return s.length===0?[]:this.type==="decrypt"?this._updateDecrypt(s):this._updateEncrypt(s)},i.prototype._buffer=function(s,o){for(var a=Math.min(this.buffer.length-this.bufferOff,s.length-o),l=0;l<a;l++)this.buffer[this.bufferOff+l]=s[o+l];return this.bufferOff+=a,a},i.prototype._flushBuffer=function(s,o){return this._update(this.buffer,0,s,o),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(s){var o=0,a=0,l=(this.bufferOff+s.length)/this.blockSize|0,c=new Array(l*this.blockSize);this.bufferOff!==0&&(o+=this._buffer(s,o),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(c,a)));for(var h=s.length-(s.length-o)%this.blockSize;o<h;o+=this.blockSize)this._update(s,o,c,a),a+=this.blockSize;for(;o<s.length;o++,this.bufferOff++)this.buffer[this.bufferOff]=s[o];return c},i.prototype._updateDecrypt=function(s){for(var o=0,a=0,l=Math.ceil((this.bufferOff+s.length)/this.blockSize)-1,c=new Array(l*this.blockSize);l>0;l--)o+=this._buffer(s,o),a+=this._flushBuffer(c,a);return o+=this._buffer(s,o),c},i.prototype.final=function(s){var o,a;return s&&(o=this.update(s)),a=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),o?o.concat(a):a},i.prototype._pad=function(s,o){if(o===0)return!1;for(;o<s.length;)s[o++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var s=new Array(this.blockSize);return this._update(this.buffer,0,s,0),s},i.prototype._unpad=function(s){return s},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var s=new Array(this.blockSize);return this._flushBuffer(s,0),this._unpad(s)}},{"minimalistic-assert":453}],397:[function(n,t,e){"use strict";var r=n("minimalistic-assert"),i=n("inherits"),s=n("./utils"),o=n("./cipher");function a(){this.tmp=new Array(2),this.keys=null}function l(h){o.call(this,h);var d=new a;this._desState=d,this.deriveKeys(d,h.key)}i(l,o),t.exports=l,l.create=function(h){return new l(h)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];l.prototype.deriveKeys=function(h,d){h.keys=new Array(32),r.equal(d.length,this.blockSize,"Invalid key length");var p=s.readUInt32BE(d,0),g=s.readUInt32BE(d,4);s.pc1(p,g,h.tmp,0),p=h.tmp[0],g=h.tmp[1];for(var m=0;m<h.keys.length;m+=2){var b=c[m>>>1];p=s.r28shl(p,b),g=s.r28shl(g,b),s.pc2(p,g,h.keys,m)}},l.prototype._update=function(h,d,p,g){var m=this._desState,b=s.readUInt32BE(h,d),y=s.readUInt32BE(h,d+4);s.ip(b,y,m.tmp,0),b=m.tmp[0],y=m.tmp[1],this.type==="encrypt"?this._encrypt(m,b,y,m.tmp,0):this._decrypt(m,b,y,m.tmp,0),b=m.tmp[0],y=m.tmp[1],s.writeUInt32BE(p,b,g),s.writeUInt32BE(p,y,g+4)},l.prototype._pad=function(h,d){if(this.padding===!1)return!1;for(var p=h.length-d,g=d;g<h.length;g++)h[g]=p;return!0},l.prototype._unpad=function(h){if(this.padding===!1)return h;for(var d=h[h.length-1],p=h.length-d;p<h.length;p++)r.equal(h[p],d);return h.slice(0,h.length-d)},l.prototype._encrypt=function(h,d,p,g,m){for(var b=d,y=p,x=0;x<h.keys.length;x+=2){var S=h.keys[x],O=h.keys[x+1];s.expand(y,h.tmp,0),S^=h.tmp[0],O^=h.tmp[1];var D=s.substitute(S,O),U=y;y=(b^s.permute(D))>>>0,b=U}s.rip(y,b,g,m)},l.prototype._decrypt=function(h,d,p,g,m){for(var b=p,y=d,x=h.keys.length-2;x>=0;x-=2){var S=h.keys[x],O=h.keys[x+1];s.expand(b,h.tmp,0),S^=h.tmp[0],O^=h.tmp[1];var D=s.substitute(S,O),U=b;b=(y^s.permute(D))>>>0,y=U}s.rip(b,y,g,m)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(n,t,e){"use strict";var r=n("minimalistic-assert"),i=n("inherits"),s=n("./cipher"),o=n("./des");function a(c,h){r.equal(h.length,24,"Invalid key length");var d=h.slice(0,8),p=h.slice(8,16),g=h.slice(16,24);this.ciphers=c==="encrypt"?[o.create({type:"encrypt",key:d}),o.create({type:"decrypt",key:p}),o.create({type:"encrypt",key:g})]:[o.create({type:"decrypt",key:g}),o.create({type:"encrypt",key:p}),o.create({type:"decrypt",key:d})]}function l(c){s.call(this,c);var h=new a(this.type,this.options.key);this._edeState=h}i(l,s),t.exports=l,l.create=function(c){return new l(c)},l.prototype._update=function(c,h,d,p){var g=this._edeState;g.ciphers[0]._update(c,h,d,p),g.ciphers[1]._update(d,p,d,p),g.ciphers[2]._update(d,p,d,p)},l.prototype._pad=o.prototype._pad,l.prototype._unpad=o.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(n,t,e){"use strict";e.readUInt32BE=function(o,a){return(o[0+a]<<24|o[1+a]<<16|o[2+a]<<8|o[3+a])>>>0},e.writeUInt32BE=function(o,a,l){o[0+l]=a>>>24,o[1+l]=a>>>16&255,o[2+l]=a>>>8&255,o[3+l]=255&a},e.ip=function(o,a,l,c){for(var h=0,d=0,p=6;p>=0;p-=2){for(var g=0;g<=24;g+=8)h<<=1,h|=a>>>g+p&1;for(g=0;g<=24;g+=8)h<<=1,h|=o>>>g+p&1}for(p=6;p>=0;p-=2){for(g=1;g<=25;g+=8)d<<=1,d|=a>>>g+p&1;for(g=1;g<=25;g+=8)d<<=1,d|=o>>>g+p&1}l[c+0]=h>>>0,l[c+1]=d>>>0},e.rip=function(o,a,l,c){for(var h=0,d=0,p=0;p<4;p++)for(var g=24;g>=0;g-=8)h<<=1,h|=a>>>g+p&1,h<<=1,h|=o>>>g+p&1;for(p=4;p<8;p++)for(g=24;g>=0;g-=8)d<<=1,d|=a>>>g+p&1,d<<=1,d|=o>>>g+p&1;l[c+0]=h>>>0,l[c+1]=d>>>0},e.pc1=function(o,a,l,c){for(var h=0,d=0,p=7;p>=5;p--){for(var g=0;g<=24;g+=8)h<<=1,h|=a>>g+p&1;for(g=0;g<=24;g+=8)h<<=1,h|=o>>g+p&1}for(g=0;g<=24;g+=8)h<<=1,h|=a>>g+p&1;for(p=1;p<=3;p++){for(g=0;g<=24;g+=8)d<<=1,d|=a>>g+p&1;for(g=0;g<=24;g+=8)d<<=1,d|=o>>g+p&1}for(g=0;g<=24;g+=8)d<<=1,d|=o>>g+p&1;l[c+0]=h>>>0,l[c+1]=d>>>0},e.r28shl=function(o,a){return o<<a&268435455|o>>>28-a};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(o,a,l,c){for(var h=0,d=0,p=r.length>>>1,g=0;g<p;g++)h<<=1,h|=o>>>r[g]&1;for(g=p;g<r.length;g++)d<<=1,d|=a>>>r[g]&1;l[c+0]=h>>>0,l[c+1]=d>>>0},e.expand=function(o,a,l){var c=0,h=0;c=(1&o)<<5|o>>>27;for(var d=23;d>=15;d-=4)c<<=6,c|=o>>>d&63;for(d=11;d>=3;d-=4)h|=o>>>d&63,h<<=6;h|=(31&o)<<1|o>>>31,a[l+0]=c>>>0,a[l+1]=h>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(o,a){for(var l=0,c=0;c<4;c++)l<<=4,l|=i[64*c+(o>>>18-6*c&63)];for(c=0;c<4;c++)l<<=4,l|=i[256+64*c+(a>>>18-6*c&63)];return l>>>0};var s=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(o){for(var a=0,l=0;l<s.length;l++)a<<=1,a|=o>>>s[l]&1;return a>>>0},e.padSplit=function(o,a,l){for(var c=o.toString(2);c.length<a;)c="0"+c;for(var h=[],d=0;d<a;d+=l)h.push(c.slice(d,d+l));return h.join(" ")}},{}],400:[function(n,t,e){(function(r){(function(){"use strict";var i=n("./lib/generatePrime"),s=n("./lib/primes.json"),o=n("./lib/dh"),a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(l){var c=new r(s[l].prime,"hex"),h=new r(s[l].gen,"hex");return new o(c,h)},e.createDiffieHellman=e.DiffieHellman=function l(c,h,d,p){return r.isBuffer(h)||a[h]===void 0?l(c,"binary",h,d):(h=h||"binary",p=p||"binary",d=d||new r([2]),r.isBuffer(d)||(d=new r(d,p)),typeof c=="number"?new o(i(c,d),d,!0):(r.isBuffer(c)||(c=new r(c,h)),new o(c,d,!0)))}}).call(this)}).call(this,n("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(n,t,e){(function(r){(function(){"use strict";var i=n("bn.js"),s=new(n("miller-rabin")),o=new i(24),a=new i(11),l=new i(10),c=new i(3),h=new i(7),d=n("./generatePrime"),p=n("randombytes");function g(S,O){return O=O||"utf8",r.isBuffer(S)||(S=new r(S,O)),this._pub=new i(S),this}function m(S,O){return O=O||"utf8",r.isBuffer(S)||(S=new r(S,O)),this._priv=new i(S),this}t.exports=y;var b={};function y(S,O,D){this.setGenerator(O),this.__prime=new i(S),this._prime=i.mont(this.__prime),this._primeLen=S.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,D?(this.setPublicKey=g,this.setPrivateKey=m):this._primeCode=8}function x(S,O){var D=new r(S.toArray());return O?D.toString(O):D}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(S,O){var D=O.toString("hex"),U=[D,S.toString(16)].join("_");if(U in b)return b[U];var z,q=0;if(S.isEven()||!d.simpleSieve||!d.fermatTest(S)||!s.test(S))return q+=1,q+=D==="02"||D==="05"?8:4,b[U]=q,q;switch(s.test(S.shrn(1))||(q+=2),D){case"02":S.mod(o).cmp(a)&&(q+=8);break;case"05":(z=S.mod(l)).cmp(c)&&z.cmp(h)&&(q+=8);break;default:q+=4}return b[U]=q,q}(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new i(p(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(S){var O=(S=(S=new i(S)).toRed(this._prime)).redPow(this._priv).fromRed(),D=new r(O.toArray()),U=this.getPrime();if(D.length<U.length){var z=new r(U.length-D.length);z.fill(0),D=r.concat([z,D])}return D},y.prototype.getPublicKey=function(S){return x(this._pub,S)},y.prototype.getPrivateKey=function(S){return x(this._priv,S)},y.prototype.getPrime=function(S){return x(this.__prime,S)},y.prototype.getGenerator=function(S){return x(this._gen,S)},y.prototype.setGenerator=function(S,O){return O=O||"utf8",r.isBuffer(S)||(S=new r(S,O)),this.__gen=S,this._gen=new i(S),this}}).call(this)}).call(this,n("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(n,t,e){"use strict";var r=n("randombytes");t.exports=S,S.simpleSieve=y,S.fermatTest=x;var i=n("bn.js"),s=new i(24),o=new(n("miller-rabin")),a=new i(1),l=new i(2),c=new i(5),h=(new i(16),new i(8),new i(10)),d=new i(3),p=(new i(7),new i(11)),g=new i(4),m=(new i(12),null);function b(){if(m!==null)return m;var O=[];O[0]=2;for(var D=1,U=3;U<1048576;U+=2){for(var z=Math.ceil(Math.sqrt(U)),q=0;q<D&&O[q]<=z&&U%O[q]!=0;q++);D!==q&&O[q]<=z||(O[D++]=U)}return m=O,O}function y(O){for(var D=b(),U=0;U<D.length;U++)if(O.modn(D[U])===0)return O.cmpn(D[U])===0;return!0}function x(O){var D=i.mont(O);return l.toRed(D).redPow(O.subn(1)).fromRed().cmpn(1)===0}function S(O,D){if(O<16)return new i(D===2||D===5?[140,123]:[140,39]);var U,z;for(D=new i(D);;){for(U=new i(r(Math.ceil(O/8)));U.bitLength()>O;)U.ishrn(1);if(U.isEven()&&U.iadd(a),U.testn(1)||U.iadd(l),D.cmp(l)){if(!D.cmp(c))for(;U.mod(h).cmp(d);)U.iadd(g)}else for(;U.mod(s).cmp(p);)U.iadd(g);if(y(z=U.shrn(1))&&y(U)&&x(z)&&x(U)&&o.test(z)&&o.test(U))return U}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(n,t,e){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],405:[function(n,t,e){"use strict";var r=e;r.version=n("../package.json").version,r.utils=n("./elliptic/utils"),r.rand=n("brorand"),r.curve=n("./elliptic/curve"),r.curves=n("./elliptic/curves"),r.ec=n("./elliptic/ec"),r.eddsa=n("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(n,t,e){"use strict";var r=n("bn.js"),i=n("../utils"),s=i.getNAF,o=i.getJSF,a=i.assert;function l(h,d){this.type=h,this.p=new r(d.p,16),this.red=d.prime?r.red(d.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=d.n&&new r(d.n,16),this.g=d.g&&this.pointFromJSON(d.g,d.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var p=this.n&&this.p.div(this.n);!p||p.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(h,d){this.curve=h,this.type=d,this.precomputed=null}t.exports=l,l.prototype.point=function(){throw new Error("Not implemented")},l.prototype.validate=function(){throw new Error("Not implemented")},l.prototype._fixedNafMul=function(h,d){a(h.precomputed);var p=h._getDoubles(),g=s(d,1,this._bitLength),m=(1<<p.step+1)-(p.step%2==0?2:1);m/=3;var b,y,x=[];for(b=0;b<g.length;b+=p.step){y=0;for(var S=b+p.step-1;S>=b;S--)y=(y<<1)+g[S];x.push(y)}for(var O=this.jpoint(null,null,null),D=this.jpoint(null,null,null),U=m;U>0;U--){for(b=0;b<x.length;b++)(y=x[b])===U?D=D.mixedAdd(p.points[b]):y===-U&&(D=D.mixedAdd(p.points[b].neg()));O=O.add(D)}return O.toP()},l.prototype._wnafMul=function(h,d){var p=4,g=h._getNAFPoints(p);p=g.wnd;for(var m=g.points,b=s(d,p,this._bitLength),y=this.jpoint(null,null,null),x=b.length-1;x>=0;x--){for(var S=0;x>=0&&b[x]===0;x--)S++;if(x>=0&&S++,y=y.dblp(S),x<0)break;var O=b[x];a(O!==0),y=h.type==="affine"?O>0?y.mixedAdd(m[O-1>>1]):y.mixedAdd(m[-O-1>>1].neg()):O>0?y.add(m[O-1>>1]):y.add(m[-O-1>>1].neg())}return h.type==="affine"?y.toP():y},l.prototype._wnafMulAdd=function(h,d,p,g,m){var b,y,x,S=this._wnafT1,O=this._wnafT2,D=this._wnafT3,U=0;for(b=0;b<g;b++){var z=(x=d[b])._getNAFPoints(h);S[b]=z.wnd,O[b]=z.points}for(b=g-1;b>=1;b-=2){var q=b-1,G=b;if(S[q]===1&&S[G]===1){var tt=[d[q],null,null,d[G]];d[q].y.cmp(d[G].y)===0?(tt[1]=d[q].add(d[G]),tt[2]=d[q].toJ().mixedAdd(d[G].neg())):d[q].y.cmp(d[G].y.redNeg())===0?(tt[1]=d[q].toJ().mixedAdd(d[G]),tt[2]=d[q].add(d[G].neg())):(tt[1]=d[q].toJ().mixedAdd(d[G]),tt[2]=d[q].toJ().mixedAdd(d[G].neg()));var K=[-3,-1,-5,-7,0,7,5,1,3],B=o(p[q],p[G]);for(U=Math.max(B[0].length,U),D[q]=new Array(U),D[G]=new Array(U),y=0;y<U;y++){var N=0|B[0][y],Z=0|B[1][y];D[q][y]=K[3*(N+1)+(Z+1)],D[G][y]=0,O[q]=tt}}else D[q]=s(p[q],S[q],this._bitLength),D[G]=s(p[G],S[G],this._bitLength),U=Math.max(D[q].length,U),U=Math.max(D[G].length,U)}var w=this.jpoint(null,null,null),C=this._wnafT4;for(b=U;b>=0;b--){for(var k=0;b>=0;){var T=!0;for(y=0;y<g;y++)C[y]=0|D[y][b],C[y]!==0&&(T=!1);if(!T)break;k++,b--}if(b>=0&&k++,w=w.dblp(k),b<0)break;for(y=0;y<g;y++){var R=C[y];R!==0&&(R>0?x=O[y][R-1>>1]:R<0&&(x=O[y][-R-1>>1].neg()),w=x.type==="affine"?w.mixedAdd(x):w.add(x))}}for(b=0;b<g;b++)O[b]=null;return m?w:w.toP()},l.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},l.prototype.decodePoint=function(h,d){h=i.toArray(h,d);var p=this.p.byteLength();if((h[0]===4||h[0]===6||h[0]===7)&&h.length-1==2*p)return h[0]===6?a(h[h.length-1]%2==0):h[0]===7&&a(h[h.length-1]%2==1),this.point(h.slice(1,1+p),h.slice(1+p,1+2*p));if((h[0]===2||h[0]===3)&&h.length-1===p)return this.pointFromX(h.slice(1,1+p),h[0]===3);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(h){return this.encode(h,!0)},c.prototype._encode=function(h){var d=this.curve.p.byteLength(),p=this.getX().toArray("be",d);return h?[this.getY().isEven()?2:3].concat(p):[4].concat(p,this.getY().toArray("be",d))},c.prototype.encode=function(h,d){return i.encode(this._encode(d),h)},c.prototype.precompute=function(h){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,h),d.beta=this._getBeta(),this.precomputed=d,this},c.prototype._hasDoubles=function(h){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((h.bitLength()+1)/d.step)},c.prototype._getDoubles=function(h,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var p=[this],g=this,m=0;m<d;m+=h){for(var b=0;b<h;b++)g=g.dbl();p.push(g)}return{step:h,points:p}},c.prototype._getNAFPoints=function(h){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],p=(1<<h)-1,g=p===1?null:this.dbl(),m=1;m<p;m++)d[m]=d[m-1].add(g);return{wnd:h,points:d}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(h){for(var d=this,p=0;p<h;p++)d=d.dbl();return d}},{"../utils":419,"bn.js":420}],407:[function(n,t,e){"use strict";var r=n("../utils"),i=n("bn.js"),s=n("inherits"),o=n("./base"),a=r.assert;function l(h){this.twisted=(0|h.a)!=1,this.mOneA=this.twisted&&(0|h.a)==-1,this.extended=this.mOneA,o.call(this,"edwards",h),this.a=new i(h.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(h.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(h.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|h.c)==1}function c(h,d,p,g,m){o.BasePoint.call(this,h,"projective"),d===null&&p===null&&g===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(d,16),this.y=new i(p,16),this.z=g?new i(g,16):this.curve.one,this.t=m&&new i(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(l,o),t.exports=l,l.prototype._mulA=function(h){return this.mOneA?h.redNeg():this.a.redMul(h)},l.prototype._mulC=function(h){return this.oneC?h:this.c.redMul(h)},l.prototype.jpoint=function(h,d,p,g){return this.point(h,d,p,g)},l.prototype.pointFromX=function(h,d){(h=new i(h,16)).red||(h=h.toRed(this.red));var p=h.redSqr(),g=this.c2.redSub(this.a.redMul(p)),m=this.one.redSub(this.c2.redMul(this.d).redMul(p)),b=g.redMul(m.redInvm()),y=b.redSqrt();if(y.redSqr().redSub(b).cmp(this.zero)!==0)throw new Error("invalid point");var x=y.fromRed().isOdd();return(d&&!x||!d&&x)&&(y=y.redNeg()),this.point(h,y)},l.prototype.pointFromY=function(h,d){(h=new i(h,16)).red||(h=h.toRed(this.red));var p=h.redSqr(),g=p.redSub(this.c2),m=p.redMul(this.d).redMul(this.c2).redSub(this.a),b=g.redMul(m.redInvm());if(b.cmp(this.zero)===0){if(d)throw new Error("invalid point");return this.point(this.zero,h)}var y=b.redSqrt();if(y.redSqr().redSub(b).cmp(this.zero)!==0)throw new Error("invalid point");return y.fromRed().isOdd()!==d&&(y=y.redNeg()),this.point(y,h)},l.prototype.validate=function(h){if(h.isInfinity())return!0;h.normalize();var d=h.x.redSqr(),p=h.y.redSqr(),g=d.redMul(this.a).redAdd(p),m=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(p)));return g.cmp(m)===0},s(c,o.BasePoint),l.prototype.pointFromJSON=function(h){return c.fromJSON(this,h)},l.prototype.point=function(h,d,p,g){return new c(this,h,d,p,g)},c.fromJSON=function(h,d){return new c(h,d[0],d[1],d[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},c.prototype._extDbl=function(){var h=this.x.redSqr(),d=this.y.redSqr(),p=this.z.redSqr();p=p.redIAdd(p);var g=this.curve._mulA(h),m=this.x.redAdd(this.y).redSqr().redISub(h).redISub(d),b=g.redAdd(d),y=b.redSub(p),x=g.redSub(d),S=m.redMul(y),O=b.redMul(x),D=m.redMul(x),U=y.redMul(b);return this.curve.point(S,O,U,D)},c.prototype._projDbl=function(){var h,d,p,g,m,b,y=this.x.redAdd(this.y).redSqr(),x=this.x.redSqr(),S=this.y.redSqr();if(this.curve.twisted){var O=(g=this.curve._mulA(x)).redAdd(S);this.zOne?(h=y.redSub(x).redSub(S).redMul(O.redSub(this.curve.two)),d=O.redMul(g.redSub(S)),p=O.redSqr().redSub(O).redSub(O)):(m=this.z.redSqr(),b=O.redSub(m).redISub(m),h=y.redSub(x).redISub(S).redMul(b),d=O.redMul(g.redSub(S)),p=O.redMul(b))}else g=x.redAdd(S),m=this.curve._mulC(this.z).redSqr(),b=g.redSub(m).redSub(m),h=this.curve._mulC(y.redISub(g)).redMul(b),d=this.curve._mulC(g).redMul(x.redISub(S)),p=g.redMul(b);return this.curve.point(h,d,p)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(h){var d=this.y.redSub(this.x).redMul(h.y.redSub(h.x)),p=this.y.redAdd(this.x).redMul(h.y.redAdd(h.x)),g=this.t.redMul(this.curve.dd).redMul(h.t),m=this.z.redMul(h.z.redAdd(h.z)),b=p.redSub(d),y=m.redSub(g),x=m.redAdd(g),S=p.redAdd(d),O=b.redMul(y),D=x.redMul(S),U=b.redMul(S),z=y.redMul(x);return this.curve.point(O,D,z,U)},c.prototype._projAdd=function(h){var d,p,g=this.z.redMul(h.z),m=g.redSqr(),b=this.x.redMul(h.x),y=this.y.redMul(h.y),x=this.curve.d.redMul(b).redMul(y),S=m.redSub(x),O=m.redAdd(x),D=this.x.redAdd(this.y).redMul(h.x.redAdd(h.y)).redISub(b).redISub(y),U=g.redMul(S).redMul(D);return this.curve.twisted?(d=g.redMul(O).redMul(y.redSub(this.curve._mulA(b))),p=S.redMul(O)):(d=g.redMul(O).redMul(y.redSub(b)),p=this.curve._mulC(S).redMul(O)),this.curve.point(U,d,p)},c.prototype.add=function(h){return this.isInfinity()?h:h.isInfinity()?this:this.curve.extended?this._extAdd(h):this._projAdd(h)},c.prototype.mul=function(h){return this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve._wnafMul(this,h)},c.prototype.mulAdd=function(h,d,p){return this.curve._wnafMulAdd(1,[this,d],[h,p],2,!1)},c.prototype.jmulAdd=function(h,d,p){return this.curve._wnafMulAdd(1,[this,d],[h,p],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var h=this.z.redInvm();return this.x=this.x.redMul(h),this.y=this.y.redMul(h),this.t&&(this.t=this.t.redMul(h)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(h){return this===h||this.getX().cmp(h.getX())===0&&this.getY().cmp(h.getY())===0},c.prototype.eqXToP=function(h){var d=h.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(d)===0)return!0;for(var p=h.clone(),g=this.curve.redN.redMul(this.z);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(d.redIAdd(g),this.x.cmp(d)===0)return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(n,t,e){"use strict";var r=e;r.base=n("./base"),r.short=n("./short"),r.mont=n("./mont"),r.edwards=n("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(n,t,e){"use strict";var r=n("bn.js"),i=n("inherits"),s=n("./base"),o=n("../utils");function a(c){s.call(this,"mont",c),this.a=new r(c.a,16).toRed(this.red),this.b=new r(c.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(c,h,d){s.BasePoint.call(this,c,"projective"),h===null&&d===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(h,16),this.z=new r(d,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,s),t.exports=a,a.prototype.validate=function(c){var h=c.normalize().x,d=h.redSqr(),p=d.redMul(h).redAdd(d.redMul(this.a)).redAdd(h);return p.redSqrt().redSqr().cmp(p)===0},i(l,s.BasePoint),a.prototype.decodePoint=function(c,h){return this.point(o.toArray(c,h),1)},a.prototype.point=function(c,h){return new l(this,c,h)},a.prototype.pointFromJSON=function(c){return l.fromJSON(this,c)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(c,h){return new l(c,h[0],h[1]||c.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.z.cmpn(0)===0},l.prototype.dbl=function(){var c=this.x.redAdd(this.z).redSqr(),h=this.x.redSub(this.z).redSqr(),d=c.redSub(h),p=c.redMul(h),g=d.redMul(h.redAdd(this.curve.a24.redMul(d)));return this.curve.point(p,g)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(c,h){var d=this.x.redAdd(this.z),p=this.x.redSub(this.z),g=c.x.redAdd(c.z),m=c.x.redSub(c.z).redMul(d),b=g.redMul(p),y=h.z.redMul(m.redAdd(b).redSqr()),x=h.x.redMul(m.redISub(b).redSqr());return this.curve.point(y,x)},l.prototype.mul=function(c){for(var h=c.clone(),d=this,p=this.curve.point(null,null),g=[];h.cmpn(0)!==0;h.iushrn(1))g.push(h.andln(1));for(var m=g.length-1;m>=0;m--)g[m]===0?(d=d.diffAdd(p,this),p=p.dbl()):(p=d.diffAdd(p,this),d=d.dbl());return p},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(c){return this.getX().cmp(c.getX())===0},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(n,t,e){"use strict";var r=n("../utils"),i=n("bn.js"),s=n("inherits"),o=n("./base"),a=r.assert;function l(d){o.call(this,"short",d),this.a=new i(d.a,16).toRed(this.red),this.b=new i(d.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(d),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(d,p,g,m){o.BasePoint.call(this,d,"affine"),p===null&&g===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(p,16),this.y=new i(g,16),m&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(d,p,g,m){o.BasePoint.call(this,d,"jacobian"),p===null&&g===null&&m===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(p,16),this.y=new i(g,16),this.z=new i(m,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(l,o),t.exports=l,l.prototype._getEndomorphism=function(d){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var p,g;if(d.beta)p=new i(d.beta,16).toRed(this.red);else{var m=this._getEndoRoots(this.p);p=(p=m[0].cmp(m[1])<0?m[0]:m[1]).toRed(this.red)}if(d.lambda)g=new i(d.lambda,16);else{var b=this._getEndoRoots(this.n);this.g.mul(b[0]).x.cmp(this.g.x.redMul(p))===0?g=b[0]:(g=b[1],a(this.g.mul(g).x.cmp(this.g.x.redMul(p))===0))}return{beta:p,lambda:g,basis:d.basis?d.basis.map(function(y){return{a:new i(y.a,16),b:new i(y.b,16)}}):this._getEndoBasis(g)}}},l.prototype._getEndoRoots=function(d){var p=d===this.p?this.red:i.mont(d),g=new i(2).toRed(p).redInvm(),m=g.redNeg(),b=new i(3).toRed(p).redNeg().redSqrt().redMul(g);return[m.redAdd(b).fromRed(),m.redSub(b).fromRed()]},l.prototype._getEndoBasis=function(d){for(var p,g,m,b,y,x,S,O,D,U=this.n.ushrn(Math.floor(this.n.bitLength()/2)),z=d,q=this.n.clone(),G=new i(1),tt=new i(0),K=new i(0),B=new i(1),N=0;z.cmpn(0)!==0;){var Z=q.div(z);O=q.sub(Z.mul(z)),D=K.sub(Z.mul(G));var w=B.sub(Z.mul(tt));if(!m&&O.cmp(U)<0)p=S.neg(),g=G,m=O.neg(),b=D;else if(m&&++N==2)break;S=O,q=z,z=O,K=G,G=D,B=tt,tt=w}y=O.neg(),x=D;var C=m.sqr().add(b.sqr());return y.sqr().add(x.sqr()).cmp(C)>=0&&(y=p,x=g),m.negative&&(m=m.neg(),b=b.neg()),y.negative&&(y=y.neg(),x=x.neg()),[{a:m,b},{a:y,b:x}]},l.prototype._endoSplit=function(d){var p=this.endo.basis,g=p[0],m=p[1],b=m.b.mul(d).divRound(this.n),y=g.b.neg().mul(d).divRound(this.n),x=b.mul(g.a),S=y.mul(m.a),O=b.mul(g.b),D=y.mul(m.b);return{k1:d.sub(x).sub(S),k2:O.add(D).neg()}},l.prototype.pointFromX=function(d,p){(d=new i(d,16)).red||(d=d.toRed(this.red));var g=d.redSqr().redMul(d).redIAdd(d.redMul(this.a)).redIAdd(this.b),m=g.redSqrt();if(m.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var b=m.fromRed().isOdd();return(p&&!b||!p&&b)&&(m=m.redNeg()),this.point(d,m)},l.prototype.validate=function(d){if(d.inf)return!0;var p=d.x,g=d.y,m=this.a.redMul(p),b=p.redSqr().redMul(p).redIAdd(m).redIAdd(this.b);return g.redSqr().redISub(b).cmpn(0)===0},l.prototype._endoWnafMulAdd=function(d,p,g){for(var m=this._endoWnafT1,b=this._endoWnafT2,y=0;y<d.length;y++){var x=this._endoSplit(p[y]),S=d[y],O=S._getBeta();x.k1.negative&&(x.k1.ineg(),S=S.neg(!0)),x.k2.negative&&(x.k2.ineg(),O=O.neg(!0)),m[2*y]=S,m[2*y+1]=O,b[2*y]=x.k1,b[2*y+1]=x.k2}for(var D=this._wnafMulAdd(1,m,b,2*y,g),U=0;U<2*y;U++)m[U]=null,b[U]=null;return D},s(c,o.BasePoint),l.prototype.point=function(d,p,g){return new c(this,d,p,g)},l.prototype.pointFromJSON=function(d,p){return c.fromJSON(this,d,p)},c.prototype._getBeta=function(){if(this.curve.endo){var d=this.precomputed;if(d&&d.beta)return d.beta;var p=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(d){var g=this.curve,m=function(b){return g.point(b.x.redMul(g.endo.beta),b.y)};d.beta=p,p.precomputed={beta:null,naf:d.naf&&{wnd:d.naf.wnd,points:d.naf.points.map(m)},doubles:d.doubles&&{step:d.doubles.step,points:d.doubles.points.map(m)}}}return p}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(d,p,g){typeof p=="string"&&(p=JSON.parse(p));var m=d.point(p[0],p[1],g);if(!p[2])return m;function b(x){return d.point(x[0],x[1],g)}var y=p[2];return m.precomputed={beta:null,doubles:y.doubles&&{step:y.doubles.step,points:[m].concat(y.doubles.points.map(b))},naf:y.naf&&{wnd:y.naf.wnd,points:[m].concat(y.naf.points.map(b))}},m},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(d){if(this.inf)return d;if(d.inf)return this;if(this.eq(d))return this.dbl();if(this.neg().eq(d))return this.curve.point(null,null);if(this.x.cmp(d.x)===0)return this.curve.point(null,null);var p=this.y.redSub(d.y);p.cmpn(0)!==0&&(p=p.redMul(this.x.redSub(d.x).redInvm()));var g=p.redSqr().redISub(this.x).redISub(d.x),m=p.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,m)},c.prototype.dbl=function(){if(this.inf)return this;var d=this.y.redAdd(this.y);if(d.cmpn(0)===0)return this.curve.point(null,null);var p=this.curve.a,g=this.x.redSqr(),m=d.redInvm(),b=g.redAdd(g).redIAdd(g).redIAdd(p).redMul(m),y=b.redSqr().redISub(this.x.redAdd(this.x)),x=b.redMul(this.x.redSub(y)).redISub(this.y);return this.curve.point(y,x)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(d){return d=new i(d,16),this.isInfinity()?this:this._hasDoubles(d)?this.curve._fixedNafMul(this,d):this.curve.endo?this.curve._endoWnafMulAdd([this],[d]):this.curve._wnafMul(this,d)},c.prototype.mulAdd=function(d,p,g){var m=[this,p],b=[d,g];return this.curve.endo?this.curve._endoWnafMulAdd(m,b):this.curve._wnafMulAdd(1,m,b,2)},c.prototype.jmulAdd=function(d,p,g){var m=[this,p],b=[d,g];return this.curve.endo?this.curve._endoWnafMulAdd(m,b,!0):this.curve._wnafMulAdd(1,m,b,2,!0)},c.prototype.eq=function(d){return this===d||this.inf===d.inf&&(this.inf||this.x.cmp(d.x)===0&&this.y.cmp(d.y)===0)},c.prototype.neg=function(d){if(this.inf)return this;var p=this.curve.point(this.x,this.y.redNeg());if(d&&this.precomputed){var g=this.precomputed,m=function(b){return b.neg()};p.precomputed={naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(m)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(m)}}}return p},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(h,o.BasePoint),l.prototype.jpoint=function(d,p,g){return new h(this,d,p,g)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var d=this.z.redInvm(),p=d.redSqr(),g=this.x.redMul(p),m=this.y.redMul(p).redMul(d);return this.curve.point(g,m)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(d){if(this.isInfinity())return d;if(d.isInfinity())return this;var p=d.z.redSqr(),g=this.z.redSqr(),m=this.x.redMul(p),b=d.x.redMul(g),y=this.y.redMul(p.redMul(d.z)),x=d.y.redMul(g.redMul(this.z)),S=m.redSub(b),O=y.redSub(x);if(S.cmpn(0)===0)return O.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var D=S.redSqr(),U=D.redMul(S),z=m.redMul(D),q=O.redSqr().redIAdd(U).redISub(z).redISub(z),G=O.redMul(z.redISub(q)).redISub(y.redMul(U)),tt=this.z.redMul(d.z).redMul(S);return this.curve.jpoint(q,G,tt)},h.prototype.mixedAdd=function(d){if(this.isInfinity())return d.toJ();if(d.isInfinity())return this;var p=this.z.redSqr(),g=this.x,m=d.x.redMul(p),b=this.y,y=d.y.redMul(p).redMul(this.z),x=g.redSub(m),S=b.redSub(y);if(x.cmpn(0)===0)return S.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var O=x.redSqr(),D=O.redMul(x),U=g.redMul(O),z=S.redSqr().redIAdd(D).redISub(U).redISub(U),q=S.redMul(U.redISub(z)).redISub(b.redMul(D)),G=this.z.redMul(x);return this.curve.jpoint(z,q,G)},h.prototype.dblp=function(d){if(d===0)return this;if(this.isInfinity())return this;if(!d)return this.dbl();var p;if(this.curve.zeroA||this.curve.threeA){var g=this;for(p=0;p<d;p++)g=g.dbl();return g}var m=this.curve.a,b=this.curve.tinv,y=this.x,x=this.y,S=this.z,O=S.redSqr().redSqr(),D=x.redAdd(x);for(p=0;p<d;p++){var U=y.redSqr(),z=D.redSqr(),q=z.redSqr(),G=U.redAdd(U).redIAdd(U).redIAdd(m.redMul(O)),tt=y.redMul(z),K=G.redSqr().redISub(tt.redAdd(tt)),B=tt.redISub(K),N=G.redMul(B);N=N.redIAdd(N).redISub(q);var Z=D.redMul(S);p+1<d&&(O=O.redMul(q)),y=K,S=Z,D=N}return this.curve.jpoint(y,D.redMul(b),S)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var d,p,g;if(this.zOne){var m=this.x.redSqr(),b=this.y.redSqr(),y=b.redSqr(),x=this.x.redAdd(b).redSqr().redISub(m).redISub(y);x=x.redIAdd(x);var S=m.redAdd(m).redIAdd(m),O=S.redSqr().redISub(x).redISub(x),D=y.redIAdd(y);D=(D=D.redIAdd(D)).redIAdd(D),d=O,p=S.redMul(x.redISub(O)).redISub(D),g=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),z=this.y.redSqr(),q=z.redSqr(),G=this.x.redAdd(z).redSqr().redISub(U).redISub(q);G=G.redIAdd(G);var tt=U.redAdd(U).redIAdd(U),K=tt.redSqr(),B=q.redIAdd(q);B=(B=B.redIAdd(B)).redIAdd(B),d=K.redISub(G).redISub(G),p=tt.redMul(G.redISub(d)).redISub(B),g=(g=this.y.redMul(this.z)).redIAdd(g)}return this.curve.jpoint(d,p,g)},h.prototype._threeDbl=function(){var d,p,g;if(this.zOne){var m=this.x.redSqr(),b=this.y.redSqr(),y=b.redSqr(),x=this.x.redAdd(b).redSqr().redISub(m).redISub(y);x=x.redIAdd(x);var S=m.redAdd(m).redIAdd(m).redIAdd(this.curve.a),O=S.redSqr().redISub(x).redISub(x);d=O;var D=y.redIAdd(y);D=(D=D.redIAdd(D)).redIAdd(D),p=S.redMul(x.redISub(O)).redISub(D),g=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),z=this.y.redSqr(),q=this.x.redMul(z),G=this.x.redSub(U).redMul(this.x.redAdd(U));G=G.redAdd(G).redIAdd(G);var tt=q.redIAdd(q),K=(tt=tt.redIAdd(tt)).redAdd(tt);d=G.redSqr().redISub(K),g=this.y.redAdd(this.z).redSqr().redISub(z).redISub(U);var B=z.redSqr();B=(B=(B=B.redIAdd(B)).redIAdd(B)).redIAdd(B),p=G.redMul(tt.redISub(d)).redISub(B)}return this.curve.jpoint(d,p,g)},h.prototype._dbl=function(){var d=this.curve.a,p=this.x,g=this.y,m=this.z,b=m.redSqr().redSqr(),y=p.redSqr(),x=g.redSqr(),S=y.redAdd(y).redIAdd(y).redIAdd(d.redMul(b)),O=p.redAdd(p),D=(O=O.redIAdd(O)).redMul(x),U=S.redSqr().redISub(D.redAdd(D)),z=D.redISub(U),q=x.redSqr();q=(q=(q=q.redIAdd(q)).redIAdd(q)).redIAdd(q);var G=S.redMul(z).redISub(q),tt=g.redAdd(g).redMul(m);return this.curve.jpoint(U,G,tt)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var d=this.x.redSqr(),p=this.y.redSqr(),g=this.z.redSqr(),m=p.redSqr(),b=d.redAdd(d).redIAdd(d),y=b.redSqr(),x=this.x.redAdd(p).redSqr().redISub(d).redISub(m),S=(x=(x=(x=x.redIAdd(x)).redAdd(x).redIAdd(x)).redISub(y)).redSqr(),O=m.redIAdd(m);O=(O=(O=O.redIAdd(O)).redIAdd(O)).redIAdd(O);var D=b.redIAdd(x).redSqr().redISub(y).redISub(S).redISub(O),U=p.redMul(D);U=(U=U.redIAdd(U)).redIAdd(U);var z=this.x.redMul(S).redISub(U);z=(z=z.redIAdd(z)).redIAdd(z);var q=this.y.redMul(D.redMul(O.redISub(D)).redISub(x.redMul(S)));q=(q=(q=q.redIAdd(q)).redIAdd(q)).redIAdd(q);var G=this.z.redAdd(x).redSqr().redISub(g).redISub(S);return this.curve.jpoint(z,q,G)},h.prototype.mul=function(d,p){return d=new i(d,p),this.curve._wnafMul(this,d)},h.prototype.eq=function(d){if(d.type==="affine")return this.eq(d.toJ());if(this===d)return!0;var p=this.z.redSqr(),g=d.z.redSqr();if(this.x.redMul(g).redISub(d.x.redMul(p)).cmpn(0)!==0)return!1;var m=p.redMul(this.z),b=g.redMul(d.z);return this.y.redMul(b).redISub(d.y.redMul(m)).cmpn(0)===0},h.prototype.eqXToP=function(d){var p=this.z.redSqr(),g=d.toRed(this.curve.red).redMul(p);if(this.x.cmp(g)===0)return!0;for(var m=d.clone(),b=this.curve.redN.redMul(p);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(b),this.x.cmp(g)===0)return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(n,t,e){"use strict";var r,i=e,s=n("hash.js"),o=n("./curve"),a=n("./utils").assert;function l(h){h.type==="short"?this.curve=new o.short(h):h.type==="edwards"?this.curve=new o.edwards(h):this.curve=new o.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(h,d){Object.defineProperty(i,h,{configurable:!0,enumerable:!0,get:function(){var p=new l(d);return Object.defineProperty(i,h,{configurable:!0,enumerable:!0,value:p}),p}})}i.PresetCurve=l,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n("./precomputed/secp256k1")}catch{r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(n,t,e){"use strict";var r=n("bn.js"),i=n("hmac-drbg"),s=n("../utils"),o=n("../curves"),a=n("brorand"),l=s.assert,c=n("./key"),h=n("./signature");function d(p){if(!(this instanceof d))return new d(p);typeof p=="string"&&(l(Object.prototype.hasOwnProperty.call(o,p),"Unknown curve "+p),p=o[p]),p instanceof o.PresetCurve&&(p={curve:p}),this.curve=p.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=p.curve.g,this.g.precompute(p.curve.n.bitLength()+1),this.hash=p.hash||p.curve.hash}t.exports=d,d.prototype.keyPair=function(p){return new c(this,p)},d.prototype.keyFromPrivate=function(p,g){return c.fromPrivate(this,p,g)},d.prototype.keyFromPublic=function(p,g){return c.fromPublic(this,p,g)},d.prototype.genKeyPair=function(p){p||(p={});for(var g=new i({hash:this.hash,pers:p.pers,persEnc:p.persEnc||"utf8",entropy:p.entropy||a(this.hash.hmacStrength),entropyEnc:p.entropy&&p.entropyEnc||"utf8",nonce:this.n.toArray()}),m=this.n.byteLength(),b=this.n.sub(new r(2));;){var y=new r(g.generate(m));if(!(y.cmp(b)>0))return y.iaddn(1),this.keyFromPrivate(y)}},d.prototype._truncateToN=function(p,g){var m=8*p.byteLength()-this.n.bitLength();return m>0&&(p=p.ushrn(m)),!g&&p.cmp(this.n)>=0?p.sub(this.n):p},d.prototype.sign=function(p,g,m,b){typeof m=="object"&&(b=m,m=null),b||(b={}),g=this.keyFromPrivate(g,m),p=this._truncateToN(new r(p,16));for(var y=this.n.byteLength(),x=g.getPrivate().toArray("be",y),S=p.toArray("be",y),O=new i({hash:this.hash,entropy:x,nonce:S,pers:b.pers,persEnc:b.persEnc||"utf8"}),D=this.n.sub(new r(1)),U=0;;U++){var z=b.k?b.k(U):new r(O.generate(this.n.byteLength()));if(!((z=this._truncateToN(z,!0)).cmpn(1)<=0||z.cmp(D)>=0)){var q=this.g.mul(z);if(!q.isInfinity()){var G=q.getX(),tt=G.umod(this.n);if(tt.cmpn(0)!==0){var K=z.invm(this.n).mul(tt.mul(g.getPrivate()).iadd(p));if((K=K.umod(this.n)).cmpn(0)!==0){var B=(q.getY().isOdd()?1:0)|(G.cmp(tt)!==0?2:0);return b.canonical&&K.cmp(this.nh)>0&&(K=this.n.sub(K),B^=1),new h({r:tt,s:K,recoveryParam:B})}}}}}},d.prototype.verify=function(p,g,m,b){p=this._truncateToN(new r(p,16)),m=this.keyFromPublic(m,b);var y=(g=new h(g,"hex")).r,x=g.s;if(y.cmpn(1)<0||y.cmp(this.n)>=0||x.cmpn(1)<0||x.cmp(this.n)>=0)return!1;var S,O=x.invm(this.n),D=O.mul(p).umod(this.n),U=O.mul(y).umod(this.n);return this.curve._maxwellTrick?!(S=this.g.jmulAdd(D,m.getPublic(),U)).isInfinity()&&S.eqXToP(y):!(S=this.g.mulAdd(D,m.getPublic(),U)).isInfinity()&&S.getX().umod(this.n).cmp(y)===0},d.prototype.recoverPubKey=function(p,g,m,b){l((3&m)===m,"The recovery param is more than two bits"),g=new h(g,b);var y=this.n,x=new r(p),S=g.r,O=g.s,D=1&m,U=m>>1;if(S.cmp(this.curve.p.umod(this.curve.n))>=0&&U)throw new Error("Unable to find sencond key candinate");S=U?this.curve.pointFromX(S.add(this.curve.n),D):this.curve.pointFromX(S,D);var z=g.r.invm(y),q=y.sub(x).mul(z).umod(y),G=O.mul(z).umod(y);return this.g.mulAdd(q,S,G)},d.prototype.getKeyRecoveryParam=function(p,g,m,b){if((g=new h(g,b)).recoveryParam!==null)return g.recoveryParam;for(var y=0;y<4;y++){var x;try{x=this.recoverPubKey(p,g,y)}catch{continue}if(x.eq(m))return y}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(n,t,e){"use strict";var r=n("bn.js"),i=n("../utils").assert;function s(o,a){this.ec=o,this.priv=null,this.pub=null,a.priv&&this._importPrivate(a.priv,a.privEnc),a.pub&&this._importPublic(a.pub,a.pubEnc)}t.exports=s,s.fromPublic=function(o,a,l){return a instanceof s?a:new s(o,{pub:a,pubEnc:l})},s.fromPrivate=function(o,a,l){return a instanceof s?a:new s(o,{priv:a,privEnc:l})},s.prototype.validate=function(){var o=this.getPublic();return o.isInfinity()?{result:!1,reason:"Invalid public key"}:o.validate()?o.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(o,a){return typeof o=="string"&&(a=o,o=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),a?this.pub.encode(a,o):this.pub},s.prototype.getPrivate=function(o){return o==="hex"?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(o,a){this.priv=new r(o,a||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(o,a){if(o.x||o.y)return this.ec.curve.type==="mont"?i(o.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||i(o.x&&o.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(o.x,o.y));this.pub=this.ec.curve.decodePoint(o,a)},s.prototype.derive=function(o){return o.validate()||i(o.validate(),"public point not validated"),o.mul(this.priv).getX()},s.prototype.sign=function(o,a,l){return this.ec.sign(o,this,a,l)},s.prototype.verify=function(o,a){return this.ec.verify(o,a,this)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(n,t,e){"use strict";var r=n("bn.js"),i=n("../utils"),s=i.assert;function o(d,p){if(d instanceof o)return d;this._importDER(d,p)||(s(d.r&&d.s,"Signature without r or s"),this.r=new r(d.r,16),this.s=new r(d.s,16),d.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=d.recoveryParam)}function a(){this.place=0}function l(d,p){var g=d[p.place++];if(!(128&g))return g;var m=15&g;if(m===0||m>4)return!1;for(var b=0,y=0,x=p.place;y<m;y++,x++)b<<=8,b|=d[x],b>>>=0;return!(b<=127)&&(p.place=x,b)}function c(d){for(var p=0,g=d.length-1;!d[p]&&!(128&d[p+1])&&p<g;)p++;return p===0?d:d.slice(p)}function h(d,p){if(p<128)d.push(p);else{var g=1+(Math.log(p)/Math.LN2>>>3);for(d.push(128|g);--g;)d.push(p>>>(g<<3)&255);d.push(p)}}t.exports=o,o.prototype._importDER=function(d,p){d=i.toArray(d,p);var g=new a;if(d[g.place++]!==48)return!1;var m=l(d,g);if(m===!1||m+g.place!==d.length||d[g.place++]!==2)return!1;var b=l(d,g);if(b===!1)return!1;var y=d.slice(g.place,b+g.place);if(g.place+=b,d[g.place++]!==2)return!1;var x=l(d,g);if(x===!1||d.length!==x+g.place)return!1;var S=d.slice(g.place,x+g.place);if(y[0]===0){if(!(128&y[1]))return!1;y=y.slice(1)}if(S[0]===0){if(!(128&S[1]))return!1;S=S.slice(1)}return this.r=new r(y),this.s=new r(S),this.recoveryParam=null,!0},o.prototype.toDER=function(d){var p=this.r.toArray(),g=this.s.toArray();for(128&p[0]&&(p=[0].concat(p)),128&g[0]&&(g=[0].concat(g)),p=c(p),g=c(g);!(g[0]||128&g[1]);)g=g.slice(1);var m=[2];h(m,p.length),(m=m.concat(p)).push(2),h(m,g.length);var b=m.concat(g),y=[48];return h(y,b.length),y=y.concat(b),i.encode(y,d)}},{"../utils":419,"bn.js":420}],415:[function(n,t,e){"use strict";var r=n("hash.js"),i=n("../curves"),s=n("../utils"),o=s.assert,a=s.parseBytes,l=n("./key"),c=n("./signature");function h(d){if(o(d==="ed25519","only tested with ed25519 so far"),!(this instanceof h))return new h(d);d=i[d].curve,this.curve=d,this.g=d.g,this.g.precompute(d.n.bitLength()+1),this.pointClass=d.point().constructor,this.encodingLength=Math.ceil(d.n.bitLength()/8),this.hash=r.sha512}t.exports=h,h.prototype.sign=function(d,p){d=a(d);var g=this.keyFromSecret(p),m=this.hashInt(g.messagePrefix(),d),b=this.g.mul(m),y=this.encodePoint(b),x=this.hashInt(y,g.pubBytes(),d).mul(g.priv()),S=m.add(x).umod(this.curve.n);return this.makeSignature({R:b,S,Rencoded:y})},h.prototype.verify=function(d,p,g){d=a(d),p=this.makeSignature(p);var m=this.keyFromPublic(g),b=this.hashInt(p.Rencoded(),m.pubBytes(),d),y=this.g.mul(p.S());return p.R().add(m.pub().mul(b)).eq(y)},h.prototype.hashInt=function(){for(var d=this.hash(),p=0;p<arguments.length;p++)d.update(arguments[p]);return s.intFromLE(d.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(d){return l.fromPublic(this,d)},h.prototype.keyFromSecret=function(d){return l.fromSecret(this,d)},h.prototype.makeSignature=function(d){return d instanceof c?d:new c(this,d)},h.prototype.encodePoint=function(d){var p=d.getY().toArray("le",this.encodingLength);return p[this.encodingLength-1]|=d.getX().isOdd()?128:0,p},h.prototype.decodePoint=function(d){var p=(d=s.parseBytes(d)).length-1,g=d.slice(0,p).concat(-129&d[p]),m=(128&d[p])!=0,b=s.intFromLE(g);return this.curve.pointFromY(b,m)},h.prototype.encodeInt=function(d){return d.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(d){return s.intFromLE(d)},h.prototype.isPoint=function(d){return d instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(n,t,e){"use strict";var r=n("../utils"),i=r.assert,s=r.parseBytes,o=r.cachedProperty;function a(l,c){this.eddsa=l,this._secret=s(c.secret),l.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=s(c.pub)}a.fromPublic=function(l,c){return c instanceof a?c:new a(l,{pub:c})},a.fromSecret=function(l,c){return c instanceof a?c:new a(l,{secret:c})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),o(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),o(a,"privBytes",function(){var l=this.eddsa,c=this.hash(),h=l.encodingLength-1,d=c.slice(0,l.encodingLength);return d[0]&=248,d[h]&=127,d[h]|=64,d}),o(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),o(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),o(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(l){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(l,this)},a.prototype.verify=function(l,c){return this.eddsa.verify(l,c,this)},a.prototype.getSecret=function(l){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),l)},a.prototype.getPublic=function(l){return r.encode(this.pubBytes(),l)},t.exports=a},{"../utils":419}],417:[function(n,t,e){"use strict";var r=n("bn.js"),i=n("../utils"),s=i.assert,o=i.cachedProperty,a=i.parseBytes;function l(c,h){this.eddsa=c,typeof h!="object"&&(h=a(h)),Array.isArray(h)&&(h={R:h.slice(0,c.encodingLength),S:h.slice(c.encodingLength)}),s(h.R&&h.S,"Signature without R or S"),c.isPoint(h.R)&&(this._R=h.R),h.S instanceof r&&(this._S=h.S),this._Rencoded=Array.isArray(h.R)?h.R:h.Rencoded,this._Sencoded=Array.isArray(h.S)?h.S:h.Sencoded}o(l,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(l,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(l,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(l,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),l.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},l.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=l},{"../utils":419,"bn.js":420}],418:[function(n,t,e){"use strict";t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(n,t,e){"use strict";var r=e,i=n("bn.js"),s=n("minimalistic-assert"),o=n("minimalistic-crypto-utils");r.assert=s,r.toArray=o.toArray,r.zero2=o.zero2,r.toHex=o.toHex,r.encode=o.encode,r.getNAF=function(a,l,c){var h=new Array(Math.max(a.bitLength(),c)+1);h.fill(0);for(var d=1<<l+1,p=a.clone(),g=0;g<h.length;g++){var m,b=p.andln(d-1);p.isOdd()?(m=b>(d>>1)-1?(d>>1)-b:b,p.isubn(m)):m=0,h[g]=m,p.iushrn(1)}return h},r.getJSF=function(a,l){var c=[[],[]];a=a.clone(),l=l.clone();for(var h,d=0,p=0;a.cmpn(-d)>0||l.cmpn(-p)>0;){var g,m,b=a.andln(3)+d&3,y=l.andln(3)+p&3;b===3&&(b=-1),y===3&&(y=-1),g=1&b?(h=a.andln(7)+d&7)!==3&&h!==5||y!==2?b:-b:0,c[0].push(g),m=1&y?(h=l.andln(7)+p&7)!==3&&h!==5||b!==2?y:-y:0,c[1].push(m),2*d===g+1&&(d=1-d),2*p===m+1&&(p=1-p),a.iushrn(1),l.iushrn(1)}return c},r.cachedProperty=function(a,l,c){var h="_"+l;a.prototype[l]=function(){return this[h]!==void 0?this[h]:this[h]=c.call(this)}},r.parseBytes=function(a){return typeof a=="string"?r.toArray(a,"hex"):a},r.intFromLE=function(a){return new i(a,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],421:[function(n,t,e){t.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(n,t,e){"use strict";var r=Object.create||function(z){var q=function(){};return q.prototype=z,new q},i=Object.keys||function(z){var q=[];for(var G in z)Object.prototype.hasOwnProperty.call(z,G)&&q.push(G);return G},s=Function.prototype.bind||function(z){var q=this;return function(){return q.apply(z,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0;var a,l=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),a=c.x===0}catch{a=!1}function h(z){return z._maxListeners===void 0?o.defaultMaxListeners:z._maxListeners}function d(z,q,G){if(q)z.call(G);else for(var tt=z.length,K=U(z,tt),B=0;B<tt;++B)K[B].call(G)}function p(z,q,G,tt){if(q)z.call(G,tt);else for(var K=z.length,B=U(z,K),N=0;N<K;++N)B[N].call(G,tt)}function g(z,q,G,tt,K){if(q)z.call(G,tt,K);else for(var B=z.length,N=U(z,B),Z=0;Z<B;++Z)N[Z].call(G,tt,K)}function m(z,q,G,tt,K,B){if(q)z.call(G,tt,K,B);else for(var N=z.length,Z=U(z,N),w=0;w<N;++w)Z[w].call(G,tt,K,B)}function b(z,q,G,tt){if(q)z.apply(G,tt);else for(var K=z.length,B=U(z,K),N=0;N<K;++N)B[N].apply(G,tt)}function y(z,q,G,tt){var K,B,N;if(typeof G!="function")throw new TypeError('"listener" argument must be a function');if((B=z._events)?(B.newListener&&(z.emit("newListener",q,G.listener?G.listener:G),B=z._events),N=B[q]):(B=z._events=r(null),z._eventsCount=0),N){if(typeof N=="function"?N=B[q]=tt?[G,N]:[N,G]:tt?N.unshift(G):N.push(G),!N.warned&&(K=h(z))&&K>0&&N.length>K){N.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+N.length+' "'+String(q)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');Z.name="MaxListenersExceededWarning",Z.emitter=z,Z.type=q,Z.count=N.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",Z.name,Z.message)}}else N=B[q]=G,++z._eventsCount;return z}function x(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var z=new Array(arguments.length),q=0;q<z.length;++q)z[q]=arguments[q];this.listener.apply(this.target,z)}}function S(z,q,G){var tt={fired:!1,wrapFn:void 0,target:z,type:q,listener:G},K=s.call(x,tt);return K.listener=G,tt.wrapFn=K,K}function O(z,q,G){var tt=z._events;if(!tt)return[];var K=tt[q];return K?typeof K=="function"?G?[K.listener||K]:[K]:G?function(B){for(var N=new Array(B.length),Z=0;Z<N.length;++Z)N[Z]=B[Z].listener||B[Z];return N}(K):U(K,K.length):[]}function D(z){var q=this._events;if(q){var G=q[z];if(typeof G=="function")return 1;if(G)return G.length}return 0}function U(z,q){for(var G=new Array(q),tt=0;tt<q;++tt)G[tt]=z[tt];return G}a?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(z){if(typeof z!="number"||z<0||z!=z)throw new TypeError('"defaultMaxListeners" must be a positive number');l=z}}):o.defaultMaxListeners=l,o.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||isNaN(z))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=z,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(z){var q,G,tt,K,B,N,Z=z==="error";if(N=this._events)Z=Z&&N.error==null;else if(!Z)return!1;if(Z){if(arguments.length>1&&(q=arguments[1]),q instanceof Error)throw q;var w=new Error('Unhandled "error" event. ('+q+")");throw w.context=q,w}if(!(G=N[z]))return!1;var C=typeof G=="function";switch(tt=arguments.length){case 1:d(G,C,this);break;case 2:p(G,C,this,arguments[1]);break;case 3:g(G,C,this,arguments[1],arguments[2]);break;case 4:m(G,C,this,arguments[1],arguments[2],arguments[3]);break;default:for(K=new Array(tt-1),B=1;B<tt;B++)K[B-1]=arguments[B];b(G,C,this,K)}return!0},o.prototype.addListener=function(z,q){return y(this,z,q,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(z,q){return y(this,z,q,!0)},o.prototype.once=function(z,q){if(typeof q!="function")throw new TypeError('"listener" argument must be a function');return this.on(z,S(this,z,q)),this},o.prototype.prependOnceListener=function(z,q){if(typeof q!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(z,S(this,z,q)),this},o.prototype.removeListener=function(z,q){var G,tt,K,B,N;if(typeof q!="function")throw new TypeError('"listener" argument must be a function');if(!(tt=this._events))return this;if(!(G=tt[z]))return this;if(G===q||G.listener===q)--this._eventsCount==0?this._events=r(null):(delete tt[z],tt.removeListener&&this.emit("removeListener",z,G.listener||q));else if(typeof G!="function"){for(K=-1,B=G.length-1;B>=0;B--)if(G[B]===q||G[B].listener===q){N=G[B].listener,K=B;break}if(K<0)return this;K===0?G.shift():function(Z,w){for(var C=w,k=C+1,T=Z.length;k<T;C+=1,k+=1)Z[C]=Z[k];Z.pop()}(G,K),G.length===1&&(tt[z]=G[0]),tt.removeListener&&this.emit("removeListener",z,N||q)}return this},o.prototype.removeAllListeners=function(z){var q,G,tt;if(!(G=this._events))return this;if(!G.removeListener)return arguments.length===0?(this._events=r(null),this._eventsCount=0):G[z]&&(--this._eventsCount==0?this._events=r(null):delete G[z]),this;if(arguments.length===0){var K,B=i(G);for(tt=0;tt<B.length;++tt)(K=B[tt])!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if(typeof(q=G[z])=="function")this.removeListener(z,q);else if(q)for(tt=q.length-1;tt>=0;tt--)this.removeListener(z,q[tt]);return this},o.prototype.listeners=function(z){return O(this,z,!0)},o.prototype.rawListeners=function(z){return O(this,z,!1)},o.listenerCount=function(z,q){return typeof z.listenerCount=="function"?z.listenerCount(q):D.call(z,q)},o.prototype.listenerCount=D,o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=n("md5.js");t.exports=function(s,o,a,l){if(r.isBuffer(s)||(s=r.from(s,"binary")),o&&(r.isBuffer(o)||(o=r.from(o,"binary")),o.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var c=a/8,h=r.alloc(c),d=r.alloc(l||0),p=r.alloc(0);c>0||l>0;){var g=new i;g.update(p),g.update(s),o&&g.update(o),p=g.digest();var m=0;if(c>0){var b=h.length-c;m=Math.min(c,p.length),p.copy(h,b,0,m),c-=m}if(m<p.length&&l>0){var y=d.length-l,x=Math.min(l,p.length-m);p.copy(d,y,m,m+x),l-=x}}return p.fill(0),{key:h,iv:d}}},{"md5.js":450,"safe-buffer":494}],424:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CsvParserStream=e.ParserOptions=e.parseFile=e.parseStream=e.parseString=e.parse=e.FormatterOptions=e.CsvFormatterStream=e.writeToPath=e.writeToString=e.writeToBuffer=e.writeToStream=e.write=e.format=void 0;var r=n("@fast-csv/format");Object.defineProperty(e,"format",{enumerable:!0,get:function(){return r.format}}),Object.defineProperty(e,"write",{enumerable:!0,get:function(){return r.write}}),Object.defineProperty(e,"writeToStream",{enumerable:!0,get:function(){return r.writeToStream}}),Object.defineProperty(e,"writeToBuffer",{enumerable:!0,get:function(){return r.writeToBuffer}}),Object.defineProperty(e,"writeToString",{enumerable:!0,get:function(){return r.writeToString}}),Object.defineProperty(e,"writeToPath",{enumerable:!0,get:function(){return r.writeToPath}}),Object.defineProperty(e,"CsvFormatterStream",{enumerable:!0,get:function(){return r.CsvFormatterStream}}),Object.defineProperty(e,"FormatterOptions",{enumerable:!0,get:function(){return r.FormatterOptions}});var i=n("@fast-csv/parse");Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return i.parse}}),Object.defineProperty(e,"parseString",{enumerable:!0,get:function(){return i.parseString}}),Object.defineProperty(e,"parseStream",{enumerable:!0,get:function(){return i.parseStream}}),Object.defineProperty(e,"parseFile",{enumerable:!0,get:function(){return i.parseFile}}),Object.defineProperty(e,"ParserOptions",{enumerable:!0,get:function(){return i.ParserOptions}}),Object.defineProperty(e,"CsvParserStream",{enumerable:!0,get:function(){return i.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=n("readable-stream").Transform;function s(o){i.call(this),this._block=r.allocUnsafe(o),this._blockSize=o,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n("inherits")(s,i),s.prototype._transform=function(o,a,l){var c=null;try{this.update(o,a)}catch(h){c=h}l(c)},s.prototype._flush=function(o){var a=null;try{this.push(this.digest())}catch(l){a=l}o(a)},s.prototype.update=function(o,a){if(function(g,m){if(!r.isBuffer(g)&&typeof g!="string")throw new TypeError(m+" must be a string or a buffer")}(o,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(o)||(o=r.from(o,a));for(var l=this._block,c=0;this._blockOffset+o.length-c>=this._blockSize;){for(var h=this._blockOffset;h<this._blockSize;)l[h++]=o[c++];this._update(),this._blockOffset=0}for(;c<o.length;)l[this._blockOffset++]=o[c++];for(var d=0,p=8*o.length;p>0;++d)this._length[d]+=p,(p=this._length[d]/4294967296|0)>0&&(this._length[d]-=4294967296*p);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(o){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var a=this._digest();o!==void 0&&(a=a.toString(o)),this._block.fill(0),this._blockOffset=0;for(var l=0;l<4;++l)this._length[l]=0;return a},s.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=s},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(n,t,e){"use strict";var r=e;r.utils=n("./hash/utils"),r.common=n("./hash/common"),r.sha=n("./hash/sha"),r.ripemd=n("./hash/ripemd"),r.hmac=n("./hash/hmac"),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(n,t,e){"use strict";var r=n("./utils"),i=n("minimalistic-assert");function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=s,s.prototype.update=function(o,a){if(o=r.toArray(o,a),this.pending?this.pending=this.pending.concat(o):this.pending=o,this.pendingTotal+=o.length,this.pending.length>=this._delta8){var l=(o=this.pending).length%this._delta8;this.pending=o.slice(o.length-l,o.length),this.pending.length===0&&(this.pending=null),o=r.join32(o,0,o.length-l,this.endian);for(var c=0;c<o.length;c+=this._delta32)this._update(o,c,c+this._delta32)}return this},s.prototype.digest=function(o){return this.update(this._pad()),i(this.pending===null),this._digest(o)},s.prototype._pad=function(){var o=this.pendingTotal,a=this._delta8,l=a-(o+this.padLength)%a,c=new Array(l+this.padLength);c[0]=128;for(var h=1;h<l;h++)c[h]=0;if(o<<=3,this.endian==="big"){for(var d=8;d<this.padLength;d++)c[h++]=0;c[h++]=0,c[h++]=0,c[h++]=0,c[h++]=0,c[h++]=o>>>24&255,c[h++]=o>>>16&255,c[h++]=o>>>8&255,c[h++]=255&o}else for(c[h++]=255&o,c[h++]=o>>>8&255,c[h++]=o>>>16&255,c[h++]=o>>>24&255,c[h++]=0,c[h++]=0,c[h++]=0,c[h++]=0,d=8;d<this.padLength;d++)c[h++]=0;return c}},{"./utils":437,"minimalistic-assert":453}],428:[function(n,t,e){"use strict";var r=n("./utils"),i=n("minimalistic-assert");function s(o,a,l){if(!(this instanceof s))return new s(o,a,l);this.Hash=o,this.blockSize=o.blockSize/8,this.outSize=o.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(a,l))}t.exports=s,s.prototype._init=function(o){o.length>this.blockSize&&(o=new this.Hash().update(o).digest()),i(o.length<=this.blockSize);for(var a=o.length;a<this.blockSize;a++)o.push(0);for(a=0;a<o.length;a++)o[a]^=54;for(this.inner=new this.Hash().update(o),a=0;a<o.length;a++)o[a]^=106;this.outer=new this.Hash().update(o)},s.prototype.update=function(o,a){return this.inner.update(o,a),this},s.prototype.digest=function(o){return this.outer.update(this.inner.digest()),this.outer.digest(o)}},{"./utils":437,"minimalistic-assert":453}],429:[function(n,t,e){"use strict";var r=n("./utils"),i=n("./common"),s=r.rotl32,o=r.sum32,a=r.sum32_3,l=r.sum32_4,c=i.BlockHash;function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(S,O,D,U){return S<=15?O^D^U:S<=31?O&D|~O&U:S<=47?(O|~D)^U:S<=63?O&U|D&~U:O^(D|~U)}function p(S){return S<=15?0:S<=31?1518500249:S<=47?1859775393:S<=63?2400959708:2840853838}function g(S){return S<=15?1352829926:S<=31?1548603684:S<=47?1836072691:S<=63?2053994217:0}r.inherits(h,c),e.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(S,O){for(var D=this.h[0],U=this.h[1],z=this.h[2],q=this.h[3],G=this.h[4],tt=D,K=U,B=z,N=q,Z=G,w=0;w<80;w++){var C=o(s(l(D,d(w,U,z,q),S[m[w]+O],p(w)),y[w]),G);D=G,G=q,q=s(z,10),z=U,U=C,C=o(s(l(tt,d(79-w,K,B,N),S[b[w]+O],g(w)),x[w]),Z),tt=Z,Z=N,N=s(B,10),B=K,K=C}C=a(this.h[1],z,N),this.h[1]=a(this.h[2],q,Z),this.h[2]=a(this.h[3],G,tt),this.h[3]=a(this.h[4],D,K),this.h[4]=a(this.h[0],U,B),this.h[0]=C},h.prototype._digest=function(S){return S==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],x=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(n,t,e){"use strict";e.sha1=n("./sha/1"),e.sha224=n("./sha/224"),e.sha256=n("./sha/256"),e.sha384=n("./sha/384"),e.sha512=n("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(n,t,e){"use strict";var r=n("../utils"),i=n("../common"),s=n("./common"),o=r.rotl32,a=r.sum32,l=r.sum32_5,c=s.ft_1,h=i.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function p(){if(!(this instanceof p))return new p;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(p,h),t.exports=p,p.blockSize=512,p.outSize=160,p.hmacStrength=80,p.padLength=64,p.prototype._update=function(g,m){for(var b=this.W,y=0;y<16;y++)b[y]=g[m+y];for(;y<b.length;y++)b[y]=o(b[y-3]^b[y-8]^b[y-14]^b[y-16],1);var x=this.h[0],S=this.h[1],O=this.h[2],D=this.h[3],U=this.h[4];for(y=0;y<b.length;y++){var z=~~(y/20),q=l(o(x,5),c(z,S,O,D),U,b[y],d[z]);U=D,D=O,O=o(S,30),S=x,x=q}this.h[0]=a(this.h[0],x),this.h[1]=a(this.h[1],S),this.h[2]=a(this.h[2],O),this.h[3]=a(this.h[3],D),this.h[4]=a(this.h[4],U)},p.prototype._digest=function(g){return g==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(n,t,e){"use strict";var r=n("../utils"),i=n("./256");function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(s,i),t.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(o){return o==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(n,t,e){"use strict";var r=n("../utils"),i=n("../common"),s=n("./common"),o=n("minimalistic-assert"),a=r.sum32,l=r.sum32_4,c=r.sum32_5,h=s.ch32,d=s.maj32,p=s.s0_256,g=s.s1_256,m=s.g0_256,b=s.g1_256,y=i.BlockHash,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function S(){if(!(this instanceof S))return new S;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=x,this.W=new Array(64)}r.inherits(S,y),t.exports=S,S.blockSize=512,S.outSize=256,S.hmacStrength=192,S.padLength=64,S.prototype._update=function(O,D){for(var U=this.W,z=0;z<16;z++)U[z]=O[D+z];for(;z<U.length;z++)U[z]=l(b(U[z-2]),U[z-7],m(U[z-15]),U[z-16]);var q=this.h[0],G=this.h[1],tt=this.h[2],K=this.h[3],B=this.h[4],N=this.h[5],Z=this.h[6],w=this.h[7];for(o(this.k.length===U.length),z=0;z<U.length;z++){var C=c(w,g(B),h(B,N,Z),this.k[z],U[z]),k=a(p(q),d(q,G,tt));w=Z,Z=N,N=B,B=a(K,C),K=tt,tt=G,G=q,q=a(C,k)}this.h[0]=a(this.h[0],q),this.h[1]=a(this.h[1],G),this.h[2]=a(this.h[2],tt),this.h[3]=a(this.h[3],K),this.h[4]=a(this.h[4],B),this.h[5]=a(this.h[5],N),this.h[6]=a(this.h[6],Z),this.h[7]=a(this.h[7],w)},S.prototype._digest=function(O){return O==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(n,t,e){"use strict";var r=n("../utils"),i=n("./512");function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(s,i),t.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(o){return o==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(n,t,e){"use strict";var r=n("../utils"),i=n("../common"),s=n("minimalistic-assert"),o=r.rotr64_hi,a=r.rotr64_lo,l=r.shr64_hi,c=r.shr64_lo,h=r.sum64,d=r.sum64_hi,p=r.sum64_lo,g=r.sum64_4_hi,m=r.sum64_4_lo,b=r.sum64_5_hi,y=r.sum64_5_lo,x=i.BlockHash,S=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function O(){if(!(this instanceof O))return new O;x.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=S,this.W=new Array(160)}function D(k,T,R,F,H){var rt=k&R^~k&H;return rt<0&&(rt+=4294967296),rt}function U(k,T,R,F,H,rt){var ot=T&F^~T&rt;return ot<0&&(ot+=4294967296),ot}function z(k,T,R,F,H){var rt=k&R^k&H^R&H;return rt<0&&(rt+=4294967296),rt}function q(k,T,R,F,H,rt){var ot=T&F^T&rt^F&rt;return ot<0&&(ot+=4294967296),ot}function G(k,T){var R=o(k,T,28)^o(T,k,2)^o(T,k,7);return R<0&&(R+=4294967296),R}function tt(k,T){var R=a(k,T,28)^a(T,k,2)^a(T,k,7);return R<0&&(R+=4294967296),R}function K(k,T){var R=o(k,T,14)^o(k,T,18)^o(T,k,9);return R<0&&(R+=4294967296),R}function B(k,T){var R=a(k,T,14)^a(k,T,18)^a(T,k,9);return R<0&&(R+=4294967296),R}function N(k,T){var R=o(k,T,1)^o(k,T,8)^l(k,T,7);return R<0&&(R+=4294967296),R}function Z(k,T){var R=a(k,T,1)^a(k,T,8)^c(k,T,7);return R<0&&(R+=4294967296),R}function w(k,T){var R=o(k,T,19)^o(T,k,29)^l(k,T,6);return R<0&&(R+=4294967296),R}function C(k,T){var R=a(k,T,19)^a(T,k,29)^c(k,T,6);return R<0&&(R+=4294967296),R}r.inherits(O,x),t.exports=O,O.blockSize=1024,O.outSize=512,O.hmacStrength=192,O.padLength=128,O.prototype._prepareBlock=function(k,T){for(var R=this.W,F=0;F<32;F++)R[F]=k[T+F];for(;F<R.length;F+=2){var H=w(R[F-4],R[F-3]),rt=C(R[F-4],R[F-3]),ot=R[F-14],dt=R[F-13],$=N(R[F-30],R[F-29]),ct=Z(R[F-30],R[F-29]),W=R[F-32],V=R[F-31];R[F]=g(H,rt,ot,dt,$,ct,W,V),R[F+1]=m(H,rt,ot,dt,$,ct,W,V)}},O.prototype._update=function(k,T){this._prepareBlock(k,T);var R=this.W,F=this.h[0],H=this.h[1],rt=this.h[2],ot=this.h[3],dt=this.h[4],$=this.h[5],ct=this.h[6],W=this.h[7],V=this.h[8],it=this.h[9],mt=this.h[10],wt=this.h[11],_t=this.h[12],Ct=this.h[13],Ft=this.h[14],It=this.h[15];s(this.k.length===R.length);for(var vt=0;vt<R.length;vt+=2){var kt=Ft,gt=It,ut=K(V,it),Q=B(V,it),Y=D(V,it,mt,wt,_t),et=U(V,it,mt,wt,_t,Ct),lt=this.k[vt],pt=this.k[vt+1],bt=R[vt],Et=R[vt+1],Ot=b(kt,gt,ut,Q,Y,et,lt,pt,bt,Et),zt=y(kt,gt,ut,Q,Y,et,lt,pt,bt,Et);kt=G(F,H),gt=tt(F,H),ut=z(F,H,rt,ot,dt),Q=q(F,H,rt,ot,dt,$);var Gt=d(kt,gt,ut,Q),Jt=p(kt,gt,ut,Q);Ft=_t,It=Ct,_t=mt,Ct=wt,mt=V,wt=it,V=d(ct,W,Ot,zt),it=p(W,W,Ot,zt),ct=dt,W=$,dt=rt,$=ot,rt=F,ot=H,F=d(Ot,zt,Gt,Jt),H=p(Ot,zt,Gt,Jt)}h(this.h,0,F,H),h(this.h,2,rt,ot),h(this.h,4,dt,$),h(this.h,6,ct,W),h(this.h,8,V,it),h(this.h,10,mt,wt),h(this.h,12,_t,Ct),h(this.h,14,Ft,It)},O.prototype._digest=function(k){return k==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(n,t,e){"use strict";var r=n("../utils").rotr32;function i(a,l,c){return a&l^~a&c}function s(a,l,c){return a&l^a&c^l&c}function o(a,l,c){return a^l^c}e.ft_1=function(a,l,c,h){return a===0?i(l,c,h):a===1||a===3?o(l,c,h):a===2?s(l,c,h):void 0},e.ch32=i,e.maj32=s,e.p32=o,e.s0_256=function(a){return r(a,2)^r(a,13)^r(a,22)},e.s1_256=function(a){return r(a,6)^r(a,11)^r(a,25)},e.g0_256=function(a){return r(a,7)^r(a,18)^a>>>3},e.g1_256=function(a){return r(a,17)^r(a,19)^a>>>10}},{"../utils":437}],437:[function(n,t,e){"use strict";var r=n("minimalistic-assert"),i=n("inherits");function s(c,h){return(64512&c.charCodeAt(h))==55296&&!(h<0||h+1>=c.length)&&(64512&c.charCodeAt(h+1))==56320}function o(c){return(c>>>24|c>>>8&65280|c<<8&16711680|(255&c)<<24)>>>0}function a(c){return c.length===1?"0"+c:c}function l(c){return c.length===7?"0"+c:c.length===6?"00"+c:c.length===5?"000"+c:c.length===4?"0000"+c:c.length===3?"00000"+c:c.length===2?"000000"+c:c.length===1?"0000000"+c:c}e.inherits=i,e.toArray=function(c,h){if(Array.isArray(c))return c.slice();if(!c)return[];var d=[];if(typeof c=="string")if(h){if(h==="hex")for((c=c.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(c="0"+c),g=0;g<c.length;g+=2)d.push(parseInt(c[g]+c[g+1],16))}else for(var p=0,g=0;g<c.length;g++){var m=c.charCodeAt(g);m<128?d[p++]=m:m<2048?(d[p++]=m>>6|192,d[p++]=63&m|128):s(c,g)?(m=65536+((1023&m)<<10)+(1023&c.charCodeAt(++g)),d[p++]=m>>18|240,d[p++]=m>>12&63|128,d[p++]=m>>6&63|128,d[p++]=63&m|128):(d[p++]=m>>12|224,d[p++]=m>>6&63|128,d[p++]=63&m|128)}else for(g=0;g<c.length;g++)d[g]=0|c[g];return d},e.toHex=function(c){for(var h="",d=0;d<c.length;d++)h+=a(c[d].toString(16));return h},e.htonl=o,e.toHex32=function(c,h){for(var d="",p=0;p<c.length;p++){var g=c[p];h==="little"&&(g=o(g)),d+=l(g.toString(16))}return d},e.zero2=a,e.zero8=l,e.join32=function(c,h,d,p){var g=d-h;r(g%4==0);for(var m=new Array(g/4),b=0,y=h;b<m.length;b++,y+=4){var x;x=p==="big"?c[y]<<24|c[y+1]<<16|c[y+2]<<8|c[y+3]:c[y+3]<<24|c[y+2]<<16|c[y+1]<<8|c[y],m[b]=x>>>0}return m},e.split32=function(c,h){for(var d=new Array(4*c.length),p=0,g=0;p<c.length;p++,g+=4){var m=c[p];h==="big"?(d[g]=m>>>24,d[g+1]=m>>>16&255,d[g+2]=m>>>8&255,d[g+3]=255&m):(d[g+3]=m>>>24,d[g+2]=m>>>16&255,d[g+1]=m>>>8&255,d[g]=255&m)}return d},e.rotr32=function(c,h){return c>>>h|c<<32-h},e.rotl32=function(c,h){return c<<h|c>>>32-h},e.sum32=function(c,h){return c+h>>>0},e.sum32_3=function(c,h,d){return c+h+d>>>0},e.sum32_4=function(c,h,d,p){return c+h+d+p>>>0},e.sum32_5=function(c,h,d,p,g){return c+h+d+p+g>>>0},e.sum64=function(c,h,d,p){var g=c[h],m=p+c[h+1]>>>0,b=(m<p?1:0)+d+g;c[h]=b>>>0,c[h+1]=m},e.sum64_hi=function(c,h,d,p){return(h+p>>>0<h?1:0)+c+d>>>0},e.sum64_lo=function(c,h,d,p){return h+p>>>0},e.sum64_4_hi=function(c,h,d,p,g,m,b,y){var x=0,S=h;return x+=(S=S+p>>>0)<h?1:0,x+=(S=S+m>>>0)<m?1:0,c+d+g+b+(x+=(S=S+y>>>0)<y?1:0)>>>0},e.sum64_4_lo=function(c,h,d,p,g,m,b,y){return h+p+m+y>>>0},e.sum64_5_hi=function(c,h,d,p,g,m,b,y,x,S){var O=0,D=h;return O+=(D=D+p>>>0)<h?1:0,O+=(D=D+m>>>0)<m?1:0,O+=(D=D+y>>>0)<y?1:0,c+d+g+b+x+(O+=(D=D+S>>>0)<S?1:0)>>>0},e.sum64_5_lo=function(c,h,d,p,g,m,b,y,x,S){return h+p+m+y+S>>>0},e.rotr64_hi=function(c,h,d){return(h<<32-d|c>>>d)>>>0},e.rotr64_lo=function(c,h,d){return(c<<32-d|h>>>d)>>>0},e.shr64_hi=function(c,h,d){return c>>>d},e.shr64_lo=function(c,h,d){return(c<<32-d|h>>>d)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(n,t,e){"use strict";var r=n("hash.js"),i=n("minimalistic-crypto-utils"),s=n("minimalistic-assert");function o(a){if(!(this instanceof o))return new o(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var l=i.toArray(a.entropy,a.entropyEnc||"hex"),c=i.toArray(a.nonce,a.nonceEnc||"hex"),h=i.toArray(a.pers,a.persEnc||"hex");s(l.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(l,c,h)}t.exports=o,o.prototype._init=function(a,l,c){var h=a.concat(l).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=1;this._update(h),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},o.prototype._update=function(a){var l=this._hmac().update(this.V).update([0]);a&&(l=l.update(a)),this.K=l.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(a,l,c,h){typeof l!="string"&&(h=c,c=l,l=null),a=i.toArray(a,l),c=i.toArray(c,h),s(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(c||[])),this._reseed=1},o.prototype.generate=function(a,l,c,h){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof l!="string"&&(h=c,c=l,l=null),c&&(c=i.toArray(c,h||"hex"),this._update(c));for(var d=[];d.length<a;)this.V=this._hmac().update(this.V).digest(),d=d.concat(this.V);var p=d.slice(0,a);return this._update(c),this._reseed++,i.encode(p,l)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(n,t,e){"use strict";e.read=function(r,i,s,o,a){var l,c,h=8*a-o-1,d=(1<<h)-1,p=d>>1,g=-7,m=s?a-1:0,b=s?-1:1,y=r[i+m];for(m+=b,l=y&(1<<-g)-1,y>>=-g,g+=h;g>0;l=256*l+r[i+m],m+=b,g-=8);for(c=l&(1<<-g)-1,l>>=-g,g+=o;g>0;c=256*c+r[i+m],m+=b,g-=8);if(l===0)l=1-p;else{if(l===d)return c?NaN:1/0*(y?-1:1);c+=Math.pow(2,o),l-=p}return(y?-1:1)*c*Math.pow(2,l-o)},e.write=function(r,i,s,o,a,l){var c,h,d,p=8*l-a-1,g=(1<<p)-1,m=g>>1,b=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:l-1,x=o?1:-1,S=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,c=g):(c=Math.floor(Math.log(i)/Math.LN2),i*(d=Math.pow(2,-c))<1&&(c--,d*=2),(i+=c+m>=1?b/d:b*Math.pow(2,1-m))*d>=2&&(c++,d/=2),c+m>=g?(h=0,c=g):c+m>=1?(h=(i*d-1)*Math.pow(2,a),c+=m):(h=i*Math.pow(2,m-1)*Math.pow(2,a),c=0));a>=8;r[s+y]=255&h,y+=x,h/=256,a-=8);for(c=c<<a|h,p+=a;p>0;r[s+y]=255&c,y+=x,c/=256,p-=8);r[s+y-x]|=128*S}},{}],440:[function(n,t,e){"use strict";typeof Object.create=="function"?t.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,i){if(i){r.super_=i;var s=function(){};s.prototype=i.prototype,r.prototype=new s,r.prototype.constructor=r}}},{}],441:[function(n,t,e){(function(r,i,s,o,a,l,c,h){(function(){"use strict";(function(d){typeof e=="object"&&t!==void 0?t.exports=d():(typeof window<"u"?window:i!==void 0?i:typeof self<"u"?self:this).JSZip=d()})(function(){return function d(p,g,m){function b(S,O){if(!g[S]){if(!p[S]){var D=typeof n=="function"&&n;if(!O&&D)return D(S,!0);if(y)return y(S,!0);var U=new Error("Cannot find module '"+S+"'");throw U.code="MODULE_NOT_FOUND",U}var z=g[S]={exports:{}};p[S][0].call(z.exports,function(q){return b(p[S][1][q]||q)},z,z.exports,d,p,g,m)}return g[S].exports}for(var y=typeof n=="function"&&n,x=0;x<m.length;x++)b(m[x]);return b}({1:[function(d,p,g){var m=d("./utils"),b=d("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";g.encode=function(x){for(var S,O,D,U,z,q,G,tt=[],K=0,B=x.length,N=B,Z=m.getTypeOf(x)!=="string";K<x.length;)N=B-K,D=Z?(S=x[K++],O=K<B?x[K++]:0,K<B?x[K++]:0):(S=x.charCodeAt(K++),O=K<B?x.charCodeAt(K++):0,K<B?x.charCodeAt(K++):0),U=S>>2,z=(3&S)<<4|O>>4,q=1<N?(15&O)<<2|D>>6:64,G=2<N?63&D:64,tt.push(y.charAt(U)+y.charAt(z)+y.charAt(q)+y.charAt(G));return tt.join("")},g.decode=function(x){var S,O,D,U,z,q,G=0,tt=0,K="data:";if(x.substr(0,K.length)===K)throw new Error("Invalid base64 input, it looks like a data url.");var B,N=3*(x=x.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(x.charAt(x.length-1)===y.charAt(64)&&N--,x.charAt(x.length-2)===y.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(B=b.uint8array?new Uint8Array(0|N):new Array(0|N);G<x.length;)S=y.indexOf(x.charAt(G++))<<2|(U=y.indexOf(x.charAt(G++)))>>4,O=(15&U)<<4|(z=y.indexOf(x.charAt(G++)))>>2,D=(3&z)<<6|(q=y.indexOf(x.charAt(G++))),B[tt++]=S,z!==64&&(B[tt++]=O),q!==64&&(B[tt++]=D);return B}},{"./support":30,"./utils":32}],2:[function(d,p,g){var m=d("./external"),b=d("./stream/DataWorker"),y=d("./stream/Crc32Probe"),x=d("./stream/DataLengthProbe");function S(O,D,U,z,q){this.compressedSize=O,this.uncompressedSize=D,this.crc32=U,this.compression=z,this.compressedContent=q}S.prototype={getContentWorker:function(){var O=new b(m.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new x("data_length")),D=this;return O.on("end",function(){if(this.streamInfo.data_length!==D.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),O},getCompressedWorker:function(){return new b(m.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},S.createWorkerFrom=function(O,D,U){return O.pipe(new y).pipe(new x("uncompressedSize")).pipe(D.compressWorker(U)).pipe(new x("compressedSize")).withStreamInfo("compression",D)},p.exports=S},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(d,p,g){var m=d("./stream/GenericWorker");g.STORE={magic:"\0\0",compressWorker:function(){return new m("STORE compression")},uncompressWorker:function(){return new m("STORE decompression")}},g.DEFLATE=d("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(d,p,g){var m=d("./utils"),b=function(){for(var y,x=[],S=0;S<256;S++){y=S;for(var O=0;O<8;O++)y=1&y?3988292384^y>>>1:y>>>1;x[S]=y}return x}();p.exports=function(y,x){return y!==void 0&&y.length?m.getTypeOf(y)!=="string"?function(S,O,D,U){var z=b,q=0+D;S^=-1;for(var G=0;G<q;G++)S=S>>>8^z[255&(S^O[G])];return-1^S}(0|x,y,y.length):function(S,O,D,U){var z=b,q=0+D;S^=-1;for(var G=0;G<q;G++)S=S>>>8^z[255&(S^O.charCodeAt(G))];return-1^S}(0|x,y,y.length):0}},{"./utils":32}],5:[function(d,p,g){g.base64=!1,g.binary=!1,g.dir=!1,g.createFolders=!0,g.date=null,g.compression=null,g.compressionOptions=null,g.comment=null,g.unixPermissions=null,g.dosPermissions=null},{}],6:[function(d,p,g){var m;m=typeof Promise<"u"?Promise:d("lie"),p.exports={Promise:m}},{lie:37}],7:[function(d,p,g){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",b=d("pako"),y=d("./utils"),x=d("./stream/GenericWorker"),S=m?"uint8array":"array";function O(D,U){x.call(this,"FlateWorker/"+D),this._pako=null,this._pakoAction=D,this._pakoOptions=U,this.meta={}}g.magic="\b\0",y.inherits(O,x),O.prototype.processChunk=function(D){this.meta=D.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(S,D.data),!1)},O.prototype.flush=function(){x.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},O.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this._pako=null},O.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var D=this;this._pako.onData=function(U){D.push({data:U,meta:D.meta})}},g.compressWorker=function(D){return new O("Deflate",D)},g.uncompressWorker=function(){return new O("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(d,p,g){function m(z,q){var G,tt="";for(G=0;G<q;G++)tt+=String.fromCharCode(255&z),z>>>=8;return tt}function b(z,q,G,tt,K,B){var N,Z,w=z.file,C=z.compression,k=B!==S.utf8encode,T=y.transformTo("string",B(w.name)),R=y.transformTo("string",S.utf8encode(w.name)),F=w.comment,H=y.transformTo("string",B(F)),rt=y.transformTo("string",S.utf8encode(F)),ot=R.length!==w.name.length,dt=rt.length!==F.length,$="",ct="",W="",V=w.dir,it=w.date,mt={crc32:0,compressedSize:0,uncompressedSize:0};q&&!G||(mt.crc32=z.crc32,mt.compressedSize=z.compressedSize,mt.uncompressedSize=z.uncompressedSize);var wt=0;q&&(wt|=8),k||!ot&&!dt||(wt|=2048);var _t=0,Ct=0;V&&(_t|=16),K==="UNIX"?(Ct=798,_t|=function(It,vt){var kt=It;return It||(kt=vt?16893:33204),(65535&kt)<<16}(w.unixPermissions,V)):(Ct=20,_t|=function(It){return 63&(It||0)}(w.dosPermissions)),N=it.getUTCHours(),N<<=6,N|=it.getUTCMinutes(),N<<=5,N|=it.getUTCSeconds()/2,Z=it.getUTCFullYear()-1980,Z<<=4,Z|=it.getUTCMonth()+1,Z<<=5,Z|=it.getUTCDate(),ot&&(ct=m(1,1)+m(O(T),4)+R,$+="up"+m(ct.length,2)+ct),dt&&(W=m(1,1)+m(O(H),4)+rt,$+="uc"+m(W.length,2)+W);var Ft="";return Ft+=`
\0`,Ft+=m(wt,2),Ft+=C.magic,Ft+=m(N,2),Ft+=m(Z,2),Ft+=m(mt.crc32,4),Ft+=m(mt.compressedSize,4),Ft+=m(mt.uncompressedSize,4),Ft+=m(T.length,2),Ft+=m($.length,2),{fileRecord:D.LOCAL_FILE_HEADER+Ft+T+$,dirRecord:D.CENTRAL_FILE_HEADER+m(Ct,2)+Ft+m(H.length,2)+"\0\0\0\0"+m(_t,4)+m(tt,4)+T+$+H}}var y=d("../utils"),x=d("../stream/GenericWorker"),S=d("../utf8"),O=d("../crc32"),D=d("../signature");function U(z,q,G,tt){x.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=q,this.zipPlatform=G,this.encodeFileName=tt,this.streamFiles=z,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(U,x),U.prototype.push=function(z){var q=z.meta.percent||0,G=this.entriesCount,tt=this._sources.length;this.accumulate?this.contentBuffer.push(z):(this.bytesWritten+=z.data.length,x.prototype.push.call(this,{data:z.data,meta:{currentFile:this.currentFile,percent:G?(q+100*(G-tt-1))/G:100}}))},U.prototype.openedSource=function(z){this.currentSourceOffset=this.bytesWritten,this.currentFile=z.file.name;var q=this.streamFiles&&!z.file.dir;if(q){var G=b(z,q,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:G.fileRecord,meta:{percent:0}})}else this.accumulate=!0},U.prototype.closedSource=function(z){this.accumulate=!1;var q=this.streamFiles&&!z.file.dir,G=b(z,q,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(G.dirRecord),q)this.push({data:function(tt){return D.DATA_DESCRIPTOR+m(tt.crc32,4)+m(tt.compressedSize,4)+m(tt.uncompressedSize,4)}(z),meta:{percent:100}});else for(this.push({data:G.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},U.prototype.flush=function(){for(var z=this.bytesWritten,q=0;q<this.dirRecords.length;q++)this.push({data:this.dirRecords[q],meta:{percent:100}});var G=this.bytesWritten-z,tt=function(K,B,N,Z,w){var C=y.transformTo("string",w(Z));return D.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(K,2)+m(K,2)+m(B,4)+m(N,4)+m(C.length,2)+C}(this.dirRecords.length,G,z,this.zipComment,this.encodeFileName);this.push({data:tt,meta:{percent:100}})},U.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},U.prototype.registerPrevious=function(z){this._sources.push(z);var q=this;return z.on("data",function(G){q.processChunk(G)}),z.on("end",function(){q.closedSource(q.previous.streamInfo),q._sources.length?q.prepareNextSource():q.end()}),z.on("error",function(G){q.error(G)}),this},U.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},U.prototype.error=function(z){var q=this._sources;if(!x.prototype.error.call(this,z))return!1;for(var G=0;G<q.length;G++)try{q[G].error(z)}catch{}return!0},U.prototype.lock=function(){x.prototype.lock.call(this);for(var z=this._sources,q=0;q<z.length;q++)z[q].lock()},p.exports=U},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(d,p,g){var m=d("../compressions"),b=d("./ZipFileWorker");g.generateWorker=function(y,x,S){var O=new b(x.streamFiles,S,x.platform,x.encodeFileName),D=0;try{y.forEach(function(U,z){D++;var q=function(B,N){var Z=B||N,w=m[Z];if(!w)throw new Error(Z+" is not a valid compression method !");return w}(z.options.compression,x.compression),G=z.options.compressionOptions||x.compressionOptions||{},tt=z.dir,K=z.date;z._compressWorker(q,G).withStreamInfo("file",{name:U,dir:tt,date:K,comment:z.comment||"",unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions}).pipe(O)}),O.entriesCount=D}catch(U){O.error(U)}return O}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(d,p,g){function m(){if(!(this instanceof m))return new m;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var b=new m;for(var y in this)typeof this[y]!="function"&&(b[y]=this[y]);return b}}(m.prototype=d("./object")).loadAsync=d("./load"),m.support=d("./support"),m.defaults=d("./defaults"),m.version="3.10.1",m.loadAsync=function(b,y){return new m().loadAsync(b,y)},m.external=d("./external"),p.exports=m},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(d,p,g){var m=d("./utils"),b=d("./external"),y=d("./utf8"),x=d("./zipEntries"),S=d("./stream/Crc32Probe"),O=d("./nodejsUtils");function D(U){return new b.Promise(function(z,q){var G=U.decompressed.getContentWorker().pipe(new S);G.on("error",function(tt){q(tt)}).on("end",function(){G.streamInfo.crc32!==U.decompressed.crc32?q(new Error("Corrupted zip : CRC32 mismatch")):z()}).resume()})}p.exports=function(U,z){var q=this;return z=m.extend(z||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),O.isNode&&O.isStream(U)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):m.prepareContent("the loaded zip file",U,!0,z.optimizedBinaryString,z.base64).then(function(G){var tt=new x(z);return tt.load(G),tt}).then(function(G){var tt=[b.Promise.resolve(G)],K=G.files;if(z.checkCRC32)for(var B=0;B<K.length;B++)tt.push(D(K[B]));return b.Promise.all(tt)}).then(function(G){for(var tt=G.shift(),K=tt.files,B=0;B<K.length;B++){var N=K[B],Z=N.fileNameStr,w=m.resolve(N.fileNameStr);q.file(w,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:z.createFolders}),N.dir||(q.file(w).unsafeOriginalName=Z)}return tt.zipComment.length&&(q.comment=tt.zipComment),q})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(d,p,g){var m=d("../utils"),b=d("../stream/GenericWorker");function y(x,S){b.call(this,"Nodejs stream input adapter for "+x),this._upstreamEnded=!1,this._bindStream(S)}m.inherits(y,b),y.prototype._bindStream=function(x){var S=this;(this._stream=x).pause(),x.on("data",function(O){S.push({data:O,meta:{percent:0}})}).on("error",function(O){S.isPaused?this.generatedError=O:S.error(O)}).on("end",function(){S.isPaused?S._upstreamEnded=!0:S.end()})},y.prototype.pause=function(){return!!b.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},p.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(d,p,g){var m=d("readable-stream").Readable;function b(y,x,S){m.call(this,x),this._helper=y;var O=this;y.on("data",function(D,U){O.push(D)||O._helper.pause(),S&&S(U)}).on("error",function(D){O.emit("error",D)}).on("end",function(){O.push(null)})}d("../utils").inherits(b,m),b.prototype._read=function(){this._helper.resume()},p.exports=b},{"../utils":32,"readable-stream":16}],14:[function(d,p,g){p.exports={isNode:s!==void 0,newBufferFrom:function(m,b){if(s.from&&s.from!==Uint8Array.from)return s.from(m,b);if(typeof m=="number")throw new Error('The "data" argument must not be a number');return new s(m,b)},allocBuffer:function(m){if(s.alloc)return s.alloc(m);var b=new s(m);return b.fill(0),b},isBuffer:function(m){return s.isBuffer(m)},isStream:function(m){return m&&typeof m.on=="function"&&typeof m.pause=="function"&&typeof m.resume=="function"}}},{}],15:[function(d,p,g){function m(w,C,k){var T,R=y.getTypeOf(C),F=y.extend(k||{},O);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(w=K(w)),F.createFolders&&(T=tt(w))&&B.call(this,T,!0);var H=R==="string"&&F.binary===!1&&F.base64===!1;k&&k.binary!==void 0||(F.binary=!H),(C instanceof D&&C.uncompressedSize===0||F.dir||!C||C.length===0)&&(F.base64=!1,F.binary=!0,C="",F.compression="STORE",R="string");var rt;rt=C instanceof D||C instanceof x?C:q.isNode&&q.isStream(C)?new G(w,C):y.prepareContent(w,C,F.binary,F.optimizedBinaryString,F.base64);var ot=new U(w,rt,F);this.files[w]=ot}var b=d("./utf8"),y=d("./utils"),x=d("./stream/GenericWorker"),S=d("./stream/StreamHelper"),O=d("./defaults"),D=d("./compressedObject"),U=d("./zipObject"),z=d("./generate"),q=d("./nodejsUtils"),G=d("./nodejs/NodejsStreamInputAdapter"),tt=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var C=w.lastIndexOf("/");return 0<C?w.substring(0,C):""},K=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},B=function(w,C){return C=C!==void 0?C:O.createFolders,w=K(w),this.files[w]||m.call(this,w,null,{dir:!0,createFolders:C}),this.files[w]};function N(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var Z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var C,k,T;for(C in this.files)T=this.files[C],(k=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&w(k,T)},filter:function(w){var C=[];return this.forEach(function(k,T){w(k,T)&&C.push(T)}),C},file:function(w,C,k){if(arguments.length!==1)return w=this.root+w,m.call(this,w,C,k),this;if(N(w)){var T=w;return this.filter(function(F,H){return!H.dir&&T.test(F)})}var R=this.files[this.root+w];return R&&!R.dir?R:null},folder:function(w){if(!w)return this;if(N(w))return this.filter(function(R,F){return F.dir&&w.test(R)});var C=this.root+w,k=B.call(this,C),T=this.clone();return T.root=k.name,T},remove:function(w){w=this.root+w;var C=this.files[w];if(C||(w.slice(-1)!=="/"&&(w+="/"),C=this.files[w]),C&&!C.dir)delete this.files[w];else for(var k=this.filter(function(R,F){return F.name.slice(0,w.length)===w}),T=0;T<k.length;T++)delete this.files[k[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var C,k={};try{if((k=y.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:b.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");y.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var T=k.comment||this.comment||"";C=z.generateWorker(this,k,T)}catch(R){(C=new x("error")).error(R)}return new S(C,k.type||"string",k.mimeType)},generateAsync:function(w,C){return this.generateInternalStream(w).accumulate(C)},generateNodeStream:function(w,C){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(C)}};p.exports=Z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(d,p,g){p.exports=d("stream")},{stream:void 0}],17:[function(d,p,g){var m=d("./DataReader");function b(y){m.call(this,y);for(var x=0;x<this.data.length;x++)y[x]=255&y[x]}d("../utils").inherits(b,m),b.prototype.byteAt=function(y){return this.data[this.zero+y]},b.prototype.lastIndexOfSignature=function(y){for(var x=y.charCodeAt(0),S=y.charCodeAt(1),O=y.charCodeAt(2),D=y.charCodeAt(3),U=this.length-4;0<=U;--U)if(this.data[U]===x&&this.data[U+1]===S&&this.data[U+2]===O&&this.data[U+3]===D)return U-this.zero;return-1},b.prototype.readAndCheckSignature=function(y){var x=y.charCodeAt(0),S=y.charCodeAt(1),O=y.charCodeAt(2),D=y.charCodeAt(3),U=this.readData(4);return x===U[0]&&S===U[1]&&O===U[2]&&D===U[3]},b.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var x=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,x},p.exports=b},{"../utils":32,"./DataReader":18}],18:[function(d,p,g){var m=d("../utils");function b(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var x,S=0;for(this.checkOffset(y),x=this.index+y-1;x>=this.index;x--)S=(S<<8)+this.byteAt(x);return this.index+=y,S},readString:function(y){return m.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},p.exports=b},{"../utils":32}],19:[function(d,p,g){var m=d("./Uint8ArrayReader");function b(y){m.call(this,y)}d("../utils").inherits(b,m),b.prototype.readData=function(y){this.checkOffset(y);var x=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,x},p.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(d,p,g){var m=d("./DataReader");function b(y){m.call(this,y)}d("../utils").inherits(b,m),b.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},b.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},b.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},b.prototype.readData=function(y){this.checkOffset(y);var x=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,x},p.exports=b},{"../utils":32,"./DataReader":18}],21:[function(d,p,g){var m=d("./ArrayReader");function b(y){m.call(this,y)}d("../utils").inherits(b,m),b.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var x=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,x},p.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(d,p,g){var m=d("../utils"),b=d("../support"),y=d("./ArrayReader"),x=d("./StringReader"),S=d("./NodeBufferReader"),O=d("./Uint8ArrayReader");p.exports=function(D){var U=m.getTypeOf(D);return m.checkSupport(U),U!=="string"||b.uint8array?U==="nodebuffer"?new S(D):b.uint8array?new O(m.transformTo("uint8array",D)):new y(m.transformTo("array",D)):new x(D)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(d,p,g){g.LOCAL_FILE_HEADER="PK",g.CENTRAL_FILE_HEADER="PK",g.CENTRAL_DIRECTORY_END="PK",g.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",g.ZIP64_CENTRAL_DIRECTORY_END="PK",g.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(d,p,g){var m=d("./GenericWorker"),b=d("../utils");function y(x){m.call(this,"ConvertWorker to "+x),this.destType=x}b.inherits(y,m),y.prototype.processChunk=function(x){this.push({data:b.transformTo(this.destType,x.data),meta:x.meta})},p.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(d,p,g){var m=d("./GenericWorker"),b=d("../crc32");function y(){m.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}d("../utils").inherits(y,m),y.prototype.processChunk=function(x){this.streamInfo.crc32=b(x.data,this.streamInfo.crc32||0),this.push(x)},p.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(d,p,g){var m=d("../utils"),b=d("./GenericWorker");function y(x){b.call(this,"DataLengthProbe for "+x),this.propName=x,this.withStreamInfo(x,0)}m.inherits(y,b),y.prototype.processChunk=function(x){if(x){var S=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=S+x.data.length}b.prototype.processChunk.call(this,x)},p.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(d,p,g){var m=d("../utils"),b=d("./GenericWorker");function y(x){b.call(this,"DataWorker");var S=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,x.then(function(O){S.dataIsReady=!0,S.data=O,S.max=O&&O.length||0,S.type=m.getTypeOf(O),S.isPaused||S._tickAndRepeat()},function(O){S.error(O)})}m.inherits(y,b),y.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,m.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(m.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var x=null,S=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":x=this.data.substring(this.index,S);break;case"uint8array":x=this.data.subarray(this.index,S);break;case"array":case"nodebuffer":x=this.data.slice(this.index,S)}return this.index=S,this.push({data:x,meta:{percent:this.max?this.index/this.max*100:0}})},p.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(d,p,g){function m(b){this.name=b||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}m.prototype={push:function(b){this.emit("data",b)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(b){this.emit("error",b)}return!0},error:function(b){return!this.isFinished&&(this.isPaused?this.generatedError=b:(this.isFinished=!0,this.emit("error",b),this.previous&&this.previous.error(b),this.cleanUp()),!0)},on:function(b,y){return this._listeners[b].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(b,y){if(this._listeners[b])for(var x=0;x<this._listeners[b].length;x++)this._listeners[b][x].call(this,y)},pipe:function(b){return b.registerPrevious(this)},registerPrevious:function(b){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=b.streamInfo,this.mergeStreamInfo(),this.previous=b;var y=this;return b.on("data",function(x){y.processChunk(x)}),b.on("end",function(){y.end()}),b.on("error",function(x){y.error(x)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var b=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),b=!0),this.previous&&this.previous.resume(),!b},flush:function(){},processChunk:function(b){this.push(b)},withStreamInfo:function(b,y){return this.extraStreamInfo[b]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var b in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,b)&&(this.streamInfo[b]=this.extraStreamInfo[b])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var b="Worker "+this.name;return this.previous?this.previous+" -> "+b:b}},p.exports=m},{}],29:[function(d,p,g){var m=d("../utils"),b=d("./ConvertWorker"),y=d("./GenericWorker"),x=d("../base64"),S=d("../support"),O=d("../external"),D=null;if(S.nodestream)try{D=d("../nodejs/NodejsStreamOutputAdapter")}catch{}function U(z,q,G){var tt=q;switch(q){case"blob":case"arraybuffer":tt="uint8array";break;case"base64":tt="string"}try{this._internalType=tt,this._outputType=q,this._mimeType=G,m.checkSupport(tt),this._worker=z.pipe(new b(tt)),z.lock()}catch(K){this._worker=new y("error"),this._worker.error(K)}}U.prototype={accumulate:function(z){return function(q,G){return new O.Promise(function(tt,K){var B=[],N=q._internalType,Z=q._outputType,w=q._mimeType;q.on("data",function(C,k){B.push(C),G&&G(k)}).on("error",function(C){B=[],K(C)}).on("end",function(){try{var C=function(k,T,R){switch(k){case"blob":return m.newBlob(m.transformTo("arraybuffer",T),R);case"base64":return x.encode(T);default:return m.transformTo(k,T)}}(Z,function(k,T){var R,F=0,H=null,rt=0;for(R=0;R<T.length;R++)rt+=T[R].length;switch(k){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(H=new Uint8Array(rt),R=0;R<T.length;R++)H.set(T[R],F),F+=T[R].length;return H;case"nodebuffer":return s.concat(T);default:throw new Error("concat : unsupported type '"+k+"'")}}(N,B),w);tt(C)}catch(k){K(k)}B=[]}).resume()})}(this,z)},on:function(z,q){var G=this;return z==="data"?this._worker.on(z,function(tt){q.call(G,tt.data,tt.meta)}):this._worker.on(z,function(){m.delay(q,arguments,G)}),this},resume:function(){return m.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(z){if(m.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new D(this,{objectMode:this._outputType!=="nodebuffer"},z)}},p.exports=U},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(d,p,g){if(g.base64=!0,g.array=!0,g.string=!0,g.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",g.nodebuffer=s!==void 0,g.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")g.blob=!1;else{var m=new ArrayBuffer(0);try{g.blob=new Blob([m],{type:"application/zip"}).size===0}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);b.append(m),g.blob=b.getBlob("application/zip").size===0}catch{g.blob=!1}}}try{g.nodestream=!!d("readable-stream").Readable}catch{g.nodestream=!1}},{"readable-stream":16}],31:[function(d,p,g){for(var m=d("./utils"),b=d("./support"),y=d("./nodejsUtils"),x=d("./stream/GenericWorker"),S=new Array(256),O=0;O<256;O++)S[O]=252<=O?6:248<=O?5:240<=O?4:224<=O?3:192<=O?2:1;function D(){x.call(this,"utf-8 decode"),this.leftOver=null}function U(){x.call(this,"utf-8 encode")}S[254]=S[254]=1,g.utf8encode=function(z){return b.nodebuffer?y.newBufferFrom(z,"utf-8"):function(q){var G,tt,K,B,N,Z=q.length,w=0;for(B=0;B<Z;B++)(64512&(tt=q.charCodeAt(B)))==55296&&B+1<Z&&(64512&(K=q.charCodeAt(B+1)))==56320&&(tt=65536+(tt-55296<<10)+(K-56320),B++),w+=tt<128?1:tt<2048?2:tt<65536?3:4;for(G=b.uint8array?new Uint8Array(w):new Array(w),B=N=0;N<w;B++)(64512&(tt=q.charCodeAt(B)))==55296&&B+1<Z&&(64512&(K=q.charCodeAt(B+1)))==56320&&(tt=65536+(tt-55296<<10)+(K-56320),B++),tt<128?G[N++]=tt:(tt<2048?G[N++]=192|tt>>>6:(tt<65536?G[N++]=224|tt>>>12:(G[N++]=240|tt>>>18,G[N++]=128|tt>>>12&63),G[N++]=128|tt>>>6&63),G[N++]=128|63&tt);return G}(z)},g.utf8decode=function(z){return b.nodebuffer?m.transformTo("nodebuffer",z).toString("utf-8"):function(q){var G,tt,K,B,N=q.length,Z=new Array(2*N);for(G=tt=0;G<N;)if((K=q[G++])<128)Z[tt++]=K;else if(4<(B=S[K]))Z[tt++]=65533,G+=B-1;else{for(K&=B===2?31:B===3?15:7;1<B&&G<N;)K=K<<6|63&q[G++],B--;1<B?Z[tt++]=65533:K<65536?Z[tt++]=K:(K-=65536,Z[tt++]=55296|K>>10&1023,Z[tt++]=56320|1023&K)}return Z.length!==tt&&(Z.subarray?Z=Z.subarray(0,tt):Z.length=tt),m.applyFromCharCode(Z)}(z=m.transformTo(b.uint8array?"uint8array":"array",z))},m.inherits(D,x),D.prototype.processChunk=function(z){var q=m.transformTo(b.uint8array?"uint8array":"array",z.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var G=q;(q=new Uint8Array(G.length+this.leftOver.length)).set(this.leftOver,0),q.set(G,this.leftOver.length)}else q=this.leftOver.concat(q);this.leftOver=null}var tt=function(B,N){var Z;for((N=N||B.length)>B.length&&(N=B.length),Z=N-1;0<=Z&&(192&B[Z])==128;)Z--;return Z<0||Z===0?N:Z+S[B[Z]]>N?Z:N}(q),K=q;tt!==q.length&&(b.uint8array?(K=q.subarray(0,tt),this.leftOver=q.subarray(tt,q.length)):(K=q.slice(0,tt),this.leftOver=q.slice(tt,q.length))),this.push({data:g.utf8decode(K),meta:z.meta})},D.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:g.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},g.Utf8DecodeWorker=D,m.inherits(U,x),U.prototype.processChunk=function(z){this.push({data:g.utf8encode(z.data),meta:z.meta})},g.Utf8EncodeWorker=U},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(d,p,g){var m=d("./support"),b=d("./base64"),y=d("./nodejsUtils"),x=d("./external");function S(G){return G}function O(G,tt){for(var K=0;K<G.length;++K)tt[K]=255&G.charCodeAt(K);return tt}d("setimmediate"),g.newBlob=function(G,tt){g.checkSupport("blob");try{return new Blob([G],{type:tt})}catch{try{var K=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return K.append(G),K.getBlob(tt)}catch{throw new Error("Bug : can't construct the Blob.")}}};var D={stringifyByChunk:function(G,tt,K){var B=[],N=0,Z=G.length;if(Z<=K)return String.fromCharCode.apply(null,G);for(;N<Z;)tt==="array"||tt==="nodebuffer"?B.push(String.fromCharCode.apply(null,G.slice(N,Math.min(N+K,Z)))):B.push(String.fromCharCode.apply(null,G.subarray(N,Math.min(N+K,Z)))),N+=K;return B.join("")},stringifyByChar:function(G){for(var tt="",K=0;K<G.length;K++)tt+=String.fromCharCode(G[K]);return tt},applyCanBeUsed:{uint8array:function(){try{return m.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return m.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}}()}};function U(G){var tt=65536,K=g.getTypeOf(G),B=!0;if(K==="uint8array"?B=D.applyCanBeUsed.uint8array:K==="nodebuffer"&&(B=D.applyCanBeUsed.nodebuffer),B)for(;1<tt;)try{return D.stringifyByChunk(G,K,tt)}catch{tt=Math.floor(tt/2)}return D.stringifyByChar(G)}function z(G,tt){for(var K=0;K<G.length;K++)tt[K]=G[K];return tt}g.applyFromCharCode=U;var q={};q.string={string:S,array:function(G){return O(G,new Array(G.length))},arraybuffer:function(G){return q.string.uint8array(G).buffer},uint8array:function(G){return O(G,new Uint8Array(G.length))},nodebuffer:function(G){return O(G,y.allocBuffer(G.length))}},q.array={string:U,array:S,arraybuffer:function(G){return new Uint8Array(G).buffer},uint8array:function(G){return new Uint8Array(G)},nodebuffer:function(G){return y.newBufferFrom(G)}},q.arraybuffer={string:function(G){return U(new Uint8Array(G))},array:function(G){return z(new Uint8Array(G),new Array(G.byteLength))},arraybuffer:S,uint8array:function(G){return new Uint8Array(G)},nodebuffer:function(G){return y.newBufferFrom(new Uint8Array(G))}},q.uint8array={string:U,array:function(G){return z(G,new Array(G.length))},arraybuffer:function(G){return G.buffer},uint8array:S,nodebuffer:function(G){return y.newBufferFrom(G)}},q.nodebuffer={string:U,array:function(G){return z(G,new Array(G.length))},arraybuffer:function(G){return q.nodebuffer.uint8array(G).buffer},uint8array:function(G){return z(G,new Uint8Array(G.length))},nodebuffer:S},g.transformTo=function(G,tt){if(tt=tt||"",!G)return tt;g.checkSupport(G);var K=g.getTypeOf(tt);return q[K][G](tt)},g.resolve=function(G){for(var tt=G.split("/"),K=[],B=0;B<tt.length;B++){var N=tt[B];N==="."||N===""&&B!==0&&B!==tt.length-1||(N===".."?K.pop():K.push(N))}return K.join("/")},g.getTypeOf=function(G){return typeof G=="string"?"string":Object.prototype.toString.call(G)==="[object Array]"?"array":m.nodebuffer&&y.isBuffer(G)?"nodebuffer":m.uint8array&&G instanceof Uint8Array?"uint8array":m.arraybuffer&&G instanceof ArrayBuffer?"arraybuffer":void 0},g.checkSupport=function(G){if(!m[G.toLowerCase()])throw new Error(G+" is not supported by this platform")},g.MAX_VALUE_16BITS=65535,g.MAX_VALUE_32BITS=-1,g.pretty=function(G){var tt,K,B="";for(K=0;K<(G||"").length;K++)B+="\\x"+((tt=G.charCodeAt(K))<16?"0":"")+tt.toString(16).toUpperCase();return B},g.delay=function(G,tt,K){h(function(){G.apply(K||null,tt||[])})},g.inherits=function(G,tt){function K(){}K.prototype=tt.prototype,G.prototype=new K},g.extend=function(){var G,tt,K={};for(G=0;G<arguments.length;G++)for(tt in arguments[G])Object.prototype.hasOwnProperty.call(arguments[G],tt)&&K[tt]===void 0&&(K[tt]=arguments[G][tt]);return K},g.prepareContent=function(G,tt,K,B,N){return x.Promise.resolve(tt).then(function(Z){return m.blob&&(Z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Z))!==-1)&&typeof FileReader<"u"?new x.Promise(function(w,C){var k=new FileReader;k.onload=function(T){w(T.target.result)},k.onerror=function(T){C(T.target.error)},k.readAsArrayBuffer(Z)}):Z}).then(function(Z){var w=g.getTypeOf(Z);return w?(w==="arraybuffer"?Z=g.transformTo("uint8array",Z):w==="string"&&(N?Z=b.decode(Z):K&&B!==!0&&(Z=function(C){return O(C,m.uint8array?new Uint8Array(C.length):new Array(C.length))}(Z))),Z):x.Promise.reject(new Error("Can't read the data of '"+G+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(d,p,g){var m=d("./reader/readerFor"),b=d("./utils"),y=d("./signature"),x=d("./zipEntry"),S=d("./support");function O(D){this.files=[],this.loadOptions=D}O.prototype={checkSignature:function(D){if(!this.reader.readAndCheckSignature(D)){this.reader.index-=4;var U=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(U)+", expected "+b.pretty(D)+")")}},isSignature:function(D,U){var z=this.reader.index;this.reader.setIndex(D);var q=this.reader.readString(4)===U;return this.reader.setIndex(z),q},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var D=this.reader.readData(this.zipCommentLength),U=S.uint8array?"uint8array":"array",z=b.transformTo(U,D);this.zipComment=this.loadOptions.decodeFileName(z)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var D,U,z,q=this.zip64EndOfCentralSize-44;0<q;)D=this.reader.readInt(2),U=this.reader.readInt(4),z=this.reader.readData(U),this.zip64ExtensibleData[D]={id:D,length:U,value:z}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var D,U;for(D=0;D<this.files.length;D++)U=this.files[D],this.reader.setIndex(U.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),U.readLocalPart(this.reader),U.handleUTF8(),U.processAttributes()},readCentralDir:function(){var D;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(D=new x({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(D);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var D=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(D<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(D);var U=D;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){if(this.zip64=!0,(D=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(D),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var z=this.centralDirOffset+this.centralDirSize;this.zip64&&(z+=20,z+=12+this.zip64EndOfCentralSize);var q=U-z;if(0<q)this.isSignature(U,y.CENTRAL_FILE_HEADER)||(this.reader.zero=q);else if(q<0)throw new Error("Corrupted zip: missing "+Math.abs(q)+" bytes.")},prepareReader:function(D){this.reader=m(D)},load:function(D){this.prepareReader(D),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},p.exports=O},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(d,p,g){var m=d("./reader/readerFor"),b=d("./utils"),y=d("./compressedObject"),x=d("./crc32"),S=d("./utf8"),O=d("./compressions"),D=d("./support");function U(z,q){this.options=z,this.loadOptions=q}U.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(z){var q,G;if(z.skip(22),this.fileNameLength=z.readInt(2),G=z.readInt(2),this.fileName=z.readData(this.fileNameLength),z.skip(G),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((q=function(tt){for(var K in O)if(Object.prototype.hasOwnProperty.call(O,K)&&O[K].magic===tt)return O[K];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,q,z.readData(this.compressedSize))},readCentralPart:function(z){this.versionMadeBy=z.readInt(2),z.skip(2),this.bitFlag=z.readInt(2),this.compressionMethod=z.readString(2),this.date=z.readDate(),this.crc32=z.readInt(4),this.compressedSize=z.readInt(4),this.uncompressedSize=z.readInt(4);var q=z.readInt(2);if(this.extraFieldsLength=z.readInt(2),this.fileCommentLength=z.readInt(2),this.diskNumberStart=z.readInt(2),this.internalFileAttributes=z.readInt(2),this.externalFileAttributes=z.readInt(4),this.localHeaderOffset=z.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");z.skip(q),this.readExtraFields(z),this.parseZIP64ExtraField(z),this.fileComment=z.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var z=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),z==0&&(this.dosPermissions=63&this.externalFileAttributes),z==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var z=m(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=z.readInt(8)),this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=z.readInt(8)),this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=z.readInt(8)),this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=z.readInt(4))}},readExtraFields:function(z){var q,G,tt,K=z.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});z.index+4<K;)q=z.readInt(2),G=z.readInt(2),tt=z.readData(G),this.extraFields[q]={id:q,length:G,value:tt};z.setIndex(K)},handleUTF8:function(){var z=D.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=S.utf8decode(this.fileName),this.fileCommentStr=S.utf8decode(this.fileComment);else{var q=this.findExtraFieldUnicodePath();if(q!==null)this.fileNameStr=q;else{var G=b.transformTo(z,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(G)}var tt=this.findExtraFieldUnicodeComment();if(tt!==null)this.fileCommentStr=tt;else{var K=b.transformTo(z,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(K)}}},findExtraFieldUnicodePath:function(){var z=this.extraFields[28789];if(z){var q=m(z.value);return q.readInt(1)!==1||x(this.fileName)!==q.readInt(4)?null:S.utf8decode(q.readData(z.length-5))}return null},findExtraFieldUnicodeComment:function(){var z=this.extraFields[25461];if(z){var q=m(z.value);return q.readInt(1)!==1||x(this.fileComment)!==q.readInt(4)?null:S.utf8decode(q.readData(z.length-5))}return null}},p.exports=U},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(d,p,g){function m(q,G,tt){this.name=q,this.dir=tt.dir,this.date=tt.date,this.comment=tt.comment,this.unixPermissions=tt.unixPermissions,this.dosPermissions=tt.dosPermissions,this._data=G,this._dataBinary=tt.binary,this.options={compression:tt.compression,compressionOptions:tt.compressionOptions}}var b=d("./stream/StreamHelper"),y=d("./stream/DataWorker"),x=d("./utf8"),S=d("./compressedObject"),O=d("./stream/GenericWorker");m.prototype={internalStream:function(q){var G=null,tt="string";try{if(!q)throw new Error("No output type specified.");var K=(tt=q.toLowerCase())==="string"||tt==="text";tt!=="binarystring"&&tt!=="text"||(tt="string"),G=this._decompressWorker();var B=!this._dataBinary;B&&!K&&(G=G.pipe(new x.Utf8EncodeWorker)),!B&&K&&(G=G.pipe(new x.Utf8DecodeWorker))}catch(N){(G=new O("error")).error(N)}return new b(G,tt,"")},async:function(q,G){return this.internalStream(q).accumulate(G)},nodeStream:function(q,G){return this.internalStream(q||"nodebuffer").toNodejsStream(G)},_compressWorker:function(q,G){if(this._data instanceof S&&this._data.compression.magic===q.magic)return this._data.getCompressedWorker();var tt=this._decompressWorker();return this._dataBinary||(tt=tt.pipe(new x.Utf8EncodeWorker)),S.createWorkerFrom(tt,q,G)},_decompressWorker:function(){return this._data instanceof S?this._data.getContentWorker():this._data instanceof O?this._data:new y(this._data)}};for(var D=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],U=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},z=0;z<D.length;z++)m.prototype[D[z]]=U;p.exports=m},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(d,p,g){(function(m){var b,y,x=m.MutationObserver||m.WebKitMutationObserver;if(x){var S=0,O=new x(q),D=m.document.createTextNode("");O.observe(D,{characterData:!0}),b=function(){D.data=S=++S%2}}else if(m.setImmediate||m.MessageChannel===void 0)b="document"in m&&"onreadystatechange"in m.document.createElement("script")?function(){var G=m.document.createElement("script");G.onreadystatechange=function(){q(),G.onreadystatechange=null,G.parentNode.removeChild(G),G=null},m.document.documentElement.appendChild(G)}:function(){setTimeout(q,0)};else{var U=new m.MessageChannel;U.port1.onmessage=q,b=function(){U.port2.postMessage(0)}}var z=[];function q(){var G,tt;y=!0;for(var K=z.length;K;){for(tt=z,z=[],G=-1;++G<K;)tt[G]();K=z.length}y=!1}p.exports=function(G){z.push(G)!==1||y||b()}}).call(this,i!==void 0?i:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(d,p,g){var m=d("immediate");function b(){}var y={},x=["REJECTED"],S=["FULFILLED"],O=["PENDING"];function D(K){if(typeof K!="function")throw new TypeError("resolver must be a function");this.state=O,this.queue=[],this.outcome=void 0,K!==b&&G(this,K)}function U(K,B,N){this.promise=K,typeof B=="function"&&(this.onFulfilled=B,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function z(K,B,N){m(function(){var Z;try{Z=B(N)}catch(w){return y.reject(K,w)}Z===K?y.reject(K,new TypeError("Cannot resolve promise with itself")):y.resolve(K,Z)})}function q(K){var B=K&&K.then;if(K&&(typeof K=="object"||typeof K=="function")&&typeof B=="function")return function(){B.apply(K,arguments)}}function G(K,B){var N=!1;function Z(k){N||(N=!0,y.reject(K,k))}function w(k){N||(N=!0,y.resolve(K,k))}var C=tt(function(){B(w,Z)});C.status==="error"&&Z(C.value)}function tt(K,B){var N={};try{N.value=K(B),N.status="success"}catch(Z){N.status="error",N.value=Z}return N}(p.exports=D).prototype.finally=function(K){if(typeof K!="function")return this;var B=this.constructor;return this.then(function(N){return B.resolve(K()).then(function(){return N})},function(N){return B.resolve(K()).then(function(){throw N})})},D.prototype.catch=function(K){return this.then(null,K)},D.prototype.then=function(K,B){if(typeof K!="function"&&this.state===S||typeof B!="function"&&this.state===x)return this;var N=new this.constructor(b);return this.state!==O?z(N,this.state===S?K:B,this.outcome):this.queue.push(new U(N,K,B)),N},U.prototype.callFulfilled=function(K){y.resolve(this.promise,K)},U.prototype.otherCallFulfilled=function(K){z(this.promise,this.onFulfilled,K)},U.prototype.callRejected=function(K){y.reject(this.promise,K)},U.prototype.otherCallRejected=function(K){z(this.promise,this.onRejected,K)},y.resolve=function(K,B){var N=tt(q,B);if(N.status==="error")return y.reject(K,N.value);var Z=N.value;if(Z)G(K,Z);else{K.state=S,K.outcome=B;for(var w=-1,C=K.queue.length;++w<C;)K.queue[w].callFulfilled(B)}return K},y.reject=function(K,B){K.state=x,K.outcome=B;for(var N=-1,Z=K.queue.length;++N<Z;)K.queue[N].callRejected(B);return K},D.resolve=function(K){return K instanceof this?K:y.resolve(new this(b),K)},D.reject=function(K){var B=new this(b);return y.reject(B,K)},D.all=function(K){var B=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=K.length,Z=!1;if(!N)return this.resolve([]);for(var w=new Array(N),C=0,k=-1,T=new this(b);++k<N;)R(K[k],k);return T;function R(F,H){B.resolve(F).then(function(rt){w[H]=rt,++C!==N||Z||(Z=!0,y.resolve(T,w))},function(rt){Z||(Z=!0,y.reject(T,rt))})}},D.race=function(K){if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=K.length,N=!1;if(!B)return this.resolve([]);for(var Z,w=-1,C=new this(b);++w<B;)Z=K[w],this.resolve(Z).then(function(k){N||(N=!0,y.resolve(C,k))},function(k){N||(N=!0,y.reject(C,k))});return C}},{immediate:36}],38:[function(d,p,g){var m={};(0,d("./lib/utils/common").assign)(m,d("./lib/deflate"),d("./lib/inflate"),d("./lib/zlib/constants")),p.exports=m},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(d,p,g){var m=d("./zlib/deflate"),b=d("./utils/common"),y=d("./utils/strings"),x=d("./zlib/messages"),S=d("./zlib/zstream"),O=Object.prototype.toString;function D(z){if(!(this instanceof D))return new D(z);this.options=b.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},z||{});var q=this.options;q.raw&&0<q.windowBits?q.windowBits=-q.windowBits:q.gzip&&0<q.windowBits&&q.windowBits<16&&(q.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var G=m.deflateInit2(this.strm,q.level,q.method,q.windowBits,q.memLevel,q.strategy);if(G!==0)throw new Error(x[G]);if(q.header&&m.deflateSetHeader(this.strm,q.header),q.dictionary){var tt;if(tt=typeof q.dictionary=="string"?y.string2buf(q.dictionary):O.call(q.dictionary)==="[object ArrayBuffer]"?new Uint8Array(q.dictionary):q.dictionary,(G=m.deflateSetDictionary(this.strm,tt))!==0)throw new Error(x[G]);this._dict_set=!0}}function U(z,q){var G=new D(q);if(G.push(z,!0),G.err)throw G.msg||x[G.err];return G.result}D.prototype.push=function(z,q){var G,tt,K=this.strm,B=this.options.chunkSize;if(this.ended)return!1;tt=q===~~q?q:q===!0?4:0,typeof z=="string"?K.input=y.string2buf(z):O.call(z)==="[object ArrayBuffer]"?K.input=new Uint8Array(z):K.input=z,K.next_in=0,K.avail_in=K.input.length;do{if(K.avail_out===0&&(K.output=new b.Buf8(B),K.next_out=0,K.avail_out=B),(G=m.deflate(K,tt))!==1&&G!==0)return this.onEnd(G),!(this.ended=!0);K.avail_out!==0&&(K.avail_in!==0||tt!==4&&tt!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(b.shrinkBuf(K.output,K.next_out))):this.onData(b.shrinkBuf(K.output,K.next_out)))}while((0<K.avail_in||K.avail_out===0)&&G!==1);return tt===4?(G=m.deflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===0):tt!==2||(this.onEnd(0),!(K.avail_out=0))},D.prototype.onData=function(z){this.chunks.push(z)},D.prototype.onEnd=function(z){z===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},g.Deflate=D,g.deflate=U,g.deflateRaw=function(z,q){return(q=q||{}).raw=!0,U(z,q)},g.gzip=function(z,q){return(q=q||{}).gzip=!0,U(z,q)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(d,p,g){var m=d("./zlib/inflate"),b=d("./utils/common"),y=d("./utils/strings"),x=d("./zlib/constants"),S=d("./zlib/messages"),O=d("./zlib/zstream"),D=d("./zlib/gzheader"),U=Object.prototype.toString;function z(G){if(!(this instanceof z))return new z(G);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},G||{});var tt=this.options;tt.raw&&0<=tt.windowBits&&tt.windowBits<16&&(tt.windowBits=-tt.windowBits,tt.windowBits===0&&(tt.windowBits=-15)),!(0<=tt.windowBits&&tt.windowBits<16)||G&&G.windowBits||(tt.windowBits+=32),15<tt.windowBits&&tt.windowBits<48&&!(15&tt.windowBits)&&(tt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new O,this.strm.avail_out=0;var K=m.inflateInit2(this.strm,tt.windowBits);if(K!==x.Z_OK)throw new Error(S[K]);this.header=new D,m.inflateGetHeader(this.strm,this.header)}function q(G,tt){var K=new z(tt);if(K.push(G,!0),K.err)throw K.msg||S[K.err];return K.result}z.prototype.push=function(G,tt){var K,B,N,Z,w,C,k=this.strm,T=this.options.chunkSize,R=this.options.dictionary,F=!1;if(this.ended)return!1;B=tt===~~tt?tt:tt===!0?x.Z_FINISH:x.Z_NO_FLUSH,typeof G=="string"?k.input=y.binstring2buf(G):U.call(G)==="[object ArrayBuffer]"?k.input=new Uint8Array(G):k.input=G,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new b.Buf8(T),k.next_out=0,k.avail_out=T),(K=m.inflate(k,x.Z_NO_FLUSH))===x.Z_NEED_DICT&&R&&(C=typeof R=="string"?y.string2buf(R):U.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,K=m.inflateSetDictionary(this.strm,C)),K===x.Z_BUF_ERROR&&F===!0&&(K=x.Z_OK,F=!1),K!==x.Z_STREAM_END&&K!==x.Z_OK)return this.onEnd(K),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&K!==x.Z_STREAM_END&&(k.avail_in!==0||B!==x.Z_FINISH&&B!==x.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=y.utf8border(k.output,k.next_out),Z=k.next_out-N,w=y.buf2string(k.output,N),k.next_out=Z,k.avail_out=T-Z,Z&&b.arraySet(k.output,k.output,N,Z,0),this.onData(w)):this.onData(b.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(F=!0)}while((0<k.avail_in||k.avail_out===0)&&K!==x.Z_STREAM_END);return K===x.Z_STREAM_END&&(B=x.Z_FINISH),B===x.Z_FINISH?(K=m.inflateEnd(this.strm),this.onEnd(K),this.ended=!0,K===x.Z_OK):B!==x.Z_SYNC_FLUSH||(this.onEnd(x.Z_OK),!(k.avail_out=0))},z.prototype.onData=function(G){this.chunks.push(G)},z.prototype.onEnd=function(G){G===x.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=G,this.msg=this.strm.msg},g.Inflate=z,g.inflate=q,g.inflateRaw=function(G,tt){return(tt=tt||{}).raw=!0,q(G,tt)},g.ungzip=q},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(d,p,g){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";g.assign=function(x){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var O=S.shift();if(O){if(typeof O!="object")throw new TypeError(O+"must be non-object");for(var D in O)O.hasOwnProperty(D)&&(x[D]=O[D])}}return x},g.shrinkBuf=function(x,S){return x.length===S?x:x.subarray?x.subarray(0,S):(x.length=S,x)};var b={arraySet:function(x,S,O,D,U){if(S.subarray&&x.subarray)x.set(S.subarray(O,O+D),U);else for(var z=0;z<D;z++)x[U+z]=S[O+z]},flattenChunks:function(x){var S,O,D,U,z,q;for(S=D=0,O=x.length;S<O;S++)D+=x[S].length;for(q=new Uint8Array(D),S=U=0,O=x.length;S<O;S++)z=x[S],q.set(z,U),U+=z.length;return q}},y={arraySet:function(x,S,O,D,U){for(var z=0;z<D;z++)x[U+z]=S[O+z]},flattenChunks:function(x){return[].concat.apply([],x)}};g.setTyped=function(x){x?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,b)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,y))},g.setTyped(m)},{}],42:[function(d,p,g){var m=d("./common"),b=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var x=new m.Buf8(256),S=0;S<256;S++)x[S]=252<=S?6:248<=S?5:240<=S?4:224<=S?3:192<=S?2:1;function O(D,U){if(U<65537&&(D.subarray&&y||!D.subarray&&b))return String.fromCharCode.apply(null,m.shrinkBuf(D,U));for(var z="",q=0;q<U;q++)z+=String.fromCharCode(D[q]);return z}x[254]=x[254]=1,g.string2buf=function(D){var U,z,q,G,tt,K=D.length,B=0;for(G=0;G<K;G++)(64512&(z=D.charCodeAt(G)))==55296&&G+1<K&&(64512&(q=D.charCodeAt(G+1)))==56320&&(z=65536+(z-55296<<10)+(q-56320),G++),B+=z<128?1:z<2048?2:z<65536?3:4;for(U=new m.Buf8(B),G=tt=0;tt<B;G++)(64512&(z=D.charCodeAt(G)))==55296&&G+1<K&&(64512&(q=D.charCodeAt(G+1)))==56320&&(z=65536+(z-55296<<10)+(q-56320),G++),z<128?U[tt++]=z:(z<2048?U[tt++]=192|z>>>6:(z<65536?U[tt++]=224|z>>>12:(U[tt++]=240|z>>>18,U[tt++]=128|z>>>12&63),U[tt++]=128|z>>>6&63),U[tt++]=128|63&z);return U},g.buf2binstring=function(D){return O(D,D.length)},g.binstring2buf=function(D){for(var U=new m.Buf8(D.length),z=0,q=U.length;z<q;z++)U[z]=D.charCodeAt(z);return U},g.buf2string=function(D,U){var z,q,G,tt,K=U||D.length,B=new Array(2*K);for(z=q=0;z<K;)if((G=D[z++])<128)B[q++]=G;else if(4<(tt=x[G]))B[q++]=65533,z+=tt-1;else{for(G&=tt===2?31:tt===3?15:7;1<tt&&z<K;)G=G<<6|63&D[z++],tt--;1<tt?B[q++]=65533:G<65536?B[q++]=G:(G-=65536,B[q++]=55296|G>>10&1023,B[q++]=56320|1023&G)}return O(B,q)},g.utf8border=function(D,U){var z;for((U=U||D.length)>D.length&&(U=D.length),z=U-1;0<=z&&(192&D[z])==128;)z--;return z<0||z===0?U:z+x[D[z]]>U?z:U}},{"./common":41}],43:[function(d,p,g){p.exports=function(m,b,y,x){for(var S=65535&m|0,O=m>>>16&65535|0,D=0;y!==0;){for(y-=D=2e3<y?2e3:y;O=O+(S=S+b[x++]|0)|0,--D;);S%=65521,O%=65521}return S|O<<16|0}},{}],44:[function(d,p,g){p.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(d,p,g){var m=function(){for(var b,y=[],x=0;x<256;x++){b=x;for(var S=0;S<8;S++)b=1&b?3988292384^b>>>1:b>>>1;y[x]=b}return y}();p.exports=function(b,y,x,S){var O=m,D=S+x;b^=-1;for(var U=S;U<D;U++)b=b>>>8^O[255&(b^y[U])];return-1^b}},{}],46:[function(d,p,g){var m,b=d("../utils/common"),y=d("./trees"),x=d("./adler32"),S=d("./crc32"),O=d("./messages"),D=-2,U=258,z=262,q=113;function G($,ct){return $.msg=O[ct],ct}function tt($){return($<<1)-(4<$?9:0)}function K($){for(var ct=$.length;0<=--ct;)$[ct]=0}function B($){var ct=$.state,W=ct.pending;W>$.avail_out&&(W=$.avail_out),W!==0&&(b.arraySet($.output,ct.pending_buf,ct.pending_out,W,$.next_out),$.next_out+=W,ct.pending_out+=W,$.total_out+=W,$.avail_out-=W,ct.pending-=W,ct.pending===0&&(ct.pending_out=0))}function N($,ct){y._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,ct),$.block_start=$.strstart,B($.strm)}function Z($,ct){$.pending_buf[$.pending++]=ct}function w($,ct){$.pending_buf[$.pending++]=ct>>>8&255,$.pending_buf[$.pending++]=255&ct}function C($,ct){var W,V,it=$.max_chain_length,mt=$.strstart,wt=$.prev_length,_t=$.nice_match,Ct=$.strstart>$.w_size-z?$.strstart-($.w_size-z):0,Ft=$.window,It=$.w_mask,vt=$.prev,kt=$.strstart+U,gt=Ft[mt+wt-1],ut=Ft[mt+wt];$.prev_length>=$.good_match&&(it>>=2),_t>$.lookahead&&(_t=$.lookahead);do if(Ft[(W=ct)+wt]===ut&&Ft[W+wt-1]===gt&&Ft[W]===Ft[mt]&&Ft[++W]===Ft[mt+1]){mt+=2,W++;do;while(Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&mt<kt);if(V=U-(kt-mt),mt=kt-U,wt<V){if($.match_start=ct,_t<=(wt=V))break;gt=Ft[mt+wt-1],ut=Ft[mt+wt]}}while((ct=vt[ct&It])>Ct&&--it!=0);return wt<=$.lookahead?wt:$.lookahead}function k($){var ct,W,V,it,mt,wt,_t,Ct,Ft,It,vt=$.w_size;do{if(it=$.window_size-$.lookahead-$.strstart,$.strstart>=vt+(vt-z)){for(b.arraySet($.window,$.window,vt,vt,0),$.match_start-=vt,$.strstart-=vt,$.block_start-=vt,ct=W=$.hash_size;V=$.head[--ct],$.head[ct]=vt<=V?V-vt:0,--W;);for(ct=W=vt;V=$.prev[--ct],$.prev[ct]=vt<=V?V-vt:0,--W;);it+=vt}if($.strm.avail_in===0)break;if(wt=$.strm,_t=$.window,Ct=$.strstart+$.lookahead,It=void 0,(Ft=it)<(It=wt.avail_in)&&(It=Ft),W=It===0?0:(wt.avail_in-=It,b.arraySet(_t,wt.input,wt.next_in,It,Ct),wt.state.wrap===1?wt.adler=x(wt.adler,_t,It,Ct):wt.state.wrap===2&&(wt.adler=S(wt.adler,_t,It,Ct)),wt.next_in+=It,wt.total_in+=It,It),$.lookahead+=W,$.lookahead+$.insert>=3)for(mt=$.strstart-$.insert,$.ins_h=$.window[mt],$.ins_h=($.ins_h<<$.hash_shift^$.window[mt+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[mt+3-1])&$.hash_mask,$.prev[mt&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=mt,mt++,$.insert--,!($.lookahead+$.insert<3)););}while($.lookahead<z&&$.strm.avail_in!==0)}function T($,ct){for(var W,V;;){if($.lookahead<z){if(k($),$.lookahead<z&&ct===0)return 1;if($.lookahead===0)break}if(W=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),W!==0&&$.strstart-W<=$.w_size-z&&($.match_length=C($,W)),$.match_length>=3)if(V=y._tr_tally($,$.strstart-$.match_start,$.match_length-3),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=3){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else V=y._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(V&&(N($,!1),$.strm.avail_out===0))return 1}return $.insert=$.strstart<2?$.strstart:2,ct===4?(N($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(N($,!1),$.strm.avail_out===0)?1:2}function R($,ct){for(var W,V,it;;){if($.lookahead<z){if(k($),$.lookahead<z&&ct===0)return 1;if($.lookahead===0)break}if(W=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=2,W!==0&&$.prev_length<$.max_lazy_match&&$.strstart-W<=$.w_size-z&&($.match_length=C($,W),$.match_length<=5&&($.strategy===1||$.match_length===3&&4096<$.strstart-$.match_start)&&($.match_length=2)),$.prev_length>=3&&$.match_length<=$.prev_length){for(it=$.strstart+$.lookahead-3,V=y._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-3),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=it&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=2,$.strstart++,V&&(N($,!1),$.strm.avail_out===0))return 1}else if($.match_available){if((V=y._tr_tally($,0,$.window[$.strstart-1]))&&N($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return 1}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(V=y._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<2?$.strstart:2,ct===4?(N($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(N($,!1),$.strm.avail_out===0)?1:2}function F($,ct,W,V,it){this.good_length=$,this.max_lazy=ct,this.nice_length=W,this.max_chain=V,this.func=it}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(1146),this.dyn_dtree=new b.Buf16(122),this.bl_tree=new b.Buf16(78),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(16),this.heap=new b.Buf16(573),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(573),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function rt($){var ct;return $&&$.state?($.total_in=$.total_out=0,$.data_type=2,(ct=$.state).pending=0,ct.pending_out=0,ct.wrap<0&&(ct.wrap=-ct.wrap),ct.status=ct.wrap?42:q,$.adler=ct.wrap===2?0:1,ct.last_flush=0,y._tr_init(ct),0):G($,D)}function ot($){var ct=rt($);return ct===0&&function(W){W.window_size=2*W.w_size,K(W.head),W.max_lazy_match=m[W.level].max_lazy,W.good_match=m[W.level].good_length,W.nice_match=m[W.level].nice_length,W.max_chain_length=m[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=2,W.match_available=0,W.ins_h=0}($.state),ct}function dt($,ct,W,V,it,mt){if(!$)return D;var wt=1;if(ct===-1&&(ct=6),V<0?(wt=0,V=-V):15<V&&(wt=2,V-=16),it<1||9<it||W!==8||V<8||15<V||ct<0||9<ct||mt<0||4<mt)return G($,D);V===8&&(V=9);var _t=new H;return($.state=_t).strm=$,_t.wrap=wt,_t.gzhead=null,_t.w_bits=V,_t.w_size=1<<_t.w_bits,_t.w_mask=_t.w_size-1,_t.hash_bits=it+7,_t.hash_size=1<<_t.hash_bits,_t.hash_mask=_t.hash_size-1,_t.hash_shift=~~((_t.hash_bits+3-1)/3),_t.window=new b.Buf8(2*_t.w_size),_t.head=new b.Buf16(_t.hash_size),_t.prev=new b.Buf16(_t.w_size),_t.lit_bufsize=1<<it+6,_t.pending_buf_size=4*_t.lit_bufsize,_t.pending_buf=new b.Buf8(_t.pending_buf_size),_t.d_buf=1*_t.lit_bufsize,_t.l_buf=3*_t.lit_bufsize,_t.level=ct,_t.strategy=mt,_t.method=W,ot($)}m=[new F(0,0,0,0,function($,ct){var W=65535;for(W>$.pending_buf_size-5&&(W=$.pending_buf_size-5);;){if($.lookahead<=1){if(k($),$.lookahead===0&&ct===0)return 1;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var V=$.block_start+W;if(($.strstart===0||$.strstart>=V)&&($.lookahead=$.strstart-V,$.strstart=V,N($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-z&&(N($,!1),$.strm.avail_out===0))return 1}return $.insert=0,ct===4?(N($,!0),$.strm.avail_out===0?3:4):($.strstart>$.block_start&&(N($,!1),$.strm.avail_out),1)}),new F(4,4,8,4,T),new F(4,5,16,8,T),new F(4,6,32,32,T),new F(4,4,16,16,R),new F(8,16,32,32,R),new F(8,16,128,128,R),new F(8,32,128,256,R),new F(32,128,258,1024,R),new F(32,258,258,4096,R)],g.deflateInit=function($,ct){return dt($,ct,8,15,8,0)},g.deflateInit2=dt,g.deflateReset=ot,g.deflateResetKeep=rt,g.deflateSetHeader=function($,ct){return $&&$.state?$.state.wrap!==2?D:($.state.gzhead=ct,0):D},g.deflate=function($,ct){var W,V,it,mt;if(!$||!$.state||5<ct||ct<0)return $?G($,D):D;if(V=$.state,!$.output||!$.input&&$.avail_in!==0||V.status===666&&ct!==4)return G($,$.avail_out===0?-5:D);if(V.strm=$,W=V.last_flush,V.last_flush=ct,V.status===42)if(V.wrap===2)$.adler=0,Z(V,31),Z(V,139),Z(V,8),V.gzhead?(Z(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),Z(V,255&V.gzhead.time),Z(V,V.gzhead.time>>8&255),Z(V,V.gzhead.time>>16&255),Z(V,V.gzhead.time>>24&255),Z(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),Z(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&(Z(V,255&V.gzhead.extra.length),Z(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&($.adler=S($.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):(Z(V,0),Z(V,0),Z(V,0),Z(V,0),Z(V,0),Z(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),Z(V,3),V.status=q);else{var wt=8+(V.w_bits-8<<4)<<8;wt|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(wt|=32),wt+=31-wt%31,V.status=q,w(V,wt),V.strstart!==0&&(w(V,$.adler>>>16),w(V,65535&$.adler)),$.adler=1}if(V.status===69)if(V.gzhead.extra){for(it=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>it&&($.adler=S($.adler,V.pending_buf,V.pending-it,it)),B($),it=V.pending,V.pending!==V.pending_buf_size));)Z(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>it&&($.adler=S($.adler,V.pending_buf,V.pending-it,it)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){it=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>it&&($.adler=S($.adler,V.pending_buf,V.pending-it,it)),B($),it=V.pending,V.pending===V.pending_buf_size)){mt=1;break}mt=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,Z(V,mt)}while(mt!==0);V.gzhead.hcrc&&V.pending>it&&($.adler=S($.adler,V.pending_buf,V.pending-it,it)),mt===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){it=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>it&&($.adler=S($.adler,V.pending_buf,V.pending-it,it)),B($),it=V.pending,V.pending===V.pending_buf_size)){mt=1;break}mt=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,Z(V,mt)}while(mt!==0);V.gzhead.hcrc&&V.pending>it&&($.adler=S($.adler,V.pending_buf,V.pending-it,it)),mt===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&B($),V.pending+2<=V.pending_buf_size&&(Z(V,255&$.adler),Z(V,$.adler>>8&255),$.adler=0,V.status=q)):V.status=q),V.pending!==0){if(B($),$.avail_out===0)return V.last_flush=-1,0}else if($.avail_in===0&&tt(ct)<=tt(W)&&ct!==4)return G($,-5);if(V.status===666&&$.avail_in!==0)return G($,-5);if($.avail_in!==0||V.lookahead!==0||ct!==0&&V.status!==666){var _t=V.strategy===2?function(Ct,Ft){for(var It;;){if(Ct.lookahead===0&&(k(Ct),Ct.lookahead===0)){if(Ft===0)return 1;break}if(Ct.match_length=0,It=y._tr_tally(Ct,0,Ct.window[Ct.strstart]),Ct.lookahead--,Ct.strstart++,It&&(N(Ct,!1),Ct.strm.avail_out===0))return 1}return Ct.insert=0,Ft===4?(N(Ct,!0),Ct.strm.avail_out===0?3:4):Ct.last_lit&&(N(Ct,!1),Ct.strm.avail_out===0)?1:2}(V,ct):V.strategy===3?function(Ct,Ft){for(var It,vt,kt,gt,ut=Ct.window;;){if(Ct.lookahead<=U){if(k(Ct),Ct.lookahead<=U&&Ft===0)return 1;if(Ct.lookahead===0)break}if(Ct.match_length=0,Ct.lookahead>=3&&0<Ct.strstart&&(vt=ut[kt=Ct.strstart-1])===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]){gt=Ct.strstart+U;do;while(vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&kt<gt);Ct.match_length=U-(gt-kt),Ct.match_length>Ct.lookahead&&(Ct.match_length=Ct.lookahead)}if(Ct.match_length>=3?(It=y._tr_tally(Ct,1,Ct.match_length-3),Ct.lookahead-=Ct.match_length,Ct.strstart+=Ct.match_length,Ct.match_length=0):(It=y._tr_tally(Ct,0,Ct.window[Ct.strstart]),Ct.lookahead--,Ct.strstart++),It&&(N(Ct,!1),Ct.strm.avail_out===0))return 1}return Ct.insert=0,Ft===4?(N(Ct,!0),Ct.strm.avail_out===0?3:4):Ct.last_lit&&(N(Ct,!1),Ct.strm.avail_out===0)?1:2}(V,ct):m[V.level].func(V,ct);if(_t!==3&&_t!==4||(V.status=666),_t===1||_t===3)return $.avail_out===0&&(V.last_flush=-1),0;if(_t===2&&(ct===1?y._tr_align(V):ct!==5&&(y._tr_stored_block(V,0,0,!1),ct===3&&(K(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),B($),$.avail_out===0))return V.last_flush=-1,0}return ct!==4?0:V.wrap<=0?1:(V.wrap===2?(Z(V,255&$.adler),Z(V,$.adler>>8&255),Z(V,$.adler>>16&255),Z(V,$.adler>>24&255),Z(V,255&$.total_in),Z(V,$.total_in>>8&255),Z(V,$.total_in>>16&255),Z(V,$.total_in>>24&255)):(w(V,$.adler>>>16),w(V,65535&$.adler)),B($),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?0:1)},g.deflateEnd=function($){var ct;return $&&$.state?(ct=$.state.status)!==42&&ct!==69&&ct!==73&&ct!==91&&ct!==103&&ct!==q&&ct!==666?G($,D):($.state=null,ct===q?G($,-3):0):D},g.deflateSetDictionary=function($,ct){var W,V,it,mt,wt,_t,Ct,Ft,It=ct.length;if(!$||!$.state||(mt=(W=$.state).wrap)===2||mt===1&&W.status!==42||W.lookahead)return D;for(mt===1&&($.adler=x($.adler,ct,It,0)),W.wrap=0,It>=W.w_size&&(mt===0&&(K(W.head),W.strstart=0,W.block_start=0,W.insert=0),Ft=new b.Buf8(W.w_size),b.arraySet(Ft,ct,It-W.w_size,W.w_size,0),ct=Ft,It=W.w_size),wt=$.avail_in,_t=$.next_in,Ct=$.input,$.avail_in=It,$.next_in=0,$.input=ct,k(W);W.lookahead>=3;){for(V=W.strstart,it=W.lookahead-2;W.ins_h=(W.ins_h<<W.hash_shift^W.window[V+3-1])&W.hash_mask,W.prev[V&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=V,V++,--it;);W.strstart=V,W.lookahead=2,k(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=2,W.match_available=0,$.next_in=_t,$.input=Ct,$.avail_in=wt,W.wrap=mt,0},g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(d,p,g){p.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(d,p,g){p.exports=function(m,b){var y,x,S,O,D,U,z,q,G,tt,K,B,N,Z,w,C,k,T,R,F,H,rt,ot,dt,$;y=m.state,x=m.next_in,dt=m.input,S=x+(m.avail_in-5),O=m.next_out,$=m.output,D=O-(b-m.avail_out),U=O+(m.avail_out-257),z=y.dmax,q=y.wsize,G=y.whave,tt=y.wnext,K=y.window,B=y.hold,N=y.bits,Z=y.lencode,w=y.distcode,C=(1<<y.lenbits)-1,k=(1<<y.distbits)-1;t:do{N<15&&(B+=dt[x++]<<N,N+=8,B+=dt[x++]<<N,N+=8),T=Z[B&C];e:for(;;){if(B>>>=R=T>>>24,N-=R,(R=T>>>16&255)==0)$[O++]=65535&T;else{if(!(16&R)){if(!(64&R)){T=Z[(65535&T)+(B&(1<<R)-1)];continue e}if(32&R){y.mode=12;break t}m.msg="invalid literal/length code",y.mode=30;break t}F=65535&T,(R&=15)&&(N<R&&(B+=dt[x++]<<N,N+=8),F+=B&(1<<R)-1,B>>>=R,N-=R),N<15&&(B+=dt[x++]<<N,N+=8,B+=dt[x++]<<N,N+=8),T=w[B&k];r:for(;;){if(B>>>=R=T>>>24,N-=R,!(16&(R=T>>>16&255))){if(!(64&R)){T=w[(65535&T)+(B&(1<<R)-1)];continue r}m.msg="invalid distance code",y.mode=30;break t}if(H=65535&T,N<(R&=15)&&(B+=dt[x++]<<N,(N+=8)<R&&(B+=dt[x++]<<N,N+=8)),z<(H+=B&(1<<R)-1)){m.msg="invalid distance too far back",y.mode=30;break t}if(B>>>=R,N-=R,(R=O-D)<H){if(G<(R=H-R)&&y.sane){m.msg="invalid distance too far back",y.mode=30;break t}if(ot=K,(rt=0)===tt){if(rt+=q-R,R<F){for(F-=R;$[O++]=K[rt++],--R;);rt=O-H,ot=$}}else if(tt<R){if(rt+=q+tt-R,(R-=tt)<F){for(F-=R;$[O++]=K[rt++],--R;);if(rt=0,tt<F){for(F-=R=tt;$[O++]=K[rt++],--R;);rt=O-H,ot=$}}}else if(rt+=tt-R,R<F){for(F-=R;$[O++]=K[rt++],--R;);rt=O-H,ot=$}for(;2<F;)$[O++]=ot[rt++],$[O++]=ot[rt++],$[O++]=ot[rt++],F-=3;F&&($[O++]=ot[rt++],1<F&&($[O++]=ot[rt++]))}else{for(rt=O-H;$[O++]=$[rt++],$[O++]=$[rt++],$[O++]=$[rt++],2<(F-=3););F&&($[O++]=$[rt++],1<F&&($[O++]=$[rt++]))}break}}break}}while(x<S&&O<U);x-=F=N>>3,B&=(1<<(N-=F<<3))-1,m.next_in=x,m.next_out=O,m.avail_in=x<S?S-x+5:5-(x-S),m.avail_out=O<U?U-O+257:257-(O-U),y.hold=B,y.bits=N}},{}],49:[function(d,p,g){var m=d("../utils/common"),b=d("./adler32"),y=d("./crc32"),x=d("./inffast"),S=d("./inftrees"),O=-2;function D(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function U(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z(C){var k;return C&&C.state?(k=C.state,C.total_in=C.total_out=k.total=0,C.msg="",k.wrap&&(C.adler=1&k.wrap),k.mode=1,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new m.Buf32(852),k.distcode=k.distdyn=new m.Buf32(592),k.sane=1,k.back=-1,0):O}function q(C){var k;return C&&C.state?((k=C.state).wsize=0,k.whave=0,k.wnext=0,z(C)):O}function G(C,k){var T,R;return C&&C.state?(R=C.state,k<0?(T=0,k=-k):(T=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?O:(R.window!==null&&R.wbits!==k&&(R.window=null),R.wrap=T,R.wbits=k,q(C))):O}function tt(C,k){var T,R;return C?(R=new U,(C.state=R).window=null,(T=G(C,k))!==0&&(C.state=null),T):O}var K,B,N=!0;function Z(C){if(N){var k;for(K=new m.Buf32(512),B=new m.Buf32(32),k=0;k<144;)C.lens[k++]=8;for(;k<256;)C.lens[k++]=9;for(;k<280;)C.lens[k++]=7;for(;k<288;)C.lens[k++]=8;for(S(1,C.lens,0,288,K,0,C.work,{bits:9}),k=0;k<32;)C.lens[k++]=5;S(2,C.lens,0,32,B,0,C.work,{bits:5}),N=!1}C.lencode=K,C.lenbits=9,C.distcode=B,C.distbits=5}function w(C,k,T,R){var F,H=C.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new m.Buf8(H.wsize)),R>=H.wsize?(m.arraySet(H.window,k,T-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(R<(F=H.wsize-H.wnext)&&(F=R),m.arraySet(H.window,k,T-R,F,H.wnext),(R-=F)?(m.arraySet(H.window,k,T-R,R,0),H.wnext=R,H.whave=H.wsize):(H.wnext+=F,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=F))),0}g.inflateReset=q,g.inflateReset2=G,g.inflateResetKeep=z,g.inflateInit=function(C){return tt(C,15)},g.inflateInit2=tt,g.inflate=function(C,k){var T,R,F,H,rt,ot,dt,$,ct,W,V,it,mt,wt,_t,Ct,Ft,It,vt,kt,gt,ut,Q,Y,et=0,lt=new m.Buf8(4),pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return O;(T=C.state).mode===12&&(T.mode=13),rt=C.next_out,F=C.output,dt=C.avail_out,H=C.next_in,R=C.input,ot=C.avail_in,$=T.hold,ct=T.bits,W=ot,V=dt,ut=0;t:for(;;)switch(T.mode){case 1:if(T.wrap===0){T.mode=13;break}for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(2&T.wrap&&$===35615){lt[T.check=0]=255&$,lt[1]=$>>>8&255,T.check=y(T.check,lt,2,0),ct=$=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&$)<<8)+($>>8))%31){C.msg="incorrect header check",T.mode=30;break}if((15&$)!=8){C.msg="unknown compression method",T.mode=30;break}if(ct-=4,gt=8+(15&($>>>=4)),T.wbits===0)T.wbits=gt;else if(gt>T.wbits){C.msg="invalid window size",T.mode=30;break}T.dmax=1<<gt,C.adler=T.check=1,T.mode=512&$?10:12,ct=$=0;break;case 2:for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(T.flags=$,(255&T.flags)!=8){C.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){C.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=$>>8&1),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,T.check=y(T.check,lt,2,0)),ct=$=0,T.mode=3;case 3:for(;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.head&&(T.head.time=$),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,lt[2]=$>>>16&255,lt[3]=$>>>24&255,T.check=y(T.check,lt,4,0)),ct=$=0,T.mode=4;case 4:for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.head&&(T.head.xflags=255&$,T.head.os=$>>8),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,T.check=y(T.check,lt,2,0)),ct=$=0,T.mode=5;case 5:if(1024&T.flags){for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.length=$,T.head&&(T.head.extra_len=$),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,T.check=y(T.check,lt,2,0)),ct=$=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(ot<(it=T.length)&&(it=ot),it&&(T.head&&(gt=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),m.arraySet(T.head.extra,R,H,it,gt)),512&T.flags&&(T.check=y(T.check,R,it,H)),ot-=it,H+=it,T.length-=it),T.length))break t;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(ot===0)break t;for(it=0;gt=R[H+it++],T.head&&gt&&T.length<65536&&(T.head.name+=String.fromCharCode(gt)),gt&&it<ot;);if(512&T.flags&&(T.check=y(T.check,R,it,H)),ot-=it,H+=it,gt)break t}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(ot===0)break t;for(it=0;gt=R[H+it++],T.head&&gt&&T.length<65536&&(T.head.comment+=String.fromCharCode(gt)),gt&&it<ot;);if(512&T.flags&&(T.check=y(T.check,R,it,H)),ot-=it,H+=it,gt)break t}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if($!==(65535&T.check)){C.msg="header crc mismatch",T.mode=30;break}ct=$=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),C.adler=T.check=0,T.mode=12;break;case 10:for(;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}C.adler=T.check=D($),ct=$=0,T.mode=11;case 11:if(T.havedict===0)return C.next_out=rt,C.avail_out=dt,C.next_in=H,C.avail_in=ot,T.hold=$,T.bits=ct,2;C.adler=T.check=1,T.mode=12;case 12:if(k===5||k===6)break t;case 13:if(T.last){$>>>=7&ct,ct-=7&ct,T.mode=27;break}for(;ct<3;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}switch(T.last=1&$,ct-=1,3&($>>>=1)){case 0:T.mode=14;break;case 1:if(Z(T),T.mode=20,k!==6)break;$>>>=2,ct-=2;break t;case 2:T.mode=17;break;case 3:C.msg="invalid block type",T.mode=30}$>>>=2,ct-=2;break;case 14:for($>>>=7&ct,ct-=7&ct;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if((65535&$)!=($>>>16^65535)){C.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&$,ct=$=0,T.mode=15,k===6)break t;case 15:T.mode=16;case 16:if(it=T.length){if(ot<it&&(it=ot),dt<it&&(it=dt),it===0)break t;m.arraySet(F,R,H,it,rt),ot-=it,H+=it,dt-=it,rt+=it,T.length-=it;break}T.mode=12;break;case 17:for(;ct<14;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(T.nlen=257+(31&$),$>>>=5,ct-=5,T.ndist=1+(31&$),$>>>=5,ct-=5,T.ncode=4+(15&$),$>>>=4,ct-=4,286<T.nlen||30<T.ndist){C.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;ct<3;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.lens[pt[T.have++]]=7&$,$>>>=3,ct-=3}for(;T.have<19;)T.lens[pt[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,Q={bits:T.lenbits},ut=S(0,T.lens,0,19,T.lencode,0,T.work,Q),T.lenbits=Q.bits,ut){C.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;Ct=(et=T.lencode[$&(1<<T.lenbits)-1])>>>16&255,Ft=65535&et,!((_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(Ft<16)$>>>=_t,ct-=_t,T.lens[T.have++]=Ft;else{if(Ft===16){for(Y=_t+2;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if($>>>=_t,ct-=_t,T.have===0){C.msg="invalid bit length repeat",T.mode=30;break}gt=T.lens[T.have-1],it=3+(3&$),$>>>=2,ct-=2}else if(Ft===17){for(Y=_t+3;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}ct-=_t,gt=0,it=3+(7&($>>>=_t)),$>>>=3,ct-=3}else{for(Y=_t+7;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}ct-=_t,gt=0,it=11+(127&($>>>=_t)),$>>>=7,ct-=7}if(T.have+it>T.nlen+T.ndist){C.msg="invalid bit length repeat",T.mode=30;break}for(;it--;)T.lens[T.have++]=gt}}if(T.mode===30)break;if(T.lens[256]===0){C.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,Q={bits:T.lenbits},ut=S(1,T.lens,0,T.nlen,T.lencode,0,T.work,Q),T.lenbits=Q.bits,ut){C.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,Q={bits:T.distbits},ut=S(2,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,Q),T.distbits=Q.bits,ut){C.msg="invalid distances set",T.mode=30;break}if(T.mode=20,k===6)break t;case 20:T.mode=21;case 21:if(6<=ot&&258<=dt){C.next_out=rt,C.avail_out=dt,C.next_in=H,C.avail_in=ot,T.hold=$,T.bits=ct,x(C,V),rt=C.next_out,F=C.output,dt=C.avail_out,H=C.next_in,R=C.input,ot=C.avail_in,$=T.hold,ct=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;Ct=(et=T.lencode[$&(1<<T.lenbits)-1])>>>16&255,Ft=65535&et,!((_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(Ct&&!(240&Ct)){for(It=_t,vt=Ct,kt=Ft;Ct=(et=T.lencode[kt+(($&(1<<It+vt)-1)>>It)])>>>16&255,Ft=65535&et,!(It+(_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}$>>>=It,ct-=It,T.back+=It}if($>>>=_t,ct-=_t,T.back+=_t,T.length=Ft,Ct===0){T.mode=26;break}if(32&Ct){T.back=-1,T.mode=12;break}if(64&Ct){C.msg="invalid literal/length code",T.mode=30;break}T.extra=15&Ct,T.mode=22;case 22:if(T.extra){for(Y=T.extra;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.length+=$&(1<<T.extra)-1,$>>>=T.extra,ct-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;Ct=(et=T.distcode[$&(1<<T.distbits)-1])>>>16&255,Ft=65535&et,!((_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(!(240&Ct)){for(It=_t,vt=Ct,kt=Ft;Ct=(et=T.distcode[kt+(($&(1<<It+vt)-1)>>It)])>>>16&255,Ft=65535&et,!(It+(_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}$>>>=It,ct-=It,T.back+=It}if($>>>=_t,ct-=_t,T.back+=_t,64&Ct){C.msg="invalid distance code",T.mode=30;break}T.offset=Ft,T.extra=15&Ct,T.mode=24;case 24:if(T.extra){for(Y=T.extra;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.offset+=$&(1<<T.extra)-1,$>>>=T.extra,ct-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){C.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(dt===0)break t;if(it=V-dt,T.offset>it){if((it=T.offset-it)>T.whave&&T.sane){C.msg="invalid distance too far back",T.mode=30;break}mt=it>T.wnext?(it-=T.wnext,T.wsize-it):T.wnext-it,it>T.length&&(it=T.length),wt=T.window}else wt=F,mt=rt-T.offset,it=T.length;for(dt<it&&(it=dt),dt-=it,T.length-=it;F[rt++]=wt[mt++],--it;);T.length===0&&(T.mode=21);break;case 26:if(dt===0)break t;F[rt++]=T.length,dt--,T.mode=21;break;case 27:if(T.wrap){for(;ct<32;){if(ot===0)break t;ot--,$|=R[H++]<<ct,ct+=8}if(V-=dt,C.total_out+=V,T.total+=V,V&&(C.adler=T.check=T.flags?y(T.check,F,V,rt-V):b(T.check,F,V,rt-V)),V=dt,(T.flags?$:D($))!==T.check){C.msg="incorrect data check",T.mode=30;break}ct=$=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if($!==(4294967295&T.total)){C.msg="incorrect length check",T.mode=30;break}ct=$=0}T.mode=29;case 29:ut=1;break t;case 30:ut=-3;break t;case 31:return-4;case 32:default:return O}return C.next_out=rt,C.avail_out=dt,C.next_in=H,C.avail_in=ot,T.hold=$,T.bits=ct,(T.wsize||V!==C.avail_out&&T.mode<30&&(T.mode<27||k!==4))&&w(C,C.output,C.next_out,V-C.avail_out)?(T.mode=31,-4):(W-=C.avail_in,V-=C.avail_out,C.total_in+=W,C.total_out+=V,T.total+=V,T.wrap&&V&&(C.adler=T.check=T.flags?y(T.check,F,V,C.next_out-V):b(T.check,F,V,C.next_out-V)),C.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(W==0&&V===0||k===4)&&ut===0&&(ut=-5),ut)},g.inflateEnd=function(C){if(!C||!C.state)return O;var k=C.state;return k.window&&(k.window=null),C.state=null,0},g.inflateGetHeader=function(C,k){var T;return C&&C.state&&2&(T=C.state).wrap?((T.head=k).done=!1,0):O},g.inflateSetDictionary=function(C,k){var T,R=k.length;return C&&C.state?(T=C.state).wrap!==0&&T.mode!==11?O:T.mode===11&&b(1,k,R,0)!==T.check?-3:w(C,k,R,R)?(T.mode=31,-4):(T.havedict=1,0):O},g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(d,p,g){var m=d("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];p.exports=function(O,D,U,z,q,G,tt,K){var B,N,Z,w,C,k,T,R,F,H=K.bits,rt=0,ot=0,dt=0,$=0,ct=0,W=0,V=0,it=0,mt=0,wt=0,_t=null,Ct=0,Ft=new m.Buf16(16),It=new m.Buf16(16),vt=null,kt=0;for(rt=0;rt<=15;rt++)Ft[rt]=0;for(ot=0;ot<z;ot++)Ft[D[U+ot]]++;for(ct=H,$=15;1<=$&&Ft[$]===0;$--);if($<ct&&(ct=$),$===0)return q[G++]=20971520,q[G++]=20971520,K.bits=1,0;for(dt=1;dt<$&&Ft[dt]===0;dt++);for(ct<dt&&(ct=dt),rt=it=1;rt<=15;rt++)if(it<<=1,(it-=Ft[rt])<0)return-1;if(0<it&&(O===0||$!==1))return-1;for(It[1]=0,rt=1;rt<15;rt++)It[rt+1]=It[rt]+Ft[rt];for(ot=0;ot<z;ot++)D[U+ot]!==0&&(tt[It[D[U+ot]]++]=ot);if(k=O===0?(_t=vt=tt,19):O===1?(_t=b,Ct-=257,vt=y,kt-=257,256):(_t=x,vt=S,-1),rt=dt,C=G,V=ot=wt=0,Z=-1,w=(mt=1<<(W=ct))-1,O===1&&852<mt||O===2&&592<mt)return 1;for(;;){for(T=rt-V,F=tt[ot]<k?(R=0,tt[ot]):tt[ot]>k?(R=vt[kt+tt[ot]],_t[Ct+tt[ot]]):(R=96,0),B=1<<rt-V,dt=N=1<<W;q[C+(wt>>V)+(N-=B)]=T<<24|R<<16|F|0,N!==0;);for(B=1<<rt-1;wt&B;)B>>=1;if(B!==0?(wt&=B-1,wt+=B):wt=0,ot++,--Ft[rt]==0){if(rt===$)break;rt=D[U+tt[ot]]}if(ct<rt&&(wt&w)!==Z){for(V===0&&(V=ct),C+=dt,it=1<<(W=rt-V);W+V<$&&!((it-=Ft[W+V])<=0);)W++,it<<=1;if(mt+=1<<W,O===1&&852<mt||O===2&&592<mt)return 1;q[Z=wt&w]=ct<<24|W<<16|C-G|0}}return wt!==0&&(q[C+wt]=rt-V<<24|64<<16|0),K.bits=ct,0}},{"../utils/common":41}],51:[function(d,p,g){p.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(d,p,g){var m=d("../utils/common");function b(vt){for(var kt=vt.length;0<=--kt;)vt[kt]=0}var y=256,x=286,S=30,O=15,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(576);b(G);var tt=new Array(60);b(tt);var K=new Array(512);b(K);var B=new Array(256);b(B);var N=new Array(29);b(N);var Z,w,C,k=new Array(S);function T(vt,kt,gt,ut,Q){this.static_tree=vt,this.extra_bits=kt,this.extra_base=gt,this.elems=ut,this.max_length=Q,this.has_stree=vt&&vt.length}function R(vt,kt){this.dyn_tree=vt,this.max_code=0,this.stat_desc=kt}function F(vt){return vt<256?K[vt]:K[256+(vt>>>7)]}function H(vt,kt){vt.pending_buf[vt.pending++]=255&kt,vt.pending_buf[vt.pending++]=kt>>>8&255}function rt(vt,kt,gt){vt.bi_valid>16-gt?(vt.bi_buf|=kt<<vt.bi_valid&65535,H(vt,vt.bi_buf),vt.bi_buf=kt>>16-vt.bi_valid,vt.bi_valid+=gt-16):(vt.bi_buf|=kt<<vt.bi_valid&65535,vt.bi_valid+=gt)}function ot(vt,kt,gt){rt(vt,gt[2*kt],gt[2*kt+1])}function dt(vt,kt){for(var gt=0;gt|=1&vt,vt>>>=1,gt<<=1,0<--kt;);return gt>>>1}function $(vt,kt,gt){var ut,Q,Y=new Array(16),et=0;for(ut=1;ut<=O;ut++)Y[ut]=et=et+gt[ut-1]<<1;for(Q=0;Q<=kt;Q++){var lt=vt[2*Q+1];lt!==0&&(vt[2*Q]=dt(Y[lt]++,lt))}}function ct(vt){var kt;for(kt=0;kt<x;kt++)vt.dyn_ltree[2*kt]=0;for(kt=0;kt<S;kt++)vt.dyn_dtree[2*kt]=0;for(kt=0;kt<19;kt++)vt.bl_tree[2*kt]=0;vt.dyn_ltree[512]=1,vt.opt_len=vt.static_len=0,vt.last_lit=vt.matches=0}function W(vt){8<vt.bi_valid?H(vt,vt.bi_buf):0<vt.bi_valid&&(vt.pending_buf[vt.pending++]=vt.bi_buf),vt.bi_buf=0,vt.bi_valid=0}function V(vt,kt,gt,ut){var Q=2*kt,Y=2*gt;return vt[Q]<vt[Y]||vt[Q]===vt[Y]&&ut[kt]<=ut[gt]}function it(vt,kt,gt){for(var ut=vt.heap[gt],Q=gt<<1;Q<=vt.heap_len&&(Q<vt.heap_len&&V(kt,vt.heap[Q+1],vt.heap[Q],vt.depth)&&Q++,!V(kt,ut,vt.heap[Q],vt.depth));)vt.heap[gt]=vt.heap[Q],gt=Q,Q<<=1;vt.heap[gt]=ut}function mt(vt,kt,gt){var ut,Q,Y,et,lt=0;if(vt.last_lit!==0)for(;ut=vt.pending_buf[vt.d_buf+2*lt]<<8|vt.pending_buf[vt.d_buf+2*lt+1],Q=vt.pending_buf[vt.l_buf+lt],lt++,ut===0?ot(vt,Q,kt):(ot(vt,(Y=B[Q])+y+1,kt),(et=D[Y])!==0&&rt(vt,Q-=N[Y],et),ot(vt,Y=F(--ut),gt),(et=U[Y])!==0&&rt(vt,ut-=k[Y],et)),lt<vt.last_lit;);ot(vt,256,kt)}function wt(vt,kt){var gt,ut,Q,Y=kt.dyn_tree,et=kt.stat_desc.static_tree,lt=kt.stat_desc.has_stree,pt=kt.stat_desc.elems,bt=-1;for(vt.heap_len=0,vt.heap_max=573,gt=0;gt<pt;gt++)Y[2*gt]!==0?(vt.heap[++vt.heap_len]=bt=gt,vt.depth[gt]=0):Y[2*gt+1]=0;for(;vt.heap_len<2;)Y[2*(Q=vt.heap[++vt.heap_len]=bt<2?++bt:0)]=1,vt.depth[Q]=0,vt.opt_len--,lt&&(vt.static_len-=et[2*Q+1]);for(kt.max_code=bt,gt=vt.heap_len>>1;1<=gt;gt--)it(vt,Y,gt);for(Q=pt;gt=vt.heap[1],vt.heap[1]=vt.heap[vt.heap_len--],it(vt,Y,1),ut=vt.heap[1],vt.heap[--vt.heap_max]=gt,vt.heap[--vt.heap_max]=ut,Y[2*Q]=Y[2*gt]+Y[2*ut],vt.depth[Q]=(vt.depth[gt]>=vt.depth[ut]?vt.depth[gt]:vt.depth[ut])+1,Y[2*gt+1]=Y[2*ut+1]=Q,vt.heap[1]=Q++,it(vt,Y,1),2<=vt.heap_len;);vt.heap[--vt.heap_max]=vt.heap[1],function(Et,Ot){var zt,Gt,Jt,Kt,re,Xt,Ut=Ot.dyn_tree,_e=Ot.max_code,le=Ot.stat_desc.static_tree,ye=Ot.stat_desc.has_stree,Ze=Ot.stat_desc.extra_bits,ce=Ot.stat_desc.extra_base,ke=Ot.stat_desc.max_length,He=0;for(Kt=0;Kt<=O;Kt++)Et.bl_count[Kt]=0;for(Ut[2*Et.heap[Et.heap_max]+1]=0,zt=Et.heap_max+1;zt<573;zt++)ke<(Kt=Ut[2*Ut[2*(Gt=Et.heap[zt])+1]+1]+1)&&(Kt=ke,He++),Ut[2*Gt+1]=Kt,_e<Gt||(Et.bl_count[Kt]++,re=0,ce<=Gt&&(re=Ze[Gt-ce]),Xt=Ut[2*Gt],Et.opt_len+=Xt*(Kt+re),ye&&(Et.static_len+=Xt*(le[2*Gt+1]+re)));if(He!==0){do{for(Kt=ke-1;Et.bl_count[Kt]===0;)Kt--;Et.bl_count[Kt]--,Et.bl_count[Kt+1]+=2,Et.bl_count[ke]--,He-=2}while(0<He);for(Kt=ke;Kt!==0;Kt--)for(Gt=Et.bl_count[Kt];Gt!==0;)_e<(Jt=Et.heap[--zt])||(Ut[2*Jt+1]!==Kt&&(Et.opt_len+=(Kt-Ut[2*Jt+1])*Ut[2*Jt],Ut[2*Jt+1]=Kt),Gt--)}}(vt,kt),$(Y,bt,vt.bl_count)}function _t(vt,kt,gt){var ut,Q,Y=-1,et=kt[1],lt=0,pt=7,bt=4;for(et===0&&(pt=138,bt=3),kt[2*(gt+1)+1]=65535,ut=0;ut<=gt;ut++)Q=et,et=kt[2*(ut+1)+1],++lt<pt&&Q===et||(lt<bt?vt.bl_tree[2*Q]+=lt:Q!==0?(Q!==Y&&vt.bl_tree[2*Q]++,vt.bl_tree[32]++):lt<=10?vt.bl_tree[34]++:vt.bl_tree[36]++,Y=Q,bt=(lt=0)===et?(pt=138,3):Q===et?(pt=6,3):(pt=7,4))}function Ct(vt,kt,gt){var ut,Q,Y=-1,et=kt[1],lt=0,pt=7,bt=4;for(et===0&&(pt=138,bt=3),ut=0;ut<=gt;ut++)if(Q=et,et=kt[2*(ut+1)+1],!(++lt<pt&&Q===et)){if(lt<bt)for(;ot(vt,Q,vt.bl_tree),--lt!=0;);else Q!==0?(Q!==Y&&(ot(vt,Q,vt.bl_tree),lt--),ot(vt,16,vt.bl_tree),rt(vt,lt-3,2)):lt<=10?(ot(vt,17,vt.bl_tree),rt(vt,lt-3,3)):(ot(vt,18,vt.bl_tree),rt(vt,lt-11,7));Y=Q,bt=(lt=0)===et?(pt=138,3):Q===et?(pt=6,3):(pt=7,4)}}b(k);var Ft=!1;function It(vt,kt,gt,ut){rt(vt,0+(ut?1:0),3),function(Q,Y,et,lt){W(Q),H(Q,et),H(Q,~et),m.arraySet(Q.pending_buf,Q.window,Y,et,Q.pending),Q.pending+=et}(vt,kt,gt)}g._tr_init=function(vt){Ft||(function(){var kt,gt,ut,Q,Y,et=new Array(16);for(Q=ut=0;Q<28;Q++)for(N[Q]=ut,kt=0;kt<1<<D[Q];kt++)B[ut++]=Q;for(B[ut-1]=Q,Q=Y=0;Q<16;Q++)for(k[Q]=Y,kt=0;kt<1<<U[Q];kt++)K[Y++]=Q;for(Y>>=7;Q<S;Q++)for(k[Q]=Y<<7,kt=0;kt<1<<U[Q]-7;kt++)K[256+Y++]=Q;for(gt=0;gt<=O;gt++)et[gt]=0;for(kt=0;kt<=143;)G[2*kt+1]=8,kt++,et[8]++;for(;kt<=255;)G[2*kt+1]=9,kt++,et[9]++;for(;kt<=279;)G[2*kt+1]=7,kt++,et[7]++;for(;kt<=287;)G[2*kt+1]=8,kt++,et[8]++;for($(G,287,et),kt=0;kt<S;kt++)tt[2*kt+1]=5,tt[2*kt]=dt(kt,5);Z=new T(G,D,257,x,O),w=new T(tt,U,0,S,O),C=new T(new Array(0),z,0,19,7)}(),Ft=!0),vt.l_desc=new R(vt.dyn_ltree,Z),vt.d_desc=new R(vt.dyn_dtree,w),vt.bl_desc=new R(vt.bl_tree,C),vt.bi_buf=0,vt.bi_valid=0,ct(vt)},g._tr_stored_block=It,g._tr_flush_block=function(vt,kt,gt,ut){var Q,Y,et=0;0<vt.level?(vt.strm.data_type===2&&(vt.strm.data_type=function(lt){var pt,bt=4093624447;for(pt=0;pt<=31;pt++,bt>>>=1)if(1&bt&&lt.dyn_ltree[2*pt]!==0)return 0;if(lt.dyn_ltree[18]!==0||lt.dyn_ltree[20]!==0||lt.dyn_ltree[26]!==0)return 1;for(pt=32;pt<y;pt++)if(lt.dyn_ltree[2*pt]!==0)return 1;return 0}(vt)),wt(vt,vt.l_desc),wt(vt,vt.d_desc),et=function(lt){var pt;for(_t(lt,lt.dyn_ltree,lt.l_desc.max_code),_t(lt,lt.dyn_dtree,lt.d_desc.max_code),wt(lt,lt.bl_desc),pt=18;3<=pt&&lt.bl_tree[2*q[pt]+1]===0;pt--);return lt.opt_len+=3*(pt+1)+5+5+4,pt}(vt),Q=vt.opt_len+3+7>>>3,(Y=vt.static_len+3+7>>>3)<=Q&&(Q=Y)):Q=Y=gt+5,gt+4<=Q&&kt!==-1?It(vt,kt,gt,ut):vt.strategy===4||Y===Q?(rt(vt,2+(ut?1:0),3),mt(vt,G,tt)):(rt(vt,4+(ut?1:0),3),function(lt,pt,bt,Et){var Ot;for(rt(lt,pt-257,5),rt(lt,bt-1,5),rt(lt,Et-4,4),Ot=0;Ot<Et;Ot++)rt(lt,lt.bl_tree[2*q[Ot]+1],3);Ct(lt,lt.dyn_ltree,pt-1),Ct(lt,lt.dyn_dtree,bt-1)}(vt,vt.l_desc.max_code+1,vt.d_desc.max_code+1,et+1),mt(vt,vt.dyn_ltree,vt.dyn_dtree)),ct(vt),ut&&W(vt)},g._tr_tally=function(vt,kt,gt){return vt.pending_buf[vt.d_buf+2*vt.last_lit]=kt>>>8&255,vt.pending_buf[vt.d_buf+2*vt.last_lit+1]=255&kt,vt.pending_buf[vt.l_buf+vt.last_lit]=255&gt,vt.last_lit++,kt===0?vt.dyn_ltree[2*gt]++:(vt.matches++,kt--,vt.dyn_ltree[2*(B[gt]+y+1)]++,vt.dyn_dtree[2*F(kt)]++),vt.last_lit===vt.lit_bufsize-1},g._tr_align=function(vt){rt(vt,2,3),ot(vt,256,G),function(kt){kt.bi_valid===16?(H(kt,kt.bi_buf),kt.bi_buf=0,kt.bi_valid=0):8<=kt.bi_valid&&(kt.pending_buf[kt.pending++]=255&kt.bi_buf,kt.bi_buf>>=8,kt.bi_valid-=8)}(vt)}},{"../utils/common":41}],53:[function(d,p,g){p.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(d,p,g){(function(m){(function(b,y){if(!b.setImmediate){var x,S,O,D,U=1,z={},q=!1,G=b.document,tt=Object.getPrototypeOf&&Object.getPrototypeOf(b);tt=tt&&tt.setTimeout?tt:b,x={}.toString.call(b.process)==="[object process]"?function(Z){r.nextTick(function(){B(Z)})}:function(){if(b.postMessage&&!b.importScripts){var Z=!0,w=b.onmessage;return b.onmessage=function(){Z=!1},b.postMessage("","*"),b.onmessage=w,Z}}()?(D="setImmediate$"+Math.random()+"$",b.addEventListener?b.addEventListener("message",N,!1):b.attachEvent("onmessage",N),function(Z){b.postMessage(D+Z,"*")}):b.MessageChannel?((O=new MessageChannel).port1.onmessage=function(Z){B(Z.data)},function(Z){O.port2.postMessage(Z)}):G&&"onreadystatechange"in G.createElement("script")?(S=G.documentElement,function(Z){var w=G.createElement("script");w.onreadystatechange=function(){B(Z),w.onreadystatechange=null,S.removeChild(w),w=null},S.appendChild(w)}):function(Z){setTimeout(B,0,Z)},tt.setImmediate=function(Z){typeof Z!="function"&&(Z=new Function(""+Z));for(var w=new Array(arguments.length-1),C=0;C<w.length;C++)w[C]=arguments[C+1];var k={callback:Z,args:w};return z[U]=k,x(U),U++},tt.clearImmediate=K}function K(Z){delete z[Z]}function B(Z){if(q)setTimeout(B,0,Z);else{var w=z[Z];if(w){q=!0;try{(function(C){var k=C.callback,T=C.args;switch(T.length){case 0:k();break;case 1:k(T[0]);break;case 2:k(T[0],T[1]);break;case 3:k(T[0],T[1],T[2]);break;default:k.apply(void 0,T)}})(w)}finally{K(Z),q=!1}}}}function N(Z){Z.source===b&&typeof Z.data=="string"&&Z.data.indexOf(D)===0&&B(+Z.data.slice(D.length))}})(typeof self>"u"?m===void 0?this:m:self)}).call(this,i!==void 0?i:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],n("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(n,t,e){(function(r){(function(){"use strict";var i=/[\\^$.*+?()[\]{}|]/g,s=RegExp(i.source),o=typeof r=="object"&&r&&r.Object===Object&&r,a=typeof self=="object"&&self&&self.Object===Object&&self,l=o||a||Function("return this")(),c=Object.prototype.toString,h=l.Symbol,d=h?h.prototype:void 0,p=d?d.toString:void 0;function g(m){if(typeof m=="string")return m;if(function(y){return typeof y=="symbol"||function(x){return!!x&&typeof x=="object"}(y)&&c.call(y)=="[object Symbol]"}(m))return p?p.call(m):"";var b=m+"";return b=="0"&&1/m==-1/0?"-0":b}t.exports=function(m){var b;return(m=(b=m)==null?"":g(b))&&s.test(m)?m.replace(i,"\\$&"):m}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(n,t,e){(function(r){(function(){"use strict";var i="[object Arguments]",s="[object Map]",o="[object Object]",a="[object Set]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,h=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,b={};b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b[i]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object Boolean]"]=b["[object DataView]"]=b["[object Date]"]=b["[object Error]"]=b["[object Function]"]=b[s]=b["[object Number]"]=b[o]=b["[object RegExp]"]=b[a]=b["[object String]"]=b["[object WeakMap]"]=!1;var y=typeof r=="object"&&r&&r.Object===Object&&r,x=typeof self=="object"&&self&&self.Object===Object&&self,S=y||x||Function("return this")(),O=typeof e=="object"&&e&&!e.nodeType&&e,D=O&&typeof t=="object"&&t&&!t.nodeType&&t,U=D&&D.exports===O&&y.process,z=function(){try{return U&&U.binding("util")}catch{}}(),q=z&&z.isTypedArray;function G(Tt,Ht,ie,Qt){for(var he=-1,Ee=Tt?Tt.length:0;++he<Ee;){var Ie=Tt[he];Ht(Qt,Ie,ie(Ie),Tt)}return Qt}function tt(Tt,Ht){for(var ie=-1,Qt=Tt?Tt.length:0;++ie<Qt;)if(Ht(Tt[ie],ie,Tt))return!0;return!1}function K(Tt){var Ht=!1;if(Tt!=null&&typeof Tt.toString!="function")try{Ht=!!(Tt+"")}catch{}return Ht}function B(Tt){var Ht=-1,ie=Array(Tt.size);return Tt.forEach(function(Qt,he){ie[++Ht]=[he,Qt]}),ie}function N(Tt){var Ht=-1,ie=Array(Tt.size);return Tt.forEach(function(Qt){ie[++Ht]=Qt}),ie}var Z,w,C,k=Array.prototype,T=Function.prototype,R=Object.prototype,F=S["__core-js_shared__"],H=(Z=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",rt=T.toString,ot=R.hasOwnProperty,dt=R.toString,$=RegExp("^"+rt.call(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=S.Symbol,W=S.Uint8Array,V=R.propertyIsEnumerable,it=k.splice,mt=(w=Object.keys,C=Object,function(Tt){return w(C(Tt))}),wt=Fe(S,"DataView"),_t=Fe(S,"Map"),Ct=Fe(S,"Promise"),Ft=Fe(S,"Set"),It=Fe(S,"WeakMap"),vt=Fe(Object,"create"),kt=jt(wt),gt=jt(_t),ut=jt(Ct),Q=jt(Ft),Y=jt(It),et=ct?ct.prototype:void 0,lt=et?et.valueOf:void 0,pt=et?et.toString:void 0;function bt(Tt){var Ht=-1,ie=Tt?Tt.length:0;for(this.clear();++Ht<ie;){var Qt=Tt[Ht];this.set(Qt[0],Qt[1])}}function Et(Tt){var Ht=-1,ie=Tt?Tt.length:0;for(this.clear();++Ht<ie;){var Qt=Tt[Ht];this.set(Qt[0],Qt[1])}}function Ot(Tt){var Ht=-1,ie=Tt?Tt.length:0;for(this.clear();++Ht<ie;){var Qt=Tt[Ht];this.set(Qt[0],Qt[1])}}function zt(Tt){var Ht=-1,ie=Tt?Tt.length:0;for(this.__data__=new Ot;++Ht<ie;)this.add(Tt[Ht])}function Gt(Tt){this.__data__=new Et(Tt)}function Jt(Tt,Ht){var ie=fe(Tt)||Ae(Tt)?function(Ie,tr){for(var Ue=-1,we=Array(Ie);++Ue<Ie;)we[Ue]=tr(Ue);return we}(Tt.length,String):[],Qt=ie.length,he=!!Qt;for(var Ee in Tt)!Ht&&!ot.call(Tt,Ee)||he&&(Ee=="length"||Le(Ee,Qt))||ie.push(Ee);return ie}function Kt(Tt,Ht){for(var ie=Tt.length;ie--;)if($e(Tt[ie][0],Ht))return ie;return-1}function re(Tt,Ht,ie,Qt){return _e(Tt,function(he,Ee,Ie){Ht(Qt,he,ie(he),Ie)}),Qt}bt.prototype.clear=function(){this.__data__=vt?vt(null):{}},bt.prototype.delete=function(Tt){return this.has(Tt)&&delete this.__data__[Tt]},bt.prototype.get=function(Tt){var Ht=this.__data__;if(vt){var ie=Ht[Tt];return ie==="__lodash_hash_undefined__"?void 0:ie}return ot.call(Ht,Tt)?Ht[Tt]:void 0},bt.prototype.has=function(Tt){var Ht=this.__data__;return vt?Ht[Tt]!==void 0:ot.call(Ht,Tt)},bt.prototype.set=function(Tt,Ht){return this.__data__[Tt]=vt&&Ht===void 0?"__lodash_hash_undefined__":Ht,this},Et.prototype.clear=function(){this.__data__=[]},Et.prototype.delete=function(Tt){var Ht=this.__data__,ie=Kt(Ht,Tt);return!(ie<0)&&(ie==Ht.length-1?Ht.pop():it.call(Ht,ie,1),!0)},Et.prototype.get=function(Tt){var Ht=this.__data__,ie=Kt(Ht,Tt);return ie<0?void 0:Ht[ie][1]},Et.prototype.has=function(Tt){return Kt(this.__data__,Tt)>-1},Et.prototype.set=function(Tt,Ht){var ie=this.__data__,Qt=Kt(ie,Tt);return Qt<0?ie.push([Tt,Ht]):ie[Qt][1]=Ht,this},Ot.prototype.clear=function(){this.__data__={hash:new bt,map:new(_t||Et),string:new bt}},Ot.prototype.delete=function(Tt){return ue(this,Tt).delete(Tt)},Ot.prototype.get=function(Tt){return ue(this,Tt).get(Tt)},Ot.prototype.has=function(Tt){return ue(this,Tt).has(Tt)},Ot.prototype.set=function(Tt,Ht){return ue(this,Tt).set(Tt,Ht),this},zt.prototype.add=zt.prototype.push=function(Tt){return this.__data__.set(Tt,"__lodash_hash_undefined__"),this},zt.prototype.has=function(Tt){return this.__data__.has(Tt)},Gt.prototype.clear=function(){this.__data__=new Et},Gt.prototype.delete=function(Tt){return this.__data__.delete(Tt)},Gt.prototype.get=function(Tt){return this.__data__.get(Tt)},Gt.prototype.has=function(Tt){return this.__data__.has(Tt)},Gt.prototype.set=function(Tt,Ht){var ie=this.__data__;if(ie instanceof Et){var Qt=ie.__data__;if(!_t||Qt.length<199)return Qt.push([Tt,Ht]),this;ie=this.__data__=new Ot(Qt)}return ie.set(Tt,Ht),this};var Xt,Ut,_e=(Xt=function(Tt,Ht){return Tt&&le(Tt,Ht,ci)},function(Tt,Ht){if(Tt==null)return Tt;if(!Ye(Tt))return Xt(Tt,Ht);for(var ie=Tt.length,Qt=Ut?ie:-1,he=Object(Tt);(Ut?Qt--:++Qt<ie)&&Ht(he[Qt],Qt,he)!==!1;);return Tt}),le=function(Tt){return function(Ht,ie,Qt){for(var he=-1,Ee=Object(Ht),Ie=Qt(Ht),tr=Ie.length;tr--;){var Ue=Ie[Tt?tr:++he];if(ie(Ee[Ue],Ue,Ee)===!1)break}return Ht}}();function ye(Tt,Ht){for(var ie=0,Qt=(Ht=Oe(Ht,Tt)?[Ht]:Te(Ht)).length;Tt!=null&&ie<Qt;)Tt=Tt[qt(Ht[ie++])];return ie&&ie==Qt?Tt:void 0}function Ze(Tt,Ht){return Tt!=null&&Ht in Object(Tt)}function ce(Tt,Ht,ie,Qt,he){return Tt===Ht||(Tt==null||Ht==null||!Ke(Tt)&&!pi(Ht)?Tt!=Tt&&Ht!=Ht:function(Ee,Ie,tr,Ue,we,pe){var yr=fe(Ee),ir=fe(Ie),lr="[object Array]",wr="[object Array]";yr||(lr=(lr=ar(Ee))==i?o:lr),ir||(wr=(wr=ar(Ie))==i?o:wr);var me=lr==o&&!K(Ee),ur=wr==o&&!K(Ie),bi=lr==wr;if(bi&&!me)return pe||(pe=new Gt),yr||or(Ee)?br(Ee,Ie,tr,Ue,we,pe):function(nr,ze,Ti,Ri,bn,oe,Ii){switch(Ti){case"[object DataView]":if(nr.byteLength!=ze.byteLength||nr.byteOffset!=ze.byteOffset)return!1;nr=nr.buffer,ze=ze.buffer;case"[object ArrayBuffer]":return!(nr.byteLength!=ze.byteLength||!Ri(new W(nr),new W(ze)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $e(+nr,+ze);case"[object Error]":return nr.name==ze.name&&nr.message==ze.message;case"[object RegExp]":case"[object String]":return nr==ze+"";case s:var gr=B;case a:var _i=2&oe;if(gr||(gr=N),nr.size!=ze.size&&!_i)return!1;var on=Ii.get(nr);if(on)return on==ze;oe|=1,Ii.set(nr,ze);var yi=br(gr(nr),gr(ze),Ri,bn,oe,Ii);return Ii.delete(nr),yi;case"[object Symbol]":if(lt)return lt.call(nr)==lt.call(ze)}return!1}(Ee,Ie,lr,tr,Ue,we,pe);if(!(2&we)){var Xi=me&&ot.call(Ee,"__wrapped__"),Se=ur&&ot.call(Ie,"__wrapped__");if(Xi||Se){var Ln=Xi?Ee.value():Ee,Vn=Se?Ie.value():Ie;return pe||(pe=new Gt),tr(Ln,Vn,Ue,we,pe)}}return bi?(pe||(pe=new Gt),function(nr,ze,Ti,Ri,bn,oe){var Ii=2&bn,gr=ci(nr),_i=gr.length,on=ci(ze).length;if(_i!=on&&!Ii)return!1;for(var yi=_i;yi--;){var hr=gr[yi];if(!(Ii?hr in ze:ot.call(ze,hr)))return!1}var fr=oe.get(nr);if(fr&&oe.get(ze))return fr==ze;var Tr=!0;oe.set(nr,ze),oe.set(ze,nr);for(var $i=Ii;++yi<_i;){hr=gr[yi];var us=nr[hr],je=ze[hr];if(Ri)var Yi=Ii?Ri(je,us,hr,ze,nr,oe):Ri(us,je,hr,nr,ze,oe);if(!(Yi===void 0?us===je||Ti(us,je,Ri,bn,oe):Yi)){Tr=!1;break}$i||($i=hr=="constructor")}if(Tr&&!$i){var cr=nr.constructor,M=ze.constructor;cr==M||!("constructor"in nr)||!("constructor"in ze)||typeof cr=="function"&&cr instanceof cr&&typeof M=="function"&&M instanceof M||(Tr=!1)}return oe.delete(nr),oe.delete(ze),Tr}(Ee,Ie,tr,Ue,we,pe)):!1}(Tt,Ht,ce,ie,Qt,he))}function ke(Tt){return!(!Ke(Tt)||function(Ht){return!!H&&H in Ht}(Tt))&&(Ve(Tt)||K(Tt)?$:g).test(jt(Tt))}function He(Tt){return typeof Tt=="function"?Tt:Tt==null?kr:typeof Tt=="object"?fe(Tt)?function(Qt,he){return Oe(Qt)&&ri(he)?We(qt(Qt),he):function(Ee){var Ie=function(tr,Ue,we){var pe=tr==null?void 0:ye(tr,Ue);return pe===void 0?we:pe}(Ee,Qt);return Ie===void 0&&Ie===he?function(tr,Ue){return tr!=null&&function(we,pe,yr){pe=Oe(pe,we)?[pe]:Te(pe);for(var ir,lr=-1,wr=pe.length;++lr<wr;){var me=qt(pe[lr]);if(!(ir=we!=null&&yr(we,me)))break;we=we[me]}return ir||!!(wr=we?we.length:0)&&rr(wr)&&Le(me,wr)&&(fe(we)||Ae(we))}(tr,Ue,Ze)}(Ee,Qt):ce(he,Ie,void 0,3)}}(Tt[0],Tt[1]):function(Qt){var he=function(Ee){for(var Ie=ci(Ee),tr=Ie.length;tr--;){var Ue=Ie[tr],we=Ee[Ue];Ie[tr]=[Ue,we,ri(we)]}return Ie}(Qt);return he.length==1&&he[0][2]?We(he[0][0],he[0][1]):function(Ee){return Ee===Qt||function(Ie,tr,Ue,we){var pe=Ue.length,yr=pe,ir=!we;if(Ie==null)return!yr;for(Ie=Object(Ie);pe--;){var lr=Ue[pe];if(ir&&lr[2]?lr[1]!==Ie[lr[0]]:!(lr[0]in Ie))return!1}for(;++pe<yr;){var wr=(lr=Ue[pe])[0],me=Ie[wr],ur=lr[1];if(ir&&lr[2]){if(me===void 0&&!(wr in Ie))return!1}else{var bi=new Gt;if(we)var Xi=we(me,ur,wr,Ie,tr,bi);if(!(Xi===void 0?ce(ur,me,we,3,bi):Xi))return!1}}return!0}(Ee,Qt,he)}}(Tt):Oe(Ht=Tt)?(ie=qt(Ht),function(Qt){return Qt?.[ie]}):function(Qt){return function(he){return ye(he,Qt)}}(Ht);var Ht,ie}function $t(Tt){if(ie=(Ht=Tt)&&Ht.constructor,Qt=typeof ie=="function"&&ie.prototype||R,Ht!==Qt)return mt(Tt);var Ht,ie,Qt,he=[];for(var Ee in Object(Tt))ot.call(Tt,Ee)&&Ee!="constructor"&&he.push(Ee);return he}function Te(Tt){return fe(Tt)?Tt:At(Tt)}function br(Tt,Ht,ie,Qt,he,Ee){var Ie=2&he,tr=Tt.length,Ue=Ht.length;if(tr!=Ue&&!(Ie&&Ue>tr))return!1;var we=Ee.get(Tt);if(we&&Ee.get(Ht))return we==Ht;var pe=-1,yr=!0,ir=1&he?new zt:void 0;for(Ee.set(Tt,Ht),Ee.set(Ht,Tt);++pe<tr;){var lr=Tt[pe],wr=Ht[pe];if(Qt)var me=Ie?Qt(wr,lr,pe,Ht,Tt,Ee):Qt(lr,wr,pe,Tt,Ht,Ee);if(me!==void 0){if(me)continue;yr=!1;break}if(ir){if(!tt(Ht,function(ur,bi){if(!ir.has(bi)&&(lr===ur||ie(lr,ur,Qt,he,Ee)))return ir.add(bi)})){yr=!1;break}}else if(lr!==wr&&!ie(lr,wr,Qt,he,Ee)){yr=!1;break}}return Ee.delete(Tt),Ee.delete(Ht),yr}function ue(Tt,Ht){var ie,Qt,he=Tt.__data__;return((Qt=typeof(ie=Ht))=="string"||Qt=="number"||Qt=="symbol"||Qt=="boolean"?ie!=="__proto__":ie===null)?he[typeof Ht=="string"?"string":"hash"]:he.map}function Fe(Tt,Ht){var ie=function(Qt,he){return Qt?.[he]}(Tt,Ht);return ke(ie)?ie:void 0}var ar=function(Tt){return dt.call(Tt)};function Le(Tt,Ht){return!!(Ht=Ht??9007199254740991)&&(typeof Tt=="number"||m.test(Tt))&&Tt>-1&&Tt%1==0&&Tt<Ht}function Oe(Tt,Ht){if(fe(Tt))return!1;var ie=typeof Tt;return!(ie!="number"&&ie!="symbol"&&ie!="boolean"&&Tt!=null&&!Je(Tt))||c.test(Tt)||!l.test(Tt)||Ht!=null&&Tt in Object(Ht)}function ri(Tt){return Tt==Tt&&!Ke(Tt)}function We(Tt,Ht){return function(ie){return ie!=null&&ie[Tt]===Ht&&(Ht!==void 0||Tt in Object(ie))}}(wt&&ar(new wt(new ArrayBuffer(1)))!="[object DataView]"||_t&&ar(new _t)!=s||Ct&&ar(Ct.resolve())!="[object Promise]"||Ft&&ar(new Ft)!=a||It&&ar(new It)!="[object WeakMap]")&&(ar=function(Tt){var Ht=dt.call(Tt),ie=Ht==o?Tt.constructor:void 0,Qt=ie?jt(ie):void 0;if(Qt)switch(Qt){case kt:return"[object DataView]";case gt:return s;case ut:return"[object Promise]";case Q:return a;case Y:return"[object WeakMap]"}return Ht});var At=ve(function(Tt){var Ht;Tt=(Ht=Tt)==null?"":function(Qt){if(typeof Qt=="string")return Qt;if(Je(Qt))return pt?pt.call(Qt):"";var he=Qt+"";return he=="0"&&1/Qt==-1/0?"-0":he}(Ht);var ie=[];return h.test(Tt)&&ie.push(""),Tt.replace(d,function(Qt,he,Ee,Ie){ie.push(Ee?Ie.replace(p,"$1"):he||Qt)}),ie});function qt(Tt){if(typeof Tt=="string"||Je(Tt))return Tt;var Ht=Tt+"";return Ht=="0"&&1/Tt==-1/0?"-0":Ht}function jt(Tt){if(Tt!=null){try{return rt.call(Tt)}catch{}try{return Tt+""}catch{}}return""}var ae,Qe,se=(ae=function(Tt,Ht,ie){ot.call(Tt,ie)?Tt[ie].push(Ht):Tt[ie]=[Ht]},function(Tt,Ht){var ie=fe(Tt)?G:re,Qt=Qe?Qe():{};return ie(Tt,ae,He(Ht),Qt)});function ve(Tt,Ht){if(typeof Tt!="function"||Ht&&typeof Ht!="function")throw new TypeError("Expected a function");var ie=function(){var Qt=arguments,he=Ht?Ht.apply(this,Qt):Qt[0],Ee=ie.cache;if(Ee.has(he))return Ee.get(he);var Ie=Tt.apply(this,Qt);return ie.cache=Ee.set(he,Ie),Ie};return ie.cache=new(ve.Cache||Ot),ie}function $e(Tt,Ht){return Tt===Ht||Tt!=Tt&&Ht!=Ht}function Ae(Tt){return function(Ht){return pi(Ht)&&Ye(Ht)}(Tt)&&ot.call(Tt,"callee")&&(!V.call(Tt,"callee")||dt.call(Tt)==i)}ve.Cache=Ot;var fe=Array.isArray;function Ye(Tt){return Tt!=null&&rr(Tt.length)&&!Ve(Tt)}function Ve(Tt){var Ht=Ke(Tt)?dt.call(Tt):"";return Ht=="[object Function]"||Ht=="[object GeneratorFunction]"}function rr(Tt){return typeof Tt=="number"&&Tt>-1&&Tt%1==0&&Tt<=9007199254740991}function Ke(Tt){var Ht=typeof Tt;return!!Tt&&(Ht=="object"||Ht=="function")}function pi(Tt){return!!Tt&&typeof Tt=="object"}function Je(Tt){return typeof Tt=="symbol"||pi(Tt)&&dt.call(Tt)=="[object Symbol]"}var or=q?function(Tt){return function(Ht){return Tt(Ht)}}(q):function(Tt){return pi(Tt)&&rr(Tt.length)&&!!b[dt.call(Tt)]};function ci(Tt){return Ye(Tt)?Jt(Tt):$t(Tt)}function kr(Tt){return Tt}t.exports=se}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(n,t,e){"use strict";var r=Object.prototype.toString;t.exports=function(i){return i===!0||i===!1||function(s){return!!s&&typeof s=="object"}(i)&&r.call(i)=="[object Boolean]"}},{}],445:[function(n,t,e){(function(r){(function(){"use strict";var i="[object Arguments]",s="[object Map]",o="[object Object]",a="[object Set]",l=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[i]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h["[object Function]"]=h[s]=h["[object Number]"]=h[o]=h["[object RegExp]"]=h[a]=h["[object String]"]=h["[object WeakMap]"]=!1;var d=typeof r=="object"&&r&&r.Object===Object&&r,p=typeof self=="object"&&self&&self.Object===Object&&self,g=d||p||Function("return this")(),m=typeof e=="object"&&e&&!e.nodeType&&e,b=m&&typeof t=="object"&&t&&!t.nodeType&&t,y=b&&b.exports===m,x=y&&d.process,S=function(){try{return x&&x.binding&&x.binding("util")}catch{}}(),O=S&&S.isTypedArray;function D(At,qt){for(var jt=-1,ae=At==null?0:At.length;++jt<ae;)if(qt(At[jt],jt,At))return!0;return!1}function U(At){var qt=-1,jt=Array(At.size);return At.forEach(function(ae,Qe){jt[++qt]=[Qe,ae]}),jt}function z(At){var qt=-1,jt=Array(At.size);return At.forEach(function(ae){jt[++qt]=ae}),jt}var q,G,tt,K=Array.prototype,B=Function.prototype,N=Object.prototype,Z=g["__core-js_shared__"],w=B.toString,C=N.hasOwnProperty,k=(q=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",T=N.toString,R=RegExp("^"+w.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=y?g.Buffer:void 0,H=g.Symbol,rt=g.Uint8Array,ot=N.propertyIsEnumerable,dt=K.splice,$=H?H.toStringTag:void 0,ct=Object.getOwnPropertySymbols,W=F?F.isBuffer:void 0,V=(G=Object.keys,tt=Object,function(At){return G(tt(At))}),it=ye(g,"DataView"),mt=ye(g,"Map"),wt=ye(g,"Promise"),_t=ye(g,"Set"),Ct=ye(g,"WeakMap"),Ft=ye(Object,"create"),It=He(it),vt=He(mt),kt=He(wt),gt=He(_t),ut=He(Ct),Q=H?H.prototype:void 0,Y=Q?Q.valueOf:void 0;function et(At){var qt=-1,jt=At==null?0:At.length;for(this.clear();++qt<jt;){var ae=At[qt];this.set(ae[0],ae[1])}}function lt(At){var qt=-1,jt=At==null?0:At.length;for(this.clear();++qt<jt;){var ae=At[qt];this.set(ae[0],ae[1])}}function pt(At){var qt=-1,jt=At==null?0:At.length;for(this.clear();++qt<jt;){var ae=At[qt];this.set(ae[0],ae[1])}}function bt(At){var qt=-1,jt=At==null?0:At.length;for(this.__data__=new pt;++qt<jt;)this.add(At[qt])}function Et(At){var qt=this.__data__=new lt(At);this.size=qt.size}function Ot(At,qt){var jt=br(At),ae=!jt&&Te(At),Qe=!jt&&!ae&&ue(At),se=!jt&&!ae&&!Qe&&ri(At),ve=jt||ae||Qe||se,$e=ve?function(Ye,Ve){for(var rr=-1,Ke=Array(Ye);++rr<Ye;)Ke[rr]=Ve(rr);return Ke}(At.length,String):[],Ae=$e.length;for(var fe in At)!qt&&!C.call(At,fe)||ve&&(fe=="length"||Qe&&(fe=="offset"||fe=="parent")||se&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||ke(fe,Ae))||$e.push(fe);return $e}function zt(At,qt){for(var jt=At.length;jt--;)if($t(At[jt][0],qt))return jt;return-1}function Gt(At){return At==null?At===void 0?"[object Undefined]":"[object Null]":$&&$ in Object(At)?function(qt){var jt=C.call(qt,$),ae=qt[$];try{qt[$]=void 0;var Qe=!0}catch{}var se=T.call(qt);return Qe&&(jt?qt[$]=ae:delete qt[$]),se}(At):function(qt){return T.call(qt)}(At)}function Jt(At){return Oe(At)&&Gt(At)==i}function Kt(At,qt,jt,ae,Qe){return At===qt||(At==null||qt==null||!Oe(At)&&!Oe(qt)?At!=At&&qt!=qt:function(se,ve,$e,Ae,fe,Ye){var Ve=br(se),rr=br(ve),Ke=Ve?"[object Array]":ce(se),pi=rr?"[object Array]":ce(ve),Je=(Ke=Ke==i?o:Ke)==o,or=(pi=pi==i?o:pi)==o,ci=Ke==pi;if(ci&&ue(se)){if(!ue(ve))return!1;Ve=!0,Je=!1}if(ci&&!Je)return Ye||(Ye=new Et),Ve||ri(se)?Ut(se,ve,$e,Ae,fe,Ye):function(Qt,he,Ee,Ie,tr,Ue,we){switch(Ee){case"[object DataView]":if(Qt.byteLength!=he.byteLength||Qt.byteOffset!=he.byteOffset)return!1;Qt=Qt.buffer,he=he.buffer;case"[object ArrayBuffer]":return!(Qt.byteLength!=he.byteLength||!Ue(new rt(Qt),new rt(he)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $t(+Qt,+he);case"[object Error]":return Qt.name==he.name&&Qt.message==he.message;case"[object RegExp]":case"[object String]":return Qt==he+"";case s:var pe=U;case a:var yr=1&Ie;if(pe||(pe=z),Qt.size!=he.size&&!yr)return!1;var ir=we.get(Qt);if(ir)return ir==he;Ie|=2,we.set(Qt,he);var lr=Ut(pe(Qt),pe(he),Ie,tr,Ue,we);return we.delete(Qt),lr;case"[object Symbol]":if(Y)return Y.call(Qt)==Y.call(he)}return!1}(se,ve,Ke,$e,Ae,fe,Ye);if(!(1&$e)){var kr=Je&&C.call(se,"__wrapped__"),Tt=or&&C.call(ve,"__wrapped__");if(kr||Tt){var Ht=kr?se.value():se,ie=Tt?ve.value():ve;return Ye||(Ye=new Et),fe(Ht,ie,$e,Ae,Ye)}}return ci?(Ye||(Ye=new Et),function(Qt,he,Ee,Ie,tr,Ue){var we=1&Ee,pe=_e(Qt),yr=pe.length,ir=_e(he).length;if(yr!=ir&&!we)return!1;for(var lr=yr;lr--;){var wr=pe[lr];if(!(we?wr in he:C.call(he,wr)))return!1}var me=Ue.get(Qt);if(me&&Ue.get(he))return me==he;var ur=!0;Ue.set(Qt,he),Ue.set(he,Qt);for(var bi=we;++lr<yr;){wr=pe[lr];var Xi=Qt[wr],Se=he[wr];if(Ie)var Ln=we?Ie(Se,Xi,wr,he,Qt,Ue):Ie(Xi,Se,wr,Qt,he,Ue);if(!(Ln===void 0?Xi===Se||tr(Xi,Se,Ee,Ie,Ue):Ln)){ur=!1;break}bi||(bi=wr=="constructor")}if(ur&&!bi){var Vn=Qt.constructor,nr=he.constructor;Vn==nr||!("constructor"in Qt)||!("constructor"in he)||typeof Vn=="function"&&Vn instanceof Vn&&typeof nr=="function"&&nr instanceof nr||(ur=!1)}return Ue.delete(Qt),Ue.delete(he),ur}(se,ve,$e,Ae,fe,Ye)):!1}(At,qt,jt,ae,Kt,Qe))}function re(At){return!(!Le(At)||function(qt){return!!k&&k in qt}(At))&&(Fe(At)?R:l).test(He(At))}function Xt(At){if(jt=(qt=At)&&qt.constructor,ae=typeof jt=="function"&&jt.prototype||N,qt!==ae)return V(At);var qt,jt,ae,Qe=[];for(var se in Object(At))C.call(At,se)&&se!="constructor"&&Qe.push(se);return Qe}function Ut(At,qt,jt,ae,Qe,se){var ve=1&jt,$e=At.length,Ae=qt.length;if($e!=Ae&&!(ve&&Ae>$e))return!1;var fe=se.get(At);if(fe&&se.get(qt))return fe==qt;var Ye=-1,Ve=!0,rr=2&jt?new bt:void 0;for(se.set(At,qt),se.set(qt,At);++Ye<$e;){var Ke=At[Ye],pi=qt[Ye];if(ae)var Je=ve?ae(pi,Ke,Ye,qt,At,se):ae(Ke,pi,Ye,At,qt,se);if(Je!==void 0){if(Je)continue;Ve=!1;break}if(rr){if(!D(qt,function(or,ci){if(kr=ci,!rr.has(kr)&&(Ke===or||Qe(Ke,or,jt,ae,se)))return rr.push(ci);var kr})){Ve=!1;break}}else if(Ke!==pi&&!Qe(Ke,pi,jt,ae,se)){Ve=!1;break}}return se.delete(At),se.delete(qt),Ve}function _e(At){return function(qt,jt,ae){var Qe=jt(qt);return br(qt)?Qe:function(se,ve){for(var $e=-1,Ae=ve.length,fe=se.length;++$e<Ae;)se[fe+$e]=ve[$e];return se}(Qe,ae(qt))}(At,We,Ze)}function le(At,qt){var jt,ae,Qe=At.__data__;return((ae=typeof(jt=qt))=="string"||ae=="number"||ae=="symbol"||ae=="boolean"?jt!=="__proto__":jt===null)?Qe[typeof qt=="string"?"string":"hash"]:Qe.map}function ye(At,qt){var jt=function(ae,Qe){return ae?.[Qe]}(At,qt);return re(jt)?jt:void 0}et.prototype.clear=function(){this.__data__=Ft?Ft(null):{},this.size=0},et.prototype.delete=function(At){var qt=this.has(At)&&delete this.__data__[At];return this.size-=qt?1:0,qt},et.prototype.get=function(At){var qt=this.__data__;if(Ft){var jt=qt[At];return jt==="__lodash_hash_undefined__"?void 0:jt}return C.call(qt,At)?qt[At]:void 0},et.prototype.has=function(At){var qt=this.__data__;return Ft?qt[At]!==void 0:C.call(qt,At)},et.prototype.set=function(At,qt){var jt=this.__data__;return this.size+=this.has(At)?0:1,jt[At]=Ft&&qt===void 0?"__lodash_hash_undefined__":qt,this},lt.prototype.clear=function(){this.__data__=[],this.size=0},lt.prototype.delete=function(At){var qt=this.__data__,jt=zt(qt,At);return!(jt<0)&&(jt==qt.length-1?qt.pop():dt.call(qt,jt,1),--this.size,!0)},lt.prototype.get=function(At){var qt=this.__data__,jt=zt(qt,At);return jt<0?void 0:qt[jt][1]},lt.prototype.has=function(At){return zt(this.__data__,At)>-1},lt.prototype.set=function(At,qt){var jt=this.__data__,ae=zt(jt,At);return ae<0?(++this.size,jt.push([At,qt])):jt[ae][1]=qt,this},pt.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new(mt||lt),string:new et}},pt.prototype.delete=function(At){var qt=le(this,At).delete(At);return this.size-=qt?1:0,qt},pt.prototype.get=function(At){return le(this,At).get(At)},pt.prototype.has=function(At){return le(this,At).has(At)},pt.prototype.set=function(At,qt){var jt=le(this,At),ae=jt.size;return jt.set(At,qt),this.size+=jt.size==ae?0:1,this},bt.prototype.add=bt.prototype.push=function(At){return this.__data__.set(At,"__lodash_hash_undefined__"),this},bt.prototype.has=function(At){return this.__data__.has(At)},Et.prototype.clear=function(){this.__data__=new lt,this.size=0},Et.prototype.delete=function(At){var qt=this.__data__,jt=qt.delete(At);return this.size=qt.size,jt},Et.prototype.get=function(At){return this.__data__.get(At)},Et.prototype.has=function(At){return this.__data__.has(At)},Et.prototype.set=function(At,qt){var jt=this.__data__;if(jt instanceof lt){var ae=jt.__data__;if(!mt||ae.length<199)return ae.push([At,qt]),this.size=++jt.size,this;jt=this.__data__=new pt(ae)}return jt.set(At,qt),this.size=jt.size,this};var Ze=ct?function(At){return At==null?[]:(At=Object(At),function(qt,jt){for(var ae=-1,Qe=qt==null?0:qt.length,se=0,ve=[];++ae<Qe;){var $e=qt[ae];jt($e,ae,qt)&&(ve[se++]=$e)}return ve}(ct(At),function(qt){return ot.call(At,qt)}))}:function(){return[]},ce=Gt;function ke(At,qt){return!!(qt=qt??9007199254740991)&&(typeof At=="number"||c.test(At))&&At>-1&&At%1==0&&At<qt}function He(At){if(At!=null){try{return w.call(At)}catch{}try{return At+""}catch{}}return""}function $t(At,qt){return At===qt||At!=At&&qt!=qt}(it&&ce(new it(new ArrayBuffer(1)))!="[object DataView]"||mt&&ce(new mt)!=s||wt&&ce(wt.resolve())!="[object Promise]"||_t&&ce(new _t)!=a||Ct&&ce(new Ct)!="[object WeakMap]")&&(ce=function(At){var qt=Gt(At),jt=qt==o?At.constructor:void 0,ae=jt?He(jt):"";if(ae)switch(ae){case It:return"[object DataView]";case vt:return s;case kt:return"[object Promise]";case gt:return a;case ut:return"[object WeakMap]"}return qt});var Te=Jt(function(){return arguments}())?Jt:function(At){return Oe(At)&&C.call(At,"callee")&&!ot.call(At,"callee")},br=Array.isArray,ue=W||function(){return!1};function Fe(At){if(!Le(At))return!1;var qt=Gt(At);return qt=="[object Function]"||qt=="[object GeneratorFunction]"||qt=="[object AsyncFunction]"||qt=="[object Proxy]"}function ar(At){return typeof At=="number"&&At>-1&&At%1==0&&At<=9007199254740991}function Le(At){var qt=typeof At;return At!=null&&(qt=="object"||qt=="function")}function Oe(At){return At!=null&&typeof At=="object"}var ri=O?function(At){return function(qt){return At(qt)}}(O):function(At){return Oe(At)&&ar(At.length)&&!!h[Gt(At)]};function We(At){return(qt=At)!=null&&ar(qt.length)&&!Fe(qt)?Ot(At):Xt(At);var qt}t.exports=function(At,qt){return Kt(At,qt)}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(n,t,e){(function(r){(function(){"use strict";var i=typeof r=="object"&&r&&r.Object===Object&&r,s=typeof self=="object"&&self&&self.Object===Object&&self,o=i||s||Function("return this")(),a=Object.prototype,l=a.hasOwnProperty,c=a.toString,h=o.Symbol,d=h?h.toStringTag:void 0;function p(g){return g==null?g===void 0?"[object Undefined]":"[object Null]":d&&d in Object(g)?function(m){var b=l.call(m,d),y=m[d];try{m[d]=void 0;var x=!0}catch{}var S=c.call(m);return x&&(b?m[d]=y:delete m[d]),S}(g):function(m){return c.call(m)}(g)}t.exports=function(g){if(!function(b){var y=typeof b;return b!=null&&(y=="object"||y=="function")}(g))return!1;var m=p(g);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(n,t,e){"use strict";t.exports=function(r){return r==null}},{}],448:[function(n,t,e){"use strict";t.exports=function(r){return r===void 0}},{}],449:[function(n,t,e){(function(r){(function(){"use strict";var i=/^\[object .+?Constructor\]$/,s=typeof r=="object"&&r&&r.Object===Object&&r,o=typeof self=="object"&&self&&self.Object===Object&&self,a=s||o||Function("return this")();function l(rt,ot){return!!(rt&&rt.length)&&function(dt,$,ct){if($!=$)return function(it,mt,wt,_t){for(var Ct=it.length,Ft=wt+(_t?1:-1);_t?Ft--:++Ft<Ct;)if(mt(it[Ft],Ft,it))return Ft;return-1}(dt,h,ct);for(var W=ct-1,V=dt.length;++W<V;)if(dt[W]===$)return W;return-1}(rt,ot,0)>-1}function c(rt,ot,dt){for(var $=-1,ct=rt?rt.length:0;++$<ct;)if(dt(ot,rt[$]))return!0;return!1}function h(rt){return rt!=rt}function d(rt,ot){return rt.has(ot)}function p(rt){var ot=-1,dt=Array(rt.size);return rt.forEach(function($){dt[++ot]=$}),dt}var g,m=Array.prototype,b=Function.prototype,y=Object.prototype,x=a["__core-js_shared__"],S=(g=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",O=b.toString,D=y.hasOwnProperty,U=y.toString,z=RegExp("^"+O.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=m.splice,G=F(a,"Map"),tt=F(a,"Set"),K=F(Object,"create");function B(rt){var ot=-1,dt=rt?rt.length:0;for(this.clear();++ot<dt;){var $=rt[ot];this.set($[0],$[1])}}function N(rt){var ot=-1,dt=rt?rt.length:0;for(this.clear();++ot<dt;){var $=rt[ot];this.set($[0],$[1])}}function Z(rt){var ot=-1,dt=rt?rt.length:0;for(this.clear();++ot<dt;){var $=rt[ot];this.set($[0],$[1])}}function w(rt){var ot=-1,dt=rt?rt.length:0;for(this.__data__=new Z;++ot<dt;)this.add(rt[ot])}function C(rt,ot){for(var dt,$,ct=rt.length;ct--;)if((dt=rt[ct][0])===($=ot)||dt!=dt&&$!=$)return ct;return-1}function k(rt){return!(!H(rt)||(ot=rt,S&&S in ot))&&(function(dt){var $=H(dt)?U.call(dt):"";return $=="[object Function]"||$=="[object GeneratorFunction]"}(rt)||function(dt){var $=!1;if(dt!=null&&typeof dt.toString!="function")try{$=!!(dt+"")}catch{}return $}(rt)?z:i).test(function(dt){if(dt!=null){try{return O.call(dt)}catch{}try{return dt+""}catch{}}return""}(rt));var ot}B.prototype.clear=function(){this.__data__=K?K(null):{}},B.prototype.delete=function(rt){return this.has(rt)&&delete this.__data__[rt]},B.prototype.get=function(rt){var ot=this.__data__;if(K){var dt=ot[rt];return dt==="__lodash_hash_undefined__"?void 0:dt}return D.call(ot,rt)?ot[rt]:void 0},B.prototype.has=function(rt){var ot=this.__data__;return K?ot[rt]!==void 0:D.call(ot,rt)},B.prototype.set=function(rt,ot){return this.__data__[rt]=K&&ot===void 0?"__lodash_hash_undefined__":ot,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(rt){var ot=this.__data__,dt=C(ot,rt);return!(dt<0)&&(dt==ot.length-1?ot.pop():q.call(ot,dt,1),!0)},N.prototype.get=function(rt){var ot=this.__data__,dt=C(ot,rt);return dt<0?void 0:ot[dt][1]},N.prototype.has=function(rt){return C(this.__data__,rt)>-1},N.prototype.set=function(rt,ot){var dt=this.__data__,$=C(dt,rt);return $<0?dt.push([rt,ot]):dt[$][1]=ot,this},Z.prototype.clear=function(){this.__data__={hash:new B,map:new(G||N),string:new B}},Z.prototype.delete=function(rt){return R(this,rt).delete(rt)},Z.prototype.get=function(rt){return R(this,rt).get(rt)},Z.prototype.has=function(rt){return R(this,rt).has(rt)},Z.prototype.set=function(rt,ot){return R(this,rt).set(rt,ot),this},w.prototype.add=w.prototype.push=function(rt){return this.__data__.set(rt,"__lodash_hash_undefined__"),this},w.prototype.has=function(rt){return this.__data__.has(rt)};var T=tt&&1/p(new tt([,-0]))[1]==1/0?function(rt){return new tt(rt)}:function(){};function R(rt,ot){var dt,$,ct=rt.__data__;return(($=typeof(dt=ot))=="string"||$=="number"||$=="symbol"||$=="boolean"?dt!=="__proto__":dt===null)?ct[typeof ot=="string"?"string":"hash"]:ct.map}function F(rt,ot){var dt=function($,ct){return $?.[ct]}(rt,ot);return k(dt)?dt:void 0}function H(rt){var ot=typeof rt;return!!rt&&(ot=="object"||ot=="function")}t.exports=function(rt){return rt&&rt.length?function(ot,dt,$){var ct=-1,W=l,V=ot.length,it=!0,mt=[],wt=mt;if($)it=!1,W=c;else if(V>=200){var _t=dt?null:T(ot);if(_t)return p(_t);it=!1,W=d,wt=new w}else wt=dt?[]:mt;t:for(;++ct<V;){var Ct=ot[ct],Ft=dt?dt(Ct):Ct;if(Ct=$||Ct!==0?Ct:0,it&&Ft==Ft){for(var It=wt.length;It--;)if(wt[It]===Ft)continue t;dt&&wt.push(Ft),mt.push(Ct)}else W(wt,Ft,$)||(wt!==mt&&wt.push(Ft),mt.push(Ct))}return mt}(rt):[]}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(n,t,e){"use strict";var r=n("inherits"),i=n("hash-base"),s=n("safe-buffer").Buffer,o=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function l(g,m){return g<<m|g>>>32-m}function c(g,m,b,y,x,S,O){return l(g+(m&b|~m&y)+x+S|0,O)+m|0}function h(g,m,b,y,x,S,O){return l(g+(m&y|b&~y)+x+S|0,O)+m|0}function d(g,m,b,y,x,S,O){return l(g+(m^b^y)+x+S|0,O)+m|0}function p(g,m,b,y,x,S,O){return l(g+(b^(m|~y))+x+S|0,O)+m|0}r(a,i),a.prototype._update=function(){for(var g=o,m=0;m<16;++m)g[m]=this._block.readInt32LE(4*m);var b=this._a,y=this._b,x=this._c,S=this._d;b=c(b,y,x,S,g[0],3614090360,7),S=c(S,b,y,x,g[1],3905402710,12),x=c(x,S,b,y,g[2],606105819,17),y=c(y,x,S,b,g[3],3250441966,22),b=c(b,y,x,S,g[4],4118548399,7),S=c(S,b,y,x,g[5],1200080426,12),x=c(x,S,b,y,g[6],2821735955,17),y=c(y,x,S,b,g[7],4249261313,22),b=c(b,y,x,S,g[8],1770035416,7),S=c(S,b,y,x,g[9],2336552879,12),x=c(x,S,b,y,g[10],4294925233,17),y=c(y,x,S,b,g[11],2304563134,22),b=c(b,y,x,S,g[12],1804603682,7),S=c(S,b,y,x,g[13],4254626195,12),x=c(x,S,b,y,g[14],2792965006,17),b=h(b,y=c(y,x,S,b,g[15],1236535329,22),x,S,g[1],4129170786,5),S=h(S,b,y,x,g[6],3225465664,9),x=h(x,S,b,y,g[11],643717713,14),y=h(y,x,S,b,g[0],3921069994,20),b=h(b,y,x,S,g[5],3593408605,5),S=h(S,b,y,x,g[10],38016083,9),x=h(x,S,b,y,g[15],3634488961,14),y=h(y,x,S,b,g[4],3889429448,20),b=h(b,y,x,S,g[9],568446438,5),S=h(S,b,y,x,g[14],3275163606,9),x=h(x,S,b,y,g[3],4107603335,14),y=h(y,x,S,b,g[8],1163531501,20),b=h(b,y,x,S,g[13],2850285829,5),S=h(S,b,y,x,g[2],4243563512,9),x=h(x,S,b,y,g[7],1735328473,14),b=d(b,y=h(y,x,S,b,g[12],2368359562,20),x,S,g[5],4294588738,4),S=d(S,b,y,x,g[8],2272392833,11),x=d(x,S,b,y,g[11],1839030562,16),y=d(y,x,S,b,g[14],4259657740,23),b=d(b,y,x,S,g[1],2763975236,4),S=d(S,b,y,x,g[4],1272893353,11),x=d(x,S,b,y,g[7],4139469664,16),y=d(y,x,S,b,g[10],3200236656,23),b=d(b,y,x,S,g[13],681279174,4),S=d(S,b,y,x,g[0],3936430074,11),x=d(x,S,b,y,g[3],3572445317,16),y=d(y,x,S,b,g[6],76029189,23),b=d(b,y,x,S,g[9],3654602809,4),S=d(S,b,y,x,g[12],3873151461,11),x=d(x,S,b,y,g[15],530742520,16),b=p(b,y=d(y,x,S,b,g[2],3299628645,23),x,S,g[0],4096336452,6),S=p(S,b,y,x,g[7],1126891415,10),x=p(x,S,b,y,g[14],2878612391,15),y=p(y,x,S,b,g[5],4237533241,21),b=p(b,y,x,S,g[12],1700485571,6),S=p(S,b,y,x,g[3],2399980690,10),x=p(x,S,b,y,g[10],4293915773,15),y=p(y,x,S,b,g[1],2240044497,21),b=p(b,y,x,S,g[8],1873313359,6),S=p(S,b,y,x,g[15],4264355552,10),x=p(x,S,b,y,g[6],2734768916,15),y=p(y,x,S,b,g[13],1309151649,21),b=p(b,y,x,S,g[4],4149444226,6),S=p(S,b,y,x,g[11],3174756917,10),x=p(x,S,b,y,g[2],718787259,15),y=p(y,x,S,b,g[9],3951481745,21),this._a=this._a+b|0,this._b=this._b+y|0,this._c=this._c+x|0,this._d=this._d+S|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var g=s.allocUnsafe(16);return g.writeInt32LE(this._a,0),g.writeInt32LE(this._b,4),g.writeInt32LE(this._c,8),g.writeInt32LE(this._d,12),g},t.exports=a},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(n,t,e){"use strict";var r=n("bn.js"),i=n("brorand");function s(o){this.rand=o||new i.Rand}t.exports=s,s.create=function(o){return new s(o)},s.prototype._randbelow=function(o){var a=o.bitLength(),l=Math.ceil(a/8);do var c=new r(this.rand.generate(l));while(c.cmp(o)>=0);return c},s.prototype._randrange=function(o,a){var l=a.sub(o);return o.add(this._randbelow(l))},s.prototype.test=function(o,a,l){var c=o.bitLength(),h=r.mont(o),d=new r(1).toRed(h);a||(a=Math.max(1,c/48|0));for(var p=o.subn(1),g=0;!p.testn(g);g++);for(var m=o.shrn(g),b=p.toRed(h);a>0;a--){var y=this._randrange(new r(2),p);l&&l(y);var x=y.toRed(h).redPow(m);if(x.cmp(d)!==0&&x.cmp(b)!==0){for(var S=1;S<g;S++){if((x=x.redSqr()).cmp(d)===0)return!1;if(x.cmp(b)===0)break}if(S===g)return!1}}return!0},s.prototype.getDivisor=function(o,a){var l=o.bitLength(),c=r.mont(o),h=new r(1).toRed(c);a||(a=Math.max(1,l/48|0));for(var d=o.subn(1),p=0;!d.testn(p);p++);for(var g=o.shrn(p),m=d.toRed(c);a>0;a--){var b=this._randrange(new r(2),d),y=o.gcd(b);if(y.cmpn(1)!==0)return y;var x=b.toRed(c).redPow(g);if(x.cmp(h)!==0&&x.cmp(m)!==0){for(var S=1;S<p;S++){if((x=x.redSqr()).cmp(h)===0)return x.fromRed().subn(1).gcd(o);if(x.cmp(m)===0)break}if(S===p)return(x=x.redSqr()).fromRed().subn(1).gcd(o)}}return!1}},{"bn.js":452,brorand:187}],452:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],453:[function(n,t,e){"use strict";function r(i,s){if(!i)throw new Error(s||"Assertion failed")}t.exports=r,r.equal=function(i,s,o){if(i!=s)throw new Error(o||"Assertion failed: "+i+" != "+s)}},{}],454:[function(n,t,e){"use strict";var r=e;function i(o){return o.length===1?"0"+o:o}function s(o){for(var a="",l=0;l<o.length;l++)a+=i(o[l].toString(16));return a}r.toArray=function(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o!="string"){for(var c=0;c<o.length;c++)l[c]=0|o[c];return l}if(a==="hex")for((o=o.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(o="0"+o),c=0;c<o.length;c+=2)l.push(parseInt(o[c]+o[c+1],16));else for(c=0;c<o.length;c++){var h=o.charCodeAt(c),d=h>>8,p=255&h;d?l.push(d,p):l.push(p)}return l},r.zero2=i,r.toHex=s,r.encode=function(o,a){return a==="hex"?s(o):o}},{}],455:[function(n,t,e){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(n,t,e){"use strict";var r=n("asn1.js");e.certificate=n("./certificate");var i=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=i;var s=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=s;var o=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())});e.PublicKey=o;var a=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())});e.PrivateKey=l;var c=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=c;var h=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=h,e.DSAparam=r.define("DSAparam",function(){this.int()});var d=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=d;var p=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});e.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(n,t,e){"use strict";var r=n("asn1.js"),i=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),s=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),o=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}),l=r.define("RelativeDistinguishedName",function(){this.setof(s)}),c=r.define("RDNSequence",function(){this.seqof(l)}),h=r.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),d=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),p=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),g=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(o),this.key("issuer").use(h),this.key("validity").use(d),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(p).optional())}),m=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(g),this.key("signatureAlgorithm").use(o),this.key("signatureValue").bitstr())});t.exports=m},{"asn1.js":170}],458:[function(n,t,e){"use strict";var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,o=n("evp_bytestokey"),a=n("browserify-aes"),l=n("safe-buffer").Buffer;t.exports=function(c,h){var d,p=c.toString(),g=p.match(r);if(g){var m="aes"+g[1],b=l.from(g[2],"hex"),y=l.from(g[3].replace(/[\r\n]/g,""),"base64"),x=o(h,b.slice(0,8),parseInt(g[1],10)).key,S=[],O=a.createDecipheriv(m,x,b);S.push(O.update(y)),S.push(O.final()),d=l.concat(S)}else{var D=p.match(s);d=l.from(D[2].replace(/[\r\n]/g,""),"base64")}return{tag:p.match(i)[1],data:d}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(n,t,e){"use strict";var r=n("./asn1"),i=n("./aesid.json"),s=n("./fixProc"),o=n("browserify-aes"),a=n("pbkdf2"),l=n("safe-buffer").Buffer;function c(h){var d;typeof h!="object"||l.isBuffer(h)||(d=h.passphrase,h=h.key),typeof h=="string"&&(h=l.from(h));var p,g,m=s(h,d),b=m.tag,y=m.data;switch(b){case"CERTIFICATE":g=r.certificate.decode(y,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(g||(g=r.PublicKey.decode(y,"der")),p=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(g.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return g.subjectPrivateKey=g.subjectPublicKey,{type:"ec",data:g};case"1.2.840.10040.4.1":return g.algorithm.params.pub_key=r.DSAparam.decode(g.subjectPublicKey.data,"der"),{type:"dsa",data:g.algorithm.params};default:throw new Error("unknown key id "+p)}case"ENCRYPTED PRIVATE KEY":y=function(x,S){var O=x.algorithm.decrypt.kde.kdeparams.salt,D=parseInt(x.algorithm.decrypt.kde.kdeparams.iters.toString(),10),U=i[x.algorithm.decrypt.cipher.algo.join(".")],z=x.algorithm.decrypt.cipher.iv,q=x.subjectPrivateKey,G=parseInt(U.split("-")[1],10)/8,tt=a.pbkdf2Sync(S,O,D,G,"sha1"),K=o.createDecipheriv(U,tt,z),B=[];return B.push(K.update(q)),B.push(K.final()),l.concat(B)}(y=r.EncryptedPrivateKey.decode(y,"der"),d);case"PRIVATE KEY":switch(p=(g=r.PrivateKey.decode(y,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(g.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:g.algorithm.curve,privateKey:r.ECPrivateKey.decode(g.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return g.algorithm.params.priv_key=r.DSAparam.decode(g.subjectPrivateKey,"der"),{type:"dsa",params:g.algorithm.params};default:throw new Error("unknown key id "+p)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(y,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(y,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(y,"der")};case"EC PRIVATE KEY":return{curve:(y=r.ECPrivateKey.decode(y,"der")).parameters.value,privateKey:y.privateKey};default:throw new Error("unknown key type "+b)}}t.exports=c,c.signature=r.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(n,t,e){"use strict";e.pbkdf2=n("./lib/async"),e.pbkdf2Sync=n("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(n,t,e){(function(r){(function(){"use strict";var i,s,o=n("safe-buffer").Buffer,a=n("./precondition"),l=n("./default-encoding"),c=n("./sync"),h=n("./to-buffer"),d=r.crypto&&r.crypto.subtle,p={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},g=[];function m(){return s||(s=r.process&&r.process.nextTick?r.process.nextTick:r.queueMicrotask?r.queueMicrotask:r.setImmediate?r.setImmediate:r.setTimeout)}function b(y,x,S,O,D){return d.importKey("raw",y,{name:"PBKDF2"},!1,["deriveBits"]).then(function(U){return d.deriveBits({name:"PBKDF2",salt:x,iterations:S,hash:{name:D}},U,O<<3)}).then(function(U){return o.from(U)})}t.exports=function(y,x,S,O,D,U){typeof D=="function"&&(U=D,D=void 0);var z=p[(D=D||"sha1").toLowerCase()];if(z&&typeof r.Promise=="function"){if(a(S,O),y=h(y,l,"Password"),x=h(x,l,"Salt"),typeof U!="function")throw new Error("No callback provided to pbkdf2");(function(q,G){q.then(function(tt){m()(function(){G(null,tt)})},function(tt){m()(function(){G(tt)})})})(function(q){if(r.process&&!r.process.browser||!d||!d.importKey||!d.deriveBits)return Promise.resolve(!1);if(g[q]!==void 0)return g[q];var G=b(i=i||o.alloc(8),i,10,128,q).then(function(){return!0}).catch(function(){return!1});return g[q]=G,G}(z).then(function(q){return q?b(y,x,S,O,z):c(y,x,S,O,D)}),U)}else m()(function(){var q;try{q=c(y,x,S,O,D)}catch(G){return U(G)}U(null,q)})}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(n,t,e){(function(r,i){(function(){"use strict";var s;i.process&&i.process.browser?s="utf-8":i.process&&i.process.version?s=parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":s="utf-8",t.exports=s}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(n,t,e){"use strict";var r=Math.pow(2,30)-1;t.exports=function(i,s){if(typeof i!="number")throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if(typeof s!="number")throw new TypeError("Key length not a number");if(s<0||s>r||s!=s)throw new TypeError("Bad key length")}},{}],464:[function(n,t,e){"use strict";var r=n("create-hash/md5"),i=n("ripemd160"),s=n("sha.js"),o=n("safe-buffer").Buffer,a=n("./precondition"),l=n("./default-encoding"),c=n("./to-buffer"),h=o.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function p(g,m,b){var y=function(z){function q(G){return s(z).update(G).digest()}return z==="rmd160"||z==="ripemd160"?function(G){return new i().update(G).digest()}:z==="md5"?r:q}(g),x=g==="sha512"||g==="sha384"?128:64;m.length>x?m=y(m):m.length<x&&(m=o.concat([m,h],x));for(var S=o.allocUnsafe(x+d[g]),O=o.allocUnsafe(x+d[g]),D=0;D<x;D++)S[D]=54^m[D],O[D]=92^m[D];var U=o.allocUnsafe(x+b+4);S.copy(U,0,0,x),this.ipad1=U,this.ipad2=S,this.opad=O,this.alg=g,this.blocksize=x,this.hash=y,this.size=d[g]}p.prototype.run=function(g,m){return g.copy(m,this.blocksize),this.hash(m).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(g,m,b,y,x){a(b,y);var S=new p(x=x||"sha1",g=c(g,l,"Password"),(m=c(m,l,"Salt")).length),O=o.allocUnsafe(y),D=o.allocUnsafe(m.length+4);m.copy(D,0,0,m.length);for(var U=0,z=d[x],q=Math.ceil(y/z),G=1;G<=q;G++){D.writeUInt32BE(G,m.length);for(var tt=S.run(D,S.ipad1),K=tt,B=1;B<b;B++){K=S.run(K,S.ipad2);for(var N=0;N<z;N++)tt[N]^=K[N]}tt.copy(O,U),U+=z}return O}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer;t.exports=function(i,s,o){if(r.isBuffer(i))return i;if(typeof i=="string")return r.from(i,s);if(ArrayBuffer.isView(i))return r.from(i.buffer);throw new TypeError(o+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(n,t,e){(function(r){(function(){"use strict";r===void 0||!r.version||r.version.indexOf("v0.")===0||r.version.indexOf("v1.")===0&&r.version.indexOf("v1.8.")!==0?t.exports={nextTick:function(i,s,o,a){if(typeof i!="function")throw new TypeError('"callback" argument must be a function');var l,c,h=arguments.length;switch(h){case 0:case 1:return r.nextTick(i);case 2:return r.nextTick(function(){i.call(null,s)});case 3:return r.nextTick(function(){i.call(null,s,o)});case 4:return r.nextTick(function(){i.call(null,s,o,a)});default:for(l=new Array(h-1),c=0;c<l.length;)l[c++]=arguments[c];return r.nextTick(function(){i.apply(null,l)})}}}:t.exports=r}).call(this)}).call(this,n("_process"))},{_process:467}],467:[function(n,t,e){"use strict";var r,i,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(x){if(r===setTimeout)return setTimeout(x,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(x,0);try{return r(x,0)}catch{try{return r.call(null,x,0)}catch{return r.call(this,x,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:o}catch{r=o}try{i=typeof clearTimeout=="function"?clearTimeout:a}catch{i=a}})();var c,h=[],d=!1,p=-1;function g(){d&&c&&(d=!1,c.length?h=c.concat(h):p=-1,h.length&&m())}function m(){if(!d){var x=l(g);d=!0;for(var S=h.length;S;){for(c=h,h=[];++p<S;)c&&c[p].run();p=-1,S=h.length}c=null,d=!1,function(O){if(i===clearTimeout)return clearTimeout(O);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(O);try{i(O)}catch{try{return i.call(null,O)}catch{return i.call(this,O)}}}(x)}}function b(x,S){this.fun=x,this.array=S}function y(){}s.nextTick=function(x){var S=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)S[O-1]=arguments[O];h.push(new b(x,S)),h.length!==1||d||l(m)},b.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=y,s.addListener=y,s.once=y,s.off=y,s.removeListener=y,s.removeAllListeners=y,s.emit=y,s.prependListener=y,s.prependOnceListener=y,s.listeners=function(x){return[]},s.binding=function(x){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(x){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],468:[function(n,t,e){"use strict";e.publicEncrypt=n("./publicEncrypt"),e.privateDecrypt=n("./privateDecrypt"),e.privateEncrypt=function(r,i){return e.publicEncrypt(r,i,!0)},e.publicDecrypt=function(r,i){return e.privateDecrypt(r,i,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(n,t,e){"use strict";var r=n("create-hash"),i=n("safe-buffer").Buffer;function s(o){var a=i.allocUnsafe(4);return a.writeUInt32BE(o,0),a}t.exports=function(o,a){for(var l,c=i.alloc(0),h=0;c.length<a;)l=s(h++),c=i.concat([c,r("sha1").update(o).update(l).digest()]);return c.slice(0,a)}},{"create-hash":386,"safe-buffer":494}],470:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],471:[function(n,t,e){"use strict";var r=n("parse-asn1"),i=n("./mgf"),s=n("./xor"),o=n("bn.js"),a=n("browserify-rsa"),l=n("create-hash"),c=n("./withPublic"),h=n("safe-buffer").Buffer;t.exports=function(d,p,g){var m;m=d.padding?d.padding:g?1:4;var b,y=r(d),x=y.modulus.byteLength();if(p.length>x||new o(p).cmp(y.modulus)>=0)throw new Error("decryption error");b=g?c(new o(p),y):a(p,y);var S=h.alloc(x-b.length);if(b=h.concat([S,b],x),m===4)return function(O,D){var U=O.modulus.byteLength(),z=l("sha1").update(h.alloc(0)).digest(),q=z.length;if(D[0]!==0)throw new Error("decryption error");var G=D.slice(1,q+1),tt=D.slice(q+1),K=s(G,i(tt,q)),B=s(tt,i(K,U-q-1));if(function(Z,w){Z=h.from(Z),w=h.from(w);var C=0,k=Z.length;Z.length!==w.length&&(C++,k=Math.min(Z.length,w.length));for(var T=-1;++T<k;)C+=Z[T]^w[T];return C}(z,B.slice(0,q)))throw new Error("decryption error");for(var N=q;B[N]===0;)N++;if(B[N++]!==1)throw new Error("decryption error");return B.slice(N)}(y,b);if(m===1)return function(O,D,U){for(var z=D.slice(0,2),q=2,G=0;D[q++]!==0;)if(q>=D.length){G++;break}var tt=D.slice(2,q-1);if((z.toString("hex")!=="0002"&&!U||z.toString("hex")!=="0001"&&U)&&G++,tt.length<8&&G++,G)throw new Error("decryption error");return D.slice(q)}(0,b,g);if(m===3)return b;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(n,t,e){"use strict";var r=n("parse-asn1"),i=n("randombytes"),s=n("create-hash"),o=n("./mgf"),a=n("./xor"),l=n("bn.js"),c=n("./withPublic"),h=n("browserify-rsa"),d=n("safe-buffer").Buffer;t.exports=function(p,g,m){var b;b=p.padding?p.padding:m?1:4;var y,x=r(p);if(b===4)y=function(S,O){var D=S.modulus.byteLength(),U=O.length,z=s("sha1").update(d.alloc(0)).digest(),q=z.length,G=2*q;if(U>D-G-2)throw new Error("message too long");var tt=d.alloc(D-U-G-2),K=D-q-1,B=i(q),N=a(d.concat([z,tt,d.alloc(1,1),O],K),o(B,K)),Z=a(B,o(N,q));return new l(d.concat([d.alloc(1),Z,N],D))}(x,g);else if(b===1)y=function(S,O,D){var U,z=O.length,q=S.modulus.byteLength();if(z>q-11)throw new Error("message too long");return U=D?d.alloc(q-z-3,255):function(G){for(var tt,K=d.allocUnsafe(G),B=0,N=i(2*G),Z=0;B<G;)Z===N.length&&(N=i(2*G),Z=0),(tt=N[Z++])&&(K[B++]=tt);return K}(q-z-3),new l(d.concat([d.from([0,D?1:2]),U,d.alloc(1),O],q))}(x,g,m);else{if(b!==3)throw new Error("unknown padding");if((y=new l(g)).cmp(x.modulus)>=0)throw new Error("data too long for modulus")}return m?h(y,x):c(y,x)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(n,t,e){"use strict";var r=n("bn.js"),i=n("safe-buffer").Buffer;t.exports=function(s,o){return i.from(s.toRed(r.mont(o.modulus)).redPow(new r(o.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(n,t,e){"use strict";t.exports=function(r,i){for(var s=r.length,o=-1;++o<s;)r[o]^=i[o];return r}},{}],475:[function(n,t,e){(function(r,i){(function(){"use strict";var s=n("safe-buffer").Buffer,o=i.crypto||i.msCrypto;o&&o.getRandomValues?t.exports=function(a,l){if(a>4294967295)throw new RangeError("requested too many random bytes");var c=s.allocUnsafe(a);if(a>0)if(a>65536)for(var h=0;h<a;h+=65536)o.getRandomValues(c.slice(h,h+65536));else o.getRandomValues(c);return typeof l=="function"?r.nextTick(function(){l(null,c)}):c}:t.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(n,t,e){(function(r,i){(function(){"use strict";function s(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var o=n("safe-buffer"),a=n("randombytes"),l=o.Buffer,c=o.kMaxLength,h=i.crypto||i.msCrypto,d=Math.pow(2,32)-1;function p(b,y){if(typeof b!="number"||b!=b)throw new TypeError("offset must be a number");if(b>d||b<0)throw new TypeError("offset must be a uint32");if(b>c||b>y)throw new RangeError("offset out of range")}function g(b,y,x){if(typeof b!="number"||b!=b)throw new TypeError("size must be a number");if(b>d||b<0)throw new TypeError("size must be a uint32");if(b+y>x||b>c)throw new RangeError("buffer too small")}function m(b,y,x,S){if(r.browser){var O=b.buffer,D=new Uint8Array(O,y,x);return h.getRandomValues(D),S?void r.nextTick(function(){S(null,b)}):b}if(!S)return a(x).copy(b,y),b;a(x,function(U,z){if(U)return S(U);z.copy(b,y),S(null,b)})}h&&h.getRandomValues||!r.browser?(e.randomFill=function(b,y,x,S){if(!(l.isBuffer(b)||b instanceof i.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof y=="function")S=y,y=0,x=b.length;else if(typeof x=="function")S=x,x=b.length-y;else if(typeof S!="function")throw new TypeError('"cb" argument must be a function');return p(y,b.length),g(x,y,b.length),m(b,y,x,S)},e.randomFillSync=function(b,y,x){if(y===void 0&&(y=0),!(l.isBuffer(b)||b instanceof i.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return p(y,b.length),x===void 0&&(x=b.length-y),g(x,y,b.length),m(b,y,x)}):(e.randomFill=s,e.randomFillSync=s)}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(n,t,e){"use strict";var r={};function i(o,a,l){l||(l=Error);var c=function(h){var d,p;function g(m,b,y){return h.call(this,function(x,S,O){return typeof a=="string"?a:a(x,S,O)}(m,b,y))||this}return p=h,(d=g).prototype=Object.create(p.prototype),d.prototype.constructor=d,d.__proto__=p,g}(l);c.prototype.name=l.name,c.prototype.code=o,r[o]=c}function s(o,a){if(Array.isArray(o)){var l=o.length;return o=o.map(function(c){return String(c)}),l>2?"one of ".concat(a," ").concat(o.slice(0,l-1).join(", "),", or ")+o[l-1]:l===2?"one of ".concat(a," ").concat(o[0]," or ").concat(o[1]):"of ".concat(a," ").concat(o[0])}return"of ".concat(a," ").concat(String(o))}i("ERR_INVALID_OPT_VALUE",function(o,a){return'The value "'+a+'" is invalid for option "'+o+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(o,a,l){var c,h,d,p;if(typeof a=="string"&&(h="not ",a.substr(!d||d<0?0:+d,h.length)===h)?(c="must not be",a=a.replace(/^not /,"")):c="must be",function(m,b,y){return(y===void 0||y>m.length)&&(y=m.length),m.substring(y-b.length,y)===b}(o," argument"))p="The ".concat(o," ").concat(c," ").concat(s(a,"type"));else{var g=function(m,b,y){return typeof y!="number"&&(y=0),!(y+b.length>m.length)&&m.indexOf(b,y)!==-1}(o,".")?"property":"argument";p='The "'.concat(o,'" ').concat(g," ").concat(c," ").concat(s(a,"type"))}return p+=". Received type ".concat(typeof l)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(o){return"The "+o+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(o){return"Cannot call "+o+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(o){return"Unknown encoding: "+o},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],478:[function(n,t,e){(function(r){(function(){"use strict";var i=Object.keys||function(g){var m=[];for(var b in g)m.push(b);return m};t.exports=h;var s=n("./_stream_readable"),o=n("./_stream_writable");n("inherits")(h,s);for(var a=i(o.prototype),l=0;l<a.length;l++){var c=a[l];h.prototype[c]||(h.prototype[c]=o.prototype[c])}function h(g){if(!(this instanceof h))return new h(g);s.call(this,g),o.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||r.nextTick(p,this)}function p(g){g.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}).call(this)}).call(this,n("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(n,t,e){"use strict";t.exports=i;var r=n("./_stream_transform");function i(s){if(!(this instanceof i))return new i(s);r.call(this,s)}n("inherits")(i,r),i.prototype._transform=function(s,o,a){a(null,s)}},{"./_stream_transform":481,inherits:440}],480:[function(n,t,e){(function(r,i){(function(){"use strict";var s;t.exports=K,K.ReadableState=tt,n("events").EventEmitter;var o=function(W,V){return W.listeners(V).length},a=n("./internal/streams/stream"),l=n("buffer").Buffer,c=(i!==void 0?i:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h,d=n("util");h=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g,m,b=n("./internal/streams/buffer_list"),y=n("./internal/streams/destroy"),x=n("./internal/streams/state").getHighWaterMark,S=n("../errors").codes,O=S.ERR_INVALID_ARG_TYPE,D=S.ERR_STREAM_PUSH_AFTER_EOF,U=S.ERR_METHOD_NOT_IMPLEMENTED,z=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n("inherits")(K,a);var q=y.errorOrDestroy,G=["error","close","destroy","pause","resume"];function tt(W,V,it){s=s||n("./_stream_duplex"),W=W||{},typeof it!="boolean"&&(it=V instanceof s),this.objectMode=!!W.objectMode,it&&(this.objectMode=this.objectMode||!!W.readableObjectMode),this.highWaterMark=x(this,W,"readableHighWaterMark",it),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=W.emitClose!==!1,this.autoDestroy=!!W.autoDestroy,this.destroyed=!1,this.defaultEncoding=W.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,W.encoding&&(p||(p=n("string_decoder/").StringDecoder),this.decoder=new p(W.encoding),this.encoding=W.encoding)}function K(W){if(s=s||n("./_stream_duplex"),!(this instanceof K))return new K(W);var V=this instanceof s;this._readableState=new tt(W,this,V),this.readable=!0,W&&(typeof W.read=="function"&&(this._read=W.read),typeof W.destroy=="function"&&(this._destroy=W.destroy)),a.call(this)}function B(W,V,it,mt,wt){h("readableAddChunk",V);var _t,Ct=W._readableState;if(V===null)Ct.reading=!1,function(Ft,It){if(h("onEofChunk"),!It.ended){if(It.decoder){var vt=It.decoder.end();vt&&vt.length&&(It.buffer.push(vt),It.length+=It.objectMode?1:vt.length)}It.ended=!0,It.sync?w(Ft):(It.needReadable=!1,It.emittedReadable||(It.emittedReadable=!0,C(Ft)))}}(W,Ct);else if(wt||(_t=function(Ft,It){var vt;kt=It,l.isBuffer(kt)||kt instanceof c||typeof It=="string"||It===void 0||Ft.objectMode||(vt=new O("chunk",["string","Buffer","Uint8Array"],It));var kt;return vt}(Ct,V)),_t)q(W,_t);else if(Ct.objectMode||V&&V.length>0)if(typeof V=="string"||Ct.objectMode||Object.getPrototypeOf(V)===l.prototype||(V=function(Ft){return l.from(Ft)}(V)),mt)Ct.endEmitted?q(W,new z):N(W,Ct,V,!0);else if(Ct.ended)q(W,new D);else{if(Ct.destroyed)return!1;Ct.reading=!1,Ct.decoder&&!it?(V=Ct.decoder.write(V),Ct.objectMode||V.length!==0?N(W,Ct,V,!1):k(W,Ct)):N(W,Ct,V,!1)}else mt||(Ct.reading=!1,k(W,Ct));return!Ct.ended&&(Ct.length<Ct.highWaterMark||Ct.length===0)}function N(W,V,it,mt){V.flowing&&V.length===0&&!V.sync?(V.awaitDrain=0,W.emit("data",it)):(V.length+=V.objectMode?1:it.length,mt?V.buffer.unshift(it):V.buffer.push(it),V.needReadable&&w(W)),k(W,V)}Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(W){this._readableState&&(this._readableState.destroyed=W)}}),K.prototype.destroy=y.destroy,K.prototype._undestroy=y.undestroy,K.prototype._destroy=function(W,V){V(W)},K.prototype.push=function(W,V){var it,mt=this._readableState;return mt.objectMode?it=!0:typeof W=="string"&&((V=V||mt.defaultEncoding)!==mt.encoding&&(W=l.from(W,V),V=""),it=!0),B(this,W,V,!1,it)},K.prototype.unshift=function(W){return B(this,W,null,!0,!1)},K.prototype.isPaused=function(){return this._readableState.flowing===!1},K.prototype.setEncoding=function(W){p||(p=n("string_decoder/").StringDecoder);var V=new p(W);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;for(var it=this._readableState.buffer.head,mt="";it!==null;)mt+=V.write(it.data),it=it.next;return this._readableState.buffer.clear(),mt!==""&&this._readableState.buffer.push(mt),this._readableState.length=mt.length,this};function Z(W,V){return W<=0||V.length===0&&V.ended?0:V.objectMode?1:W!=W?V.flowing&&V.length?V.buffer.head.data.length:V.length:(W>V.highWaterMark&&(V.highWaterMark=function(it){return it>=1073741824?it=1073741824:(it--,it|=it>>>1,it|=it>>>2,it|=it>>>4,it|=it>>>8,it|=it>>>16,it++),it}(W)),W<=V.length?W:V.ended?V.length:(V.needReadable=!0,0))}function w(W){var V=W._readableState;h("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(h("emitReadable",V.flowing),V.emittedReadable=!0,r.nextTick(C,W))}function C(W){var V=W._readableState;h("emitReadable_",V.destroyed,V.length,V.ended),V.destroyed||!V.length&&!V.ended||(W.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,rt(W)}function k(W,V){V.readingMore||(V.readingMore=!0,r.nextTick(T,W,V))}function T(W,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&V.length===0);){var it=V.length;if(h("maybeReadMore read 0"),W.read(0),it===V.length)break}V.readingMore=!1}function R(W){var V=W._readableState;V.readableListening=W.listenerCount("readable")>0,V.resumeScheduled&&!V.paused?V.flowing=!0:W.listenerCount("data")>0&&W.resume()}function F(W){h("readable nexttick read 0"),W.read(0)}function H(W,V){h("resume",V.reading),V.reading||W.read(0),V.resumeScheduled=!1,W.emit("resume"),rt(W),V.flowing&&!V.reading&&W.read(0)}function rt(W){var V=W._readableState;for(h("flow",V.flowing);V.flowing&&W.read()!==null;);}function ot(W,V){return V.length===0?null:(V.objectMode?it=V.buffer.shift():!W||W>=V.length?(it=V.decoder?V.buffer.join(""):V.buffer.length===1?V.buffer.first():V.buffer.concat(V.length),V.buffer.clear()):it=V.buffer.consume(W,V.decoder),it);var it}function dt(W){var V=W._readableState;h("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,r.nextTick($,V,W))}function $(W,V){if(h("endReadableNT",W.endEmitted,W.length),!W.endEmitted&&W.length===0&&(W.endEmitted=!0,V.readable=!1,V.emit("end"),W.autoDestroy)){var it=V._writableState;(!it||it.autoDestroy&&it.finished)&&V.destroy()}}function ct(W,V){for(var it=0,mt=W.length;it<mt;it++)if(W[it]===V)return it;return-1}K.prototype.read=function(W){h("read",W),W=parseInt(W,10);var V=this._readableState,it=W;if(W!==0&&(V.emittedReadable=!1),W===0&&V.needReadable&&((V.highWaterMark!==0?V.length>=V.highWaterMark:V.length>0)||V.ended))return h("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?dt(this):w(this),null;if((W=Z(W,V))===0&&V.ended)return V.length===0&&dt(this),null;var mt,wt=V.needReadable;return h("need readable",wt),(V.length===0||V.length-W<V.highWaterMark)&&h("length less than watermark",wt=!0),V.ended||V.reading?h("reading or ended",wt=!1):wt&&(h("do read"),V.reading=!0,V.sync=!0,V.length===0&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(W=Z(it,V))),(mt=W>0?ot(W,V):null)===null?(V.needReadable=V.length<=V.highWaterMark,W=0):(V.length-=W,V.awaitDrain=0),V.length===0&&(V.ended||(V.needReadable=!0),it!==W&&V.ended&&dt(this)),mt!==null&&this.emit("data",mt),mt},K.prototype._read=function(W){q(this,new U("_read()"))},K.prototype.pipe=function(W,V){var it=this,mt=this._readableState;switch(mt.pipesCount){case 0:mt.pipes=W;break;case 1:mt.pipes=[mt.pipes,W];break;default:mt.pipes.push(W)}mt.pipesCount+=1,h("pipe count=%d opts=%j",mt.pipesCount,V);var wt=(!V||V.end!==!1)&&W!==r.stdout&&W!==r.stderr?Ct:Q;function _t(Y,et){h("onunpipe"),Y===it&&et&&et.hasUnpiped===!1&&(et.hasUnpiped=!0,h("cleanup"),W.removeListener("close",gt),W.removeListener("finish",ut),W.removeListener("drain",Ft),W.removeListener("error",kt),W.removeListener("unpipe",_t),it.removeListener("end",Ct),it.removeListener("end",Q),it.removeListener("data",vt),It=!0,!mt.awaitDrain||W._writableState&&!W._writableState.needDrain||Ft())}function Ct(){h("onend"),W.end()}mt.endEmitted?r.nextTick(wt):it.once("end",wt),W.on("unpipe",_t);var Ft=function(Y){return function(){var et=Y._readableState;h("pipeOnDrain",et.awaitDrain),et.awaitDrain&&et.awaitDrain--,et.awaitDrain===0&&o(Y,"data")&&(et.flowing=!0,rt(Y))}}(it);W.on("drain",Ft);var It=!1;function vt(Y){h("ondata");var et=W.write(Y);h("dest.write",et),et===!1&&((mt.pipesCount===1&&mt.pipes===W||mt.pipesCount>1&&ct(mt.pipes,W)!==-1)&&!It&&(h("false write response, pause",mt.awaitDrain),mt.awaitDrain++),it.pause())}function kt(Y){h("onerror",Y),Q(),W.removeListener("error",kt),o(W,"error")===0&&q(W,Y)}function gt(){W.removeListener("finish",ut),Q()}function ut(){h("onfinish"),W.removeListener("close",gt),Q()}function Q(){h("unpipe"),it.unpipe(W)}return it.on("data",vt),function(Y,et,lt){if(typeof Y.prependListener=="function")return Y.prependListener(et,lt);Y._events&&Y._events[et]?Array.isArray(Y._events[et])?Y._events[et].unshift(lt):Y._events[et]=[lt,Y._events[et]]:Y.on(et,lt)}(W,"error",kt),W.once("close",gt),W.once("finish",ut),W.emit("pipe",it),mt.flowing||(h("pipe resume"),it.resume()),W},K.prototype.unpipe=function(W){var V=this._readableState,it={hasUnpiped:!1};if(V.pipesCount===0)return this;if(V.pipesCount===1)return W&&W!==V.pipes||(W||(W=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,W&&W.emit("unpipe",this,it)),this;if(!W){var mt=V.pipes,wt=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var _t=0;_t<wt;_t++)mt[_t].emit("unpipe",this,{hasUnpiped:!1});return this}var Ct=ct(V.pipes,W);return Ct===-1||(V.pipes.splice(Ct,1),V.pipesCount-=1,V.pipesCount===1&&(V.pipes=V.pipes[0]),W.emit("unpipe",this,it)),this},K.prototype.on=function(W,V){var it=a.prototype.on.call(this,W,V),mt=this._readableState;return W==="data"?(mt.readableListening=this.listenerCount("readable")>0,mt.flowing!==!1&&this.resume()):W==="readable"&&(mt.endEmitted||mt.readableListening||(mt.readableListening=mt.needReadable=!0,mt.flowing=!1,mt.emittedReadable=!1,h("on readable",mt.length,mt.reading),mt.length?w(this):mt.reading||r.nextTick(F,this))),it},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(W,V){var it=a.prototype.removeListener.call(this,W,V);return W==="readable"&&r.nextTick(R,this),it},K.prototype.removeAllListeners=function(W){var V=a.prototype.removeAllListeners.apply(this,arguments);return W!=="readable"&&W!==void 0||r.nextTick(R,this),V},K.prototype.resume=function(){var W=this._readableState;return W.flowing||(h("resume"),W.flowing=!W.readableListening,function(V,it){it.resumeScheduled||(it.resumeScheduled=!0,r.nextTick(H,V,it))}(this,W)),W.paused=!1,this},K.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},K.prototype.wrap=function(W){var V=this,it=this._readableState,mt=!1;for(var wt in W.on("end",function(){if(h("wrapped end"),it.decoder&&!it.ended){var Ct=it.decoder.end();Ct&&Ct.length&&V.push(Ct)}V.push(null)}),W.on("data",function(Ct){h("wrapped data"),it.decoder&&(Ct=it.decoder.write(Ct)),it.objectMode&&Ct==null||(it.objectMode||Ct&&Ct.length)&&(V.push(Ct)||(mt=!0,W.pause()))}),W)this[wt]===void 0&&typeof W[wt]=="function"&&(this[wt]=function(Ct){return function(){return W[Ct].apply(W,arguments)}}(wt));for(var _t=0;_t<G.length;_t++)W.on(G[_t],this.emit.bind(this,G[_t]));return this._read=function(Ct){h("wrapped _read",Ct),mt&&(mt=!1,W.resume())},this},typeof Symbol=="function"&&(K.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=n("./internal/streams/async_iterator")),g(this)}),Object.defineProperty(K.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(K.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(K.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(W){this._readableState&&(this._readableState.flowing=W)}}),K._fromList=ot,Object.defineProperty(K.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(K.from=function(W,V){return m===void 0&&(m=n("./internal/streams/from")),m(K,W,V)})}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(n,t,e){"use strict";t.exports=h;var r=n("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n("./_stream_duplex");function c(g,m){var b=this._transformState;b.transforming=!1;var y=b.writecb;if(y===null)return this.emit("error",new s);b.writechunk=null,b.writecb=null,m!=null&&this.push(m),y(g);var x=this._readableState;x.reading=!1,(x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}function h(g){if(!(this instanceof h))return new h(g);l.call(this,g),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",d)}function d(){var g=this;typeof this._flush!="function"||this._readableState.destroyed?p(this,null,null):this._flush(function(m,b){p(g,m,b)})}function p(g,m,b){if(m)return g.emit("error",m);if(b!=null&&g.push(b),g._writableState.length)throw new a;if(g._transformState.transforming)throw new o;return g.push(null)}n("inherits")(h,l),h.prototype.push=function(g,m){return this._transformState.needTransform=!1,l.prototype.push.call(this,g,m)},h.prototype._transform=function(g,m,b){b(new i("_transform()"))},h.prototype._write=function(g,m,b){var y=this._transformState;if(y.writecb=b,y.writechunk=g,y.writeencoding=m,!y.transforming){var x=this._readableState;(y.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},h.prototype._read=function(g){var m=this._transformState;m.writechunk===null||m.transforming?m.needTransform=!0:(m.transforming=!0,this._transform(m.writechunk,m.writeencoding,m.afterTransform))},h.prototype._destroy=function(g,m){l.prototype._destroy.call(this,g,function(b){m(b)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(n,t,e){(function(r,i){(function(){"use strict";function s(T){var R=this;this.next=null,this.entry=null,this.finish=function(){(function(F,H,rt){var ot=F.entry;for(F.entry=null;ot;){var dt=ot.callback;H.pendingcb--,dt(rt),ot=ot.next}H.corkedRequestsFree.next=F})(R,T)}}var o;t.exports=K,K.WritableState=tt;var a={deprecate:n("util-deprecate")},l=n("./internal/streams/stream"),c=n("buffer").Buffer,h=(i!==void 0?i:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},d,p=n("./internal/streams/destroy"),g=n("./internal/streams/state").getHighWaterMark,m=n("../errors").codes,b=m.ERR_INVALID_ARG_TYPE,y=m.ERR_METHOD_NOT_IMPLEMENTED,x=m.ERR_MULTIPLE_CALLBACK,S=m.ERR_STREAM_CANNOT_PIPE,O=m.ERR_STREAM_DESTROYED,D=m.ERR_STREAM_NULL_VALUES,U=m.ERR_STREAM_WRITE_AFTER_END,z=m.ERR_UNKNOWN_ENCODING,q=p.errorOrDestroy;function G(){}function tt(T,R,F){o=o||n("./_stream_duplex"),T=T||{},typeof F!="boolean"&&(F=R instanceof o),this.objectMode=!!T.objectMode,F&&(this.objectMode=this.objectMode||!!T.writableObjectMode),this.highWaterMark=g(this,T,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=T.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(rt){(function(ot,dt){var $=ot._writableState,ct=$.sync,W=$.writecb;if(typeof W!="function")throw new x;if(function(it){it.writing=!1,it.writecb=null,it.length-=it.writelen,it.writelen=0}($),dt)(function(it,mt,wt,_t,Ct){--mt.pendingcb,wt?(r.nextTick(Ct,_t),r.nextTick(k,it,mt),it._writableState.errorEmitted=!0,q(it,_t)):(Ct(_t),it._writableState.errorEmitted=!0,q(it,_t),k(it,mt))})(ot,$,ct,dt,W);else{var V=w($)||ot.destroyed;V||$.corked||$.bufferProcessing||!$.bufferedRequest||Z(ot,$),ct?r.nextTick(N,ot,$,V,W):N(ot,$,V,W)}})(R,rt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function K(T){var R=this instanceof(o=o||n("./_stream_duplex"));if(!R&&!d.call(K,this))return new K(T);this._writableState=new tt(T,this,R),this.writable=!0,T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final)),l.call(this)}function B(T,R,F,H,rt,ot,dt){R.writelen=H,R.writecb=dt,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new O("write")):F?T._writev(rt,R.onwrite):T._write(rt,ot,R.onwrite),R.sync=!1}function N(T,R,F,H){F||function(rt,ot){ot.length===0&&ot.needDrain&&(ot.needDrain=!1,rt.emit("drain"))}(T,R),R.pendingcb--,H(),k(T,R)}function Z(T,R){R.bufferProcessing=!0;var F=R.bufferedRequest;if(T._writev&&F&&F.next){var H=R.bufferedRequestCount,rt=new Array(H),ot=R.corkedRequestsFree;ot.entry=F;for(var dt=0,$=!0;F;)rt[dt]=F,F.isBuf||($=!1),F=F.next,dt+=1;rt.allBuffers=$,B(T,R,!0,R.length,rt,"",ot.finish),R.pendingcb++,R.lastBufferedRequest=null,ot.next?(R.corkedRequestsFree=ot.next,ot.next=null):R.corkedRequestsFree=new s(R),R.bufferedRequestCount=0}else{for(;F;){var ct=F.chunk,W=F.encoding,V=F.callback;if(B(T,R,!1,R.objectMode?1:ct.length,ct,W,V),F=F.next,R.bufferedRequestCount--,R.writing)break}F===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=F,R.bufferProcessing=!1}function w(T){return T.ending&&T.length===0&&T.bufferedRequest===null&&!T.finished&&!T.writing}function C(T,R){T._final(function(F){R.pendingcb--,F&&q(T,F),R.prefinished=!0,T.emit("prefinish"),k(T,R)})}function k(T,R){var F=w(R);if(F&&(function(rt,ot){ot.prefinished||ot.finalCalled||(typeof rt._final!="function"||ot.destroyed?(ot.prefinished=!0,rt.emit("prefinish")):(ot.pendingcb++,ot.finalCalled=!0,r.nextTick(C,rt,ot)))}(T,R),R.pendingcb===0&&(R.finished=!0,T.emit("finish"),R.autoDestroy))){var H=T._readableState;(!H||H.autoDestroy&&H.endEmitted)&&T.destroy()}return F}n("inherits")(K,l),tt.prototype.getBuffer=function(){for(var T=this.bufferedRequest,R=[];T;)R.push(T),T=T.next;return R},function(){try{Object.defineProperty(tt.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(K,Symbol.hasInstance,{value:function(T){return!!d.call(this,T)||this===K&&T&&T._writableState instanceof tt}})):d=function(T){return T instanceof this},K.prototype.pipe=function(){q(this,new S)},K.prototype.write=function(T,R,F){var H,rt=this._writableState,ot=!1,dt=!rt.objectMode&&(H=T,c.isBuffer(H)||H instanceof h);return dt&&!c.isBuffer(T)&&(T=function($){return c.from($)}(T)),typeof R=="function"&&(F=R,R=null),dt?R="buffer":R||(R=rt.defaultEncoding),typeof F!="function"&&(F=G),rt.ending?function($,ct){var W=new U;q($,W),r.nextTick(ct,W)}(this,F):(dt||function($,ct,W,V){var it;return W===null?it=new D:typeof W=="string"||ct.objectMode||(it=new b("chunk",["string","Buffer"],W)),!it||(q($,it),r.nextTick(V,it),!1)}(this,rt,T,F))&&(rt.pendingcb++,ot=function($,ct,W,V,it,mt){if(!W){var wt=function(It,vt,kt){return It.objectMode||It.decodeStrings===!1||typeof vt!="string"||(vt=c.from(vt,kt)),vt}(ct,V,it);V!==wt&&(W=!0,it="buffer",V=wt)}var _t=ct.objectMode?1:V.length;ct.length+=_t;var Ct=ct.length<ct.highWaterMark;if(Ct||(ct.needDrain=!0),ct.writing||ct.corked){var Ft=ct.lastBufferedRequest;ct.lastBufferedRequest={chunk:V,encoding:it,isBuf:W,callback:mt,next:null},Ft?Ft.next=ct.lastBufferedRequest:ct.bufferedRequest=ct.lastBufferedRequest,ct.bufferedRequestCount+=1}else B($,ct,!1,_t,V,it,mt);return Ct}(this,rt,dt,T,R,F)),ot},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.bufferProcessing||!T.bufferedRequest||Z(this,T))},K.prototype.setDefaultEncoding=function(T){if(typeof T=="string"&&(T=T.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((T+"").toLowerCase())>-1))throw new z(T);return this._writableState.defaultEncoding=T,this},Object.defineProperty(K.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(K.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),K.prototype._write=function(T,R,F){F(new y("_write()"))},K.prototype._writev=null,K.prototype.end=function(T,R,F){var H=this._writableState;return typeof T=="function"?(F=T,T=null,R=null):typeof R=="function"&&(F=R,R=null),T!=null&&this.write(T,R),H.corked&&(H.corked=1,this.uncork()),H.ending||function(rt,ot,dt){ot.ending=!0,k(rt,ot),dt&&(ot.finished?r.nextTick(dt):rt.once("finish",dt)),ot.ended=!0,rt.writable=!1}(this,H,F),this},Object.defineProperty(K.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=T)}}),K.prototype.destroy=p.destroy,K.prototype._undestroy=p.undestroy,K.prototype._destroy=function(T,R){R(T)}}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(n,t,e){(function(r){(function(){"use strict";var i;function s(O,D,U){return(D=function(z){var q=function(G,tt){if(typeof G!="object"||G===null)return G;var K=G[Symbol.toPrimitive];if(K!==void 0){var B=K.call(G,tt||"default");if(typeof B!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(G)}(z,"string");return typeof q=="symbol"?q:String(q)}(D))in O?Object.defineProperty(O,D,{value:U,enumerable:!0,configurable:!0,writable:!0}):O[D]=U,O}var o=n("./end-of-stream"),a=Symbol("lastResolve"),l=Symbol("lastReject"),c=Symbol("error"),h=Symbol("ended"),d=Symbol("lastPromise"),p=Symbol("handlePromise"),g=Symbol("stream");function m(O,D){return{value:O,done:D}}function b(O){var D=O[a];if(D!==null){var U=O[g].read();U!==null&&(O[d]=null,O[a]=null,O[l]=null,D(m(U,!1)))}}function y(O){r.nextTick(b,O)}var x=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((s(i={get stream(){return this[g]},next:function(){var O=this,D=this[c];if(D!==null)return Promise.reject(D);if(this[h])return Promise.resolve(m(void 0,!0));if(this[g].destroyed)return new Promise(function(G,tt){r.nextTick(function(){O[c]?tt(O[c]):G(m(void 0,!0))})});var U,z=this[d];if(z)U=new Promise(function(G,tt){return function(K,B){G.then(function(){tt[h]?K(m(void 0,!0)):tt[p](K,B)},B)}}(z,this));else{var q=this[g].read();if(q!==null)return Promise.resolve(m(q,!1));U=new Promise(this[p])}return this[d]=U,U}},Symbol.asyncIterator,function(){return this}),s(i,"return",function(){var O=this;return new Promise(function(D,U){O[g].destroy(null,function(z){z?U(z):D(m(void 0,!0))})})}),i),x);t.exports=function(O){var D,U=Object.create(S,(s(D={},g,{value:O,writable:!0}),s(D,a,{value:null,writable:!0}),s(D,l,{value:null,writable:!0}),s(D,c,{value:null,writable:!0}),s(D,h,{value:O._readableState.endEmitted,writable:!0}),s(D,p,{value:function(z,q){var G=U[g].read();G?(U[d]=null,U[a]=null,U[l]=null,z(m(G,!1))):(U[a]=z,U[l]=q)},writable:!0}),D));return U[d]=null,o(O,function(z){if(z&&z.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=U[l];return q!==null&&(U[d]=null,U[a]=null,U[l]=null,q(z)),void(U[c]=z)}var G=U[a];G!==null&&(U[d]=null,U[a]=null,U[l]=null,G(m(void 0,!0))),U[h]=!0}),O.on("readable",y.bind(null,U)),U}}).call(this)}).call(this,n("_process"))},{"./end-of-stream":486,_process:467}],484:[function(n,t,e){"use strict";function r(d,p){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(d);p&&(m=m.filter(function(b){return Object.getOwnPropertyDescriptor(d,b).enumerable})),g.push.apply(g,m)}return g}function i(d){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?r(Object(g),!0).forEach(function(m){s(d,m,g[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):r(Object(g)).forEach(function(m){Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(g,m))})}return d}function s(d,p,g){return(p=a(p))in d?Object.defineProperty(d,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[p]=g,d}function o(d,p){for(var g=0;g<p.length;g++){var m=p[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,a(m.key),m)}}function a(d){var p=function(g,m){if(typeof g!="object"||g===null)return g;var b=g[Symbol.toPrimitive];if(b!==void 0){var y=b.call(g,m||"default");if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(g)}(d,"string");return typeof p=="symbol"?p:String(p)}var l=n("buffer").Buffer,c=n("util").inspect,h=c&&c.custom||"inspect";t.exports=function(){function d(){(function(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")})(this,d),this.head=null,this.tail=null,this.length=0}var p,g,m;return p=d,(g=[{key:"push",value:function(b){var y={data:b,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(b){var y={data:b,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var y=this.head,x=""+y.data;y=y.next;)x+=b+y.data;return x}},{key:"concat",value:function(b){if(this.length===0)return l.alloc(0);for(var y,x,S,O=l.allocUnsafe(b>>>0),D=this.head,U=0;D;)y=D.data,x=O,S=U,l.prototype.copy.call(y,x,S),U+=D.data.length,D=D.next;return O}},{key:"consume",value:function(b,y){var x;return b<this.head.data.length?(x=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):x=b===this.head.data.length?this.shift():y?this._getString(b):this._getBuffer(b),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var y=this.head,x=1,S=y.data;for(b-=S.length;y=y.next;){var O=y.data,D=b>O.length?O.length:b;if(D===O.length?S+=O:S+=O.slice(0,b),(b-=D)==0){D===O.length?(++x,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=O.slice(D));break}++x}return this.length-=x,S}},{key:"_getBuffer",value:function(b){var y=l.allocUnsafe(b),x=this.head,S=1;for(x.data.copy(y),b-=x.data.length;x=x.next;){var O=x.data,D=b>O.length?O.length:b;if(O.copy(y,y.length-b,0,D),(b-=D)==0){D===O.length?(++S,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=O.slice(D));break}++S}return this.length-=S,y}},{key:h,value:function(b,y){return c(this,i(i({},y),{},{depth:0,customInspect:!1}))}}])&&o(p.prototype,g),m&&o(p,m),Object.defineProperty(p,"prototype",{writable:!1}),d}()},{buffer:220,util:188}],485:[function(n,t,e){(function(r){(function(){"use strict";function i(a,l){o(a,l),s(a)}function s(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function o(a,l){a.emit("error",l)}t.exports={destroy:function(a,l){var c=this,h=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return h||d?(l?l(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(o,this,a)):r.nextTick(o,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(p){!l&&p?c._writableState?c._writableState.errorEmitted?r.nextTick(s,c):(c._writableState.errorEmitted=!0,r.nextTick(i,c,p)):r.nextTick(i,c,p):l?(r.nextTick(s,c),l(p)):r.nextTick(s,c)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,l){var c=a._readableState,h=a._writableState;c&&c.autoDestroy||h&&h.autoDestroy?a.destroy(l):a.emit("error",l)}}}).call(this)}).call(this,n("_process"))},{_process:467}],486:[function(n,t,e){"use strict";var r=n("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function s(o,a,l){if(typeof a=="function")return s(o,null,a);a||(a={}),l=function(O){var D=!1;return function(){if(!D){D=!0;for(var U=arguments.length,z=new Array(U),q=0;q<U;q++)z[q]=arguments[q];O.apply(this,z)}}}(l||i);var c=a.readable||a.readable!==!1&&o.readable,h=a.writable||a.writable!==!1&&o.writable,d=function(){o.writable||g()},p=o._writableState&&o._writableState.finished,g=function(){h=!1,p=!0,c||l.call(o)},m=o._readableState&&o._readableState.endEmitted,b=function(){c=!1,m=!0,h||l.call(o)},y=function(O){l.call(o,O)},x=function(){var O;return c&&!m?(o._readableState&&o._readableState.ended||(O=new r),l.call(o,O)):h&&!p?(o._writableState&&o._writableState.ended||(O=new r),l.call(o,O)):void 0},S=function(){o.req.on("finish",g)};return function(O){return O.setHeader&&typeof O.abort=="function"}(o)?(o.on("complete",g),o.on("abort",x),o.req?S():o.on("request",S)):h&&!o._writableState&&(o.on("end",d),o.on("close",d)),o.on("end",b),o.on("finish",g),a.error!==!1&&o.on("error",y),o.on("close",x),function(){o.removeListener("complete",g),o.removeListener("abort",x),o.removeListener("request",S),o.req&&o.req.removeListener("finish",g),o.removeListener("end",d),o.removeListener("close",d),o.removeListener("finish",g),o.removeListener("end",b),o.removeListener("error",y),o.removeListener("close",x)}}},{"../../../errors":477}],487:[function(n,t,e){"use strict";t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(n,t,e){"use strict";var r,i=n("../../../errors").codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(p){if(p)throw p}function l(p,g,m,b){b=function(S){var O=!1;return function(){O||(O=!0,S.apply(void 0,arguments))}}(b);var y=!1;p.on("close",function(){y=!0}),r===void 0&&(r=n("./end-of-stream")),r(p,{readable:g,writable:m},function(S){if(S)return b(S);y=!0,b()});var x=!1;return function(S){if(!y&&!x)return x=!0,function(O){return O.setHeader&&typeof O.abort=="function"}(p)?p.abort():typeof p.destroy=="function"?p.destroy():void b(S||new o("pipe"))}}function c(p){p()}function h(p,g){return p.pipe(g)}function d(p){return p.length?typeof p[p.length-1]!="function"?a:p.pop():a}t.exports=function(){for(var p=arguments.length,g=new Array(p),m=0;m<p;m++)g[m]=arguments[m];var b,y=d(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new s("streams");var x=g.map(function(S,O){var D=O<g.length-1;return l(S,D,O>0,function(U){b||(b=U),U&&x.forEach(c),D||(x.forEach(c),y(b))})});return g.reduce(h)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(n,t,e){"use strict";var r=n("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(i,s,o,a){var l=function(c,h,d){return c.highWaterMark!=null?c.highWaterMark:h?c[d]:null}(s,a,o);if(l!=null){if(!isFinite(l)||Math.floor(l)!==l||l<0)throw new r(a?o:"highWaterMark",l);return Math.floor(l)}return i.objectMode?16:16384}}},{"../../../errors":477}],490:[function(n,t,e){"use strict";t.exports=n("events").EventEmitter},{events:422}],491:[function(n,t,e){"use strict";(e=t.exports=n("./lib/_stream_readable.js")).Stream=e,e.Readable=e,e.Writable=n("./lib/_stream_writable.js"),e.Duplex=n("./lib/_stream_duplex.js"),e.Transform=n("./lib/_stream_transform.js"),e.PassThrough=n("./lib/_stream_passthrough.js"),e.finished=n("./lib/internal/streams/end-of-stream.js"),e.pipeline=n("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(n,t,e){"use strict";var r=function(i){var s=Object.prototype,o=s.hasOwnProperty,a=Object.defineProperty||function(k,T,R){k[T]=R.value},l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",h=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function p(k,T,R){return Object.defineProperty(k,T,{value:R,enumerable:!0,configurable:!0,writable:!0}),k[T]}try{p({},"")}catch{p=function(T,R,F){return T[R]=F}}function g(k,T,R,F){var H=T&&T.prototype instanceof y?T:y,rt=Object.create(H.prototype),ot=new Z(F||[]);return a(rt,"_invoke",{value:tt(k,R,ot)}),rt}function m(k,T,R){try{return{type:"normal",arg:k.call(T,R)}}catch(F){return{type:"throw",arg:F}}}i.wrap=g;var b={};function y(){}function x(){}function S(){}var O={};p(O,c,function(){return this});var D=Object.getPrototypeOf,U=D&&D(D(w([])));U&&U!==s&&o.call(U,c)&&(O=U);var z=S.prototype=y.prototype=Object.create(O);function q(k){["next","throw","return"].forEach(function(T){p(k,T,function(R){return this._invoke(T,R)})})}function G(k,T){var R;a(this,"_invoke",{value:function(F,H){function rt(){return new T(function(ot,dt){(function $(ct,W,V,it){var mt=m(k[ct],k,W);if(mt.type!=="throw"){var wt=mt.arg,_t=wt.value;return _t&&typeof _t=="object"&&o.call(_t,"__await")?T.resolve(_t.__await).then(function(Ct){$("next",Ct,V,it)},function(Ct){$("throw",Ct,V,it)}):T.resolve(_t).then(function(Ct){wt.value=Ct,V(wt)},function(Ct){return $("throw",Ct,V,it)})}it(mt.arg)})(F,H,ot,dt)})}return R=R?R.then(rt,rt):rt()}})}function tt(k,T,R){var F="suspendedStart";return function(H,rt){if(F==="executing")throw new Error("Generator is already running");if(F==="completed"){if(H==="throw")throw rt;return C()}for(R.method=H,R.arg=rt;;){var ot=R.delegate;if(ot){var dt=K(ot,R);if(dt){if(dt===b)continue;return dt}}if(R.method==="next")R.sent=R._sent=R.arg;else if(R.method==="throw"){if(F==="suspendedStart")throw F="completed",R.arg;R.dispatchException(R.arg)}else R.method==="return"&&R.abrupt("return",R.arg);F="executing";var $=m(k,T,R);if($.type==="normal"){if(F=R.done?"completed":"suspendedYield",$.arg===b)continue;return{value:$.arg,done:R.done}}$.type==="throw"&&(F="completed",R.method="throw",R.arg=$.arg)}}}function K(k,T){var R=T.method,F=k.iterator[R];if(F===void 0)return T.delegate=null,R==="throw"&&k.iterator.return&&(T.method="return",T.arg=void 0,K(k,T),T.method==="throw")||R!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+R+"' method")),b;var H=m(F,k.iterator,T.arg);if(H.type==="throw")return T.method="throw",T.arg=H.arg,T.delegate=null,b;var rt=H.arg;return rt?rt.done?(T[k.resultName]=rt.value,T.next=k.nextLoc,T.method!=="return"&&(T.method="next",T.arg=void 0),T.delegate=null,b):rt:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,b)}function B(k){var T={tryLoc:k[0]};1 in k&&(T.catchLoc=k[1]),2 in k&&(T.finallyLoc=k[2],T.afterLoc=k[3]),this.tryEntries.push(T)}function N(k){var T=k.completion||{};T.type="normal",delete T.arg,k.completion=T}function Z(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(B,this),this.reset(!0)}function w(k){if(k){var T=k[c];if(T)return T.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var R=-1,F=function H(){for(;++R<k.length;)if(o.call(k,R))return H.value=k[R],H.done=!1,H;return H.value=void 0,H.done=!0,H};return F.next=F}}return{next:C}}function C(){return{value:void 0,done:!0}}return x.prototype=S,a(z,"constructor",{value:S,configurable:!0}),a(S,"constructor",{value:x,configurable:!0}),x.displayName=p(S,d,"GeneratorFunction"),i.isGeneratorFunction=function(k){var T=typeof k=="function"&&k.constructor;return!!T&&(T===x||(T.displayName||T.name)==="GeneratorFunction")},i.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,S):(k.__proto__=S,p(k,d,"GeneratorFunction")),k.prototype=Object.create(z),k},i.awrap=function(k){return{__await:k}},q(G.prototype),p(G.prototype,h,function(){return this}),i.AsyncIterator=G,i.async=function(k,T,R,F,H){H===void 0&&(H=Promise);var rt=new G(g(k,T,R,F),H);return i.isGeneratorFunction(T)?rt:rt.next().then(function(ot){return ot.done?ot.value:rt.next()})},q(z),p(z,d,"Generator"),p(z,c,function(){return this}),p(z,"toString",function(){return"[object Generator]"}),i.keys=function(k){var T=Object(k),R=[];for(var F in T)R.push(F);return R.reverse(),function H(){for(;R.length;){var rt=R.pop();if(rt in T)return H.value=rt,H.done=!1,H}return H.done=!0,H}},i.values=w,Z.prototype={constructor:Z,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!k)for(var T in this)T.charAt(0)==="t"&&o.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var T=this;function R($,ct){return rt.type="throw",rt.arg=k,T.next=$,ct&&(T.method="next",T.arg=void 0),!!ct}for(var F=this.tryEntries.length-1;F>=0;--F){var H=this.tryEntries[F],rt=H.completion;if(H.tryLoc==="root")return R("end");if(H.tryLoc<=this.prev){var ot=o.call(H,"catchLoc"),dt=o.call(H,"finallyLoc");if(ot&&dt){if(this.prev<H.catchLoc)return R(H.catchLoc,!0);if(this.prev<H.finallyLoc)return R(H.finallyLoc)}else if(ot){if(this.prev<H.catchLoc)return R(H.catchLoc,!0)}else{if(!dt)throw new Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return R(H.finallyLoc)}}}},abrupt:function(k,T){for(var R=this.tryEntries.length-1;R>=0;--R){var F=this.tryEntries[R];if(F.tryLoc<=this.prev&&o.call(F,"finallyLoc")&&this.prev<F.finallyLoc){var H=F;break}}H&&(k==="break"||k==="continue")&&H.tryLoc<=T&&T<=H.finallyLoc&&(H=null);var rt=H?H.completion:{};return rt.type=k,rt.arg=T,H?(this.method="next",this.next=H.finallyLoc,b):this.complete(rt)},complete:function(k,T){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&T&&(this.next=T),b},finish:function(k){for(var T=this.tryEntries.length-1;T>=0;--T){var R=this.tryEntries[T];if(R.finallyLoc===k)return this.complete(R.completion,R.afterLoc),N(R),b}},catch:function(k){for(var T=this.tryEntries.length-1;T>=0;--T){var R=this.tryEntries[T];if(R.tryLoc===k){var F=R.completion;if(F.type==="throw"){var H=F.arg;N(R)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(k,T,R){return this.delegate={iterator:w(k),resultName:T,nextLoc:R},this.method==="next"&&(this.arg=void 0),b}},i}(typeof t=="object"?t.exports:{});try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},{}],493:[function(n,t,e){"use strict";var r=n("buffer").Buffer,i=n("inherits"),s=n("hash-base"),o=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0];function g(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function m(D,U){return D<<U|D>>>32-U}function b(D,U,z,q,G,tt,K,B){return m(D+(U^z^q)+tt+K|0,B)+G|0}function y(D,U,z,q,G,tt,K,B){return m(D+(U&z|~U&q)+tt+K|0,B)+G|0}function x(D,U,z,q,G,tt,K,B){return m(D+((U|~z)^q)+tt+K|0,B)+G|0}function S(D,U,z,q,G,tt,K,B){return m(D+(U&q|z&~q)+tt+K|0,B)+G|0}function O(D,U,z,q,G,tt,K,B){return m(D+(U^(z|~q))+tt+K|0,B)+G|0}i(g,s),g.prototype._update=function(){for(var D=o,U=0;U<16;++U)D[U]=this._block.readInt32LE(4*U);for(var z=0|this._a,q=0|this._b,G=0|this._c,tt=0|this._d,K=0|this._e,B=0|this._a,N=0|this._b,Z=0|this._c,w=0|this._d,C=0|this._e,k=0;k<80;k+=1){var T,R;k<16?(T=b(z,q,G,tt,K,D[a[k]],d[0],c[k]),R=O(B,N,Z,w,C,D[l[k]],p[0],h[k])):k<32?(T=y(z,q,G,tt,K,D[a[k]],d[1],c[k]),R=S(B,N,Z,w,C,D[l[k]],p[1],h[k])):k<48?(T=x(z,q,G,tt,K,D[a[k]],d[2],c[k]),R=x(B,N,Z,w,C,D[l[k]],p[2],h[k])):k<64?(T=S(z,q,G,tt,K,D[a[k]],d[3],c[k]),R=y(B,N,Z,w,C,D[l[k]],p[3],h[k])):(T=O(z,q,G,tt,K,D[a[k]],d[4],c[k]),R=b(B,N,Z,w,C,D[l[k]],p[4],h[k])),z=K,K=tt,tt=m(G,10),G=q,q=T,B=C,C=w,w=m(Z,10),Z=N,N=R}var F=this._b+G+w|0;this._b=this._c+tt+C|0,this._c=this._d+K+B|0,this._d=this._e+z+N|0,this._e=this._a+q+Z|0,this._a=F},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var D=r.alloc?r.alloc(20):new r(20);return D.writeInt32LE(this._a,0),D.writeInt32LE(this._b,4),D.writeInt32LE(this._c,8),D.writeInt32LE(this._d,12),D.writeInt32LE(this._e,16),D},t.exports=g},{buffer:220,"hash-base":425,inherits:440}],494:[function(n,t,e){"use strict";var r=n("buffer"),i=r.Buffer;function s(a,l){for(var c in a)l[c]=a[c]}function o(a,l,c){return i(a,l,c)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(a,l,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return i(a,l,c)},o.alloc=function(a,l,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var h=i(a);return l!==void 0?typeof c=="string"?h.fill(l,c):h.fill(l):h.fill(0),h},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}},{buffer:220}],495:[function(n,t,e){(function(r){(function(){"use strict";var i,s=n("buffer"),o=s.Buffer,a={};for(i in s)s.hasOwnProperty(i)&&i!=="SlowBuffer"&&i!=="Buffer"&&(a[i]=s[i]);var l=a.Buffer={};for(i in o)o.hasOwnProperty(i)&&i!=="allocUnsafe"&&i!=="allocUnsafeSlow"&&(l[i]=o[i]);if(a.Buffer.prototype=o.prototype,l.from&&l.from!==Uint8Array.from||(l.from=function(c,h,d){if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof c);if(c&&c.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);return o(c,h,d)}),l.alloc||(l.alloc=function(c,h,d){if(typeof c!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof c);if(c<0||c>=2*(1<<30))throw new RangeError('The value "'+c+'" is invalid for option "size"');var p=o(c);return h&&h.length!==0?typeof d=="string"?p.fill(h,d):p.fill(h):p.fill(0),p}),!a.kStringMaxLength)try{a.kStringMaxLength=r.binding("buffer").kStringMaxLength}catch{}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a}).call(this)}).call(this,n("_process"))},{_process:467,buffer:220}],496:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=n("xmlchars/xml/1.0/ed5"),i=n("xmlchars/xml/1.1/ed2"),s=n("xmlchars/xmlns/1.0/ed3");var o=r.isS,a=r.isChar,l=r.isNameStartChar,c=r.isNameChar,h=r.S_LIST,d=r.NAME_RE,p=i.isChar,g=s.isNCNameStartChar,m=s.isNCNameChar,b=s.NC_NAME_RE;let y="http://www.w3.org/XML/1998/namespace",x="http://www.w3.org/2000/xmlns/",S={__proto__:null,xml:y,xmlns:x},O={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},D=w=>w===34||w===39,U=[34,39],z=[...U,91,62],q=[...U,60,93],G=[61,63,...h],tt=[...h,62,38,60];function K(w,C,k){switch(C){case"xml":k!==y&&w.fail(`xml prefix must be bound to ${y}.`);break;case"xmlns":k!==x&&w.fail(`xmlns prefix must be bound to ${x}.`)}switch(k){case x:w.fail(C===""?`the default namespace may not be set to ${k}.`:`may not assign a prefix (even "xmlns") to the URI ${x}.`);break;case y:switch(C){case"xml":break;case"":w.fail(`the default namespace may not be set to ${k}.`);break;default:w.fail("may not assign the xml namespace to another prefix.")}}}let B=w=>b.test(w),N=w=>d.test(w);e.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];let Z={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};e.SaxesParser=class{constructor(w){this.opt=w??{},this.fragmentOpt=!!this.opt.fragment;let C=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,C){this.nameStartCheck=g,this.nameCheck=m,this.isName=B,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},S);let k=this.opt.additionalNamespaces;k!=null&&(function(T,R){for(let F of Object.keys(R))K(T,F,R[F])}(this,k),Object.assign(this.ns,k))}else this.nameStartCheck=l,this.nameCheck=c,this.isName=N,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var w;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];let{fragmentOpt:C}=this;this.state=C?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=C,this.xmlDeclPossible=!C,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:k}=this.opt;if(k===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");k="1.0"}this.setXMLVersion(k),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(O),(w=this.readyHandler)===null||w===void 0||w.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(w,C){this[Z[w]]=C}off(w){this[Z[w]]=void 0}makeError(w){var C;let k=(C=this.fileName)!==null&&C!==void 0?C:"";return this.trackPosition&&(k.length>0&&(k+=":"),k+=`${this.line}:${this.column}`),k.length>0&&(k+=": "),new Error(k+w)}fail(w){let C=this.makeError(w),k=this.errorHandler;if(k===void 0)throw C;return k(C),this}write(w){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let C=!1;w===null?(C=!0,w=""):typeof w=="object"&&(w=w.toString()),this.carriedFromPrevious!==void 0&&(w=`${this.carriedFromPrevious}${w}`,this.carriedFromPrevious=void 0);let k=w.length,T=w.charCodeAt(k-1);!C&&(T===13||T>=55296&&T<=56319)&&(this.carriedFromPrevious=w[k-1],k--,w=w.slice(0,k));let{stateTable:R}=this;for(this.chunk=w,this.i=0;this.i<k;)R[this.state].call(this);return this.chunkPosition+=k,C?this.end():this}close(){return this.write(null)}getCode10(){let{chunk:w,i:C}=this;if(this.prevI=C,this.i=C+1,C>=w.length)return-1;let k=w.charCodeAt(C);if(this.column++,k<55296){if(k>=32||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return w.charCodeAt(C+1)===10&&(this.i=C+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;let T=65536+1024*(k-55296)+(w.charCodeAt(C+1)-56320);return this.i=C+2,T>1114111&&this.fail("disallowed character."),T}getCode11(){let{chunk:w,i:C}=this;if(this.prevI=C,this.i=C+1,C>=w.length)return-1;let k=w.charCodeAt(C);if(this.column++,k<55296){if(k>31&&k<127||k>159&&k!==8232||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{let R=w.charCodeAt(C+1);R!==10&&R!==133||(this.i=C+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;let T=65536+1024*(k-55296)+(w.charCodeAt(C+1)-56320);return this.i=C+2,T>1114111&&this.fail("disallowed character."),T}getCodeNorm(){let w=this.getCode();return w===-2?10:w}unget(){this.i=this.prevI,this.column--}captureTo(w){let{i:C}=this,{chunk:k}=this;for(;;){let T=this.getCode(),R=T===-2,F=R?10:T;if(F===-1||w.includes(F))return this.text+=k.slice(C,this.prevI),F;R&&(this.text+=k.slice(C,this.prevI)+`
`,C=this.i)}}captureToChar(w){let{i:C}=this,{chunk:k}=this;for(;;){let T=this.getCode();switch(T){case-2:this.text+=k.slice(C,this.prevI)+`
`,C=this.i,T=10;break;case-1:return this.text+=k.slice(C),!1}if(T===w)return this.text+=k.slice(C,this.prevI),!0}}captureNameChars(){let{chunk:w,i:C}=this;for(;;){let k=this.getCode();if(k===-1)return this.name+=w.slice(C),-1;if(!c(k))return this.name+=w.slice(C,this.prevI),k===-2?10:k}}skipSpaces(){for(;;){let w=this.getCodeNorm();if(w===-1||!o(w))return w}}setXMLVersion(w){this.currentXMLVersion=w,w==="1.0"?(this.isChar=a,this.getCode=this.getCode10):(this.isChar=p,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){let w=this.i,C=this.skipSpaces();switch(this.prevI!==w&&(this.xmlDeclPossible=!1),C){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var w;let C=this.captureTo(z);switch(C){case 62:(w=this.doctypeHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(C),C===91?this.state=4:D(C)&&(this.state=3,this.q=C)}}sDoctypeQuote(){let w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.q=null,this.state=2)}sDTD(){let w=this.captureTo(q);w!==-1&&(this.text+=String.fromCodePoint(w),w===93?this.state=2:w===60?this.state=6:D(w)&&(this.state=5,this.q=w))}sDTDQuoted(){let w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.state=4,this.q=null)}sDTDOpenWaka(){let w=this.getCodeNorm();switch(this.text+=String.fromCodePoint(w),w){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){let w=String.fromCodePoint(this.getCodeNorm()),C=this.openWakaBang+=w;this.text+=w,C!=="-"&&(this.state=C==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){let w=this.getCodeNorm();this.text+=String.fromCodePoint(w),this.state=w===45?10:8}sDTDCommentEnded(){let w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){let w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:w}=this,{chunk:C}=this;t:for(;;)switch(this.getCode()){case-2:this.entity+=C.slice(w,this.prevI)+`
`,w=this.i;break;case 59:{let{entityReturnState:k}=this,T=this.entity+C.slice(w,this.prevI),R;this.state=k,T===""?(this.fail("empty entity name."),R="&;"):(R=this.parseEntity(T),this.entity=""),k===13&&this.textHandler===void 0||(this.text+=R);break t}case-1:this.entity+=C.slice(w);break t}}sOpenWaka(){let w=this.getCode();if(l(w))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(w){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var w;let C=this.getCodeNorm();C===45?(this.state=19,(w=this.commentHandler)===null||w===void 0||w.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(C),this.state=17)}sCommentEnded(){let w=this.getCodeNorm();w!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(w),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){let w=this.getCodeNorm();w===93?this.state=22:(this.text+="]"+String.fromCodePoint(w),this.state=20)}sCDataEnding2(){var w;let C=this.getCodeNorm();switch(C){case 62:(w=this.cdataHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(C),this.state=20}}sPIFirstChar(){let w=this.getCodeNorm();this.nameStartCheck(w)?(this.piTarget+=String.fromCodePoint(w),this.state=24):w===63||o(w)?(this.fail("processing instruction without a target."),this.state=w===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(w),this.state=24)}sPIRest(){let{chunk:w,i:C}=this;for(;;){let k=this.getCodeNorm();if(k===-1)return void(this.piTarget+=w.slice(C));if(!this.nameCheck(k)){this.piTarget+=w.slice(C,this.prevI);let T=k===63;T||o(k)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=T?33:27):this.state=T?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(k));break}}}sPIBody(){if(this.text.length===0){let w=this.getCodeNorm();w===63?this.state=26:o(w)||(this.text=String.fromCodePoint(w))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var w;let C=this.getCodeNorm();if(C===62){let{piTarget:k}=this;k.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(w=this.piHandler)===null||w===void 0||w.call(this,{target:k,body:this.text}),this.piTarget=this.text="",this.state=13}else C===63?this.text+="?":(this.text+="?"+String.fromCodePoint(C),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){let w=this.skipSpaces();w!==63?w!==-1&&(this.state=28,this.name=String.fromCodePoint(w)):this.state=33}sXMLDeclName(){let w=this.captureTo(G);if(w===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(o(w)||w===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=w===61?30:29}}sXMLDeclEq(){let w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");o(w)||(w!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){let w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");o(w)||(D(w)?this.q=w:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){let w=this.captureTo([this.q,63]);if(w===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(w===-1)return;let C=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];let k=C;this.xmlDecl.version=k,/^1\.[0-9]+$/.test(k)?this.opt.forceXMLVersion||this.setXMLVersion(k):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(C)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=C;break;case"standalone":C!=="yes"&&C!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=C}this.name="",this.state=32}sXMLDeclSeparator(){let w=this.getCodeNorm();w!==63?(o(w)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var w;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(w=this.xmldeclHandler)===null||w===void 0||w.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var w;let C=this.captureNameChars();if(C===-1)return;let k=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=k.ns=Object.create(null)),(w=this.openTagStartHandler)===null||w===void 0||w.call(this,k),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),C){case 62:this.openTag();break;case 47:this.state=35;break;default:o(C)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){let w=this.skipSpaces();w!==-1&&(l(w)?(this.unget(),this.state=37):w===62?this.openTag():w===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){let w=this.captureNameChars();w===61?this.state=39:o(w)?this.state=38:w===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):w!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){let w=this.skipSpaces();switch(w){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",w===62?this.openTag():l(w)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){let w=this.getCodeNorm();D(w)?(this.q=w,this.state=40):o(w)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){let{q:w,chunk:C}=this,{i:k}=this;for(;;)switch(this.getCode()){case w:return this.pushAttrib(this.name,this.text+C.slice(k,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=C.slice(k,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=C.slice(k,this.prevI)+" ",k=this.i;break;case 60:return this.text+=C.slice(k,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=C.slice(k))}}sAttribValueClosed(){let w=this.getCodeNorm();o(w)?this.state=36:w===62?this.openTag():w===47?this.state=35:l(w)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){let w=this.captureTo(tt);switch(w){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",w===62?this.openTag():this.state=36}}sCloseTag(){let w=this.captureNameChars();w===62?this.closeTag():o(w)?this.state=44:w!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:w,forbiddenState:C}=this,{chunk:k,textHandler:T}=this;t:for(;;)switch(this.getCode()){case 60:if(this.state=15,T!==void 0){let{text:R}=this,F=k.slice(w,this.prevI);R.length!==0?(T(R+F),this.text=""):F.length!==0&&T(F)}C=0;break t;case 38:this.state=14,this.entityReturnState=13,T!==void 0&&(this.text+=k.slice(w,this.prevI)),C=0;break t;case 93:switch(C){case 0:C=1;break;case 1:C=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:C===2&&this.fail('the string "]]>" is disallowed in char data.'),C=0;break;case-2:T!==void 0&&(this.text+=k.slice(w,this.prevI)+`
`),w=this.i,C=0;break;case-1:T!==void 0&&(this.text+=k.slice(w));break t;default:C=0}this.forbiddenState=C}handleTextOutsideRoot(){let{i:w}=this,{chunk:C,textHandler:k}=this,T=!1;t:for(;;){let R=this.getCode();switch(R){case 60:if(this.state=15,k!==void 0){let{text:F}=this,H=C.slice(w,this.prevI);F.length!==0?(k(F+H),this.text=""):H.length!==0&&k(H)}break t;case 38:this.state=14,this.entityReturnState=13,k!==void 0&&(this.text+=C.slice(w,this.prevI)),T=!0;break t;case-2:k!==void 0&&(this.text+=C.slice(w,this.prevI)+`
`),w=this.i;break;case-1:k!==void 0&&(this.text+=C.slice(w));break t;default:o(R)||(T=!0)}}T&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(w,C){var k;let{prefix:T,local:R}=this.qname(w),F={name:w,prefix:T,local:R,value:C};if(this.attribList.push(F),(k=this.attributeHandler)===null||k===void 0||k.call(this,F),T==="xmlns"){let H=C.trim();this.currentXMLVersion==="1.0"&&H===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[R]=H,K(this,R,H)}else if(w==="xmlns"){let H=C.trim();this.topNS[""]=H,K(this,"",H)}}pushAttribPlain(w,C){var k;let T={name:w,value:C};this.attribList.push(T),(k=this.attributeHandler)===null||k===void 0||k.call(this,T)}end(){var w,C;this.sawRoot||this.fail("document must contain a root element.");let{tags:k}=this;for(;k.length>0;){let R=k.pop();this.fail("unclosed tag: "+R.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");let{text:T}=this;return T.length!==0&&((w=this.textHandler)===null||w===void 0||w.call(this,T),this.text=""),this._closed=!0,(C=this.endHandler)===null||C===void 0||C.call(this),this._init(),this}resolve(w){var C,k;let T=this.topNS[w];if(T!==void 0)return T;let{tags:R}=this;for(let F=R.length-1;F>=0;F--)if(T=R[F].ns[w],T!==void 0)return T;return T=this.ns[w],T!==void 0?T:(k=(C=this.opt).resolvePrefix)===null||k===void 0?void 0:k.call(C,w)}qname(w){let C=w.indexOf(":");if(C===-1)return{prefix:"",local:w};let k=w.slice(C+1),T=w.slice(0,C);return(T===""||k===""||k.includes(":"))&&this.fail(`malformed name: ${w}.`),{prefix:T,local:k}}processAttribsNS(){var w;let{attribList:C}=this,k=this.tag;{let{prefix:F,local:H}=this.qname(k.name);k.prefix=F,k.local=H;let rt=k.uri=(w=this.resolve(F))!==null&&w!==void 0?w:"";F!==""&&(F==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),rt===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(F)}.`),k.uri=F))}if(C.length===0)return;let{attributes:T}=k,R=new Set;for(let F of C){let{name:H,prefix:rt,local:ot}=F,dt,$;rt===""?(dt=H==="xmlns"?x:"",$=H):(dt=this.resolve(rt),dt===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(rt)}.`),dt=rt),$=`{${dt}}${ot}`),R.has($)&&this.fail(`duplicate attribute: ${$}.`),R.add($),F.uri=dt,T[H]=F}this.attribList=[]}processAttribsPlain(){let{attribList:w}=this,C=this.tag.attributes;for(let{name:k,value:T}of w)C[k]!==void 0&&this.fail(`duplicate attribute: ${k}.`),C[k]=T;this.attribList=[]}openTag(){var w;this.processAttribs();let{tags:C}=this,k=this.tag;k.isSelfClosing=!1,(w=this.openTagHandler)===null||w===void 0||w.call(this,k),C.push(k),this.state=13,this.name=""}openSelfClosingTag(){var w,C,k;this.processAttribs();let{tags:T}=this,R=this.tag;R.isSelfClosing=!0,(w=this.openTagHandler)===null||w===void 0||w.call(this,R),(C=this.closeTagHandler)===null||C===void 0||C.call(this,R),(this.tag=(k=T[T.length-1])!==null&&k!==void 0?k:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){let{tags:w,name:C}=this;if(this.state=13,this.name="",C==="")return this.fail("weird empty close tag."),void(this.text+="</>");let k=this.closeTagHandler,T=w.length;for(;T-- >0;){let R=this.tag=w.pop();if(this.topNS=R.ns,k?.(R),R.name===C)break;this.fail("unexpected close tag.")}T===0?this.closedRoot=!0:T<0&&(this.fail(`unmatched closing tag: ${C}.`),this.text+=`</${C}>`)}parseEntity(w){if(w[0]!=="#"){let k=this.ENTITIES[w];return k!==void 0?k:(this.fail(this.isName(w)?"undefined entity.":"disallowed character in entity name."),`&${w};`)}let C=NaN;return w[1]==="x"&&/^#x[0-9a-f]+$/i.test(w)?C=parseInt(w.slice(2),16):/^#[0-9]+$/.test(w)&&(C=parseInt(w.slice(1),10)),this.isChar(C)?String.fromCodePoint(C):(this.fail("malformed character entity."),`&${w};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer;function i(s,o){this._block=r.alloc(s),this._finalSize=o,this._blockSize=s,this._len=0}i.prototype.update=function(s,o){typeof s=="string"&&(o=o||"utf8",s=r.from(s,o));for(var a=this._block,l=this._blockSize,c=s.length,h=this._len,d=0;d<c;){for(var p=h%l,g=Math.min(c-d,l-p),m=0;m<g;m++)a[p+m]=s[d+m];d+=g,(h+=g)%l==0&&this._update(a)}return this._len+=c,this},i.prototype.digest=function(s){var o=this._len%this._blockSize;this._block[o]=128,this._block.fill(0,o+1),o>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=8*this._len;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var l=(4294967295&a)>>>0,c=(a-l)/4294967296;this._block.writeUInt32BE(c,this._blockSize-8),this._block.writeUInt32BE(l,this._blockSize-4)}this._update(this._block);var h=this._hash();return s?h.toString(s):h},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},{"safe-buffer":494}],498:[function(n,t,e){"use strict";var r=t.exports=function(i){i=i.toLowerCase();var s=r[i];if(!s)throw new Error(i+" is not supported (we accept pull requests)");return new s};r.sha=n("./sha"),r.sha1=n("./sha1"),r.sha224=n("./sha224"),r.sha256=n("./sha256"),r.sha384=n("./sha384"),r.sha512=n("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(n,t,e){"use strict";var r=n("inherits"),i=n("./hash"),s=n("safe-buffer").Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function l(){this.init(),this._w=a,i.call(this,64,56)}function c(d){return d<<30|d>>>2}function h(d,p,g,m){return d===0?p&g|~p&m:d===2?p&g|p&m|g&m:p^g^m}r(l,i),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(d){for(var p,g=this._w,m=0|this._a,b=0|this._b,y=0|this._c,x=0|this._d,S=0|this._e,O=0;O<16;++O)g[O]=d.readInt32BE(4*O);for(;O<80;++O)g[O]=g[O-3]^g[O-8]^g[O-14]^g[O-16];for(var D=0;D<80;++D){var U=~~(D/20),z=0|((p=m)<<5|p>>>27)+h(U,b,y,x)+S+g[D]+o[U];S=x,x=y,y=c(b),b=m,m=z}this._a=m+this._a|0,this._b=b+this._b|0,this._c=y+this._c|0,this._d=x+this._d|0,this._e=S+this._e|0},l.prototype._hash=function(){var d=s.allocUnsafe(20);return d.writeInt32BE(0|this._a,0),d.writeInt32BE(0|this._b,4),d.writeInt32BE(0|this._c,8),d.writeInt32BE(0|this._d,12),d.writeInt32BE(0|this._e,16),d},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(n,t,e){"use strict";var r=n("inherits"),i=n("./hash"),s=n("safe-buffer").Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function l(){this.init(),this._w=a,i.call(this,64,56)}function c(p){return p<<5|p>>>27}function h(p){return p<<30|p>>>2}function d(p,g,m,b){return p===0?g&m|~g&b:p===2?g&m|g&b|m&b:g^m^b}r(l,i),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(p){for(var g,m=this._w,b=0|this._a,y=0|this._b,x=0|this._c,S=0|this._d,O=0|this._e,D=0;D<16;++D)m[D]=p.readInt32BE(4*D);for(;D<80;++D)m[D]=(g=m[D-3]^m[D-8]^m[D-14]^m[D-16])<<1|g>>>31;for(var U=0;U<80;++U){var z=~~(U/20),q=c(b)+d(z,y,x,S)+O+m[U]+o[z]|0;O=S,S=x,x=h(y),y=b,b=q}this._a=b+this._a|0,this._b=y+this._b|0,this._c=x+this._c|0,this._d=S+this._d|0,this._e=O+this._e|0},l.prototype._hash=function(){var p=s.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(n,t,e){"use strict";var r=n("inherits"),i=n("./sha256"),s=n("./hash"),o=n("safe-buffer").Buffer,a=new Array(64);function l(){this.init(),this._w=a,s.call(this,64,56)}r(l,i),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var c=o.allocUnsafe(28);return c.writeInt32BE(this._a,0),c.writeInt32BE(this._b,4),c.writeInt32BE(this._c,8),c.writeInt32BE(this._d,12),c.writeInt32BE(this._e,16),c.writeInt32BE(this._f,20),c.writeInt32BE(this._g,24),c},t.exports=l},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(n,t,e){"use strict";var r=n("inherits"),i=n("./hash"),s=n("safe-buffer").Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function l(){this.init(),this._w=a,i.call(this,64,56)}function c(m,b,y){return y^m&(b^y)}function h(m,b,y){return m&b|y&(m|b)}function d(m){return(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10)}function p(m){return(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7)}function g(m){return(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3}r(l,i),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(m){for(var b,y=this._w,x=0|this._a,S=0|this._b,O=0|this._c,D=0|this._d,U=0|this._e,z=0|this._f,q=0|this._g,G=0|this._h,tt=0;tt<16;++tt)y[tt]=m.readInt32BE(4*tt);for(;tt<64;++tt)y[tt]=0|(((b=y[tt-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+y[tt-7]+g(y[tt-15])+y[tt-16];for(var K=0;K<64;++K){var B=G+p(U)+c(U,z,q)+o[K]+y[K]|0,N=d(x)+h(x,S,O)|0;G=q,q=z,z=U,U=D+B|0,D=O,O=S,S=x,x=B+N|0}this._a=x+this._a|0,this._b=S+this._b|0,this._c=O+this._c|0,this._d=D+this._d|0,this._e=U+this._e|0,this._f=z+this._f|0,this._g=q+this._g|0,this._h=G+this._h|0},l.prototype._hash=function(){var m=s.allocUnsafe(32);return m.writeInt32BE(this._a,0),m.writeInt32BE(this._b,4),m.writeInt32BE(this._c,8),m.writeInt32BE(this._d,12),m.writeInt32BE(this._e,16),m.writeInt32BE(this._f,20),m.writeInt32BE(this._g,24),m.writeInt32BE(this._h,28),m},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(n,t,e){"use strict";var r=n("inherits"),i=n("./sha512"),s=n("./hash"),o=n("safe-buffer").Buffer,a=new Array(160);function l(){this.init(),this._w=a,s.call(this,128,112)}r(l,i),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var c=o.allocUnsafe(48);function h(d,p,g){c.writeInt32BE(d,g),c.writeInt32BE(p,g+4)}return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),c},t.exports=l},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(n,t,e){"use strict";var r=n("inherits"),i=n("./hash"),s=n("safe-buffer").Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function l(){this.init(),this._w=a,i.call(this,128,112)}function c(S,O,D){return D^S&(O^D)}function h(S,O,D){return S&O|D&(S|O)}function d(S,O){return(S>>>28|O<<4)^(O>>>2|S<<30)^(O>>>7|S<<25)}function p(S,O){return(S>>>14|O<<18)^(S>>>18|O<<14)^(O>>>9|S<<23)}function g(S,O){return(S>>>1|O<<31)^(S>>>8|O<<24)^S>>>7}function m(S,O){return(S>>>1|O<<31)^(S>>>8|O<<24)^(S>>>7|O<<25)}function b(S,O){return(S>>>19|O<<13)^(O>>>29|S<<3)^S>>>6}function y(S,O){return(S>>>19|O<<13)^(O>>>29|S<<3)^(S>>>6|O<<26)}function x(S,O){return S>>>0<O>>>0?1:0}r(l,i),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(S){for(var O=this._w,D=0|this._ah,U=0|this._bh,z=0|this._ch,q=0|this._dh,G=0|this._eh,tt=0|this._fh,K=0|this._gh,B=0|this._hh,N=0|this._al,Z=0|this._bl,w=0|this._cl,C=0|this._dl,k=0|this._el,T=0|this._fl,R=0|this._gl,F=0|this._hl,H=0;H<32;H+=2)O[H]=S.readInt32BE(4*H),O[H+1]=S.readInt32BE(4*H+4);for(;H<160;H+=2){var rt=O[H-30],ot=O[H-30+1],dt=g(rt,ot),$=m(ot,rt),ct=b(rt=O[H-4],ot=O[H-4+1]),W=y(ot,rt),V=O[H-14],it=O[H-14+1],mt=O[H-32],wt=O[H-32+1],_t=$+it|0,Ct=dt+V+x(_t,$)|0;Ct=(Ct=Ct+ct+x(_t=_t+W|0,W)|0)+mt+x(_t=_t+wt|0,wt)|0,O[H]=Ct,O[H+1]=_t}for(var Ft=0;Ft<160;Ft+=2){Ct=O[Ft],_t=O[Ft+1];var It=h(D,U,z),vt=h(N,Z,w),kt=d(D,N),gt=d(N,D),ut=p(G,k),Q=p(k,G),Y=o[Ft],et=o[Ft+1],lt=c(G,tt,K),pt=c(k,T,R),bt=F+Q|0,Et=B+ut+x(bt,F)|0;Et=(Et=(Et=Et+lt+x(bt=bt+pt|0,pt)|0)+Y+x(bt=bt+et|0,et)|0)+Ct+x(bt=bt+_t|0,_t)|0;var Ot=gt+vt|0,zt=kt+It+x(Ot,gt)|0;B=K,F=R,K=tt,R=T,tt=G,T=k,G=q+Et+x(k=C+bt|0,C)|0,q=z,C=w,z=U,w=Z,U=D,Z=N,D=Et+zt+x(N=bt+Ot|0,bt)|0}this._al=this._al+N|0,this._bl=this._bl+Z|0,this._cl=this._cl+w|0,this._dl=this._dl+C|0,this._el=this._el+k|0,this._fl=this._fl+T|0,this._gl=this._gl+R|0,this._hl=this._hl+F|0,this._ah=this._ah+D+x(this._al,N)|0,this._bh=this._bh+U+x(this._bl,Z)|0,this._ch=this._ch+z+x(this._cl,w)|0,this._dh=this._dh+q+x(this._dl,C)|0,this._eh=this._eh+G+x(this._el,k)|0,this._fh=this._fh+tt+x(this._fl,T)|0,this._gh=this._gh+K+x(this._gl,R)|0,this._hh=this._hh+B+x(this._hl,F)|0},l.prototype._hash=function(){var S=s.allocUnsafe(64);function O(D,U,z){S.writeInt32BE(D,z),S.writeInt32BE(U,z+4)}return O(this._ah,this._al,0),O(this._bh,this._bl,8),O(this._ch,this._cl,16),O(this._dh,this._dl,24),O(this._eh,this._el,32),O(this._fh,this._fl,40),O(this._gh,this._gl,48),O(this._hh,this._hl,56),S},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(n,t,e){"use strict";t.exports=i;var r=n("events").EventEmitter;function i(){r.call(this)}n("inherits")(i,r),i.Readable=n("readable-stream/readable.js"),i.Writable=n("readable-stream/writable.js"),i.Duplex=n("readable-stream/duplex.js"),i.Transform=n("readable-stream/transform.js"),i.PassThrough=n("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(s,o){var a=this;function l(b){s.writable&&s.write(b)===!1&&a.pause&&a.pause()}function c(){a.readable&&a.resume&&a.resume()}a.on("data",l),s.on("drain",c),s._isStdio||o&&o.end===!1||(a.on("end",d),a.on("close",p));var h=!1;function d(){h||(h=!0,s.end())}function p(){h||(h=!0,typeof s.destroy=="function"&&s.destroy())}function g(b){if(m(),r.listenerCount(this,"error")===0)throw b}function m(){a.removeListener("data",l),s.removeListener("drain",c),a.removeListener("end",d),a.removeListener("close",p),a.removeListener("error",g),s.removeListener("error",g),a.removeListener("end",m),a.removeListener("close",m),s.removeListener("close",m)}return a.on("error",g),s.on("error",g),a.on("end",m),a.on("close",m),s.on("close",m),s.emit("pipe",a),s}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(n,t,e){"use strict";var r={}.toString;t.exports=Array.isArray||function(i){return r.call(i)=="[object Array]"}},{}],507:[function(n,t,e){"use strict";t.exports=n("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(n,t,e){"use strict";var r=n("process-nextick-args"),i=Object.keys||function(m){var b=[];for(var y in m)b.push(y);return b};t.exports=d;var s=Object.create(n("core-util-is"));s.inherits=n("inherits");var o=n("./_stream_readable"),a=n("./_stream_writable");s.inherits(d,o);for(var l=i(a.prototype),c=0;c<l.length;c++){var h=l[c];d.prototype[h]||(d.prototype[h]=a.prototype[h])}function d(m){if(!(this instanceof d))return new d(m);o.call(this,m),a.call(this,m),m&&m.readable===!1&&(this.readable=!1),m&&m.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,m&&m.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(g,this)}function g(m){m.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),d.prototype._destroy=function(m,b){this.push(null),this.end(),r.nextTick(b,m)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(n,t,e){"use strict";t.exports=s;var r=n("./_stream_transform"),i=Object.create(n("core-util-is"));function s(o){if(!(this instanceof s))return new s(o);r.call(this,o)}i.inherits=n("inherits"),i.inherits(s,r),s.prototype._transform=function(o,a,l){l(null,o)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(n,t,e){(function(r,i){(function(){"use strict";var s=n("process-nextick-args");t.exports=D;var o,a=n("isarray");D.ReadableState=O,n("events").EventEmitter;var l=function(F,H){return F.listeners(H).length},c=n("./internal/streams/stream"),h=n("safe-buffer").Buffer,d=(i!==void 0?i:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p=Object.create(n("core-util-is"));p.inherits=n("inherits");var g=n("util"),m=void 0;m=g&&g.debuglog?g.debuglog("stream"):function(){};var b,y=n("./internal/streams/BufferList"),x=n("./internal/streams/destroy");p.inherits(D,c);var S=["error","close","destroy","pause","resume"];function O(F,H){F=F||{};var rt=H instanceof(o=o||n("./_stream_duplex"));this.objectMode=!!F.objectMode,rt&&(this.objectMode=this.objectMode||!!F.readableObjectMode);var ot=F.highWaterMark,dt=F.readableHighWaterMark,$=this.objectMode?16:16384;this.highWaterMark=ot||ot===0?ot:rt&&(dt||dt===0)?dt:$,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(b||(b=n("string_decoder/").StringDecoder),this.decoder=new b(F.encoding),this.encoding=F.encoding)}function D(F){if(o=o||n("./_stream_duplex"),!(this instanceof D))return new D(F);this._readableState=new O(F,this),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),c.call(this)}function U(F,H,rt,ot,dt){var $,ct=F._readableState;return H===null?(ct.reading=!1,function(W,V){if(!V.ended){if(V.decoder){var it=V.decoder.end();it&&it.length&&(V.buffer.push(it),V.length+=V.objectMode?1:it.length)}V.ended=!0,G(W)}}(F,ct)):(dt||($=function(W,V){var it;mt=V,h.isBuffer(mt)||mt instanceof d||typeof V=="string"||V===void 0||W.objectMode||(it=new TypeError("Invalid non-string/buffer chunk"));var mt;return it}(ct,H)),$?F.emit("error",$):ct.objectMode||H&&H.length>0?(typeof H=="string"||ct.objectMode||Object.getPrototypeOf(H)===h.prototype||(H=function(W){return h.from(W)}(H)),ot?ct.endEmitted?F.emit("error",new Error("stream.unshift() after end event")):z(F,ct,H,!0):ct.ended?F.emit("error",new Error("stream.push() after EOF")):(ct.reading=!1,ct.decoder&&!rt?(H=ct.decoder.write(H),ct.objectMode||H.length!==0?z(F,ct,H,!1):K(F,ct)):z(F,ct,H,!1))):ot||(ct.reading=!1)),function(W){return!W.ended&&(W.needReadable||W.length<W.highWaterMark||W.length===0)}(ct)}function z(F,H,rt,ot){H.flowing&&H.length===0&&!H.sync?(F.emit("data",rt),F.read(0)):(H.length+=H.objectMode?1:rt.length,ot?H.buffer.unshift(rt):H.buffer.push(rt),H.needReadable&&G(F)),K(F,H)}Object.defineProperty(D.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(F){this._readableState&&(this._readableState.destroyed=F)}}),D.prototype.destroy=x.destroy,D.prototype._undestroy=x.undestroy,D.prototype._destroy=function(F,H){this.push(null),H(F)},D.prototype.push=function(F,H){var rt,ot=this._readableState;return ot.objectMode?rt=!0:typeof F=="string"&&((H=H||ot.defaultEncoding)!==ot.encoding&&(F=h.from(F,H),H=""),rt=!0),U(this,F,H,!1,rt)},D.prototype.unshift=function(F){return U(this,F,null,!0,!1)},D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(F){return b||(b=n("string_decoder/").StringDecoder),this._readableState.decoder=new b(F),this._readableState.encoding=F,this};function q(F,H){return F<=0||H.length===0&&H.ended?0:H.objectMode?1:F!=F?H.flowing&&H.length?H.buffer.head.data.length:H.length:(F>H.highWaterMark&&(H.highWaterMark=function(rt){return rt>=8388608?rt=8388608:(rt--,rt|=rt>>>1,rt|=rt>>>2,rt|=rt>>>4,rt|=rt>>>8,rt|=rt>>>16,rt++),rt}(F)),F<=H.length?F:H.ended?H.length:(H.needReadable=!0,0))}function G(F){var H=F._readableState;H.needReadable=!1,H.emittedReadable||(m("emitReadable",H.flowing),H.emittedReadable=!0,H.sync?s.nextTick(tt,F):tt(F))}function tt(F){m("emit readable"),F.emit("readable"),w(F)}function K(F,H){H.readingMore||(H.readingMore=!0,s.nextTick(B,F,H))}function B(F,H){for(var rt=H.length;!H.reading&&!H.flowing&&!H.ended&&H.length<H.highWaterMark&&(m("maybeReadMore read 0"),F.read(0),rt!==H.length);)rt=H.length;H.readingMore=!1}function N(F){m("readable nexttick read 0"),F.read(0)}function Z(F,H){H.reading||(m("resume read 0"),F.read(0)),H.resumeScheduled=!1,H.awaitDrain=0,F.emit("resume"),w(F),H.flowing&&!H.reading&&F.read(0)}function w(F){var H=F._readableState;for(m("flow",H.flowing);H.flowing&&F.read()!==null;);}function C(F,H){return H.length===0?null:(H.objectMode?rt=H.buffer.shift():!F||F>=H.length?(rt=H.decoder?H.buffer.join(""):H.buffer.length===1?H.buffer.head.data:H.buffer.concat(H.length),H.buffer.clear()):rt=function(ot,dt,$){var ct;return ot<dt.head.data.length?(ct=dt.head.data.slice(0,ot),dt.head.data=dt.head.data.slice(ot)):ct=ot===dt.head.data.length?dt.shift():$?function(W,V){var it=V.head,mt=1,wt=it.data;for(W-=wt.length;it=it.next;){var _t=it.data,Ct=W>_t.length?_t.length:W;if(Ct===_t.length?wt+=_t:wt+=_t.slice(0,W),(W-=Ct)===0){Ct===_t.length?(++mt,it.next?V.head=it.next:V.head=V.tail=null):(V.head=it,it.data=_t.slice(Ct));break}++mt}return V.length-=mt,wt}(ot,dt):function(W,V){var it=h.allocUnsafe(W),mt=V.head,wt=1;for(mt.data.copy(it),W-=mt.data.length;mt=mt.next;){var _t=mt.data,Ct=W>_t.length?_t.length:W;if(_t.copy(it,it.length-W,0,Ct),(W-=Ct)===0){Ct===_t.length?(++wt,mt.next?V.head=mt.next:V.head=V.tail=null):(V.head=mt,mt.data=_t.slice(Ct));break}++wt}return V.length-=wt,it}(ot,dt),ct}(F,H.buffer,H.decoder),rt);var rt}function k(F){var H=F._readableState;if(H.length>0)throw new Error('"endReadable()" called on non-empty stream');H.endEmitted||(H.ended=!0,s.nextTick(T,H,F))}function T(F,H){F.endEmitted||F.length!==0||(F.endEmitted=!0,H.readable=!1,H.emit("end"))}function R(F,H){for(var rt=0,ot=F.length;rt<ot;rt++)if(F[rt]===H)return rt;return-1}D.prototype.read=function(F){m("read",F),F=parseInt(F,10);var H=this._readableState,rt=F;if(F!==0&&(H.emittedReadable=!1),F===0&&H.needReadable&&(H.length>=H.highWaterMark||H.ended))return m("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?k(this):G(this),null;if((F=q(F,H))===0&&H.ended)return H.length===0&&k(this),null;var ot,dt=H.needReadable;return m("need readable",dt),(H.length===0||H.length-F<H.highWaterMark)&&m("length less than watermark",dt=!0),H.ended||H.reading?m("reading or ended",dt=!1):dt&&(m("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(F=q(rt,H))),(ot=F>0?C(F,H):null)===null?(H.needReadable=!0,F=0):H.length-=F,H.length===0&&(H.ended||(H.needReadable=!0),rt!==F&&H.ended&&k(this)),ot!==null&&this.emit("data",ot),ot},D.prototype._read=function(F){this.emit("error",new Error("_read() is not implemented"))},D.prototype.pipe=function(F,H){var rt=this,ot=this._readableState;switch(ot.pipesCount){case 0:ot.pipes=F;break;case 1:ot.pipes=[ot.pipes,F];break;default:ot.pipes.push(F)}ot.pipesCount+=1,m("pipe count=%d opts=%j",ot.pipesCount,H);var dt=(!H||H.end!==!1)&&F!==r.stdout&&F!==r.stderr?ct:Ft;function $(It,vt){m("onunpipe"),It===rt&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,m("cleanup"),F.removeListener("close",_t),F.removeListener("finish",Ct),F.removeListener("drain",W),F.removeListener("error",wt),F.removeListener("unpipe",$),rt.removeListener("end",ct),rt.removeListener("end",Ft),rt.removeListener("data",mt),V=!0,!ot.awaitDrain||F._writableState&&!F._writableState.needDrain||W())}function ct(){m("onend"),F.end()}ot.endEmitted?s.nextTick(dt):rt.once("end",dt),F.on("unpipe",$);var W=function(It){return function(){var vt=It._readableState;m("pipeOnDrain",vt.awaitDrain),vt.awaitDrain&&vt.awaitDrain--,vt.awaitDrain===0&&l(It,"data")&&(vt.flowing=!0,w(It))}}(rt);F.on("drain",W);var V=!1,it=!1;function mt(It){m("ondata"),it=!1,F.write(It)!==!1||it||((ot.pipesCount===1&&ot.pipes===F||ot.pipesCount>1&&R(ot.pipes,F)!==-1)&&!V&&(m("false write response, pause",ot.awaitDrain),ot.awaitDrain++,it=!0),rt.pause())}function wt(It){m("onerror",It),Ft(),F.removeListener("error",wt),l(F,"error")===0&&F.emit("error",It)}function _t(){F.removeListener("finish",Ct),Ft()}function Ct(){m("onfinish"),F.removeListener("close",_t),Ft()}function Ft(){m("unpipe"),rt.unpipe(F)}return rt.on("data",mt),function(It,vt,kt){if(typeof It.prependListener=="function")return It.prependListener(vt,kt);It._events&&It._events[vt]?a(It._events[vt])?It._events[vt].unshift(kt):It._events[vt]=[kt,It._events[vt]]:It.on(vt,kt)}(F,"error",wt),F.once("close",_t),F.once("finish",Ct),F.emit("pipe",rt),ot.flowing||(m("pipe resume"),rt.resume()),F},D.prototype.unpipe=function(F){var H=this._readableState,rt={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return F&&F!==H.pipes||(F||(F=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,F&&F.emit("unpipe",this,rt)),this;if(!F){var ot=H.pipes,dt=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var $=0;$<dt;$++)ot[$].emit("unpipe",this,{hasUnpiped:!1});return this}var ct=R(H.pipes,F);return ct===-1||(H.pipes.splice(ct,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),F.emit("unpipe",this,rt)),this},D.prototype.on=function(F,H){var rt=c.prototype.on.call(this,F,H);if(F==="data")this._readableState.flowing!==!1&&this.resume();else if(F==="readable"){var ot=this._readableState;ot.endEmitted||ot.readableListening||(ot.readableListening=ot.needReadable=!0,ot.emittedReadable=!1,ot.reading?ot.length&&G(this):s.nextTick(N,this))}return rt},D.prototype.addListener=D.prototype.on,D.prototype.resume=function(){var F=this._readableState;return F.flowing||(m("resume"),F.flowing=!0,function(H,rt){rt.resumeScheduled||(rt.resumeScheduled=!0,s.nextTick(Z,H,rt))}(this,F)),this},D.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},D.prototype.wrap=function(F){var H=this,rt=this._readableState,ot=!1;for(var dt in F.on("end",function(){if(m("wrapped end"),rt.decoder&&!rt.ended){var ct=rt.decoder.end();ct&&ct.length&&H.push(ct)}H.push(null)}),F.on("data",function(ct){m("wrapped data"),rt.decoder&&(ct=rt.decoder.write(ct)),rt.objectMode&&ct==null||(rt.objectMode||ct&&ct.length)&&(H.push(ct)||(ot=!0,F.pause()))}),F)this[dt]===void 0&&typeof F[dt]=="function"&&(this[dt]=function(ct){return function(){return F[ct].apply(F,arguments)}}(dt));for(var $=0;$<S.length;$++)F.on(S[$],this.emit.bind(this,S[$]));return this._read=function(ct){m("wrapped _read",ct),ot&&(ot=!1,F.resume())},this},Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),D._fromList=C}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(n,t,e){"use strict";t.exports=o;var r=n("./_stream_duplex"),i=Object.create(n("core-util-is"));function s(c,h){var d=this._transformState;d.transforming=!1;var p=d.writecb;if(!p)return this.emit("error",new Error("write callback called multiple times"));d.writechunk=null,d.writecb=null,h!=null&&this.push(h),p(c);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function o(c){if(!(this instanceof o))return new o(c);r.call(this,c),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",a)}function a(){var c=this;typeof this._flush=="function"?this._flush(function(h,d){l(c,h,d)}):l(this,null,null)}function l(c,h,d){if(h)return c.emit("error",h);if(d!=null&&c.push(d),c._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(c._transformState.transforming)throw new Error("Calling transform done when still transforming");return c.push(null)}i.inherits=n("inherits"),i.inherits(o,r),o.prototype.push=function(c,h){return this._transformState.needTransform=!1,r.prototype.push.call(this,c,h)},o.prototype._transform=function(c,h,d){throw new Error("_transform() is not implemented")},o.prototype._write=function(c,h,d){var p=this._transformState;if(p.writecb=d,p.writechunk=c,p.writeencoding=h,!p.transforming){var g=this._readableState;(p.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},o.prototype._read=function(c){var h=this._transformState;h.writechunk!==null&&h.writecb&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},o.prototype._destroy=function(c,h){var d=this;r.prototype._destroy.call(this,c,function(p){h(p),d.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(n,t,e){(function(r,i,s){(function(){"use strict";var o=n("process-nextick-args");function a(K){var B=this;this.next=null,this.entry=null,this.finish=function(){(function(N,Z,w){var C=N.entry;for(N.entry=null;C;){var k=C.callback;Z.pendingcb--,k(w),C=C.next}Z.corkedRequestsFree.next=N})(B,K)}}t.exports=O;var l,c=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?s:o.nextTick;O.WritableState=S;var h=Object.create(n("core-util-is"));h.inherits=n("inherits");var d={deprecate:n("util-deprecate")},p=n("./internal/streams/stream"),g=n("safe-buffer").Buffer,m=(i!==void 0?i:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},b,y=n("./internal/streams/destroy");function x(){}function S(K,B){l=l||n("./_stream_duplex"),K=K||{};var N=B instanceof l;this.objectMode=!!K.objectMode,N&&(this.objectMode=this.objectMode||!!K.writableObjectMode);var Z=K.highWaterMark,w=K.writableHighWaterMark,C=this.objectMode?16:16384;this.highWaterMark=Z||Z===0?Z:N&&(w||w===0)?w:C,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var k=K.decodeStrings===!1;this.decodeStrings=!k,this.defaultEncoding=K.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(T){(function(R,F){var H=R._writableState,rt=H.sync,ot=H.writecb;if(function($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}(H),F)(function($,ct,W,V,it){--ct.pendingcb,W?(o.nextTick(it,V),o.nextTick(tt,$,ct),$._writableState.errorEmitted=!0,$.emit("error",V)):(it(V),$._writableState.errorEmitted=!0,$.emit("error",V),tt($,ct))})(R,H,rt,F,ot);else{var dt=q(H);dt||H.corked||H.bufferProcessing||!H.bufferedRequest||z(R,H),rt?c(U,R,H,dt,ot):U(R,H,dt,ot)}})(B,T)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function O(K){if(l=l||n("./_stream_duplex"),!(b.call(O,this)||this instanceof l))return new O(K);this._writableState=new S(K,this),this.writable=!0,K&&(typeof K.write=="function"&&(this._write=K.write),typeof K.writev=="function"&&(this._writev=K.writev),typeof K.destroy=="function"&&(this._destroy=K.destroy),typeof K.final=="function"&&(this._final=K.final)),p.call(this)}function D(K,B,N,Z,w,C,k){B.writelen=Z,B.writecb=k,B.writing=!0,B.sync=!0,N?K._writev(w,B.onwrite):K._write(w,C,B.onwrite),B.sync=!1}function U(K,B,N,Z){N||function(w,C){C.length===0&&C.needDrain&&(C.needDrain=!1,w.emit("drain"))}(K,B),B.pendingcb--,Z(),tt(K,B)}function z(K,B){B.bufferProcessing=!0;var N=B.bufferedRequest;if(K._writev&&N&&N.next){var Z=B.bufferedRequestCount,w=new Array(Z),C=B.corkedRequestsFree;C.entry=N;for(var k=0,T=!0;N;)w[k]=N,N.isBuf||(T=!1),N=N.next,k+=1;w.allBuffers=T,D(K,B,!0,B.length,w,"",C.finish),B.pendingcb++,B.lastBufferedRequest=null,C.next?(B.corkedRequestsFree=C.next,C.next=null):B.corkedRequestsFree=new a(B),B.bufferedRequestCount=0}else{for(;N;){var R=N.chunk,F=N.encoding,H=N.callback;if(D(K,B,!1,B.objectMode?1:R.length,R,F,H),N=N.next,B.bufferedRequestCount--,B.writing)break}N===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=N,B.bufferProcessing=!1}function q(K){return K.ending&&K.length===0&&K.bufferedRequest===null&&!K.finished&&!K.writing}function G(K,B){K._final(function(N){B.pendingcb--,N&&K.emit("error",N),B.prefinished=!0,K.emit("prefinish"),tt(K,B)})}function tt(K,B){var N=q(B);return N&&(function(Z,w){w.prefinished||w.finalCalled||(typeof Z._final=="function"?(w.pendingcb++,w.finalCalled=!0,o.nextTick(G,Z,w)):(w.prefinished=!0,Z.emit("prefinish")))}(K,B),B.pendingcb===0&&(B.finished=!0,K.emit("finish"))),N}h.inherits(O,p),S.prototype.getBuffer=function(){for(var K=this.bufferedRequest,B=[];K;)B.push(K),K=K.next;return B},function(){try{Object.defineProperty(S.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(K){return!!b.call(this,K)||this===O&&K&&K._writableState instanceof S}})):b=function(K){return K instanceof this},O.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},O.prototype.write=function(K,B,N){var Z,w=this._writableState,C=!1,k=!w.objectMode&&(Z=K,g.isBuffer(Z)||Z instanceof m);return k&&!g.isBuffer(K)&&(K=function(T){return g.from(T)}(K)),typeof B=="function"&&(N=B,B=null),k?B="buffer":B||(B=w.defaultEncoding),typeof N!="function"&&(N=x),w.ended?function(T,R){var F=new Error("write after end");T.emit("error",F),o.nextTick(R,F)}(this,N):(k||function(T,R,F,H){var rt=!0,ot=!1;return F===null?ot=new TypeError("May not write null values to stream"):typeof F=="string"||F===void 0||R.objectMode||(ot=new TypeError("Invalid non-string/buffer chunk")),ot&&(T.emit("error",ot),o.nextTick(H,ot),rt=!1),rt}(this,w,K,N))&&(w.pendingcb++,C=function(T,R,F,H,rt,ot){if(!F){var dt=function(V,it,mt){return V.objectMode||V.decodeStrings===!1||typeof it!="string"||(it=g.from(it,mt)),it}(R,H,rt);H!==dt&&(F=!0,rt="buffer",H=dt)}var $=R.objectMode?1:H.length;R.length+=$;var ct=R.length<R.highWaterMark;if(ct||(R.needDrain=!0),R.writing||R.corked){var W=R.lastBufferedRequest;R.lastBufferedRequest={chunk:H,encoding:rt,isBuf:F,callback:ot,next:null},W?W.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else D(T,R,!1,$,H,rt,ot);return ct}(this,w,k,K,B,N)),C},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var K=this._writableState;K.corked&&(K.corked--,K.writing||K.corked||K.bufferProcessing||!K.bufferedRequest||z(this,K))},O.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(K,B,N){N(new Error("_write() is not implemented"))},O.prototype._writev=null,O.prototype.end=function(K,B,N){var Z=this._writableState;typeof K=="function"?(N=K,K=null,B=null):typeof B=="function"&&(N=B,B=null),K!=null&&this.write(K,B),Z.corked&&(Z.corked=1,this.uncork()),Z.ending||function(w,C,k){C.ending=!0,tt(w,C),k&&(C.finished?o.nextTick(k):w.once("finish",k)),C.ended=!0,w.writable=!1}(this,Z,N)},Object.defineProperty(O.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),O.prototype.destroy=y.destroy,O.prototype._undestroy=y.undestroy,O.prototype._destroy=function(K,B){this.end(),B(K)}}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},n("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(n,t,e){"use strict";var r=n("safe-buffer").Buffer,i=n("util");t.exports=function(){function s(){(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}return s.prototype.push=function(o){var a={data:o,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length},s.prototype.unshift=function(o){var a={data:o,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length},s.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},s.prototype.clear=function(){this.head=this.tail=null,this.length=0},s.prototype.join=function(o){if(this.length===0)return"";for(var a=this.head,l=""+a.data;a=a.next;)l+=o+a.data;return l},s.prototype.concat=function(o){if(this.length===0)return r.alloc(0);for(var a,l,c,h=r.allocUnsafe(o>>>0),d=this.head,p=0;d;)a=d.data,l=h,c=p,a.copy(l,c),p+=d.data.length,d=d.next;return h},s}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var s=i.inspect({length:this.length});return this.constructor.name+" "+s})},{"safe-buffer":520,util:188}],514:[function(n,t,e){"use strict";var r=n("process-nextick-args");function i(s,o){s.emit("error",o)}t.exports={destroy:function(s,o){var a=this,l=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return l||c?(o?o(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(i,this,s)):r.nextTick(i,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(h){!o&&h?a._writableState?a._writableState.errorEmitted||(a._writableState.errorEmitted=!0,r.nextTick(i,a,h)):r.nextTick(i,a,h):o&&o(h)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(n,t,e){arguments[4][490][0].apply(e,arguments)},{dup:490,events:422}],516:[function(n,t,e){"use strict";t.exports=n("./readable").PassThrough},{"./readable":517}],517:[function(n,t,e){"use strict";(e=t.exports=n("./lib/_stream_readable.js")).Stream=e,e.Readable=e,e.Writable=n("./lib/_stream_writable.js"),e.Duplex=n("./lib/_stream_duplex.js"),e.Transform=n("./lib/_stream_transform.js"),e.PassThrough=n("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(n,t,e){"use strict";t.exports=n("./readable").Transform},{"./readable":517}],519:[function(n,t,e){"use strict";t.exports=n("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(n,t,e){arguments[4][217][0].apply(e,arguments)},{buffer:220,dup:217}],521:[function(n,t,e){arguments[4][218][0].apply(e,arguments)},{dup:218,"safe-buffer":520}],522:[function(n,t,e){arguments[4][218][0].apply(e,arguments)},{dup:218,"safe-buffer":494}],523:[function(n,t,e){(function(r,i){(function(){"use strict";var s=n("process/browser.js").nextTick,o=Function.prototype.apply,a=Array.prototype.slice,l={},c=0;function h(d,p){this._id=d,this._clearFn=p}e.setTimeout=function(){return new h(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new h(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(d){d.close()},h.prototype.unref=h.prototype.ref=function(){},h.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(d,p){clearTimeout(d._idleTimeoutId),d._idleTimeout=p},e.unenroll=function(d){clearTimeout(d._idleTimeoutId),d._idleTimeout=-1},e._unrefActive=e.active=function(d){clearTimeout(d._idleTimeoutId);var p=d._idleTimeout;p>=0&&(d._idleTimeoutId=setTimeout(function(){d._onTimeout&&d._onTimeout()},p))},e.setImmediate=typeof r=="function"?r:function(d){var p=c++,g=!(arguments.length<2)&&a.call(arguments,1);return l[p]=!0,s(function(){l[p]&&(g?d.apply(null,g):d.call(null),e.clearImmediate(p))}),p},e.clearImmediate=typeof i=="function"?i:function(d){delete l[d]}}).call(this)}).call(this,n("timers").setImmediate,n("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(n,t,e){(function(r){(function(){"use strict";function i(s){try{if(!r.localStorage)return!1}catch{return!1}var o=r.localStorage[s];return o!=null&&String(o).toLowerCase()==="true"}t.exports=function(s,o){if(i("noDeprecation"))return s;var a=!1;return function(){if(!a){if(i("throwDeprecation"))throw new Error(o);i("traceDeprecation")?console.trace(o):console.warn(o),a=!0}return s.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(n,t,e){"use strict";typeof Object.create=="function"?t.exports=function(r,i){r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(r,i){r.super_=i;var s=function(){};s.prototype=i.prototype,r.prototype=new s,r.prototype.constructor=r}},{}],526:[function(n,t,e){"use strict";t.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}},{}],527:[function(n,t,e){(function(r,i){(function(){"use strict";var s=/%[sdj%]/g;e.format=function(w){if(!S(w)){for(var C=[],k=0;k<arguments.length;k++)C.push(l(arguments[k]));return C.join(" ")}k=1;for(var T=arguments,R=T.length,F=String(w).replace(s,function(rt){if(rt==="%%")return"%";if(k>=R)return rt;switch(rt){case"%s":return String(T[k++]);case"%d":return Number(T[k++]);case"%j":try{return JSON.stringify(T[k++])}catch{return"[Circular]"}default:return rt}}),H=T[k];k<R;H=T[++k])y(H)||!U(H)?F+=" "+H:F+=" "+l(H);return F},e.deprecate=function(w,C){if(O(i.process))return function(){return e.deprecate(w,C).apply(this,arguments)};if(r.noDeprecation===!0)return w;var k=!1;return function(){if(!k){if(r.throwDeprecation)throw new Error(C);r.traceDeprecation?console.trace(C):console.error(C),k=!0}return w.apply(this,arguments)}};var o,a={};function l(w,C){var k={seen:[],stylize:h};return arguments.length>=3&&(k.depth=arguments[2]),arguments.length>=4&&(k.colors=arguments[3]),b(C)?k.showHidden=C:C&&e._extend(k,C),O(k.showHidden)&&(k.showHidden=!1),O(k.depth)&&(k.depth=2),O(k.colors)&&(k.colors=!1),O(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=c),d(k,w,k.depth)}function c(w,C){var k=l.styles[C];return k?"\x1B["+l.colors[k][0]+"m"+w+"\x1B["+l.colors[k][1]+"m":w}function h(w,C){return w}function d(w,C,k){if(w.customInspect&&C&&G(C.inspect)&&C.inspect!==e.inspect&&(!C.constructor||C.constructor.prototype!==C)){var T=C.inspect(k,w);return S(T)||(T=d(w,T,k)),T}var R=function(W,V){if(O(V))return W.stylize("undefined","undefined");if(S(V)){var it="'"+JSON.stringify(V).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return W.stylize(it,"string")}if(x(V))return W.stylize(""+V,"number");if(b(V))return W.stylize(""+V,"boolean");if(y(V))return W.stylize("null","null")}(w,C);if(R)return R;var F=Object.keys(C),H=function(W){var V={};return W.forEach(function(it,mt){V[it]=!0}),V}(F);if(w.showHidden&&(F=Object.getOwnPropertyNames(C)),q(C)&&(F.indexOf("message")>=0||F.indexOf("description")>=0))return p(C);if(F.length===0){if(G(C)){var rt=C.name?": "+C.name:"";return w.stylize("[Function"+rt+"]","special")}if(D(C))return w.stylize(RegExp.prototype.toString.call(C),"regexp");if(z(C))return w.stylize(Date.prototype.toString.call(C),"date");if(q(C))return p(C)}var ot,dt="",$=!1,ct=["{","}"];return m(C)&&($=!0,ct=["[","]"]),G(C)&&(dt=" [Function"+(C.name?": "+C.name:"")+"]"),D(C)&&(dt=" "+RegExp.prototype.toString.call(C)),z(C)&&(dt=" "+Date.prototype.toUTCString.call(C)),q(C)&&(dt=" "+p(C)),F.length!==0||$&&C.length!=0?k<0?D(C)?w.stylize(RegExp.prototype.toString.call(C),"regexp"):w.stylize("[Object]","special"):(w.seen.push(C),ot=$?function(W,V,it,mt,wt){for(var _t=[],Ct=0,Ft=V.length;Ct<Ft;++Ct)Z(V,String(Ct))?_t.push(g(W,V,it,mt,String(Ct),!0)):_t.push("");return wt.forEach(function(It){It.match(/^\d+$/)||_t.push(g(W,V,it,mt,It,!0))}),_t}(w,C,k,H,F):F.map(function(W){return g(w,C,k,H,W,$)}),w.seen.pop(),function(W,V,it){return W.reduce(function(mt,wt){return wt.indexOf(`
`)>=0,mt+wt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?it[0]+(V===""?"":V+`
 `)+" "+W.join(`,
  `)+" "+it[1]:it[0]+V+" "+W.join(", ")+" "+it[1]}(ot,dt,ct)):ct[0]+dt+ct[1]}function p(w){return"["+Error.prototype.toString.call(w)+"]"}function g(w,C,k,T,R,F){var H,rt,ot;if((ot=Object.getOwnPropertyDescriptor(C,R)||{value:C[R]}).get?rt=ot.set?w.stylize("[Getter/Setter]","special"):w.stylize("[Getter]","special"):ot.set&&(rt=w.stylize("[Setter]","special")),Z(T,R)||(H="["+R+"]"),rt||(w.seen.indexOf(ot.value)<0?(rt=y(k)?d(w,ot.value,null):d(w,ot.value,k-1)).indexOf(`
`)>-1&&(rt=F?rt.split(`
`).map(function(dt){return"  "+dt}).join(`
`).substr(2):`
`+rt.split(`
`).map(function(dt){return"   "+dt}).join(`
`)):rt=w.stylize("[Circular]","special")),O(H)){if(F&&R.match(/^\d+$/))return rt;(H=JSON.stringify(""+R)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(H=H.substr(1,H.length-2),H=w.stylize(H,"name")):(H=H.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),H=w.stylize(H,"string"))}return H+": "+rt}function m(w){return Array.isArray(w)}function b(w){return typeof w=="boolean"}function y(w){return w===null}function x(w){return typeof w=="number"}function S(w){return typeof w=="string"}function O(w){return w===void 0}function D(w){return U(w)&&tt(w)==="[object RegExp]"}function U(w){return typeof w=="object"&&w!==null}function z(w){return U(w)&&tt(w)==="[object Date]"}function q(w){return U(w)&&(tt(w)==="[object Error]"||w instanceof Error)}function G(w){return typeof w=="function"}function tt(w){return Object.prototype.toString.call(w)}function K(w){return w<10?"0"+w.toString(10):w.toString(10)}e.debuglog=function(w){if(O(o)&&(o=r.env.NODE_DEBUG||""),w=w.toUpperCase(),!a[w])if(new RegExp("\\b"+w+"\\b","i").test(o)){var C=r.pid;a[w]=function(){var k=e.format.apply(e,arguments);console.error("%s %d: %s",w,C,k)}}else a[w]=function(){};return a[w]},e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=m,e.isBoolean=b,e.isNull=y,e.isNullOrUndefined=function(w){return w==null},e.isNumber=x,e.isString=S,e.isSymbol=function(w){return typeof w=="symbol"},e.isUndefined=O,e.isRegExp=D,e.isObject=U,e.isDate=z,e.isError=q,e.isFunction=G,e.isPrimitive=function(w){return w===null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||typeof w=="symbol"||w===void 0},e.isBuffer=n("./support/isBuffer");var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var w=new Date,C=[K(w.getHours()),K(w.getMinutes()),K(w.getSeconds())].join(":");return[w.getDate(),B[w.getMonth()],C].join(" ")}function Z(w,C){return Object.prototype.hasOwnProperty.call(w,C)}e.log=function(){console.log("%s - %s",N(),e.format.apply(e,arguments))},e.inherits=n("inherits"),e._extend=function(w,C){if(!C||!U(C))return w;for(var k=Object.keys(C),T=k.length;T--;)w[k[T]]=C[k[T]];return w}}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return d.default}});var r=p(n("./v1.js")),i=p(n("./v3.js")),s=p(n("./v4.js")),o=p(n("./v5.js")),a=p(n("./nil.js")),l=p(n("./version.js")),c=p(n("./validate.js")),h=p(n("./stringify.js")),d=p(n("./parse.js"));function p(g){return g&&g.__esModule?g:{default:g}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(n,t,e){"use strict";function r(d){return 14+(d+64>>>9<<4)+1}function i(d,p){let g=(65535&d)+(65535&p);return(d>>16)+(p>>16)+(g>>16)<<16|65535&g}function s(d,p,g,m,b,y){return i((x=i(i(p,d),i(m,y)))<<(S=b)|x>>>32-S,g);var x,S}function o(d,p,g,m,b,y,x){return s(p&g|~p&m,d,p,b,y,x)}function a(d,p,g,m,b,y,x){return s(p&m|g&~m,d,p,b,y,x)}function l(d,p,g,m,b,y,x){return s(p^g^m,d,p,b,y,x)}function c(d,p,g,m,b,y,x){return s(g^(p|~m),d,p,b,y,x)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=function(d){if(typeof d=="string"){let p=unescape(encodeURIComponent(d));d=new Uint8Array(p.length);for(let g=0;g<p.length;++g)d[g]=p.charCodeAt(g)}return function(p){let g=[],m=32*p.length;for(let b=0;b<m;b+=8){let y=p[b>>5]>>>b%32&255,x=parseInt("0123456789abcdef".charAt(y>>>4&15)+"0123456789abcdef".charAt(15&y),16);g.push(x)}return g}(function(p,g){p[g>>5]|=128<<g%32,p[r(g)-1]=g;let m=1732584193,b=-271733879,y=-1732584194,x=271733878;for(let S=0;S<p.length;S+=16){let O=m,D=b,U=y,z=x;m=o(m,b,y,x,p[S],7,-680876936),x=o(x,m,b,y,p[S+1],12,-389564586),y=o(y,x,m,b,p[S+2],17,606105819),b=o(b,y,x,m,p[S+3],22,-1044525330),m=o(m,b,y,x,p[S+4],7,-176418897),x=o(x,m,b,y,p[S+5],12,1200080426),y=o(y,x,m,b,p[S+6],17,-1473231341),b=o(b,y,x,m,p[S+7],22,-45705983),m=o(m,b,y,x,p[S+8],7,1770035416),x=o(x,m,b,y,p[S+9],12,-1958414417),y=o(y,x,m,b,p[S+10],17,-42063),b=o(b,y,x,m,p[S+11],22,-1990404162),m=o(m,b,y,x,p[S+12],7,1804603682),x=o(x,m,b,y,p[S+13],12,-40341101),y=o(y,x,m,b,p[S+14],17,-1502002290),b=o(b,y,x,m,p[S+15],22,1236535329),m=a(m,b,y,x,p[S+1],5,-165796510),x=a(x,m,b,y,p[S+6],9,-1069501632),y=a(y,x,m,b,p[S+11],14,643717713),b=a(b,y,x,m,p[S],20,-373897302),m=a(m,b,y,x,p[S+5],5,-701558691),x=a(x,m,b,y,p[S+10],9,38016083),y=a(y,x,m,b,p[S+15],14,-660478335),b=a(b,y,x,m,p[S+4],20,-405537848),m=a(m,b,y,x,p[S+9],5,568446438),x=a(x,m,b,y,p[S+14],9,-1019803690),y=a(y,x,m,b,p[S+3],14,-187363961),b=a(b,y,x,m,p[S+8],20,1163531501),m=a(m,b,y,x,p[S+13],5,-1444681467),x=a(x,m,b,y,p[S+2],9,-51403784),y=a(y,x,m,b,p[S+7],14,1735328473),b=a(b,y,x,m,p[S+12],20,-1926607734),m=l(m,b,y,x,p[S+5],4,-378558),x=l(x,m,b,y,p[S+8],11,-2022574463),y=l(y,x,m,b,p[S+11],16,1839030562),b=l(b,y,x,m,p[S+14],23,-35309556),m=l(m,b,y,x,p[S+1],4,-1530992060),x=l(x,m,b,y,p[S+4],11,1272893353),y=l(y,x,m,b,p[S+7],16,-155497632),b=l(b,y,x,m,p[S+10],23,-1094730640),m=l(m,b,y,x,p[S+13],4,681279174),x=l(x,m,b,y,p[S],11,-358537222),y=l(y,x,m,b,p[S+3],16,-722521979),b=l(b,y,x,m,p[S+6],23,76029189),m=l(m,b,y,x,p[S+9],4,-640364487),x=l(x,m,b,y,p[S+12],11,-421815835),y=l(y,x,m,b,p[S+15],16,530742520),b=l(b,y,x,m,p[S+2],23,-995338651),m=c(m,b,y,x,p[S],6,-198630844),x=c(x,m,b,y,p[S+7],10,1126891415),y=c(y,x,m,b,p[S+14],15,-1416354905),b=c(b,y,x,m,p[S+5],21,-57434055),m=c(m,b,y,x,p[S+12],6,1700485571),x=c(x,m,b,y,p[S+3],10,-1894986606),y=c(y,x,m,b,p[S+10],15,-1051523),b=c(b,y,x,m,p[S+1],21,-2054922799),m=c(m,b,y,x,p[S+8],6,1873313359),x=c(x,m,b,y,p[S+15],10,-30611744),y=c(y,x,m,b,p[S+6],15,-1560198380),b=c(b,y,x,m,p[S+13],21,1309151649),m=c(m,b,y,x,p[S+4],6,-145523070),x=c(x,m,b,y,p[S+11],10,-1120210379),y=c(y,x,m,b,p[S+2],15,718787259),b=c(b,y,x,m,p[S+9],21,-343485551),m=i(m,O),b=i(b,D),y=i(y,U),x=i(x,z)}return[m,b,y,x]}(function(p){if(p.length===0)return[];let g=8*p.length,m=new Uint32Array(r(g));for(let b=0;b<g;b+=8)m[b>>5]|=(255&p[b/8])<<b%32;return m}(d),8*d.length))};e.default=h},{}],530:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("./validate.js"))&&r.__esModule?r:{default:r},s=function(o){if(!(0,i.default)(o))throw TypeError("Invalid UUID");let a,l=new Uint8Array(16);return l[0]=(a=parseInt(o.slice(0,8),16))>>>24,l[1]=a>>>16&255,l[2]=a>>>8&255,l[3]=255&a,l[4]=(a=parseInt(o.slice(9,13),16))>>>8,l[5]=255&a,l[6]=(a=parseInt(o.slice(14,18),16))>>>8,l[7]=255&a,l[8]=(a=parseInt(o.slice(19,23),16))>>>8,l[9]=255&a,l[10]=(a=parseInt(o.slice(24,36),16))/1099511627776&255,l[11]=a/4294967296&255,l[12]=a>>>24&255,l[13]=a>>>16&255,l[14]=a>>>8&255,l[15]=255&a,l};e.default=s},{"./validate.js":541}],532:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(n,t,e){"use strict";let r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!r&&(r=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)};let i=new Uint8Array(16)},{}],534:[function(n,t,e){"use strict";function r(o,a,l,c){switch(o){case 0:return a&l^~a&c;case 1:return a^l^c;case 2:return a&l^a&c^l&c;case 3:return a^l^c}}function i(o,a){return o<<a|o>>>32-a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(o){let a=[1518500249,1859775393,2400959708,3395469782],l=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){let p=unescape(encodeURIComponent(o));o=[];for(let g=0;g<p.length;++g)o.push(p.charCodeAt(g))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);let c=o.length/4+2,h=Math.ceil(c/16),d=new Array(h);for(let p=0;p<h;++p){let g=new Uint32Array(16);for(let m=0;m<16;++m)g[m]=o[64*p+4*m]<<24|o[64*p+4*m+1]<<16|o[64*p+4*m+2]<<8|o[64*p+4*m+3];d[p]=g}d[h-1][14]=8*(o.length-1)/Math.pow(2,32),d[h-1][14]=Math.floor(d[h-1][14]),d[h-1][15]=8*(o.length-1)&4294967295;for(let p=0;p<h;++p){let g=new Uint32Array(80);for(let O=0;O<16;++O)g[O]=d[p][O];for(let O=16;O<80;++O)g[O]=i(g[O-3]^g[O-8]^g[O-14]^g[O-16],1);let m=l[0],b=l[1],y=l[2],x=l[3],S=l[4];for(let O=0;O<80;++O){let D=Math.floor(O/20),U=i(m,5)+r(D,b,y,x)+S+a[D]+g[O]>>>0;S=x,x=y,y=i(b,30)>>>0,b=m,m=U}l[0]=l[0]+m>>>0,l[1]=l[1]+b>>>0,l[2]=l[2]+y>>>0,l[3]=l[3]+x>>>0,l[4]=l[4]+S>>>0}return[l[0]>>24&255,l[0]>>16&255,l[0]>>8&255,255&l[0],l[1]>>24&255,l[1]>>16&255,l[1]>>8&255,255&l[1],l[2]>>24&255,l[2]>>16&255,l[2]>>8&255,255&l[2],l[3]>>24&255,l[3]>>16&255,l[3]>>8&255,255&l[3],l[4]>>24&255,l[4]>>16&255,l[4]>>8&255,255&l[4]]};e.default=s},{}],535:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("./validate.js"))&&r.__esModule?r:{default:r};let s=[];for(let a=0;a<256;++a)s.push((a+256).toString(16).substr(1));var o=function(a){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=(s[a[l+0]]+s[a[l+1]]+s[a[l+2]]+s[a[l+3]]+"-"+s[a[l+4]]+s[a[l+5]]+"-"+s[a[l+6]]+s[a[l+7]]+"-"+s[a[l+8]]+s[a[l+9]]+"-"+s[a[l+10]]+s[a[l+11]]+s[a[l+12]]+s[a[l+13]]+s[a[l+14]]+s[a[l+15]]).toLowerCase();if(!(0,i.default)(c))throw TypeError("Stringified UUID is invalid");return c};e.default=o},{"./validate.js":541}],536:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n("./rng.js")),i=s(n("./stringify.js"));function s(d){return d&&d.__esModule?d:{default:d}}let o,a,l=0,c=0;var h=function(d,p,g){let m=p&&g||0,b=p||new Array(16),y=(d=d||{}).node||o,x=d.clockseq!==void 0?d.clockseq:a;if(y==null||x==null){let q=d.random||(d.rng||r.default)();y==null&&(y=o=[1|q[0],q[1],q[2],q[3],q[4],q[5]]),x==null&&(x=a=16383&(q[6]<<8|q[7]))}let S=d.msecs!==void 0?d.msecs:Date.now(),O=d.nsecs!==void 0?d.nsecs:c+1,D=S-l+(O-c)/1e4;if(D<0&&d.clockseq===void 0&&(x=x+1&16383),(D<0||S>l)&&d.nsecs===void 0&&(O=0),O>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=S,c=O,a=x,S+=122192928e5;let U=(1e4*(268435455&S)+O)%4294967296;b[m++]=U>>>24&255,b[m++]=U>>>16&255,b[m++]=U>>>8&255,b[m++]=255&U;let z=S/4294967296*1e4&268435455;b[m++]=z>>>8&255,b[m++]=255&z,b[m++]=z>>>24&15|16,b[m++]=z>>>16&255,b[m++]=x>>>8|128,b[m++]=255&x;for(let q=0;q<6;++q)b[m+q]=y[q];return p||(0,i.default)(b)};e.default=h},{"./rng.js":533,"./stringify.js":535}],537:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n("./v35.js")),i=s(n("./md5.js"));function s(a){return a&&a.__esModule?a:{default:a}}var o=(0,r.default)("v3",48,i.default);e.default=o},{"./md5.js":529,"./v35.js":538}],538:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(l,c,h){function d(p,g,m,b){if(typeof p=="string"&&(p=function(x){x=unescape(encodeURIComponent(x));let S=[];for(let O=0;O<x.length;++O)S.push(x.charCodeAt(O));return S}(p)),typeof g=="string"&&(g=(0,i.default)(g)),g.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let y=new Uint8Array(16+p.length);if(y.set(g),y.set(p,g.length),y=h(y),y[6]=15&y[6]|c,y[8]=63&y[8]|128,m){b=b||0;for(let x=0;x<16;++x)m[b+x]=y[x];return m}return(0,r.default)(y)}try{d.name=l}catch{}return d.DNS=o,d.URL=a,d},e.URL=e.DNS=void 0;var r=s(n("./stringify.js")),i=s(n("./parse.js"));function s(l){return l&&l.__esModule?l:{default:l}}let o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";e.DNS=o;let a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";e.URL=a},{"./parse.js":531,"./stringify.js":535}],539:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n("./rng.js")),i=s(n("./stringify.js"));function s(a){return a&&a.__esModule?a:{default:a}}var o=function(a,l,c){let h=(a=a||{}).random||(a.rng||r.default)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,l){c=c||0;for(let d=0;d<16;++d)l[c+d]=h[d];return l}return(0,i.default)(h)};e.default=o},{"./rng.js":533,"./stringify.js":535}],540:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n("./v35.js")),i=s(n("./sha1.js"));function s(a){return a&&a.__esModule?a:{default:a}}var o=(0,r.default)("v5",80,i.default);e.default=o},{"./sha1.js":534,"./v35.js":538}],541:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("./regex.js"))&&r.__esModule?r:{default:r},s=function(o){return typeof o=="string"&&i.default.test(o)};e.default=s},{"./regex.js":532}],542:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("./validate.js"))&&r.__esModule?r:{default:r},s=function(o){if(!(0,i.default)(o))throw TypeError("Invalid UUID");return parseInt(o.substr(14,1),16)};e.default=s},{"./validate.js":541}],543:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHAR=`	
\r -\uD7FF\uE000-\uFFFD\u{10000}-\u{10FFFF}`,e.S=` 	\r
`,e.NAME_START_CHAR=":A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u{10000}-\u{EFFFF}",e.NAME_CHAR="-"+e.NAME_START_CHAR+".0-9\xB7\u0300-\u036F\u203F-\u2040",e.CHAR_RE=new RegExp("^["+e.CHAR+"]$","u"),e.S_RE=new RegExp("^["+e.S+"]+$","u"),e.NAME_START_CHAR_RE=new RegExp("^["+e.NAME_START_CHAR+"]$","u"),e.NAME_CHAR_RE=new RegExp("^["+e.NAME_CHAR+"]$","u"),e.NAME_RE=new RegExp("^["+e.NAME_START_CHAR+"]["+e.NAME_CHAR+"]*$","u"),e.NMTOKEN_RE=new RegExp("^["+e.NAME_CHAR+"]+$","u");function r(i){return i>=65&&i<=90||i>=97&&i<=122||i===58||i===95||i===8204||i===8205||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=767||i>=880&&i<=893||i>=895&&i<=8191||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}e.S_LIST=[32,10,13,9],e.isChar=function(i){return i>=32&&i<=55295||i===10||i===13||i===9||i>=57344&&i<=65533||i>=65536&&i<=1114111},e.isS=function(i){return i===32||i===10||i===13||i===9},e.isNameStartChar=r,e.isNameChar=function(i){return r(i)||i>=48&&i<=57||i===45||i===46||i===183||i>=768&&i<=879||i>=8255&&i<=8256}},{}],544:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHAR="-\uD7FF\uE000-\uFFFD\u{10000}-\u{10FFFF}",e.RESTRICTED_CHAR="-\b\v\f-\x7F-\x84\x86-\x9F",e.S=` 	\r
`,e.NAME_START_CHAR=":A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u{10000}-\u{EFFFF}",e.NAME_CHAR="-"+e.NAME_START_CHAR+".0-9\xB7\u0300-\u036F\u203F-\u2040",e.CHAR_RE=new RegExp("^["+e.CHAR+"]$","u"),e.RESTRICTED_CHAR_RE=new RegExp("^["+e.RESTRICTED_CHAR+"]$","u"),e.S_RE=new RegExp("^["+e.S+"]+$","u"),e.NAME_START_CHAR_RE=new RegExp("^["+e.NAME_START_CHAR+"]$","u"),e.NAME_CHAR_RE=new RegExp("^["+e.NAME_CHAR+"]$","u"),e.NAME_RE=new RegExp("^["+e.NAME_START_CHAR+"]["+e.NAME_CHAR+"]*$","u"),e.NMTOKEN_RE=new RegExp("^["+e.NAME_CHAR+"]+$","u");function r(i){return i>=65&&i<=90||i>=97&&i<=122||i===58||i===95||i===8204||i===8205||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=767||i>=880&&i<=893||i>=895&&i<=8191||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}e.S_LIST=[32,10,13,9],e.isChar=function(i){return i>=1&&i<=55295||i>=57344&&i<=65533||i>=65536&&i<=1114111},e.isRestrictedChar=function(i){return i>=1&&i<=8||i===11||i===12||i>=14&&i<=31||i>=127&&i<=132||i>=134&&i<=159},e.isCharAndNotRestricted=function(i){return i===9||i===10||i===13||i>31&&i<127||i===133||i>159&&i<=55295||i>=57344&&i<=65533||i>=65536&&i<=1114111},e.isS=function(i){return i===32||i===10||i===13||i===9},e.isNameStartChar=r,e.isNameChar=function(i){return r(i)||i>=48&&i<=57||i===45||i===46||i===183||i>=768&&i<=879||i>=8255&&i<=8256}},{}],545:[function(n,t,e){"use strict";function r(i){return i>=65&&i<=90||i===95||i>=97&&i<=122||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=767||i>=880&&i<=893||i>=895&&i<=8191||i>=8204&&i<=8205||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}Object.defineProperty(e,"__esModule",{value:!0}),e.NC_NAME_START_CHAR="A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u{10000}-\u{EFFFF}",e.NC_NAME_CHAR="-"+e.NC_NAME_START_CHAR+".0-9\xB7\u0300-\u036F\u203F-\u2040",e.NC_NAME_START_CHAR_RE=new RegExp("^["+e.NC_NAME_START_CHAR+"]$","u"),e.NC_NAME_CHAR_RE=new RegExp("^["+e.NC_NAME_CHAR+"]$","u"),e.NC_NAME_RE=new RegExp("^["+e.NC_NAME_START_CHAR+"]["+e.NC_NAME_CHAR+"]*$","u"),e.isNCNameStartChar=r,e.isNCNameChar=function(i){return r(i)||i===45||i===46||i>=48&&i<=57||i===183||i>=768&&i<=879||i>=8255&&i<=8256}},{}]},{},[15])(15)})});var Di=Mr(Jn()),RH=Mr(Op()),OH=Mr(Ap());var Es=Jn();Es.Control.Coordinates=Es.Control.extend({options:{position:"bottomleft",latitudeText:"lat.",longitudeText:"lon.",promptText:"Press Ctrl+C to copy coordinates",precision:4},initialize:function(n){Es.Control.prototype.initialize.call(this,n)},onAdd:function(n){var t="leaflet-control-coordinates",e=this,r=this._container=Es.DomUtil.create("div",t);return this.visible=!1,Es.DomUtil.addClass(r,"hidden"),Es.DomEvent.disableClickPropagation(r),this._addText(r,n),Es.DomEvent.addListener(r,"click",function(){var i=Es.DomUtil.get(e._lat),s=Es.DomUtil.get(e._lng),o=this.options.latitudeText.length+1,a=this.options.longitudeText.length+1,l=i.textContent.indexOf(this.options.latitudeText)+o,c=s.textContent.indexOf(this.options.longitudeText)+a,h=i.textContent.substr(l),d=s.textContent.substr(c);window.prompt(this.options.promptText,h+" "+d)},this),r},_addText:function(n,t){return this._lat=Es.DomUtil.create("span","leaflet-control-coordinates-lat",n),this._lng=Es.DomUtil.create("span","leaflet-control-coordinates-lng",n),n},setCoordinates:function(n){this.visible||Es.DomUtil.removeClass(this._container,"hidden"),n.latlng&&(Es.DomUtil.get(this._lat).innerHTML="<strong>"+this.options.latitudeText+":</strong> "+n.latlng.lat.toFixed(this.options.precision).toString(),Es.DomUtil.get(this._lng).innerHTML="<strong>"+this.options.longitudeText+":</strong> "+n.latlng.lng.toFixed(this.options.precision).toString())}});(()=>{var n={9705:(r,i,s)=>{"use strict";var o=s(1540);function a(l){var c=[1/0,1/0,-1/0,-1/0];return o.coordEach(l,function(h){c[0]>h[0]&&(c[0]=h[0]),c[1]>h[1]&&(c[1]=h[1]),c[2]<h[0]&&(c[2]=h[0]),c[3]<h[1]&&(c[3]=h[1])}),c}a.default=a,i.Z=a},4102:(r,i)=>{"use strict";function s(x,S,O){O===void 0&&(O={});var D={type:"Feature"};return(O.id===0||O.id)&&(D.id=O.id),O.bbox&&(D.bbox=O.bbox),D.properties=S||{},D.geometry=x,D}function o(x,S,O){if(O===void 0&&(O={}),!x)throw new Error("coordinates is required");if(!Array.isArray(x))throw new Error("coordinates must be an Array");if(x.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!y(x[0])||!y(x[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:x},S,O)}function a(x,S,O){O===void 0&&(O={});for(var D=0,U=x;D<U.length;D++){var z=U[D];if(z.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var q=0;q<z[z.length-1].length;q++)if(z[z.length-1][q]!==z[0][q])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:x},S,O)}function l(x,S,O){if(O===void 0&&(O={}),x.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:x},S,O)}function c(x,S){S===void 0&&(S={});var O={type:"FeatureCollection"};return S.id&&(O.id=S.id),S.bbox&&(O.bbox=S.bbox),O.features=x,O}function h(x,S,O){return O===void 0&&(O={}),s({type:"MultiLineString",coordinates:x},S,O)}function d(x,S,O){return O===void 0&&(O={}),s({type:"MultiPoint",coordinates:x},S,O)}function p(x,S,O){return O===void 0&&(O={}),s({type:"MultiPolygon",coordinates:x},S,O)}function g(x,S){S===void 0&&(S="kilometers");var O=i.factors[S];if(!O)throw new Error(S+" units is invalid");return x*O}function m(x,S){S===void 0&&(S="kilometers");var O=i.factors[S];if(!O)throw new Error(S+" units is invalid");return x/O}function b(x){return 180*(x%(2*Math.PI))/Math.PI}function y(x){return!isNaN(x)&&x!==null&&!Array.isArray(x)}Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:100*i.earthRadius,centimetres:100*i.earthRadius,degrees:i.earthRadius/111325,feet:3.28084*i.earthRadius,inches:39.37*i.earthRadius,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:1e3*i.earthRadius,millimetres:1e3*i.earthRadius,nauticalmiles:i.earthRadius/1852,radians:1,yards:1.0936*i.earthRadius},i.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},i.feature=s,i.geometry=function(x,S,O){switch(O===void 0&&(O={}),x){case"Point":return o(S).geometry;case"LineString":return l(S).geometry;case"Polygon":return a(S).geometry;case"MultiPoint":return d(S).geometry;case"MultiLineString":return h(S).geometry;case"MultiPolygon":return p(S).geometry;default:throw new Error(x+" is invalid")}},i.point=o,i.points=function(x,S,O){return O===void 0&&(O={}),c(x.map(function(D){return o(D,S)}),O)},i.polygon=a,i.polygons=function(x,S,O){return O===void 0&&(O={}),c(x.map(function(D){return a(D,S)}),O)},i.lineString=l,i.lineStrings=function(x,S,O){return O===void 0&&(O={}),c(x.map(function(D){return l(D,S)}),O)},i.featureCollection=c,i.multiLineString=h,i.multiPoint=d,i.multiPolygon=p,i.geometryCollection=function(x,S,O){return O===void 0&&(O={}),s({type:"GeometryCollection",geometries:x},S,O)},i.round=function(x,S){if(S===void 0&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var O=Math.pow(10,S||0);return Math.round(x*O)/O},i.radiansToLength=g,i.lengthToRadians=m,i.lengthToDegrees=function(x,S){return b(m(x,S))},i.bearingToAzimuth=function(x){var S=x%360;return S<0&&(S+=360),S},i.radiansToDegrees=b,i.degreesToRadians=function(x){return x%360*Math.PI/180},i.convertLength=function(x,S,O){if(S===void 0&&(S="kilometers"),O===void 0&&(O="kilometers"),!(x>=0))throw new Error("length must be a positive number");return g(m(x,S),O)},i.convertArea=function(x,S,O){if(S===void 0&&(S="meters"),O===void 0&&(O="kilometers"),!(x>=0))throw new Error("area must be a positive number");var D=i.areaFactors[S];if(!D)throw new Error("invalid original units");var U=i.areaFactors[O];if(!U)throw new Error("invalid final units");return x/D*U},i.isNumber=y,i.isObject=function(x){return!!x&&x.constructor===Object},i.validateBBox=function(x){if(!x)throw new Error("bbox is required");if(!Array.isArray(x))throw new Error("bbox must be an Array");if(x.length!==4&&x.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");x.forEach(function(S){if(!y(S))throw new Error("bbox must only contain numbers")})},i.validateId=function(x){if(!x)throw new Error("id is required");if(["string","number"].indexOf(typeof x)===-1)throw new Error("id must be a number or a string")}},1540:(r,i,s)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=s(4102);function a(m,b,y){if(m!==null)for(var x,S,O,D,U,z,q,G,tt=0,K=0,B=m.type,N=B==="FeatureCollection",Z=B==="Feature",w=N?m.features.length:1,C=0;C<w;C++){U=(G=!!(q=N?m.features[C].geometry:Z?m.geometry:m)&&q.type==="GeometryCollection")?q.geometries.length:1;for(var k=0;k<U;k++){var T=0,R=0;if((D=G?q.geometries[k]:q)!==null){z=D.coordinates;var F=D.type;switch(tt=!y||F!=="Polygon"&&F!=="MultiPolygon"?0:1,F){case null:break;case"Point":if(b(z,K,C,T,R)===!1)return!1;K++,T++;break;case"LineString":case"MultiPoint":for(x=0;x<z.length;x++){if(b(z[x],K,C,T,R)===!1)return!1;K++,F==="MultiPoint"&&T++}F==="LineString"&&T++;break;case"Polygon":case"MultiLineString":for(x=0;x<z.length;x++){for(S=0;S<z[x].length-tt;S++){if(b(z[x][S],K,C,T,R)===!1)return!1;K++}F==="MultiLineString"&&T++,F==="Polygon"&&R++}F==="Polygon"&&T++;break;case"MultiPolygon":for(x=0;x<z.length;x++){for(R=0,S=0;S<z[x].length;S++){for(O=0;O<z[x][S].length-tt;O++){if(b(z[x][S][O],K,C,T,R)===!1)return!1;K++}R++}T++}break;case"GeometryCollection":for(x=0;x<D.geometries.length;x++)if(a(D.geometries[x],b,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(m,b){var y;switch(m.type){case"FeatureCollection":for(y=0;y<m.features.length&&b(m.features[y].properties,y)!==!1;y++);break;case"Feature":b(m.properties,0)}}function c(m,b){if(m.type==="Feature")b(m,0);else if(m.type==="FeatureCollection")for(var y=0;y<m.features.length&&b(m.features[y],y)!==!1;y++);}function h(m,b){var y,x,S,O,D,U,z,q,G,tt,K=0,B=m.type==="FeatureCollection",N=m.type==="Feature",Z=B?m.features.length:1;for(y=0;y<Z;y++){for(U=B?m.features[y].geometry:N?m.geometry:m,q=B?m.features[y].properties:N?m.properties:{},G=B?m.features[y].bbox:N?m.bbox:void 0,tt=B?m.features[y].id:N?m.id:void 0,D=(z=!!U&&U.type==="GeometryCollection")?U.geometries.length:1,S=0;S<D;S++)if((O=z?U.geometries[S]:U)!==null)switch(O.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(b(O,K,q,G,tt)===!1)return!1;break;case"GeometryCollection":for(x=0;x<O.geometries.length;x++)if(b(O.geometries[x],K,q,G,tt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(b(null,K,q,G,tt)===!1)return!1;K++}}function d(m,b){h(m,function(y,x,S,O,D){var U,z=y===null?null:y.type;switch(z){case null:case"Point":case"LineString":case"Polygon":return b(o.feature(y,S,{bbox:O,id:D}),x,0)!==!1&&void 0}switch(z){case"MultiPoint":U="Point";break;case"MultiLineString":U="LineString";break;case"MultiPolygon":U="Polygon"}for(var q=0;q<y.coordinates.length;q++){var G={type:U,coordinates:y.coordinates[q]};if(b(o.feature(G,S),x,q)===!1)return!1}})}function p(m,b){d(m,function(y,x,S){var O=0;if(y.geometry){var D=y.geometry.type;if(D!=="Point"&&D!=="MultiPoint"){var U,z=0,q=0,G=0;return a(y,function(tt,K,B,N,Z){if(U===void 0||x>z||N>q||Z>G)return U=tt,z=x,q=N,G=Z,void(O=0);var w=o.lineString([U,tt],y.properties);if(b(w,x,S,Z,O)===!1)return!1;O++,U=tt})!==!1&&void 0}}})}function g(m,b){if(!m)throw new Error("geojson is required");d(m,function(y,x,S){if(y.geometry!==null){var O=y.geometry.type,D=y.geometry.coordinates;switch(O){case"LineString":if(b(y,x,S,0,0)===!1)return!1;break;case"Polygon":for(var U=0;U<D.length;U++)if(b(o.lineString(D[U],y.properties),x,S,U)===!1)return!1}}})}i.coordAll=function(m){var b=[];return a(m,function(y){b.push(y)}),b},i.coordEach=a,i.coordReduce=function(m,b,y,x){var S=y;return a(m,function(O,D,U,z,q){S=D===0&&y===void 0?O:b(S,O,D,U,z,q)},x),S},i.featureEach=c,i.featureReduce=function(m,b,y){var x=y;return c(m,function(S,O){x=O===0&&y===void 0?S:b(x,S,O)}),x},i.findPoint=function(m,b){if(b=b||{},!o.isObject(b))throw new Error("options is invalid");var y,x=b.featureIndex||0,S=b.multiFeatureIndex||0,O=b.geometryIndex||0,D=b.coordIndex||0,U=b.properties;switch(m.type){case"FeatureCollection":x<0&&(x=m.features.length+x),U=U||m.features[x].properties,y=m.features[x].geometry;break;case"Feature":U=U||m.properties,y=m.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=m;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var z=y.coordinates;switch(y.type){case"Point":return o.point(z,U,b);case"MultiPoint":return S<0&&(S=z.length+S),o.point(z[S],U,b);case"LineString":return D<0&&(D=z.length+D),o.point(z[D],U,b);case"Polygon":return O<0&&(O=z.length+O),D<0&&(D=z[O].length+D),o.point(z[O][D],U,b);case"MultiLineString":return S<0&&(S=z.length+S),D<0&&(D=z[S].length+D),o.point(z[S][D],U,b);case"MultiPolygon":return S<0&&(S=z.length+S),O<0&&(O=z[S].length+O),D<0&&(D=z[S][O].length-D),o.point(z[S][O][D],U,b)}throw new Error("geojson is invalid")},i.findSegment=function(m,b){if(b=b||{},!o.isObject(b))throw new Error("options is invalid");var y,x=b.featureIndex||0,S=b.multiFeatureIndex||0,O=b.geometryIndex||0,D=b.segmentIndex||0,U=b.properties;switch(m.type){case"FeatureCollection":x<0&&(x=m.features.length+x),U=U||m.features[x].properties,y=m.features[x].geometry;break;case"Feature":U=U||m.properties,y=m.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=m;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var z=y.coordinates;switch(y.type){case"Point":case"MultiPoint":return null;case"LineString":return D<0&&(D=z.length+D-1),o.lineString([z[D],z[D+1]],U,b);case"Polygon":return O<0&&(O=z.length+O),D<0&&(D=z[O].length+D-1),o.lineString([z[O][D],z[O][D+1]],U,b);case"MultiLineString":return S<0&&(S=z.length+S),D<0&&(D=z[S].length+D-1),o.lineString([z[S][D],z[S][D+1]],U,b);case"MultiPolygon":return S<0&&(S=z.length+S),O<0&&(O=z[S].length+O),D<0&&(D=z[S][O].length-D-1),o.lineString([z[S][O][D],z[S][O][D+1]],U,b)}throw new Error("geojson is invalid")},i.flattenEach=d,i.flattenReduce=function(m,b,y){var x=y;return d(m,function(S,O,D){x=O===0&&D===0&&y===void 0?S:b(x,S,O,D)}),x},i.geomEach=h,i.geomReduce=function(m,b,y){var x=y;return h(m,function(S,O,D,U,z){x=O===0&&y===void 0?S:b(x,S,O,D,U,z)}),x},i.lineEach=g,i.lineReduce=function(m,b,y){var x=y;return g(m,function(S,O,D,U){x=O===0&&y===void 0?S:b(x,S,O,D,U)}),x},i.propEach=l,i.propReduce=function(m,b,y){var x=y;return l(m,function(S,O){x=O===0&&y===void 0?S:b(x,S,O)}),x},i.segmentEach=p,i.segmentReduce=function(m,b,y){var x=y,S=!1;return p(m,function(O,D,U,z,q){x=S===!1&&y===void 0?O:b(x,O,D,U,z,q),S=!0}),x}},5975:(r,i,s)=>{"use strict";s(7107);var o=s(2492),a=s.n(o);let l=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),c=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xF6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xF6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xFCpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"L\xE4nge","segmentLength":"Segment L\xE4nge","area":"Fl\xE4che","radius":"Radius","perimeter":"Umfang","height":"H\xF6he","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),h=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),d=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),p=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri","pinningButton":"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103"}}'),g=JSON.parse('{"tooltips":{"placeMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442","continueLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435","finishLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F","finishPoly":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","finishRect":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","startCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","cancel":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C","removeLastVertex":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D","drawLineButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E","drawCircleButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439","cutButton":"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439","deleteButton":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439","drawCircleMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C","pinningButton":"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435"}}'),m=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xE9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del c\xEDrculo","finishCircle":"Presiona para finalizar el c\xEDrculo","placeCircleMarker":"Presiona para colocar un marcador de c\xEDrculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xEDgono","drawLineButton":"Dibujar L\xEDnea","drawCircleButton":"Dibujar C\xEDrculo","drawRectButton":"Dibujar Rect\xE1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de C\xEDrculo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xE9rtices","pinningButton":"Fijar juntos los v\xE9rtices compartidos"}}'),b=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xEBindigen","finishPoly":"Klik op het eerst punt om te be\xEBindigen","finishRect":"Klik om te be\xEBindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xEBindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),y=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xE0 dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xC9diter des calques","dragButton":"D\xE9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"\xC9pingler ensemble les sommets partag\xE9s","rotateButton":"Tourner des calques"}}`),x=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0","firstVertex":"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9","continueLine":"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236","finishLine":"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210","finishPoly":"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210","finishRect":"\u5355\u51FB\u5B8C\u6210","startCircle":"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3","finishCircle":"\u5355\u51FB\u5B8C\u6210\u5706\u5F62","placeCircleMarker":"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},"buttonTitles":{"drawMarkerButton":"\u7ED8\u5236\u6807\u8BB0","drawPolyButton":"\u7ED8\u5236\u591A\u8FB9\u5F62","drawLineButton":"\u7ED8\u5236\u7EBF\u6BB5","drawCircleButton":"\u7ED8\u5236\u5706\u5F62","drawRectButton":"\u7ED8\u5236\u957F\u65B9\u5F62","editButton":"\u7F16\u8F91\u56FE\u5C42","dragButton":"\u62D6\u62FD\u56FE\u5C42","cutButton":"\u526A\u5207\u56FE\u5C42","deleteButton":"\u5220\u9664\u56FE\u5C42","drawCircleMarkerButton":"\u753B\u5706\u5708\u6807\u8BB0","snappingButton":"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9","pinningButton":"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),S=JSON.parse('{"tooltips":{"placeMarker":"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18","firstVertex":"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE","continueLine":"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD","finishLine":"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210","finishPoly":"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210","finishRect":"\u55AE\u64CA\u5B8C\u6210","startCircle":"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3","finishCircle":"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62","placeCircleMarker":"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},"buttonTitles":{"drawMarkerButton":"\u653E\u7F6E\u6A19\u8A18","drawPolyButton":"\u7E6A\u88FD\u591A\u908A\u5F62","drawLineButton":"\u7E6A\u88FD\u7DDA\u6BB5","drawCircleButton":"\u7E6A\u88FD\u5713\u5F62","drawRectButton":"\u7E6A\u88FD\u65B9\u5F62","editButton":"\u7DE8\u8F2F\u5716\u5F62","dragButton":"\u79FB\u52D5\u5716\u5F62","cutButton":"\u88C1\u5207\u5716\u5F62","deleteButton":"\u522A\u9664\u5716\u5F62","drawCircleMarkerButton":"\u756B\u5713\u5708\u6A19\u8A18","snappingButton":"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE","pinningButton":"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),O={en:l,de:c,it:h,id:d,ro:p,ru:g,es:m,nl:b,fr:y,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xE9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xEDgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xEDrculo","finishCircle":"Clique para fechar o c\xEDrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xEDgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xEDrculo","drawRectButton":"Desenhar um ret\xE2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xEDrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xE9rtices","pinningButton":"V\xE9rtices compartilhados de pinos juntos"}}'),zh:x,zh_tw:S,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi\u0107 znacznik","firstVertex":"Kliknij, aby ustawi\u0107 pierwszy punkt","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny punkt, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy punkt, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby ustawi\u0107 \u015Brodek ko\u0142a","finishCircle":"Kliknij, aby zako\u0144czy\u0107 rysowanie ko\u0142a","placeCircleMarker":"Kliknij, aby ustawi\u0107 okr\u0105g\u0142y znacznik"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielok\u0105t","drawLineButton":"Narysuj \u015Bcie\u017Ck\u0119","drawCircleButton":"Narysuj ko\u0142o","drawRectButton":"Narysuj prostok\u0105t","editButton":"Edytuj","dragButton":"Przesu\u0144","cutButton":"Wytnij","deleteButton":"Usu\u0144","drawCircleMarkerButton":"Narysuj okr\u0105g\u0142y znacznik","snappingButton":"Snap przeci\u0105gni\u0119ty marker na inne warstwy i wierzcho\u0142ki","pinningButton":"Sworze\u0144 wsp\xF3lne wierzcho\u0142ki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xF6r att placera mark\xF6r","firstVertex":"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet","continueLine":"Klicka f\xF6r att forts\xE4tta rita","finishLine":"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra","finishPoly":"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra","finishRect":"Klicka f\xF6r att slutf\xF6ra","startCircle":"Klicka f\xF6r att placera cirkelns centrum","finishCircle":"Klicka f\xF6r att slutf\xF6ra cirkeln","placeCircleMarker":"Klicka f\xF6r att placera cirkelmark\xF6r"},"actions":{"finish":"Slutf\xF6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xF6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xF6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xF6r","snappingButton":"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn","pinningButton":"F\xE4st delade h\xF6rn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","firstVertex":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF","continueLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5","finishLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF","finishPoly":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","finishRect":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","startCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","finishCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF","placeCircleMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},"actions":{"finish":"\u03A4\u03AD\u03BB\u03BF\u03C2","cancel":"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7","removeLastVertex":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},"buttonTitles":{"drawMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","drawPolyButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5","drawLineButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2","drawCircleButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","drawRectButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5","editButton":"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","dragButton":"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","cutButton":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","deleteButton":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","drawCircleMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","snappingButton":"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2","pinningButton":"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez","continueLine":"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez","finishLine":"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra","finishPoly":"A befejez\xE9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xE9shez","startCircle":"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez","finishCircle":"Kattintson a k\xF6r befejez\xE9s\xE9hez","placeCircleMarker":"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},"actions":{"finish":"Befejez\xE9s","cancel":"M\xE9gse","removeLastVertex":"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xF6l\u0151 rajzol\xE1sa","drawPolyButton":"Poligon rajzol\xE1sa","drawLineButton":"Vonal rajzol\xE1sa","drawCircleButton":"K\xF6r rajzol\xE1sa","drawRectButton":"N\xE9gyzet rajzol\xE1sa","editButton":"Elemek szerkeszt\xE9se","dragButton":"Elemek mozgat\xE1sa","cutButton":"Elemek v\xE1g\xE1sa","deleteButton":"Elemek t\xF6rl\xE9se","drawCircleMarkerButton":"K\xF6r jel\xF6l\u0151 rajzol\xE1sa","snappingButton":"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz","pinningButton":"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xF8r","firstVertex":"Tryk for at placere det f\xF8rste punkt","continueLine":"Tryk for at forts\xE6tte linjen","finishLine":"Tryk p\xE5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xE5 det f\xF8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xF8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xF8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xE6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xF8r","snappingButton":"Fastg\xF8r trukket mark\xF8r til andre elementer","pinningButton":"Sammenl\xE6g delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xE5 plassere punkt","firstVertex":"Klikk for \xE5 plassere f\xF8rste punkt","continueLine":"Klikk for \xE5 tegne videre","finishLine":"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re","finishPoly":"Klikk f\xF8rste punkt for \xE5 fullf\xF8re","finishRect":"Klikk for \xE5 fullf\xF8re","startCircle":"Klikk for \xE5 sette sirkel midtpunkt","finishCircle":"Klikk for \xE5 fullf\xF8re sirkel","placeCircleMarker":"Klikk for \xE5 plassere sirkel"},"actions":{"finish":"Fullf\xF8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646","firstVertex":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633","continueLine":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishPoly":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishRect":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","startCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647","finishCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","placeCircleMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","placeText":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0646\u0648\u0634\u062A\u0646 \u0645\u062A\u0646"},"actions":{"finish":"\u067E\u0627\u06CC\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062F\u0631\u062C \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC","drawLineButton":"\u0631\u0633\u0645 \u062E\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC","editButton":"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","dragButton":"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","deleteButton":"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F","rotateButton":"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647","drawTextButton":"\u0631\u0633\u0645 \u0645\u062A\u0646"}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443","continueLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438","finishLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430","finishCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E","placeCircleMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},"buttonTitles":{"drawMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D","drawLineButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443","drawCircleButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E","drawRectButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D","pinningButton":"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C"}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","continueLine":"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xE7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xE7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xF6\u015Feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xC7izim \u0130\u015Faret\xE7isi","drawPolyButton":"\xC7okgenler \xE7iz","drawLineButton":"\xC7oklu \xE7izgi \xE7iz","drawCircleButton":"\xC7ember \xE7iz","drawRectButton":"Dikd\xF6rtgen \xE7iz","editButton":"Katmanlar\u0131 d\xFCzenle","dragButton":"Katmanlar\u0131 s\xFCr\xFCkle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015Faret\xE7isi \xE7iz","snappingButton":"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r","pinningButton":"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku","firstVertex":"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt","continueLine":"Kliknut\xEDm pokra\u010Dujte v kreslen\xED","finishLine":"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED","finishPoly":"Vyberte prvn\xED bod pro dokon\u010Den\xED","finishRect":"Klikn\u011Bte pro dokon\u010Den\xED","startCircle":"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xEDm nastavte polom\u011Br"},"actions":{"finish":"Dokon\u010Dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xED akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010Dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xE9ln\xEDk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010Dku","snappingButton":"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm","pinningButton":"Spojit spole\u010Dn\xE9 body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","firstVertex":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u6700\u521D\u306E\u9802\u70B9\u3092\u914D\u7F6E","continueLine":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u63CF\u753B\u3092\u7D9A\u3051\u308B","finishLine":"\u4EFB\u610F\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishPoly":"\u6700\u521D\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishRect":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","startCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u4E2D\u5FC3\u3092\u914D\u7F6E","finishCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u63CF\u753B\u3092\u7D42\u4E86","placeCircleMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","placeText":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30C6\u30AD\u30B9\u30C8\u3092\u914D\u7F6E"},"actions":{"finish":"\u7D42\u4E86","cancel":"\u30AD\u30E3\u30F3\u30BB\u30EB","removeLastVertex":"\u6700\u5F8C\u306E\u9802\u70B9\u3092\u524A\u9664"},"buttonTitles":{"drawMarkerButton":"\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","drawPolyButton":"\u30DD\u30EA\u30B4\u30F3\u3092\u63CF\u753B","drawLineButton":"\u6298\u308C\u7DDA\u3092\u63CF\u753B","drawCircleButton":"\u5186\u3092\u63CF\u753B","drawRectButton":"\u77E9\u5F62\u3092\u63CF\u753B","editButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u7DE8\u96C6","dragButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u30C9\u30E9\u30C3\u30B0","cutButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u5207\u308A\u53D6\u308A","deleteButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u524A\u9664","drawCircleMarkerButton":"\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","snappingButton":"\u30C9\u30E9\u30C3\u30B0\u3057\u305F\u30DE\u30FC\u30AB\u30FC\u3092\u4ED6\u306E\u30EC\u30A4\u30E4\u30FC\u3084\u9802\u70B9\u306B\u30B9\u30CA\u30C3\u30D7\u3059\u308B","pinningButton":"\u5171\u6709\u3059\u308B\u9802\u70B9\u3092\u540C\u6642\u306B\u52D5\u304B\u3059","rotateButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u56DE\u8EE2","drawTextButton":"\u30C6\u30AD\u30B9\u30C8\u3092\u63CF\u753B"}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimm\xE4isen osuuden","continueLine":"Klikkaa jatkaaksesi piirt\xE4mist\xE4","finishLine":"Klikkaa olemassa olevaa merkki\xE4 lopettaaksesi","finishPoly":"Klikkaa ensimm\xE4ist\xE4 merkki\xE4 lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyr\xE4n keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyr\xE4n","placeCircleMarker":"Klikkaa asettaaksesi ympyr\xE4merkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirr\xE4 merkkej\xE4","drawPolyButton":"Piirr\xE4 monikulmioita","drawLineButton":"Piirr\xE4 viivoja","drawCircleButton":"Piirr\xE4 ympyr\xE4","drawRectButton":"Piirr\xE4 neliskulmioita","editButton":"Muokkaa","dragButton":"Siirr\xE4","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirr\xE4 ympyr\xE4merkki","snappingButton":"Kiinnit\xE4 siirrett\xE4v\xE4 merkki toisiin muotoihin","pinningButton":"Kiinnit\xE4 jaetut muodot yhteen","rotateButton":"K\xE4\xE4nn\xE4","drawTextButton":"Piirr\xE4 teksti\xE4"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"\uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","firstVertex":"\uCCAB\uBC88\uC9F8 \uAF2D\uC9C0\uC810 \uC704\uCE58\uC744 \uD074\uB9AD\uD558\uC138\uC694","continueLine":"\uACC4\uC18D \uADF8\uB9AC\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","finishLine":"\uB05D\uB0B4\uB824\uBA74 \uAE30\uC874 \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishPoly":"\uB05D\uB0B4\uB824\uBA74 \uCC98\uC74C \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishRect":"\uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","startCircle":"\uC6D0\uC758 \uC911\uC2EC\uC774 \uB420 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishCircle":"\uC6D0\uC744 \uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","placeCircleMarker":"\uC6D0 \uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","placeText":"\uD14D\uC2A4\uD2B8 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694"},"actions":{"finish":"\uB05D\uB0B4\uAE30","cancel":"\uCDE8\uC18C","removeLastVertex":"\uB9C8\uC9C0\uB9C9 \uAF2D\uC9C0\uC810 \uC81C\uAC70"},"buttonTitles":{"drawMarkerButton":"\uB9C8\uCEE4 \uADF8\uB9AC\uAE30","drawPolyButton":"\uB2E4\uAC01\uD615 \uADF8\uB9AC\uAE30","drawLineButton":"\uB2E4\uAC01\uC120 \uADF8\uB9AC\uAE30","drawCircleButton":"\uC6D0 \uADF8\uB9AC\uAE30","drawRectButton":"\uC9C1\uC0AC\uAC01\uD615 \uADF8\uB9AC\uAE30","editButton":"\uB808\uC774\uC5B4 \uD3B8\uC9D1\uD558\uAE30","dragButton":"\uB808\uC774\uC5B4 \uB04C\uAE30","cutButton":"\uB808\uC774\uC5B4 \uC790\uB974\uAE30","deleteButton":"\uB808\uC774\uC5B4 \uC81C\uAC70\uD558\uAE30","drawCircleMarkerButton":"\uC6D0 \uB9C8\uCEE4 \uADF8\uB9AC\uAE30","snappingButton":"\uC7A1\uC544\uB048 \uB9C8\uCEE4\uB97C \uB2E4\uB978 \uB808\uC774\uC5B4 \uBC0F \uAF2D\uC9C0\uC810\uC5D0 \uB4E4\uB7EC\uBD99\uAC8C \uD558\uAE30","pinningButton":"\uACF5\uC720 \uAF2D\uC9C0\uC810\uC744 \uD568\uAED8 \uCC0D\uAE30","rotateButton":"\uB808\uC774\uC5B4 \uD68C\uC804\uD558\uAE30","drawTextButton":"\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30"}}')};function D(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function U(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?D(Object(j),!0).forEach(function(nt){z(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):D(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function z(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}let q={_globalEditModeEnabled:!1,enableGlobalEditMode:function(M){var A=U({},M);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(j){j.pm.enable(A)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(M){M.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(M)},handleLayerAdditionInGlobalEditMode:function(){var M=this._addedLayers;for(var A in this._addedLayers={},M){var j=M[A];this._isRelevantForEdit(j)&&this.globalEditModeEnabled()&&j.pm.enable(U({},this.globalOptions))}},_layerAdded:function(M){var A=M.layer;this._addedLayers[L.stamp(A)]=A},_isRelevantForEdit:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.allowEditing}},G={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var M=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},M.forEach(function(A){A.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var M=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,M.forEach(function(A){A.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var M=this._addedLayersDrag;for(var A in this._addedLayersDrag={},M){var j=M[A];this._isRelevantForDrag(j)&&this.globalDragModeEnabled()&&j.pm.enableLayerDrag()}},_layerAddedDrag:function(M){var A=M.layer;this._addedLayersDrag[L.stamp(A)]=A},_isRelevantForDrag:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.draggable}},tt={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var M=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(A){M._isRelevantForRemoval(A)&&(A.pm.disable(),A.on("click",M.removeLayer,M))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var M=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(A){A.off("click",M.removeLayer,M)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(M){var A=M.layer;this._isRelevantForRemoval(A)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(M){var A=M.target;this._isRelevantForRemoval(A)&&!A.pm.dragging()&&(A.removeFrom(this.map.pm._getContainingLayer()),A.remove(),A instanceof L.LayerGroup?(this._fireRemoveLayerGroup(A),this._fireRemoveLayerGroup(this.map,A)):(A.pm._fireRemove(A),A.pm._fireRemove(this.map,A)))},_isRelevantForRemoval:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.allowRemoval}},K={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var M=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(A){return A instanceof L.Polyline}).forEach(function(A){M._isRelevantForRotate(A)&&A.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(M){return M instanceof L.Polyline}).forEach(function(M){M.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(M){var A=M.layer;this._isRelevantForRotate(A)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.allowRotation}};function B(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function N(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?B(Object(j),!0).forEach(function(nt){Z(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):B(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Z(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}var w={_fireDrawStart:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},M,A)},_fireDrawEnd:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},M,A)},_fireCreate:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:M,layer:M},A,j)},_fireCenterPlaced:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=M==="Draw"?this._layer:void 0,nt=M!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:j,layer:nt,latlng:this._layer.getLatLng()},M,A)},_fireCut:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(M,"pm:cut",{shape:this._shape,layer:A,originalLayer:j},nt,ht)},_fireEdit:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(M,"pm:edit",{layer:this._layer,shape:this.getShape()},A,j)},_fireEnable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},M,A)},_fireDisable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},M,A)},_fireUpdate:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},M,A)},_fireMarkerDragStart:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:M,shape:this.getShape(),indexPath:A},j,nt)},_fireMarkerDrag:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:M,shape:this.getShape(),indexPath:A},j,nt)},_fireMarkerDragEnd:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:M,shape:this.getShape(),indexPath:A,intersectionReset:j},nt,ht)},_fireDragStart:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},M,A)},_fireDrag:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",N(N({},M),{},{shape:this.getShape()}),A,j)},_fireDragEnd:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},M,A)},_fireDragEnable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},M,A)},_fireDragDisable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},M,A)},_fireRemove:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:remove",{layer:A,shape:this.getShape()},j,nt)},_fireVertexAdded:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:M,indexPath:A,latlng:j,shape:this.getShape()},nt,ht)},_fireVertexRemoved:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:M,indexPath:A,shape:this.getShape()},j,nt)},_fireVertexClick:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:M,indexPath:A,shape:this.getShape()},j,nt)},_fireIntersect:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:M,shape:this.getShape()},A,j)},_fireLayerReset:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:M,indexPath:A,shape:this.getShape()},j,nt)},_fireChange:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:M,shape:this.getShape()},A,j)},_fireTextChange:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:M,shape:this.getShape()},A,j)},_fireTextFocus:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},M,A)},_fireTextBlur:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},M,A)},_fireSnapDrag:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:snapdrag",A,j,nt)},_fireSnap:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:snap",A,j,nt)},_fireUnsnap:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:unsnap",A,j,nt)},_fireRotationEnable:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},j,nt)},_fireRotationDisable:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(M,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},A,j)},_fireRotationStart:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:A},j,nt)},_fireRotation:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",xt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(M,"pm:rotate",{layer:nt,helpLayer:this._layer,startAngle:this._startAngle,angle:nt.pm.getAngle(),angleDiff:A,oldLatLngs:j,newLatLngs:nt.getLatLngs()},ht,xt)},_fireRotationEnd:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(M,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:A,angle:this._rotationLayer.pm.getAngle(),originLatLngs:j,newLatLngs:this._rotationLayer.getLatLngs()},nt,ht)},_fireActionClick:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:M.text,action:M,btnName:A,button:j},nt,ht)},_fireButtonClick:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:M,button:A},j,nt)},_fireLangChange:function(M,A,j,nt){var ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",xt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:M,activeLang:A,fallback:j,translations:nt},ht,xt)},_fireGlobalDragModeToggled:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:M,map:this.map},A,j)},_fireGlobalEditModeToggled:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:M,map:this.map},A,j)},_fireGlobalRemovalModeToggled:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:M,map:this.map},A,j)},_fireGlobalCutModeToggled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},M,A)},_fireGlobalDrawModeToggled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},M,A)},_fireGlobalRotateModeToggled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},M,A)},_fireRemoveLayerGroup:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:remove",{layer:A,shape:void 0},j,nt)},_fireKeyeventEvent:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:M,eventType:A,focusOn:j},nt,ht)},__fire:function(M,A,j,nt){var ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};j=a()(j,ht,{source:nt}),L.PM.Utils._fireEvent(M,A,j)}};let C=w,k={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(M){this.map=M,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(M){var A="document";this.map.getContainer().contains(M.target)&&(A="map");var j={event:M,eventType:M.type,focusOn:A};this._lastEvents[M.type]=j,this._lastEvents.current=j,this.map.pm._fireKeyeventEvent(M,M.type,A)},_onBlur:function(M){M.altKey=!1;var A={event:M,eventType:M.type,focusOn:"document"};this._lastEvents[M.type]=A,this._lastEvents.current=A},getLastKeyEvent:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[M]},isShiftKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.shiftKey},isAltKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.altKey},isCtrlKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.ctrlKey},isMetaKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.metaKey},getPressedKey:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.key}};var T=s(7361),R=s.n(T),F=s(8721),H=s.n(F);function rt(M){var A=L.PM.activeLang;return H()(O,A)||(A="en"),R()(O[A],M)}function ot(M){for(var A=0;A<M.length;A+=1){var j=M[A];if(Array.isArray(j)){if(ot(j))return!0}else if(j!=null&&j!=="")return!0}return!1}function dt(M){return M.reduce(function(A,j){if(j.length!==0){var nt=Array.isArray(j)?dt(j):j;Array.isArray(nt)?nt.length!==0&&A.push(nt):A.push(nt)}return A},[])}function $(M,A,j){for(var nt,ht,xt,Lt=6378137,Rt=63567523142e-4,Pt=.0033528106647474805,Nt=M.lng,Vt=M.lat,ne=j,Zt=Math.PI,ge=A*Zt/180,Ce=Math.sin(ge),Ne=Math.cos(ge),be=(1-Pt)*Math.tan(Vt*Zt/180),vi=1/Math.sqrt(1+be*be),mi=be*vi,Er=Math.atan2(be,Ne),an=vi*Ce,qn=1-an*an,Mi=qn*(Lt*Lt-Rt*Rt)/(Rt*Rt),gs=1+Mi/16384*(4096+Mi*(Mi*(320-175*Mi)-768)),Bi=Mi/1024*(256+Mi*(Mi*(74-47*Mi)-128)),Wn=ne/(Rt*gs),es=2*Math.PI;Math.abs(Wn-es)>1e-12;)nt=Math.cos(2*Er+Wn),es=Wn,Wn=ne/(Rt*gs)+Bi*(ht=Math.sin(Wn))*(nt+Bi/4*((xt=Math.cos(Wn))*(2*nt*nt-1)-Bi/6*nt*(4*ht*ht-3)*(4*nt*nt-3)));var Is=mi*ht-vi*xt*Ne,Si=Math.atan2(mi*xt+vi*ht*Ne,(1-Pt)*Math.sqrt(an*an+Is*Is)),Pe=Pt/16*qn*(4+Pt*(4-3*qn)),ba=Nt+180*(Math.atan2(ht*Ce,vi*xt-mi*ht*Ne)-(1-Pe)*Pt*an*(Wn+Pe*ht*(nt+Pe*xt*(2*nt*nt-1))))/Zt,lo=180*Si/Zt;return L.latLng(ba,lo)}function ct(M,A,j,nt){for(var ht,xt,Lt=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],Rt=[],Pt=0;Pt<j;Pt+=1){if(Lt)ht=$(M,360*Pt/j+nt,A),xt=L.latLng(ht.lng,ht.lat);else{var Nt=M.lat+Math.cos(2*Pt*Math.PI/j)*A,Vt=M.lng+Math.sin(2*Pt*Math.PI/j)*A;xt=L.latLng(Nt,Vt)}Rt.push(xt)}return Rt}function W(M,A,j,nt){var ht=function(xt,Lt,Rt){var Pt=xt.latLngToContainerPoint(Lt),Nt=xt.latLngToContainerPoint(Rt),Vt=180*Math.atan2(Nt.y-Pt.y,Nt.x-Pt.x)/Math.PI+90;return Vt+(Vt<0?360:0)}(M,A,j);return function(xt,Lt,Rt){Lt=(Lt+360)%360;var Pt=Math.PI/180,Nt=180/Math.PI,Vt=6378137,ne=xt.lng*Pt,Zt=xt.lat*Pt,ge=Lt*Pt,Ce=Math.sin(Zt),Ne=Math.cos(Zt),be=Math.cos(Rt/Vt),vi=Math.sin(Rt/Vt),mi=Math.asin(Ce*be+Ne*vi*Math.cos(ge)),Er=ne+Math.atan2(Math.sin(ge)*vi*Ne,be-Ce*Math.sin(mi));return Er=(Er*=Nt)>180?Er-360:Er<-180?Er+360:Er,L.latLng([mi*Nt,Er])}(A,ht,nt)}function V(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!A||Object.keys(A).length===0)return function(Pt,Nt){return Pt-Nt};for(var nt,ht=Object.keys(A),xt=ht.length-1,Lt={};xt>=0;)nt=ht[xt],Lt[nt.toLowerCase()]=A[nt],xt-=1;function Rt(Pt){return Pt instanceof L.Marker?"Marker":Pt instanceof L.Circle?"Circle":Pt instanceof L.CircleMarker?"CircleMarker":Pt instanceof L.Rectangle?"Rectangle":Pt instanceof L.Polygon?"Polygon":Pt instanceof L.Polyline?"Line":void 0}return function(Pt,Nt){var Vt,ne;if(M==="instanceofShape"){if(Vt=Rt(Pt.layer).toLowerCase(),ne=Rt(Nt.layer).toLowerCase(),!Vt||!ne)return 0}else{if(!Pt.hasOwnProperty(M)||!Nt.hasOwnProperty(M))return 0;Vt=Pt[M].toLowerCase(),ne=Nt[M].toLowerCase()}var Zt=Vt in Lt?Lt[Vt]:Number.MAX_SAFE_INTEGER,ge=ne in Lt?Lt[ne]:Number.MAX_SAFE_INTEGER,Ce=0;return Zt<ge?Ce=-1:Zt>ge&&(Ce=1),j==="desc"?-1*Ce:Ce}}function it(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M.getLatLngs();return M instanceof L.Polygon?L.polygon(A).getLatLngs():L.polyline(A).getLatLngs()}function mt(M,A){var j,nt;if((j=A.options.crs)!==null&&j!==void 0&&(nt=j.projection)!==null&&nt!==void 0&&nt.MAX_LATITUDE){var ht,xt,Lt=(ht=A.options.crs)===null||ht===void 0||(xt=ht.projection)===null||xt===void 0?void 0:xt.MAX_LATITUDE;M.lat=Math.max(Math.min(Lt,M.lat),-Lt)}return M}function wt(M){return M.options.renderer||M._map&&(M._map._getPaneRenderer(M.options.pane)||M._map.options.renderer||M._map._renderer)||M._renderer}let _t=L.Class.extend({includes:[q,G,tt,K,C],initialize:function(M){this.map=M,this.Draw=new L.PM.Draw(M),this.Toolbar=new L.PM.Toolbar(M),this.Keyboard=k,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(M)},setLang:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",A=arguments.length>1?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",nt=L.PM.activeLang;A&&(O[M]=a()(O[j],A)),L.PM.activeLang=M,this.map.pm.Toolbar.reinit(),this._fireLangChange(nt,M,j,O[M])},addControls:function(M){this.Toolbar.addControls(M)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",A=arguments.length>1?arguments[1]:void 0;M==="Poly"&&(M="Polygon"),this.Draw.enable(M,A)},disableDraw:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";M==="Poly"&&(M="Polygon"),this.Draw.disable(M)},setPathOptions:function(M){var A=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=j.ignoreShapes||[],ht=j.merge||!1;this.map.pm.Draw.shapes.forEach(function(xt){nt.indexOf(xt)===-1&&A.map.pm.Draw[xt].setPathOptions(M,ht)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(M){var A=this,j=a()(this.globalOptions,M),nt=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.editable!=!!j.editable&&(this.map.pm.Draw.CircleMarker.disable(),nt=!0),this.map.pm.Draw.shapes.forEach(function(ht){A.map.pm.Draw[ht].setOptions(j)}),nt&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(ht){ht.pm.setOptions(j)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=j,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(M){M.pm.enabled()&&M.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(M){return this.Draw.Cut.enable(M)},toggleGlobalCutMode:function(M){return this.Draw.Cut.toggle(M)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],A=L.PM.Utils.findLayers(this.map);if(!M)return A;var j=L.featureGroup();return j._pmTempLayer=!0,A.forEach(function(nt){j.addLayer(nt)}),j},getGeomanDrawLayers:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],A=L.PM.Utils.findLayers(this.map).filter(function(nt){return nt._drawnByGeoman===!0});if(!M)return A;var j=L.featureGroup();return j._pmTempLayer=!0,A.forEach(function(nt){j.addLayer(nt)}),j},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(M){this._touchEventCounter===0&&(L.DomEvent.on(M,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(M,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(M){this._touchEventCounter===1&&(L.DomEvent.off(M,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(M,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(M){wt(this.map)._onMouseMove(this._createMouseEvent("mousemove",M))},_canvasTouchClick:function(M){var A="";M.type==="touchstart"||M.type==="pointerdown"?A="mousedown":M.type==="touchend"||M.type==="pointerup"?A="mouseup":M.type!=="touchcancel"&&M.type!=="pointercancel"||(A="mouseup"),A&&wt(this.map)._onClick(this._createMouseEvent(A,M))},_createMouseEvent:function(M,A){var j,nt=A.touches[0]||A.changedTouches[0];try{j=new MouseEvent(M,{bubbles:A.bubbles,cancelable:A.cancelable,view:A.view,detail:nt.detail,screenX:nt.screenX,screenY:nt.screenY,clientX:nt.clientX,clientY:nt.clientY,ctrlKey:A.ctrlKey,altKey:A.altKey,shiftKey:A.shiftKey,metaKey:A.metaKey,button:A.button,relatedTarget:A.relatedTarget})}catch{(j=document.createEvent("MouseEvents")).initMouseEvent(M,A.bubbles,A.cancelable,A.view,nt.detail,nt.screenX,nt.screenY,nt.clientX,nt.clientY,A.ctrlKey,A.altKey,A.shiftKey,A.metaKey,A.button,A.relatedTarget)}return j}}),Ct=L.Control.extend({includes:[C],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(M){this._button=L.Util.extend({},this.options,M)},onAdd:function(M){return this._map=M,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(M){return this._button.toggleStatus=typeof M=="boolean"?M:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(M){M&&M.preventDefault(),this._button.disabled||(this._button.onClick(M,{button:this,event:M}),this._clicked(M),this._button.afterClick(M,{button:this,event:M}))},_makeButton:function(M){var A=this,j=this.options.position.indexOf("right")>-1?"pos-right":"",nt=L.DomUtil.create("div","button-container  ".concat(j),this._container);M.title&&nt.setAttribute("title",M.title);var ht=L.DomUtil.create("a","leaflet-buttons-control-button",nt);ht.setAttribute("role","button"),ht.setAttribute("tabindex","0"),ht.href="#";var xt=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(j),nt),Lt=M.actions,Rt={cancel:{text:rt("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:rt("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:rt("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[M.jsClass]._removeLastVertex()}},finish:{text:rt("actions.finish"),onClick:function(Nt){this._map.pm.Draw[M.jsClass]._finishShape(Nt)}}};Lt.forEach(function(Nt){var Vt,ne=typeof Nt=="string"?Nt:Nt.name;if(Rt[ne])Vt=Rt[ne];else{if(!Nt.text)return;Vt=Nt}var Zt=L.DomUtil.create("a","leaflet-pm-action ".concat(j," action-").concat(ne),xt);Zt.setAttribute("role","button"),Zt.setAttribute("tabindex","0"),Zt.href="#",Zt.innerHTML=Vt.text,L.DomEvent.disableClickPropagation(Zt),L.DomEvent.on(Zt,"click",L.DomEvent.stop),!M.disabled&&Vt.onClick&&(L.DomEvent.addListener(Zt,"click",function(ge){ge.preventDefault();var Ce="",Ne=A._map.pm.Toolbar.buttons;for(var be in Ne)if(Ne[be]._button===M){Ce=be;break}A._fireActionClick(Vt,Ce,M)},A),L.DomEvent.addListener(Zt,"click",Vt.onClick,A))}),M.toggleStatus&&L.DomUtil.addClass(nt,"active");var Pt=L.DomUtil.create("div","control-icon",ht);return M.iconUrl&&Pt.setAttribute("src",M.iconUrl),M.className&&L.DomUtil.addClass(Pt,M.className),L.DomEvent.disableClickPropagation(ht),L.DomEvent.on(ht,"click",L.DomEvent.stop),M.disabled||(L.DomEvent.addListener(ht,"click",this._onBtnClick,this),L.DomEvent.addListener(ht,"click",this._triggerClick,this)),M.disabled&&(L.DomUtil.addClass(ht,"pm-disabled"),ht.setAttribute("aria-disabled","true")),nt},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var M="",A=this._map.pm.Toolbar.buttons;for(var j in A)if(A[j]._button===this._button){M=j;break}this._fireButtonClick(M,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var M="pm-disabled",A=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(A,M),A.setAttribute("aria-disabled","true"),L.DomEvent.off(A,"click",this._triggerClick,this),L.DomEvent.off(A,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(A,M),A.setAttribute("aria-disabled","false"),L.DomEvent.on(A,"click",this._triggerClick,this),L.DomEvent.on(A,"click",this._onBtnClick,this))}}});function Ft(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function It(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?Ft(Object(j),!0).forEach(function(nt){vt(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):Ft(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function vt(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}function kt(M){return kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},kt(M)}L.Control.PMButton=Ct;let gt=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(M){this.init(M)},reinit:function(){var M=this.isVisible;this.removeControls(),this._defineButtons(),M&&this.addControls()},init:function(M){this.map=M,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(M){var A="".concat(M,"Container");return this[A]||(this[A]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(M," leaflet-bar leaflet-control"))),this[A]},getButtons:function(){return this.buttons},addControls:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof M.editPolygon<"u"&&(M.editMode=M.editPolygon),typeof M.deleteLayer<"u"&&(M.removalMode=M.deleteLayer),L.Util.setOptions(this,M),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var M=this.getButtons(),A={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var j in M){var nt=M[j];L.Util.setOptions(nt,{className:A.geomanIcons[j]})}},removeControls:function(){var M=this.getButtons();for(var A in M)M[A].remove();this.isVisible=!1},toggleControls:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(M)},_addButton:function(M,A){return this.buttons[M]=A,this.options[M]=this.options[M]||!1,this.buttons[M]},triggerClickOnToggledButtons:function(M){for(var A in this.buttons){var j=this.buttons[A];j._button.disableByOtherButtons&&j!==M&&j.toggled()&&j._triggerClick()}},toggleButton:function(M,A){var j=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return M==="editPolygon"&&(M="editMode"),M==="deleteLayer"&&(M="removalMode"),j&&this.triggerClickOnToggledButtons(this.buttons[M]),!!this.buttons[M]&&this.buttons[M].toggle(A)},_defineButtons:function(){var M=this,A={className:"control-icon leaflet-pm-icon-marker",title:rt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},j={title:rt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},nt={className:"control-icon leaflet-pm-icon-polyline",title:rt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},ht={title:rt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},xt={title:rt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},Lt={title:rt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},Rt={title:rt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Pt={title:rt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Nt={title:rt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Vt={title:rt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ne={title:rt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Zt={className:"control-icon leaflet-pm-icon-text",title:rt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(A)),this._addButton("drawPolyline",new L.Control.PMButton(nt)),this._addButton("drawRectangle",new L.Control.PMButton(Lt)),this._addButton("drawPolygon",new L.Control.PMButton(j)),this._addButton("drawCircle",new L.Control.PMButton(ht)),this._addButton("drawCircleMarker",new L.Control.PMButton(xt)),this._addButton("drawText",new L.Control.PMButton(Zt)),this._addButton("editMode",new L.Control.PMButton(Rt)),this._addButton("dragMode",new L.Control.PMButton(Pt)),this._addButton("cutPolygon",new L.Control.PMButton(Nt)),this._addButton("removalMode",new L.Control.PMButton(Vt)),this._addButton("rotateMode",new L.Control.PMButton(ne))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var M=this.getButtons(),A=[];for(var j in this.options.drawControls===!1&&(A=A.concat(Object.keys(M).filter(function(ht){return!M[ht]._button.tool}))),this.options.editControls===!1&&(A=A.concat(Object.keys(M).filter(function(ht){return M[ht]._button.tool==="edit"}))),this.options.optionsControls===!1&&(A=A.concat(Object.keys(M).filter(function(ht){return M[ht]._button.tool==="options"}))),this.options.customControls===!1&&(A=A.concat(Object.keys(M).filter(function(ht){return M[ht]._button.tool==="custom"}))),M)if(this.options[j]&&A.indexOf(j)===-1){var nt=M[j]._button.tool;nt||(nt="draw"),M[j].setPosition(this._getBtnPosition(nt)),M[j].addTo(this.map)}}},_getBtnPosition:function(M){return this.options.positions&&this.options.positions[M]?this.options.positions[M]:this.options.position},setBlockPosition:function(M,A){this.options.positions[M]=A,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(M,A){if(!A)throw new TypeError("Button has no name");kt(A)!=="object"&&(A={name:A});var j=this._btnNameMapping(M);if(!A.name)throw new TypeError("Button has no name");if(this.buttons[A.name])throw new TypeError("Button with this name already exists");var nt=this.map.pm.Draw.createNewDrawInstance(A.name,j);return A=It(It({},this.buttons[j]._button),A),{drawInstance:nt,control:this.createCustomControl(A)}},createCustomControl:function(M){var A,j;if(!M.name)throw new TypeError("Button has no name");if(this.buttons[M.name])throw new TypeError("Button with this name already exists");M.onClick||(M.onClick=function(){}),M.afterClick||(M.afterClick=function(){}),M.toggle!==!1&&(M.toggle=!0),M.block&&(M.block=M.block.toLowerCase()),M.block&&M.block!=="draw"||(M.block=""),M.className?M.className.indexOf("control-icon")===-1&&(M.className="control-icon ".concat(M.className)):M.className="control-icon";var nt={tool:M.block,className:M.className,title:M.title||"",jsClass:M.name,onClick:M.onClick,afterClick:M.afterClick,doToggle:M.toggle,toggleStatus:!1,disableOtherButtons:(A=M.disableOtherButtons)===null||A===void 0||A,disableByOtherButtons:(j=M.disableByOtherButtons)===null||j===void 0||j,cssToggle:M.toggle,position:this.options.position,actions:M.actions||[],disabled:!!M.disabled};this.options[M.name]!==!1&&(this.options[M.name]=!0);var ht=this._addButton(M.name,new L.Control.PMButton(nt));return this.changeControlOrder(),ht},changeControlOrder:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A=this._shapeMapping(),j=[];M.forEach(function(Nt){A[Nt]?j.push(A[Nt]):j.push(Nt)});var nt=this.getButtons(),ht={};j.forEach(function(Nt){nt[Nt]&&(ht[Nt]=nt[Nt])});var xt=Object.keys(nt).filter(function(Nt){return!nt[Nt]._button.tool});xt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])});var Lt=Object.keys(nt).filter(function(Nt){return nt[Nt]._button.tool==="edit"});Lt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])});var Rt=Object.keys(nt).filter(function(Nt){return nt[Nt]._button.tool==="options"});Rt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])});var Pt=Object.keys(nt).filter(function(Nt){return nt[Nt]._button.tool==="custom"});Pt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])}),Object.keys(nt).forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])}),this.map.pm.Toolbar.buttons=ht,this._showHideButtons()},getControlOrder:function(){var M=this.getButtons(),A=[];for(var j in M)A.push(j);return A},changeActionsOfControl:function(M,A){var j=this._btnNameMapping(M);if(!j)throw new TypeError("No name passed");if(!A)throw new TypeError("No actions passed");if(!this.buttons[j])throw new TypeError("Button with this name not exists");this.buttons[j]._button.actions=A,this.changeControlOrder()},setButtonDisabled:function(M,A){var j=this._btnNameMapping(M);A?this.buttons[j].disable():this.buttons[j].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(M){var A=this._shapeMapping();return A[M]?A[M]:M}});function ut(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function Q(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?ut(Object(j),!0).forEach(function(nt){Y(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):ut(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Y(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}var et={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(M){var A=this;M.forEach(function(j){Array.isArray(j)?A._assignEvents(j):(j.off("drag",A._handleSnapping,A),j.on("drag",A._handleSnapping,A),j.off("dragend",A._cleanupSnapping,A),j.on("dragend",A._cleanupSnapping,A))})},_cleanupSnapping:function(M){M&&(M.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(A){A.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(M){var A=this,j=M.target;if(j._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var nt=this._calcClosestLayer(j.getLatLng(),this._snapList);if(Object.keys(nt).length===0)return!1;var ht,xt=nt.layer instanceof L.Marker||nt.layer instanceof L.CircleMarker||!this.options.snapSegment;ht=xt?nt.latlng:this._checkPrioritiySnapping(nt);var Lt=this.options.snapDistance,Rt={marker:j,shape:this._shape,snapLatLng:ht,segment:nt.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:nt.layer,distance:nt.distance};if(this._fireSnapDrag(Rt.marker,Rt),this._fireSnapDrag(this._layer,Rt),nt.distance<Lt){j._orgLatLng=j.getLatLng(),j.setLatLng(ht),j._snapped=!0,j._snapInfo=Rt;var Pt=this._snapLatLng||{},Nt=ht||{};Pt.lat===Nt.lat&&Pt.lng===Nt.lng||(A._snapLatLng=ht,A._fireSnap(j,Rt),A._fireSnap(A._layer,Rt))}else this._snapLatLng&&(this._unsnap(Rt),j._snapped=!1,j._snapInfo=void 0,this._fireUnsnap(Rt.marker,Rt),this._fireUnsnap(this._layer,Rt));return!0},_createSnapList:function(){var M=this,A=[],j=[],nt=this._map;nt.off("pm:remove",this._handleSnapLayerRemoval,this),nt.on("pm:remove",this._handleSnapLayerRemoval,this),nt.eachLayer(function(ht){if((ht instanceof L.Polyline||ht instanceof L.Marker||ht instanceof L.CircleMarker||ht instanceof L.ImageOverlay)&&ht.options.snapIgnore!==!0){if(ht.options.snapIgnore===void 0&&(!L.PM.optIn&&ht.options.pmIgnore===!0||L.PM.optIn&&ht.options.pmIgnore!==!1))return;(ht instanceof L.Circle||ht instanceof L.CircleMarker)&&ht.pm&&ht.pm._hiddenPolyCircle?A.push(ht.pm._hiddenPolyCircle):ht instanceof L.ImageOverlay&&(ht=L.rectangle(ht.getBounds())),A.push(ht);var xt=L.polyline([],{color:"red",pmIgnore:!0});xt._pmTempLayer=!0,j.push(xt),(ht instanceof L.Circle||ht instanceof L.CircleMarker)&&j.push(xt)}}),A=(A=(A=A.filter(function(ht){return M._layer!==ht})).filter(function(ht){return ht._latlng||ht._latlngs&&ot(ht._latlngs)})).filter(function(ht){return!ht._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var ht=L.polyline([],{color:"red",pmIgnore:!0});ht._pmTempLayer=!0,j.push(ht)}),this._snapList=A.concat(this._otherSnapLayers)):this._snapList=A,this.debugIndicatorLines=j},_handleSnapLayerRemoval:function(M){var A=M.layer,j=this._snapList.findIndex(function(nt){return nt._leaflet_id===A._leaflet_id});this._snapList.splice(j,1)},_calcClosestLayer:function(M,A){return this._calcClosestLayers(M,A,1)[0]},_calcClosestLayers:function(M,A){var j=this,nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ht=[],xt={};A.forEach(function(Rt,Pt){if(!Rt._parentCopy||Rt._parentCopy!==j._layer){var Nt=j._calcLayerDistances(M,Rt);if(Nt.distance=Math.floor(Nt.distance),j.debugIndicatorLines){if(!j.debugIndicatorLines[Pt]){var Vt=L.polyline([],{color:"red",pmIgnore:!0});Vt._pmTempLayer=!0,j.debugIndicatorLines[Pt]=Vt}j.debugIndicatorLines[Pt].setLatLngs([M,Nt.latlng])}nt===1&&(xt.distance===void 0||Nt.distance<=xt.distance)?(Nt.distance<xt.distance&&(ht=[]),(xt=Nt).layer=Rt,ht.push(xt)):nt!==1&&(xt={},(xt=Nt).layer=Rt,ht.push(xt))}}),nt!==1&&(ht=ht.sort(function(Rt,Pt){return Rt.distance-Pt.distance})),nt===-1&&(nt=ht.length);var Lt=this._getClosestLayerByPriority(ht,nt);return L.Util.isArray(Lt)?Lt:[Lt]},_calcLayerDistances:function(M,A){var j=this._map,nt=A instanceof L.Marker||A instanceof L.CircleMarker,ht=A instanceof L.Polygon,xt=M;if(nt){var Lt=A.getLatLng();return{latlng:Q({},Lt),distance:this._getDistance(j,Lt,xt)}}return this._calcLatLngDistances(xt,A.getLatLngs(),j,ht)},_calcLatLngDistances:function(M,A,j){var nt,ht,xt,Lt=this,Rt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Pt=function Vt(ne){ne.forEach(function(Zt,ge){if(Array.isArray(Zt))Vt(Zt);else if(Lt.options.snapSegment){var Ce,Ne=Zt;Ce=Rt?ge+1===ne.length?0:ge+1:ge+1===ne.length?void 0:ge+1;var be=ne[Ce];if(be){var vi=Lt._getDistanceToSegment(j,M,Ne,be);(ht===void 0||vi<ht)&&(ht=vi,xt=[Ne,be])}}else{var mi=Lt._getDistance(j,M,Zt);(ht===void 0||mi<ht)&&(ht=mi,nt=Zt)}})};if(Pt(A),this.options.snapSegment){var Nt=this._getClosestPointOnSegment(j,M,xt[0],xt[1]);return{latlng:Q({},Nt),segment:xt,distance:ht}}return{latlng:nt,distance:ht}},_getClosestLayerByPriority:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;M=M.sort(function(Lt,Rt){return Lt._leaflet_id-Rt._leaflet_id});var j=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],nt=this._map.pm.globalOptions.snappingOrder||[],ht=0,xt={};return nt.concat(j).forEach(function(Lt){xt[Lt]||(ht+=1,xt[Lt]=ht)}),M.sort(V("instanceofShape",xt)),A===1?M[0]||{}:M.slice(0,A)},_checkPrioritiySnapping:function(M){var A=this._map,j=M.segment[0],nt=M.segment[1],ht=M.latlng,xt=this._getDistance(A,j,ht),Lt=this._getDistance(A,nt,ht),Rt=xt<Lt?j:nt,Pt=xt<Lt?xt:Lt;if(this.options.snapMiddle){var Nt=L.PM.Utils.calcMiddleLatLng(A,j,nt),Vt=this._getDistance(A,Nt,ht);Vt<xt&&Vt<Lt&&(Rt=Nt,Pt=Vt)}return Q({},Pt<this.options.snapDistance?Rt:ht)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(M,A,j,nt){var ht=M.getMaxZoom();ht===1/0&&(ht=M.getZoom());var xt=M.project(A,ht),Lt=M.project(j,ht),Rt=M.project(nt,ht),Pt=L.LineUtil.closestPointOnSegment(xt,Lt,Rt);return M.unproject(Pt,ht)},_getDistanceToSegment:function(M,A,j,nt){var ht=M.latLngToLayerPoint(A),xt=M.latLngToLayerPoint(j),Lt=M.latLngToLayerPoint(nt);return L.LineUtil.pointToSegmentDistance(ht,xt,Lt)},_getDistance:function(M,A,j){return M.latLngToLayerPoint(A).distanceTo(M.latLngToLayerPoint(j))}};let lt=et,pt=L.Class.extend({includes:[lt,C],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(M){L.Util.setOptions(this,M),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(M){var A=this,j=new L.Icon.Default;j.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=j,this._map=M,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(nt){A[nt]=new L.PM.Draw[nt](A._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(M){var A=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=A?a()(this.options.pathOptions,M):M},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(M,A){if(!M)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[M].enable(A)},disable:function(){var M=this;this.shapes.forEach(function(A){M[A].disable()})},addControls:function(){var M=this;this.shapes.forEach(function(A){M[A].addButton()})},getActiveShape:function(){var M,A=this;return this.shapes.forEach(function(j){A[j]._enabled&&(M=j)}),M},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var M=L.PM.Utils.findLayers(this._map);this._enabled?M.forEach(function(A){L.PM.Utils.disablePopup(A)}):M.forEach(function(A){L.PM.Utils.enablePopup(A)})},createNewDrawInstance:function(M,A){var j=this._getShapeFromBtnName(A);if(this[M])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[j])throw new TypeError("There is no class L.PM.Draw.".concat(j));return this[M]=new L.PM.Draw[j](this._map),this[M].toolbarButtonName=M,this[M]._shape=M,this.shapes.push(M),this[A]&&this[M].setOptions(this[A].options),this[M].setOptions(this[M].options),this[M]},_getShapeFromBtnName:function(M){var A={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return A[M]?A[M]:this[M]?this[M]._shape:M},_finishLayer:function(M){M.pm&&(M.pm.setOptions(this.options),M.pm._shape=this._shape,M.pm._map=this._map),this._addDrawnLayerProp(M)},_addDrawnLayerProp:function(M){M._drawnByGeoman=!0},_setPane:function(M,A){A==="layerPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":A==="vertexPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":A==="markerPane"&&(M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});pt.Marker=pt.extend({initialize:function(M){this._map=M,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(M){var A=this;L.Util.setOptions(this,M),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(rt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(j){A.isRelevantMarker(j)&&j.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var M=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(A){M.isRelevantMarker(A)&&A.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},isRelevantMarker:function(M){return M instanceof L.Marker&&M.pm&&!M._pmTempLayer&&!M.pm._initTextMarker},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(M){if(M.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng(),j=new L.Marker(A,this.options.markerStyle);this._setPane(j,"markerPane"),this._finishLayer(j),j.pm||(j.options.draggable=!1),j.addTo(this._map.pm._getContainingLayer()),j.pm&&this.options.markerEditable?j.pm.enable():j.dragging&&j.dragging.disable(),this._fireCreate(j),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var M,A;(M=this.options.markerStyle)!==null&&M!==void 0&&M.icon&&((A=this._hintMarker)===null||A===void 0||A.setIcon(this.options.markerStyle.icon))}});var bt=63710088e-1,Et={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*bt,kilometers:6371.0088,kilometres:6371.0088,meters:bt,metres:bt,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:bt/1852,radians:1,yards:6967335223679999e-9};function Ot(M,A,j){j===void 0&&(j={});var nt={type:"Feature"};return(j.id===0||j.id)&&(nt.id=j.id),j.bbox&&(nt.bbox=j.bbox),nt.properties=A||{},nt.geometry=M,nt}function zt(M,A,j){if(j===void 0&&(j={}),!M)throw new Error("coordinates is required");if(!Array.isArray(M))throw new Error("coordinates must be an Array");if(M.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_e(M[0])||!_e(M[1]))throw new Error("coordinates must contain numbers");return Ot({type:"Point",coordinates:M},A,j)}function Gt(M,A,j){if(j===void 0&&(j={}),M.length<2)throw new Error("coordinates must be an array of two or more positions");return Ot({type:"LineString",coordinates:M},A,j)}function Jt(M,A){A===void 0&&(A={});var j={type:"FeatureCollection"};return A.id&&(j.id=A.id),A.bbox&&(j.bbox=A.bbox),j.features=M,j}function Kt(M,A){A===void 0&&(A="kilometers");var j=Et[A];if(!j)throw new Error(A+" units is invalid");return M*j}function re(M,A){A===void 0&&(A="kilometers");var j=Et[A];if(!j)throw new Error(A+" units is invalid");return M/j}function Xt(M){return 180*(M%(2*Math.PI))/Math.PI}function Ut(M){return M%360*Math.PI/180}function _e(M){return!isNaN(M)&&M!==null&&!Array.isArray(M)}function le(M){var A,j,nt={type:"FeatureCollection",features:[]};if((j=M.type==="Feature"?M.geometry:M).type==="LineString")A=[j.coordinates];else if(j.type==="MultiLineString")A=j.coordinates;else if(j.type==="MultiPolygon")A=[].concat.apply([],j.coordinates);else{if(j.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");A=j.coordinates}return A.forEach(function(ht){A.forEach(function(xt){for(var Lt=0;Lt<ht.length-1;Lt++)for(var Rt=Lt;Rt<xt.length-1;Rt++)if(!(ht===xt&&(Math.abs(Lt-Rt)===1||Lt===0&&Rt===ht.length-2&&ht[Lt][0]===ht[ht.length-1][0]&&ht[Lt][1]===ht[ht.length-1][1]))){var Pt=ye(ht[Lt][0],ht[Lt][1],ht[Lt+1][0],ht[Lt+1][1],xt[Rt][0],xt[Rt][1],xt[Rt+1][0],xt[Rt+1][1]);Pt&&nt.features.push(zt([Pt[0],Pt[1]]))}})}),nt}function ye(M,A,j,nt,ht,xt,Lt,Rt){var Pt,Nt,Vt,ne,Zt={x:null,y:null,onLine1:!1,onLine2:!1};return(Pt=(Rt-xt)*(j-M)-(Lt-ht)*(nt-A))===0?Zt.x!==null&&Zt.y!==null&&Zt:(ne=(j-M)*(Nt=A-xt)-(nt-A)*(Vt=M-ht),Nt=((Lt-ht)*Nt-(Rt-xt)*Vt)/Pt,Vt=ne/Pt,Zt.x=M+Nt*(j-M),Zt.y=A+Nt*(nt-A),Nt>=0&&Nt<=1&&(Zt.onLine1=!0),Vt>=0&&Vt<=1&&(Zt.onLine2=!0),!(!Zt.onLine1||!Zt.onLine2)&&[Zt.x,Zt.y])}function Ze(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function ce(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?Ze(Object(j),!0).forEach(function(nt){ke(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):Ze(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function ke(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}function He(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function $t(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?He(Object(j),!0).forEach(function(nt){Te(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):He(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Te(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}function br(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function ue(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?br(Object(j),!0).forEach(function(nt){Fe(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):br(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Fe(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}function ar(M){if(!M)throw new Error("coord is required");if(!Array.isArray(M)){if(M.type==="Feature"&&M.geometry!==null&&M.geometry.type==="Point")return M.geometry.coordinates;if(M.type==="Point")return M.coordinates}if(Array.isArray(M)&&M.length>=2&&!Array.isArray(M[0])&&!Array.isArray(M[1]))return M;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Le(M){if(Array.isArray(M))return M;if(M.type==="Feature"){if(M.geometry!==null)return M.geometry.coordinates}else if(M.coordinates)return M.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Oe(M){return M.type==="Feature"?M.geometry:M}function ri(M,A){return M.type==="FeatureCollection"?"FeatureCollection":M.type==="GeometryCollection"?"GeometryCollection":M.type==="Feature"&&M.geometry!==null?M.geometry.type:M.type}function We(M,A,j){if(M!==null)for(var nt,ht,xt,Lt,Rt,Pt,Nt,Vt,ne=0,Zt=0,ge=M.type,Ce=ge==="FeatureCollection",Ne=ge==="Feature",be=Ce?M.features.length:1,vi=0;vi<be;vi++){Rt=(Vt=!!(Nt=Ce?M.features[vi].geometry:Ne?M.geometry:M)&&Nt.type==="GeometryCollection")?Nt.geometries.length:1;for(var mi=0;mi<Rt;mi++){var Er=0,an=0;if((Lt=Vt?Nt.geometries[mi]:Nt)!==null){Pt=Lt.coordinates;var qn=Lt.type;switch(ne=!j||qn!=="Polygon"&&qn!=="MultiPolygon"?0:1,qn){case null:break;case"Point":if(A(Pt,Zt,vi,Er,an)===!1)return!1;Zt++,Er++;break;case"LineString":case"MultiPoint":for(nt=0;nt<Pt.length;nt++){if(A(Pt[nt],Zt,vi,Er,an)===!1)return!1;Zt++,qn==="MultiPoint"&&Er++}qn==="LineString"&&Er++;break;case"Polygon":case"MultiLineString":for(nt=0;nt<Pt.length;nt++){for(ht=0;ht<Pt[nt].length-ne;ht++){if(A(Pt[nt][ht],Zt,vi,Er,an)===!1)return!1;Zt++}qn==="MultiLineString"&&Er++,qn==="Polygon"&&an++}qn==="Polygon"&&Er++;break;case"MultiPolygon":for(nt=0;nt<Pt.length;nt++){for(an=0,ht=0;ht<Pt[nt].length;ht++){for(xt=0;xt<Pt[nt][ht].length-ne;xt++){if(A(Pt[nt][ht][xt],Zt,vi,Er,an)===!1)return!1;Zt++}an++}Er++}break;case"GeometryCollection":for(nt=0;nt<Lt.geometries.length;nt++)if(We(Lt.geometries[nt],A,j)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function At(M,A){if(M.type==="Feature")A(M,0);else if(M.type==="FeatureCollection")for(var j=0;j<M.features.length&&A(M.features[j],j)!==!1;j++);}function qt(M,A){var j,nt,ht,xt,Lt,Rt,Pt,Nt,Vt,ne,Zt=0,ge=M.type==="FeatureCollection",Ce=M.type==="Feature",Ne=ge?M.features.length:1;for(j=0;j<Ne;j++){for(Rt=ge?M.features[j].geometry:Ce?M.geometry:M,Nt=ge?M.features[j].properties:Ce?M.properties:{},Vt=ge?M.features[j].bbox:Ce?M.bbox:void 0,ne=ge?M.features[j].id:Ce?M.id:void 0,Lt=(Pt=!!Rt&&Rt.type==="GeometryCollection")?Rt.geometries.length:1,ht=0;ht<Lt;ht++)if((xt=Pt?Rt.geometries[ht]:Rt)!==null)switch(xt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(A(xt,Zt,Nt,Vt,ne)===!1)return!1;break;case"GeometryCollection":for(nt=0;nt<xt.geometries.length;nt++)if(A(xt.geometries[nt],Zt,Nt,Vt,ne)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(A(null,Zt,Nt,Vt,ne)===!1)return!1;Zt++}}function jt(M,A){qt(M,function(j,nt,ht,xt,Lt){var Rt,Pt=j===null?null:j.type;switch(Pt){case null:case"Point":case"LineString":case"Polygon":return A(Ot(j,ht,{bbox:xt,id:Lt}),nt,0)!==!1&&void 0}switch(Pt){case"MultiPoint":Rt="Point";break;case"MultiLineString":Rt="LineString";break;case"MultiPolygon":Rt="Polygon"}for(var Nt=0;Nt<j.coordinates.length;Nt++){var Vt=j.coordinates[Nt];if(A(Ot({type:Rt,coordinates:Vt},ht),nt,Nt)===!1)return!1}})}pt.Line=pt.extend({initialize:function(M){this._map=M,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(M){L.Util.setOptions(this,M),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],ce(ce({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(rt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_syncHintLine:function(){var M=this._layer.getLatLngs();if(M.length>0){var A=M[M.length-1];this._hintline.setLatLngs([A,this._hintMarker.getLatLng()])}},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var j=this._layer._defaultShape().slice();j.push(this._hintMarker.getLatLng()),this._change(j)},hasSelfIntersection:function(){return le(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(M,A){var j=L.polyline(this._layer.getLatLngs());M&&(A||(A=this._hintMarker.getLatLng()),j.addLatLng(A));var nt=le(j.toGeoJSON(15));this._doesSelfIntersect=nt.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(M){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,M.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng(),j=this._layer.getLatLngs(),nt=j[j.length-1];if(A.equals(j[0])||j.length>0&&A.equals(nt))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:A,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(A);var ht=this._createMarker(A);this._setTooltipText(),this._setHintLineAfterNewVertex(A),this._fireVertexAdded(ht,void 0,A,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(M)}}},_setHintLineAfterNewVertex:function(M){this._hintline.setLatLngs([M,M])},_removeLastVertex:function(){var M=this._markers;if(M.length<=1)this.disable();else{var A=this._layer.getLatLngs(),j=M[M.length-1],nt=L.PM.Utils.findDeepMarkerIndex(M,j).indexPath;M.pop(),this._layerGroup.removeLayer(j);var ht=M[M.length-1],xt=A.indexOf(ht.getLatLng());A=A.slice(0,xt+1),this._layer.setLatLngs(A),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(j,nt,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var M=this._layer.getLatLngs();if(!(M.length<=1)){var A=L.polyline(M,this.options.pathOptions);this._setPane(A,"layerPane"),this._finishLayer(A),A.addTo(this._map.pm._getContainingLayer()),this._fireCreate(A),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(M){var A=new L.Marker(M,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._pmTempLayer=!0,this._layerGroup.addLayer(A),this._markers.push(A),A.on("click",this._finishShape,this),A},_setTooltipText:function(){var M="";M=rt(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(M)},_change:function(M){this._fireChange(M,"Draw")},setStyle:function(){var M,A;(M=this._layer)===null||M===void 0||M.setStyle(this.options.templineStyle),(A=this._hintline)===null||A===void 0||A.setStyle(this.options.hintlineStyle)}}),pt.Polygon=pt.Line.extend({initialize:function(M){this._map=M,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(M){L.PM.Draw.Line.prototype.enable.call(this,M),this._layer.pm._shape="Polygon"},_createMarker:function(M){var A=new L.Marker(M,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._pmTempLayer=!0,this._layerGroup.addLayer(A),this._markers.push(A),this._layer.getLatLngs().flat().length===1?(A.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(A)-1,this.options.snappable&&this._cleanupSnapping()):A.on("click",function(){return 1}),A},_setTooltipText:function(){var M="";M=rt(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(M)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var M=this._layer.getLatLngs();if(!(M.length<=2)){var A=L.polygon(M,this.options.pathOptions);this._setPane(A,"layerPane"),this._finishLayer(A),A.addTo(this._map.pm._getContainingLayer()),this._fireCreate(A),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),pt.Rectangle=pt.extend({initialize:function(M){this._map=M,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(M){if(L.Util.setOptions(this,M),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(rt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var A=0;A<2;A+=1){var j=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(j,"vertexPane"),j._pmTempLayer=!0,this._layerGroup.addLayer(j),this._styleMarkers.push(j)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_placeStartingMarkers:function(M){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(A),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(j){L.DomUtil.addClass(j._icon,"visible"),j.setLatLng(A)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(rt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var M=this._startMarker.getLatLng();M&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([M,M]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}var j=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(j,"Draw")},_syncRectangleSize:function(){var M=this,A=mt(this._startMarker.getLatLng(),this._map),j=mt(this._hintMarker.getLatLng(),this._map),nt=L.PM.Utils._getRotatedRectangle(A,j,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(nt),this.options.cursorMarker&&this._styleMarkers){var ht=[];nt.forEach(function(xt){xt.equals(A,1e-8)||xt.equals(j,1e-8)||ht.push(xt)}),ht.forEach(function(xt,Lt){try{M._styleMarkers[Lt].setLatLng(xt)}catch{}})}},_findCorners:function(){var M=this._layer.getBounds();return[M.getNorthWest(),M.getNorthEast(),M.getSouthEast(),M.getSouthWest()]},_finishShape:function(M){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng(),j=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var nt=L.rectangle([j,A],this.options.pathOptions);if(this.options.rectangleAngle){var ht=L.PM.Utils._getRotatedRectangle(j,A,this.options.rectangleAngle||0,this._map);nt.setLatLngs(ht),nt.pm&&nt.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(nt,"layerPane"),this._finishLayer(nt),nt.addTo(this._map.pm._getContainingLayer()),this._fireCreate(nt),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var M;(M=this._layer)===null||M===void 0||M.setStyle(this.options.pathOptions)}}),pt.Circle=pt.extend({initialize:function(M){this._map=M,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(M){L.Util.setOptions(this,M),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle(this._map.getCenter(),$t($t({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(rt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),A=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([M,A])},_syncCircleRadius:function(){var M,A=this._centerMarker.getLatLng(),j=this._hintMarker.getLatLng();M=this._map.options.crs===L.CRS.Simple?this._map.distance(A,j):A.distanceTo(j),this.options.minRadiusCircle&&M<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&M>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(M)},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}this._handleHintMarkerSnapping();var j=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(j,"Draw")},_placeCenterMarker:function(M){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(A),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var M=this._centerMarker.getLatLng();M&&(this._layer.setLatLng(M),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(rt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(M){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A,j=this._centerMarker.getLatLng(),nt=this._hintMarker.getLatLng();A=this._map.options.crs===L.CRS.Simple?this._map.distance(j,nt):j.distanceTo(nt),this.options.minRadiusCircle&&A<this.options.minRadiusCircle?A=this.options.minRadiusCircle:this.options.maxRadiusCircle&&A>this.options.maxRadiusCircle&&(A=this.options.maxRadiusCircle);var ht=$t($t({},this.options.pathOptions),{},{radius:A}),xt=L.circle(j,ht);this._setPane(xt,"layerPane"),this._finishLayer(xt),xt.addTo(this._map.pm._getContainingLayer()),xt.pm&&xt.pm._updateHiddenPolyCircle(),this._fireCreate(xt),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var M=this._hintMarker.getLatLng();if(!this._layerGroup.hasLayer(this._centerMarker))return M;var A=this._centerMarker.getLatLng(),j=A.distanceTo(M);return this.options.minRadiusCircle&&j<this.options.minRadiusCircle?M=W(this._map,A,M,this.options.minRadiusCircle):this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle&&(M=W(this._map,A,M,this.options.maxRadiusCircle)),M},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var M=this._centerMarker.getLatLng(),A=this._hintMarker.getLatLng(),j=M.distanceTo(A);this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircle&&j<this.options.minRadiusCircle||this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())},setStyle:function(){var M,A;(M=this._layer)===null||M===void 0||M.setStyle(this.options.templineStyle),(A=this._hintline)===null||A===void 0||A.setStyle(this.options.hintlineStyle)}}),pt.CircleMarker=pt.Marker.extend({initialize:function(M){this._map=M,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(M){var A=this;if(L.Util.setOptions(this,M),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var j={};L.extend(j,this.options.templineStyle),j.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker(this._map.getCenter(),j),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(rt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker(this._map.getCenter(),this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(rt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(nt){A.isRelevantMarker(nt)&&nt.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var M=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(A){M.isRelevantMarker(A)&&A.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(M){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(A),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var M=this._centerMarker.getLatLng();M&&(this._layer.setLatLng(M),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(rt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),A=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([M,A])},_syncCircleRadius:function(){var M=this._centerMarker.getLatLng(),A=this._hintMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(j)},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}this._handleHintMarkerSnapping();var j=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(j,"Draw")},isRelevantMarker:function(M){return M instanceof L.CircleMarker&&!(M instanceof L.Circle)&&M.pm&&!M._pmTempLayer},_createMarker:function(M){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&M.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng(),j=L.circleMarker(A,this.options.pathOptions);this._setPane(j,"layerPane"),this._finishLayer(j),j.addTo(this._map.pm._getContainingLayer()),j.pm&&this.options.markerEditable&&j.pm.enable(),this._fireCreate(j),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(M){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._centerMarker.getLatLng(),j=this._hintMarker.getLatLng(),nt=this._map.project(A).distanceTo(this._map.project(j));this.options.editable&&(this.options.minRadiusCircleMarker&&nt<this.options.minRadiusCircleMarker?nt=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&nt>this.options.maxRadiusCircleMarker&&(nt=this.options.maxRadiusCircleMarker));var ht=ue(ue({},this.options.pathOptions),{},{radius:nt}),xt=L.circleMarker(A,ht);this._setPane(xt,"layerPane"),this._finishLayer(xt),xt.addTo(this._map.pm._getContainingLayer()),xt.pm&&xt.pm._updateHiddenPolyCircle(),this._fireCreate(xt),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var M=this._hintMarker.getLatLng();if(this.options.editable){if(!this._layerGroup.hasLayer(this._centerMarker))return M;var A=this._centerMarker.getLatLng(),j=this._map.project(A).distanceTo(this._map.project(M));this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?M=W(this._map,A,M,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker&&(M=W(this._map,A,M,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return M},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var M=this._centerMarker.getLatLng(),A=this._hintMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(M){var A=this._centerMarker.getLatLng(),j=this._map.project(A),nt=L.point(j.x+M,j.y);return this._map.unproject(nt).distanceTo(A)},setStyle:function(){var M,A,j={};L.extend(j,this.options.templineStyle),this.options.editable&&(j.radius=0),(M=this._layer)===null||M===void 0||M.setStyle(j),(A=this._hintline)===null||A===void 0||A.setStyle(this.options.hintlineStyle)}});let ae=function(M){if(!M)throw new Error("geojson is required");var A=[];return jt(M,function(j){(function(nt,ht){var xt=[],Lt=nt.geometry;if(Lt!==null){switch(Lt.type){case"Polygon":xt=Le(Lt);break;case"LineString":xt=[Le(Lt)]}xt.forEach(function(Rt){var Pt=function(Nt,Vt){var ne=[];return Nt.reduce(function(Zt,ge){var Ce,Ne,be,vi,mi,Er,an=Gt([Zt,ge],Vt);return an.bbox=(Ne=ge,be=(Ce=Zt)[0],vi=Ce[1],mi=Ne[0],Er=Ne[1],[be<mi?be:mi,vi<Er?vi:Er,be>mi?be:mi,vi>Er?vi:Er]),ne.push(an),ge}),ne}(Rt,nt.properties);Pt.forEach(function(Nt){Nt.id=ht.length,ht.push(Nt)})})}})(j,A)}),Jt(A)};var Qe=s(1787);function se(M,A){var j=Le(M),nt=Le(A);if(j.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(nt.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var ht=j[0][0],xt=j[0][1],Lt=j[1][0],Rt=j[1][1],Pt=nt[0][0],Nt=nt[0][1],Vt=nt[1][0],ne=nt[1][1],Zt=(ne-Nt)*(Lt-ht)-(Vt-Pt)*(Rt-xt),ge=(Vt-Pt)*(xt-Nt)-(ne-Nt)*(ht-Pt),Ce=(Lt-ht)*(xt-Nt)-(Rt-xt)*(ht-Pt);if(Zt===0)return null;var Ne=ge/Zt,be=Ce/Zt;return Ne>=0&&Ne<=1&&be>=0&&be<=1?zt([ht+Ne*(Lt-ht),xt+Ne*(Rt-xt)]):null}let ve=function(M,A){var j={},nt=[];if(M.type==="LineString"&&(M=Ot(M)),A.type==="LineString"&&(A=Ot(A)),M.type==="Feature"&&A.type==="Feature"&&M.geometry!==null&&A.geometry!==null&&M.geometry.type==="LineString"&&A.geometry.type==="LineString"&&M.geometry.coordinates.length===2&&A.geometry.coordinates.length===2){var ht=se(M,A);return ht&&nt.push(ht),Jt(nt)}var xt=Qe();return xt.load(ae(A)),At(ae(M),function(Lt){At(xt.search(Lt),function(Rt){var Pt=se(Lt,Rt);if(Pt){var Nt=Le(Pt).join(",");j[Nt]||(j[Nt]=!0,nt.push(Pt))}})}),Jt(nt)},$e=function(M,A,j){j===void 0&&(j={});var nt=ar(M),ht=ar(A),xt=Ut(ht[1]-nt[1]),Lt=Ut(ht[0]-nt[0]),Rt=Ut(nt[1]),Pt=Ut(ht[1]),Nt=Math.pow(Math.sin(xt/2),2)+Math.pow(Math.sin(Lt/2),2)*Math.cos(Rt)*Math.cos(Pt);return Kt(2*Math.atan2(Math.sqrt(Nt),Math.sqrt(1-Nt)),j.units)},Ae=function(M){var A=M[0],j=M[1],nt=M[2],ht=M[3];if($e(M.slice(0,2),[nt,j])>=$e(M.slice(0,2),[A,ht])){var xt=(j+ht)/2;return[A,xt-(nt-A)/2,nt,xt+(nt-A)/2]}var Lt=(A+nt)/2;return[Lt-(ht-j)/2,j,Lt+(ht-j)/2,ht]};function fe(M){var A=[1/0,1/0,-1/0,-1/0];return We(M,function(j){A[0]>j[0]&&(A[0]=j[0]),A[1]>j[1]&&(A[1]=j[1]),A[2]<j[0]&&(A[2]=j[0]),A[3]<j[1]&&(A[3]=j[1])}),A}fe.default=fe;let Ye=fe,Ve=function(M,A){A===void 0&&(A={});var j=A.precision,nt=A.coordinates,ht=A.mutate;if(j=j==null||isNaN(j)?6:j,nt=nt==null||isNaN(nt)?3:nt,!M)throw new Error("<geojson> is required");if(typeof j!="number")throw new Error("<precision> must be a number");if(typeof nt!="number")throw new Error("<coordinates> must be a number");ht!==!1&&ht!==void 0||(M=JSON.parse(JSON.stringify(M)));var xt=Math.pow(10,j);return We(M,function(Lt){(function(Rt,Pt,Nt){Rt.length>Nt&&Rt.splice(Nt,Rt.length);for(var Vt=0;Vt<Rt.length;Vt++)Rt[Vt]=Math.round(Rt[Vt]*Pt)/Pt})(Lt,xt,nt)}),M};function rr(M,A,j){if(j===void 0&&(j={}),j.final===!0)return function(ne,Zt){var ge=rr(Zt,ne);return ge=(ge+180)%360}(M,A);var nt=ar(M),ht=ar(A),xt=Ut(nt[0]),Lt=Ut(ht[0]),Rt=Ut(nt[1]),Pt=Ut(ht[1]),Nt=Math.sin(Lt-xt)*Math.cos(Pt),Vt=Math.cos(Rt)*Math.sin(Pt)-Math.sin(Rt)*Math.cos(Pt)*Math.cos(Lt-xt);return Xt(Math.atan2(Nt,Vt))}function Ke(M,A,j,nt){nt===void 0&&(nt={});var ht=ar(M),xt=Ut(ht[0]),Lt=Ut(ht[1]),Rt=Ut(j),Pt=re(A,nt.units),Nt=Math.asin(Math.sin(Lt)*Math.cos(Pt)+Math.cos(Lt)*Math.sin(Pt)*Math.cos(Rt));return zt([Xt(xt+Math.atan2(Math.sin(Rt)*Math.sin(Pt)*Math.cos(Lt),Math.cos(Pt)-Math.sin(Lt)*Math.sin(Nt))),Xt(Nt)],nt.properties)}let pi=function(M,A,j){j===void 0&&(j={});var nt=zt([1/0,1/0],{dist:1/0}),ht=0;return jt(M,function(xt){for(var Lt=Le(xt),Rt=0;Rt<Lt.length-1;Rt++){var Pt=zt(Lt[Rt]);Pt.properties.dist=$e(A,Pt,j);var Nt=zt(Lt[Rt+1]);Nt.properties.dist=$e(A,Nt,j);var Vt=$e(Pt,Nt,j),ne=Math.max(Pt.properties.dist,Nt.properties.dist),Zt=rr(Pt,Nt),ge=Ke(A,ne,Zt+90,j),Ce=Ke(A,ne,Zt-90,j),Ne=ve(Gt([ge.geometry.coordinates,Ce.geometry.coordinates]),Gt([Pt.geometry.coordinates,Nt.geometry.coordinates])),be=null;Ne.features.length>0&&((be=Ne.features[0]).properties.dist=$e(A,be,j),be.properties.location=ht+$e(Pt,be,j)),Pt.properties.dist<nt.properties.dist&&((nt=Pt).properties.index=Rt,nt.properties.location=ht),Nt.properties.dist<nt.properties.dist&&((nt=Nt).properties.index=Rt+1,nt.properties.location=ht+Vt),be&&be.properties.dist<nt.properties.dist&&((nt=be).properties.index=Rt),ht+=Vt}}),nt};function Je(M,A){var j=[],nt=Qe();return jt(A,function(ht){if(j.forEach(function(Rt,Pt){Rt.id=Pt}),j.length){var xt=nt.search(ht);if(xt.features.length){var Lt=ci(ht,xt);j=j.filter(function(Rt){return Rt.id!==Lt.id}),nt.remove(Lt),At(or(Lt,ht),function(Rt){j.push(Rt),nt.insert(Rt)})}}else(j=or(M,ht).features).forEach(function(Rt){Rt.bbox||(Rt.bbox=Ae(Ye(Rt)))}),nt.load(Jt(j))}),Jt(j)}function or(M,A){var j=[],nt=Le(M)[0],ht=Le(M)[M.geometry.coordinates.length-1];if(kr(nt,ar(A))||kr(ht,ar(A)))return Jt([M]);var xt=Qe(),Lt=ae(M);xt.load(Lt);var Rt=xt.search(A);if(!Rt.features.length)return Jt([M]);var Pt=ci(A,Rt),Nt=function(Vt,ne,Zt){var ge=Zt;return At(Vt,function(Ce,Ne){ge=Ne===0&&Zt===void 0?Ce:ne(ge,Ce,Ne)}),ge}(Lt,function(Vt,ne,Zt){var ge=Le(ne)[1],Ce=ar(A);return Zt===Pt.id?(Vt.push(Ce),j.push(Gt(Vt)),kr(Ce,ge)?[Ce]:[Ce,ge]):(Vt.push(ge),Vt)},[nt]);return Nt.length>1&&j.push(Gt(Nt)),Jt(j)}function ci(M,A){if(!A.features.length)throw new Error("lines must contain features");if(A.features.length===1)return A.features[0];var j,nt=1/0;return At(A,function(ht){var xt=pi(ht,M).properties.dist;xt<nt&&(j=ht,nt=xt)}),j}function kr(M,A){return M[0]===A[0]&&M[1]===A[1]}let Tt=function(M,A){if(!M)throw new Error("line is required");if(!A)throw new Error("splitter is required");var j=ri(M),nt=ri(A);if(j!=="LineString")throw new Error("line must be LineString");if(nt==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(nt==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var ht=Ve(A,{precision:7});switch(nt){case"Point":return or(M,ht);case"MultiPoint":return Je(M,ht);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Je(M,ve(M,ht))}};function Ht(M,A,j){if(j===void 0&&(j={}),!M)throw new Error("point is required");if(!A)throw new Error("polygon is required");var nt=ar(M),ht=Oe(A),xt=ht.type,Lt=A.bbox,Rt=ht.coordinates;if(Lt&&function(Zt,ge){return ge[0]<=Zt[0]&&ge[1]<=Zt[1]&&ge[2]>=Zt[0]&&ge[3]>=Zt[1]}(nt,Lt)===!1)return!1;xt==="Polygon"&&(Rt=[Rt]);for(var Pt=!1,Nt=0;Nt<Rt.length&&!Pt;Nt++)if(ie(nt,Rt[Nt][0],j.ignoreBoundary)){for(var Vt=!1,ne=1;ne<Rt[Nt].length&&!Vt;)ie(nt,Rt[Nt][ne],!j.ignoreBoundary)&&(Vt=!0),ne++;Vt||(Pt=!0)}return Pt}function ie(M,A,j){var nt=!1;A[0][0]===A[A.length-1][0]&&A[0][1]===A[A.length-1][1]&&(A=A.slice(0,A.length-1));for(var ht=0,xt=A.length-1;ht<A.length;xt=ht++){var Lt=A[ht][0],Rt=A[ht][1],Pt=A[xt][0],Nt=A[xt][1];if(M[1]*(Lt-Pt)+Rt*(Pt-M[0])+Nt*(M[0]-Lt)==0&&(Lt-M[0])*(Pt-M[0])<=0&&(Rt-M[1])*(Nt-M[1])<=0)return!j;Rt>M[1]!=Nt>M[1]&&M[0]<(Pt-Lt)*(M[1]-Rt)/(Nt-Rt)+Lt&&(nt=!nt)}return nt}function Qt(M,A,j,nt,ht){var xt=j[0],Lt=j[1],Rt=M[0],Pt=M[1],Nt=A[0],Vt=A[1],ne=Nt-Rt,Zt=Vt-Pt,ge=(j[0]-Rt)*Zt-(j[1]-Pt)*ne;if(ht!==null){if(Math.abs(ge)>ht)return!1}else if(ge!==0)return!1;return nt?nt==="start"?Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<xt&&xt<=Nt:Nt<=xt&&xt<Rt:Zt>0?Pt<Lt&&Lt<=Vt:Vt<=Lt&&Lt<Pt:nt==="end"?Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<=xt&&xt<Nt:Nt<xt&&xt<=Rt:Zt>0?Pt<=Lt&&Lt<Vt:Vt<Lt&&Lt<=Pt:nt==="both"&&(Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<xt&&xt<Nt:Nt<xt&&xt<Rt:Zt>0?Pt<Lt&&Lt<Vt:Vt<Lt&&Lt<Pt):Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<=xt&&xt<=Nt:Nt<=xt&&xt<=Rt:Zt>0?Pt<=Lt&&Lt<=Vt:Vt<=Lt&&Lt<=Pt}let he=function(M,A,j){j===void 0&&(j={});for(var nt=ar(M),ht=Le(A),xt=0;xt<ht.length-1;xt++){var Lt=!1;if(j.ignoreEndVertices&&(xt===0&&(Lt="start"),xt===ht.length-2&&(Lt="end"),xt===0&&xt+1===ht.length-1&&(Lt="both")),Qt(ht[xt],ht[xt+1],nt,Lt,typeof j.epsilon>"u"?null:j.epsilon))return!0}return!1};function Ee(M,A){var j=Oe(M),nt=Oe(A),ht=j.type,xt=nt.type,Lt=j.coordinates,Rt=nt.coordinates;switch(ht){case"Point":if(xt==="Point")return tr(Lt,Rt);throw new Error("feature2 "+xt+" geometry not supported");case"MultiPoint":switch(xt){case"Point":return function(Pt,Nt){var Vt,ne=!1;for(Vt=0;Vt<Pt.coordinates.length;Vt++)if(tr(Pt.coordinates[Vt],Nt.coordinates)){ne=!0;break}return ne}(j,nt);case"MultiPoint":return function(Pt,Nt){for(var Vt=0,ne=Nt.coordinates;Vt<ne.length;Vt++){for(var Zt=ne[Vt],ge=!1,Ce=0,Ne=Pt.coordinates;Ce<Ne.length;Ce++)if(tr(Zt,Ne[Ce])){ge=!0;break}if(!ge)return!1}return!0}(j,nt);default:throw new Error("feature2 "+xt+" geometry not supported")}case"LineString":switch(xt){case"Point":return he(nt,j,{ignoreEndVertices:!0});case"LineString":return function(Pt,Nt){for(var Vt=!1,ne=0,Zt=Nt.coordinates;ne<Zt.length;ne++){var ge=Zt[ne];if(he({type:"Point",coordinates:ge},Pt,{ignoreEndVertices:!0})&&(Vt=!0),!he({type:"Point",coordinates:ge},Pt,{ignoreEndVertices:!1}))return!1}return Vt}(j,nt);case"MultiPoint":return function(Pt,Nt){for(var Vt=!1,ne=0,Zt=Nt.coordinates;ne<Zt.length;ne++){var ge=Zt[ne];if(he(ge,Pt,{ignoreEndVertices:!0})&&(Vt=!0),!he(ge,Pt))return!1}return!!Vt}(j,nt);default:throw new Error("feature2 "+xt+" geometry not supported")}case"Polygon":switch(xt){case"Point":return Ht(nt,j,{ignoreBoundary:!0});case"LineString":return function(Pt,Nt){var Vt=!1,ne=0,Zt=Ye(Pt),ge=Ye(Nt);if(!Ie(Zt,ge))return!1;for(;ne<Nt.coordinates.length-1;ne++)if(Ht({type:"Point",coordinates:Ue(Nt.coordinates[ne],Nt.coordinates[ne+1])},Pt,{ignoreBoundary:!0})){Vt=!0;break}return Vt}(j,nt);case"Polygon":return function(Pt,Nt){if(Pt.type==="Feature"&&Pt.geometry===null||Nt.type==="Feature"&&Nt.geometry===null)return!1;var Vt=Ye(Pt),ne=Ye(Nt);if(!Ie(Vt,ne))return!1;for(var Zt=Oe(Nt).coordinates,ge=0,Ce=Zt;ge<Ce.length;ge++)for(var Ne=0,be=Ce[ge];Ne<be.length;Ne++)if(!Ht(be[Ne],Pt))return!1;return!0}(j,nt);case"MultiPoint":return function(Pt,Nt){for(var Vt=0,ne=Nt.coordinates;Vt<ne.length;Vt++)if(!Ht(ne[Vt],Pt,{ignoreBoundary:!0}))return!1;return!0}(j,nt);default:throw new Error("feature2 "+xt+" geometry not supported")}default:throw new Error("feature1 "+ht+" geometry not supported")}}function Ie(M,A){return!(M[0]>A[0])&&!(M[2]<A[2])&&!(M[1]>A[1])&&!(M[3]<A[3])}function tr(M,A){return M[0]===A[0]&&M[1]===A[1]}function Ue(M,A){return[(M[0]+A[0])/2,(M[1]+A[1])/2]}var we=s(2676),pe=s.n(we);function yr(M){var A={type:"Feature"};return A.geometry=M,A}function ir(M){return M.type==="Feature"?M.geometry:M}function lr(M){return M&&M.geometry&&M.geometry.coordinates?M.geometry.coordinates:M}function wr(M){return yr({type:"Polygon",coordinates:M})}function me(M){return yr({type:"MultiPolygon",coordinates:M})}function ur(M){return Array.isArray(M)?1+ur(M[0]):-1}function bi(M){M instanceof L.Polyline&&(M=M.toGeoJSON(15));var A=lr(M),j=ur(A),nt=[];return j>1?A.forEach(function(ht){nt.push(function(xt){return yr({type:"LineString",coordinates:xt})}(ht))}):nt.push(M),nt}function Xi(M){var A=[];return M.eachLayer(function(j){A.push(lr(j.toGeoJSON(15)))}),function(j){return yr({type:"MultiLineString",coordinates:j})}(A)}function Se(M,A){return function(j){if(Array.isArray(j))return j}(M)||function(j,nt){var ht=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(ht!=null){var xt,Lt,Rt=[],Pt=!0,Nt=!1;try{for(ht=ht.call(j);!(Pt=(xt=ht.next()).done)&&(Rt.push(xt.value),!nt||Rt.length!==nt);Pt=!0);}catch(Vt){Nt=!0,Lt=Vt}finally{try{Pt||ht.return==null||ht.return()}finally{if(Nt)throw Lt}}return Rt}}(M,A)||function(j,nt){if(j){if(typeof j=="string")return Ln(j,nt);var ht=Object.prototype.toString.call(j).slice(8,-1);if(ht==="Object"&&j.constructor&&(ht=j.constructor.name),ht==="Map"||ht==="Set")return Array.from(j);if(ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return Ln(j,nt)}}(M,A)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ln(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}function Vn(M){return function(A){if(Array.isArray(A))return nr(A)}(M)||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(M)||function(A,j){if(A){if(typeof A=="string")return nr(A,j);var nt=Object.prototype.toString.call(A).slice(8,-1);if(nt==="Object"&&A.constructor&&(nt=A.constructor.name),nt==="Map"||nt==="Set")return Array.from(A);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return nr(A,j)}}(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nr(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}pt.Cut=pt.Polygon.extend({initialize:function(M){this._map=M,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var M=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var A=this._layer.getLatLngs();if(!(A.length<=2)){var j=L.polygon(A,this.options.pathOptions);j._latlngInfos=this._layer._latlngInfo,this.cut(j),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(nt){var ht=nt.layer,xt=nt.originalLayer;M._fireCut(xt,ht,xt),M._fireCut(M._map,ht,xt),xt.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(M){var A=this,j=this._map._layers,nt=M._latlngInfos||[];Object.keys(j).map(function(ht){return j[ht]}).filter(function(ht){return ht.pm}).filter(function(ht){return!ht._pmTempLayer}).filter(function(ht){return!L.PM.optIn&&!ht.options.pmIgnore||L.PM.optIn&&ht.options.pmIgnore===!1}).filter(function(ht){return ht instanceof L.Polyline}).filter(function(ht){return ht!==M}).filter(function(ht){return ht.pm.options.allowCutting}).filter(function(ht){return!(A.options.layersToCut&&L.Util.isArray(A.options.layersToCut)&&A.options.layersToCut.length>0)||A.options.layersToCut.indexOf(ht)>-1}).filter(function(ht){return!A._layerGroup.hasLayer(ht)}).filter(function(ht){try{var xt=!!ve(M.toGeoJSON(15),ht.toGeoJSON(15)).features.length>0;return xt||ht instanceof L.Polyline&&!(ht instanceof L.Polygon)?xt:(Lt=M.toGeoJSON(15),Rt=ht.toGeoJSON(15),Pt=ir(Lt),Nt=ir(Rt),!((Vt=pe().intersection(Pt.coordinates,Nt.coordinates)).length===0||!(Vt.length===1?wr(Vt[0]):me(Vt))))}catch{return ht instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var Lt,Rt,Pt,Nt,Vt}).forEach(function(ht){var xt;if(ht instanceof L.Polygon){var Lt=(xt=L.polygon(ht.getLatLngs())).getLatLngs();nt.forEach(function(Zt){if(Zt&&Zt.snapInfo){var ge=Zt.latlng,Ce=A._calcClosestLayer(ge,[xt]);if(Ce&&Ce.segment&&Ce.distance<A.options.snapDistance){var Ne=Ce.segment;if(Ne&&Ne.length===2){var be=L.PM.Utils._getIndexFromSegment(Lt,Ne),vi=be.indexPath,mi=be.parentPath,Er=be.newIndex;(vi.length>1?R()(Lt,mi):Lt).splice(Er,0,ge)}}}})}else xt=ht;var Rt=A._cutLayer(M,xt),Pt=L.geoJSON(Rt,ht.options);if(Pt.getLayers().length===1){var Nt=Pt.getLayers();Pt=Se(Nt,1)[0]}A._setPane(Pt,"layerPane");var Vt=Pt.addTo(A._map.pm._getContainingLayer());if(Vt.pm.enable(ht.pm.options),Vt.pm.disable(),ht._pmTempLayer=!0,M._pmTempLayer=!0,ht.remove(),ht.removeFrom(A._map.pm._getContainingLayer()),M.remove(),M.removeFrom(A._map.pm._getContainingLayer()),Vt.getLayers&&Vt.getLayers().length===0&&A._map.pm.removeLayer({target:Vt}),Vt instanceof L.LayerGroup&&Vt.eachLayer(function(Zt){A._addDrawnLayerProp(Zt)}),A._addDrawnLayerProp(Vt),A.options.layersToCut&&L.Util.isArray(A.options.layersToCut)&&A.options.layersToCut.length>0){var ne=A.options.layersToCut.indexOf(ht);ne>-1&&A.options.layersToCut.splice(ne,1)}A._editedLayers.push({layer:Vt,originalLayer:ht})})},_cutLayer:function(M,A){var j,nt,ht,xt,Lt,Rt,Pt=L.geoJSON();if(A instanceof L.Polygon)nt=A.toGeoJSON(15),ht=M.toGeoJSON(15),xt=ir(nt),Lt=ir(ht),j=(Rt=pe().difference(xt.coordinates,Lt.coordinates)).length===0?null:Rt.length===1?wr(Rt[0]):me(Rt);else{var Nt=bi(A);Nt.forEach(function(Vt){var ne=Tt(Vt,M.toGeoJSON(15));(ne&&ne.features.length>0?L.geoJSON(ne):L.geoJSON(Vt)).getLayers().forEach(function(Zt){Ee(M.toGeoJSON(15),Zt.toGeoJSON(15))||Zt.addTo(Pt)})}),j=Nt.length>1?Xi(Pt):Pt.toGeoJSON(15)}return j},_change:L.Util.falseFn}),pt.Text=pt.extend({initialize:function(M){this._map=M,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(M){L.Util.setOptions(this,M),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(rt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}},_createMarker:function(M){var A;if(M.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var j=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(A=this.options.textOptions)!==null&&A!==void 0&&A.className){var nt,ht=this.options.textOptions.className.split(" ");(nt=this.textArea.classList).add.apply(nt,Vn(ht))}var xt=this._createTextIcon(this.textArea),Lt=new L.Marker(j,{textMarker:!0,_textMarkerOverPM:!0,icon:xt});if(this._setPane(Lt,"markerPane"),this._finishLayer(Lt),Lt.pm||(Lt.options.draggable=!1),Lt.addTo(this._map.pm._getContainingLayer()),Lt.pm){var Rt,Pt,Nt,Vt,ne;Lt.pm.textArea=this.textArea,L.setOptions(Lt.pm,{removeIfEmpty:(Rt=(Pt=this.options.textOptions)===null||Pt===void 0?void 0:Pt.removeIfEmpty)===null||Rt===void 0||Rt});var Zt=(Nt=(Vt=this.options.textOptions)===null||Vt===void 0?void 0:Vt.focusAfterDraw)===null||Nt===void 0||Nt;Lt.pm._createTextMarker(Zt),(ne=this.options.textOptions)!==null&&ne!==void 0&&ne.text&&Lt.pm.setText(this.options.textOptions.text)}this._fireCreate(Lt),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var M=document.createElement("textarea");return M.autofocus=!0,M.readOnly=!0,M.classList.add("pm-textarea","pm-disabled"),M},_createTextIcon:function(M){return L.divIcon({className:"pm-text-marker",html:M})}});let ze={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,wt(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var M=this._getDOMElem();M&&(wt(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(M)):L.DomEvent.on(M,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,wt(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var M=this._getDOMElem();M&&(wt(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(M)):L.DomEvent.off(M,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(M){var A=M.touches?M.touches[0]:M,j={originalEvent:A,target:this._layer};return j.containerPoint=this._map.mouseEventToContainerPoint(A),j.latlng=this._map.containerPointToLatLng(j.containerPoint),this._dragMixinOnMouseDown(j),!1},_simulateMouseMoveEvent:function(M){var A=M.touches?M.touches[0]:M,j={originalEvent:A,target:this._layer};return j.containerPoint=this._map.mouseEventToContainerPoint(A),j.latlng=this._map.containerPointToLatLng(j.containerPoint),this._dragMixinOnMouseMove(j),!1},_simulateMouseUpEvent:function(M){var A={originalEvent:M.touches?M.touches[0]:M,target:this._layer};return M.type.indexOf("touch")===-1&&(A.containerPoint=this._map.mouseEventToContainerPoint(M),A.latlng=this._map.containerPointToLatLng(A.containerPoint)),this._dragMixinOnMouseUp(A),!1},_dragMixinOnMouseDown:function(M){if(!(M.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(M);var A=M._fromLayerSync,j=this._syncLayers("_dragMixinOnMouseDown",M);this._layer instanceof L.Marker&&(!this.options.snappable||A||j?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||A||j?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=M.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(M){this._overwriteEventIfItComesFromMarker(M);var A=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",M),this._dragging||(this._dragging=!0,L.DomUtil.addClass(A,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=M.latlng),this._onLayerDrag(M),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(M){var A=this,j=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",M),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){A._dragging=!1,j&&L.DomUtil.removeClass(j,"leaflet-pm-dragging"),A._fireDragEnd(),A._fireEdit(),A._layerEdited=!0},10),!0)},_onLayerDrag:function(M){var A=M.latlng,j=A.lat-this._tempDragCoord.lat,nt=A.lng-this._tempDragCoord.lng,ht=function Vt(ne){return ne.map(function(Zt){if(Array.isArray(Zt))return Vt(Zt);var ge={lat:Zt.lat+j,lng:Zt.lng+nt};return(Zt.alt||Zt.alt===0)&&(ge.alt=Zt.alt),ge})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var xt=ht([this._layer.getLatLng()]);this._layer.setLatLng(xt[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var Lt=this._layer.getLatLng();this._layer._snapped&&(Lt=this._layer._orgLatLng);var Rt=ht([Lt]);this._layer.setLatLng(Rt[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var Pt=ht([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(Pt),this._fireChange(this._layer.getBounds(),"Edit")}else{var Nt=ht(this._layer.getLatLngs());this._layer.setLatLngs(Nt),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=A,M.layer=this._layer,this._fireDrag(M)},addDraggingClass:function(){var M=this._getDOMElem();M&&L.DomUtil.addClass(M,"leaflet-pm-draggable")},removeDraggingClass:function(){var M=this._getDOMElem();M&&L.DomUtil.removeClass(M,"leaflet-pm-draggable")},_getDOMElem:function(){var M=null;return this._layer._path?M=this._layer._path:this._layer._renderer&&this._layer._renderer._container?M=this._layer._renderer._container:this._layer._image?M=this._layer._image:this._layer._icon&&(M=this._layer._icon),M},_overwriteEventIfItComesFromMarker:function(M){M.target.getLatLng&&(!M.target._radius||M.target._radius<=10)&&(M.containerPoint=this._map.mouseEventToContainerPoint(M.originalEvent),M.latlng=this._map.containerPointToLatLng(M.containerPoint))},_syncLayers:function(M,A){var j=this;if(this.enabled())return!1;if(!A._fromLayerSync&&this._layer===A.target&&this.options.syncLayersOnDrag){A._fromLayerSync=!0;var nt=[];if(L.Util.isArray(this.options.syncLayersOnDrag))nt=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(Lt){Lt instanceof L.LayerGroup&&(nt=nt.concat(Lt.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var ht in this._parentLayerGroup){var xt=this._parentLayerGroup[ht];xt.pm&&(nt=xt.pm.getLayers(!0))}return L.Util.isArray(nt)&&nt.length>0&&(nt=nt.filter(function(Lt){return!!Lt.pm}).filter(function(Lt){return!!Lt.pm.options.draggable})).forEach(function(Lt){Lt!==j._layer&&Lt.pm[M]&&(Lt._snapped=!1,Lt.pm[M](A))}),nt.length>0}return!1},_stopDOMImageDrag:function(M){return M.preventDefault(),!1}};function Ti(M,A,j){var nt=j.getMaxZoom();if(nt===1/0&&(nt=j.getZoom()),L.Util.isArray(M)){var ht=[];return M.forEach(function(xt){ht.push(Ti(xt,A,j))}),ht}return M instanceof L.LatLng?function(xt,Lt,Rt,Pt){return Rt.unproject(Lt.transform(Rt.project(xt,Pt)),Pt)}(M,A,j,nt):null}function Ri(M,A){A instanceof L.Layer&&(A=A.getLatLng());var j=M.getMaxZoom();return j===1/0&&(j=M.getZoom()),M.project(A,j)}function bn(M,A){var j=M.getMaxZoom();return j===1/0&&(j=M.getZoom()),M.unproject(A,j)}var oe={_onRotateStart:function(M){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ri(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ri(this._map,M.target.getLatLng()),this._initialRotateLatLng=it(this._layer),this._startAngle=this.getAngle();var A=it(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,A),this._fireRotationStart(this._map,A)},_onRotate:function(M){var A=Ri(this._map,M.target.getLatLng()),j=this._rotationStartPoint,nt=this._rotationOriginPoint,ht=Math.atan2(A.y-nt.y,A.x-nt.x)-Math.atan2(j.y-nt.y,j.x-nt.x);this._layer.setLatLngs(this._rotateLayer(ht,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var xt=this;(function Nt(Vt){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(Zt>-1&&ne.push(Zt),L.Util.isArray(Vt[0]))Vt.forEach(function(Ce,Ne){return Nt(Ce,ne.slice(),Ne)});else{var ge=R()(xt._markers,ne);Vt.forEach(function(Ce,Ne){ge[Ne].setLatLng(Ce)})}})(this._layer.getLatLngs());var Lt=it(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(ht,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var Rt=180*ht/Math.PI,Pt=(Rt=Rt<0?Rt+360:Rt)+this._startAngle;this._setAngle(Pt),this._rotationLayer.pm._setAngle(Pt),this._fireRotation(this._rotationLayer,Rt,Lt),this._fireRotation(this._map,Rt,Lt),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var M=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var A=it(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=it(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,M,A),this._fireRotationEnd(this._map,M,A),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(M,A,j,nt,ht){var xt=Ri(ht,j);return this._matrix=nt.clone().rotate(M,xt).flip(),Ti(A,this._matrix,ht)},_setAngle:function(M){M=M<0?M+360:M,this._angle=M%360},_getRotationCenter:function(){var M=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),A=M.getCenter();return M.removeFrom(this._layer._map),A},enableRotate:function(){this.options.allowRotation?(this.rotateEnabled()&&this.disableRotate(),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=it(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(M){var A=this.getAngle(),j=this._layer.getLatLngs(),nt=M*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(nt,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+M),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(nt,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var ht=this.getAngle()-A;ht=ht<0?ht+360:ht,this._startAngle=A,this._fireRotation(this._layer,ht,j,this._layer),this._fireRotation(this._map||this._layer._map,ht,j,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(M){var A=M-this.getAngle();this.rotateLayer(A)},getAngle:function(){return this._angle||0},setInitAngle:function(M){this._setAngle(M)}};let Ii=oe,gr=L.Class.extend({includes:[ze,lt,Ii,C],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(M){L.Util.setOptions(this,M)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(M,A){A==="layerPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":A==="vertexPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":A==="markerPane"&&(M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(M,A){var j=A.target,nt={layer:this._layer,marker:j,event:A},ht="";return M==="move"?ht="moveVertexValidation":M==="add"?ht="addVertexValidation":M==="remove"&&(ht="removeVertexValidation"),this.options[ht]&&typeof this.options[ht]=="function"&&!this.options[ht](nt)?(M==="move"&&(j._cancelDragEventChain=j.getLatLng()),!1):(j._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(M){return!M._cancelDragEventChain||(M._latlng=M._cancelDragEventChain,M.update(),!1)},_vertexValidationDragEnd:function(M){return!M._cancelDragEventChain||(M._cancelDragEventChain=null,!1)}});function _i(M){return function(A){if(Array.isArray(A))return on(A)}(M)||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(M)||function(A,j){if(A){if(typeof A=="string")return on(A,j);var nt=Object.prototype.toString.call(A).slice(8,-1);if(nt==="Object"&&A.constructor&&(nt=A.constructor.name),nt==="Map"||nt==="Set")return Array.from(A);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return on(A,j)}}(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function on(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}gr.LayerGroup=L.Class.extend({initialize:function(M){var A=this;this._layerGroup=M,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(j){return A._initLayer(j)}),this._layerGroup.on("layeradd",L.Util.throttle(function(j){if(!j.layer._pmTempLayer){A._layers=A.getLayers();var nt=A._layers.filter(function(ht){return!ht.pm._parentLayerGroup||!(A._layerGroup._leaflet_id in ht.pm._parentLayerGroup)});nt.forEach(function(ht){A._initLayer(ht)}),nt.length>0&&A._getMap()&&A._getMap().pm.globalEditModeEnabled()&&A.enabled()&&A.enable(A.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(j){A._removeLayerFromGroup(j.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(j){j.target._pmTempLayer||(A._layers=A.getLayers())},100,this),this)},enable:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];A.length===0&&(this._layers=this.getLayers()),this._options=M,this._layers.forEach(function(j){j instanceof L.LayerGroup?A.indexOf(j._leaflet_id)===-1&&(A.push(j._leaflet_id),j.pm.enable(M,A)):j.pm.enable(M)})},disable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];M.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(A){A instanceof L.LayerGroup?M.indexOf(A._leaflet_id)===-1&&(M.push(A._leaflet_id),A.pm.disable(M)):A.pm.disable()})},enabled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];M.length===0&&(this._layers=this.getLayers());var A=this._layers.find(function(j){return j instanceof L.LayerGroup?M.indexOf(j._leaflet_id)===-1&&(M.push(j._leaflet_id),j.pm.enabled(M)):j.pm.enabled()});return!!A},toggleEdit:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];A.length===0&&(this._layers=this.getLayers()),this._options=M,this._layers.forEach(function(j){j instanceof L.LayerGroup?A.indexOf(j._leaflet_id)===-1&&(A.push(j._leaflet_id),j.pm.toggleEdit(M,A)):j.pm.toggleEdit(M)})},_initLayer:function(M){var A=L.Util.stamp(this._layerGroup);M.pm._parentLayerGroup||(M.pm._parentLayerGroup={}),M.pm._parentLayerGroup[A]=this._layerGroup},_removeLayerFromGroup:function(M){if(M.pm&&M.pm._layerGroup){var A=L.Util.stamp(this._layerGroup);delete M.pm._layerGroup[A]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var M=this._layers.find(function(A){return A.pm.dragging()});return!!M}return!1},getOptions:function(){return this.options},_getMap:function(){var M;return this._map||((M=this._layers.find(function(A){return!!A._map}))===null||M===void 0?void 0:M._map)||null},getLayers:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],A=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],j=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],ht=[];return M?this._layerGroup.getLayers().forEach(function(xt){ht.push(xt),xt instanceof L.LayerGroup&&nt.indexOf(xt._leaflet_id)===-1&&(nt.push(xt._leaflet_id),ht=ht.concat(xt.pm.getLayers(!0,!0,!0,nt)))}):ht=this._layerGroup.getLayers(),j&&(ht=ht.filter(function(xt){return!(xt instanceof L.LayerGroup)})),A&&(ht=(ht=(ht=ht.filter(function(xt){return!!xt.pm})).filter(function(xt){return!xt._pmTempLayer})).filter(function(xt){return!L.PM.optIn&&!xt.options.pmIgnore||L.PM.optIn&&xt.options.pmIgnore===!1})),ht},setOptions:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];A.length===0&&(this._layers=this.getLayers()),this.options=M,this._layers.forEach(function(j){j.pm&&(j instanceof L.LayerGroup?A.indexOf(j._leaflet_id)===-1&&(A.push(j._leaflet_id),j.pm.setOptions(M,A)):j.pm.setOptions(M))})}}),gr.Marker=gr.extend({_shape:"Marker",initialize:function(M){this._layer=M,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,M),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(M){var A=M.target;A.remove(),this._fireRemove(A),this._fireRemove(this._map,A)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var M=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,M.off("pm:drag",this._handleSnapping,this),M.on("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.on("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this),M.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var M=this._layer;M.off("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this)}});let yi={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var M=[].concat(_i(this._markerGroup.getLayers()),_i(this.markerCache));this.markerCache=M.filter(function(A,j,nt){return nt.indexOf(A)===j})},renderLimits:function(M){var A=this;this.markerCache.forEach(function(j){M.includes(j)?A._markerGroup.addLayer(j):A._markerGroup.removeLayer(j)})},applyLimitFilters:function(M){var A=M.latlng,j=A===void 0?{lat:0,lng:0}:A;if(!this._preventRenderMarkers){var nt=_i(this._filterClosestMarkers(j));this.renderLimits(nt)}},_filterClosestMarkers:function(M){var A=_i(this.markerCache),j=this.options.limitMarkersToCount;return j===-1?A:(A.sort(function(nt,ht){return nt._latlng.distanceTo(M)-ht._latlng.distanceTo(M)}),A.filter(function(nt,ht){return!(j>-1)||ht<j}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(M){this._preventRenderMarkers=!!M}};function hr(M,A){return function(j){if(Array.isArray(j))return j}(M)||function(j,nt){var ht=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(ht!=null){var xt,Lt,Rt=[],Pt=!0,Nt=!1;try{for(ht=ht.call(j);!(Pt=(xt=ht.next()).done)&&(Rt.push(xt.value),!nt||Rt.length!==nt);Pt=!0);}catch(Vt){Nt=!0,Lt=Vt}finally{try{Pt||ht.return==null||ht.return()}finally{if(Nt)throw Lt}}return Rt}}(M,A)||function(j,nt){if(j){if(typeof j=="string")return fr(j,nt);var ht=Object.prototype.toString.call(j).slice(8,-1);if(ht==="Object"&&j.constructor&&(ht=j.constructor.name),ht==="Map"||ht==="Set")return Array.from(j);if(ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return fr(j,nt)}}(M,A)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fr(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}function Tr(M){return function(A){if(Array.isArray(A))return $i(A)}(M)||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(M)||function(A,j){if(A){if(typeof A=="string")return $i(A,j);var nt=Object.prototype.toString.call(A).slice(8,-1);if(nt==="Object"&&A.constructor&&(nt=A.constructor.name),nt==="Map"||nt==="Set")return Array.from(A);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return $i(A,j)}}(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $i(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}gr.Line=gr.extend({includes:[yi],_shape:"Line",initialize:function(M){this._layer=M,this._enabled=!1},enable:function(M){L.Util.setOptions(this,M),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var M=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(M,"leaflet-pm-draggable"),this._map.hasLayer(this._layer)&&!this.hasSelfIntersection()||L.DomUtil.removeClass(M,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(M){return this.enabled()?this.disable():this.enable(M),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var M=this,A=this._map,j=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function nt(ht){if(Array.isArray(ht[0]))return ht.map(nt,M);var xt=ht.map(M._createMarker,M);return M.options.hideMiddleMarkers!==!0&&ht.map(function(Lt,Rt){var Pt=M.isPolygon()?(Rt+1)%ht.length:Rt+1;return M._createMiddleMarker(xt[Rt],xt[Pt])}),xt}(j),this.filterMarkerGroup(),A.addLayer(this._markerGroup)},_createMarker:function(M){var A=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._pmTempLayer=!0,this.options.rotate?(A.on("dragstart",this._onRotateStart,this),A.on("drag",this._onRotate,this),A.on("dragend",this._onRotateEnd,this)):(A.on("click",this._onVertexClick,this),A.on("dragstart",this._onMarkerDragStart,this),A.on("move",this._onMarkerDrag,this),A.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||A.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(A),A},_createMiddleMarker:function(M,A){if(!M||!A)return!1;var j=L.PM.Utils.calcMiddleLatLng(this._map,M.getLatLng(),A.getLatLng()),nt=this._createMarker(j),ht=L.divIcon({className:"marker-icon marker-icon-middle"});return nt.setIcon(ht),nt.leftM=M,nt.rightM=A,M._middleMarkerNext=nt,A._middleMarkerPrev=nt,nt.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),nt.on("movestart",this._onMiddleMarkerMoveStart,this),nt},_onMiddleMarkerClick:function(M){var A=M.target;if(this._vertexValidation("add",M)){var j=L.divIcon({className:"marker-icon"});A.setIcon(j),this._addMarker(A,A.leftM,A.rightM)}},_onMiddleMarkerMoveStart:function(M){var A=M.target;A.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",M)?(A._dragging=!0,this._addMarker(A,A.leftM,A.rightM)):A.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(M){var A=M.target;this._vertexValidationDrag(A)},_onMiddleMarkerMoveEnd:function(M){var A=M.target;if(A.off("move",this._onMiddleMarkerMovePrevent,this),A.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(A)){var j=L.divIcon({className:"marker-icon"});A.setIcon(j),setTimeout(function(){delete A._dragging},100)}},_addMarker:function(M,A,j){M.off("movestart",this._onMiddleMarkerMoveStart,this),M.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var nt=M.getLatLng(),ht=this._layer._latlngs;delete M.leftM,delete M.rightM;var xt=L.PM.Utils.findDeepMarkerIndex(this._markers,A),Lt=xt.indexPath,Rt=xt.index,Pt=xt.parentPath,Nt=Lt.length>1?R()(ht,Pt):ht,Vt=Lt.length>1?R()(this._markers,Pt):this._markers;Nt.splice(Rt+1,0,nt),Vt.splice(Rt+1,0,M),this._layer.setLatLngs(ht),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(A,M),this._createMiddleMarker(M,j)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(M,L.PM.Utils.findDeepMarkerIndex(this._markers,M).indexPath,nt),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return le(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(M){var A=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;M?this._flashLayer():(A.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(le(this._layer.toGeoJSON(15)))}else A.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var M=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){M._layer.setStyle({color:M.cachedColor}),M.isRed=!1},200)},_updateDisabledMarkerStyle:function(M,A){var j=this;M.forEach(function(nt){Array.isArray(nt)?j._updateDisabledMarkerStyle(nt,A):nt._icon&&(A&&!j._checkMarkerAllowedToDrag(nt)?L.DomUtil.addClass(nt._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(nt._icon,"vertexmarker-disabled"))})},_removeMarker:function(M){var A=M.target;if(this._vertexValidation("remove",M)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=it(this._layer,this._layer.getLatLngs()));var j=this._layer.getLatLngs(),nt=L.PM.Utils.findDeepMarkerIndex(this._markers,A),ht=nt.indexPath,xt=nt.index,Lt=nt.parentPath;if(ht){var Rt=ht.length>1?R()(j,Lt):j,Pt=ht.length>1?R()(this._markers,Lt):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(Rt.length<=2||this.isPolygon()&&Rt.length<=3)){Rt.splice(xt,1),this._layer.setLatLngs(j),this.isPolygon()&&Rt.length<=2&&Rt.splice(0,Rt.length);var Nt=!1;if(Rt.length<=1&&(Rt.splice(0,Rt.length),Lt.length>1&&ht.length>1&&(j=dt(j)),this._layer.setLatLngs(j),this._initMarkers(),Nt=!0),ot(j)||this._layer.remove(),j=dt(j),this._layer.setLatLngs(j),this._markers=dt(this._markers),!Nt&&(Pt=ht.length>1?R()(this._markers,Lt):this._markers,A._middleMarkerPrev&&this._markerGroup.removeLayer(A._middleMarkerPrev),A._middleMarkerNext&&this._markerGroup.removeLayer(A._middleMarkerNext),this._markerGroup.removeLayer(A),Pt)){var Vt,ne;if(this.isPolygon()?(Vt=(xt+1)%Pt.length,ne=(xt+(Pt.length-1))%Pt.length):(ne=xt-1<0?void 0:xt-1,Vt=xt+1>=Pt.length?void 0:xt+1),Vt!==ne){var Zt=Pt[ne],ge=Pt[Vt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Zt,ge)}Pt.splice(xt,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(A,ht),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(M){var A=this._layer.getLatLngs(),j=M.getLatLng(),nt=L.PM.Utils.findDeepMarkerIndex(this._markers,M),ht=nt.indexPath,xt=nt.index,Lt=nt.parentPath;(ht.length>1?R()(A,Lt):A).splice(xt,1,j),this._layer.setLatLngs(A)},_getNeighborMarkers:function(M){var A=L.PM.Utils.findDeepMarkerIndex(this._markers,M),j=A.indexPath,nt=A.index,ht=A.parentPath,xt=j.length>1?R()(this._markers,ht):this._markers,Lt=(nt+1)%xt.length;return{prevMarker:xt[(nt+(xt.length-1))%xt.length],nextMarker:xt[Lt]}},_checkMarkerAllowedToDrag:function(M){var A=this._getNeighborMarkers(M),j=A.prevMarker,nt=A.nextMarker,ht=L.polyline([j.getLatLng(),M.getLatLng()]),xt=L.polyline([M.getLatLng(),nt.getLatLng()]),Lt=ve(this._layer.toGeoJSON(15),ht.toGeoJSON(15)).features.length,Rt=ve(this._layer.toGeoJSON(15),xt.toGeoJSON(15)).features.length;return M.getLatLng()===this._markers[0][0].getLatLng()?Rt+=1:M.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(Lt+=1),!(Lt<=2&&Rt<=2)},_onMarkerDragStart:function(M){var A=M.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",M)){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,A).indexPath;this._fireMarkerDragStart(M,j),this.options.allowSelfIntersection||(this._coordsBeforeEdit=it(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(A):this._markerAllowedToDrag=null}},_onMarkerDrag:function(M){var A=M.target;if(this._vertexValidationDrag(A)){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,A),nt=j.indexPath,ht=j.index,xt=j.parentPath;if(nt){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(A);var Lt=nt.length>1?R()(this._markers,xt):this._markers,Rt=(ht+1)%Lt.length,Pt=(ht+(Lt.length-1))%Lt.length,Nt=A.getLatLng(),Vt=Lt[Pt].getLatLng(),ne=Lt[Rt].getLatLng();if(A._middleMarkerNext){var Zt=L.PM.Utils.calcMiddleLatLng(this._map,Nt,ne);A._middleMarkerNext.setLatLng(Zt)}if(A._middleMarkerPrev){var ge=L.PM.Utils.calcMiddleLatLng(this._map,Nt,Vt);A._middleMarkerPrev.setLatLng(ge)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(M,nt),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(M){var A=M.target;if(this._vertexValidationDragEnd(A)){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,A).indexPath,nt=this.hasSelfIntersection();nt&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(nt=!1);var ht=!this.options.allowSelfIntersection&&nt;if(this._fireMarkerDragEnd(M,j,ht),ht)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(M,j);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(M){var A=M.target;if(!A._dragging){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,A).indexPath;this._fireVertexClick(M,j)}}}),gr.Polygon=gr.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(M){var A=this._getNeighborMarkers(M),j=A.prevMarker,nt=A.nextMarker,ht=L.polyline([j.getLatLng(),M.getLatLng()]),xt=L.polyline([M.getLatLng(),nt.getLatLng()]),Lt=ve(this._layer.toGeoJSON(15),ht.toGeoJSON(15)).features.length,Rt=ve(this._layer.toGeoJSON(15),xt.toGeoJSON(15)).features.length;return!(Lt<=2&&Rt<=2)}}),gr.Rectangle=gr.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var M=this,A=this._map,j=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,A.addLayer(this._markerGroup),this._markers=[],this._markers[0]=j.map(this._createMarker,this);var nt=hr(this._markers,1);this._cornerMarkers=nt[0],this._layer.getLatLngs()[0].forEach(function(ht,xt){var Lt=M._cornerMarkers.find(function(Rt){return Rt._index===xt});Lt&&Lt.setLatLng(ht)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(M,A){var j=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(j,"vertexPane"),j._origLatLng=M,j._index=A,j._pmTempLayer=!0,this._markerGroup.addLayer(j),j},_addMarkerEvents:function(){var M=this;this._markers[0].forEach(function(A){A.on("dragstart",M._onMarkerDragStart,M),A.on("drag",M._onMarkerDrag,M),A.on("dragend",M._onMarkerDragEnd,M),M.options.preventMarkerRemoval||A.on("contextmenu",M._removeMarker,M)})},_removeMarker:function(){return null},_onMarkerDragStart:function(M){if(this._vertexValidation("move",M)){var A=M.target,j=this._cornerMarkers;A._oppositeCornerLatLng=j.find(function(nt){return nt._index===(A._index+2)%4}).getLatLng(),A._snapped=!1,this._fireMarkerDragStart(M)}},_onMarkerDrag:function(M){var A=M.target;this._vertexValidationDrag(A)&&A._index!==void 0&&(this._adjustRectangleForMarkerMove(A),this._fireMarkerDrag(M),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(M){var A=M.target;this._vertexValidationDragEnd(A)&&(this._cornerMarkers.forEach(function(j){delete j._oppositeCornerLatLng}),this._fireMarkerDragEnd(M),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(M){L.extend(M._origLatLng,M._latlng);var A=L.PM.Utils._getRotatedRectangle(M.getLatLng(),M._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(A),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var M=this,A=this._layer.getLatLngs()[0];A&&A.length!==4&&A.length>0?(A.forEach(function(j,nt){M._cornerMarkers[nt].setLatLng(j)}),this._cornerMarkers.slice(A.length).forEach(function(j){j.setLatLng(A[0])})):A&&A.length?this._cornerMarkers.forEach(function(j){j.setLatLng(A[j._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var M=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(M[0],M[2],this._angle||0,this._map)}}),gr.Circle=gr.extend({_shape:"Circle",initialize:function(M){this._layer=M,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(M){L.Util.setOptions(this,M),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var M=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(M,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},_initMarkers:function(){var M=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(M);var A=this._layer.getLatLng(),j=this._layer._radius,nt=this._getLatLngOnCircle(A,j);this._centerMarker=this._createCenterMarker(A),this._outerMarker=this._createOuterMarker(nt),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(M,A){var j=M.getLatLng(),nt=A.getLatLng();this._hintline=L.polyline([j,nt],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(M){var A=this._createMarker(M);return L.DomUtil.addClass(A._icon,"leaflet-pm-draggable"),A.on("drag",this._moveCircle,this),A.on("dragstart",this._onCircleDragStart,this),A.on("drag",this._onCircleDrag,this),A.on("dragend",this._onCircleDragEnd,this),A},_createOuterMarker:function(M){var A=this._createMarker(M);return A.on("drag",this._resizeCircle,this),A},_createMarker:function(M){var A=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._origLatLng=M,A._pmTempLayer=!0,A.on("dragstart",this._onMarkerDragStart,this),A.on("drag",this._onMarkerDrag,this),A.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(A),A},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(M){if(!M.target._cancelDragEventChain){var A=M.latlng;this._layer.setLatLng(A);var j=this._layer._radius,nt=this._getLatLngOnCircle(A,j);this._outerMarker._latlng=nt,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.distance(M,A);this.options.minRadiusCircle&&j<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(j),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng();this._hintline.setLatLngs([M,A])},_disableSnapping:function(){var M=this;this._markers.forEach(function(A){A.off("move",M._syncHintLine,M),A.off("move",M._syncCircleRadius,M),A.off("drag",M._handleSnapping,M),A.off("dragend",M._cleanupSnapping,M)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(M){this._vertexValidation("move",M)&&this._fireMarkerDragStart(M)},_onMarkerDrag:function(M){var A=M.target;this._vertexValidationDrag(A)&&this._fireMarkerDrag(M)},_onMarkerDragEnd:function(M){var A=M.target;this._vertexValidationDragEnd(A)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(M))},_onCircleDragStart:function(M){this._vertexValidationDrag(M.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(M){this._vertexValidationReset||this._fireDrag(M)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var M=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!M).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!M),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(M,A){var j=this._map.project(M),nt=L.point(j.x+A,j.y);return this._map.unproject(nt)},_getNewDestinationOfOuterMarker:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.distance(M,A);return this.options.minRadiusCircle&&j<this.options.minRadiusCircle?A=W(this._map,M,A,this.options.minRadiusCircle):this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle&&(A=W(this._map,M,A,this.options.maxRadiusCircle)),A},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.distance(M,A);(this.options.minRadiusCircle&&j<this.options.minRadiusCircle||this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),gr.CircleMarker=gr.extend({_shape:"CircleMarker",initialize:function(M){this._layer=M,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,M),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var M=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(M);var A=this._layer.getLatLng(),j=this._layer._radius,nt=this._getLatLngOnCircle(A,j);this._centerMarker=this._createCenterMarker(A),this._outerMarker=this._createOuterMarker(nt),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(M,A){var j=this._map.project(M),nt=L.point(j.x+A,j.y);return this._map.unproject(nt)},_createHintLine:function(M,A){var j=M.getLatLng(),nt=A.getLatLng();this._hintline=L.polyline([j,nt],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(M){var A=this._createMarker(M);return this.options.draggable?L.DomUtil.addClass(A._icon,"leaflet-pm-draggable"):A.dragging.disable(),A},_createOuterMarker:function(M){var A=this._createMarker(M);return A.on("drag",this._resizeCircle,this),A},_createMarker:function(M){var A=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._origLatLng=M,A._pmTempLayer=!0,A.on("dragstart",this._onMarkerDragStart,this),A.on("drag",this._onMarkerDrag,this),A.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(A),A},_moveCircle:function(){var M=this._centerMarker.getLatLng();this._layer.setLatLng(M);var A=this._layer._radius,j=this._getLatLngOnCircle(M,A);this._outerMarker._latlng=j,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var M=this._layer.getLatLng(),A=this._layer._radius,j=this._getLatLngOnCircle(M,A);this._outerMarker.setLatLng(j),this._centerMarker.setLatLng(M),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(j),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng();this._hintline.setLatLngs([M,A])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(M){this._vertexValidation("move",M)&&this._fireMarkerDragStart(M)},_onMarkerDrag:function(M){var A=M.target;A instanceof L.Marker&&!this._vertexValidationDrag(A)||this._fireMarkerDrag(M)},_onMarkerDragEnd:function(M){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var A=M.target;this._vertexValidationDragEnd(A)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(M))},_initSnappableMarkersDrag:function(){var M=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,M.off("pm:drag",this._handleSnapping,this),M.on("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.on("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this),M.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var M=this._layer;M.off("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var M=this._layer._map||this._map;if(M){var A=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),M,this._layer.getLatLng()),j=L.circle(this._layer.getLatLng(),this._layer.options);j.setRadius(A);var nt=M&&M.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(j,200,!nt).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(j,200,!nt),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));return this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?A=W(this._map,M,A,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,M)):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker&&(A=W(this._map,M,A,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,M))),A},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));(this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),gr.ImageOverlay=gr.extend({_shape:"ImageOverlay",initialize:function(M){this._layer=M,this._enabled=!1},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},enabled:function(){return this._enabled},enable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,M),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var M=this._layer.getBounds();return[M.getNorthWest(),M.getNorthEast(),M.getSouthEast(),M.getSouthWest()]}}),gr.Text=gr.extend({_shape:"Text",initialize:function(M){this._layer=M,this._enabled=!1},enable:function(M){L.Util.setOptions(this,M),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var M=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),M.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var M=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,M.off("pm:drag",this._handleSnapping,this),M.on("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.on("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this),M.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var M=this._layer;M.off("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var M=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,A=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(M,"px"),this.textArea.style.width="".concat(A,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var M=this;this._disableOnBlurActive=!0,setTimeout(function(){M.enabled()&&L.DomEvent.on(document,"click",M._documentClick,M)},100)},_documentClick:function(M){M.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=this._hasFocus;this._hasFocus=M.type==="focus",!A!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(M){this.textArea.value=M,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var M,A=this.options.className.split(" ");(M=this.textArea.classList).add.apply(M,Tr(A))}var j=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(j),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),M===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(M){M.preventDefault()}});var us=function(M,A,j,nt,ht,xt){this._matrix=[M,A,j,nt,ht,xt]};us.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},us.prototype={transform:function(M){return this._transform(M.clone())},_transform:function(M){var A=this._matrix,j=M.x,nt=M.y;return M.x=A[0]*j+A[1]*nt+A[4],M.y=A[2]*j+A[3]*nt+A[5],M},untransform:function(M){var A=this._matrix;return new L.Point((M.x/A[0]-A[4])/A[0],(M.y/A[2]-A[5])/A[2])},clone:function(){var M=this._matrix;return new L.PM.Matrix(M[0],M[1],M[2],M[3],M[4],M[5])},translate:function(M){return M===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof M=="number"?(A=M,j=M):(A=M.x,j=M.y),this._add(1,0,0,1,A,j));var A,j},scale:function(M,A){return M===void 0?new L.Point(this._matrix[0],this._matrix[3]):(A=A||L.point(0,0),typeof M=="number"?(j=M,nt=M):(j=M.x,nt=M.y),this._add(j,0,0,nt,A.x,A.y)._add(1,0,0,1,-A.x,-A.y));var j,nt},rotate:function(M,A){var j=Math.cos(M),nt=Math.sin(M);return A=A||new L.Point(0,0),this._add(j,nt,-nt,j,A.x,A.y)._add(1,0,0,1,-A.x,-A.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(M,A,j,nt,ht,xt){var Lt,Rt=[[],[],[]],Pt=this._matrix,Nt=[[Pt[0],Pt[2],Pt[4]],[Pt[1],Pt[3],Pt[5]],[0,0,1]],Vt=[[M,j,ht],[A,nt,xt],[0,0,1]];M&&M instanceof L.PM.Matrix&&(Vt=[[(Pt=M._matrix)[0],Pt[2],Pt[4]],[Pt[1],Pt[3],Pt[5]],[0,0,1]]);for(var ne=0;ne<3;ne+=1)for(var Zt=0;Zt<3;Zt+=1){Lt=0;for(var ge=0;ge<3;ge+=1)Lt+=Nt[ne][ge]*Vt[ge][Zt];Rt[ne][Zt]=Lt}return this._matrix=[Rt[0][0],Rt[1][0],Rt[0][1],Rt[1][1],Rt[0][2],Rt[1][2]],this}};let je=us;var Yi={calcMiddleLatLng:function(M,A,j){var nt=M.project(A),ht=M.project(j);return M.unproject(nt._add(ht)._divideBy(2))},findLayers:function(M){var A=[];return M.eachLayer(function(j){(j instanceof L.Polyline||j instanceof L.Marker||j instanceof L.Circle||j instanceof L.CircleMarker||j instanceof L.ImageOverlay)&&A.push(j)}),A=(A=(A=A.filter(function(j){return!!j.pm})).filter(function(j){return!j._pmTempLayer})).filter(function(j){return!L.PM.optIn&&!j.options.pmIgnore||L.PM.optIn&&j.options.pmIgnore===!1})},circleToPolygon:function(M){for(var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,j=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],nt=M.getLatLng(),ht=M.getRadius(),xt=ct(nt,ht,A,0,j),Lt=[],Rt=0;Rt<xt.length;Rt+=1){var Pt=[xt[Rt].lat,xt[Rt].lng];Lt.push(Pt)}return L.polygon(Lt,M.options)},disablePopup:function(M){M.getPopup()&&(M._tempPopupCopy=M.getPopup(),M.unbindPopup())},enablePopup:function(M){M._tempPopupCopy&&(M.bindPopup(M._tempPopupCopy),delete M._tempPopupCopy)},_fireEvent:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];M.fire(A,j,nt);var ht=this.getAllParentGroups(M),xt=ht.groups;xt.forEach(function(Lt){Lt.fire(A,j,nt)})},getAllParentGroups:function(M){var A=[],j=[];return!M._pmLastGroupFetch||!M._pmLastGroupFetch.time||new Date().getTime()-M._pmLastGroupFetch.time>1e3?(function nt(ht){for(var xt in ht._eventParents)if(A.indexOf(xt)===-1){A.push(xt);var Lt=ht._eventParents[xt];j.push(Lt),nt(Lt)}}(M),M._pmLastGroupFetch={time:new Date().getTime(),groups:j,groupIds:A},{groupIds:A,groups:j}):{groups:M._pmLastGroupFetch.groups,groupIds:M._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ct,getTranslation:rt,findDeepCoordIndex:function(M,A){var j,nt=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],ht=function Lt(Rt){return function(Pt,Nt){var Vt=Rt.concat(Nt);if(nt){if(Pt.lat&&Pt.lat===A.lat&&Pt.lng===A.lng)return j=Vt,!0}else if(Pt.lat&&L.latLng(Pt).equals(A))return j=Vt,!0;return Array.isArray(Pt)&&Pt.some(Lt(Vt))}};M.some(ht([]));var xt={};return j&&(xt={indexPath:j,index:j[j.length-1],parentPath:j.slice(0,j.length-1)}),xt},findDeepMarkerIndex:function(M,A){var j;M.some(function ht(xt){return function(Lt,Rt){var Pt=xt.concat(Rt);return Lt._leaflet_id===A._leaflet_id?(j=Pt,!0):Array.isArray(Lt)&&Lt.some(ht(Pt))}}([]));var nt={};return j&&(nt={indexPath:j,index:j[j.length-1],parentPath:j.slice(0,j.length-1)}),nt},_getIndexFromSegment:function(M,A){if(A&&A.length===2){var j=this.findDeepCoordIndex(M,A[0]),nt=this.findDeepCoordIndex(M,A[1]),ht=Math.max(j.index,nt.index);return j.index!==0&&nt.index!==0||ht===1||(ht+=1),{indexA:j,indexB:nt,newIndex:ht,indexPath:j.indexPath,parentPath:j.parentPath}}return null},_getRotatedRectangle:function(M,A,j,nt){var ht=Ri(nt,M),xt=Ri(nt,A),Lt=j*Math.PI/180,Rt=Math.cos(Lt),Pt=Math.sin(Lt),Nt=(xt.x-ht.x)*Rt+(xt.y-ht.y)*Pt,Vt=(xt.y-ht.y)*Rt-(xt.x-ht.x)*Pt,ne=Nt*Rt+ht.x,Zt=Nt*Pt+ht.y,ge=-Vt*Pt+ht.x,Ce=Vt*Rt+ht.y;return[bn(nt,ht),bn(nt,{x:ne,y:Zt}),bn(nt,xt),bn(nt,{x:ge,y:Ce})]},pxRadiusToMeterRadius:function(M,A,j){var nt=A.project(j),ht=L.point(nt.x+M,nt.y);return A.distance(A.unproject(ht),j)}};let cr=Yi;L.PM=L.PM||{version:"2.14.2",Map:_t,Toolbar:gt,Draw:pt,Edit:gr,Utils:cr,Matrix:je,activeLang:"en",optIn:!1,initialize:function(M){this.addInitHooks(M)},setOptIn:function(M){this.optIn=!!M},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(M){var A=this;M instanceof L.LayerGroup&&M.eachLayer(function(j){A.reInitLayer(j)}),M.pm||L.PM.optIn&&M.options.pmIgnore!==!1||M.options.pmIgnore||(M instanceof L.Map?M.pm=new L.PM.Map(M):M instanceof L.Marker?M.options.textMarker?(M.pm=new L.PM.Edit.Text(M),M.pm._initTextMarker(),M.pm._createTextMarker(!1)):M.pm=new L.PM.Edit.Marker(M):M instanceof L.Circle?M.pm=new L.PM.Edit.Circle(M):M instanceof L.CircleMarker?M.pm=new L.PM.Edit.CircleMarker(M):M instanceof L.Rectangle?M.pm=new L.PM.Edit.Rectangle(M):M instanceof L.Polygon?M.pm=new L.PM.Edit.Polygon(M):M instanceof L.Polyline?M.pm=new L.PM.Edit.Line(M):M instanceof L.LayerGroup?M.pm=new L.PM.Edit.LayerGroup(M):M instanceof L.ImageOverlay&&(M.pm=new L.PM.Edit.ImageOverlay(M)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick:function(M){for(var A,j,nt=this._map.mouseEventToLayerPoint(M),ht=this._drawFirst;ht;ht=ht.next)(A=ht.layer).options.interactive&&A._containsPoint(nt)&&(M.type!=="click"&&M.type!=="preclick"||!this._map._draggableMoved(A))&&(j=A);j&&(L.DomEvent.fakeStop(M),this._fireEvent([j],M))}}),L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(r){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof r!="function")throw new TypeError("callback must be a function");for(var i=Object(this),s=i.length>>>0,o=arguments[1],a=0;a<s;a++)if(r.call(o,i[a],a,i))return a;return-1},Array.prototype.find=Array.prototype.find||function(r){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof r!="function")throw new TypeError("callback must be a function");for(var i=Object(this),s=i.length>>>0,o=arguments[1],a=0;a<s;a++){var l=i[a];if(r.call(o,l,a,i))return l}},typeof Object.assign!="function"&&(Object.assign=function(r){"use strict";if(r==null)throw new TypeError("Cannot convert undefined or null to object");r=Object(r);for(var i=1;i<arguments.length;i++){var s=arguments[i];if(s!=null)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])}return r}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(r,i){if(this==null)throw new TypeError('"this" is null or not defined');var s=Object(this),o=s.length>>>0;if(o===0)return!1;for(var a,l,c=0|i,h=Math.max(c>=0?c:o-Math.abs(c),0);h<o;){if((a=s[h])===(l=r)||typeof a=="number"&&typeof l=="number"&&isNaN(a)&&isNaN(l))return!0;h++}return!1}})},1787:(r,i,s)=>{var o=s(2582),a=s(4102),l=s(1540),c=s(9705).Z,h=l.featureEach,d=(l.coordEach,a.polygon,a.featureCollection);function p(g){var m=new o(g);return m.insert=function(b){if(b.type!=="Feature")throw new Error("invalid feature");return b.bbox=b.bbox?b.bbox:c(b),o.prototype.insert.call(this,b)},m.load=function(b){var y=[];return Array.isArray(b)?b.forEach(function(x){if(x.type!=="Feature")throw new Error("invalid features");x.bbox=x.bbox?x.bbox:c(x),y.push(x)}):h(b,function(x){if(x.type!=="Feature")throw new Error("invalid features");x.bbox=x.bbox?x.bbox:c(x),y.push(x)}),o.prototype.load.call(this,y)},m.remove=function(b,y){if(b.type!=="Feature")throw new Error("invalid feature");return b.bbox=b.bbox?b.bbox:c(b),o.prototype.remove.call(this,b,y)},m.clear=function(){return o.prototype.clear.call(this)},m.search=function(b){var y=o.prototype.search.call(this,this.toBBox(b));return d(y)},m.collides=function(b){return o.prototype.collides.call(this,this.toBBox(b))},m.all=function(){var b=o.prototype.all.call(this);return d(b)},m.toJSON=function(){return o.prototype.toJSON.call(this)},m.fromJSON=function(b){return o.prototype.fromJSON.call(this,b)},m.toBBox=function(b){var y;if(b.bbox)y=b.bbox;else if(Array.isArray(b)&&b.length===4)y=b;else if(Array.isArray(b)&&b.length===6)y=[b[0],b[1],b[3],b[4]];else if(b.type==="Feature")y=c(b);else{if(b.type!=="FeatureCollection")throw new Error("invalid geojson");y=c(b)}return{minX:y[0],minY:y[1],maxX:y[2],maxY:y[3]}},m}r.exports=p,r.exports.default=p},1989:(r,i,s)=>{var o=s(1789),a=s(401),l=s(7667),c=s(1327),h=s(1866);function d(p){var g=-1,m=p==null?0:p.length;for(this.clear();++g<m;){var b=p[g];this.set(b[0],b[1])}}d.prototype.clear=o,d.prototype.delete=a,d.prototype.get=l,d.prototype.has=c,d.prototype.set=h,r.exports=d},8407:(r,i,s)=>{var o=s(7040),a=s(4125),l=s(2117),c=s(7518),h=s(4705);function d(p){var g=-1,m=p==null?0:p.length;for(this.clear();++g<m;){var b=p[g];this.set(b[0],b[1])}}d.prototype.clear=o,d.prototype.delete=a,d.prototype.get=l,d.prototype.has=c,d.prototype.set=h,r.exports=d},7071:(r,i,s)=>{var o=s(852)(s(5639),"Map");r.exports=o},3369:(r,i,s)=>{var o=s(4785),a=s(1285),l=s(6e3),c=s(9916),h=s(5265);function d(p){var g=-1,m=p==null?0:p.length;for(this.clear();++g<m;){var b=p[g];this.set(b[0],b[1])}}d.prototype.clear=o,d.prototype.delete=a,d.prototype.get=l,d.prototype.has=c,d.prototype.set=h,r.exports=d},6384:(r,i,s)=>{var o=s(8407),a=s(7465),l=s(3779),c=s(7599),h=s(4758),d=s(4309);function p(g){var m=this.__data__=new o(g);this.size=m.size}p.prototype.clear=a,p.prototype.delete=l,p.prototype.get=c,p.prototype.has=h,p.prototype.set=d,r.exports=p},2705:(r,i,s)=>{var o=s(5639).Symbol;r.exports=o},1149:(r,i,s)=>{var o=s(5639).Uint8Array;r.exports=o},6874:r=>{r.exports=function(i,s,o){switch(o.length){case 0:return i.call(s);case 1:return i.call(s,o[0]);case 2:return i.call(s,o[0],o[1]);case 3:return i.call(s,o[0],o[1],o[2])}return i.apply(s,o)}},4636:(r,i,s)=>{var o=s(2545),a=s(5694),l=s(1469),c=s(4144),h=s(5776),d=s(6719),p=Object.prototype.hasOwnProperty;r.exports=function(g,m){var b=l(g),y=!b&&a(g),x=!b&&!y&&c(g),S=!b&&!y&&!x&&d(g),O=b||y||x||S,D=O?o(g.length,String):[],U=D.length;for(var z in g)!m&&!p.call(g,z)||O&&(z=="length"||x&&(z=="offset"||z=="parent")||S&&(z=="buffer"||z=="byteLength"||z=="byteOffset")||h(z,U))||D.push(z);return D}},9932:r=>{r.exports=function(i,s){for(var o=-1,a=i==null?0:i.length,l=Array(a);++o<a;)l[o]=s(i[o],o,i);return l}},6556:(r,i,s)=>{var o=s(9465),a=s(7813);r.exports=function(l,c,h){(h!==void 0&&!a(l[c],h)||h===void 0&&!(c in l))&&o(l,c,h)}},4865:(r,i,s)=>{var o=s(9465),a=s(7813),l=Object.prototype.hasOwnProperty;r.exports=function(c,h,d){var p=c[h];l.call(c,h)&&a(p,d)&&(d!==void 0||h in c)||o(c,h,d)}},8470:(r,i,s)=>{var o=s(7813);r.exports=function(a,l){for(var c=a.length;c--;)if(o(a[c][0],l))return c;return-1}},9465:(r,i,s)=>{var o=s(8777);r.exports=function(a,l,c){l=="__proto__"&&o?o(a,l,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[l]=c}},3118:(r,i,s)=>{var o=s(3218),a=Object.create,l=function(){function c(){}return function(h){if(!o(h))return{};if(a)return a(h);c.prototype=h;var d=new c;return c.prototype=void 0,d}}();r.exports=l},8483:(r,i,s)=>{var o=s(5063)();r.exports=o},7786:(r,i,s)=>{var o=s(1811),a=s(327);r.exports=function(l,c){for(var h=0,d=(c=o(c,l)).length;l!=null&&h<d;)l=l[a(c[h++])];return h&&h==d?l:void 0}},4239:(r,i,s)=>{var o=s(2705),a=s(9607),l=s(2333),c=o?o.toStringTag:void 0;r.exports=function(h){return h==null?h===void 0?"[object Undefined]":"[object Null]":c&&c in Object(h)?a(h):l(h)}},8565:r=>{var i=Object.prototype.hasOwnProperty;r.exports=function(s,o){return s!=null&&i.call(s,o)}},9454:(r,i,s)=>{var o=s(4239),a=s(7005);r.exports=function(l){return a(l)&&o(l)=="[object Arguments]"}},8458:(r,i,s)=>{var o=s(3560),a=s(5346),l=s(3218),c=s(346),h=/^\[object .+?Constructor\]$/,d=Function.prototype,p=Object.prototype,g=d.toString,m=p.hasOwnProperty,b=RegExp("^"+g.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");r.exports=function(y){return!(!l(y)||a(y))&&(o(y)?b:h).test(c(y))}},8749:(r,i,s)=>{var o=s(4239),a=s(1780),l=s(7005),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1,r.exports=function(h){return l(h)&&a(h.length)&&!!c[o(h)]}},313:(r,i,s)=>{var o=s(3218),a=s(5726),l=s(3498),c=Object.prototype.hasOwnProperty;r.exports=function(h){if(!o(h))return l(h);var d=a(h),p=[];for(var g in h)(g!="constructor"||!d&&c.call(h,g))&&p.push(g);return p}},2980:(r,i,s)=>{var o=s(6384),a=s(6556),l=s(8483),c=s(9783),h=s(3218),d=s(1704),p=s(6390);r.exports=function g(m,b,y,x,S){m!==b&&l(b,function(O,D){if(S||(S=new o),h(O))c(m,b,D,y,g,x,S);else{var U=x?x(p(m,D),O,D+"",m,b,S):void 0;U===void 0&&(U=O),a(m,D,U)}},d)}},9783:(r,i,s)=>{var o=s(6556),a=s(4626),l=s(7133),c=s(278),h=s(8517),d=s(5694),p=s(1469),g=s(9246),m=s(4144),b=s(3560),y=s(3218),x=s(8630),S=s(6719),O=s(6390),D=s(9881);r.exports=function(U,z,q,G,tt,K,B){var N=O(U,q),Z=O(z,q),w=B.get(Z);if(w)o(U,q,w);else{var C=K?K(N,Z,q+"",U,z,B):void 0,k=C===void 0;if(k){var T=p(Z),R=!T&&m(Z),F=!T&&!R&&S(Z);C=Z,T||R||F?p(N)?C=N:g(N)?C=c(N):R?(k=!1,C=a(Z,!0)):F?(k=!1,C=l(Z,!0)):C=[]:x(Z)||d(Z)?(C=N,d(N)?C=D(N):y(N)&&!b(N)||(C=h(Z))):k=!1}k&&(B.set(Z,C),tt(C,Z,G,K,B),B.delete(Z)),o(U,q,C)}}},5976:(r,i,s)=>{var o=s(6557),a=s(5357),l=s(61);r.exports=function(c,h){return l(a(c,h,o),c+"")}},6560:(r,i,s)=>{var o=s(5703),a=s(8777),l=s(6557),c=a?function(h,d){return a(h,"toString",{configurable:!0,enumerable:!1,value:o(d),writable:!0})}:l;r.exports=c},2545:r=>{r.exports=function(i,s){for(var o=-1,a=Array(i);++o<i;)a[o]=s(o);return a}},531:(r,i,s)=>{var o=s(2705),a=s(9932),l=s(1469),c=s(3448),h=o?o.prototype:void 0,d=h?h.toString:void 0;r.exports=function p(g){if(typeof g=="string")return g;if(l(g))return a(g,p)+"";if(c(g))return d?d.call(g):"";var m=g+"";return m=="0"&&1/g==-1/0?"-0":m}},1717:r=>{r.exports=function(i){return function(s){return i(s)}}},1811:(r,i,s)=>{var o=s(1469),a=s(5403),l=s(5514),c=s(9833);r.exports=function(h,d){return o(h)?h:a(h,d)?[h]:l(c(h))}},4318:(r,i,s)=>{var o=s(1149);r.exports=function(a){var l=new a.constructor(a.byteLength);return new o(l).set(new o(a)),l}},4626:(r,i,s)=>{r=s.nmd(r);var o=s(5639),a=i&&!i.nodeType&&i,l=a&&r&&!r.nodeType&&r,c=l&&l.exports===a?o.Buffer:void 0,h=c?c.allocUnsafe:void 0;r.exports=function(d,p){if(p)return d.slice();var g=d.length,m=h?h(g):new d.constructor(g);return d.copy(m),m}},7133:(r,i,s)=>{var o=s(4318);r.exports=function(a,l){var c=l?o(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}},278:r=>{r.exports=function(i,s){var o=-1,a=i.length;for(s||(s=Array(a));++o<a;)s[o]=i[o];return s}},8363:(r,i,s)=>{var o=s(4865),a=s(9465);r.exports=function(l,c,h,d){var p=!h;h||(h={});for(var g=-1,m=c.length;++g<m;){var b=c[g],y=d?d(h[b],l[b],b,h,l):void 0;y===void 0&&(y=l[b]),p?a(h,b,y):o(h,b,y)}return h}},4429:(r,i,s)=>{var o=s(5639)["__core-js_shared__"];r.exports=o},1463:(r,i,s)=>{var o=s(5976),a=s(6612);r.exports=function(l){return o(function(c,h){var d=-1,p=h.length,g=p>1?h[p-1]:void 0,m=p>2?h[2]:void 0;for(g=l.length>3&&typeof g=="function"?(p--,g):void 0,m&&a(h[0],h[1],m)&&(g=p<3?void 0:g,p=1),c=Object(c);++d<p;){var b=h[d];b&&l(c,b,d,g)}return c})}},5063:r=>{r.exports=function(i){return function(s,o,a){for(var l=-1,c=Object(s),h=a(s),d=h.length;d--;){var p=h[i?d:++l];if(o(c[p],p,c)===!1)break}return s}}},8777:(r,i,s)=>{var o=s(852),a=function(){try{var l=o(Object,"defineProperty");return l({},"",{}),l}catch{}}();r.exports=a},1957:(r,i,s)=>{var o=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g;r.exports=o},5050:(r,i,s)=>{var o=s(7019);r.exports=function(a,l){var c=a.__data__;return o(l)?c[typeof l=="string"?"string":"hash"]:c.map}},852:(r,i,s)=>{var o=s(8458),a=s(7801);r.exports=function(l,c){var h=a(l,c);return o(h)?h:void 0}},5924:(r,i,s)=>{var o=s(5569)(Object.getPrototypeOf,Object);r.exports=o},9607:(r,i,s)=>{var o=s(2705),a=Object.prototype,l=a.hasOwnProperty,c=a.toString,h=o?o.toStringTag:void 0;r.exports=function(d){var p=l.call(d,h),g=d[h];try{d[h]=void 0;var m=!0}catch{}var b=c.call(d);return m&&(p?d[h]=g:delete d[h]),b}},7801:r=>{r.exports=function(i,s){return i?.[s]}},222:(r,i,s)=>{var o=s(1811),a=s(5694),l=s(1469),c=s(5776),h=s(1780),d=s(327);r.exports=function(p,g,m){for(var b=-1,y=(g=o(g,p)).length,x=!1;++b<y;){var S=d(g[b]);if(!(x=p!=null&&m(p,S)))break;p=p[S]}return x||++b!=y?x:!!(y=p==null?0:p.length)&&h(y)&&c(S,y)&&(l(p)||a(p))}},1789:(r,i,s)=>{var o=s(4536);r.exports=function(){this.__data__=o?o(null):{},this.size=0}},401:r=>{r.exports=function(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}},7667:(r,i,s)=>{var o=s(4536),a=Object.prototype.hasOwnProperty;r.exports=function(l){var c=this.__data__;if(o){var h=c[l];return h==="__lodash_hash_undefined__"?void 0:h}return a.call(c,l)?c[l]:void 0}},1327:(r,i,s)=>{var o=s(4536),a=Object.prototype.hasOwnProperty;r.exports=function(l){var c=this.__data__;return o?c[l]!==void 0:a.call(c,l)}},1866:(r,i,s)=>{var o=s(4536);r.exports=function(a,l){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=o&&l===void 0?"__lodash_hash_undefined__":l,this}},8517:(r,i,s)=>{var o=s(3118),a=s(5924),l=s(5726);r.exports=function(c){return typeof c.constructor!="function"||l(c)?{}:o(a(c))}},5776:r=>{var i=/^(?:0|[1-9]\d*)$/;r.exports=function(s,o){var a=typeof s;return!!(o=o??9007199254740991)&&(a=="number"||a!="symbol"&&i.test(s))&&s>-1&&s%1==0&&s<o}},6612:(r,i,s)=>{var o=s(7813),a=s(8612),l=s(5776),c=s(3218);r.exports=function(h,d,p){if(!c(p))return!1;var g=typeof d;return!!(g=="number"?a(p)&&l(d,p.length):g=="string"&&d in p)&&o(p[d],h)}},5403:(r,i,s)=>{var o=s(1469),a=s(3448),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;r.exports=function(h,d){if(o(h))return!1;var p=typeof h;return!(p!="number"&&p!="symbol"&&p!="boolean"&&h!=null&&!a(h))||c.test(h)||!l.test(h)||d!=null&&h in Object(d)}},7019:r=>{r.exports=function(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}},5346:(r,i,s)=>{var o,a=s(4429),l=(o=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";r.exports=function(c){return!!l&&l in c}},5726:r=>{var i=Object.prototype;r.exports=function(s){var o=s&&s.constructor;return s===(typeof o=="function"&&o.prototype||i)}},7040:r=>{r.exports=function(){this.__data__=[],this.size=0}},4125:(r,i,s)=>{var o=s(8470),a=Array.prototype.splice;r.exports=function(l){var c=this.__data__,h=o(c,l);return!(h<0)&&(h==c.length-1?c.pop():a.call(c,h,1),--this.size,!0)}},2117:(r,i,s)=>{var o=s(8470);r.exports=function(a){var l=this.__data__,c=o(l,a);return c<0?void 0:l[c][1]}},7518:(r,i,s)=>{var o=s(8470);r.exports=function(a){return o(this.__data__,a)>-1}},4705:(r,i,s)=>{var o=s(8470);r.exports=function(a,l){var c=this.__data__,h=o(c,a);return h<0?(++this.size,c.push([a,l])):c[h][1]=l,this}},4785:(r,i,s)=>{var o=s(1989),a=s(8407),l=s(7071);r.exports=function(){this.size=0,this.__data__={hash:new o,map:new(l||a),string:new o}}},1285:(r,i,s)=>{var o=s(5050);r.exports=function(a){var l=o(this,a).delete(a);return this.size-=l?1:0,l}},6e3:(r,i,s)=>{var o=s(5050);r.exports=function(a){return o(this,a).get(a)}},9916:(r,i,s)=>{var o=s(5050);r.exports=function(a){return o(this,a).has(a)}},5265:(r,i,s)=>{var o=s(5050);r.exports=function(a,l){var c=o(this,a),h=c.size;return c.set(a,l),this.size+=c.size==h?0:1,this}},4523:(r,i,s)=>{var o=s(8306);r.exports=function(a){var l=o(a,function(h){return c.size===500&&c.clear(),h}),c=l.cache;return l}},4536:(r,i,s)=>{var o=s(852)(Object,"create");r.exports=o},3498:r=>{r.exports=function(i){var s=[];if(i!=null)for(var o in Object(i))s.push(o);return s}},1167:(r,i,s)=>{r=s.nmd(r);var o=s(1957),a=i&&!i.nodeType&&i,l=a&&r&&!r.nodeType&&r,c=l&&l.exports===a&&o.process,h=function(){try{var d=l&&l.require&&l.require("util").types;return d||c&&c.binding&&c.binding("util")}catch{}}();r.exports=h},2333:r=>{var i=Object.prototype.toString;r.exports=function(s){return i.call(s)}},5569:r=>{r.exports=function(i,s){return function(o){return i(s(o))}}},5357:(r,i,s)=>{var o=s(6874),a=Math.max;r.exports=function(l,c,h){return c=a(c===void 0?l.length-1:c,0),function(){for(var d=arguments,p=-1,g=a(d.length-c,0),m=Array(g);++p<g;)m[p]=d[c+p];p=-1;for(var b=Array(c+1);++p<c;)b[p]=d[p];return b[c]=h(m),o(l,this,b)}}},5639:(r,i,s)=>{var o=s(1957),a=typeof self=="object"&&self&&self.Object===Object&&self,l=o||a||Function("return this")();r.exports=l},6390:r=>{r.exports=function(i,s){if((s!=="constructor"||typeof i[s]!="function")&&s!="__proto__")return i[s]}},61:(r,i,s)=>{var o=s(6560),a=s(1275)(o);r.exports=a},1275:r=>{var i=Date.now;r.exports=function(s){var o=0,a=0;return function(){var l=i(),c=16-(l-a);if(a=l,c>0){if(++o>=800)return arguments[0]}else o=0;return s.apply(void 0,arguments)}}},7465:(r,i,s)=>{var o=s(8407);r.exports=function(){this.__data__=new o,this.size=0}},3779:r=>{r.exports=function(i){var s=this.__data__,o=s.delete(i);return this.size=s.size,o}},7599:r=>{r.exports=function(i){return this.__data__.get(i)}},4758:r=>{r.exports=function(i){return this.__data__.has(i)}},4309:(r,i,s)=>{var o=s(8407),a=s(7071),l=s(3369);r.exports=function(c,h){var d=this.__data__;if(d instanceof o){var p=d.__data__;if(!a||p.length<199)return p.push([c,h]),this.size=++d.size,this;d=this.__data__=new l(p)}return d.set(c,h),this.size=d.size,this}},5514:(r,i,s)=>{var o=s(4523),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,c=o(function(h){var d=[];return h.charCodeAt(0)===46&&d.push(""),h.replace(a,function(p,g,m,b){d.push(m?b.replace(l,"$1"):g||p)}),d});r.exports=c},327:(r,i,s)=>{var o=s(3448);r.exports=function(a){if(typeof a=="string"||o(a))return a;var l=a+"";return l=="0"&&1/a==-1/0?"-0":l}},346:r=>{var i=Function.prototype.toString;r.exports=function(s){if(s!=null){try{return i.call(s)}catch{}try{return s+""}catch{}}return""}},5703:r=>{r.exports=function(i){return function(){return i}}},7813:r=>{r.exports=function(i,s){return i===s||i!=i&&s!=s}},7361:(r,i,s)=>{var o=s(7786);r.exports=function(a,l,c){var h=a==null?void 0:o(a,l);return h===void 0?c:h}},8721:(r,i,s)=>{var o=s(8565),a=s(222);r.exports=function(l,c){return l!=null&&a(l,c,o)}},6557:r=>{r.exports=function(i){return i}},5694:(r,i,s)=>{var o=s(9454),a=s(7005),l=Object.prototype,c=l.hasOwnProperty,h=l.propertyIsEnumerable,d=o(function(){return arguments}())?o:function(p){return a(p)&&c.call(p,"callee")&&!h.call(p,"callee")};r.exports=d},1469:r=>{var i=Array.isArray;r.exports=i},8612:(r,i,s)=>{var o=s(3560),a=s(1780);r.exports=function(l){return l!=null&&a(l.length)&&!o(l)}},9246:(r,i,s)=>{var o=s(8612),a=s(7005);r.exports=function(l){return a(l)&&o(l)}},4144:(r,i,s)=>{r=s.nmd(r);var o=s(5639),a=s(5062),l=i&&!i.nodeType&&i,c=l&&r&&!r.nodeType&&r,h=c&&c.exports===l?o.Buffer:void 0,d=(h?h.isBuffer:void 0)||a;r.exports=d},3560:(r,i,s)=>{var o=s(4239),a=s(3218);r.exports=function(l){if(!a(l))return!1;var c=o(l);return c=="[object Function]"||c=="[object GeneratorFunction]"||c=="[object AsyncFunction]"||c=="[object Proxy]"}},1780:r=>{r.exports=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991}},3218:r=>{r.exports=function(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}},7005:r=>{r.exports=function(i){return i!=null&&typeof i=="object"}},8630:(r,i,s)=>{var o=s(4239),a=s(5924),l=s(7005),c=Function.prototype,h=Object.prototype,d=c.toString,p=h.hasOwnProperty,g=d.call(Object);r.exports=function(m){if(!l(m)||o(m)!="[object Object]")return!1;var b=a(m);if(b===null)return!0;var y=p.call(b,"constructor")&&b.constructor;return typeof y=="function"&&y instanceof y&&d.call(y)==g}},3448:(r,i,s)=>{var o=s(4239),a=s(7005);r.exports=function(l){return typeof l=="symbol"||a(l)&&o(l)=="[object Symbol]"}},6719:(r,i,s)=>{var o=s(8749),a=s(1717),l=s(1167),c=l&&l.isTypedArray,h=c?a(c):o;r.exports=h},1704:(r,i,s)=>{var o=s(4636),a=s(313),l=s(8612);r.exports=function(c){return l(c)?o(c,!0):a(c)}},8306:(r,i,s)=>{var o=s(3369);function a(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new TypeError("Expected a function");var h=function(){var d=arguments,p=c?c.apply(this,d):d[0],g=h.cache;if(g.has(p))return g.get(p);var m=l.apply(this,d);return h.cache=g.set(p,m)||g,m};return h.cache=new(a.Cache||o),h}a.Cache=o,r.exports=a},2492:(r,i,s)=>{var o=s(2980),a=s(1463)(function(l,c,h){o(l,c,h)});r.exports=a},5062:r=>{r.exports=function(){return!1}},9881:(r,i,s)=>{var o=s(8363),a=s(1704);r.exports=function(l){return o(l,a(l))}},9833:(r,i,s)=>{var o=s(531);r.exports=function(a){return a==null?"":o(a)}},2676:function(r){r.exports=function(){"use strict";function i(Q,Y){if(!(Q instanceof Y))throw new TypeError("Cannot call a class as a function")}function s(Q,Y){for(var et=0;et<Y.length;et++){var lt=Y[et];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(Q,lt.key,lt)}}function o(Q,Y,et){return Y&&s(Q.prototype,Y),et&&s(Q,et),Q}var a=function(){function Q(Y,et){this.next=null,this.key=Y,this.data=et,this.left=null,this.right=null}return Q}();function l(Q,Y){return Q>Y?1:Q<Y?-1:0}function c(Q,Y,et){for(var lt=new a(null,null),pt=lt,bt=lt;;){var Et=et(Q,Y.key);if(Et<0){if(Y.left===null)break;if(et(Q,Y.left.key)<0){var Ot=Y.left;if(Y.left=Ot.right,Ot.right=Y,(Y=Ot).left===null)break}bt.left=Y,bt=Y,Y=Y.left}else{if(!(Et>0)||Y.right===null||et(Q,Y.right.key)>0&&(Ot=Y.right,Y.right=Ot.left,Ot.left=Y,(Y=Ot).right===null))break;pt.right=Y,pt=Y,Y=Y.right}}return pt.right=Y.left,bt.left=Y.right,Y.left=lt.right,Y.right=lt.left,Y}function h(Q,Y,et,lt){var pt=new a(Q,Y);if(et===null)return pt.left=pt.right=null,pt;var bt=lt(Q,(et=c(Q,et,lt)).key);return bt<0?(pt.left=et.left,pt.right=et,et.left=null):bt>=0&&(pt.right=et.right,pt.left=et,et.right=null),pt}function d(Q,Y,et){var lt=null,pt=null;if(Y){var bt=et((Y=c(Q,Y,et)).key,Q);bt===0?(lt=Y.left,pt=Y.right):bt<0?(pt=Y.right,Y.right=null,lt=Y):(lt=Y.left,Y.left=null,pt=Y)}return{left:lt,right:pt}}function p(Q,Y,et){return Y===null?Q:(Q===null||((Y=c(Q.key,Y,et)).left=Q),Y)}function g(Q,Y,et,lt,pt){if(Q){lt(Y+(et?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+pt(Q)+`
`);var bt=Y+(et?"    ":"\u2502   ");Q.left&&g(Q.left,bt,!1,lt,pt),Q.right&&g(Q.right,bt,!0,lt,pt)}}var m=function(){function Q(Y){Y===void 0&&(Y=l),this._root=null,this._size=0,this._comparator=Y}return Q.prototype.insert=function(Y,et){return this._size++,this._root=h(Y,et,this._root,this._comparator)},Q.prototype.add=function(Y,et){var lt=new a(Y,et);this._root===null&&(lt.left=lt.right=null,this._size++,this._root=lt);var pt=this._comparator,bt=c(Y,this._root,pt),Et=pt(Y,bt.key);return Et===0?this._root=bt:(Et<0?(lt.left=bt.left,lt.right=bt,bt.left=null):Et>0&&(lt.right=bt.right,lt.left=bt,bt.right=null),this._size++,this._root=lt),this._root},Q.prototype.remove=function(Y){this._root=this._remove(Y,this._root,this._comparator)},Q.prototype._remove=function(Y,et,lt){var pt;return et===null?null:lt(Y,(et=c(Y,et,lt)).key)===0?(et.left===null?pt=et.right:(pt=c(Y,et.left,lt)).right=et.right,this._size--,pt):et},Q.prototype.pop=function(){var Y=this._root;if(Y){for(;Y.left;)Y=Y.left;return this._root=c(Y.key,this._root,this._comparator),this._root=this._remove(Y.key,this._root,this._comparator),{key:Y.key,data:Y.data}}return null},Q.prototype.findStatic=function(Y){for(var et=this._root,lt=this._comparator;et;){var pt=lt(Y,et.key);if(pt===0)return et;et=pt<0?et.left:et.right}return null},Q.prototype.find=function(Y){return this._root&&(this._root=c(Y,this._root,this._comparator),this._comparator(Y,this._root.key)!==0)?null:this._root},Q.prototype.contains=function(Y){for(var et=this._root,lt=this._comparator;et;){var pt=lt(Y,et.key);if(pt===0)return!0;et=pt<0?et.left:et.right}return!1},Q.prototype.forEach=function(Y,et){for(var lt=this._root,pt=[],bt=!1;!bt;)lt!==null?(pt.push(lt),lt=lt.left):pt.length!==0?(lt=pt.pop(),Y.call(et,lt),lt=lt.right):bt=!0;return this},Q.prototype.range=function(Y,et,lt,pt){for(var bt=[],Et=this._comparator,Ot=this._root;bt.length!==0||Ot;)if(Ot)bt.push(Ot),Ot=Ot.left;else{if(Et((Ot=bt.pop()).key,et)>0)break;if(Et(Ot.key,Y)>=0&&lt.call(pt,Ot))return this;Ot=Ot.right}return this},Q.prototype.keys=function(){var Y=[];return this.forEach(function(et){var lt=et.key;return Y.push(lt)}),Y},Q.prototype.values=function(){var Y=[];return this.forEach(function(et){var lt=et.data;return Y.push(lt)}),Y},Q.prototype.min=function(){return this._root?this.minNode(this._root).key:null},Q.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},Q.prototype.minNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.left;)Y=Y.left;return Y},Q.prototype.maxNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.right;)Y=Y.right;return Y},Q.prototype.at=function(Y){for(var et=this._root,lt=!1,pt=0,bt=[];!lt;)if(et)bt.push(et),et=et.left;else if(bt.length>0){if(et=bt.pop(),pt===Y)return et;pt++,et=et.right}else lt=!0;return null},Q.prototype.next=function(Y){var et=this._root,lt=null;if(Y.right){for(lt=Y.right;lt.left;)lt=lt.left;return lt}for(var pt=this._comparator;et;){var bt=pt(Y.key,et.key);if(bt===0)break;bt<0?(lt=et,et=et.left):et=et.right}return lt},Q.prototype.prev=function(Y){var et=this._root,lt=null;if(Y.left!==null){for(lt=Y.left;lt.right;)lt=lt.right;return lt}for(var pt=this._comparator;et;){var bt=pt(Y.key,et.key);if(bt===0)break;bt<0?et=et.left:(lt=et,et=et.right)}return lt},Q.prototype.clear=function(){return this._root=null,this._size=0,this},Q.prototype.toList=function(){return x(this._root)},Q.prototype.load=function(Y,et,lt){et===void 0&&(et=[]),lt===void 0&&(lt=!1);var pt=Y.length,bt=this._comparator;if(lt&&D(Y,et,0,pt-1,bt),this._root===null)this._root=b(Y,et,0,pt),this._size=pt;else{var Et=O(this.toList(),y(Y,et),bt);pt=this._size+pt,this._root=S({head:Et},0,pt)}return this},Q.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(Q.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Q.prototype.toString=function(Y){Y===void 0&&(Y=function(lt){return String(lt.key)});var et=[];return g(this._root,"",!0,function(lt){return et.push(lt)},Y),et.join("")},Q.prototype.update=function(Y,et,lt){var pt=this._comparator,bt=d(Y,this._root,pt),Et=bt.left,Ot=bt.right;pt(Y,et)<0?Ot=h(et,lt,Ot,pt):Et=h(et,lt,Et,pt),this._root=p(Et,Ot,pt)},Q.prototype.split=function(Y){return d(Y,this._root,this._comparator)},Q}();function b(Q,Y,et,lt){var pt=lt-et;if(pt>0){var bt=et+Math.floor(pt/2),Et=Q[bt],Ot=Y[bt],zt=new a(Et,Ot);return zt.left=b(Q,Y,et,bt),zt.right=b(Q,Y,bt+1,lt),zt}return null}function y(Q,Y){for(var et=new a(null,null),lt=et,pt=0;pt<Q.length;pt++)lt=lt.next=new a(Q[pt],Y[pt]);return lt.next=null,et.next}function x(Q){for(var Y=Q,et=[],lt=!1,pt=new a(null,null),bt=pt;!lt;)Y?(et.push(Y),Y=Y.left):et.length>0?Y=(Y=bt=bt.next=et.pop()).right:lt=!0;return bt.next=null,pt.next}function S(Q,Y,et){var lt=et-Y;if(lt>0){var pt=Y+Math.floor(lt/2),bt=S(Q,Y,pt),Et=Q.head;return Et.left=bt,Q.head=Q.head.next,Et.right=S(Q,pt+1,et),Et}return null}function O(Q,Y,et){for(var lt=new a(null,null),pt=lt,bt=Q,Et=Y;bt!==null&&Et!==null;)et(bt.key,Et.key)<0?(pt.next=bt,bt=bt.next):(pt.next=Et,Et=Et.next),pt=pt.next;return bt!==null?pt.next=bt:Et!==null&&(pt.next=Et),lt.next}function D(Q,Y,et,lt,pt){if(!(et>=lt)){for(var bt=Q[et+lt>>1],Et=et-1,Ot=lt+1;;){do Et++;while(pt(Q[Et],bt)<0);do Ot--;while(pt(Q[Ot],bt)>0);if(Et>=Ot)break;var zt=Q[Et];Q[Et]=Q[Ot],Q[Ot]=zt,zt=Y[Et],Y[Et]=Y[Ot],Y[Ot]=zt}D(Q,Y,et,Ot,pt),D(Q,Y,Ot+1,lt,pt)}}var U=function(Q,Y){return Q.ll.x<=Y.x&&Y.x<=Q.ur.x&&Q.ll.y<=Y.y&&Y.y<=Q.ur.y},z=function(Q,Y){if(Y.ur.x<Q.ll.x||Q.ur.x<Y.ll.x||Y.ur.y<Q.ll.y||Q.ur.y<Y.ll.y)return null;var et=Q.ll.x<Y.ll.x?Y.ll.x:Q.ll.x,lt=Q.ur.x<Y.ur.x?Q.ur.x:Y.ur.x;return{ll:{x:et,y:Q.ll.y<Y.ll.y?Y.ll.y:Q.ll.y},ur:{x:lt,y:Q.ur.y<Y.ur.y?Q.ur.y:Y.ur.y}}},q=Number.EPSILON;q===void 0&&(q=Math.pow(2,-52));var G=q*q,tt=function(Q,Y){if(-q<Q&&Q<q&&-q<Y&&Y<q)return 0;var et=Q-Y;return et*et<G*Q*Y?0:Q<Y?-1:1},K=function(){function Q(){i(this,Q),this.reset()}return o(Q,[{key:"reset",value:function(){this.xRounder=new B,this.yRounder=new B}},{key:"round",value:function(Y,et){return{x:this.xRounder.round(Y),y:this.yRounder.round(et)}}}]),Q}(),B=function(){function Q(){i(this,Q),this.tree=new m,this.round(0)}return o(Q,[{key:"round",value:function(Y){var et=this.tree.add(Y),lt=this.tree.prev(et);if(lt!==null&&tt(et.key,lt.key)===0)return this.tree.remove(Y),lt.key;var pt=this.tree.next(et);return pt!==null&&tt(et.key,pt.key)===0?(this.tree.remove(Y),pt.key):Y}}]),Q}(),N=new K,Z=function(Q,Y){return Q.x*Y.y-Q.y*Y.x},w=function(Q,Y){return Q.x*Y.x+Q.y*Y.y},C=function(Q,Y,et){var lt={x:Y.x-Q.x,y:Y.y-Q.y},pt={x:et.x-Q.x,y:et.y-Q.y},bt=Z(lt,pt);return tt(bt,0)},k=function(Q){return Math.sqrt(w(Q,Q))},T=function(Q,Y,et){var lt={x:Y.x-Q.x,y:Y.y-Q.y},pt={x:et.x-Q.x,y:et.y-Q.y};return Z(pt,lt)/k(pt)/k(lt)},R=function(Q,Y,et){var lt={x:Y.x-Q.x,y:Y.y-Q.y},pt={x:et.x-Q.x,y:et.y-Q.y};return w(pt,lt)/k(pt)/k(lt)},F=function(Q,Y,et){return Y.y===0?null:{x:Q.x+Y.x/Y.y*(et-Q.y),y:et}},H=function(Q,Y,et){return Y.x===0?null:{x:et,y:Q.y+Y.y/Y.x*(et-Q.x)}},rt=function(Q,Y,et,lt){if(Y.x===0)return H(et,lt,Q.x);if(lt.x===0)return H(Q,Y,et.x);if(Y.y===0)return F(et,lt,Q.y);if(lt.y===0)return F(Q,Y,et.y);var pt=Z(Y,lt);if(pt==0)return null;var bt={x:et.x-Q.x,y:et.y-Q.y},Et=Z(bt,Y)/pt,Ot=Z(bt,lt)/pt;return{x:(Q.x+Ot*Y.x+(et.x+Et*lt.x))/2,y:(Q.y+Ot*Y.y+(et.y+Et*lt.y))/2}},ot=function(){function Q(Y,et){i(this,Q),Y.events===void 0?Y.events=[this]:Y.events.push(this),this.point=Y,this.isLeft=et}return o(Q,null,[{key:"compare",value:function(Y,et){var lt=Q.comparePoints(Y.point,et.point);return lt!==0?lt:(Y.point!==et.point&&Y.link(et),Y.isLeft!==et.isLeft?Y.isLeft?1:-1:$.compare(Y.segment,et.segment))}},{key:"comparePoints",value:function(Y,et){return Y.x<et.x?-1:Y.x>et.x?1:Y.y<et.y?-1:Y.y>et.y?1:0}}]),o(Q,[{key:"link",value:function(Y){if(Y.point===this.point)throw new Error("Tried to link already linked events");for(var et=Y.point.events,lt=0,pt=et.length;lt<pt;lt++){var bt=et[lt];this.point.events.push(bt),bt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Y=this.point.events.length,et=0;et<Y;et++){var lt=this.point.events[et];if(lt.segment.consumedBy===void 0)for(var pt=et+1;pt<Y;pt++){var bt=this.point.events[pt];bt.consumedBy===void 0&&lt.otherSE.point.events===bt.otherSE.point.events&&lt.segment.consume(bt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Y=[],et=0,lt=this.point.events.length;et<lt;et++){var pt=this.point.events[et];pt!==this&&!pt.segment.ringOut&&pt.segment.isInResult()&&Y.push(pt)}return Y}},{key:"getLeftmostComparator",value:function(Y){var et=this,lt=new Map,pt=function(bt){var Et=bt.otherSE;lt.set(bt,{sine:T(et.point,Y.point,Et.point),cosine:R(et.point,Y.point,Et.point)})};return function(bt,Et){lt.has(bt)||pt(bt),lt.has(Et)||pt(Et);var Ot=lt.get(bt),zt=Ot.sine,Gt=Ot.cosine,Jt=lt.get(Et),Kt=Jt.sine,re=Jt.cosine;return zt>=0&&Kt>=0?Gt<re?1:Gt>re?-1:0:zt<0&&Kt<0?Gt<re?-1:Gt>re?1:0:Kt<zt?-1:Kt>zt?1:0}}}]),Q}(),dt=0,$=function(){function Q(Y,et,lt,pt){i(this,Q),this.id=++dt,this.leftSE=Y,Y.segment=this,Y.otherSE=et,this.rightSE=et,et.segment=this,et.otherSE=Y,this.rings=lt,this.windings=pt}return o(Q,null,[{key:"compare",value:function(Y,et){var lt=Y.leftSE.point.x,pt=et.leftSE.point.x,bt=Y.rightSE.point.x,Et=et.rightSE.point.x;if(Et<lt)return 1;if(bt<pt)return-1;var Ot=Y.leftSE.point.y,zt=et.leftSE.point.y,Gt=Y.rightSE.point.y,Jt=et.rightSE.point.y;if(lt<pt){if(zt<Ot&&zt<Gt)return 1;if(zt>Ot&&zt>Gt)return-1;var Kt=Y.comparePoint(et.leftSE.point);if(Kt<0)return 1;if(Kt>0)return-1;var re=et.comparePoint(Y.rightSE.point);return re!==0?re:-1}if(lt>pt){if(Ot<zt&&Ot<Jt)return-1;if(Ot>zt&&Ot>Jt)return 1;var Xt=et.comparePoint(Y.leftSE.point);if(Xt!==0)return Xt;var Ut=Y.comparePoint(et.rightSE.point);return Ut<0?1:Ut>0?-1:1}if(Ot<zt)return-1;if(Ot>zt)return 1;if(bt<Et){var _e=et.comparePoint(Y.rightSE.point);if(_e!==0)return _e}if(bt>Et){var le=Y.comparePoint(et.rightSE.point);if(le<0)return 1;if(le>0)return-1}if(bt!==Et){var ye=Gt-Ot,Ze=bt-lt,ce=Jt-zt,ke=Et-pt;if(ye>Ze&&ce<ke)return 1;if(ye<Ze&&ce>ke)return-1}return bt>Et?1:bt<Et||Gt<Jt?-1:Gt>Jt?1:Y.id<et.id?-1:Y.id>et.id?1:0}}]),o(Q,[{key:"replaceRightSE",value:function(Y){this.rightSE=Y,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Y=this.leftSE.point.y,et=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Y<et?Y:et},ur:{x:this.rightSE.point.x,y:Y>et?Y:et}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Y){return Y.x===this.leftSE.point.x&&Y.y===this.leftSE.point.y||Y.x===this.rightSE.point.x&&Y.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Y){if(this.isAnEndpoint(Y))return 0;var et=this.leftSE.point,lt=this.rightSE.point,pt=this.vector();if(et.x===lt.x)return Y.x===et.x?0:Y.x<et.x?1:-1;var bt=(Y.y-et.y)/pt.y,Et=et.x+bt*pt.x;if(Y.x===Et)return 0;var Ot=(Y.x-et.x)/pt.x,zt=et.y+Ot*pt.y;return Y.y===zt?0:Y.y<zt?-1:1}},{key:"getIntersection",value:function(Y){var et=this.bbox(),lt=Y.bbox(),pt=z(et,lt);if(pt===null)return null;var bt=this.leftSE.point,Et=this.rightSE.point,Ot=Y.leftSE.point,zt=Y.rightSE.point,Gt=U(et,Ot)&&this.comparePoint(Ot)===0,Jt=U(lt,bt)&&Y.comparePoint(bt)===0,Kt=U(et,zt)&&this.comparePoint(zt)===0,re=U(lt,Et)&&Y.comparePoint(Et)===0;if(Jt&&Gt)return re&&!Kt?Et:!re&&Kt?zt:null;if(Jt)return Kt&&bt.x===zt.x&&bt.y===zt.y?null:bt;if(Gt)return re&&Et.x===Ot.x&&Et.y===Ot.y?null:Ot;if(re&&Kt)return null;if(re)return Et;if(Kt)return zt;var Xt=rt(bt,this.vector(),Ot,Y.vector());return Xt===null?null:U(pt,Xt)?N.round(Xt.x,Xt.y):null}},{key:"split",value:function(Y){var et=[],lt=Y.events!==void 0,pt=new ot(Y,!0),bt=new ot(Y,!1),Et=this.rightSE;this.replaceRightSE(bt),et.push(bt),et.push(pt);var Ot=new Q(pt,Et,this.rings.slice(),this.windings.slice());return ot.comparePoints(Ot.leftSE.point,Ot.rightSE.point)>0&&Ot.swapEvents(),ot.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),lt&&(pt.checkForConsuming(),bt.checkForConsuming()),et}},{key:"swapEvents",value:function(){var Y=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Y,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var et=0,lt=this.windings.length;et<lt;et++)this.windings[et]*=-1}},{key:"consume",value:function(Y){for(var et=this,lt=Y;et.consumedBy;)et=et.consumedBy;for(;lt.consumedBy;)lt=lt.consumedBy;var pt=Q.compare(et,lt);if(pt!==0){if(pt>0){var bt=et;et=lt,lt=bt}if(et.prev===lt){var Et=et;et=lt,lt=Et}for(var Ot=0,zt=lt.rings.length;Ot<zt;Ot++){var Gt=lt.rings[Ot],Jt=lt.windings[Ot],Kt=et.rings.indexOf(Gt);Kt===-1?(et.rings.push(Gt),et.windings.push(Jt)):et.windings[Kt]+=Jt}lt.rings=null,lt.windings=null,lt.consumedBy=et,lt.leftSE.consumedBy=et.leftSE,lt.rightSE.consumedBy=et.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var Y=this.prev.consumedBy||this.prev;this._beforeState=Y.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var Y=this.beforeState();this._afterState={rings:Y.rings.slice(0),windings:Y.windings.slice(0),multiPolys:[]};for(var et=this._afterState.rings,lt=this._afterState.windings,pt=this._afterState.multiPolys,bt=0,Et=this.rings.length;bt<Et;bt++){var Ot=this.rings[bt],zt=this.windings[bt],Gt=et.indexOf(Ot);Gt===-1?(et.push(Ot),lt.push(zt)):lt[Gt]+=zt}for(var Jt=[],Kt=[],re=0,Xt=et.length;re<Xt;re++)if(lt[re]!==0){var Ut=et[re],_e=Ut.poly;if(Kt.indexOf(_e)===-1)if(Ut.isExterior)Jt.push(_e);else{Kt.indexOf(_e)===-1&&Kt.push(_e);var le=Jt.indexOf(Ut.poly);le!==-1&&Jt.splice(le,1)}}for(var ye=0,Ze=Jt.length;ye<Ze;ye++){var ce=Jt[ye].multiPoly;pt.indexOf(ce)===-1&&pt.push(ce)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var Y=this.beforeState().multiPolys,et=this.afterState().multiPolys;switch(It.type){case"union":var lt=Y.length===0,pt=et.length===0;this._isInResult=lt!==pt;break;case"intersection":var bt,Et;Y.length<et.length?(bt=Y.length,Et=et.length):(bt=et.length,Et=Y.length),this._isInResult=Et===It.numMultiPolys&&bt<Et;break;case"xor":var Ot=Math.abs(Y.length-et.length);this._isInResult=Ot%2==1;break;case"difference":var zt=function(Gt){return Gt.length===1&&Gt[0].isSubject};this._isInResult=zt(Y)!==zt(et);break;default:throw new Error("Unrecognized operation type found ".concat(It.type))}return this._isInResult}}],[{key:"fromRing",value:function(Y,et,lt){var pt,bt,Et,Ot=ot.comparePoints(Y,et);if(Ot<0)pt=Y,bt=et,Et=1;else{if(!(Ot>0))throw new Error("Tried to create degenerate segment at [".concat(Y.x,", ").concat(Y.y,"]"));pt=et,bt=Y,Et=-1}return new Q(new ot(pt,!0),new ot(bt,!1),[lt],[Et])}}]),Q}(),ct=function(){function Q(Y,et,lt){if(i(this,Q),!Array.isArray(Y)||Y.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=et,this.isExterior=lt,this.segments=[],typeof Y[0][0]!="number"||typeof Y[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var pt=N.round(Y[0][0],Y[0][1]);this.bbox={ll:{x:pt.x,y:pt.y},ur:{x:pt.x,y:pt.y}};for(var bt=pt,Et=1,Ot=Y.length;Et<Ot;Et++){if(typeof Y[Et][0]!="number"||typeof Y[Et][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var zt=N.round(Y[Et][0],Y[Et][1]);zt.x===bt.x&&zt.y===bt.y||(this.segments.push($.fromRing(bt,zt,this)),zt.x<this.bbox.ll.x&&(this.bbox.ll.x=zt.x),zt.y<this.bbox.ll.y&&(this.bbox.ll.y=zt.y),zt.x>this.bbox.ur.x&&(this.bbox.ur.x=zt.x),zt.y>this.bbox.ur.y&&(this.bbox.ur.y=zt.y),bt=zt)}pt.x===bt.x&&pt.y===bt.y||this.segments.push($.fromRing(bt,pt,this))}return o(Q,[{key:"getSweepEvents",value:function(){for(var Y=[],et=0,lt=this.segments.length;et<lt;et++){var pt=this.segments[et];Y.push(pt.leftSE),Y.push(pt.rightSE)}return Y}}]),Q}(),W=function(){function Q(Y,et){if(i(this,Q),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ct(Y[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var lt=1,pt=Y.length;lt<pt;lt++){var bt=new ct(Y[lt],this,!1);bt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=bt.bbox.ll.x),bt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=bt.bbox.ll.y),bt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=bt.bbox.ur.x),bt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=bt.bbox.ur.y),this.interiorRings.push(bt)}this.multiPoly=et}return o(Q,[{key:"getSweepEvents",value:function(){for(var Y=this.exteriorRing.getSweepEvents(),et=0,lt=this.interiorRings.length;et<lt;et++)for(var pt=this.interiorRings[et].getSweepEvents(),bt=0,Et=pt.length;bt<Et;bt++)Y.push(pt[bt]);return Y}}]),Q}(),V=function(){function Q(Y,et){if(i(this,Q),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof Y[0][0][0]=="number"&&(Y=[Y])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var lt=0,pt=Y.length;lt<pt;lt++){var bt=new W(Y[lt],this);bt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=bt.bbox.ll.x),bt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=bt.bbox.ll.y),bt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=bt.bbox.ur.x),bt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=bt.bbox.ur.y),this.polys.push(bt)}this.isSubject=et}return o(Q,[{key:"getSweepEvents",value:function(){for(var Y=[],et=0,lt=this.polys.length;et<lt;et++)for(var pt=this.polys[et].getSweepEvents(),bt=0,Et=pt.length;bt<Et;bt++)Y.push(pt[bt]);return Y}}]),Q}(),it=function(){function Q(Y){i(this,Q),this.events=Y;for(var et=0,lt=Y.length;et<lt;et++)Y[et].segment.ringOut=this;this.poly=null}return o(Q,null,[{key:"factory",value:function(Y){for(var et=[],lt=0,pt=Y.length;lt<pt;lt++){var bt=Y[lt];if(bt.isInResult()&&!bt.ringOut){for(var Et=null,Ot=bt.leftSE,zt=bt.rightSE,Gt=[Ot],Jt=Ot.point,Kt=[];Et=Ot,Ot=zt,Gt.push(Ot),Ot.point!==Jt;)for(;;){var re=Ot.getAvailableLinkedEvents();if(re.length===0){var Xt=Gt[0].point,Ut=Gt[Gt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Xt.x,",")+" ".concat(Xt.y,"]. Last matching segment found ends at")+" [".concat(Ut.x,", ").concat(Ut.y,"]."))}if(re.length===1){zt=re[0].otherSE;break}for(var _e=null,le=0,ye=Kt.length;le<ye;le++)if(Kt[le].point===Ot.point){_e=le;break}if(_e===null){Kt.push({index:Gt.length,point:Ot.point});var Ze=Ot.getLeftmostComparator(Et);zt=re.sort(Ze)[0].otherSE;break}var ce=Kt.splice(_e)[0],ke=Gt.splice(ce.index);ke.unshift(ke[0].otherSE),et.push(new Q(ke.reverse()))}et.push(new Q(Gt))}}return et}}]),o(Q,[{key:"getGeom",value:function(){for(var Y=this.events[0].point,et=[Y],lt=1,pt=this.events.length-1;lt<pt;lt++){var bt=this.events[lt].point,Et=this.events[lt+1].point;C(bt,Y,Et)!==0&&(et.push(bt),Y=bt)}if(et.length===1)return null;var Ot=et[0],zt=et[1];C(Ot,Y,zt)===0&&et.shift(),et.push(et[0]);for(var Gt=this.isExteriorRing()?1:-1,Jt=this.isExteriorRing()?0:et.length-1,Kt=this.isExteriorRing()?et.length:-1,re=[],Xt=Jt;Xt!=Kt;Xt+=Gt)re.push([et[Xt].x,et[Xt].y]);return re}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var Y=this.enclosingRing();this._isExteriorRing=!Y||!Y.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Y=this.events[0],et=1,lt=this.events.length;et<lt;et++){var pt=this.events[et];ot.compare(Y,pt)>0&&(Y=pt)}for(var bt=Y.segment.prevInResult(),Et=bt?bt.prevInResult():null;;){if(!bt)return null;if(!Et)return bt.ringOut;if(Et.ringOut!==bt.ringOut)return Et.ringOut.enclosingRing()!==bt.ringOut?bt.ringOut:bt.ringOut.enclosingRing();bt=Et.prevInResult(),Et=bt?bt.prevInResult():null}}}]),Q}(),mt=function(){function Q(Y){i(this,Q),this.exteriorRing=Y,Y.poly=this,this.interiorRings=[]}return o(Q,[{key:"addInterior",value:function(Y){this.interiorRings.push(Y),Y.poly=this}},{key:"getGeom",value:function(){var Y=[this.exteriorRing.getGeom()];if(Y[0]===null)return null;for(var et=0,lt=this.interiorRings.length;et<lt;et++){var pt=this.interiorRings[et].getGeom();pt!==null&&Y.push(pt)}return Y}}]),Q}(),wt=function(){function Q(Y){i(this,Q),this.rings=Y,this.polys=this._composePolys(Y)}return o(Q,[{key:"getGeom",value:function(){for(var Y=[],et=0,lt=this.polys.length;et<lt;et++){var pt=this.polys[et].getGeom();pt!==null&&Y.push(pt)}return Y}},{key:"_composePolys",value:function(Y){for(var et=[],lt=0,pt=Y.length;lt<pt;lt++){var bt=Y[lt];if(!bt.poly)if(bt.isExteriorRing())et.push(new mt(bt));else{var Et=bt.enclosingRing();Et.poly||et.push(new mt(Et)),Et.poly.addInterior(bt)}}return et}}]),Q}(),_t=function(){function Q(Y){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.compare;i(this,Q),this.queue=Y,this.tree=new m(et),this.segments=[]}return o(Q,[{key:"process",value:function(Y){var et=Y.segment,lt=[];if(Y.consumedBy)return Y.isLeft?this.queue.remove(Y.otherSE):this.tree.remove(et),lt;var pt=Y.isLeft?this.tree.insert(et):this.tree.find(et);if(!pt)throw new Error("Unable to find segment #".concat(et.id," ")+"[".concat(et.leftSE.point.x,", ").concat(et.leftSE.point.y,"] -> ")+"[".concat(et.rightSE.point.x,", ").concat(et.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var bt=pt,Et=pt,Ot=void 0,zt=void 0;Ot===void 0;)(bt=this.tree.prev(bt))===null?Ot=null:bt.key.consumedBy===void 0&&(Ot=bt.key);for(;zt===void 0;)(Et=this.tree.next(Et))===null?zt=null:Et.key.consumedBy===void 0&&(zt=Et.key);if(Y.isLeft){var Gt=null;if(Ot){var Jt=Ot.getIntersection(et);if(Jt!==null&&(et.isAnEndpoint(Jt)||(Gt=Jt),!Ot.isAnEndpoint(Jt)))for(var Kt=this._splitSafely(Ot,Jt),re=0,Xt=Kt.length;re<Xt;re++)lt.push(Kt[re])}var Ut=null;if(zt){var _e=zt.getIntersection(et);if(_e!==null&&(et.isAnEndpoint(_e)||(Ut=_e),!zt.isAnEndpoint(_e)))for(var le=this._splitSafely(zt,_e),ye=0,Ze=le.length;ye<Ze;ye++)lt.push(le[ye])}if(Gt!==null||Ut!==null){var ce=null;ce=Gt===null?Ut:Ut===null||ot.comparePoints(Gt,Ut)<=0?Gt:Ut,this.queue.remove(et.rightSE),lt.push(et.rightSE);for(var ke=et.split(ce),He=0,$t=ke.length;He<$t;He++)lt.push(ke[He])}lt.length>0?(this.tree.remove(et),lt.push(Y)):(this.segments.push(et),et.prev=Ot)}else{if(Ot&&zt){var Te=Ot.getIntersection(zt);if(Te!==null){if(!Ot.isAnEndpoint(Te))for(var br=this._splitSafely(Ot,Te),ue=0,Fe=br.length;ue<Fe;ue++)lt.push(br[ue]);if(!zt.isAnEndpoint(Te))for(var ar=this._splitSafely(zt,Te),Le=0,Oe=ar.length;Le<Oe;Le++)lt.push(ar[Le])}}this.tree.remove(et)}return lt}},{key:"_splitSafely",value:function(Y,et){this.tree.remove(Y);var lt=Y.rightSE;this.queue.remove(lt);var pt=Y.split(et);return pt.push(lt),Y.consumedBy===void 0&&this.tree.insert(Y),pt}}]),Q}(),Ct=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ft=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,It=new(function(){function Q(){i(this,Q)}return o(Q,[{key:"run",value:function(Y,et,lt){It.type=Y,N.reset();for(var pt=[new V(et,!0)],bt=0,Et=lt.length;bt<Et;bt++)pt.push(new V(lt[bt],!1));if(It.numMultiPolys=pt.length,It.type==="difference")for(var Ot=pt[0],zt=1;zt<pt.length;)z(pt[zt].bbox,Ot.bbox)!==null?zt++:pt.splice(zt,1);if(It.type==="intersection"){for(var Gt=0,Jt=pt.length;Gt<Jt;Gt++)for(var Kt=pt[Gt],re=Gt+1,Xt=pt.length;re<Xt;re++)if(z(Kt.bbox,pt[re].bbox)===null)return[]}for(var Ut=new m(ot.compare),_e=0,le=pt.length;_e<le;_e++)for(var ye=pt[_e].getSweepEvents(),Ze=0,ce=ye.length;Ze<ce;Ze++)if(Ut.insert(ye[Ze]),Ut.size>Ct)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var ke=new _t(Ut),He=Ut.size,$t=Ut.pop();$t;){var Te=$t.key;if(Ut.size===He){var br=Te.segment;throw new Error("Unable to pop() ".concat(Te.isLeft?"left":"right"," SweepEvent ")+"[".concat(Te.point.x,", ").concat(Te.point.y,"] from segment #").concat(br.id," ")+"[".concat(br.leftSE.point.x,", ").concat(br.leftSE.point.y,"] -> ")+"[".concat(br.rightSE.point.x,", ").concat(br.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Ut.size>Ct)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(ke.segments.length>Ft)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var ue=ke.process(Te),Fe=0,ar=ue.length;Fe<ar;Fe++){var Le=ue[Fe];Le.consumedBy===void 0&&Ut.insert(Le)}He=Ut.size,$t=Ut.pop()}N.reset();var Oe=it.factory(ke.segments);return new wt(Oe).getGeom()}}]),Q}()),vt=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return It.run("union",Q,et)},kt=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return It.run("intersection",Q,et)},gt=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return It.run("xor",Q,et)},ut=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return It.run("difference",Q,et)};return{union:vt,intersection:kt,xor:gt,difference:ut}}()},2582:function(r){r.exports=function(){"use strict";function i(D,U,z,q,G){(function tt(K,B,N,Z,w){for(;Z>N;){if(Z-N>600){var C=Z-N+1,k=B-N+1,T=Math.log(C),R=.5*Math.exp(2*T/3),F=.5*Math.sqrt(T*R*(C-R)/C)*(k-C/2<0?-1:1);tt(K,B,Math.max(N,Math.floor(B-k*R/C+F)),Math.min(Z,Math.floor(B+(C-k)*R/C+F)),w)}var H=K[B],rt=N,ot=Z;for(s(K,N,B),w(K[Z],H)>0&&s(K,N,Z);rt<ot;){for(s(K,rt,ot),rt++,ot--;w(K[rt],H)<0;)rt++;for(;w(K[ot],H)>0;)ot--}w(K[N],H)===0?s(K,N,ot):s(K,++ot,Z),ot<=B&&(N=ot+1),B<=ot&&(Z=ot-1)}})(D,U,z||0,q||D.length-1,G||o)}function s(D,U,z){var q=D[U];D[U]=D[z],D[z]=q}function o(D,U){return D<U?-1:D>U?1:0}var a=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(D,U,z){if(!z)return U.indexOf(D);for(var q=0;q<U.length;q++)if(z(D,U[q]))return q;return-1}function c(D,U){h(D,0,D.children.length,U,D)}function h(D,U,z,q,G){G||(G=S(null)),G.minX=1/0,G.minY=1/0,G.maxX=-1/0,G.maxY=-1/0;for(var tt=U;tt<z;tt++){var K=D.children[tt];d(G,D.leaf?q(K):K)}return G}function d(D,U){return D.minX=Math.min(D.minX,U.minX),D.minY=Math.min(D.minY,U.minY),D.maxX=Math.max(D.maxX,U.maxX),D.maxY=Math.max(D.maxY,U.maxY),D}function p(D,U){return D.minX-U.minX}function g(D,U){return D.minY-U.minY}function m(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function b(D){return D.maxX-D.minX+(D.maxY-D.minY)}function y(D,U){return D.minX<=U.minX&&D.minY<=U.minY&&U.maxX<=D.maxX&&U.maxY<=D.maxY}function x(D,U){return U.minX<=D.maxX&&U.minY<=D.maxY&&U.maxX>=D.minX&&U.maxY>=D.minY}function S(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function O(D,U,z,q,G){for(var tt=[U,z];tt.length;)if(!((z=tt.pop())-(U=tt.pop())<=q)){var K=U+Math.ceil((z-U)/q/2)*q;i(D,K,U,z,G),tt.push(U,K,K,z)}}return a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(D){var U=this.data,z=[];if(!x(D,U))return z;for(var q=this.toBBox,G=[];U;){for(var tt=0;tt<U.children.length;tt++){var K=U.children[tt],B=U.leaf?q(K):K;x(D,B)&&(U.leaf?z.push(K):y(D,B)?this._all(K,z):G.push(K))}U=G.pop()}return z},a.prototype.collides=function(D){var U=this.data;if(!x(D,U))return!1;for(var z=[];U;){for(var q=0;q<U.children.length;q++){var G=U.children[q],tt=U.leaf?this.toBBox(G):G;if(x(D,tt)){if(U.leaf||y(D,tt))return!0;z.push(G)}}U=z.pop()}return!1},a.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var U=0;U<D.length;U++)this.insert(D[U]);return this}var z=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length)if(this.data.height===z.height)this._splitRoot(this.data,z);else{if(this.data.height<z.height){var q=this.data;this.data=z,z=q}this._insert(z,this.data.height-z.height-1,!0)}else this.data=z;return this},a.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},a.prototype.clear=function(){return this.data=S([]),this},a.prototype.remove=function(D,U){if(!D)return this;for(var z,q,G,tt=this.data,K=this.toBBox(D),B=[],N=[];tt||B.length;){if(tt||(tt=B.pop(),q=B[B.length-1],z=N.pop(),G=!0),tt.leaf){var Z=l(D,tt.children,U);if(Z!==-1)return tt.children.splice(Z,1),B.push(tt),this._condense(B),this}G||tt.leaf||!y(tt,K)?q?(z++,tt=q.children[z],G=!1):tt=null:(B.push(tt),N.push(z),z=0,q=tt,tt=tt.children[0])}return this},a.prototype.toBBox=function(D){return D},a.prototype.compareMinX=function(D,U){return D.minX-U.minX},a.prototype.compareMinY=function(D,U){return D.minY-U.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(D){return this.data=D,this},a.prototype._all=function(D,U){for(var z=[];D;)D.leaf?U.push.apply(U,D.children):z.push.apply(z,D.children),D=z.pop();return U},a.prototype._build=function(D,U,z,q){var G,tt=z-U+1,K=this._maxEntries;if(tt<=K)return c(G=S(D.slice(U,z+1)),this.toBBox),G;q||(q=Math.ceil(Math.log(tt)/Math.log(K)),K=Math.ceil(tt/Math.pow(K,q-1))),(G=S([])).leaf=!1,G.height=q;var B=Math.ceil(tt/K),N=B*Math.ceil(Math.sqrt(K));O(D,U,z,N,this.compareMinX);for(var Z=U;Z<=z;Z+=N){var w=Math.min(Z+N-1,z);O(D,Z,w,B,this.compareMinY);for(var C=Z;C<=w;C+=B){var k=Math.min(C+B-1,w);G.children.push(this._build(D,C,k,q-1))}}return c(G,this.toBBox),G},a.prototype._chooseSubtree=function(D,U,z,q){for(;q.push(U),!U.leaf&&q.length-1!==z;){for(var G=1/0,tt=1/0,K=void 0,B=0;B<U.children.length;B++){var N=U.children[B],Z=m(N),w=(C=D,k=N,(Math.max(k.maxX,C.maxX)-Math.min(k.minX,C.minX))*(Math.max(k.maxY,C.maxY)-Math.min(k.minY,C.minY))-Z);w<tt?(tt=w,G=Z<G?Z:G,K=N):w===tt&&Z<G&&(G=Z,K=N)}U=K||U.children[0]}var C,k;return U},a.prototype._insert=function(D,U,z){var q=z?D:this.toBBox(D),G=[],tt=this._chooseSubtree(q,this.data,U,G);for(tt.children.push(D),d(tt,q);U>=0&&G[U].children.length>this._maxEntries;)this._split(G,U),U--;this._adjustParentBBoxes(q,G,U)},a.prototype._split=function(D,U){var z=D[U],q=z.children.length,G=this._minEntries;this._chooseSplitAxis(z,G,q);var tt=this._chooseSplitIndex(z,G,q),K=S(z.children.splice(tt,z.children.length-tt));K.height=z.height,K.leaf=z.leaf,c(z,this.toBBox),c(K,this.toBBox),U?D[U-1].children.push(K):this._splitRoot(z,K)},a.prototype._splitRoot=function(D,U){this.data=S([D,U]),this.data.height=D.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(D,U,z){for(var q,G,tt,K,B,N,Z,w=1/0,C=1/0,k=U;k<=z-U;k++){var T=h(D,0,k,this.toBBox),R=h(D,k,z,this.toBBox),F=(G=T,tt=R,K=void 0,B=void 0,N=void 0,Z=void 0,K=Math.max(G.minX,tt.minX),B=Math.max(G.minY,tt.minY),N=Math.min(G.maxX,tt.maxX),Z=Math.min(G.maxY,tt.maxY),Math.max(0,N-K)*Math.max(0,Z-B)),H=m(T)+m(R);F<w?(w=F,q=k,C=H<C?H:C):F===w&&H<C&&(C=H,q=k)}return q||z-U},a.prototype._chooseSplitAxis=function(D,U,z){var q=D.leaf?this.compareMinX:p,G=D.leaf?this.compareMinY:g;this._allDistMargin(D,U,z,q)<this._allDistMargin(D,U,z,G)&&D.children.sort(q)},a.prototype._allDistMargin=function(D,U,z,q){D.children.sort(q);for(var G=this.toBBox,tt=h(D,0,U,G),K=h(D,z-U,z,G),B=b(tt)+b(K),N=U;N<z-U;N++){var Z=D.children[N];d(tt,D.leaf?G(Z):Z),B+=b(tt)}for(var w=z-U-1;w>=U;w--){var C=D.children[w];d(K,D.leaf?G(C):C),B+=b(K)}return B},a.prototype._adjustParentBBoxes=function(D,U,z){for(var q=z;q>=0;q--)d(U[q],D)},a.prototype._condense=function(D){for(var U=D.length-1,z=void 0;U>=0;U--)D[U].children.length===0?U>0?(z=D[U-1].children).splice(z.indexOf(D[U]),1):this.clear():c(D[U],this.toBBox)},a}()}},t={};function e(r){var i=t[r];if(i!==void 0)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return n[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}e.n=r=>{var i=r&&r.__esModule?()=>r.default:()=>r;return e.d(i,{a:i}),i},e.d=(r,i)=>{for(var s in i)e.o(i,s)&&!e.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:i[s]})},e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),e.o=(r,i)=>Object.prototype.hasOwnProperty.call(r,i),e.nmd=r=>(r.paths=[],r.children||(r.children=[]),r),e(5975)})();var yv=Mr(Fp());var Yh=Mr(Jn()),zp="https://bl.skookum.cc/data/bl24/power_grid.geojson",jp="./data/bl24/labels/power_grid.geojson";async function ib(){try{return await(await fetch(zp)).json()}catch(n){return console.error(n),console.warn("Failed to fetch from",zp,"trying",jp),await(await fetch(jp)).json()}}var Hp=async n=>{try{let t=await ib();for(let e of t.features){if(e.geometry.type!="Point")continue;let r=e.properties.Name,i=e.properties["marker-size"],{description:s,power_size:o,power_area:a}=e.properties,l=e.geometry.coordinates[0],c=e.geometry.coordinates[1],h=28+3*i,d=h*.5,p=new(Yh.default.Icon.extend({options:{iconSize:[h,h],iconAnchor:[d,d],popupAnchor:[0,-h*.25],iconUrl:"./img/icons/powerdot.png"}})),g=`<h3>${r}</h3>`;o&&(g+=`<p>Power Size: ${o}</p>`),a&&(g+=`<p>Power Area: ${a}</p>`),s&&(g+=`<p>${s}</p>`),Yh.default.marker([c,l],{icon:p}).addTo(n).bindPopup(g)}}catch(t){console.error("Failed to add the power grid layer",t)}};var Zh=Mr(Jn()),cu=32,Gp=cu*.5,nb=Zh.default.Icon.extend({options:{iconSize:[cu,cu],iconAnchor:[Gp,Gp],popupAnchor:[0,-cu*.25]}}),Kh=async(n,t)=>{let e=await(await fetch(`./data/bl25/poi/${n}`)).json(),r={};for(let i of e.features){let{name:s,description:o,category:a,link:l}=i.properties,c=i.geometry.coordinates[0],h=i.geometry.coordinates[1];if(r[a]||(r[a]=new nb({iconUrl:"./img/icons/"+a+".png"})),l&&o){let p=l[0]!="#"?'target="_blank':"";o=`${o}<br><a href="${l}" ${p}">Read more here</a>`}let d=`<h3>${s}</h3> <p>${o}</p>`;Zh.default.marker([h,c],{icon:r[a]}).addTo(t).bindPopup(d)}};var du=Mr(Jn()),Up=async n=>{let t=await(await fetch("./data/bl25/labels/quarters.json")).json();fu(t,n,"white",.001)},Vp=async n=>{let t=await(await fetch("./data/bl25/labels/plazas.json")).json();fu(t,n,"white",.0015)},qp=async n=>{let t=await(await fetch("./data/bl25/labels/neighbourhoods.json")).json();fu(t,n,"white",.003);let e=await(await fetch("./data/bl25/labels/non-camp-neighbourhoods.json")).json();fu(e,n,"white",.003)},fu=(n,t,e,r)=>{for(let s of n.features){let o=s.properties.size||r,a=s.properties.rotation||0,l=s.properties.name,c=s.geometry.coordinates[0],h=s.geometry.coordinates[1];var i=du.latLngBounds([[h-o*.5,c-o*.5],[h+o*.5,c+o*.5]]);let d=sb(l,"bradleyHand",e,a);du.svgOverlay(d,i,{opacity:1,interactive:!1}).addTo(t)}};function sb(n,t,e,r){let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg");let s="",o=n.split(`
`);for(let l of o)s+=`<tspan x="0" dy=".6em">${l}</tspan>`;i.innerHTML=`<text transform="rotate(${r})" id="text" fill="${e}"font-family="${t}" x="0" y="0" fill="white" >${s}</text>`,document.body.appendChild(i);let a=i.getBBox();return i.remove(),i.setAttribute("viewBox",`${a.x} ${a.y} ${a.width} ${a.height}`),i}var qo=Mr(Jn()),Wp=async(n,t,e)=>{let r=qo.default.control({position:"bottomright"});r.onAdd=function(o){var a=qo.default.DomUtil.create("div","legend");return a.innerHTML+='<img src="./img/slopelegend.png" alt="legend" width="100" height="141">',a};let i=qo.default.control({position:"bottomright"});i.onAdd=function(o){var a=qo.default.DomUtil.create("div","legend");return a.innerHTML+='<img src="./img/heightlegend.png" alt="legend" width="100" height="124">',a};let s=qo.default.control({position:"bottomright"});s.onAdd=function(o){var a=qo.default.DomUtil.create("div","legend");return a.innerHTML+='<a target="blank" href="https://docs.google.com/document/d/1JjJArPpIsX-F82Xmcr2Y2dSPHtu2TjGTeYbP4ASkOWY"><img src="./img/soundlegend.png" alt="legend" width="150" height="165"></a>',a},n.on("overlayadd",function(o){switch(o.name){case"Slope":r.addTo(n);break;case"Height":i.addTo(n);break;case"Soundguide":s.addTo(n);break}}),n.on("overlayremove",function(o){switch(o.name){case"Slope":n.removeControl(r);break;case"Height":n.removeControl(i);break;case"Soundguide":n.removeControl(s);break}}),qo.default.control.layers(void 0,t,{position:"bottomright"}).addTo(n),e.has("Slope")&&r.addTo(n),e.has("Height")&&i.addTo(n),e.has("Soundguide")&&s.addTo(n)};var $p=Mr(Jn());function Xp(n){return function(){let t={opacity:1,fillOpacity:0,weight:1.5,dashArray:"5"};switch(n){case"container":return{...t,fillOpacity:1,color:"#c3c3c3",weight:0};case"naturereserve":return{...t,color:"#00b521",weight:3};case"propertyborder":return{...t,color:"#e77409",weight:1};case"friends":return{...t,color:"turquoise"};case"forbidden":return{...t,color:"red",fillOpacity:.5};case"toilet":return{...t,color:"skyblue",fillOpacity:1,dashArray:"0"};case"bridge":return{...t,color:"brown",fillOpacity:1};case"oktocamp":case"publicplease":case"parking":return{...t,color:"lightblue",fillOpacity:0};case"slope":return{...t,fillOpacity:0,opacity:0};case"fireroad":return{...t,weight:1.5,dashArray:"2",color:"#f05039",fillOpacity:.15};case"plaza":return{...t,weight:2,dashArray:"4",color:"white",opacity:.5,fillOpacity:0};case"quarter":return{...t,weight:5,dashArray:"10",color:"white",opacity:.5,fillOpacity:0};case"neighbourhood":return{...t,weight:5,dashArray:"10",color:"white",opacity:.5,fillOpacity:0};case"minorroad":return{...t,weight:1,dashArray:"20",color:"black",opacity:.5,fillOpacity:0};case"area":return{dashArray:"5",color:"#e7e309",fillOpacity:0,weight:2};case"hiddenforbidden":return{color:"black",fillOpacity:1,weight:0};case"redsoundzone":return{...t,color:"#b60d0d",fillOpacity:.75,weight:0};case"orangesoundzone":return{...t,color:"#ff6f16",fillOpacity:.75,weight:0};case"yellowsoundzone":return{...t,color:"#f4e512",fillOpacity:.75,weight:0};case"closetosanctuary":case"greensoundzone":return{...t,color:"#00e300",fillOpacity:.75,weight:0};case"bluesoundzone":return{...t,color:"#29b6f3",fillOpacity:.75,weight:0};default:return{...t,color:"black"}}}}var Ca=async(n,t,e)=>{let i=await(await fetch(e)).json();new Set(i.features.map(o=>o.properties[t])).forEach(o=>{let a=$p.default.geoJSON(i,{filter:ob(t,o),style:Xp(o)});n.groups[o]=a})};function ob(n,t){return function(e){return e.properties[n]===t}}var Jh=Mr(Jn()),Qh=async(n,t,e)=>{var r=Jh.default.latLngBounds(e),i=Jh.default.imageOverlay(t,r,{opacity:1,interactive:!1});return i};var Ma=null,tc=null,ec=null,Sa=null,ab=new Promise(async n=>{await Promise.allSettled([customElements.whenDefined("sl-drawer")]);let t=document.getElementById("drawer"),e=document.getElementById("drawer-button");t.addEventListener("sl-request-close",r=>{t.placement!="end"&&r.detail.source==="overlay"&&r.preventDefault()}),t.addEventListener("sl-after-hide",r=>{ec&&ec(),tc&&tc(),Ma&&(Ma=null),go.page=void 0}),e.addEventListener("click",()=>{Sa&&Sa()}),n(t)});async function Yp(n){for(let t=0;t<n.length;t++){let e=n[t];t==n.length-1?await mo(e,{keepOpen:!1}):await mo(e,{keepOpen:!0})}}async function mo(n,t={}){return new Promise(async e=>{ec=n.onClose||null,tc=e,Sa=null;let r=await ab;r.placement=n.position||"bottom";let i=r.querySelector(".container");i.innerHTML="";let o=await(await fetch(`drawers/${n.file}.html`)).text();n.file.indexOf("home")>-1&&(n.keepOpen=!0);let a=document.createElement("div");a.innerHTML=o;for(let c of Array.from(a.children))i.appendChild(c);let l=document.getElementById("drawer-button");if(t.keepOpen)l.innerHTML="Continue",Sa=e;else if(Ma&&Ma.keepOpen){let c={...Ma};l.innerHTML="Back",Sa=async()=>{await mo(c),e()}}else l.innerHTML="Close",Sa=()=>r.hide();n.btn&&(l.innerHTML=n.btn),go.page=n.file,Ma=n,r.show()})}var n3=document.querySelector(".alert-toast-wrapper");async function eo(n,t="primary",e="info-circle",r=3e3){let i=Object.assign(document.createElement("sl-alert"),{variant:t,closable:!0,duration:r,innerHTML:`
		<sl-icon name="${e}" slot="icon"></sl-icon>
		${n}
	  `});return document.body.append(i),await Promise.allSettled([customElements.whenDefined("sl-alert")]),i.toast(),i}var pu=Mr(Jn());function Zp(n){let t=pu.Control.extend({options:{position:"bottomleft"},onAdd:()=>{let e=pu.DomUtil.create("p","btn btn-gradient1 button-shake-animate");return e.innerHTML+=n,e}});return new t}var ka="layers:",La="page:",rc=class{constructor(){this._leafletHash=null;this._leafletMap=null;this._hashMeta=[];this._layers=[];this._page=void 0;window.addEventListener("hashchange",()=>{if(!(location.hash.indexOf(ka)==1||location.hash.indexOf(La)==1))return;let t=location.hash.substring(1).split("/");for(let e of t)e.indexOf(ka)==0&&(this.layers=e.substring(ka.length).split(",")),e.indexOf(La)==0&&(this.page=e.substring(La.length),mo({file:this.page,position:"end"}))})}set map(t){this._leafletMap=t,this._leafletHash=new L.Hash(this._leafletMap)}get layers(){return this._layers}set layers(t){t instanceof Set&&(t=Array.from(t)),this._layers=t,this.encode()}get page(){return this._page}set page(t){this._page=t,this.encode()}encode(){this._hashMeta=[],this._layers.length>0&&this._hashMeta.push(ka+this._layers.join(",")),this._page&&this._page.length>0&&this._hashMeta.push(La+this._page),this._leafletHash.setHashMeta(this._hashMeta,!0)}decode(t){this._hashMeta=t;let e=this._hashMeta.find(i=>i.startsWith(ka));this._layers=e?e.substring(ka.length).split(","):[];let r=this._hashMeta.find(i=>i.startsWith(La));this._page=r?r.substring(La.length):void 0,this._page&&mo({file:this.page,position:"end"})}},go=new rc;function mu(n,t="short",e="short"){return new Date(Date.parse(n)).toLocaleString("sv",{dateStyle:t,timeStyle:e})}var Ms=Mr(Jn());var Sh=Mr(Jn());var On=63710088e-1,Kp={centimeters:On*100,centimetres:On*100,degrees:On/111325,feet:On*3.28084,inches:On*39.37,kilometers:On/1e3,kilometres:On/1e3,meters:On,metres:On,miles:On/1609.344,millimeters:On*1e3,millimetres:On*1e3,nauticalmiles:On/1852,radians:1,yards:On*1.0936},g3={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/On,yards:1.0936133};function zn(n,t,e){e===void 0&&(e={});var r={type:"Feature"};return(e.id===0||e.id)&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.properties=t||{},r.geometry=n,r}function Ei(n,t,e){if(e===void 0&&(e={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!yo(n[0])||!yo(n[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:n};return zn(r,t,e)}function Wi(n,t,e){e===void 0&&(e={});for(var r=0,i=n;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:n};return zn(a,t,e)}function fn(n,t,e){if(e===void 0&&(e={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:n};return zn(r,t,e)}function Sr(n,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=n,e}function ic(n,t,e){e===void 0&&(e={});var r={type:"MultiPoint",coordinates:n};return zn(r,t,e)}function ml(n,t){t===void 0&&(t="kilometers");var e=Kp[t];if(!e)throw new Error(t+" units is invalid");return n*e}function gl(n,t){t===void 0&&(t="kilometers");var e=Kp[t];if(!e)throw new Error(t+" units is invalid");return n/e}function oa(n){var t=n%(2*Math.PI);return t*180/Math.PI}function jn(n){var t=n%360;return t*Math.PI/180}function yo(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function ji(n){return!!n&&n.constructor===Object}function Mn(n,t,e){if(n!==null)for(var r,i,s,o,a,l,c,h=0,d=0,p,g=n.type,m=g==="FeatureCollection",b=g==="Feature",y=m?n.features.length:1,x=0;x<y;x++){c=m?n.features[x].geometry:b?n.geometry:n,p=c?c.type==="GeometryCollection":!1,a=p?c.geometries.length:1;for(var S=0;S<a;S++){var O=0,D=0;if(o=p?c.geometries[S]:c,o!==null){l=o.coordinates;var U=o.type;switch(h=e&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(l,d,x,O,D)===!1)return!1;d++,O++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(t(l[r],d,x,O,D)===!1)return!1;d++,U==="MultiPoint"&&O++}U==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(t(l[r][i],d,x,O,D)===!1)return!1;d++}U==="MultiLineString"&&O++,U==="Polygon"&&D++}U==="Polygon"&&O++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(D=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(t(l[r][i][s],d,x,O,D)===!1)return!1;d++}D++}O++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(Mn(o.geometries[r],t,e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Jp(n,t,e,r){var i=e;return Mn(n,function(s,o,a,l,c){o===0&&e===void 0?i=s:i=t(i,s,o,a,l,c)},r),i}function Li(n,t){if(n.type==="Feature")t(n,0);else if(n.type==="FeatureCollection")for(var e=0;e<n.features.length&&t(n.features[e],e)!==!1;e++);}function ro(n,t){var e,r,i,s,o,a,l,c,h,d,p=0,g=n.type==="FeatureCollection",m=n.type==="Feature",b=g?n.features.length:1;for(e=0;e<b;e++){for(a=g?n.features[e].geometry:m?n.geometry:n,c=g?n.features[e].properties:m?n.properties:{},h=g?n.features[e].bbox:m?n.bbox:void 0,d=g?n.features[e].id:m?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(t(null,p,c,h,d)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,p,c,h,d)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],p,c,h,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function Qp(n,t,e){var r=e;return ro(n,function(i,s,o,a,l){s===0&&e===void 0?r=i:r=t(r,i,s,o,a,l)}),r}function os(n,t){ro(n,function(e,r,i,s,o){var a=e===null?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(zn(e,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<e.coordinates.length;c++){var h=e.coordinates[c],d={type:l,coordinates:h};if(t(zn(d,i),r,c)===!1)return!1}})}function Wo(n,t){os(n,function(e,r,i){var s=0;if(e.geometry){var o=e.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,h=0;if(Mn(e,function(d,p,g,m,b){if(a===void 0||r>l||m>c||b>h){a=d,l=r,c=m,h=b,s=0;return}var y=fn([a,d],e.properties);if(t(y,r,i,b,s)===!1)return!1;s++,a=d})===!1)return!1}}})}function nc(n){var t=[1/0,1/0,-1/0,-1/0];return Mn(n,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}nc.default=nc;var Sn=nc;function en(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ci(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function sc(n,t,e){if(!n)throw new Error("No feature passed");if(!e)throw new Error(".featureOf() requires a name");if(!n||n.type!=="Feature"||!n.geometry)throw new Error("Invalid input to "+e+", Feature with geometry required");if(!n.geometry||n.geometry.type!==t)throw new Error("Invalid input to "+e+": must be a "+t+", given "+n.geometry.type)}function dn(n){return n.type==="Feature"?n.geometry:n}var gb=Mr(gu(),1);var Sb=Mr(ym(),1);function pn(n,t,e){if(e===void 0&&(e={}),!n)throw new Error("point is required");if(!t)throw new Error("polygon is required");var r=en(n),i=dn(t),s=i.type,o=t.bbox,a=i.coordinates;if(o&&kb(r,o)===!1)return!1;s==="Polygon"&&(a=[a]);for(var l=!1,c=0;c<a.length&&!l;c++)if(vm(r,a[c][0],e.ignoreBoundary)){for(var h=!1,d=1;d<a[c].length&&!h;)vm(r,a[c][d],!e.ignoreBoundary)&&(h=!0),d++;h||(l=!0)}return l}function vm(n,t,e){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,s=t.length-1;i<t.length;s=i++){var o=t[i][0],a=t[i][1],l=t[s][0],c=t[s][1],h=n[1]*(o-l)+a*(l-n[0])+c*(n[0]-o)===0&&(o-n[0])*(l-n[0])<=0&&(a-n[1])*(c-n[1])<=0;if(h)return!e;var d=a>n[1]!=c>n[1]&&n[0]<(l-o)*(n[1]-a)/(c-a)+o;d&&(r=!r)}return r}function kb(n,t){return t[0]<=n[0]&&t[1]<=n[1]&&t[2]>=n[0]&&t[3]>=n[1]}function Lb(n,t,e){e===void 0&&(e={});var r=en(n),i=en(t),s=jn(i[1]-r[1]),o=jn(i[0]-r[0]),a=jn(r[1]),l=jn(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return ml(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),e.units)}var rn=Lb;var _m=new ArrayBuffer(16),qM=new Float64Array(_m),WM=new Uint32Array(_m);var Ub=Mr(Sm(),1);var vk=function(){function n(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(var e=0;e<this.length-1;e++){var r=this.points[e],i=this.points[e+1];this.centers.push({x:(r.x+i.x)/2,y:(r.y+i.y)/2,z:(r.z+i.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var e=0;e<this.centers.length-1;e++){var s=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+s),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+s),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return n.prototype.cacheSteps=function(t){var e=[],r=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var s=this.pos(i),o=Math.sqrt((s.x-r.x)*(s.x-r.x)+(s.y-r.y)*(s.y-r.y)+(s.z-r.z)*(s.z-r.z));o>t&&(e.push(i),r=s)}return e},n.prototype.vector=function(t){var e=this.pos(t+10),r=this.pos(t-10);return{angle:180*Math.atan2(e.y-r.y,e.x-r.x)/3.14,speed:Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)+(r.z-e.z)*(r.z-e.z))}},n.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var r=e/this.duration;if(r>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*r),s=(this.length-1)*r-i;return Vb(s,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},n}();function Vb(n,t,e,r,i){var s=qb(n),o={x:i.x*s[0]+r.x*s[1]+e.x*s[2]+t.x*s[3],y:i.y*s[0]+r.y*s[1]+e.y*s[2]+t.y*s[3],z:i.z*s[0]+r.z*s[1]+e.z*s[2]+t.z*s[3]};return o}function qb(n){var t=n*n,e=t*n;return[e,3*t*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}function _l(n,t){t===void 0&&(t={});var e=Number(n[0]),r=Number(n[1]),i=Number(n[2]),s=Number(n[3]);if(n.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[e,r],a=[e,s],l=[i,s],c=[i,r];return Wi([[o,c,l,a,o]],t.properties,{bbox:n,id:t.id})}function Wb(n){return _l(Sn(n))}var wc=Wb;function vo(n,t,e,r){r===void 0&&(r={});var i=en(n),s=jn(i[0]),o=jn(i[1]),a=jn(e),l=gl(t,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),h=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),d=oa(h),p=oa(c);return Ei([d,p],r.properties)}function Do(n,t,e){if(e===void 0&&(e={}),e.final===!0)return Xb(n,t);var r=en(n),i=en(t),s=jn(r[0]),o=jn(i[0]),a=jn(r[1]),l=jn(i[1]),c=Math.sin(o-s)*Math.cos(l),h=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return oa(Math.atan2(c,h))}function Xb(n,t){var e=Do(t,n);return e=(e+180)%360,e}function $b(n,t){t===void 0&&(t={});var e=Sn(n),r=(e[0]+e[2])/2,i=(e[1]+e[3])/2;return Ei([r,i],t.properties,t)}var wl=$b;var c1=Mr(Rm(),1);function f1(n){if(!n)throw new Error("geojson is required");var t=[];return os(n,function(e){d1(e,t)}),Sr(t)}function d1(n,t){var e=[],r=n.geometry;if(r!==null){switch(r.type){case"Polygon":e=Ci(r);break;case"LineString":e=[Ci(r)]}e.forEach(function(i){var s=p1(i,n.properties);s.forEach(function(o){o.id=t.length,t.push(o)})})}}function p1(n,t){var e=[];return n.reduce(function(r,i){var s=fn([r,i],t);return s.bbox=m1(r,i),e.push(s),i}),e}function m1(n,t){var e=n[0],r=n[1],i=t[0],s=t[1],o=e<i?e:i,a=r<s?r:s,l=e>i?e:i,c=r>s?r:s;return[o,a,l,c]}var Xo=f1;var Xm=Mr(Au(),1);function G1(n,t){var e={},r=[];if(n.type==="LineString"&&(n=zn(n)),t.type==="LineString"&&(t=zn(t)),n.type==="Feature"&&t.type==="Feature"&&n.geometry!==null&&t.geometry!==null&&n.geometry.type==="LineString"&&t.geometry.type==="LineString"&&n.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var i=Wm(n,t);return i&&r.push(i),Sr(r)}var s=(0,Xm.default)();return s.load(Xo(t)),Li(Xo(n),function(o){Li(s.search(o),function(a){var l=Wm(o,a);if(l){var c=Ci(l).join(",");e[c]||(e[c]=!0,r.push(l))}})}),Sr(r)}function Wm(n,t){var e=Ci(n),r=Ci(t);if(e.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(r.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=e[0][0],s=e[0][1],o=e[1][0],a=e[1][1],l=r[0][0],c=r[0][1],h=r[1][0],d=r[1][1],p=(d-c)*(o-i)-(h-l)*(a-s),g=(h-l)*(s-c)-(d-c)*(i-l),m=(o-i)*(s-c)-(a-s)*(i-l);if(p===0)return null;var b=g/p,y=m/p;if(b>=0&&b<=1&&y>=0&&y<=1){var x=i+b*(o-i),S=s+b*(a-s);return Ei([x,S])}return null}var Yo=G1;function U1(n,t,e){e===void 0&&(e={});var r=Ei([1/0,1/0],{dist:1/0}),i=0;return os(n,function(s){for(var o=Ci(s),a=0;a<o.length-1;a++){var l=Ei(o[a]);l.properties.dist=rn(t,l,e);var c=Ei(o[a+1]);c.properties.dist=rn(t,c,e);var h=rn(l,c,e),d=Math.max(l.properties.dist,c.properties.dist),p=Do(l,c),g=vo(t,d,p+90,e),m=vo(t,d,p-90,e),b=Yo(fn([g.geometry.coordinates,m.geometry.coordinates]),fn([l.geometry.coordinates,c.geometry.coordinates])),y=null;b.features.length>0&&(y=b.features[0],y.properties.dist=rn(t,y,e),y.properties.location=i+rn(l,y,e)),l.properties.dist<r.properties.dist&&(r=l,r.properties.index=a,r.properties.location=i),c.properties.dist<r.properties.dist&&(r=c,r.properties.index=a+1,r.properties.location=i+h),y&&y.properties.dist<r.properties.dist&&(r=y,r.properties.index=a),i+=h}}),r}var Bo=U1;var q1=Mr(gu(),1);var $m=6378137;function _o(n){return Qp(n,function(t,e){return t+W1(e)},0)}function W1(n){var t=0,e;switch(n.type){case"Polygon":return Ym(n.coordinates);case"MultiPolygon":for(e=0;e<n.coordinates.length;e++)t+=Ym(n.coordinates[e]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Ym(n){var t=0;if(n&&n.length>0){t+=Math.abs(Zm(n[0]));for(var e=1;e<n.length;e++)t-=Math.abs(Zm(n[e]))}return t}function Zm(n){var t,e,r,i,s,o,a,l=0,c=n.length;if(c>2){for(a=0;a<c;a++)a===c-2?(i=c-2,s=c-1,o=0):a===c-1?(i=c-1,s=0,o=1):(i=a,s=a+1,o=a+2),t=n[i],e=n[s],r=n[o],l+=(zc(r[0])-zc(t[0]))*Math.sin(zc(e[1]));l=l*$m*$m/2}return l}function zc(n){return n*Math.PI/180}function X1(n,t,e){e===void 0&&(e={});for(var r=en(n),i=Ci(t),s=0;s<i.length-1;s++){var o=!1;if(e.ignoreEndVertices&&(s===0&&(o="start"),s===i.length-2&&(o="end"),s===0&&s+1===i.length-1&&(o="both")),$1(i[s],i[s+1],r,o,typeof e.epsilon>"u"?null:e.epsilon))return!0}return!1}function $1(n,t,e,r,i){var s=e[0],o=e[1],a=n[0],l=n[1],c=t[0],h=t[1],d=e[0]-a,p=e[1]-l,g=c-a,m=h-l,b=d*m-p*g;if(i!==null){if(Math.abs(b)>i)return!1}else if(b!==0)return!1;if(r){if(r==="start")return Math.abs(g)>=Math.abs(m)?g>0?a<s&&s<=c:c<=s&&s<a:m>0?l<o&&o<=h:h<=o&&o<l;if(r==="end")return Math.abs(g)>=Math.abs(m)?g>0?a<=s&&s<c:c<s&&s<=a:m>0?l<=o&&o<h:h<o&&o<=l;if(r==="both")return Math.abs(g)>=Math.abs(m)?g>0?a<s&&s<c:c<s&&s<a:m>0?l<o&&o<h:h<o&&o<l}else return Math.abs(g)>=Math.abs(m)?g>0?a<=s&&s<=c:c<=s&&s<=a:m>0?l<=o&&o<=h:h<=o&&o<=l;return!1}var Os=X1;var e_=Mr(rg(),1);var ig=Math.PI/180,ng=180/Math.PI,Tl=function(n,t){this.lon=n,this.lat=t,this.x=ig*n,this.y=ig*t};Tl.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};Tl.prototype.antipode=function(){var n=-1*this.lat,t=this.lon<0?180+this.lon:(180-this.lon)*-1;return new Tl(t,n)};var sg=function(){this.coords=[],this.length=0};sg.prototype.move_to=function(n){this.length++,this.coords.push(n)};var qc=function(n){this.properties=n||{},this.geometries=[]};qc.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],t=0;t<this.geometries.length;t++)n.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}};qc.prototype.wkt=function(){for(var n="",t="LINESTRING(",e=function(s){t+=s[0]+" "+s[1]+","},r=0;r<this.geometries.length;r++){if(this.geometries[r].coords.length===0)return"LINESTRING(empty)";var i=this.geometries[r].coords;i.forEach(e),n+=t.substring(0,t.length-1)+")"}return n};var og=function(n,t,e){if(!n||n.x===void 0||n.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||t.x===void 0||t.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Tl(n.x,n.y),this.end=new Tl(t.x,t.y),this.properties=e||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,s=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(s)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+t)};og.prototype.interpolate=function(n){var t=Math.sin((1-n)*this.g)/Math.sin(this.g),e=Math.sin(n*this.g)/Math.sin(this.g),r=t*Math.cos(this.start.y)*Math.cos(this.start.x)+e*Math.cos(this.end.y)*Math.cos(this.end.x),i=t*Math.cos(this.start.y)*Math.sin(this.start.x)+e*Math.cos(this.end.y)*Math.sin(this.end.x),s=t*Math.sin(this.start.y)+e*Math.sin(this.end.y),o=ng*Math.atan2(s,Math.sqrt(Math.pow(r,2)+Math.pow(i,2))),a=ng*Math.atan2(i,r);return[a,o]};og.prototype.Arc=function(n,t){var e=[];if(!n||n<=2)e.push([this.start.lon,this.start.lat]),e.push([this.end.lon,this.end.lat]);else for(var r=1/(n-1),i=0;i<n;++i){var s=r*i,o=this.interpolate(s);e.push(o)}for(var a=!1,l=0,c=t&&t.offset?t.offset:10,h=180-c,d=-180+c,p=360-c,g=1;g<e.length;++g){var m=e[g-1][0],b=e[g][0],y=Math.abs(b-m);y>p&&(b>h&&m<d||m>h&&b<d)?a=!0:y>l&&(l=y)}var x=[];if(a&&l<c){var S=[];x.push(S);for(var O=0;O<e.length;++O){var D=parseFloat(e[O][0]);if(O>0&&Math.abs(D-e[O-1][0])>p){var U=parseFloat(e[O-1][0]),z=parseFloat(e[O-1][1]),q=parseFloat(e[O][0]),G=parseFloat(e[O][1]);if(U>-180&&U<d&&q===180&&O+1<e.length&&e[O-1][0]>-180&&e[O-1][0]<d){S.push([-180,e[O][1]]),O++,S.push([e[O][0],e[O][1]]);continue}else if(U>h&&U<180&&q===-180&&O+1<e.length&&e[O-1][0]>h&&e[O-1][0]<180){S.push([180,e[O][1]]),O++,S.push([e[O][0],e[O][1]]);continue}if(U<d&&q>h){var tt=U;U=q,q=tt;var K=z;z=G,G=K}if(U>h&&q<d&&(q+=360),U<=180&&q>=180&&U<q){var B=(180-U)/(q-U),N=B*G+(1-B)*z;S.push([e[O-1][0]>h?180:-180,N]),S=[],S.push([e[O-1][0]>h?-180:180,N]),x.push(S)}else S=[],x.push(S);S.push([D,e[O][1]])}else S.push([e[O][0],e[O][1]])}}else{var Z=[];x.push(Z);for(var w=0;w<e.length;++w)Z.push([e[w][0],e[w][1]])}for(var C=new qc(this.properties),k=0;k<x.length;++k){var T=new sg;C.geometries.push(T);for(var R=x[k],F=0;F<R.length;++F)T.move_to(R[F])}return C};var n_=Mr(Au(),1);var B0=Mr(Au(),1);var Ua=Mr(pf(),1);function gw(n,t,e){if(e===void 0&&(e={}),e=e||{},!ji(e))throw new Error("options is invalid");var r=e.tolerance||0,i=[],s=(0,B0.default)(),o=Xo(n);s.load(o);var a;return Wo(t,function(l){var c=!1;l&&(Li(s.search(l),function(h){if(c===!1){var d=Ci(l).sort(),p=Ci(h).sort();(0,Ua.default)(d,p)||(r===0?Os(d[0],h)&&Os(d[1],h):Bo(h,d[0]).properties.dist<=r&&Bo(h,d[1]).properties.dist<=r)?(c=!0,a?a=mf(a,l):a=l):(r===0?Os(p[0],l)&&Os(p[1],l):Bo(l,p[0]).properties.dist<=r&&Bo(l,p[1]).properties.dist<=r)&&(a?a=mf(a,h):a=h)}}),c===!1&&a&&(i.push(a),a=void 0))}),a&&i.push(a),Sr(i)}function mf(n,t){var e=Ci(t),r=Ci(n),i=r[0],s=r[r.length-1],o=n.geometry.coordinates;return(0,Ua.default)(e[0],i)?o.unshift(e[1]):(0,Ua.default)(e[0],s)?o.push(e[1]):(0,Ua.default)(e[1],i)?o.unshift(e[0]):(0,Ua.default)(e[1],s)&&o.push(e[0]),n}var gf=gw;var bw=Mr(gu(),1);var Rr=[],Or=[],Ar=[],Ir=[],Nr=[],Dr=[],Br=[],Fr=[],zr=[],jr=[],Hr=[],Gr=[],Ur=[],Vr=[],qr=[],Wr=[],Xr=[],$r=[],Yr=[],Zr=[],Kr=[],Jr=[],Qr=[],ti=[];Br[85]=jr[85]=-1;Fr[85]=Hr[85]=0;zr[85]=Gr[85]=1;Yr[85]=Jr[85]=1;Zr[85]=Qr[85]=0;Kr[85]=ti[85]=1;Rr[85]=Ir[85]=0;Or[85]=Nr[85]=-1;Ar[85]=qr[85]=0;Wr[85]=Ur[85]=0;Xr[85]=Vr[85]=1;Dr[85]=$r[85]=1;Jr[1]=Jr[169]=0;Qr[1]=Qr[169]=-1;ti[1]=ti[169]=0;Ur[1]=Ur[169]=-1;Vr[1]=Vr[169]=0;qr[1]=qr[169]=0;jr[4]=jr[166]=0;Hr[4]=Hr[166]=-1;Gr[4]=Gr[166]=1;Wr[4]=Wr[166]=1;Xr[4]=Xr[166]=0;$r[4]=$r[166]=0;Br[16]=Br[154]=0;Fr[16]=Fr[154]=1;zr[16]=zr[154]=1;Ir[16]=Ir[154]=1;Nr[16]=Nr[154]=0;Dr[16]=Dr[154]=1;Yr[64]=Yr[106]=0;Zr[64]=Zr[106]=1;Kr[64]=Kr[106]=0;Rr[64]=Rr[106]=-1;Or[64]=Or[106]=0;Ar[64]=Ar[106]=1;Yr[2]=Yr[168]=0;Zr[2]=Zr[168]=-1;Kr[2]=Kr[168]=1;Jr[2]=Jr[168]=0;Qr[2]=Qr[168]=-1;ti[2]=ti[168]=0;Ur[2]=Ur[168]=-1;Vr[2]=Vr[168]=0;qr[2]=qr[168]=0;Wr[2]=Wr[168]=-1;Xr[2]=Xr[168]=0;$r[2]=$r[168]=1;Br[8]=Br[162]=0;Fr[8]=Fr[162]=-1;zr[8]=zr[162]=0;jr[8]=jr[162]=0;Hr[8]=Hr[162]=-1;Gr[8]=Gr[162]=1;Ur[8]=Ur[162]=1;Vr[8]=Vr[162]=0;qr[8]=qr[162]=1;Wr[8]=Wr[162]=1;Xr[8]=Xr[162]=0;$r[8]=$r[162]=0;Br[32]=Br[138]=0;Fr[32]=Fr[138]=1;zr[32]=zr[138]=1;jr[32]=jr[138]=0;Hr[32]=Hr[138]=1;Gr[32]=Gr[138]=0;Rr[32]=Rr[138]=1;Or[32]=Or[138]=0;Ar[32]=Ar[138]=0;Ir[32]=Ir[138]=1;Nr[32]=Nr[138]=0;Dr[32]=Dr[138]=1;Jr[128]=Jr[42]=0;Qr[128]=Qr[42]=1;ti[128]=ti[42]=1;Yr[128]=Yr[42]=0;Zr[128]=Zr[42]=1;Kr[128]=Kr[42]=0;Rr[128]=Rr[42]=-1;Or[128]=Or[42]=0;Ar[128]=Ar[42]=1;Ir[128]=Ir[42]=-1;Nr[128]=Nr[42]=0;Dr[128]=Dr[42]=0;jr[5]=jr[165]=-1;Hr[5]=Hr[165]=0;Gr[5]=Gr[165]=0;Jr[5]=Jr[165]=1;Qr[5]=Qr[165]=0;ti[5]=ti[165]=0;Wr[20]=Wr[150]=0;Xr[20]=Xr[150]=1;$r[20]=$r[150]=1;Ir[20]=Ir[150]=0;Nr[20]=Nr[150]=-1;Dr[20]=Dr[150]=1;Br[80]=Br[90]=-1;Fr[80]=Fr[90]=0;zr[80]=zr[90]=1;Yr[80]=Yr[90]=1;Zr[80]=Zr[90]=0;Kr[80]=Kr[90]=1;Ur[65]=Ur[105]=0;Vr[65]=Vr[105]=1;qr[65]=qr[105]=0;Rr[65]=Rr[105]=0;Or[65]=Or[105]=-1;Ar[65]=Ar[105]=0;Br[160]=Br[10]=-1;Fr[160]=Fr[10]=0;zr[160]=zr[10]=1;jr[160]=jr[10]=-1;Hr[160]=Hr[10]=0;Gr[160]=Gr[10]=0;Jr[160]=Jr[10]=1;Qr[160]=Qr[10]=0;ti[160]=ti[10]=0;Yr[160]=Yr[10]=1;Zr[160]=Zr[10]=0;Kr[160]=Kr[10]=1;Wr[130]=Wr[40]=0;Xr[130]=Xr[40]=1;$r[130]=$r[40]=1;Ur[130]=Ur[40]=0;Vr[130]=Vr[40]=1;qr[130]=qr[40]=0;Rr[130]=Rr[40]=0;Or[130]=Or[40]=-1;Ar[130]=Ar[40]=0;Ir[130]=Ir[40]=0;Nr[130]=Nr[40]=-1;Dr[130]=Dr[40]=1;jr[37]=jr[133]=0;Hr[37]=Hr[133]=1;Gr[37]=Gr[133]=1;Jr[37]=Jr[133]=0;Qr[37]=Qr[133]=1;ti[37]=ti[133]=0;Rr[37]=Rr[133]=-1;Or[37]=Or[133]=0;Ar[37]=Ar[133]=0;Ir[37]=Ir[133]=1;Nr[37]=Nr[133]=0;Dr[37]=Dr[133]=0;Wr[148]=Wr[22]=-1;Xr[148]=Xr[22]=0;$r[148]=$r[22]=0;Jr[148]=Jr[22]=0;Qr[148]=Qr[22]=-1;ti[148]=ti[22]=1;Yr[148]=Yr[22]=0;Zr[148]=Zr[22]=1;Kr[148]=Kr[22]=1;Ir[148]=Ir[22]=-1;Nr[148]=Nr[22]=0;Dr[148]=Dr[22]=1;Br[82]=Br[88]=0;Fr[82]=Fr[88]=-1;zr[82]=zr[88]=1;Wr[82]=Wr[88]=1;Xr[82]=Xr[88]=0;$r[82]=$r[88]=1;Ur[82]=Ur[88]=-1;Vr[82]=Vr[88]=0;qr[82]=qr[88]=1;Yr[82]=Yr[88]=0;Zr[82]=Zr[88]=-1;Kr[82]=Kr[88]=0;Br[73]=Br[97]=0;Fr[73]=Fr[97]=1;zr[73]=zr[97]=0;jr[73]=jr[97]=0;Hr[73]=Hr[97]=-1;Gr[73]=Gr[97]=0;Ur[73]=Ur[97]=1;Vr[73]=Vr[97]=0;qr[73]=qr[97]=0;Rr[73]=Rr[97]=1;Or[73]=Or[97]=0;Ar[73]=Ar[97]=1;Br[145]=Br[25]=0;Fr[145]=Fr[25]=-1;zr[145]=zr[25]=0;Ur[145]=Ur[25]=1;Vr[145]=Vr[25]=0;qr[145]=qr[25]=1;Jr[145]=Jr[25]=0;Qr[145]=Qr[25]=1;ti[145]=ti[25]=1;Ir[145]=Ir[25]=-1;Nr[145]=Nr[25]=0;Dr[145]=Dr[25]=0;jr[70]=jr[100]=0;Hr[70]=Hr[100]=1;Gr[70]=Gr[100]=0;Wr[70]=Wr[100]=-1;Xr[70]=Xr[100]=0;$r[70]=$r[100]=1;Yr[70]=Yr[100]=0;Zr[70]=Zr[100]=-1;Kr[70]=Kr[100]=1;Rr[70]=Rr[100]=1;Or[70]=Or[100]=0;Ar[70]=Ar[100]=0;jr[101]=jr[69]=0;Hr[101]=Hr[69]=1;Gr[101]=Gr[69]=0;Rr[101]=Rr[69]=1;Or[101]=Or[69]=0;Ar[101]=Ar[69]=0;Jr[149]=Jr[21]=0;Qr[149]=Qr[21]=1;ti[149]=ti[21]=1;Ir[149]=Ir[21]=-1;Nr[149]=Nr[21]=0;Dr[149]=Dr[21]=0;Wr[86]=Wr[84]=-1;Xr[86]=Xr[84]=0;$r[86]=$r[84]=1;Yr[86]=Yr[84]=0;Zr[86]=Zr[84]=-1;Kr[86]=Kr[84]=1;Br[89]=Br[81]=0;Fr[89]=Fr[81]=-1;zr[89]=zr[81]=0;Ur[89]=Ur[81]=1;Vr[89]=Vr[81]=0;qr[89]=qr[81]=1;Br[96]=Br[74]=0;Fr[96]=Fr[74]=1;zr[96]=zr[74]=0;jr[96]=jr[74]=-1;Hr[96]=Hr[74]=0;Gr[96]=Gr[74]=1;Yr[96]=Yr[74]=1;Zr[96]=Zr[74]=0;Kr[96]=Kr[74]=0;Rr[96]=Rr[74]=1;Or[96]=Or[74]=0;Ar[96]=Ar[74]=1;Br[24]=Br[146]=0;Fr[24]=Fr[146]=-1;zr[24]=zr[146]=1;Wr[24]=Wr[146]=1;Xr[24]=Xr[146]=0;$r[24]=$r[146]=1;Ur[24]=Ur[146]=0;Vr[24]=Vr[146]=1;qr[24]=qr[146]=1;Ir[24]=Ir[146]=0;Nr[24]=Nr[146]=-1;Dr[24]=Dr[146]=0;jr[6]=jr[164]=-1;Hr[6]=Hr[164]=0;Gr[6]=Gr[164]=1;Wr[6]=Wr[164]=-1;Xr[6]=Xr[164]=0;$r[6]=$r[164]=0;Jr[6]=Jr[164]=0;Qr[6]=Qr[164]=-1;ti[6]=ti[164]=1;Yr[6]=Yr[164]=1;Zr[6]=Zr[164]=0;Kr[6]=Kr[164]=0;Ur[129]=Ur[41]=0;Vr[129]=Vr[41]=1;qr[129]=qr[41]=1;Jr[129]=Jr[41]=0;Qr[129]=Qr[41]=1;ti[129]=ti[41]=0;Rr[129]=Rr[41]=-1;Or[129]=Or[41]=0;Ar[129]=Ar[41]=0;Ir[129]=Ir[41]=0;Nr[129]=Nr[41]=-1;Dr[129]=Dr[41]=0;Wr[66]=Wr[104]=0;Xr[66]=Xr[104]=1;$r[66]=$r[104]=0;Ur[66]=Ur[104]=-1;Vr[66]=Vr[104]=0;qr[66]=qr[104]=1;Yr[66]=Yr[104]=0;Zr[66]=Zr[104]=-1;Kr[66]=Kr[104]=0;Rr[66]=Rr[104]=0;Or[66]=Or[104]=-1;Ar[66]=Ar[104]=1;Br[144]=Br[26]=-1;Fr[144]=Fr[26]=0;zr[144]=zr[26]=0;Jr[144]=Jr[26]=1;Qr[144]=Qr[26]=0;ti[144]=ti[26]=1;Yr[144]=Yr[26]=0;Zr[144]=Zr[26]=1;Kr[144]=Kr[26]=1;Ir[144]=Ir[26]=-1;Nr[144]=Nr[26]=0;Dr[144]=Dr[26]=1;jr[36]=jr[134]=0;Hr[36]=Hr[134]=1;Gr[36]=Gr[134]=1;Wr[36]=Wr[134]=0;Xr[36]=Xr[134]=1;$r[36]=$r[134]=0;Rr[36]=Rr[134]=0;Or[36]=Or[134]=-1;Ar[36]=Ar[134]=1;Ir[36]=Ir[134]=1;Nr[36]=Nr[134]=0;Dr[36]=Dr[134]=0;Br[9]=Br[161]=-1;Fr[9]=Fr[161]=0;zr[9]=zr[161]=0;jr[9]=jr[161]=0;Hr[9]=Hr[161]=-1;Gr[9]=Gr[161]=0;Ur[9]=Ur[161]=1;Vr[9]=Vr[161]=0;qr[9]=qr[161]=0;Jr[9]=Jr[161]=1;Qr[9]=Qr[161]=0;ti[9]=ti[161]=1;Br[136]=0;Fr[136]=1;zr[136]=1;jr[136]=0;Hr[136]=1;Gr[136]=0;Wr[136]=-1;Xr[136]=0;$r[136]=1;Ur[136]=-1;Vr[136]=0;qr[136]=0;Jr[136]=0;Qr[136]=-1;ti[136]=0;Yr[136]=0;Zr[136]=-1;Kr[136]=1;Rr[136]=1;Or[136]=0;Ar[136]=0;Ir[136]=1;Nr[136]=0;Dr[136]=1;Br[34]=0;Fr[34]=-1;zr[34]=0;jr[34]=0;Hr[34]=-1;Gr[34]=1;Wr[34]=1;Xr[34]=0;$r[34]=0;Ur[34]=1;Vr[34]=0;qr[34]=1;Jr[34]=0;Qr[34]=1;ti[34]=1;Yr[34]=0;Zr[34]=1;Kr[34]=0;Rr[34]=-1;Or[34]=0;Ar[34]=1;Ir[34]=-1;Nr[34]=0;Dr[34]=0;Br[35]=0;Fr[35]=1;zr[35]=1;jr[35]=0;Hr[35]=-1;Gr[35]=1;Wr[35]=1;Xr[35]=0;$r[35]=0;Ur[35]=-1;Vr[35]=0;qr[35]=0;Jr[35]=0;Qr[35]=-1;ti[35]=0;Yr[35]=0;Zr[35]=1;Kr[35]=0;Rr[35]=-1;Or[35]=0;Ar[35]=1;Ir[35]=1;Nr[35]=0;Dr[35]=1;Br[153]=0;Fr[153]=1;zr[153]=1;Ur[153]=-1;Vr[153]=0;qr[153]=0;Jr[153]=0;Qr[153]=-1;ti[153]=0;Ir[153]=1;Nr[153]=0;Dr[153]=1;jr[102]=0;Hr[102]=-1;Gr[102]=1;Wr[102]=1;Xr[102]=0;$r[102]=0;Yr[102]=0;Zr[102]=1;Kr[102]=0;Rr[102]=-1;Or[102]=0;Ar[102]=1;Br[155]=0;Fr[155]=-1;zr[155]=0;Ur[155]=1;Vr[155]=0;qr[155]=1;Jr[155]=0;Qr[155]=1;ti[155]=1;Ir[155]=-1;Nr[155]=0;Dr[155]=0;jr[103]=0;Hr[103]=1;Gr[103]=0;Wr[103]=-1;Xr[103]=0;$r[103]=1;Yr[103]=0;Zr[103]=-1;Kr[103]=1;Rr[103]=1;Or[103]=0;Ar[103]=0;Br[152]=0;Fr[152]=1;zr[152]=1;Wr[152]=-1;Xr[152]=0;$r[152]=1;Ur[152]=-1;Vr[152]=0;qr[152]=0;Jr[152]=0;Qr[152]=-1;ti[152]=0;Yr[152]=0;Zr[152]=-1;Kr[152]=1;Ir[152]=1;Nr[152]=0;Dr[152]=1;Br[156]=0;Fr[156]=-1;zr[156]=1;Wr[156]=1;Xr[156]=0;$r[156]=1;Ur[156]=-1;Vr[156]=0;qr[156]=0;Jr[156]=0;Qr[156]=-1;ti[156]=0;Yr[156]=0;Zr[156]=1;Kr[156]=1;Ir[156]=-1;Nr[156]=0;Dr[156]=1;Br[137]=0;Fr[137]=1;zr[137]=1;jr[137]=0;Hr[137]=1;Gr[137]=0;Ur[137]=-1;Vr[137]=0;qr[137]=0;Jr[137]=0;Qr[137]=-1;ti[137]=0;Rr[137]=1;Or[137]=0;Ar[137]=0;Ir[137]=1;Nr[137]=0;Dr[137]=1;Br[139]=0;Fr[139]=1;zr[139]=1;jr[139]=0;Hr[139]=-1;Gr[139]=0;Ur[139]=1;Vr[139]=0;qr[139]=0;Jr[139]=0;Qr[139]=1;ti[139]=0;Rr[139]=-1;Or[139]=0;Ar[139]=0;Ir[139]=1;Nr[139]=0;Dr[139]=1;Br[98]=0;Fr[98]=-1;zr[98]=0;jr[98]=0;Hr[98]=-1;Gr[98]=1;Wr[98]=1;Xr[98]=0;$r[98]=0;Ur[98]=1;Vr[98]=0;qr[98]=1;Yr[98]=0;Zr[98]=1;Kr[98]=0;Rr[98]=-1;Or[98]=0;Ar[98]=1;Br[99]=0;Fr[99]=1;zr[99]=0;jr[99]=0;Hr[99]=-1;Gr[99]=1;Wr[99]=1;Xr[99]=0;$r[99]=0;Ur[99]=-1;Vr[99]=0;qr[99]=1;Yr[99]=0;Zr[99]=-1;Kr[99]=0;Rr[99]=1;Or[99]=0;Ar[99]=1;jr[38]=0;Hr[38]=-1;Gr[38]=1;Wr[38]=1;Xr[38]=0;$r[38]=0;Jr[38]=0;Qr[38]=1;ti[38]=1;Yr[38]=0;Zr[38]=1;Kr[38]=0;Rr[38]=-1;Or[38]=0;Ar[38]=1;Ir[38]=-1;Nr[38]=0;Dr[38]=0;jr[39]=0;Hr[39]=1;Gr[39]=1;Wr[39]=-1;Xr[39]=0;$r[39]=0;Jr[39]=0;Qr[39]=-1;ti[39]=1;Yr[39]=0;Zr[39]=1;Kr[39]=0;Rr[39]=-1;Or[39]=0;Ar[39]=1;Ir[39]=1;Nr[39]=0;Dr[39]=0;var yf=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},vf=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},bf=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},_f=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},wf=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},xf=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},Ef=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},Cf=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},_w=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},ww=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},xw=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},Ew=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Cw=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},Mw=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},Sw=function(){return[[0,0],[0,1],[1,1],[1,0]]},kw=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},Lw=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},Tw=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},Pw=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},Rw=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},Ow=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},Aw=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},Iw=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},Nw=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Dw=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Bw=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},Fw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},zw=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},jw=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Hw=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},Gw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Uw=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Vw=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},qw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Ww=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Xw=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},$w=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Yw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Zw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Kw=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},ii=[],ni=[],si=[],oi=[],ai=[],li=[],ui=[],hi=[];oi[1]=ai[1]=18;oi[169]=ai[169]=18;si[4]=ni[4]=12;si[166]=ni[166]=12;ii[16]=hi[16]=4;ii[154]=hi[154]=4;li[64]=ui[64]=22;li[106]=ui[106]=22;si[2]=li[2]=17;oi[2]=ai[2]=18;si[168]=li[168]=17;oi[168]=ai[168]=18;ii[8]=oi[8]=9;ni[8]=si[8]=12;ii[162]=oi[162]=9;ni[162]=si[162]=12;ii[32]=hi[32]=4;ni[32]=ui[32]=1;ii[138]=hi[138]=4;ni[138]=ui[138]=1;ai[128]=hi[128]=21;li[128]=ui[128]=22;ai[42]=hi[42]=21;li[42]=ui[42]=22;ni[5]=ai[5]=14;ni[165]=ai[165]=14;si[20]=hi[20]=6;si[150]=hi[150]=6;ii[80]=li[80]=11;ii[90]=li[90]=11;oi[65]=ui[65]=3;oi[105]=ui[105]=3;ii[160]=li[160]=11;ni[160]=ai[160]=14;ii[10]=li[10]=11;ni[10]=ai[10]=14;si[130]=hi[130]=6;oi[130]=ui[130]=3;si[40]=hi[40]=6;oi[40]=ui[40]=3;ni[101]=ui[101]=1;ni[69]=ui[69]=1;ai[149]=hi[149]=21;ai[21]=hi[21]=21;si[86]=li[86]=17;si[84]=li[84]=17;ii[89]=oi[89]=9;ii[81]=oi[81]=9;ii[96]=ui[96]=0;ni[96]=li[96]=15;ii[74]=ui[74]=0;ni[74]=li[74]=15;ii[24]=si[24]=8;oi[24]=hi[24]=7;ii[146]=si[146]=8;oi[146]=hi[146]=7;ni[6]=li[6]=15;si[6]=ai[6]=16;ni[164]=li[164]=15;si[164]=ai[164]=16;oi[129]=hi[129]=7;ai[129]=ui[129]=20;oi[41]=hi[41]=7;ai[41]=ui[41]=20;si[66]=ui[66]=2;oi[66]=li[66]=19;si[104]=ui[104]=2;oi[104]=li[104]=19;ii[144]=ai[144]=10;li[144]=hi[144]=23;ii[26]=ai[26]=10;li[26]=hi[26]=23;ni[36]=hi[36]=5;si[36]=ui[36]=2;ni[134]=hi[134]=5;si[134]=ui[134]=2;ii[9]=ai[9]=10;ni[9]=oi[9]=13;ii[161]=ai[161]=10;ni[161]=oi[161]=13;ni[37]=hi[37]=5;ai[37]=ui[37]=20;ni[133]=hi[133]=5;ai[133]=ui[133]=20;si[148]=ai[148]=16;li[148]=hi[148]=23;si[22]=ai[22]=16;li[22]=hi[22]=23;ii[82]=si[82]=8;oi[82]=li[82]=19;ii[88]=si[88]=8;oi[88]=li[88]=19;ii[73]=ui[73]=0;ni[73]=oi[73]=13;ii[97]=ui[97]=0;ni[97]=oi[97]=13;ii[145]=oi[145]=9;ai[145]=hi[145]=21;ii[25]=oi[25]=9;ai[25]=hi[25]=21;ni[70]=ui[70]=1;si[70]=li[70]=17;ni[100]=ui[100]=1;si[100]=li[100]=17;ii[34]=oi[34]=9;ni[34]=si[34]=12;ai[34]=hi[34]=21;li[34]=ui[34]=22;ii[136]=hi[136]=4;ni[136]=ui[136]=1;si[136]=li[136]=17;oi[136]=ai[136]=18;ii[35]=hi[35]=4;ni[35]=si[35]=12;oi[35]=ai[35]=18;li[35]=ui[35]=22;ii[153]=hi[153]=4;oi[153]=ai[153]=18;ni[102]=si[102]=12;li[102]=ui[102]=22;ii[155]=oi[155]=9;ai[155]=hi[155]=23;ni[103]=ui[103]=1;si[103]=li[103]=17;ii[152]=hi[152]=4;si[152]=li[152]=17;oi[152]=ai[152]=18;ii[156]=si[156]=8;oi[156]=ai[156]=18;li[156]=hi[156]=23;ii[137]=hi[137]=4;ni[137]=ui[137]=1;oi[137]=ai[137]=18;ii[139]=hi[139]=4;ni[139]=oi[139]=13;ai[139]=ui[139]=20;ii[98]=oi[98]=9;ni[98]=si[98]=12;li[98]=ui[98]=22;ii[99]=ui[99]=0;ni[99]=si[99]=12;oi[99]=li[99]=19;ni[38]=si[38]=12;ai[38]=hi[38]=21;li[38]=ui[38]=22;ni[39]=hi[39]=5;si[39]=ai[39]=16;li[39]=ui[39]=22;var Re=[];Re[1]=Re[169]=yf;Re[4]=Re[166]=vf;Re[16]=Re[154]=bf;Re[64]=Re[106]=_f;Re[168]=Re[2]=wf;Re[162]=Re[8]=xf;Re[138]=Re[32]=Ef;Re[42]=Re[128]=Cf;Re[5]=Re[165]=_w;Re[20]=Re[150]=ww;Re[80]=Re[90]=xw;Re[65]=Re[105]=Ew;Re[160]=Re[10]=Cw;Re[130]=Re[40]=Mw;Re[85]=Sw;Re[101]=Re[69]=kw;Re[149]=Re[21]=Lw;Re[86]=Re[84]=Tw;Re[89]=Re[81]=Pw;Re[96]=Re[74]=Rw;Re[24]=Re[146]=Ow;Re[6]=Re[164]=Aw;Re[129]=Re[41]=Iw;Re[66]=Re[104]=Nw;Re[144]=Re[26]=Dw;Re[36]=Re[134]=Bw;Re[9]=Re[161]=Fw;Re[37]=Re[133]=zw;Re[148]=Re[22]=jw;Re[82]=Re[88]=Hw;Re[73]=Re[97]=Gw;Re[145]=Re[25]=Uw;Re[70]=Re[100]=Vw;Re[34]=function(n){return[Cf(n),xf(n)]};Re[35]=qw;Re[136]=function(n){return[Ef(n),wf(n)]};Re[153]=function(n){return[bf(n),yf(n)]};Re[102]=function(n){return[vf(n),_f(n)]};Re[155]=Ww;Re[103]=Xw;Re[152]=function(n){return[bf(n),wf(n)]};Re[156]=$w;Re[137]=function(n){return[Ef(n),yf(n)]};Re[139]=Yw;Re[98]=function(n){return[xf(n),_f(n)]};Re[99]=Zw;Re[38]=function(n){return[vf(n),Cf(n)]};Re[39]=Kw;function Qw(n){return(n>0)-(n<0)||+n}function Va(n,t,e){var r=t[0]-n[0],i=t[1]-n[1],s=e[0]-t[0],o=e[1]-t[1];return Qw(r*o-s*i)}function F0(n,t){var e=n.geometry.coordinates[0].map(function(o){return o[0]}),r=n.geometry.coordinates[0].map(function(o){return o[1]}),i=t.geometry.coordinates[0].map(function(o){return o[0]}),s=t.geometry.coordinates[0].map(function(o){return o[1]});return Math.max.apply(null,e)===Math.max.apply(null,i)&&Math.max.apply(null,r)===Math.max.apply(null,s)&&Math.min.apply(null,e)===Math.min.apply(null,i)&&Math.min.apply(null,r)===Math.min.apply(null,s)}function Mf(n,t){return t.geometry.coordinates[0].every(function(e){return pn(Ei(e),n)})}function z0(n,t){return n[0]===t[0]&&n[1]===t[1]}var tx=function(){function n(t){this.id=n.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(t){return t.join(",")},n.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},n.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},n.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,r){var i=e.to,s=r.to;if(i.coordinates[0]-t.coordinates[0]>=0&&s.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&s.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]===0&&s.coordinates[0]-t.coordinates[0]===0)return i.coordinates[1]-t.coordinates[1]>=0||s.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-s.coordinates[1]:s.coordinates[1]-i.coordinates[1];var o=Va(t.coordinates,i.coordinates,s.coordinates);if(o<0)return 1;if(o>0)return-1;var a=Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2),l=Math.pow(s.coordinates[0]-t.coordinates[0],2)+Math.pow(s.coordinates[1]-t.coordinates[1],2);return a-l}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},n.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},n}(),Sf=tx;var ex=function(){function n(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return fn([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(t){return Va(t.from.coordinates,t.to.coordinates,this.to.coordinates)},n}(),j0=ex;var rx=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},n.prototype.get=function(t){return this.edges[t]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(t){this.edges.forEach(t)},n.prototype.map=function(t){return this.edges.map(t)},n.prototype.some=function(t){return this.edges.some(t)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(o,a,l){return a.from.coordinates[1]>t.edges[o].from.coordinates[1]&&(o=l),o},0),r=(e===0?this.length:e)-1,i=(e+1)%this.length,s=Va(this.edges[r].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return s===0?this.edges[r].from.coordinates[0]>this.edges[i].from.coordinates[0]:s>0},n.prototype.toMultiPoint=function(){return ic(this.edges.map(function(t){return t.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(e){return e.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=Wi([t])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=wc(this.toPolygon())},n.findEdgeRingContaining=function(t,e){var r=t.getEnvelope(),i,s;return e.forEach(function(o){var a=o.getEnvelope();if(s&&(i=s.getEnvelope()),!F0(a,r)&&Mf(a,r)){for(var l=t.map(function(m){return m.from.coordinates}),c=void 0,h=function(m){o.some(function(b){return z0(m,b.from.coordinates)})||(c=m)},d=0,p=l;d<p.length;d++){var g=p[d];h(g)}c&&o.inside(Ei(c))&&(!s||Mf(i,a))&&(s=o)}}),s},n.prototype.inside=function(t){return pn(t,this.toPolygon())},n}(),kf=rx;function ix(n){if(!n)throw new Error("No geojson passed");if(n.type!=="FeatureCollection"&&n.type!=="GeometryCollection"&&n.type!=="MultiLineString"&&n.type!=="LineString"&&n.type!=="Feature")throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var $5=function(){function n(){this.edges=[],this.nodes={}}return n.fromGeoJson=function(t){ix(t);var e=new n;return os(t,function(r){sc(r,"LineString","Graph::fromGeoJson"),Jp(r,function(i,s){if(i){var o=e.getNode(i),a=e.getNode(s);e.addEdge(o,a)}return s})}),e},n.prototype.getNode=function(t){var e=Sf.buildId(t),r=this.nodes[e];return r||(r=this.nodes[e]=new Sf(t)),r},n.prototype.addEdge=function(t,e){var r=new j0(t,e),i=r.getSymetric();this.edges.push(r),this.edges.push(i)},n.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},n.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var r=t.getOuterEdges().map(function(i){return i.to});this.removeNode(t),r.forEach(function(i){return e._removeIfDangle(i)})}},n.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},n.prototype._computeNextCWEdges=function(t){var e=this;typeof t>"u"?Object.keys(this.nodes).forEach(function(r){return e._computeNextCWEdges(e.nodes[r])}):t.getOuterEdges().forEach(function(r,i){t.getOuterEdge((i===0?t.getOuterEdges().length:i)-1).symetric.next=r})},n.prototype._computeNextCCWEdges=function(t,e){for(var r=t.getOuterEdges(),i,s,o=r.length-1;o>=0;--o){var a=r[o],l=a.symetric,c=void 0,h=void 0;a.label===e&&(c=a),l.label===e&&(h=l),!(!c||!h)&&(h&&(s=h),c&&(s&&(s.next=c,s=void 0),i||(i=c)))}s&&(s.next=i)},n.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(r){if(!(r.label>=0)){t.push(r);var i=r;do i.label=e,i=i.next;while(!r.isEqual(i));e++}}),t},n.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(r){r.label=void 0}),this._findLabeledEdgeRings().forEach(function(r){t._findIntersectionNodes(r).forEach(function(i){t._computeNextCCWEdges(i,r.label)})});var e=[];return this.edges.forEach(function(r){r.ring||e.push(t._findEdgeRing(r))}),e},n.prototype._findIntersectionNodes=function(t){var e=[],r=t,i=function(){var s=0;r.from.getOuterEdges().forEach(function(o){o.label===t.label&&++s}),s>1&&e.push(r.from),r=r.next};do i();while(!t.isEqual(r));return e},n.prototype._findEdgeRing=function(t){var e=t,r=new kf;do r.push(e),e.ring=r,e=e.next;while(!t.isEqual(e));return r},n.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(r){return e.removeEdge(r)}),t.innerEdges.forEach(function(r){return e.removeEdge(r)}),delete this.nodes[t.id]},n.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},n}();function As(n,t){var e=dn(n),r=dn(t),i=e.type,s=r.type,o=e.coordinates,a=r.coordinates;switch(i){case"Point":switch(s){case"Point":return Lf(o,a);default:throw new Error("feature2 "+s+" geometry not supported")}case"MultiPoint":switch(s){case"Point":return nx(e,r);case"MultiPoint":return sx(e,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"Point":return Os(r,e,{ignoreEndVertices:!0});case"LineString":return lx(e,r);case"MultiPoint":return ox(e,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"Point":return pn(r,e,{ignoreBoundary:!0});case"LineString":return ux(e,r);case"Polygon":return hx(e,r);case"MultiPoint":return ax(e,r);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function nx(n,t){var e,r=!1;for(e=0;e<n.coordinates.length;e++)if(Lf(n.coordinates[e],t.coordinates)){r=!0;break}return r}function sx(n,t){for(var e=0,r=t.coordinates;e<r.length;e++){for(var i=r[e],s=!1,o=0,a=n.coordinates;o<a.length;o++){var l=a[o];if(Lf(i,l)){s=!0;break}}if(!s)return!1}return!0}function ox(n,t){for(var e=!1,r=0,i=t.coordinates;r<i.length;r++){var s=i[r];if(Os(s,n,{ignoreEndVertices:!0})&&(e=!0),!Os(s,n))return!1}return!!e}function ax(n,t){for(var e=0,r=t.coordinates;e<r.length;e++){var i=r[e];if(!pn(i,n,{ignoreBoundary:!0}))return!1}return!0}function lx(n,t){for(var e=!1,r=0,i=t.coordinates;r<i.length;r++){var s=i[r];if(Os({type:"Point",coordinates:s},n,{ignoreEndVertices:!0})&&(e=!0),!Os({type:"Point",coordinates:s},n,{ignoreEndVertices:!1}))return!1}return e}function ux(n,t){var e=!1,r=0,i=Sn(n),s=Sn(t);if(!G0(i,s))return!1;for(r;r<t.coordinates.length-1;r++){var o=cx(t.coordinates[r],t.coordinates[r+1]);if(pn({type:"Point",coordinates:o},n,{ignoreBoundary:!0})){e=!0;break}}return e}function hx(n,t){if(n.type==="Feature"&&n.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;var e=Sn(n),r=Sn(t);if(!G0(e,r))return!1;for(var i=dn(t).coordinates,s=0,o=i;s<o.length;s++)for(var a=o[s],l=0,c=a;l<c.length;l++){var h=c[l];if(!pn(h,n))return!1}return!0}function G0(n,t){return!(n[0]>t[0]||n[2]<t[2]||n[1]>t[1]||n[3]<t[3])}function Lf(n,t){return n[0]===t[0]&&n[1]===t[1]}function cx(n,t){return[(n[0]+t[0])/2,(n[1]+t[1])/2]}var W0=Mr(Tf(),1);function no(n,t){var e=dn(n),r=dn(t),i=e.type,s=r.type;if(i==="MultiPoint"&&s!=="MultiPoint"||(i==="LineString"||i==="MultiLineString")&&s!=="LineString"&&s!=="MultiLineString"||(i==="Polygon"||i==="MultiPolygon")&&s!=="Polygon"&&s!=="MultiPolygon")throw new Error("features must be of the same type");if(i==="Point")throw new Error("Point geometry not supported");var o=new W0.default({precision:6});if(o.compare(n,t))return!1;var a=0;switch(i){case"MultiPoint":for(var l=0;l<e.coordinates.length;l++)for(var c=0;c<r.coordinates.length;c++){var h=e.coordinates[l],d=r.coordinates[c];if(h[0]===d[0]&&h[1]===d[1])return!0}return!1;case"LineString":case"MultiLineString":Wo(n,function(p){Wo(t,function(g){gf(p,g).features.length&&a++})});break;case"Polygon":case"MultiPolygon":Wo(n,function(p){Wo(t,function(g){Yo(p,g).features.length&&a++})});break}return a>0}var px=Mr(Tf(),1);var gx=Mr(K0(),1);var Ex=Mr(ay(),1);function uy(n){for(var t=n,e=[];t.parent;)e.unshift(t),t=t.parent;return e}function Mx(){return new hy(function(n){return n.f})}var Af={search:function(n,t,e,r){n.cleanDirty(),r=r||{};var i=r.heuristic||Af.heuristics.manhattan,s=r.closest||!1,o=Mx(),a=t;for(t.h=i(t,e),o.push(t);o.size()>0;){var l=o.pop();if(l===e)return uy(l);l.closed=!0;for(var c=n.neighbors(l),h=0,d=c.length;h<d;++h){var p=c[h];if(!(p.closed||p.isWall())){var g=l.g+p.getCost(l),m=p.visited;(!m||g<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||i(p,e),p.g=g,p.f=p.g+p.h,n.markDirty(p),s&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),m?o.rescoreElement(p):o.push(p))}}}return s?uy(a):[]},heuristics:{manhattan:function(n,t){var e=Math.abs(t.x-n.x),r=Math.abs(t.y-n.y);return e+r},diagonal:function(n,t){var e=1,r=Math.sqrt(2),i=Math.abs(t.x-n.x),s=Math.abs(t.y-n.y);return e*(i+s)+(r-2*e)*Math.min(i,s)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function Nl(n,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var e=0;e<n.length;e++){this.grid[e]=[];for(var r=0,i=n[e];r<i.length;r++){var s=new th(e,r,i[r]);this.grid[e][r]=s,this.nodes.push(s)}}this.init()}Nl.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)Af.cleanNode(this.nodes[n])};Nl.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)Af.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]};Nl.prototype.markDirty=function(n){this.dirtyNodes.push(n)};Nl.prototype.neighbors=function(n){var t=[],e=n.x,r=n.y,i=this.grid;return i[e-1]&&i[e-1][r]&&t.push(i[e-1][r]),i[e+1]&&i[e+1][r]&&t.push(i[e+1][r]),i[e]&&i[e][r-1]&&t.push(i[e][r-1]),i[e]&&i[e][r+1]&&t.push(i[e][r+1]),this.diagonal&&(i[e-1]&&i[e-1][r-1]&&t.push(i[e-1][r-1]),i[e+1]&&i[e+1][r-1]&&t.push(i[e+1][r-1]),i[e-1]&&i[e-1][r+1]&&t.push(i[e-1][r+1]),i[e+1]&&i[e+1][r+1]&&t.push(i[e+1][r+1])),t};Nl.prototype.toString=function(){for(var n=[],t=this.grid,e,r,i,s,o=0,a=t.length;o<a;o++){for(e=[],r=t[o],i=0,s=r.length;i<s;i++)e.push(r[i].weight);n.push(e.join(" "))}return n.join(`
`)};function th(n,t,e){this.x=n,this.y=t,this.weight=e}th.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};th.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?this.weight*1.41421:this.weight};th.prototype.isWall=function(){return this.weight===0};function hy(n){this.content=[],this.scoreFunction=n}hy.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),n},remove:function(n){var t=this.content.indexOf(n),e=this.content.pop();t!==this.content.length-1&&(this.content[t]=e,this.scoreFunction(e)<this.scoreFunction(n)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var t=this.content[n];n>0;){var e=(n+1>>1)-1,r=this.content[e];if(this.scoreFunction(t)<this.scoreFunction(r))this.content[e]=t,this.content[n]=r,n=e;else break}},bubbleUp:function(n){for(var t=this.content.length,e=this.content[n],r=this.scoreFunction(e);;){var i=n+1<<1,s=i-1,o=null,a;if(s<t){var l=this.content[s];a=this.scoreFunction(l),a<r&&(o=s)}if(i<t){var c=this.content[i],h=this.scoreFunction(c);h<(o===null?r:a)&&(o=i)}if(o!==null)this.content[n]=this.content[o],this.content[o]=e,n=o;else break}}};function If(){this._=null}function Wa(n){n.U=n.C=n.L=n.R=n.P=n.N=null}If.prototype={constructor:If,insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=cy(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(Dl(this,e),n=e,e=n.U),e.C=!1,r.C=!0,Bl(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(Bl(this,e),n=e,e=n.U),e.C=!1,r.C=!0,Dl(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t=n.U,e,r=n.L,i=n.R,s,o;if(r?i?s=cy(i):s=r:s=i,t?t.L===n?t.L=s:t.R=s:this._=s,r&&i?(o=s.C,s.C=n.C,s.L=r,r.U=s,s!==i?(t=s.U,s.U=n.U,n=s.R,t.L=n,s.R=i,i.U=s):(s.U=t,t=s,n=s.R)):(o=n.C,n=s),n&&(n.U=t),!o){if(n&&n.C){n.C=!1;return}do{if(n===this._)break;if(n===t.L){if(e=t.R,e.C&&(e.C=!1,t.C=!0,Dl(this,t),e=t.R),e.L&&e.L.C||e.R&&e.R.C){(!e.R||!e.R.C)&&(e.L.C=!1,e.C=!0,Bl(this,e),e=t.R),e.C=t.C,t.C=e.R.C=!1,Dl(this,t),n=this._;break}}else if(e=t.L,e.C&&(e.C=!1,t.C=!0,Bl(this,t),e=t.L),e.L&&e.L.C||e.R&&e.R.C){(!e.L||!e.L.C)&&(e.R.C=!1,e.C=!0,Dl(this,e),e=t.L),e.C=t.C,t.C=e.L.C=!1,Bl(this,t),n=this._;break}e.C=!0,n=t,t=t.U}while(!n.C);n&&(n.C=!1)}}};function Dl(n,t){var e=t,r=t.R,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function Bl(n,t){var e=t,r=t.L,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function cy(n){for(;n.L;)n=n.L;return n}var Nf=If;function Xa(n,t,e,r){var i=[null,null],s=Hn.push(i)-1;return i.left=n,i.right=t,e&&Fl(i,n,t,e),r&&Fl(i,t,n,r),ds[n.index].halfedges.push(s),ds[t.index].halfedges.push(s),i}function $a(n,t,e){var r=[t,e];return r.left=n,r}function Fl(n,t,e,r){!n[0]&&!n[1]?(n[0]=r,n.left=t,n.right=e):n.left===e?n[1]=r:n[0]=r}function Sx(n,t,e,r,i){var s=n[0],o=n[1],a=s[0],l=s[1],c=o[0],h=o[1],d=0,p=1,g=c-a,m=h-l,b;if(b=t-a,!(!g&&b>0)){if(b/=g,g<0){if(b<d)return;b<p&&(p=b)}else if(g>0){if(b>p)return;b>d&&(d=b)}if(b=r-a,!(!g&&b<0)){if(b/=g,g<0){if(b>p)return;b>d&&(d=b)}else if(g>0){if(b<d)return;b<p&&(p=b)}if(b=e-l,!(!m&&b>0)){if(b/=m,m<0){if(b<d)return;b<p&&(p=b)}else if(m>0){if(b>p)return;b>d&&(d=b)}if(b=i-l,!(!m&&b<0)){if(b/=m,m<0){if(b>p)return;b>d&&(d=b)}else if(m>0){if(b<d)return;b<p&&(p=b)}return!(d>0)&&!(p<1)||(d>0&&(n[0]=[a+d*g,l+d*m]),p<1&&(n[1]=[a+p*g,l+p*m])),!0}}}}}function kx(n,t,e,r,i){var s=n[1];if(s)return!0;var o=n[0],a=n.left,l=n.right,c=a[0],h=a[1],d=l[0],p=l[1],g=(c+d)/2,m=(h+p)/2,b,y;if(p===h){if(g<t||g>=r)return;if(c>d){if(!o)o=[g,e];else if(o[1]>=i)return;s=[g,i]}else{if(!o)o=[g,i];else if(o[1]<e)return;s=[g,e]}}else if(b=(c-d)/(p-h),y=m-b*g,b<-1||b>1)if(c>d){if(!o)o=[(e-y)/b,e];else if(o[1]>=i)return;s=[(i-y)/b,i]}else{if(!o)o=[(i-y)/b,i];else if(o[1]<e)return;s=[(e-y)/b,e]}else if(h<p){if(!o)o=[t,b*t+y];else if(o[0]>=r)return;s=[r,b*r+y]}else{if(!o)o=[r,b*r+y];else if(o[0]<t)return;s=[t,b*t+y]}return n[0]=o,n[1]=s,!0}function fy(n,t,e,r){for(var i=Hn.length,s;i--;)(!kx(s=Hn[i],n,t,e,r)||!Sx(s,n,t,e,r)||!(Math.abs(s[0][0]-s[1][0])>Pi||Math.abs(s[0][1]-s[1][1])>Pi))&&delete Hn[i]}function dy(n){return ds[n.index]={site:n,halfedges:[]}}function Lx(n,t){var e=n.site,r=t.left,i=t.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Df(n,t){return t[+(t.left!==n.site)]}function Tx(n,t){return t[+(t.left===n.site)]}function py(){for(var n=0,t=ds.length,e,r,i,s;n<t;++n)if((e=ds[n])&&(s=(r=e.halfedges).length)){var o=new Array(s),a=new Array(s);for(i=0;i<s;++i)o[i]=i,a[i]=Lx(e,Hn[r[i]]);for(o.sort(function(l,c){return a[c]-a[l]}),i=0;i<s;++i)a[i]=r[o[i]];for(i=0;i<s;++i)r[i]=a[i]}}function my(n,t,e,r){var i=ds.length,s,o,a,l,c,h,d,p,g,m,b,y,x=!0;for(s=0;s<i;++s)if(o=ds[s]){for(a=o.site,c=o.halfedges,l=c.length;l--;)Hn[c[l]]||c.splice(l,1);for(l=0,h=c.length;l<h;)m=Tx(o,Hn[c[l]]),b=m[0],y=m[1],d=Df(o,Hn[c[++l%h]]),p=d[0],g=d[1],(Math.abs(b-p)>Pi||Math.abs(y-g)>Pi)&&(c.splice(l,0,Hn.push($a(a,m,Math.abs(b-n)<Pi&&r-y>Pi?[n,Math.abs(p-n)<Pi?g:r]:Math.abs(y-r)<Pi&&e-b>Pi?[Math.abs(g-r)<Pi?p:e,r]:Math.abs(b-e)<Pi&&y-t>Pi?[e,Math.abs(p-e)<Pi?g:t]:Math.abs(y-t)<Pi&&b-n>Pi?[Math.abs(g-t)<Pi?p:n,t]:null))-1),++h);h&&(x=!1)}if(x){var S,O,D,U=1/0;for(s=0,x=null;s<i;++s)(o=ds[s])&&(a=o.site,S=a[0]-n,O=a[1]-t,D=S*S+O*O,D<U&&(U=D,x=o));if(x){var z=[n,t],q=[n,r],G=[e,r],tt=[e,t];x.halfedges.push(Hn.push($a(a=x.site,z,q))-1,Hn.push($a(a,q,G))-1,Hn.push($a(a,G,tt))-1,Hn.push($a(a,tt,z))-1)}}for(s=0;s<i;++s)(o=ds[s])&&(o.halfedges.length||delete ds[s])}var gy=[],eh;function Px(){Wa(this),this.x=this.y=this.arc=this.site=this.cy=null}function ca(n){var t=n.P,e=n.N;if(!(!t||!e)){var r=t.site,i=n.site,s=e.site;if(r!==s){var o=i[0],a=i[1],l=r[0]-o,c=r[1]-a,h=s[0]-o,d=s[1]-a,p=2*(l*d-c*h);if(!(p>=-yy)){var g=l*l+c*c,m=h*h+d*d,b=(d*g-c*m)/p,y=(l*m-h*g)/p,x=gy.pop()||new Px;x.arc=n,x.site=i,x.x=b+o,x.y=(x.cy=y+a)+Math.sqrt(b*b+y*y),n.circle=x;for(var S=null,O=Ya._;O;)if(x.y<O.y||x.y===O.y&&x.x<=O.x)if(O.L)O=O.L;else{S=O.P;break}else if(O.R)O=O.R;else{S=O;break}Ya.insert(S,x),S||(eh=x)}}}}function fa(n){var t=n.circle;t&&(t.P||(eh=t.N),Ya.remove(t),gy.push(t),Wa(t),n.circle=null)}var by=[];function Rx(){Wa(this),this.edge=this.site=this.circle=null}function vy(n){var t=by.pop()||new Rx;return t.site=n,t}function Bf(n){fa(n),da.remove(n),by.push(n),Wa(n)}function _y(n){var t=n.circle,e=t.x,r=t.cy,i=[e,r],s=n.P,o=n.N,a=[n];Bf(n);for(var l=s;l.circle&&Math.abs(e-l.circle.x)<Pi&&Math.abs(r-l.circle.cy)<Pi;)s=l.P,a.unshift(l),Bf(l),l=s;a.unshift(l),fa(l);for(var c=o;c.circle&&Math.abs(e-c.circle.x)<Pi&&Math.abs(r-c.circle.cy)<Pi;)o=c.N,a.push(c),Bf(c),c=o;a.push(c),fa(c);var h=a.length,d;for(d=1;d<h;++d)c=a[d],l=a[d-1],Fl(c.edge,l.site,c.site,i);l=a[0],c=a[h-1],c.edge=Xa(l.site,c.site,null,i),ca(l),ca(c)}function wy(n){for(var t=n[0],e=n[1],r,i,s,o,a=da._;a;)if(s=xy(a,e)-t,s>Pi)a=a.L;else if(o=t-Ox(a,e),o>Pi){if(!a.R){r=a;break}a=a.R}else{s>-Pi?(r=a.P,i=a):o>-Pi?(r=a,i=a.N):r=i=a;break}dy(n);var l=vy(n);if(da.insert(r,l),!(!r&&!i)){if(r===i){fa(r),i=vy(r.site),da.insert(l,i),l.edge=i.edge=Xa(r.site,l.site),ca(r),ca(i);return}if(!i){l.edge=Xa(r.site,l.site);return}fa(r),fa(i);var c=r.site,h=c[0],d=c[1],p=n[0]-h,g=n[1]-d,m=i.site,b=m[0]-h,y=m[1]-d,x=2*(p*y-g*b),S=p*p+g*g,O=b*b+y*y,D=[(y*S-g*O)/x+h,(p*O-b*S)/x+d];Fl(i.edge,c,m,D),l.edge=Xa(c,n,null,D),i.edge=Xa(n,m,null,D),ca(r),ca(i)}}function xy(n,t){var e=n.site,r=e[0],i=e[1],s=i-t;if(!s)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e[0],l=e[1],c=l-t;if(!c)return a;var h=a-r,d=1/s-1/c,p=h/c;return d?(-p+Math.sqrt(p*p-2*d*(h*h/(-2*c)-l+c/2+i-s/2)))/d+r:(r+a)/2}function Ox(n,t){var e=n.N;if(e)return xy(e,t);var r=n.site;return r[1]===t?r[0]:1/0}var Pi=1e-6,yy=1e-12,da,ds,Ya,Hn;function Ax(n,t,e){return(n[0]-e[0])*(t[1]-n[1])-(n[0]-t[0])*(e[1]-n[1])}function Ix(n,t){return t[1]-n[1]||t[0]-n[0]}function rh(n,t){var e=n.sort(Ix).pop(),r,i,s;for(Hn=[],ds=new Array(n.length),da=new Nf,Ya=new Nf;;)if(s=eh,e&&(!s||e[1]<s.y||e[1]===s.y&&e[0]<s.x))(e[0]!==r||e[1]!==i)&&(wy(e),r=e[0],i=e[1]),e=n.pop();else if(s)_y(s.arc);else break;if(py(),t){var o=+t[0][0],a=+t[0][1],l=+t[1][0],c=+t[1][1];fy(o,a,l,c),my(o,a,l,c)}this.edges=Hn,this.cells=ds,da=Ya=Hn=ds=null}rh.prototype={constructor:rh,polygons:function(){var n=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(r){return Df(t,n[r])});return e.data=t.site.data,e})},triangles:function(){var n=[],t=this.edges;return this.cells.forEach(function(e,r){if(a=(s=e.halfedges).length)for(var i=e.site,s,o=-1,a,l,c=t[s[a-1]],h=c.left===i?c.right:c.left;++o<a;)l=h,c=t[s[o]],h=c.left===i?c.right:c.left,l&&h&&r<l.index&&r<h.index&&Ax(i,l,h)<0&&n.push([i.data,l.data,h.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,t,e){for(var r=this,i,s=r._found||0,o=r.cells.length,a;!(a=r.cells[s]);)if(++s>=o)return null;var l=n-a.site[0],c=t-a.site[1],h=l*l+c*c;do a=r.cells[i=s],s=null,a.halfedges.forEach(function(d){var p=r.edges[d],g=p.left;if(!((g===a.site||!g)&&!(g=p.right))){var m=n-g[0],b=t-g[1],y=m*m+b*b;y<h&&(h=y,s=g.index)}});while(s!==null);return r._found=i,e==null||h<=e*e?a.site:null}};var Gx=Mr(Za(),1);var el=Mr(Sy(),1);function Cs(){return new sh}function sh(){this.reset()}sh.prototype={constructor:sh,reset:function(){this.s=this.t=0},add:function(n){ky(nh,n,this.t),ky(this,nh.s,this.s),this.s?this.t+=nh.t:this.s=nh.t},valueOf:function(){return this.s}};var nh=new sh;function ky(n,t,e){var r=n.s=t+e,i=r-t,s=r-i;n.t=t-s+(e-i)}var vr=1e-6;var ei=Math.PI,In=ei/2,oh=ei/4,Qn=ei*2,ps=180/ei,sn=ei/180,xi=Math.abs,so=Math.atan,Gn=Math.atan2,pr=Math.cos;var ah=Math.exp;var zl=Math.log;var mr=Math.sin;var kn=Math.sqrt,jl=Math.tan;function lh(n){return n>1?0:n<-1?ei:Math.acos(n)}function Nn(n){return n>1?In:n<-1?-In:Math.asin(n)}function ms(){}function uh(n,t){n&&Ty.hasOwnProperty(n.type)&&Ty[n.type](n,t)}var Ly={Feature:function(n,t){uh(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)uh(e[r].geometry,t)}},Ty={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){jf(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)jf(e[r],t,0)},Polygon:function(n,t){Py(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Py(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)uh(e[r],t)}};function jf(n,t,e){var r=-1,i=n.length-e,s;for(t.lineStart();++r<i;)s=n[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Py(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)jf(n[e],t,1);t.polygonEnd()}function Qo(n,t){n&&Ly.hasOwnProperty(n.type)?Ly[n.type](n,t):uh(n,t)}var Ux=Cs(),GR=Cs();function Ka(n){return[Gn(n[1],n[0]),Nn(n[2])]}function oo(n){var t=n[0],e=n[1],r=pr(e);return[r*pr(t),r*mr(t),mr(e)]}function Hl(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function pa(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function hh(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Gl(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Ja(n){var t=kn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var JR=Cs();function ch(n,t){function e(r,i){return r=n(r,i),t(r[0],r[1])}return n.invert&&t.invert&&(e.invert=function(r,i){return r=t.invert(r,i),r&&n.invert(r[0],r[1])}),e}function Hf(n,t){return[n>ei?n-Qn:n<-ei?n+Qn:n,t]}Hf.invert=Hf;function Gf(n,t,e){return(n%=Qn)?t||e?ch(Oy(n),Ay(t,e)):Oy(n):t||e?Ay(t,e):Hf}function Ry(n){return function(t,e){return t+=n,[t>ei?t-Qn:t<-ei?t+Qn:t,e]}}function Oy(n){var t=Ry(n);return t.invert=Ry(-n),t}function Ay(n,t){var e=pr(n),r=mr(n),i=pr(t),s=mr(t);function o(a,l){var c=pr(l),h=pr(a)*c,d=mr(a)*c,p=mr(l),g=p*e+h*r;return[Gn(d*i-g*s,h*e-p*r),Nn(g*i+d*s)]}return o.invert=function(a,l){var c=pr(l),h=pr(a)*c,d=mr(a)*c,p=mr(l),g=p*i-d*s;return[Gn(d*i+p*s,h*e+g*r),Nn(g*e-h*r)]},o}function Ny(n,t,e,r,i,s){if(e){var o=pr(t),a=mr(t),l=r*e;i==null?(i=t+r*Qn,s=t-l/2):(i=Iy(o,i),s=Iy(o,s),(r>0?i<s:i>s)&&(i+=r*Qn));for(var c,h=i;r>0?h>s:h<s;h-=l)c=Ka([o,-a*pr(h),-a*mr(h)]),n.point(c[0],c[1])}}function Iy(n,t){t=oo(t),t[0]-=n,Ja(t);var e=lh(-t[1]);return((-t[2]<0?-e:e)+Qn-vr)%Qn}function fh(){var n=[],t;return{point:function(e,r){t.push([e,r])},lineStart:function(){n.push(t=[])},lineEnd:ms,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Dy(n,t,e,r,i,s){var o=n[0],a=n[1],l=t[0],c=t[1],h=0,d=1,p=l-o,g=c-a,m;if(m=e-o,!(!p&&m>0)){if(m/=p,p<0){if(m<h)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>h&&(h=m)}if(m=i-o,!(!p&&m<0)){if(m/=p,p<0){if(m>d)return;m>h&&(h=m)}else if(p>0){if(m<h)return;m<d&&(d=m)}if(m=r-a,!(!g&&m>0)){if(m/=g,g<0){if(m<h)return;m<d&&(d=m)}else if(g>0){if(m>d)return;m>h&&(h=m)}if(m=s-a,!(!g&&m<0)){if(m/=g,g<0){if(m>d)return;m>h&&(h=m)}else if(g>0){if(m<h)return;m<d&&(d=m)}return h>0&&(n[0]=o+h*p,n[1]=a+h*g),d<1&&(t[0]=o+d*p,t[1]=a+d*g),!0}}}}}function Qa(n,t){return xi(n[0]-t[0])<vr&&xi(n[1]-t[1])<vr}function dh(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function ph(n,t,e,r,i){var s=[],o=[],a,l;if(n.forEach(function(m){if(!((b=m.length-1)<=0)){var b,y=m[0],x=m[b],S;if(Qa(y,x)){for(i.lineStart(),a=0;a<b;++a)i.point((y=m[a])[0],y[1]);i.lineEnd();return}s.push(S=new dh(y,m,null,!0)),o.push(S.o=new dh(y,null,S,!1)),s.push(S=new dh(x,m,null,!1)),o.push(S.o=new dh(x,null,S,!0))}}),!!s.length){for(o.sort(t),By(s),By(o),a=0,l=o.length;a<l;++a)o[a].e=e=!e;for(var c=s[0],h,d;;){for(var p=c,g=!0;p.v;)if((p=p.n)===c)return;h=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(a=0,l=h.length;a<l;++a)i.point((d=h[a])[0],d[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g)for(h=p.p.z,a=h.length-1;a>=0;--a)i.point((d=h[a])[0],d[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,h=p.z,g=!g}while(!p.v);i.lineEnd()}}}function By(n){if(t=n.length){for(var t,e=0,r=n[0],i;++e<t;)r.n=i=n[e],i.p=r,r=i;r.n=i=n[0],i.p=r}}function ta(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function Uf(n){return n.length===1&&(n=Vx(n)),{left:function(t,e,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var s=r+i>>>1;n(t[s],e)<0?r=s+1:i=s}return r},right:function(t,e,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var s=r+i>>>1;n(t[s],e)>0?i=s:r=s+1}return r}}}function Vx(n){return function(t,e){return ta(n(t),e)}}var Fy=Uf(ta),qx=Fy.right,Wx=Fy.left;var zy=Array.prototype,$x=zy.slice,Yx=zy.map;var VO=Math.sqrt(50),qO=Math.sqrt(10),WO=Math.sqrt(2);function Ul(n){for(var t=n.length,e,r=-1,i=0,s,o;++r<t;)i+=n[r].length;for(s=new Array(i);--t>=0;)for(o=n[t],e=o.length;--e>=0;)s[--i]=o[e];return s}var Vl=1e9,gh=-Vl;function Vf(n,t,e,r){function i(c,h){return n<=c&&c<=e&&t<=h&&h<=r}function s(c,h,d,p){var g=0,m=0;if(c==null||(g=o(c,d))!==(m=o(h,d))||l(c,h)<0^d>0)do p.point(g===0||g===3?n:e,g>1?r:t);while((g=(g+d+4)%4)!==m);else p.point(h[0],h[1])}function o(c,h){return xi(c[0]-n)<vr?h>0?0:3:xi(c[0]-e)<vr?h>0?2:1:xi(c[1]-t)<vr?h>0?1:0:h>0?3:2}function a(c,h){return l(c.x,h.x)}function l(c,h){var d=o(c,1),p=o(h,1);return d!==p?d-p:d===0?h[1]-c[1]:d===1?c[0]-h[0]:d===2?c[1]-h[1]:h[0]-c[0]}return function(c){var h=c,d=fh(),p,g,m,b,y,x,S,O,D,U,z,q={point:G,lineStart:N,lineEnd:Z,polygonStart:K,polygonEnd:B};function G(C,k){i(C,k)&&h.point(C,k)}function tt(){for(var C=0,k=0,T=g.length;k<T;++k)for(var R=g[k],F=1,H=R.length,rt=R[0],ot,dt,$=rt[0],ct=rt[1];F<H;++F)ot=$,dt=ct,rt=R[F],$=rt[0],ct=rt[1],dt<=r?ct>r&&($-ot)*(r-dt)>(ct-dt)*(n-ot)&&++C:ct<=r&&($-ot)*(r-dt)<(ct-dt)*(n-ot)&&--C;return C}function K(){h=d,p=[],g=[],z=!0}function B(){var C=tt(),k=z&&C,T=(p=Ul(p)).length;(k||T)&&(c.polygonStart(),k&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),T&&ph(p,a,C,s,c),c.polygonEnd()),h=c,p=g=m=null}function N(){q.point=w,g&&g.push(m=[]),U=!0,D=!1,S=O=NaN}function Z(){p&&(w(b,y),x&&D&&d.rejoin(),p.push(d.result())),q.point=G,D&&h.lineEnd()}function w(C,k){var T=i(C,k);if(g&&m.push([C,k]),U)b=C,y=k,x=T,U=!1,T&&(h.lineStart(),h.point(C,k));else if(T&&D)h.point(C,k);else{var R=[S=Math.max(gh,Math.min(Vl,S)),O=Math.max(gh,Math.min(Vl,O))],F=[C=Math.max(gh,Math.min(Vl,C)),k=Math.max(gh,Math.min(Vl,k))];Dy(R,F,n,t,e,r)?(D||(h.lineStart(),h.point(R[0],R[1])),h.point(F[0],F[1]),T||h.lineEnd(),z=!1):T&&(h.lineStart(),h.point(C,k),z=!1)}S=C,O=k,D=T}return q}}var qf=Cs();function Wf(n,t){var e=t[0],r=t[1],i=[mr(e),-pr(e),0],s=0,o=0;qf.reset();for(var a=0,l=n.length;a<l;++a)if(h=(c=n[a]).length)for(var c,h,d=c[h-1],p=d[0],g=d[1]/2+oh,m=mr(g),b=pr(g),y=0;y<h;++y,p=S,m=D,b=U,d=x){var x=c[y],S=x[0],O=x[1]/2+oh,D=mr(O),U=pr(O),z=S-p,q=z>=0?1:-1,G=q*z,tt=G>ei,K=m*D;if(qf.add(Gn(K*q*mr(G),b*U+K*pr(G))),s+=tt?z+q*Qn:z,tt^p>=e^S>=e){var B=pa(oo(d),oo(x));Ja(B);var N=pa(i,B);Ja(N);var Z=(tt^z>=0?-1:1)*Nn(N[2]);(r>Z||r===Z&&(B[0]||B[1]))&&(o+=tt^z>=0?1:-1)}}return(s<-vr||s<vr&&qf<-vr)^o&1}var B7=Cs();function ql(n){return n}var rA=Cs(),iA=Cs();var tl=1/0,yh=tl,Wl=-tl,vh=Wl,s2={point:o2,lineStart:ms,lineEnd:ms,polygonStart:ms,polygonEnd:ms,result:function(){var n=[[tl,yh],[Wl,vh]];return Wl=vh=-(yh=tl=1/0),n}};function o2(n,t){n<tl&&(tl=n),n>Wl&&(Wl=n),t<yh&&(yh=t),t>vh&&(vh=t)}var bh=s2;function Xf(n){this._context=n}Xf.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,Qn);break}}},result:ms};var mA=Cs();function $f(){this._string=[]}$f.prototype={_radius:4.5,_circle:Gy(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._string.push("M",n,",",t),this._point=1;break}case 1:{this._string.push("L",n,",",t);break}default:{this._circle==null&&(this._circle=Gy(this._radius)),this._string.push("M",n,",",t,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function Gy(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function _h(n,t,e,r){return function(i,s){var o=t(s),a=i.invert(r[0],r[1]),l=fh(),c=t(l),h=!1,d,p,g,m={point:b,lineStart:x,lineEnd:S,polygonStart:function(){m.point=O,m.lineStart=D,m.lineEnd=U,p=[],d=[]},polygonEnd:function(){m.point=b,m.lineStart=x,m.lineEnd=S,p=Ul(p);var z=Wf(d,a);p.length?(h||(s.polygonStart(),h=!0),ph(p,l2,z,e,s)):z&&(h||(s.polygonStart(),h=!0),s.lineStart(),e(null,null,1,s),s.lineEnd()),h&&(s.polygonEnd(),h=!1),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),e(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function b(z,q){var G=i(z,q);n(z=G[0],q=G[1])&&s.point(z,q)}function y(z,q){var G=i(z,q);o.point(G[0],G[1])}function x(){m.point=y,o.lineStart()}function S(){m.point=b,o.lineEnd()}function O(z,q){g.push([z,q]);var G=i(z,q);c.point(G[0],G[1])}function D(){c.lineStart(),g=[]}function U(){O(g[0][0],g[0][1]),c.lineEnd();var z=c.clean(),q=l.result(),G,tt=q.length,K,B,N;if(g.pop(),d.push(g),g=null,!!tt){if(z&1){if(B=q[0],(K=B.length-1)>0){for(h||(s.polygonStart(),h=!0),s.lineStart(),G=0;G<K;++G)s.point((N=B[G])[0],N[1]);s.lineEnd()}return}tt>1&&z&2&&q.push(q.pop().concat(q.shift())),p.push(q.filter(a2))}}return m}}function a2(n){return n.length>1}function l2(n,t){return((n=n.x)[0]<0?n[1]-In-vr:In-n[1])-((t=t.x)[0]<0?t[1]-In-vr:In-t[1])}var Yf=_h(function(){return!0},u2,c2,[-ei,-In]);function u2(n){var t=NaN,e=NaN,r=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(s,o){var a=s>0?ei:-ei,l=xi(s-t);xi(l-ei)<vr?(n.point(t,e=(e+o)/2>0?In:-In),n.point(r,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(s,e),i=0):r!==a&&l>=ei&&(xi(t-r)<vr&&(t-=r*vr),xi(s-a)<vr&&(s-=a*vr),e=h2(t,e,s,o),n.point(r,e),n.lineEnd(),n.lineStart(),n.point(a,e),i=0),n.point(t=s,e=o),r=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-i}}}function h2(n,t,e,r){var i,s,o=mr(n-e);return xi(o)>vr?so((mr(t)*(s=pr(r))*mr(e)-mr(r)*(i=pr(t))*mr(n))/(i*s*o)):(t+r)/2}function c2(n,t,e,r){var i;if(n==null)i=e*In,r.point(-ei,i),r.point(0,i),r.point(ei,i),r.point(ei,0),r.point(ei,-i),r.point(0,-i),r.point(-ei,-i),r.point(-ei,0),r.point(-ei,i);else if(xi(n[0]-t[0])>vr){var s=n[0]<t[0]?ei:-ei;i=e*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Uy(n,t){var e=pr(n),r=e>0,i=xi(e)>vr;function s(h,d,p,g){Ny(g,n,t,p,h,d)}function o(h,d){return pr(h)*pr(d)>e}function a(h){var d,p,g,m,b;return{lineStart:function(){m=g=!1,b=1},point:function(y,x){var S=[y,x],O,D=o(y,x),U=r?D?0:c(y,x):D?c(y+(y<0?ei:-ei),x):0;if(!d&&(m=g=D)&&h.lineStart(),D!==g&&(O=l(d,S),(!O||Qa(d,O)||Qa(S,O))&&(S[0]+=vr,S[1]+=vr,D=o(S[0],S[1]))),D!==g)b=0,D?(h.lineStart(),O=l(S,d),h.point(O[0],O[1])):(O=l(d,S),h.point(O[0],O[1]),h.lineEnd()),d=O;else if(i&&d&&r^D){var z;!(U&p)&&(z=l(S,d,!0))&&(b=0,r?(h.lineStart(),h.point(z[0][0],z[0][1]),h.point(z[1][0],z[1][1]),h.lineEnd()):(h.point(z[1][0],z[1][1]),h.lineEnd(),h.lineStart(),h.point(z[0][0],z[0][1])))}D&&(!d||!Qa(d,S))&&h.point(S[0],S[1]),d=S,g=D,p=U},lineEnd:function(){g&&h.lineEnd(),d=null},clean:function(){return b|(m&&g)<<1}}}function l(h,d,p){var g=oo(h),m=oo(d),b=[1,0,0],y=pa(g,m),x=Hl(y,y),S=y[0],O=x-S*S;if(!O)return!p&&h;var D=e*x/O,U=-e*S/O,z=pa(b,y),q=Gl(b,D),G=Gl(y,U);hh(q,G);var tt=z,K=Hl(q,tt),B=Hl(tt,tt),N=K*K-B*(Hl(q,q)-1);if(!(N<0)){var Z=kn(N),w=Gl(tt,(-K-Z)/B);if(hh(w,q),w=Ka(w),!p)return w;var C=h[0],k=d[0],T=h[1],R=d[1],F;k<C&&(F=C,C=k,k=F);var H=k-C,rt=xi(H-ei)<vr,ot=rt||H<vr;if(!rt&&R<T&&(F=T,T=R,R=F),ot?rt?T+R>0^w[1]<(xi(w[0]-C)<vr?T:R):T<=w[1]&&w[1]<=R:H>ei^(C<=w[0]&&w[0]<=k)){var dt=Gl(tt,(-K+Z)/B);return hh(dt,q),[w,Ka(dt)]}}}function c(h,d){var p=r?n:ei-n,g=0;return h<-p?g|=1:h>p&&(g|=2),d<-p?g|=4:d>p&&(g|=8),g}return _h(o,a,s,r?[0,-n]:[-ei,n-ei])}function Xl(n){return function(t){var e=new Zf;for(var r in n)e[r]=n[r];return e.stream=t,e}}function Zf(){}Zf.prototype={constructor:Zf,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function $l(n,t,e){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],s=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),s!=null&&n.clipExtent(null),Qo(e,n.stream(bh));var o=bh.result(),a=Math.min(r/(o[1][0]-o[0][0]),i/(o[1][1]-o[0][1])),l=+t[0][0]+(r-a*(o[1][0]+o[0][0]))/2,c=+t[0][1]+(i-a*(o[1][1]+o[0][1]))/2;return s!=null&&n.clipExtent(s),n.scale(a*150).translate([l,c])}function wh(n,t,e){return $l(n,[[0,0],t],e)}var Vy=16,f2=pr(30*sn);function Kf(n,t){return+t?p2(n,t):d2(n)}function d2(n){return Xl({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function p2(n,t){function e(r,i,s,o,a,l,c,h,d,p,g,m,b,y){var x=c-r,S=h-i,O=x*x+S*S;if(O>4*t&&b--){var D=o+p,U=a+g,z=l+m,q=kn(D*D+U*U+z*z),G=Nn(z/=q),tt=xi(xi(z)-1)<vr||xi(s-d)<vr?(s+d)/2:Gn(U,D),K=n(tt,G),B=K[0],N=K[1],Z=B-r,w=N-i,C=S*Z-x*w;(C*C/O>t||xi((x*Z+S*w)/O-.5)>.3||o*p+a*g+l*m<f2)&&(e(r,i,s,o,a,l,B,N,tt,D/=q,U/=q,z,b,y),y.point(B,N),e(B,N,tt,D,U,z,c,h,d,p,g,m,b,y))}}return function(r){var i,s,o,a,l,c,h,d,p,g,m,b,y={point:x,lineStart:S,lineEnd:D,polygonStart:function(){r.polygonStart(),y.lineStart=U},polygonEnd:function(){r.polygonEnd(),y.lineStart=S}};function x(G,tt){G=n(G,tt),r.point(G[0],G[1])}function S(){d=NaN,y.point=O,r.lineStart()}function O(G,tt){var K=oo([G,tt]),B=n(G,tt);e(d,p,h,g,m,b,d=B[0],p=B[1],h=G,g=K[0],m=K[1],b=K[2],Vy,r),r.point(d,p)}function D(){y.point=x,r.lineEnd()}function U(){S(),y.point=z,y.lineEnd=q}function z(G,tt){O(i=G,tt),s=d,o=p,a=g,l=m,c=b,y.point=O}function q(){e(d,p,h,g,m,b,s,o,i,a,l,c,Vy,r),y.lineEnd=D,D()}return y}}var m2=Xl({point:function(n,t){this.stream.point(n*sn,t*sn)}});function ao(n){return Jf(function(){return n})()}function Jf(n){var t,e=150,r=480,i=250,s,o,a=0,l=0,c=0,h=0,d=0,p,g,m=null,b=Yf,y=null,x,S,O,D=ql,U=.5,z=Kf(B,U),q,G;function tt(w){return w=g(w[0]*sn,w[1]*sn),[w[0]*e+s,o-w[1]*e]}function K(w){return w=g.invert((w[0]-s)/e,(o-w[1])/e),w&&[w[0]*ps,w[1]*ps]}function B(w,C){return w=t(w,C),[w[0]*e+s,o-w[1]*e]}tt.stream=function(w){return q&&G===w?q:q=m2(b(p,z(D(G=w))))},tt.clipAngle=function(w){return arguments.length?(b=+w?Uy(m=w*sn,6*sn):(m=null,Yf),Z()):m*ps},tt.clipExtent=function(w){return arguments.length?(D=w==null?(y=x=S=O=null,ql):Vf(y=+w[0][0],x=+w[0][1],S=+w[1][0],O=+w[1][1]),Z()):y==null?null:[[y,x],[S,O]]},tt.scale=function(w){return arguments.length?(e=+w,N()):e},tt.translate=function(w){return arguments.length?(r=+w[0],i=+w[1],N()):[r,i]},tt.center=function(w){return arguments.length?(a=w[0]%360*sn,l=w[1]%360*sn,N()):[a*ps,l*ps]},tt.rotate=function(w){return arguments.length?(c=w[0]%360*sn,h=w[1]%360*sn,d=w.length>2?w[2]%360*sn:0,N()):[c*ps,h*ps,d*ps]},tt.precision=function(w){return arguments.length?(z=Kf(B,U=w*w),Z()):kn(U)},tt.fitExtent=function(w,C){return $l(tt,w,C)},tt.fitSize=function(w,C){return wh(tt,w,C)};function N(){g=ch(p=Gf(c,h,d),t);var w=t(a,l);return s=r-w[0]*e,o=i+w[1]*e,Z()}function Z(){return q=G=null,tt}return function(){return t=n.apply(this,arguments),tt.invert=t.invert&&K,N()}}function xh(n){return function(t,e){var r=pr(t),i=pr(e),s=n(r*i);return[s*i*mr(t),s*mr(e)]}}function Co(n){return function(t,e){var r=kn(t*t+e*e),i=n(r),s=mr(i),o=pr(i);return[Gn(t*s,r*o),Nn(r&&e*s/r)]}}var $y=xh(function(n){return kn(2/(1+n))});$y.invert=Co(function(n){return 2*Nn(n/2)});var Qf=xh(function(n){return(n=lh(n))&&n/mr(n)});Qf.invert=Co(function(n){return n});function td(){return ao(Qf).scale(79.4188).clipAngle(180-.001)}function ed(n,t){return[n,zl(jl((In+t)/2))]}ed.invert=function(n,t){return[n,2*so(ah(t))-In]};function Eh(n,t){return[n,t]}Eh.invert=Eh;function Yy(n,t){var e=pr(t),r=pr(n)*e;return[e*mr(n)/r,mr(t)/r]}Yy.invert=Co(so);function Zy(n,t){var e=t*t,r=e*e;return[n*(.8707-.131979*e+r*(-.013791+r*(.003971*e-.001529*r))),t*(1.007226+e*(.015085+r*(-.044475+.028874*e-.005916*r)))]}Zy.invert=function(n,t){var e=t,r=25,i;do{var s=e*e,o=s*s;e-=i=(e*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(xi(i)>vr&&--r>0);return[n/(.8707+(s=e*e)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),e]};function Ky(n,t){return[pr(t)*mr(n),mr(t)]}Ky.invert=Co(Nn);function Jy(n,t){var e=pr(t),r=1+pr(n)*e;return[e*mr(n)/r,mr(t)/r]}Jy.invert=Co(function(n){return 2*so(n)});function Qy(n,t){return[zl(jl((In+t)/2)),-n]}Qy.invert=function(n,t){return[-t,2*so(ah(n))-In]};function v2(n,t,e){e=e||{};var r=e.units||"kilometers",i=e.steps||8;if(!n)throw new Error("geojson is required");if(typeof e!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var s=[];switch(n.type){case"GeometryCollection":return ro(n,function(o){var a=Ch(o,t,r,i);a&&s.push(a)}),Sr(s);case"FeatureCollection":return Li(n,function(o){var a=Ch(o,t,r,i);a&&Li(a,function(l){l&&s.push(l)})}),Sr(s)}return Ch(n,t,r,i)}function Ch(n,t,e,r){var i=n.properties||{},s=n.type==="Feature"?n.geometry:n;if(s.type==="GeometryCollection"){var o=[];return ro(n,function(b){var y=Ch(b,t,e,r);y&&o.push(y)}),Sr(o)}var a=b2(s),l={type:s.type,coordinates:ev(s.coordinates,a)},c=new el.GeoJSONReader,h=c.read(l),d=ml(gl(t,e),"meters"),p=el.BufferOp.bufferOp(h,d,r),g=new el.GeoJSONWriter;if(p=g.write(p),!tv(p.coordinates)){var m={type:p.type,coordinates:rv(p.coordinates,a)};return zn(m,i)}}function tv(n){return Array.isArray(n[0])?tv(n[0]):isNaN(n[0])}function ev(n,t){return typeof n[0]!="object"?t(n):n.map(function(e){return ev(e,t)})}function rv(n,t){return typeof n[0]!="object"?t.invert(n):n.map(function(e){return rv(e,t)})}function b2(n){var t=wl(n).geometry.coordinates,e=[-t[0],-t[1]];return td().rotate(e).scale(On)}var Yl=v2;var _2=Mr(Za(),1);var w2=Mr(Za(),1);var E2=Mr(Za(),1);var C2=Mr(Za(),1);var ma=Mr(Mh());var nd="#7AE9FF",sd={color:nd,fillColor:nd,fillOpacity:.3,weight:1},A2={color:"#FFBB00",fillColor:"#FFBB00",fillOpacity:.75,weight:3},I2={color:"#FF0000",fillColor:"#FF0000",fillOpacity:.95,weight:5},zo=class{constructor(t,e){this._bufferWidth=5;this._sqmPerPerson=10;this._sqmPerVehicle=70;this.supressWarnings=!1;this.id=t.id,this._rules=e,this.revision=t.revision,this.timeStamp=t.timeStamp,this.isDeleted=t.isDeleted,this.deleteReason=t.deleteReason,this._originalGeoJson=t.geoJson;let r=JSON.parse(t.geoJson);this.layer=new Sh.GeoJSON(r,{pmIgnore:!1,interactive:!0,bubblingMouseEvents:!1,snapIgnore:!0,style:()=>this.GetDefaultLayerStyle()}),this.revisions={},this.name=ma.default.sanitize(r.properties.name),this.contactInfo=ma.default.sanitize(r.properties.contactInfo)??"",this.description=ma.default.sanitize(r.properties.description)??"",this.nrOfPeople=r.properties.nrOfPeople??0,this.nrOfVehicles=r.properties.nrOfVechiles??0,this.additionalSqm=r.properties.additionalSqm??0,Number.isNaN(Number(r.properties.powerNeed))?this.powerNeed=-1:this.powerNeed=Number(r.properties.powerNeed),Number.isNaN(Number(r.properties.amplifiedSound))?this.amplifiedSound=-1:this.amplifiedSound=Number(r.properties.amplifiedSound),this.color=r.properties.color??nd,this.supressWarnings=r.properties.supressWarnings??!1,this.updateBufferedLayer()}get calculatedAreaNeeded(){try{let t=0;return this.nrOfPeople&&(t+=this.nrOfPeople*this._sqmPerPerson),this.nrOfVehicles&&(t+=this.nrOfVehicles*this._sqmPerVehicle),this.additionalSqm&&(t+=this.additionalSqm),t}catch{return NaN}}get calculatedFireExtinguisherNeeded(){try{return 1}catch{return NaN}}get severityOfRulesBroken(){return this._rules.reduce((t,e)=>Math.max(t,e.severity),0)}get area(){return Math.round(_o(this.calculateGeoJson()))}get geoJson(){return JSON.stringify(this.toGeoJSON())}calculateGeoJson(){let t=this.layer.toGeoJSON();return t.features&&t.features[0]&&(t=t.features[0]),t}GetDefaultLayerStyle(t=!1){let e=this.color;return t&&(e="#00FF40"),{color:e,fillColor:e,fillOpacity:.3,weight:1}}checkAllRules(){for(let t of this._rules)t.checkRule(this)}setLayerStyle(t="severity"){if(t=="severity"||t=="cleancolors")this.severityOfRulesBroken>=3?this.layer.setStyle(I2):this.severityOfRulesBroken==2&&!this.supressWarnings?this.layer.setStyle(A2):this.layer.setStyle(this.GetDefaultLayerStyle(t=="cleancolors"));else if(t=="power"){let e="#00FF40";this.powerNeed?this.powerNeed>9e3?e="#FF0000":this.powerNeed>1e3&&(e="#FFA200"):e="#D1D1D1",this.layer.setStyle({color:e,fillColor:e,fillOpacity:.3,weight:1})}else if(t=="sound"){let e="#00FF40";this.amplifiedSound?this.amplifiedSound>2e3?e="#FF0000":this.amplifiedSound>120&&(e="#FFA200"):e="#D1D1D1",this.layer.setStyle({color:e,fillColor:e,fillOpacity:.3,weight:1})}}getAllTriggeredRules(){return this._rules.filter(t=>t.triggered)}updateBufferedLayer(){let t=this.layer.toGeoJSON(),e=Yl(t,this._bufferWidth,{units:"meters"}),r=0;this.bufferLayer?(this.bufferLayer.clearLayers(),this.bufferLayer.addData(e)):this.bufferLayer=Sh.geoJSON(e,{style:{color:"red",fillOpacity:0,weight:r,dashArray:"5, 5"},interactive:!1})}toGeoJSON(){let t=this.calculateGeoJson();return t.properties=t.properties||{},t.properties.name=ma.default.sanitize(this.name).substring(0,100),t.properties.description=ma.default.sanitize(this.description).substring(0,1e3),t.properties.contactInfo=ma.default.sanitize(this.contactInfo),t.properties.nrOfPeople=this.nrOfPeople,t.properties.nrOfVechiles=this.nrOfVehicles,t.properties.additionalSqm=this.additionalSqm,t.properties.powerNeed=this.powerNeed,t.properties.amplifiedSound=this.amplifiedSound,t.properties.color=this.color,t.properties.supressWarnings=this.supressWarnings,t}hasChanges(){return this._originalGeoJson!=this.geoJson}};var nv=Mr(Mh());var kh="https://placement.freaks.se";var rl=kh+"/api/v1/mapentities",Zl=class{constructor(t){this._latestRevisions={};this._entityConstraints=null;this._rulesGenerator=t,this.loaded=new Promise(e=>this._update().then(()=>e(!0)))}async _update(){let t=await fetch(rl),e=t.ok?await t.json():[];this._latestRevisions={};for(let r of e){if(this._entityConstraints){let{earliest:i,latest:s}=this._entityConstraints;if(r.timeStamp>s||r.timeStamp<i)continue}this._latestRevisions[r.id]=new zo(r,this._rulesGenerator())}}async reload(){let t=await fetch(rl),e=t.ok?await t.json():[],r=new Array,i={refreshedDeleted:new Array,refreshedAdded:new Array,refreshedUpdated:new Array};for(let s of e){if(this._entityConstraints){let{earliest:o,latest:a}=this._entityConstraints;if(s.timeStamp>a||s.timeStamp<o)continue}r[s.id]=new zo(s,this._rulesGenerator())}for(let s in this._latestRevisions){let o=parseInt(s);r[o]||i.refreshedDeleted.push(o)}for(let s in r){let o=parseInt(s),a=r[o];this._latestRevisions[o]?this._latestRevisions[o].revision<a.revision&&(this._latestRevisions[o]=a,i.refreshedUpdated.push(o)):(this._latestRevisions[o]=a,i.refreshedAdded.push(o))}return i}async constrain(t){this._entityConstraints=t,await this._update()}async entities(){return await this.loaded,Object.values(this._latestRevisions)}getEntityById(t){return this._latestRevisions[t]}getAllEntities(){return Object.values(this._latestRevisions)}isLatest(t){return t.revision==this._latestRevisions[t.id].revision}async createEntity(t){console.log("createEntity",t);let e=await fetch(rl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:JSON.stringify(t)})});if(e.ok){let r=await e.json();console.log("[API]","Saved initial entity",r);let i=new zo(r,this._rulesGenerator());return this._latestRevisions[i.id]=i,i}else{let r=await e.json();return console.warn("[API]","Failed to save entity",r),null}}async updateEntity(t){let e=await fetch(`${rl}/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:t.geoJson,id:t.id})});if(e.ok){let r=await e.json();console.log("[API]","Updated existing entity",r);let i=new zo(r,this._rulesGenerator());return this._latestRevisions[t.id]=i,i}else{let r=await e.json();return console.warn("[API]","Failed to update entity with id:",t.id,r),null}}async deleteEntity(t,e="No reason given"){let r=await fetch(`${rl}/${t.id}?reason=${nv.default.sanitize(e)}`,{method:"DELETE"});if(r.ok)console.log("[API]","Deleted entity with id:",t.id),delete this._latestRevisions[t.id];else{let i=await r.json();console.warn("[API]","Failed to delete entity with id:",t.id,i)}}async remove(t){delete this._latestRevisions[t.id]}async getRevisionsForEntity(t){let e=await fetch(`${rl}/${t.id}`),r=e.ok?await e.json():[];for(let i of r)t.revisions[i.revision]=new zo(i,this._rulesGenerator())}};var Lh={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},N2=6378.137,sv=1/298.257223563,ov=sv*(2-sv),Kl=Math.PI/180,Jl=class n{static fromTile(t,e,r){let i=Math.PI*(1-2*(t+.5)/Math.pow(2,e)),s=Math.atan(.5*(Math.exp(i)-Math.exp(-i)))/Kl;return new n(s,r)}static get units(){return Lh}constructor(t,e){if(t===void 0)throw new Error("No latitude given.");if(e&&!Lh[e])throw new Error(`Unknown unit ${e}. Use one of: ${Object.keys(Lh).join(", ")}`);let r=Kl*N2*(e?Lh[e]:1),i=Math.cos(t*Kl),s=1/(1-ov*(1-i*i)),o=Math.sqrt(s);this.kx=r*o*i,this.ky=r*o*s*(1-ov)}distance(t,e){let r=Us(t[0]-e[0])*this.kx,i=(t[1]-e[1])*this.ky;return Math.sqrt(r*r+i*i)}bearing(t,e){let r=Us(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.atan2(r,i)/Kl}destination(t,e,r){let i=r*Kl;return this.offset(t,Math.sin(i)*e,Math.cos(i)*e)}offset(t,e,r){return[t[0]+e/this.kx,t[1]+r/this.ky]}lineDistance(t){let e=0;for(let r=0;r<t.length-1;r++)e+=this.distance(t[r],t[r+1]);return e}area(t){let e=0;for(let r=0;r<t.length;r++){let i=t[r];for(let s=0,o=i.length,a=o-1;s<o;a=s++)e+=Us(i[s][0]-i[a][0])*(i[s][1]+i[a][1])*(r?-1:1)}return Math.abs(e)/2*this.kx*this.ky}along(t,e){let r=0;if(e<=0)return t[0];for(let i=0;i<t.length-1;i++){let s=t[i],o=t[i+1],a=this.distance(s,o);if(r+=a,r>e)return od(s,o,(e-(r-a))/a)}return t[t.length-1]}pointToSegmentDistance(t,e,r){let[i,s]=e,o=Us(r[0]-i)*this.kx,a=(r[1]-s)*this.ky,l=0;return(o!==0||a!==0)&&(l=(Us(t[0]-i)*this.kx*o+(t[1]-s)*this.ky*a)/(o*o+a*a),l>1?(i=r[0],s=r[1]):l>0&&(i+=o/this.kx*l,s+=a/this.ky*l)),o=Us(t[0]-i)*this.kx,a=(t[1]-s)*this.ky,Math.sqrt(o*o+a*a)}pointOnLine(t,e){let r=1/0,i,s,o,a;for(let l=0;l<t.length-1;l++){let c=t[l][0],h=t[l][1],d=Us(t[l+1][0]-c)*this.kx,p=(t[l+1][1]-h)*this.ky,g=0;(d!==0||p!==0)&&(g=(Us(e[0]-c)*this.kx*d+(e[1]-h)*this.ky*p)/(d*d+p*p),g>1?(c=t[l+1][0],h=t[l+1][1]):g>0&&(c+=d/this.kx*g,h+=p/this.ky*g)),d=Us(e[0]-c)*this.kx,p=(e[1]-h)*this.ky;let m=d*d+p*p;m<r&&(r=m,i=c,s=h,o=l,a=g)}return{point:[i,s],index:o,t:Math.max(0,Math.min(1,a))}}lineSlice(t,e,r){let i=this.pointOnLine(r,t),s=this.pointOnLine(r,e);if(i.index>s.index||i.index===s.index&&i.t>s.t){let c=i;i=s,s=c}let o=[i.point],a=i.index+1,l=s.index;!av(r[a],o[0])&&a<=l&&o.push(r[a]);for(let c=a+1;c<=l;c++)o.push(r[c]);return av(r[l],s.point)||o.push(s.point),o}lineSliceAlong(t,e,r){let i=0,s=[];for(let o=0;o<r.length-1;o++){let a=r[o],l=r[o+1],c=this.distance(a,l);if(i+=c,i>t&&s.length===0&&s.push(od(a,l,(t-(i-c))/c)),i>=e)return s.push(od(a,l,(e-(i-c))/c)),s;i>t&&s.push(l)}return s}bufferPoint(t,e){let r=e/this.ky,i=e/this.kx;return[t[0]-i,t[1]-r,t[0]+i,t[1]+r]}bufferBBox(t,e){let r=e/this.ky,i=e/this.kx;return[t[0]-i,t[1]-r,t[2]+i,t[3]+r]}insideBBox(t,e){return Us(t[0]-e[0])>=0&&Us(t[0]-e[2])<=0&&t[1]>=e[1]&&t[1]<=e[3]}};function av(n,t){return n[0]===t[0]&&n[1]===t[1]}function od(n,t,e){let r=Us(t[0]-n[0]),i=t[1]-n[1];return[n[0]+r*e,n[1]+i*e]}function Us(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}var Th=class{constructor(){this.areaCache={};this.overlapCache={};this.coordsCache={}}coordsHaveChanged(t,e){let r=!1;if(!(t in this.coordsCache)||this.coordsCache[t].length==0||this.coordsCache[t].length!=e.length)r=!0;else for(let i=0;i<this.coordsCache[t].length;i++)if(!(this.coordsCache[t][i].lat==e[i].lat&&this.coordsCache[t][i].lng==e[i].lng)){r=!0;break}if(r){let i=[];for(let s=0;s<e.length;s++)i.push({lat:e[s].lat,lng:e[s].lng});return this.coordsCache[t]=i,!0}else return!1}areaIsCached(t){return t in this.areaCache}getAreaCache(t){return this.areaCache[t]}setAreaCache(t,e){this.areaCache[t]=e}overlapIsCached(t,e){return t in this.overlapCache&&e in this.overlapCache[t]}getOverlapCache(t,e){return this.overlapCache[t][e]}setOverlapCache(t,e,r){for(let i of[[t,e],[e,t]])i[0]in this.overlapCache||(this.overlapCache[i[0]]={}),this.overlapCache[i[0]][i[1]]=r}invalidateCache(t){if(t in this.overlapCache)for(let e in this.overlapCache[t])this.overlapCache[e]&&t in this.overlapCache[e]&&delete this.overlapCache[e][t];delete this.overlapCache[t],t in this.areaCache&&delete this.areaCache[t]}};var ad=()=>new vn(1,"Powerful.","You need a lot of power, make sure its not a typo.",n=>({triggered:n.powerNeed>8e3}));var ld=()=>new vn(2,"Missing info","Fill in name, description, contact info, power need and sound amplification please.",n=>({triggered:!n.name||!n.description||!n.contactInfo||n.powerNeed===-1||n.amplifiedSound===-1}));var ud=()=>new vn(2,"Bigger than needed?","Your area is quite big for the amount of people/vehicles and extras you have typed in.",n=>({triggered:n.area>B2(n.calculatedAreaNeeded),message:`Your area is <b>${n.area-n.calculatedAreaNeeded}m\xB2 bigger</b> than the suggested area size. Consider making it smaller.`}));function B2(n){let r=.5*Math.pow(n,-.2),i=Math.max(0,Math.min(r,.5));return Math.min(n*(1+i),1250)}var hd=()=>new vn(3,"Too many ppl/vehicles!","Calculated area need is bigger than the maximum allowed area size! Make another area to fix this.",n=>({triggered:n.calculatedAreaNeeded>1250}));var Ph=(n,t,e,r)=>F2(n,t,e,r,!1),F2=(n,t,e,r,i)=>new vn(t,e,r,s=>{let o=n.getLayers();for(let a of o){let l=a.toGeoJSON();if(l.features){for(let c=0;c<l.features.length;c++)if(As(l.features[c],s.toGeoJSON()))return{triggered:i}}else if(As(l,s.toGeoJSON()))return{triggered:i}}return{triggered:!i}});function Rh(n,t){return n._leaflet_id===t._leaflet_id}function tu(n){let t=[null,null,null,null],e=!0;for(let r of n)e?(t[0]=r[0],t[2]=r[0],t[1]=r[1],t[3]=r[1],e=!1):(r[0]<t[0]&&(t[0]=r[0]),r[0]>t[2]&&(t[2]=r[0]),r[1]<t[1]&&(t[1]=r[1]),r[1]>t[3]&&(t[3]=r[1]));return t}function Oh(n,t){return!(t[0]>n[2]||t[2]<n[0]||t[3]<n[1]||t[1]>n[3])}var cd=(n,t,e,r)=>new vn(t,e,r,i=>({triggered:z2(i.layer,n)}));function z2(n,t){let e=n.toGeoJSON(),r=tu(e.features[0].geometry.coordinates[0]),i=!1,s=0;return t.eachLayer(o=>{if(i||Rh(n,o))return;let a=o.toGeoJSON(),l=tu(a.features[0].geometry.coordinates[0]);Oh(r,l)&&(no(e.features[0],a.features[0])||As(e.features[0],a.features[0]))&&(i=!0)}),i}var jo=(n,t,e,r)=>new vn(t,e,r,i=>{let s=i.toGeoJSON(),o=!1;return n.eachLayer(a=>{let l=a.toGeoJSON();if(l.features){for(let c=0;c<l.features.length;c++)if(no(s,l.features[c])||As(l.features[c],s)){o=!0;return}}else(no(s,l)||As(l,s))&&(o=!0)}),{triggered:o}});var j2=6,fd=(n,t,e,r)=>new vn(t,e,r,i=>{let s=i.layer._layers[Object.keys(i.layer._layers)[0]];Mo.coordsHaveChanged(s._leaflet_id,s._latlngs[0])&&Mo.invalidateCache(i.layer._leaflet_id);let o=new Set;return uv(i.layer,n,o)>1250?{triggered:!0,severity:3,shortMessage:"We need some space between these camps"}:{triggered:!1}});function uv(n,t,e){if(e.has(n._leaflet_id))return 0;e.add(n._leaflet_id);let r;Mo.areaIsCached(n._leaflet_id)?r=Mo.getAreaCache(n._leaflet_id):(r=_o(n.toGeoJSON()),Mo.setAreaCache(n._leaflet_id,r));let i=tu(n.toGeoJSON().features[0].geometry.coordinates[0]),s=hv.bufferBBox(i,j2);return t.eachLayer(o=>{if(!Rh(n,o)){let a;if(Mo.overlapIsCached(n._leaflet_id,o._leaflet_id))a=Mo.getOverlapCache(n._leaflet_id,o._leaflet_id);else{let l=o.getBounds(),h=[l._southWest.lng,l._southWest.lat,l._northEast.lng,l._northEast.lat];if(!Oh(s,h))a=!1,Mo.setOverlapCache(n._leaflet_id,o._leaflet_id,a);else{let d=o.toGeoJSON(),p;if(d.type==="Feature")p=d.geometry;else if(d.type==="FeatureCollection")p=d.features[0];else throw new Error("unsupported geometry");let g=Yl(n.toGeoJSON(),5,{units:"meters"});no(g.features[0],p)||As(g.features[0],p)?a=!0:a=!1,Mo.setOverlapCache(n._leaflet_id,o._leaflet_id,a)}}a&&(r+=uv(o,t,e))}}),r}var Mo=new Th,hv=new Jl(57.5,"meters");var vn=class{get severity(){return this._triggered?this._severity:0}get triggered(){return this._triggered}checkRule(t){let e=this._callback(t);this._triggered=e.triggered,e.shortMessage&&(this.shortMessage=e.shortMessage),e.message&&(this.message=e.message)}constructor(t,e,r,i){this._severity=t,this._triggered=!1,this._callback=i,this.shortMessage=e,this.message=r}};function cv(n,t){return()=>[ud(),hd(),ad(),ld(),cd(t,2,"Overlapping other area!","Your area is overlapping someone elses, plz fix <3"),jo(n.slope,1,"Slope warning!","Your area is in slopey or uneven terrain, make sure to check the slope map layer to make sure that you know what you are doing :)"),jo(n.fireroad,3,"Touching fireroad!","Plz move this area away from the fire road!"),Ph(n.propertyborder,3,"Outside border!","You have placed yourself outside our land, please fix that <3"),jo(n.hiddenforbidden,3,"Inside forbidden zone!","You are inside a zone that can not be used this year."),fd(t,3,"Too large/close to others!","For fire safety, we need to add a bit of open space (5m2) between these camps (or if not next to any camps, this camp simply to big)"),Ph(n.area,2,"Outside placement areas.","You are outside the main placement area (yellow border). Make sure you know what you are doing."),jo(n.publicplease,1,"Close to fire road","You are adjucant to a fire road, please use this space for public offerings and not just for sleeping"),jo(n.minorroad,2,"Blocking a path","You are possibly blocking a path for walking around (the black dotted lines). Keep it clean if possible or plan accordingly!"),jo(n.closetosanctuary,1,"Close to the  sanctuary","This area is in the viscinity of the sanctuary, please be mindful of what energy your camp is releasing and how it may effect the santuarcy"),jo(n.redsoundzone,1,"In the western meadow","You're in the western meadow, please be extra careful of keeping the land in good condition and do not put your overnight camp here unless necessary, public dreams are prefered")]}var il=Mr(Jn());function fv(n,t){let e=il.Control.extend({options:{position:"bottomleft"},onAdd:()=>{let r=il.DomUtil.create("button","btn btn-gradient1 button-shake-animate");r.title="Edit",r.textContent="Edit",il.DomEvent.disableClickPropagation(r);let i=n;return r.onclick=()=>{t(),i=!i,r.textContent=i?"Done":"Edit",r.title=i?"Done":"Edit"},r}});return new e}function So(n,t){let e=document.createElement("button");return e.innerHTML=n,e.onclick=t,e}L.PathDraggable=L.Draggable.extend({initialize:function(n){this._path=n,this._canvas=n._map.getRenderer(n)instanceof L.Canvas;var t=this._canvas?this._path._map.getRenderer(this._path)._container:this._path._path;L.Draggable.prototype.initialize.call(this,t,t,!0)},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("drag",n)},_onDown:function(n){var t=n.touches?n.touches[0]:n;this._startPoint=new L.Point(t.clientX,t.clientY),!(this._canvas&&!this._path._containsPoint(this._path._map.mouseEventToLayerPoint(t)))&&L.Draggable.prototype._onDown.call(this,n)}});L.Handler.PathDrag=L.Handler.extend({initialize:function(n){this._path=n},getEvents:function(){return{dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd}},addHooks:function(){this._draggable||(this._draggable=new L.PathDraggable(this._path)),this._draggable.on(this.getEvents(),this).enable(),L.DomUtil.addClass(this._draggable._element,"leaflet-path-draggable")},removeHooks:function(){this._draggable.off(this.getEvents(),this).disable(),L.DomUtil.removeClass(this._draggable._element,"leaflet-path-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._startPoint=this._draggable._startPoint,this._path.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(n){var t=this._path,e=n.originalEvent.touches&&n.originalEvent.touches.length===1?n.originalEvent.touches[0]:n.originalEvent,r=L.point(e.clientX,e.clientY),i=t._map.layerPointToLatLng(r);this._offset=r.subtract(this._startPoint),this._startPoint=r,this._path.eachLatLng(this.updateLatLng,this),t.redraw(),n.latlng=i,n.offset=this._offset,t.fire("drag",n),n.latlng=this._path.getCenter?this._path.getCenter():this._path.getLatLng(),t.fire("move",n)},_onDragEnd:function(n){this._path._bounds&&this.resetBounds(),this._path.fire("moveend").fire("dragend",n)},latLngToLayerPoint:function(n){var t=this._path._map.project(L.latLng(n));return t._subtract(this._path._map.getPixelOrigin())},updateLatLng:function(n){var t=this.latLngToLayerPoint(n);t._add(this._offset);var e=this._path._map.layerPointToLatLng(t);n.lat=e.lat,n.lng=e.lng},resetBounds:function(){this._path._bounds=new L.LatLngBounds,this._path.eachLatLng(function(n){this._bounds.extend(n)})}});L.Path.include({eachLatLng:function(n,t){t=t||this;var e=function(r){for(var i=0;i<r.length;i++)L.Util.isArray(r[i])?e(r[i]):n.call(t,r[i])};e(this.getLatLngs?this.getLatLngs():[this.getLatLng()])}});L.Path.addInitHook(function(){this.dragging=new L.Handler.PathDrag(this),this.options.draggable&&this.once("add",function(){this.dragging.enable()})});var SH=Mr(pv());var Ah=Mr(Mh());var pd=Mr(Jn());var Ih=class{_formatDate(t,e="short",r="short"){return new Date(Date.parse(t)).toLocaleString("sv",{dateStyle:e,timeStyle:r})}CreateInfoPopup(t,e,r){let i=document.createElement("div"),s=t.nrOfPeople===1?" person,":" people,",o=t.nrOfVehicles===1?"> vehicle,":" vehicles,",a=t.name?t.name:"No name yet",l=t.description?t.description:"No description yet, please add one!",c=t.contactInfo?t.contactInfo:"Please add contact info! Without it, your area might be removed.",h=t.powerNeed!=-1?`${t.powerNeed} Watts`:"Please state your power need! Set to 0 if you will not use electricity.",d=t.amplifiedSound!=-1?`${t.amplifiedSound} Watts`:"Please set sound amplification! Set to 0 if you wont have speakers.",p=Ah.default.sanitize(l),g=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,m=p.replace(g,'<a href="$1" target="_blank">$1</a>');i.innerHTML=`<h2 style="margin-bottom: 0">${Ah.default.sanitize(a)}</h2>
                                    <p class="scrollable">${m}</p>
                                    <p style="font-size:14px; margin-top:0px !important; margin-bottom:0px !important">
                                    <b>Contact:</b> ${Ah.default.sanitize(c)}   
                                    </br>
                                    <b style="text-align:right;">Power:</b> ${h}
                                    </br>
                                    <b style="text-align:right;">Sound:</b> ${d}
                                    </p> 
                                    <div style="font-size: 14px; color:#5c5c5c; margin-bottom: 10px !important">
                                        <b>${t.area}</b> m\xB2 - 
                                        ${t.nrOfPeople>0?"<b>"+t.nrOfPeople+"</b>"+s:""} 
                                        ${t.nrOfVehicles>0?"<b>"+t.nrOfVehicles+"</b>"+o:""} 
                                        ${t.additionalSqm>0?"<b>"+t.additionalSqm+"</b> m\xB2 other":""}
                                    </div>
                                    `;let b=t.getAllTriggeredRules().sort((y,x)=>x.severity-y.severity);if(b.length>0){t.supressWarnings||(i.innerHTML+=`<p style="margin-bottom: 0px !important"><b>${b.length}</b> issues found:</p> `);let y=document.createElement("div");y.style.maxHeight="200px",y.style.overflowY="auto",y.style.marginBottom="10px",i.appendChild(y);for(let x of b)x.severity>=3?y.innerHTML+=`<p class="error">${" "+x.message}</p>`:t.supressWarnings||(x.severity>=2?y.innerHTML+=`<p class="warning">${" "+x.message}</p>`:y.innerHTML+=`<p class="info">${" "+x.message}</p>`)}if(e){let y=So("Edit shape",O=>{O.stopPropagation(),O.preventDefault(),r("editing-shape",t)});i.appendChild(y);let x=So("Move",O=>{O.stopPropagation(),O.preventDefault(),r("moving-shape",t)});i.appendChild(x);let S=So("Edit info",O=>{O.stopPropagation(),O.preventDefault(),r("editing-info",t)});i.appendChild(S)}return i}CreateEditPopup(t,e,r,i,s,o){let a=(D,U=null)=>{s(D),o(D);let z=document.getElementById("areaInfo");z||(z=U),z.innerHTML="With this amount of people, vehicles and extra m\xB2 such as art, kitchen tents and structures, a suggested camp size is <b>"+D?.calculatedAreaNeeded+"m\xB2</b>. Currently the area is <b>"+D?.area+"m\xB2.</b>"},l=document.createElement("div");l.innerHTML="",l.appendChild(document.createElement("label")).innerHTML="Name of camp/dream";let c=document.createElement("input");c.type="text",c.value=t.name,c.maxLength=100,c.placeholder="Enter camp name here..",c.oninput=()=>{t.name=c.value,s(t)},l.appendChild(c),l.appendChild(document.createElement("br")),l.appendChild(document.createElement("label")).innerHTML="Description";let h=document.createElement("textarea");h.value=t.description,h.maxLength=300,h.placeholder="Describe your camp/dream here as much as you want. Remember that this information is public. 300 characters max.",h.style.height="100px",h.oninput=()=>{t.description=h.value,s(t),o(t)},l.appendChild(h),l.appendChild(document.createElement("label")).innerHTML="Contact info";let d=document.createElement("input");d.type="text",d.value=t.contactInfo,d.placeholder="Email, phone, discord name etc",d.oninput=()=>{t.contactInfo=d.value,s(t),o(t)},l.appendChild(d),l.appendChild(document.createElement("br")),l.appendChild(document.createElement("b")).innerHTML="People";let p=document.createElement("input");p.title="10m\xB2 per person",p.style.width="3em",p.style.marginBottom="7px",p.style.marginLeft="5px",p.type="number",p.value=String(t.nrOfPeople),p.min="0",p.oninput=()=>{t.nrOfPeople=Number(p.value),a(t)},l.appendChild(p);let g=document.createElement("span");g.innerHTML=" x 10m\xB2",g.style.fontSize="12px",g.style.marginRight="25px",l.appendChild(g),l.appendChild(document.createElement("b")).innerHTML=" Vehicles ";let m=document.createElement("input");m.title="70m\xB2 per vehicle",m.style.width="3em",m.style.marginLeft="5px",m.type="number",m.value=String(t.nrOfVehicles),m.min="0",m.oninput=()=>{t.nrOfVehicles=Number(m.value),a(t)},l.appendChild(m);let b=document.createElement("span");b.innerHTML=" x 70m\xB2",b.style.fontSize="12px",l.appendChild(b),l.appendChild(document.createElement("br")),l.appendChild(document.createElement("b")).innerHTML="Other stuff in m\xB2";let y=document.createElement("input");y.title="Area needed for kitchen, storage, workshop tents etc.",y.style.width="6.2em",y.style.marginLeft="116px",y.type="number",y.value=String(t.additionalSqm),y.min="0",y.oninput=()=>{t.additionalSqm=Number(y.value),a(t)},l.appendChild(y);let x=l.appendChild(document.createElement("div"));x.id="areaInfo",x.style.marginTop="10px",x.style.marginBottom="5px",x.style.fontSize="12px",a(t,x),l.appendChild(document.createElement("b")).innerHTML="Power need (Watts) ";let S=document.createElement("input");S.title=`A water boiler is about 2000W, a fridge is about 100W,
a laptop is about 50W, a phone charger is about 10W.`,S.style.width="5em",S.style.marginTop="7px",S.style.marginBottom="7px",S.style.marginLeft="110px",S.type="number",S.value=String(t.powerNeed),S.placeholder="?",S.min="0",S.oninput=()=>{t.powerNeed=S.value,s(t),o(t)},l.appendChild(S),l.appendChild(document.createElement("br")),l.appendChild(document.createElement("b")).innerHTML="Sound amplification (Watts) ";let O=document.createElement("input");if(O.style.width="5em",O.title=`If over 100W then you are considered a sound camp.
Please get in contact with the sound lead.`,O.style.marginBottom="7px",O.style.marginLeft="58px",O.type="number",O.value=String(t.amplifiedSound),O.min="0",O.placeholder="?",O.oninput=()=>{t.amplifiedSound=O.value,s(t),o(t)},l.appendChild(O),l.appendChild(document.createElement("p")),e){let D=So("Ok!",async z=>{z.stopPropagation(),z.preventDefault(),r("blur")});D.style.width="200px",l.appendChild(D);let U=So("More...",z=>{z.stopPropagation(),z.preventDefault(),i("more",t)});U.style.marginRight="0",l.appendChild(U)}return l.onkeydown=D=>{"key"in D&&D.key==="Enter"&&"ctrlKey"in D&&D.ctrlKey==!0&&r("blur")},l}CreateMoreInfoPopup(t,e,r,i,s){let o=document.createElement("div");o.innerHTML="",o.appendChild(document.createElement("h2")).innerHTML="More stuff";let a=mu(t.timeStamp),l=o.appendChild(document.createElement("div"));l.innerHTML=`<b>Entity Id: </b> ${t.id}<br><b>Revisions: </b> ${t.revision}<br><b>Last edited:</b> ${a}`,o.appendChild(document.createElement("br"));let c=o.appendChild(document.createElement("a"));c.innerHTML="Click here to copy a link to this entity",c.href="?id="+t.id,c.onclick=y=>(console.log("Copy to clipboard",c.href),y.stopPropagation(),y.preventDefault(),navigator.clipboard.writeText(c.href),!1),o.appendChild(document.createElement("br")),o.appendChild(document.createElement("br")),o.appendChild(document.createElement("b")).innerHTML="Supress yellow warnings";let h=document.createElement("input");h.type="checkbox",h.style.marginLeft="10px",h.checked=t.supressWarnings,h.onchange=()=>{t.supressWarnings=h.checked,i(t)},o.appendChild(h),o.appendChild(document.createElement("br")),o.appendChild(document.createElement("b")).innerHTML="Custom color ";let d=document.createElement("input");d.type="color",d.style.width="66px",d.style.marginLeft="146px",d.value=t.color,d.onchange=()=>{t.color=d.value,i(t)},o.appendChild(d),o.appendChild(document.createElement("p"));let p=So("Delete",async y=>{let x=prompt("Are you really sure you should delete this area? Answer why.","");if(x==null||x==""){console.log("Delete nope, deleteReason",x);return}console.log("Delete yes, deleteReason",x),y.stopPropagation(),y.preventDefault(),s(t,x)});p.classList.add("delete-button"),p.style.width="100%",o.appendChild(p);let g=So("History",async y=>{y.stopPropagation(),y.preventDefault(),r("history",t)});g.style.marginRight="0",o.appendChild(g);let m=o.appendChild(document.createElement("div"));m.innerHTML="Use delete with caution! Only delete things you know is ok. Undelete can only be performed by using black magic.",o.appendChild(document.createElement("br"));let b=So("Back",y=>{y.stopPropagation(),y.preventDefault(),e("blur")});return b.style.width="200px",o.appendChild(b),o}async CreateHistoryPopup(t,e,r,i,s,o,a,l){let c=document.createElement("div");c.innerHTML="",c.appendChild(document.createElement("h2")).innerHTML="Edit-History";let h=mu(t.timeStamp),d=c.appendChild(document.createElement("div"));d.innerHTML=`<b>Entity Id: </b> ${t.id}<br><b>Name: </b> ${t.name}<br><b>Revisions: </b> ${t.revision}<br><b>Last edited:</b> ${h}`,c.appendChild(document.createElement("br"));let p=document.createElement("div");p.id="history-table",c.appendChild(p);let g=document.createElement("div");g.id="change-description";let m=document.createElement("h3");m.innerText="Description";let b=document.createElement("div");b.append(m),b.append(g),c.appendChild(b);let y=document.createElement("table");p.appendChild(y);let S=y.createTHead().insertRow();S.insertCell().innerText="Revision",S.insertCell().innerText="Timestamp",S.insertCell().innerText="What Changed";let O=y.createTBody();await e.getRevisionsForEntity(t);let D=[],U=null,z=null,q={color:"#ff0000",fillColor:"#000000",fillOpacity:.5,weight:5};for(let tt in t.revisions){let K=document.createElement("ul"),B=document.createElement("tr");U=t.revisions[tt],B.insertCell().innerText=U.revision,B.insertCell().innerText=mu(U.timeStamp,"short","medium"),B.insertCell().append(K);let N=s(U,z);for(let Z in N){let w=N[Z],C=document.createElement("li");C.innerText=w.changeShort;let k=document.createElement("a");k.href="#",k.innerText=" Show",k.title="Show a detailed description about this change.",k.onclick=()=>{let T=t.revisions[tt];m.innerText=`Description of revision ${tt}`,g.innerText=`${w.changeLong}

`;let R=pd.default.DomUtil.create("button","history-button");R.title=`Restores detailes from revision ${tt}.`,R.textContent="\u26A0 Restore Details",R.onclick=()=>{console.log(`Restores detailes from revision ${tt}.`),t.name=t.revisions[tt].name,t.description=t.revisions[tt].description,t.contactInfo=t.revisions[tt].contactInfo,t.nrOfPeople=t.revisions[tt].nrOfPeople,t.nrOfVehicles=t.revisions[tt].nrOfVehicles,t.additionalSqm=t.revisions[tt].additionalSqm,t.powerNeed=t.revisions[tt].powerNeed,t.amplifiedSound=t.revisions[tt].amplifiedSound,t.color=t.revisions[tt].color,t.supressWarnings=t.revisions[tt].supressWarnings},g.append(R);let F=pd.default.DomUtil.create("button","history-button");F.title=`Restores shape from revision ${tt}.`,F.textContent="\u26A0 Restore Shape",F.onclick=()=>{console.log(`Restores shape from revision ${tt}.`),o(t),a(t),t.layer=t.revisions[tt].layer,l(t)},g.append(F),r.clearLayers(),T.layer.setStyle(q),r.addLayer(T.layer)},C.append(k),K.append(C)}D.push(B),z=U}D.slice().reverse().forEach(function(tt){O.append(tt)});let G=So("Back",tt=>{tt.stopPropagation(),tt.preventDefault(),i("blur")});return G.style.width="200px",c.appendChild(G),c}};var eu=class{constructor(t,e){this._isEditMode=!1;this._mode="none";this._currentLayerFilterStyle="severity";this._selected=null;this._map=t,this._popupContentFactory=new Ih,this._groups=e,this._placementLayers=new Ms.LayerGroup().addTo(t),this._placementBufferLayers=new Ms.LayerGroup().addTo(t),this._ghostLayers=new Ms.LayerGroup().addTo(t),this._placementLayers.addTo(e.placement),this._placementBufferLayers.addTo(e.placement),this._validateEntitiesQueue=new Array,this._lastEnityFetch=0,this._autoRefreshIntervall=90,this._currentRevisions={};var r=this._placementBufferLayers;t.on("zoomend",function(){var o=t.getZoom();r.getLayers().forEach(function(a){o>=19?a.setStyle({opacity:1}):a.setStyle({opacity:0})}),this.groups.names.getLayers().forEach(function(a){o>=19?a._tooltip.setOpacity(1):a._tooltip.setOpacity(0)})});let i=cv(this._groups,this._placementLayers);this._repository=new Zl(i),this._popup=Ms.popup({autoClose:!1,closeButton:!1,closeOnClick:!1,closeOnEscapeKey:!1}),Ms.PM.setOptIn(!0),this._map.pm.addControls({position:"bottomleft",drawPolygon:!1,drawCircle:!1,drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawCircleMarker:!1,drawText:!1,removalMode:!1,editControls:!1,snappable:!1}),this._map.pm.setPathOptions(sd),this._map.pm.setGlobalOptions({tooltips:!1,allowSelfIntersection:!1,snappable:!0,draggable:!0}),this._map.on("pm:create",this.onNewLayerCreated.bind(this)),this._map.on("click",o=>{console.log("[Editor]","Editor blur event fired (map click)",{mouseEvent:o}),this.setMode("blur")}),this.sqmTooltip=new Ms.Tooltip({permanent:!0,interactive:!1,direction:"center",className:"shape-tooltip"}),this.sqmTooltip.setLatLng([0,0]),this.sqmTooltip.addTo(this._map),this.sqmTooltip.closeTooltip(),this._nameTooltips={},document.onkeydown=o=>{this.keyEscapeListener(o)};var s=new Ms.Control.Search({layer:this._placementLayers,propertyName:"name",marker:!1,zoom:19,initial:!1});t.addControl(s)}async setMode(t,e){let r=this._mode,i=this._selected,s=t==r,o=e==i;if(!(s&&o)){if(this._ghostLayers.clearLayers(),t=="blur")if((r=="editing-shape"||r=="moving-shape"||r=="editing-info")&&i){t="selected",e=e||i;let l=e.layer.getBounds().getCenter();this._popup.setLatLng(l)}else t="none",e=void 0;if(console.log("[Editor]","mode changed!",{mode:this._mode,nextMode:t,nextEntity:e}),this._mode=t,this._mode=="none"){this.setSelected(null,i),this.setPopup("none");return}if(this._mode=="selected"&&e){this.setSelected(e,i),this.setPopup("info",e),i&&(i?.layer.pm.disable(),i?.layer._layers[i.layer._leaflet_id-1].dragging.disable());return}if(this._mode=="editing-shape"&&e){e.layer.pm.enable({editMode:!0,snappable:!1}),this.setSelected(e,i),this.setPopup("none");return}if(this._mode=="moving-shape"&&e){this.setSelected(e,i),this.setPopup("none"),this.UpdateOnScreenDisplay(e,"Drag to move"),e.layer._layers[e.layer._leaflet_id-1].dragging.enable();return}if(this._mode=="editing-info"&&e){this.setSelected(e,i),this.setPopup("edit-info",e);return}}}async setSelected(t,e){e&&t!=e&&e.hasChanges()&&await this.onLayerDoneEditing(e),this._isEditMode&&this.UpdateOnScreenDisplay(t),this._selected=t,this.refreshEntity(this._selected)}keyEscapeListener(t){"key"in t&&!(t.key==="Escape"||t.key==="Esc")||this.setMode("blur")}async setPopup(t,e){if(t=="none"||!e){this._popup.close();return}if(t=="info"){let r=this._popupContentFactory.CreateInfoPopup(e,this._isEditMode,this.setMode.bind(this));this._popup.setContent(r).openOn(this._map);return}if(t=="edit-info"){let r=this._popupContentFactory.CreateEditPopup(e,this._isEditMode,this.setMode.bind(this),this.setPopup.bind(this),this.refreshEntity.bind(this),this.UpdateOnScreenDisplay.bind(this));this._popup.setContent(r).openOn(this._map);return}if(t=="more"){let r=this._popupContentFactory.CreateMoreInfoPopup(e,this.setMode.bind(this),this.setPopup.bind(this),this.refreshEntity.bind(this),this.deleteAndRemoveEntity.bind(this));this._popup.setContent(r).openOn(this._map);return}if(t=="history"){let r=await this._popupContentFactory.CreateHistoryPopup(e,this._repository,this._ghostLayers,this.setMode.bind(this),this.getEntityDifferences.bind(this),this.removeEntityNameTooltip.bind(this),this.removeEntityFromLayers.bind(this),this.addEntityToMap.bind(this));this._popup.setContent(r).openOn(this._map);return}}async onLayerClicked(t){console.log("[Editor]","Click event fired",{entity:t}),this.setMode("selected",t)}async onLayerDoneEditing(t){console.log("[Editor]","onLayerDoneEditing!",{selected:this._selected}),t.layer.pm.disable(),this.UpdateOnScreenDisplay(null),await this._repository.getRevisionsForEntity(t);let e;for(let s in t.revisions)e=s;let r=t.revisions[e];if(t.revision!=r.revision){let s=this.getEntityDifferences(r,t),o="<b>Someone else edited this shape at the same time as you</b><br/>You have now overwritten their changes, these differences were detected:<ul>";for(let a in s)o+=`<li>${s[a].changeLong}</li>`;o+="</ul>",eo(o,"danger",void 0,36e5)}if(this.isAreaTooBig(t.toGeoJSON()))return;let i=await this._repository.updateEntity(t);i&&(this.removeEntity(t,!1),this.addEntityToMap(i),eo("Saved!","success"))}async onNewLayerCreated(t){console.log("[Editor]","Create event fired",{createEvent:t});let{layer:e}=t,r=e.toGeoJSON();if(this.isAreaTooBig(r)){this._map.removeLayer(e);return}let i=await this._repository.createEntity(r);if(i){this.addEntityToMap(i),this._map.removeLayer(e);let o=i.layer.getBounds().getCenter();this._popup.setLatLng(o),this.setMode("editing-info",i),eo("Saved!","success")}}createEntityTooltip(t){let e=new Ms.Marker(t.layer.getBounds().getCenter(),{opacity:0});return e.feature={type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}},e.options.icon.options.iconSize=[1,1],e.bindTooltip(t.name,{permanent:!0,interactive:!1,direction:"center",className:"name-tooltip"}),t.nameMarker=e,e}addEntityToMap(t,e=!0){this._currentRevisions[t.id]=t,t.layer.on("click",({latlng:r})=>{console.log(r),this._popup.setLatLng(r),this.onLayerClicked(t)}),this._nameTooltips[t.id]=this.createEntityTooltip(t),this._nameTooltips[t.id].addTo(this._groups.names),t.layer.on("pm:markerdrag",()=>{t.updateBufferedLayer(),this.refreshEntity(t),this.UpdateOnScreenDisplay(t)}),t.layer.on("pm:markerdragend",()=>{this.isAreaTooBig(t.toGeoJSON())}),t.layer._layers[t.layer._leaflet_id-1].on("drag",()=>{t.updateBufferedLayer(),this.refreshEntity(t),this.UpdateOnScreenDisplay(null)}),t.layer.on("pm:vertexremoved",()=>{t.updateBufferedLayer(),this.refreshEntity(t),this.UpdateOnScreenDisplay(t)}),this._placementLayers.addLayer(t.layer),this._placementBufferLayers.addLayer(t.bufferLayer),this._map.getZoom()<19&&t.bufferLayer.setStyle({opacity:0}),e&&this.refreshEntity(t)}refreshEntity(t,e=!0){if(t==null)return;let r=t.nameMarker.getLatLng(),i=t.layer.getBounds().getCenter();(i.lat!=r.lat||i.lng!=r.lng)&&t.nameMarker.setLatLng(i),t.nameMarker._tooltip._content!=t.name&&t.nameMarker.setTooltipContent(t.name);var s=this._map.getZoom();s>=19?this._nameTooltips[t.id]._tooltip.setOpacity(1):this._nameTooltips[t.id]._tooltip.setOpacity(0),e&&t.checkAllRules(),t.setLayerStyle(this._currentLayerFilterStyle)}refreshAllEntities(t=!0){for(let e in this._currentRevisions)this.refreshEntity(this._currentRevisions[e],t)}refreshEntitiesSlow(t=null){if(eo("Validating..."),t)this._validateEntitiesQueue=t;else for(let e in this._currentRevisions)this._validateEntitiesQueue.push(this._currentRevisions[e]);this.validateSlowly()}validateSlowly(){var e=[];for(let r=0;r<this._validateEntitiesQueue.length;r+=50){let i=this._validateEntitiesQueue.slice(r,r+50);e.push(new Promise(function(s,o){setTimeout(()=>{for(let a=0;a<i.length;a++)this.refreshEntity(i[a],!0);s(i.length)},50)}.bind(this)))}Promise.all(e).then(r=>{eo("Validation done","success")},r=>{console.log(r)})}setLayerFilter(t,e=!0){this._currentLayerFilterStyle=t,this.refreshAllEntities(e)}isAreaTooBig(t){return _o(t)>5e3?(eo("The area of the polygon is waaay to big. It will not be saved, please change it.","danger",void 0,36e5),!0):!1}deleteAndRemoveEntity(t,e=null){this._selected=null,this.setMode("none"),this.removeEntity(t),this._repository.deleteEntity(t,e)}removeEntityNameTooltip(t){t.nameMarker.unbindTooltip(),this._groups.names.removeLayer(t.nameMarker),t.nameMarker=null,delete this._nameTooltips[t.id]}removeEntityFromLayers(t){this._placementLayers.removeLayer(t.layer),this._placementBufferLayers.removeLayer(t.bufferLayer),this._map.removeLayer(t.layer),this._map.removeLayer(t.bufferLayer)}removeEntity(t,e=!0){this.removeEntityNameTooltip(t),this.removeEntityFromLayers(t),delete this._currentRevisions[t.id],e&&this._repository.remove(t)}addToggleEditButton(){!1&&this._map.addControl(fv(this._isEditMode,()=>{this.toggleEditMode()})),void 0&&this._map.addControl(Zp(void 0))}getEntityDifferences(t,e){let r=[];if(e==null)return r.push({what:"Created",changeShort:"Created",changeLong:"Someone created this entity."}),r;["name","description","contactInfo","nrOfPeople","nrOfVehicles","additionalSqm","powerNeed","amplifiedSound","color","supressWarnings"].forEach(a=>{t[a]!=e[a]&&r.push({what:a,changeShort:`${a} Changed`,changeLong:`Someone changed ${a} from ${e[a]} to ${t[a]}.`})}),t.isDeleted!=e.isDeleted&&r.push({what:"Deleted",changeShort:"Is Deleted",changeLong:`Is Deleted due to ${t.deleteReason}.`});let s=JSON.stringify(t.toGeoJSON().geometry),o=JSON.stringify(e.toGeoJSON().geometry);return s!=o&&r.push({what:"GeoJson",changeShort:"Polygon Changed",changeLong:"Someone changed the polygon."}),r.length==0&&r.push({what:"NoDifference",changeShort:"No difference",changeLong:"No difference detected between revisions."}),r}async toggleEditMode(){if(!!1){this._isEditMode=!1;return}this._isEditMode=!this._isEditMode,this._isEditMode&&localStorage.getItem("hasSeenEditorInstructions")==null&&Yp([{file:"entering_edit_mode",position:"bottom"},{file:"entering_edit_mode_page_two",position:"bottom",onClose:()=>{localStorage.setItem("hasSeenEditorInstructions","true")}}]),this.setPopup("info",this._selected),this._isEditMode==!1&&this._mode!="selected"&&this.setMode("none"),this._map.pm.addControls({drawPolygon:this._isEditMode}),this._map.pm.Toolbar.changeActionsOfControl("Polygon",["cancel"])}async addAPIEntities(){await eo("Loading your drawn polygons from da interweb!");let t=await this._repository.entities();this._lastEnityFetch=new Date().getTime()/1e3;for(let e of t)this.addEntityToMap(e,!1);this.refreshAllEntities(!1),setTimeout(()=>{this.refreshEntitiesSlow()},100),this.addToggleEditButton()}async checkForUpdatedEntities(){if(this._isEditMode==!1){var t=new Date().getTime()/1e3;if(t-this._lastEnityFetch>this._autoRefreshIntervall){this._lastEnityFetch=t;let e=await this._repository.reload(),r=new Array,i=new Array;for(let s of e.refreshedAdded){let o=this._repository.getEntityById(s);i.push(`Add new entity ${o.id} ${o.name}`),this.addEntityToMap(o,!1),r.push(o)}for(let s of e.refreshedDeleted){let o=this._currentRevisions[s];i.push(`Removed entity ${o.id} ${o.name}`),this.removeEntity(o)}for(let s of e.refreshedUpdated){let o=this._repository.getEntityById(s);i.push(`Updated entity ${o.id} ${o.name}`),this.removeEntity(this._currentRevisions[s],!1),this.addEntityToMap(o,!1),r.push(o)}i.length>0&&(console.log("Fetched latest changes from map",new Date().toISOString(),i),this.refreshAllEntities(!1)),r.length>0&&this.refreshEntitiesSlow(r)}}setTimeout(()=>{this.checkForUpdatedEntities()},1e4)}gotoEntity(t){let e=this._repository.getEntityById(t);if(e){let r=e.layer.getBounds().getCenter();this._map.setView(r,19),this._popup.setLatLng(r),this.onLayerClicked(e)}}UpdateOnScreenDisplay(t,e=null){if(t||e){let r="";if(e)r=e;else{r=t.area+"m\xB2";for(let i of t.getAllTriggeredRules())i.severity>=2&&(r+="<br>"+i.shortMessage)}this.sqmTooltip.openOn(this._map),this.sqmTooltip.setLatLng(t.layer.getBounds().getCenter()),this.sqmTooltip.setContent(r)}else this.sqmTooltip.close()}};var vv=async()=>{let n=new Set(["Placement","Placement_map","POI"]),t=Di.default.map("map",{zoomControl:!1,maxZoom:21,drawControl:!0,attributionControl:!1}).setView([57.6226,14.9276],16);t.groups={placement:new Di.default.LayerGroup,mapstuff:new Di.default.LayerGroup,neighbourhoods:new Di.default.LayerGroup,quarters:new Di.default.LayerGroup,plazas:new Di.default.LayerGroup,poi:new Di.default.LayerGroup,powergrid:new Di.default.LayerGroup,soundspots:new Di.default.LayerGroup,soundguide:new Di.default.LayerGroup,names:new Di.default.LayerGroup},t.groups.googleSatellite=Di.default.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:21,maxNativeZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(t),fetch("./data/analysis/contours.geojson").then(h=>h.json()).then(h=>{Di.default.geoJSON(h.features,{style:{color:"#ffffff",weight:1,opacity:.5}}).addTo(t.groups.mapstuff)}),await Ca(t,"type","./data/bl25/placement_areas.geojson"),await Ca(t,"type","./data/bl25/borders.geojson"),await Ca(t,"type","./data/bl25/roads_and_distances.geojson"),await Ca(t,"type","./data/bl25/plazas.geojson"),await Ca(t,"type","./data/bl25/neighbourhoods.geojson"),t.groups.propertyborder.addTo(t.groups.mapstuff),t.removeLayer(t.groups.propertyborder),t.groups.minorroad.addTo(t.groups.mapstuff),t.removeLayer(t.groups.minorroad),t.groups.fireroad.addTo(t.groups.mapstuff),t.removeLayer(t.groups.fireroad),t.groups.area.addTo(t.groups.mapstuff),t.removeLayer(t.groups.area),t.groups.hiddenforbidden.addTo(t.groups.mapstuff),t.groups.container.addTo(t.groups.mapstuff),t.removeLayer(t.groups.container),t.groups.parking.addTo(t.groups.mapstuff),t.removeLayer(t.groups.parking),t.groups.toilet.addTo(t.groups.mapstuff),t.removeLayer(t.groups.toilet),t.groups.bridge.addTo(t.groups.mapstuff),t.removeLayer(t.groups.bridge),t.groups.bluesoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.bluesoundzone),t.groups.greensoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.greensoundzone),t.groups.yellowsoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.yellowsoundzone),t.groups.orangesoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.orangesoundzone),t.groups.redsoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.redsoundzone),t.on("overlayadd",function(h){t.groups.names.setZIndex(101),h.name==="Soundguide"&&(t.groups.bluesoundzone.bringToBack(),t.groups.greensoundzone.bringToBack(),t.groups.yellowsoundzone.bringToBack(),t.groups.orangesoundzone.bringToBack(),t.groups.redsoundzone.bringToBack())}),t.groups.terrain=await Qh(t,"./data/terrain.png",[[57.615642290070426,14.915097173672454],[57.62912303949617,14.936217846229036]]),t.groups.drawn=await Qh(t,"./data/drawn.jpg",[[57.6306870895,14.9142416425],[57.6178189445,14.9386124973]]),t.groups.heightmap=Di.default.tileLayer("./data/analysis/height/{z}/{x}/{y}.jpg",{minZoom:13,maxZoom:21,minNativeZoom:16,maxNativeZoom:17,tms:!1}),t.groups.slopemap=Di.default.tileLayer("./data/analysis/slope/{z}/{x}/{y}.png",{minZoom:13,maxZoom:21,minNativeZoom:16,maxNativeZoom:17,tms:!1}),t.groups.aftermath=Di.default.tileLayer("./data/bl23/aftermath/{z}/{x}/{y}.png",{minZoom:0,maxZoom:21,minNativeZoom:0,maxNativeZoom:20,tms:!1}),t.groups.aftermath22=Di.default.tileLayer("./data/bl22/aftermath/{z}/{x}/{y}.png",{minZoom:0,maxZoom:21,minNativeZoom:0,maxNativeZoom:20,tms:!1}),t.groups.plaza.addTo(t.groups.plazas),t.removeLayer(t.groups.plaza),t.groups.neighbourhood.addTo(t.groups.neighbourhoods),t.removeLayer(t.groups.neighbourhood);var e={Placement_map:t.groups.mapstuff,POI:t.groups.poi,PowerGrid:t.groups.powergrid,Soundguide:t.groups.soundguide,Slope:t.groups.slopemap,Height:t.groups.heightmap,Terrain:t.groups.terrain,Handdrawn:t.groups.drawn,Plazas:t.groups.plazas,Placement:t.groups.placement,Names:t.groups.names,Neighbourhoods:t.groups.neighbourhoods,Quarters:t.groups.quarters,Aftermath22:t.groups.aftermath22,Aftermath23:t.groups.aftermath};let r=new eu(t,t.groups),i=Di.default.Control.extend({options:{position:"topleft"},onAdd:()=>{let h=Di.default.DomUtil.create("button","leaflet-bar help-button");return h.title="Guide to the placement process",h.textContent="\u26D1\uFE0F",Di.default.DomEvent.disableClickPropagation(h),h.onclick=()=>{mo({file:"guide-home",position:"end",onClose:()=>{localStorage.setItem("hasSeenPlacementWelcome","true")}})},h}});t.addControl(new i);let s=Di.default.Control.extend({options:{position:"topleft"},onAdd:()=>{let h=Di.default.DomUtil.create("button","leaflet-bar help-button");return h.title="Save everything",h.textContent="\u{1F4BE}",Di.default.DomEvent.disableClickPropagation(h),h.onclick=async()=>{if(!confirm("This will download all the current map information as several KML and GeoJSON files, are you sure?"))return;let p=[["mapstuff"],["poi"],["powergrid"],["soundguide"],["plazas"],["names"],["neighbourhoods"],["placement"]];eo("Downloading map data...");for(let[m]of p)try{let y=t.groups[m].toGeoJSON();var g=(0,yv.default)(y,{documentName:m,name:"name",description:"description"});for(let[x,S]of[[g,".kml"],[JSON.stringify(y),".geojson"]]){let O=document.createElement("a"),D="data:text/kml;charset=utf-8,"+encodeURIComponent(x);O.download=m+S,O.target="_blank",O.href=D,O.click(),console.log("Downloading map data from layergroup "+m),await new Promise(U=>setTimeout(U,500))}}catch(b){console.error(b),console.warn("Failed to download map data from layergroup "+m)}},h}});t.addControl(new s),Di.default.control.polylineMeasure({measureControlLabel:"&#128207;",arrow:{color:"#0000"}}).addTo(t);let a=new Di.default.Control.Coordinates({position:"topright",latitudeText:"lat",longitudeText:"lng",promptText:"Current Coordinaes:",precision:10});a.addTo(t),t.on("hashmetainit",function(h){go.decode(h.meta),go.layers.filter(d=>d in e).forEach(d=>n.add(d)),n.forEach(d=>t.addLayer(e[d]))}),t.on("overlayadd",function(h){n.add(h.name),go.layers=n}),t.on("overlayremove",function(h){n.delete(h.name),go.layers=n}),go.map=t,go.layers=n,t.on("click",function(h){console.log(h.latlng),a.setCoordinates(h)}),await Kh("poi.json",t.groups.poi),await Hp(t.groups.powergrid),await Kh("soundspots.json",t.groups.soundspots),t.groups.soundspots.addTo(t.groups.soundguide),t.removeLayer(t.groups.soundspots),Up(t.groups.quarters),Vp(t.groups.plazas),qp(t.groups.neighbourhoods),await Wp(t,e,n),t.removeLayer(e.Names),await r.addAPIEntities(),t.addLayer(e.Names);let l=new URLSearchParams(window.location.search),c=Number(l.get("id"));c&&r.gotoEntity(c),await eo("Loaded everything!","success")};var Un=class{constructor(t){this.table=t}reloadData(t,e,r){return this.table.dataLoader.load(t,void 0,void 0,void 0,e,r)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(t){return this.table.modules.layout.layout(t)}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t){return this.table.options[t]}setOption(t,e){return typeof e<"u"&&(this.table.options[t]=e),this.table.options[t]}deprecationCheck(t,e,r){return this.table.deprecationAdvisor.check(t,e,r)}deprecationCheckMsg(t,e){return this.table.deprecationAdvisor.checkMsg(t,e)}deprecationMsg(t){return this.table.deprecationAdvisor.msg(t)}module(t){return this.table.module(t)}},Ai=class{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}static retrieveNestedData(t,e,r){var i=t?e.split(t):[e],s=i.length,o;for(let a=0;a<s&&(r=r[i[a]],o=r,!!r);a++);return o}static deepClone(t,e,r=[]){var i={}.__proto__,s=[].__proto__;e||(e=Object.assign(Array.isArray(t)?[]:{},t));for(var o in t){let a=t[o],l,c;a!=null&&typeof a=="object"&&(a.__proto__===i||a.__proto__===s)&&(l=r.findIndex(h=>h.subject===a),l>-1?e[o]=r[l].copy:(c=Object.assign(Array.isArray(a)?[]:{},a),r.unshift({subject:a,copy:c}),e[o]=this.deepClone(a,c,r)))}return e}},G2=class _v extends Un{constructor(t,e,r){super(t),this.element=e,this.container=this._lookupContainer(),this.parent=r,this.reversedX=!1,this.childPopup=null,this.blurable=!1,this.blurCallback=null,this.blurEventsBound=!1,this.renderedCallback=null,this.visible=!1,this.hideable=!0,this.element.classList.add("tabulator-popup-container"),this.blurEvent=this.hide.bind(this,!1),this.escEvent=this._escapeCheck.bind(this),this.destroyBinding=this.tableDestroyed.bind(this),this.destroyed=!1}tableDestroyed(){this.destroyed=!0,this.hide(!0)}_lookupContainer(){var t=this.table.options.popupContainer;return typeof t=="string"?(t=document.querySelector(t),t||console.warn("Menu Error - no container element found matching selector:",this.table.options.popupContainer,"(defaulting to document body)")):t===!0&&(t=this.table.element),t&&!this._checkContainerIsParent(t)&&(t=!1,console.warn("Menu Error - container element does not contain this table:",this.table.options.popupContainer,"(defaulting to document body)")),t||(t=document.body),t}_checkContainerIsParent(t,e=this.table.element){return t===e?!0:e.parentNode?this._checkContainerIsParent(t,e.parentNode):!1}renderCallback(t){this.renderedCallback=t}containerEventCoords(t){var e=!(t instanceof MouseEvent),r=e?t.touches[0].pageX:t.pageX,i=e?t.touches[0].pageY:t.pageY;if(this.container!==document.body){let s=Ai.elOffset(this.container);r-=s.left,i-=s.top}return{x:r,y:i}}elementPositionCoords(t,e="right"){var r=Ai.elOffset(t),i,s,o;switch(this.container!==document.body&&(i=Ai.elOffset(this.container),r.left-=i.left,r.top-=i.top),e){case"right":s=r.left+t.offsetWidth,o=r.top-1;break;case"bottom":s=r.left,o=r.top+t.offsetHeight;break;case"left":s=r.left,o=r.top-1;break;case"top":s=r.left,o=r.top;break;case"center":s=r.left+t.offsetWidth/2,o=r.top+t.offsetHeight/2;break}return{x:s,y:o,offset:r}}show(t,e){var r,i,s,o,a;return this.destroyed||this.table.destroyed?this:(t instanceof HTMLElement?(s=t,a=this.elementPositionCoords(t,e),o=a.offset,r=a.x,i=a.y):typeof t=="number"?(o={top:0,left:0},r=t,i=e):(a=this.containerEventCoords(t),r=a.x,i=a.y,this.reversedX=!1),this.element.style.top=i+"px",this.element.style.left=r+"px",this.container.appendChild(this.element),typeof this.renderedCallback=="function"&&this.renderedCallback(),this._fitToScreen(r,i,s,o,e),this.visible=!0,this.subscribe("table-destroy",this.destroyBinding),this.element.addEventListener("mousedown",l=>{l.stopPropagation()}),this)}_fitToScreen(t,e,r,i,s){var o=this.container===document.body?document.documentElement.scrollTop:this.container.scrollTop;(t+this.element.offsetWidth>=this.container.offsetWidth||this.reversedX)&&(this.element.style.left="",r?this.element.style.right=this.container.offsetWidth-i.left+"px":this.element.style.right=this.container.offsetWidth-t+"px",this.reversedX=!0);let a=Math.max(this.container.offsetHeight,o?this.container.scrollHeight:0);if(e+this.element.offsetHeight>a)if(r)switch(s){case"bottom":this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight-r.offsetHeight-1+"px";break;default:this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight+r.offsetHeight+1+"px"}else this.element.style.height=a+"px"}isVisible(){return this.visible}hideOnBlur(t){return this.blurable=!0,this.visible&&(setTimeout(()=>{this.visible&&(this.table.rowManager.element.addEventListener("scroll",this.blurEvent),this.subscribe("cell-editing",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),document.body.addEventListener("mousedown",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent),this.blurEventsBound=!0)},100),this.blurCallback=t),this}_escapeCheck(t){t.keyCode==27&&this.hide()}blockHide(){this.hideable=!1}restoreHide(){this.hideable=!0}hide(t=!1){return this.visible&&this.hideable&&(this.blurable&&this.blurEventsBound&&(document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),document.body.removeEventListener("mousedown",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent),this.unsubscribe("cell-editing",this.blurEvent),this.blurEventsBound=!1),this.childPopup&&this.childPopup.hide(),this.parent&&(this.parent.childPopup=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.visible=!1,this.blurCallback&&!t&&this.blurCallback(),this.unsubscribe("table-destroy",this.destroyBinding)),this}child(t){return this.childPopup&&this.childPopup.hide(),this.childPopup=new _v(this.table,t,this),this.childPopup}},xr=class extends Un{constructor(t,e){super(t),this._handler=null}initialize(){}registerTableOption(t,e){this.table.optionsList.register(t,e)}registerColumnOption(t,e){this.table.columnManager.optionsList.register(t,e)}registerTableFunction(t,e){typeof this.table[t]>"u"?this.table[t]=(...r)=>(this.table.initGuard(t),e(...r)):console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,e,r){return this.table.componentFunctionBinder.bind(t,e,r)}registerDataHandler(t,e){this.table.rowManager.registerDataPipelineHandler(t,e),this._handler=t}registerDisplayHandler(t,e){this.table.rowManager.registerDisplayPipelineHandler(t,e),this._handler=t}displayRows(t){var e=this.table.rowManager.displayRows.length-1,r;if(this._handler&&(r=this.table.rowManager.displayPipeline.findIndex(i=>i.handler===this._handler),r>-1&&(e=r)),t&&(e=e+t),this._handler)return e>-1?this.table.rowManager.getDisplayRows(e):this.activeRows()}activeRows(){return this.table.rowManager.activeRows}refreshData(t,e){e||(e=this._handler),e&&this.table.rowManager.refreshActiveData(e,!1,t)}footerAppend(t){return this.table.footerManager.append(t)}footerPrepend(t){return this.table.footerManager.prepend(t)}footerRemove(t){return this.table.footerManager.remove(t)}popup(t,e){return new G2(this.table,t,e)}alert(t,e){return this.table.alertManager.alert(t,e)}clearAlert(){return this.table.alertManager.clear()}},U2={rownum:function(n,t,e,r,i,s){return s.getPosition()}},gd=class n extends xr{static moduleName="accessor";static accessors=U2;constructor(t){super(t),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(t){var e=!1,r={};this.allowedTypes.forEach(i=>{var s="accessor"+(i.charAt(0).toUpperCase()+i.slice(1)),o;t.definition[s]&&(o=this.lookupAccessor(t.definition[s]),o&&(e=!0,r[s]={accessor:o,params:t.definition[s+"Params"]||{}}))}),e&&(t.modules.accessor=r)}lookupAccessor(t){var e=!1;switch(typeof t){case"string":n.accessors[t]?e=n.accessors[t]:console.warn("Accessor Error - No such accessor found, ignoring: ",t);break;case"function":e=t;break}return e}transformRow(t,e){var r="accessor"+(e.charAt(0).toUpperCase()+e.slice(1)),i=t.getComponent(),s=Ai.deepClone(t.data||{});return this.table.columnManager.traverse(function(o){var a,l,c,h;o.modules.accessor&&(l=o.modules.accessor[r]||o.modules.accessor.accessor||!1,l&&(a=o.getFieldValue(s),a!="undefined"&&(h=o.getComponent(),c=typeof l.params=="function"?l.params(a,s,e,h,i):l.params,o.setFieldValue(s,l.accessor(a,s,e,c,h,i)))))}),s}},V2={method:"GET"};function yd(n,t){var e=[];if(t=t||"",Array.isArray(n))n.forEach((i,s)=>{e=e.concat(yd(i,t?t+"["+s+"]":s))});else if(typeof n=="object")for(var r in n)e=e.concat(yd(n[r],t?t+"["+r+"]":r));else e.push({key:t,value:n});return e}function q2(n){var t=yd(n),e=[];return t.forEach(function(r){e.push(encodeURIComponent(r.key)+"="+encodeURIComponent(r.value))}),e.join("&")}function wv(n,t,e){return n&&e&&Object.keys(e).length&&(!t.method||t.method.toLowerCase()=="get")&&(t.method="get",n+=(n.includes("?")?"&":"?")+q2(e)),n}function W2(n,t,e){var r;return new Promise((i,s)=>{if(n=this.urlGenerator.call(this.table,n,t,e),t.method.toUpperCase()!="GET")if(r=typeof this.table.options.ajaxContentType=="object"?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType],r){for(var o in r.headers)t.headers||(t.headers={}),typeof t.headers[o]>"u"&&(t.headers[o]=r.headers[o]);t.body=r.body.call(this,n,t,e)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);n?(typeof t.headers>"u"&&(t.headers={}),typeof t.headers.Accept>"u"&&(t.headers.Accept="application/json"),typeof t.headers["X-Requested-With"]>"u"&&(t.headers["X-Requested-With"]="XMLHttpRequest"),typeof t.mode>"u"&&(t.mode="cors"),t.mode=="cors"?(typeof t.headers.Origin>"u"&&(t.headers.Origin=window.location.origin),typeof t.credentials>"u"&&(t.credentials="same-origin")):typeof t.credentials>"u"&&(t.credentials="include"),fetch(n,t).then(a=>{a.ok?a.json().then(l=>{i(l)}).catch(l=>{s(l),console.warn("Ajax Load Error - Invalid JSON returned",l)}):(console.error("Ajax Load Error - Connection Error: "+a.status,a.statusText),s(a))}).catch(a=>{console.error("Ajax Load Error - Connection Error: ",a),s(a)})):(console.warn("Ajax Load Error - No URL Set"),i([]))})}function vd(n,t){var e=[];if(t=t||"",Array.isArray(n))n.forEach((i,s)=>{e=e.concat(vd(i,t?t+"["+s+"]":s))});else if(typeof n=="object")for(var r in n)e=e.concat(vd(n[r],t?t+"["+r+"]":r));else e.push({key:t,value:n});return e}var X2={json:{headers:{"Content-Type":"application/json"},body:function(n,t,e){return JSON.stringify(e)}},form:{headers:{},body:function(n,t,e){var r=vd(e),i=new FormData;return r.forEach(function(s){i.append(s.key,s.value)}),i}}},bd=class n extends xr{static moduleName="ajax";static defaultConfig=V2;static defaultURLGenerator=wv;static defaultLoaderPromise=W2;static contentTypeFormatters=X2;constructor(t){super(t),this.config={},this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=n.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||n.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||n.defaultURLGenerator,this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.setDefaultConfig(this.table.options.ajaxConfig),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-params",this.requestParams.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestParams(t,e,r,i){var s=this.table.options.ajaxParams;return s&&(typeof s=="function"&&(s=s.call(this.table)),i=Object.assign(Object.assign({},s),i)),i}requestDataCheck(t,e,r,i){return!!(!t&&this.url||typeof t=="string")}requestData(t,e,r,i,s){var o;return!s&&this.requestDataCheck(t)?(t&&this.setUrl(t),o=this.generateConfig(r),this.sendRequest(this.url,e,o)):s}setDefaultConfig(t={}){this.config=Object.assign({},n.defaultConfig),typeof t=="string"?this.config.method=t:Object.assign(this.config,t)}generateConfig(t={}){var e=Object.assign({},this.config);return typeof t=="string"?e.method=t:Object.assign(e,t),e}setUrl(t){this.url=t}getUrl(){return this.url}sendRequest(t,e,r){return this.table.options.ajaxRequesting.call(this.table,t,e)!==!1?this.loaderPromise(t,r,e).then(i=>(this.table.options.ajaxResponse&&(i=this.table.options.ajaxResponse.call(this.table,t,e,i)),i)):Promise.reject()}},$2={replace:function(n){return this.table.setData(n)},update:function(n){return this.table.updateOrAddData(n)},insert:function(n){return this.table.addData(n)}},Y2={table:function(n){var t=[],e=!0,r=this.table.columnManager.columns,i=[],s=[];return n=n.split(`
`),n.forEach(function(o){t.push(o.split("	"))}),t.length&&!(t.length===1&&t[0].length<2)?(t[0].forEach(function(o){var a=r.find(function(l){return o&&l.definition.title&&o.trim()&&l.definition.title.trim()===o.trim()});a?i.push(a):e=!1}),e||(e=!0,i=[],t[0].forEach(function(o){var a=r.find(function(l){return o&&l.field&&o.trim()&&l.field.trim()===o.trim()});a?i.push(a):e=!1}),e||(i=this.table.columnManager.columnsByIndex)),e&&t.shift(),t.forEach(function(o){var a={};o.forEach(function(l,c){i[c]&&(a[i[c].field]=l)}),s.push(a)}),s):!1}},Z2={copyToClipboard:["ctrl + 67","meta + 67"]},K2={copyToClipboard:function(n){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},J2={keybindings:{bindings:Z2,actions:K2}},_d=class n extends xr{static moduleName="clipboard";static moduleExtensions=J2;static pasteActions=$2;static pasteParsers=Y2;constructor(t){super(t),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",t=>{var e,r,i;this.blocked||(t.preventDefault(),this.customSelection?(e=this.customSelection,this.table.options.clipboardCopyFormatter&&(e=this.table.options.clipboardCopyFormatter("plain",e))):(i=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard"),r=this.table.modules.export.generateHTMLTable(i),e=r?this.generatePlainContent(i):"",this.table.options.clipboardCopyFormatter&&(e=this.table.options.clipboardCopyFormatter("plain",e),r=this.table.options.clipboardCopyFormatter("html",r))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",e):t.clipboardData&&t.clipboardData.setData?(t.clipboardData.setData("text/plain",e),r&&t.clipboardData.setData("text/html",r)):t.originalEvent&&t.originalEvent.clipboardData.setData&&(t.originalEvent.clipboardData.setData("text/plain",e),r&&t.originalEvent.clipboardData.setData("text/html",r)),this.dispatchExternal("clipboardCopied",e,r),this.reset())}),(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",t=>{this.paste(t)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(t){var e=[];return t.forEach(r=>{var i=[];r.columns.forEach(s=>{var o="";if(s)if(r.type==="group"&&(s.value=s.component.getKey()),s.value===null)o="";else switch(typeof s.value){case"object":o=JSON.stringify(s.value);break;case"undefined":o="";break;default:o=s.value}i.push(o)}),e.push(i.join("	"))}),e.join(`
`)}copy(t,e){var r,i;this.blocked=!1,this.customSelection=!1,(this.mode===!0||this.mode==="copy")&&(this.rowRange=t||this.table.options.clipboardCopyRowRange,typeof window.getSelection<"u"&&typeof document.createRange<"u"?(t=document.createRange(),t.selectNodeContents(this.table.element),r=window.getSelection(),r.toString()&&e&&(this.customSelection=r.toString()),r.removeAllRanges(),r.addRange(t)):typeof document.selection<"u"&&typeof document.body.createTextRange<"u"&&(i=document.body.createTextRange(),i.moveToElementText(this.table.element),i.select()),document.execCommand("copy"),r&&r.removeAllRanges())}setPasteAction(t){switch(typeof t){case"string":this.pasteAction=n.pasteActions[t],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",t);break;case"function":this.pasteAction=t;break}}setPasteParser(t){switch(typeof t){case"string":this.pasteParser=n.pasteParsers[t],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",t);break;case"function":this.pasteParser=t;break}}paste(t){var e,r,i;this.checkPasteOrigin(t)&&(e=this.getPasteData(t),r=this.pasteParser.call(this,e),r?(t.preventDefault(),this.table.modExists("mutator")&&(r=this.mutateData(r)),i=this.pasteAction.call(this,r),this.dispatchExternal("clipboardPasted",e,r,i)):this.dispatchExternal("clipboardPasteError",e))}mutateData(t){var e=[];return Array.isArray(t)?t.forEach(r=>{e.push(this.table.modules.mutator.transformRow(r,"clipboard"))}):e=t,e}checkPasteOrigin(t){var e=!0,r=this.confirm("clipboard-paste",[t]);return(r||!["DIV","SPAN"].includes(t.target.tagName))&&(e=!1),e}getPasteData(t){var e;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData?e=t.clipboardData.getData("text/plain"):t.originalEvent&&t.originalEvent.clipboardData.getData&&(e=t.originalEvent.clipboardData.getData("text/plain")),e}},wd=class{constructor(t){return this._row=t,new Proxy(this,{get:function(e,r,i){return typeof e[r]<"u"?e[r]:e._row.table.componentFunctionBinder.handle("row",e._row,r)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return e?e.getComponent():!1}_getSelf(){return this._row}},Nh=class{constructor(t){return this._cell=t,new Proxy(this,{get:function(e,r,i){return typeof e[r]<"u"?e[r]:e._cell.table.componentFunctionBinder.handle("cell",e._cell,r)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(t){return this._cell.row.getData(t)}getType(){return"cell"}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,e){typeof e>"u"&&(e=!0),this._cell.setValue(t,e)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}},ya=class extends Un{constructor(t,e){super(t.table),this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.column.isRowHeader&&this.element.classList.add("tabulator-row-header")}_configureCell(){var t=this.element,e=this.column.getField(),r={top:"flex-start",bottom:"flex-end",middle:"center"},i={left:"flex-start",right:"flex-end",center:"center"};if(t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems=r[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent=i[this.column.hozAlign]||"")),e&&t.setAttribute("tabulator-field",e),this.column.definition.cssClass){var s=this.column.definition.cssClass.split(" ");s.forEach(o=>{t.classList.add(o)})}this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(t=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value),typeof t){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",t!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,e,r){var i=this.setValueProcessData(t,e,r);i&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.column.definition.cellEdited&&this.column.definition.cellEdited.call(this.table,this.getComponent()),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,e,r){var i=!1;return(this.value!==t||r)&&(i=!0,e&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),i&&this.dispatch("cell-value-changed",this),i}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null,this.dispatch("cell-height",this,"")}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled,this.dispatch("cell-height",this,this.row.heightStyled)}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Nh(this)),this.component}},Dh=class{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(e,r,i){return typeof e[r]<"u"?e[r]:e._column.table.componentFunctionBinder.handle("column",e._column,r)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getTitleDownload(){return this._column.getTitleDownload()}getCells(){var t=[];return this._column.cells.forEach(function(e){t.push(e.getComponent())}),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(e){t.push(e.getComponent())}),t}getParentColumn(){return this._column.getParentComponent()}_getSelf(){return this._column}scrollTo(t,e){return this._column.table.columnManager.scrollToColumn(this._column,t,e)}getTable(){return this._column.table}move(t,e){var r=this._column.table.columnManager.findColumn(t);r?this._column.table.columnManager.moveColumn(this._column,r,e):console.warn("Move Error - No matching column found:",r)}getNextColumn(){var t=this._column.nextColumn();return t?t.getComponent():!1}getPrevColumn(){var t=this._column.prevColumn();return t?t.getComponent():!1}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var e;return t===!0?e=this._column.reinitializeWidth(!0):e=this._column.setWidth(t),this._column.table.columnManager.rerenderColumns(!0),e}},xv={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,maxInitialWidth:void 0,cssClass:void 0,variableHeight:void 0,headerVertical:void 0,headerHozAlign:void 0,headerWordWrap:!1,editableTitle:void 0},ga=class n extends Un{static defaultOptionList=xv;constructor(t,e,r){super(e.table),this.definition=t,this.parent=e,this.type="column",this.columns=[],this.cells=[],this.isGroup=!1,this.isRowHeader=r,this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleDownload=null,this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.maxInitialWidth=null,this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((i,s)=>{var o=new n(i,this);this.attachColumn(o)}),this.checkColumnVisibility()):e.registerColumnField(this),this._initialize()}createElement(){var t=document.createElement("div");switch(t.classList.add("tabulator-col"),t.setAttribute("role","columnheader"),t.setAttribute("aria-sort","none"),this.isRowHeader&&t.classList.add("tabulator-row-header"),this.table.options.columnHeaderVertAlign){case"middle":t.style.justifyContent="center";break;case"bottom":t.style.justifyContent="flex-end";break}return t}createGroupElement(){var t=document.createElement("div");return t.classList.add("tabulator-col-group-cols"),t}mapDefinitions(){var t=this.table.options.columnDefaults;if(t)for(let e in t)typeof this.definition[e]>"u"&&(this.definition[e]=t[e]);this.definition=this.table.columnManager.optionsList.generate(n.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(t=>{n.defaultOptionList.indexOf(t)===-1&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",t)})}setField(t){this.field=t,this.fieldStructure=t?this.table.options.nestedFieldSeparator?t.split(this.table.options.nestedFieldSeparator):[t]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(t){this.parent.registerColumnPosition(t)}registerColumnField(t){this.parent.registerColumnField(t)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(t){t.reRegisterPosition()}):this.registerColumnPosition(this)}_initialize(){for(var t=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);t.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),t.headerVertical==="flip"&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.dispatch("column-init",this)}_buildColumnHeader(){var t=this.definition;if(this.dispatch("column-layout",this),typeof t.visible<"u"&&(t.visible?this.show(!0):this.hide(!0)),t.cssClass){var e=t.cssClass.split(" ");e.forEach(r=>{this.element.classList.add(r)})}t.field&&this.element.setAttribute("tabulator-field",t.field),this.setMinWidth(parseInt(t.minWidth)),t.maxInitialWidth&&(this.maxInitialWidth=parseInt(t.maxInitialWidth)),t.maxWidth&&this.setMaxWidth(parseInt(t.maxWidth)),this.reinitializeWidth(),this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var t=document.createElement("div");return t.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),t.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),t}_buildColumnHeaderTitle(){var t=this.definition,e=document.createElement("div");if(e.classList.add("tabulator-col-title"),t.headerWordWrap&&e.classList.add("tabulator-col-title-wrap"),t.editableTitle){var r=document.createElement("input");r.classList.add("tabulator-title-editor"),r.addEventListener("click",i=>{i.stopPropagation(),r.focus()}),r.addEventListener("mousedown",i=>{i.stopPropagation()}),r.addEventListener("change",()=>{t.title=r.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),e.appendChild(r),t.field?this.langBind("columns|"+t.field,i=>{r.value=i||t.title||"&nbsp;"}):r.value=t.title||"&nbsp;"}else t.field?this.langBind("columns|"+t.field,i=>{this._formatColumnHeaderTitle(e,i||t.title||"&nbsp;")}):this._formatColumnHeaderTitle(e,t.title||"&nbsp;");return e}_formatColumnHeaderTitle(t,e){var r=this.chain("column-format",[this,e,t],null,()=>e);switch(typeof r){case"object":r instanceof Node?t.appendChild(r):(t.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",r));break;case"undefined":t.innerHTML="";break;default:t.innerHTML=r}}_buildGroupHeader(){if(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass){var t=this.definition.cssClass.split(" ");t.forEach(e=>{this.element.classList.add(e)})}this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(t){return t[this.field]}_getNestedData(t){var e=t,r=this.fieldStructure,i=r.length,s;for(let o=0;o<i&&(e=e[r[o]],s=e,!!e);o++);return s}_setFlatData(t,e){this.field&&(t[this.field]=e)}_setNestedData(t,e){var r=t,i=this.fieldStructure,s=i.length;for(let o=0;o<s;o++)if(o==s-1)r[i[o]]=e;else{if(!r[i[o]])if(typeof e<"u")r[i[o]]={};else break;r=r[i[o]]}}attachColumn(t){this.groupElement?(this.columns.push(t),this.groupElement.appendChild(t.getElement()),t.columnRendered()):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(t,e){var r=this.parent.isGroup?this.parent.getGroupElement().clientHeight:e||this.parent.getHeadersElement().clientHeight;this.element.style.height=r+"px",this.dispatch("column-height",this,this.element.style.height),this.isGroup&&(this.groupElement.style.minHeight=r-this.contentElement.offsetHeight+"px"),this.columns.forEach(function(i){i.verticalAlign(t)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(t){t.clearVerticalAlign()}),this.dispatch("column-height",this,"")}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getTitleDownload(){return this.titleDownload}getFirstColumn(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this}getLastColumn(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this}getColumns(t){var e=[];return t?this.columns.forEach(r=>{e.push(r),e=e.concat(r.getColumns(!0))}):e=this.columns,e}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(t){var e=[];return this.isGroup&&t&&(this.columns.forEach(function(r){e.push(r.getDefinition(!0))}),this.definition.columns=e),this.definition}checkColumnVisibility(){var t=!1;this.columns.forEach(function(e){e.visible&&(t=!0)}),t?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(t,e){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(r){r.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,e),t||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}hide(t,e){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(r){r.hide()}),this.dispatch("column-hide",this,e),t||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}matchChildWidths(){var t=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(e){e.visible&&(t+=e.getWidth())}),this.contentElement.style.maxWidth=t-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(t){var e=this.columns.indexOf(t);e>-1&&this.columns.splice(e,1),this.columns.length||this.delete()}setWidth(t){this.widthFixed=!0,this.setWidthActual(t)}setWidthActual(t){isNaN(t)&&(t=Math.floor(this.table.element.clientWidth/100*parseInt(t))),t=Math.max(this.minWidth,t),this.maxWidth&&(t=Math.min(this.maxWidth,t)),this.width=t,this.widthStyled=t?t+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(e){e.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this),this.subscribedExternal("columnWidth")&&this.dispatchExternal("columnWidth",this.getComponent())}checkCellHeights(){var t=[];this.cells.forEach(function(e){e.row.heightInitialized&&(e.row.getElement().offsetParent!==null?(t.push(e.row),e.row.clearCellHeight()):e.row.heightInitialized=!1)}),t.forEach(function(e){e.calcHeight()}),t.forEach(function(e){e.setCellHeight()})}getWidth(){var t=0;return this.isGroup?this.columns.forEach(function(e){e.visible&&(t+=e.getWidth())}):t=this.width,t}getLeftOffset(){var t=this.element.offsetLeft;return this.parent.isGroup&&(t+=this.parent.getLeftOffset()),t}getHeight(){return Math.ceil(this.element.getBoundingClientRect().height)}setMinWidth(t){this.maxWidth&&t>this.maxWidth&&(t=this.maxWidth,console.warn("the minWidth ("+t+"px) for column '"+this.field+"' cannot be bigger that its maxWidth ("+this.maxWidthStyled+")")),this.minWidth=t,this.minWidthStyled=t?t+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(e){e.setMinWidth()})}setMaxWidth(t){this.minWidth&&t<this.minWidth&&(t=this.minWidth,console.warn("the maxWidth ("+t+"px) for column '"+this.field+"' cannot be smaller that its minWidth ("+this.minWidthStyled+")")),this.maxWidth=t,this.maxWidthStyled=t?t+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(e){e.setMaxWidth()})}delete(){return new Promise((t,e)=>{this.isGroup&&this.columns.forEach(function(i){i.delete()}),this.dispatch("column-delete",this);var r=this.cells.length;for(let i=0;i<r;i++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.rerenderColumns(!0),this.dispatch("column-deleted",this),t()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered(),this.dispatch("column-rendered",this)}generateCell(t){var e=new ya(this,t);return this.cells.push(e),e}nextColumn(){var t=this.table.columnManager.findColumnIndex(this);return t>-1?this._nextVisibleColumn(t+1):!1}_nextVisibleColumn(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._nextVisibleColumn(t+1)}prevColumn(){var t=this.table.columnManager.findColumnIndex(this);return t>-1?this._prevVisibleColumn(t-1):!1}_prevVisibleColumn(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._prevVisibleColumn(t-1)}reinitializeWidth(t){this.widthFixed=!1,typeof this.definition.width<"u"&&!t&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(t),this.dispatch("column-width-fit-after",this)}fitToData(t){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(i=>{i.clearWidth()}));var e=this.element.offsetWidth;if((!this.width||!this.widthFixed)&&(this.cells.forEach(i=>{var s=i.getWidth();s>e&&(e=s)}),e)){var r=e+1;this.maxInitialWidth&&!t&&(r=Math.min(r,this.maxInitialWidth)),this.setWidthActual(r)}}}updateDefinition(t){var e;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(e=Object.assign({},this.getDefinition()),e=Object.assign(e,t),this.table.columnManager.addColumn(e,!1,this).then(r=>(e.field==this.field&&(this.field=!1),this.delete().then(()=>r.getComponent()))))}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}getComponent(){return this.component||(this.component=new Dh(this)),this.component}getPosition(){return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this)+1}getParentComponent(){return this.parent instanceof n?this.parent.getComponent():!1}},sl=class{constructor(t){return this._row=t,new Proxy(this,{get:function(e,r,i){return typeof e[r]<"u"?e[r]:e._row.table.componentFunctionBinder.handle("row",e._row,r)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return e?e.getComponent():!1}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(){return this._row.getPosition()}watchPosition(t){return this._row.watchPosition(t)}delete(){return this._row.delete()}scrollTo(t,e){return this._row.table.rowManager.scrollToRow(this._row,t,e)}move(t,e){this._row.moveToRow(t,e)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t&&t.getComponent()}getPrevRow(){var t=this._row.prevRow();return t&&t.getComponent()}},ts=class extends Un{constructor(t,e,r="row"){super(e.table),this.parent=e,this.data={},this.type=r,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.position=0,this.positionWatchers=[],this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t,e){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.initialized=!0,this.table.columnManager.renderer.renderRowCells(this,e),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this,e)}rendered(){this.cells.forEach(t=>{t.cellRendered()})}reinitializeHeight(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)}deinitialize(){this.initialized=!1}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var e=0,r=0;this.table.options.rowHeight?this.height=this.table.options.rowHeight:(r=this.calcMinHeight(),e=this.calcMaxHeight(),t?this.height=Math.max(e,r):this.height=this.manualHeight?this.height:Math.max(e,r)),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}calcMinHeight(){return this.table.options.resizableRows?this.element.clientHeight:0}calcMaxHeight(){var t=0;return this.cells.forEach(function(e){var r=e.getHeight();r>t&&(t=r)}),t}setCellHeight(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(t){t.clearHeight()})}normalizeHeight(t){t&&!this.table.options.rowHeight&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight,this.subscribedExternal("rowHeight")&&this.dispatchExternal("rowHeight",this.getComponent()))}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var e=this.element&&Ai.elVisible(this.element),r={},i;return new Promise((s,o)=>{typeof t=="string"&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(r=Object.assign(r,this.data),r=Object.assign(r,t)),i=this.chain("row-data-changing",[this,r,t],null,t);for(let a in i)this.data[a]=i[a];this.dispatch("row-data-save-after",this);for(let a in t)this.table.columnManager.getColumnsByFieldRoot(a).forEach(c=>{let h=this.getCell(c.getField());if(h){let d=c.getFieldValue(i);h.getValue()!==d&&(h.setValueProcessData(d),e&&h.cellRendered())}});e?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,e,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),s()})}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){var e=!1;return t=this.table.columnManager.findColumn(t),!this.initialized&&this.cells.length===0&&this.generateCells(),e=this.cells.find(function(r){return r.column===t}),e}getCellIndex(t){return this.cells.findIndex(function(e){return e===t})}findCell(t){return this.cells.find(e=>e.element===t)}getCells(){return!this.initialized&&this.cells.length===0&&this.generateCells(),this.cells}nextRow(){var t=this.table.rowManager.nextDisplayRow(this,!0);return t||!1}prevRow(){var t=this.table.rowManager.prevDisplayRow(this,!0);return t||!1}moveToRow(t,e){var r=this.table.rowManager.findRow(t);r?(this.table.rowManager.moveRowActual(this,r,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.detachModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detachModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let e=0;e<t;e++)this.cells[0].delete()}wipe(){if(this.detachModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}isDisplayed(){return this.table.rowManager.getDisplayRows().includes(this)}getPosition(){return this.isDisplayed()?this.position:!1}setPosition(t){t!=this.position&&(this.position=t,this.positionWatchers.forEach(e=>{e(this.position)}))}watchPosition(t){this.positionWatchers.push(t),t(this.position)}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new sl(this)),this.component}},Q2={avg:function(n,t,e){var r=0,i=typeof e.precision<"u"?e.precision:2;return n.length&&(r=n.reduce(function(s,o){return Number(s)+Number(o)}),r=r/n.length,r=i!==!1?r.toFixed(i):r),parseFloat(r).toString()},max:function(n,t,e){var r=null,i=typeof e.precision<"u"?e.precision:!1;return n.forEach(function(s){s=Number(s),(s>r||r===null)&&(r=s)}),r!==null?i!==!1?r.toFixed(i):r:""},min:function(n,t,e){var r=null,i=typeof e.precision<"u"?e.precision:!1;return n.forEach(function(s){s=Number(s),(s<r||r===null)&&(r=s)}),r!==null?i!==!1?r.toFixed(i):r:""},sum:function(n,t,e){var r=0,i=typeof e.precision<"u"?e.precision:!1;return n.length&&n.forEach(function(s){s=Number(s),r+=isNaN(s)?0:Number(s)}),i!==!1?r.toFixed(i):r},concat:function(n,t,e){var r=0;return n.length&&(r=n.reduce(function(i,s){return String(i)+String(s)})),r},count:function(n,t,e){var r=0;return n.length&&n.forEach(function(i){i&&r++}),r},unique:function(n,t,e){var r=n.filter((i,s)=>(n||i===0)&&n.indexOf(i)===s);return r.length}},xd=class n extends xr{static moduleName="columnCalcs";static calculations=Q2;constructor(t){super(t),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.blocked=!1,this.recalcAfterBlock=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-calcs-holder"),t}initialize(){this.genColumn=new ga({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refreshed",this.recalcActiveRowsRefresh.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this)),this.subscribe("redraw-blocked",this.blockRedraw.bind(this)),this.subscribe("redraw-restored",this.restoreRedraw.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this)),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}tableRedraw(t){this.recalc(this.table.rowManager.activeRows),t&&this.redraw()}blockRedraw(){this.blocked=!0,this.recalcAfterBlock=!1}restoreRedraw(){this.blocked=!1,this.recalcAfterBlock&&(this.recalcAfterBlock=!1,this.recalcActiveRowsRefresh())}userRecalc(){this.recalc(this.table.rowManager.activeRows)}blockCheck(){return this.blocked&&(this.recalcAfterBlock=!0),this.blocked}visibleRows(t,e){return this.topRow&&e.unshift(this.topRow),this.botRow&&e.push(this.botRow),e}rowsUpdated(t){this.table.options.groupBy?this.recalcRowGroup(t):this.recalcActiveRows()}recalcActiveRowsRefresh(){this.table.options.groupBy&&this.table.options.dataTreeStartExpanded&&this.table.options.dataTree?this.recalcAll():this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(t){(t.column.definition.topCalc||t.column.definition.bottomCalc)&&(this.table.options.groupBy?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.recalcActiveRows(),this.table.options.columnCalcs!="table"&&this.recalcRowGroup(t.row)):this.recalcActiveRows())}initializeColumnCheck(t){(t.definition.topCalc||t.definition.bottomCalc)&&this.initializeColumn(t)}initializeColumn(t){var e=t.definition,r={topCalcParams:e.topCalcParams||{},botCalcParams:e.bottomCalcParams||{}};if(e.topCalc){switch(typeof e.topCalc){case"string":n.calculations[e.topCalc]?r.topCalc=n.calculations[e.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.topCalc);break;case"function":r.topCalc=e.topCalc;break}r.topCalc&&(t.modules.columnCalcs=r,this.topCalcs.push(t),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(e.bottomCalc){switch(typeof e.bottomCalc){case"string":n.calculations[e.bottomCalc]?r.botCalc=n.calculations[e.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.bottomCalc);break;case"function":r.botCalc=e.bottomCalc;break}r.botCalc&&(t.modules.columnCalcs=r,this.botCalcs.push(t),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var t=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),t=!0),this.botInitialized&&(this.botInitialized=!1,this.footerRemove(this.botElement),t=!0),t&&this.table.rowManager.adjustTableSize()}reinitializeCalcs(){this.topCalcs.length&&this.initializeTopRow(),this.botCalcs.length&&this.initializeBottomRow()}initializeTopRow(){var t=document.createDocumentFragment();this.topInitialized||(t.appendChild(document.createElement("br")),t.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(t,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.footerPrepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(t){this.botInitialized&&this.botRow&&(this.botElement.scrollLeft=t)}recalc(t){var e,r;if(!this.blockCheck()&&(this.topInitialized||this.botInitialized)){if(e=this.rowsToData(t),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),r=this.generateRow("top",e),this.topRow=r;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(r.getElement()),r.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),r=this.generateRow("bottom",e),this.botRow=r;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(r.getElement()),r.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(t){this.recalcGroup(this.table.modules.groupRows.getRowGroup(t))}recalcAll(){if((this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalcActiveRows(),this.table.options.groupBy&&this.table.options.columnCalcs!=="table")){var t=this.table.modules.groupRows.getChildGroups();t.forEach(e=>{this.recalcGroup(e)})}}recalcGroup(t){var e,r;this.blockCheck()||t&&t.calcs&&(t.calcs.bottom&&(e=this.rowsToData(t.rows),r=this.generateRowData("bottom",e),t.calcs.bottom.updateData(r),t.calcs.bottom.reinitialize()),t.calcs.top&&(e=this.rowsToData(t.rows),r=this.generateRowData("top",e),t.calcs.top.updateData(r),t.calcs.top.reinitialize()))}generateTopRow(t){return this.generateRow("top",this.rowsToData(t))}generateBottomRow(t){return this.generateRow("bottom",this.rowsToData(t))}rowsToData(t){var e=[],r=this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs,i=this.table.modules.dataTree;return t.forEach(s=>{e.push(s.getData()),r&&s.modules.dataTree?.open&&this.rowsToData(i.getFilteredTreeChildren(s)).forEach(o=>{e.push(s)})}),e}generateRow(t,e){var r=this.generateRowData(t,e),i;return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),i=new ts(r,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),i.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+t),i.component=!1,i.getComponent=()=>(i.component||(i.component=new wd(i)),i.component),i.generateCells=()=>{var s=[];this.table.columnManager.columnsByIndex.forEach(o=>{this.genColumn.setField(o.getField()),this.genColumn.hozAlign=o.hozAlign,o.definition[t+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.getFormatter(o.definition[t+"CalcFormatter"]),params:o.definition[t+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=o.definition.cssClass;var a=new ya(this.genColumn,i);a.getElement(),a.column=o,a.setWidth(),o.cells.push(a),s.push(a),o.visible||a.hide()}),i.cells=s},i}generateRowData(t,e){var r={},i=t=="top"?this.topCalcs:this.botCalcs,s=t=="top"?"topCalc":"botCalc",o,a;return i.forEach(function(l){var c=[];l.modules.columnCalcs&&l.modules.columnCalcs[s]&&(e.forEach(function(h){c.push(l.getFieldValue(h))}),a=s+"Params",o=typeof l.modules.columnCalcs[a]=="function"?l.modules.columnCalcs[a](c,e):l.modules.columnCalcs[a],l.setFieldValue(r,l.modules.columnCalcs[s](c,e,o)))}),r}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var t={},e;return this.table.options.groupBy&&this.table.modExists("groupRows")?(e=this.table.modules.groupRows.getGroups(!0),e.forEach(r=>{t[r.getKey()]=this.getGroupResults(r)})):t={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},t}getGroupResults(t){var e=t._getSelf(),r=t.getSubGroups(),i={},s={};return r.forEach(o=>{i[o.getKey()]=this.getGroupResults(o)}),s={top:e.calcs.top?e.calcs.top.getData():{},bottom:e.calcs.bottom?e.calcs.bottom.getData():{},groups:i},s}adjustForScrollbar(t){this.botRow&&(this.table.rtl?this.botElement.style.paddingLeft=t+"px":this.botElement.style.paddingRight=t+"px")}},Ed=class extends xr{static moduleName="dataTree";constructor(t){super(t),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this)),this.registerComponentFunction("row","isTreeExpanded",this.isRowExpanded.bind(this))}initialize(){if(this.table.options.dataTree){var t=null,e=this.table.options;switch(this.field=e.dataTreeChildField,this.indent=e.dataTreeChildIndent,this.options("movableRows")&&console.warn("The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior"),e.dataTreeBranchElement?e.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof e.dataTreeBranchElement=="string"?(t=document.createElement("div"),t.innerHTML=e.dataTreeBranchElement,this.branchEl=t.firstChild):this.branchEl=e.dataTreeBranchElement:(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch-empty")),e.dataTreeCollapseElement?typeof e.dataTreeCollapseElement=="string"?(t=document.createElement("div"),t.innerHTML=e.dataTreeCollapseElement,this.collapseEl=t.firstChild):this.collapseEl=e.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),e.dataTreeExpandElement?typeof e.dataTreeExpandElement=="string"?(t=document.createElement("div"),t.innerHTML=e.dataTreeExpandElement,this.expandEl=t.firstChild):this.expandEl=e.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof e.dataTreeStartExpanded){case"boolean":this.startOpen=function(r,i){return e.dataTreeStartExpanded};break;case"function":this.startOpen=e.dataTreeStartExpanded;break;default:this.startOpen=function(r,i){return e.dataTreeStartExpanded[i]};break}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("cell-value-updated",this.cellValueChanged.bind(this)),this.subscribe("edit-cancelled",this.cellValueChanged.bind(this)),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.subscribe("table-built",this.initializeElementField.bind(this)),this.subscribe("table-redrawing",this.tableRedrawing.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}tableRedrawing(t){var e;t&&(e=this.table.rowManager.getRows(),e.forEach(r=>{this.reinitializeRowChildren(r)}))}initializeElementField(){var t=this.table.columnManager.getFirstVisibleColumn();this.elementField=this.table.options.dataTreeElementColumn||(t?t.field:!1)}getRowChildren(t){return this.getTreeChildren(t,!0)}columnMoving(){var t=[];return this.table.rowManager.rows.forEach(e=>{t=t.concat(this.getTreeChildren(e,!1,!0))}),t}rowDataChanged(t,e,r){this.redrawNeeded(r)&&(this.initializeRow(t),e&&(this.layoutRow(t),this.refreshData(!0)))}cellValueChanged(t){var e=t.column.getField();e===this.elementField&&this.layoutRow(t.row)}initializeRow(t){var e=t.getData()[this.field],r=Array.isArray(e),i=r||!r&&typeof e=="object"&&e!==null;!i&&t.modules.dataTree&&t.modules.dataTree.branchEl&&t.modules.dataTree.branchEl.parentNode.removeChild(t.modules.dataTree.branchEl),!i&&t.modules.dataTree&&t.modules.dataTree.controlEl&&t.modules.dataTree.controlEl.parentNode.removeChild(t.modules.dataTree.controlEl),t.modules.dataTree={index:t.modules.dataTree?t.modules.dataTree.index:0,open:i?t.modules.dataTree?t.modules.dataTree.open:this.startOpen(t.getComponent(),0):!1,controlEl:t.modules.dataTree&&i?t.modules.dataTree.controlEl:!1,branchEl:t.modules.dataTree&&i?t.modules.dataTree.branchEl:!1,parent:t.modules.dataTree?t.modules.dataTree.parent:!1,children:i}}reinitializeRowChildren(t){var e=this.getTreeChildren(t,!1,!0);e.forEach(function(r){r.reinitialize(!0)})}layoutRow(t){var e=this.elementField?t.getCell(this.elementField):t.getCells()[0],r=e.getElement(),i=t.modules.dataTree;i.branchEl&&(i.branchEl.parentNode&&i.branchEl.parentNode.removeChild(i.branchEl),i.branchEl=!1),i.controlEl&&(i.controlEl.parentNode&&i.controlEl.parentNode.removeChild(i.controlEl),i.controlEl=!1),this.generateControlElement(t,r),t.getElement().classList.add("tabulator-tree-level-"+i.index),i.index&&(this.branchEl?(i.branchEl=this.branchEl.cloneNode(!0),r.insertBefore(i.branchEl,r.firstChild),this.table.rtl?i.branchEl.style.marginRight=(i.branchEl.offsetWidth+i.branchEl.style.marginLeft)*(i.index-1)+i.index*this.indent+"px":i.branchEl.style.marginLeft=(i.branchEl.offsetWidth+i.branchEl.style.marginRight)*(i.index-1)+i.index*this.indent+"px"):this.table.rtl?r.style.paddingRight=parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-right"))+i.index*this.indent+"px":r.style.paddingLeft=parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-left"))+i.index*this.indent+"px")}generateControlElement(t,e){var r=t.modules.dataTree,i=r.controlEl;e=e||t.getCells()[0].getElement(),r.children!==!1&&(r.open?(r.controlEl=this.collapseEl.cloneNode(!0),r.controlEl.addEventListener("click",s=>{s.stopPropagation(),this.collapseRow(t)})):(r.controlEl=this.expandEl.cloneNode(!0),r.controlEl.addEventListener("click",s=>{s.stopPropagation(),this.expandRow(t)})),r.controlEl.addEventListener("mousedown",s=>{s.stopPropagation()}),i&&i.parentNode===e?i.parentNode.replaceChild(r.controlEl,i):e.insertBefore(r.controlEl,e.firstChild))}getRows(t){var e=[];return t.forEach((r,i)=>{var s,o;e.push(r),r instanceof ts&&(r.create(),s=r.modules.dataTree,!s.index&&s.children!==!1&&(o=this.getChildren(r,!1,!0),o.forEach(a=>{a.create(),e.push(a)})))}),e}getChildren(t,e,r){var i=t.modules.dataTree,s=[],o=[];return i.children!==!1&&(i.open||e)&&(Array.isArray(i.children)||(i.children=this.generateChildren(t)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?s=this.table.modules.filter.filter(i.children):s=i.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(s,r),s.forEach(a=>{o.push(a);var l=this.getChildren(a,!1,!0);l.forEach(c=>{o.push(c)})})),o}generateChildren(t){var e=[],r=t.getData()[this.field];return Array.isArray(r)||(r=[r]),r.forEach(i=>{var s=new ts(i||{},this.table.rowManager);s.create(),s.modules.dataTree.index=t.modules.dataTree.index+1,s.modules.dataTree.parent=t,s.modules.dataTree.children&&(s.modules.dataTree.open=this.startOpen(s.getComponent(),s.modules.dataTree.index)),e.push(s)}),e}expandRow(t,e){var r=t.modules.dataTree;r.children!==!1&&(r.open=!0,t.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",t.getComponent(),t.modules.dataTree.index))}collapseRow(t){var e=t.modules.dataTree;e.children!==!1&&(e.open=!1,t.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",t.getComponent(),t.modules.dataTree.index))}toggleRow(t){var e=t.modules.dataTree;e.children!==!1&&(e.open?this.collapseRow(t):this.expandRow(t))}isRowExpanded(t){return t.modules.dataTree.open}getTreeParent(t){return t.modules.dataTree.parent?t.modules.dataTree.parent.getComponent():!1}getTreeParentRoot(t){return t.modules.dataTree&&t.modules.dataTree.parent?this.getTreeParentRoot(t.modules.dataTree.parent):t}getFilteredTreeChildren(t){var e=t.modules.dataTree,r=[],i;return e.children&&(Array.isArray(e.children)||(e.children=this.generateChildren(t)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?i=this.table.modules.filter.filter(e.children):i=e.children,i.forEach(s=>{s instanceof ts&&r.push(s)})),r}rowDelete(t){var e=t.modules.dataTree.parent,r;e&&(r=this.findChildIndex(t,e),r!==!1&&e.data[this.field].splice(r,1),e.data[this.field].length||delete e.data[this.field],this.initializeRow(e),this.layoutRow(e)),this.refreshData(!0)}addTreeChildRow(t,e,r,i){var s=!1;typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(t.data[this.field])||(t.data[this.field]=[],t.modules.dataTree.open=this.startOpen(t.getComponent(),t.modules.dataTree.index)),typeof i<"u"&&(s=this.findChildIndex(i,t),s!==!1&&t.data[this.field].splice(r?s:s+1,0,e)),s===!1&&(r?t.data[this.field].unshift(e):t.data[this.field].push(e)),this.initializeRow(t),this.layoutRow(t),this.refreshData(!0)}findChildIndex(t,e){var r=!1;return typeof t=="object"?t instanceof ts?r=t.data:t instanceof sl?r=t._getSelf().data:typeof HTMLElement<"u"&&t instanceof HTMLElement?e.modules.dataTree&&(r=e.modules.dataTree.children.find(i=>i instanceof ts?i.element===t:!1),r&&(r=r.data)):t===null&&(r=!1):typeof t>"u"?r=!1:r=e.data[this.field].find(i=>i.data[this.table.options.index]==t),r&&(Array.isArray(e.data[this.field])&&(r=e.data[this.field].indexOf(r)),r==-1&&(r=!1)),r}getTreeChildren(t,e,r){var i=t.modules.dataTree,s=[];return i&&i.children&&(Array.isArray(i.children)||(i.children=this.generateChildren(t)),i.children.forEach(o=>{o instanceof ts&&(s.push(e?o.getComponent():o),r&&this.getTreeChildren(o,e,r).forEach(a=>{s.push(a)}))})),s}getChildField(){return this.field}redrawNeeded(t){return(this.field?typeof t[this.field]<"u":!1)||(this.elementField?typeof t[this.elementField]<"u":!1)}};function tE(n,t={},e){var r=t.delimiter?t.delimiter:",",i=[],s=[];n.forEach(o=>{var a=[];switch(o.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":o.columns.forEach((l,c)=>{l&&l.depth===1&&(s[c]=typeof l.value>"u"||l.value===null?"":'"'+String(l.value).split('"').join('""')+'"')});break;case"row":o.columns.forEach(l=>{if(l){switch(typeof l.value){case"object":l.value=l.value!==null?JSON.stringify(l.value):"";break;case"undefined":l.value="";break}a.push('"'+String(l.value).split('"').join('""')+'"')}}),i.push(a.join(r));break}}),s.length&&i.unshift(s.join(r)),i=i.join(`
`),t.bom&&(i="\uFEFF"+i),e(i,"text/csv")}function eE(n,t,e){var r=[];n.forEach(i=>{var s={};switch(i.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":i.columns.forEach(o=>{o&&(s[o.component.getTitleDownload()||o.component.getField()]=o.value)}),r.push(s);break}}),r=JSON.stringify(r,null,"	"),e(r,"application/json")}function rE(n,t={},e){var r=[],i=[],s={},o=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},a=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},l=t.jsPDF||{},c=t.title?t.title:"";l.orientation||(l.orientation=t.orientation||"landscape"),l.unit||(l.unit="pt"),n.forEach(p=>{switch(p.type){case"header":r.push(h(p));break;case"group":i.push(h(p,o));break;case"calc":i.push(h(p,a));break;case"row":i.push(h(p));break}});function h(p,g){var m=[];return p.columns.forEach(b=>{var y;if(b){switch(typeof b.value){case"object":b.value=b.value!==null?JSON.stringify(b.value):"";break;case"undefined":b.value="";break}y={content:b.value,colSpan:b.width,rowSpan:b.height},g&&(y.styles=g),m.push(y)}}),m}var d=new jspdf.jsPDF(l);t.autoTable&&(typeof t.autoTable=="function"?s=t.autoTable(d)||{}:s=t.autoTable),c&&(s.didDrawPage=function(p){d.text(c,40,30)}),s.head=r,s.body=i,d.autoTable(s),t.documentProcessing&&t.documentProcessing(d),e(d.output("arraybuffer"),"application/pdf")}function iE(n,t,e){var r=this,i=t.sheetName||"Sheet1",s=XLSX.utils.book_new(),o=new Un(this),a="compress"in t?t.compress:!0,l=t.writeOptions||{bookType:"xlsx",bookSST:!0,compression:a},c;l.type="binary",s.SheetNames=[],s.Sheets={};function h(){var g=[],m=[],b={},y={s:{c:0,r:0},e:{c:n[0]?n[0].columns.reduce((x,S)=>x+(S&&S.width?S.width:1),0):0,r:n.length}};return n.forEach((x,S)=>{var O=[];x.columns.forEach(function(D,U){D?(O.push(!(D.value instanceof Date)&&typeof D.value=="object"?JSON.stringify(D.value):D.value),(D.width>1||D.height>-1)&&(D.height>1||D.width>1)&&m.push({s:{r:S,c:U},e:{r:S+D.height-1,c:U+D.width-1}})):O.push("")}),g.push(O)}),XLSX.utils.sheet_add_aoa(b,g),b["!ref"]=XLSX.utils.encode_range(y),m.length&&(b["!merges"]=m),b}if(t.sheetOnly){e(h());return}if(t.sheets)for(var d in t.sheets)t.sheets[d]===!0?(s.SheetNames.push(d),s.Sheets[d]=h()):(s.SheetNames.push(d),o.commsSend(t.sheets[d],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:r.active,intercept:function(g){s.Sheets[d]=g}}));else s.SheetNames.push(i),s.Sheets[i]=h();t.documentProcessing&&(s=t.documentProcessing(s));function p(g){for(var m=new ArrayBuffer(g.length),b=new Uint8Array(m),y=0;y!=g.length;++y)b[y]=g.charCodeAt(y)&255;return m}c=XLSX.write(s,l),e(p(c),"application/octet-stream")}function nE(n,t,e){this.modExists("export",!0)&&e(this.modules.export.generateHTMLTable(n),"text/html")}function sE(n,t,e){let r=[];n.forEach(i=>{let s={};switch(i.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":i.columns.forEach(o=>{o&&(s[o.component.getTitleDownload()||o.component.getField()]=o.value)}),r.push(JSON.stringify(s));break}}),e(r.join(`
`),"application/x-ndjson")}var oE={csv:tE,json:eE,jsonLines:sE,pdf:rE,xlsx:iE,html:nE},Cd=class n extends xr{static moduleName="download";static downloaders=oE;constructor(t){super(t),this.registerTableOption("downloadEncoder",function(e,r){return new Blob([e],{type:r})}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.deprecatedOptionsCheck(),this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}deprecatedOptionsCheck(){}downloadToTab(t,e,r,i){this.download(t,e,r,i,!0)}download(t,e,r,i,s){var o=!1;function a(c,h){s?s===!0?this.triggerDownload(c,h,t,e,!0):s(c):this.triggerDownload(c,h,t,e)}if(typeof t=="function"?o=t:n.downloaders[t]?o=n.downloaders[t]:console.warn("Download Error - No such download type found: ",t),o){var l=this.generateExportList(i);o.call(this.table,l,r||{},a.bind(this))}}generateExportList(t){var e=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,t||this.table.options.downloadRowRange,"download"),r=this.table.options.groupHeaderDownload;return r&&!Array.isArray(r)&&(r=[r]),e.forEach(i=>{var s;i.type==="group"&&(s=i.columns[0],r&&r[i.indent]&&(s.value=r[i.indent](s.value,i.component._group.getRowCount(),i.component._group.getData(),i.component)))}),e}triggerDownload(t,e,r,i,s){var o=document.createElement("a"),a=this.table.options.downloadEncoder(t,e);a&&(s?window.open(window.URL.createObjectURL(a)):(i=i||"Tabulator."+(typeof r=="function"?"txt":r),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,i):(o.setAttribute("href",window.URL.createObjectURL(a)),o.setAttribute("download",i),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o))),this.dispatchExternal("downloadComplete"))}commsReceived(t,e,r){switch(e){case"intercept":this.download(r.type,"",r.options,r.active,r.intercept);break}}};function Hh(n,t){var e=t.mask,r=typeof t.maskLetterChar<"u"?t.maskLetterChar:"A",i=typeof t.maskNumberChar<"u"?t.maskNumberChar:"9",s=typeof t.maskWildcardChar<"u"?t.maskWildcardChar:"*";function o(a){var l=e[a];typeof l<"u"&&l!==s&&l!==r&&l!==i&&(n.value=n.value+""+l,o(a+1))}n.addEventListener("keydown",a=>{var l=n.value.length,c=a.key;if(a.keyCode>46&&!a.ctrlKey&&!a.metaKey){if(l>=e.length)return a.preventDefault(),a.stopPropagation(),!1;switch(e[l]){case r:if(c.toUpperCase()==c.toLowerCase())return a.preventDefault(),a.stopPropagation(),!1;break;case i:if(isNaN(c))return a.preventDefault(),a.stopPropagation(),!1;break;case s:break;default:if(c!==e[l])return a.preventDefault(),a.stopPropagation(),!1}}}),n.addEventListener("keyup",a=>{a.keyCode>46&&t.maskAutoFill&&o(n.value.length)}),n.placeholder||(n.placeholder=e),t.maskAutoFill&&o(n.value.length)}function aE(n,t,e,r,i){var s=n.getValue(),o=document.createElement("input");if(o.setAttribute("type",i.search?"search":"text"),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",i.elementAttributes&&typeof i.elementAttributes=="object")for(let l in i.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),o.setAttribute(l,o.getAttribute(l)+i.elementAttributes["+"+l])):o.setAttribute(l,i.elementAttributes[l]);o.value=typeof s<"u"?s:"",t(function(){n.getType()==="cell"&&(o.focus({preventScroll:!0}),o.style.height="100%",i.selectContents&&o.select())});function a(l){(s===null||typeof s>"u")&&o.value!==""||o.value!==s?e(o.value)&&(s=o.value):r()}return o.addEventListener("change",a),o.addEventListener("blur",a),o.addEventListener("keydown",function(l){switch(l.keyCode){case 13:a();break;case 27:r();break;case 35:case 36:l.stopPropagation();break}}),i.mask&&Hh(o,i),o}function lE(n,t,e,r,i){var s=n.getValue(),o=i.verticalNavigation||"hybrid",a=String(s!==null&&typeof s<"u"?s:""),l=document.createElement("textarea"),c=0;if(l.style.display="block",l.style.padding="2px",l.style.height="100%",l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.resize="none",i.elementAttributes&&typeof i.elementAttributes=="object")for(let d in i.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),l.setAttribute(d,l.getAttribute(d)+i.elementAttributes["+"+d])):l.setAttribute(d,i.elementAttributes[d]);l.value=a,t(function(){n.getType()==="cell"&&(l.focus({preventScroll:!0}),l.style.height="100%",l.scrollHeight,l.style.height=l.scrollHeight+"px",n.getRow().normalizeHeight(),i.selectContents&&l.select())});function h(d){(s===null||typeof s>"u")&&l.value!==""||l.value!==s?(e(l.value)&&(s=l.value),setTimeout(function(){n.getRow().normalizeHeight()},300)):r()}return l.addEventListener("change",h),l.addEventListener("blur",h),l.addEventListener("keyup",function(){l.style.height="";var d=l.scrollHeight;l.style.height=d+"px",d!=c&&(c=d,n.getRow().normalizeHeight())}),l.addEventListener("keydown",function(d){switch(d.keyCode){case 13:d.shiftKey&&i.shiftEnterSubmit&&h();break;case 27:r();break;case 38:(o=="editor"||o=="hybrid"&&l.selectionStart)&&(d.stopImmediatePropagation(),d.stopPropagation());break;case 40:(o=="editor"||o=="hybrid"&&l.selectionStart!==l.value.length)&&(d.stopImmediatePropagation(),d.stopPropagation());break;case 35:case 36:d.stopPropagation();break}}),i.mask&&Hh(l,i),l}function uE(n,t,e,r,i){var s=n.getValue(),o=i.verticalNavigation||"editor",a=document.createElement("input");if(a.setAttribute("type","number"),typeof i.max<"u"&&a.setAttribute("max",i.max),typeof i.min<"u"&&a.setAttribute("min",i.min),typeof i.step<"u"&&a.setAttribute("step",i.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",i.elementAttributes&&typeof i.elementAttributes=="object")for(let h in i.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),a.setAttribute(h,a.getAttribute(h)+i.elementAttributes["+"+h])):a.setAttribute(h,i.elementAttributes[h]);a.value=s;var l=function(h){c()};t(function(){n.getType()==="cell"&&(a.removeEventListener("blur",l),a.focus({preventScroll:!0}),a.style.height="100%",a.addEventListener("blur",l),i.selectContents&&a.select())});function c(){var h=a.value;!isNaN(h)&&h!==""&&(h=Number(h)),h!==s?e(h)&&(s=h):r()}return a.addEventListener("keydown",function(h){switch(h.keyCode){case 13:c();break;case 27:r();break;case 38:case 40:o=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break;case 35:case 36:h.stopPropagation();break}}),i.mask&&Hh(a,i),a}function hE(n,t,e,r,i){var s=n.getValue(),o=document.createElement("input");if(o.setAttribute("type","range"),typeof i.max<"u"&&o.setAttribute("max",i.max),typeof i.min<"u"&&o.setAttribute("min",i.min),typeof i.step<"u"&&o.setAttribute("step",i.step),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",i.elementAttributes&&typeof i.elementAttributes=="object")for(let l in i.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),o.setAttribute(l,o.getAttribute(l)+i.elementAttributes["+"+l])):o.setAttribute(l,i.elementAttributes[l]);o.value=s,t(function(){n.getType()==="cell"&&(o.focus({preventScroll:!0}),o.style.height="100%")});function a(){var l=o.value;!isNaN(l)&&l!==""&&(l=Number(l)),l!=s?e(l)&&(s=l):r()}return o.addEventListener("blur",function(l){a()}),o.addEventListener("keydown",function(l){switch(l.keyCode){case 13:a();break;case 27:r();break}}),o}function cE(n,t,e,r,i){var s=i.format,o=i.verticalNavigation||"editor",a=s?window.DateTime||luxon.DateTime:null,l=n.getValue(),c=document.createElement("input");function h(p){var g;return a.isDateTime(p)?g=p:s==="iso"?g=a.fromISO(String(p)):g=a.fromFormat(String(p),s),g.toFormat("yyyy-MM-dd")}if(c.type="date",c.style.padding="4px",c.style.width="100%",c.style.boxSizing="border-box",i.max&&c.setAttribute("max",s?h(i.max):i.max),i.min&&c.setAttribute("min",s?h(i.min):i.min),i.elementAttributes&&typeof i.elementAttributes=="object")for(let p in i.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),c.setAttribute(p,c.getAttribute(p)+i.elementAttributes["+"+p])):c.setAttribute(p,i.elementAttributes[p]);l=typeof l<"u"?l:"",s&&(a?l=h(l):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),c.value=l,t(function(){n.getType()==="cell"&&(c.focus({preventScroll:!0}),c.style.height="100%",i.selectContents&&c.select())});function d(){var p=c.value,g;if((l===null||typeof l>"u")&&p!==""||p!==l){if(p&&s)switch(g=a.fromFormat(String(p),"yyyy-MM-dd"),s){case!0:p=g;break;case"iso":p=g.toISO();break;default:p=g.toFormat(s)}e(p)&&(l=c.value)}else r()}return c.addEventListener("blur",function(p){(p.relatedTarget||p.rangeParent||p.explicitOriginalTarget!==c)&&d()}),c.addEventListener("keydown",function(p){switch(p.keyCode){case 13:d();break;case 27:r();break;case 35:case 36:p.stopPropagation();break;case 38:case 40:o=="editor"&&(p.stopImmediatePropagation(),p.stopPropagation());break}}),c}function fE(n,t,e,r,i){var s=i.format,o=i.verticalNavigation||"editor",a=s?window.DateTime||luxon.DateTime:null,l,c=n.getValue(),h=document.createElement("input");if(h.type="time",h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",i.elementAttributes&&typeof i.elementAttributes=="object")for(let p in i.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),h.setAttribute(p,h.getAttribute(p)+i.elementAttributes["+"+p])):h.setAttribute(p,i.elementAttributes[p]);c=typeof c<"u"?c:"",s&&(a?(a.isDateTime(c)?l=c:s==="iso"?l=a.fromISO(String(c)):l=a.fromFormat(String(c),s),c=l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),h.value=c,t(function(){n.getType()=="cell"&&(h.focus({preventScroll:!0}),h.style.height="100%",i.selectContents&&h.select())});function d(){var p=h.value,g;if((c===null||typeof c>"u")&&p!==""||p!==c){if(p&&s)switch(g=a.fromFormat(String(p),"hh:mm"),s){case!0:p=g;break;case"iso":p=g.toISO();break;default:p=g.toFormat(s)}e(p)&&(c=h.value)}else r()}return h.addEventListener("blur",function(p){(p.relatedTarget||p.rangeParent||p.explicitOriginalTarget!==h)&&d()}),h.addEventListener("keydown",function(p){switch(p.keyCode){case 13:d();break;case 27:r();break;case 35:case 36:p.stopPropagation();break;case 38:case 40:o=="editor"&&(p.stopImmediatePropagation(),p.stopPropagation());break}}),h}function dE(n,t,e,r,i){var s=i.format,o=i.verticalNavigation||"editor",a=s?window.DateTime||luxon.DateTime:null,l,c=n.getValue(),h=document.createElement("input");if(h.type="datetime-local",h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",i.elementAttributes&&typeof i.elementAttributes=="object")for(let p in i.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),h.setAttribute(p,h.getAttribute(p)+i.elementAttributes["+"+p])):h.setAttribute(p,i.elementAttributes[p]);c=typeof c<"u"?c:"",s&&(a?(a.isDateTime(c)?l=c:s==="iso"?l=a.fromISO(String(c)):l=a.fromFormat(String(c),s),c=l.toFormat("yyyy-MM-dd")+"T"+l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),h.value=c,t(function(){n.getType()==="cell"&&(h.focus({preventScroll:!0}),h.style.height="100%",i.selectContents&&h.select())});function d(){var p=h.value,g;if((c===null||typeof c>"u")&&p!==""||p!==c){if(p&&s)switch(g=a.fromISO(String(p)),s){case!0:p=g;break;case"iso":p=g.toISO();break;default:p=g.toFormat(s)}e(p)&&(c=h.value)}else r()}return h.addEventListener("blur",function(p){(p.relatedTarget||p.rangeParent||p.explicitOriginalTarget!==h)&&d()}),h.addEventListener("keydown",function(p){switch(p.keyCode){case 13:d();break;case 27:r();break;case 35:case 36:p.stopPropagation();break;case 38:case 40:o=="editor"&&(p.stopImmediatePropagation(),p.stopPropagation());break}}),h}var pE=class{constructor(t,e,r,i,s,o){this.edit=t,this.table=t.table,this.cell=e,this.params=this._initializeParams(o),this.data=[],this.displayItems=[],this.currentItems=[],this.focusedItem=null,this.input=this._createInputElement(),this.listEl=this._createListElement(),this.initialValues=null,this.isFilter=e.getType()==="header",this.filterTimeout=null,this.filtered=!1,this.typing=!1,this.values=[],this.popup=null,this.listIteration=0,this.lastAction="",this.filterTerm="",this.blurable=!0,this.actions={success:i,cancel:s},this._deprecatedOptionsCheck(),this._initializeValue(),r(this._onRendered.bind(this))}_deprecatedOptionsCheck(){}_initializeValue(){var t=this.cell.getValue();typeof t>"u"&&typeof this.params.defaultValue<"u"&&(t=this.params.defaultValue),this.initialValues=this.params.multiselect?t:[t],this.isFilter&&(this.input.value=this.initialValues?this.initialValues.join(","):"",this.headerFilterInitialListGen())}_onRendered(){var t=this.cell.getElement();function e(r){r.stopPropagation()}this.isFilter||(this.input.style.height="100%",this.input.focus({preventScroll:!0})),t.addEventListener("click",e),setTimeout(()=>{t.removeEventListener("click",e)},1e3),this.input.addEventListener("mousedown",this._preventPopupBlur.bind(this))}_createListElement(){var t=document.createElement("div");return t.classList.add("tabulator-edit-list"),t.addEventListener("mousedown",this._preventBlur.bind(this)),t.addEventListener("keydown",this._inputKeyDown.bind(this)),t}_setListWidth(){var t=this.isFilter?this.input:this.cell.getElement();this.listEl.style.minWidth=t.offsetWidth+"px",this.params.maxWidth&&(this.params.maxWidth===!0?this.listEl.style.maxWidth=t.offsetWidth+"px":typeof this.params.maxWidth=="number"?this.listEl.style.maxWidth=this.params.maxWidth+"px":this.listEl.style.maxWidth=this.params.maxWidth)}_createInputElement(){var t=this.params.elementAttributes,e=document.createElement("input");if(e.setAttribute("type",this.params.clearable?"search":"text"),e.style.padding="4px",e.style.width="100%",e.style.boxSizing="border-box",this.params.autocomplete||(e.style.cursor="default",e.style.caretColor="transparent"),t&&typeof t=="object")for(let r in t)r.charAt(0)=="+"?(r=r.slice(1),e.setAttribute(r,e.getAttribute(r)+t["+"+r])):e.setAttribute(r,t[r]);return this.params.mask&&Hh(e,this.params),this._bindInputEvents(e),e}_initializeParams(t){var e=["values","valuesURL","valuesLookup"],r;return t=Object.assign({},t),t.verticalNavigation=t.verticalNavigation||"editor",t.placeholderLoading=typeof t.placeholderLoading>"u"?"Searching ...":t.placeholderLoading,t.placeholderEmpty=typeof t.placeholderEmpty>"u"?"No Results Found":t.placeholderEmpty,t.filterDelay=typeof t.filterDelay>"u"?300:t.filterDelay,t.emptyValue=Object.keys(t).includes("emptyValue")?t.emptyValue:"",r=Object.keys(t).filter(i=>e.includes(i)).length,r?r>1&&console.warn("list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor"):console.warn("list editor config error - either the values, valuesURL, or valuesLookup option must be set"),t.autocomplete?t.multiselect&&(t.multiselect=!1,console.warn("list editor config error - multiselect option is not available when autocomplete is enabled")):(t.freetext&&(t.freetext=!1,console.warn("list editor config error - freetext option is only available when autocomplete is enabled")),t.filterFunc&&(t.filterFunc=!1,console.warn("list editor config error - filterFunc option is only available when autocomplete is enabled")),t.filterRemote&&(t.filterRemote=!1,console.warn("list editor config error - filterRemote option is only available when autocomplete is enabled")),t.mask&&(t.mask=!1,console.warn("list editor config error - mask option is only available when autocomplete is enabled")),t.allowEmpty&&(t.allowEmpty=!1,console.warn("list editor config error - allowEmpty option is only available when autocomplete is enabled")),t.listOnEmpty&&(t.listOnEmpty=!1,console.warn("list editor config error - listOnEmpty option is only available when autocomplete is enabled"))),t.filterRemote&&!(typeof t.valuesLookup=="function"||t.valuesURL)&&(t.filterRemote=!1,console.warn("list editor config error - filterRemote option should only be used when values list is populated from a remote source")),t}_bindInputEvents(t){t.addEventListener("focus",this._inputFocus.bind(this)),t.addEventListener("click",this._inputClick.bind(this)),t.addEventListener("blur",this._inputBlur.bind(this)),t.addEventListener("keydown",this._inputKeyDown.bind(this)),t.addEventListener("search",this._inputSearch.bind(this)),this.params.autocomplete&&t.addEventListener("keyup",this._inputKeyUp.bind(this))}_inputFocus(t){this.rebuildOptionsList()}_filter(){this.params.filterRemote?(clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(()=>{this.rebuildOptionsList()},this.params.filterDelay)):this._filterList()}_inputClick(t){t.stopPropagation()}_inputBlur(t){this.blurable&&(this.popup?this.popup.hide():this._resolveValue(!0))}_inputSearch(){this._clearChoices()}_inputKeyDown(t){switch(t.keyCode){case 38:this._keyUp(t);break;case 40:this._keyDown(t);break;case 37:case 39:this._keySide(t);break;case 13:this._keyEnter();break;case 27:this._keyEsc();break;case 36:case 35:this._keyHomeEnd(t);break;case 9:this._keyTab(t);break;default:this._keySelectLetter(t)}}_inputKeyUp(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:this._keyAutoCompLetter(t)}}_preventPopupBlur(){this.popup&&this.popup.blockHide(),setTimeout(()=>{this.popup&&this.popup.restoreHide()},10)}_preventBlur(){this.blurable=!1,setTimeout(()=>{this.blurable=!0},10)}_keyTab(t){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem,!0)}_keyUp(t){var e=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&e)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e>0&&this._focusItem(this.displayItems[e-1]))}_keyDown(t){var e=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&e<this.displayItems.length-1)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e<this.displayItems.length-1&&(e==-1?this._focusItem(this.displayItems[0]):this._focusItem(this.displayItems[e+1])))}_keySide(t){this.params.autocomplete||(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())}_keyEnter(t){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem)}_keyEsc(t){this._cancel()}_keyHomeEnd(t){this.params.autocomplete&&t.stopImmediatePropagation()}_keySelectLetter(t){this.params.autocomplete||(t.preventDefault(),t.keyCode>=38&&t.keyCode<=90&&this._scrollToValue(t.keyCode))}_keyAutoCompLetter(t){this._filter(),this.lastAction="typing",this.typing=!0}_scrollToValue(t){clearTimeout(this.filterTimeout);var e=String.fromCharCode(t).toLowerCase();this.filterTerm+=e.toLowerCase();var r=this.displayItems.find(i=>typeof i.label<"u"&&i.label.toLowerCase().startsWith(this.filterTerm));r&&this._focusItem(r),this.filterTimeout=setTimeout(()=>{this.filterTerm=""},800)}_focusItem(t){this.lastAction="focus",this.focusedItem&&this.focusedItem.element&&this.focusedItem.element.classList.remove("focused"),this.focusedItem=t,t&&t.element&&(t.element.classList.add("focused"),t.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}headerFilterInitialListGen(){this._generateOptions(!0)}rebuildOptionsList(){this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(t=>{Number.isInteger(t)||console.error("List generation error",t)})}_filterList(){this._buildList(this._filterOptions()),this._showList()}_generateOptions(t){var e=[],r=++this.listIteration;return this.filtered=!1,this.params.values?e=this.params.values:this.params.valuesURL?e=this._ajaxRequest(this.params.valuesURL,this.input.value):typeof this.params.valuesLookup=="function"?e=this.params.valuesLookup(this.cell,this.input.value):this.params.valuesLookup&&(e=this._uniqueColumnValues(this.params.valuesLookupField)),e instanceof Promise?(t||this._addPlaceholder(this.params.placeholderLoading),e.then().then(i=>this.listIteration===r?this._parseList(i):Promise.reject(r))):Promise.resolve(this._parseList(e))}_addPlaceholder(t){var e=document.createElement("div");typeof t=="function"&&(t=t(this.cell.getComponent(),this.listEl)),t&&(this._clearList(),t instanceof HTMLElement?e=t:(e.classList.add("tabulator-edit-list-placeholder"),e.innerHTML=t),this.listEl.appendChild(e),this._showList())}_ajaxRequest(t,e){var r=this.params.filterRemote?{term:e}:{};return t=wv(t,{},r),fetch(t).then(i=>i.ok?i.json().catch(s=>(console.warn("List Ajax Load Error - Invalid JSON returned",s),Promise.reject(s))):(console.error("List Ajax Load Error - Connection Error: "+i.status,i.statusText),Promise.reject(i))).catch(i=>(console.error("List Ajax Load Error - Connection Error: ",i),Promise.reject(i)))}_uniqueColumnValues(t){var e={},r=this.table.getData(this.params.valuesLookup),i;return t?i=this.table.columnManager.getColumnByField(t):i=this.cell.getColumn()._getSelf(),i?r.forEach(s=>{var o=i.getFieldValue(s);o!==null&&typeof o<"u"&&o!==""&&(e[o]=!0)}):(console.warn("unable to find matching column to create select lookup list:",t),e=[]),Object.keys(e)}_parseList(t){var e=[];return Array.isArray(t)||(t=Object.entries(t).map(([r,i])=>({label:i,value:r}))),t.forEach(r=>{typeof r!="object"&&(r={label:r,value:r}),this._parseListItem(r,e,0)}),!this.currentItems.length&&this.params.freetext&&(this.input.value=this.initialValues,this.typing=!0,this.lastAction="typing"),this.data=e,e}_parseListItem(t,e,r){var i={};t.options?i=this._parseListGroup(t,r+1):(i={label:t.label,value:t.value,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1,selected:!1,visible:!0,level:r,original:t},this.initialValues&&this.initialValues.indexOf(t.value)>-1&&this._chooseItem(i,!0)),e.push(i)}_parseListGroup(t,e){var r={label:t.label,group:!0,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1,visible:!0,level:e,options:[],original:t};return t.options.forEach(i=>{this._parseListItem(i,r.options,e)}),r}_sortOptions(t){var e;return this.params.sort&&(e=typeof this.params.sort=="function"?this.params.sort:this._defaultSortFunction.bind(this),this._sortGroup(e,t)),t}_sortGroup(t,e){e.sort((r,i)=>t(r.label,i.label,r.value,i.value,r.original,i.original)),e.forEach(r=>{r.group&&this._sortGroup(t,r.options)})}_defaultSortFunction(t,e){var r,i,s,o,a=0,l,c=/(\d+)|(\D+)/g,h=/\d/,d=0;if(this.params.sort==="desc"&&([t,e]=[e,t]),!t&&t!==0)d=!e&&e!==0?0:-1;else if(!e&&e!==0)d=1;else{if(isFinite(t)&&isFinite(e))return t-e;if(r=String(t).toLowerCase(),i=String(e).toLowerCase(),r===i)return 0;if(!(h.test(r)&&h.test(i)))return r>i?1:-1;for(r=r.match(c),i=i.match(c),l=r.length>i.length?i.length:r.length;a<l;)if(s=r[a],o=i[a++],s!==o)return isFinite(s)&&isFinite(o)?(s.charAt(0)==="0"&&(s="."+s),o.charAt(0)==="0"&&(o="."+o),s-o):s>o?1:-1;return r.length>i.length}return d}_filterOptions(){var t=this.params.filterFunc||this._defaultFilterFunc,e=this.input.value;return e?(this.filtered=!0,this.data.forEach(r=>{this._filterItem(t,e,r)})):this.filtered=!1,this.data}_filterItem(t,e,r){var i=!1;return r.group?(r.options.forEach(s=>{this._filterItem(t,e,s)&&(i=!0)}),r.visible=i):r.visible=t(e,r.label,r.value,r.original),r.visible}_defaultFilterFunc(t,e,r,i){return t=String(t).toLowerCase(),e!==null&&typeof e<"u"&&(String(e).toLowerCase().indexOf(t)>-1||String(r).toLowerCase().indexOf(t)>-1)}_clearList(){for(;this.listEl.firstChild;)this.listEl.removeChild(this.listEl.firstChild);this.displayItems=[]}_buildList(t){this._clearList(),t.forEach(e=>{this._buildItem(e)}),this.displayItems.length||this._addPlaceholder(this.params.placeholderEmpty)}_buildItem(t){var e=t.element,r;if(!this.filtered||t.visible){if(!e){if(e=document.createElement("div"),e.tabIndex=0,r=this.params.itemFormatter?this.params.itemFormatter(t.label,t.value,t.original,e):t.label,r instanceof HTMLElement?e.appendChild(r):e.innerHTML=r,t.group?e.classList.add("tabulator-edit-list-group"):e.classList.add("tabulator-edit-list-item"),e.classList.add("tabulator-edit-list-group-level-"+t.level),t.elementAttributes&&typeof t.elementAttributes=="object")for(let i in t.elementAttributes)i.charAt(0)=="+"?(i=i.slice(1),e.setAttribute(i,this.input.getAttribute(i)+t.elementAttributes["+"+i])):e.setAttribute(i,t.elementAttributes[i]);t.group?e.addEventListener("click",this._groupClick.bind(this,t)):e.addEventListener("click",this._itemClick.bind(this,t)),e.addEventListener("mousedown",this._preventBlur.bind(this)),t.element=e}this._styleItem(t),this.listEl.appendChild(e),t.group?t.options.forEach(i=>{this._buildItem(i)}):this.displayItems.push(t)}}_showList(){var t=this.popup&&this.popup.isVisible();if(this.input.parentNode){if(this.params.autocomplete&&this.input.value===""&&!this.params.listOnEmpty){this.popup&&this.popup.hide(!0);return}this._setListWidth(),this.popup||(this.popup=this.edit.popup(this.listEl)),this.popup.show(this.cell.getElement(),"bottom"),t||setTimeout(()=>{this.popup.hideOnBlur(this._resolveValue.bind(this,!0))},10)}}_styleItem(t){t&&t.element&&(t.selected?t.element.classList.add("active"):t.element.classList.remove("active"))}_itemClick(t,e){e.stopPropagation(),this._chooseItem(t)}_groupClick(t,e){e.stopPropagation()}_cancel(){this.popup.hide(!0),this.actions.cancel()}_clearChoices(){this.typing=!0,this.currentItems.forEach(t=>{t.selected=!1,this._styleItem(t)}),this.currentItems=[],this.focusedItem=null}_chooseItem(t,e){var r;this.typing=!1,this.params.multiselect?(r=this.currentItems.indexOf(t),r>-1?(this.currentItems.splice(r,1),t.selected=!1):(this.currentItems.push(t),t.selected=!0),this.input.value=this.currentItems.map(i=>i.label).join(","),this._styleItem(t)):(this.currentItems=[t],t.selected=!0,this.input.value=t.label,this._styleItem(t),e||this._resolveValue()),this._focusItem(t)}_resolveValue(t){var e,r;if(this.popup&&this.popup.hide(!0),this.params.multiselect)e=this.currentItems.map(i=>i.value);else if(t&&this.params.autocomplete&&this.typing)if(this.params.freetext||this.params.allowEmpty&&this.input.value==="")e=this.input.value;else{this.actions.cancel();return}else this.currentItems[0]?e=this.currentItems[0].value:(r=Array.isArray(this.initialValues)?this.initialValues[0]:this.initialValues,r===null||typeof r>"u"||r===""?e=r:e=this.params.emptyValue);e===""&&(e=this.params.emptyValue),this.actions.success(e),this.isFilter&&(this.initialValues=e&&!Array.isArray(e)?[e]:e,this.currentItems=[])}};function mE(n,t,e,r,i){var s=new pE(this,n,t,e,r,i);return s.input}function gE(n,t,e,r,i){var s=this,o=n.getElement(),a=n.getValue(),l=o.getElementsByTagName("svg").length||5,c=o.getElementsByTagName("svg")[0]?o.getElementsByTagName("svg")[0].getAttribute("width"):14,h=[],d=document.createElement("div"),p=document.createElementNS("http://www.w3.org/2000/svg","svg");function g(x){h.forEach(function(S,O){O<x?(s.table.browser=="ie"?S.setAttribute("class","tabulator-star-active"):S.classList.replace("tabulator-star-inactive","tabulator-star-active"),S.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(s.table.browser=="ie"?S.setAttribute("class","tabulator-star-inactive"):S.classList.replace("tabulator-star-active","tabulator-star-inactive"),S.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function m(x){var S=document.createElement("span"),O=p.cloneNode(!0);h.push(O),S.addEventListener("mouseenter",function(D){D.stopPropagation(),D.stopImmediatePropagation(),g(x)}),S.addEventListener("mousemove",function(D){D.stopPropagation(),D.stopImmediatePropagation()}),S.addEventListener("click",function(D){D.stopPropagation(),D.stopImmediatePropagation(),e(x),o.blur()}),S.appendChild(O),d.appendChild(S)}function b(x){a=x,g(x)}if(o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",d.style.verticalAlign="middle",d.style.display="inline-block",d.style.padding="4px",p.setAttribute("width",c),p.setAttribute("height",c),p.setAttribute("viewBox","0 0 512 512"),p.setAttribute("xml:space","preserve"),p.style.padding="0 1px",i.elementAttributes&&typeof i.elementAttributes=="object")for(let x in i.elementAttributes)x.charAt(0)=="+"?(x=x.slice(1),d.setAttribute(x,d.getAttribute(x)+i.elementAttributes["+"+x])):d.setAttribute(x,i.elementAttributes[x]);for(var y=1;y<=l;y++)m(y);return a=Math.min(parseInt(a),l),g(a),d.addEventListener("mousemove",function(x){g(0)}),d.addEventListener("click",function(x){e(0)}),o.addEventListener("blur",function(x){r()}),o.addEventListener("keydown",function(x){switch(x.keyCode){case 39:b(a+1);break;case 37:b(a-1);break;case 13:e(a);break;case 27:r();break}}),d}function yE(n,t,e,r,i){var s=n.getElement(),o=typeof i.max>"u"?s.getElementsByTagName("div")[0]&&s.getElementsByTagName("div")[0].getAttribute("max")||100:i.max,a=typeof i.min>"u"?s.getElementsByTagName("div")[0]&&s.getElementsByTagName("div")[0].getAttribute("min")||0:i.min,l=(o-a)/100,c=n.getValue()||0,h=document.createElement("div"),d=document.createElement("div"),p,g;function m(){var b=window.getComputedStyle(s,null),y=l*Math.round(d.offsetWidth/((s.clientWidth-parseInt(b.getPropertyValue("padding-left"))-parseInt(b.getPropertyValue("padding-right")))/100))+a;e(y),s.setAttribute("aria-valuenow",y),s.setAttribute("aria-label",c)}if(h.style.position="absolute",h.style.right="0",h.style.top="0",h.style.bottom="0",h.style.width="5px",h.classList.add("tabulator-progress-handle"),d.style.display="inline-block",d.style.position="relative",d.style.height="100%",d.style.backgroundColor="#488CE9",d.style.maxWidth="100%",d.style.minWidth="0%",i.elementAttributes&&typeof i.elementAttributes=="object")for(let b in i.elementAttributes)b.charAt(0)=="+"?(b=b.slice(1),d.setAttribute(b,d.getAttribute(b)+i.elementAttributes["+"+b])):d.setAttribute(b,i.elementAttributes[b]);return s.style.padding="4px 4px",c=Math.min(parseFloat(c),o),c=Math.max(parseFloat(c),a),c=Math.round((c-a)/l),d.style.width=c+"%",s.setAttribute("aria-valuemin",a),s.setAttribute("aria-valuemax",o),d.appendChild(h),h.addEventListener("mousedown",function(b){p=b.screenX,g=d.offsetWidth}),h.addEventListener("mouseover",function(){h.style.cursor="ew-resize"}),s.addEventListener("mousemove",function(b){p&&(d.style.width=g+b.screenX-p+"px")}),s.addEventListener("mouseup",function(b){p&&(b.stopPropagation(),b.stopImmediatePropagation(),p=!1,g=!1,m())}),s.addEventListener("keydown",function(b){switch(b.keyCode){case 39:b.preventDefault(),d.style.width=d.clientWidth+s.clientWidth/100+"px";break;case 37:b.preventDefault(),d.style.width=d.clientWidth-s.clientWidth/100+"px";break;case 9:case 13:m();break;case 27:r();break}}),s.addEventListener("blur",function(){r()}),d}function vE(n,t,e,r,i){var s=n.getValue(),o=document.createElement("input"),a=i.tristate,l=typeof i.indeterminateValue>"u"?null:i.indeterminateValue,c=!1,h=Object.keys(i).includes("trueValue"),d=Object.keys(i).includes("falseValue");if(o.setAttribute("type","checkbox"),o.style.marginTop="5px",o.style.boxSizing="border-box",i.elementAttributes&&typeof i.elementAttributes=="object")for(let g in i.elementAttributes)g.charAt(0)=="+"?(g=g.slice(1),o.setAttribute(g,o.getAttribute(g)+i.elementAttributes["+"+g])):o.setAttribute(g,i.elementAttributes[g]);o.value=s,a&&(typeof s>"u"||s===l||s==="")&&(c=!0,o.indeterminate=!0),this.table.browser!="firefox"&&this.table.browser!="safari"&&t(function(){n.getType()==="cell"&&o.focus({preventScroll:!0})}),o.checked=h?s===i.trueValue:s===!0||s==="true"||s==="True"||s===1;function p(g){var m=o.checked;return h&&m?m=i.trueValue:d&&!m&&(m=i.falseValue),a?g?c?l:m:o.checked&&!c?(o.checked=!1,o.indeterminate=!0,c=!0,l):(c=!1,m):m}return o.addEventListener("change",function(g){e(p())}),o.addEventListener("blur",function(g){e(p(!0))}),o.addEventListener("keydown",function(g){g.keyCode==13&&e(p()),g.keyCode==27&&r()}),o}var bE={input:aE,textarea:lE,number:uE,range:hE,date:cE,time:fE,datetime:dE,list:mE,star:gE,progress:yE,tickCross:vE},Md=class n extends xr{static moduleName="edit";static editors=bE;constructor(t){super(t),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.convertEmptyValues=!1,this.editors=n.editors,this.registerTableOption("editTriggerEvent","focus"),this.registerTableOption("editorEmptyValue"),this.registerTableOption("editorEmptyValueFunc",this.emptyValueCheck.bind(this)),this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("editorEmptyValue"),this.registerColumnOption("editorEmptyValueFunc"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellIsEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("cell-value-changed",this.updateCellClass.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("row-layout",this.rowEditableCheck.bind(this)),this.subscribe("data-refreshing",this.cancelEdit.bind(this)),this.subscribe("clipboard-paste",this.pasteBlocker.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this,void 0)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this,void 0)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this,void 0)),Object.keys(this.table.options).includes("editorEmptyValue")&&(this.convertEmptyValues=!0)}pasteBlocker(t){if(this.currentCell)return!0}keybindingNavigateNext(t){var e=this.currentCell,r=this.options("tabEndNewRow");e&&(this.navigateNext(e,t)||r&&(e.getElement().firstChild.blur(),this.invalidEdit||(r===!0?r=this.table.addRow({}):typeof r=="function"?r=this.table.addRow(r(e.row.getComponent())):r=this.table.addRow(Object.assign({},r)),r.then(()=>{setTimeout(()=>{e.getComponent().navigateNext()})}))))}cellIsEdited(t){return!!t.modules.edit&&t.modules.edit.edited}cellCancelEdit(t){t===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}updateCellClass(t){this.allowEdit(t)?t.getElement().classList.add("tabulator-editable"):t.getElement().classList.remove("tabulator-editable")}clearCellEdited(t){t||(t=this.table.modules.edit.getEditedCells()),Array.isArray(t)||(t=[t]),t.forEach(e=>{this.table.modules.edit.clearEdited(e._getSelf())})}navigatePrev(t=this.currentCell,e){var r,i;if(t){if(e&&e.preventDefault(),r=this.navigateLeft(),r)return!0;if(i=this.table.rowManager.prevDisplayRow(t.row,!0),i&&(r=this.findPrevEditableCell(i,i.cells.length),r))return r.getComponent().edit(),!0}return!1}navigateNext(t=this.currentCell,e){var r,i;if(t){if(e&&e.preventDefault(),r=this.navigateRight(),r)return!0;if(i=this.table.rowManager.nextDisplayRow(t.row,!0),i&&(r=this.findNextEditableCell(i,-1),r))return r.getComponent().edit(),!0}return!1}navigateLeft(t=this.currentCell,e){var r,i;return t&&(e&&e.preventDefault(),r=t.getIndex(),i=this.findPrevEditableCell(t.row,r),i)?(i.getComponent().edit(),!0):!1}navigateRight(t=this.currentCell,e){var r,i;return t&&(e&&e.preventDefault(),r=t.getIndex(),i=this.findNextEditableCell(t.row,r),i)?(i.getComponent().edit(),!0):!1}navigateUp(t=this.currentCell,e){var r,i;return t&&(e&&e.preventDefault(),r=t.getIndex(),i=this.table.rowManager.prevDisplayRow(t.row,!0),i)?(i.cells[r].getComponent().edit(),!0):!1}navigateDown(t=this.currentCell,e){var r,i;return t&&(e&&e.preventDefault(),r=t.getIndex(),i=this.table.rowManager.nextDisplayRow(t.row,!0),i)?(i.cells[r].getComponent().edit(),!0):!1}findNextEditableCell(t,e){var r=!1;if(e<t.cells.length-1)for(var i=e+1;i<t.cells.length;i++){let s=t.cells[i];if(s.column.modules.edit&&Ai.elVisible(s.getElement())&&this.allowEdit(s)){r=s;break}}return r}findPrevEditableCell(t,e){var r=!1;if(e>0)for(var i=e-1;i>=0;i--){let s=t.cells[i];if(s.column.modules.edit&&Ai.elVisible(s.getElement())&&this.allowEdit(s)){r=s;break}}return r}initializeColumnCheck(t){typeof t.definition.editor<"u"&&this.initializeColumn(t)}columnDeleteCheck(t){this.currentCell&&this.currentCell.column===t&&this.cancelEdit()}rowDeleteCheck(t){this.currentCell&&this.currentCell.row===t&&this.cancelEdit()}rowEditableCheck(t){t.getCells().forEach(e=>{e.column.modules.edit&&typeof e.column.modules.edit.check=="function"&&this.updateCellClass(e)})}initializeColumn(t){var e=Object.keys(t.definition).includes("editorEmptyValue"),r={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{},convertEmptyValues:e,editorEmptyValue:t.definition.editorEmptyValue,editorEmptyValueFunc:t.definition.editorEmptyValueFunc};switch(typeof t.definition.editor){case"string":this.editors[t.definition.editor]?r.editor=this.editors[t.definition.editor]:console.warn("Editor Error - No such editor found: ",t.definition.editor);break;case"function":r.editor=t.definition.editor;break;case"boolean":t.definition.editor===!0&&(typeof t.definition.formatter!="function"?this.editors[t.definition.formatter]?r.editor=this.editors[t.definition.formatter]:r.editor=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter));break}r.editor&&(t.modules.edit=r)}getCurrentCell(){return this.currentCell?this.currentCell.getComponent():!1}clearEditor(t){var e=this.currentCell,r;if(this.invalidEdit=!1,e){for(this.currentCell=!1,r=e.getElement(),this.dispatch("edit-editor-clear",e,t),r.classList.remove("tabulator-editing");r.firstChild;)r.removeChild(r.firstChild);e.row.getElement().classList.remove("tabulator-editing"),e.table.element.classList.remove("tabulator-editing")}}cancelEdit(){if(this.currentCell){var t=this.currentCell,e=this.currentCell.getComponent();this.clearEditor(!0),t.setValueActual(t.getValue()),t.cellRendered(),(t.column.definition.editor=="textarea"||t.column.definition.variableHeight)&&t.row.normalizeHeight(!0),t.column.definition.cellEditCancelled&&t.column.definition.cellEditCancelled.call(this.table,e),this.dispatch("edit-cancelled",t),this.dispatchExternal("cellEditCancelled",e)}}bindEditor(t){if(t.column.modules.edit){var e=this,r=t.getElement(!0);this.updateCellClass(t),r.setAttribute("tabindex",0),r.addEventListener("mousedown",function(i){i.button===2?i.preventDefault():e.mouseClick=!0}),this.options("editTriggerEvent")==="dblclick"&&r.addEventListener("dblclick",function(i){r.classList.contains("tabulator-editing")||(r.focus({preventScroll:!0}),e.edit(t,i,!1))}),(this.options("editTriggerEvent")==="focus"||this.options("editTriggerEvent")==="click")&&r.addEventListener("click",function(i){r.classList.contains("tabulator-editing")||(r.focus({preventScroll:!0}),e.edit(t,i,!1))}),this.options("editTriggerEvent")==="focus"&&r.addEventListener("focus",function(i){e.recursionBlock||e.edit(t,i,!1)})}}focusCellNoEvent(t,e){this.recursionBlock=!0,e&&this.table.browser==="ie"||t.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(t,e){this.focusCellNoEvent(t),this.edit(t,!1,e)}focusScrollAdjust(t){if(this.table.rowManager.getRenderMode()=="virtual"){var e=this.table.rowManager.element.scrollTop,r=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,i=t.row.getElement();i.offsetTop<e?this.table.rowManager.element.scrollTop-=e-i.offsetTop:i.offsetTop+i.offsetHeight>r&&(this.table.rowManager.element.scrollTop+=i.offsetTop+i.offsetHeight-r);var s=this.table.rowManager.element.scrollLeft,o=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,a=t.getElement();this.table.modExists("frozenColumns")&&(s+=parseInt(this.table.modules.frozenColumns.leftMargin||0),o-=parseInt(this.table.modules.frozenColumns.rightMargin||0)),this.table.options.renderHorizontal==="virtual"&&(s-=parseInt(this.table.columnManager.renderer.vDomPadLeft),o-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),a.offsetLeft<s?this.table.rowManager.element.scrollLeft-=s-a.offsetLeft:a.offsetLeft+a.offsetWidth>o&&(this.table.rowManager.element.scrollLeft+=a.offsetLeft+a.offsetWidth-o)}}allowEdit(t){var e=!!t.column.modules.edit;if(t.column.modules.edit)switch(typeof t.column.modules.edit.check){case"function":t.row.initialized&&(e=t.column.modules.edit.check(t.getComponent()));break;case"string":e=!!t.row.data[t.column.modules.edit.check];break;case"boolean":e=t.column.modules.edit.check;break}return e}edit(t,e,r){var i=this,s=!0,o=function(){},a=t.getElement(),l=!1,c,h,d;if(this.currentCell){!this.invalidEdit&&this.currentCell!==t&&this.cancelEdit();return}function p(x){if(i.currentCell===t&&!l){var S=i.chain("edit-success",[t,x],!0,!0);return S===!0||i.table.options.validationMode==="highlight"?(l=!0,i.clearEditor(),t.modules.edit||(t.modules.edit={}),t.modules.edit.edited=!0,i.editedCells.indexOf(t)==-1&&i.editedCells.push(t),x=i.transformEmptyValues(x,t),t.setValue(x,!0),S===!0):(l=!0,i.invalidEdit=!0,i.focusCellNoEvent(t,!0),o(),setTimeout(()=>{l=!1},10),!1)}}function g(){i.currentCell===t&&!l&&i.cancelEdit()}function m(x){o=x}if(t.column.modules.edit.blocked)return this.mouseClick=!1,this.blur(a),!1;if(e&&e.stopPropagation(),s=this.allowEdit(t),s||r){if(i.cancelEdit(),i.currentCell=t,this.focusScrollAdjust(t),h=t.getComponent(),this.mouseClick&&(this.mouseClick=!1,t.column.definition.cellClick&&t.column.definition.cellClick.call(this.table,e,h)),t.column.definition.cellEditing&&t.column.definition.cellEditing.call(this.table,h),this.dispatch("cell-editing",t),this.dispatchExternal("cellEditing",h),d=typeof t.column.modules.edit.params=="function"?t.column.modules.edit.params(h):t.column.modules.edit.params,c=t.column.modules.edit.editor.call(i,h,m,p,g,d),this.currentCell&&c!==!1)if(c instanceof Node){for(a.classList.add("tabulator-editing"),t.row.getElement().classList.add("tabulator-editing"),t.table.element.classList.add("tabulator-editing");a.firstChild;)a.removeChild(a.firstChild);a.appendChild(c),o();for(var b=a.children,y=0;y<b.length;y++)b[y].addEventListener("click",function(x){x.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",c),this.blur(a),!1;else return this.blur(a),!1;return!0}else return this.mouseClick=!1,this.blur(a),!1}emptyValueCheck(t){return t===""||t===null||typeof t>"u"}transformEmptyValues(t,e){var r=e.column.modules.edit,i=r.convertEmptyValues||this.convertEmptyValues,s;return i&&(s=r.editorEmptyValueFunc||this.options("editorEmptyValueFunc"),s&&s(t)&&(t=r.convertEmptyValues?r.editorEmptyValue:this.options("editorEmptyValue"))),t}blur(t){this.confirm("edit-blur",[t])||t.blur()}getEditedCells(){var t=[];return this.editedCells.forEach(e=>{t.push(e.getComponent())}),t}clearEdited(t){var e;t.modules.edit&&t.modules.edit.edited&&(t.modules.edit.edited=!1,this.dispatch("edit-edited-clear",t)),e=this.editedCells.indexOf(t),e>-1&&this.editedCells.splice(e,1)}},Bh=class{constructor(t,e,r,i){this.type=t,this.columns=e,this.component=r||!1,this.indent=i||0}},iu=class{constructor(t,e,r,i,s){this.value=t,this.component=e||!1,this.width=r,this.height=i,this.depth=s}},_E={},wE={visible:function(){return this.rowManager.getVisibleRows(!1,!0)},all:function(){return this.rowManager.rows},selected:function(){return this.modules.selectRow.selectedRows},active:function(){return this.options.pagination?this.rowManager.getDisplayRows(this.rowManager.displayRows.length-2):this.rowManager.getDisplayRows()}},Sd=class n extends xr{static moduleName="export";static columnLookups=_E;static rowLookups=wE;constructor(t){super(t),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.colVisPropAttach="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(t,e,r,i){var s,o,a,l;return this.cloneTableStyle=e,this.config=t||{},this.colVisProp=i,this.colVisPropAttach=this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1),l=n.columnLookups[r],l&&(a=l.call(this.table),a=a.filter(c=>this.columnVisCheck(c))),s=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders(a)):[],a&&(a=a.map(c=>c.getComponent())),o=this.bodyToExportRows(this.rowLookup(r),a),s.concat(o)}generateTable(t,e,r,i){var s=this.generateExportList(t,e,r,i);return this.generateTableElement(s)}rowLookup(t){var e=[],r;return typeof t=="function"?t.call(this.table).forEach(i=>{i=this.table.rowManager.findRow(i),i&&e.push(i)}):(r=n.rowLookups[t]||n.rowLookups.active,e=r.call(this.table)),Object.assign([],e)}generateColumnGroupHeaders(t){var e=[];return t||(t=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex),t.forEach(r=>{var i=this.processColumnGroup(r);i&&e.push(i)}),e}processColumnGroup(t){var e=t.columns,r=0,i=t.definition["title"+this.colVisPropAttach]||t.definition.title,s={title:i,column:t,depth:1};if(e.length){if(s.subGroups=[],s.width=0,e.forEach(o=>{var a=this.processColumnGroup(o);a&&(s.width+=a.width,s.subGroups.push(a),a.depth>r&&(r=a.depth))}),s.depth+=r,!s.width)return!1}else if(this.columnVisCheck(t))s.width=1;else return!1;return s}columnVisCheck(t){var e=t.definition[this.colVisProp];return this.config.rowHeaders===!1&&t.isRowHeader?!1:(typeof e=="function"&&(e=e.call(this.table,t.getComponent())),e===!1||e===!0?e:t.visible&&t.field)}headersToExportRows(t){var e=[],r=0,i=[];function s(o,a){var l=r-a;if(typeof e[a]>"u"&&(e[a]=[]),o.height=o.subGroups?1:l-o.depth+1,e[a].push(o),o.height>1)for(let c=1;c<o.height;c++)typeof e[a+c]>"u"&&(e[a+c]=[]),e[a+c].push(!1);if(o.width>1)for(let c=1;c<o.width;c++)e[a].push(!1);o.subGroups&&o.subGroups.forEach(function(c){s(c,a+1)})}return t.forEach(function(o){o.depth>r&&(r=o.depth)}),t.forEach(function(o){s(o,0)}),e.forEach(o=>{var a=[];o.forEach(l=>{if(l){let c=typeof l.title>"u"?"":l.title;a.push(new iu(c,l.column.getComponent(),l.width,l.height,l.depth))}else a.push(null)}),i.push(new Bh("header",a))}),i}bodyToExportRows(t,e=[]){var r=[];return e.length===0&&this.table.columnManager.columnsByIndex.forEach(i=>{this.columnVisCheck(i)&&e.push(i.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&t.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&t.push(this.table.modules.columnCalcs.botRow)),t=t.filter(i=>{switch(i.type){case"group":return this.config.rowGroups!==!1;case"calc":return this.config.columnCalcs!==!1;case"row":return!(this.table.options.dataTree&&this.config.dataTree===!1&&i.modules.dataTree.parent)}return!0}),t.forEach((i,s)=>{var o=i.getData(this.colVisProp),a=[],l=0;switch(i.type){case"group":l=i.level,a.push(new iu(i.key,i.getComponent(),e.length,1));break;case"calc":case"row":e.forEach(c=>{a.push(new iu(c._column.getFieldValue(o),c,1,1))}),this.table.options.dataTree&&this.config.dataTree!==!1&&(l=i.modules.dataTree.index);break}r.push(new Bh(i.type,a,i.getComponent(),l))}),r}generateTableElement(t){var e=document.createElement("table"),r=document.createElement("thead"),i=document.createElement("tbody"),s=this.lookupTableStyles(),o=this.table.options["rowFormatter"+this.colVisPropAttach],a={};return a.rowFormatter=o!==null?o:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(a.treeElementField=this.table.modules.dataTree.elementField),a.groupHeader=this.table.options["groupHeader"+this.colVisPropAttach],a.groupHeader&&!Array.isArray(a.groupHeader)&&(a.groupHeader=[a.groupHeader]),e.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),r,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),t.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),t.forEach((l,c)=>{let h;switch(l.type){case"header":r.appendChild(this.generateHeaderElement(l,a,s));break;case"group":i.appendChild(this.generateGroupElement(l,a,s));break;case"calc":i.appendChild(this.generateCalcElement(l,a,s));break;case"row":h=this.generateRowElement(l,a,s),this.mapElementStyles(c%2&&s.evenRow?s.evenRow:s.oddRow,h,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),i.appendChild(h);break}}),r.innerHTML&&e.appendChild(r),e.appendChild(i),this.mapElementStyles(this.table.element,e,["border-top","border-left","border-right","border-bottom"]),e}lookupTableStyles(){var t={};return this.cloneTableStyle&&window.getComputedStyle&&(t.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),t.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),t.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),t.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),t.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],t.firstRow&&(t.styleCells=t.firstRow.getElementsByClassName("tabulator-cell"),t.styleRowHeader=t.firstRow.getElementsByClassName("tabulator-row-header")[0],t.firstCell=t.styleCells[0],t.lastCell=t.styleCells[t.styleCells.length-1])),t}generateHeaderElement(t,e,r){var i=document.createElement("tr");return t.columns.forEach(s=>{if(s){var o=document.createElement("th"),a=s.component._column.definition.cssClass?s.component._column.definition.cssClass.split(" "):[];o.colSpan=s.width,o.rowSpan=s.height,o.innerHTML=s.value,this.cloneTableStyle&&(o.style.boxSizing="border-box"),a.forEach(function(l){o.classList.add(l)}),this.mapElementStyles(s.component.getElement(),o,["text-align","border-left","border-right","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(s.component._column.contentElement,o,["padding-top","padding-left","padding-right","padding-bottom"]),s.component._column.visible?this.mapElementStyles(s.component.getElement(),o,["width"]):s.component._column.definition.width&&(o.style.width=s.component._column.definition.width+"px"),s.component._column.parent&&s.component._column.parent.isGroup?this.mapElementStyles(s.component._column.parent.groupElement,o,["border-top"]):this.mapElementStyles(s.component.getElement(),o,["border-top"]),s.component._column.isGroup?this.mapElementStyles(s.component.getElement(),o,["border-bottom"]):this.mapElementStyles(this.table.columnManager.getElement(),o,["border-bottom"]),i.appendChild(o)}}),i}generateGroupElement(t,e,r){var i=document.createElement("tr"),s=document.createElement("td"),o=t.columns[0];return i.classList.add("tabulator-print-table-row"),e.groupHeader&&e.groupHeader[t.indent]?o.value=e.groupHeader[t.indent](o.value,t.component._group.getRowCount(),t.component._group.getData(),t.component):e.groupHeader!==!1&&(o.value=t.component._group.generator(o.value,t.component._group.getRowCount(),t.component._group.getData(),t.component)),s.colSpan=o.width,s.innerHTML=o.value,i.classList.add("tabulator-print-table-group"),i.classList.add("tabulator-group-level-"+t.indent),o.component.isVisible()&&i.classList.add("tabulator-group-visible"),this.mapElementStyles(r.firstGroup,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(r.firstGroup,s,["padding-top","padding-left","padding-right","padding-bottom"]),i.appendChild(s),i}generateCalcElement(t,e,r){var i=this.generateRowElement(t,e,r);return i.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(r.calcRow,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),i}generateRowElement(t,e,r){var i=document.createElement("tr");if(i.classList.add("tabulator-print-table-row"),t.columns.forEach((s,o)=>{if(s){var a=document.createElement("td"),l=s.component._column,c=this.table,h=c.columnManager.findColumnIndex(l),d=s.value,p,g,m={modules:{},getValue:function(){return d},getField:function(){return l.definition.field},getElement:function(){return a},getType:function(){return"cell"},getColumn:function(){return l.getComponent()},getData:function(){return t.component.getData()},getRow:function(){return t.component},getTable:function(){return c},getComponent:function(){return m},column:l},b=l.definition.cssClass?l.definition.cssClass.split(" "):[];if(b.forEach(function(y){a.classList.add(y)}),this.table.modExists("format")&&this.config.formatCells!==!1)d=this.table.modules.format.formatExportValue(m,this.colVisProp);else switch(typeof d){case"object":d=d!==null?JSON.stringify(d):"";break;case"undefined":d="";break}d instanceof Node?a.appendChild(d):a.innerHTML=d,g=["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","text-align"],l.isRowHeader?(p=r.styleRowHeader,g.push("background-color")):p=r.styleCells&&r.styleCells[h]?r.styleCells[h]:r.firstCell,p&&(this.mapElementStyles(p,a,g),l.definition.align&&(a.style.textAlign=l.definition.align)),this.table.options.dataTree&&this.config.dataTree!==!1&&(e.treeElementField&&e.treeElementField==l.field||!e.treeElementField&&o==0)&&(t.component._row.modules.dataTree.controlEl&&a.insertBefore(t.component._row.modules.dataTree.controlEl.cloneNode(!0),a.firstChild),t.component._row.modules.dataTree.branchEl&&a.insertBefore(t.component._row.modules.dataTree.branchEl.cloneNode(!0),a.firstChild)),i.appendChild(a),m.modules.format&&m.modules.format.renderedCallback&&m.modules.format.renderedCallback()}}),e.rowFormatter&&t.type==="row"&&this.config.formatCells!==!1){let s=Object.assign(t.component);s.getElement=function(){return i},e.rowFormatter(t.component)}return i}generateHTMLTable(t){var e=document.createElement("div");return e.appendChild(this.generateTableElement(t)),e.innerHTML}getHtml(t,e,r,i){var s=this.generateExportList(r||this.table.options.htmlOutputConfig,e,t,i||"htmlOutput");return this.generateHTMLTable(s)}mapElementStyles(t,e,r){if(this.cloneTableStyle&&t&&e){var i={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var s=window.getComputedStyle(t);r.forEach(function(o){e.style[i[o]]||(e.style[i[o]]=s.getPropertyValue(o))})}}}},xE={"=":function(n,t,e,r){return t==n},"<":function(n,t,e,r){return t<n},"<=":function(n,t,e,r){return t<=n},">":function(n,t,e,r){return t>n},">=":function(n,t,e,r){return t>=n},"!=":function(n,t,e,r){return t!=n},regex:function(n,t,e,r){return typeof n=="string"&&(n=new RegExp(n)),n.test(t)},like:function(n,t,e,r){return n===null||typeof n>"u"?t===n:typeof t<"u"&&t!==null?String(t).toLowerCase().indexOf(n.toLowerCase())>-1:!1},keywords:function(n,t,e,r){var i=n.toLowerCase().split(typeof r.separator>"u"?" ":r.separator),s=String(t===null||typeof t>"u"?"":t).toLowerCase(),o=[];return i.forEach(a=>{s.includes(a)&&o.push(!0)}),r.matchAll?o.length===i.length:!!o.length},starts:function(n,t,e,r){return n===null||typeof n>"u"?t===n:typeof t<"u"&&t!==null?String(t).toLowerCase().startsWith(n.toLowerCase()):!1},ends:function(n,t,e,r){return n===null||typeof n>"u"?t===n:typeof t<"u"&&t!==null?String(t).toLowerCase().endsWith(n.toLowerCase()):!1},in:function(n,t,e,r){return Array.isArray(n)?n.length?n.indexOf(t)>-1:!0:(console.warn("Filter Error - filter value is not an array:",n),!1)}},kd=class n extends xr{static moduleName="filter";static filters=xE;constructor(t){super(t),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerTableOption("placeholderHeaderFilter",!1),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.subscribe("placeholder",this.generatePlaceholder.bind(this)),this.table.options.filterMode==="remote"&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(t=>{var e=this.table.columnManager.findColumn(t.field);if(e)this.setHeaderFilterValue(e,t.value);else return console.warn("Column Filter Error - No matching column found:",t.field),!1}),this.tableInitialized=!0}remoteFilterParams(t,e,r,i){return i.filter=this.getFilters(!0,!0),i}generatePlaceholder(t){if(this.table.options.placeholderHeaderFilter&&Object.keys(this.headerFilters).length)return this.table.options.placeholderHeaderFilter}userSetFilter(t,e,r,i){this.setFilter(t,e,r,i),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(t,e,r,i){this.addFilter(t,e,r,i),this.refreshFilter()}userSetHeaderFilterFocus(t){var e=this.table.columnManager.findColumn(t);if(e)this.setHeaderFilterFocus(e);else return console.warn("Column Filter Focus Error - No matching column found:",t),!1}userGetHeaderFilterValue(t){var e=this.table.columnManager.findColumn(t);if(e)return this.getHeaderFilterValue(e);console.warn("Column Filter Error - No matching column found:",t)}userSetHeaderFilterValue(t,e){var r=this.table.columnManager.findColumn(t);if(r)this.setHeaderFilterValue(r,e);else return console.warn("Column Filter Error - No matching column found:",t),!1}userRemoveFilter(t,e,r){this.removeFilter(t,e,r),this.refreshFilter()}userClearFilter(t){this.clearFilter(t),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(t,e,r){return this.search("rows",t,e,r)}searchData(t,e,r){return this.search("data",t,e,r)}initializeColumnHeaderFilter(t){var e=t.definition;e.headerFilter&&this.initializeColumn(t)}initializeColumn(t,e){var r=this,i=t.getField();function s(o){var a=t.modules.filter.tagType=="input"&&t.modules.filter.attrType=="text"||t.modules.filter.tagType=="textarea"?"partial":"match",l="",c="",h;if(typeof t.modules.filter.prevSuccess>"u"||t.modules.filter.prevSuccess!==o){if(t.modules.filter.prevSuccess=o,t.modules.filter.emptyFunc(o))delete r.headerFilters[i];else{switch(t.modules.filter.value=o,typeof t.definition.headerFilterFunc){case"string":n.filters[t.definition.headerFilterFunc]?(l=t.definition.headerFilterFunc,h=function(d){var p=t.definition.headerFilterFuncParams||{},g=t.getFieldValue(d);return p=typeof p=="function"?p(o,g,d):p,n.filters[t.definition.headerFilterFunc](o,g,d,p)}):console.warn("Header Filter Error - Matching filter function not found: ",t.definition.headerFilterFunc);break;case"function":h=function(d){var p=t.definition.headerFilterFuncParams||{},g=t.getFieldValue(d);return p=typeof p=="function"?p(o,g,d):p,t.definition.headerFilterFunc(o,g,d,p)},l=h;break}if(!h)switch(a){case"partial":h=function(d){var p=t.getFieldValue(d);return typeof p<"u"&&p!==null?String(p).toLowerCase().indexOf(String(o).toLowerCase())>-1:!1},l="like";break;default:h=function(d){return t.getFieldValue(d)==o},l="="}r.headerFilters[i]={value:o,func:h,type:l}}t.modules.filter.value=o,c=JSON.stringify(r.headerFilters),r.prevHeaderFilterChangeCheck!==c&&(r.prevHeaderFilterChangeCheck=c,r.trackChanges(),r.refreshFilter())}return!0}t.modules.filter={success:s,attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(t)}generateHeaderFilterElement(t,e,r){var i=this,s=t.modules.filter.success,o=t.getField(),a,l,c,h,d,p,g,m;t.modules.filter.value=e;function b(){}function y(x){m=x}if(t.modules.filter.headerElement&&t.modules.filter.headerElement.parentNode&&t.contentElement.removeChild(t.modules.filter.headerElement.parentNode),o){switch(t.modules.filter.emptyFunc=t.definition.headerFilterEmptyCheck||function(x){return!x&&x!==0},a=document.createElement("div"),a.classList.add("tabulator-header-filter"),typeof t.definition.headerFilter){case"string":i.table.modules.edit.editors[t.definition.headerFilter]?(l=i.table.modules.edit.editors[t.definition.headerFilter],(t.definition.headerFilter==="tick"||t.definition.headerFilter==="tickCross")&&!t.definition.headerFilterEmptyCheck&&(t.modules.filter.emptyFunc=function(x){return x!==!0&&x!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",t.definition.editor);break;case"function":l=t.definition.headerFilter;break;case"boolean":t.modules.edit&&t.modules.edit.editor?l=t.modules.edit.editor:t.definition.formatter&&i.table.modules.edit.editors[t.definition.formatter]?(l=i.table.modules.edit.editors[t.definition.formatter],(t.definition.formatter==="tick"||t.definition.formatter==="tickCross")&&!t.definition.headerFilterEmptyCheck&&(t.modules.filter.emptyFunc=function(x){return x!==!0&&x!==!1})):l=i.table.modules.edit.editors.input;break}if(l){if(h={getValue:function(){return typeof e<"u"?e:""},getField:function(){return t.definition.field},getElement:function(){return a},getColumn:function(){return t.getComponent()},getTable:()=>this.table,getType:()=>"header",getRow:function(){return{normalizeHeight:function(){}}}},g=t.definition.headerFilterParams||{},g=typeof g=="function"?g.call(i.table,h):g,c=l.call(this.table.modules.edit,h,y,s,b,g),!c){console.warn("Filter Error - Cannot add filter to "+o+" column, editor returned a value of false");return}if(!(c instanceof Node)){console.warn("Filter Error - Cannot add filter to "+o+" column, editor should return an instance of Node, the editor returned:",c);return}i.langBind("headerFilters|columns|"+t.definition.field,function(x){c.setAttribute("placeholder",typeof x<"u"&&x?x:t.definition.headerFilterPlaceholder||i.langText("headerFilters|default"))}),c.addEventListener("click",function(x){x.stopPropagation(),c.focus()}),c.addEventListener("focus",x=>{var S=this.table.columnManager.contentsElement.scrollLeft,O=this.table.rowManager.element.scrollLeft;S!==O&&(this.table.rowManager.scrollHorizontal(S),this.table.columnManager.scrollHorizontal(S))}),d=!1,p=function(x){d&&clearTimeout(d),d=setTimeout(function(){s(c.value)},i.table.options.headerFilterLiveFilterDelay)},t.modules.filter.headerElement=c,t.modules.filter.attrType=c.hasAttribute("type")?c.getAttribute("type").toLowerCase():"",t.modules.filter.tagType=c.tagName.toLowerCase(),t.definition.headerFilterLiveFilter!==!1&&(t.definition.headerFilter==="autocomplete"||t.definition.headerFilter==="tickCross"||(t.definition.editor==="autocomplete"||t.definition.editor==="tickCross")&&t.definition.headerFilter===!0||(c.addEventListener("keyup",p),c.addEventListener("search",p),t.modules.filter.attrType=="number"&&c.addEventListener("change",function(x){s(c.value)}),t.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&c.setAttribute("type","search")),(t.modules.filter.tagType=="input"||t.modules.filter.tagType=="select"||t.modules.filter.tagType=="textarea")&&c.addEventListener("mousedown",function(x){x.stopPropagation()})),a.appendChild(c),t.contentElement.appendChild(a),r||i.headerFilterColumns.push(t),m&&m()}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(t){t.modules.filter&&t.modules.filter.headerElement?t.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",t.getField())}getHeaderFilterValue(t){if(t.modules.filter&&t.modules.filter.headerElement)return t.modules.filter.value;console.warn("Column Filter Error - No header filter set on column:",t.getField())}setHeaderFilterValue(t,e){t&&(t.modules.filter&&t.modules.filter.headerElement?(this.generateHeaderFilterElement(t,e,!0),t.modules.filter.success(e)):console.warn("Column Filter Error - No header filter set on column:",t.getField()))}reloadHeaderFilter(t){t&&(t.modules.filter&&t.modules.filter.headerElement?this.generateHeaderFilterElement(t,t.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",t.getField()))}refreshFilter(){this.tableInitialized&&(this.table.options.filterMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0))}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var t=this.changed;return this.changed=!1,t}setFilter(t,e,r,i){this.filterList=[],Array.isArray(t)||(t=[{field:t,type:e,value:r,params:i}]),this.addFilter(t)}addFilter(t,e,r,i){var s=!1;Array.isArray(t)||(t=[{field:t,type:e,value:r,params:i}]),t.forEach(o=>{o=this.findFilter(o),o&&(this.filterList.push(o),s=!0)}),s&&this.trackChanges()}findFilter(t){var e;if(Array.isArray(t))return this.findSubFilters(t);var r=!1;return typeof t.field=="function"?r=function(i){return t.field(i,t.type||{})}:n.filters[t.type]?(e=this.table.columnManager.getColumnByField(t.field),e?r=function(i){return n.filters[t.type](t.value,e.getFieldValue(i),i,t.params||{})}:r=function(i){return n.filters[t.type](t.value,i[t.field],i,t.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",t.type),t.func=r,t.func?t:!1}findSubFilters(t){var e=[];return t.forEach(r=>{r=this.findFilter(r),r&&e.push(r)}),e.length?e:!1}getFilters(t,e){var r=[];return t&&(r=this.getHeaderFilters()),e&&r.forEach(function(i){typeof i.type=="function"&&(i.type="function")}),r=r.concat(this.filtersToArray(this.filterList,e)),r}filtersToArray(t,e){var r=[];return t.forEach(i=>{var s;Array.isArray(i)?r.push(this.filtersToArray(i,e)):(s={field:i.field,type:i.type,value:i.value},e&&typeof s.type=="function"&&(s.type="function"),r.push(s))}),r}getHeaderFilters(){var t=[];for(var e in this.headerFilters)t.push({field:e,type:this.headerFilters[e].type,value:this.headerFilters[e].value});return t}removeFilter(t,e,r){Array.isArray(t)||(t=[{field:t,type:e,value:r}]),t.forEach(i=>{var s=-1;typeof i.field=="object"?s=this.filterList.findIndex(o=>i===o):s=this.filterList.findIndex(o=>i.field===o.field&&i.type===o.type&&i.value===o.value),s>-1?this.filterList.splice(s,1):console.warn("Filter Error - No matching filter type found, ignoring: ",i.type)}),this.trackChanges()}clearFilter(t){this.filterList=[],t&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(t=>{typeof t.modules.filter.value<"u"&&delete t.modules.filter.value,t.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(t)}),this.trackChanges()}search(t,e,r,i){var s=[],o=[];return Array.isArray(e)||(e=[{field:e,type:r,value:i}]),e.forEach(a=>{a=this.findFilter(a),a&&o.push(a)}),this.table.rowManager.rows.forEach(a=>{var l=!0;o.forEach(c=>{this.filterRecurse(c,a.getData())||(l=!1)}),l&&s.push(t==="data"?a.getData("data"):a.getComponent())}),s}filter(t,e){var r=[],i=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters(!0)),this.table.options.filterMode!=="remote"&&(this.filterList.length||Object.keys(this.headerFilters).length)?t.forEach(s=>{this.filterRow(s)&&r.push(s)}):r=t.slice(0),this.subscribedExternal("dataFiltered")&&(r.forEach(s=>{i.push(s.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(!0),i)),r}filterRow(t,e){var r=!0,i=t.getData();this.filterList.forEach(o=>{this.filterRecurse(o,i)||(r=!1)});for(var s in this.headerFilters)this.headerFilters[s].func(i)||(r=!1);return r}filterRecurse(t,e){var r=!1;return Array.isArray(t)?t.forEach(i=>{this.filterRecurse(i,e)&&(r=!0)}):r=t.func(e),r}};function EE(n,t,e){return this.emptyToSpace(this.sanitizeHTML(n.getValue()))}function CE(n,t,e){return n.getValue()}function ME(n,t,e){return n.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(n.getValue()))}function SE(n,t,e){var r=parseFloat(n.getValue()),i="",s,o,a,l,c,h=t.decimal||".",d=t.thousand||",",p=t.negativeSign||"-",g=t.symbol||"",m=!!t.symbolAfter,b=typeof t.precision<"u"?t.precision:2;if(isNaN(r))return this.emptyToSpace(this.sanitizeHTML(n.getValue()));if(r<0&&(r=Math.abs(r),i=p),s=b!==!1?r.toFixed(b):r,s=String(s).split("."),o=s[0],a=s.length>1?h+s[1]:"",t.thousand!==!1)for(l=/(\d+)(\d{3})/;l.test(o);)o=o.replace(l,"$1"+d+"$2");return c=o+a,i===!0?(c="("+c+")",m?c+g:g+c):m?i+c+g:i+g+c}function kE(n,t,e){var r=n.getValue(),i=t.urlPrefix||"",s=t.download,o=r,a=document.createElement("a"),l;function c(h,d){var p=h.shift(),g=d[p];return h.length&&typeof g=="object"?c(h,g):g}if(t.labelField&&(l=n.getData(),o=c(t.labelField.split(this.table.options.nestedFieldSeparator),l)),t.label)switch(typeof t.label){case"string":o=t.label;break;case"function":o=t.label(n);break}if(o){if(t.urlField&&(l=n.getData(),r=Ai.retrieveNestedData(this.table.options.nestedFieldSeparator,t.urlField,l)),t.url)switch(typeof t.url){case"string":r=t.url;break;case"function":r=t.url(n);break}return a.setAttribute("href",i+r),t.target&&a.setAttribute("target",t.target),t.download&&(typeof s=="function"?s=s(n):s=s===!0?"":s,a.setAttribute("download",s)),a.innerHTML=this.emptyToSpace(this.sanitizeHTML(o)),a}else return"&nbsp;"}function LE(n,t,e){var r=document.createElement("img"),i=n.getValue();switch(t.urlPrefix&&(i=t.urlPrefix+n.getValue()),t.urlSuffix&&(i=i+t.urlSuffix),r.setAttribute("src",i),typeof t.height){case"number":r.style.height=t.height+"px";break;case"string":r.style.height=t.height;break}switch(typeof t.width){case"number":r.style.width=t.width+"px";break;case"string":r.style.width=t.width;break}return r.addEventListener("load",function(){n.getRow().normalizeHeight()}),r}function TE(n,t,e){var r=n.getValue(),i=n.getElement(),s=t.allowEmpty,o=t.allowTruthy,a=Object.keys(t).includes("trueValue"),l=typeof t.tickElement<"u"?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',c=typeof t.crossElement<"u"?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return a&&r===t.trueValue||!a&&(o&&r||r===!0||r==="true"||r==="True"||r===1||r==="1")?(i.setAttribute("aria-checked",!0),l||""):s&&(r==="null"||r===""||r===null||typeof r>"u")?(i.setAttribute("aria-checked","mixed"),""):(i.setAttribute("aria-checked",!1),c||"")}function PE(n,t,e){var r=window.DateTime||luxon.DateTime,i=t.inputFormat||"yyyy-MM-dd HH:mm:ss",s=t.outputFormat||"dd/MM/yyyy HH:mm:ss",o=typeof t.invalidPlaceholder<"u"?t.invalidPlaceholder:"",a=n.getValue();if(typeof r<"u"){var l;return r.isDateTime(a)?l=a:i==="iso"?l=r.fromISO(String(a)):l=r.fromFormat(String(a),i),l.isValid?(t.timezone&&(l=l.setZone(t.timezone)),l.toFormat(s)):o===!0||!a?a:typeof o=="function"?o(a):o}else console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}function RE(n,t,e){var r=window.DateTime||luxon.DateTime,i=t.inputFormat||"yyyy-MM-dd HH:mm:ss",s=typeof t.invalidPlaceholder<"u"?t.invalidPlaceholder:"",o=typeof t.suffix<"u"?t.suffix:!1,a=typeof t.unit<"u"?t.unit:"days",l=typeof t.humanize<"u"?t.humanize:!1,c=typeof t.date<"u"?t.date:r.now(),h=n.getValue();if(typeof r<"u"){var d;return r.isDateTime(h)?d=h:i==="iso"?d=r.fromISO(String(h)):d=r.fromFormat(String(h),i),d.isValid?l?d.diff(c,a).toHuman()+(o?" "+o:""):parseInt(d.diff(c,a)[a])+(o?" "+o:""):s===!0?h:typeof s=="function"?s(h):s}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}function OE(n,t,e){var r=n.getValue();return typeof t[r]>"u"?(console.warn("Missing display value for "+r),r):t[r]}function AE(n,t,e){var r=n.getValue(),i=n.getElement(),s=t&&t.stars?t.stars:5,o=document.createElement("span"),a=document.createElementNS("http://www.w3.org/2000/svg","svg"),l='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',c='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';o.style.verticalAlign="middle",a.setAttribute("width","14"),a.setAttribute("height","14"),a.setAttribute("viewBox","0 0 512 512"),a.setAttribute("xml:space","preserve"),a.style.padding="0 1px",r=r&&!isNaN(r)?parseInt(r):0,r=Math.max(0,Math.min(r,s));for(var h=1;h<=s;h++){var d=a.cloneNode(!0);d.innerHTML=h<=r?l:c,o.appendChild(d)}return i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.style.textOverflow="ellipsis",i.setAttribute("aria-label",r),o}function IE(n,t,e){var r=this.sanitizeHTML(n.getValue())||0,i=document.createElement("span"),s=t&&t.max?t.max:100,o=t&&t.min?t.min:0,a=t&&typeof t.color<"u"?t.color:["red","orange","green"],l="#666666",c,h;if(!(isNaN(r)||typeof n.getValue()>"u")){switch(i.classList.add("tabulator-traffic-light"),h=parseFloat(r)<=s?parseFloat(r):s,h=parseFloat(h)>=o?parseFloat(h):o,c=(s-o)/100,h=Math.round((h-o)/c),typeof a){case"string":l=a;break;case"function":l=a(r);break;case"object":if(Array.isArray(a)){var d=100/a.length,p=Math.floor(h/d);p=Math.min(p,a.length-1),p=Math.max(p,0),l=a[p];break}}return i.style.backgroundColor=l,i}}function NE(n,t={},e){var r=this.sanitizeHTML(n.getValue())||0,i=n.getElement(),s=t.max?t.max:100,o=t.min?t.min:0,a=t.legendAlign?t.legendAlign:"center",l,c,h,d,p;switch(c=parseFloat(r)<=s?parseFloat(r):s,c=parseFloat(c)>=o?parseFloat(c):o,l=(s-o)/100,c=Math.round((c-o)/l),typeof t.color){case"string":h=t.color;break;case"function":h=t.color(r);break;case"object":if(Array.isArray(t.color)){let y=100/t.color.length,x=Math.floor(c/y);x=Math.min(x,t.color.length-1),x=Math.max(x,0),h=t.color[x];break}default:h="#2DC214"}switch(typeof t.legend){case"string":d=t.legend;break;case"function":d=t.legend(r);break;case"boolean":d=r;break;default:d=!1}switch(typeof t.legendColor){case"string":p=t.legendColor;break;case"function":p=t.legendColor(r);break;case"object":if(Array.isArray(t.legendColor)){let y=100/t.legendColor.length,x=Math.floor(c/y);x=Math.min(x,t.legendColor.length-1),x=Math.max(x,0),p=t.legendColor[x]}break;default:p="#000"}i.style.minWidth="30px",i.style.position="relative",i.setAttribute("aria-label",c);var g=document.createElement("div");g.style.display="inline-block",g.style.width=c+"%",g.style.backgroundColor=h,g.style.height="100%",g.setAttribute("data-max",s),g.setAttribute("data-min",o);var m=document.createElement("div");if(m.style.position="relative",m.style.width="100%",m.style.height="100%",d){var b=document.createElement("div");b.style.position="absolute",b.style.top=0,b.style.left=0,b.style.textAlign=a,b.style.width="100%",b.style.color=p,b.innerHTML=d}return e(function(){if(!(n instanceof Nh)){var y=document.createElement("div");y.style.position="absolute",y.style.top="4px",y.style.bottom="4px",y.style.left="4px",y.style.right="4px",i.appendChild(y),i=y}i.appendChild(m),m.appendChild(g),d&&m.appendChild(b)}),""}function DE(n,t,e){return n.getElement().style.backgroundColor=this.sanitizeHTML(n.getValue()),""}function BE(n,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'}function FE(n,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}function zE(n,t,e){var r=n.getValue(),i=t.size||15,s=i+"px",o,a,l=t.hasOwnProperty("onValue")?t.onValue:!0,c=t.hasOwnProperty("offValue")?t.offValue:!1,h=t.onTruthy?r:r===l;return o=document.createElement("div"),o.classList.add("tabulator-toggle"),h?(o.classList.add("tabulator-toggle-on"),o.style.flexDirection="row-reverse",t.onColor&&(o.style.background=t.onColor)):t.offColor&&(o.style.background=t.offColor),o.style.width=2.5*i+"px",o.style.borderRadius=s,t.clickable&&o.addEventListener("click",d=>{n.setValue(h?c:l)}),a=document.createElement("div"),a.classList.add("tabulator-toggle-switch"),a.style.height=s,a.style.width=s,a.style.borderRadius=s,o.appendChild(a),o}function jE(n,t,e){var r=document.createElement("span"),i=n.getRow(),s=n.getTable();return i.watchPosition(o=>{t.relativeToPage&&(o+=s.modules.page.getPageSize()*(s.modules.page.getPage()-1)),r.innerText=o}),r}function HE(n,t,e){return n.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"}var GE={plaintext:EE,html:CE,textarea:ME,money:SE,link:kE,image:LE,tickCross:TE,datetime:PE,datetimediff:RE,lookup:OE,star:AE,traffic:IE,progress:NE,color:DE,buttonTick:BE,buttonCross:FE,toggle:zE,rownum:jE,handle:HE},Ld=class n extends xr{static moduleName="format";static formatters=GE;constructor(t){super(t),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(t){t.modules.format=this.lookupFormatter(t,""),typeof t.definition.formatterPrint<"u"&&(t.modules.format.print=this.lookupFormatter(t,"Print")),typeof t.definition.formatterClipboard<"u"&&(t.modules.format.clipboard=this.lookupFormatter(t,"Clipboard")),typeof t.definition.formatterHtmlOutput<"u"&&(t.modules.format.htmlOutput=this.lookupFormatter(t,"HtmlOutput"))}lookupFormatter(t,e){var r={params:t.definition["formatter"+e+"Params"]||{}},i=t.definition["formatter"+e];switch(typeof i){case"string":n.formatters[i]?r.formatter=n.formatters[i]:(console.warn("Formatter Error - No such formatter found: ",i),r.formatter=n.formatters.plaintext);break;case"function":r.formatter=i;break;default:r.formatter=n.formatters.plaintext;break}return r}cellRendered(t){t.modules.format&&t.modules.format.renderedCallback&&!t.modules.format.rendered&&(t.modules.format.renderedCallback(),t.modules.format.rendered=!0)}formatHeader(t,e,r){var i,s,o,a;return t.definition.titleFormatter?(i=this.getFormatter(t.definition.titleFormatter),o=l=>{t.titleFormatterRendered=l},a={getValue:function(){return e},getElement:function(){return r},getType:function(){return"header"},getColumn:function(){return t.getComponent()},getTable:()=>this.table},s=t.definition.titleFormatterParams||{},s=typeof s=="function"?s():s,i.call(this,a,s,o)):e}formatValue(t){var e=t.getComponent(),r=typeof t.column.modules.format.params=="function"?t.column.modules.format.params(e):t.column.modules.format.params;function i(s){t.modules.format||(t.modules.format={}),t.modules.format.renderedCallback=s,t.modules.format.rendered=!1}return t.column.modules.format.formatter.call(this,e,r,i)}formatExportValue(t,e){var r=t.column.modules.format[e],i;if(r){let s=function(o){t.modules.format||(t.modules.format={}),t.modules.format.renderedCallback=o,t.modules.format.rendered=!1};return i=typeof r.params=="function"?r.params(t.getComponent()):r.params,r.formatter.call(this,t.getComponent(),i,s)}else return this.formatValue(t)}sanitizeHTML(t){if(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=/]/g,function(r){return e[r]})}else return t}emptyToSpace(t){return t===null||typeof t>"u"||t===""?"&nbsp;":t}getFormatter(t){switch(typeof t){case"string":n.formatters[t]?t=n.formatters[t]:(console.warn("Formatter Error - No such formatter found: ",t),t=n.formatters.plaintext);break;case"function":break;default:t=n.formatters.plaintext;break}return t}},Td=class extends xr{static moduleName="frozenColumns";constructor(t){super(t),this.leftColumns=[],this.rightColumns=[],this.initializationMode="left",this.active=!1,this.blocked=!0,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("column-add",this.reinitializeColumns.bind(this)),this.subscribe("column-deleted",this.reinitializeColumns.bind(this)),this.subscribe("column-hide",this.reinitializeColumns.bind(this)),this.subscribe("column-show",this.reinitializeColumns.bind(this)),this.subscribe("columns-loaded",this.reinitializeColumns.bind(this)),this.subscribe("table-redraw",this.layout.bind(this)),this.subscribe("layout-refreshing",this.blockLayout.bind(this)),this.subscribe("layout-refreshed",this.unblockLayout.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this))}blockLayout(){this.blocked=!0}unblockLayout(){this.blocked=!1}layoutCell(t){this.layoutElement(t.element,t.column)}reinitializeColumns(){this.reset(),this.table.columnManager.columnsByIndex.forEach(t=>{this.initializeColumn(t)}),this.layout()}initializeColumn(t){var e={margin:0,edge:!1};t.isGroup||(this.frozenCheck(t)?(e.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(t):this.rightColumns.unshift(t),this.active=!0,t.modules.frozen=e):this.initializationMode="right")}frozenCheck(t){return t.parent.isGroup&&t.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),t.parent.isGroup?this.frozenCheck(t.parent):t.definition.frozen}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(t){t.forEach(e=>{e.calcs.top&&this.layoutRow(e.calcs.top),e.calcs.bottom&&this.layoutRow(e.calcs.bottom),e.groupList&&e.groupList.length&&this.layoutGroupCalcs(e.groupList)})}layoutColumnPosition(t){var e=[],r=0,i=0;this.leftColumns.forEach((s,o)=>{if(s.modules.frozen.marginValue=r,s.modules.frozen.margin=s.modules.frozen.marginValue+"px",s.visible&&(r+=s.getWidth()),o==this.leftColumns.length-1?s.modules.frozen.edge=!0:s.modules.frozen.edge=!1,s.parent.isGroup){var a=this.getColGroupParentElement(s);e.includes(a)||(this.layoutElement(a,s),e.push(a)),a.classList.toggle("tabulator-frozen-left",s.modules.frozen.edge&&s.modules.frozen.position==="left"),a.classList.toggle("tabulator-frozen-right",s.modules.frozen.edge&&s.modules.frozen.position==="right")}else this.layoutElement(s.getElement(),s);t&&s.cells.forEach(l=>{this.layoutElement(l.getElement(!0),s)})}),this.rightColumns.forEach((s,o)=>{s.modules.frozen.marginValue=i,s.modules.frozen.margin=s.modules.frozen.marginValue+"px",s.visible&&(i+=s.getWidth()),o==this.rightColumns.length-1?s.modules.frozen.edge=!0:s.modules.frozen.edge=!1,s.parent.isGroup?this.layoutElement(this.getColGroupParentElement(s),s):this.layoutElement(s.getElement(),s),t&&s.cells.forEach(a=>{this.layoutElement(a.getElement(!0),s)})})}getColGroupParentElement(t){return t.parent.isGroup?this.getColGroupParentElement(t.parent):t.getElement()}layout(){this.active&&!this.blocked&&(this.layoutColumnPosition(),this.reinitializeRows(),this.layoutCalcRows())}reinitializeRows(){var t=this.table.rowManager.getVisibleRows(!0),e=this.table.rowManager.getRows().filter(r=>!t.includes(r));e.forEach(r=>{r.deinitialize()}),t.forEach(r=>{r.type==="row"&&this.layoutRow(r)})}layoutRow(t){this.table.options.layout==="fitDataFill"&&this.rightColumns.length&&(this.table.rowManager.getTableElement().style.minWidth="calc(100% - "+this.rightMargin+")"),this.leftColumns.forEach(e=>{var r=t.getCell(e);r&&this.layoutElement(r.getElement(!0),e)}),this.rightColumns.forEach(e=>{var r=t.getCell(e);r&&this.layoutElement(r.getElement(!0),e)})}layoutElement(t,e){var r;e.modules.frozen&&t&&(t.style.position="sticky",this.table.rtl?r=e.modules.frozen.position==="left"?"right":"left":r=e.modules.frozen.position,t.style[r]=e.modules.frozen.margin,t.classList.add("tabulator-frozen"),t.classList.toggle("tabulator-frozen-left",e.modules.frozen.edge&&e.modules.frozen.position==="left"),t.classList.toggle("tabulator-frozen-right",e.modules.frozen.edge&&e.modules.frozen.position==="right"))}adjustForScrollbar(t){this.rightColumns.length&&(this.table.columnManager.getContentsElement().style.width="calc(100% - "+t+"px)")}getFrozenColumns(){return this.leftColumns.concat(this.rightColumns)}_calcSpace(t,e){var r=0;for(let i=0;i<e;i++)t[i].visible&&(r+=t[i].getWidth());return r}},Pd=class extends xr{static moduleName="frozenRows";constructor(t){super(t),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this)),this.registerTableOption("frozenRowsField","id"),this.registerTableOption("frozenRows",!1)}initialize(){var t=document.createDocumentFragment();this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),t.appendChild(document.createElement("br")),t.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(t,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10),this.table.options.frozenRows&&(this.subscribe("data-processed",this.initializeRows.bind(this)),this.subscribe("row-added",this.initializeRow.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this))),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}initializeRows(){this.table.rowManager.getRows().forEach(t=>{this.initializeRow(t)})}initializeRow(t){var e=this.table.options.frozenRows,r=typeof e;r==="number"?t.getPosition()&&t.getPosition()+this.rows.length<=e&&this.freezeRow(t):r==="function"?e.call(this.table,t.getComponent())&&this.freezeRow(t):Array.isArray(e)&&e.includes(t.data[this.options("frozenRowsField")])&&this.freezeRow(t)}isRowFrozen(t){var e=this.rows.indexOf(t);return e>-1}isFrozen(){return!!this.rows.length}visibleRows(t,e){return this.rows.forEach(r=>{e.push(r)}),e}getRows(t){var e=t.slice(0);return this.rows.forEach(function(r){var i=e.indexOf(r);i>-1&&e.splice(i,1)}),e}freezeRow(t){t.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(t.modules.frozen=!0,this.topElement.appendChild(t.getElement()),t.initialize(),t.normalizeHeight(),this.rows.push(t),this.refreshData(!1,"display"),this.table.rowManager.adjustTableSize(),this.styleRows())}unfreezeRow(t){t.modules.frozen?(t.modules.frozen=!1,this.detachRow(t),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(t){var e=this.rows.indexOf(t);if(e>-1){var r=t.getElement();r.parentNode&&r.parentNode.removeChild(r),this.rows.splice(e,1)}}styleRows(t){this.rows.forEach((e,r)=>{this.table.rowManager.styleRow(e,r)})}},Rd=class{constructor(t){return this._group=t,this.type="GroupComponent",new Proxy(this,{get:function(e,r,i){return typeof e[r]<"u"?e[r]:e._group.groupManager.table.componentFunctionBinder.handle("group",e._group,r)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return this._group.parent?this._group.parent.getComponent():!1}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}scrollTo(t,e){return this._group.groupManager.table.rowManager.scrollToRow(this._group,t,e)}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}},nl=class n{constructor(t,e,r,i,s,o,a){this.groupManager=t,this.parent=e,this.key=i,this.level=r,this.field=s,this.hasSubGroups=r<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=a,this.rows=[],this.groups=[],this.groupList=[],this.generator=o,this.element=!1,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=a?a.visible:typeof t.startOpen[r]<"u"?t.startOpen[r]:t.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(t){t||(this.groupList.length?this.groupList.forEach(function(e){e.wipe()}):this.rows.forEach(e=>{e.modules&&delete e.modules.group})),this.element=!1,this.arrowElement=!1,this.elementContents=!1}createElements(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach(e=>{this._createGroup(e,t)})}addBindings(){var t;this.groupManager.table.options.groupToggleElement&&(t=this.groupManager.table.options.groupToggleElement=="arrow"?this.arrowElement:this.element,t.addEventListener("click",e=>{this.groupManager.table.options.groupToggleElement==="arrow"&&(e.stopPropagation(),e.stopImmediatePropagation()),setTimeout(()=>{this.toggleVisibility()})}))}_createGroup(t,e){var r=e+"_"+t,i=new n(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],this.old?this.old.groups[r]:!1);this.groups[r]=i,this.groupList.push(i)}_addRowToGroup(t){var e=this.level+1;if(this.hasSubGroups){var r=this.groupManager.groupIDLookups[e].func(t.getData()),i=e+"_"+r;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[i]&&this.groups[i].addRow(t):(this.groups[i]||this._createGroup(r,e),this.groups[i].addRow(t))}}_addRow(t){this.rows.push(t),t.modules.group=this}insertRow(t,e,r){var i=this.conformRowData({});t.updateData(i);var s=this.rows.indexOf(e);s>-1?r?this.rows.splice(s+1,0,t):this.rows.splice(s,0,t):r?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(t){this.arrowElement&&(this.arrowElement.style.marginLeft=t,this.groupList.forEach(function(e){e.scrollHeader(t)}))}getRowIndex(t){}conformRowData(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t}removeRow(t){var e=this.rows.indexOf(t),r=t.getElement();e>-1&&this.rows.splice(e,1),!this.groupManager.table.options.groupValues&&!this.rows.length?(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0)):(r.parentNode&&r.parentNode.removeChild(r),this.groupManager.blockRedraw||(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)))}removeGroup(t){var e=t.level+"_"+t.key,r;this.groups[e]&&(delete this.groups[e],r=this.groupList.indexOf(t),r>-1&&this.groupList.splice(r,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(){var t=[];return t.push(this),this._visSet(),this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.visible?this.groupList.length?this.groupList.forEach(function(e){t=t.concat(e.getHeadersAndRows())}):(this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),t=t.concat(this.rows),this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))):!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&(this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))),t}getData(t,e){var r=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(i=>{r.push(i.getData(e||"data"))}),r}getRowCount(){var t=0;return this.groupList.length?this.groupList.forEach(e=>{t+=e.getRowCount()}):t=this.rows.length,t}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination?(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(t=>{var e=t.getHeadersAndRows();e.forEach(r=>{r.detachElement()})}):this.rows.forEach(t=>{var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.updateGroupRows(!0)):this.groupManager.updateGroupRows(!0),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var t=this.generateElement();this.groupList.length?this.groupList.forEach(e=>{var r=e.getHeadersAndRows();r.forEach(i=>{var s=i.getElement();t.parentNode.insertBefore(s,t.nextSibling),i.initialize(),t=s})}):this.rows.forEach(e=>{var r=e.getElement();t.parentNode.insertBefore(r,t.nextSibling),e.initialize(),t=r}),this.groupManager.updateGroupRows(!0)}else this.groupManager.updateGroupRows(!0);this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var t=[];typeof this.visible=="function"&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))}getRowGroup(t){var e=!1;return this.groupList.length?this.groupList.forEach(function(r){var i=r.getRowGroup(t);i&&(e=i)}):this.rows.find(function(r){return r===t})&&(e=this),e}getSubGroups(t){var e=[];return this.groupList.forEach(function(r){e.push(t?r.getComponent():r)}),e}getRows(t,e){var r=[];return e&&this.groupList.length?this.groupList.forEach(i=>{r=r.concat(i.getRows(t,e))}):this.rows.forEach(function(i){r.push(t?i.getComponent():i)}),r}generateGroupHeaderContents(){var t=[],e=this.getRows(!1,!0);for(e.forEach(function(r){t.push(r.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(t=[]){return t.unshift(this.key),this.parent&&this.parent.getPath(t),t}getElement(){return this.elementContents?this.element:this.generateElement()}generateElement(){this.addBindings=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(t){(!this.initialized||t)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Ai.elVisible(this.element)&&this.initialize(!0)}setHeight(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}rendered(){}getComponent(){return this.component||(this.component=new Rd(this)),this.component}},Od=class extends xr{static moduleName="groupRows";constructor(t){super(t),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayHandler=this.getRows.bind(this),this.blockRedraw=!1,this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.subscribe("table-destroy",this._blockRedrawing.bind(this)),this.subscribe("rows-wipe",this._blockRedrawing.bind(this)),this.subscribe("rows-wiped",this._restore_redrawing.bind(this)),this.table.options.groupBy&&(this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("table-built",this.configureGroupSetup.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}_blockRedrawing(){this.blockRedraw=!0}_restore_redrawing(){this.blockRedraw=!1}configureGroupSetup(){if(this.table.options.groupBy){var t=this.table.options.groupBy,e=this.table.options.groupStartOpen,r=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(t)&&Array.isArray(r)&&t.length>r.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(s,o)=>{this.headerGenerator[0]=(a,l,c)=>(typeof a>"u"?"":a)+"<span>("+l+" "+(l===1?s:o.groups.items)+")</span>"}),this.groupIDLookups=[],t)this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"){var i=this.table.columnManager.getRealColumns();i.forEach(s=>{s.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),s.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()})}Array.isArray(t)||(t=[t]),t.forEach((s,o)=>{var a,l;typeof s=="function"?a=s:(l=this.table.columnManager.getColumnByField(s),l?a=function(c){return l.getFieldValue(c)}:a=function(c){return c[s]}),this.groupIDLookups.push({field:typeof s=="function"?!1:s,func:a,values:this.allowedValues?this.allowedValues[o]:!1})}),e&&(Array.isArray(e)||(e=[e]),e.forEach(s=>{}),this.startOpen=e),r&&(this.headerGenerator=Array.isArray(r)?r:[r])}else this.groupList=[],this.groups={}}rowSample(t,e){if(this.table.options.groupBy){var r=this.getGroups(!1)[0];e.push(r.getRows(!1)[0])}return e}virtualRenderFill(){var t=this.table.rowManager.tableElement,e=this.table.rowManager.getVisibleRows();if(this.table.options.groupBy)e=e.filter(r=>r.type!=="group"),t.style.minWidth=e.length?"":this.table.columnManager.getWidth()+"px";else return e}rowAddingIndex(t,e,r){if(this.table.options.groupBy){this.assignRowToGroup(t);var i=t.modules.group.rows;return i.length>1&&(!e||e&&i.indexOf(e)==-1?r?i[0]!==t&&(e=i[0],this.table.rowManager.moveRowInArray(t.modules.group.rows,t,e,!r)):i[i.length-1]!==t&&(e=i[i.length-1],this.table.rowManager.moveRowInArray(t.modules.group.rows,t,e,!r)):this.table.rowManager.moveRowInArray(t.modules.group.rows,t,e,!r)),e}}trackChanges(){this.dispatch("group-changed")}setGroupBy(t){this.table.options.groupBy=t,this.initialized||this.initialize(),this.configureGroupSetup(),!t&&this.table.modExists("columnCalcs")&&this.table.options.columnCalcs===!0&&this.table.modules.columnCalcs.reinitializeCalcs(),this.refreshData(),this.trackChanges()}setGroupValues(t){this.table.options.groupValues=t,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(t){this.table.options.groupStartOpen=t,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(t){this.table.options.groupHeader=t,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(t){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(t){return t.modules.group?t.modules.group.getComponent():!1}rowMoving(t,e,r){if(this.table.options.groupBy){!r&&e instanceof nl&&(e=this.table.rowManager.prevDisplayRow(t)||e);var i=e instanceof nl?e:e.modules.group,s=t instanceof nl?t:t.modules.group;i===s?this.table.rowManager.moveRowInArray(i.rows,t,e,r):(s&&s.removeRow(t),i.insertRow(t,e,r))}}rowDeleting(t){this.table.options.groupBy&&t.modules.group&&t.modules.group.removeRow(t)}rowsUpdated(t){this.table.options.groupBy&&this.updateGroupRows(!0)}cellUpdated(t){this.table.options.groupBy&&this.reassignRowToGroup(t.row)}getRows(t){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(t),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):t.slice(0)}getGroups(t){var e=[];return this.groupList.forEach(function(r){e.push(t?r.getComponent():r)}),e}getChildGroups(t){var e=[];return t||(t=this),t.groupList.forEach(r=>{r.groupList.length?e=e.concat(this.getChildGroups(r)):e.push(r)}),e}wipe(){this.table.options.groupBy&&(this.groupList.forEach(function(t){t.wipe()}),this.groupList=[],this.groups={})}pullGroupListData(t){var e=[];return t.forEach(r=>{var i={};i.level=0,i.rowCount=0,i.headerContent="";var s=[];r.hasSubGroups?(s=this.pullGroupListData(r.groupList),i.level=r.level,i.rowCount=s.length-r.groupList.length,i.headerContent=r.generator(r.key,i.rowCount,r.rows,r),e.push(i),e=e.concat(s)):(i.level=r.level,i.headerContent=r.generator(r.key,r.rows.length,r.rows,r),i.rowCount=r.getRows().length,e.push(i),r.getRows().forEach(o=>{e.push(o.getData("data"))}))}),e}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(t){var e=!1;return this.options("dataTree")&&(t=this.table.modules.dataTree.getTreeParentRoot(t)),this.groupList.forEach(r=>{var i=r.getRowGroup(t);i&&(e=i)}),e}countGroups(){return this.groupList.length}generateGroups(t){var e=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(r=>{this.createGroup(r,0,e)}),t.forEach(r=>{this.assignRowToExistingGroup(r,e)})):t.forEach(r=>{this.assignRowToGroup(r,e)}),Object.values(e).forEach(r=>{r.wipe(!0)})}createGroup(t,e,r){var i=e+"_"+t,s;r=r||[],s=new nl(this,!1,e,t,this.groupIDLookups[0].field,this.headerGenerator[0],r[i]),this.groups[i]=s,this.groupList.push(s)}assignRowToExistingGroup(t,e){var r=this.groupIDLookups[0].func(t.getData()),i="0_"+r;this.groups[i]&&this.groups[i].addRow(t)}assignRowToGroup(t,e){var r=this.groupIDLookups[0].func(t.getData()),i=!this.groups["0_"+r];return i&&this.createGroup(r,0,e),this.groups["0_"+r].addRow(t),!i}reassignRowToGroup(t){if(t.type==="row"){var e=t.modules.group,r=e.getPath(),i=this.getExpectedPath(t),s;s=r.length==i.length&&r.every((o,a)=>o===i[a]),s||(e.removeRow(t),this.assignRowToGroup(t,this.groups),this.refreshData(!0))}}getExpectedPath(t){var e=[],r=t.getData();return this.groupIDLookups.forEach(i=>{e.push(i.func(r))}),e}updateGroupRows(t){var e=[];return this.blockRedraw||(this.groupList.forEach(r=>{e=e.concat(r.getHeadersAndRows())}),t&&this.refreshData(!0)),e}scrollHeaders(t){this.table.options.groupBy&&(this.table.options.renderHorizontal==="virtual"&&(t-=this.table.columnManager.renderer.vDomPadLeft),t=t+"px",this.groupList.forEach(e=>{e.scrollHeader(t)}))}removeGroup(t){var e=t.level+"_"+t.key,r;this.groups[e]&&(delete this.groups[e],r=this.groupList.indexOf(t),r>-1&&this.groupList.splice(r,1))}checkBasicModeGroupHeaderWidth(){var t=this.table.rowManager.tableElement,e=!0;this.table.rowManager.getDisplayRows().forEach((r,i)=>{this.table.rowManager.styleRow(r,i),t.appendChild(r.getElement()),r.initialize(!0),r.type!=="group"&&(e=!1)}),e?t.style.minWidth=this.table.columnManager.getWidth()+"px":t.style.minWidth=""}},UE={cellEdit:function(n){n.component.setValueProcessData(n.data.oldValue),n.component.cellRendered()},rowAdd:function(n){n.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowDelete:function(n){var t=this.table.rowManager.addRowActual(n.data.data,n.data.pos,n.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(n.component,t),this.table.rowManager.checkPlaceholder()},rowMove:function(n){var t=n.data.posFrom-n.data.posTo>0;this.table.rowManager.moveRowActual(n.component,this.table.rowManager.getRowFromPosition(n.data.posFrom),t),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},VE={cellEdit:function(n){n.component.setValueProcessData(n.data.newValue),n.component.cellRendered()},rowAdd:function(n){var t=this.table.rowManager.addRowActual(n.data.data,n.data.pos,n.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(n.component,t),this.table.rowManager.checkPlaceholder()},rowDelete:function(n){n.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowMove:function(n){this.table.rowManager.moveRowActual(n.component,this.table.rowManager.getRowFromPosition(n.data.posTo),n.data.after),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},qE={undo:["ctrl + 90","meta + 90"],redo:["ctrl + 89","meta + 89"]},WE={undo:function(n){var t=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t||(n.preventDefault(),this.table.modules.history.undo()))},redo:function(n){var t=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t||(n.preventDefault(),this.table.modules.history.redo()))}},XE={keybindings:{bindings:qE,actions:WE}},Ad=class n extends xr{static moduleName="history";static moduleExtensions=XE;static undoers=UE;static redoers=VE;constructor(t){super(t),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(t,e,r){this.action("rowMove",t,{posFrom:t.getPosition(),posTo:e.getPosition(),to:e,after:r})}rowAdded(t,e,r,i){this.action("rowAdd",t,{data:e,pos:r,index:i})}rowDeleted(t){var e,r;this.table.options.groupBy?(r=t.getComponent().getGroup()._getSelf().rows,e=r.indexOf(t),e&&(e=r[e-1])):(e=t.table.rowManager.getRowIndex(t),e&&(e=t.table.rowManager.rows[e-1])),this.action("rowDelete",t,{data:t.getData(),pos:!e,index:e})}cellUpdated(t){this.action("cellEdit",t,{oldValue:t.oldValue,newValue:t.value})}clear(){this.history=[],this.index=-1}action(t,e,r){this.history=this.history.slice(0,this.index+1),this.history.push({type:t,component:e,data:r}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(t){var e=this.history.findIndex(function(r){return r.component===t});e>-1&&(this.history.splice(e,1),e<=this.index&&this.index--,this.clearComponentHistory(t))}undo(){if(this.index>-1){let t=this.history[this.index];return n.undoers[t.type].call(this,t),this.index--,this.dispatchExternal("historyUndo",t.type,t.component.getComponent(),t.data),!0}else return console.warn(this.options("history")?"History Undo Error - No more history to undo":"History module not enabled"),!1}redo(){if(this.history.length-1>this.index){this.index++;let t=this.history[this.index];return n.redoers[t.type].call(this,t),this.dispatchExternal("historyRedo",t.type,t.component.getComponent(),t.data),!0}else return console.warn(this.options("history")?"History Redo Error - No more history to redo":"History module not enabled"),!1}_rebindRow(t,e){this.history.forEach(function(r){if(r.component instanceof ts)r.component===t&&(r.component=e);else if(r.component instanceof ya&&r.component.row===t){var i=r.component.column.getField();i&&(r.component=e.getCell(i))}})}},Id=class extends xr{static moduleName="htmlTableImport";constructor(t){super(t),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&this.table.originalElement.tagName==="TABLE"&&(this.table.originalElement.childNodes.length?this.parseTable():console.warn("Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element."))}parseTable(){var t=this.table.originalElement,e=this.table.options,r=t.getElementsByTagName("th"),i=t.getElementsByTagName("tbody")[0],s=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),i=i?i.getElementsByTagName("tr"):[],this._extractOptions(t,e),r.length?this._extractHeaders(r,i):this._generateBlankHeaders(r,i);for(var o=0;o<i.length;o++){var a=i[o],l=a.getElementsByTagName("td"),c={};this.hasIndex||(c[e.index]=o);for(var h=0;h<l.length;h++){var d=l[h];typeof this.fieldIndex[h]<"u"&&(c[this.fieldIndex[h]]=d.innerHTML)}s.push(c)}e.data=s,this.dispatchExternal("htmlImported")}_extractOptions(t,e,r){var i=t.attributes,s=Object.keys(r||e),o={};s.forEach(h=>{o[h.toLowerCase()]=h});for(var a in i){var l=i[a],c;l&&typeof l=="object"&&l.name&&l.name.indexOf("tabulator-")===0&&(c=l.name.replace("tabulator-",""),typeof o[c]<"u"&&(e[o[c]]=this._attribValue(l.value)))}}_attribValue(t){return t==="true"?!0:t==="false"?!1:t}_findCol(t){var e=this.table.options.columns.find(r=>r.title===t);return e||!1}_extractHeaders(t,e){for(var r=0;r<t.length;r++){var i=t[r],s=!1,o=this._findCol(i.textContent),a;o?s=!0:o={title:i.textContent.trim()},o.field||(o.field=i.textContent.trim().toLowerCase().replaceAll(" ","_")),a=i.getAttribute("width"),a&&!o.width&&(o.width=a),this._extractOptions(i,o,this.table.columnManager.optionsList.registeredDefaults),this.fieldIndex[r]=o.field,o.field==this.table.options.index&&(this.hasIndex=!0),s||this.table.options.columns.push(o)}}_generateBlankHeaders(t,e){for(var r=0;r<t.length;r++){var i=t[r],s={title:"",field:"col"+r};this.fieldIndex[r]=s.field;var o=i.getAttribute("width");o&&(s.width=o),this.table.options.columns.push(s)}}};function $E(n){var t=[],e=0,r=0,i=!1;for(let s=0;s<n.length;s++){let o=n[s],a=n[s+1];if(t[e]||(t[e]=[]),t[e][r]||(t[e][r]=""),o=='"'&&i&&a=='"'){t[e][r]+=o,s++;continue}if(o=='"'){i=!i;continue}if(o==","&&!i){r++;continue}if(o=="\r"&&a==`
`&&!i){r=0,e++,s++;continue}if((o=="\r"||o==`
`)&&!i){r=0,e++;continue}t[e][r]+=o}return t}function YE(n){try{return JSON.parse(n)}catch(t){return console.warn("JSON Import Error - File contents is invalid JSON",t),Promise.reject()}}function ZE(n){return n}function KE(n,t){var e=XLSX.read(n),r=e.Sheets[e.SheetNames[0]];return XLSX.utils.sheet_to_json(r,{})}var JE={csv:$E,json:YE,array:ZE,xlsx:KE},Nd=class n extends xr{static moduleName="import";static importers=JE;constructor(t){super(t),this.registerTableOption("importFormat"),this.registerTableOption("importReader","text")}initialize(){this.registerTableFunction("import",this.importFromFile.bind(this)),this.table.options.importFormat&&(this.subscribe("data-loading",this.loadDataCheck.bind(this),10),this.subscribe("data-load",this.loadData.bind(this),10))}loadDataCheck(t){return this.table.options.importFormat&&(typeof t=="string"||Array.isArray(t)&&t.length&&Array.isArray(t))}loadData(t,e,r,i,s){return this.importData(this.lookupImporter(),t).then(this.structureData.bind(this)).catch(o=>(console.error("Import Error:",o||"Unable to import data"),Promise.reject(o)))}lookupImporter(t){var e;return t||(t=this.table.options.importFormat),typeof t=="string"?e=n.importers[t]:e=t,e||console.error("Import Error - Importer not found:",t),e}importFromFile(t,e,r){var i=this.lookupImporter(t);if(i)return this.pickFile(e,r).then(this.importData.bind(this,i)).then(this.structureData.bind(this)).then(this.setData.bind(this)).catch(s=>(this.dispatch("import-error",s),this.dispatchExternal("importError",s),console.error("Import Error:",s||"Unable to import file"),Promise.reject(s)))}pickFile(t,e){return new Promise((r,i)=>{var s=document.createElement("input");s.type="file",s.accept=t,s.addEventListener("change",o=>{var a=s.files[0],l=new FileReader;switch(this.dispatch("import-importing",s.files),this.dispatchExternal("importImporting",s.files),e||this.table.options.importReader){case"buffer":l.readAsArrayBuffer(a);break;case"binary":l.readAsBinaryString(a);break;case"url":l.readAsDataURL(a);break;case"text":default:l.readAsText(a)}l.onload=c=>{r(l.result)},l.onerror=c=>{console.warn("File Load Error - Unable to read file"),i()}}),this.dispatch("import-choose"),this.dispatchExternal("importChoose"),s.click()})}importData(t,e){var r=t.call(this.table,e);return r instanceof Promise?r:r?Promise.resolve(r):Promise.reject()}structureData(t){var e=[];return Array.isArray(t)&&t.length&&Array.isArray(t[0])?(this.table.options.autoColumns?e=this.structureArrayToObject(t):e=this.structureArrayToColumns(t),e):t}structureArrayToObject(t){var e=t.shift(),r=t.map(i=>{var s={};return e.forEach((o,a)=>{s[o]=i[a]}),s});return r}structureArrayToColumns(t){var e=[],r=this.table.getColumns();return r[0]&&t[0][0]&&r[0].getDefinition().title===t[0][0]&&t.shift(),t.forEach(i=>{var s={};i.forEach((o,a)=>{var l=r[a];l&&(s[l.getField()]=o)}),e.push(s)}),e}setData(t){return this.dispatch("import-imported",t),this.dispatchExternal("importImported",t),this.table.setData(t)}},Dd=class extends xr{static moduleName="interaction";constructor(t){super(t),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowMouseDown:"row-mousedown",rowMouseUp:"row-mouseup",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellMouseDown:"cell-mousedown",cellMouseUp:"cell-mouseup",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerMouseDown:"column-mousedown",headerMouseUp:"column-mouseup",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupMouseDown:"group-mousedown",groupMouseUp:"group-mouseup",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null},group:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerMouseDown"),this.registerColumnOption("headerMouseUp"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellMouseDown"),this.registerColumnOption("cellMouseUp"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this)),this.subscribe("scroll-horizontal",this.clearTouchWatchers.bind(this)),this.subscribe("scroll-vertical",this.clearTouchWatchers.bind(this))}clearTouchWatchers(){var t=Object.values(this.touchWatchers);t.forEach(e=>{for(let r in e)e[r]=null})}cellContentsSelectionFixer(t,e){var r;if(!(this.table.modExists("edit")&&this.table.modules.edit.currentCell===e)){t.preventDefault();try{document.selection?(r=document.body.createTextRange(),r.moveToElementText(e.getElement()),r.select()):window.getSelection&&(r=document.createRange(),r.selectNode(e.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(r))}catch{}}}initializeExternalEvents(){for(let t in this.eventMap)this.subscriptionChangeExternal(t,this.subscriptionChanged.bind(this,t))}subscriptionChanged(t,e){e?this.subscribers[t]||(this.eventMap[t].includes("-")?(this.subscribers[t]=this.handle.bind(this,t),this.subscribe(this.eventMap[t],this.subscribers[t])):this.subscribeTouchEvents(t)):this.eventMap[t].includes("-")?this.subscribers[t]&&!this.columnSubscribers[t]&&!this.subscribedExternal(t)&&(this.unsubscribe(this.eventMap[t],this.subscribers[t]),delete this.subscribers[t]):this.unsubscribeTouchEvents(t)}subscribeTouchEvents(t){var e=this.eventMap[t];this.touchSubscribers[e+"-touchstart"]||(this.touchSubscribers[e+"-touchstart"]=this.handleTouch.bind(this,e,"start"),this.touchSubscribers[e+"-touchend"]=this.handleTouch.bind(this,e,"end"),this.subscribe(e+"-touchstart",this.touchSubscribers[e+"-touchstart"]),this.subscribe(e+"-touchend",this.touchSubscribers[e+"-touchend"])),this.subscribers[t]=!0}unsubscribeTouchEvents(t){var e=!0,r=this.eventMap[t];if(this.subscribers[t]&&!this.subscribedExternal(t)){delete this.subscribers[t];for(let i in this.eventMap)this.eventMap[i]===r&&this.subscribers[i]&&(e=!1);e&&(this.unsubscribe(r+"-touchstart",this.touchSubscribers[r+"-touchstart"]),this.unsubscribe(r+"-touchend",this.touchSubscribers[r+"-touchend"]),delete this.touchSubscribers[r+"-touchstart"],delete this.touchSubscribers[r+"-touchend"])}}initializeColumn(t){var e=t.definition;for(let r in this.eventMap)e[r]&&(this.subscriptionChanged(r,!0),this.columnSubscribers[r]||(this.columnSubscribers[r]=[]),this.columnSubscribers[r].push(t))}handle(t,e,r){this.dispatchEvent(t,e,r)}handleTouch(t,e,r,i){var s=this.touchWatchers[t];switch(t==="column"&&(t="header"),e){case"start":s.tap=!0,clearTimeout(s.tapHold),s.tapHold=setTimeout(()=>{clearTimeout(s.tapHold),s.tapHold=null,s.tap=null,clearTimeout(s.tapDbl),s.tapDbl=null,this.dispatchEvent(t+"TapHold",r,i)},1e3);break;case"end":s.tap&&(s.tap=null,this.dispatchEvent(t+"Tap",r,i)),s.tapDbl?(clearTimeout(s.tapDbl),s.tapDbl=null,this.dispatchEvent(t+"DblTap",r,i)):s.tapDbl=setTimeout(()=>{clearTimeout(s.tapDbl),s.tapDbl=null},300),clearTimeout(s.tapHold),s.tapHold=null;break}}dispatchEvent(t,e,r){var i=r.getComponent(),s;this.columnSubscribers[t]&&(r instanceof ya?s=r.column.definition[t]:r instanceof ga&&(s=r.definition[t]),s&&s(e,i)),this.dispatchExternal(t,e,i)}},QE={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,navLeft:37,navRight:39,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35},tC={keyBlock:function(n){n.stopPropagation(),n.preventDefault()},scrollPageUp:function(n){var t=this.table.rowManager,e=t.scrollTop-t.element.clientHeight;n.preventDefault(),t.displayRowsCount&&(e>=0?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(n){var t=this.table.rowManager,e=t.scrollTop+t.element.clientHeight,r=t.element.scrollHeight;n.preventDefault(),t.displayRowsCount&&(e<=r?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(n){var t=this.table.rowManager;n.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(n){var t=this.table.rowManager;n.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(n){this.dispatch("keybinding-nav-prev",n)},navNext:function(n){this.dispatch("keybinding-nav-next",n)},navLeft:function(n){this.dispatch("keybinding-nav-left",n)},navRight:function(n){this.dispatch("keybinding-nav-right",n)},navUp:function(n){this.dispatch("keybinding-nav-up",n)},navDown:function(n){this.dispatch("keybinding-nav-down",n)}},Bd=class n extends xr{static moduleName="keybindings";static bindings=QE;static actions=tC;constructor(t){super(t),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",{}),this.registerTableOption("tabEndNewRow",!1)}initialize(){var t=this.table.options.keybindings,e={};this.watchKeys={},this.pressedKeys=[],t!==!1&&(Object.assign(e,n.bindings),Object.assign(e,t),this.mapBindings(e),this.bindEvents()),this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(t){for(let e in t)n.actions[e]?t[e]&&(typeof t[e]!="object"&&(t[e]=[t[e]]),t[e].forEach(r=>{var i=Array.isArray(r)?r:[r];i.forEach(s=>{this.mapBinding(e,s)})})):console.warn("Key Binding Error - no such action:",e)}mapBinding(t,e){var r={action:n.actions[t],keys:[],ctrl:!1,shift:!1,meta:!1},i=e.toString().toLowerCase().split(" ").join("").split("+");i.forEach(s=>{switch(s){case"ctrl":r.ctrl=!0;break;case"shift":r.shift=!0;break;case"meta":r.meta=!0;break;default:s=isNaN(s)?s.toUpperCase().charCodeAt(0):parseInt(s),r.keys.push(s),this.watchKeys[s]||(this.watchKeys[s]=[]),this.watchKeys[s].push(r)}})}bindEvents(){var t=this;this.keyupBinding=function(e){var r=e.keyCode,i=t.watchKeys[r];i&&(t.pressedKeys.push(r),i.forEach(function(s){t.checkBinding(e,s)}))},this.keydownBinding=function(e){var r=e.keyCode,i=t.watchKeys[r];if(i){var s=t.pressedKeys.indexOf(r);s>-1&&t.pressedKeys.splice(s,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(t,e){var r=!0;return t.ctrlKey==e.ctrl&&t.shiftKey==e.shift&&t.metaKey==e.meta?(e.keys.forEach(i=>{var s=this.pressedKeys.indexOf(i);s==-1&&(r=!1)}),r&&e.action.call(this,t),!0):!1}},Fd=class extends xr{static moduleName="menu";constructor(t){super(t),this.menuContainer=null,this.nestedMenuBlock=!1,this.currentComponent=null,this.rootPopup=null,this.columnSubscribers={},this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("rowDblClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerTableOption("groupDblClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerClickMenu"),this.registerColumnOption("headerDblClickMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("headerMenuIcon"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu"),this.registerColumnOption("dblClickMenu")}initialize(){this.deprecatedOptionsCheck(),this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeRowWatchers(){this.table.options.rowContextMenu&&(this.subscribe("row-contextmenu",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu)),this.table.on("rowTapHold",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu))),this.table.options.rowClickMenu&&this.subscribe("row-click",this.loadMenuEvent.bind(this,this.table.options.rowClickMenu)),this.table.options.rowDblClickMenu&&this.subscribe("row-dblclick",this.loadMenuEvent.bind(this,this.table.options.rowDblClickMenu))}initializeGroupWatchers(){this.table.options.groupContextMenu&&(this.subscribe("group-contextmenu",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu)),this.table.on("groupTapHold",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu))),this.table.options.groupClickMenu&&this.subscribe("group-click",this.loadMenuEvent.bind(this,this.table.options.groupClickMenu)),this.table.options.groupDblClickMenu&&this.subscribe("group-dblclick",this.loadMenuEvent.bind(this,this.table.options.groupDblClickMenu))}initializeColumn(t){var e=t.definition;e.headerContextMenu&&!this.columnSubscribers.headerContextMenu&&(this.columnSubscribers.headerContextMenu=this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextMenu),this.table.on("headerTapHold",this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"))),e.headerClickMenu&&!this.columnSubscribers.headerClickMenu&&(this.columnSubscribers.headerClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerClickMenu"),this.subscribe("column-click",this.columnSubscribers.headerClickMenu)),e.headerDblClickMenu&&!this.columnSubscribers.headerDblClickMenu&&(this.columnSubscribers.headerDblClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerDblClickMenu"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickMenu)),e.headerMenu&&this.initializeColumnHeaderMenu(t),e.contextMenu&&!this.columnSubscribers.contextMenu&&(this.columnSubscribers.contextMenu=this.loadMenuTableCellEvent.bind(this,"contextMenu"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextMenu),this.table.on("cellTapHold",this.loadMenuTableCellEvent.bind(this,"contextMenu"))),e.clickMenu&&!this.columnSubscribers.clickMenu&&(this.columnSubscribers.clickMenu=this.loadMenuTableCellEvent.bind(this,"clickMenu"),this.subscribe("cell-click",this.columnSubscribers.clickMenu)),e.dblClickMenu&&!this.columnSubscribers.dblClickMenu&&(this.columnSubscribers.dblClickMenu=this.loadMenuTableCellEvent.bind(this,"dblClickMenu"),this.subscribe("cell-dblclick",this.columnSubscribers.dblClickMenu))}initializeColumnHeaderMenu(t){var e=t.definition.headerMenuIcon,r;r=document.createElement("span"),r.classList.add("tabulator-header-popup-button"),e?(typeof e=="function"&&(e=e(t.getComponent())),e instanceof HTMLElement?r.appendChild(e):r.innerHTML=e):r.innerHTML="&vellip;",r.addEventListener("click",i=>{i.stopPropagation(),i.preventDefault(),this.loadMenuEvent(t.definition.headerMenu,i,t)}),t.titleElement.insertBefore(r,t.titleElement.firstChild)}loadMenuTableCellEvent(t,e,r){r._cell&&(r=r._cell),r.column.definition[t]&&this.loadMenuEvent(r.column.definition[t],e,r)}loadMenuTableColumnEvent(t,e,r){r._column&&(r=r._column),r.definition[t]&&this.loadMenuEvent(r.definition[t],e,r)}loadMenuEvent(t,e,r){r._group?r=r._group:r._row&&(r=r._row),t=typeof t=="function"?t.call(this.table,e,r.getComponent()):t,this.loadMenu(e,r,t)}loadMenu(t,e,r,i,s){var o=!(t instanceof MouseEvent),a=document.createElement("div"),l;if(a.classList.add("tabulator-menu"),o||t.preventDefault(),!(!r||!r.length)){if(i)l=s.child(a);else{if(this.nestedMenuBlock){if(this.rootPopup)return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.rootPopup&&this.rootPopup.hide(),this.rootPopup=l=this.popup(a)}r.forEach(c=>{var h=document.createElement("div"),d=c.label,p=c.disabled;c.separator?h.classList.add("tabulator-menu-separator"):(h.classList.add("tabulator-menu-item"),typeof d=="function"&&(d=d.call(this.table,e.getComponent())),d instanceof Node?h.appendChild(d):h.innerHTML=d,typeof p=="function"&&(p=p.call(this.table,e.getComponent())),p?(h.classList.add("tabulator-menu-item-disabled"),h.addEventListener("click",g=>{g.stopPropagation()})):c.menu&&c.menu.length?h.addEventListener("click",g=>{g.stopPropagation(),this.loadMenu(g,e,c.menu,h,l)}):c.action&&h.addEventListener("click",g=>{c.action(g,e.getComponent())}),c.menu&&c.menu.length&&h.classList.add("tabulator-menu-item-submenu")),a.appendChild(h)}),a.addEventListener("click",c=>{this.rootPopup&&this.rootPopup.hide()}),l.show(i||t),l===this.rootPopup&&(this.rootPopup.hideOnBlur(()=>{this.rootPopup=null,this.currentComponent&&(this.dispatch("menu-closed",r,l),this.dispatchExternal("menuClosed",this.currentComponent.getComponent()),this.currentComponent=null)}),this.currentComponent=e,this.dispatch("menu-opened",r,l),this.dispatchExternal("menuOpened",e.getComponent()))}}},zd=class extends xr{static moduleName="moveColumn";constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.classList.add("tabulator-col-placeholder"),t}initialize(){this.table.options.movableColumns&&(this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("alert-show",this.abortMove.bind(this)))}abortMove(){clearTimeout(this.checkTimeout)}initializeColumn(t){var e=this,r={},i;!t.modules.frozen&&!t.isGroup&&!t.isRowHeader&&(i=t.getElement(),r.mousemove=function(s){t.parent===e.moving.parent&&((e.touchMove?s.touches[0].pageX:s.pageX)-Ai.elOffset(i).left+e.table.columnManager.contentsElement.scrollLeft>t.getWidth()/2?(e.toCol!==t||!e.toColAfter)&&(i.parentNode.insertBefore(e.placeholderElement,i.nextSibling),e.moveColumn(t,!0)):(e.toCol!==t||e.toColAfter)&&(i.parentNode.insertBefore(e.placeholderElement,i),e.moveColumn(t,!1)))}.bind(e),i.addEventListener("mousedown",function(s){e.touchMove=!1,s.which===1&&(e.checkTimeout=setTimeout(function(){e.startMove(s,t)},e.checkPeriod))}),i.addEventListener("mouseup",function(s){s.which===1&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),e.bindTouchEvents(t)),t.modules.moveColumn=r}bindTouchEvents(t){var e=t.getElement(),r=!1,i,s,o,a,l,c;e.addEventListener("touchstart",h=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,i=t.nextColumn(),o=i?i.getWidth()/2:0,s=t.prevColumn(),a=s?s.getWidth()/2:0,l=0,c=0,r=!1,this.startMove(h,t)},this.checkPeriod)},{passive:!0}),e.addEventListener("touchmove",h=>{var d,p;this.moving&&(this.moveHover(h),r||(r=h.touches[0].pageX),d=h.touches[0].pageX-r,d>0?i&&d-l>o&&(p=i,p!==t&&(r=h.touches[0].pageX,p.getElement().parentNode.insertBefore(this.placeholderElement,p.getElement().nextSibling),this.moveColumn(p,!0))):s&&-d-c>a&&(p=s,p!==t&&(r=h.touches[0].pageX,p.getElement().parentNode.insertBefore(this.placeholderElement,p.getElement()),this.moveColumn(p,!1))),p&&(i=p.nextColumn(),l=o,o=i?i.getWidth()/2:0,s=p.prevColumn(),c=a,a=s?s.getWidth()/2:0))},{passive:!0}),e.addEventListener("touchend",h=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(h)})}startMove(t,e){var r=e.getElement(),i=this.table.columnManager.getContentsElement(),s=this.table.columnManager.getHeadersElement();this.table.modules.selectRange&&this.table.modules.selectRange.columnSelection&&this.table.modules.selectRange.mousedown&&this.table.modules.selectRange.selecting==="column"||(this.moving=e,this.startX=(this.touchMove?t.touches[0].pageX:t.pageX)-Ai.elOffset(r).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",r.parentNode.insertBefore(this.placeholderElement,r),r.parentNode.removeChild(r),this.hoverElement=r.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),i.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=i.clientHeight-s.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(t),this.dispatch("column-moving",t,this.moving))}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveColumn.mousemove)})}moveColumn(t,e){var r=this.moving.getCells();this.toCol=t,this.toColAfter=e,e?t.getCells().forEach(function(i,s){var o=i.getElement(!0);o.parentNode&&r[s]&&o.parentNode.insertBefore(r[s].getElement(),o.nextSibling)}):t.getCells().forEach(function(i,s){var o=i.getElement(!0);o.parentNode&&r[s]&&o.parentNode.insertBefore(r[s].getElement(),o)})}endMove(t){(t.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(t){var e=this.table.columnManager.getContentsElement(),r=e.scrollLeft,i=(this.touchMove?t.touches[0].pageX:t.pageX)-Ai.elOffset(e).left+r,s;this.hoverElement.style.left=i-this.startX+"px",i-r<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{s=Math.max(0,r-5),this.table.rowManager.getElement().scrollLeft=s,this.autoScrollTimeout=!1},1))),r+e.clientWidth-i<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{s=Math.min(e.clientWidth,r+5),this.table.rowManager.getElement().scrollLeft=s,this.autoScrollTimeout=!1},1)))}},eC={delete:function(n,t,e){n.delete()}},rC={insert:function(n,t,e){return this.table.addRow(n.getData(),void 0,t),!0},add:function(n,t,e){return this.table.addRow(n.getData()),!0},update:function(n,t,e){return t?(t.update(n.getData()),!0):!1},replace:function(n,t,e){return t?(this.table.addRow(n.getData(),void 0,t),t.delete(),!0):!1}},jd=class n extends xr{static moduleName="moveRow";static senders=eC;static receivers=rC;constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(t){var e=this,r={};r.mouseup=function(i){e.tableRowDrop(i,t)}.bind(e),r.mousemove=function(i){var s;i.pageY-Ai.elOffset(t.element).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?(e.toRow!==t||!e.toRowAfter)&&(s=t.getElement(),s.parentNode.insertBefore(e.placeholderElement,s.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(s=t.getElement(),s.previousSibling&&(s.parentNode.insertBefore(e.placeholderElement,s),e.moveRow(t,!1)))}.bind(e),t.modules.moveRow=r}initializeRow(t){var e=this,r={},i;r.mouseup=function(s){e.tableRowDrop(s,t)}.bind(e),r.mousemove=function(s){var o=t.getElement();s.pageY-Ai.elOffset(o).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?(e.toRow!==t||!e.toRowAfter)&&(o.parentNode.insertBefore(e.placeholderElement,o.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(o.parentNode.insertBefore(e.placeholderElement,o),e.moveRow(t,!1))}.bind(e),this.hasHandle||(i=t.getElement(),i.addEventListener("mousedown",function(s){s.which===1&&(e.checkTimeout=setTimeout(function(){e.startMove(s,t)},e.checkPeriod))}),i.addEventListener("mouseup",function(s){s.which===1&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t,t.getElement())),t.modules.moveRow=r}initializeColumn(t){t.definition.rowHandle&&this.table.options.movableRows!==!1&&(this.hasHandle=!0)}initializeCell(t){if(t.column.definition.rowHandle&&this.table.options.movableRows!==!1){var e=this,r=t.getElement(!0);r.addEventListener("mousedown",function(i){i.which===1&&(e.checkTimeout=setTimeout(function(){e.startMove(i,t.row)},e.checkPeriod))}),r.addEventListener("mouseup",function(i){i.which===1&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t.row,r)}}bindTouchEvents(t,e){var r=!1,i,s,o,a,l,c;e.addEventListener("touchstart",h=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,i=t.nextRow(),o=i?i.getHeight()/2:0,s=t.prevRow(),a=s?s.getHeight()/2:0,l=0,c=0,r=!1,this.startMove(h,t)},this.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,e.addEventListener("touchmove",h=>{var d,p;this.moving&&(h.preventDefault(),this.moveHover(h),r||(r=h.touches[0].pageY),d=h.touches[0].pageY-r,d>0?i&&d-l>o&&(p=i,p!==t&&(r=h.touches[0].pageY,p.getElement().parentNode.insertBefore(this.placeholderElement,p.getElement().nextSibling),this.moveRow(p,!0))):s&&-d-c>a&&(p=s,p!==t&&(r=h.touches[0].pageY,p.getElement().parentNode.insertBefore(this.placeholderElement,p.getElement()),this.moveRow(p,!1))),p&&(i=p.nextRow(),l=o,o=i?i.getHeight()/2:0,s=p.prevRow(),c=a,a=s?s.getHeight()/2:0))}),e.addEventListener("touchend",h=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(h),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{(t.type==="row"||t.type==="group")&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{(t.type==="row"||t.type==="group")&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})}startMove(t,e){var r=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(r.parentNode.insertBefore(this.placeholderElement,r),r.parentNode.removeChild(r)),this.hoverElement=r.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.dispatchExternal("rowMoving",e.getComponent()),this.moveHover(t)}setStartPosition(t,e){var r=this.touchMove?t.touches[0].pageX:t.pageX,i=this.touchMove?t.touches[0].pageY:t.pageY,s,o;s=e.getElement(),this.connection?(o=s.getBoundingClientRect(),this.startX=o.left-r+window.pageXOffset,this.startY=o.top-i+window.pageYOffset):this.startY=i-s.getBoundingClientRect().top}endMove(t){(!t||t.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow?this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter):this.dispatchExternal("rowMoveCancelled",this.moving.getComponent()),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(t,e){this.toRow=t,this.toRowAfter=e}moveHover(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)}moveHoverTable(t){var e=this.table.rowManager.getElement(),r=e.scrollTop,i=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+r;this.hoverElement.style.top=Math.min(i-this.startY,this.table.rowManager.element.scrollHeight-this.hoverElement.offsetHeight)+"px"}moveHoverConnections(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"}elementRowDrop(t,e,r){this.dispatchExternal("movableRowsElementDrop",t,e,r?r.getComponent():!1)}connectToTables(t){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",e),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:t})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(r=>{typeof r=="string"?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(r))):this.connectionElements.push(r)}),this.connectionElements.forEach(r=>{var i=s=>{this.elementRowDrop(s,r,this.moving)};r.addEventListener("mouseup",i),r.tabulatorElementDropEvent=i,r.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",t),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(e=>{e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent})}connect(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(r=>{r.type==="row"&&r.modules.moveRow&&r.modules.moveRow.mouseup&&r.getElement().addEventListener("mouseup",r.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",e,t),!0)}disconnect(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(e=>{e.type==="row"&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",t)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(t,e,r){var i=!1;if(r){switch(typeof this.table.options.movableRowsSender){case"string":i=n.senders[this.table.options.movableRowsSender];break;case"function":i=this.table.options.movableRowsSender;break}i?i.call(this,this.moving?this.moving.getComponent():void 0,e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()}tableRowDrop(t,e){var r=!1,i=!1;switch(t.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":r=n.receivers[this.table.options.movableRowsReceiver];break;case"function":r=this.table.options.movableRowsReceiver;break}r?i=r.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),i?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:e,success:i})}commsReceived(t,e,r){switch(e){case"connect":return this.connect(t,r.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,r.row,r.success)}}},iC={},Hd=class n extends xr{static moduleName="mutator";static mutators=iC;constructor(t){super(t),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams"),this.registerColumnOption("mutateLink")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("cell-value-changed",this.mutateLink.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(t,e,r){return this.transformRow(e,"data",r)}initializeColumn(t){var e=!1,r={};this.allowedTypes.forEach(i=>{var s="mutator"+(i.charAt(0).toUpperCase()+i.slice(1)),o;t.definition[s]&&(o=this.lookupMutator(t.definition[s]),o&&(e=!0,r[s]={mutator:o,params:t.definition[s+"Params"]||{}}))}),e&&(t.modules.mutate=r)}lookupMutator(t){var e=!1;switch(typeof t){case"string":n.mutators[t]?e=n.mutators[t]:console.warn("Mutator Error - No such mutator found, ignoring: ",t);break;case"function":e=t;break}return e}transformRow(t,e,r){var i="mutator"+(e.charAt(0).toUpperCase()+e.slice(1)),s;return this.enabled&&this.table.columnManager.traverse(o=>{var a,l,c;o.modules.mutate&&(a=o.modules.mutate[i]||o.modules.mutate.mutator||!1,a&&(s=o.getFieldValue(typeof r<"u"?r:t),(e=="data"&&!r||typeof s<"u")&&(c=o.getComponent(),l=typeof a.params=="function"?a.params(s,t,e,c):a.params,o.setFieldValue(t,a.mutator(s,t,e,l,c)))))}),t}transformCell(t,e){if(t.column.modules.mutate){var r=t.column.modules.mutate.mutatorEdit||t.column.modules.mutate.mutator||!1,i={};if(r)return i=Object.assign(i,t.row.getData()),t.column.setFieldValue(i,e),r.mutator(e,i,"edit",r.params,t.getComponent())}return e}mutateLink(t){var e=t.column.definition.mutateLink;e&&(Array.isArray(e)||(e=[e]),e.forEach(r=>{var i=t.row.getCell(r);i&&i.setValue(i.getValue(),!0,!0)}))}enable(){this.enabled=!0}disable(){this.enabled=!1}};function nC(n,t,e,r,i){var s=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),c=document.createElement("span"),h=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",d=>{o.innerHTML=d}),this.table.modules.localize.langBind("pagination|counter|of",d=>{l.innerHTML=d}),this.table.modules.localize.langBind("pagination|counter|rows",d=>{h.innerHTML=d}),r?(a.innerHTML=" "+t+"-"+Math.min(t+n-1,r)+" ",c.innerHTML=" "+r+" ",s.appendChild(o),s.appendChild(a),s.appendChild(l),s.appendChild(c),s.appendChild(h)):(a.innerHTML=" 0 ",s.appendChild(o),s.appendChild(a),s.appendChild(h)),s}function sC(n,t,e,r,i){var s=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),c=document.createElement("span"),h=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",d=>{o.innerHTML=d}),a.innerHTML=" "+e+" ",this.table.modules.localize.langBind("pagination|counter|of",d=>{l.innerHTML=d}),c.innerHTML=" "+i+" ",this.table.modules.localize.langBind("pagination|counter|pages",d=>{h.innerHTML=d}),s.appendChild(o),s.appendChild(a),s.appendChild(l),s.appendChild(c),s.appendChild(h),s}var oC={rows:nC,pages:sC},Gd=class n extends xr{static moduleName="page";static pageCounters=oC;constructor(t){super(t),this.mode="local",this.progressiveLoad=!1,this.element=null,this.pageCounterElement=null,this.pageCounter=null,this.size=0,this.page=1,this.count=5,this.max=1,this.remoteRowCountEstimate=null,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationCounter",!1),this.registerTableOption("paginationCounterElement",!1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("footer-redraw",this.footerRedraw.bind(this)),this.table.options.paginationAddRow=="page"&&this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.table.options.paginationMode==="remote"&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePageCounter(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),this.table.options.progressiveLoad==="scroll"&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(t,e){var r=this.table.rowManager,i=r.getDisplayRows(),s;return e?i.length?s=i[0]:r.activeRows.length&&(s=r.activeRows[r.activeRows.length-1],e=!1):i.length&&(s=i[i.length-1],e=!(i.length<this.size)),{index:s,top:e}}calculatePageSizes(){var t,e;this.table.options.paginationSize?this.size=this.table.options.paginationSize:(t=document.createElement("div"),t.classList.add("tabulator-row"),t.style.visibility="hidden",e=document.createElement("div"),e.classList.add("tabulator-cell"),e.innerHTML="Page Row Test",t.appendChild(e),this.table.rowManager.getTableElement().appendChild(t),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/t.offsetHeight),this.table.rowManager.getTableElement().removeChild(t)),this.dispatchExternal("pageSizeChanged",this.size),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(t,e,r,i){return this.initialLoad||(this.progressiveLoad&&!r||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),i.page=this.page,this.size&&(i.size=this.size),i}userSetPageToRow(t){return this.table.options.pagination&&(t=this.table.rowManager.findRow(t),t)?this.setPageToRow(t):Promise.reject()}userSetPageSize(t){return this.table.options.pagination?(this.setPageSize(t),this.setPage(1)):!1}scrollVertical(t,e){var r,i,s;!e&&!this.table.dataLoader.loading&&(r=this.table.rowManager.getElement(),i=r.scrollHeight-r.clientHeight-t,s=this.table.options.progressiveLoadScrollMargin||r.clientHeight*2,i<s&&this.nextPage().catch(()=>{}))}restOnRenderBefore(t,e){return e||this.mode==="local"&&this.reset(),t}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var t;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),t=document.createElement("button"),t.classList.add("tabulator-page"),t.setAttribute("type","button"),t.setAttribute("role","button"),t.setAttribute("aria-label",""),t.setAttribute("title",""),this.firstBut=t.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=t.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=t.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=t.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var t=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))t=this.table.options.paginationSizeSelector,this.pageSizes=t,this.pageSizes.indexOf(this.size)==-1&&t.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){t=[];for(let e=1;e<5;e++)t.push(this.size*e);this.pageSizes=t}else t=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);t.forEach(e=>{var r=document.createElement("option");r.value=e,e===!0?this.langBind("pagination|all",function(i){r.innerHTML=i}):r.innerHTML=e,this.pageSizeSelect.appendChild(r)}),this.pageSizeSelect.value=this.size}}initializePageCounter(){var t=this.table.options.paginationCounter,e=null;t&&(typeof t=="function"?e=t:e=n.pageCounters[t],e?(this.pageCounter=e,this.pageCounterElement=document.createElement("span"),this.pageCounterElement.classList.add("tabulator-page-counter")):console.warn("Pagination Error - No such page counter found: ",t))}initializePaginator(t){var e,r;t||(this.langBind("pagination|first",i=>{this.firstBut.innerHTML=i}),this.langBind("pagination|first_title",i=>{this.firstBut.setAttribute("aria-label",i),this.firstBut.setAttribute("title",i)}),this.langBind("pagination|prev",i=>{this.prevBut.innerHTML=i}),this.langBind("pagination|prev_title",i=>{this.prevBut.setAttribute("aria-label",i),this.prevBut.setAttribute("title",i)}),this.langBind("pagination|next",i=>{this.nextBut.innerHTML=i}),this.langBind("pagination|next_title",i=>{this.nextBut.setAttribute("aria-label",i),this.nextBut.setAttribute("title",i)}),this.langBind("pagination|last",i=>{this.lastBut.innerHTML=i}),this.langBind("pagination|last_title",i=>{this.lastBut.setAttribute("aria-label",i),this.lastBut.setAttribute("title",i)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(e=document.createElement("label"),this.langBind("pagination|page_size",i=>{this.pageSizeSelect.setAttribute("aria-label",i),this.pageSizeSelect.setAttribute("title",i),e.innerHTML=i}),this.element.appendChild(e),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",i=>{this.setPageSize(this.pageSizeSelect.value=="true"?!0:this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||(this.table.options.paginationCounter&&(this.table.options.paginationCounterElement?this.table.options.paginationCounterElement instanceof HTMLElement?this.table.options.paginationCounterElement.appendChild(this.pageCounterElement):typeof this.table.options.paginationCounterElement=="string"&&(r=document.querySelector(this.table.options.paginationCounterElement),r?r.appendChild(this.pageCounterElement):console.warn("Pagination Error - Unable to find element matching paginationCounterElement selector:",this.table.options.paginationCounterElement)):this.footerAppend(this.pageCounterElement)),this.footerAppend(this.element)),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(t){this.initializePaginator(!0),this.mode="progressive_"+t,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setMaxRows(t){t?this.max=this.size===!0?1:Math.ceil(t/this.size):this.max=1,this.page>this.max&&(this.page=this.max)}reset(t){this.initialLoad||(this.mode=="local"||t)&&(this.page=1,this.trackChanges())}setMaxPage(t){t=parseInt(t),this.max=t||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(t){switch(t){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return t=parseInt(t),t>0&&t<=this.max||this.mode!=="local"?(this.page=t,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",t),Promise.reject())}setPageToRow(t){var e=this.displayRows(-1),r=e.indexOf(t);if(r>-1){var i=this.size===!0?1:Math.ceil((r+1)/this.size);return this.setPage(i)}else return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(t){t!==!0&&(t=parseInt(t)),t>0&&(this.size=t,this.dispatchExternal("pageSizeChanged",t)),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageCounter(t,e,r){var i;if(this.pageCounter)switch(this.mode==="remote"&&(e=this.size,r=(this.page-1)*this.size+1,t=this.remoteRowCountEstimate),i=this.pageCounter.call(this,e,r,this.page,t,this.max),typeof i){case"object":if(i instanceof Node){for(;this.pageCounterElement.firstChild;)this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);this.pageCounterElement.appendChild(i)}else this.pageCounterElement.innerHTML="",i!=null&&console.warn("Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:",i);break;case"undefined":this.pageCounterElement.innerHTML="";break;default:this.pageCounterElement.innerHTML=i}}_setPageButtons(){let t=Math.floor((this.count-1)/2),e=Math.ceil((this.count-1)/2),r=this.max-this.page+t+1<this.count?this.max-this.count+1:Math.max(this.page-t,1),i=this.page<=e?Math.min(this.count,this.max):Math.min(this.page+e,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);this.page==1?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let s=r;s<=i;s++)s>0&&s<=this.max&&this.pagesElement.appendChild(this._generatePageButton(s));this.footerRedraw()}_generatePageButton(t){var e=document.createElement("button");return e.classList.add("tabulator-page"),t==this.page&&e.classList.add("active"),e.setAttribute("type","button"),e.setAttribute("role","button"),this.langBind("pagination|page_title",r=>{e.setAttribute("aria-label",r+" "+t),e.setAttribute("title",r+" "+t)}),e.setAttribute("data-page",t),e.textContent=t,e.addEventListener("click",r=>{this.setPage(t)}),e}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(t){return this.size}getMode(){return this.mode}getRows(t){var e=0,r,i,s,o,a=t.filter(l=>l.type==="row");if(this.mode=="local"){r=[],this.setMaxRows(t.length),this.size===!0?(i=0,s=t.length):(i=this.size*(this.page-1),s=i+parseInt(this.size)),this._setPageButtons();for(let l=i;l<s;l++){let c=t[l];c&&(r.push(c),c.type==="row"&&(o||(o=c),e++))}return this._setPageCounter(a.length,e,o?a.indexOf(o)+1:0),r}else return this._setPageButtons(),this._setPageCounter(a.length),t.slice(0)}trigger(){var t;switch(this.mode){case"local":return t=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(t),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(t){var e;if(typeof t.last_page>"u"&&console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").last_page||"last_page")+"' property"),t.data)if(this.max=parseInt(t.last_page)||1,this.remoteRowCountEstimate=typeof t.last_row<"u"?t.last_row:t.last_page*this.size-(this.page==t.last_page?this.size-t.data.length:0),this.progressiveLoad){switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(t.data,!1,this.page==1):this.table.rowManager.addRows(t.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":t=this.page===1?t.data:this.table.rowManager.getData().concat(t.data),this.table.rowManager.setData(t,this.page!==1,this.page==1),e=this.table.options.progressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+e&&this.page<this.max&&setTimeout(()=>{this.nextPage()});break}return!1}else this.dispatchExternal("pageLoaded",this.getPage());else console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").data||"data")+"' property");return t.data}footerRedraw(){var t=this.table.footerManager.containerElement;Math.ceil(t.clientWidth)-t.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(t.clientWidth)-t.scrollWidth<0&&(this.pagesElement.style.display="none"))}},aC={local:function(n,t){var e=localStorage.getItem(n+"-"+t);return e?JSON.parse(e):!1},cookie:function(n,t){var e=document.cookie,r=n+"-"+t,i=e.indexOf(r+"="),s,o;return i>-1&&(e=e.slice(i),s=e.indexOf(";"),s>-1&&(e=e.slice(0,s)),o=e.replace(r+"=","")),o?JSON.parse(o):!1}},lC={local:function(n,t,e){localStorage.setItem(n+"-"+t,JSON.stringify(e))},cookie:function(n,t,e){var r=new Date;r.setDate(r.getDate()+1e4),document.cookie=n+"-"+t+"="+JSON.stringify(e)+"; expires="+r.toUTCString()}},Ud=class n extends xr{static moduleName="persistence";static moduleInitOrder=-10;static readers=aC;static writers=lC;constructor(t){super(t),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var t="_tabulator_test";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch{return!1}}initialize(){if(this.table.options.persistence){var t=this.table.options.persistenceMode,e=this.table.options.persistenceID,r;this.mode=t!==!0?t:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:n.readers[this.table.options.persistenceReaderFunc]?this.readFunc=n.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):n.readers[this.mode]?this.readFunc=n.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:n.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=n.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):n.writers[this.mode]?this.writeFunc=n.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(e||this.table.element.getAttribute("id")||""),this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,headerFilter:this.table.options.persistence===!0||this.table.options.persistence.headerFilter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(r=this.retrieveData("page"),r&&(typeof r.paginationSize<"u"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=r.paginationSize),typeof r.paginationInitialPage<"u"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=r.paginationInitialPage))),this.config.group&&(r=this.retrieveData("group"),r&&(typeof r.groupBy<"u"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=r.groupBy),typeof r.groupStartOpen<"u"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=r.groupStartOpen),typeof r.groupHeader<"u"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=r.groupHeader))),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns"))),this.subscribe("table-built",this.tableBuilt.bind(this),0),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("filter-changed",this.eventSave.bind(this,"headerFilter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("column-width",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(t){this.config[t]&&this.save(t)}tableBuilt(){var t,e,r;this.config.sort&&(t=this.load("sort"),t&&(this.table.options.initialSort=t)),this.config.filter&&(e=this.load("filter"),e&&(this.table.options.initialFilter=e)),this.config.headerFilter&&(r=this.load("headerFilter"),r&&(this.table.options.initialHeaderFilter=r))}tableRedraw(t){t&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(t){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,t,!0)),!0}initializeColumn(t){var e,r;this.config.columns&&(this.defWatcherBlock=!0,e=t.getDefinition(),r=this.config.columns===!0?Object.keys(e):this.config.columns,r.forEach(i=>{var s=Object.getOwnPropertyDescriptor(e,i),o=e[i];s&&Object.defineProperty(e,i,{set:a=>{o=a,this.defWatcherBlock||this.save("columns"),s.set&&s.set(a)},get:()=>(s.get&&s.get(),o)})}),this.defWatcherBlock=!1)}load(t,e){var r=this.retrieveData(t);return e&&(r=r?this.mergeDefinition(e,r):e),r}retrieveData(t){return this.readFunc?this.readFunc(this.id,t):!1}mergeDefinition(t,e,r){var i=[];return e=e||[],e.forEach((s,o)=>{var a=this._findColumn(t,s),l;a&&(r?l=Object.keys(s):this.config.columns===!0||this.config.columns==null?(l=Object.keys(a),l.push("width")):l=this.config.columns,l.forEach(c=>{c!=="columns"&&typeof s[c]<"u"&&(a[c]=s[c])}),a.columns&&(a.columns=this.mergeDefinition(a.columns,s.columns)),i.push(a))}),t.forEach((s,o)=>{var a=this._findColumn(e,s);a||(i.length>o?i.splice(o,0,s):i.push(s))}),i}_findColumn(t,e){var r=e.columns?"group":e.field?"field":"object";return t.find(function(i){switch(r){case"group":return i.title===e.title&&i.columns.length===e.columns.length;case"field":return i.field===e.field;case"object":return i===e}})}save(t){var e={};switch(t){case"columns":e=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":e=this.table.modules.filter.getFilters();break;case"headerFilter":e=this.table.modules.filter.getHeaderFilters();break;case"sort":e=this.validateSorters(this.table.modules.sort.getSort());break;case"group":e=this.getGroupConfig();break;case"page":e=this.getPageConfig();break}this.writeFunc&&this.writeFunc(this.id,t,e)}validateSorters(t){return t.forEach(function(e){e.column=e.field,delete e.field}),t}getGroupConfig(){var t={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(t.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(t.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(t.groupHeader=this.table.options.groupHeader)),t}getPageConfig(){var t={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(t.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(t.paginationInitialPage=this.table.modules.page.getPage())),t}parseColumns(t){var e=[],r=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return t.forEach(i=>{var s={},o=i.getDefinition(),a;i.isGroup?(s.title=o.title,s.columns=this.parseColumns(i.getColumns())):(s.field=i.getField(),this.config.columns===!0||this.config.columns==null?(a=Object.keys(o),a.push("width"),a.push("visible")):a=this.config.columns,a.forEach(l=>{switch(l){case"width":s.width=i.getWidth();break;case"visible":s.visible=i.visible;break;default:typeof o[l]!="function"&&r.indexOf(l)===-1&&(s[l]=o[l])}})),e.push(s)}),e}},Vd=class extends xr{static moduleName="popup";constructor(t){super(t),this.columnSubscribers={},this.registerTableOption("rowContextPopup",!1),this.registerTableOption("rowClickPopup",!1),this.registerTableOption("rowDblClickPopup",!1),this.registerTableOption("groupContextPopup",!1),this.registerTableOption("groupClickPopup",!1),this.registerTableOption("groupDblClickPopup",!1),this.registerColumnOption("headerContextPopup"),this.registerColumnOption("headerClickPopup"),this.registerColumnOption("headerDblClickPopup"),this.registerColumnOption("headerPopup"),this.registerColumnOption("headerPopupIcon"),this.registerColumnOption("contextPopup"),this.registerColumnOption("clickPopup"),this.registerColumnOption("dblClickPopup"),this.registerComponentFunction("cell","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("column","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("row","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("group","popup",this._componentPopupCall.bind(this))}initialize(){this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}_componentPopupCall(t,e,r){this.loadPopupEvent(e,null,t,r)}initializeRowWatchers(){this.table.options.rowContextPopup&&(this.subscribe("row-contextmenu",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup)),this.table.on("rowTapHold",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup))),this.table.options.rowClickPopup&&this.subscribe("row-click",this.loadPopupEvent.bind(this,this.table.options.rowClickPopup)),this.table.options.rowDblClickPopup&&this.subscribe("row-dblclick",this.loadPopupEvent.bind(this,this.table.options.rowDblClickPopup))}initializeGroupWatchers(){this.table.options.groupContextPopup&&(this.subscribe("group-contextmenu",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup)),this.table.on("groupTapHold",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup))),this.table.options.groupClickPopup&&this.subscribe("group-click",this.loadPopupEvent.bind(this,this.table.options.groupClickPopup)),this.table.options.groupDblClickPopup&&this.subscribe("group-dblclick",this.loadPopupEvent.bind(this,this.table.options.groupDblClickPopup))}initializeColumn(t){var e=t.definition;e.headerContextPopup&&!this.columnSubscribers.headerContextPopup&&(this.columnSubscribers.headerContextPopup=this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextPopup),this.table.on("headerTapHold",this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"))),e.headerClickPopup&&!this.columnSubscribers.headerClickPopup&&(this.columnSubscribers.headerClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerClickPopup"),this.subscribe("column-click",this.columnSubscribers.headerClickPopup)),e.headerDblClickPopup&&!this.columnSubscribers.headerDblClickPopup&&(this.columnSubscribers.headerDblClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerDblClickPopup"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickPopup)),e.headerPopup&&this.initializeColumnHeaderPopup(t),e.contextPopup&&!this.columnSubscribers.contextPopup&&(this.columnSubscribers.contextPopup=this.loadPopupTableCellEvent.bind(this,"contextPopup"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextPopup),this.table.on("cellTapHold",this.loadPopupTableCellEvent.bind(this,"contextPopup"))),e.clickPopup&&!this.columnSubscribers.clickPopup&&(this.columnSubscribers.clickPopup=this.loadPopupTableCellEvent.bind(this,"clickPopup"),this.subscribe("cell-click",this.columnSubscribers.clickPopup)),e.dblClickPopup&&!this.columnSubscribers.dblClickPopup&&(this.columnSubscribers.dblClickPopup=this.loadPopupTableCellEvent.bind(this,"dblClickPopup"),this.subscribe("cell-click",this.columnSubscribers.dblClickPopup))}initializeColumnHeaderPopup(t){var e=t.definition.headerPopupIcon,r;r=document.createElement("span"),r.classList.add("tabulator-header-popup-button"),e?(typeof e=="function"&&(e=e(t.getComponent())),e instanceof HTMLElement?r.appendChild(e):r.innerHTML=e):r.innerHTML="&vellip;",r.addEventListener("click",i=>{i.stopPropagation(),i.preventDefault(),this.loadPopupEvent(t.definition.headerPopup,i,t)}),t.titleElement.insertBefore(r,t.titleElement.firstChild)}loadPopupTableCellEvent(t,e,r){r._cell&&(r=r._cell),r.column.definition[t]&&this.loadPopupEvent(r.column.definition[t],e,r)}loadPopupTableColumnEvent(t,e,r){r._column&&(r=r._column),r.definition[t]&&this.loadPopupEvent(r.definition[t],e,r)}loadPopupEvent(t,e,r,i){var s;function o(a){s=a}r._group?r=r._group:r._row&&(r=r._row),t=typeof t=="function"?t.call(this.table,e,r.getComponent(),o):t,this.loadPopup(e,r,t,s,i)}loadPopup(t,e,r,i,s){var o=!(t instanceof MouseEvent),a,l;r instanceof HTMLElement?a=r:(a=document.createElement("div"),a.innerHTML=r),a.classList.add("tabulator-popup"),a.addEventListener("click",c=>{c.stopPropagation()}),o||t.preventDefault(),l=this.popup(a),typeof i=="function"&&l.renderCallback(i),t?l.show(t):l.show(e.getElement(),s||"center"),l.hideOnBlur(()=>{this.dispatchExternal("popupClosed",e.getComponent())}),this.dispatchExternal("popupOpened",e.getComponent())}},qd=class extends xr{static moduleName="print";constructor(t){super(t),this.element=!1,this.manualBlock=!1,this.beforeprintEventHandler=null,this.afterprintEventHandler=null,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(this.beforeprintEventHandler=this.replaceTable.bind(this),this.afterprintEventHandler=this.cleanup.bind(this),window.addEventListener("beforeprint",this.beforeprintEventHandler),window.addEventListener("afterprint",this.afterprintEventHandler),this.subscribe("table-destroy",this.destroy.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}destroy(){this.table.options.printAsHtml&&(window.removeEventListener("beforeprint",this.beforeprintEventHandler),window.removeEventListener("afterprint",this.afterprintEventHandler))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(t,e,r){var i=window.scrollX,s=window.scrollY,o=document.createElement("div"),a=document.createElement("div"),l=this.table.modules.export.generateTable(typeof r<"u"?r:this.table.options.printConfig,typeof e<"u"?e:this.table.options.printStyled,t||this.table.options.printRowRange,"print"),c,h;this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(o.classList.add("tabulator-print-header"),c=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof c=="string"?o.innerHTML=c:o.appendChild(c),this.element.appendChild(o)),this.element.appendChild(l),this.table.options.printFooter&&(a.classList.add("tabulator-print-footer"),h=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof h=="string"?a.innerHTML=h:a.appendChild(h),this.element.appendChild(a)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,l),window.print(),this.cleanup(),window.scrollTo(i,s),this.manualBlock=!1}},Wd=class extends xr{static moduleName="reactiveData";constructor(t){super(t),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this,"cellsave")),this.subscribe("cell-value-save-after",this.unblock.bind(this,"cellsave")),this.subscribe("row-data-save-before",this.block.bind(this,"rowsave")),this.subscribe("row-data-save-after",this.unblock.bind(this,"rowsave")),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(t){var e=this,r;this.currentVersion++,r=this.currentVersion,this.unwatchData(),this.data=t,this.origFuncs.push=t.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var i=Array.from(arguments),s;return!e.blocked&&r===e.currentVersion&&(e.block("data-push"),i.forEach(o=>{e.table.rowManager.addRowActual(o,!1)}),s=e.origFuncs.push.apply(t,arguments),e.unblock("data-push")),s}}),this.origFuncs.unshift=t.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var i=Array.from(arguments),s;return!e.blocked&&r===e.currentVersion&&(e.block("data-unshift"),i.forEach(o=>{e.table.rowManager.addRowActual(o,!0)}),s=e.origFuncs.unshift.apply(t,arguments),e.unblock("data-unshift")),s}}),this.origFuncs.shift=t.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var i,s;return!e.blocked&&r===e.currentVersion&&(e.block("data-shift"),e.data.length&&(i=e.table.rowManager.getRowFromDataObject(e.data[0]),i&&i.deleteActual()),s=e.origFuncs.shift.call(t),e.unblock("data-shift")),s}}),this.origFuncs.pop=t.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var i,s;return!e.blocked&&r===e.currentVersion&&(e.block("data-pop"),e.data.length&&(i=e.table.rowManager.getRowFromDataObject(e.data[e.data.length-1]),i&&i.deleteActual()),s=e.origFuncs.pop.call(t),e.unblock("data-pop")),s}}),this.origFuncs.splice=t.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var i=Array.from(arguments),s=i[0]<0?t.length+i[0]:i[0],o=i[1],a=i[2]?i.slice(2):!1,l,c;if(!e.blocked&&r===e.currentVersion){if(e.block("data-splice"),a&&(l=t[s]?e.table.rowManager.getRowFromDataObject(t[s]):!1,l?a.forEach(d=>{e.table.rowManager.addRowActual(d,!0,l,!0)}):(a=a.slice().reverse(),a.forEach(d=>{e.table.rowManager.addRowActual(d,!0,!1,!0)}))),o!==0){var h=t.slice(s,typeof i[1]>"u"?i[1]:s+o);h.forEach((d,p)=>{var g=e.table.rowManager.getRowFromDataObject(d);g&&g.deleteActual(p!==h.length-1)})}(a||o!==0)&&e.table.rowManager.reRenderInPosition(),c=e.origFuncs.splice.apply(t,arguments),e.unblock("data-splice")}return c}})}unwatchData(){if(this.data!==!1)for(var t in this.origFuncs)Object.defineProperty(this.data,t,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(t){var e=t.getData();for(var r in e)this.watchKey(t,e,r);this.table.options.dataTree&&this.watchTreeChildren(t)}watchTreeChildren(t){var e=this,r=t.getData()[this.table.options.dataTreeChildField],i={};r&&(i.push=r.push,Object.defineProperty(r,"push",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-push");var s=i.push.apply(r,arguments);this.rebuildTree(t),e.unblock("tree-push")}return s}}),i.unshift=r.unshift,Object.defineProperty(r,"unshift",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-unshift");var s=i.unshift.apply(r,arguments);this.rebuildTree(t),e.unblock("tree-unshift")}return s}}),i.shift=r.shift,Object.defineProperty(r,"shift",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-shift");var s=i.shift.call(r);this.rebuildTree(t),e.unblock("tree-shift")}return s}}),i.pop=r.pop,Object.defineProperty(r,"pop",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-pop");var s=i.pop.call(r);this.rebuildTree(t),e.unblock("tree-pop")}return s}}),i.splice=r.splice,Object.defineProperty(r,"splice",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-splice");var s=i.splice.apply(r,arguments);this.rebuildTree(t),e.unblock("tree-splice")}return s}}))}rebuildTree(t){this.table.modules.dataTree.initializeRow(t),this.table.modules.dataTree.layoutRow(t),this.table.rowManager.refreshActiveData("tree",!1,!0)}watchKey(t,e,r){var i=this,s=Object.getOwnPropertyDescriptor(e,r),o=e[r],a=this.currentVersion;Object.defineProperty(e,r,{set:l=>{if(o=l,!i.blocked&&a===i.currentVersion){i.block("key");var c={};c[r]=l,t.updateData(c),i.unblock("key")}s.set&&s.set(l)},get:()=>(s.get&&s.get(),o)})}unwatchRow(t){var e=t.getData();for(var r in e)Object.defineProperty(e,r,{value:e[r]})}block(t){this.blocked||(this.blocked=t)}unblock(t){this.blocked===t&&(this.blocked=!1)}},Xd=class extends xr{static moduleName="resizeColumns";constructor(t){super(t),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.latestX=!1,this.handle=null,this.initialNextColumn=null,this.nextColumn=null,this.initialized=!1,this.registerColumnOption("resizable",!0),this.registerTableOption("resizableColumnFit",!1),this.registerTableOption("resizableColumnGuide",!1)}initialize(){this.subscribe("column-rendered",this.layoutColumnHeader.bind(this))}initializeEventWatchers(){this.initialized||(this.subscribe("cell-rendered",this.layoutCellHandles.bind(this)),this.subscribe("cell-delete",this.deInitializeComponent.bind(this)),this.subscribe("cell-height",this.resizeHandle.bind(this)),this.subscribe("column-moved",this.columnLayoutUpdated.bind(this)),this.subscribe("column-hide",this.deInitializeColumn.bind(this)),this.subscribe("column-show",this.columnLayoutUpdated.bind(this)),this.subscribe("column-width",this.columnWidthUpdated.bind(this)),this.subscribe("column-delete",this.deInitializeComponent.bind(this)),this.subscribe("column-height",this.resizeHandle.bind(this)),this.initialized=!0)}layoutCellHandles(t){t.row.type==="row"&&(this.deInitializeComponent(t),this.initializeColumn("cell",t,t.column,t.element))}layoutColumnHeader(t){t.definition.resizable&&(this.initializeEventWatchers(),this.deInitializeComponent(t),this.initializeColumn("header",t,t,t.element))}columnLayoutUpdated(t){var e=t.prevColumn();this.reinitializeColumn(t),e&&this.reinitializeColumn(e)}columnWidthUpdated(t){t.modules.frozen&&(this.table.modules.frozenColumns.leftColumns.includes(t)?this.table.modules.frozenColumns.leftColumns.forEach(e=>{this.reinitializeColumn(e)}):this.table.modules.frozenColumns.rightColumns.includes(t)&&this.table.modules.frozenColumns.rightColumns.forEach(e=>{this.reinitializeColumn(e)}))}frozenColumnOffset(t){var e=!1;return t.modules.frozen&&(e=t.modules.frozen.marginValue,t.modules.frozen.position==="left"?e+=t.getWidth()-3:e&&(e-=3)),e!==!1?e+"px":!1}reinitializeColumn(t){var e=this.frozenColumnOffset(t);t.cells.forEach(r=>{r.modules.resize&&r.modules.resize.handleEl&&(e&&(r.modules.resize.handleEl.style[t.modules.frozen.position]=e,r.modules.resize.handleEl.style["z-index"]=11),r.element.after(r.modules.resize.handleEl))}),t.modules.resize&&t.modules.resize.handleEl&&(e&&(t.modules.resize.handleEl.style[t.modules.frozen.position]=e),t.element.after(t.modules.resize.handleEl))}initializeColumn(t,e,r,i){var s=this,o=!1,a=r.definition.resizable,l={},c=r.getLastColumn();if(t==="header"&&(o=r.definition.formatter=="textarea"||r.definition.variableHeight,l={variableHeight:o}),(a===!0||a==t)&&this._checkResizability(c)){var h=document.createElement("span");h.className="tabulator-col-resize-handle",h.addEventListener("click",function(p){p.stopPropagation()});var d=function(p){s.startColumn=r,s.initialNextColumn=s.nextColumn=c.nextColumn(),s._mouseDown(p,c,h)};h.addEventListener("mousedown",d),h.addEventListener("touchstart",d,{passive:!0}),h.addEventListener("dblclick",p=>{var g=c.getWidth();p.stopPropagation(),c.reinitializeWidth(!0),g!==c.getWidth()&&(s.dispatch("column-resized",c),s.dispatchExternal("columnResized",c.getComponent()))}),r.modules.frozen&&(h.style.position="sticky",h.style[r.modules.frozen.position]=this.frozenColumnOffset(r)),l.handleEl=h,i.parentNode&&r.visible&&i.after(h)}e.modules.resize=l}deInitializeColumn(t){this.deInitializeComponent(t),t.cells.forEach(e=>{this.deInitializeComponent(e)})}deInitializeComponent(t){var e;t.modules.resize&&(e=t.modules.resize.handleEl,e&&e.parentElement&&e.parentElement.removeChild(e))}resizeHandle(t,e){t.modules.resize&&t.modules.resize.handleEl&&(t.modules.resize.handleEl.style.height=e)}resize(t,e){var r=typeof t.clientX>"u"?t.touches[0].clientX:t.clientX,i=r-this.startX,s=r-this.latestX,o,a;if(this.latestX=r,this.table.rtl&&(i=-i,s=-s),o=e.width==e.minWidth||e.width==e.maxWidth,e.setWidth(this.startWidth+i),a=e.width==e.minWidth||e.width==e.maxWidth,s<0&&(this.nextColumn=this.initialNextColumn),this.table.options.resizableColumnFit&&this.nextColumn&&!(o&&a)){let l=this.nextColumn.getWidth();s>0&&l<=this.nextColumn.minWidth&&(this.nextColumn=this.nextColumn.nextColumn()),this.nextColumn&&this.nextColumn.setWidth(this.nextColumn.getWidth()-s)}this.table.columnManager.rerenderColumns(!0),!this.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights()}calcGuidePosition(t,e,r){var i=typeof t.clientX>"u"?t.touches[0].clientX:t.clientX,s=r.getBoundingClientRect().x-this.table.element.getBoundingClientRect().x,o=this.table.element.getBoundingClientRect().x,a=e.element.getBoundingClientRect().left-o,l=i-this.startX,c=Math.max(s+l,a+e.minWidth);return e.maxWidth&&(c=Math.min(c,a+e.maxWidth)),c}_checkResizability(t){return t.definition.resizable}_mouseDown(t,e,r){var i=this,s;this.dispatchExternal("columnResizing",e.getComponent()),i.table.options.resizableColumnGuide&&(s=document.createElement("span"),s.classList.add("tabulator-col-resize-guide"),i.table.element.appendChild(s),setTimeout(()=>{s.style.left=i.calcGuidePosition(t,e,r)+"px"})),i.table.element.classList.add("tabulator-block-select");function o(l){i.table.options.resizableColumnGuide?s.style.left=i.calcGuidePosition(l,e,r)+"px":i.resize(l,e)}function a(l){i.table.options.resizableColumnGuide&&(i.resize(l,e),s.remove()),i.startColumn.modules.edit&&(i.startColumn.modules.edit.blocked=!1),i.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights(),document.body.removeEventListener("mouseup",a),document.body.removeEventListener("mousemove",o),r.removeEventListener("touchmove",o),r.removeEventListener("touchend",a),i.table.element.classList.remove("tabulator-block-select"),i.startWidth!==e.getWidth()&&(i.table.columnManager.verticalAlignHeaders(),i.dispatch("column-resized",e),i.dispatchExternal("columnResized",e.getComponent()))}t.stopPropagation(),i.startColumn.modules.edit&&(i.startColumn.modules.edit.blocked=!0),i.startX=typeof t.clientX>"u"?t.touches[0].clientX:t.clientX,i.latestX=i.startX,i.startWidth=e.getWidth(),document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",a),r.addEventListener("touchmove",o,{passive:!0}),r.addEventListener("touchend",a)}},$d=class extends xr{static moduleName="resizeRows";constructor(t){super(t),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1),this.registerTableOption("resizableRowGuide",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(t){var e=this,r=t.getElement(),i=document.createElement("div");i.className="tabulator-row-resize-handle";var s=document.createElement("div");s.className="tabulator-row-resize-handle prev",i.addEventListener("click",function(l){l.stopPropagation()});var o=function(l){e.startRow=t,e._mouseDown(l,t,i)};i.addEventListener("mousedown",o),i.addEventListener("touchstart",o,{passive:!0}),s.addEventListener("click",function(l){l.stopPropagation()});var a=function(l){var c=e.table.rowManager.prevDisplayRow(t);c&&(e.startRow=c,e._mouseDown(l,c,s))};s.addEventListener("mousedown",a),s.addEventListener("touchstart",a,{passive:!0}),r.appendChild(i),r.appendChild(s)}resize(t,e){e.setHeight(this.startHeight+((typeof t.screenY>"u"?t.touches[0].screenY:t.screenY)-this.startY))}calcGuidePosition(t,e,r){var i=typeof t.screenY>"u"?t.touches[0].screenY:t.screenY,s=r.getBoundingClientRect().y-this.table.element.getBoundingClientRect().y,o=this.table.element.getBoundingClientRect().y,a=e.element.getBoundingClientRect().top-o,l=i-this.startY;return Math.max(s+l,a)}_mouseDown(t,e,r){var i=this,s;i.dispatchExternal("rowResizing",e.getComponent()),i.table.options.resizableRowGuide&&(s=document.createElement("span"),s.classList.add("tabulator-row-resize-guide"),i.table.element.appendChild(s),setTimeout(()=>{s.style.top=i.calcGuidePosition(t,e,r)+"px"})),i.table.element.classList.add("tabulator-block-select");function o(l){i.table.options.resizableRowGuide?s.style.top=i.calcGuidePosition(l,e,r)+"px":i.resize(l,e)}function a(l){i.table.options.resizableRowGuide&&(i.resize(l,e),s.remove()),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",o),r.removeEventListener("touchmove",o),r.removeEventListener("touchend",a),i.table.element.classList.remove("tabulator-block-select"),i.dispatchExternal("rowResized",e.getComponent())}t.stopPropagation(),i.startY=typeof t.screenY>"u"?t.touches[0].screenY:t.screenY,i.startHeight=e.getHeight(),document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",a),r.addEventListener("touchmove",o,{passive:!0}),r.addEventListener("touchend",a)}},Yd=class extends xr{static moduleName="resizeTable";constructor(t){super(t),this.binding=!1,this.visibilityObserver=!1,this.resizeObserver=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.visible=!1,this.initialized=!1,this.initialRedraw=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var t=this.table,e;this.tableHeight=t.element.clientHeight,this.tableWidth=t.element.clientWidth,t.element.parentNode&&(this.containerHeight=t.element.parentNode.clientHeight,this.containerWidth=t.element.parentNode.clientWidth),typeof IntersectionObserver<"u"&&typeof ResizeObserver<"u"&&t.rowManager.getRenderMode()==="virtual"?(this.initializeVisibilityObserver(),this.autoResize=!0,this.resizeObserver=new ResizeObserver(r=>{if(!t.browserMobile||t.browserMobile&&(!t.modules.edit||t.modules.edit&&!t.modules.edit.currentCell)){var i=Math.floor(r[0].contentRect.height),s=Math.floor(r[0].contentRect.width);(this.tableHeight!=i||this.tableWidth!=s)&&(this.tableHeight=i,this.tableWidth=s,t.element.parentNode&&(this.containerHeight=t.element.parentNode.clientHeight,this.containerWidth=t.element.parentNode.clientWidth),this.redrawTable())}}),this.resizeObserver.observe(t.element),e=window.getComputedStyle(t.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(e.getPropertyValue("max-height")||e.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(r=>{if(!t.browserMobile||t.browserMobile&&(!t.modules.edit||t.modules.edit&&!t.modules.edit.currentCell)){var i=Math.floor(r[0].contentRect.height),s=Math.floor(r[0].contentRect.width);(this.containerHeight!=i||this.containerWidth!=s)&&(this.containerHeight=i,this.containerWidth=s,this.tableHeight=t.element.clientHeight,this.tableWidth=t.element.clientWidth),this.redrawTable()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!t.browserMobile||t.browserMobile&&(!t.modules.edit||t.modules.edit&&!t.modules.edit.currentCell))&&(t.columnManager.rerenderColumns(!0),t.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(t=>{this.visible=t[0].isIntersecting,this.initialized?this.visible&&(this.redrawTable(this.initialRedraw),this.initialRedraw=!1):(this.initialized=!0,this.initialRedraw=!this.visible)}),this.visibilityObserver.observe(this.table.element)}redrawTable(t){this.initialized&&this.visible&&(this.table.columnManager.rerenderColumns(!0),this.table.redraw(t))}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.resizeObserver&&this.resizeObserver.unobserve(this.table.element),this.visibilityObserver&&this.visibilityObserver.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}};function uC(n,t,e){var r=document.createElement("div"),i=n.getRow()._row.modules.responsiveLayout;r.classList.add("tabulator-responsive-collapse-toggle"),r.innerHTML=`<svg class='tabulator-responsive-collapse-toggle-open' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12" fill="none" stroke-width="3" stroke-linecap="round" />
  <line y1="7" x1="12" y2="17" x2="12" fill="none" stroke-width="3" stroke-linecap="round" />
</svg>

<svg class='tabulator-responsive-collapse-toggle-close' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12"  fill="none" stroke-width="3" stroke-linecap="round" />
</svg>`,n.getElement().classList.add("tabulator-row-handle");function s(o){var a=i.element;i.open=o,a&&(i.open?(r.classList.add("open"),a.style.display=""):(r.classList.remove("open"),a.style.display="none"))}return r.addEventListener("click",function(o){o.stopImmediatePropagation(),s(!i.open),n.getTable().rowManager.adjustTableSize()}),s(i.open),r}var hC={format:{formatters:{responsiveCollapse:uC}}},Zd=class extends xr{static moduleName="responsiveLayout";static moduleExtensions=hC;constructor(t){super(t),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),this.table.options.responsiveLayout==="collapse"&&(this.subscribe("row-data-changed",this.generateCollapsedRowContent.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(t){["fitColumns","fitDataStretch"].indexOf(this.layoutMode())===-1&&(t||this.update())}initializeResponsivity(){var t=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.collapseFormatter&&(this.collapseFormatter=this.collapseFormatter.bind(this.table)),this.table.columnManager.columnsByIndex.forEach((e,r)=>{e.modules.responsive&&e.modules.responsive.order&&e.modules.responsive.visible&&(e.modules.responsive.index=r,t.push(e),!e.visible&&this.mode==="collapse"&&this.hiddenColumns.push(e))}),t=t.reverse(),t=t.sort((e,r)=>{var i=r.modules.responsive.order-e.modules.responsive.order;return i||r.modules.responsive.index-e.modules.responsive.index}),this.columns=t,this.mode==="collapse"&&this.generateCollapsedContent();for(let e of this.table.columnManager.columnsByIndex)if(e.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=e;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(t){var e=t.getDefinition();t.modules.responsive={order:typeof e.responsive>"u"?1:e.responsive,visible:e.visible!==!1}}initializeRow(t){var e;t.type!=="calc"&&(e=document.createElement("div"),e.classList.add("tabulator-responsive-collapse"),t.modules.responsiveLayout={element:e,open:this.collapseStartOpen},this.collapseStartOpen||(e.style.display="none"))}layoutRow(t){var e=t.getElement();t.modules.responsiveLayout&&(e.appendChild(t.modules.responsiveLayout.element),this.generateCollapsedRowContent(t))}updateColumnVisibility(t,e){!e&&t.modules.responsive&&(t.modules.responsive.visible=t.visible,this.initializeResponsivity())}hideColumn(t){var e=this.hiddenColumns.length;t.hide(!1,!0),this.mode==="collapse"&&(this.hiddenColumns.unshift(t),this.generateCollapsedContent(),this.collapseHandleColumn&&!e&&this.collapseHandleColumn.show())}showColumn(t){var e;t.show(!1,!0),t.setWidth(t.getWidth()),this.mode==="collapse"&&(e=this.hiddenColumns.indexOf(t),e>-1&&this.hiddenColumns.splice(e,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var t=!0;t;){let e=this.table.modules.layout.getMode()=="fitColumns"?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),r=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-e;if(r<0){let i=this.columns[this.index];i?(this.hideColumn(i),this.index++):t=!1}else{let i=this.columns[this.index-1];i&&r>0&&r>=i.getWidth()?(this.showColumn(i),this.index--):t=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var t=this.table.rowManager.getDisplayRows();t.forEach(e=>{this.generateCollapsedRowContent(e)})}generateCollapsedRowContent(t){var e,r;if(t.modules.responsiveLayout){for(e=t.modules.responsiveLayout.element;e.firstChild;)e.removeChild(e.firstChild);r=this.collapseFormatter(this.generateCollapsedRowData(t)),r&&e.appendChild(r),t.calcHeight(!0)}}generateCollapsedRowData(t){var e=t.getData(),r=[],i;return this.hiddenColumns.forEach(s=>{var o=s.getFieldValue(e);if(s.definition.title&&s.field)if(s.modules.format&&this.table.options.responsiveLayoutCollapseUseFormatters){let a=function(l){l()};i={value:!1,data:{},getValue:function(){return o},getData:function(){return e},getType:function(){return"cell"},getElement:function(){return document.createElement("div")},getRow:function(){return t.getComponent()},getColumn:function(){return s.getComponent()},getTable:()=>this.table},r.push({field:s.field,title:s.definition.title,value:s.modules.format.formatter.call(this.table.modules.format,i,s.modules.format.params,a)})}else r.push({field:s.field,title:s.definition.title,value:o})}),r}formatCollapsedData(t){var e=document.createElement("table");return t.forEach(r=>{var i=document.createElement("tr"),s=document.createElement("td"),o=document.createElement("td"),a,l=document.createElement("strong");s.appendChild(l),this.modules.localize.bind("columns|"+r.field,function(c){l.innerHTML=c||r.title}),r.value instanceof Node?(a=document.createElement("div"),a.appendChild(r.value),o.appendChild(a)):o.innerHTML=r.value,i.appendChild(s),i.appendChild(o),e.appendChild(i)}),Object.keys(t).length?e:""}};function cC(n,t,e){var r=document.createElement("input"),i=!1;if(r.type="checkbox",r.setAttribute("aria-label","Select Row"),this.table.modExists("selectRow",!0))if(r.addEventListener("click",o=>{o.stopPropagation()}),typeof n.getRow=="function"){var s=n.getRow();s instanceof sl?(r.addEventListener("change",o=>{this.table.options.selectableRowsRangeMode==="click"&&i?i=!1:s.toggleSelect()}),this.table.options.selectableRowsRangeMode==="click"&&r.addEventListener("click",o=>{i=!0,this.table.modules.selectRow.handleComplexRowClick(s._row,o)}),r.checked=s.isSelected&&s.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(s,r)):r=""}else r.addEventListener("change",o=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(r);return r}var fC={format:{formatters:{rowSelection:cC}}},Kd=class extends xr{static moduleName="selectRow";static moduleExtensions=fC;constructor(t){super(t),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectableRows","highlight"),this.registerTableOption("selectableRowsRangeMode","drag"),this.registerTableOption("selectableRowsRollingSelection",!0),this.registerTableOption("selectableRowsPersistence",!0),this.registerTableOption("selectableRowsCheck",function(e,r){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){this.deprecatedOptionsCheck(),this.table.options.selectableRows==="highlight"&&this.table.options.selectableRange&&(this.table.options.selectableRows=!1),this.table.options.selectableRows!==!1&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectableRows&&!this.table.options.selectableRowsPersistence&&this.subscribe("data-refreshing",this.deselectRows.bind(this)))}deprecatedOptionsCheck(){}rowRetrieve(t,e){return t==="selected"?this.selectedRows:e}rowDeleted(t){this._deselectRow(t,!0)}clearSelectionData(t){var e=this.selectedRows.length;this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],e&&t!==!0&&this._rowSelectionChanged()}initializeRow(t){var e=this,r=e.checkRowSelectability(t),i=t.getElement(),s=function(){setTimeout(function(){e.selecting=!1},50),document.body.removeEventListener("mouseup",s)};t.modules.select={selected:!1},i.classList.toggle("tabulator-selectable",r),i.classList.toggle("tabulator-unselectable",!r),e.checkRowSelectability(t)&&e.table.options.selectableRows&&e.table.options.selectableRows!="highlight"&&(e.table.options.selectableRowsRangeMode==="click"?i.addEventListener("click",this.handleComplexRowClick.bind(this,t)):(i.addEventListener("click",function(o){(!e.table.modExists("edit")||!e.table.modules.edit.getCurrentCell())&&e.table._clearSelection(),e.selecting||e.toggleRow(t)}),i.addEventListener("mousedown",function(o){if(o.shiftKey)return e.table._clearSelection(),e.selecting=!0,e.selectPrev=[],document.body.addEventListener("mouseup",s),document.body.addEventListener("keyup",s),e.toggleRow(t),!1}),i.addEventListener("mouseenter",function(o){e.selecting&&(e.table._clearSelection(),e.toggleRow(t),e.selectPrev[1]==t&&e.toggleRow(e.selectPrev[0]))}),i.addEventListener("mouseout",function(o){e.selecting&&(e.table._clearSelection(),e.selectPrev.unshift(t))})))}handleComplexRowClick(t,e){if(e.shiftKey){this.table._clearSelection(),this.lastClickedRow=this.lastClickedRow||t;var r=this.table.rowManager.getDisplayRowIndex(this.lastClickedRow),i=this.table.rowManager.getDisplayRowIndex(t),s=r<=i?r:i,o=r>=i?r:i,a=this.table.rowManager.getDisplayRows().slice(0),l=a.splice(s,o-s+1);e.ctrlKey||e.metaKey?(l.forEach(c=>{c!==this.lastClickedRow&&(this.table.options.selectableRows!==!0&&!this.isRowSelected(t)?this.selectedRows.length<this.table.options.selectableRows&&this.toggleRow(c):this.toggleRow(c))}),this.lastClickedRow=t):(this.deselectRows(void 0,!0),this.table.options.selectableRows!==!0&&l.length>this.table.options.selectableRows&&(l=l.slice(0,this.table.options.selectableRows)),this.selectRows(l)),this.table._clearSelection()}else e.ctrlKey||e.metaKey?(this.toggleRow(t),this.lastClickedRow=t):(this.deselectRows(void 0,!0),this.selectRows(t),this.lastClickedRow=t)}checkRowSelectability(t){return t&&t.type==="row"?this.table.options.selectableRowsCheck.call(this.table,t.getComponent()):!1}toggleRow(t){this.checkRowSelectability(t)&&(t.modules.select&&t.modules.select.selected?this._deselectRow(t):this._selectRow(t))}selectRows(t){var e=[],r,i;switch(typeof t){case"undefined":r=this.table.rowManager.rows;break;case"number":r=this.table.rowManager.findRow(t);break;case"string":r=this.table.rowManager.findRow(t),r||(r=this.table.rowManager.getRows(t));break;default:r=t;break}Array.isArray(r)?r.length&&(r.forEach(s=>{i=this._selectRow(s,!0,!0),i&&e.push(i)}),this._rowSelectionChanged(!1,e)):r&&this._selectRow(r,!1,!0)}_selectRow(t,e,r){if(!isNaN(this.table.options.selectableRows)&&this.table.options.selectableRows!==!0&&!r&&this.selectedRows.length>=this.table.options.selectableRows)if(this.table.options.selectableRowsRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;var i=this.table.rowManager.findRow(t);if(i){if(this.selectedRows.indexOf(i)==-1)return i.getElement().classList.add("tabulator-selected"),i.modules.select||(i.modules.select={}),i.modules.select.selected=!0,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!0),this.selectedRows.push(i),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!0),this.dispatchExternal("rowSelected",i.getComponent()),this._rowSelectionChanged(e,i),i}else e||console.warn("Selection Error - No such row found, ignoring selection:"+t)}isRowSelected(t){return this.selectedRows.indexOf(t)!==-1}deselectRows(t,e){var r=[],i,s;switch(typeof t){case"undefined":i=Object.assign([],this.selectedRows);break;case"number":i=this.table.rowManager.findRow(t);break;case"string":i=this.table.rowManager.findRow(t),i||(i=this.table.rowManager.getRows(t));break;default:i=t;break}Array.isArray(i)?i.length&&(i.forEach(o=>{s=this._deselectRow(o,!0,!0),s&&r.push(s)}),this._rowSelectionChanged(e,[],r)):i&&this._deselectRow(i,e,!0)}_deselectRow(t,e){var r=this,i=r.table.rowManager.findRow(t),s,o;if(i){if(s=r.selectedRows.findIndex(function(a){return a==i}),s>-1)return o=i.getElement(),o&&o.classList.remove("tabulator-selected"),i.modules.select||(i.modules.select={}),i.modules.select.selected=!1,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!1),r.selectedRows.splice(s,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!1),this.dispatchExternal("rowDeselected",i.getComponent()),r._rowSelectionChanged(e,void 0,i),i}else e||console.warn("Deselection Error - No such row found, ignoring selection:"+t)}getSelectedData(){var t=[];return this.selectedRows.forEach(function(e){t.push(e.getData())}),t}getSelectedRows(){var t=[];return this.selectedRows.forEach(function(e){t.push(e.getComponent())}),t}_rowSelectionChanged(t,e=[],r=[]){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),t||(Array.isArray(e)||(e=[e]),e=e.map(i=>i.getComponent()),Array.isArray(r)||(r=[r]),r=r.map(i=>i.getComponent()),this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows(),e,r))}registerRowSelectCheckbox(t,e){t._row.modules.select||(t._row.modules.select={}),t._row.modules.select.checkboxEl=e}registerHeaderSelectCheckbox(t){this.headerCheckboxElement=t}childRowSelection(t,e){var r=this.table.modules.dataTree.getChildren(t,!0,!0);if(e)for(let i of r)this._selectRow(i,!0);else for(let i of r)this._deselectRow(i,!0)}},Jd=class{constructor(t){return this._range=t,new Proxy(this,{get:function(e,r,i){return typeof e[r]<"u"?e[r]:e._range.table.componentFunctionBinder.handle("range",e._range,r)}})}getElement(){return this._range.element}getData(){return this._range.getData()}getCells(){return this._range.getCells(!0,!0)}getStructuredCells(){return this._range.getStructuredCells()}getRows(){return this._range.getRows().map(t=>t.getComponent())}getColumns(){return this._range.getColumns().map(t=>t.getComponent())}getBounds(){return this._range.getBounds()}getTopEdge(){return this._range.top}getBottomEdge(){return this._range.bottom}getLeftEdge(){return this._range.left}getRightEdge(){return this._range.right}setBounds(t,e){this._range.destroyedGuard("setBounds")&&this._range.setBounds(t&&t._cell,e&&e._cell)}setStartBound(t){this._range.destroyedGuard("setStartBound")&&(this._range.setEndBound(t&&t._cell),this._range.rangeManager.layoutElement())}setEndBound(t){this._range.destroyedGuard("setEndBound")&&(this._range.setEndBound(t&&t._cell),this._range.rangeManager.layoutElement())}clearValues(){this._range.destroyedGuard("clearValues")&&this._range.clearValues()}remove(){this._range.destroyedGuard("remove")&&this._range.destroy(!0)}},Qd=class extends Un{constructor(t,e,r,i){super(t),this.rangeManager=e,this.element=null,this.initialized=!1,this.initializing={start:!1,end:!1},this.destroyed=!1,this.top=0,this.bottom=0,this.left=0,this.right=0,this.table=t,this.start={row:0,col:0},this.end={row:0,col:0},this.rangeManager.rowHeader&&(this.left=1,this.right=1,this.start.col=1,this.end.col=1),this.initElement(),setTimeout(()=>{this.initBounds(r,i)})}initElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-range")}initBounds(t,e){this._updateMinMax(),t&&this.setBounds(t,e||t)}setStart(t,e){(this.start.row!==t||this.start.col!==e)&&(this.start.row=t,this.start.col=e,this.initializing.start=!0,this._updateMinMax())}setEnd(t,e){(this.end.row!==t||this.end.col!==e)&&(this.end.row=t,this.end.col=e,this.initializing.end=!0,this._updateMinMax())}setBounds(t,e,r){t&&this.setStartBound(t),this.setEndBound(e||t),this.rangeManager.layoutElement(r)}setStartBound(t){var e,r;t.type==="column"?this.rangeManager.columnSelection&&this.setStart(0,t.getPosition()-1):(e=t.row.position-1,r=t.column.getPosition()-1,t.column===this.rangeManager.rowHeader?this.setStart(e,1):this.setStart(e,r))}setEndBound(t){var e=this._getTableRows().length,r,i,s;t.type==="column"?this.rangeManager.columnSelection&&(this.rangeManager.selecting==="column"?this.setEnd(e-1,t.getPosition()-1):this.rangeManager.selecting==="cell"&&this.setEnd(0,t.getPosition()-1)):(r=t.row.position-1,i=t.column.getPosition()-1,s=t.column===this.rangeManager.rowHeader,this.rangeManager.selecting==="row"?this.setEnd(r,this._getTableColumns().length-1):this.rangeManager.selecting!=="row"&&s?this.setEnd(r,0):this.rangeManager.selecting==="column"?this.setEnd(e-1,i):this.setEnd(r,i))}_updateMinMax(){this.top=Math.min(this.start.row,this.end.row),this.bottom=Math.max(this.start.row,this.end.row),this.left=Math.min(this.start.col,this.end.col),this.right=Math.max(this.start.col,this.end.col),this.initialized?this.dispatchExternal("rangeChanged",this.getComponent()):this.initializing.start&&this.initializing.end&&(this.initialized=!0,this.dispatchExternal("rangeAdded",this.getComponent()))}_getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}_getTableRows(){return this.table.rowManager.getDisplayRows().filter(t=>t.type==="row")}layout(){var t=this.table.rowManager.renderer.vDomTop,e=this.table.rowManager.renderer.vDomBottom,r=this.table.columnManager.renderer.leftCol,i=this.table.columnManager.renderer.rightCol,s,o,a,l,c,h,d,p,g,m;this.table.options.renderHorizontal==="virtual"&&this.rangeManager.rowHeader&&(i+=1),t==null&&(t=0),e==null&&(e=1/0),r==null&&(r=0),i==null&&(i=1/0),this.overlaps(r,t,i,e)&&(s=Math.max(this.top,t),o=Math.min(this.bottom,e),a=Math.max(this.left,r),l=Math.min(this.right,i),c=this.rangeManager.getCell(s,a),h=this.rangeManager.getCell(o,l),d=c.getElement(),p=h.getElement(),g=c.row.getElement(),m=h.row.getElement(),this.element.classList.add("tabulator-range-active"),this.table.rtl?(this.element.style.right=g.offsetWidth-d.offsetLeft-d.offsetWidth+"px",this.element.style.width=d.offsetLeft+d.offsetWidth-p.offsetLeft+"px"):(this.element.style.left=g.offsetLeft+d.offsetLeft+"px",this.element.style.width=p.offsetLeft+p.offsetWidth-d.offsetLeft+"px"),this.element.style.top=g.offsetTop+"px",this.element.style.height=m.offsetTop+m.offsetHeight-g.offsetTop+"px")}atTopLeft(t){return t.row.position-1===this.top&&t.column.getPosition()-1===this.left}atBottomRight(t){return t.row.position-1===this.bottom&&t.column.getPosition()-1===this.right}occupies(t){return this.occupiesRow(t.row)&&this.occupiesColumn(t.column)}occupiesRow(t){return this.top<=t.position-1&&t.position-1<=this.bottom}occupiesColumn(t){return this.left<=t.getPosition()-1&&t.getPosition()-1<=this.right}overlaps(t,e,r,i){return!(this.left>r||t>this.right||this.top>i||e>this.bottom)}getData(){var t=[],e=this.getRows(),r=this.getColumns();return e.forEach(i=>{var s=i.getData(),o={};r.forEach(a=>{o[a.field]=s[a.field]}),t.push(o)}),t}getCells(t,e){var r=[],i=this.getRows(),s=this.getColumns();return t?r=i.map(o=>{var a=[];return o.getCells().forEach(l=>{s.includes(l.column)&&a.push(e?l.getComponent():l)}),a}):i.forEach(o=>{o.getCells().forEach(a=>{s.includes(a.column)&&r.push(e?a.getComponent():a)})}),r}getStructuredCells(){return this.getCells(!0,!0)}getRows(){return this._getTableRows().slice(this.top,this.bottom+1)}getColumns(){return this._getTableColumns().slice(this.left,this.right+1)}clearValues(){var t=this.getCells(),e=this.table.options.selectableRangeClearCellsValue;this.table.blockRedraw(),t.forEach(r=>{r.setValue(e)}),this.table.restoreRedraw()}getBounds(t){var e=this.getCells(!1,t),r={start:null,end:null};return e.length?(r.start=e[0],r.end=e[e.length-1]):console.warn("No bounds defined on range"),r}getComponent(){return this.component||(this.component=new Jd(this)),this.component}destroy(t){this.destroyed=!0,this.element.remove(),t&&this.rangeManager.rangeRemoved(this),this.initialized&&this.dispatchExternal("rangeRemoved",this.getComponent())}destroyedGuard(t){return this.destroyed&&console.warn("You cannot call the "+t+" function on a destroyed range"),!this.destroyed}},dC={rangeJumpUp:["ctrl + 38","meta + 38"],rangeJumpDown:["ctrl + 40","meta + 40"],rangeJumpLeft:["ctrl + 37","meta + 37"],rangeJumpRight:["ctrl + 39","meta + 39"],rangeExpandUp:"shift + 38",rangeExpandDown:"shift + 40",rangeExpandLeft:"shift + 37",rangeExpandRight:"shift + 39",rangeExpandJumpUp:["ctrl + shift + 38","meta + shift + 38"],rangeExpandJumpDown:["ctrl + shift + 40","meta + shift + 40"],rangeExpandJumpLeft:["ctrl + shift + 37","meta + shift + 37"],rangeExpandJumpRight:["ctrl + shift + 39","meta + shift + 39"]},pC={rangeJumpLeft:function(n){this.dispatch("keybinding-nav-range",n,"left",!0,!1)},rangeJumpRight:function(n){this.dispatch("keybinding-nav-range",n,"right",!0,!1)},rangeJumpUp:function(n){this.dispatch("keybinding-nav-range",n,"up",!0,!1)},rangeJumpDown:function(n){this.dispatch("keybinding-nav-range",n,"down",!0,!1)},rangeExpandLeft:function(n){this.dispatch("keybinding-nav-range",n,"left",!1,!0)},rangeExpandRight:function(n){this.dispatch("keybinding-nav-range",n,"right",!1,!0)},rangeExpandUp:function(n){this.dispatch("keybinding-nav-range",n,"up",!1,!0)},rangeExpandDown:function(n){this.dispatch("keybinding-nav-range",n,"down",!1,!0)},rangeExpandJumpLeft:function(n){this.dispatch("keybinding-nav-range",n,"left",!0,!0)},rangeExpandJumpRight:function(n){this.dispatch("keybinding-nav-range",n,"right",!0,!0)},rangeExpandJumpUp:function(n){this.dispatch("keybinding-nav-range",n,"up",!0,!0)},rangeExpandJumpDown:function(n){this.dispatch("keybinding-nav-range",n,"down",!0,!0)}},mC={range:function(n){var t=[],e=this.table.modules.selectRange.activeRange,r=!1,i,s,o,a,l;return l=n.length,e&&(i=e.getBounds(),s=i.start,i.start===i.end&&(r=!0),s&&(t=this.table.rowManager.activeRows.slice(),o=t.indexOf(s.row),r?a=n.length:a=t.indexOf(i.end.row)-o+1,o>-1&&(this.table.blockRedraw(),t=t.slice(o,o+a),t.forEach((c,h)=>{c.updateData(n[h%l])}),this.table.restoreRedraw()))),t}},gC={range:function(n){var t=[],e=[],r=this.table.modules.selectRange.activeRange,i=!1,s,o,a,l,c;return r&&(s=r.getBounds(),o=s.start,s.start===s.end&&(i=!0),o&&(n=n.split(`
`),n.forEach(function(h){t.push(h.split("	"))}),t.length&&(l=this.table.columnManager.getVisibleColumnsByIndex(),c=l.indexOf(o.column),c>-1)))?(i?a=t[0].length:a=l.indexOf(s.end.column)-c+1,l=l.slice(c,c+a),t.forEach(h=>{var d={},p=h.length;l.forEach(function(g,m){d[g.field]=h[m%p]}),e.push(d)}),e):!1}},yC={range:function(){var n=this.modules.selectRange.selectedColumns();return this.columnManager.rowHeader&&n.unshift(this.columnManager.rowHeader),n}},vC={range:function(){return this.modules.selectRange.selectedRows()}},bC={keybindings:{bindings:dC,actions:pC},clipboard:{pasteActions:mC,pasteParsers:gC},export:{columnLookups:yC,rowLookups:vC}},tp=class extends xr{static moduleName="selectRange";static moduleInitOrder=1;static moduleExtensions=bC;constructor(t){super(t),this.selecting="cell",this.mousedown=!1,this.ranges=[],this.overlay=null,this.rowHeader=null,this.layoutChangeTimeout=null,this.columnSelection=!1,this.rowSelection=!1,this.maxRanges=0,this.activeRange=!1,this.blockKeydown=!1,this.keyDownEvent=this._handleKeyDown.bind(this),this.mouseUpEvent=this._handleMouseUp.bind(this),this.registerTableOption("selectableRange",!1),this.registerTableOption("selectableRangeColumns",!1),this.registerTableOption("selectableRangeRows",!1),this.registerTableOption("selectableRangeClearCells",!1),this.registerTableOption("selectableRangeClearCellsValue",void 0),this.registerTableFunction("getRangesData",this.getRangesData.bind(this)),this.registerTableFunction("getRanges",this.getRanges.bind(this)),this.registerTableFunction("addRange",this.addRangeFromComponent.bind(this)),this.registerComponentFunction("cell","getRanges",this.cellGetRanges.bind(this)),this.registerComponentFunction("row","getRanges",this.rowGetRanges.bind(this)),this.registerComponentFunction("column","getRanges",this.colGetRanges.bind(this))}initialize(){this.options("selectableRange")&&(this.options("selectableRows")?console.warn("SelectRange functionality cannot be used in conjunction with row selection"):(this.maxRanges=this.options("selectableRange"),this.initializeTable(),this.initializeWatchers()),this.options("columns").findIndex(t=>t.frozen)>0&&console.warn("Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior."),this.options("columns").filter(t=>t.frozen)>1&&console.warn("Having multiple frozen columns with selectRange option may result in unpredictable behavior."))}initializeTable(){this.overlay=document.createElement("div"),this.overlay.classList.add("tabulator-range-overlay"),this.rangeContainer=document.createElement("div"),this.rangeContainer.classList.add("tabulator-range-container"),this.activeRangeCellElement=document.createElement("div"),this.activeRangeCellElement.classList.add("tabulator-range-cell-active"),this.overlay.appendChild(this.rangeContainer),this.overlay.appendChild(this.activeRangeCellElement),this.table.rowManager.element.addEventListener("keydown",this.keyDownEvent),this.resetRanges(),this.table.rowManager.element.appendChild(this.overlay),this.table.columnManager.element.setAttribute("tabindex",0),this.table.element.classList.add("tabulator-ranges")}initializeWatchers(){this.columnSelection=this.options("selectableRangeColumns"),this.rowSelection=this.options("selectableRangeRows"),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-mousedown",this.handleColumnMouseDown.bind(this)),this.subscribe("column-mousemove",this.handleColumnMouseMove.bind(this)),this.subscribe("column-resized",this.handleColumnResized.bind(this)),this.subscribe("column-moving",this.handleColumnMoving.bind(this)),this.subscribe("column-moved",this.handleColumnMoved.bind(this)),this.subscribe("column-width",this.layoutChange.bind(this)),this.subscribe("column-height",this.layoutChange.bind(this)),this.subscribe("column-resized",this.layoutChange.bind(this)),this.subscribe("columns-loaded",this.updateHeaderColumn.bind(this)),this.subscribe("cell-height",this.layoutChange.bind(this)),this.subscribe("cell-rendered",this.renderCell.bind(this)),this.subscribe("cell-mousedown",this.handleCellMouseDown.bind(this)),this.subscribe("cell-mousemove",this.handleCellMouseMove.bind(this)),this.subscribe("cell-click",this.handleCellClick.bind(this)),this.subscribe("cell-editing",this.handleEditingCell.bind(this)),this.subscribe("page-changed",this.redraw.bind(this)),this.subscribe("scroll-vertical",this.layoutChange.bind(this)),this.subscribe("scroll-horizontal",this.layoutChange.bind(this)),this.subscribe("data-destroy",this.tableDestroyed.bind(this)),this.subscribe("data-processed",this.resetRanges.bind(this)),this.subscribe("table-layout",this.layoutElement.bind(this)),this.subscribe("table-redraw",this.redraw.bind(this)),this.subscribe("table-destroy",this.tableDestroyed.bind(this)),this.subscribe("edit-editor-clear",this.finishEditingCell.bind(this)),this.subscribe("edit-blur",this.restoreFocus.bind(this)),this.subscribe("keybinding-nav-prev",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-next",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-left",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-right",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-up",this.keyNavigate.bind(this,"up")),this.subscribe("keybinding-nav-down",this.keyNavigate.bind(this,"down")),this.subscribe("keybinding-nav-range",this.keyNavigateRange.bind(this))}initializeColumn(t){this.columnSelection&&t.definition.headerSort&&this.options("headerSortClickElement")!=="icon"&&console.warn("Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'."),t.modules.edit}updateHeaderColumn(){var t;this.rowSelection&&(this.rowHeader=this.table.columnManager.getVisibleColumnsByIndex()[0],this.rowHeader&&(this.rowHeader.definition.cssClass=this.rowHeader.definition.cssClass+" tabulator-range-row-header",this.rowHeader.definition.headerSort&&console.warn("Using column headerSort with selectableRangeRows option may result in unpredictable behavior"),this.rowHeader.definition.editor&&console.warn("Using column editor with selectableRangeRows option may result in unpredictable behavior"))),this.table.modules.frozenColumns&&this.table.modules.frozenColumns.active&&(t=this.table.modules.frozenColumns.getFrozenColumns(),(t.length>1||t.length===1&&t[0]!==this.rowHeader)&&console.warn("Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior"))}getRanges(){return this.ranges.map(t=>t.getComponent())}getRangesData(){return this.ranges.map(t=>t.getData())}addRangeFromComponent(t,e){return t=t?t._cell:null,e=e?e._cell:null,this.addRange(t,e)}cellGetRanges(t){var e=[];return t.column===this.rowHeader?e=this.ranges.filter(r=>r.occupiesRow(t.row)):e=this.ranges.filter(r=>r.occupies(t)),e.map(r=>r.getComponent())}rowGetRanges(t){var e=this.ranges.filter(r=>r.occupiesRow(t));return e.map(r=>r.getComponent())}colGetRanges(t){var e=this.ranges.filter(r=>r.occupiesColumn(t));return e.map(r=>r.getComponent())}_handleMouseUp(t){this.mousedown=!1,document.removeEventListener("mouseup",this.mouseUpEvent)}_handleKeyDown(t){if(!this.blockKeydown&&(!this.table.modules.edit||this.table.modules.edit&&!this.table.modules.edit.currentCell)){if(t.key==="Enter"){if(this.table.modules.edit&&this.table.modules.edit.currentCell)return;this.table.modules.edit.editCell(this.getActiveCell()),t.preventDefault()}(t.key==="Backspace"||t.key==="Delete")&&this.options("selectableRangeClearCells")&&this.activeRange&&this.activeRange.clearValues()}}initializeFocus(t){var e;this.restoreFocus();try{document.selection?(e=document.body.createTextRange(),e.moveToElementText(t.getElement()),e.select()):window.getSelection&&(e=document.createRange(),e.selectNode(t.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(e))}catch{}}restoreFocus(t){return this.table.rowManager.element.focus(),!0}handleColumnResized(t){var e;this.selecting!=="column"&&this.selecting!=="all"||(e=this.ranges.some(r=>r.occupiesColumn(t)),e&&this.ranges.forEach(r=>{var i=r.getColumns(!0);i.forEach(s=>{s!==t&&s.setWidth(t.width)})}))}handleColumnMoving(t,e){this.resetRanges().setBounds(e),this.overlay.style.visibility="hidden"}handleColumnMoved(t,e,r){this.activeRange.setBounds(t),this.layoutElement()}handleColumnMouseDown(t,e){t.button===2&&(this.selecting==="column"||this.selecting==="all")&&this.activeRange.occupiesColumn(e)||this.table.options.movableColumns&&this.selecting==="column"&&this.activeRange.occupiesColumn(e)||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(t,e))}handleColumnMouseMove(t,e){e===this.rowHeader||!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,e,!0)}renderCell(t){var e=t.getElement(),r=this.ranges.findIndex(i=>i.occupies(t));e.classList.toggle("tabulator-range-selected",r!==-1),e.classList.toggle("tabulator-range-only-cell-selected",this.ranges.length===1&&this.ranges[0].atTopLeft(t)&&this.ranges[0].atBottomRight(t)),e.dataset.range=r}handleCellMouseDown(t,e){t.button===2&&(this.activeRange.occupies(e)||(this.selecting==="row"||this.selecting==="all")&&this.activeRange.occupiesRow(e.row))||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(t,e))}handleCellMouseMove(t,e){!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,e,!0)}handleCellClick(t,e){this.initializeFocus(e)}handleEditingCell(t){this.activeRange&&this.activeRange.setBounds(t)}finishEditingCell(){this.blockKeydown=!0,this.table.rowManager.element.focus(),setTimeout(()=>{this.blockKeydown=!1},10)}keyNavigate(t,e){this.navigate(!1,!1,t),e.preventDefault()}keyNavigateRange(t,e,r,i){this.navigate(r,i,e),t.preventDefault()}navigate(t,e,r){var i=!1,s,o,a,l,c,h;if(this.table.modules.edit&&this.table.modules.edit.currentCell)return!1;if(this.ranges.length>1&&(this.ranges=this.ranges.filter(d=>d===this.activeRange?(d.setEnd(d.start.row,d.start.col),!0):(d.destroy(),!1))),s=this.activeRange,o=e?s.end:s.start,a=o.row,l=o.col,t)switch(r){case"left":l=this.findJumpCellLeft(s.start.row,o.col);break;case"right":l=this.findJumpCellRight(s.start.row,o.col);break;case"up":a=this.findJumpCellUp(o.row,s.start.col);break;case"down":a=this.findJumpCellDown(o.row,s.start.col);break}else{if(e&&(this.selecting==="row"&&(r==="left"||r==="right")||this.selecting==="column"&&(r==="up"||r==="down")))return;switch(r){case"left":l=Math.max(l-1,0);break;case"right":l=Math.min(l+1,this.getTableColumns().length-1);break;case"up":a=Math.max(a-1,0);break;case"down":a=Math.min(a+1,this.getTableRows().length-1);break}}if(this.rowHeader&&l===0&&(l=1),i=l!==o.col||a!==o.row,e||s.setStart(a,l),s.setEnd(a,l),e||(this.selecting="cell"),i)return c=this.getRowByRangePos(s.end.row),h=this.getColumnByRangePos(s.end.col),(r==="left"||r==="right")&&h.getElement().parentNode===null?h.getComponent().scrollTo(void 0,!1):(r==="up"||r==="down")&&c.getElement().parentNode===null?c.getComponent().scrollTo(void 0,!1):this.autoScroll(s,c.getElement(),h.getElement()),this.layoutElement(),!0}rangeRemoved(t){this.ranges=this.ranges.filter(e=>e!==t),this.activeRange===t&&(this.ranges.length?this.activeRange=this.ranges[this.ranges.length-1]:this.addRange()),this.layoutElement()}findJumpRow(t,e,r,i,s){return r&&(e=e.reverse()),this.findJumpItem(i,s,e,function(o){return o.getData()[t.getField()]})}findJumpCol(t,e,r,i,s){return r&&(e=e.reverse()),this.findJumpItem(i,s,e,function(o){return t.getData()[o.getField()]})}findJumpItem(t,e,r,i){var s;for(let o of r){let a=i(o);if(t){if(s=o,a)break}else if(e){if(s=o,a)break}else if(a)s=o;else break}return s}findJumpCellLeft(t,e){var r=this.getRowByRangePos(t),i=this.getTableColumns(),s=this.isEmpty(r.getData()[i[e].getField()]),o=i[e-1]?this.isEmpty(r.getData()[i[e-1].getField()]):!1,a=this.rowHeader?i.slice(1,e):i.slice(0,e),l=this.findJumpCol(r,a,!0,s,o);return l?l.getPosition()-1:e}findJumpCellRight(t,e){var r=this.getRowByRangePos(t),i=this.getTableColumns(),s=this.isEmpty(r.getData()[i[e].getField()]),o=i[e+1]?this.isEmpty(r.getData()[i[e+1].getField()]):!1,a=this.findJumpCol(r,i.slice(e+1,i.length),!1,s,o);return a?a.getPosition()-1:e}findJumpCellUp(t,e){var r=this.getColumnByRangePos(e),i=this.getTableRows(),s=this.isEmpty(i[t].getData()[r.getField()]),o=i[t-1]?this.isEmpty(i[t-1].getData()[r.getField()]):!1,a=this.findJumpRow(r,i.slice(0,t),!0,s,o);return a?a.position-1:t}findJumpCellDown(t,e){var r=this.getColumnByRangePos(e),i=this.getTableRows(),s=this.isEmpty(i[t].getData()[r.getField()]),o=i[t+1]?this.isEmpty(i[t+1].getData()[r.getField()]):!1,a=this.findJumpRow(r,i.slice(t+1,i.length),!1,s,o);return a?a.position-1:t}newSelection(t,e){var r;if(e.type==="column"){if(!this.columnSelection)return;if(e===this.rowHeader){r=this.resetRanges(),this.selecting="all";var i,s=this.getCell(-1,-1);this.rowHeader?i=this.getCell(0,1):i=this.getCell(0,0),r.setBounds(i,s);return}else this.selecting="column"}else e.column===this.rowHeader?this.selecting="row":this.selecting="cell";t.shiftKey?this.activeRange.setBounds(!1,e):t.ctrlKey?this.addRange().setBounds(e):this.resetRanges().setBounds(e)}autoScroll(t,e,r){var i=this.table.rowManager.element,s,o,a,l,c;typeof e>"u"&&(e=this.getRowByRangePos(t.end.row).getElement()),typeof r>"u"&&(r=this.getColumnByRangePos(t.end.col).getElement()),this.rowHeader&&(s=this.rowHeader.getElement()),o={left:r.offsetLeft,right:r.offsetLeft+r.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight},a={left:i.scrollLeft,right:Math.ceil(i.scrollLeft+i.clientWidth),top:i.scrollTop,bottom:i.scrollTop+i.offsetHeight-this.table.rowManager.scrollbarWidth},s&&(a.left+=s.offsetWidth),l=a.left<o.left&&o.left<a.right&&a.left<o.right&&o.right<a.right,c=a.top<o.top&&o.top<a.bottom&&a.top<o.bottom&&o.bottom<a.bottom,l||(o.left<a.left?(i.scrollLeft=o.left,s&&(i.scrollLeft-=s.offsetWidth)):o.right>a.right&&(i.scrollLeft=o.right-i.clientWidth)),c||(o.top<a.top?i.scrollTop=o.top:o.bottom>a.bottom&&(i.scrollTop=o.bottom-i.clientHeight))}layoutChange(){this.overlay.style.visibility="hidden",clearTimeout(this.layoutChangeTimeout),this.layoutChangeTimeout=setTimeout(this.layoutRanges.bind(this),200)}redraw(t){t&&(this.selecting="cell",this.resetRanges(),this.layoutElement())}layoutElement(t){var e;t?e=this.table.rowManager.getVisibleRows(!0):e=this.table.rowManager.getRows(),e.forEach(r=>{r.type==="row"&&(this.layoutRow(r),r.cells.forEach(i=>this.renderCell(i)))}),this.getTableColumns().forEach(r=>{this.layoutColumn(r)}),this.layoutRanges()}layoutRow(t){var e=t.getElement(),r=!1,i=this.ranges.some(s=>s.occupiesRow(t));this.selecting==="row"?r=i:this.selecting==="all"&&(r=!0),e.classList.toggle("tabulator-range-selected",r),e.classList.toggle("tabulator-range-highlight",i)}layoutColumn(t){var e=t.getElement(),r=!1,i=this.ranges.some(s=>s.occupiesColumn(t));this.selecting==="column"?r=i:this.selecting==="all"&&(r=!0),e.classList.toggle("tabulator-range-selected",r),e.classList.toggle("tabulator-range-highlight",i)}layoutRanges(){var t,e,r;this.table.initialized&&(t=this.getActiveCell(),t&&(e=t.getElement(),r=t.row.getElement(),this.table.rtl?this.activeRangeCellElement.style.right=r.offsetWidth-e.offsetLeft-e.offsetWidth+"px":this.activeRangeCellElement.style.left=r.offsetLeft+e.offsetLeft+"px",this.activeRangeCellElement.style.top=r.offsetTop+"px",this.activeRangeCellElement.style.width=e.offsetWidth+"px",this.activeRangeCellElement.style.height=r.offsetHeight+"px",this.ranges.forEach(i=>i.layout()),this.overlay.style.visibility="visible"))}getCell(t,e){var r;return e<0&&(e=this.getTableColumns().length+e,e<0)?null:(t<0&&(t=this.getTableRows().length+t),r=this.table.rowManager.getRowFromPosition(t+1),r?r.getCells(!1,!0).filter(i=>i.column.visible)[e]:null)}getActiveCell(){return this.getCell(this.activeRange.start.row,this.activeRange.start.col)}getRowByRangePos(t){return this.getTableRows()[t]}getColumnByRangePos(t){return this.getTableColumns()[t]}getTableRows(){return this.table.rowManager.getDisplayRows().filter(t=>t.type==="row")}getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}addRange(t,e){var r;return this.maxRanges!==!0&&this.ranges.length>=this.maxRanges&&this.ranges.shift().destroy(),r=new Qd(this.table,this,t,e),this.activeRange=r,this.ranges.push(r),this.rangeContainer.appendChild(r.element),r}resetRanges(){var t,e,r;return this.ranges.forEach(i=>i.destroy()),this.ranges=[],t=this.addRange(),this.table.rowManager.activeRows.length&&(r=this.table.rowManager.activeRows[0].cells.filter(i=>i.column.visible),e=r[this.rowHeader?1:0],e&&(t.setBounds(e),this.initializeFocus(e))),t}tableDestroyed(){document.removeEventListener("mouseup",this.mouseUpEvent),this.table.rowManager.element.removeEventListener("keydown",this.keyDownEvent)}selectedRows(t){return t?this.activeRange.getRows().map(e=>e.getComponent()):this.activeRange.getRows()}selectedColumns(t){return t?this.activeRange.getColumns().map(e=>e.getComponent()):this.activeRange.getColumns()}isEmpty(t){return t==null||t===""}};function _C(n,t,e,r,i,s,o){var a=o.alignEmptyValues,l=o.decimalSeparator,c=o.thousandSeparator,h=0;if(n=String(n),t=String(t),c&&(n=n.split(c).join(""),t=t.split(c).join("")),l&&(n=n.split(l).join("."),t=t.split(l).join(".")),n=parseFloat(n),t=parseFloat(t),isNaN(n))h=isNaN(t)?0:-1;else if(isNaN(t))h=1;else return n-t;return(a==="top"&&s==="desc"||a==="bottom"&&s==="asc")&&(h*=-1),h}function wC(n,t,e,r,i,s,o){var a=o.alignEmptyValues,l=0,c;if(!n)l=t?-1:0;else if(!t)l=1;else{switch(typeof o.locale){case"boolean":o.locale&&(c=this.langLocale());break;case"string":c=o.locale;break}return String(n).toLowerCase().localeCompare(String(t).toLowerCase(),c)}return(a==="top"&&s==="desc"||a==="bottom"&&s==="asc")&&(l*=-1),l}function kp(n,t,e,r,i,s,o){var a=window.DateTime||luxon.DateTime,l=o.format||"dd/MM/yyyy HH:mm:ss",c=o.alignEmptyValues,h=0;if(typeof a<"u"){if(a.isDateTime(n)||(l==="iso"?n=a.fromISO(String(n)):n=a.fromFormat(String(n),l)),a.isDateTime(t)||(l==="iso"?t=a.fromISO(String(t)):t=a.fromFormat(String(t),l)),!n.isValid)h=t.isValid?-1:0;else if(!t.isValid)h=1;else return n-t;return(c==="top"&&s==="desc"||c==="bottom"&&s==="asc")&&(h*=-1),h}else console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}function xC(n,t,e,r,i,s,o){return o.format||(o.format="dd/MM/yyyy"),kp.call(this,n,t,e,r,i,s,o)}function EC(n,t,e,r,i,s,o){return o.format||(o.format="HH:mm"),kp.call(this,n,t,e,r,i,s,o)}function CC(n,t,e,r,i,s,o){var a=n===!0||n==="true"||n==="True"||n===1?1:0,l=t===!0||t==="true"||t==="True"||t===1?1:0;return a-l}function MC(n,t,e,r,i,s,o){var a=o.type||"length",l=o.alignEmptyValues,c=0;function h(d){var p;switch(a){case"length":p=d.length;break;case"sum":p=d.reduce(function(g,m){return g+m});break;case"max":p=Math.max.apply(null,d);break;case"min":p=Math.min.apply(null,d);break;case"avg":p=d.reduce(function(g,m){return g+m})/d.length;break}return p}if(!Array.isArray(n))c=Array.isArray(t)?-1:0;else if(!Array.isArray(t))c=1;else return h(t)-h(n);return(l==="top"&&s==="desc"||l==="bottom"&&s==="asc")&&(c*=-1),c}function SC(n,t,e,r,i,s,o){var a=typeof n>"u"?0:1,l=typeof t>"u"?0:1;return a-l}function kC(n,t,e,r,i,s,o){var a,l,c,h,d=0,p,g=/(\d+)|(\D+)/g,m=/\d/,b=o.alignEmptyValues,y=0;if(!n&&n!==0)y=!t&&t!==0?0:-1;else if(!t&&t!==0)y=1;else{if(isFinite(n)&&isFinite(t))return n-t;if(a=String(n).toLowerCase(),l=String(t).toLowerCase(),a===l)return 0;if(!(m.test(a)&&m.test(l)))return a>l?1:-1;for(a=a.match(g),l=l.match(g),p=a.length>l.length?l.length:a.length;d<p;)if(c=a[d],h=l[d++],c!==h)return isFinite(c)&&isFinite(h)?(c.charAt(0)==="0"&&(c="."+c),h.charAt(0)==="0"&&(h="."+h),c-h):c>h?1:-1;return a.length>l.length}return(b==="top"&&s==="desc"||b==="bottom"&&s==="asc")&&(y*=-1),y}var LC={number:_C,string:wC,date:xC,time:EC,datetime:kp,boolean:CC,array:MC,exists:SC,alphanum:kC},ep=class n extends xr{static moduleName="sort";static sorters=LC;constructor(t){super(t),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerTableOption("headerSortClickElement","header"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),this.table.options.sortMode==="remote"&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(t,e,r,i){var s=this.getSort();return s.forEach(o=>{delete o.column}),i.sort=s,i}userSetSort(t,e){this.setSort(t,e),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(t){var e=!1,r,i;switch(typeof t.definition.sorter){case"string":n.sorters[t.definition.sorter]?e=n.sorters[t.definition.sorter]:console.warn("Sort Error - No such sorter found: ",t.definition.sorter);break;case"function":e=t.definition.sorter;break}if(t.modules.sort={sorter:e,dir:"none",params:t.definition.sorterParams||{},startingDir:t.definition.headerSortStartingDir||"asc",tristate:t.definition.headerSortTristate},t.definition.headerSort!==!1){switch(r=t.getElement(),r.classList.add("tabulator-sortable"),i=document.createElement("div"),i.classList.add("tabulator-col-sorter"),this.table.options.headerSortClickElement){case"icon":i.classList.add("tabulator-col-sorter-element");break;case"header":r.classList.add("tabulator-col-sorter-element");break;default:r.classList.add("tabulator-col-sorter-element");break}switch(this.table.options.headerSortElement){case"function":break;case"object":i.appendChild(this.table.options.headerSortElement);break;default:i.innerHTML=this.table.options.headerSortElement}t.titleHolderElement.appendChild(i),t.modules.sort.element=i,this.setColumnHeaderSortIcon(t,"none"),this.table.options.headerSortClickElement==="icon"&&i.addEventListener("mousedown",s=>{s.stopPropagation()}),(this.table.options.headerSortClickElement==="icon"?i:r).addEventListener("click",s=>{var o="",a=[],l=!1;if(t.modules.sort){if(t.modules.sort.tristate)t.modules.sort.dir=="none"?o=t.modules.sort.startingDir:t.modules.sort.dir==t.modules.sort.startingDir?o=t.modules.sort.dir=="asc"?"desc":"asc":o="none";else switch(t.modules.sort.dir){case"asc":o="desc";break;case"desc":o="asc";break;default:o=t.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(s.shiftKey||s.ctrlKey)?(a=this.getSort(),l=a.findIndex(c=>c.field===t.getField()),l>-1?(a[l].dir=o,l=a.splice(l,1)[0],o!="none"&&a.push(l)):o!="none"&&a.push({column:t,dir:o}),this.setSort(a)):o=="none"?this.clear():this.setSort(t,o),this.refreshSort()}})}}refreshSort(){this.table.options.sortMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0)}hasChanged(){var t=this.changed;return this.changed=!1,t}getSort(){var t=this,e=[];return t.sortList.forEach(function(r){r.column&&e.push({column:r.column.getComponent(),field:r.column.getField(),dir:r.dir})}),e}setSort(t,e){var r=this,i=[];Array.isArray(t)||(t=[{column:t,dir:e}]),t.forEach(function(s){var o;o=r.table.columnManager.findColumn(s.column),o?(s.column=o,i.push(s),r.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",s.column)}),r.sortList=i,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(t){var e=this.table.rowManager.activeRows[0],r="string",i,s;if(e&&(e=e.getData(),i=t.getField(),i))switch(s=t.getFieldValue(e),typeof s){case"undefined":r="string";break;case"boolean":r="boolean";break;default:!isNaN(s)&&s!==""?r="number":s.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(r="alphanum");break}return n.sorters[r]}sort(t,e){var r=this,i=this.table.options.sortOrderReverse?r.sortList.slice().reverse():r.sortList,s=[],o=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",r.getSort()),e||r.clearColumnHeaders(),this.table.options.sortMode!=="remote"?(i.forEach(function(a,l){var c;a.column&&(c=a.column.modules.sort,c&&(c.sorter||(c.sorter=r.findSorter(a.column)),a.params=typeof c.params=="function"?c.params(a.column.getComponent(),a.dir):c.params,s.push(a)),e||r.setColumnHeader(a.column,a.dir))}),s.length&&r._sortItems(t,s)):e||i.forEach(function(a,l){r.setColumnHeader(a.column,a.dir)}),this.subscribedExternal("dataSorted")&&(t.forEach(a=>{o.push(a.getComponent())}),this.dispatchExternal("dataSorted",r.getSort(),o)),t}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(t=>{t.modules.sort&&(t.modules.sort.dir="none",t.getElement().setAttribute("aria-sort","none"),this.setColumnHeaderSortIcon(t,"none"))})}setColumnHeader(t,e){t.modules.sort.dir=e,t.getElement().setAttribute("aria-sort",e==="asc"?"ascending":"descending"),this.setColumnHeaderSortIcon(t,e)}setColumnHeaderSortIcon(t,e){var r=t.modules.sort.element,i;if(t.definition.headerSort&&typeof this.table.options.headerSortElement=="function"){for(;r.firstChild;)r.removeChild(r.firstChild);i=this.table.options.headerSortElement.call(this.table,t.getComponent(),e),typeof i=="object"?r.appendChild(i):r.innerHTML=i}}_sortItems(t,e){var r=e.length-1;t.sort((i,s)=>{for(var o,a=r;a>=0;a--){let l=e[a];if(o=this._sortRow(i,s,l.column,l.dir,l.params),o!==0)break}return o})}_sortRow(t,e,r,i,s){var o,a,l=i=="asc"?t:e,c=i=="asc"?e:t;return t=r.getFieldValue(l.getData()),e=r.getFieldValue(c.getData()),t=typeof t<"u"?t:"",e=typeof e<"u"?e:"",o=l.getComponent(),a=c.getComponent(),r.modules.sort.sorter.call(this,t,e,o,a,r.getComponent(),i,s)}},rp=class{constructor(t,e){this.columnCount=t,this.rowCount=e,this.columnString=[],this.columns=[],this.rows=[]}genColumns(t){var e=Math.max(this.columnCount,Math.max(...t.map(r=>r.length)));this.columnString=[],this.columns=[];for(let r=1;r<=e;r++)this.incrementChar(this.columnString.length-1),this.columns.push(this.columnString.join(""));return this.columns}genRows(t){var e=Math.max(this.rowCount,t.length);this.rows=[];for(let r=1;r<=e;r++)this.rows.push(r);return this.rows}incrementChar(t){let e=this.columnString[t];e?e!=="Z"?this.columnString[t]=String.fromCharCode(this.columnString[t].charCodeAt(0)+1):(this.columnString[t]="A",t?this.incrementChar(t-1):this.columnString.push("A")):this.columnString.push("A")}setRowCount(t){this.rowCount=t}setColumnCount(t){this.columnCount=t}},Fh=class{constructor(t){return this._sheet=t,new Proxy(this,{get:function(e,r,i){return typeof e[r]<"u"?e[r]:e._sheet.table.componentFunctionBinder.handle("sheet",e._sheet,r)}})}getTitle(){return this._sheet.title}getKey(){return this._sheet.key}getDefinition(){return this._sheet.getDefinition()}getData(){return this._sheet.getData()}setData(t){return this._sheet.setData(t)}clear(){return this._sheet.clear()}remove(){return this._sheet.remove()}active(){return this._sheet.active()}setTitle(t){return this._sheet.setTitle(t)}setRows(t){return this._sheet.setRows(t)}setColumns(t){return this._sheet.setColumns(t)}},zh=class extends Un{constructor(t,e){super(t.table),this.spreadsheetManager=t,this.definition=e,this.title=this.definition.title||"",this.key=this.definition.key||this.definition.title,this.rowCount=this.definition.rows,this.columnCount=this.definition.columns,this.data=this.definition.data||[],this.element=null,this.isActive=!1,this.grid=new rp(this.columnCount,this.rowCount),this.defaultColumnDefinition={width:100,headerHozAlign:"center",headerSort:!1},this.columnDefinition=Object.assign(this.defaultColumnDefinition,this.options("spreadsheetColumnDefinition")),this.columnDefs=[],this.rowDefs=[],this.columnFields=[],this.columns=[],this.rows=[],this.scrollTop=null,this.scrollLeft=null,this.initialize(),this.dispatchExternal("sheetAdded",this.getComponent())}initialize(){this.initializeElement(),this.initializeColumns(),this.initializeRows()}reinitialize(){this.initializeColumns(),this.initializeRows()}initializeElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tab"),this.element.innerText=this.title,this.element.addEventListener("click",()=>{this.spreadsheetManager.loadSheet(this)})}initializeColumns(){this.grid.setColumnCount(this.columnCount),this.columnFields=this.grid.genColumns(this.data),this.columnDefs=[],this.columnFields.forEach(t=>{var e=Object.assign({},this.columnDefinition);e.field=t,e.title=t,this.columnDefs.push(e)})}initializeRows(){var t;this.grid.setRowCount(this.rowCount),t=this.grid.genRows(this.data),this.rowDefs=[],t.forEach((e,r)=>{var i={_id:e},s=this.data[r];s&&s.forEach((o,a)=>{var l=this.columnFields[a];l&&(i[l]=o)}),this.rowDefs.push(i)})}unload(){this.isActive=!1,this.scrollTop=this.table.rowManager.scrollTop,this.scrollLeft=this.table.rowManager.scrollLeft,this.data=this.getData(!0),this.element.classList.remove("tabulator-spreadsheet-tab-active")}load(){var t=!this.isActive;this.isActive=!0,this.table.blockRedraw(),this.table.setData([]),this.table.setColumns(this.columnDefs),this.table.setData(this.rowDefs),this.table.restoreRedraw(),t&&this.scrollTop!==null&&(this.table.rowManager.element.scrollLeft=this.scrollLeft,this.table.rowManager.element.scrollTop=this.scrollTop),this.element.classList.add("tabulator-spreadsheet-tab-active"),this.dispatchExternal("sheetLoaded",this.getComponent())}getComponent(){return new Fh(this)}getDefinition(){return{title:this.title,key:this.key,rows:this.rowCount,columns:this.columnCount,data:this.getData()}}getData(t){var e=[],r,i,s;return this.rowDefs.forEach(o=>{var a=[];this.columnFields.forEach(l=>{a.push(o[l])}),e.push(a)}),!t&&!this.options("spreadsheetOutputFull")&&(r=e.map(o=>o.findLastIndex(a=>typeof a<"u")+1),i=Math.max(...r),s=r.findLastIndex(o=>o>0)+1,e=e.slice(0,s),e=e.map(o=>o.slice(0,i))),e}setData(t){this.data=t,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}clear(){this.setData([])}setTitle(t){this.title=t,this.element.innerText=t,this.dispatchExternal("sheetUpdated",this.getComponent())}setRows(t){this.rowCount=t,this.initializeRows(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}setColumns(t){this.columnCount=t,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}remove(){this.spreadsheetManager.removeSheet(this)}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispatchExternal("sheetRemoved",this.getComponent())}active(){this.spreadsheetManager.loadSheet(this)}},ip=class extends xr{static moduleName="spreadsheet";constructor(t){super(t),this.sheets=[],this.element=null,this.registerTableOption("spreadsheet",!1),this.registerTableOption("spreadsheetRows",50),this.registerTableOption("spreadsheetColumns",50),this.registerTableOption("spreadsheetColumnDefinition",{}),this.registerTableOption("spreadsheetOutputFull",!1),this.registerTableOption("spreadsheetData",!1),this.registerTableOption("spreadsheetSheets",!1),this.registerTableOption("spreadsheetSheetTabs",!1),this.registerTableOption("spreadsheetSheetTabsElement",!1),this.registerTableFunction("setSheets",this.setSheets.bind(this)),this.registerTableFunction("addSheet",this.addSheet.bind(this)),this.registerTableFunction("getSheets",this.getSheets.bind(this)),this.registerTableFunction("getSheetDefinitions",this.getSheetDefinitions.bind(this)),this.registerTableFunction("setSheetData",this.setSheetData.bind(this)),this.registerTableFunction("getSheet",this.getSheet.bind(this)),this.registerTableFunction("getSheetData",this.getSheetData.bind(this)),this.registerTableFunction("clearSheet",this.clearSheet.bind(this)),this.registerTableFunction("removeSheet",this.removeSheetFunc.bind(this)),this.registerTableFunction("activeSheet",this.activeSheetFunc.bind(this))}initialize(){this.options("spreadsheet")&&(this.subscribe("table-initialized",this.tableInitialized.bind(this)),this.subscribe("data-loaded",this.loadRemoteData.bind(this)),this.table.options.index="_id",this.options("spreadsheetData")&&this.options("spreadsheetSheets")&&(console.warn("You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData"),this.table.options.spreadsheetData=!1),this.compatibilityCheck(),this.options("spreadsheetSheetTabs")&&this.initializeTabset())}compatibilityCheck(){this.options("data")&&console.warn("Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table"),this.options("pagination")&&console.warn("The spreadsheet module is not compatible with the pagination module"),this.options("groupBy")&&console.warn("The spreadsheet module is not compatible with the row grouping module"),this.options("responsiveCollapse")&&console.warn("The spreadsheet module is not compatible with the responsive collapse module")}initializeTabset(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tabs");var t=this.options("spreadsheetSheetTabsElement");t&&!(t instanceof HTMLElement)&&(t=document.querySelector(t),t||console.warn("Unable to find element matching spreadsheetSheetTabsElement selector:",this.options("spreadsheetSheetTabsElement"))),t?t.appendChild(this.element):this.footerAppend(this.element)}tableInitialized(){this.sheets.length?this.loadSheet(this.sheets[0]):this.options("spreadsheetSheets")?this.loadSheets(this.options("spreadsheetSheets")):this.options("spreadsheetData")&&this.loadData(this.options("spreadsheetData"))}loadRemoteData(t,e,r){return console.log("data",t,e,r),Array.isArray(t)?(this.table.dataLoader.clearAlert(),this.dispatchExternal("dataLoaded",t),!t.length||Array.isArray(t[0])?this.loadData(t):this.loadSheets(t)):console.error(`Spreadsheet Loading Error - Unable to process remote data due to invalid data type 
Expecting: array 
Received: `,typeof t,`
Data:     `,t),!1}loadData(t){var e={data:t};this.loadSheet(this.newSheet(e))}destroySheets(){this.sheets.forEach(t=>{t.destroy()}),this.sheets=[],this.activeSheet=null}loadSheets(t){Array.isArray(t)||(t=[]),this.destroySheets(),t.forEach(e=>{this.newSheet(e)}),this.loadSheet(this.sheets[0])}loadSheet(t){this.activeSheet!==t&&(this.activeSheet&&this.activeSheet.unload(),this.activeSheet=t,t.load())}newSheet(t={}){var e;return t.rows||(t.rows=this.options("spreadsheetRows")),t.columns||(t.columns=this.options("spreadsheetColumns")),e=new zh(this,t),this.sheets.push(e),this.element&&this.element.appendChild(e.element),e}removeSheet(t){var e=this.sheets.indexOf(t),r;this.sheets.length>1?e>-1&&(this.sheets.splice(e,1),t.destroy(),this.activeSheet===t&&(r=this.sheets[e-1]||this.sheets[0],r?this.loadSheet(r):this.activeSheet=null)):console.warn("Unable to remove sheet, at least one sheet must be active")}lookupSheet(t){return t?t instanceof zh?t:t instanceof Fh?t._sheet:this.sheets.find(e=>e.key===t)||!1:this.activeSheet}setSheets(t){return this.loadSheets(t),this.getSheets()}addSheet(t){return this.newSheet(t).getComponent()}getSheetDefinitions(){return this.sheets.map(t=>t.getDefinition())}getSheets(){return this.sheets.map(t=>t.getComponent())}getSheet(t){var e=this.lookupSheet(t);return e?e.getComponent():!1}setSheetData(t,e){t&&!e&&(e=t,t=!1);var r=this.lookupSheet(t);return r?r.setData(e):!1}getSheetData(t){var e=this.lookupSheet(t);return e?e.getData():!1}clearSheet(t){var e=this.lookupSheet(t);return e?e.clear():!1}removeSheetFunc(t){var e=this.lookupSheet(t);e&&this.removeSheet(e)}activeSheetFunc(t){var e=this.lookupSheet(t);return e?this.loadSheet(e):!1}},np=class extends xr{static moduleName="tooltip";constructor(t){super(t),this.tooltipSubscriber=null,this.headerSubscriber=null,this.timeout=null,this.popupInstance=null,this.registerTableOption("tooltipDelay",300),this.registerColumnOption("tooltip"),this.registerColumnOption("headerTooltip")}initialize(){this.deprecatedOptionsCheck(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeColumn(t){t.definition.headerTooltip&&!this.headerSubscriber&&(this.headerSubscriber=!0,this.subscribe("column-mousemove",this.mousemoveCheck.bind(this,"headerTooltip")),this.subscribe("column-mouseout",this.mouseoutCheck.bind(this,"headerTooltip"))),t.definition.tooltip&&!this.tooltipSubscriber&&(this.tooltipSubscriber=!0,this.subscribe("cell-mousemove",this.mousemoveCheck.bind(this,"tooltip")),this.subscribe("cell-mouseout",this.mouseoutCheck.bind(this,"tooltip")))}mousemoveCheck(t,e,r){var i=t==="tooltip"?r.column.definition.tooltip:r.definition.headerTooltip;i&&(this.clearPopup(),this.timeout=setTimeout(this.loadTooltip.bind(this,e,r,i),this.table.options.tooltipDelay))}mouseoutCheck(t,e,r){this.popupInstance||this.clearPopup()}clearPopup(t,e,r){clearTimeout(this.timeout),this.timeout=null,this.popupInstance&&this.popupInstance.hide()}loadTooltip(t,e,r){var i,s,o;function a(l){s=l}typeof r=="function"&&(r=r(t,e.getComponent(),a)),r instanceof HTMLElement?i=r:(i=document.createElement("div"),r===!0&&(e instanceof ya?r=e.value:e.definition.field?this.langBind("columns|"+e.definition.field,l=>{i.innerHTML=r=l||e.definition.title}):r=e.definition.title),i.innerHTML=r),(r||r===0||r===!1)&&(i.classList.add("tabulator-tooltip"),i.addEventListener("mousemove",l=>l.preventDefault()),this.popupInstance=this.popup(i),typeof s=="function"&&this.popupInstance.renderCallback(s),o=this.popupInstance.containerEventCoords(t),this.popupInstance.show(o.x+15,o.y+15).hideOnBlur(()=>{this.dispatchExternal("TooltipClosed",e.getComponent()),this.popupInstance=null}),this.dispatchExternal("TooltipOpened",e.getComponent()))}},TC={integer:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:(t=Number(t),!isNaN(t)&&isFinite(t)&&Math.floor(t)===t)},float:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:(t=Number(t),!isNaN(t)&&isFinite(t)&&t%1!==0)},numeric:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:!isNaN(t)},string:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:isNaN(t)},alphanumeric:function(n,t,e){if(t===""||t===null||typeof t>"u")return!0;var r=new RegExp(/^[a-z0-9]+$/i);return r.test(t)},max:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:parseFloat(t)<=e},min:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:parseFloat(t)>=e},starts:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).toLowerCase().startsWith(String(e).toLowerCase())},ends:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).toLowerCase().endsWith(String(e).toLowerCase())},minLength:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).length>=e},maxLength:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).length<=e},in:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:(typeof e=="string"&&(e=e.split("|")),e.indexOf(t)>-1)},regex:function(n,t,e){if(t===""||t===null||typeof t>"u")return!0;var r=new RegExp(e);return r.test(t)},unique:function(n,t,e){if(t===""||t===null||typeof t>"u")return!0;var r=!0,i=n.getData(),s=n.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(o){var a=o.getData();a!==i&&t==s.getFieldValue(a)&&(r=!1)}),r},required:function(n,t,e){return t!==""&&t!==null&&typeof t<"u"}},sp=class n extends xr{static moduleName="validate";static validators=TC;constructor(t){super(t),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("edit-success",this.editValidate.bind(this)),this.subscribe("edit-editor-clear",this.editorClear.bind(this)),this.subscribe("edit-edited-clear",this.editedClear.bind(this))}editValidate(t,e,r){var i=this.table.options.validationMode!=="manual"?this.validate(t.column.modules.validate,t,e):!0;return i!==!0&&setTimeout(()=>{t.getElement().classList.add("tabulator-validation-fail"),this.dispatchExternal("validationFailed",t.getComponent(),e,i)}),i}editorClear(t,e){e&&t.column.modules.validate&&this.cellValidate(t),t.getElement().classList.remove("tabulator-validation-fail")}editedClear(t){t.modules.validate&&(t.modules.validate.invalid=!1)}cellIsValid(t){return t.modules.validate&&t.modules.validate.invalid||!0}cellValidate(t){return this.validate(t.column.modules.validate,t,t.getValue())}columnValidate(t){var e=[];return t.cells.forEach(r=>{this.cellValidate(r)!==!0&&e.push(r.getComponent())}),e.length?e:!0}rowValidate(t){var e=[];return t.cells.forEach(r=>{this.cellValidate(r)!==!0&&e.push(r.getComponent())}),e.length?e:!0}userClearCellValidation(t){t||(t=this.getInvalidCells()),Array.isArray(t)||(t=[t]),t.forEach(e=>{this.clearValidation(e._getSelf())})}userValidate(t){var e=[];return this.table.rowManager.rows.forEach(r=>{r=r.getComponent();var i=r.validate();i!==!0&&(e=e.concat(i))}),e.length?e:!0}initializeColumnCheck(t){typeof t.definition.validator<"u"&&this.initializeColumn(t)}initializeColumn(t){var e=this,r=[],i;t.definition.validator&&(Array.isArray(t.definition.validator)?t.definition.validator.forEach(s=>{i=e._extractValidator(s),i&&r.push(i)}):(i=this._extractValidator(t.definition.validator),i&&r.push(i)),t.modules.validate=r.length?r:!1)}_extractValidator(t){var e,r,i;switch(typeof t){case"string":return i=t.indexOf(":"),i>-1?(e=t.substring(0,i),r=t.substring(i+1)):e=t,this._buildValidator(e,r);case"function":return this._buildValidator(t);case"object":return this._buildValidator(t.type,t.parameters)}}_buildValidator(t,e){var r=typeof t=="function"?t:n.validators[t];return r?{type:typeof t=="function"?"function":t,func:r,params:e}:(console.warn("Validator Setup Error - No matching validator found:",t),!1)}validate(t,e,r){var i=this,s=[],o=this.invalidCells.indexOf(e);return t&&t.forEach(a=>{a.func.call(i,e.getComponent(),r,a.params)||s.push({type:a.type,parameters:a.params})}),e.modules.validate||(e.modules.validate={}),s.length?(e.modules.validate.invalid=s,this.table.options.validationMode!=="manual"&&e.getElement().classList.add("tabulator-validation-fail"),o==-1&&this.invalidCells.push(e)):(e.modules.validate.invalid=!1,e.getElement().classList.remove("tabulator-validation-fail"),o>-1&&this.invalidCells.splice(o,1)),s.length?s:!0}getInvalidCells(){var t=[];return this.invalidCells.forEach(e=>{t.push(e.getComponent())}),t}clearValidation(t){var e;t.modules.validate&&t.modules.validate.invalid&&(t.getElement().classList.remove("tabulator-validation-fail"),t.modules.validate.invalid=!1,e=this.invalidCells.indexOf(t),e>-1&&this.invalidCells.splice(e,1))}},md=Object.freeze({__proto__:null,AccessorModule:gd,AjaxModule:bd,ClipboardModule:_d,ColumnCalcsModule:xd,DataTreeModule:Ed,DownloadModule:Cd,EditModule:Md,ExportModule:Sd,FilterModule:kd,FormatModule:Ld,FrozenColumnsModule:Td,FrozenRowsModule:Pd,GroupRowsModule:Od,HistoryModule:Ad,HtmlTableImportModule:Id,ImportModule:Nd,InteractionModule:Dd,KeybindingsModule:Bd,MenuModule:Fd,MoveColumnsModule:zd,MoveRowsModule:jd,MutatorModule:Hd,PageModule:Gd,PersistenceModule:Ud,PopupModule:Vd,PrintModule:qd,ReactiveDataModule:Wd,ResizeColumnsModule:Xd,ResizeRowsModule:$d,ResizeTableModule:Yd,ResponsiveLayoutModule:Zd,SelectRangeModule:tp,SelectRowModule:Kd,SortModule:ep,SpreadsheetModule:ip,TooltipModule:np,ValidateModule:sp}),PC={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,debugInvalidComponentFuncs:!0,debugInitialization:!0,debugDeprecation:!0,height:!1,minHeight:!1,maxHeight:!1,columnHeaderVertAlign:"top",popupContainer:!1,columns:[],columnDefaults:{},rowHeader:!1,data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,rowHeight:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataLoaderErrorTimeout:3e3,dataSendParams:{},dataReceiveParams:{}},jh=class{constructor(t,e,r={}){this.table=t,this.msgType=e,this.registeredDefaults=Object.assign({},r)}register(t,e){this.registeredDefaults[t]=e}generate(t,e={}){var r=Object.assign({},this.registeredDefaults),i=this.table.options.debugInvalidOptions||e.debugInvalidOptions===!0;Object.assign(r,t);for(let s in e)r.hasOwnProperty(s)||(i&&console.warn("Invalid "+this.msgType+" option:",s),r[s]=e.key);for(let s in r)s in e?r[s]=e[s]:Array.isArray(r[s])?r[s]=Object.assign([],r[s]):typeof r[s]=="object"&&r[s]!==null?r[s]=Object.assign({},r[s]):typeof r[s]>"u"&&delete r[s];return r}},ol=class extends Un{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,e){}renderRowCells(t){}rerenderRowCells(t,e){}scrollColumns(t,e){}scrollRows(t,e){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,e){var r=t.getElement();e%2?(r.classList.add("tabulator-row-even"),r.classList.remove("tabulator-row-odd")):(r.classList.add("tabulator-row-odd"),r.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,e,r){var i=this.rows().indexOf(t),s=t.getElement(),o=0;return new Promise((a,l)=>{if(i>-1){if(typeof r>"u"&&(r=this.table.options.scrollToRowIfVisible),!r&&Ai.elVisible(s)&&(o=Ai.elOffset(s).top-Ai.elOffset(this.elementVertical).top,o>0&&o<this.elementVertical.clientHeight-s.offsetHeight))return a(),!1;switch(typeof e>"u"&&(e=this.table.options.scrollToRowPosition),e==="nearest"&&(e=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),e){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(s.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-s.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-s.offsetTop)+s.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+s.offsetHeight;break;case"top":this.elementVertical.scrollTop=s.offsetTop;break}a()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")})}},op=class extends ol{constructor(t){super(t)}renderRowCells(t,e){let r=document.createDocumentFragment();t.cells.forEach(i=>{r.appendChild(i.getElement())}),t.element.appendChild(r),e||t.cells.forEach(i=>{i.cellRendered()})}reinitializeColumnWidths(t){t.forEach(function(e){e.reinitializeWidth()})}},ap=class extends ol{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.windowBuffer=200,this.visibleRows=null,this.initialized=!1,this.isFitData=!1,this.columns=[]}initialize(){this.compatibilityCheck(),this.layoutCheck(),this.vertScrollListen()}compatibilityCheck(){this.options("layout")=="fitDataTable"&&console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"),this.options("responsiveLayout")&&console.warn("Horizontal Virtual DOM is not compatible with responsive columns"),this.options("rtl")&&console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction")}layoutCheck(){this.isFitData=this.options("layout").startsWith("fitData")}vertScrollListen(){this.subscribe("scroll-vertical",this.clearVisRowCache.bind(this)),this.subscribe("data-refreshed",this.clearVisRowCache.bind(this))}clearVisRowCache(){this.visibleRows=null}renderColumns(t,e){this.dataChange()}scrollColumns(t,e){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.windowBuffer)))}calcWindowBuffer(){var t=this.elementVertical.clientWidth;this.table.columnManager.columnsByIndex.forEach(e=>{if(e.visible){var r=e.getWidth();r>t&&(t=r)}}),this.windowBuffer=t*2}rerenderColumns(t,e){var r={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},i=0;t&&!this.initialized||(this.clear(),this.calcWindowBuffer(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.windowBuffer,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,this.table.columnManager.columnsByIndex.forEach(s=>{var o={},a;s.visible&&(s.modules.frozen||(a=s.getWidth(),o.leftPos=i,o.rightPos=i+a,o.width=a,this.isFitData&&(o.fitDataCheck=s.modules.vdomHoz?s.modules.vdomHoz.fitDataCheck:!0),i+a>this.vDomScrollPosLeft&&i<this.vDomScrollPosRight?(this.leftCol==-1&&(this.leftCol=this.columns.length,this.vDomPadLeft=i),this.rightCol=this.columns.length):this.leftCol!==-1&&(this.vDomPadRight+=a),this.columns.push(s),s.modules.vdomHoz=o,i+=a))}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,e||(!t||this.reinitChanged(r))&&this.reinitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft)}renderRowCells(t){if(this.initialized)this.initializeRow(t);else{let e=document.createDocumentFragment();t.cells.forEach(r=>{e.appendChild(r.getElement())}),t.element.appendChild(e),t.cells.forEach(r=>{r.cellRendered()})}}rerenderRowCells(t,e){this.reinitializeRow(t,e)}reinitializeColumnWidths(t){for(let e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var t=!1,e,r;if(this.isFitData){if(this.table.columnManager.columnsByIndex.forEach(i=>{!i.definition.width&&i.visible&&(t=!0)}),t&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,e=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows())[0],e)){r=e.getElement(),e.generateCells(),this.tableElement.appendChild(r);for(let i=0;i<e.cells.length;i++){let s=e.cells[i];r.appendChild(s.getElement()),s.column.reinitializeWidth()}r.parentNode.removeChild(r),this.rerenderColumns(!1,!0)}}else this.options("layout")==="fitColumns"&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var e=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol?!0:(t.cols.forEach((r,i)=>{r!==this.columns[i]&&(e=!1)}),!e)}reinitializeRows(){var t=this.getVisibleRows(),e=this.table.rowManager.getRows().filter(r=>!t.includes(r));t.forEach(r=>{this.reinitializeRow(r,!0)}),e.forEach(r=>{r.deinitialize()})}getVisibleRows(){return this.visibleRows||(this.visibleRows=this.table.rowManager.getVisibleRows()),this.visibleRows}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,Math.abs(t)>this.windowBuffer/2?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,e,r){for(let i=t;i<e;i++){let s=this.columns[i];s.modules.vdomHoz.leftPos+=r,s.modules.vdomHoz.rightPos+=r}}addColRight(){for(var t=!1,e=!0;e;){let r=this.columns[this.rightCol+1];r&&r.modules.vdomHoz.leftPos<=this.vDomScrollPosRight?(t=!0,this.getVisibleRows().forEach(i=>{if(i.type!=="group"){var s=i.getCell(r);i.getElement().insertBefore(s.getElement(),i.getCell(this.columns[this.rightCol]).getElement().nextSibling),s.cellRendered()}}),this.fitDataColActualWidthCheck(r),this.rightCol++,this.getVisibleRows().forEach(i=>{i.type!=="group"&&(i.modules.vdomHoz.rightCol=this.rightCol)}),this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=r.getWidth()):e=!1}t&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}addColLeft(){for(var t=!1,e=!0;e;){let r=this.columns[this.leftCol-1];if(r)if(r.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){t=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var o=s.getCell(r);s.getElement().insertBefore(o.getElement(),s.getCell(this.columns[this.leftCol]).getElement()),o.cellRendered()}}),this.leftCol--,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.leftCol=this.leftCol)}),this.leftCol<=0?this.vDomPadLeft=0:this.vDomPadLeft-=r.getWidth();let i=this.fitDataColActualWidthCheck(r);i&&(this.scrollLeft=this.elementVertical.scrollLeft=this.elementVertical.scrollLeft+i,this.vDomPadRight-=i)}else e=!1;else e=!1}t&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}removeColRight(){for(var t=!1,e=!0;e;){let r=this.columns[this.rightCol];r&&r.modules.vdomHoz.leftPos>this.vDomScrollPosRight?(t=!0,this.getVisibleRows().forEach(i=>{if(i.type!=="group"){var s=i.getCell(r);try{i.getElement().removeChild(s.getElement())}catch(o){console.warn("Could not removeColRight",o.message)}}}),this.vDomPadRight+=r.getWidth(),this.rightCol--,this.getVisibleRows().forEach(i=>{i.type!=="group"&&(i.modules.vdomHoz.rightCol=this.rightCol)})):e=!1}t&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}removeColLeft(){for(var t=!1,e=!0;e;){let r=this.columns[this.leftCol];r&&r.modules.vdomHoz.rightPos<this.vDomScrollPosLeft?(t=!0,this.getVisibleRows().forEach(i=>{if(i.type!=="group"){var s=i.getCell(r);try{i.getElement().removeChild(s.getElement())}catch(o){console.warn("Could not removeColLeft",o.message)}}}),this.vDomPadLeft+=r.getWidth(),this.leftCol++,this.getVisibleRows().forEach(i=>{i.type!=="group"&&(i.modules.vdomHoz.leftCol=this.leftCol)})):e=!1}t&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}fitDataColActualWidthCheck(t){var e,r;return t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),e=t.getWidth(),r=e-t.modules.vdomHoz.width,r&&(t.modules.vdomHoz.rightPos+=r,t.modules.vdomHoz.width=e,this.colPositionAdjust(this.columns.indexOf(t)+1,this.columns.length,r)),t.modules.vdomHoz.fitDataCheck=!1),r}initializeRow(t){if(t.type!=="group"){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},this.table.modules.frozenColumns&&this.table.modules.frozenColumns.leftColumns.forEach(e=>{this.appendCell(t,e)});for(let e=this.leftCol;e<=this.rightCol;e++)this.appendCell(t,this.columns[e]);this.table.modules.frozenColumns&&this.table.modules.frozenColumns.rightColumns.forEach(e=>{this.appendCell(t,e)})}}appendCell(t,e){if(e&&e.visible){let r=t.getCell(e);t.getElement().appendChild(r.getElement()),r.cellRendered()}}reinitializeRow(t,e){if(t.type!=="group"&&(e||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var r=t.getElement();r.firstChild;)r.removeChild(r.firstChild);this.initializeRow(t)}}},lp=class extends Un{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.contentsElement=null,this.rowHeader=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new jh(this.table,"column definition",xv),this.redrawBlock=!1,this.redrawBlockUpdate=null,this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.contentsElement=this.createHeaderContentsElement(),this.element=this.createHeaderElement(),this.contentsElement.insertBefore(this.headersElement,this.contentsElement.firstChild),this.element.insertBefore(this.contentsElement,this.element.firstChild),this.initializeScrollWheelWatcher(),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("scrollbar-vertical",this.padVerticalScrollbar.bind(this))}padVerticalScrollbar(t){this.table.rtl?this.headersElement.style.marginLeft=t+"px":this.headersElement.style.marginRight=t+"px"}initializeRenderer(){var t,e={virtual:ap,basic:op};typeof this.table.options.renderHorizontal=="string"?t=e[this.table.options.renderHorizontal]:t=this.table.options.renderHorizontal,t?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",this.table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderContentsElement(){var t=document.createElement("div");return t.classList.add("tabulator-header-contents"),t.setAttribute("role","rowgroup"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getContentsElement(){return this.contentsElement}getHeadersElement(){return this.headersElement}scrollHorizontal(t){this.contentsElement.scrollLeft=t,this.scrollLeft=t,this.renderer.scrollColumns(t)}initializeScrollWheelWatcher(){this.contentsElement.addEventListener("wheel",t=>{var e;t.deltaX&&(e=this.contentsElement.scrollLeft+t.deltaX,this.table.rowManager.scrollHorizontal(e),this.table.columnManager.scrollHorizontal(e))})}generateColumnsFromRowData(t){var e=[],r={},i=this.table.options.autoColumns==="full"?t:[t[0]],s=this.table.options.autoColumnsDefinitions;if(t&&t.length){if(i.forEach(o=>{Object.keys(o).forEach((a,l)=>{let c=o[a],h;r[a]?r[a]!==!0&&typeof c<"u"&&(r[a].sorter=this.calculateSorterFromValue(c),r[a]=!0):(h={field:a,title:a,sorter:this.calculateSorterFromValue(c)},e.splice(l,0,h),r[a]=typeof c>"u"?h:!0)})}),s)switch(typeof s){case"function":this.table.options.columns=s.call(this.table,e);break;case"object":Array.isArray(s)?e.forEach(o=>{var a=s.find(l=>l.field===o.field);a&&Object.assign(o,a)}):e.forEach(o=>{s[o.field]&&Object.assign(o,s[o.field])}),this.table.options.columns=e;break}else this.table.options.columns=e;this.setColumns(this.table.options.columns)}}calculateSorterFromValue(t){var e;switch(typeof t){case"undefined":e="string";break;case"boolean":e="boolean";break;case"number":e="number";break;case"object":Array.isArray(t)?e="array":e="string";break;default:!isNaN(t)&&t!==""?e="number":t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?e="alphanum":e="string";break}return e}setColumns(t,e){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),this.dispatchExternal("columnsLoading"),this.table.options.rowHeader&&(this.rowHeader=new ga(this.table.options.rowHeader===!0?{}:this.table.options.rowHeader,this,!0),this.columns.push(this.rowHeader),this.headersElement.appendChild(this.rowHeader.getElement()),this.rowHeader.columnRendered()),t.forEach((r,i)=>{this._addColumn(r)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.subscribedExternal("columnsLoaded")&&this.dispatchExternal("columnsLoaded",this.getComponents()),this.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,e,r){var i=new ga(t,this),s=i.getElement(),o=r&&this.findColumnIndex(r);if(e&&this.rowHeader&&(!r||r===this.rowHeader)&&(e=!1,r=this.rowHeader,o=0),r&&o>-1){var a=r.getTopColumn(),l=this.columns.indexOf(a),c=a.getElement();e?(this.columns.splice(l,0,i),c.parentNode.insertBefore(s,c)):(this.columns.splice(l+1,0,i),c.parentNode.insertBefore(s,c.nextSibling))}else e?(this.columns.unshift(i),this.headersElement.insertBefore(i.getElement(),this.headersElement.firstChild)):(this.columns.push(i),this.headersElement.appendChild(i.getElement()));return i.columnRendered(),i}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})}verticalAlignHeaders(){var t=0;this.redrawBlock||(this.headersElement.style.height="",this.columns.forEach(e=>{e.clearVerticalAlign()}),this.columns.forEach(e=>{var r=e.getHeight();r>t&&(t=r)}),this.headersElement.style.height=t+"px",this.columns.forEach(e=>{e.verticalAlign(this.table.options.columnHeaderVertAlign,t)}),this.table.rowManager.adjustTableSize())}findColumn(t){var e;if(typeof t=="object"){if(t instanceof ga)return t;if(t instanceof Dh)return t._getSelf()||!1;if(typeof HTMLElement<"u"&&t instanceof HTMLElement)return e=[],this.columns.forEach(i=>{e.push(i),e=e.concat(i.getColumns(!0))}),e.find(i=>i.element===t)||!1}else return this.columnsByField[t]||!1;return!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var e=[];return Object.keys(this.columnsByField).forEach(r=>{var i=this.table.options.nestedFieldSeparator?r.split(this.table.options.nestedFieldSeparator)[0]:r;i===t&&e.push(this.columnsByField[r])}),e}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibleColumn(){var t=this.columnsByIndex.findIndex(e=>e.visible);return t>-1?this.columnsByIndex[t]:!1}getVisibleColumnsByIndex(){return this.columnsByIndex.filter(t=>t.visible)}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex(e=>t===e)}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach((e,r)=>{t(e,r)})}getDefinitions(t){var e=[];return this.columnsByIndex.forEach(r=>{(!t||t&&r.visible)&&e.push(r.getDefinition())}),e}getDefinitionTree(){var t=[];return this.columns.forEach(e=>{t.push(e.getDefinition(!0))}),t}getComponents(t){var e=[],r=t?this.columns:this.columnsByIndex;return r.forEach(i=>{e.push(i.getComponent())}),e}getWidth(){var t=0;return this.columnsByIndex.forEach(e=>{e.visible&&(t+=e.getWidth())}),t}moveColumn(t,e,r){e.element.parentNode.insertBefore(t.element,e.element),r&&e.element.parentNode.insertBefore(e.element,t.element),this.moveColumnActual(t,e,r),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,e,r){t.parent.isGroup?this._moveColumnInArray(t.parent.columns,t,e,r):this._moveColumnInArray(this.columns,t,e,r),this._moveColumnInArray(this.columnsByIndex,t,e,r,!0),this.rerenderColumns(!0),this.dispatch("column-moved",t,e,r),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,e,r,i,s){var o=t.indexOf(e),a,l=[];o>-1&&(t.splice(o,1),a=t.indexOf(r),a>-1?i&&(a=a+1):a=o,t.splice(a,0,e),s&&(l=this.chain("column-moving-rows",[e,r,i],null,[])||[],l=l.concat(this.table.rowManager.rows),l.forEach(function(c){if(c.cells.length){var h=c.cells.splice(o,1)[0];c.cells.splice(a,0,h)}})))}scrollToColumn(t,e,r){var i=0,s=t.getLeftOffset(),o=0,a=t.getElement();return new Promise((l,c)=>{if(typeof e>"u"&&(e=this.table.options.scrollToColumnPosition),typeof r>"u"&&(r=this.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":o=-this.element.clientWidth/2;break;case"right":o=a.clientWidth-this.headersElement.clientWidth;break}if(!r&&s>0&&s+a.offsetWidth<this.element.clientWidth)return!1;i=s+o,i=Math.max(Math.min(i,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(i),this.scrollHorizontal(i),l()}else console.warn("Scroll Error - Column not visible"),c("Scroll Error - Column not visible")})}generateCells(t){var e=[];return this.columnsByIndex.forEach(r=>{e.push(r.generateCell(t))}),e}getFlexBaseWidth(){var t=this.table.element.clientWidth,e=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(r){var i,s,o;r.visible&&(i=r.definition.width||0,s=parseInt(r.minWidth),typeof i=="string"?i.indexOf("%")>-1?o=t/100*parseInt(i):o=parseInt(i):o=i,e+=o>s?o:s)}),e}addColumn(t,e,r){return new Promise((i,s)=>{var o=this._addColumn(t,e,r);this._reIndexColumns(),this.dispatch("column-add",t,e,r),this.layoutMode()!="fitColumns"&&o.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.rerenderColumns(),i(o)})}deregisterColumn(t){var e=t.getField(),r;e&&delete this.columnsByField[e],r=this.columnsByIndex.indexOf(t),r>-1&&this.columnsByIndex.splice(r,1),r=this.columns.indexOf(t),r>-1&&this.columns.splice(r,1),this.verticalAlignHeaders(),this.redraw()}rerenderColumns(t,e){this.redrawBlock?(t===!1||t===!0&&this.redrawBlockUpdate===null)&&(this.redrawBlockUpdate=t):this.renderer.rerenderColumns(t,e)}blockRedraw(){this.redrawBlock=!0,this.redrawBlockUpdate=null}restoreRedraw(){this.redrawBlock=!1,this.verticalAlignHeaders(),this.renderer.rerenderColumns(this.redrawBlockUpdate)}redraw(t){Ai.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(t),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}},up=class extends ol{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,e=!0,r=document.createDocumentFragment(),i=this.rows();i.forEach((s,o)=>{this.styleRow(s,o),s.initialize(!1,!0),s.type!=="group"&&(e=!1),r.appendChild(s.getElement())}),t.appendChild(r),i.forEach(s=>{s.rendered(),s.heightInitialized||s.calcHeight(!0)}),i.forEach(s=>{s.heightInitialized||s.setCellHeight()}),e?t.style.minWidth=this.table.columnManager.getWidth()+"px":t.style.minWidth=""}rerenderRows(t){this.clearRows(),t&&t(),this.renderRows(),this.rows().length||this.table.rowManager.tableEmpty()}scrollToRowNearestTop(t){var e=Ai.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-e)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-e))}scrollToRow(t){var e=t.getElement();this.elementVertical.scrollTop=Ai.elOffset(e).top-Ai.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}},hp=class extends ol{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var e=this.elementVertical.scrollTop,r=!1,i=!1,s=this.table.rowManager.scrollLeft,o=this.rows(),a=this.vDomTop;a<=this.vDomBottom;a++)if(o[a]){var l=e-o[a].getElement().offsetTop;if(i===!1||Math.abs(l)<i)i=l,r=a;else break}o.forEach(c=>{c.deinitializeHeight()}),t&&t(),this.rows().length?this._virtualRenderFill(r===!1?this.rows.length-1:r,!0,i||0):(this.clear(),this.table.rowManager.tableEmpty()),this.scrollColumns(s)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,e){var r=t-this.vDomScrollPosTop,i=t-this.vDomScrollPosBottom,s=this.vDomWindowBuffer*2,o=this.rows();if(this.scrollTop=t,-r>s||i>s){var a=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*o.length)),this.scrollColumns(a)}else e?(r<0&&this._addTopRow(o,-r),i<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(o,-i):this.vDomScrollPosBottom=this.scrollTop)):(i>=0&&this._addBottomRow(o,i),r>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(o,r):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var e=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-e)>Math.abs(this.vDomBottom-e))}scrollToRow(t){var e=this.rows().indexOf(t);e>-1&&this._virtualRenderFill(e,!0)}visibleRows(t){var e=this.elementVertical.scrollTop,r=this.elementVertical.clientHeight+e,i=!1,s=0,o=0,a=this.rows();if(t)s=this.vDomTop,o=this.vDomBottom;else for(var l=this.vDomTop;l<=this.vDomBottom;l++)if(a[l])if(i)if(r-a[l].getElement().offsetTop>=0)o=l;else break;else if(e-a[l].getElement().offsetTop>=0)s=l;else if(i=!0,r-a[l].getElement().offsetTop>=0)o=l;else break;return a.slice(s,o+1)}_virtualRenderFill(t,e,r){var i=this.tableElement,s=this.elementVertical,o=0,a=0,l=0,c=0,h=0,d=0,p=this.rows(),g=p.length,m=0,b,y,x=[],S=0,O=0,D=this.table.rowManager.fixedHeight,U=this.elementVertical.clientHeight,z=this.table.options.rowHeight,q=!0;if(t=t||0,r=r||0,!t)this.clear();else{for(;i.firstChild;)i.removeChild(i.firstChild);c=(g-t+1)*this.vDomRowHeight,c<U&&(t-=Math.ceil((U-c)/this.vDomRowHeight),t<0&&(t=0)),o=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t),t-=o}if(g&&Ai.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1,D||this.table.options.maxHeight?(z&&(O=U/z+this.vDomWindowBuffer/z),O=Math.max(this.vDomWindowMinTotalRows,Math.ceil(O))):O=g;(O==g||a<=U+this.vDomWindowBuffer||S<this.vDomWindowMinTotalRows)&&this.vDomBottom<g-1;){for(x=[],y=document.createDocumentFragment(),d=0;d<O&&this.vDomBottom<g-1;)m=this.vDomBottom+1,b=p[m],this.styleRow(b,m),b.initialize(!1,!0),!b.heightInitialized&&!this.table.options.rowHeight&&b.clearCellHeight(),y.appendChild(b.getElement()),x.push(b),this.vDomBottom++,d++;if(!x.length)break;i.appendChild(y),x.forEach(G=>{G.rendered(),G.heightInitialized||G.calcHeight(!0)}),x.forEach(G=>{G.heightInitialized||G.setCellHeight()}),x.forEach(G=>{l=G.getHeight(),S<o?h+=l:a+=l,l>this.vDomWindowBuffer&&(this.vDomWindowBuffer=l*2),S++}),q=this.table.rowManager.adjustTableSize(),U=this.elementVertical.clientHeight,q&&(D||this.table.options.maxHeight)&&(z=a/S,O=Math.max(this.vDomWindowMinTotalRows,Math.ceil(U/z+this.vDomWindowBuffer/z)))}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+r:this.scrollTop-h,this.vDomBottomPad=this.vDomBottom==g-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-a-h,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((a+h)/S),this.vDomBottomPad=this.vDomRowHeight*(g-this.vDomBottom-1),this.vDomScrollHeight=h+a+this.vDomBottomPad-U),i.style.paddingTop=this.vDomTopPad+"px",i.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+h+r-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-U:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-U),this.elementVertical.scrollWidth>this.elementVertical.clientWidth&&e&&(this.scrollTop+=this.elementVertical.offsetHeight-U),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,s.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,e){for(var r=this.tableElement,i=[],s=0,o=this.vDomTop-1,a=0,l=!0;l;)if(this.vDomTop){let c=t[o],h,d;c&&a<this.vDomMaxRenderChain?(h=c.getHeight()||this.vDomRowHeight,d=c.initialized,e>=h?(this.styleRow(c,o),r.insertBefore(c.getElement(),r.firstChild),(!c.initialized||!c.heightInitialized)&&i.push(c),c.initialize(),d||(h=c.getElement().offsetHeight,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2)),e-=h,s+=h,this.vDomTop--,o--,a++):l=!1):l=!1}else l=!1;for(let c of i)c.clearCellHeight();this._quickNormalizeRowHeight(i),s&&(this.vDomTopPad-=s,this.vDomTopPad<0&&(this.vDomTopPad=o*this.vDomRowHeight),o<1&&(this.vDomTopPad=0),r.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=s)}_removeTopRow(t,e){for(var r=[],i=0,s=0,o=!0;o;){let a=t[this.vDomTop],l;a&&s<this.vDomMaxRenderChain?(l=a.getHeight()||this.vDomRowHeight,e>=l?(this.vDomTop++,e-=l,i+=l,r.push(a),s++):o=!1):o=!1}for(let a of r){let l=a.getElement();l.parentNode&&l.parentNode.removeChild(l)}i&&(this.vDomTopPad+=i,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?i:i+this.vDomWindowBuffer)}_addBottomRow(t,e){for(var r=this.tableElement,i=[],s=0,o=this.vDomBottom+1,a=0,l=!0;l;){let c=t[o],h,d;c&&a<this.vDomMaxRenderChain?(h=c.getHeight()||this.vDomRowHeight,d=c.initialized,e>=h?(this.styleRow(c,o),r.appendChild(c.getElement()),(!c.initialized||!c.heightInitialized)&&i.push(c),c.initialize(),d||(h=c.getElement().offsetHeight,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2)),e-=h,s+=h,this.vDomBottom++,o++,a++):l=!1):l=!1}for(let c of i)c.clearCellHeight();this._quickNormalizeRowHeight(i),s&&(this.vDomBottomPad-=s,(this.vDomBottomPad<0||o==t.length-1)&&(this.vDomBottomPad=0),r.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=s)}_removeBottomRow(t,e){for(var r=[],i=0,s=0,o=!0;o;){let a=t[this.vDomBottom],l;a&&s<this.vDomMaxRenderChain?(l=a.getHeight()||this.vDomRowHeight,e>=l?(this.vDomBottom--,e-=l,i+=l,r.push(a),s++):o=!1):o=!1}for(let a of r){let l=a.getElement();l.parentNode&&l.parentNode.removeChild(l)}i&&(this.vDomBottomPad+=i,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=i)}_quickNormalizeRowHeight(t){for(let e of t)e.calcHeight();for(let e of t)e.setCellHeight()}},cp=class extends Un{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.placeholder=null,this.placeholderContents=null,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRenderInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.scrollbarWidth=0,this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}initializePlaceholder(){var t=this.table.options.placeholder;if(typeof t=="function"&&(t=t.call(this.table)),t=this.chain("placeholder",[t],t,t)||t,t){let e=document.createElement("div");if(e.classList.add("tabulator-placeholder"),typeof t=="string"){let r=document.createElement("div");r.classList.add("tabulator-placeholder-contents"),r.innerHTML=t,e.appendChild(r),this.placeholderContents=r}else typeof HTMLElement<"u"&&t instanceof HTMLElement?(e.appendChild(t),this.placeholderContents=t):(console.warn("Invalid placeholder provided, must be string or HTML Element",t),this.el=null);this.placeholder=e}}getElement(){return this.element}getTableElement(){return this.tableElement}initialize(){this.initializePlaceholder(),this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var t=this.element.scrollLeft,e=this.scrollLeft>t,r=this.element.scrollTop,i=this.scrollTop>r;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,e),this.dispatchExternal("scrollHorizontal",t,e),this._positionPlaceholder()),this.scrollTop!=r&&(this.scrollTop=r,this.renderer.scrollRows(r,i),this.dispatch("scroll-vertical",r,i),this.dispatchExternal("scrollVertical",r,i))})}findRow(t){if(typeof t=="object"){if(t instanceof ts)return t;if(t instanceof sl)return t._getSelf()||!1;if(typeof HTMLElement<"u"&&t instanceof HTMLElement)return this.rows.find(r=>r.getElement()===t)||!1;if(t===null)return!1}else return typeof t>"u"?!1:this.rows.find(r=>r.data[this.table.options.index]==t)||!1;return!1}getRowFromDataObject(t){var e=this.rows.find(r=>r.data===t);return e||!1}getRowFromPosition(t){return this.getDisplayRows().find(e=>e.type==="row"&&e.getPosition()===t&&e.isDisplayed())}scrollToRow(t,e,r){return this.renderer.scrollToRowPosition(t,e,r)}setData(t,e,r){return new Promise((i,s)=>{e&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition(()=>{this._setDataActual(t)}):(this.table.options.autoColumns&&r&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),i()})}_setDataActual(t,e){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach((r,i)=>{if(r&&typeof r=="object"){var s=new ts(r,this);this.rows.push(s)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",r)}),this.refreshActiveData(!1,!1,e),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `,typeof t,`
Data:     `,t)}_wipeElements(){this.dispatch("rows-wipe"),this.destroy(),this.adjustTableSize(),this.dispatch("rows-wiped")}destroy(){this.rows.forEach(t=>{t.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0}deleteRow(t,e){var r=this.rows.indexOf(t),i=this.activeRows.indexOf(t);i>-1&&this.activeRows.splice(i,1),r>-1&&this.rows.splice(r,1),this.setActiveRows(this.activeRows),this.displayRowIterator(s=>{var o=s.indexOf(t);o>-1&&s.splice(o,1)}),e||this.reRenderInPosition(),this.regenerateRowPositions(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this.tableEmpty(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,e,r,i){var s=this.addRowActual(t,e,r,i);return s}addRows(t,e,r,i){var s=[];return new Promise((o,a)=>{e=this.findAddRowPos(e),Array.isArray(t)||(t=[t]),(typeof r>"u"&&e||typeof r<"u"&&!e)&&t.reverse(),t.forEach((l,c)=>{var h=this.addRow(l,e,r,!0);s.push(h),this.dispatch("row-added",h,l,e,r)}),this.refreshActiveData(i?"displayPipeline":!1,!1,!0),this.regenerateRowPositions(),this.displayRowsCount&&this._clearPlaceholder(),o(s)})}findAddRowPos(t){return typeof t>"u"&&(t=this.table.options.addRowPos),t==="pos"&&(t=!0),t==="bottom"&&(t=!1),t}addRowActual(t,e,r,i){var s=t instanceof ts?t:new ts(t||{},this),o=this.findAddRowPos(e),a=-1,l,c;return r||(c=this.chain("row-adding-position",[s,o],null,{index:r,top:o}),r=c.index,o=c.top),typeof r<"u"&&(r=this.findRow(r)),r=this.chain("row-adding-index",[s,r,o],null,r),r&&(a=this.rows.indexOf(r)),r&&a>-1?(l=this.activeRows.indexOf(r),this.displayRowIterator(function(h){var d=h.indexOf(r);d>-1&&h.splice(o?d:d+1,0,s)}),l>-1&&this.activeRows.splice(o?l:l+1,0,s),this.rows.splice(o?a:a+1,0,s)):o?(this.displayRowIterator(function(h){h.unshift(s)}),this.activeRows.unshift(s),this.rows.unshift(s)):(this.displayRowIterator(function(h){h.push(s)}),this.activeRows.push(s),this.rows.push(s)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",s.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),i||this.reRenderInPosition(),s}moveRow(t,e,r){this.dispatch("row-move",t,e,r),this.moveRowActual(t,e,r),this.regenerateRowPositions(),this.dispatch("row-moved",t,e,r),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,e,r){this.moveRowInArray(this.rows,t,e,r),this.moveRowInArray(this.activeRows,t,e,r),this.displayRowIterator(i=>{this.moveRowInArray(i,t,e,r)}),this.dispatch("row-moving",t,e,r)}moveRowInArray(t,e,r,i){var s,o,a,l;if(e!==r&&(s=t.indexOf(e),s>-1&&(t.splice(s,1),o=t.indexOf(r),o>-1?i?t.splice(o+1,0,e):t.splice(o,0,e):t.splice(s,0,e)),t===this.getDisplayRows())){a=s<o?s:o,l=o>s?o:s+1;for(let c=a;c<=l;c++)t[c]&&this.styleRow(t[c],c)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var e=this.getDisplayRows().indexOf(t);return e>-1?e:!1}nextDisplayRow(t,e){var r=this.getDisplayRowIndex(t),i=!1;return r!==!1&&r<this.displayRowsCount-1&&(i=this.getDisplayRows()[r+1]),i&&(!(i instanceof ts)||i.type!="row")?this.nextDisplayRow(i,e):i}prevDisplayRow(t,e){var r=this.getDisplayRowIndex(t),i=!1;return r&&(i=this.getDisplayRows()[r-1]),e&&i&&(!(i instanceof ts)||i.type!="row")?this.prevDisplayRow(i,e):i}findRowIndex(t,e){var r;return t=this.findRow(t),t&&(r=e.indexOf(t),r>-1)?r:!1}getData(t,e){var r=[],i=this.getRows(t);return i.forEach(function(s){s.type=="row"&&r.push(s.getData(e||"data"))}),r}getComponents(t){var e=[],r=this.getRows(t);return r.forEach(function(i){e.push(i.getComponent())}),e}getDataCount(t){var e=this.getRows(t);return e.length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,e){typeof e<"u"?(this.dataPipeline.push({handler:t,priority:e}),this.dataPipeline.sort((r,i)=>r.priority-i.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,e){typeof e<"u"?(this.displayPipeline.push({handler:t,priority:e}),this.displayPipeline.sort((r,i)=>r.priority-i.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,e,r){var i=this.table,s="",o=0,a=["all","dataPipeline","display","displayPipeline","end"];if(!this.table.destroyed){if(typeof t=="function")if(o=this.dataPipeline.findIndex(l=>l.handler===t),o>-1)s="dataPipeline",e&&(o==this.dataPipeline.length-1?s="display":o++);else if(o=this.displayPipeline.findIndex(l=>l.handler===t),o>-1)s="displayPipeline",e&&(o==this.displayPipeline.length-1?s="end":o++);else{console.error("Unable to refresh data, invalid handler provided",t);return}else s=t||"all",o=0;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===s&&o<this.redrawBlockRestoreConfig.index||a.indexOf(s)<a.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:e,renderInPosition:r,stage:s,index:o});return}else Ai.elVisible(this.element)?r?this.reRenderInPosition(this.refreshPipelines.bind(this,t,s,o,r)):(this.refreshPipelines(t,s,o,r),t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),i.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0)):this.refreshPipelines(t,s,o,r),this.dispatch("data-refreshed")}}refreshPipelines(t,e,r,i){switch(this.dispatch("data-refreshing"),(!t||!this.activeRowsPipeline[0])&&(this.activeRowsPipeline[0]=this.rows.slice(0)),e){case"all":case"dataPipeline":for(let s=r;s<this.dataPipeline.length;s++){let o=this.dataPipeline[s].handler(this.activeRowsPipeline[s].slice(0));this.activeRowsPipeline[s+1]=o||this.activeRowsPipeline[s].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);case"display":r=0,this.resetDisplayRows();case"displayPipeline":for(let s=r;s<this.displayPipeline.length;s++){let o=this.displayPipeline[s].handler((s?this.getDisplayRows(s-1):this.activeRows).slice(0),i);this.setDisplayRows(o||this.getDisplayRows(s-1).slice(0),s)}case"end":this.regenerateRowPositions()}this.getDisplayRows().length&&this._clearPlaceholder()}regenerateRowPositions(){var t=this.getDisplayRows(),e=1;t.forEach(r=>{r.type==="row"&&(r.setPosition(e),e++)})}setActiveRows(t){this.activeRows=this.activeRows=Object.assign([],t),this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}setDisplayRows(t,e){this.displayRows[e]=t,e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length)}getDisplayRows(t){return typeof t>"u"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t,e){var r=Object.assign([],this.renderer.visibleRows(!e));return t&&(r=this.chain("rows-visible",[e],r,r)),r}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var e=[];switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!1,!0);break;default:e=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return e}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRenderInPosition=!0:(this.dispatchExternal("renderStarted"),this.renderer.rerenderRows(t),this.fixedHeight||this.adjustTableSize(),this.scrollBarCheck(),this.dispatchExternal("renderComplete"))}scrollBarCheck(){var t=0;this.element.scrollHeight>this.element.clientHeight&&(t=this.element.offsetWidth-this.element.clientWidth),t!==this.scrollbarWidth&&(this.scrollbarWidth=t,this.dispatch("scrollbar-vertical",t))}initializeRenderer(){var t,e={virtual:hp,basic:up};typeof this.table.options.renderVertical=="string"?t=e[this.table.options.renderVertical]:t=this.table.options.renderVertical,t?(this.renderMode=this.table.options.renderVertical,this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),(this.table.element.clientHeight||this.table.options.height)&&!(this.table.options.minHeight&&this.table.options.maxHeight)?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",this.table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.fixedHeight||this.adjustTableSize(),this.layoutRefresh(!0))):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.scrollBarCheck(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}tableEmpty(){this.renderEmptyScroll(),this._showPlaceholder()}checkPlaceholder(){this.displayRowsCount?this._clearPlaceholder():this.tableEmpty()}_showPlaceholder(){this.placeholder&&(this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.initializePlaceholder(),this.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.placeholder),this._positionPlaceholder(),this.adjustTableSize())}_clearPlaceholder(){this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.tableElement.style.minWidth="",this.tableElement.style.display=""}_positionPlaceholder(){this.placeholder&&this.placeholder.parentNode&&(this.placeholder.style.width=this.table.columnManager.getWidth()+"px",this.placeholderContents.style.width=this.table.rowManager.element.clientWidth+"px",this.placeholderContents.style.marginLeft=this.scrollLeft+"px")}styleRow(t,e){var r=t.getElement();e%2?(r.classList.add("tabulator-row-even"),r.classList.remove("tabulator-row-odd")):(r.classList.add("tabulator-row-odd"),r.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(t){t.normalizeHeight()})}adjustTableSize(){let t=this.element.clientHeight,e,r=!1;if(this.renderer.verticalFillMode==="fill"){let i=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){e=isNaN(this.table.options.minHeight)?this.table.options.minHeight:this.table.options.minHeight+"px";let s="calc(100% - "+i+"px)";this.element.style.minHeight=e||"calc(100% - "+i+"px)",this.element.style.height=s,this.element.style.maxHeight=s}else this.element.style.height="",this.element.style.height=this.table.element.clientHeight-i+"px",this.element.scrollTop=this.scrollTop;this.renderer.resize(),!this.fixedHeight&&t!=this.element.clientHeight&&(r=!0,this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw()),this.scrollBarCheck()}return this._positionPlaceholder(),r}reinitialize(){this.rows.forEach(function(t){t.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRenderInPosition&&this.reRenderInPosition(),this.redrawBlockRenderInPosition=!1}redraw(t){this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(this.scrollLeft))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}},fp=class extends Un{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.containerElement=this.createContainerElement(),this.external=!1}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}createContainerElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer-contents"),this.element.appendChild(t),t}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":this.table.options.footerElement[0]==="<"?this.containerElement.innerHTML=this.table.options.footerElement:(this.external=!0,this.containerElement=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}}getElement(){return this.element}append(t){this.activate(),this.containerElement.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t){this.activate(),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){(!this.element.firstChild||t)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""))}redraw(){this.dispatch("footer-redraw")}},dp=class extends Un{constructor(t){super(t),this.el=null,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","mouseup","mousedown","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}},this.pseudoTracking=!1}initialize(){this.el=this.table.element,this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach(e=>{t[e]={handler:null,components:[]}}),this.listeners=t}bindPseudoEvents(){Object.keys(this.pseudoTrackers).forEach(t=>{this.pseudoTrackers[t].subscriber=this.pseudoMouseEnter.bind(this,t),this.subscribe(t+"-mouseover",this.pseudoTrackers[t].subscriber)}),this.pseudoTracking=!0}pseudoMouseEnter(t,e,r){this.pseudoTrackers[t].target!==r&&(this.pseudoTrackers[t].target&&this.dispatch(t+"-mouseleave",e,this.pseudoTrackers[t].target),this.pseudoMouseLeave(t,e),this.pseudoTrackers[t].target=r,this.dispatch(t+"-mouseenter",e,r))}pseudoMouseLeave(t,e){var r=Object.keys(this.pseudoTrackers),i={row:["cell"],cell:["row"]};r=r.filter(s=>{var o=i[t];return s!==t&&(!o||o&&!o.includes(s))}),r.forEach(s=>{var o=this.pseudoTrackers[s].target;this.pseudoTrackers[s].target&&(this.dispatch(s+"-mouseleave",e,o),this.pseudoTrackers[s].target=null)})}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),e=Object.values(this.componentMap);for(let r of e)for(let i of t){let s=r+"-"+i;this.subscriptionChange(s,this.subscriptionChanged.bind(this,r,i))}this.subscribe("table-destroy",this.clearWatchers.bind(this))}subscriptionChanged(t,e,r){var i=this.listeners[e].components,s=i.indexOf(t),o=!1;r?s===-1&&(i.push(t),o=!0):this.subscribed(t+"-"+e)||s>-1&&(i.splice(s,1),o=!0),(e==="mouseenter"||e==="mouseleave")&&!this.pseudoTracking&&this.bindPseudoEvents(),o&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let e=this.listeners[t];e.components.length?e.handler||(e.handler=this.track.bind(this,t),this.el.addEventListener(t,e.handler)):e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}track(t,e){var r=e.composedPath&&e.composedPath()||e.path,i=this.findTargets(r);i=this.bindComponents(t,i),this.triggerEvents(t,e,i),this.pseudoTracking&&(t=="mouseover"||t=="mouseleave")&&!Object.keys(i).length&&this.pseudoMouseLeave("none",e)}findTargets(t){var e={};let r=Object.keys(this.componentMap);for(let i of t){let s=i.classList?[...i.classList]:[];if(s.filter(l=>this.abortClasses.includes(l)).length)break;let a=s.filter(l=>r.includes(l));for(let l of a)e[this.componentMap[l]]||(e[this.componentMap[l]]=i)}return e.group&&e.group===e.row&&delete e.row,e}bindComponents(t,e){var r=Object.keys(e).reverse(),i=this.listeners[t],s={},o={};for(let a of r){let l,c=e[a],h=this.previousTargets[a];if(h&&h.target===c)l=h.component;else switch(a){case"row":case"group":(i.components.includes("row")||i.components.includes("cell")||i.components.includes("group"))&&(l=this.table.rowManager.getVisibleRows(!0).find(p=>p.getElement()===c),e.row&&e.row.parentNode&&e.row.parentNode.closest(".tabulator-row")&&(e[a]=!1));break;case"column":i.components.includes("column")&&(l=this.table.columnManager.findColumn(c));break;case"cell":i.components.includes("cell")&&(s.row instanceof ts?l=s.row.findCell(c):e.row&&console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));break}l&&(s[a]=l,o[a]={target:c,component:l})}return this.previousTargets=o,s}triggerEvents(t,e,r){var i=this.listeners[t];for(let s in r)r[s]&&i.components.includes(s)&&this.dispatch(s+"-"+t,e,r[s])}clearWatchers(){for(let t in this.listeners){let e=this.listeners[t];e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}},pp=class{constructor(t){this.table=t,this.bindings={}}bind(t,e,r){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][e]?console.warn("Unable to bind component handler, a matching function name is already bound",t,e,r):this.bindings[t][e]=r}handle(t,e,r){if(this.bindings[t]&&this.bindings[t][r]&&typeof this.bindings[t][r].bind=="function")return this.bindings[t][r].bind(null,e);r!=="then"&&typeof r=="string"&&!r.startsWith("_")&&this.table.options.debugInvalidComponentFuncs&&console.error("The "+t+" component does not have a "+r+" function, have you checked that you have the correct Tabulator module installed?")}},mp=class extends Un{constructor(t){super(t),this.requestOrder=0,this.loading=!1}initialize(){}load(t,e,r,i,s,o){var a=++this.requestOrder;if(this.table.destroyed)return Promise.resolve();if(this.dispatchExternal("dataLoading",t),t&&(t.indexOf("{")==0||t.indexOf("[")==0)&&(t=JSON.parse(t)),this.confirm("data-loading",[t,e,r,s])){this.loading=!0,s||this.alertLoader(),e=this.chain("data-params",[t,r,s],e||{},e||{}),e=this.mapParams(e,this.table.options.dataSendParams);var l=this.chain("data-load",[t,e,r,s],!1,Promise.resolve([]));return l.then(c=>{if(this.table.destroyed)console.warn("Data Load Response Blocked - Table has been destroyed");else{!Array.isArray(c)&&typeof c=="object"&&(c=this.mapParams(c,this.objectInvert(this.table.options.dataReceiveParams)));var h=this.chain("data-loaded",[c],null,c);a==this.requestOrder?(this.clearAlert(),h!==!1&&(this.dispatchExternal("dataLoaded",h),this.table.rowManager.setData(h,i,typeof o>"u"?!i:o))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}}).catch(c=>{console.error("Data Load Error: ",c),this.dispatchExternal("dataLoadError",c),s||this.alertError(),setTimeout(()=>{this.clearAlert()},this.table.options.dataLoaderErrorTimeout)}).finally(()=>{this.loading=!1})}else return this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,i,typeof o>"u"?!i:o),Promise.resolve()}mapParams(t,e){var r={};for(let i in t)r[e.hasOwnProperty(i)?e[i]:i]=t[i];return r}objectInvert(t){var e={};for(let r in t)e[t[r]]=r;return e}blockActiveLoad(){this.requestOrder++}alertLoader(){var t=typeof this.table.options.dataLoader=="function"?this.table.options.dataLoader():this.table.options.dataLoader;t&&this.table.alertManager.alert(this.table.options.dataLoaderLoading||this.langText("data|loading"))}alertError(){this.table.alertManager.alert(this.table.options.dataLoaderError||this.langText("data|error"),"error")}clearAlert(){this.table.alertManager.clear()}},gp=class{constructor(t,e,r){this.table=t,this.events={},this.optionsList=e||{},this.subscriptionNotifiers={},this.dispatch=r?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=r}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifySubscriptionChange(t,!0)}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e),this._notifySubscriptionChange(t,!0)}unsubscribe(t,e){var r;if(this.events[t])if(e)if(r=this.events[t].findIndex(i=>i===e),r>-1)this.events[t].splice(r,1);else{console.warn("Cannot remove event, no matching event found:",t,e);return}else delete this.events[t];else{console.warn("Cannot remove event, no events set on:",t);return}this._notifySubscriptionChange(t,!1)}subscribed(t){return this.events[t]&&this.events[t].length}_notifySubscriptionChange(t,e){var r=this.subscriptionNotifiers[t];r&&r.forEach(i=>{i(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift(),r;return this.events[e]&&this.events[e].forEach((i,s)=>{let o=i.apply(this.table,t);s||(r=o)}),r}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="ExternalEvent:"+t[0],(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}},yp=class{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifySubscriptionChange(t,!0)}subscribe(t,e,r=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,priority:r}),this.events[t].sort((i,s)=>i.priority-s.priority),this._notifySubscriptionChange(t,!0)}unsubscribe(t,e){var r;if(this.events[t]){if(e)if(r=this.events[t].findIndex(i=>i.callback===e),r>-1)this.events[t].splice(r,1);else{console.warn("Cannot remove event, no matching event found:",t,e);return}}else{console.warn("Cannot remove event, no events set on:",t);return}this._notifySubscriptionChange(t,!1)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,e,r,i){var s=r;return Array.isArray(e)||(e=[e]),this.subscribed(t)?(this.events[t].forEach((o,a)=>{s=o.callback.apply(this,e.concat([s]))}),s):typeof i=="function"?i():i}_confirm(t,e){var r=!1;return Array.isArray(e)||(e=[e]),this.subscribed(t)&&this.events[t].forEach((i,s)=>{i.callback.apply(this,e)&&(r=!0)}),r}_notifySubscriptionChange(t,e){var r=this.subscriptionNotifiers[t];r&&r.forEach(i=>{i(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift();this.events[e]&&this.events[e].forEach(r=>{r.callback.apply(this,t)})}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._confirm(...arguments)}},vp=class extends Un{constructor(t){super(t)}_warnUser(){this.options("debugDeprecation")&&console.warn(...arguments)}check(t,e,r){var i="";return typeof this.options(t)<"u"?(i="Deprecated Setup Option - Use of the %c"+t+"%c option is now deprecated",e?(i=i+", Please use the %c"+e+"%c option instead",this._warnUser(i,"font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;"),r&&(this.table.options[e]=this.table.options[t])):this._warnUser(i,"font-weight: bold;","font-weight: normal;"),!1):!0}checkMsg(t,e){return typeof this.options(t)<"u"?(this._warnUser("%cDeprecated Setup Option - Use of the %c"+t+" %c option is now deprecated, "+e,"font-weight: normal;","font-weight: bold;","font-weight: normal;"),!1):!0}msg(t){this._warnUser(t)}};function RC(n,t){t&&this.table.columnManager.renderer.reinitializeColumnWidths(n),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function bv(n,t){n.forEach(function(e){e.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function OC(n,t){var e=0,r=this.table.rowManager.element.clientWidth,i=0,s=!1;n.forEach((o,a)=>{o.widthFixed||o.reinitializeWidth(),(this.table.options.responsiveLayout?o.modules.responsive.visible:o.visible)&&(s=o),o.visible&&(e+=o.getWidth())}),s?(i=r-e+s.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(s.setWidth(0),this.table.modules.responsiveLayout.update()),i>0?s.setWidth(i):s.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function AC(n,t){var e=this.table.rowManager.element.getBoundingClientRect().width,r=0,i=0,s=0,o=0,a=[],l=[],c=0,h=0,d=0;function p(m){var b;return typeof m=="string"?m.indexOf("%")>-1?b=e/100*parseInt(m):b=parseInt(m):b=m,b}function g(m,b,y,x){var S=[],O=0,D=0,U=0,z=s,q=0,G=0,tt=[];function K(N){return y*(N.column.definition.widthGrow||1)}function B(N){return p(N.width)-y*(N.column.definition.widthShrink||0)}return m.forEach(function(N,Z){var w=x?B(N):K(N);N.column.minWidth>=w?S.push(N):N.column.maxWidth&&N.column.maxWidth<w?(N.width=N.column.maxWidth,b-=N.column.maxWidth,z-=x?N.column.definition.widthShrink||1:N.column.definition.widthGrow||1,z&&(y=Math.floor(b/z))):(tt.push(N),G+=x?N.column.definition.widthShrink||1:N.column.definition.widthGrow||1)}),S.length?(S.forEach(function(N){O+=x?N.width-N.column.minWidth:N.column.minWidth,N.width=N.column.minWidth}),D=b-O,U=G?Math.floor(D/G):D,q=g(tt,D,U,x)):(q=G?b-Math.floor(b/G)*G:b,tt.forEach(function(N){N.width=x?B(N):K(N)})),q}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),n.forEach(function(m){var b,y,x;m.visible&&(b=m.definition.width,y=parseInt(m.minWidth),b?(x=p(b),r+=x>y?x:y,m.definition.widthShrink&&(l.push({column:m,width:x>y?x:y}),c+=m.definition.widthShrink)):(a.push({column:m,width:0}),s+=m.definition.widthGrow||1))}),i=e-r,o=Math.floor(i/s),d=g(a,i,o,!1),a.length&&d>0&&(a[a.length-1].width+=d),a.forEach(function(m){i-=m.width}),h=Math.abs(d)+i,h>0&&c&&(d=g(l,h,Math.floor(h/c),!0)),d&&l.length&&(l[l.length-1].width-=d),a.forEach(function(m){m.column.setWidth(m.width)}),l.forEach(function(m){m.column.setWidth(m.width)})}var IC={fitData:RC,fitDataFill:bv,fitDataTable:bv,fitDataStretch:OC,fitColumns:AC},bp=class n extends xr{static moduleName="layout";static modes=IC;constructor(t){super(t,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var t=this.table.options.layout;n.modes[t]?this.mode=t:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+t),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode),this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(t){t.definition.widthGrow&&(t.definition.widthGrow=Number(t.definition.widthGrow)),t.definition.widthShrink&&(t.definition.widthShrink=Number(t.definition.widthShrink))}getMode(){return this.mode}layout(t){this.dispatch("layout-refreshing"),n.modes[this.mode].call(this,this.table.columnManager.columnsByIndex,t),this.dispatch("layout-refreshed")}},NC={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All",counter:{showing:"Showing",of:"of",rows:"rows",pages:"pages"}},headerFilters:{default:"filter column...",columns:{}}}},_p=class n extends xr{static moduleName="localize";static langs=NC;constructor(t){super(t),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Ai.deepClone(n.langs),this.table.options.columnDefaults.headerFilterPlaceholder!==!1&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let t in this.table.options.langs)this.installLang(t,this.table.options.langs[t]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(t){this.langList.default.headerFilters.default=t}installLang(t,e){this.langList[t]?this._setLangProp(this.langList[t],e):this.langList[t]=e}_setLangProp(t,e){for(let r in e)t[r]&&typeof t[r]=="object"?this._setLangProp(t[r],e[r]):t[r]=e[r]}setLocale(t){t=t||"default";function e(r,i){for(var s in r)typeof r[s]=="object"?(i[s]||(i[s]={}),e(r[s],i[s])):i[s]=r[s]}if(t===!0&&navigator.language&&(t=navigator.language.toLowerCase()),t&&!this.langList[t]){let r=t.split("-")[0];this.langList[r]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,r),t=r):(console.warn("Localization Error - Matching locale not found, using default: ",t),t="default")}this.locale=t,this.lang=Ai.deepClone(this.langList.default||{}),t!="default"&&e(this.langList[t],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(t){return this.locale}getLang(t){return t?this.langList[t]:this.lang}getText(t,e){var r=e?t+"|"+e:t,i=r.split("|"),s=this._getLangElement(i,this.locale);return s||""}_getLangElement(t,e){var r=this.lang;return t.forEach(function(i){var s;r&&(s=r[i],typeof s<"u"?r=s:r=!1)}),r}bind(t,e){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(e),e(this.getText(t),this.lang)}_executeBindings(){for(let t in this.bindings)this.bindings[t].forEach(e=>{e(this.getText(t),this.lang)})}},wp=class extends xr{static moduleName="comms";constructor(t){super(t)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(t){var e=[],r;return r=this.table.constructor.registry.lookupTable(t),r.forEach(i=>{this.table!==i&&e.push(i)}),e}send(t,e,r,i){var s=this.getConnections(t);s.forEach(o=>{o.tableComms(this.table.element,e,r,i)}),!s.length&&t&&console.warn("Table Connection Error - No tables matching selector found",t)}receive(t,e,r,i){if(this.table.modExists(e))return this.table.modules[e].commsReceived(t,r,i);console.warn("Inter-table Comms Error - no such module:",e)}},DC=Object.freeze({__proto__:null,CommsModule:wp,LayoutModule:bp,LocalizeModule:_p}),xp=class n{static registry={tables:[],register(t){n.registry.tables.push(t)},deregister(t){var e=n.registry.tables.indexOf(t);e>-1&&n.registry.tables.splice(e,1)},lookupTable(t,e){var r=[],i,s;if(typeof t=="string"){if(i=document.querySelectorAll(t),i.length)for(var o=0;o<i.length;o++)s=n.registry.matchElement(i[o]),s&&r.push(s)}else typeof HTMLElement<"u"&&t instanceof HTMLElement||t instanceof n?(s=n.registry.matchElement(t),s&&r.push(s)):Array.isArray(t)?t.forEach(function(a){r=r.concat(n.registry.lookupTable(a))}):e||console.warn("Table Connection Error - Invalid Selector",t);return r},matchElement(t){return n.registry.tables.find(function(e){return t instanceof n?e===t:e.element===t})}};static findTable(t){var e=n.registry.lookupTable(t,!0);return Array.isArray(e)&&!e.length?!1:e}},Ep=class n extends xp{static moduleBindings={};static moduleExtensions={};static modulesRegistered=!1;static defaultModules=!1;constructor(){super()}static initializeModuleBinder(t){n.modulesRegistered||(n.modulesRegistered=!0,n._registerModules(DC,!0),t&&n._registerModules(t))}static _extendModule(t,e,r){if(n.moduleBindings[t]){var i=n.moduleBindings[t][e];if(i)if(typeof r=="object")for(let s in r)i[s]=r[s];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",e)}else console.warn("Module Error - module does not exist:",t)}static _registerModules(t,e){var r=Object.values(t);e&&r.forEach(i=>{i.prototype.moduleCore=!0}),n._registerModule(r)}static _registerModule(t){Array.isArray(t)||(t=[t]),t.forEach(e=>{n._registerModuleBinding(e),n._registerModuleExtensions(e)})}static _registerModuleBinding(t){t.moduleName?n.moduleBindings[t.moduleName]=t:console.error("Unable to bind module, no moduleName defined",t.moduleName)}static _registerModuleExtensions(t){var e=t.moduleExtensions;if(t.moduleExtensions)for(let r in e){let i=e[r];if(n.moduleBindings[r])for(let s in i)n._extendModule(r,s,i[s]);else{n.moduleExtensions[r]||(n.moduleExtensions[r]={});for(let s in i)n.moduleExtensions[r][s]||(n.moduleExtensions[r][s]={}),Object.assign(n.moduleExtensions[r][s],i[s])}}n._extendModuleFromQueue(t)}static _extendModuleFromQueue(t){var e=n.moduleExtensions[t.moduleName];if(e)for(let r in e)n._extendModule(t.moduleName,r,e[r])}_bindModules(){var t=[],e=[],r=[];this.modules={};for(var i in n.moduleBindings){let s=n.moduleBindings[i],o=new s(this);this.modules[i]=o,s.prototype.moduleCore?this.modulesCore.push(o):s.moduleInitOrder?s.moduleInitOrder<0?t.push(o):e.push(o):r.push(o)}t.sort((s,o)=>s.moduleInitOrder>o.moduleInitOrder?1:-1),e.sort((s,o)=>s.moduleInitOrder>o.moduleInitOrder?1:-1),this.modulesRegular=t.concat(r.concat(e))}},Cp=class extends Un{constructor(t){super(t),this.element=this._createAlertElement(),this.msgElement=this._createMsgElement(),this.type=null,this.element.appendChild(this.msgElement)}_createAlertElement(){var t=document.createElement("div");return t.classList.add("tabulator-alert"),t}_createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-alert-msg"),t.setAttribute("role","alert"),t}_typeClass(){return"tabulator-alert-state-"+this.type}alert(t,e="msg"){if(t){for(this.clear(),this.dispatch("alert-show",e),this.type=e;this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.add(this._typeClass()),typeof t=="function"&&(t=t()),t instanceof HTMLElement?this.msgElement.appendChild(t):this.msgElement.innerHTML=t,this.table.element.appendChild(this.element)}}clear(){this.dispatch("alert-hide",this.type),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.msgElement.classList.remove(this._typeClass())}},Mp=class n extends Ep{static defaultOptions=PC;static extendModule(){n.initializeModuleBinder(),n._extendModule(...arguments)}static registerModule(){n.initializeModuleBinder(),n._registerModule(...arguments)}constructor(t,e,r){super(),n.initializeModuleBinder(r),this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.alertManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new pp(this),this.dataLoader=!1,this.modules={},this.modulesCore=[],this.modulesRegular=[],this.deprecationAdvisor=new vp(this),this.optionsList=new jh(this,"table constructor"),this.initialized=!1,this.destroyed=!1,this.initializeElement(t)&&(this.initializeCoreSystems(e),setTimeout(()=>{this._create()})),this.constructor.registry.register(this)}initializeElement(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement?(this.element=t,!0):typeof t=="string"?(this.element=document.querySelector(t),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",t),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",t),!1)}initializeCoreSystems(t){this.columnManager=new lp(this),this.rowManager=new cp(this),this.footerManager=new fp(this),this.dataLoader=new mp(this),this.alertManager=new Cp(this),this._bindModules(),this.options=this.optionsList.generate(n.defaultOptions,t),this._clearObjectPointers(),this._mapDeprecatedFunctionality(),this.externalEvents=new gp(this,this.options,this.options.debugEventsExternal),this.eventBus=new yp(this.options.debugEventsInternal),this.interactionMonitor=new dp(this),this.dataLoader.initialize(),this.footerManager.initialize()}_mapDeprecatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this.initialized=!0,this._loadInitialData().finally(()=>{this.eventBus.dispatch("table-initialized"),this.externalEvents.dispatch("tableBuilt")})}_rtlCheck(){var t=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(t.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),Array.isArray(this.options.data)&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var t=this.element,e=this.options,r;if(t.tagName==="TABLE"){this.originalElement=this.element,r=document.createElement("div");var i=t.attributes;for(var s in i)typeof i[s]=="object"&&r.setAttribute(i[s].name,i[s].value);t.parentNode.replaceChild(r,t),this.element=t=r}for(t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);e.height&&(e.height=isNaN(e.height)?e.height:e.height+"px",t.style.height=e.height),e.minHeight!==!1&&(e.minHeight=isNaN(e.minHeight)?e.minHeight:e.minHeight+"px",t.style.minHeight=e.minHeight),e.maxHeight!==!1&&(e.maxHeight=isNaN(e.maxHeight)?e.maxHeight:e.maxHeight+"px",t.style.maxHeight=e.maxHeight)}_initializeTable(){var t=this.element,e=this.options;this.interactionMonitor.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modulesCore.forEach(r=>{r.initialize()}),t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),e.footerElement&&this.footerManager.activate(),e.autoColumns&&e.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modulesRegular.forEach(r=>{r.initialize()}),this.columnManager.setColumns(e.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){return this.dataLoader.load(this.options.data).finally(()=>{this.columnManager.verticalAlignHeaders()})}destroy(){var t=this.element;for(this.destroyed=!0,this.constructor.registry.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.destroy();t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("tabulator"),this.externalEvents.dispatch("tableDestroyed")}_detectBrowser(){var t=navigator.userAgent||navigator.vendor||window.opera;t.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):t.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):t.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):t.indexOf("Mac OS")>-1?(this.browser="safari",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.slice(0,4))}initGuard(t,e){var r,i;return this.options.debugInitialization&&!this.initialized&&(t||(r=new Error().stack.split(`
`),i=r[0]=="Error"?r[2]:r[1],i[0]==" "?t=i.trim().split(" ")[1].split(".")[1]:t=i.trim().split("@")[0]),console.warn("Table Not Initialized - Calling the "+t+" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function."+(e?" "+e:""))),this.initialized}blockRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-blocking"),this.rowManager.blockRedraw(),this.columnManager.blockRedraw(),this.eventBus.dispatch("redraw-blocked")}restoreRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-restoring"),this.rowManager.restoreRedraw(),this.columnManager.restoreRedraw(),this.eventBus.dispatch("redraw-restored")}setData(t,e,r){return this.initGuard(!1,"To set initial data please use the 'data' property in the table constructor."),this.dataLoader.load(t,e,r,!1)}clearData(){this.initGuard(),this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(t){return this.rowManager.getData(t)}getDataCount(t){return this.rowManager.getDataCount(t)}replaceData(t,e,r){return this.initGuard(),this.dataLoader.load(t,e,r,!0,!0)}updateData(t){var e=0;return this.initGuard(),new Promise((r,i)=>{this.dataLoader.blockActiveLoad(),typeof t=="string"&&(t=JSON.parse(t)),t&&t.length>0?t.forEach(s=>{var o=this.rowManager.findRow(s[this.options.index]);o?(e++,o.updateData(s).then(()=>{e--,e||r()}).catch(a=>{i("Update Error - Unable to update row",s,a)})):i("Update Error - Unable to find row",s)}):(console.warn("Update Error - No data provided"),i("Update Error - No data provided"))})}addData(t,e,r){return this.initGuard(),new Promise((i,s)=>{this.dataLoader.blockActiveLoad(),typeof t=="string"&&(t=JSON.parse(t)),t?this.rowManager.addRows(t,e,r).then(o=>{var a=[];o.forEach(function(l){a.push(l.getComponent())}),i(a)}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})}updateOrAddData(t){var e=[],r=0;return this.initGuard(),new Promise((i,s)=>{this.dataLoader.blockActiveLoad(),typeof t=="string"&&(t=JSON.parse(t)),t&&t.length>0?t.forEach(o=>{var a=this.rowManager.findRow(o[this.options.index]);r++,a?a.updateData(o).then(()=>{r--,e.push(a.getComponent()),r||i(e)}):this.rowManager.addRows(o).then(l=>{r--,e.push(l[0].getComponent()),r||i(e)})}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})}getRow(t){var e=this.rowManager.findRow(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)}getRowFromPosition(t){var e=this.rowManager.getRowFromPosition(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)}deleteRow(t){var e=[];this.initGuard(),Array.isArray(t)||(t=[t]);for(let r of t){let i=this.rowManager.findRow(r,!0);if(i)e.push(i);else return console.error("Delete Error - No matching row found:",r),Promise.reject("Delete Error - No matching row found")}return e.sort((r,i)=>this.rowManager.rows.indexOf(r)>this.rowManager.rows.indexOf(i)?1:-1),e.forEach(r=>{r.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(t,e,r){return this.initGuard(),typeof t=="string"&&(t=JSON.parse(t)),this.rowManager.addRows(t,e,r,!0).then(i=>i[0].getComponent())}updateOrAddRow(t,e){var r=this.rowManager.findRow(t);return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),r?r.updateData(e).then(()=>r.getComponent()):this.rowManager.addRows(e).then(i=>i[0].getComponent())}updateRow(t,e){var r=this.rowManager.findRow(t);return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),r?r.updateData(e).then(()=>Promise.resolve(r.getComponent())):(console.warn("Update Error - No matching row found:",t),Promise.reject("Update Error - No matching row found"))}scrollToRow(t,e,r){var i=this.rowManager.findRow(t);return i?this.rowManager.scrollToRow(i,e,r):(console.warn("Scroll Error - No matching row found:",t),Promise.reject("Scroll Error - No matching row found"))}moveRow(t,e,r){var i=this.rowManager.findRow(t);this.initGuard(),i?i.moveToRow(e,r):console.warn("Move Error - No matching row found:",t)}getRows(t){return this.rowManager.getComponents(t)}getRowPosition(t){var e=this.rowManager.findRow(t);return e?e.getPosition():(console.warn("Position Error - No matching row found:",t),!1)}setColumns(t){this.initGuard(!1,"To set initial columns please use the 'columns' property in the table constructor"),this.columnManager.setColumns(t)}getColumns(t){return this.columnManager.getComponents(t)}getColumn(t){var e=this.columnManager.findColumn(t);return e?e.getComponent():(console.warn("Find Error - No matching column found:",t),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(t){var e=this.columnManager.findColumn(t);if(this.initGuard(),e)e.show();else return console.warn("Column Show Error - No matching column found:",t),!1}hideColumn(t){var e=this.columnManager.findColumn(t);if(this.initGuard(),e)e.hide();else return console.warn("Column Hide Error - No matching column found:",t),!1}toggleColumn(t){var e=this.columnManager.findColumn(t);if(this.initGuard(),e)e.visible?e.hide():e.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",t),!1}addColumn(t,e,r){var i=this.columnManager.findColumn(r);return this.initGuard(),this.columnManager.addColumn(t,e,i).then(s=>s.getComponent())}deleteColumn(t){var e=this.columnManager.findColumn(t);return this.initGuard(),e?e.delete():(console.warn("Column Delete Error - No matching column found:",t),Promise.reject())}updateColumnDefinition(t,e){var r=this.columnManager.findColumn(t);return this.initGuard(),r?r.updateDefinition(e):(console.warn("Column Update Error - No matching column found:",t),Promise.reject())}moveColumn(t,e,r){var i=this.columnManager.findColumn(t),s=this.columnManager.findColumn(e);this.initGuard(),i?s?this.columnManager.moveColumn(i,s,r):console.warn("Move Error - No matching column found:",s):console.warn("Move Error - No matching column found:",t)}scrollToColumn(t,e,r){return new Promise((i,s)=>{var o=this.columnManager.findColumn(t);return o?this.columnManager.scrollToColumn(o,e,r):(console.warn("Scroll Error - No matching column found:",t),Promise.reject("Scroll Error - No matching column found"))})}redraw(t){this.initGuard(),this.columnManager.redraw(t),this.rowManager.redraw(t)}setHeight(t){this.options.height=isNaN(t)?t:t+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw(!0)}on(t,e){this.externalEvents.subscribe(t,e)}off(t,e){this.externalEvents.unsubscribe(t,e)}dispatchEvent(){var t=Array.from(arguments);t.shift(),this.externalEvents.dispatch(...arguments)}alert(t,e){this.initGuard(),this.alertManager.alert(t,e)}clearAlert(){this.initGuard(),this.alertManager.clear()}modExists(t,e){return this.modules[t]?!0:(e&&console.error("Tabulator Module Not Installed: "+t),!1)}module(t){var e=this.modules[t];return e||console.error("Tabulator module not installed: "+t),e}},ru=Mp,Sp=class extends ru{static extendModule(){ru.initializeModuleBinder(md),ru._extendModule(...arguments)}static registerModule(){ru.initializeModuleBinder(md),ru._registerModule(...arguments)}constructor(t,e,r){super(t,e,md)}},Ev=Sp;var Sv=Mr(Mv());var BC=kh+"/api/v1/mapentities",FC=4114,nu=new URLSearchParams(window.location.search).get("id"),va=[{title:"Location",field:"id",formatter:"link",formatterParams:{labelField:"id",urlPrefix:"/index.html?id=",target:"_blank"}},{title:"Name",field:"name"},{title:"Contact Info",field:"contactInfo"},{title:"Nr of People",field:"nrOfPeople"},{title:"Nr of Vechiles",field:"nrOfVechiles"},{title:"Color",field:"color",formatter:"color"},{title:"Additional Square meters (m2)",field:"additionalSqm"},{title:"Amplified Sound (watts)",field:"amplifiedSound"},{title:"Power need (watts)",field:"powerNeed"},{title:"Description",field:"description",formatter:"textarea",resizable:!0,width:600,variableHeight:!0}],zC=n=>{let t={};for(let{field:e}of va)t[e]=n[e];return t},kv=async()=>{nu&&(va.push({title:"Revision",field:"revision"}),va.push({title:"Timestamp",field:"timeStamp"}),va.push({title:"Deleted",formatter:"tickCross",field:"isDeleted"}),va.push({title:"Deleted because",field:"deleteReason"}));let t=await(await fetch(BC+(nu?"/"+nu:""))).json(),e=[],r={nrOfMembershipsSold:{value:FC,title:"total nr. of memberships",unit:"memberships"},totalNrOfPeople:{value:0,title:"total nr. of campers",unit:"persons"},totalNrOfVechiles:{value:0,title:"total nr. of vechiles",unit:"automobiles"},totalPowerNeed:{value:0,title:"total power need of all camps",unit:"watts"},totalNrOfEntries:{value:t.length,title:"total nr. of shapes on the map",unit:"shapes"}};for(let p of t){let{properties:g}=JSON.parse(p.geoJson),m={id:Number(p.id),name:String(g.name),timeStamp:new Date(p.timeStamp),isDeleted:!!p.isDeleted,deleteReason:String(p.deleteReason),additionalSqm:Number(g.additionalSqm),amplifiedSound:Number(g.amplifiedSound),color:String(g.color),contactInfo:String(g.contactInfo),description:String(g.description),nrOfPeople:Number(g.nrOfPeople),nrOfVechiles:Number(g.nrOfVechiles),powerNeed:Number(g.powerNeed),revision:Number(p.revision),supressWarnings:Number(g.supressWarnings)};r.totalNrOfPeople.value+=+m.nrOfPeople,r.totalNrOfVechiles.value+=m.nrOfVechiles,r.totalPowerNeed.value+=m.powerNeed,e.push(m)}new Ev("#stats",{data:e,columns:va});let i=new Sv.default.Workbook;i.creator="Borderland Community Cocreators";let s=i.addWorksheet("Camps");s.columns=va.map(p=>({header:p.title,key:p.field})),e.forEach(p=>s.addRow(zC(p)));let o=document.createElement("h1");o.innerHTML=nu?"History for shape with id "+nu:"All camps and statistics",document.querySelector("#header").appendChild(o);let a=document.createElement("ul");for(let{value:p,title:g,unit:m}of Object.values(r)){let b=document.createElement("li");b.innerHTML=`${g}: ${p} ${m}`,a.appendChild(b)}document.querySelector("#header").appendChild(a);let l=await i.xlsx.writeBuffer(),c=URL.createObjectURL(new Blob([l],{type:"application/xlsx"})),h=document.createElement("a");h.href=c,h.download="camps.xlsx";let d=document.createElement("sl-button");d.innerHTML="Download XLSX File",d.setAttribute("variant","primary"),h.appendChild(d),document.querySelector("#header").appendChild(h)};async function jC(){try{await vv()}catch(n){console.error(n)}localStorage.getItem("hasSeenPlacementWelcome")||mo({file:"welcome",position:"bottom",onClose:()=>{localStorage.setItem("hasSeenPlacementWelcome","true")}})}window.indexMain=jC;async function HC(){await kv()}window.statsMain=HC;})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

leaflet.locatecontrol/src/L.Control.Locate.js:
  (*!
  Copyright (c) 2016 Dominik Moritz
  
  This file is part of the leaflet locate control. It is licensed under the MIT license.
  You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
  *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

polygon-clipping/dist/polygon-clipping.umd.js:
  (**
   * splaytree v3.1.0
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   *)

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.0.2 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.2/LICENSE *)

exceljs/dist/exceljs.min.js:
  (*! ExcelJS 19-10-2023 *)
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (**
   * Character classes and associated utilities for the 5th edition of XML 1.0.
   *
   * @author Louis-Dominique Dubeau
   * @license MIT
   * @copyright Louis-Dominique Dubeau
   *)
  (**
   * Character classes and associated utilities for the 2nd edition of XML 1.1.
   *
   * @author Louis-Dominique Dubeau
   * @license MIT
   * @copyright Louis-Dominique Dubeau
   *)
  (**
   * Character class utilities for XML NS 1.0 edition 3.
   *
   * @author Louis-Dominique Dubeau
   * @license MIT
   * @copyright Louis-Dominique Dubeau
   *)

@turf/isolines/dist/es/index.js:
  (**
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)

@turf/isobands/dist/es/index.js:
  (*!
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)
*/
