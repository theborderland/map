(()=>{var Ov=Object.create;var Rp=Object.defineProperty;var Iv=Object.getOwnPropertyDescriptor;var Av=Object.getOwnPropertyNames;var Nv=Object.getPrototypeOf,Dv=Object.prototype.hasOwnProperty;var fl=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var Ge=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var Bv=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Av(t))!Dv.call(n,r)&&r!==e&&Rp(n,r,{get:()=>t[r],enumerable:!(i=Iv(t,r))||i.enumerable});return n};var Mi=(n,t,e)=>(e=n!=null?Ov(Nv(n)):{},Bv(t||!n||!n.__esModule?Rp(e,"default",{value:n,enumerable:!0}):e,n));var Jn=Ge((ou,Op)=>{(function(n,t){typeof ou=="object"&&typeof Op<"u"?t(ou):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.leaflet={}))})(ou,function(n){"use strict";var t="1.9.3";function e(y){var P,X,st,ft;for(X=1,st=arguments.length;X<st;X++){ft=arguments[X];for(P in ft)y[P]=ft[P]}return y}var i=Object.create||function(){function y(){}return function(P){return y.prototype=P,new y}}();function r(y,P){var X=Array.prototype.slice;if(y.bind)return y.bind.apply(y,X.call(arguments,1));var st=X.call(arguments,2);return function(){return y.apply(P,st.length?st.concat(X.call(arguments)):arguments)}}var s=0;function a(y){return"_leaflet_id"in y||(y._leaflet_id=++s),y._leaflet_id}function o(y,P,X){var st,ft,Mt,Dt;return Dt=function(){st=!1,ft&&(Mt.apply(X,ft),ft=!1)},Mt=function(){st?ft=arguments:(y.apply(X,arguments),setTimeout(Dt,P),st=!0)},Mt}function l(y,P,X){var st=P[1],ft=P[0],Mt=st-ft;return y===st&&X?y:((y-ft)%Mt+Mt)%Mt+ft}function c(){return!1}function h(y,P){if(P===!1)return y;var X=Math.pow(10,P===void 0?6:P);return Math.round(y*X)/X}function d(y){return y.trim?y.trim():y.replace(/^\s+|\s+$/g,"")}function p(y){return d(y).split(/\s+/)}function g(y,P){Object.prototype.hasOwnProperty.call(y,"options")||(y.options=y.options?i(y.options):{});for(var X in P)y.options[X]=P[X];return y.options}function m(y,P,X){var st=[];for(var ft in y)st.push(encodeURIComponent(X?ft.toUpperCase():ft)+"="+encodeURIComponent(y[ft]));return(!P||P.indexOf("?")===-1?"?":"&")+st.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function v(y,P){return y.replace(_,function(X,st){var ft=P[st];if(ft===void 0)throw new Error("No value provided for variable "+X);return typeof ft=="function"&&(ft=ft(P)),ft})}var x=Array.isArray||function(y){return Object.prototype.toString.call(y)==="[object Array]"};function S(y,P){for(var X=0;X<y.length;X++)if(y[X]===P)return X;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function D(y){return window["webkit"+y]||window["moz"+y]||window["ms"+y]}var U=0;function z(y){var P=+new Date,X=Math.max(0,16-(P-U));return U=P+X,window.setTimeout(y,X)}var V=window.requestAnimationFrame||D("RequestAnimationFrame")||z,G=window.cancelAnimationFrame||D("CancelAnimationFrame")||D("CancelRequestAnimationFrame")||function(y){window.clearTimeout(y)};function tt(y,P,X){if(X&&V===z)y.call(P);else return V.call(window,r(y,P))}function K(y){y&&G.call(window,y)}var B={__proto__:null,extend:e,create:i,bind:r,get lastId(){return s},stamp:a,throttle:o,wrapNum:l,falseFn:c,formatNum:h,trim:d,splitWords:p,setOptions:g,getParamString:m,template:v,isArray:x,indexOf:S,emptyImageUrl:O,requestFn:V,cancelFn:G,requestAnimFrame:tt,cancelAnimFrame:K};function N(){}N.extend=function(y){var P=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},X=P.__super__=this.prototype,st=i(X);st.constructor=P,P.prototype=st;for(var ft in this)Object.prototype.hasOwnProperty.call(this,ft)&&ft!=="prototype"&&ft!=="__super__"&&(P[ft]=this[ft]);return y.statics&&e(P,y.statics),y.includes&&(Z(y.includes),e.apply(null,[st].concat(y.includes))),e(st,y),delete st.statics,delete st.includes,st.options&&(st.options=X.options?i(X.options):{},e(st.options,y.options)),st._initHooks=[],st.callInitHooks=function(){if(!this._initHooksCalled){X.callInitHooks&&X.callInitHooks.call(this),this._initHooksCalled=!0;for(var Mt=0,Dt=st._initHooks.length;Mt<Dt;Mt++)st._initHooks[Mt].call(this)}},P},N.include=function(y){var P=this.prototype.options;return e(this.prototype,y),y.options&&(this.prototype.options=P,this.mergeOptions(y.options)),this},N.mergeOptions=function(y){return e(this.prototype.options,y),this},N.addInitHook=function(y){var P=Array.prototype.slice.call(arguments,1),X=typeof y=="function"?y:function(){this[y].apply(this,P)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(X),this};function Z(y){if(!(typeof L>"u"||!L||!L.Mixin)){y=x(y)?y:[y];for(var P=0;P<y.length;P++)y[P]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var w={on:function(y,P,X){if(typeof y=="object")for(var st in y)this._on(st,y[st],P);else{y=p(y);for(var ft=0,Mt=y.length;ft<Mt;ft++)this._on(y[ft],P,X)}return this},off:function(y,P,X){if(!arguments.length)delete this._events;else if(typeof y=="object")for(var st in y)this._off(st,y[st],P);else{y=p(y);for(var ft=arguments.length===1,Mt=0,Dt=y.length;Mt<Dt;Mt++)ft?this._off(y[Mt]):this._off(y[Mt],P,X)}return this},_on:function(y,P,X,st){if(typeof P!="function"){console.warn("wrong listener type: "+typeof P);return}if(this._listens(y,P,X)===!1){X===this&&(X=void 0);var ft={fn:P,ctx:X};st&&(ft.once=!0),this._events=this._events||{},this._events[y]=this._events[y]||[],this._events[y].push(ft)}},_off:function(y,P,X){var st,ft,Mt;if(this._events&&(st=this._events[y],!!st)){if(arguments.length===1){if(this._firingCount)for(ft=0,Mt=st.length;ft<Mt;ft++)st[ft].fn=c;delete this._events[y];return}if(typeof P!="function"){console.warn("wrong listener type: "+typeof P);return}var Dt=this._listens(y,P,X);if(Dt!==!1){var Wt=st[Dt];this._firingCount&&(Wt.fn=c,this._events[y]=st=st.slice()),st.splice(Dt,1)}}},fire:function(y,P,X){if(!this.listens(y,X))return this;var st=e({},P,{type:y,target:this,sourceTarget:P&&P.sourceTarget||this});if(this._events){var ft=this._events[y];if(ft){this._firingCount=this._firingCount+1||1;for(var Mt=0,Dt=ft.length;Mt<Dt;Mt++){var Wt=ft[Mt],te=Wt.fn;Wt.once&&this.off(y,te,Wt.ctx),te.call(Wt.ctx||this,st)}this._firingCount--}}return X&&this._propagateEvent(st),this},listens:function(y,P,X,st){typeof y!="string"&&console.warn('"string" type argument expected');var ft=P;typeof P!="function"&&(st=!!P,ft=void 0,X=void 0);var Mt=this._events&&this._events[y];if(Mt&&Mt.length&&this._listens(y,ft,X)!==!1)return!0;if(st){for(var Dt in this._eventParents)if(this._eventParents[Dt].listens(y,P,X,st))return!0}return!1},_listens:function(y,P,X){if(!this._events)return!1;var st=this._events[y]||[];if(!P)return!!st.length;X===this&&(X=void 0);for(var ft=0,Mt=st.length;ft<Mt;ft++)if(st[ft].fn===P&&st[ft].ctx===X)return ft;return!1},once:function(y,P,X){if(typeof y=="object")for(var st in y)this._on(st,y[st],P,!0);else{y=p(y);for(var ft=0,Mt=y.length;ft<Mt;ft++)this._on(y[ft],P,X,!0)}return this},addEventParent:function(y){return this._eventParents=this._eventParents||{},this._eventParents[a(y)]=y,this},removeEventParent:function(y){return this._eventParents&&delete this._eventParents[a(y)],this},_propagateEvent:function(y){for(var P in this._eventParents)this._eventParents[P].fire(y.type,e({layer:y.target,propagatedFrom:y.target},y),!0)}};w.addEventListener=w.on,w.removeEventListener=w.clearAllEventListeners=w.off,w.addOneTimeEventListener=w.once,w.fireEvent=w.fire,w.hasEventListeners=w.listens;var C=N.extend(w);function k(y,P,X){this.x=X?Math.round(y):y,this.y=X?Math.round(P):P}var T=Math.trunc||function(y){return y>0?Math.floor(y):Math.ceil(y)};k.prototype={clone:function(){return new k(this.x,this.y)},add:function(y){return this.clone()._add(R(y))},_add:function(y){return this.x+=y.x,this.y+=y.y,this},subtract:function(y){return this.clone()._subtract(R(y))},_subtract:function(y){return this.x-=y.x,this.y-=y.y,this},divideBy:function(y){return this.clone()._divideBy(y)},_divideBy:function(y){return this.x/=y,this.y/=y,this},multiplyBy:function(y){return this.clone()._multiplyBy(y)},_multiplyBy:function(y){return this.x*=y,this.y*=y,this},scaleBy:function(y){return new k(this.x*y.x,this.y*y.y)},unscaleBy:function(y){return new k(this.x/y.x,this.y/y.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=T(this.x),this.y=T(this.y),this},distanceTo:function(y){y=R(y);var P=y.x-this.x,X=y.y-this.y;return Math.sqrt(P*P+X*X)},equals:function(y){return y=R(y),y.x===this.x&&y.y===this.y},contains:function(y){return y=R(y),Math.abs(y.x)<=Math.abs(this.x)&&Math.abs(y.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function R(y,P,X){return y instanceof k?y:x(y)?new k(y[0],y[1]):y==null?y:typeof y=="object"&&"x"in y&&"y"in y?new k(y.x,y.y):new k(y,P,X)}function F(y,P){if(y)for(var X=P?[y,P]:y,st=0,ft=X.length;st<ft;st++)this.extend(X[st])}F.prototype={extend:function(y){var P,X;if(!y)return this;if(y instanceof k||typeof y[0]=="number"||"x"in y)P=X=R(y);else if(y=H(y),P=y.min,X=y.max,!P||!X)return this;return!this.min&&!this.max?(this.min=P.clone(),this.max=X.clone()):(this.min.x=Math.min(P.x,this.min.x),this.max.x=Math.max(X.x,this.max.x),this.min.y=Math.min(P.y,this.min.y),this.max.y=Math.max(X.y,this.max.y)),this},getCenter:function(y){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,y)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(y){var P,X;return typeof y[0]=="number"||y instanceof k?y=R(y):y=H(y),y instanceof F?(P=y.min,X=y.max):P=X=y,P.x>=this.min.x&&X.x<=this.max.x&&P.y>=this.min.y&&X.y<=this.max.y},intersects:function(y){y=H(y);var P=this.min,X=this.max,st=y.min,ft=y.max,Mt=ft.x>=P.x&&st.x<=X.x,Dt=ft.y>=P.y&&st.y<=X.y;return Mt&&Dt},overlaps:function(y){y=H(y);var P=this.min,X=this.max,st=y.min,ft=y.max,Mt=ft.x>P.x&&st.x<X.x,Dt=ft.y>P.y&&st.y<X.y;return Mt&&Dt},isValid:function(){return!!(this.min&&this.max)},pad:function(y){var P=this.min,X=this.max,st=Math.abs(P.x-X.x)*y,ft=Math.abs(P.y-X.y)*y;return H(R(P.x-st,P.y-ft),R(X.x+st,X.y+ft))},equals:function(y){return y?(y=H(y),this.min.equals(y.getTopLeft())&&this.max.equals(y.getBottomRight())):!1}};function H(y,P){return!y||y instanceof F?y:new F(y,P)}function it(y,P){if(y)for(var X=P?[y,P]:y,st=0,ft=X.length;st<ft;st++)this.extend(X[st])}it.prototype={extend:function(y){var P=this._southWest,X=this._northEast,st,ft;if(y instanceof dt)st=y,ft=y;else if(y instanceof it){if(st=y._southWest,ft=y._northEast,!st||!ft)return this}else return y?this.extend($(y)||ot(y)):this;return!P&&!X?(this._southWest=new dt(st.lat,st.lng),this._northEast=new dt(ft.lat,ft.lng)):(P.lat=Math.min(st.lat,P.lat),P.lng=Math.min(st.lng,P.lng),X.lat=Math.max(ft.lat,X.lat),X.lng=Math.max(ft.lng,X.lng)),this},pad:function(y){var P=this._southWest,X=this._northEast,st=Math.abs(P.lat-X.lat)*y,ft=Math.abs(P.lng-X.lng)*y;return new it(new dt(P.lat-st,P.lng-ft),new dt(X.lat+st,X.lng+ft))},getCenter:function(){return new dt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new dt(this.getNorth(),this.getWest())},getSouthEast:function(){return new dt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(y){typeof y[0]=="number"||y instanceof dt||"lat"in y?y=$(y):y=ot(y);var P=this._southWest,X=this._northEast,st,ft;return y instanceof it?(st=y.getSouthWest(),ft=y.getNorthEast()):st=ft=y,st.lat>=P.lat&&ft.lat<=X.lat&&st.lng>=P.lng&&ft.lng<=X.lng},intersects:function(y){y=ot(y);var P=this._southWest,X=this._northEast,st=y.getSouthWest(),ft=y.getNorthEast(),Mt=ft.lat>=P.lat&&st.lat<=X.lat,Dt=ft.lng>=P.lng&&st.lng<=X.lng;return Mt&&Dt},overlaps:function(y){y=ot(y);var P=this._southWest,X=this._northEast,st=y.getSouthWest(),ft=y.getNorthEast(),Mt=ft.lat>P.lat&&st.lat<X.lat,Dt=ft.lng>P.lng&&st.lng<X.lng;return Mt&&Dt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(y,P){return y?(y=ot(y),this._southWest.equals(y.getSouthWest(),P)&&this._northEast.equals(y.getNorthEast(),P)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ot(y,P){return y instanceof it?y:new it(y,P)}function dt(y,P,X){if(isNaN(y)||isNaN(P))throw new Error("Invalid LatLng object: ("+y+", "+P+")");this.lat=+y,this.lng=+P,X!==void 0&&(this.alt=+X)}dt.prototype={equals:function(y,P){if(!y)return!1;y=$(y);var X=Math.max(Math.abs(this.lat-y.lat),Math.abs(this.lng-y.lng));return X<=(P===void 0?1e-9:P)},toString:function(y){return"LatLng("+h(this.lat,y)+", "+h(this.lng,y)+")"},distanceTo:function(y){return W.distance(this,$(y))},wrap:function(){return W.wrapLatLng(this)},toBounds:function(y){var P=180*y/40075017,X=P/Math.cos(Math.PI/180*this.lat);return ot([this.lat-P,this.lng-X],[this.lat+P,this.lng+X])},clone:function(){return new dt(this.lat,this.lng,this.alt)}};function $(y,P,X){return y instanceof dt?y:x(y)&&typeof y[0]!="object"?y.length===3?new dt(y[0],y[1],y[2]):y.length===2?new dt(y[0],y[1]):null:y==null?y:typeof y=="object"&&"lat"in y?new dt(y.lat,"lng"in y?y.lng:y.lon,y.alt):P===void 0?null:new dt(y,P,X)}var ct={latLngToPoint:function(y,P){var X=this.projection.project(y),st=this.scale(P);return this.transformation._transform(X,st)},pointToLatLng:function(y,P){var X=this.scale(P),st=this.transformation.untransform(y,X);return this.projection.unproject(st)},project:function(y){return this.projection.project(y)},unproject:function(y){return this.projection.unproject(y)},scale:function(y){return 256*Math.pow(2,y)},zoom:function(y){return Math.log(y/256)/Math.LN2},getProjectedBounds:function(y){if(this.infinite)return null;var P=this.projection.bounds,X=this.scale(y),st=this.transformation.transform(P.min,X),ft=this.transformation.transform(P.max,X);return new F(st,ft)},infinite:!1,wrapLatLng:function(y){var P=this.wrapLng?l(y.lng,this.wrapLng,!0):y.lng,X=this.wrapLat?l(y.lat,this.wrapLat,!0):y.lat,st=y.alt;return new dt(X,P,st)},wrapLatLngBounds:function(y){var P=y.getCenter(),X=this.wrapLatLng(P),st=P.lat-X.lat,ft=P.lng-X.lng;if(st===0&&ft===0)return y;var Mt=y.getSouthWest(),Dt=y.getNorthEast(),Wt=new dt(Mt.lat-st,Mt.lng-ft),te=new dt(Dt.lat-st,Dt.lng-ft);return new it(Wt,te)}},W=e({},ct,{wrapLng:[-180,180],R:6371e3,distance:function(y,P){var X=Math.PI/180,st=y.lat*X,ft=P.lat*X,Mt=Math.sin((P.lat-y.lat)*X/2),Dt=Math.sin((P.lng-y.lng)*X/2),Wt=Mt*Mt+Math.cos(st)*Math.cos(ft)*Dt*Dt,te=2*Math.atan2(Math.sqrt(Wt),Math.sqrt(1-Wt));return this.R*te}}),q=6378137,rt={R:q,MAX_LATITUDE:85.0511287798,project:function(y){var P=Math.PI/180,X=this.MAX_LATITUDE,st=Math.max(Math.min(X,y.lat),-X),ft=Math.sin(st*P);return new k(this.R*y.lng*P,this.R*Math.log((1+ft)/(1-ft))/2)},unproject:function(y){var P=180/Math.PI;return new dt((2*Math.atan(Math.exp(y.y/this.R))-Math.PI/2)*P,y.x*P/this.R)},bounds:function(){var y=q*Math.PI;return new F([-y,-y],[y,y])}()};function mt(y,P,X,st){if(x(y)){this._a=y[0],this._b=y[1],this._c=y[2],this._d=y[3];return}this._a=y,this._b=P,this._c=X,this._d=st}mt.prototype={transform:function(y,P){return this._transform(y.clone(),P)},_transform:function(y,P){return P=P||1,y.x=P*(this._a*y.x+this._b),y.y=P*(this._c*y.y+this._d),y},untransform:function(y,P){return P=P||1,new k((y.x/P-this._b)/this._a,(y.y/P-this._d)/this._c)}};function wt(y,P,X,st){return new mt(y,P,X,st)}var _t=e({},W,{code:"EPSG:3857",projection:rt,transformation:function(){var y=.5/(Math.PI*rt.R);return wt(y,.5,-y,.5)}()}),Ct=e({},_t,{code:"EPSG:900913"});function Ft(y){return document.createElementNS("http://www.w3.org/2000/svg",y)}function At(y,P){var X="",st,ft,Mt,Dt,Wt,te;for(st=0,Mt=y.length;st<Mt;st++){for(Wt=y[st],ft=0,Dt=Wt.length;ft<Dt;ft++)te=Wt[ft],X+=(ft?"L":"M")+te.x+" "+te.y;X+=P?jt.svg?"z":"x":""}return X||"M0 0"}var vt=document.documentElement.style,kt="ActiveXObject"in window,gt=kt&&!document.addEventListener,ut="msLaunchUri"in navigator&&!("documentMode"in document),Q=qt("webkit"),Y=qt("android"),et=qt("android 2")||qt("android 3"),lt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pt=Y&&qt("Google")&&lt<537&&!("AudioNode"in window),bt=!!window.opera,Et=!ut&&qt("chrome"),Ot=qt("gecko")&&!Q&&!bt&&!kt,zt=!Et&&qt("safari"),Gt=qt("phantom"),Jt="OTransition"in vt,Kt=navigator.platform.indexOf("Win")===0,ie=kt&&"transition"in vt,Xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!et,Ut="MozPerspective"in vt,_e=!window.L_DISABLE_3D&&(ie||Xt||Ut)&&!Jt&&!Gt,le=typeof orientation<"u"||qt("mobile"),ye=le&&Q,Ze=le&&Xt,ce=!window.PointerEvent&&window.MSPointerEvent,ke=!!(window.PointerEvent||ce),He="ontouchstart"in window||!!window.TouchEvent,$t=!window.L_NO_TOUCH&&(He||ke),Te=le&&bt,bi=le&&Ot,ue=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fe=function(){var y=!1;try{var P=Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("testPassiveEventSupport",c,P),window.removeEventListener("testPassiveEventSupport",c,P)}catch{}return y}(),ai=function(){return!!document.createElement("canvas").getContext}(),Le=!!(document.createElementNS&&Ft("svg").createSVGRect),Oe=!!Le&&function(){var y=document.createElement("div");return y.innerHTML="<svg/>",(y.firstChild&&y.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ir=!Le&&function(){try{var y=document.createElement("div");y.innerHTML='<v:shape adj="1"/>';var P=y.firstChild;return P.style.behavior="url(#default#VML)",P&&typeof P.adj=="object"}catch{return!1}}(),We=navigator.platform.indexOf("Mac")===0,It=navigator.platform.indexOf("Linux")===0;function qt(y){return navigator.userAgent.toLowerCase().indexOf(y)>=0}var jt={ie:kt,ielt9:gt,edge:ut,webkit:Q,android:Y,android23:et,androidStock:pt,opera:bt,chrome:Et,gecko:Ot,safari:zt,phantom:Gt,opera12:Jt,win:Kt,ie3d:ie,webkit3d:Xt,gecko3d:Ut,any3d:_e,mobile:le,mobileWebkit:ye,mobileWebkit3d:Ze,msPointer:ce,pointer:ke,touch:$t,touchNative:He,mobileOpera:Te,mobileGecko:bi,retina:ue,passiveEvents:Fe,canvas:ai,svg:Le,vml:ir,inlineSvg:Oe,mac:We,linux:It},ae=jt.msPointer?"MSPointerDown":"pointerdown",Qe=jt.msPointer?"MSPointerMove":"pointermove",se=jt.msPointer?"MSPointerUp":"pointerup",ve=jt.msPointer?"MSPointerCancel":"pointercancel",$e={touchstart:ae,touchmove:Qe,touchend:se,touchcancel:ve},Ie={touchstart:ki,touchmove:cr,touchend:cr,touchcancel:cr},fe={},Ye=!1;function Ve(y,P,X){return P==="touchstart"&&oi(),Ie[P]?(X=Ie[P].bind(this,X),y.addEventListener($e[P],X,!1),X):(console.warn("wrong event specified:",P),c)}function ii(y,P,X){if(!$e[P]){console.warn("wrong event specified:",P);return}y.removeEventListener($e[P],X,!1)}function Ke(y){fe[y.pointerId]=y}function pr(y){fe[y.pointerId]&&(fe[y.pointerId]=y)}function Je(y){delete fe[y.pointerId]}function oi(){Ye||(document.addEventListener(ae,Ke,!0),document.addEventListener(Qe,pr,!0),document.addEventListener(se,Je,!0),document.addEventListener(ve,Je,!0),Ye=!0)}function cr(y,P){if(P.pointerType!==(P.MSPOINTER_TYPE_MOUSE||"mouse")){P.touches=[];for(var X in fe)P.touches.push(fe[X]);P.changedTouches=[P],y(P)}}function ki(y,P){P.MSPOINTER_TYPE_TOUCH&&P.pointerType===P.MSPOINTER_TYPE_TOUCH&&Rt(P),cr(y,P)}function Tt(y){var P={},X,st;for(st in y)X=y[st],P[st]=X&&X.bind?X.bind(y):X;return y=P,P.type="dblclick",P.detail=2,P.isTrusted=!1,P._simulated=!0,P}var Ht=200;function re(y,P){y.addEventListener("dblclick",P);var X=0,st;function ft(Mt){if(Mt.detail!==1){st=Mt.detail;return}if(!(Mt.pointerType==="mouse"||Mt.sourceCapabilities&&!Mt.sourceCapabilities.firesTouchEvents)){var Dt=Nt(Mt);if(!(Dt.some(function(te){return te instanceof HTMLLabelElement&&te.attributes.for})&&!Dt.some(function(te){return te instanceof HTMLInputElement||te instanceof HTMLSelectElement}))){var Wt=Date.now();Wt-X<=Ht?(st++,st===2&&P(Tt(Mt))):st=1,X=Wt}}}return y.addEventListener("click",ft),{dblclick:P,simDblclick:ft}}function Qt(y,P){y.removeEventListener("dblclick",P.dblclick),y.removeEventListener("click",P.simDblclick)}var he=Vn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ee=Vn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ae=Ee==="webkitTransition"||Ee==="OTransition"?Ee+"End":"transitionend";function ti(y){return typeof y=="string"?document.getElementById(y):y}function Ue(y,P){var X=y.style[P]||y.currentStyle&&y.currentStyle[P];if((!X||X==="auto")&&document.defaultView){var st=document.defaultView.getComputedStyle(y,null);X=st?st[P]:null}return X==="auto"?null:X}function we(y,P,X){var st=document.createElement(y);return st.className=P||"",X&&X.appendChild(st),st}function pe(y){var P=y.parentNode;P&&P.removeChild(y)}function yi(y){for(;y.firstChild;)y.removeChild(y.firstChild)}function ri(y){var P=y.parentNode;P&&P.lastChild!==y&&P.appendChild(y)}function li(y){var P=y.parentNode;P&&P.firstChild!==y&&P.insertBefore(y,P.firstChild)}function wi(y,P){if(y.classList!==void 0)return y.classList.contains(P);var X=Xr(y);return X.length>0&&new RegExp("(^|\\s)"+P+"(\\s|$)").test(X)}function me(y,P){if(y.classList!==void 0)for(var X=p(P),st=0,ft=X.length;st<ft;st++)y.classList.add(X[st]);else if(!wi(y,P)){var Mt=Xr(y);br(y,(Mt?Mt+" ":"")+P)}}function ui(y,P){y.classList!==void 0?y.classList.remove(P):br(y,d((" "+Xr(y)+" ").replace(" "+P+" "," ")))}function br(y,P){y.className.baseVal===void 0?y.className=P:y.className.baseVal=P}function Xr(y){return y.correspondingElement&&(y=y.correspondingElement),y.className.baseVal===void 0?y.className:y.className.baseVal}function Se(y,P){"opacity"in y.style?y.style.opacity=P:"filter"in y.style&&Ln(y,P)}function Ln(y,P){var X=!1,st="DXImageTransform.Microsoft.Alpha";try{X=y.filters.item(st)}catch{if(P===1)return}P=Math.round(P*100),X?(X.Enabled=P!==100,X.Opacity=P):y.style.filter+=" progid:"+st+"(opacity="+P+")"}function Vn(y){for(var P=document.documentElement.style,X=0;X<y.length;X++)if(y[X]in P)return y[X];return!1}function ni(y,P,X){var st=P||new k(0,0);y.style[he]=(jt.ie3d?"translate("+st.x+"px,"+st.y+"px)":"translate3d("+st.x+"px,"+st.y+"px,0)")+(X?" scale("+X+")":"")}function ze(y,P){y._leaflet_pos=P,jt.any3d?ni(y,P):(y.style.left=P.x+"px",y.style.top=P.y+"px")}function Tr(y){return y._leaflet_pos||new k(0,0)}var Rr,bn,oe;if("onselectstart"in document)Rr=function(){je(window,"selectstart",Rt)},bn=function(){ci(window,"selectstart",Rt)};else{var Ar=Vn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Rr=function(){if(Ar){var y=document.documentElement.style;oe=y[Ar],y[Ar]="none"}},bn=function(){Ar&&(document.documentElement.style[Ar]=oe,oe=void 0)}}function gi(){je(window,"dragstart",Rt)}function _r(){ci(window,"dragstart",Rt)}var on,yr;function hi(y){for(;y.tabIndex===-1;)y=y.parentNode;y.style&&(fi(),on=y,yr=y.style.outline,y.style.outline="none",je(window,"keydown",fi))}function fi(){on&&(on.style.outline=yr,on=void 0,yr=void 0,ci(window,"keydown",fi))}function Ti(y){do y=y.parentNode;while((!y.offsetWidth||!y.offsetHeight)&&y!==document.body);return y}function $r(y){var P=y.getBoundingClientRect();return{x:P.width/y.offsetWidth||1,y:P.height/y.offsetHeight||1,boundingClientRect:P}}var us={__proto__:null,TRANSFORM:he,TRANSITION:Ee,TRANSITION_END:Ae,get:ti,getStyle:Ue,create:we,remove:pe,empty:yi,toFront:ri,toBack:li,hasClass:wi,addClass:me,removeClass:ui,setClass:br,getClass:Xr,setOpacity:Se,testProp:Vn,setTransform:ni,setPosition:ze,getPosition:Tr,get disableTextSelection(){return Rr},get enableTextSelection(){return bn},disableImageDrag:gi,enableImageDrag:_r,preventOutline:hi,restoreOutline:fi,getSizedParentNode:Ti,getScale:$r};function je(y,P,X,st){if(P&&typeof P=="object")for(var ft in P)j(y,ft,P[ft],X);else{P=p(P);for(var Mt=0,Dt=P.length;Mt<Dt;Mt++)j(y,P[Mt],X,st)}return this}var Yr="_leaflet_events";function ci(y,P,X,st){if(arguments.length===1)M(y),delete y[Yr];else if(P&&typeof P=="object")for(var ft in P)nt(y,ft,P[ft],X);else if(P=p(P),arguments.length===2)M(y,function(Wt){return S(P,Wt)!==-1});else for(var Mt=0,Dt=P.length;Mt<Dt;Mt++)nt(y,P[Mt],X,st);return this}function M(y,P){for(var X in y[Yr]){var st=X.split(/\d/)[0];(!P||P(st))&&nt(y,st,null,null,X)}}var I={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function j(y,P,X,st){var ft=P+a(X)+(st?"_"+a(st):"");if(y[Yr]&&y[Yr][ft])return this;var Mt=function(Wt){return X.call(st||y,Wt||window.event)},Dt=Mt;!jt.touchNative&&jt.pointer&&P.indexOf("touch")===0?Mt=Ve(y,P,Mt):jt.touch&&P==="dblclick"?Mt=re(y,Mt):"addEventListener"in y?P==="touchstart"||P==="touchmove"||P==="wheel"||P==="mousewheel"?y.addEventListener(I[P]||P,Mt,jt.passiveEvents?{passive:!1}:!1):P==="mouseenter"||P==="mouseleave"?(Mt=function(Wt){Wt=Wt||window.event,ge(y,Wt)&&Dt(Wt)},y.addEventListener(I[P],Mt,!1)):y.addEventListener(P,Dt,!1):y.attachEvent("on"+P,Mt),y[Yr]=y[Yr]||{},y[Yr][ft]=Mt}function nt(y,P,X,st,ft){ft=ft||P+a(X)+(st?"_"+a(st):"");var Mt=y[Yr]&&y[Yr][ft];if(!Mt)return this;!jt.touchNative&&jt.pointer&&P.indexOf("touch")===0?ii(y,P,Mt):jt.touch&&P==="dblclick"?Qt(y,Mt):"removeEventListener"in y?y.removeEventListener(I[P]||P,Mt,!1):y.detachEvent("on"+P,Mt),y[Yr][ft]=null}function ht(y){return y.stopPropagation?y.stopPropagation():y.originalEvent?y.originalEvent._stopped=!0:y.cancelBubble=!0,this}function xt(y){return j(y,"wheel",ht),this}function Lt(y){return je(y,"mousedown touchstart dblclick contextmenu",ht),y._leaflet_disable_click=!0,this}function Rt(y){return y.preventDefault?y.preventDefault():y.returnValue=!1,this}function Pt(y){return Rt(y),ht(y),this}function Nt(y){if(y.composedPath)return y.composedPath();for(var P=[],X=y.target;X;)P.push(X),X=X.parentNode;return P}function Vt(y,P){if(!P)return new k(y.clientX,y.clientY);var X=$r(P),st=X.boundingClientRect;return new k((y.clientX-st.left)/X.x-P.clientLeft,(y.clientY-st.top)/X.y-P.clientTop)}var ne=jt.linux&&jt.chrome?window.devicePixelRatio:jt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zt(y){return jt.edge?y.wheelDeltaY/2:y.deltaY&&y.deltaMode===0?-y.deltaY/ne:y.deltaY&&y.deltaMode===1?-y.deltaY*20:y.deltaY&&y.deltaMode===2?-y.deltaY*60:y.deltaX||y.deltaZ?0:y.wheelDelta?(y.wheelDeltaY||y.wheelDelta)/2:y.detail&&Math.abs(y.detail)<32765?-y.detail*20:y.detail?y.detail/-32765*60:0}function ge(y,P){var X=P.relatedTarget;if(!X)return!0;try{for(;X&&X!==y;)X=X.parentNode}catch{return!1}return X!==y}var Ce={__proto__:null,on:je,off:ci,stopPropagation:ht,disableScrollPropagation:xt,disableClickPropagation:Lt,preventDefault:Rt,stop:Pt,getPropagationPath:Nt,getMousePosition:Vt,getWheelDelta:Zt,isExternalTarget:ge,addListener:je,removeListener:ci},Ne=C.extend({run:function(y,P,X,st){this.stop(),this._el=y,this._inProgress=!0,this._duration=X||.25,this._easeOutPower=1/Math.max(st||.5,.2),this._startPos=Tr(y),this._offset=P.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=tt(this._animate,this),this._step()},_step:function(y){var P=+new Date-this._startTime,X=this._duration*1e3;P<X?this._runFrame(this._easeOut(P/X),y):(this._runFrame(1),this._complete())},_runFrame:function(y,P){var X=this._startPos.add(this._offset.multiplyBy(y));P&&X._round(),ze(this._el,X),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(y){return 1-Math.pow(1-y,this._easeOutPower)}}),be=C.extend({options:{crs:_t,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(y,P){P=g(this,P),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(y),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),P.maxBounds&&this.setMaxBounds(P.maxBounds),P.zoom!==void 0&&(this._zoom=this._limitZoom(P.zoom)),P.center&&P.zoom!==void 0&&this.setView($(P.center),P.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ee&&jt.any3d&&!jt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),je(this._proxy,Ae,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(y,P,X){if(P=P===void 0?this._zoom:this._limitZoom(P),y=this._limitCenter($(y),P,this.options.maxBounds),X=X||{},this._stop(),this._loaded&&!X.reset&&X!==!0){X.animate!==void 0&&(X.zoom=e({animate:X.animate},X.zoom),X.pan=e({animate:X.animate,duration:X.duration},X.pan));var st=this._zoom!==P?this._tryAnimatedZoom&&this._tryAnimatedZoom(y,P,X.zoom):this._tryAnimatedPan(y,X.pan);if(st)return clearTimeout(this._sizeTimer),this}return this._resetView(y,P,X.pan&&X.pan.noMoveStart),this},setZoom:function(y,P){return this._loaded?this.setView(this.getCenter(),y,{zoom:P}):(this._zoom=y,this)},zoomIn:function(y,P){return y=y||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+y,P)},zoomOut:function(y,P){return y=y||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-y,P)},setZoomAround:function(y,P,X){var st=this.getZoomScale(P),ft=this.getSize().divideBy(2),Mt=y instanceof k?y:this.latLngToContainerPoint(y),Dt=Mt.subtract(ft).multiplyBy(1-1/st),Wt=this.containerPointToLatLng(ft.add(Dt));return this.setView(Wt,P,{zoom:X})},_getBoundsCenterZoom:function(y,P){P=P||{},y=y.getBounds?y.getBounds():ot(y);var X=R(P.paddingTopLeft||P.padding||[0,0]),st=R(P.paddingBottomRight||P.padding||[0,0]),ft=this.getBoundsZoom(y,!1,X.add(st));if(ft=typeof P.maxZoom=="number"?Math.min(P.maxZoom,ft):ft,ft===1/0)return{center:y.getCenter(),zoom:ft};var Mt=st.subtract(X).divideBy(2),Dt=this.project(y.getSouthWest(),ft),Wt=this.project(y.getNorthEast(),ft),te=this.unproject(Dt.add(Wt).divideBy(2).add(Mt),ft);return{center:te,zoom:ft}},fitBounds:function(y,P){if(y=ot(y),!y.isValid())throw new Error("Bounds are not valid.");var X=this._getBoundsCenterZoom(y,P);return this.setView(X.center,X.zoom,P)},fitWorld:function(y){return this.fitBounds([[-90,-180],[90,180]],y)},panTo:function(y,P){return this.setView(y,this._zoom,{pan:P})},panBy:function(y,P){if(y=R(y).round(),P=P||{},!y.x&&!y.y)return this.fire("moveend");if(P.animate!==!0&&!this.getSize().contains(y))return this._resetView(this.unproject(this.project(this.getCenter()).add(y)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ne,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),P.noMoveStart||this.fire("movestart"),P.animate!==!1){me(this._mapPane,"leaflet-pan-anim");var X=this._getMapPanePos().subtract(y).round();this._panAnim.run(this._mapPane,X,P.duration||.25,P.easeLinearity)}else this._rawPanBy(y),this.fire("move").fire("moveend");return this},flyTo:function(y,P,X){if(X=X||{},X.animate===!1||!jt.any3d)return this.setView(y,P,X);this._stop();var st=this.project(this.getCenter()),ft=this.project(y),Mt=this.getSize(),Dt=this._zoom;y=$(y),P=P===void 0?Dt:P;var Wt=Math.max(Mt.x,Mt.y),te=Wt*this.getZoomScale(Dt,P),de=ft.distanceTo(st)||1,De=1.42,Xe=De*De;function _i(fr){var sa=fr?-1:1,Kn=fr?te:Wt,Nr=te*te-Wt*Wt+sa*Xe*Xe*de*de,su=2*Kn*Xe*de,Ao=Nr/su,u=Math.sqrt(Ao*Ao+1)-Ao,f=u<1e-9?-18:Math.log(u);return f}function Rn(fr){return(Math.exp(fr)-Math.exp(-fr))/2}function to(fr){return(Math.exp(fr)+Math.exp(-fr))/2}function eo(fr){return Rn(fr)/to(fr)}var Zn=_i(0);function Io(fr){return Wt*(to(Zn)/to(Zn+De*fr))}function Uo(fr){return Wt*(to(Zn)*eo(Zn+De*fr)-Rn(Zn))/Xe}function go(fr){return 1-Math.pow(1-fr,1.5)}var ei=Date.now(),Gs=(_i(1)-Zn)/De,Vo=X.duration?1e3*X.duration:1e3*Gs*.8;function io(){var fr=(Date.now()-ei)/Vo,sa=go(fr)*Gs;fr<=1?(this._flyToFrame=tt(io,this),this._move(this.unproject(st.add(ft.subtract(st).multiplyBy(Uo(sa)/de)),Dt),this.getScaleZoom(Wt/Io(sa),Dt),{flyTo:!0})):this._move(y,P)._moveEnd(!0)}return this._moveStart(!0,X.noMoveStart),io.call(this),this},flyToBounds:function(y,P){var X=this._getBoundsCenterZoom(y,P);return this.flyTo(X.center,X.zoom,P)},setMaxBounds:function(y){return y=ot(y),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),y.isValid()?(this.options.maxBounds=y,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(y){var P=this.options.minZoom;return this.options.minZoom=y,this._loaded&&P!==y&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(y):this},setMaxZoom:function(y){var P=this.options.maxZoom;return this.options.maxZoom=y,this._loaded&&P!==y&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(y):this},panInsideBounds:function(y,P){this._enforcingBounds=!0;var X=this.getCenter(),st=this._limitCenter(X,this._zoom,ot(y));return X.equals(st)||this.panTo(st,P),this._enforcingBounds=!1,this},panInside:function(y,P){P=P||{};var X=R(P.paddingTopLeft||P.padding||[0,0]),st=R(P.paddingBottomRight||P.padding||[0,0]),ft=this.project(this.getCenter()),Mt=this.project(y),Dt=this.getPixelBounds(),Wt=H([Dt.min.add(X),Dt.max.subtract(st)]),te=Wt.getSize();if(!Wt.contains(Mt)){this._enforcingBounds=!0;var de=Mt.subtract(Wt.getCenter()),De=Wt.extend(Mt).getSize().subtract(te);ft.x+=de.x<0?-De.x:De.x,ft.y+=de.y<0?-De.y:De.y,this.panTo(this.unproject(ft),P),this._enforcingBounds=!1}return this},invalidateSize:function(y){if(!this._loaded)return this;y=e({animate:!1,pan:!0},y===!0?{animate:!0}:y);var P=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var X=this.getSize(),st=P.divideBy(2).round(),ft=X.divideBy(2).round(),Mt=st.subtract(ft);return!Mt.x&&!Mt.y?this:(y.animate&&y.pan?this.panBy(Mt):(y.pan&&this._rawPanBy(Mt),this.fire("move"),y.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:P,newSize:X}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(y){if(y=this._locateOptions=e({timeout:1e4,watch:!1},y),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var P=r(this._handleGeolocationResponse,this),X=r(this._handleGeolocationError,this);return y.watch?this._locationWatchId=navigator.geolocation.watchPosition(P,X,y):navigator.geolocation.getCurrentPosition(P,X,y),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(y){if(this._container._leaflet_id){var P=y.code,X=y.message||(P===1?"permission denied":P===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:P,message:"Geolocation error: "+X+"."})}},_handleGeolocationResponse:function(y){if(this._container._leaflet_id){var P=y.coords.latitude,X=y.coords.longitude,st=new dt(P,X),ft=st.toBounds(y.coords.accuracy*2),Mt=this._locateOptions;if(Mt.setView){var Dt=this.getBoundsZoom(ft);this.setView(st,Mt.maxZoom?Math.min(Dt,Mt.maxZoom):Dt)}var Wt={latlng:st,bounds:ft,timestamp:y.timestamp};for(var te in y.coords)typeof y.coords[te]=="number"&&(Wt[te]=y.coords[te]);this.fire("locationfound",Wt)}},addHandler:function(y,P){if(!P)return this;var X=this[y]=new P(this);return this._handlers.push(X),this.options[y]&&X.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var y;for(y in this._layers)this._layers[y].remove();for(y in this._panes)pe(this._panes[y]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(y,P){var X="leaflet-pane"+(y?" leaflet-"+y.replace("Pane","")+"-pane":""),st=we("div",X,P||this._mapPane);return y&&(this._panes[y]=st),st},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var y=this.getPixelBounds(),P=this.unproject(y.getBottomLeft()),X=this.unproject(y.getTopRight());return new it(P,X)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(y,P,X){y=ot(y),X=R(X||[0,0]);var st=this.getZoom()||0,ft=this.getMinZoom(),Mt=this.getMaxZoom(),Dt=y.getNorthWest(),Wt=y.getSouthEast(),te=this.getSize().subtract(X),de=H(this.project(Wt,st),this.project(Dt,st)).getSize(),De=jt.any3d?this.options.zoomSnap:1,Xe=te.x/de.x,_i=te.y/de.y,Rn=P?Math.max(Xe,_i):Math.min(Xe,_i);return st=this.getScaleZoom(Rn,st),De&&(st=Math.round(st/(De/100))*(De/100),st=P?Math.ceil(st/De)*De:Math.floor(st/De)*De),Math.max(ft,Math.min(Mt,st))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(y,P){var X=this._getTopLeftPoint(y,P);return new F(X,X.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(y){return this.options.crs.getProjectedBounds(y===void 0?this.getZoom():y)},getPane:function(y){return typeof y=="string"?this._panes[y]:y},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(y,P){var X=this.options.crs;return P=P===void 0?this._zoom:P,X.scale(y)/X.scale(P)},getScaleZoom:function(y,P){var X=this.options.crs;P=P===void 0?this._zoom:P;var st=X.zoom(y*X.scale(P));return isNaN(st)?1/0:st},project:function(y,P){return P=P===void 0?this._zoom:P,this.options.crs.latLngToPoint($(y),P)},unproject:function(y,P){return P=P===void 0?this._zoom:P,this.options.crs.pointToLatLng(R(y),P)},layerPointToLatLng:function(y){var P=R(y).add(this.getPixelOrigin());return this.unproject(P)},latLngToLayerPoint:function(y){var P=this.project($(y))._round();return P._subtract(this.getPixelOrigin())},wrapLatLng:function(y){return this.options.crs.wrapLatLng($(y))},wrapLatLngBounds:function(y){return this.options.crs.wrapLatLngBounds(ot(y))},distance:function(y,P){return this.options.crs.distance($(y),$(P))},containerPointToLayerPoint:function(y){return R(y).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(y){return R(y).add(this._getMapPanePos())},containerPointToLatLng:function(y){var P=this.containerPointToLayerPoint(R(y));return this.layerPointToLatLng(P)},latLngToContainerPoint:function(y){return this.layerPointToContainerPoint(this.latLngToLayerPoint($(y)))},mouseEventToContainerPoint:function(y){return Vt(y,this._container)},mouseEventToLayerPoint:function(y){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(y))},mouseEventToLatLng:function(y){return this.layerPointToLatLng(this.mouseEventToLayerPoint(y))},_initContainer:function(y){var P=this._container=ti(y);if(P){if(P._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");je(P,"scroll",this._onScroll,this),this._containerId=a(P)},_initLayout:function(){var y=this._container;this._fadeAnimated=this.options.fadeAnimation&&jt.any3d,me(y,"leaflet-container"+(jt.touch?" leaflet-touch":"")+(jt.retina?" leaflet-retina":"")+(jt.ielt9?" leaflet-oldie":"")+(jt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var P=Ue(y,"position");P!=="absolute"&&P!=="relative"&&P!=="fixed"&&P!=="sticky"&&(y.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var y=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ze(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(y.markerPane,"leaflet-zoom-hide"),me(y.shadowPane,"leaflet-zoom-hide"))},_resetView:function(y,P,X){ze(this._mapPane,new k(0,0));var st=!this._loaded;this._loaded=!0,P=this._limitZoom(P),this.fire("viewprereset");var ft=this._zoom!==P;this._moveStart(ft,X)._move(y,P)._moveEnd(ft),this.fire("viewreset"),st&&this.fire("load")},_moveStart:function(y,P){return y&&this.fire("zoomstart"),P||this.fire("movestart"),this},_move:function(y,P,X,st){P===void 0&&(P=this._zoom);var ft=this._zoom!==P;return this._zoom=P,this._lastCenter=y,this._pixelOrigin=this._getNewPixelOrigin(y),st?X&&X.pinch&&this.fire("zoom",X):((ft||X&&X.pinch)&&this.fire("zoom",X),this.fire("move",X)),this},_moveEnd:function(y){return y&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(y){ze(this._mapPane,this._getMapPanePos().subtract(y))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(y){this._targets={},this._targets[a(this._container)]=this;var P=y?ci:je;P(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&P(window,"resize",this._onResize,this),jt.any3d&&this.options.transform3DLimit&&(y?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=tt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var y=this._getMapPanePos();Math.max(Math.abs(y.x),Math.abs(y.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(y,P){for(var X=[],st,ft=P==="mouseout"||P==="mouseover",Mt=y.target||y.srcElement,Dt=!1;Mt;){if(st=this._targets[a(Mt)],st&&(P==="click"||P==="preclick")&&this._draggableMoved(st)){Dt=!0;break}if(st&&st.listens(P,!0)&&(ft&&!ge(Mt,y)||(X.push(st),ft))||Mt===this._container)break;Mt=Mt.parentNode}return!X.length&&!Dt&&!ft&&this.listens(P,!0)&&(X=[this]),X},_isClickDisabled:function(y){for(;y&&y!==this._container;){if(y._leaflet_disable_click)return!0;y=y.parentNode}},_handleDOMEvent:function(y){var P=y.target||y.srcElement;if(!(!this._loaded||P._leaflet_disable_events||y.type==="click"&&this._isClickDisabled(P))){var X=y.type;X==="mousedown"&&hi(P),this._fireDOMEvent(y,X)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(y,P,X){if(y.type==="click"){var st=e({},y);st.type="preclick",this._fireDOMEvent(st,st.type,X)}var ft=this._findEventTargets(y,P);if(X){for(var Mt=[],Dt=0;Dt<X.length;Dt++)X[Dt].listens(P,!0)&&Mt.push(X[Dt]);ft=Mt.concat(ft)}if(ft.length){P==="contextmenu"&&Rt(y);var Wt=ft[0],te={originalEvent:y};if(y.type!=="keypress"&&y.type!=="keydown"&&y.type!=="keyup"){var de=Wt.getLatLng&&(!Wt._radius||Wt._radius<=10);te.containerPoint=de?this.latLngToContainerPoint(Wt.getLatLng()):this.mouseEventToContainerPoint(y),te.layerPoint=this.containerPointToLayerPoint(te.containerPoint),te.latlng=de?Wt.getLatLng():this.layerPointToLatLng(te.layerPoint)}for(Dt=0;Dt<ft.length;Dt++)if(ft[Dt].fire(P,te,!0),te.originalEvent._stopped||ft[Dt].options.bubblingMouseEvents===!1&&S(this._mouseEvents,P)!==-1)return}},_draggableMoved:function(y){return y=y.dragging&&y.dragging.enabled()?y:this,y.dragging&&y.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var y=0,P=this._handlers.length;y<P;y++)this._handlers[y].disable()},whenReady:function(y,P){return this._loaded?y.call(P||this,{target:this}):this.on("load",y,P),this},_getMapPanePos:function(){return Tr(this._mapPane)||new k(0,0)},_moved:function(){var y=this._getMapPanePos();return y&&!y.equals([0,0])},_getTopLeftPoint:function(y,P){var X=y&&P!==void 0?this._getNewPixelOrigin(y,P):this.getPixelOrigin();return X.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(y,P){var X=this.getSize()._divideBy(2);return this.project(y,P)._subtract(X)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(y,P,X){var st=this._getNewPixelOrigin(X,P);return this.project(y,P)._subtract(st)},_latLngBoundsToNewLayerBounds:function(y,P,X){var st=this._getNewPixelOrigin(X,P);return H([this.project(y.getSouthWest(),P)._subtract(st),this.project(y.getNorthWest(),P)._subtract(st),this.project(y.getSouthEast(),P)._subtract(st),this.project(y.getNorthEast(),P)._subtract(st)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(y){return this.latLngToLayerPoint(y).subtract(this._getCenterLayerPoint())},_limitCenter:function(y,P,X){if(!X)return y;var st=this.project(y,P),ft=this.getSize().divideBy(2),Mt=new F(st.subtract(ft),st.add(ft)),Dt=this._getBoundsOffset(Mt,X,P);return Math.abs(Dt.x)<=1&&Math.abs(Dt.y)<=1?y:this.unproject(st.add(Dt),P)},_limitOffset:function(y,P){if(!P)return y;var X=this.getPixelBounds(),st=new F(X.min.add(y),X.max.add(y));return y.add(this._getBoundsOffset(st,P))},_getBoundsOffset:function(y,P,X){var st=H(this.project(P.getNorthEast(),X),this.project(P.getSouthWest(),X)),ft=st.min.subtract(y.min),Mt=st.max.subtract(y.max),Dt=this._rebound(ft.x,-Mt.x),Wt=this._rebound(ft.y,-Mt.y);return new k(Dt,Wt)},_rebound:function(y,P){return y+P>0?Math.round(y-P)/2:Math.max(0,Math.ceil(y))-Math.max(0,Math.floor(P))},_limitZoom:function(y){var P=this.getMinZoom(),X=this.getMaxZoom(),st=jt.any3d?this.options.zoomSnap:1;return st&&(y=Math.round(y/st)*st),Math.max(P,Math.min(X,y))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ui(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(y,P){var X=this._getCenterOffset(y)._trunc();return(P&&P.animate)!==!0&&!this.getSize().contains(X)?!1:(this.panBy(X,P),!0)},_createAnimProxy:function(){var y=this._proxy=we("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(y),this.on("zoomanim",function(P){var X=he,st=this._proxy.style[X];ni(this._proxy,this.project(P.center,P.zoom),this.getZoomScale(P.zoom,1)),st===this._proxy.style[X]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var y=this.getCenter(),P=this.getZoom();ni(this._proxy,this.project(y,P),this.getZoomScale(P,1))},_catchTransitionEnd:function(y){this._animatingZoom&&y.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(y,P,X){if(this._animatingZoom)return!0;if(X=X||{},!this._zoomAnimated||X.animate===!1||this._nothingToAnimate()||Math.abs(P-this._zoom)>this.options.zoomAnimationThreshold)return!1;var st=this.getZoomScale(P),ft=this._getCenterOffset(y)._divideBy(1-1/st);return X.animate!==!0&&!this.getSize().contains(ft)?!1:(tt(function(){this._moveStart(!0,!1)._animateZoom(y,P,!0)},this),!0)},_animateZoom:function(y,P,X,st){this._mapPane&&(X&&(this._animatingZoom=!0,this._animateToCenter=y,this._animateToZoom=P,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:y,zoom:P,noUpdate:st}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ui(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function vr(y,P){return new be(y,P)}var mr=N.extend({options:{position:"topright"},initialize:function(y){g(this,y)},getPosition:function(){return this.options.position},setPosition:function(y){var P=this._map;return P&&P.removeControl(this),this.options.position=y,P&&P.addControl(this),this},getContainer:function(){return this._container},addTo:function(y){this.remove(),this._map=y;var P=this._container=this.onAdd(y),X=this.getPosition(),st=y._controlCorners[X];return me(P,"leaflet-control"),X.indexOf("bottom")!==-1?st.insertBefore(P,st.firstChild):st.appendChild(P),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(y){this._map&&y&&y.screenX>0&&y.screenY>0&&this._map.getContainer().focus()}}),Ei=function(y){return new mr(y)};be.include({addControl:function(y){return y.addTo(this),this},removeControl:function(y){return y.remove(),this},_initControlPos:function(){var y=this._controlCorners={},P="leaflet-",X=this._controlContainer=we("div",P+"control-container",this._container);function st(ft,Mt){var Dt=P+ft+" "+P+Mt;y[ft+Mt]=we("div",Dt,X)}st("top","left"),st("top","right"),st("bottom","left"),st("bottom","right")},_clearControlPos:function(){for(var y in this._controlCorners)pe(this._controlCorners[y]);pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=mr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(y,P,X,st){return X<st?-1:st<X?1:0}},initialize:function(y,P,X){g(this,X),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var st in y)this._addLayer(y[st],st);for(st in P)this._addLayer(P[st],st,!0)},onAdd:function(y){this._initLayout(),this._update(),this._map=y,y.on("zoomend",this._checkDisabledLayers,this);for(var P=0;P<this._layers.length;P++)this._layers[P].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(y){return mr.prototype.addTo.call(this,y),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(y,P){return this._addLayer(y,P),this._map?this._update():this},addOverlay:function(y,P){return this._addLayer(y,P,!0),this._map?this._update():this},removeLayer:function(y){y.off("add remove",this._onLayerChange,this);var P=this._getLayer(a(y));return P&&this._layers.splice(this._layers.indexOf(P),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var y=this._map.getSize().y-(this._container.offsetTop+50);return y<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=y+"px"):ui(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ui(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var y="leaflet-control-layers",P=this._container=we("div",y),X=this.options.collapsed;P.setAttribute("aria-haspopup",!0),Lt(P),xt(P);var st=this._section=we("section",y+"-list");X&&(this._map.on("click",this.collapse,this),je(P,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ft=this._layersLink=we("a",y+"-toggle",P);ft.href="#",ft.title="Layers",ft.setAttribute("role","button"),je(ft,{keydown:function(Mt){Mt.keyCode===13&&this._expandSafely()},click:function(Mt){Rt(Mt),this._expandSafely()}},this),X||this.expand(),this._baseLayersList=we("div",y+"-base",st),this._separator=we("div",y+"-separator",st),this._overlaysList=we("div",y+"-overlays",st),P.appendChild(st)},_getLayer:function(y){for(var P=0;P<this._layers.length;P++)if(this._layers[P]&&a(this._layers[P].layer)===y)return this._layers[P]},_addLayer:function(y,P,X){this._map&&y.on("add remove",this._onLayerChange,this),this._layers.push({layer:y,name:P,overlay:X}),this.options.sortLayers&&this._layers.sort(r(function(st,ft){return this.options.sortFunction(st.layer,ft.layer,st.name,ft.name)},this)),this.options.autoZIndex&&y.setZIndex&&(this._lastZIndex++,y.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;yi(this._baseLayersList),yi(this._overlaysList),this._layerControlInputs=[];var y,P,X,st,ft=0;for(X=0;X<this._layers.length;X++)st=this._layers[X],this._addItem(st),P=P||st.overlay,y=y||!st.overlay,ft+=st.overlay?0:1;return this.options.hideSingleBase&&(y=y&&ft>1,this._baseLayersList.style.display=y?"":"none"),this._separator.style.display=P&&y?"":"none",this},_onLayerChange:function(y){this._handlingClick||this._update();var P=this._getLayer(a(y.target)),X=P.overlay?y.type==="add"?"overlayadd":"overlayremove":y.type==="add"?"baselayerchange":null;X&&this._map.fire(X,P)},_createRadioElement:function(y,P){var X='<input type="radio" class="leaflet-control-layers-selector" name="'+y+'"'+(P?' checked="checked"':"")+"/>",st=document.createElement("div");return st.innerHTML=X,st.firstChild},_addItem:function(y){var P=document.createElement("label"),X=this._map.hasLayer(y.layer),st;y.overlay?(st=document.createElement("input"),st.type="checkbox",st.className="leaflet-control-layers-selector",st.defaultChecked=X):st=this._createRadioElement("leaflet-base-layers_"+a(this),X),this._layerControlInputs.push(st),st.layerId=a(y.layer),je(st,"click",this._onInputClick,this);var ft=document.createElement("span");ft.innerHTML=" "+y.name;var Mt=document.createElement("span");P.appendChild(Mt),Mt.appendChild(st),Mt.appendChild(ft);var Dt=y.overlay?this._overlaysList:this._baseLayersList;return Dt.appendChild(P),this._checkDisabledLayers(),P},_onInputClick:function(){var y=this._layerControlInputs,P,X,st=[],ft=[];this._handlingClick=!0;for(var Mt=y.length-1;Mt>=0;Mt--)P=y[Mt],X=this._getLayer(P.layerId).layer,P.checked?st.push(X):P.checked||ft.push(X);for(Mt=0;Mt<ft.length;Mt++)this._map.hasLayer(ft[Mt])&&this._map.removeLayer(ft[Mt]);for(Mt=0;Mt<st.length;Mt++)this._map.hasLayer(st[Mt])||this._map.addLayer(st[Mt]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var y=this._layerControlInputs,P,X,st=this._map.getZoom(),ft=y.length-1;ft>=0;ft--)P=y[ft],X=this._getLayer(P.layerId).layer,P.disabled=X.options.minZoom!==void 0&&st<X.options.minZoom||X.options.maxZoom!==void 0&&st>X.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var y=this._section;je(y,"click",Rt),this.expand(),setTimeout(function(){ci(y,"click",Rt)})}}),qn=function(y,P,X){return new an(y,P,X)},Mr=mr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(y){var P="leaflet-control-zoom",X=we("div",P+" leaflet-bar"),st=this.options;return this._zoomInButton=this._createButton(st.zoomInText,st.zoomInTitle,P+"-in",X,this._zoomIn),this._zoomOutButton=this._createButton(st.zoomOutText,st.zoomOutTitle,P+"-out",X,this._zoomOut),this._updateDisabled(),y.on("zoomend zoomlevelschange",this._updateDisabled,this),X},onRemove:function(y){y.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(y){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(y.shiftKey?3:1))},_zoomOut:function(y){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(y.shiftKey?3:1))},_createButton:function(y,P,X,st,ft){var Mt=we("a",X,st);return Mt.innerHTML=y,Mt.href="#",Mt.title=P,Mt.setAttribute("role","button"),Mt.setAttribute("aria-label",P),Lt(Mt),je(Mt,"click",Pt),je(Mt,"click",ft,this),je(Mt,"click",this._refocusOnMap,this),Mt},_updateDisabled:function(){var y=this._map,P="leaflet-disabled";ui(this._zoomInButton,P),ui(this._zoomOutButton,P),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||y._zoom===y.getMinZoom())&&(me(this._zoomOutButton,P),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||y._zoom===y.getMaxZoom())&&(me(this._zoomInButton,P),this._zoomInButton.setAttribute("aria-disabled","true"))}});be.mergeOptions({zoomControl:!0}),be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Mr,this.addControl(this.zoomControl))});var ys=function(y){return new Mr(y)},Br=mr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(y){var P="leaflet-control-scale",X=we("div",P),st=this.options;return this._addScales(st,P+"-line",X),y.on(st.updateWhenIdle?"moveend":"move",this._update,this),y.whenReady(this._update,this),X},onRemove:function(y){y.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(y,P,X){y.metric&&(this._mScale=we("div",P,X)),y.imperial&&(this._iScale=we("div",P,X))},_update:function(){var y=this._map,P=y.getSize().y/2,X=y.distance(y.containerPointToLatLng([0,P]),y.containerPointToLatLng([this.options.maxWidth,P]));this._updateScales(X)},_updateScales:function(y){this.options.metric&&y&&this._updateMetric(y),this.options.imperial&&y&&this._updateImperial(y)},_updateMetric:function(y){var P=this._getRoundNum(y),X=P<1e3?P+" m":P/1e3+" km";this._updateScale(this._mScale,X,P/y)},_updateImperial:function(y){var P=y*3.2808399,X,st,ft;P>5280?(X=P/5280,st=this._getRoundNum(X),this._updateScale(this._iScale,st+" mi",st/X)):(ft=this._getRoundNum(P),this._updateScale(this._iScale,ft+" ft",ft/P))},_updateScale:function(y,P,X){y.style.width=Math.round(this.options.maxWidth*X)+"px",y.innerHTML=P},_getRoundNum:function(y){var P=Math.pow(10,(Math.floor(y)+"").length-1),X=y/P;return X=X>=10?10:X>=5?5:X>=3?3:X>=2?2:1,P*X}}),Wn=function(y){return new Br(y)},es='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ns=mr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(jt.inlineSvg?es+" ":"")+"Leaflet</a>"},initialize:function(y){g(this,y),this._attributions={}},onAdd:function(y){y.attributionControl=this,this._container=we("div","leaflet-control-attribution"),Lt(this._container);for(var P in y._layers)y._layers[P].getAttribution&&this.addAttribution(y._layers[P].getAttribution());return this._update(),y.on("layeradd",this._addAttribution,this),this._container},onRemove:function(y){y.off("layeradd",this._addAttribution,this)},_addAttribution:function(y){y.layer.getAttribution&&(this.addAttribution(y.layer.getAttribution()),y.layer.once("remove",function(){this.removeAttribution(y.layer.getAttribution())},this))},setPrefix:function(y){return this.options.prefix=y,this._update(),this},addAttribution:function(y){return y?(this._attributions[y]||(this._attributions[y]=0),this._attributions[y]++,this._update(),this):this},removeAttribution:function(y){return y?(this._attributions[y]&&(this._attributions[y]--,this._update()),this):this},_update:function(){if(this._map){var y=[];for(var P in this._attributions)this._attributions[P]&&y.push(P);var X=[];this.options.prefix&&X.push(this.options.prefix),y.length&&X.push(y.join(", ")),this._container.innerHTML=X.join(' <span aria-hidden="true">|</span> ')}}});be.mergeOptions({attributionControl:!0}),be.addInitHook(function(){this.options.attributionControl&&new Ns().addTo(this)});var Sr=function(y){return new Ns(y)};mr.Layers=an,mr.Zoom=Mr,mr.Scale=Br,mr.Attribution=Ns,Ei.layers=qn,Ei.zoom=ys,Ei.scale=Wn,Ei.attribution=Sr;var Pe=N.extend({initialize:function(y){this._map=y},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Pe.addTo=function(y,P){return y.addHandler(P,this),this};var va={Events:w},ho=jt.touch?"touchstart mousedown":"mousedown",Fr=C.extend({options:{clickTolerance:3},initialize:function(y,P,X,st){g(this,st),this._element=y,this._dragStartTarget=P||y,this._preventOutline=X},enable:function(){this._enabled||(je(this._dragStartTarget,ho,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fr._dragging===this&&this.finishDrag(!0),ci(this._dragStartTarget,ho,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(y){if(this._enabled&&(this._moved=!1,!wi(this._element,"leaflet-zoom-anim"))){if(y.touches&&y.touches.length!==1){Fr._dragging===this&&this.finishDrag();return}if(!(Fr._dragging||y.shiftKey||y.which!==1&&y.button!==1&&!y.touches)&&(Fr._dragging=this,this._preventOutline&&hi(this._element),gi(),Rr(),!this._moving)){this.fire("down");var P=y.touches?y.touches[0]:y,X=Ti(this._element);this._startPoint=new k(P.clientX,P.clientY),this._startPos=Tr(this._element),this._parentScale=$r(X);var st=y.type==="mousedown";je(document,st?"mousemove":"touchmove",this._onMove,this),je(document,st?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(y){if(this._enabled){if(y.touches&&y.touches.length>1){this._moved=!0;return}var P=y.touches&&y.touches.length===1?y.touches[0]:y,X=new k(P.clientX,P.clientY)._subtract(this._startPoint);!X.x&&!X.y||Math.abs(X.x)+Math.abs(X.y)<this.options.clickTolerance||(X.x/=this._parentScale.x,X.y/=this._parentScale.y,Rt(y),this._moved||(this.fire("dragstart"),this._moved=!0,me(document.body,"leaflet-dragging"),this._lastTarget=y.target||y.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(X),this._moving=!0,this._lastEvent=y,this._updatePosition())}},_updatePosition:function(){var y={originalEvent:this._lastEvent};this.fire("predrag",y),ze(this._element,this._newPos),this.fire("drag",y)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(y){ui(document.body,"leaflet-dragging"),this._lastTarget&&(ui(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ci(document,"mousemove touchmove",this._onMove,this),ci(document,"mouseup touchend touchcancel",this._onUp,this),_r(),bn(),this._moved&&this._moving&&this.fire("dragend",{noInertia:y,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Fr._dragging=!1}});function hs(y,P){if(!P||!y.length)return y.slice();var X=P*P;return y=Pi(y,X),y=sl(y,X),y}function Xs(y,P,X){return Math.sqrt(di(y,P,X,!0))}function ia(y,P,X){return di(y,P,X)}function sl(y,P){var X=y.length,st=typeof Uint8Array<"u"?Uint8Array:Array,ft=new st(X);ft[0]=ft[X-1]=1,ba(y,ft,P,0,X-1);var Mt,Dt=[];for(Mt=0;Mt<X;Mt++)ft[Mt]&&Dt.push(y[Mt]);return Dt}function ba(y,P,X,st,ft){var Mt=0,Dt,Wt,te;for(Wt=st+1;Wt<=ft-1;Wt++)te=di(y[Wt],y[st],y[ft],!0),te>Mt&&(Dt=Wt,Mt=te);Mt>X&&(P[Dt]=1,ba(y,P,X,st,Dt),ba(y,P,X,Dt,ft))}function Pi(y,P){for(var X=[y[0]],st=1,ft=0,Mt=y.length;st<Mt;st++)ru(y[st],y[ft])>P&&(X.push(y[st]),ft=st);return ft<Mt-1&&X.push(y[Mt-1]),X}var ks;function kr(y,P,X,st,ft){var Mt=st?ks:Zr(y,X),Dt=Zr(P,X),Wt,te,de;for(ks=Dt;;){if(!(Mt|Dt))return[y,P];if(Mt&Dt)return!1;Wt=Mt||Dt,te=co(y,P,Wt,X,ft),de=Zr(te,X),Wt===Mt?(y=te,Mt=de):(P=te,Dt=de)}}function co(y,P,X,st,ft){var Mt=P.x-y.x,Dt=P.y-y.y,Wt=st.min,te=st.max,de,De;return X&8?(de=y.x+Mt*(te.y-y.y)/Dt,De=te.y):X&4?(de=y.x+Mt*(Wt.y-y.y)/Dt,De=Wt.y):X&2?(de=te.x,De=y.y+Dt*(te.x-y.x)/Mt):X&1&&(de=Wt.x,De=y.y+Dt*(Wt.x-y.x)/Mt),new k(de,De,ft)}function Zr(y,P){var X=0;return y.x<P.min.x?X|=1:y.x>P.max.x&&(X|=2),y.y<P.min.y?X|=4:y.y>P.max.y&&(X|=8),X}function ru(y,P){var X=P.x-y.x,st=P.y-y.y;return X*X+st*st}function di(y,P,X,st){var ft=P.x,Mt=P.y,Dt=X.x-ft,Wt=X.y-Mt,te=Dt*Dt+Wt*Wt,de;return te>0&&(de=((y.x-ft)*Dt+(y.y-Mt)*Wt)/te,de>1?(ft=X.x,Mt=X.y):de>0&&(ft+=Dt*de,Mt+=Wt*de)),Dt=y.x-ft,Wt=y.y-Mt,st?Dt*Dt+Wt*Wt:new k(ft,Mt)}function _n(y){return!x(y[0])||typeof y[0][0]!="object"&&typeof y[0][0]<"u"}function wr(y){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_n(y)}function Ho(y,P){var X,st,ft,Mt,Dt,Wt,te,de;if(!y||y.length===0)throw new Error("latlngs not passed");_n(y)||(console.warn("latlngs are not flat! Only the first ring will be used"),y=y[0]);var De=[];for(var Xe in y)De.push(P.project($(y[Xe])));var _i=De.length;for(X=0,st=0;X<_i-1;X++)st+=De[X].distanceTo(De[X+1])/2;if(st===0)de=De[0];else for(X=0,Mt=0;X<_i-1;X++)if(Dt=De[X],Wt=De[X+1],ft=Dt.distanceTo(Wt),Mt+=ft,Mt>st){te=(Mt-st)/ft,de=[Wt.x-te*(Wt.x-Dt.x),Wt.y-te*(Wt.y-Dt.y)];break}return P.unproject(R(de))}var Tn={__proto__:null,simplify:hs,pointToSegmentDistance:Xs,closestPointOnSegment:ia,clipSegment:kr,_getEdgeIntersection:co,_getBitCode:Zr,_sqClosestPointOnSegment:di,isFlat:_n,_flat:wr,polylineCenter:Ho};function fo(y,P,X){var st,ft=[1,4,2,8],Mt,Dt,Wt,te,de,De,Xe,_i;for(Mt=0,De=y.length;Mt<De;Mt++)y[Mt]._code=Zr(y[Mt],P);for(Wt=0;Wt<4;Wt++){for(Xe=ft[Wt],st=[],Mt=0,De=y.length,Dt=De-1;Mt<De;Dt=Mt++)te=y[Mt],de=y[Dt],te._code&Xe?de._code&Xe||(_i=co(de,te,Xe,P,X),_i._code=Zr(_i,P),st.push(_i)):(de._code&Xe&&(_i=co(de,te,Xe,P,X),_i._code=Zr(_i,P),st.push(_i)),st.push(te));y=st}return y}function ol(y,P){var X,st,ft,Mt,Dt,Wt,te,de,De;if(!y||y.length===0)throw new Error("latlngs not passed");_n(y)||(console.warn("latlngs are not flat! Only the first ring will be used"),y=y[0]);var Xe=[];for(var _i in y)Xe.push(P.project($(y[_i])));var Rn=Xe.length;for(Wt=te=de=0,X=0,st=Rn-1;X<Rn;st=X++)ft=Xe[X],Mt=Xe[st],Dt=ft.y*Mt.x-Mt.y*ft.x,te+=(ft.x+Mt.x)*Dt,de+=(ft.y+Mt.y)*Dt,Wt+=Dt*3;return Wt===0?De=Xe[0]:De=[te/Wt,de/Wt],P.unproject(R(De))}var po={__proto__:null,clipPolygon:fo,polygonCenter:ol},Ci={project:function(y){return new k(y.lng,y.lat)},unproject:function(y){return new dt(y.y,y.x)},bounds:new F([-180,-90],[180,90])},Dn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new F([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(y){var P=Math.PI/180,X=this.R,st=y.lat*P,ft=this.R_MINOR/X,Mt=Math.sqrt(1-ft*ft),Dt=Mt*Math.sin(st),Wt=Math.tan(Math.PI/4-st/2)/Math.pow((1-Dt)/(1+Dt),Mt/2);return st=-X*Math.log(Math.max(Wt,1e-10)),new k(y.lng*P*X,st)},unproject:function(y){for(var P=180/Math.PI,X=this.R,st=this.R_MINOR/X,ft=Math.sqrt(1-st*st),Mt=Math.exp(-y.y/X),Dt=Math.PI/2-2*Math.atan(Mt),Wt=0,te=.1,de;Wt<15&&Math.abs(te)>1e-7;Wt++)de=ft*Math.sin(Dt),de=Math.pow((1-de)/(1+de),ft/2),te=Math.PI/2-2*Math.atan(Mt*de)-Dt,Dt+=te;return new dt(Dt*P,y.x*P/X)}},Go={__proto__:null,LonLat:Ci,Mercator:Dn,SphericalMercator:rt},Ls=e({},W,{code:"EPSG:3395",projection:Dn,transformation:function(){var y=.5/(Math.PI*Dn.R);return wt(y,.5,-y,.5)}()}),Bn=e({},W,{code:"EPSG:4326",projection:Ci,transformation:wt(1/180,1,-1/180,.5)}),mn=e({},ct,{projection:Ci,transformation:wt(1,0,-1,0),scale:function(y){return Math.pow(2,y)},zoom:function(y){return Math.log(y)/Math.LN2},distance:function(y,P){var X=P.lng-y.lng,st=P.lat-y.lat;return Math.sqrt(X*X+st*st)},infinite:!0});ct.Earth=W,ct.EPSG3395=Ls,ct.EPSG3857=_t,ct.EPSG900913=Ct,ct.EPSG4326=Bn,ct.Simple=mn;var Ts=C.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(y){return y.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(y){return y&&y.removeLayer(this),this},getPane:function(y){return this._map.getPane(y?this.options[y]||y:this.options.pane)},addInteractiveTarget:function(y){return this._map._targets[a(y)]=this,this},removeInteractiveTarget:function(y){return delete this._map._targets[a(y)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(y){var P=y.target;if(P.hasLayer(this)){if(this._map=P,this._zoomAnimated=P._zoomAnimated,this.getEvents){var X=this.getEvents();P.on(X,this),this.once("remove",function(){P.off(X,this)},this)}this.onAdd(P),this.fire("add"),P.fire("layeradd",{layer:this})}}});be.include({addLayer:function(y){if(!y._layerAdd)throw new Error("The provided object is not a Layer.");var P=a(y);return this._layers[P]?this:(this._layers[P]=y,y._mapToAdd=this,y.beforeAdd&&y.beforeAdd(this),this.whenReady(y._layerAdd,y),this)},removeLayer:function(y){var P=a(y);return this._layers[P]?(this._loaded&&y.onRemove(this),delete this._layers[P],this._loaded&&(this.fire("layerremove",{layer:y}),y.fire("remove")),y._map=y._mapToAdd=null,this):this},hasLayer:function(y){return a(y)in this._layers},eachLayer:function(y,P){for(var X in this._layers)y.call(P,this._layers[X]);return this},_addLayers:function(y){y=y?x(y)?y:[y]:[];for(var P=0,X=y.length;P<X;P++)this.addLayer(y[P])},_addZoomLimit:function(y){(!isNaN(y.options.maxZoom)||!isNaN(y.options.minZoom))&&(this._zoomBoundLayers[a(y)]=y,this._updateZoomLevels())},_removeZoomLimit:function(y){var P=a(y);this._zoomBoundLayers[P]&&(delete this._zoomBoundLayers[P],this._updateZoomLevels())},_updateZoomLevels:function(){var y=1/0,P=-1/0,X=this._getZoomSpan();for(var st in this._zoomBoundLayers){var ft=this._zoomBoundLayers[st].options;y=ft.minZoom===void 0?y:Math.min(y,ft.minZoom),P=ft.maxZoom===void 0?P:Math.max(P,ft.maxZoom)}this._layersMaxZoom=P===-1/0?void 0:P,this._layersMinZoom=y===1/0?void 0:y,X!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ko=Ts.extend({initialize:function(y,P){g(this,P),this._layers={};var X,st;if(y)for(X=0,st=y.length;X<st;X++)this.addLayer(y[X])},addLayer:function(y){var P=this.getLayerId(y);return this._layers[P]=y,this._map&&this._map.addLayer(y),this},removeLayer:function(y){var P=y in this._layers?y:this.getLayerId(y);return this._map&&this._layers[P]&&this._map.removeLayer(this._layers[P]),delete this._layers[P],this},hasLayer:function(y){var P=typeof y=="number"?y:this.getLayerId(y);return P in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(y){var P=Array.prototype.slice.call(arguments,1),X,st;for(X in this._layers)st=this._layers[X],st[y]&&st[y].apply(st,P);return this},onAdd:function(y){this.eachLayer(y.addLayer,y)},onRemove:function(y){this.eachLayer(y.removeLayer,y)},eachLayer:function(y,P){for(var X in this._layers)y.call(P,this._layers[X]);return this},getLayer:function(y){return this._layers[y]},getLayers:function(){var y=[];return this.eachLayer(y.push,y),y},setZIndex:function(y){return this.invoke("setZIndex",y)},getLayerId:function(y){return a(y)}}),$s=function(y,P){return new ko(y,P)},Kr=ko.extend({addLayer:function(y){return this.hasLayer(y)?this:(y.addEventParent(this),ko.prototype.addLayer.call(this,y),this.fire("layeradd",{layer:y}))},removeLayer:function(y){return this.hasLayer(y)?(y in this._layers&&(y=this._layers[y]),y.removeEventParent(this),ko.prototype.removeLayer.call(this,y),this.fire("layerremove",{layer:y})):this},setStyle:function(y){return this.invoke("setStyle",y)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var y=new it;for(var P in this._layers){var X=this._layers[P];y.extend(X.getBounds?X.getBounds():X.getLatLng())}return y}}),mo=function(y,P){return new Kr(y,P)},ln=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(y){g(this,y)},createIcon:function(y){return this._createIcon("icon",y)},createShadow:function(y){return this._createIcon("shadow",y)},_createIcon:function(y,P){var X=this._getIconUrl(y);if(!X){if(y==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var st=this._createImg(X,P&&P.tagName==="IMG"?P:null);return this._setIconStyles(st,y),(this.options.crossOrigin||this.options.crossOrigin==="")&&(st.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),st},_setIconStyles:function(y,P){var X=this.options,st=X[P+"Size"];typeof st=="number"&&(st=[st,st]);var ft=R(st),Mt=R(P==="shadow"&&X.shadowAnchor||X.iconAnchor||ft&&ft.divideBy(2,!0));y.className="leaflet-marker-"+P+" "+(X.className||""),Mt&&(y.style.marginLeft=-Mt.x+"px",y.style.marginTop=-Mt.y+"px"),ft&&(y.style.width=ft.x+"px",y.style.height=ft.y+"px")},_createImg:function(y,P){return P=P||document.createElement("img"),P.src=y,P},_getIconUrl:function(y){return jt.retina&&this.options[y+"RetinaUrl"]||this.options[y+"Url"]}});function vs(y){return new ln(y)}var Xn=ln.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(y){return typeof Xn.imagePath!="string"&&(Xn.imagePath=this._detectIconPath()),(this.options.imagePath||Xn.imagePath)+ln.prototype._getIconUrl.call(this,y)},_stripUrl:function(y){var P=function(X,st,ft){var Mt=st.exec(X);return Mt&&Mt[ft]};return y=P(y,/^url\((['"])?(.+)\1\)$/,2),y&&P(y,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var y=we("div","leaflet-default-icon-path",document.body),P=Ue(y,"background-image")||Ue(y,"backgroundImage");if(document.body.removeChild(y),P=this._stripUrl(P),P)return P;var X=document.querySelector('link[href$="leaflet.css"]');return X?X.href.substring(0,X.href.length-11-1):""}}),Ys=Pe.extend({initialize:function(y){this._marker=y},addHooks:function(){var y=this._marker._icon;this._draggable||(this._draggable=new Fr(y,y,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(y,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ui(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(y){var P=this._marker,X=P._map,st=this._marker.options.autoPanSpeed,ft=this._marker.options.autoPanPadding,Mt=Tr(P._icon),Dt=X.getPixelBounds(),Wt=X.getPixelOrigin(),te=H(Dt.min._subtract(Wt).add(ft),Dt.max._subtract(Wt).subtract(ft));if(!te.contains(Mt)){var de=R((Math.max(te.max.x,Mt.x)-te.max.x)/(Dt.max.x-te.max.x)-(Math.min(te.min.x,Mt.x)-te.min.x)/(Dt.min.x-te.min.x),(Math.max(te.max.y,Mt.y)-te.max.y)/(Dt.max.y-te.max.y)-(Math.min(te.min.y,Mt.y)-te.min.y)/(Dt.min.y-te.min.y)).multiplyBy(st);X.panBy(de,{animate:!1}),this._draggable._newPos._add(de),this._draggable._startPos._add(de),ze(P._icon,this._draggable._newPos),this._onDrag(y),this._panRequest=tt(this._adjustPan.bind(this,y))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(y){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=tt(this._adjustPan.bind(this,y)))},_onDrag:function(y){var P=this._marker,X=P._shadow,st=Tr(P._icon),ft=P._map.layerPointToLatLng(st);X&&ze(X,st),P._latlng=ft,y.latlng=ft,y.oldLatLng=this._oldLatLng,P.fire("move",y).fire("drag",y)},_onDragEnd:function(y){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",y)}}),cs=Ts.extend({options:{icon:new Xn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(y,P){g(this,P),this._latlng=$(y)},onAdd:function(y){this._zoomAnimated=this._zoomAnimated&&y.options.markerZoomAnimation,this._zoomAnimated&&y.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(y){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&y.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(y){var P=this._latlng;return this._latlng=$(y),this.update(),this.fire("move",{oldLatLng:P,latlng:this._latlng})},setZIndexOffset:function(y){return this.options.zIndexOffset=y,this.update()},getIcon:function(){return this.options.icon},setIcon:function(y){return this.options.icon=y,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var y=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(y)}return this},_initIcon:function(){var y=this.options,P="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),X=y.icon.createIcon(this._icon),st=!1;X!==this._icon&&(this._icon&&this._removeIcon(),st=!0,y.title&&(X.title=y.title),X.tagName==="IMG"&&(X.alt=y.alt||"")),me(X,P),y.keyboard&&(X.tabIndex="0",X.setAttribute("role","button")),this._icon=X,y.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(X,"focus",this._panOnFocus,this);var ft=y.icon.createShadow(this._shadow),Mt=!1;ft!==this._shadow&&(this._removeShadow(),Mt=!0),ft&&(me(ft,P),ft.alt=""),this._shadow=ft,y.opacity<1&&this._updateOpacity(),st&&this.getPane().appendChild(this._icon),this._initInteraction(),ft&&Mt&&this.getPane(y.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ci(this._icon,"focus",this._panOnFocus,this),pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pe(this._shadow),this._shadow=null},_setPos:function(y){this._icon&&ze(this._icon,y),this._shadow&&ze(this._shadow,y),this._zIndex=y.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(y){this._icon&&(this._icon.style.zIndex=this._zIndex+y)},_animateZoom:function(y){var P=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center).round();this._setPos(P)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ys)){var y=this.options.draggable;this.dragging&&(y=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ys(this),y&&this.dragging.enable()}},setOpacity:function(y){return this.options.opacity=y,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var y=this.options.opacity;this._icon&&Se(this._icon,y),this._shadow&&Se(this._shadow,y)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var y=this._map;if(y){var P=this.options.icon.options,X=P.iconSize?R(P.iconSize):R(0,0),st=P.iconAnchor?R(P.iconAnchor):R(0,0);y.panInside(this._latlng,{paddingTopLeft:st,paddingBottomRight:X.subtract(st)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function un(y,P){return new cs(y,P)}var Zs=Ts.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(y){this._renderer=y.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(y){return g(this,y),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&y&&Object.prototype.hasOwnProperty.call(y,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Lo=Zs.extend({options:{fill:!0,radius:10},initialize:function(y,P){g(this,P),this._latlng=$(y),this._radius=this.options.radius},setLatLng:function(y){var P=this._latlng;return this._latlng=$(y),this.redraw(),this.fire("move",{oldLatLng:P,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(y){return this.options.radius=this._radius=y,this.redraw()},getRadius:function(){return this._radius},setStyle:function(y){var P=y&&y.radius||this._radius;return Zs.prototype.setStyle.call(this,y),this.setRadius(P),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var y=this._radius,P=this._radiusY||y,X=this._clickTolerance(),st=[y+X,P+X];this._pxBounds=new F(this._point.subtract(st),this._point.add(st))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(y){return y.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wn(y,P){return new Lo(y,P)}var Ps=Lo.extend({initialize:function(y,P,X){if(typeof P=="number"&&(P=e({},X,{radius:P})),g(this,P),this._latlng=$(y),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(y){return this._mRadius=y,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var y=[this._radius,this._radiusY||this._radius];return new it(this._map.layerPointToLatLng(this._point.subtract(y)),this._map.layerPointToLatLng(this._point.add(y)))},setStyle:Zs.prototype.setStyle,_project:function(){var y=this._latlng.lng,P=this._latlng.lat,X=this._map,st=X.options.crs;if(st.distance===W.distance){var ft=Math.PI/180,Mt=this._mRadius/W.R/ft,Dt=X.project([P+Mt,y]),Wt=X.project([P-Mt,y]),te=Dt.add(Wt).divideBy(2),de=X.unproject(te).lat,De=Math.acos((Math.cos(Mt*ft)-Math.sin(P*ft)*Math.sin(de*ft))/(Math.cos(P*ft)*Math.cos(de*ft)))/ft;(isNaN(De)||De===0)&&(De=Mt/Math.cos(Math.PI/180*P)),this._point=te.subtract(X.getPixelOrigin()),this._radius=isNaN(De)?0:te.x-X.project([de,y-De]).x,this._radiusY=te.y-Dt.y}else{var Xe=st.unproject(st.project(this._latlng).subtract([this._mRadius,0]));this._point=X.latLngToLayerPoint(this._latlng),this._radius=this._point.x-X.latLngToLayerPoint(Xe).x}this._updateBounds()}});function bs(y,P,X){return new Ps(y,P,X)}var Ds=Zs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(y,P){g(this,P),this._setLatLngs(y)},getLatLngs:function(){return this._latlngs},setLatLngs:function(y){return this._setLatLngs(y),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(y){for(var P=1/0,X=null,st=di,ft,Mt,Dt=0,Wt=this._parts.length;Dt<Wt;Dt++)for(var te=this._parts[Dt],de=1,De=te.length;de<De;de++){ft=te[de-1],Mt=te[de];var Xe=st(y,ft,Mt,!0);Xe<P&&(P=Xe,X=st(y,ft,Mt))}return X&&(X.distance=Math.sqrt(P)),X},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ho(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(y,P){return P=P||this._defaultShape(),y=$(y),P.push(y),this._bounds.extend(y),this.redraw()},_setLatLngs:function(y){this._bounds=new it,this._latlngs=this._convertLatLngs(y)},_defaultShape:function(){return _n(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(y){for(var P=[],X=_n(y),st=0,ft=y.length;st<ft;st++)X?(P[st]=$(y[st]),this._bounds.extend(P[st])):P[st]=this._convertLatLngs(y[st]);return P},_project:function(){var y=new F;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,y),this._bounds.isValid()&&y.isValid()&&(this._rawPxBounds=y,this._updateBounds())},_updateBounds:function(){var y=this._clickTolerance(),P=new k(y,y);this._rawPxBounds&&(this._pxBounds=new F([this._rawPxBounds.min.subtract(P),this._rawPxBounds.max.add(P)]))},_projectLatlngs:function(y,P,X){var st=y[0]instanceof dt,ft=y.length,Mt,Dt;if(st){for(Dt=[],Mt=0;Mt<ft;Mt++)Dt[Mt]=this._map.latLngToLayerPoint(y[Mt]),X.extend(Dt[Mt]);P.push(Dt)}else for(Mt=0;Mt<ft;Mt++)this._projectLatlngs(y[Mt],P,X)},_clipPoints:function(){var y=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(y))){if(this.options.noClip){this._parts=this._rings;return}var P=this._parts,X,st,ft,Mt,Dt,Wt,te;for(X=0,ft=0,Mt=this._rings.length;X<Mt;X++)for(te=this._rings[X],st=0,Dt=te.length;st<Dt-1;st++)Wt=kr(te[st],te[st+1],y,st,!0),Wt&&(P[ft]=P[ft]||[],P[ft].push(Wt[0]),(Wt[1]!==te[st+1]||st===Dt-2)&&(P[ft].push(Wt[1]),ft++))}},_simplifyPoints:function(){for(var y=this._parts,P=this.options.smoothFactor,X=0,st=y.length;X<st;X++)y[X]=hs(y[X],P)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(y,P){var X,st,ft,Mt,Dt,Wt,te=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(X=0,Mt=this._parts.length;X<Mt;X++)for(Wt=this._parts[X],st=0,Dt=Wt.length,ft=Dt-1;st<Dt;ft=st++)if(!(!P&&st===0)&&Xs(y,Wt[ft],Wt[st])<=te)return!0;return!1}});function Pn(y,P){return new Ds(y,P)}Ds._flat=wr;var To=Ds.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ol(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(y){var P=Ds.prototype._convertLatLngs.call(this,y),X=P.length;return X>=2&&P[0]instanceof dt&&P[0].equals(P[X-1])&&P.pop(),P},_setLatLngs:function(y){Ds.prototype._setLatLngs.call(this,y),_n(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _n(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var y=this._renderer._bounds,P=this.options.weight,X=new k(P,P);if(y=new F(y.min.subtract(X),y.max.add(X)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(y))){if(this.options.noClip){this._parts=this._rings;return}for(var st=0,ft=this._rings.length,Mt;st<ft;st++)Mt=fo(this._rings[st],y,!0),Mt.length&&this._parts.push(Mt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(y){var P=!1,X,st,ft,Mt,Dt,Wt,te,de;if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(Mt=0,te=this._parts.length;Mt<te;Mt++)for(X=this._parts[Mt],Dt=0,de=X.length,Wt=de-1;Dt<de;Wt=Dt++)st=X[Dt],ft=X[Wt],st.y>y.y!=ft.y>y.y&&y.x<(ft.x-st.x)*(y.y-st.y)/(ft.y-st.y)+st.x&&(P=!P);return P||Ds.prototype._containsPoint.call(this,y,!0)}});function ra(y,P){return new To(y,P)}var is=Kr.extend({initialize:function(y,P){g(this,P),this._layers={},y&&this.addData(y)},addData:function(y){var P=x(y)?y:y.features,X,st,ft;if(P){for(X=0,st=P.length;X<st;X++)ft=P[X],(ft.geometries||ft.geometry||ft.features||ft.coordinates)&&this.addData(ft);return this}var Mt=this.options;if(Mt.filter&&!Mt.filter(y))return this;var Dt=na(y,Mt);return Dt?(Dt.feature=ns(y),Dt.defaultOptions=Dt.options,this.resetStyle(Dt),Mt.onEachFeature&&Mt.onEachFeature(y,Dt),this.addLayer(Dt)):this},resetStyle:function(y){return y===void 0?this.eachLayer(this.resetStyle,this):(y.options=e({},y.defaultOptions),this._setLayerStyle(y,this.options.style),this)},setStyle:function(y){return this.eachLayer(function(P){this._setLayerStyle(P,y)},this)},_setLayerStyle:function(y,P){y.setStyle&&(typeof P=="function"&&(P=P(y.feature)),y.setStyle(P))}});function na(y,P){var X=y.type==="Feature"?y.geometry:y,st=X?X.coordinates:null,ft=[],Mt=P&&P.pointToLayer,Dt=P&&P.coordsToLatLng||Ks,Wt,te,de,De;if(!st&&!X)return null;switch(X.type){case"Point":return Wt=Dt(st),al(Mt,y,Wt,P);case"MultiPoint":for(de=0,De=st.length;de<De;de++)Wt=Dt(st[de]),ft.push(al(Mt,y,Wt,P));return new Kr(ft);case"LineString":case"MultiLineString":return te=rs(st,X.type==="LineString"?0:1,Dt),new Ds(te,P);case"Polygon":case"MultiPolygon":return te=rs(st,X.type==="Polygon"?1:2,Dt),new To(te,P);case"GeometryCollection":for(de=0,De=X.geometries.length;de<De;de++){var Xe=na({geometry:X.geometries[de],type:"Feature",properties:y.properties},P);Xe&&ft.push(Xe)}return new Kr(ft);case"FeatureCollection":for(de=0,De=X.features.length;de<De;de++){var _i=na(X.features[de],P);_i&&ft.push(_i)}return new Kr(ft);default:throw new Error("Invalid GeoJSON object.")}}function al(y,P,X,st){return y?y(P,X):new cs(X,st&&st.markersInheritOptions&&st)}function Ks(y){return new dt(y[1],y[0],y[2])}function rs(y,P,X){for(var st=[],ft=0,Mt=y.length,Dt;ft<Mt;ft++)Dt=P?rs(y[ft],P-1,X):(X||Ks)(y[ft]),st.push(Dt);return st}function Hr(y,P){return y=$(y),y.alt!==void 0?[h(y.lng,P),h(y.lat,P),h(y.alt,P)]:[h(y.lng,P),h(y.lat,P)]}function Js(y,P,X,st){for(var ft=[],Mt=0,Dt=y.length;Mt<Dt;Mt++)ft.push(P?Js(y[Mt],_n(y[Mt])?0:P-1,X,st):Hr(y[Mt],st));return!P&&X&&ft.push(ft[0].slice()),ft}function zr(y,P){return y.feature?e({},y.feature,{geometry:P}):ns(P)}function ns(y){return y.type==="Feature"||y.type==="FeatureCollection"?y:{type:"Feature",properties:{},geometry:y}}var Bs={toGeoJSON:function(y){return zr(this,{type:"Point",coordinates:Hr(this.getLatLng(),y)})}};cs.include(Bs),Ps.include(Bs),Lo.include(Bs),Ds.include({toGeoJSON:function(y){var P=!_n(this._latlngs),X=Js(this._latlngs,P?1:0,!1,y);return zr(this,{type:(P?"Multi":"")+"LineString",coordinates:X})}}),To.include({toGeoJSON:function(y){var P=!_n(this._latlngs),X=P&&!_n(this._latlngs[0]),st=Js(this._latlngs,X?2:P?1:0,!0,y);return P||(st=[st]),zr(this,{type:(X?"Multi":"")+"Polygon",coordinates:st})}}),ko.include({toMultiPoint:function(y){var P=[];return this.eachLayer(function(X){P.push(X.toGeoJSON(y).geometry.coordinates)}),zr(this,{type:"MultiPoint",coordinates:P})},toGeoJSON:function(y){var P=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(P==="MultiPoint")return this.toMultiPoint(y);var X=P==="GeometryCollection",st=[];return this.eachLayer(function(ft){if(ft.toGeoJSON){var Mt=ft.toGeoJSON(y);if(X)st.push(Mt.geometry);else{var Dt=ns(Mt);Dt.type==="FeatureCollection"?st.push.apply(st,Dt.features):st.push(Dt)}}}),X?zr(this,{geometries:st,type:"GeometryCollection"}):{type:"FeatureCollection",features:st}}});function _a(y,P){return new is(y,P)}var Po=_a,_s=Ts.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(y,P,X){this._url=y,this._bounds=ot(P),g(this,X)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(y){return this.options.opacity=y,this._image&&this._updateOpacity(),this},setStyle:function(y){return y.opacity&&this.setOpacity(y.opacity),this},bringToFront:function(){return this._map&&ri(this._image),this},bringToBack:function(){return this._map&&li(this._image),this},setUrl:function(y){return this._url=y,this._image&&(this._image.src=y),this},setBounds:function(y){return this._bounds=ot(y),this._map&&this._reset(),this},getEvents:function(){var y={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var y=this._url.tagName==="IMG",P=this._image=y?this._url:we("img");if(me(P,"leaflet-image-layer"),this._zoomAnimated&&me(P,"leaflet-zoom-animated"),this.options.className&&me(P,this.options.className),P.onselectstart=c,P.onmousemove=c,P.onload=r(this.fire,this,"load"),P.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),y){this._url=P.src;return}P.src=this._url,P.alt=this.options.alt},_animateZoom:function(y){var P=this._map.getZoomScale(y.zoom),X=this._map._latLngBoundsToNewLayerBounds(this._bounds,y.zoom,y.center).min;ni(this._image,X,P)},_reset:function(){var y=this._image,P=new F(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),X=P.getSize();ze(y,P.min),y.style.width=X.x+"px",y.style.height=X.y+"px"},_updateOpacity:function(){Se(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var y=this.options.errorOverlayUrl;y&&this._url!==y&&(this._url=y,this._image.src=y)},getCenter:function(){return this._bounds.getCenter()}}),Fs=function(y,P,X){return new _s(y,P,X)},Jr=_s.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var y=this._url.tagName==="VIDEO",P=this._image=y?this._url:we("video");if(me(P,"leaflet-image-layer"),this._zoomAnimated&&me(P,"leaflet-zoom-animated"),this.options.className&&me(P,this.options.className),P.onselectstart=c,P.onmousemove=c,P.onloadeddata=r(this.fire,this,"load"),y){for(var X=P.getElementsByTagName("source"),st=[],ft=0;ft<X.length;ft++)st.push(X[ft].src);this._url=X.length>0?st:[P.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(P.style,"objectFit")&&(P.style.objectFit="fill"),P.autoplay=!!this.options.autoplay,P.loop=!!this.options.loop,P.muted=!!this.options.muted,P.playsInline=!!this.options.playsInline;for(var Mt=0;Mt<this._url.length;Mt++){var Dt=we("source");Dt.src=this._url[Mt],P.appendChild(Dt)}}});function fs(y,P,X){return new Jr(y,P,X)}var gn=_s.extend({_initImage:function(){var y=this._image=this._url;me(y,"leaflet-image-layer"),this._zoomAnimated&&me(y,"leaflet-zoom-animated"),this.options.className&&me(y,this.options.className),y.onselectstart=c,y.onmousemove=c}});function nu(y,P,X){return new gn(y,P,X)}var xn=Ts.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(y,P){y&&(y instanceof dt||x(y))?(this._latlng=$(y),g(this,P)):(g(this,y),this._source=P),this.options.content&&(this._content=this.options.content)},openOn:function(y){return y=arguments.length?y:this._source._map,y.hasLayer(this)||y.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(y){return this._map?this.close():(arguments.length?this._source=y:y=this._source,this._prepareOpen(),this.openOn(y._map)),this},onAdd:function(y){this._zoomAnimated=y._zoomAnimated,this._container||this._initLayout(),y._fadeAnimated&&Se(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),y._fadeAnimated&&Se(this._container,1),this.bringToFront(),this.options.interactive&&(me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(y){y._fadeAnimated?(Se(this._container,0),this._removeTimeout=setTimeout(r(pe,void 0,this._container),200)):pe(this._container),this.options.interactive&&(ui(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(y){return this._latlng=$(y),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(y){return this._content=y,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var y={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ri(this._container),this},bringToBack:function(){return this._map&&li(this._container),this},_prepareOpen:function(y){var P=this._source;if(!P._map)return!1;if(P instanceof Kr){P=null;var X=this._source._layers;for(var st in X)if(X[st]._map){P=X[st];break}if(!P)return!1;this._source=P}if(!y)if(P.getCenter)y=P.getCenter();else if(P.getLatLng)y=P.getLatLng();else if(P.getBounds)y=P.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(y),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var y=this._contentNode,P=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof P=="string")y.innerHTML=P;else{for(;y.hasChildNodes();)y.removeChild(y.firstChild);y.appendChild(P)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var y=this._map.latLngToLayerPoint(this._latlng),P=R(this.options.offset),X=this._getAnchor();this._zoomAnimated?ze(this._container,y.add(X)):P=P.add(y).add(X);var st=this._containerBottom=-P.y,ft=this._containerLeft=-Math.round(this._containerWidth/2)+P.x;this._container.style.bottom=st+"px",this._container.style.left=ft+"px"}},_getAnchor:function(){return[0,0]}});be.include({_initOverlay:function(y,P,X,st){var ft=P;return ft instanceof y||(ft=new y(st).setContent(P)),X&&ft.setLatLng(X),ft}}),Ts.include({_initOverlay:function(y,P,X,st){var ft=X;return ft instanceof y?(g(ft,st),ft._source=this):(ft=P&&!st?P:new y(st,this),ft.setContent(X)),ft}});var zs=xn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(y){return y=arguments.length?y:this._source._map,!y.hasLayer(this)&&y._popup&&y._popup.options.autoClose&&y.removeLayer(y._popup),y._popup=this,xn.prototype.openOn.call(this,y)},onAdd:function(y){xn.prototype.onAdd.call(this,y),y.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Zs||this._source.on("preclick",ht))},onRemove:function(y){xn.prototype.onRemove.call(this,y),y.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Zs||this._source.off("preclick",ht))},getEvents:function(){var y=xn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(y.preclick=this.close),this.options.keepInView&&(y.moveend=this._adjustPan),y},_initLayout:function(){var y="leaflet-popup",P=this._container=we("div",y+" "+(this.options.className||"")+" leaflet-zoom-animated"),X=this._wrapper=we("div",y+"-content-wrapper",P);if(this._contentNode=we("div",y+"-content",X),Lt(P),xt(this._contentNode),je(P,"contextmenu",ht),this._tipContainer=we("div",y+"-tip-container",P),this._tip=we("div",y+"-tip",this._tipContainer),this.options.closeButton){var st=this._closeButton=we("a",y+"-close-button",P);st.setAttribute("role","button"),st.setAttribute("aria-label","Close popup"),st.href="#close",st.innerHTML='<span aria-hidden="true">&#215;</span>',je(st,"click",function(ft){Rt(ft),this.close()},this)}},_updateLayout:function(){var y=this._contentNode,P=y.style;P.width="",P.whiteSpace="nowrap";var X=y.offsetWidth;X=Math.min(X,this.options.maxWidth),X=Math.max(X,this.options.minWidth),P.width=X+1+"px",P.whiteSpace="",P.height="";var st=y.offsetHeight,ft=this.options.maxHeight,Mt="leaflet-popup-scrolled";ft&&st>ft?(P.height=ft+"px",me(y,Mt)):ui(y,Mt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(y){var P=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center),X=this._getAnchor();ze(this._container,P.add(X))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var y=this._map,P=parseInt(Ue(this._container,"marginBottom"),10)||0,X=this._container.offsetHeight+P,st=this._containerWidth,ft=new k(this._containerLeft,-X-this._containerBottom);ft._add(Tr(this._container));var Mt=y.layerPointToContainerPoint(ft),Dt=R(this.options.autoPanPadding),Wt=R(this.options.autoPanPaddingTopLeft||Dt),te=R(this.options.autoPanPaddingBottomRight||Dt),de=y.getSize(),De=0,Xe=0;Mt.x+st+te.x>de.x&&(De=Mt.x+st-de.x+te.x),Mt.x-De-Wt.x<0&&(De=Mt.x-Wt.x),Mt.y+X+te.y>de.y&&(Xe=Mt.y+X-de.y+te.y),Mt.y-Xe-Wt.y<0&&(Xe=Mt.y-Wt.y),(De||Xe)&&(this.options.keepInView&&(this._autopanning=!0),y.fire("autopanstart").panBy([De,Xe]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),hn=function(y,P){return new zs(y,P)};be.mergeOptions({closePopupOnClick:!0}),be.include({openPopup:function(y,P,X){return this._initOverlay(zs,y,P,X).openOn(this),this},closePopup:function(y){return y=arguments.length?y:this._popup,y&&y.close(),this}}),Ts.include({bindPopup:function(y,P){return this._popup=this._initOverlay(zs,this._popup,y,P),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(y){return this._popup&&(this instanceof Kr||(this._popup._source=this),this._popup._prepareOpen(y||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(y){return this._popup&&this._popup.setContent(y),this},getPopup:function(){return this._popup},_openPopup:function(y){if(!(!this._popup||!this._map)){Pt(y);var P=y.layer||y.target;if(this._popup._source===P&&!(P instanceof Zs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(y.latlng);return}this._popup._source=P,this.openPopup(y.latlng)}},_movePopup:function(y){this._popup.setLatLng(y.latlng)},_onKeyPress:function(y){y.originalEvent.keyCode===13&&this._openPopup(y)}});var Gr=xn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(y){xn.prototype.onAdd.call(this,y),this.setOpacity(this.options.opacity),y.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(y){xn.prototype.onRemove.call(this,y),y.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var y=xn.prototype.getEvents.call(this);return this.options.permanent||(y.preclick=this.close),y},_initLayout:function(){var y="leaflet-tooltip",P=y+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=we("div",P),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(y){var P,X,st=this._map,ft=this._container,Mt=st.latLngToContainerPoint(st.getCenter()),Dt=st.layerPointToContainerPoint(y),Wt=this.options.direction,te=ft.offsetWidth,de=ft.offsetHeight,De=R(this.options.offset),Xe=this._getAnchor();Wt==="top"?(P=te/2,X=de):Wt==="bottom"?(P=te/2,X=0):Wt==="center"?(P=te/2,X=de/2):Wt==="right"?(P=0,X=de/2):Wt==="left"?(P=te,X=de/2):Dt.x<Mt.x?(Wt="right",P=0,X=de/2):(Wt="left",P=te+(De.x+Xe.x)*2,X=de/2),y=y.subtract(R(P,X,!0)).add(De).add(Xe),ui(ft,"leaflet-tooltip-right"),ui(ft,"leaflet-tooltip-left"),ui(ft,"leaflet-tooltip-top"),ui(ft,"leaflet-tooltip-bottom"),me(ft,"leaflet-tooltip-"+Wt),ze(ft,y)},_updatePosition:function(){var y=this._map.latLngToLayerPoint(this._latlng);this._setPosition(y)},setOpacity:function(y){this.options.opacity=y,this._container&&Se(this._container,y)},_animateZoom:function(y){var P=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center);this._setPosition(P)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ws=function(y,P){return new Gr(y,P)};be.include({openTooltip:function(y,P,X){return this._initOverlay(Gr,y,P,X).openOn(this),this},closeTooltip:function(y){return y.close(),this}}),Ts.include({bindTooltip:function(y,P){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Gr,this._tooltip,y,P),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(y){if(!(!y&&this._tooltipHandlersAdded)){var P=y?"off":"on",X={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?X.add=this._openTooltip:(X.mouseover=this._openTooltip,X.mouseout=this.closeTooltip,X.click=this._openTooltip,this._map?this._addFocusListeners():X.add=this._addFocusListeners),this._tooltip.options.sticky&&(X.mousemove=this._moveTooltip),this[P](X),this._tooltipHandlersAdded=!y}},openTooltip:function(y){return this._tooltip&&(this instanceof Kr||(this._tooltip._source=this),this._tooltip._prepareOpen(y)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(y){return this._tooltip&&this._tooltip.setContent(y),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(y){var P=y.getElement();P&&(je(P,"focus",function(){this._tooltip._source=y,this.openTooltip()},this),je(P,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(y){var P=y.getElement();P&&P.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(y){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=y.layer||y.target,this.openTooltip(this._tooltip.options.sticky?y.latlng:void 0))},_moveTooltip:function(y){var P=y.latlng,X,st;this._tooltip.options.sticky&&y.originalEvent&&(X=this._map.mouseEventToContainerPoint(y.originalEvent),st=this._map.containerPointToLayerPoint(X),P=this._map.layerPointToLatLng(st)),this._tooltip.setLatLng(P)}});var $n=ln.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(y){var P=y&&y.tagName==="DIV"?y:document.createElement("div"),X=this.options;if(X.html instanceof Element?(yi(P),P.appendChild(X.html)):P.innerHTML=X.html!==!1?X.html:"",X.bgPos){var st=R(X.bgPos);P.style.backgroundPosition=-st.x+"px "+-st.y+"px"}return this._setIconStyles(P,"icon"),P},createShadow:function(){return null}});function ll(y){return new $n(y)}ln.Default=Xn;var Rs=Ts.extend({options:{tileSize:256,opacity:1,updateWhenIdle:jt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(y){g(this,y)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(y){y._addZoomLimit(this)},onRemove:function(y){this._removeAllTiles(),pe(this._container),y._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ri(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(li(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(y){return this.options.opacity=y,this._updateOpacity(),this},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var y=this._clampZoom(this._map.getZoom());y!==this._tileZoom&&(this._tileZoom=y,this._updateLevels()),this._update()}return this},getEvents:function(){var y={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),y.move=this._onMove),this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},createTile:function(){return document.createElement("div")},getTileSize:function(){var y=this.options.tileSize;return y instanceof k?y:new k(y,y)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(y){for(var P=this.getPane().children,X=-y(-1/0,1/0),st=0,ft=P.length,Mt;st<ft;st++)Mt=P[st].style.zIndex,P[st]!==this._container&&Mt&&(X=y(X,+Mt));isFinite(X)&&(this.options.zIndex=X+y(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!jt.ielt9){Se(this._container,this.options.opacity);var y=+new Date,P=!1,X=!1;for(var st in this._tiles){var ft=this._tiles[st];if(!(!ft.current||!ft.loaded)){var Mt=Math.min(1,(y-ft.loaded)/200);Se(ft.el,Mt),Mt<1?P=!0:(ft.active?X=!0:this._onOpaqueTile(ft),ft.active=!0)}}X&&!this._noPrune&&this._pruneTiles(),P&&(K(this._fadeFrame),this._fadeFrame=tt(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=we("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var y=this._tileZoom,P=this.options.maxZoom;if(y!==void 0){for(var X in this._levels)X=Number(X),this._levels[X].el.children.length||X===y?(this._levels[X].el.style.zIndex=P-Math.abs(y-X),this._onUpdateLevel(X)):(pe(this._levels[X].el),this._removeTilesAtZoom(X),this._onRemoveLevel(X),delete this._levels[X]);var st=this._levels[y],ft=this._map;return st||(st=this._levels[y]={},st.el=we("div","leaflet-tile-container leaflet-zoom-animated",this._container),st.el.style.zIndex=P,st.origin=ft.project(ft.unproject(ft.getPixelOrigin()),y).round(),st.zoom=y,this._setZoomTransform(st,ft.getCenter(),ft.getZoom()),c(st.el.offsetWidth),this._onCreateLevel(st)),this._level=st,st}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var y,P,X=this._map.getZoom();if(X>this.options.maxZoom||X<this.options.minZoom){this._removeAllTiles();return}for(y in this._tiles)P=this._tiles[y],P.retain=P.current;for(y in this._tiles)if(P=this._tiles[y],P.current&&!P.active){var st=P.coords;this._retainParent(st.x,st.y,st.z,st.z-5)||this._retainChildren(st.x,st.y,st.z,st.z+2)}for(y in this._tiles)this._tiles[y].retain||this._removeTile(y)}},_removeTilesAtZoom:function(y){for(var P in this._tiles)this._tiles[P].coords.z===y&&this._removeTile(P)},_removeAllTiles:function(){for(var y in this._tiles)this._removeTile(y)},_invalidateAll:function(){for(var y in this._levels)pe(this._levels[y].el),this._onRemoveLevel(Number(y)),delete this._levels[y];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(y,P,X,st){var ft=Math.floor(y/2),Mt=Math.floor(P/2),Dt=X-1,Wt=new k(+ft,+Mt);Wt.z=+Dt;var te=this._tileCoordsToKey(Wt),de=this._tiles[te];return de&&de.active?(de.retain=!0,!0):(de&&de.loaded&&(de.retain=!0),Dt>st?this._retainParent(ft,Mt,Dt,st):!1)},_retainChildren:function(y,P,X,st){for(var ft=2*y;ft<2*y+2;ft++)for(var Mt=2*P;Mt<2*P+2;Mt++){var Dt=new k(ft,Mt);Dt.z=X+1;var Wt=this._tileCoordsToKey(Dt),te=this._tiles[Wt];if(te&&te.active){te.retain=!0;continue}else te&&te.loaded&&(te.retain=!0);X+1<st&&this._retainChildren(ft,Mt,X+1,st)}},_resetView:function(y){var P=y&&(y.pinch||y.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),P,P)},_animateZoom:function(y){this._setView(y.center,y.zoom,!0,y.noUpdate)},_clampZoom:function(y){var P=this.options;return P.minNativeZoom!==void 0&&y<P.minNativeZoom?P.minNativeZoom:P.maxNativeZoom!==void 0&&P.maxNativeZoom<y?P.maxNativeZoom:y},_setView:function(y,P,X,st){var ft=Math.round(P);this.options.maxZoom!==void 0&&ft>this.options.maxZoom||this.options.minZoom!==void 0&&ft<this.options.minZoom?ft=void 0:ft=this._clampZoom(ft);var Mt=this.options.updateWhenZooming&&ft!==this._tileZoom;(!st||Mt)&&(this._tileZoom=ft,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ft!==void 0&&this._update(y),X||this._pruneTiles(),this._noPrune=!!X),this._setZoomTransforms(y,P)},_setZoomTransforms:function(y,P){for(var X in this._levels)this._setZoomTransform(this._levels[X],y,P)},_setZoomTransform:function(y,P,X){var st=this._map.getZoomScale(X,y.zoom),ft=y.origin.multiplyBy(st).subtract(this._map._getNewPixelOrigin(P,X)).round();jt.any3d?ni(y.el,ft,st):ze(y.el,ft)},_resetGrid:function(){var y=this._map,P=y.options.crs,X=this._tileSize=this.getTileSize(),st=this._tileZoom,ft=this._map.getPixelWorldBounds(this._tileZoom);ft&&(this._globalTileRange=this._pxBoundsToTileRange(ft)),this._wrapX=P.wrapLng&&!this.options.noWrap&&[Math.floor(y.project([0,P.wrapLng[0]],st).x/X.x),Math.ceil(y.project([0,P.wrapLng[1]],st).x/X.y)],this._wrapY=P.wrapLat&&!this.options.noWrap&&[Math.floor(y.project([P.wrapLat[0],0],st).y/X.x),Math.ceil(y.project([P.wrapLat[1],0],st).y/X.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(y){var P=this._map,X=P._animatingZoom?Math.max(P._animateToZoom,P.getZoom()):P.getZoom(),st=P.getZoomScale(X,this._tileZoom),ft=P.project(y,this._tileZoom).floor(),Mt=P.getSize().divideBy(st*2);return new F(ft.subtract(Mt),ft.add(Mt))},_update:function(y){var P=this._map;if(P){var X=this._clampZoom(P.getZoom());if(y===void 0&&(y=P.getCenter()),this._tileZoom!==void 0){var st=this._getTiledPixelBounds(y),ft=this._pxBoundsToTileRange(st),Mt=ft.getCenter(),Dt=[],Wt=this.options.keepBuffer,te=new F(ft.getBottomLeft().subtract([Wt,-Wt]),ft.getTopRight().add([Wt,-Wt]));if(!(isFinite(ft.min.x)&&isFinite(ft.min.y)&&isFinite(ft.max.x)&&isFinite(ft.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var de in this._tiles){var De=this._tiles[de].coords;(De.z!==this._tileZoom||!te.contains(new k(De.x,De.y)))&&(this._tiles[de].current=!1)}if(Math.abs(X-this._tileZoom)>1){this._setView(y,X);return}for(var Xe=ft.min.y;Xe<=ft.max.y;Xe++)for(var _i=ft.min.x;_i<=ft.max.x;_i++){var Rn=new k(_i,Xe);if(Rn.z=this._tileZoom,!!this._isValidTile(Rn)){var to=this._tiles[this._tileCoordsToKey(Rn)];to?to.current=!0:Dt.push(Rn)}}if(Dt.sort(function(Zn,Io){return Zn.distanceTo(Mt)-Io.distanceTo(Mt)}),Dt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var eo=document.createDocumentFragment();for(_i=0;_i<Dt.length;_i++)this._addTile(Dt[_i],eo);this._level.el.appendChild(eo)}}}},_isValidTile:function(y){var P=this._map.options.crs;if(!P.infinite){var X=this._globalTileRange;if(!P.wrapLng&&(y.x<X.min.x||y.x>X.max.x)||!P.wrapLat&&(y.y<X.min.y||y.y>X.max.y))return!1}if(!this.options.bounds)return!0;var st=this._tileCoordsToBounds(y);return ot(this.options.bounds).overlaps(st)},_keyToBounds:function(y){return this._tileCoordsToBounds(this._keyToTileCoords(y))},_tileCoordsToNwSe:function(y){var P=this._map,X=this.getTileSize(),st=y.scaleBy(X),ft=st.add(X),Mt=P.unproject(st,y.z),Dt=P.unproject(ft,y.z);return[Mt,Dt]},_tileCoordsToBounds:function(y){var P=this._tileCoordsToNwSe(y),X=new it(P[0],P[1]);return this.options.noWrap||(X=this._map.wrapLatLngBounds(X)),X},_tileCoordsToKey:function(y){return y.x+":"+y.y+":"+y.z},_keyToTileCoords:function(y){var P=y.split(":"),X=new k(+P[0],+P[1]);return X.z=+P[2],X},_removeTile:function(y){var P=this._tiles[y];P&&(pe(P.el),delete this._tiles[y],this.fire("tileunload",{tile:P.el,coords:this._keyToTileCoords(y)}))},_initTile:function(y){me(y,"leaflet-tile");var P=this.getTileSize();y.style.width=P.x+"px",y.style.height=P.y+"px",y.onselectstart=c,y.onmousemove=c,jt.ielt9&&this.options.opacity<1&&Se(y,this.options.opacity)},_addTile:function(y,P){var X=this._getTilePos(y),st=this._tileCoordsToKey(y),ft=this.createTile(this._wrapCoords(y),r(this._tileReady,this,y));this._initTile(ft),this.createTile.length<2&&tt(r(this._tileReady,this,y,null,ft)),ze(ft,X),this._tiles[st]={el:ft,coords:y,current:!0},P.appendChild(ft),this.fire("tileloadstart",{tile:ft,coords:y})},_tileReady:function(y,P,X){P&&this.fire("tileerror",{error:P,tile:X,coords:y});var st=this._tileCoordsToKey(y);X=this._tiles[st],X&&(X.loaded=+new Date,this._map._fadeAnimated?(Se(X.el,0),K(this._fadeFrame),this._fadeFrame=tt(this._updateOpacity,this)):(X.active=!0,this._pruneTiles()),P||(me(X.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:X.el,coords:y})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),jt.ielt9||!this._map._fadeAnimated?tt(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(y){return y.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(y){var P=new k(this._wrapX?l(y.x,this._wrapX):y.x,this._wrapY?l(y.y,this._wrapY):y.y);return P.z=y.z,P},_pxBoundsToTileRange:function(y){var P=this.getTileSize();return new F(y.min.unscaleBy(P).floor(),y.max.unscaleBy(P).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var y in this._tiles)if(!this._tiles[y].loaded)return!1;return!0}});function Qs(y){return new Rs(y)}var Qr=Rs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(y,P){this._url=y,P=g(this,P),P.detectRetina&&jt.retina&&P.maxZoom>0?(P.tileSize=Math.floor(P.tileSize/2),P.zoomReverse?(P.zoomOffset--,P.minZoom=Math.min(P.maxZoom,P.minZoom+1)):(P.zoomOffset++,P.maxZoom=Math.max(P.minZoom,P.maxZoom-1)),P.minZoom=Math.max(0,P.minZoom)):P.zoomReverse?P.minZoom=Math.min(P.maxZoom,P.minZoom):P.maxZoom=Math.max(P.minZoom,P.maxZoom),typeof P.subdomains=="string"&&(P.subdomains=P.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(y,P){return this._url===y&&P===void 0&&(P=!0),this._url=y,P||this.redraw(),this},createTile:function(y,P){var X=document.createElement("img");return je(X,"load",r(this._tileOnLoad,this,P,X)),je(X,"error",r(this._tileOnError,this,P,X)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(X.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(X.referrerPolicy=this.options.referrerPolicy),X.alt="",X.src=this.getTileUrl(y),X},getTileUrl:function(y){var P={r:jt.retina?"@2x":"",s:this._getSubdomain(y),x:y.x,y:y.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var X=this._globalTileRange.max.y-y.y;this.options.tms&&(P.y=X),P["-y"]=X}return v(this._url,e(P,this.options))},_tileOnLoad:function(y,P){jt.ielt9?setTimeout(r(y,this,null,P),0):y(null,P)},_tileOnError:function(y,P,X){var st=this.options.errorTileUrl;st&&P.getAttribute("src")!==st&&(P.src=st),y(X,P)},_onTileRemove:function(y){y.tile.onload=null},_getZoomForUrl:function(){var y=this._tileZoom,P=this.options.maxZoom,X=this.options.zoomReverse,st=this.options.zoomOffset;return X&&(y=P-y),y+st},_getSubdomain:function(y){var P=Math.abs(y.x+y.y)%this.options.subdomains.length;return this.options.subdomains[P]},_abortLoading:function(){var y,P;for(y in this._tiles)if(this._tiles[y].coords.z!==this._tileZoom&&(P=this._tiles[y].el,P.onload=c,P.onerror=c,!P.complete)){P.src=O;var X=this._tiles[y].coords;pe(P),delete this._tiles[y],this.fire("tileabort",{tile:P,coords:X})}},_removeTile:function(y){var P=this._tiles[y];if(P)return P.el.setAttribute("src",O),Rs.prototype._removeTile.call(this,y)},_tileReady:function(y,P,X){if(!(!this._map||X&&X.getAttribute("src")===O))return Rs.prototype._tileReady.call(this,y,P,X)}});function wa(y,P){return new Qr(y,P)}var tn=Qr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(y,P){this._url=y;var X=e({},this.defaultWmsParams);for(var st in P)st in this.options||(X[st]=P[st]);P=g(this,P);var ft=P.detectRetina&&jt.retina?2:1,Mt=this.getTileSize();X.width=Mt.x*ft,X.height=Mt.y*ft,this.wmsParams=X},onAdd:function(y){this._crs=this.options.crs||y.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var P=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[P]=this._crs.code,Qr.prototype.onAdd.call(this,y)},getTileUrl:function(y){var P=this._tileCoordsToNwSe(y),X=this._crs,st=H(X.project(P[0]),X.project(P[1])),ft=st.min,Mt=st.max,Dt=(this._wmsVersion>=1.3&&this._crs===Bn?[ft.y,ft.x,Mt.y,Mt.x]:[ft.x,ft.y,Mt.x,Mt.y]).join(","),Wt=Qr.prototype.getTileUrl.call(this,y);return Wt+m(this.wmsParams,Wt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Dt},setParams:function(y,P){return e(this.wmsParams,y),P||this.redraw(),this}});function ul(y,P){return new tn(y,P)}Qr.WMS=tn,wa.wms=ul;var cn=Ts.extend({options:{padding:.1},initialize:function(y){g(this,y),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var y={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(y.zoomanim=this._onAnimZoom),y},_onAnimZoom:function(y){this._updateTransform(y.center,y.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(y,P){var X=this._map.getZoomScale(P,this._zoom),st=this._map.getSize().multiplyBy(.5+this.options.padding),ft=this._map.project(this._center,P),Mt=st.multiplyBy(-X).add(ft).subtract(this._map._getNewPixelOrigin(y,P));jt.any3d?ni(this._container,Mt,X):ze(this._container,Mt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var y in this._layers)this._layers[y]._reset()},_onZoomEnd:function(){for(var y in this._layers)this._layers[y]._project()},_updatePaths:function(){for(var y in this._layers)this._layers[y]._update()},_update:function(){var y=this.options.padding,P=this._map.getSize(),X=this._map.containerPointToLayerPoint(P.multiplyBy(-y)).round();this._bounds=new F(X,X.add(P.multiplyBy(1+y*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ur=cn.extend({options:{tolerance:0},getEvents:function(){var y=cn.prototype.getEvents.call(this);return y.viewprereset=this._onViewPreReset,y},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var y=this._container=document.createElement("canvas");je(y,"mousemove",this._onMouseMove,this),je(y,"click dblclick mousedown mouseup contextmenu",this._onClick,this),je(y,"mouseout",this._handleMouseOut,this),y._leaflet_disable_events=!0,this._ctx=y.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,pe(this._container),ci(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var y;this._redrawBounds=null;for(var P in this._layers)y=this._layers[P],y._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cn.prototype._update.call(this);var y=this._bounds,P=this._container,X=y.getSize(),st=jt.retina?2:1;ze(P,y.min),P.width=st*X.x,P.height=st*X.y,P.style.width=X.x+"px",P.style.height=X.y+"px",jt.retina&&this._ctx.scale(2,2),this._ctx.translate(-y.min.x,-y.min.y),this.fire("update")}},_reset:function(){cn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(y){this._updateDashArray(y),this._layers[a(y)]=y;var P=y._order={layer:y,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=P),this._drawLast=P,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(y){this._requestRedraw(y)},_removePath:function(y){var P=y._order,X=P.next,st=P.prev;X?X.prev=st:this._drawLast=st,st?st.next=X:this._drawFirst=X,delete y._order,delete this._layers[a(y)],this._requestRedraw(y)},_updatePath:function(y){this._extendRedrawBounds(y),y._project(),y._update(),this._requestRedraw(y)},_updateStyle:function(y){this._updateDashArray(y),this._requestRedraw(y)},_updateDashArray:function(y){if(typeof y.options.dashArray=="string"){var P=y.options.dashArray.split(/[, ]+/),X=[],st,ft;for(ft=0;ft<P.length;ft++){if(st=Number(P[ft]),isNaN(st))return;X.push(st)}y.options._dashArray=X}else y.options._dashArray=y.options.dashArray},_requestRedraw:function(y){this._map&&(this._extendRedrawBounds(y),this._redrawRequest=this._redrawRequest||tt(this._redraw,this))},_extendRedrawBounds:function(y){if(y._pxBounds){var P=(y.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new F,this._redrawBounds.extend(y._pxBounds.min.subtract([P,P])),this._redrawBounds.extend(y._pxBounds.max.add([P,P]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var y=this._redrawBounds;if(y){var P=y.getSize();this._ctx.clearRect(y.min.x,y.min.y,P.x,P.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var y,P=this._redrawBounds;if(this._ctx.save(),P){var X=P.getSize();this._ctx.beginPath(),this._ctx.rect(P.min.x,P.min.y,X.x,X.y),this._ctx.clip()}this._drawing=!0;for(var st=this._drawFirst;st;st=st.next)y=st.layer,(!P||y._pxBounds&&y._pxBounds.intersects(P))&&y._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(y,P){if(this._drawing){var X,st,ft,Mt,Dt=y._parts,Wt=Dt.length,te=this._ctx;if(Wt){for(te.beginPath(),X=0;X<Wt;X++){for(st=0,ft=Dt[X].length;st<ft;st++)Mt=Dt[X][st],te[st?"lineTo":"moveTo"](Mt.x,Mt.y);P&&te.closePath()}this._fillStroke(te,y)}}},_updateCircle:function(y){if(!(!this._drawing||y._empty())){var P=y._point,X=this._ctx,st=Math.max(Math.round(y._radius),1),ft=(Math.max(Math.round(y._radiusY),1)||st)/st;ft!==1&&(X.save(),X.scale(1,ft)),X.beginPath(),X.arc(P.x,P.y/ft,st,0,Math.PI*2,!1),ft!==1&&X.restore(),this._fillStroke(X,y)}},_fillStroke:function(y,P){var X=P.options;X.fill&&(y.globalAlpha=X.fillOpacity,y.fillStyle=X.fillColor||X.color,y.fill(X.fillRule||"evenodd")),X.stroke&&X.weight!==0&&(y.setLineDash&&y.setLineDash(P.options&&P.options._dashArray||[]),y.globalAlpha=X.opacity,y.lineWidth=X.weight,y.strokeStyle=X.color,y.lineCap=X.lineCap,y.lineJoin=X.lineJoin,y.stroke())},_onClick:function(y){for(var P=this._map.mouseEventToLayerPoint(y),X,st,ft=this._drawFirst;ft;ft=ft.next)X=ft.layer,X.options.interactive&&X._containsPoint(P)&&(!(y.type==="click"||y.type==="preclick")||!this._map._draggableMoved(X))&&(st=X);this._fireEvent(st?[st]:!1,y)},_onMouseMove:function(y){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var P=this._map.mouseEventToLayerPoint(y);this._handleMouseHover(y,P)}},_handleMouseOut:function(y){var P=this._hoveredLayer;P&&(ui(this._container,"leaflet-interactive"),this._fireEvent([P],y,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(y,P){if(!this._mouseHoverThrottled){for(var X,st,ft=this._drawFirst;ft;ft=ft.next)X=ft.layer,X.options.interactive&&X._containsPoint(P)&&(st=X);st!==this._hoveredLayer&&(this._handleMouseOut(y),st&&(me(this._container,"leaflet-interactive"),this._fireEvent([st],y,"mouseover"),this._hoveredLayer=st)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,y),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(y,P,X){this._map._fireDOMEvent(P,X||P.type,y)},_bringToFront:function(y){var P=y._order;if(P){var X=P.next,st=P.prev;if(X)X.prev=st;else return;st?st.next=X:X&&(this._drawFirst=X),P.prev=this._drawLast,this._drawLast.next=P,P.next=null,this._drawLast=P,this._requestRedraw(y)}},_bringToBack:function(y){var P=y._order;if(P){var X=P.next,st=P.prev;if(st)st.next=X;else return;X?X.prev=st:st&&(this._drawLast=st),P.prev=null,P.next=this._drawFirst,this._drawFirst.prev=P,this._drawFirst=P,this._requestRedraw(y)}}});function ss(y){return jt.canvas?new Ur(y):null}var xs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(y){return document.createElement("<lvml:"+y+' class="lvml">')}}catch{}return function(y){return document.createElement("<"+y+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ro={_initContainer:function(){this._container=we("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cn.prototype._update.call(this),this.fire("update"))},_initPath:function(y){var P=y._container=xs("shape");me(P,"leaflet-vml-shape "+(this.options.className||"")),P.coordsize="1 1",y._path=xs("path"),P.appendChild(y._path),this._updateStyle(y),this._layers[a(y)]=y},_addPath:function(y){var P=y._container;this._container.appendChild(P),y.options.interactive&&y.addInteractiveTarget(P)},_removePath:function(y){var P=y._container;pe(P),y.removeInteractiveTarget(P),delete this._layers[a(y)]},_updateStyle:function(y){var P=y._stroke,X=y._fill,st=y.options,ft=y._container;ft.stroked=!!st.stroke,ft.filled=!!st.fill,st.stroke?(P||(P=y._stroke=xs("stroke")),ft.appendChild(P),P.weight=st.weight+"px",P.color=st.color,P.opacity=st.opacity,st.dashArray?P.dashStyle=x(st.dashArray)?st.dashArray.join(" "):st.dashArray.replace(/( *, *)/g," "):P.dashStyle="",P.endcap=st.lineCap.replace("butt","flat"),P.joinstyle=st.lineJoin):P&&(ft.removeChild(P),y._stroke=null),st.fill?(X||(X=y._fill=xs("fill")),ft.appendChild(X),X.color=st.fillColor||st.color,X.opacity=st.fillOpacity):X&&(ft.removeChild(X),y._fill=null)},_updateCircle:function(y){var P=y._point.round(),X=Math.round(y._radius),st=Math.round(y._radiusY||X);this._setPath(y,y._empty()?"M0 0":"AL "+P.x+","+P.y+" "+X+","+st+" 0,"+65535*360)},_setPath:function(y,P){y._path.v=P},_bringToFront:function(y){ri(y._container)},_bringToBack:function(y){li(y._container)}},Yn=jt.vml?xs:Ft,Os=cn.extend({_initContainer:function(){this._container=Yn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pe(this._container),ci(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cn.prototype._update.call(this);var y=this._bounds,P=y.getSize(),X=this._container;(!this._svgSize||!this._svgSize.equals(P))&&(this._svgSize=P,X.setAttribute("width",P.x),X.setAttribute("height",P.y)),ze(X,y.min),X.setAttribute("viewBox",[y.min.x,y.min.y,P.x,P.y].join(" ")),this.fire("update")}},_initPath:function(y){var P=y._path=Yn("path");y.options.className&&me(P,y.options.className),y.options.interactive&&me(P,"leaflet-interactive"),this._updateStyle(y),this._layers[a(y)]=y},_addPath:function(y){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(y._path),y.addInteractiveTarget(y._path)},_removePath:function(y){pe(y._path),y.removeInteractiveTarget(y._path),delete this._layers[a(y)]},_updatePath:function(y){y._project(),y._update()},_updateStyle:function(y){var P=y._path,X=y.options;P&&(X.stroke?(P.setAttribute("stroke",X.color),P.setAttribute("stroke-opacity",X.opacity),P.setAttribute("stroke-width",X.weight),P.setAttribute("stroke-linecap",X.lineCap),P.setAttribute("stroke-linejoin",X.lineJoin),X.dashArray?P.setAttribute("stroke-dasharray",X.dashArray):P.removeAttribute("stroke-dasharray"),X.dashOffset?P.setAttribute("stroke-dashoffset",X.dashOffset):P.removeAttribute("stroke-dashoffset")):P.setAttribute("stroke","none"),X.fill?(P.setAttribute("fill",X.fillColor||X.color),P.setAttribute("fill-opacity",X.fillOpacity),P.setAttribute("fill-rule",X.fillRule||"evenodd")):P.setAttribute("fill","none"))},_updatePoly:function(y,P){this._setPath(y,At(y._parts,P))},_updateCircle:function(y){var P=y._point,X=Math.max(Math.round(y._radius),1),st=Math.max(Math.round(y._radiusY),1)||X,ft="a"+X+","+st+" 0 1,0 ",Mt=y._empty()?"M0 0":"M"+(P.x-X)+","+P.y+ft+X*2+",0 "+ft+-X*2+",0 ";this._setPath(y,Mt)},_setPath:function(y,P){y._path.setAttribute("d",P)},_bringToFront:function(y){ri(y._path)},_bringToBack:function(y){li(y._path)}});jt.vml&&Os.include(Ro);function En(y){return jt.svg||jt.vml?new Os(y):null}be.include({getRenderer:function(y){var P=y.options.renderer||this._getPaneRenderer(y.options.pane)||this.options.renderer||this._renderer;return P||(P=this._renderer=this._createRenderer()),this.hasLayer(P)||this.addLayer(P),P},_getPaneRenderer:function(y){if(y==="overlayPane"||y===void 0)return!1;var P=this._paneRenderers[y];return P===void 0&&(P=this._createRenderer({pane:y}),this._paneRenderers[y]=P),P},_createRenderer:function(y){return this.options.preferCanvas&&ss(y)||En(y)}});var Es=To.extend({initialize:function(y,P){To.prototype.initialize.call(this,this._boundsToLatLngs(y),P)},setBounds:function(y){return this.setLatLngs(this._boundsToLatLngs(y))},_boundsToLatLngs:function(y){return y=ot(y),[y.getSouthWest(),y.getNorthWest(),y.getNorthEast(),y.getSouthEast()]}});function Or(y,P){return new Es(y,P)}Os.create=Yn,Os.pointsToPath=At,is.geometryToLayer=na,is.coordsToLatLng=Ks,is.coordsToLatLngs=rs,is.latLngToCoords=Hr,is.latLngsToCoords=Js,is.getFeature=zr,is.asFeature=ns,be.mergeOptions({boxZoom:!0});var hl=Pe.extend({initialize:function(y){this._map=y,this._container=y._container,this._pane=y._panes.overlayPane,this._resetStateTimeout=0,y.on("unload",this._destroy,this)},addHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ci(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(y){if(!y.shiftKey||y.which!==1&&y.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Rr(),gi(),this._startPoint=this._map.mouseEventToContainerPoint(y),je(document,{contextmenu:Pt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(y){this._moved||(this._moved=!0,this._box=we("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(y);var P=new F(this._point,this._startPoint),X=P.getSize();ze(this._box,P.min),this._box.style.width=X.x+"px",this._box.style.height=X.y+"px"},_finish:function(){this._moved&&(pe(this._box),ui(this._container,"leaflet-crosshair")),bn(),_r(),ci(document,{contextmenu:Pt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(y){if(!(y.which!==1&&y.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var P=new it(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(P).fire("boxzoomend",{boxZoomBounds:P})}},_onKeyDown:function(y){y.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});be.addInitHook("addHandler","boxZoom",hl),be.mergeOptions({doubleClickZoom:!0});var cl=Pe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(y){var P=this._map,X=P.getZoom(),st=P.options.zoomDelta,ft=y.originalEvent.shiftKey?X-st:X+st;P.options.doubleClickZoom==="center"?P.setZoom(ft):P.setZoomAround(y.containerPoint,ft)}});be.addInitHook("addHandler","doubleClickZoom",cl),be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yn=Pe.extend({addHooks:function(){if(!this._draggable){var y=this._map;this._draggable=new Fr(y._mapPane,y._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),y.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),y.on("zoomend",this._onZoomEnd,this),y.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ui(this._map._container,"leaflet-grab"),ui(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var y=this._map;if(y._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var P=ot(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(P.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(P.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;y.fire("movestart").fire("dragstart"),y.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(y){if(this._map.options.inertia){var P=this._lastTime=+new Date,X=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(X),this._times.push(P),this._prunePositions(P)}this._map.fire("move",y).fire("drag",y)},_prunePositions:function(y){for(;this._positions.length>1&&y-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var y=this._map.getSize().divideBy(2),P=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=P.subtract(y).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(y,P){return y-(y-P)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var y=this._draggable._newPos.subtract(this._draggable._startPos),P=this._offsetLimit;y.x<P.min.x&&(y.x=this._viscousLimit(y.x,P.min.x)),y.y<P.min.y&&(y.y=this._viscousLimit(y.y,P.min.y)),y.x>P.max.x&&(y.x=this._viscousLimit(y.x,P.max.x)),y.y>P.max.y&&(y.y=this._viscousLimit(y.y,P.max.y)),this._draggable._newPos=this._draggable._startPos.add(y)}},_onPreDragWrap:function(){var y=this._worldWidth,P=Math.round(y/2),X=this._initialWorldOffset,st=this._draggable._newPos.x,ft=(st-P+X)%y+P-X,Mt=(st+P+X)%y-P-X,Dt=Math.abs(ft+X)<Math.abs(Mt+X)?ft:Mt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Dt},_onDragEnd:function(y){var P=this._map,X=P.options,st=!X.inertia||y.noInertia||this._times.length<2;if(P.fire("dragend",y),st)P.fire("moveend");else{this._prunePositions(+new Date);var ft=this._lastPos.subtract(this._positions[0]),Mt=(this._lastTime-this._times[0])/1e3,Dt=X.easeLinearity,Wt=ft.multiplyBy(Dt/Mt),te=Wt.distanceTo([0,0]),de=Math.min(X.inertiaMaxSpeed,te),De=Wt.multiplyBy(de/te),Xe=de/(X.inertiaDeceleration*Dt),_i=De.multiplyBy(-Xe/2).round();!_i.x&&!_i.y?P.fire("moveend"):(_i=P._limitOffset(_i,P.options.maxBounds),tt(function(){P.panBy(_i,{duration:Xe,easeLinearity:Dt,noMoveStart:!0,animate:!0})}))}}});be.addInitHook("addHandler","dragging",yn),be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var js=Pe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(y){this._map=y,this._setPanDelta(y.options.keyboardPanDelta),this._setZoomDelta(y.options.zoomDelta)},addHooks:function(){var y=this._map._container;y.tabIndex<=0&&(y.tabIndex="0"),je(y,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ci(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var y=document.body,P=document.documentElement,X=y.scrollTop||P.scrollTop,st=y.scrollLeft||P.scrollLeft;this._map._container.focus(),window.scrollTo(st,X)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(y){var P=this._panKeys={},X=this.keyCodes,st,ft;for(st=0,ft=X.left.length;st<ft;st++)P[X.left[st]]=[-1*y,0];for(st=0,ft=X.right.length;st<ft;st++)P[X.right[st]]=[y,0];for(st=0,ft=X.down.length;st<ft;st++)P[X.down[st]]=[0,y];for(st=0,ft=X.up.length;st<ft;st++)P[X.up[st]]=[0,-1*y]},_setZoomDelta:function(y){var P=this._zoomKeys={},X=this.keyCodes,st,ft;for(st=0,ft=X.zoomIn.length;st<ft;st++)P[X.zoomIn[st]]=y;for(st=0,ft=X.zoomOut.length;st<ft;st++)P[X.zoomOut[st]]=-y},_addHooks:function(){je(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ci(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(y){if(!(y.altKey||y.ctrlKey||y.metaKey)){var P=y.keyCode,X=this._map,st;if(P in this._panKeys){if(!X._panAnim||!X._panAnim._inProgress)if(st=this._panKeys[P],y.shiftKey&&(st=R(st).multiplyBy(3)),X.options.maxBounds&&(st=X._limitOffset(R(st),X.options.maxBounds)),X.options.worldCopyJump){var ft=X.wrapLatLng(X.unproject(X.project(X.getCenter()).add(st)));X.panTo(ft)}else X.panBy(st)}else if(P in this._zoomKeys)X.setZoom(X.getZoom()+(y.shiftKey?3:1)*this._zoomKeys[P]);else if(P===27&&X._popup&&X._popup.options.closeOnEscapeKey)X.closePopup();else return;Pt(y)}}});be.addInitHook("addHandler","keyboard",js),be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xa=Pe.extend({addHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ci(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(y){var P=Zt(y),X=this._map.options.wheelDebounceTime;this._delta+=P,this._lastMousePos=this._map.mouseEventToContainerPoint(y),this._startTime||(this._startTime=+new Date);var st=Math.max(X-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),st),Pt(y)},_performZoom:function(){var y=this._map,P=y.getZoom(),X=this._map.options.zoomSnap||0;y._stop();var st=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ft=4*Math.log(2/(1+Math.exp(-Math.abs(st))))/Math.LN2,Mt=X?Math.ceil(ft/X)*X:ft,Dt=y._limitZoom(P+(this._delta>0?Mt:-Mt))-P;this._delta=0,this._startTime=null,Dt&&(y.options.scrollWheelZoom==="center"?y.setZoom(P+Dt):y.setZoomAround(this._lastMousePos,P+Dt))}});be.addInitHook("addHandler","scrollWheelZoom",xa);var Oo=600;be.mergeOptions({tapHold:jt.touchNative&&jt.safari&&jt.mobile,tapTolerance:15});var Hs=Pe.extend({addHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ci(this._map._container,"touchstart",this._onDown,this)},_onDown:function(y){if(clearTimeout(this._holdTimeout),y.touches.length===1){var P=y.touches[0];this._startPos=this._newPos=new k(P.clientX,P.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(je(document,"touchend",Rt),je(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",P))},this),Oo),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function y(){ci(document,"touchend",Rt),ci(document,"touchend touchcancel",y)},_cancel:function(){clearTimeout(this._holdTimeout),ci(document,"touchend touchcancel contextmenu",this._cancel,this),ci(document,"touchmove",this._onMove,this)},_onMove:function(y){var P=y.touches[0];this._newPos=new k(P.clientX,P.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(y,P){var X=new MouseEvent(y,{bubbles:!0,cancelable:!0,view:window,screenX:P.screenX,screenY:P.screenY,clientX:P.clientX,clientY:P.clientY});X._simulated=!0,P.target.dispatchEvent(X)}});be.addInitHook("addHandler","tapHold",Hs),be.mergeOptions({touchZoom:jt.touch,bounceAtZoomLimits:!0});var Vr=Pe.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ui(this._map._container,"leaflet-touch-zoom"),ci(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(y){var P=this._map;if(!(!y.touches||y.touches.length!==2||P._animatingZoom||this._zooming)){var X=P.mouseEventToContainerPoint(y.touches[0]),st=P.mouseEventToContainerPoint(y.touches[1]);this._centerPoint=P.getSize()._divideBy(2),this._startLatLng=P.containerPointToLatLng(this._centerPoint),P.options.touchZoom!=="center"&&(this._pinchStartLatLng=P.containerPointToLatLng(X.add(st)._divideBy(2))),this._startDist=X.distanceTo(st),this._startZoom=P.getZoom(),this._moved=!1,this._zooming=!0,P._stop(),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),Rt(y)}},_onTouchMove:function(y){if(!(!y.touches||y.touches.length!==2||!this._zooming)){var P=this._map,X=P.mouseEventToContainerPoint(y.touches[0]),st=P.mouseEventToContainerPoint(y.touches[1]),ft=X.distanceTo(st)/this._startDist;if(this._zoom=P.getScaleZoom(ft,this._startZoom),!P.options.bounceAtZoomLimits&&(this._zoom<P.getMinZoom()&&ft<1||this._zoom>P.getMaxZoom()&&ft>1)&&(this._zoom=P._limitZoom(this._zoom)),P.options.touchZoom==="center"){if(this._center=this._startLatLng,ft===1)return}else{var Mt=X._add(st)._divideBy(2)._subtract(this._centerPoint);if(ft===1&&Mt.x===0&&Mt.y===0)return;this._center=P.unproject(P.project(this._pinchStartLatLng,this._zoom).subtract(Mt),this._zoom)}this._moved||(P._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var Dt=r(P._move,P,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=tt(Dt,this,!0),Rt(y)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),ci(document,"touchmove",this._onTouchMove,this),ci(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});be.addInitHook("addHandler","touchZoom",Vr),be.BoxZoom=hl,be.DoubleClickZoom=cl,be.Drag=yn,be.Keyboard=js,be.ScrollWheelZoom=xa,be.TapHold=Hs,be.TouchZoom=Vr,n.Bounds=F,n.Browser=jt,n.CRS=ct,n.Canvas=Ur,n.Circle=Ps,n.CircleMarker=Lo,n.Class=N,n.Control=mr,n.DivIcon=$n,n.DivOverlay=xn,n.DomEvent=Ce,n.DomUtil=us,n.Draggable=Fr,n.Evented=C,n.FeatureGroup=Kr,n.GeoJSON=is,n.GridLayer=Rs,n.Handler=Pe,n.Icon=ln,n.ImageOverlay=_s,n.LatLng=dt,n.LatLngBounds=it,n.Layer=Ts,n.LayerGroup=ko,n.LineUtil=Tn,n.Map=be,n.Marker=cs,n.Mixin=va,n.Path=Zs,n.Point=k,n.PolyUtil=po,n.Polygon=To,n.Polyline=Ds,n.Popup=zs,n.PosAnimation=Ne,n.Projection=Go,n.Rectangle=Es,n.Renderer=cn,n.SVG=Os,n.SVGOverlay=gn,n.TileLayer=Qr,n.Tooltip=Gr,n.Transformation=mt,n.Util=B,n.VideoOverlay=Jr,n.bind=r,n.bounds=H,n.canvas=ss,n.circle=bs,n.circleMarker=wn,n.control=Ei,n.divIcon=ll,n.extend=e,n.featureGroup=mo,n.geoJSON=_a,n.geoJson=Po,n.gridLayer=Qs,n.icon=vs,n.imageOverlay=Fs,n.latLng=$,n.latLngBounds=ot,n.layerGroup=$s,n.map=vr,n.marker=un,n.point=R,n.polygon=ra,n.polyline=Pn,n.popup=hn,n.rectangle=Or,n.setOptions=g,n.stamp=a,n.svg=En,n.svgOverlay=nu,n.tileLayer=wa,n.tooltip=ws,n.transformation=wt,n.version=t,n.videoOverlay=fs;var Cn=window.L;n.noConflict=function(){return window.L=Cn,this},window.L=n})});var Ap=Ge((Ip,Uh)=>{(function(n,t){typeof define=="function"&&define.amd?define(["leaflet"],n):typeof Ip=="object"&&(typeof t<"u"&&t.L?Uh.exports=n(L):Uh.exports=n(Jn())),typeof t<"u"&&t.L&&(t.L.Control.Locate=n(L))})(function(n){let t=(o,l,c)=>{c=c.split(" "),c.forEach(function(h){n.DomUtil[o].call(this,l,h)})},e=(o,l)=>t("addClass",o,l),i=(o,l)=>t("removeClass",o,l),r=n.Marker.extend({initialize(o,l){n.Util.setOptions(this,l),this._latlng=o,this.createIcon()},createIcon(){let o=this.options,l="";o.color!==void 0&&(l+=`stroke:${o.color};`),o.weight!==void 0&&(l+=`stroke-width:${o.weight};`),o.fillColor!==void 0&&(l+=`fill:${o.fillColor};`),o.fillOpacity!==void 0&&(l+=`fill-opacity:${o.fillOpacity};`),o.opacity!==void 0&&(l+=`opacity:${o.opacity};`);let c=this._getIconSVG(o,l);this._locationIcon=n.divIcon({className:c.className,html:c.svg,iconSize:[c.w,c.h]}),this.setIcon(this._locationIcon)},_getIconSVG(o,l){let c=o.radius,h=o.weight,d=c+h,p=d*2;return{className:"leaflet-control-locate-location",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${p}" height="${p}" version="1.1" viewBox="-${d} -${d} ${p} ${p}"><circle r="`+c+'" style="'+l+'" /></svg>',w:p,h:p}},setStyle(o){n.Util.setOptions(this,o),this.createIcon()}}),s=r.extend({initialize(o,l,c){n.Util.setOptions(this,c),this._latlng=o,this._heading=l,this.createIcon()},setHeading(o){this._heading=o},_getIconSVG(o,l){let c=o.radius,h=o.width+o.weight,d=(c+o.depth+o.weight)*2,p=`M0,0 l${o.width/2},${o.depth} l-${h},0 z`,g=`transform: rotate(${this._heading}deg)`;return{className:"leaflet-control-locate-heading",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${h}" height="${d}" version="1.1" viewBox="-${h/2} 0 ${h} ${d}" style="${g}"><path d="`+p+'" style="'+l+'" /></svg>',w:h,h:d}}}),a=n.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds(o){return o.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:r,compassClass:s,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"leaflet-control-locate-location-arrow",iconLoading:"leaflet-control-locate-spinner",iconElementTag:"span",textElementTag:"small",circlePadding:[0,0],metric:!0,createButtonCallback(o,l){let c=n.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",o);c.title=l.strings.title,c.href="#",c.setAttribute("role","button");let h=n.DomUtil.create(l.iconElementTag,l.icon,c);if(l.strings.text!==void 0){let d=n.DomUtil.create(l.textElementTag,"leaflet-locate-text",c);d.textContent=l.strings.text,c.classList.add("leaflet-locate-text-active"),c.parentNode.style.display="flex",l.icon.length>0&&h.classList.add("leaflet-locate-icon")}return{link:c,icon:h}},onLocationError(o,l){alert(o.message)},onLocationOutsideMapBounds(o){o.stop(),alert(o.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize(o){for(let l in o)typeof this.options[l]=="object"?n.extend(this.options[l],o[l]):this.options[l]=o[l];this.options.followMarkerStyle=n.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=n.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=n.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd(o){let l=n.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=l,this._map=o,this._layer=this.options.layer||new n.LayerGroup,this._layer.addTo(o),this._event=void 0,this._compassHeading=null,this._prevBounds=null;let c=this.options.createButtonCallback(l,this.options);return this._link=c.link,this._icon=c.icon,n.DomEvent.on(this._link,"click",function(h){n.DomEvent.stopPropagation(h),n.DomEvent.preventDefault(h),this._onClick()},this).on(this._link,"dblclick",n.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),l},_onClick(){this._justClicked=!0;let o=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){let l=this.options.clickBehavior,c=l.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(c=o?l.inView:l.inViewNotFollowing),l[c]&&(c=l[c]),c){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds);break}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate(){if(!this._active&&(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),this.options.showCompass)){let o="ondeviceorientationabsolute"in window;if(o||"ondeviceorientation"in window){let l=this,c=function(){n.DomEvent.on(window,o?"deviceorientationabsolute":"deviceorientation",l._onDeviceOrientation,l)};DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(h){h==="granted"&&c()}):c()}}},_deactivate(){this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?n.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&n.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this._justClicked&&this.options.initialZoomLevel!==!1){var o=this.options.flyTo?this._map.flyTo:this._map.setView;o.bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel)}else if(this.options.keepCurrentZoomLevel){var o=this.options.flyTo?this._map.flyTo:this._map.panTo;o.bind(this._map)([this._event.latitude,this._event.longitude])}else{var o=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;this._ignoreEvent=!0,o.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.initialZoomLevel||this.options.locateOptions.maxZoom}),n.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this)}},_drawCompass(){if(!this._event)return;let o=this._event.latlng;if(this.options.showCompass&&o&&this._compassHeading!==null){let l=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle;this._compass?(this._compass.setLatLng(o),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(l)):this._compass=new this.options.compassClass(o,this._compassHeading,l).addTo(this._layer)}this._compass&&(!this.options.showCompass||this._compassHeading===null)&&(this._compass.removeFrom(this._layer),this._compass=null)},_drawMarker(){this._event.accuracy===void 0&&(this._event.accuracy=0);let o=this._event.accuracy,l=this._event.latlng;if(this.options.drawCircle){let g=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(l).setRadius(o).setStyle(g):this._circle=n.circle(l,o,g).addTo(this._layer)}let c,h;if(this.options.metric?(c=o.toFixed(0),h=this.options.strings.metersUnit):(c=(o*3.2808399).toFixed(0),h=this.options.strings.feetUnit),this.options.drawMarker){let g=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(l),this._marker.setStyle&&this._marker.setStyle(g)):this._marker=new this.options.markerClass(l,g).addTo(this._layer)}this._drawCompass();let d=this.options.strings.popup;function p(){return typeof d=="string"?n.Util.template(d,{distance:c,unit:h}):typeof d=="function"?d({distance:c,unit:h}):d}this.options.showPopup&&d&&this._marker&&this._marker.bindPopup(p())._popup.setLatLng(l),this.options.showPopup&&d&&this._compass&&this._compass.bindPopup(p())._popup.setLatLng(l)},_removeMarker(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading(o){!isNaN(parseFloat(o))&&isFinite(o)?(o=Math.round(o),this._compassHeading=o,n.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration(){this._setCompassHeading()},_onDeviceOrientation(o){this._active&&(o.webkitCompassHeading?this._setCompassHeading(o.webkitCompassHeading):o.absolute&&o.alpha&&this._setCompassHeading(360-o.alpha))},_onLocationError(o){o.code==3&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(o,this))},_onLocationFound(o){if(!(this._event&&this._event.latlng.lat===o.latlng.lat&&this._event.latlng.lng===o.latlng.lng&&this._event.accuracy===o.accuracy)&&this._active){switch(this._event=o,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":!this._userPanned&&!this._userZoomed&&this.setView();break;case"always":this.setView();break;case!1:break}this._justClicked=!1}},_onDrag(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing(){if(!this._active)return!1;if(this.options.setView==="always")return!0;if(this.options.setView==="untilPan")return!this._userPanned;if(this.options.setView==="untilPanOrZoom")return!this._userPanned&&!this._userZoomed},_isOutsideMapBounds(){return this._event===void 0?!1:this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses(o){o=="requesting"?(i(this._container,"active following"),e(this._container,"requesting"),i(this._icon,this.options.icon),e(this._icon,this.options.iconLoading)):o=="active"?(i(this._container,"requesting following"),e(this._container,"active"),i(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)):o=="following"&&(i(this._container,"requesting"),e(this._container,"active following"),i(this._icon,this.options.iconLoading),e(this._icon,this.options.icon))},_cleanClasses(){n.DomUtil.removeClass(this._container,"requesting"),n.DomUtil.removeClass(this._container,"active"),n.DomUtil.removeClass(this._container,"following"),i(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)},_resetVariables(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return n.control.locate=o=>new n.Control.Locate(o),a},window)});var Np=Ge((qC,Vh)=>{(function(n){if(typeof define=="function"&&define.amd)define(["leaflet"],n);else if(typeof Vh<"u")Vh.exports=n(Jn());else{if(typeof window.L>"u")throw new Error("Leaflet must be loaded first");n(window.L)}})(function(n){var t="polyline-measure-control",e="polyline-measure-unicode-icon";return n.Control.PolylineMeasure=n.Control.extend({options:{position:"topleft",unit:"metres",clearMeasurementsOnStop:!0,showBearings:!1,bearingTextIn:"In",bearingTextOut:"Out",tooltipTextFinish:"Click to <b>finish line</b><br>",tooltipTextDelete:"Press SHIFT-key and click to <b>delete point</b>",tooltipTextMove:"Click and drag to <b>move point</b><br>",tooltipTextResume:"<br>Press CTRL-key and click to <b>resume line</b>",tooltipTextAdd:"Press CTRL-key and click to <b>add point</b>",measureControlTitleOn:"Turn on PolylineMeasure",measureControlTitleOff:"Turn off PolylineMeasure",measureControlLabel:"&#8614;",measureControlClasses:[],showClearControl:!1,clearControlTitle:"Clear Measurements",clearControlLabel:"&times;",clearControlClasses:[],showUnitControl:!1,distanceShowSameUnit:!1,unitControlTitle:{text:"Change Units",metres:"metres",landmiles:"land miles",nauticalmiles:"nautical miles"},unitControlLabel:{metres:"m",kilometres:"km",feet:"ft",landmiles:"mi",nauticalmiles:"nm"},tempLine:{color:"#00f",weight:2},fixedLine:{color:"#006",weight:2},startCircle:{color:"#000",weight:1,fillColor:"#0f0",fillOpacity:1,radius:3},intermedCircle:{color:"#000",weight:1,fillColor:"#ff0",fillOpacity:1,radius:3},currentCircle:{color:"#000",weight:1,fillColor:"#f0f",fillOpacity:1,radius:6},endCircle:{color:"#000",weight:1,fillColor:"#f00",fillOpacity:1,radius:3}},_arcpoints:100,_circleNr:-1,_lineNr:-1,_createControl:function(i,r,s,a,o,l){var c=document.createElement("a");return c.innerHTML=i,c.setAttribute("title",r),s.forEach(function(h){c.classList.add(h)}),n.DomEvent.on(c,"click",o,l),a.appendChild(c),c},onAdd:function(i){var r=this;i.on("movestart ",function(){r._mapdragging=!0}),this._container=document.createElement("div"),this._container.classList.add("leaflet-bar"),n.DomEvent.disableClickPropagation(this._container);var s=this.options.measureControlTitleOn,a=this.options.measureControlLabel,o=this.options.measureControlClasses;if(a.indexOf("&")!=-1&&o.push(e),this._arrPolylines=[],this._measureControl=this._createControl(a,s,o,this._container,this._toggleMeasure,this),this._defaultControlBgColor=this._measureControl.style.backgroundColor,this._measureControl.setAttribute("id",t),this.options.showClearControl){var s=this.options.clearControlTitle,a=this.options.clearControlLabel,o=this.options.clearControlClasses;a.indexOf("&")!=-1&&o.push(e),this._clearMeasureControl=this._createControl(a,s,o,this._container,this._clearAllMeasurements,this),this._clearMeasureControl.classList.add("polyline-measure-clearControl")}if(this.options.showUnitControl){if(this.options.unit=="metres")var a=this.options.unitControlLabel.metres,s=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]";else if(this.options.unit=="landmiles")var a=this.options.unitControlLabel.landmiles,s=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]";else var a=this.options.unitControlLabel.nauticalmiles,s=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]";var o=[];this._unitControl=this._createControl(a,s,o,this._container,this._changeUnit,this),this._unitControl.setAttribute("id","unitControlId")}return this._container},onRemove:function(){this._measuring&&this._toggleMeasure()},_saveNonpolylineEvents:function(){this._nonpolylineTargets=this._map._targets,typeof this._polylineTargets<"u"?this._map._targets=this._polylineTargets:this._map._targets={}},_savePolylineEvents:function(){this._polylineTargets=this._map._targets,this._map._targets=this._nonpolylineTargets},_toggleMeasure:function(){this._measuring=!this._measuring,this._measuring?(this._mapdragging=!1,this._saveNonpolylineEvents(),this._measureControl.classList.add("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this.options.backgroundColor,this._measureControl.title=this.options.measureControlTitleOff,this._oldCursor=this._map._container.style.cursor,this._map._container.style.cursor="crosshair",this._doubleClickZoom=this._map.doubleClickZoom.enabled(),this._map.doubleClickZoom.disable(),this._layerPaint||(this._layerPaint=n.layerGroup().addTo(this._map)),this._map.on("mousemove",this._mouseMove,this),this._map.on("click",this._mouseClick,this),n.DomEvent.on(document,"keydown",this._onKeyDown,this),this._resetPathVariables()):(this._savePolylineEvents(),this._measureControl.classList.remove("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this._defaultControlBgColor,this._measureControl.title=this.options.measureControlTitleOn,this._map._container.style.cursor=this._oldCursor,this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.off("mouseup",this._dragCircleMouseup,this),n.DomEvent.off(document,"keydown",this._onKeyDown,this),this._doubleClickZoom&&this._map.doubleClickZoom.enable(),this.options.clearMeasurementsOnStop&&this._layerPaint&&this._clearAllMeasurements(),this._cntCircle!==0&&this._finishPolylinePath()),this._map.fire("polylinemeasure:toggle",{sttus:this._measuring})},_clearAllMeasurements:function(){this._cntCircle!==void 0&&this._cntCircle!==0&&this._finishPolylinePath(),this._layerPaint&&this._layerPaint.clearLayers(),this._arrPolylines=[],this._map.fire("polylinemeasure:clear")},_changeUnit:function(){this.options.unit=="metres"?(this.options.unit="landmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.landmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):this.options.unit=="landmiles"?(this.options.unit="nauticalmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.nauticalmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"):(this.options.unit="metres",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.metres,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"),this._currentLine&&this._computeDistance(this._currentLine),this._arrPolylines.map(this._computeDistance.bind(this))},_computeDistance:function(i){var r=0;i.circleCoords.map(function(s,a){if(a>=1){var o=i.circleCoords[a-1].distanceTo(i.circleCoords[a]);r+=o,this._updateTooltip(i.tooltips[a],i.tooltips[a-1],r,o,i.circleCoords[a-1],i.circleCoords[a])}}.bind(this))},_onKeyDown:function(i){if(i.keyCode===27){if(this._resumeFirstpointFlag===!0){this._resumeFirstpointFlag=!1;var r=this._lineNr;this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._layerPaint.removeLayer(this._tooltipNew),this._arrPolylines[r].circleMarkers[0].setStyle(this.options.startCircle);var s="",a=0;this.options.showBearings===!0&&(s=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),s=s+'<div class="polyline-measure-tooltip-difference">+0</div>',s=s+'<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[r].tooltips[0]._icon.innerHTML=s,this._arrPolylines[r].tooltips.map(function(o,l){if(l>=1){var c=this._arrPolylines[r].circleCoords[l-1].distanceTo(this._arrPolylines[r].circleCoords[l]),h=this._arrPolylines[r].circleCoords[l-1],d=this._arrPolylines[r].circleCoords[l];a+=c;var p=this._arrPolylines[r].tooltips[l-1];this._updateTooltip(o,p,a,c,h,d)}}.bind(this)),this._map.on("mousemove",this._mouseMove,this);return}this._currentLine?this._finishPolylinePath(i):this._toggleMeasure()}},_getDistance:function(i){var r=i,s;return this.options.unit==="nauticalmiles"?(s=this.options.unitControlLabel.nauticalmiles,r>=185200?r=(r/1852).toFixed(0):r>=18520?r=(r/1852).toFixed(1):r>=1852?r=(r/1852).toFixed(2):this.options.distanceShowSameUnit?r=(r/1852).toFixed(3):(r=(r/.3048).toFixed(0),s=this.options.unitControlLabel.feet)):this.options.unit==="landmiles"?(s=this.options.unitControlLabel.landmiles,r>=160934.4?r=(r/1609.344).toFixed(0):r>=16093.44?r=(r/1609.344).toFixed(1):r>=1609.344?r=(r/1609.344).toFixed(2):this.options.distanceShowSameUnit?r=(r/1609.344).toFixed(3):(r=(r/.3048).toFixed(0),s=this.options.unitControlLabel.feet)):(s=this.options.unitControlLabel.kilometres,r>=1e5?r=(r/1e3).toFixed(0):r>=1e4?r=(r/1e3).toFixed(1):r>=1e3?r=(r/1e3).toFixed(2):this.options.distanceShowSameUnit?r=(r/1e3).toFixed(3):(r=r.toFixed(0),s=this.options.unitControlLabel.metres)),{value:r,unit:s}},_polylineArc:function(i,r){function s(g){var m=Math.sin((1-g)*d)/Math.sin(d),_=Math.sin(g*d)/Math.sin(d),v=m*Math.cos(o)*Math.cos(l)+_*Math.cos(c)*Math.cos(h),x=m*Math.cos(o)*Math.sin(l)+_*Math.cos(c)*Math.sin(h),S=m*Math.sin(o)+_*Math.sin(c),O=180/Math.PI*Math.atan2(S,Math.sqrt(Math.pow(v,2)+Math.pow(x,2))),D=180/Math.PI*Math.atan2(x,v),U=D-l*180/Math.PI;function z(V){return Math[V>0?"floor":"ceil"](V)}return U<0?D=D-z((U-180)/360)*360:D=D-z((U+180)/360)*360,[O,D]}function a(g){for(var m=[],_=1/(g-1),v=0;v<g;v++){var x=_*v,S=s(x);m.push(S)}return m}var o=i.lat,l=i.lng,c=r.lat,h=r.lng;o=o*Math.PI/180,l=l*Math.PI/180,c=c*Math.PI/180,h=h*Math.PI/180;var d=2*Math.asin(Math.sqrt(Math.pow(Math.sin((o-c)/2),2)+Math.cos(o)*Math.cos(c)*Math.pow(Math.sin((l-h)/2),2))),p;return d===0?p=[[o,l]]:p=a(this._arcpoints),p},_updateTooltip:function(i,r,s,a,o,l){var c=function(S,O,D){var U=S.lat/180*Math.PI,z=O.lat/180*Math.PI,V=S.lng/180*Math.PI,G=O.lng/180*Math.PI,tt=Math.sin(G-V)*Math.cos(z),K=Math.cos(U)*Math.sin(z)-Math.sin(U)*Math.cos(z)*Math.cos(G-V);if(D==="inbound")var B=(Math.atan2(tt,K)*180/Math.PI+180).toFixed(0);else var B=(Math.atan2(tt,K)*180/Math.PI+360).toFixed(0);return B%360},h=c(l,o,"inbound"),d=c(o,l,"outbound"),p=this._getDistance(s),g=this._getDistance(a),m="";if(g.value>0&&(this.options.showBearings===!0&&(m=this.options.bearingTextIn+": "+h+"\xB0<br>"+this.options.bearingTextOut+":---\xB0"),m+='<div class="polyline-measure-tooltip-difference">+'+g.value+"&nbsp;"+g.unit+"</div>"),m+='<div class="polyline-measure-tooltip-total">'+p.value+"&nbsp;"+p.unit+"</div>",i._icon.innerHTML=m,this.options.showBearings===!0&&r){var _=r._icon.innerHTML,v=new RegExp(this.options.bearingTextOut+".*\xB0"),x=_.replace(v,this.options.bearingTextOut+": "+d+"\xB0");r._icon.innerHTML=x}},_drawArrow:function(i){var r=Math.round(i.length/2),s=i[r-1],a=i[r],o=a[1]-s[1],l=a[0]-s[0],c=[s[0]+l/2,s[1]+o/2],h=-Math.atan2(l,o)*57.29578,d=n.divIcon({className:"",iconSize:[16,16],iconAnchor:[8,8],html:"<div style = 'font-size: 16px; line-height: 16px; vertical-align:top; transform: rotate("+h+"deg)'>&#x27a4;</div>"}),p=n.marker(c,{icon:d,zIndexOffset:-50}).addTo(this._layerPaint);return this._currentLine||p.bindTooltip(this.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),p.on("click",this._clickedArrow,this),p},_mouseMove:function(i){var r=i.latlng;if(this._map.on("click",this._mouseClick,this),!(!r||!this._currentLine)){var s=this._currentLine.circleCoords.last();this._rubberlinePath.setLatLngs(this._polylineArc(s,r));var a=this._currentLine.tooltips.last(),o=this._currentLine.tooltips.slice(-2,-1)[0];a.setLatLng(r);var l=r.distanceTo(s);this._updateTooltip(a,o,this._currentLine.distance+l,l,s,r)}},_startLine:function(i){var r=n.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),s=function(){return this.slice(-1)[0]};this._rubberlinePath=n.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack();var a=this;this._currentLine={id:0,circleCoords:[],circleMarkers:[],arrowMarkers:[],tooltips:[],distance:0,polylinePath:n.polyline([],{color:this.options.fixedLine.color,weight:this.options.fixedLine.weight,interactive:!1}).addTo(this._layerPaint).bringToBack(),handleMarkers:function(c){var h=this.circleMarkers.last();h&&(h.bindTooltip(a.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),h.off("click",a._finishPolylinePath,a),this.circleMarkers.length===1?h.setStyle(a.options.startCircle):h.setStyle(a.options.intermedCircle));var d=new n.CircleMarker(c,a.options.currentCircle).addTo(a._layerPaint);d.bindTooltip(a.options.tooltipTextFinish+a.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),d.cntLine=a._currentLine.id,d.cntCircle=a._cntCircle,a._cntCircle++,d.on("mousedown",a._dragCircle,a),d.on("click",a._finishPolylinePath,a),this.circleMarkers.push(d)},getNewToolTip:function(c){return n.marker(c,{icon:r,interactive:!1})},addPoint:function(c){var h=this.circleCoords.last();if(!(h&&h.equals(c))){if(this.circleCoords.push(c),this.circleCoords.length>1){var d=a._polylineArc(h,c);this.circleCoords.length>2&&d.shift(),this.polylinePath.setLatLngs(this.polylinePath.getLatLngs().concat(d));var p=a._drawArrow(d);p.cntLine=a._currentLine.id,p.cntArrow=a._cntCircle-1,a._currentLine.arrowMarkers.push(p);var g=h.distanceTo(c);this.distance+=g;var m=a._currentLine.tooltips.last(),_=a._currentLine.tooltips.slice(-1,-2)[0];a._updateTooltip(m,_,this.distance,g,h,c)}m&&m.setLatLng(c);var v=this.getNewToolTip(c);v.addTo(a._layerPaint),this.tooltips.push(v),this.handleMarkers(c)}},finalize:function(){if(a._layerPaint.removeLayer(this.tooltips.last()),this.tooltips.pop(),a._layerPaint.removeLayer(a._rubberlinePath),this.circleCoords.length>1){this.tooltips.last()._icon.classList.add("polyline-measure-tooltip-end");var c=this.circleMarkers.last();c.setStyle(a.options.endCircle),c.unbindTooltip(),a._currentLine.circleMarkers.map(function(h){h.bindTooltip(a.options.tooltipTextMove+a.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})}),a._currentLine.circleMarkers[0].bindTooltip(a.options.tooltipTextMove+a.options.tooltipTextDelete+a.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),c.bindTooltip(a.options.tooltipTextMove+a.options.tooltipTextDelete+a.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),a._currentLine.arrowMarkers.map(function(h){h.bindTooltip(a.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})}),c.off("click",a._finishPolylinePath,a),c.on("click",a._resumePolylinePath,a),a._arrPolylines.push(this)}else a._layerPaint.removeLayer(this.circleMarkers.last()),a._layerPaint.removeLayer(this.tooltips.last());a._resetPathVariables()}};var o=n.marker(i,{icon:r,interactive:!1});o.addTo(this._layerPaint);var l="";this.options.showBearings===!0&&(l=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),l=l+'<div class="polyline-measure-tooltip-difference">+0</div>',l=l+'<div class="polyline-measure-tooltip-total">0</div>',o._icon.innerHTML=l,this._currentLine.tooltips.push(o),this._currentLine.circleCoords.last=s,this._currentLine.tooltips.last=s,this._currentLine.circleMarkers.last=s,this._currentLine.id=this._arrPolylines.length},_mouseClick:function(i){!i.latlng||this._finishCircleScreencoords&&this._finishCircleScreencoords.equals(i.containerPoint)||(!this._currentLine&&!this._mapdragging&&(this._startLine(i.latlng),this._map.fire("polylinemeasure:start",this._currentLine)),this._mapdragging?this._mapdragging=!1:(this._currentLine.addPoint(i.latlng),this._map.fire("polylinemeasure:add",i),this._map.fire("polylinemeasure:change",this._currentLine)))},_finishPolylinePath:function(i){this._map.fire("polylinemeasure:finish",this._currentLine),this._currentLine.finalize(),i&&(this._finishCircleScreencoords=i.containerPoint)},_resumePolylinePath:function(i){if(i.originalEvent.ctrlKey===!0){this._currentLine=this._arrPolylines[i.target.cntLine],this._rubberlinePath=n.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._currentLine.tooltips.last()._icon.classList.remove("polyline-measure-tooltip-end");var r=this._currentLine.getNewToolTip(i.latlng);r.addTo(this._layerPaint),this._currentLine.tooltips.push(r),this._currentLine.circleMarkers.last().unbindTooltip(),this._currentLine.circleMarkers.last().bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.last().setStyle(this.options.currentCircle),this._cntCircle=this._currentLine.circleCoords.length,this._map.fire("polylinemeasure:resume",this._currentLine)}},_resetPathVariables:function(){this._cntCircle=0,this._currentLine=null},_clickedArrow:function(i){if(i.originalEvent.ctrlKey){var r=i.target.cntLine,s=i.target.cntArrow;this._arrPolylines[r].arrowMarkers[s].removeFrom(this._layerPaint);var a=new n.CircleMarker(i.latlng,this.options.intermedCircle).addTo(this._layerPaint);a.cntLine=r,a.on("mousedown",this._dragCircle,this),a.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[r].circleMarkers.splice(s+1,0,a),this._arrPolylines[r].circleMarkers.map(function(d,p){d.cntCircle=p}),this._arrPolylines[r].circleCoords.splice(s+1,0,i.latlng),lineCoords=this._arrPolylines[r].polylinePath.getLatLngs();var o=this._polylineArc(this._arrPolylines[r].circleCoords[s],i.latlng);o.pop();var l=this._polylineArc(i.latlng,this._arrPolylines[r].circleCoords[s+2]);Array.prototype.splice.apply(lineCoords,[s*(this._arcpoints-1),this._arcpoints].concat(o,l)),this._arrPolylines[r].polylinePath.setLatLngs(lineCoords);var c=this._drawArrow(o);this._arrPolylines[r].arrowMarkers[s]=c,c=this._drawArrow(l),this._arrPolylines[r].arrowMarkers.splice(s+1,0,c),this._arrPolylines[r].arrowMarkers.map(function(d,p){d.cntLine=r,d.cntArrow=p}),this._tooltipNew=n.marker(i.latlng,{icon:n.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint),this._arrPolylines[r].tooltips.splice(s+1,0,this._tooltipNew);var h=0;this._arrPolylines[r].tooltips.map(function(d,p){if(p>=1){var g=this._arrPolylines[r].circleCoords[p-1].distanceTo(this._arrPolylines[r].circleCoords[p]),m=this._arrPolylines[r].circleCoords[p-1],_=this._arrPolylines[r].circleCoords[p];h+=g;var v=this._arrPolylines[r].tooltips[p-1];this._updateTooltip(d,v,h,g,m,_)}}.bind(this)),this._map.fire("polylinemeasure:insert",i),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])}},_dragCircleMouseup:function(){this._circleNr===0||this._circleNr===this._arrPolylines[this._lineNr].circleCoords.length-1?this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}):this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._resetPathVariables(),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.dragging.enable(),this._map.on("mousemove",this._mouseMove,this),this._map.off("mouseup",this._dragCircleMouseup,this),this._map.fire("polylinemeasure:move",this._e1),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])},_dragCircleMousemove:function(i){var r=i.latlng.lat,s=i.latlng.lng,a=r-this._mouseStartingLat,o=s-this._mouseStartingLng,l=n.latLng(this._circleStartingLat+a,this._circleStartingLng+o),c=this._arcpoints,h=this._e1.target.cntLine;this._lineNr=h;var d=this._e1.target.cntCircle;this._circleNr=d,this._e1.target.setLatLng(l),this._e1.target.unbindTooltip(),this._arrPolylines[h].circleCoords[d]=l;var p=this._arrPolylines[h].polylinePath.getLatLngs();if(d>=1){var g=this._polylineArc(this._arrPolylines[h].circleCoords[d-1],l);Array.prototype.splice.apply(p,[(d-1)*(c-1),c].concat(g));var m=this._drawArrow(g);m.cntLine=h,m.cntArrow=d-1,this._arrPolylines[h].arrowMarkers[d-1].removeFrom(this._layerPaint),this._arrPolylines[h].arrowMarkers[d-1]=m}if(d<this._arrPolylines[h].circleCoords.length-1){var _=this._polylineArc(l,this._arrPolylines[h].circleCoords[d+1]);Array.prototype.splice.apply(p,[d*(c-1),c].concat(_)),m=this._drawArrow(_),m.cntLine=h,m.cntArrow=d,this._arrPolylines[h].arrowMarkers[d].removeFrom(this._layerPaint),this._arrPolylines[h].arrowMarkers[d]=m}this._arrPolylines[h].polylinePath.setLatLngs(p),d>=0&&this._arrPolylines[h].tooltips[d].setLatLng(l);var v=0;this._arrPolylines[h].tooltips.map(function(x,S){if(S>=1){var O=this._arrPolylines[h].circleCoords[S-1].distanceTo(this._arrPolylines[h].circleCoords[S]),D=this._arrPolylines[h].circleCoords[S-1],U=this._arrPolylines[h].circleCoords[S];v+=O,this._arrPolylines[h].distance=v;var z=this._arrPolylines[h].tooltips[S-1];this._updateTooltip(x,z,v,O,D,U)}}.bind(this)),this._map.on("mouseup",this._dragCircleMouseup,this)},_resumeFirstpointMousemove:function(i){var r=this._lineNr;this._map.on("click",this._resumeFirstpointClick,this);var s=i.latlng;this._rubberlinePath2.setLatLngs(this._polylineArc(s,currentCircleCoords)),this._tooltipNew.setLatLng(s);var a=0,o=s.distanceTo(this._arrPolylines[r].circleCoords[0]),l=s,c=this._arrPolylines[r].circleCoords[0];a+=o;var h=this._tooltipNew,d=this._arrPolylines[r].tooltips[0];this._updateTooltip(d,h,a,o,l,c),this._arrPolylines[r].tooltips.map(function(p,g){if(g>=1){var m=this._arrPolylines[r].circleCoords[g-1].distanceTo(this._arrPolylines[r].circleCoords[g]),_=this._arrPolylines[r].circleCoords[g-1],v=this._arrPolylines[r].circleCoords[g];a+=m;var x=this._arrPolylines[r].tooltips[g-1];this._updateTooltip(p,x,a,m,_,v)}}.bind(this))},_resumeFirstpointClick:function(i){var r=this._lineNr;this._resumeFirstpointFlag=!1,this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._arrPolylines[r].circleMarkers[0].setStyle(this.options.intermedCircle),this._arrPolylines[r].circleMarkers[0].unbindTooltip(),this._arrPolylines[r].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"});var s=new n.CircleMarker(i.latlng,this.options.startCircle).addTo(this._layerPaint);s.cntLine=r,s.cntCircle=0,s.on("mousedown",this._dragCircle,this),s.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[r].circleMarkers.unshift(s),this._arrPolylines[r].circleMarkers.map(function(l,c){l.cntCircle=c}),this._arrPolylines[r].circleCoords.unshift(i.latlng);var a=this._polylineArc(i.latlng,currentCircleCoords),o=this._drawArrow(a);this._arrPolylines[r].arrowMarkers.unshift(o),this._arrPolylines[r].arrowMarkers.map(function(l,c){l.cntLine=r,l.cntArrow=c}),a.pop(),this._arrPolylines[r].polylinePath.setLatLngs(a.concat(this._arrPolylines[r].polylinePath.getLatLngs())),this._arrPolylines[r].tooltips.unshift(this._tooltipNew),this._map.on("mousemove",this._mouseMove,this)},_dragCircle:function(i){var r=this._arcpoints;if(i.originalEvent.ctrlKey){if(this._map.off("click",this._mouseClick,this),i.target.cntCircle===0){this._resumeFirstpointFlag=!0,this._lineNr=i.target.cntLine;var s=this._lineNr;this._circleNr=i.target.cntCircle,currentCircleCoords=i.latlng,this._arrPolylines[s].circleMarkers[0].setStyle(this.options.currentCircle),this._rubberlinePath2=n.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._tooltipNew=n.marker(currentCircleCoords,{icon:n.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint);var a="";this.options.showBearings===!0&&(a=a+this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),a=a+'<div class="polyline-measure-tooltip-difference">+0</div>',a=a+'<div class="polyline-measure-tooltip-total">0</div>',this._tooltipNew._icon.innerHTML=a,this._map.off("mousemove",this._mouseMove,this),this._map.on("mousemove",this._resumeFirstpointMousemove,this)}return}if(i.originalEvent.shiftKey){this._lineNr=i.target.cntLine;var s=this._lineNr;this._circleNr=i.target.cntCircle;var o=this._circleNr;if(this._arrPolylines[s]){if(this._arrPolylines[s].circleMarkers.length===2){this._layerPaint.removeLayer(this._arrPolylines[s].circleMarkers[1]),this._layerPaint.removeLayer(this._arrPolylines[s].tooltips[1]),this._layerPaint.removeLayer(this._arrPolylines[s].circleMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[s].tooltips[0]),this._layerPaint.removeLayer(this._arrPolylines[s].arrowMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[s].polylinePath),this._map.fire("polylinemeasure:remove",i),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);return}this._arrPolylines[s].circleCoords.splice(o,1),this._arrPolylines[s].circleMarkers[o].removeFrom(this._layerPaint),this._arrPolylines[s].circleMarkers.splice(o,1),this._arrPolylines[s].circleMarkers.map(function(g,m){g.cntCircle=m});var l=this._arrPolylines[s].polylinePath.getLatLngs();if(this._arrPolylines[s].tooltips[o].removeFrom(this._layerPaint),this._arrPolylines[s].tooltips.splice(o,1),!this._arrPolylines[s].circleMarkers.length){this._arrPolylines.splice(s,1),this._arrPolylines.forEach(function(g,m){g.circleMarkers.map(function(_){_.cntLine=m}),g.arrowMarkers.map(function(_){_.cntLine=m})});return}if(o===0){this._arrPolylines[s].circleMarkers[0].setStyle(this.options.startCircle),l.splice(0,r-1),this._arrPolylines[s].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[s].arrowMarkers[o].removeFrom(this._layerPaint),this._arrPolylines[s].arrowMarkers.splice(0,1);var a="";this.options.showBearings===!0&&(a=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),a=a+'<div class="polyline-measure-tooltip-difference">+0</div>',a=a+'<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[s].tooltips[0]._icon.innerHTML=a}else if(o===this._arrPolylines[s].circleCoords.length)this._arrPolylines[s].circleMarkers[o-1].on("click",this._resumePolylinePath,this),this._arrPolylines[s].circleMarkers[o-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[s].circleMarkers.slice(-1)[0].setStyle(this.options.endCircle),this._arrPolylines[s].tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),l.splice(-(r-1),r-1),this._arrPolylines[s].arrowMarkers[o-1].removeFrom(this._layerPaint),this._arrPolylines[s].arrowMarkers.splice(-1,1);else{newLineSegment=this._polylineArc(this._arrPolylines[s].circleCoords[o-1],this._arrPolylines[s].circleCoords[o]),Array.prototype.splice.apply(l,[(o-1)*(r-1),2*r-1].concat(newLineSegment)),this._arrPolylines[s].arrowMarkers[o-1].removeFrom(this._layerPaint),this._arrPolylines[s].arrowMarkers[o].removeFrom(this._layerPaint);var c=this._drawArrow(newLineSegment);this._arrPolylines[s].arrowMarkers.splice(o-1,2,c)}this._arrPolylines[s].polylinePath.setLatLngs(l),this._arrPolylines[s].arrowMarkers.map(function(g,m){g.cntLine=s,g.cntArrow=m});var h=0;this._arrPolylines[s].tooltips.map(function(g,m){if(m>=1){var _=this._arrPolylines[s].circleCoords[m-1].distanceTo(this._arrPolylines[s].circleCoords[m]),v=this._arrPolylines[s].circleCoords[m-1],x=this._arrPolylines[s].circleCoords[m];h+=_,this._arrPolylines[s].distance=h;var S=this._arrPolylines[s].tooltips[m-1];this._updateTooltip(g,S,h,_,v,x)}}.bind(this))}else{if(this._cntCircle--,this._currentLine.circleMarkers.length===1){this._currentLine.finalize();return}if(this._currentLine.circleCoords.splice(o,1),this._currentLine.circleMarkers[o].removeFrom(this._layerPaint),this._currentLine.circleMarkers.splice(o,1),this._currentLine.circleMarkers.map(function(g,m){g.cntCircle=m}),l=this._currentLine.polylinePath.getLatLngs(),this._currentLine.tooltips[o].removeFrom(this._layerPaint),this._currentLine.tooltips.splice(o,1),o===0){this._currentLine.circleMarkers.length===1?this._currentLine.circleMarkers[0].setStyle(this.options.currentCircle):this._currentLine.circleMarkers[0].setStyle(this.options.startCircle),l.splice(0,r-1),this._currentLine.circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.arrowMarkers[o].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(0,1);var a="";this.options.showBearings===!0&&(a=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),a=a+'<div class="polyline-measure-tooltip-difference">+0</div>',a=a+'<div class="polyline-measure-tooltip-total">0</div>',this._currentLine.tooltips[0]._icon.innerHTML=a}else o===this._currentLine.circleCoords.length?(this._currentLine.circleMarkers[o-1].on("click",this._resumePolylinePath,this),this._currentLine.circleMarkers[o-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.slice(-1)[0].setStyle(this.options.currentCircle),this._currentLine.tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),l.splice(-(r-1),r-1),this._currentLine.arrowMarkers[o-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(-1,1)):(newLineSegment=this._polylineArc(this._currentLine.circleCoords[o-1],this._currentLine.circleCoords[o]),Array.prototype.splice.apply(l,[(o-1)*(r-1),2*r-1].concat(newLineSegment)),this._currentLine.arrowMarkers[o-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers[o].removeFrom(this._layerPaint),c=this._drawArrow(newLineSegment),this._currentLine.arrowMarkers.splice(o-1,2,c));this._currentLine.polylinePath.setLatLngs(l),this._currentLine.arrowMarkers.map(function(g,m){g.cntLine=s,g.cntArrow=m});var d=0;this._currentLine.tooltips.map(function(g,m,_){if(m>=1){var v,x,S=this._currentLine.tooltips[m-1],O=this._currentLine.circleCoords[m-1];m===_.length-1?(v=this._currentLine.circleCoords[m-1].distanceTo(i.latlng),x=i.latlng,this._updateTooltip(g,S,d+v,v,O,x)):(v=this._currentLine.circleCoords[m-1].distanceTo(this._currentLine.circleCoords[m]),x=this._currentLine.circleCoords[m],d+=v,this._updateTooltip(g,S,d,v,O,x))}}.bind(this)),this._currentLine.distance=d}this._map.fire("polylinemeasure:remove",i),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);return}this._e1=i,this._measuring&&this._cntCircle===0&&(this._map.dragging.disable(),this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._mouseStartingLat=i.latlng.lat,this._mouseStartingLng=i.latlng.lng,this._circleStartingLat=i.target._latlng.lat,this._circleStartingLng=i.target._latlng.lng,this._map.on("mousemove",this._dragCircleMousemove,this))},seed:function(i){i.forEach(r=>{this._toggleMeasure(),this._startLine(r[0]),r.forEach((s,a)=>{let o=n.latLng(s);this._mouseMove({latLng:o}),this._currentLine.addPoint(o),a===r.length-1&&(this._finishPolylinePath(),this._toggleMeasure())})})}}),n.Map.mergeOptions({PolylineMeasureControl:!1}),n.Map.addInitHook(function(){this.options.polylineMeasureControl&&(this.PMControl=new n.Control.PolylineMeasure,this.addControl(this.PMControl))}),n.control.polylineMeasure=function(i){return new n.Control.PolylineMeasure(i)},n.Control.PolylineMeasure})});var qh=Ge((XC,Dp)=>{var Fv=Dp.exports=function n(t,e){var i;if(t!=null)return e=(e||"").replace(/[^&"<>\']/g,""),i=`([&"<>'])`.replace(new RegExp("["+e+"]","g"),""),t.replace(new RegExp(i,"g"),function(r,s){return n.map[s]})},WC=Fv.map={">":"&gt;","<":"&lt;","'":"&apos;",'"':"&quot;","&":"&amp;"}});var Bp=Ge(($C,au)=>{var zv=qh();au.exports.attr=Wh;au.exports.tagClose=jv;au.exports.tag=Hv;function Wh(n){return Object.keys(n).length?" "+Object.keys(n).map(function(t){return t+'="'+zv(n[t])+'"'}).join(" "):""}function jv(n,t){return"<"+n+Wh(t)+"/>"}function Hv(n,t,e){return(Array.isArray(t)||typeof t=="string")&&(e=t,t={}),Array.isArray(e)&&(e=`
`+e.map(function(i){return"  "+i}).join(`
`)+`
`),"<"+n+Wh(t)+">"+e+"</"+n+">"}});var jp=Ge((YC,zp)=>{var lu=qh(),Gv=Bp(),Li=Gv.tag;zp.exports=function(t,e){return e=e||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+Li("kml",{xmlns:"http://www.opengis.net/kml/2.2"},Li("Document",Vv(e)+qv(e)+Uv(t,e)))};function Xh(n,t){return function(e){if(!e.properties||!Us.valid(e.geometry))return"";var i=Us.any(e.geometry);if(!i)return"";var r="",s="";if(n.simplestyle){var a=sb(e.properties);a&&(Us.isPoint(e.geometry)&&Kv(e.properties)?(t.indexOf(a)===-1&&(r=Qv(e.properties,a),t.push(a)),s=Li("styleUrl","#"+a),Jv(e.properties)):(Us.isPolygon(e.geometry)||Us.isLine(e.geometry))&&ib(e.properties)&&(t.indexOf(a)===-1&&(r=nb(e.properties,a),t.push(a)),s=Li("styleUrl","#"+a),rb(e.properties)))}var o={};return e.id&&(o.id=e.id.toString()),r+Li("Placemark",o,Wv(e.properties,n)+Xv(e.properties,n)+Yv(e.properties)+$v(e.properties,n)+i+s)}}function Uv(n,t){if(!n.type)return"";var e=[];switch(n.type){case"FeatureCollection":return n.features?n.features.map(Xh(t,e)).join(""):"";case"Feature":return Xh(t,e)(n);default:return Xh(t,e)({type:"Feature",geometry:n,properties:{}})}}function Vv(n){return n.documentName!==void 0?Li("name",n.documentName):""}function qv(n){return n.documentDescription!==void 0?Li("description",n.documentDescription):""}function Wv(n,t){return n[t.name]?Li("name",lu(n[t.name])):""}function Xv(n,t){return n[t.description]?Li("description",lu(n[t.description])):""}function $v(n,t){return n[t.timestamp]?Li("TimeStamp",Li("when",lu(n[t.timestamp]))):""}var Us={Point:function(n){return Li("Point",Li("coordinates",n.coordinates.join(",")))},LineString:function(n){return Li("LineString",Li("coordinates",$h(n.coordinates)))},Polygon:function(n){if(!n.coordinates.length)return"";var t=n.coordinates[0],e=n.coordinates.slice(1),i=Li("outerBoundaryIs",Li("LinearRing",Li("coordinates",$h(t)))),r=e.map(function(s){return Li("innerBoundaryIs",Li("LinearRing",Li("coordinates",$h(s))))}).join("");return Li("Polygon",i+r)},MultiPoint:function(n){return n.coordinates.length?Li("MultiGeometry",n.coordinates.map(function(t){return Us.Point({coordinates:t})}).join("")):""},MultiPolygon:function(n){return n.coordinates.length?Li("MultiGeometry",n.coordinates.map(function(t){return Us.Polygon({coordinates:t})}).join("")):""},MultiLineString:function(n){return n.coordinates.length?Li("MultiGeometry",n.coordinates.map(function(t){return Us.LineString({coordinates:t})}).join("")):""},GeometryCollection:function(n){return Li("MultiGeometry",n.geometries.map(Us.any).join(""))},valid:function(n){return n&&n.type&&(n.coordinates||n.type==="GeometryCollection"&&n.geometries&&n.geometries.every(Us.valid))},any:function(n){return Us[n.type]?Us[n.type](n):""},isPoint:function(n){return n.type==="Point"||n.type==="MultiPoint"},isPolygon:function(n){return n.type==="Polygon"||n.type==="MultiPolygon"},isLine:function(n){return n.type==="LineString"||n.type==="MultiLineString"}};function $h(n){return n.map(function(t){return t.join(",")}).join(" ")}function Yv(n){return Li("ExtendedData",{},ob(n).map(Zv).join(""))}function Zv(n){return Li("Data",{name:n[0]},Li("value",{},lu(n[1]?n[1].toString():"")))}function Kv(n){return!!(n["marker-size"]||n["marker-symbol"]||n["marker-color"])}function Jv(n){delete n["marker-size"],delete n["marker-symbol"],delete n["marker-color"],delete n["marker-shape"]}function Qv(n,t){return Li("Style",{id:t},Li("IconStyle",Li("Icon",Li("href",tb(n))))+eb(n))}function tb(n){var t=n["marker-size"]||"medium",e=n["marker-symbol"]?"-"+n["marker-symbol"]:"",i=(n["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+t.charAt(0)+e+"+"+i+".png"}function eb(n){return Li("hotSpot",{xunits:"fraction",yunits:"fraction",x:"0.5",y:"0.5"},"")}function ib(n){for(var t in n)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[t])return!0}function rb(n){delete n.stroke,delete n["stroke-opacity"],delete n["stroke-width"],delete n.fill,delete n["fill-opacity"]}function nb(n,t){var e=Li("LineStyle",Li("color",Fp(n.stroke,n["stroke-opacity"])||"ff555555")+Li("width",{},n["stroke-width"]===void 0?2:n["stroke-width"])),i="";return(n.fill||n["fill-opacity"])&&(i=Li("PolyStyle",Li("color",{},Fp(n.fill,n["fill-opacity"])||"88555555"))),Li("Style",{id:t},e+i)}function sb(n){var t="";return n["marker-symbol"]&&(t=t+"ms"+n["marker-symbol"]),n["marker-color"]&&(t=t+"mc"+n["marker-color"].replace("#","")),n["marker-size"]&&(t=t+"ms"+n["marker-size"]),n.stroke&&(t=t+"s"+n.stroke.replace("#","")),n["stroke-width"]&&(t=t+"sw"+n["stroke-width"].toString().replace(".","")),n["stroke-opacity"]&&(t=t+"mo"+n["stroke-opacity"].toString().replace(".","")),n.fill&&(t=t+"f"+n.fill.replace("#","")),n["fill-opacity"]&&(t=t+"fo"+n["fill-opacity"].toString().replace(".","")),t}function Fp(n,t){if(typeof n!="string")return"";if(n=n.replace("#","").toLowerCase(),n.length===3)n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2];else if(n.length!==6)return"";var e=n[0]+n[1],i=n[2]+n[3],r=n[4]+n[5],s="ff";return typeof t=="number"&&t>=0&&t<=1&&(s=(t*255).toString(16),s.indexOf(".")>-1&&(s=s.substr(0,s.indexOf("."))),s.length<2&&(s="0"+s)),s+r+i+e}function ob(n){var t=[];for(var e in n)n[e]?t.push([e,n[e]]):t.push([e,""]);return t}});var pu=Ge((x3,om)=>{"use strict";var sm=Object.getOwnPropertySymbols,pb=Object.prototype.hasOwnProperty,mb=Object.prototype.propertyIsEnumerable;function gb(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function yb(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(s){r[s]=s}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}om.exports=yb()?Object.assign:function(n,t){for(var e,i=gb(n),r,s=1;s<arguments.length;s++){e=Object(arguments[s]);for(var a in e)pb.call(e,a)&&(i[a]=e[a]);if(sm){r=sm(e);for(var o=0;o<r.length;o++)mb.call(e,r[o])&&(i[r[o]]=e[r[o]])}}return i}});var uc=Ge((ac,lc)=>{(function(n,t){typeof ac=="object"&&typeof lc<"u"?lc.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self).RBush=t()})(ac,function(){"use strict";function n(v,x,S,O,D){(function U(z,V,G,tt,K){for(;tt>G;){if(tt-G>600){var B=tt-G+1,N=V-G+1,Z=Math.log(B),w=.5*Math.exp(2*Z/3),C=.5*Math.sqrt(Z*w*(B-w)/B)*(N-B/2<0?-1:1),k=Math.max(G,Math.floor(V-N*w/B+C)),T=Math.min(tt,Math.floor(V+(B-N)*w/B+C));U(z,V,k,T,K)}var R=z[V],F=G,H=tt;for(t(z,G,V),K(z[tt],R)>0&&t(z,G,tt);F<H;){for(t(z,F,H),F++,H--;K(z[F],R)<0;)F++;for(;K(z[H],R)>0;)H--}K(z[G],R)===0?t(z,G,H):t(z,++H,tt),H<=V&&(G=H+1),V<=H&&(tt=H-1)}})(v,x,S||0,O||v.length-1,D||e)}function t(v,x,S){var O=v[x];v[x]=v[S],v[S]=O}function e(v,x){return v<x?-1:v>x?1:0}var i=function(v){v===void 0&&(v=9),this._maxEntries=Math.max(4,v),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(v,x,S){if(!S)return x.indexOf(v);for(var O=0;O<x.length;O++)if(S(v,x[O]))return O;return-1}function s(v,x){a(v,0,v.children.length,x,v)}function a(v,x,S,O,D){D||(D=m(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var U=x;U<S;U++){var z=v.children[U];o(D,v.leaf?O(z):z)}return D}function o(v,x){return v.minX=Math.min(v.minX,x.minX),v.minY=Math.min(v.minY,x.minY),v.maxX=Math.max(v.maxX,x.maxX),v.maxY=Math.max(v.maxY,x.maxY),v}function l(v,x){return v.minX-x.minX}function c(v,x){return v.minY-x.minY}function h(v){return(v.maxX-v.minX)*(v.maxY-v.minY)}function d(v){return v.maxX-v.minX+(v.maxY-v.minY)}function p(v,x){return v.minX<=x.minX&&v.minY<=x.minY&&x.maxX<=v.maxX&&x.maxY<=v.maxY}function g(v,x){return x.minX<=v.maxX&&x.minY<=v.maxY&&x.maxX>=v.minX&&x.maxY>=v.minY}function m(v){return{children:v,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(v,x,S,O,D){for(var U=[x,S];U.length;)if(!((S=U.pop())-(x=U.pop())<=O)){var z=x+Math.ceil((S-x)/O/2)*O;n(v,z,x,S,D),U.push(x,z,z,S)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(v){var x=this.data,S=[];if(!g(v,x))return S;for(var O=this.toBBox,D=[];x;){for(var U=0;U<x.children.length;U++){var z=x.children[U],V=x.leaf?O(z):z;g(v,V)&&(x.leaf?S.push(z):p(v,V)?this._all(z,S):D.push(z))}x=D.pop()}return S},i.prototype.collides=function(v){var x=this.data;if(!g(v,x))return!1;for(var S=[];x;){for(var O=0;O<x.children.length;O++){var D=x.children[O],U=x.leaf?this.toBBox(D):D;if(g(v,U)){if(x.leaf||p(v,U))return!0;S.push(D)}}x=S.pop()}return!1},i.prototype.load=function(v){if(!v||!v.length)return this;if(v.length<this._minEntries){for(var x=0;x<v.length;x++)this.insert(v[x]);return this}var S=this._build(v.slice(),0,v.length-1,0);if(this.data.children.length)if(this.data.height===S.height)this._splitRoot(this.data,S);else{if(this.data.height<S.height){var O=this.data;this.data=S,S=O}this._insert(S,this.data.height-S.height-1,!0)}else this.data=S;return this},i.prototype.insert=function(v){return v&&this._insert(v,this.data.height-1),this},i.prototype.clear=function(){return this.data=m([]),this},i.prototype.remove=function(v,x){if(!v)return this;for(var S,O,D,U=this.data,z=this.toBBox(v),V=[],G=[];U||V.length;){if(U||(U=V.pop(),O=V[V.length-1],S=G.pop(),D=!0),U.leaf){var tt=r(v,U.children,x);if(tt!==-1)return U.children.splice(tt,1),V.push(U),this._condense(V),this}D||U.leaf||!p(U,z)?O?(S++,U=O.children[S],D=!1):U=null:(V.push(U),G.push(S),S=0,O=U,U=U.children[0])}return this},i.prototype.toBBox=function(v){return v},i.prototype.compareMinX=function(v,x){return v.minX-x.minX},i.prototype.compareMinY=function(v,x){return v.minY-x.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(v){return this.data=v,this},i.prototype._all=function(v,x){for(var S=[];v;)v.leaf?x.push.apply(x,v.children):S.push.apply(S,v.children),v=S.pop();return x},i.prototype._build=function(v,x,S,O){var D,U=S-x+1,z=this._maxEntries;if(U<=z)return s(D=m(v.slice(x,S+1)),this.toBBox),D;O||(O=Math.ceil(Math.log(U)/Math.log(z)),z=Math.ceil(U/Math.pow(z,O-1))),(D=m([])).leaf=!1,D.height=O;var V=Math.ceil(U/z),G=V*Math.ceil(Math.sqrt(z));_(v,x,S,G,this.compareMinX);for(var tt=x;tt<=S;tt+=G){var K=Math.min(tt+G-1,S);_(v,tt,K,V,this.compareMinY);for(var B=tt;B<=K;B+=V){var N=Math.min(B+V-1,K);D.children.push(this._build(v,B,N,O-1))}}return s(D,this.toBBox),D},i.prototype._chooseSubtree=function(v,x,S,O){for(;O.push(x),!x.leaf&&O.length-1!==S;){for(var D=1/0,U=1/0,z=void 0,V=0;V<x.children.length;V++){var G=x.children[V],tt=h(G),K=(B=v,N=G,(Math.max(N.maxX,B.maxX)-Math.min(N.minX,B.minX))*(Math.max(N.maxY,B.maxY)-Math.min(N.minY,B.minY))-tt);K<U?(U=K,D=tt<D?tt:D,z=G):K===U&&tt<D&&(D=tt,z=G)}x=z||x.children[0]}var B,N;return x},i.prototype._insert=function(v,x,S){var O=S?v:this.toBBox(v),D=[],U=this._chooseSubtree(O,this.data,x,D);for(U.children.push(v),o(U,O);x>=0&&D[x].children.length>this._maxEntries;)this._split(D,x),x--;this._adjustParentBBoxes(O,D,x)},i.prototype._split=function(v,x){var S=v[x],O=S.children.length,D=this._minEntries;this._chooseSplitAxis(S,D,O);var U=this._chooseSplitIndex(S,D,O),z=m(S.children.splice(U,S.children.length-U));z.height=S.height,z.leaf=S.leaf,s(S,this.toBBox),s(z,this.toBBox),x?v[x-1].children.push(z):this._splitRoot(S,z)},i.prototype._splitRoot=function(v,x){this.data=m([v,x]),this.data.height=v.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(v,x,S){for(var O,D,U,z,V,G,tt,K=1/0,B=1/0,N=x;N<=S-x;N++){var Z=a(v,0,N,this.toBBox),w=a(v,N,S,this.toBBox),C=(D=Z,U=w,z=void 0,V=void 0,G=void 0,tt=void 0,z=Math.max(D.minX,U.minX),V=Math.max(D.minY,U.minY),G=Math.min(D.maxX,U.maxX),tt=Math.min(D.maxY,U.maxY),Math.max(0,G-z)*Math.max(0,tt-V)),k=h(Z)+h(w);C<K?(K=C,O=N,B=k<B?k:B):C===K&&k<B&&(B=k,O=N)}return O||S-x},i.prototype._chooseSplitAxis=function(v,x,S){var O=v.leaf?this.compareMinX:l,D=v.leaf?this.compareMinY:c;this._allDistMargin(v,x,S,O)<this._allDistMargin(v,x,S,D)&&v.children.sort(O)},i.prototype._allDistMargin=function(v,x,S,O){v.children.sort(O);for(var D=this.toBBox,U=a(v,0,x,D),z=a(v,S-x,S,D),V=d(U)+d(z),G=x;G<S-x;G++){var tt=v.children[G];o(U,v.leaf?D(tt):tt),V+=d(U)}for(var K=S-x-1;K>=x;K--){var B=v.children[K];o(z,v.leaf?D(B):B),V+=d(z)}return V},i.prototype._adjustParentBBoxes=function(v,x,S){for(var O=S;O>=0;O--)o(x[O],v)},i.prototype._condense=function(v){for(var x=v.length-1,S=void 0;x>=0;x--)v[x].children.length===0?x>0?(S=v[x-1].children).splice(S.indexOf(v[x]),1):this.clear():s(v[x],this.toBBox)},i})});var am=Ge((hc,cc)=>{(function(n,t){typeof hc=="object"&&typeof cc<"u"?cc.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self,n.TinyQueue=t())})(hc,function(){"use strict";var n=function(i,r){if(i===void 0&&(i=[]),r===void 0&&(r=t),this.data=i,this.length=this.data.length,this.compare=r,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};n.prototype.push=function(i){this.data.push(i),this.length++,this._up(this.length-1)},n.prototype.pop=function(){if(this.length!==0){var i=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),i}},n.prototype.peek=function(){return this.data[0]},n.prototype._up=function(i){for(var r=this,s=r.data,a=r.compare,o=s[i];i>0;){var l=i-1>>1,c=s[l];if(a(o,c)>=0)break;s[i]=c,i=l}s[i]=o},n.prototype._down=function(i){for(var r=this,s=r.data,a=r.compare,o=this.length>>1,l=s[i];i<o;){var c=(i<<1)+1,h=s[c],d=c+1;if(d<this.length&&a(s[d],h)<0&&(c=d,h=s[d]),a(h,l)>=0)break;s[i]=h,i=c}s[i]=l};function t(e,i){return e<i?-1:e>i?1:0}return n})});var um=Ge((L3,lm)=>{lm.exports=function(t,e,i,r){var s=t[0],a=t[1],o=!1;i===void 0&&(i=0),r===void 0&&(r=e.length);for(var l=(r-i)/2,c=0,h=l-1;c<l;h=c++){var d=e[i+c*2+0],p=e[i+c*2+1],g=e[i+h*2+0],m=e[i+h*2+1],_=p>a!=m>a&&s<(g-d)*(a-p)/(m-p)+d;_&&(o=!o)}return o}});var cm=Ge((T3,hm)=>{hm.exports=function(t,e,i,r){var s=t[0],a=t[1],o=!1;i===void 0&&(i=0),r===void 0&&(r=e.length);for(var l=r-i,c=0,h=l-1;c<l;h=c++){var d=e[c+i][0],p=e[c+i][1],g=e[h+i][0],m=e[h+i][1],_=p>a!=m>a&&s<(g-d)*(a-p)/(m-p)+d;_&&(o=!o)}return o}});var pm=Ge((P3,yu)=>{var fm=um(),dm=cm();yu.exports=function(t,e,i,r){return e.length>0&&Array.isArray(e[0])?dm(t,e,i,r):fm(t,e,i,r)};yu.exports.nested=dm;yu.exports.flat=fm});var gm=Ge((vu,mm)=>{(function(n,t){typeof vu=="object"&&typeof mm<"u"?t(vu):typeof define=="function"&&define.amd?define(["exports"],t):t((n=n||self).predicates={})})(vu,function(n){"use strict";let e=33306690738754706e-32;function i(g,m,_,v,x){let S,O,D,U,z=m[0],V=v[0],G=0,tt=0;V>z==V>-z?(S=z,z=m[++G]):(S=V,V=v[++tt]);let K=0;if(G<g&&tt<_)for(V>z==V>-z?(D=S-((O=z+S)-z),z=m[++G]):(D=S-((O=V+S)-V),V=v[++tt]),S=O,D!==0&&(x[K++]=D);G<g&&tt<_;)V>z==V>-z?(D=S-((O=S+z)-(U=O-S))+(z-U),z=m[++G]):(D=S-((O=S+V)-(U=O-S))+(V-U),V=v[++tt]),S=O,D!==0&&(x[K++]=D);for(;G<g;)D=S-((O=S+z)-(U=O-S))+(z-U),z=m[++G],S=O,D!==0&&(x[K++]=D);for(;tt<_;)D=S-((O=S+V)-(U=O-S))+(V-U),V=v[++tt],S=O,D!==0&&(x[K++]=D);return S===0&&K!==0||(x[K++]=S),K}function r(g){return new Float64Array(g)}let s=33306690738754716e-32,a=22204460492503146e-32,o=11093356479670487e-47,l=r(4),c=r(8),h=r(12),d=r(16),p=r(4);n.orient2d=function(g,m,_,v,x,S){let O=(m-S)*(_-x),D=(g-x)*(v-S),U=O-D;if(O===0||D===0||O>0!=D>0)return U;let z=Math.abs(O+D);return Math.abs(U)>=s*z?U:-function(V,G,tt,K,B,N,Z){let w,C,k,T,R,F,H,it,ot,dt,$,ct,W,q,rt,mt,wt,_t,Ct=V-B,Ft=tt-B,At=G-N,vt=K-N;R=(rt=(it=Ct-(H=(F=134217729*Ct)-(F-Ct)))*(dt=vt-(ot=(F=134217729*vt)-(F-vt)))-((q=Ct*vt)-H*ot-it*ot-H*dt))-($=rt-(wt=(it=At-(H=(F=134217729*At)-(F-At)))*(dt=Ft-(ot=(F=134217729*Ft)-(F-Ft)))-((mt=At*Ft)-H*ot-it*ot-H*dt))),l[0]=rt-($+R)+(R-wt),R=(W=q-((ct=q+$)-(R=ct-q))+($-R))-($=W-mt),l[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,l[2]=ct-(_t-R)+($-R),l[3]=_t;let kt=function(et,lt){let pt=lt[0];for(let bt=1;bt<et;bt++)pt+=lt[bt];return pt}(4,l),gt=a*Z;if(kt>=gt||-kt>=gt||(w=V-(Ct+(R=V-Ct))+(R-B),k=tt-(Ft+(R=tt-Ft))+(R-B),C=G-(At+(R=G-At))+(R-N),T=K-(vt+(R=K-vt))+(R-N),w===0&&C===0&&k===0&&T===0)||(gt=o*Z+e*Math.abs(kt),(kt+=Ct*T+vt*w-(At*k+Ft*C))>=gt||-kt>=gt))return kt;R=(rt=(it=w-(H=(F=134217729*w)-(F-w)))*(dt=vt-(ot=(F=134217729*vt)-(F-vt)))-((q=w*vt)-H*ot-it*ot-H*dt))-($=rt-(wt=(it=C-(H=(F=134217729*C)-(F-C)))*(dt=Ft-(ot=(F=134217729*Ft)-(F-Ft)))-((mt=C*Ft)-H*ot-it*ot-H*dt))),p[0]=rt-($+R)+(R-wt),R=(W=q-((ct=q+$)-(R=ct-q))+($-R))-($=W-mt),p[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,p[2]=ct-(_t-R)+($-R),p[3]=_t;let ut=i(4,l,4,p,c);R=(rt=(it=Ct-(H=(F=134217729*Ct)-(F-Ct)))*(dt=T-(ot=(F=134217729*T)-(F-T)))-((q=Ct*T)-H*ot-it*ot-H*dt))-($=rt-(wt=(it=At-(H=(F=134217729*At)-(F-At)))*(dt=k-(ot=(F=134217729*k)-(F-k)))-((mt=At*k)-H*ot-it*ot-H*dt))),p[0]=rt-($+R)+(R-wt),R=(W=q-((ct=q+$)-(R=ct-q))+($-R))-($=W-mt),p[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,p[2]=ct-(_t-R)+($-R),p[3]=_t;let Q=i(ut,c,4,p,h);R=(rt=(it=w-(H=(F=134217729*w)-(F-w)))*(dt=T-(ot=(F=134217729*T)-(F-T)))-((q=w*T)-H*ot-it*ot-H*dt))-($=rt-(wt=(it=C-(H=(F=134217729*C)-(F-C)))*(dt=k-(ot=(F=134217729*k)-(F-k)))-((mt=C*k)-H*ot-it*ot-H*dt))),p[0]=rt-($+R)+(R-wt),R=(W=q-((ct=q+$)-(R=ct-q))+($-R))-($=W-mt),p[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,p[2]=ct-(_t-R)+($-R),p[3]=_t;let Y=i(Q,h,4,p,d);return d[Y-1]}(g,m,_,v,x,S,z)},n.orient2dfast=function(g,m,_,v,x,S){return(m-S)*(_-x)-(g-x)*(v-S)},Object.defineProperty(n,"__esModule",{value:!0})})});var xm=Ge((R3,mc)=>{"use strict";var ym=uc(),_u=am(),bb=pm(),_b=gm().orient2d;_u.default&&(_u=_u.default);mc.exports=wm;mc.exports.default=wm;function wm(n,t,e){t=Math.max(0,t===void 0?2:t),e=e||0;var i=Mb(n),r=new ym(16);r.toBBox=function(S){return{minX:S[0],minY:S[1],maxX:S[0],maxY:S[1]}},r.compareMinX=function(S,O){return S[0]-O[0]},r.compareMinY=function(S,O){return S[1]-O[1]},r.load(n);for(var s=[],a=0,o;a<i.length;a++){var l=i[a];r.remove(l),o=_m(l,o),s.push(o)}var c=new ym(16);for(a=0;a<s.length;a++)c.insert(fc(s[a]));for(var h=t*t,d=e*e;s.length;){var p=s.shift(),g=p.p,m=p.next.p,_=dc(g,m);if(!(_<d)){var v=_/h;l=wb(r,p.prev.p,g,m,p.next.next.p,v,c),l&&Math.min(dc(l,g),dc(l,m))<=v&&(s.push(p),s.push(_m(l,p)),r.remove(l),c.remove(p),c.insert(fc(p)),c.insert(fc(p.next)))}}p=o;var x=[];do x.push(p.p),p=p.next;while(p!==o);return x.push(p.p),x}function wb(n,t,e,i,r,s,a){for(var o=new _u([],xb),l=n.data;l;){for(var c=0;c<l.children.length;c++){var h=l.children[c],d=l.leaf?pc(h,e,i):Eb(e,i,h);d>s||o.push({node:h,dist:d})}for(;o.length&&!o.peek().node.children;){var p=o.pop(),g=p.node,m=pc(g,t,e),_=pc(g,i,r);if(p.dist<m&&p.dist<_&&bm(e,g,a)&&bm(i,g,a))return g}l=o.pop(),l&&(l=l.node)}return null}function xb(n,t){return n.dist-t.dist}function Eb(n,t,e){if(vm(n,e)||vm(t,e))return 0;var i=bu(n[0],n[1],t[0],t[1],e.minX,e.minY,e.maxX,e.minY);if(i===0)return 0;var r=bu(n[0],n[1],t[0],t[1],e.minX,e.minY,e.minX,e.maxY);if(r===0)return 0;var s=bu(n[0],n[1],t[0],t[1],e.maxX,e.minY,e.maxX,e.maxY);if(s===0)return 0;var a=bu(n[0],n[1],t[0],t[1],e.minX,e.maxY,e.maxX,e.maxY);return a===0?0:Math.min(i,r,s,a)}function vm(n,t){return n[0]>=t.minX&&n[0]<=t.maxX&&n[1]>=t.minY&&n[1]<=t.maxY}function bm(n,t,e){for(var i=Math.min(n[0],t[0]),r=Math.min(n[1],t[1]),s=Math.max(n[0],t[0]),a=Math.max(n[1],t[1]),o=e.search({minX:i,minY:r,maxX:s,maxY:a}),l=0;l<o.length;l++)if(Cb(o[l].p,o[l].next.p,n,t))return!1;return!0}function ka(n,t,e){return _b(n[0],n[1],t[0],t[1],e[0],e[1])}function Cb(n,t,e,i){return n!==i&&t!==e&&ka(n,t,e)>0!=ka(n,t,i)>0&&ka(e,i,n)>0!=ka(e,i,t)>0}function fc(n){var t=n.p,e=n.next.p;return n.minX=Math.min(t[0],e[0]),n.minY=Math.min(t[1],e[1]),n.maxX=Math.max(t[0],e[0]),n.maxY=Math.max(t[1],e[1]),n}function Mb(n){for(var t=n[0],e=n[0],i=n[0],r=n[0],s=0;s<n.length;s++){var a=n[s];a[0]<t[0]&&(t=a),a[0]>i[0]&&(i=a),a[1]<e[1]&&(e=a),a[1]>r[1]&&(r=a)}var o=[t,e,i,r],l=o.slice();for(s=0;s<n.length;s++)bb(n[s],o)||l.push(n[s]);return kb(l)}function _m(n,t){var e={p:n,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(e.next=t.next,e.prev=t,t.next.prev=e,t.next=e):(e.prev=e,e.next=e),e}function dc(n,t){var e=n[0]-t[0],i=n[1]-t[1];return e*e+i*i}function pc(n,t,e){var i=t[0],r=t[1],s=e[0]-i,a=e[1]-r;if(s!==0||a!==0){var o=((n[0]-i)*s+(n[1]-r)*a)/(s*s+a*a);o>1?(i=e[0],r=e[1]):o>0&&(i+=s*o,r+=a*o)}return s=n[0]-i,a=n[1]-r,s*s+a*a}function bu(n,t,e,i,r,s,a,o){var l=e-n,c=i-t,h=a-r,d=o-s,p=n-r,g=t-s,m=l*l+c*c,_=l*h+c*d,v=h*h+d*d,x=l*p+c*g,S=h*p+d*g,O=m*v-_*_,D,U,z,V,G=O,tt=O;O===0?(U=0,G=1,V=S,tt=v):(U=_*S-v*x,V=m*S-_*x,U<0?(U=0,V=S,tt=v):U>G&&(U=G,V=S+_,tt=v)),V<0?(V=0,-x<0?U=0:-x>m?U=G:(U=-x,G=m)):V>tt&&(V=tt,-x+_<0?U=0:-x+_>m?U=G:(U=-x+_,G=m)),D=U===0?0:U/G,z=V===0?0:V/tt;var K=(1-D)*n+D*e,B=(1-D)*t+D*i,N=(1-z)*r+z*a,Z=(1-z)*s+z*o,w=N-K,C=Z-B;return w*w+C*C}function Sb(n,t){return n[0]===t[0]?n[1]-t[1]:n[0]-t[0]}function kb(n){n.sort(Sb);for(var t=[],e=0;e<n.length;e++){for(;t.length>=2&&ka(t[t.length-2],t[t.length-1],n[e])<=0;)t.pop();t.push(n[e])}for(var i=[],r=n.length-1;r>=0;r--){for(;i.length>=2&&ka(i[i.length-2],i[i.length-1],n[r])<=0;)i.pop();i.push(n[r])}return i.pop(),t.pop(),t.concat(i)}});var km=Ge((yc,vc)=>{(function(n,t){typeof yc=="object"&&typeof vc<"u"?vc.exports=t():typeof define=="function"&&define.amd?define(t):n.quickselect=t()})(yc,function(){"use strict";function n(r,s,a,o,l){t(r,s,a||0,o||r.length-1,l||i)}function t(r,s,a,o,l){for(;o>a;){if(o-a>600){var c=o-a+1,h=s-a+1,d=Math.log(c),p=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*p*(c-p)/c)*(h-c/2<0?-1:1),m=Math.max(a,Math.floor(s-h*p/c+g)),_=Math.min(o,Math.floor(s+(c-h)*p/c+g));t(r,s,m,_,l)}var v=r[s],x=a,S=o;for(e(r,a,s),l(r[o],v)>0&&e(r,a,o);x<S;){for(e(r,x,S),x++,S--;l(r[x],v)<0;)x++;for(;l(r[S],v)>0;)S--}l(r[a],v)===0?e(r,a,S):(S++,e(r,S,o)),S<=s&&(a=S+1),s<=S&&(o=S-1)}}function e(r,s,a){var o=r[s];r[s]=r[a],r[a]=o}function i(r,s){return r<s?-1:r>s?1:0}return n})});var Rm=Ge((rk,wc)=>{"use strict";wc.exports=yl;wc.exports.default=yl;var Hb=km();function yl(n,t){if(!(this instanceof yl))return new yl(n,t);this._maxEntries=Math.max(4,n||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}yl.prototype={all:function(){return this._all(this.data,[])},search:function(n){var t=this.data,e=[],i=this.toBBox;if(!xu(n,t))return e;for(var r=[],s,a,o,l;t;){for(s=0,a=t.children.length;s<a;s++)o=t.children[s],l=t.leaf?i(o):o,xu(n,l)&&(t.leaf?e.push(o):_c(n,l)?this._all(o,e):r.push(o));t=r.pop()}return e},collides:function(n){var t=this.data,e=this.toBBox;if(!xu(n,t))return!1;for(var i=[],r,s,a,o;t;){for(r=0,s=t.children.length;r<s;r++)if(a=t.children[r],o=t.leaf?e(a):a,xu(n,o)){if(t.leaf||_c(n,o))return!0;i.push(a)}t=i.pop()}return!1},load:function(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(var t=0,e=n.length;t<e;t++)this.insert(n[t]);return this}var i=this._build(n.slice(),0,n.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}return this},insert:function(n){return n&&this._insert(n,this.data.height-1),this},clear:function(){return this.data=Ta([]),this},remove:function(n,t){if(!n)return this;for(var e=this.data,i=this.toBBox(n),r=[],s=[],a,o,l,c;e||r.length;){if(e||(e=r.pop(),o=r[r.length-1],a=s.pop(),c=!0),e.leaf&&(l=Gb(n,e.children,t),l!==-1))return e.children.splice(l,1),r.push(e),this._condense(r),this;!c&&!e.leaf&&_c(e,i)?(r.push(e),s.push(a),a=0,o=e,e=e.children[0]):o?(a++,e=o.children[a],c=!1):e=null}return this},toBBox:function(n){return n},compareMinX:Lm,compareMinY:Tm,toJSON:function(){return this.data},fromJSON:function(n){return this.data=n,this},_all:function(n,t){for(var e=[];n;)n.leaf?t.push.apply(t,n.children):e.push.apply(e,n.children),n=e.pop();return t},_build:function(n,t,e,i){var r=e-t+1,s=this._maxEntries,a;if(r<=s)return a=Ta(n.slice(t,e+1)),La(a,this.toBBox),a;i||(i=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,i-1))),a=Ta([]),a.leaf=!1,a.height=i;var o=Math.ceil(r/s),l=o*Math.ceil(Math.sqrt(s)),c,h,d,p;for(Pm(n,t,e,l,this.compareMinX),c=t;c<=e;c+=l)for(d=Math.min(c+l-1,e),Pm(n,c,d,o,this.compareMinY),h=c;h<=d;h+=o)p=Math.min(h+o-1,d),a.children.push(this._build(n,h,p,i-1));return La(a,this.toBBox),a},_chooseSubtree:function(n,t,e,i){for(var r,s,a,o,l,c,h,d;i.push(t),!(t.leaf||i.length-1===e);){for(h=d=1/0,r=0,s=t.children.length;r<s;r++)a=t.children[r],l=bc(a),c=Ub(n,a)-l,c<d?(d=c,h=l<h?l:h,o=a):c===d&&l<h&&(h=l,o=a);t=o||t.children[0]}return t},_insert:function(n,t,e){var i=this.toBBox,r=e?n:i(n),s=[],a=this._chooseSubtree(r,this.data,t,s);for(a.children.push(n),gl(a,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)},_split:function(n,t){var e=n[t],i=e.children.length,r=this._minEntries;this._chooseSplitAxis(e,r,i);var s=this._chooseSplitIndex(e,r,i),a=Ta(e.children.splice(s,e.children.length-s));a.height=e.height,a.leaf=e.leaf,La(e,this.toBBox),La(a,this.toBBox),t?n[t-1].children.push(a):this._splitRoot(e,a)},_splitRoot:function(n,t){this.data=Ta([n,t]),this.data.height=n.height+1,this.data.leaf=!1,La(this.data,this.toBBox)},_chooseSplitIndex:function(n,t,e){var i,r,s,a,o,l,c,h;for(l=c=1/0,i=t;i<=e-t;i++)r=ml(n,0,i,this.toBBox),s=ml(n,i,e,this.toBBox),a=Vb(r,s),o=bc(r)+bc(s),a<l?(l=a,h=i,c=o<c?o:c):a===l&&o<c&&(c=o,h=i);return h},_chooseSplitAxis:function(n,t,e){var i=n.leaf?this.compareMinX:Lm,r=n.leaf?this.compareMinY:Tm,s=this._allDistMargin(n,t,e,i),a=this._allDistMargin(n,t,e,r);s<a&&n.children.sort(i)},_allDistMargin:function(n,t,e,i){n.children.sort(i);var r=this.toBBox,s=ml(n,0,t,r),a=ml(n,e-t,e,r),o=wu(s)+wu(a),l,c;for(l=t;l<e-t;l++)c=n.children[l],gl(s,n.leaf?r(c):c),o+=wu(s);for(l=e-t-1;l>=t;l--)c=n.children[l],gl(a,n.leaf?r(c):c),o+=wu(a);return o},_adjustParentBBoxes:function(n,t,e){for(var i=e;i>=0;i--)gl(t[i],n)},_condense:function(n){for(var t=n.length-1,e;t>=0;t--)n[t].children.length===0?t>0?(e=n[t-1].children,e.splice(e.indexOf(n[t]),1)):this.clear():La(n[t],this.toBBox)},_initFormat:function(n){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(n[0])),this.compareMinY=new Function("a","b",t.join(n[1])),this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};function Gb(n,t,e){if(!e)return t.indexOf(n);for(var i=0;i<t.length;i++)if(e(n,t[i]))return i;return-1}function La(n,t){ml(n,0,n.children.length,t,n)}function ml(n,t,e,i,r){r||(r=Ta(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s=t,a;s<e;s++)a=n.children[s],gl(r,n.leaf?i(a):a);return r}function gl(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function Lm(n,t){return n.minX-t.minX}function Tm(n,t){return n.minY-t.minY}function bc(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function wu(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Ub(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function Vb(n,t){var e=Math.max(n.minX,t.minX),i=Math.max(n.minY,t.minY),r=Math.min(n.maxX,t.maxX),s=Math.min(n.maxY,t.maxY);return Math.max(0,r-e)*Math.max(0,s-i)}function _c(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function xu(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function Ta(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Pm(n,t,e,i,r){for(var s=[t,e],a;s.length;)e=s.pop(),t=s.pop(),!(e-t<=i)&&(a=t+Math.ceil((e-t)/i/2)*i,Hb(n,a,t,e,r),s.push(t,a,a,e))}});var Dm=Ge((g4,Sc)=>{"use strict";Sc.exports=Su;Sc.exports.default=Su;function Su(n,t,e){e=e||2;var i=t&&t.length,r=i?t[0]*e:n.length,s=Im(n,0,r,e,!0),a=[];if(!s||s.next===s.prev)return a;var o,l,c,h,d,p,g;if(i&&(s=i1(n,t,s,e)),n.length>80*e){o=c=n[0],l=h=n[1];for(var m=e;m<r;m+=e)d=n[m],p=n[m+1],d<o&&(o=d),p<l&&(l=p),d>c&&(c=d),p>h&&(h=p);g=Math.max(c-o,h-l),g=g!==0?32767/g:0}return _l(s,a,e,o,l,g,0),a}function Im(n,t,e,i,r){var s,a;if(r===Mc(n,t,e,i)>0)for(s=t;s<e;s+=i)a=Om(s,n[s],n[s+1],a);else for(s=e-i;s>=t;s-=i)a=Om(s,n[s],n[s+1],a);return a&&ku(a,a.next)&&(xl(a),a=a.next),a}function aa(n,t){if(!n)return n;t||(t=n);var e=n,i;do if(i=!1,!e.steiner&&(ku(e,e.next)||nn(e.prev,e,e.next)===0)){if(xl(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function _l(n,t,e,i,r,s,a){if(n){!a&&s&&a1(n,i,r,s);for(var o=n,l,c;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Qb(n,i,r,s):Jb(n)){t.push(l.i/e|0),t.push(n.i/e|0),t.push(c.i/e|0),xl(n),n=c.next,o=c.next;continue}if(n=c,n===o){a?a===1?(n=t1(aa(n),t,e),_l(n,t,e,i,r,s,2)):a===2&&e1(n,t,e,i,r,s):_l(aa(n),t,e,i,r,s,1);break}}}}function Jb(n){var t=n.prev,e=n,i=n.next;if(nn(t,e,i)>=0)return!1;for(var r=t.x,s=e.x,a=i.x,o=t.y,l=e.y,c=i.y,h=r<s?r<a?r:a:s<a?s:a,d=o<l?o<c?o:c:l<c?l:c,p=r>s?r>a?r:a:s>a?s:a,g=o>l?o>c?o:c:l>c?l:c,m=i.next;m!==t;){if(m.x>=h&&m.x<=p&&m.y>=d&&m.y<=g&&Ra(r,o,s,l,a,c,m.x,m.y)&&nn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Qb(n,t,e,i){var r=n.prev,s=n,a=n.next;if(nn(r,s,a)>=0)return!1;for(var o=r.x,l=s.x,c=a.x,h=r.y,d=s.y,p=a.y,g=o<l?o<c?o:c:l<c?l:c,m=h<d?h<p?h:p:d<p?d:p,_=o>l?o>c?o:c:l>c?l:c,v=h>d?h>p?h:p:d>p?d:p,x=Ec(g,m,t,e,i),S=Ec(_,v,t,e,i),O=n.prevZ,D=n.nextZ;O&&O.z>=x&&D&&D.z<=S;){if(O.x>=g&&O.x<=_&&O.y>=m&&O.y<=v&&O!==r&&O!==a&&Ra(o,h,l,d,c,p,O.x,O.y)&&nn(O.prev,O,O.next)>=0||(O=O.prevZ,D.x>=g&&D.x<=_&&D.y>=m&&D.y<=v&&D!==r&&D!==a&&Ra(o,h,l,d,c,p,D.x,D.y)&&nn(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;O&&O.z>=x;){if(O.x>=g&&O.x<=_&&O.y>=m&&O.y<=v&&O!==r&&O!==a&&Ra(o,h,l,d,c,p,O.x,O.y)&&nn(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;D&&D.z<=S;){if(D.x>=g&&D.x<=_&&D.y>=m&&D.y<=v&&D!==r&&D!==a&&Ra(o,h,l,d,c,p,D.x,D.y)&&nn(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function t1(n,t,e){var i=n;do{var r=i.prev,s=i.next.next;!ku(r,s)&&Am(r,i,i.next,s)&&wl(r,s)&&wl(s,r)&&(t.push(r.i/e|0),t.push(i.i/e|0),t.push(s.i/e|0),xl(i),xl(i.next),i=n=s),i=i.next}while(i!==n);return aa(i)}function e1(n,t,e,i,r,s){var a=n;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&h1(a,o)){var l=Nm(a,o);a=aa(a,a.next),l=aa(l,l.next),_l(a,t,e,i,r,s,0),_l(l,t,e,i,r,s,0);return}o=o.next}a=a.next}while(a!==n)}function i1(n,t,e,i){var r=[],s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*i,l=s<a-1?t[s+1]*i:n.length,c=Im(n,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(u1(c));for(r.sort(r1),s=0;s<r.length;s++)e=n1(r[s],e);return e}function r1(n,t){return n.x-t.x}function n1(n,t){var e=s1(n,t);if(!e)return t;var i=Nm(e,n);return aa(i,i.next),aa(e,e.next)}function s1(n,t){var e=t,i=n.x,r=n.y,s=-1/0,a;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var o=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=i&&o>s&&(s=o,a=e.x<e.next.x?e:e.next,o===i))return a}e=e.next}while(e!==t);if(!a)return null;var l=a,c=a.x,h=a.y,d=1/0,p;e=a;do i>=e.x&&e.x>=c&&i!==e.x&&Ra(r<h?i:s,r,c,h,r<h?s:i,r,e.x,e.y)&&(p=Math.abs(r-e.y)/(i-e.x),wl(e,n)&&(p<d||p===d&&(e.x>a.x||e.x===a.x&&o1(a,e)))&&(a=e,d=p)),e=e.next;while(e!==l);return a}function o1(n,t){return nn(n.prev,n,t.prev)<0&&nn(t.next,n,n.next)<0}function a1(n,t,e,i){var r=n;do r.z===0&&(r.z=Ec(r.x,r.y,t,e,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,l1(r)}function l1(n){var t,e,i,r,s,a,o,l,c=1;do{for(e=n,n=null,s=null,a=0;e;){for(a++,i=e,o=0,t=0;t<c&&(o++,i=i.nextZ,!!i);t++);for(l=c;o>0||l>0&&i;)o!==0&&(l===0||!i||e.z<=i.z)?(r=e,e=e.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;e=i}s.nextZ=null,c*=2}while(a>1);return n}function Ec(n,t,e,i,r){return n=(n-e)*r|0,t=(t-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function u1(n){var t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function Ra(n,t,e,i,r,s,a,o){return(r-a)*(t-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(e-a)*(t-o)&&(e-a)*(s-o)>=(r-a)*(i-o)}function h1(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!c1(n,t)&&(wl(n,t)&&wl(t,n)&&f1(n,t)&&(nn(n.prev,n,t.prev)||nn(n,t.prev,t))||ku(n,t)&&nn(n.prev,n,n.next)>0&&nn(t.prev,t,t.next)>0)}function nn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function ku(n,t){return n.x===t.x&&n.y===t.y}function Am(n,t,e,i){var r=Mu(nn(n,t,e)),s=Mu(nn(n,t,i)),a=Mu(nn(e,i,n)),o=Mu(nn(e,i,t));return!!(r!==s&&a!==o||r===0&&Cu(n,e,t)||s===0&&Cu(n,i,t)||a===0&&Cu(e,n,i)||o===0&&Cu(e,t,i))}function Cu(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Mu(n){return n>0?1:n<0?-1:0}function c1(n,t){var e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&Am(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function wl(n,t){return nn(n.prev,n,n.next)<0?nn(n,t,n.next)>=0&&nn(n,n.prev,t)>=0:nn(n,t,n.prev)<0||nn(n,n.next,t)<0}function f1(n,t){var e=n,i=!1,r=(n.x+t.x)/2,s=(n.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function Nm(n,t){var e=new Cc(n.i,n.x,n.y),i=new Cc(t.i,t.x,t.y),r=n.next,s=t.prev;return n.next=t,t.prev=n,e.next=r,r.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function Om(n,t,e,i){var r=new Cc(n,t,e);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function xl(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Cc(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Su.deviation=function(n,t,e,i){var r=t&&t.length,s=r?t[0]*e:n.length,a=Math.abs(Mc(n,0,s,e));if(r)for(var o=0,l=t.length;o<l;o++){var c=t[o]*e,h=o<l-1?t[o+1]*e:n.length;a-=Math.abs(Mc(n,c,h,e))}var d=0;for(o=0;o<i.length;o+=3){var p=i[o]*e,g=i[o+1]*e,m=i[o+2]*e;d+=Math.abs((n[p]-n[m])*(n[g+1]-n[p+1])-(n[p]-n[g])*(n[m+1]-n[p+1]))}return a===0&&d===0?0:Math.abs((d-a)/a)};function Mc(n,t,e,i){for(var r=0,s=t,a=e-i;s<e;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}Su.flatten=function(n){for(var t=n[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,r=0;r<n.length;r++){for(var s=0;s<n[r].length;s++)for(var a=0;a<t;a++)e.vertices.push(n[r][s][a]);r>0&&(i+=n[r-1].length,e.holes.push(i))}return e}});var Rc=Ge(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.earthRadius=63710088e-1;si.factors={centimeters:si.earthRadius*100,centimetres:si.earthRadius*100,degrees:si.earthRadius/111325,feet:si.earthRadius*3.28084,inches:si.earthRadius*39.37,kilometers:si.earthRadius/1e3,kilometres:si.earthRadius/1e3,meters:si.earthRadius,metres:si.earthRadius,miles:si.earthRadius/1609.344,millimeters:si.earthRadius*1e3,millimetres:si.earthRadius*1e3,nauticalmiles:si.earthRadius/1852,radians:1,yards:si.earthRadius*1.0936};si.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/si.earthRadius,yards:1.0936133};si.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function $o(n,t,e){e===void 0&&(e={});var i={type:"Feature"};return(e.id===0||e.id)&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.properties=t||{},i.geometry=n,i}si.feature=$o;function v1(n,t,e){switch(e===void 0&&(e={}),n){case"Point":return kc(t).geometry;case"LineString":return Tc(t).geometry;case"Polygon":return Lc(t).geometry;case"MultiPoint":return Fm(t).geometry;case"MultiLineString":return Bm(t).geometry;case"MultiPolygon":return zm(t).geometry;default:throw new Error(n+" is invalid")}}si.geometry=v1;function kc(n,t,e){if(e===void 0&&(e={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Lu(n[0])||!Lu(n[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:n};return $o(i,t,e)}si.point=kc;function b1(n,t,e){return e===void 0&&(e={}),Tu(n.map(function(i){return kc(i,t)}),e)}si.points=b1;function Lc(n,t,e){e===void 0&&(e={});for(var i=0,r=n;i<r.length;i++){var s=r[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}var o={type:"Polygon",coordinates:n};return $o(o,t,e)}si.polygon=Lc;function _1(n,t,e){return e===void 0&&(e={}),Tu(n.map(function(i){return Lc(i,t)}),e)}si.polygons=_1;function Tc(n,t,e){if(e===void 0&&(e={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:n};return $o(i,t,e)}si.lineString=Tc;function w1(n,t,e){return e===void 0&&(e={}),Tu(n.map(function(i){return Tc(i,t)}),e)}si.lineStrings=w1;function Tu(n,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=n,e}si.featureCollection=Tu;function Bm(n,t,e){e===void 0&&(e={});var i={type:"MultiLineString",coordinates:n};return $o(i,t,e)}si.multiLineString=Bm;function Fm(n,t,e){e===void 0&&(e={});var i={type:"MultiPoint",coordinates:n};return $o(i,t,e)}si.multiPoint=Fm;function zm(n,t,e){e===void 0&&(e={});var i={type:"MultiPolygon",coordinates:n};return $o(i,t,e)}si.multiPolygon=zm;function x1(n,t,e){e===void 0&&(e={});var i={type:"GeometryCollection",geometries:n};return $o(i,t,e)}si.geometryCollection=x1;function E1(n,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var e=Math.pow(10,t||0);return Math.round(n*e)/e}si.round=E1;function jm(n,t){t===void 0&&(t="kilometers");var e=si.factors[t];if(!e)throw new Error(t+" units is invalid");return n*e}si.radiansToLength=jm;function Pc(n,t){t===void 0&&(t="kilometers");var e=si.factors[t];if(!e)throw new Error(t+" units is invalid");return n/e}si.lengthToRadians=Pc;function C1(n,t){return Hm(Pc(n,t))}si.lengthToDegrees=C1;function M1(n){var t=n%360;return t<0&&(t+=360),t}si.bearingToAzimuth=M1;function Hm(n){var t=n%(2*Math.PI);return t*180/Math.PI}si.radiansToDegrees=Hm;function S1(n){var t=n%360;return t*Math.PI/180}si.degreesToRadians=S1;function k1(n,t,e){if(t===void 0&&(t="kilometers"),e===void 0&&(e="kilometers"),!(n>=0))throw new Error("length must be a positive number");return jm(Pc(n,t),e)}si.convertLength=k1;function L1(n,t,e){if(t===void 0&&(t="meters"),e===void 0&&(e="kilometers"),!(n>=0))throw new Error("area must be a positive number");var i=si.areaFactors[t];if(!i)throw new Error("invalid original units");var r=si.areaFactors[e];if(!r)throw new Error("invalid final units");return n/i*r}si.convertArea=L1;function Lu(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}si.isNumber=Lu;function T1(n){return!!n&&n.constructor===Object}si.isObject=T1;function P1(n){if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be an Array");if(n.length!==4&&n.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");n.forEach(function(t){if(!Lu(t))throw new Error("bbox must only contain numbers")})}si.validateBBox=P1;function R1(n){if(!n)throw new Error("id is required");if(["string","number"].indexOf(typeof n)===-1)throw new Error("id must be a number or a string")}si.validateId=R1});var Ic=Ge(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var ls=Rc();function El(n,t,e){if(n!==null)for(var i,r,s,a,o,l,c,h=0,d=0,p,g=n.type,m=g==="FeatureCollection",_=g==="Feature",v=m?n.features.length:1,x=0;x<v;x++){c=m?n.features[x].geometry:_?n.geometry:n,p=c?c.type==="GeometryCollection":!1,o=p?c.geometries.length:1;for(var S=0;S<o;S++){var O=0,D=0;if(a=p?c.geometries[S]:c,a!==null){l=a.coordinates;var U=a.type;switch(h=e&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(l,d,x,O,D)===!1)return!1;d++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],d,x,O,D)===!1)return!1;d++,U==="MultiPoint"&&O++}U==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(t(l[i][r],d,x,O,D)===!1)return!1;d++}U==="MultiLineString"&&O++,U==="Polygon"&&D++}U==="Polygon"&&O++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(D=0,r=0;r<l[i].length;r++){for(s=0;s<l[i][r].length-h;s++){if(t(l[i][r][s],d,x,O,D)===!1)return!1;d++}D++}O++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(El(a.geometries[i],t,e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function O1(n,t,e,i){var r=e;return El(n,function(s,a,o,l,c){a===0&&e===void 0?r=s:r=t(r,s,a,o,l,c)},i),r}function Gm(n,t){var e;switch(n.type){case"FeatureCollection":for(e=0;e<n.features.length&&t(n.features[e].properties,e)!==!1;e++);break;case"Feature":t(n.properties,0);break}}function I1(n,t,e){var i=e;return Gm(n,function(r,s){s===0&&e===void 0?i=r:i=t(i,r,s)}),i}function Um(n,t){if(n.type==="Feature")t(n,0);else if(n.type==="FeatureCollection")for(var e=0;e<n.features.length&&t(n.features[e],e)!==!1;e++);}function A1(n,t,e){var i=e;return Um(n,function(r,s){s===0&&e===void 0?i=r:i=t(i,r,s)}),i}function N1(n){var t=[];return El(n,function(e){t.push(e)}),t}function Oc(n,t){var e,i,r,s,a,o,l,c,h,d,p=0,g=n.type==="FeatureCollection",m=n.type==="Feature",_=g?n.features.length:1;for(e=0;e<_;e++){for(o=g?n.features[e].geometry:m?n.geometry:n,c=g?n.features[e].properties:m?n.properties:{},h=g?n.features[e].bbox:m?n.bbox:void 0,d=g?n.features[e].id:m?n.id:void 0,l=o?o.type==="GeometryCollection":!1,a=l?o.geometries.length:1,r=0;r<a;r++){if(s=l?o.geometries[r]:o,s===null){if(t(null,p,c,h,d)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,p,c,h,d)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],p,c,h,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function D1(n,t,e){var i=e;return Oc(n,function(r,s,a,o,l){s===0&&e===void 0?i=r:i=t(i,r,s,a,o,l)}),i}function Pu(n,t){Oc(n,function(e,i,r,s,a){var o=e===null?null:e.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(ls.feature(e,r,{bbox:s,id:a}),i,0)===!1?!1:void 0}var l;switch(o){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<e.coordinates.length;c++){var h=e.coordinates[c],d={type:l,coordinates:h};if(t(ls.feature(d,r),i,c)===!1)return!1}})}function B1(n,t,e){var i=e;return Pu(n,function(r,s,a){s===0&&a===0&&e===void 0?i=r:i=t(i,r,s,a)}),i}function Vm(n,t){Pu(n,function(e,i,r){var s=0;if(e.geometry){var a=e.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var o,l=0,c=0,h=0;if(El(e,function(d,p,g,m,_){if(o===void 0||i>l||m>c||_>h){o=d,l=i,c=m,h=_,s=0;return}var v=ls.lineString([o,d],e.properties);if(t(v,i,r,_,s)===!1)return!1;s++,o=d})===!1)return!1}}})}function F1(n,t,e){var i=e,r=!1;return Vm(n,function(s,a,o,l,c){r===!1&&e===void 0?i=s:i=t(i,s,a,o,l,c),r=!0}),i}function qm(n,t){if(!n)throw new Error("geojson is required");Pu(n,function(e,i,r){if(e.geometry!==null){var s=e.geometry.type,a=e.geometry.coordinates;switch(s){case"LineString":if(t(e,i,r,0,0)===!1)return!1;break;case"Polygon":for(var o=0;o<a.length;o++)if(t(ls.lineString(a[o],e.properties),i,r,o)===!1)return!1;break}}})}function z1(n,t,e){var i=e;return qm(n,function(r,s,a,o){s===0&&e===void 0?i=r:i=t(i,r,s,a,o)}),i}function j1(n,t){if(t=t||{},!ls.isObject(t))throw new Error("options is invalid");var e=t.featureIndex||0,i=t.multiFeatureIndex||0,r=t.geometryIndex||0,s=t.segmentIndex||0,a=t.properties,o;switch(n.type){case"FeatureCollection":e<0&&(e=n.features.length+e),a=a||n.features[e].properties,o=n.features[e].geometry;break;case"Feature":a=a||n.properties,o=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=n;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var l=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),ls.lineString([l[s],l[s+1]],a,t);case"Polygon":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s-1),ls.lineString([l[r][s],l[r][s+1]],a,t);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),ls.lineString([l[i][s],l[i][s+1]],a,t);case"MultiPolygon":return i<0&&(i=l.length+i),r<0&&(r=l[i].length+r),s<0&&(s=l[i][r].length-s-1),ls.lineString([l[i][r][s],l[i][r][s+1]],a,t)}throw new Error("geojson is invalid")}function H1(n,t){if(t=t||{},!ls.isObject(t))throw new Error("options is invalid");var e=t.featureIndex||0,i=t.multiFeatureIndex||0,r=t.geometryIndex||0,s=t.coordIndex||0,a=t.properties,o;switch(n.type){case"FeatureCollection":e<0&&(e=n.features.length+e),a=a||n.features[e].properties,o=n.features[e].geometry;break;case"Feature":a=a||n.properties,o=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=n;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var l=o.coordinates;switch(o.type){case"Point":return ls.point(l,a,t);case"MultiPoint":return i<0&&(i=l.length+i),ls.point(l[i],a,t);case"LineString":return s<0&&(s=l.length+s),ls.point(l[s],a,t);case"Polygon":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s),ls.point(l[r][s],a,t);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),ls.point(l[i][s],a,t);case"MultiPolygon":return i<0&&(i=l.length+i),r<0&&(r=l[i].length+r),s<0&&(s=l[i][r].length-s),ls.point(l[i][r][s],a,t)}throw new Error("geojson is invalid")}In.coordAll=N1;In.coordEach=El;In.coordReduce=O1;In.featureEach=Um;In.featureReduce=A1;In.findPoint=H1;In.findSegment=j1;In.flattenEach=Pu;In.flattenReduce=B1;In.geomEach=Oc;In.geomReduce=D1;In.lineEach=qm;In.lineReduce=z1;In.propEach=Gm;In.propReduce=I1;In.segmentEach=Vm;In.segmentReduce=F1});var Wm=Ge(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});var G1=Ic();function Ac(n){var t=[1/0,1/0,-1/0,-1/0];return G1.coordEach(n,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}Ac.default=Ac;Nc.default=Ac});var Ru=Ge((O4,Dc)=>{var _o=uc(),$m=Rc(),Ym=Ic(),Oa=Wm().default,U1=Ym.featureEach,P4=Ym.coordEach,R4=$m.polygon,Xm=$m.featureCollection;function Zm(n){var t=new _o(n);return t.insert=function(e){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:Oa(e),_o.prototype.insert.call(this,e)},t.load=function(e){var i=[];return Array.isArray(e)?e.forEach(function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:Oa(r),i.push(r)}):U1(e,function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:Oa(r),i.push(r)}),_o.prototype.load.call(this,i)},t.remove=function(e,i){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:Oa(e),_o.prototype.remove.call(this,e,i)},t.clear=function(){return _o.prototype.clear.call(this)},t.search=function(e){var i=_o.prototype.search.call(this,this.toBBox(e));return Xm(i)},t.collides=function(e){return _o.prototype.collides.call(this,this.toBBox(e))},t.all=function(){var e=_o.prototype.all.call(this);return Xm(e)},t.toJSON=function(){return _o.prototype.toJSON.call(this)},t.fromJSON=function(e){return _o.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var i;if(e.bbox)i=e.bbox;else if(Array.isArray(e)&&e.length===4)i=e;else if(Array.isArray(e)&&e.length===6)i=[e[0],e[1],e[3],e[4]];else if(e.type==="Feature")i=Oa(e);else if(e.type==="FeatureCollection")i=Oa(e);else throw new Error("invalid geojson");return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}},t}Dc.exports=Zm;Dc.exports.default=Zm});var rg=Ge((Hc,Gc)=>{(function(n,t){typeof Hc=="object"&&typeof Gc<"u"?Gc.exports=t():typeof define=="function"&&define.amd?define(t):n.quickselect=t()})(Hc,function(){"use strict";function n(r,s,a,o,l){t(r,s,a||0,o||r.length-1,l||i)}function t(r,s,a,o,l){for(;o>a;){if(o-a>600){var c=o-a+1,h=s-a+1,d=Math.log(c),p=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*p*(c-p)/c)*(h-c/2<0?-1:1),m=Math.max(a,Math.floor(s-h*p/c+g)),_=Math.min(o,Math.floor(s+(c-h)*p/c+g));t(r,s,m,_,l)}var v=r[s],x=a,S=o;for(e(r,a,s),l(r[o],v)>0&&e(r,a,o);x<S;){for(e(r,x,S),x++,S--;l(r[x],v)<0;)x++;for(;l(r[S],v)>0;)S--}l(r[a],v)===0?e(r,a,S):(S++,e(r,S,o)),S<=s&&(a=S+1),s<=S&&(o=S-1)}}function e(r,s,a){var o=r[s];r[s]=r[a],r[a]=o}function i(r,s){return r<s?-1:r>s?1:0}return n})});var ag=Ge((r6,qc)=>{"use strict";qc.exports=Sl;qc.exports.default=Sl;var Q1=rg();function Sl(n,t){if(!(this instanceof Sl))return new Sl(n,t);this._maxEntries=Math.max(4,n||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}Sl.prototype={all:function(){return this._all(this.data,[])},search:function(n){var t=this.data,e=[],i=this.toBBox;if(!Au(n,t))return e;for(var r=[],s,a,o,l;t;){for(s=0,a=t.children.length;s<a;s++)o=t.children[s],l=t.leaf?i(o):o,Au(n,l)&&(t.leaf?e.push(o):Vc(n,l)?this._all(o,e):r.push(o));t=r.pop()}return e},collides:function(n){var t=this.data,e=this.toBBox;if(!Au(n,t))return!1;for(var i=[],r,s,a,o;t;){for(r=0,s=t.children.length;r<s;r++)if(a=t.children[r],o=t.leaf?e(a):a,Au(n,o)){if(t.leaf||Vc(n,o))return!0;i.push(a)}t=i.pop()}return!1},load:function(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(var t=0,e=n.length;t<e;t++)this.insert(n[t]);return this}var i=this._build(n.slice(),0,n.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}return this},insert:function(n){return n&&this._insert(n,this.data.height-1),this},clear:function(){return this.data=Aa([]),this},remove:function(n,t){if(!n)return this;for(var e=this.data,i=this.toBBox(n),r=[],s=[],a,o,l,c;e||r.length;){if(e||(e=r.pop(),o=r[r.length-1],a=s.pop(),c=!0),e.leaf&&(l=t_(n,e.children,t),l!==-1))return e.children.splice(l,1),r.push(e),this._condense(r),this;!c&&!e.leaf&&Vc(e,i)?(r.push(e),s.push(a),a=0,o=e,e=e.children[0]):o?(a++,e=o.children[a],c=!1):e=null}return this},toBBox:function(n){return n},compareMinX:ng,compareMinY:sg,toJSON:function(){return this.data},fromJSON:function(n){return this.data=n,this},_all:function(n,t){for(var e=[];n;)n.leaf?t.push.apply(t,n.children):e.push.apply(e,n.children),n=e.pop();return t},_build:function(n,t,e,i){var r=e-t+1,s=this._maxEntries,a;if(r<=s)return a=Aa(n.slice(t,e+1)),Ia(a,this.toBBox),a;i||(i=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,i-1))),a=Aa([]),a.leaf=!1,a.height=i;var o=Math.ceil(r/s),l=o*Math.ceil(Math.sqrt(s)),c,h,d,p;for(og(n,t,e,l,this.compareMinX),c=t;c<=e;c+=l)for(d=Math.min(c+l-1,e),og(n,c,d,o,this.compareMinY),h=c;h<=d;h+=o)p=Math.min(h+o-1,d),a.children.push(this._build(n,h,p,i-1));return Ia(a,this.toBBox),a},_chooseSubtree:function(n,t,e,i){for(var r,s,a,o,l,c,h,d;i.push(t),!(t.leaf||i.length-1===e);){for(h=d=1/0,r=0,s=t.children.length;r<s;r++)a=t.children[r],l=Uc(a),c=e_(n,a)-l,c<d?(d=c,h=l<h?l:h,o=a):c===d&&l<h&&(h=l,o=a);t=o||t.children[0]}return t},_insert:function(n,t,e){var i=this.toBBox,r=e?n:i(n),s=[],a=this._chooseSubtree(r,this.data,t,s);for(a.children.push(n),Ml(a,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)},_split:function(n,t){var e=n[t],i=e.children.length,r=this._minEntries;this._chooseSplitAxis(e,r,i);var s=this._chooseSplitIndex(e,r,i),a=Aa(e.children.splice(s,e.children.length-s));a.height=e.height,a.leaf=e.leaf,Ia(e,this.toBBox),Ia(a,this.toBBox),t?n[t-1].children.push(a):this._splitRoot(e,a)},_splitRoot:function(n,t){this.data=Aa([n,t]),this.data.height=n.height+1,this.data.leaf=!1,Ia(this.data,this.toBBox)},_chooseSplitIndex:function(n,t,e){var i,r,s,a,o,l,c,h;for(l=c=1/0,i=t;i<=e-t;i++)r=Cl(n,0,i,this.toBBox),s=Cl(n,i,e,this.toBBox),a=i_(r,s),o=Uc(r)+Uc(s),a<l?(l=a,h=i,c=o<c?o:c):a===l&&o<c&&(c=o,h=i);return h},_chooseSplitAxis:function(n,t,e){var i=n.leaf?this.compareMinX:ng,r=n.leaf?this.compareMinY:sg,s=this._allDistMargin(n,t,e,i),a=this._allDistMargin(n,t,e,r);s<a&&n.children.sort(i)},_allDistMargin:function(n,t,e,i){n.children.sort(i);var r=this.toBBox,s=Cl(n,0,t,r),a=Cl(n,e-t,e,r),o=Iu(s)+Iu(a),l,c;for(l=t;l<e-t;l++)c=n.children[l],Ml(s,n.leaf?r(c):c),o+=Iu(s);for(l=e-t-1;l>=t;l--)c=n.children[l],Ml(a,n.leaf?r(c):c),o+=Iu(a);return o},_adjustParentBBoxes:function(n,t,e){for(var i=e;i>=0;i--)Ml(t[i],n)},_condense:function(n){for(var t=n.length-1,e;t>=0;t--)n[t].children.length===0?t>0?(e=n[t-1].children,e.splice(e.indexOf(n[t]),1)):this.clear():Ia(n[t],this.toBBox)},_initFormat:function(n){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(n[0])),this.compareMinY=new Function("a","b",t.join(n[1])),this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};function t_(n,t,e){if(!e)return t.indexOf(n);for(var i=0;i<t.length;i++)if(e(n,t[i]))return i;return-1}function Ia(n,t){Cl(n,0,n.children.length,t,n)}function Cl(n,t,e,i,r){r||(r=Aa(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s=t,a;s<e;s++)a=n.children[s],Ml(r,n.leaf?i(a):a);return r}function Ml(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function ng(n,t){return n.minX-t.minX}function sg(n,t){return n.minY-t.minY}function Uc(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Iu(n){return n.maxX-n.minX+(n.maxY-n.minY)}function e_(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function i_(n,t){var e=Math.max(n.minX,t.minX),i=Math.max(n.minY,t.minY),r=Math.min(n.maxX,t.maxX),s=Math.min(n.maxY,t.maxY);return Math.max(0,r-e)*Math.max(0,s-i)}function Vc(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function Au(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function Aa(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function og(n,t,e,i,r){for(var s=[t,e],a;s.length;)e=s.pop(),t=s.pop(),!(e-t<=i)&&(a=t+Math.ceil((e-t)/i/2)*i,Q1(n,a,t,e,r),s.push(t,a,a,e))}});var Xc=Ge((H6,pg)=>{"use strict";var dg=Object.prototype.toString;pg.exports=function(t){var e=dg.call(t),i=e==="[object Arguments]";return i||(i=e!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&dg.call(t.callee)==="[object Function]"),i}});var Eg=Ge((G6,xg)=>{"use strict";var wg;Object.keys||(Ll=Object.prototype.hasOwnProperty,$c=Object.prototype.toString,mg=Xc(),Yc=Object.prototype.propertyIsEnumerable,gg=!Yc.call({toString:null},"toString"),yg=Yc.call(function(){},"prototype"),Tl=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Nu=function(n){var t=n.constructor;return t&&t.prototype===n},vg={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},bg=function(){if(typeof window>"u")return!1;for(var n in window)try{if(!vg["$"+n]&&Ll.call(window,n)&&window[n]!==null&&typeof window[n]=="object")try{Nu(window[n])}catch{return!0}}catch{return!0}return!1}(),_g=function(n){if(typeof window>"u"||!bg)return Nu(n);try{return Nu(n)}catch{return!1}},wg=function(t){var e=t!==null&&typeof t=="object",i=$c.call(t)==="[object Function]",r=mg(t),s=e&&$c.call(t)==="[object String]",a=[];if(!e&&!i&&!r)throw new TypeError("Object.keys called on a non-object");var o=yg&&i;if(s&&t.length>0&&!Ll.call(t,0))for(var l=0;l<t.length;++l)a.push(String(l));if(r&&t.length>0)for(var c=0;c<t.length;++c)a.push(String(c));else for(var h in t)!(o&&h==="prototype")&&Ll.call(t,h)&&a.push(String(h));if(gg)for(var d=_g(t),p=0;p<Tl.length;++p)!(d&&Tl[p]==="constructor")&&Ll.call(t,Tl[p])&&a.push(Tl[p]);return a});var Ll,$c,mg,Yc,gg,yg,Tl,Nu,vg,bg,_g;xg.exports=wg});var Zc=Ge((U6,Sg)=>{"use strict";var a_=Array.prototype.slice,l_=Xc(),Cg=Object.keys,Du=Cg?function(t){return Cg(t)}:Eg(),Mg=Object.keys;Du.shim=function(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);t||(Object.keys=function(i){return l_(i)?Mg(a_.call(i)):Mg(i)})}else Object.keys=Du;return Object.keys||Du};Sg.exports=Du});var Kc=Ge((V6,kg)=>{"use strict";kg.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;t[e]=r;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,e);if(a.value!==r||a.enumerable!==!0)return!1}return!0}});var Bu=Ge((q6,Lg)=>{"use strict";var u_=Kc();Lg.exports=function(){return u_()&&!!Symbol.toStringTag}});var Rg=Ge((W6,Pg)=>{"use strict";var Tg=typeof Symbol<"u"&&Symbol,h_=Kc();Pg.exports=function(){return typeof Tg!="function"||typeof Symbol!="function"||typeof Tg("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:h_()}});var Ig=Ge((X6,Og)=>{"use strict";var c_="Function.prototype.bind called on incompatible ",Jc=Array.prototype.slice,f_=Object.prototype.toString,d_="[object Function]";Og.exports=function(t){var e=this;if(typeof e!="function"||f_.call(e)!==d_)throw new TypeError(c_+e);for(var i=Jc.call(arguments,1),r,s=function(){if(this instanceof r){var h=e.apply(this,i.concat(Jc.call(arguments)));return Object(h)===h?h:this}else return e.apply(t,i.concat(Jc.call(arguments)))},a=Math.max(0,e.length-i.length),o=[],l=0;l<a;l++)o.push("$"+l);if(r=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r}});var Fu=Ge(($6,Ag)=>{"use strict";var p_=Ig();Ag.exports=Function.prototype.bind||p_});var Dg=Ge((Y6,Ng)=>{"use strict";var m_=Fu();Ng.exports=m_.call(Function.call,Object.prototype.hasOwnProperty)});var Hu=Ge((Z6,Hg)=>{"use strict";var dr,Fa=SyntaxError,jg=Function,Ba=TypeError,Qc=function(n){try{return jg('"use strict"; return ('+n+").constructor;")()}catch{}},la=Object.getOwnPropertyDescriptor;if(la)try{la({},"")}catch{la=null}var tf=function(){throw new Ba},g_=la?function(){try{return arguments.callee,tf}catch{try{return la(arguments,"callee").get}catch{return tf}}}():tf,Na=Rg()(),xo=Object.getPrototypeOf||function(n){return n.__proto__},Da={},y_=typeof Uint8Array>"u"?dr:xo(Uint8Array),ua={"%AggregateError%":typeof AggregateError>"u"?dr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?dr:ArrayBuffer,"%ArrayIteratorPrototype%":Na?xo([][Symbol.iterator]()):dr,"%AsyncFromSyncIteratorPrototype%":dr,"%AsyncFunction%":Da,"%AsyncGenerator%":Da,"%AsyncGeneratorFunction%":Da,"%AsyncIteratorPrototype%":Da,"%Atomics%":typeof Atomics>"u"?dr:Atomics,"%BigInt%":typeof BigInt>"u"?dr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?dr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?dr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?dr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?dr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?dr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?dr:FinalizationRegistry,"%Function%":jg,"%GeneratorFunction%":Da,"%Int8Array%":typeof Int8Array>"u"?dr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?dr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?dr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Na?xo(xo([][Symbol.iterator]())):dr,"%JSON%":typeof JSON=="object"?JSON:dr,"%Map%":typeof Map>"u"?dr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Na?dr:xo(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?dr:Promise,"%Proxy%":typeof Proxy>"u"?dr:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?dr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?dr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Na?dr:xo(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?dr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Na?xo(""[Symbol.iterator]()):dr,"%Symbol%":Na?Symbol:dr,"%SyntaxError%":Fa,"%ThrowTypeError%":g_,"%TypedArray%":y_,"%TypeError%":Ba,"%Uint8Array%":typeof Uint8Array>"u"?dr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?dr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?dr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?dr:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?dr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?dr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?dr:WeakSet};try{null.error}catch(n){Bg=xo(xo(n)),ua["%Error.prototype%"]=Bg}var Bg,v_=function n(t){var e;if(t==="%AsyncFunction%")e=Qc("async function () {}");else if(t==="%GeneratorFunction%")e=Qc("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Qc("async function* () {}");else if(t==="%AsyncGenerator%"){var i=n("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var r=n("%AsyncGenerator%");r&&(e=xo(r.prototype))}return ua[t]=e,e},Fg={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Pl=Fu(),zu=Dg(),b_=Pl.call(Function.call,Array.prototype.concat),__=Pl.call(Function.apply,Array.prototype.splice),zg=Pl.call(Function.call,String.prototype.replace),ju=Pl.call(Function.call,String.prototype.slice),w_=Pl.call(Function.call,RegExp.prototype.exec),x_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E_=/\\(\\)?/g,C_=function(t){var e=ju(t,0,1),i=ju(t,-1);if(e==="%"&&i!=="%")throw new Fa("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new Fa("invalid intrinsic syntax, expected opening `%`");var r=[];return zg(t,x_,function(s,a,o,l){r[r.length]=o?zg(l,E_,"$1"):a||s}),r},M_=function(t,e){var i=t,r;if(zu(Fg,i)&&(r=Fg[i],i="%"+r[0]+"%"),zu(ua,i)){var s=ua[i];if(s===Da&&(s=v_(i)),typeof s>"u"&&!e)throw new Ba("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:s}}throw new Fa("intrinsic "+t+" does not exist!")};Hg.exports=function(t,e){if(typeof t!="string"||t.length===0)throw new Ba("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Ba('"allowMissing" argument must be a boolean');if(w_(/^%?[^%]*%?$/,t)===null)throw new Fa("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=C_(t),r=i.length>0?i[0]:"",s=M_("%"+r+"%",e),a=s.name,o=s.value,l=!1,c=s.alias;c&&(r=c[0],__(i,b_([0,1],c)));for(var h=1,d=!0;h<i.length;h+=1){var p=i[h],g=ju(p,0,1),m=ju(p,-1);if((g==='"'||g==="'"||g==="`"||m==='"'||m==="'"||m==="`")&&g!==m)throw new Fa("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(l=!0),r+="."+p,a="%"+r+"%",zu(ua,a))o=ua[a];else if(o!=null){if(!(p in o)){if(!e)throw new Ba("base intrinsic for "+t+" exists, but the property is not available.");return}if(la&&h+1>=i.length){var _=la(o,p);d=!!_,d&&"get"in _&&!("originalValue"in _.get)?o=_.get:o=o[p]}else d=zu(o,p),o=o[p];d&&!l&&(ua[a]=o)}}return o}});var Uu=Ge((K6,Gu)=>{"use strict";var ef=Fu(),za=Hu(),Vg=za("%Function.prototype.apply%"),qg=za("%Function.prototype.call%"),Wg=za("%Reflect.apply%",!0)||ef.call(qg,Vg),Gg=za("%Object.getOwnPropertyDescriptor%",!0),ha=za("%Object.defineProperty%",!0),S_=za("%Math.max%");if(ha)try{ha({},"a",{value:1})}catch{ha=null}Gu.exports=function(t){var e=Wg(ef,qg,arguments);if(Gg&&ha){var i=Gg(e,"length");i.configurable&&ha(e,"length",{value:1+S_(0,t.length-(arguments.length-1))})}return e};var Ug=function(){return Wg(ef,Vg,arguments)};ha?ha(Gu.exports,"apply",{value:Ug}):Gu.exports.apply=Ug});var rf=Ge((J6,Yg)=>{"use strict";var Xg=Hu(),$g=Uu(),k_=$g(Xg("String.prototype.indexOf"));Yg.exports=function(t,e){var i=Xg(t,!!e);return typeof i=="function"&&k_(t,".prototype.")>-1?$g(i):i}});var Jg=Ge((Q6,Kg)=>{"use strict";var L_=Bu()(),T_=rf(),nf=T_("Object.prototype.toString"),Vu=function(t){return L_&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:nf(t)==="[object Arguments]"},Zg=function(t){return Vu(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&nf(t)!=="[object Array]"&&nf(t.callee)==="[object Function]"},P_=function(){return Vu(arguments)}();Vu.isLegacyArguments=Zg;Kg.exports=P_?Vu:Zg});var t0=Ge((tT,Qg)=>{"use strict";var R_=Hu(),sf=R_("%Object.defineProperty%",!0),of=function(){if(sf)try{return sf({},"a",{value:1}),!0}catch{return!1}return!1};of.hasArrayLengthDefineBug=function(){if(!of())return null;try{return sf([],"length",{value:1}).length!==1}catch{return!0}};Qg.exports=of});var ja=Ge((eT,n0)=>{"use strict";var O_=Zc(),I_=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",A_=Object.prototype.toString,N_=Array.prototype.concat,e0=Object.defineProperty,D_=function(n){return typeof n=="function"&&A_.call(n)==="[object Function]"},B_=t0()(),i0=e0&&B_,F_=function(n,t,e,i){if(t in n){if(i===!0){if(n[t]===e)return}else if(!D_(i)||!i())return}i0?e0(n,t,{configurable:!0,enumerable:!1,value:e,writable:!0}):n[t]=e},r0=function(n,t){var e=arguments.length>2?arguments[2]:{},i=O_(t);I_&&(i=N_.call(i,Object.getOwnPropertySymbols(t)));for(var r=0;r<i.length;r+=1)F_(n,i[r],t[i[r]],e[i[r]])};r0.supportsDescriptors=!!i0;n0.exports=r0});var af=Ge((iT,o0)=>{"use strict";var s0=function(n){return n!==n};o0.exports=function(t,e){return t===0&&e===0?1/t===1/e:!!(t===e||s0(t)&&s0(e))}});var lf=Ge((rT,a0)=>{"use strict";var z_=af();a0.exports=function(){return typeof Object.is=="function"?Object.is:z_}});var u0=Ge((nT,l0)=>{"use strict";var j_=lf(),H_=ja();l0.exports=function(){var t=j_();return H_(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var d0=Ge((sT,f0)=>{"use strict";var G_=ja(),U_=Uu(),V_=af(),h0=lf(),q_=u0(),c0=U_(h0(),Object);G_(c0,{getPolyfill:h0,implementation:V_,shim:q_});f0.exports=c0});var v0=Ge((oT,y0)=>{"use strict";var uf=rf(),p0=Bu()(),m0,g0,hf,cf;p0&&(m0=uf("Object.prototype.hasOwnProperty"),g0=uf("RegExp.prototype.exec"),hf={},qu=function(){throw hf},cf={toString:qu,valueOf:qu},typeof Symbol.toPrimitive=="symbol"&&(cf[Symbol.toPrimitive]=qu));var qu,W_=uf("Object.prototype.toString"),X_=Object.getOwnPropertyDescriptor,$_="[object RegExp]";y0.exports=p0?function(t){if(!t||typeof t!="object")return!1;var e=X_(t,"lastIndex"),i=e&&m0(e,"value");if(!i)return!1;try{g0(t,cf)}catch(r){return r===hf}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:W_(t)===$_}});var _0=Ge((aT,b0)=>{"use strict";var Ol=function(){return typeof function(){}.name=="string"},Rl=Object.getOwnPropertyDescriptor;if(Rl)try{Rl([],"length")}catch{Rl=null}Ol.functionsHaveConfigurableNames=function(){if(!Ol()||!Rl)return!1;var t=Rl(function(){},"name");return!!t&&!!t.configurable};var Y_=Function.prototype.bind;Ol.boundFunctionsHaveNames=function(){return Ol()&&typeof Y_=="function"&&function(){}.bind().name!==""};b0.exports=Ol});var df=Ge((lT,ff)=>{"use strict";var Z_=_0().functionsHaveConfigurableNames(),K_=Object,J_=TypeError;ff.exports=function(){if(this!=null&&this!==K_(this))throw new J_("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t};Z_&&Object.defineProperty&&Object.defineProperty(ff.exports,"name",{value:"get flags"})});var pf=Ge((uT,w0)=>{"use strict";var Q_=df(),tw=ja().supportsDescriptors,ew=Object.getOwnPropertyDescriptor;w0.exports=function(){if(tw&&/a/mig.flags==="gim"){var t=ew(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var e="",i={};if(Object.defineProperty(i,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(i,"sticky",{get:function(){e+="y"}}),e==="dy")return t.get}}return Q_}});var C0=Ge((hT,E0)=>{"use strict";var iw=ja().supportsDescriptors,rw=pf(),nw=Object.getOwnPropertyDescriptor,sw=Object.defineProperty,ow=TypeError,x0=Object.getPrototypeOf,aw=/a/;E0.exports=function(){if(!iw||!x0)throw new ow("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=rw(),e=x0(aw),i=nw(e,"flags");return(!i||i.get!==t)&&sw(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var L0=Ge((cT,k0)=>{"use strict";var lw=ja(),uw=Uu(),hw=df(),M0=pf(),cw=C0(),S0=uw(M0());lw(S0,{getPolyfill:M0,implementation:hw,shim:cw});k0.exports=S0});var P0=Ge((fT,T0)=>{"use strict";var fw=Date.prototype.getDay,dw=function(t){try{return fw.call(t),!0}catch{return!1}},pw=Object.prototype.toString,mw="[object Date]",gw=Bu()();T0.exports=function(t){return typeof t!="object"||t===null?!1:gw?dw(t):pw.call(t)===mw}});var mf=Ge((dT,H0)=>{var R0=Zc(),O0=Jg(),I0=d0(),A0=v0(),N0=L0(),D0=P0(),B0=Date.prototype.getTime;function j0(n,t,e){var i=e||{};return(i.strict?I0(n,t):n===t)?!0:!n||!t||typeof n!="object"&&typeof t!="object"?i.strict?I0(n,t):n==t:yw(n,t,i)}function F0(n){return n==null}function z0(n){return!(!n||typeof n!="object"||typeof n.length!="number"||typeof n.copy!="function"||typeof n.slice!="function"||n.length>0&&typeof n[0]!="number")}function yw(n,t,e){var i,r;if(typeof n!=typeof t||F0(n)||F0(t)||n.prototype!==t.prototype||O0(n)!==O0(t))return!1;var s=A0(n),a=A0(t);if(s!==a)return!1;if(s||a)return n.source===t.source&&N0(n)===N0(t);if(D0(n)&&D0(t))return B0.call(n)===B0.call(t);var o=z0(n),l=z0(t);if(o!==l)return!1;if(o||l){if(n.length!==t.length)return!1;for(i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}if(typeof n!=typeof t)return!1;try{var c=R0(n),h=R0(t)}catch{return!1}if(c.length!==h.length)return!1;for(c.sort(),h.sort(),i=c.length-1;i>=0;i--)if(c[i]!=h[i])return!1;for(i=c.length-1;i>=0;i--)if(r=c[i],!j0(n[r],t[r],e))return!1;return!0}H0.exports=j0});var Pf=Ge((b8,Z0)=>{var px=mf(),Eo=function(n){this.precision=n&&n.precision?n.precision:17,this.direction=n&&n.direction?n.direction:!1,this.pseudoNode=n&&n.pseudoNode?n.pseudoNode:!1,this.objectComparator=n&&n.objectComparator?n.objectComparator:mx};Eo.prototype.compare=function(n,t){if(n.type!==t.type||!Y0(n,t))return!1;switch(n.type){case"Point":return this.compareCoord(n.coordinates,t.coordinates);case"LineString":return this.compareLine(n.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(n,t);case"Feature":return this.compareFeature(n,t);default:if(n.type.indexOf("Multi")===0){var e=this,i=$0(n),r=$0(t);return i.every(function(s){return this.some(function(a){return e.compare(s,a)})},r)}}return!1};function $0(n){return n.coordinates.map(function(t){return{type:n.type.replace("Multi",""),coordinates:t}})}function Y0(n,t){return n.hasOwnProperty("coordinates")?n.coordinates.length===t.coordinates.length:n.length===t.length}Eo.prototype.compareCoord=function(n,t){if(n.length!==t.length)return!1;for(var e=0;e<n.length;e++)if(n[e].toFixed(this.precision)!==t[e].toFixed(this.precision))return!1;return!0};Eo.prototype.compareLine=function(n,t,e,i){if(!Y0(n,t))return!1;var r=this.pseudoNode?n:this.removePseudo(n),s=this.pseudoNode?t:this.removePseudo(t);if(!(i&&!this.compareCoord(r[0],s[0])&&(s=this.fixStartIndex(s,r),!s))){var a=this.compareCoord(r[e],s[e]);return this.direction||a?this.comparePath(r,s):this.compareCoord(r[e],s[s.length-(1+e)])?this.comparePath(r.slice().reverse(),s):!1}};Eo.prototype.fixStartIndex=function(n,t){for(var e,i=-1,r=0;r<n.length;r++)if(this.compareCoord(n[r],t[0])){i=r;break}return i>=0&&(e=[].concat(n.slice(i,n.length),n.slice(1,i+1))),e};Eo.prototype.comparePath=function(n,t){var e=this;return n.every(function(i,r){return e.compareCoord(i,this[r])},t)};Eo.prototype.comparePolygon=function(n,t){if(this.compareLine(n.coordinates[0],t.coordinates[0],1,!0)){var e=n.coordinates.slice(1,n.coordinates.length),i=t.coordinates.slice(1,t.coordinates.length),r=this;return e.every(function(s){return this.some(function(a){return r.compareLine(s,a,1,!0)})},i)}else return!1};Eo.prototype.compareFeature=function(n,t){return n.id!==t.id||!this.objectComparator(n.properties,t.properties)||!this.compareBBox(n,t)?!1:this.compare(n.geometry,t.geometry)};Eo.prototype.compareBBox=function(n,t){return!!(!n.bbox&&!t.bbox||n.bbox&&t.bbox&&this.compareCoord(n.bbox,t.bbox))};Eo.prototype.removePseudo=function(n){return n};function mx(n,t){return px(n,t,{strict:!0})}Z0.exports=Eo});var J0=Ge((R8,$u)=>{function Ko(n,t,e,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(n,t,e,i)}Ko.prototype.run=function(n,t,e,i){this._init(n,t,e,i);for(var r=0;r<this._datasetLength;r++)if(this._visited[r]!==1){this._visited[r]=1;var s=this._regionQuery(r);if(s.length<this.minPts)this.noise.push(r);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(r,a),this._expandCluster(a,s)}}return this.clusters};Ko.prototype._init=function(n,t,e,i){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this.noise=[],this._datasetLength=n.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t),e&&(this.minPts=e),i&&(this.distance=i)};Ko.prototype._expandCluster=function(n,t){for(var e=0;e<t.length;e++){var i=t[e];if(this._visited[i]!==1){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(t=this._mergeArrays(t,r))}this._assigned[i]!==1&&this._addToCluster(i,n)}};Ko.prototype._addToCluster=function(n,t){this.clusters[t].push(n),this._assigned[n]=1};Ko.prototype._regionQuery=function(n){for(var t=[],e=0;e<this._datasetLength;e++){var i=this.distance(this.dataset[n],this.dataset[e]);i<this.epsilon&&t.push(e)}return t};Ko.prototype._mergeArrays=function(n,t){for(var e=t.length,i=0;i<e;i++){var r=t[i];n.indexOf(r)<0&&n.push(r)}return n};Ko.prototype._euclideanDistance=function(n,t){for(var e=0,i=Math.min(n.length,t.length);i--;)e+=(n[i]-t[i])*(n[i]-t[i]);return Math.sqrt(e)};typeof $u<"u"&&$u.exports&&($u.exports=Ko)});var Q0=Ge((O8,Yu)=>{function Jo(n,t,e){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(n,t,e)}Jo.prototype.init=function(n,t,e){this.assignments=[],this.centroids=[],typeof n<"u"&&(this.dataset=n),typeof t<"u"&&(this.k=t),typeof e<"u"&&(this.distance=e)};Jo.prototype.run=function(n,t){this.init(n,t);for(var e=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var s=0;s<this.k;s++){for(var a=new Array(h),o=0,l=0;l<h;l++)a[l]=0;for(var c=0;c<e;c++){var h=this.dataset[c].length;if(s===this.assignments[c]){for(var l=0;l<h;l++)a[l]+=this.dataset[c][l];o++}}if(o>0){for(var l=0;l<h;l++)a[l]/=o;this.centroids[s]=a}else this.centroids[s]=this.randomCentroid(),r=!0}}return this.getClusters()};Jo.prototype.randomCentroid=function(){var n=this.dataset.length-1,t,e;do e=Math.round(Math.random()*n),t=this.dataset[e];while(this.centroids.indexOf(t)>=0);return t};Jo.prototype.assign=function(){for(var n=!1,t=this.dataset.length,e,i=0;i<t;i++)e=this.argmin(this.dataset[i],this.centroids,this.distance),e!=this.assignments[i]&&(this.assignments[i]=e,n=!0);return n};Jo.prototype.getClusters=function(){for(var n=new Array(this.k),t,e=0;e<this.assignments.length;e++)t=this.assignments[e],typeof n[t]>"u"&&(n[t]=[]),n[t].push(e);return n};Jo.prototype.argmin=function(n,t,e){for(var i=Number.MAX_VALUE,r=0,s=t.length,a,o=0;o<s;o++)a=e(n,t[o]),a<i&&(i=a,r=o);return r};Jo.prototype.distance=function(n,t){for(var e=0,i=Math.min(n.length,t.length);i--;){var r=n[i]-t[i];e+=r*r}return Math.sqrt(e)};typeof Yu<"u"&&Yu.exports&&(Yu.exports=Jo)});var Rf=Ge((I8,Zu)=>{function Co(n,t,e){this._queue=[],this._priorities=[],this._sorting="desc",this._init(n,t,e)}Co.prototype.insert=function(n,t){for(var e=this._queue.length,i=e;i--;){var r=this._priorities[i];this._sorting==="desc"?t>r&&(e=i):t<r&&(e=i)}this._insertAt(n,t,e)};Co.prototype.remove=function(n){for(var t=this._queue.length;t--;){var e=this._queue[t];if(n===e){this._queue.splice(t,1),this._priorities.splice(t,1);break}}};Co.prototype.forEach=function(n){this._queue.forEach(n)};Co.prototype.getElements=function(){return this._queue};Co.prototype.getElementPriority=function(n){return this._priorities[n]};Co.prototype.getPriorities=function(){return this._priorities};Co.prototype.getElementsWithPriorities=function(){for(var n=[],t=0,e=this._queue.length;t<e;t++)n.push([this._queue[t],this._priorities[t]]);return n};Co.prototype._init=function(n,t,e){if(n&&t){if(this._queue=[],this._priorities=[],n.length!==t.length)throw new Error("Arrays must have the same length");for(var i=0;i<n.length;i++)this.insert(n[i],t[i])}e&&(this._sorting=e)};Co.prototype._insertAt=function(n,t,e){this._queue.length===e?(this._queue.push(n),this._priorities.push(t)):(this._queue.splice(e,0,n),this._priorities.splice(e,0,t))};typeof Zu<"u"&&Zu.exports&&(Zu.exports=Co)});var ey=Ge((A8,Ua)=>{typeof Ua<"u"&&Ua.exports&&(ty=Rf());var ty;function Fo(n,t,e,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,t,e,i)}Fo.prototype.run=function(n,t,e,i){this._init(n,t,e,i);for(var r=0,s=this.dataset.length;r<s;r++)if(this._processed[r]!==1){this._processed[r]=1,this.clusters.push([r]);var a=this.clusters.length-1;this._orderedList.push(r);var o=new ty(null,null,"asc"),l=this._regionQuery(r);this._distanceToCore(r)!==void 0&&(this._updateQueue(r,l,o),this._expandCluster(a,o))}return this.clusters};Fo.prototype.getReachabilityPlot=function(){for(var n=[],t=0,e=this._orderedList.length;t<e;t++){var i=this._orderedList[t],r=this._reachability[i];n.push([i,r])}return n};Fo.prototype._init=function(n,t,e,i){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}t&&(this.epsilon=t),e&&(this.minPts=e),i&&(this.distance=i)};Fo.prototype._updateQueue=function(n,t,e){var i=this;this._coreDistance=this._distanceToCore(n),t.forEach(function(r){if(i._processed[r]===void 0){var s=i.distance(i.dataset[n],i.dataset[r]),a=Math.max(i._coreDistance,s);i._reachability[r]===void 0?(i._reachability[r]=a,e.insert(r,a)):a<i._reachability[r]&&(i._reachability[r]=a,e.remove(r),e.insert(r,a))}})};Fo.prototype._expandCluster=function(n,t){for(var e=t.getElements(),i=0,r=e.length;i<r;i++){var s=e[i];if(this._processed[s]===void 0){var a=this._regionQuery(s);this._processed[s]=1,this.clusters[n].push(s),this._orderedList.push(s),this._distanceToCore(s)!==void 0&&(this._updateQueue(s,a,t),this._expandCluster(n,t))}}};Fo.prototype._distanceToCore=function(n){for(var t=this.epsilon,e=0;e<t;e++){var i=this._regionQuery(n,e);if(i.length>=this.minPts)return e}};Fo.prototype._regionQuery=function(n,t){t=t||this.epsilon;for(var e=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[n],this.dataset[i])<t&&e.push(i);return e};Fo.prototype._euclideanDistance=function(n,t){for(var e=0,i=Math.min(n.length,t.length);i--;)e+=(n[i]-t[i])*(n[i]-t[i]);return Math.sqrt(e)};typeof Ua<"u"&&Ua.exports&&(Ua.exports=Fo)});var iy=Ge((N8,Ku)=>{typeof Ku<"u"&&Ku.exports&&(Ku.exports={DBSCAN:J0(),KMEANS:Q0(),OPTICS:ey(),PriorityQueue:Rf()})});var Of=Ge((H8,ny)=>{"use strict";ny.exports={eudist:function(t,e,i){for(var r=t.length,s=0,a=0;a<r;a++){var o=(t[a]||0)-(e[a]||0);s+=o*o}return i?Math.sqrt(s):s},mandist:function(t,e,i){for(var r=t.length,s=0,a=0;a<r;a++)s+=Math.abs((t[a]||0)-(e[a]||0));return i?Math.sqrt(s):s},dist:function(t,e,i){var r=Math.abs(t-e);return i?r:r*r}}});var ay=Ge((G8,oy)=>{"use strict";var sy=Of(),bx=sy.eudist,_x=sy.dist;oy.exports={kmrand:function(t,e){for(var i={},r=[],s=e<<2,a=t.length,o=t[0].length>0;r.length<e&&s-- >0;){var l=t[Math.floor(Math.random()*a)],c=o?l.join("_"):""+l;i[c]||(i[c]=!0,r.push(l))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var i=t[0].length?bx:_x,r=[],s=t.length,a=t[0].length>0,o={},l=t[Math.floor(Math.random()*s)],c=a?l.join("_"):""+l;for(r.push(l),o[c]=!0;r.length<e;){for(var h=[],d=r.length,p=0,g=[],m=0;m<s;m++){for(var _=1/0,v=0;v<d;v++){var x=i(t[m],r[v]);x<=_&&(_=x)}h[m]=_}for(var S=0;S<s;S++)p+=h[S];for(var O=0;O<s;O++)g[O]={i:O,v:t[O],pr:h[O]/p,cs:0};g.sort(function(V,G){return V.pr-G.pr}),g[0].cs=g[0].pr;for(var D=1;D<s;D++)g[D].cs=g[D-1].cs+g[D].pr;for(var U=Math.random(),z=0;z<s-1&&g[z++].cs<U;);r.push(g[z-1].v)}return r}}});var fy=Ge((q8,cy)=>{"use strict";var If=Of(),hy=ay(),wx=If.eudist,U8=If.mandist,V8=If.dist,xx=hy.kmrand,Ex=hy.kmpp,ly=1e4;function uy(n,t,e){e=e||[];for(var i=0;i<n;i++)e[i]=t;return e}function Cx(n,t,e,i){var r=[],s=[],a=[],o=[],l=!1,c=i||ly,h=n.length,d=n[0].length,p=d>0,g=[];if(e)e=="kmrand"?r=xx(n,t):e=="kmpp"?r=Ex(n,t):r=e;else for(var m={};r.length<t;){var _=Math.floor(Math.random()*h);m[_]||(m[_]=!0,r.push(n[_]))}do{uy(t,0,g);for(var v=0;v<h;v++){for(var x=1/0,S=0,O=0;O<t;O++){var o=p?wx(n[v],r[O]):Math.abs(n[v]-r[O]);o<=x&&(x=o,S=O)}a[v]=S,g[S]++}for(var D=[],s=[],U=0,z=0;z<t;z++)D[z]=p?uy(d,0,D[z]):0,s[z]=r[z];if(p){for(var V=0;V<t;V++)r[V]=[];for(var G=0;G<h;G++)for(var tt=a[G],K=D[tt],B=n[G],N=0;N<d;N++)K[N]+=B[N];l=!0;for(var Z=0;Z<t;Z++){for(var w=r[Z],C=D[Z],k=s[Z],T=g[Z],R=0;R<d;R++)w[R]=C[R]/T||0;if(l){for(var F=0;F<d;F++)if(k[F]!=w[F]){l=!1;break}}}}else{for(var H=0;H<h;H++){var it=a[H];D[it]+=n[H]}for(var ot=0;ot<t;ot++)r[ot]=D[ot]/g[ot]||0;l=!0;for(var dt=0;dt<t;dt++)if(s[dt]!=r[dt]){l=!1;break}}l=l||--c<=0}while(!l);return{it:ly-c,k:t,idxs:a,centroids:r}}cy.exports=Cx});var $a=Ge((zf,jf)=>{(function(n,t){typeof zf=="object"&&typeof jf<"u"?jf.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis<"u"?globalThis:n||self,n.polygonClipping=t())})(zf,function(){"use strict";function n(gt,ut){if(!(gt instanceof ut))throw new TypeError("Cannot call a class as a function")}function t(gt,ut){for(var Q=0;Q<ut.length;Q++){var Y=ut[Q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(gt,Y.key,Y)}}function e(gt,ut,Q){return ut&&t(gt.prototype,ut),Q&&t(gt,Q),gt}var i=function(){function gt(ut,Q){this.next=null,this.key=ut,this.data=Q,this.left=null,this.right=null}return gt}();function r(gt,ut){return gt>ut?1:gt<ut?-1:0}function s(gt,ut,Q){for(var Y=new i(null,null),et=Y,lt=Y;;){var pt=Q(gt,ut.key);if(pt<0){if(ut.left===null)break;if(Q(gt,ut.left.key)<0){var bt=ut.left;if(ut.left=bt.right,bt.right=ut,ut=bt,ut.left===null)break}lt.left=ut,lt=ut,ut=ut.left}else if(pt>0){if(ut.right===null)break;if(Q(gt,ut.right.key)>0){var bt=ut.right;if(ut.right=bt.left,bt.left=ut,ut=bt,ut.right===null)break}et.right=ut,et=ut,ut=ut.right}else break}return et.right=ut.left,lt.left=ut.right,ut.left=Y.right,ut.right=Y.left,ut}function a(gt,ut,Q,Y){var et=new i(gt,ut);if(Q===null)return et.left=et.right=null,et;Q=s(gt,Q,Y);var lt=Y(gt,Q.key);return lt<0?(et.left=Q.left,et.right=Q,Q.left=null):lt>=0&&(et.right=Q.right,et.left=Q,Q.right=null),et}function o(gt,ut,Q){var Y=null,et=null;if(ut){ut=s(gt,ut,Q);var lt=Q(ut.key,gt);lt===0?(Y=ut.left,et=ut.right):lt<0?(et=ut.right,ut.right=null,Y=ut):(Y=ut.left,ut.left=null,et=ut)}return{left:Y,right:et}}function l(gt,ut,Q){return ut===null?gt:(gt===null||(ut=s(gt.key,ut,Q),ut.left=gt),ut)}function c(gt,ut,Q,Y,et){if(gt){Y(""+ut+(Q?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+et(gt)+`
`);var lt=ut+(Q?"    ":"\u2502   ");gt.left&&c(gt.left,lt,!1,Y,et),gt.right&&c(gt.right,lt,!0,Y,et)}}var h=function(){function gt(ut){ut===void 0&&(ut=r),this._root=null,this._size=0,this._comparator=ut}return gt.prototype.insert=function(ut,Q){return this._size++,this._root=a(ut,Q,this._root,this._comparator)},gt.prototype.add=function(ut,Q){var Y=new i(ut,Q);this._root===null&&(Y.left=Y.right=null,this._size++,this._root=Y);var et=this._comparator,lt=s(ut,this._root,et),pt=et(ut,lt.key);return pt===0?this._root=lt:(pt<0?(Y.left=lt.left,Y.right=lt,lt.left=null):pt>0&&(Y.right=lt.right,Y.left=lt,lt.right=null),this._size++,this._root=Y),this._root},gt.prototype.remove=function(ut){this._root=this._remove(ut,this._root,this._comparator)},gt.prototype._remove=function(ut,Q,Y){var et;if(Q===null)return null;Q=s(ut,Q,Y);var lt=Y(ut,Q.key);return lt===0?(Q.left===null?et=Q.right:(et=s(ut,Q.left,Y),et.right=Q.right),this._size--,et):Q},gt.prototype.pop=function(){var ut=this._root;if(ut){for(;ut.left;)ut=ut.left;return this._root=s(ut.key,this._root,this._comparator),this._root=this._remove(ut.key,this._root,this._comparator),{key:ut.key,data:ut.data}}return null},gt.prototype.findStatic=function(ut){for(var Q=this._root,Y=this._comparator;Q;){var et=Y(ut,Q.key);if(et===0)return Q;et<0?Q=Q.left:Q=Q.right}return null},gt.prototype.find=function(ut){return this._root&&(this._root=s(ut,this._root,this._comparator),this._comparator(ut,this._root.key)!==0)?null:this._root},gt.prototype.contains=function(ut){for(var Q=this._root,Y=this._comparator;Q;){var et=Y(ut,Q.key);if(et===0)return!0;et<0?Q=Q.left:Q=Q.right}return!1},gt.prototype.forEach=function(ut,Q){for(var Y=this._root,et=[],lt=!1;!lt;)Y!==null?(et.push(Y),Y=Y.left):et.length!==0?(Y=et.pop(),ut.call(Q,Y),Y=Y.right):lt=!0;return this},gt.prototype.range=function(ut,Q,Y,et){for(var lt=[],pt=this._comparator,bt=this._root,Et;lt.length!==0||bt;)if(bt)lt.push(bt),bt=bt.left;else{if(bt=lt.pop(),Et=pt(bt.key,Q),Et>0)break;if(pt(bt.key,ut)>=0&&Y.call(et,bt))return this;bt=bt.right}return this},gt.prototype.keys=function(){var ut=[];return this.forEach(function(Q){var Y=Q.key;return ut.push(Y)}),ut},gt.prototype.values=function(){var ut=[];return this.forEach(function(Q){var Y=Q.data;return ut.push(Y)}),ut},gt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},gt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},gt.prototype.minNode=function(ut){if(ut===void 0&&(ut=this._root),ut)for(;ut.left;)ut=ut.left;return ut},gt.prototype.maxNode=function(ut){if(ut===void 0&&(ut=this._root),ut)for(;ut.right;)ut=ut.right;return ut},gt.prototype.at=function(ut){for(var Q=this._root,Y=!1,et=0,lt=[];!Y;)if(Q)lt.push(Q),Q=Q.left;else if(lt.length>0){if(Q=lt.pop(),et===ut)return Q;et++,Q=Q.right}else Y=!0;return null},gt.prototype.next=function(ut){var Q=this._root,Y=null;if(ut.right){for(Y=ut.right;Y.left;)Y=Y.left;return Y}for(var et=this._comparator;Q;){var lt=et(ut.key,Q.key);if(lt===0)break;lt<0?(Y=Q,Q=Q.left):Q=Q.right}return Y},gt.prototype.prev=function(ut){var Q=this._root,Y=null;if(ut.left!==null){for(Y=ut.left;Y.right;)Y=Y.right;return Y}for(var et=this._comparator;Q;){var lt=et(ut.key,Q.key);if(lt===0)break;lt<0?Q=Q.left:(Y=Q,Q=Q.right)}return Y},gt.prototype.clear=function(){return this._root=null,this._size=0,this},gt.prototype.toList=function(){return g(this._root)},gt.prototype.load=function(ut,Q,Y){Q===void 0&&(Q=[]),Y===void 0&&(Y=!1);var et=ut.length,lt=this._comparator;if(Y&&v(ut,Q,0,et-1,lt),this._root===null)this._root=d(ut,Q,0,et),this._size=et;else{var pt=_(this.toList(),p(ut,Q),lt);et=this._size+et,this._root=m({head:pt},0,et)}return this},gt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(gt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(gt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),gt.prototype.toString=function(ut){ut===void 0&&(ut=function(et){return String(et.key)});var Q=[];return c(this._root,"",!0,function(Y){return Q.push(Y)},ut),Q.join("")},gt.prototype.update=function(ut,Q,Y){var et=this._comparator,lt=o(ut,this._root,et),pt=lt.left,bt=lt.right;et(ut,Q)<0?bt=a(Q,Y,bt,et):pt=a(Q,Y,pt,et),this._root=l(pt,bt,et)},gt.prototype.split=function(ut){return o(ut,this._root,this._comparator)},gt}();function d(gt,ut,Q,Y){var et=Y-Q;if(et>0){var lt=Q+Math.floor(et/2),pt=gt[lt],bt=ut[lt],Et=new i(pt,bt);return Et.left=d(gt,ut,Q,lt),Et.right=d(gt,ut,lt+1,Y),Et}return null}function p(gt,ut){for(var Q=new i(null,null),Y=Q,et=0;et<gt.length;et++)Y=Y.next=new i(gt[et],ut[et]);return Y.next=null,Q.next}function g(gt){for(var ut=gt,Q=[],Y=!1,et=new i(null,null),lt=et;!Y;)ut?(Q.push(ut),ut=ut.left):Q.length>0?(ut=lt=lt.next=Q.pop(),ut=ut.right):Y=!0;return lt.next=null,et.next}function m(gt,ut,Q){var Y=Q-ut;if(Y>0){var et=ut+Math.floor(Y/2),lt=m(gt,ut,et),pt=gt.head;return pt.left=lt,gt.head=gt.head.next,pt.right=m(gt,et+1,Q),pt}return null}function _(gt,ut,Q){for(var Y=new i(null,null),et=Y,lt=gt,pt=ut;lt!==null&&pt!==null;)Q(lt.key,pt.key)<0?(et.next=lt,lt=lt.next):(et.next=pt,pt=pt.next),et=et.next;return lt!==null?et.next=lt:pt!==null&&(et.next=pt),Y.next}function v(gt,ut,Q,Y,et){if(!(Q>=Y)){for(var lt=gt[Q+Y>>1],pt=Q-1,bt=Y+1;;){do pt++;while(et(gt[pt],lt)<0);do bt--;while(et(gt[bt],lt)>0);if(pt>=bt)break;var Et=gt[pt];gt[pt]=gt[bt],gt[bt]=Et,Et=ut[pt],ut[pt]=ut[bt],ut[bt]=Et}v(gt,ut,Q,bt,et),v(gt,ut,bt+1,Y,et)}}var x=function(ut,Q){return ut.ll.x<=Q.x&&Q.x<=ut.ur.x&&ut.ll.y<=Q.y&&Q.y<=ut.ur.y},S=function(ut,Q){if(Q.ur.x<ut.ll.x||ut.ur.x<Q.ll.x||Q.ur.y<ut.ll.y||ut.ur.y<Q.ll.y)return null;var Y=ut.ll.x<Q.ll.x?Q.ll.x:ut.ll.x,et=ut.ur.x<Q.ur.x?ut.ur.x:Q.ur.x,lt=ut.ll.y<Q.ll.y?Q.ll.y:ut.ll.y,pt=ut.ur.y<Q.ur.y?ut.ur.y:Q.ur.y;return{ll:{x:Y,y:lt},ur:{x:et,y:pt}}},O=Number.EPSILON;O===void 0&&(O=Math.pow(2,-52));var D=O*O,U=function(ut,Q){if(-O<ut&&ut<O&&-O<Q&&Q<O)return 0;var Y=ut-Q;return Y*Y<D*ut*Q?0:ut<Q?-1:1},z=function(){function gt(){n(this,gt),this.reset()}return e(gt,[{key:"reset",value:function(){this.xRounder=new V,this.yRounder=new V}},{key:"round",value:function(Q,Y){return{x:this.xRounder.round(Q),y:this.yRounder.round(Y)}}}]),gt}(),V=function(){function gt(){n(this,gt),this.tree=new h,this.round(0)}return e(gt,[{key:"round",value:function(Q){var Y=this.tree.add(Q),et=this.tree.prev(Y);if(et!==null&&U(Y.key,et.key)===0)return this.tree.remove(Q),et.key;var lt=this.tree.next(Y);return lt!==null&&U(Y.key,lt.key)===0?(this.tree.remove(Q),lt.key):Q}}]),gt}(),G=new z,tt=function(ut,Q){return ut.x*Q.y-ut.y*Q.x},K=function(ut,Q){return ut.x*Q.x+ut.y*Q.y},B=function(ut,Q,Y){var et={x:Q.x-ut.x,y:Q.y-ut.y},lt={x:Y.x-ut.x,y:Y.y-ut.y},pt=tt(et,lt);return U(pt,0)},N=function(ut){return Math.sqrt(K(ut,ut))},Z=function(ut,Q,Y){var et={x:Q.x-ut.x,y:Q.y-ut.y},lt={x:Y.x-ut.x,y:Y.y-ut.y};return tt(lt,et)/N(lt)/N(et)},w=function(ut,Q,Y){var et={x:Q.x-ut.x,y:Q.y-ut.y},lt={x:Y.x-ut.x,y:Y.y-ut.y};return K(lt,et)/N(lt)/N(et)},C=function(ut,Q,Y){return Q.y===0?null:{x:ut.x+Q.x/Q.y*(Y-ut.y),y:Y}},k=function(ut,Q,Y){return Q.x===0?null:{x:Y,y:ut.y+Q.y/Q.x*(Y-ut.x)}},T=function(ut,Q,Y,et){if(Q.x===0)return k(Y,et,ut.x);if(et.x===0)return k(ut,Q,Y.x);if(Q.y===0)return C(Y,et,ut.y);if(et.y===0)return C(ut,Q,Y.y);var lt=tt(Q,et);if(lt==0)return null;var pt={x:Y.x-ut.x,y:Y.y-ut.y},bt=tt(pt,Q)/lt,Et=tt(pt,et)/lt,Ot=ut.x+Et*Q.x,zt=Y.x+bt*et.x,Gt=ut.y+Et*Q.y,Jt=Y.y+bt*et.y,Kt=(Ot+zt)/2,ie=(Gt+Jt)/2;return{x:Kt,y:ie}},R=function(){e(gt,null,[{key:"compare",value:function(Q,Y){var et=gt.comparePoints(Q.point,Y.point);return et!==0?et:(Q.point!==Y.point&&Q.link(Y),Q.isLeft!==Y.isLeft?Q.isLeft?1:-1:H.compare(Q.segment,Y.segment))}},{key:"comparePoints",value:function(Q,Y){return Q.x<Y.x?-1:Q.x>Y.x?1:Q.y<Y.y?-1:Q.y>Y.y?1:0}}]);function gt(ut,Q){n(this,gt),ut.events===void 0?ut.events=[this]:ut.events.push(this),this.point=ut,this.isLeft=Q}return e(gt,[{key:"link",value:function(Q){if(Q.point===this.point)throw new Error("Tried to link already linked events");for(var Y=Q.point.events,et=0,lt=Y.length;et<lt;et++){var pt=Y[et];this.point.events.push(pt),pt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Q=this.point.events.length,Y=0;Y<Q;Y++){var et=this.point.events[Y];if(et.segment.consumedBy===void 0)for(var lt=Y+1;lt<Q;lt++){var pt=this.point.events[lt];pt.consumedBy===void 0&&et.otherSE.point.events===pt.otherSE.point.events&&et.segment.consume(pt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Q=[],Y=0,et=this.point.events.length;Y<et;Y++){var lt=this.point.events[Y];lt!==this&&!lt.segment.ringOut&&lt.segment.isInResult()&&Q.push(lt)}return Q}},{key:"getLeftmostComparator",value:function(Q){var Y=this,et=new Map,lt=function(bt){var Et=bt.otherSE;et.set(bt,{sine:Z(Y.point,Q.point,Et.point),cosine:w(Y.point,Q.point,Et.point)})};return function(pt,bt){et.has(pt)||lt(pt),et.has(bt)||lt(bt);var Et=et.get(pt),Ot=Et.sine,zt=Et.cosine,Gt=et.get(bt),Jt=Gt.sine,Kt=Gt.cosine;return Ot>=0&&Jt>=0?zt<Kt?1:zt>Kt?-1:0:Ot<0&&Jt<0?zt<Kt?-1:zt>Kt?1:0:Jt<Ot?-1:Jt>Ot?1:0}}}]),gt}(),F=0,H=function(){e(gt,null,[{key:"compare",value:function(Q,Y){var et=Q.leftSE.point.x,lt=Y.leftSE.point.x,pt=Q.rightSE.point.x,bt=Y.rightSE.point.x;if(bt<et)return 1;if(pt<lt)return-1;var Et=Q.leftSE.point.y,Ot=Y.leftSE.point.y,zt=Q.rightSE.point.y,Gt=Y.rightSE.point.y;if(et<lt){if(Ot<Et&&Ot<zt)return 1;if(Ot>Et&&Ot>zt)return-1;var Jt=Q.comparePoint(Y.leftSE.point);if(Jt<0)return 1;if(Jt>0)return-1;var Kt=Y.comparePoint(Q.rightSE.point);return Kt!==0?Kt:-1}if(et>lt){if(Et<Ot&&Et<Gt)return-1;if(Et>Ot&&Et>Gt)return 1;var ie=Y.comparePoint(Q.leftSE.point);if(ie!==0)return ie;var Xt=Q.comparePoint(Y.rightSE.point);return Xt<0?1:Xt>0?-1:1}if(Et<Ot)return-1;if(Et>Ot)return 1;if(pt<bt){var Ut=Y.comparePoint(Q.rightSE.point);if(Ut!==0)return Ut}if(pt>bt){var _e=Q.comparePoint(Y.rightSE.point);if(_e<0)return 1;if(_e>0)return-1}if(pt!==bt){var le=zt-Et,ye=pt-et,Ze=Gt-Ot,ce=bt-lt;if(le>ye&&Ze<ce)return 1;if(le<ye&&Ze>ce)return-1}return pt>bt?1:pt<bt||zt<Gt?-1:zt>Gt?1:Q.id<Y.id?-1:Q.id>Y.id?1:0}}]);function gt(ut,Q,Y,et){n(this,gt),this.id=++F,this.leftSE=ut,ut.segment=this,ut.otherSE=Q,this.rightSE=Q,Q.segment=this,Q.otherSE=ut,this.rings=Y,this.windings=et}return e(gt,[{key:"replaceRightSE",value:function(Q){this.rightSE=Q,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Q=this.leftSE.point.y,Y=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Q<Y?Q:Y},ur:{x:this.rightSE.point.x,y:Q>Y?Q:Y}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Q){return Q.x===this.leftSE.point.x&&Q.y===this.leftSE.point.y||Q.x===this.rightSE.point.x&&Q.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Q){if(this.isAnEndpoint(Q))return 0;var Y=this.leftSE.point,et=this.rightSE.point,lt=this.vector();if(Y.x===et.x)return Q.x===Y.x?0:Q.x<Y.x?1:-1;var pt=(Q.y-Y.y)/lt.y,bt=Y.x+pt*lt.x;if(Q.x===bt)return 0;var Et=(Q.x-Y.x)/lt.x,Ot=Y.y+Et*lt.y;return Q.y===Ot?0:Q.y<Ot?-1:1}},{key:"getIntersection",value:function(Q){var Y=this.bbox(),et=Q.bbox(),lt=S(Y,et);if(lt===null)return null;var pt=this.leftSE.point,bt=this.rightSE.point,Et=Q.leftSE.point,Ot=Q.rightSE.point,zt=x(Y,Et)&&this.comparePoint(Et)===0,Gt=x(et,pt)&&Q.comparePoint(pt)===0,Jt=x(Y,Ot)&&this.comparePoint(Ot)===0,Kt=x(et,bt)&&Q.comparePoint(bt)===0;if(Gt&&zt)return Kt&&!Jt?bt:!Kt&&Jt?Ot:null;if(Gt)return Jt&&pt.x===Ot.x&&pt.y===Ot.y?null:pt;if(zt)return Kt&&bt.x===Et.x&&bt.y===Et.y?null:Et;if(Kt&&Jt)return null;if(Kt)return bt;if(Jt)return Ot;var ie=T(pt,this.vector(),Et,Q.vector());return ie===null||!x(lt,ie)?null:G.round(ie.x,ie.y)}},{key:"split",value:function(Q){var Y=[],et=Q.events!==void 0,lt=new R(Q,!0),pt=new R(Q,!1),bt=this.rightSE;this.replaceRightSE(pt),Y.push(pt),Y.push(lt);var Et=new gt(lt,bt,this.rings.slice(),this.windings.slice());return R.comparePoints(Et.leftSE.point,Et.rightSE.point)>0&&Et.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),et&&(lt.checkForConsuming(),pt.checkForConsuming()),Y}},{key:"swapEvents",value:function(){var Q=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Q,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var Y=0,et=this.windings.length;Y<et;Y++)this.windings[Y]*=-1}},{key:"consume",value:function(Q){for(var Y=this,et=Q;Y.consumedBy;)Y=Y.consumedBy;for(;et.consumedBy;)et=et.consumedBy;var lt=gt.compare(Y,et);if(lt!==0){if(lt>0){var pt=Y;Y=et,et=pt}if(Y.prev===et){var bt=Y;Y=et,et=bt}for(var Et=0,Ot=et.rings.length;Et<Ot;Et++){var zt=et.rings[Et],Gt=et.windings[Et],Jt=Y.rings.indexOf(zt);Jt===-1?(Y.rings.push(zt),Y.windings.push(Gt)):Y.windings[Jt]+=Gt}et.rings=null,et.windings=null,et.consumedBy=Y,et.leftSE.consumedBy=Y.leftSE,et.rightSE.consumedBy=Y.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var Q=this.prev.consumedBy||this.prev;this._beforeState=Q.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var Q=this.beforeState();this._afterState={rings:Q.rings.slice(0),windings:Q.windings.slice(0),multiPolys:[]};for(var Y=this._afterState.rings,et=this._afterState.windings,lt=this._afterState.multiPolys,pt=0,bt=this.rings.length;pt<bt;pt++){var Et=this.rings[pt],Ot=this.windings[pt],zt=Y.indexOf(Et);zt===-1?(Y.push(Et),et.push(Ot)):et[zt]+=Ot}for(var Gt=[],Jt=[],Kt=0,ie=Y.length;Kt<ie;Kt++)if(et[Kt]!==0){var Xt=Y[Kt],Ut=Xt.poly;if(Jt.indexOf(Ut)===-1)if(Xt.isExterior)Gt.push(Ut);else{Jt.indexOf(Ut)===-1&&Jt.push(Ut);var _e=Gt.indexOf(Xt.poly);_e!==-1&&Gt.splice(_e,1)}}for(var le=0,ye=Gt.length;le<ye;le++){var Ze=Gt[le].multiPoly;lt.indexOf(Ze)===-1&&lt.push(Ze)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var Q=this.beforeState().multiPolys,Y=this.afterState().multiPolys;switch(_t.type){case"union":{var et=Q.length===0,lt=Y.length===0;this._isInResult=et!==lt;break}case"intersection":{var pt,bt;Q.length<Y.length?(pt=Q.length,bt=Y.length):(pt=Y.length,bt=Q.length),this._isInResult=bt===_t.numMultiPolys&&pt<bt;break}case"xor":{var Et=Math.abs(Q.length-Y.length);this._isInResult=Et%2===1;break}case"difference":{var Ot=function(Gt){return Gt.length===1&&Gt[0].isSubject};this._isInResult=Ot(Q)!==Ot(Y);break}default:throw new Error("Unrecognized operation type found ".concat(_t.type))}return this._isInResult}}],[{key:"fromRing",value:function(Q,Y,et){var lt,pt,bt,Et=R.comparePoints(Q,Y);if(Et<0)lt=Q,pt=Y,bt=1;else if(Et>0)lt=Y,pt=Q,bt=-1;else throw new Error("Tried to create degenerate segment at [".concat(Q.x,", ").concat(Q.y,"]"));var Ot=new R(lt,!0),zt=new R(pt,!1);return new gt(Ot,zt,[et],[bt])}}]),gt}(),it=function(){function gt(ut,Q,Y){if(n(this,gt),!Array.isArray(ut)||ut.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Q,this.isExterior=Y,this.segments=[],typeof ut[0][0]!="number"||typeof ut[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var et=G.round(ut[0][0],ut[0][1]);this.bbox={ll:{x:et.x,y:et.y},ur:{x:et.x,y:et.y}};for(var lt=et,pt=1,bt=ut.length;pt<bt;pt++){if(typeof ut[pt][0]!="number"||typeof ut[pt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Et=G.round(ut[pt][0],ut[pt][1]);Et.x===lt.x&&Et.y===lt.y||(this.segments.push(H.fromRing(lt,Et,this)),Et.x<this.bbox.ll.x&&(this.bbox.ll.x=Et.x),Et.y<this.bbox.ll.y&&(this.bbox.ll.y=Et.y),Et.x>this.bbox.ur.x&&(this.bbox.ur.x=Et.x),Et.y>this.bbox.ur.y&&(this.bbox.ur.y=Et.y),lt=Et)}(et.x!==lt.x||et.y!==lt.y)&&this.segments.push(H.fromRing(lt,et,this))}return e(gt,[{key:"getSweepEvents",value:function(){for(var Q=[],Y=0,et=this.segments.length;Y<et;Y++){var lt=this.segments[Y];Q.push(lt.leftSE),Q.push(lt.rightSE)}return Q}}]),gt}(),ot=function(){function gt(ut,Q){if(n(this,gt),!Array.isArray(ut))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new it(ut[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Y=1,et=ut.length;Y<et;Y++){var lt=new it(ut[Y],this,!1);lt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=lt.bbox.ll.x),lt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=lt.bbox.ll.y),lt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=lt.bbox.ur.x),lt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=lt.bbox.ur.y),this.interiorRings.push(lt)}this.multiPoly=Q}return e(gt,[{key:"getSweepEvents",value:function(){for(var Q=this.exteriorRing.getSweepEvents(),Y=0,et=this.interiorRings.length;Y<et;Y++)for(var lt=this.interiorRings[Y].getSweepEvents(),pt=0,bt=lt.length;pt<bt;pt++)Q.push(lt[pt]);return Q}}]),gt}(),dt=function(){function gt(ut,Q){if(n(this,gt),!Array.isArray(ut))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof ut[0][0][0]=="number"&&(ut=[ut])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Y=0,et=ut.length;Y<et;Y++){var lt=new ot(ut[Y],this);lt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=lt.bbox.ll.x),lt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=lt.bbox.ll.y),lt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=lt.bbox.ur.x),lt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=lt.bbox.ur.y),this.polys.push(lt)}this.isSubject=Q}return e(gt,[{key:"getSweepEvents",value:function(){for(var Q=[],Y=0,et=this.polys.length;Y<et;Y++)for(var lt=this.polys[Y].getSweepEvents(),pt=0,bt=lt.length;pt<bt;pt++)Q.push(lt[pt]);return Q}}]),gt}(),$=function(){e(gt,null,[{key:"factory",value:function(Q){for(var Y=[],et=0,lt=Q.length;et<lt;et++){var pt=Q[et];if(!(!pt.isInResult()||pt.ringOut)){for(var bt=null,Et=pt.leftSE,Ot=pt.rightSE,zt=[Et],Gt=Et.point,Jt=[];bt=Et,Et=Ot,zt.push(Et),Et.point!==Gt;)for(;;){var Kt=Et.getAvailableLinkedEvents();if(Kt.length===0){var ie=zt[0].point,Xt=zt[zt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(ie.x,",")+" ".concat(ie.y,"]. Last matching segment found ends at")+" [".concat(Xt.x,", ").concat(Xt.y,"]."))}if(Kt.length===1){Ot=Kt[0].otherSE;break}for(var Ut=null,_e=0,le=Jt.length;_e<le;_e++)if(Jt[_e].point===Et.point){Ut=_e;break}if(Ut!==null){var ye=Jt.splice(Ut)[0],Ze=zt.splice(ye.index);Ze.unshift(Ze[0].otherSE),Y.push(new gt(Ze.reverse()));continue}Jt.push({index:zt.length,point:Et.point});var ce=Et.getLeftmostComparator(bt);Ot=Kt.sort(ce)[0].otherSE;break}Y.push(new gt(zt))}}return Y}}]);function gt(ut){n(this,gt),this.events=ut;for(var Q=0,Y=ut.length;Q<Y;Q++)ut[Q].segment.ringOut=this;this.poly=null}return e(gt,[{key:"getGeom",value:function(){for(var Q=this.events[0].point,Y=[Q],et=1,lt=this.events.length-1;et<lt;et++){var pt=this.events[et].point,bt=this.events[et+1].point;B(pt,Q,bt)!==0&&(Y.push(pt),Q=pt)}if(Y.length===1)return null;var Et=Y[0],Ot=Y[1];B(Et,Q,Ot)===0&&Y.shift(),Y.push(Y[0]);for(var zt=this.isExteriorRing()?1:-1,Gt=this.isExteriorRing()?0:Y.length-1,Jt=this.isExteriorRing()?Y.length:-1,Kt=[],ie=Gt;ie!=Jt;ie+=zt)Kt.push([Y[ie].x,Y[ie].y]);return Kt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var Q=this.enclosingRing();this._isExteriorRing=Q?!Q.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Q=this.events[0],Y=1,et=this.events.length;Y<et;Y++){var lt=this.events[Y];R.compare(Q,lt)>0&&(Q=lt)}for(var pt=Q.segment.prevInResult(),bt=pt?pt.prevInResult():null;;){if(!pt)return null;if(!bt)return pt.ringOut;if(bt.ringOut!==pt.ringOut)return bt.ringOut.enclosingRing()!==pt.ringOut?pt.ringOut:pt.ringOut.enclosingRing();pt=bt.prevInResult(),bt=pt?pt.prevInResult():null}}}]),gt}(),ct=function(){function gt(ut){n(this,gt),this.exteriorRing=ut,ut.poly=this,this.interiorRings=[]}return e(gt,[{key:"addInterior",value:function(Q){this.interiorRings.push(Q),Q.poly=this}},{key:"getGeom",value:function(){var Q=[this.exteriorRing.getGeom()];if(Q[0]===null)return null;for(var Y=0,et=this.interiorRings.length;Y<et;Y++){var lt=this.interiorRings[Y].getGeom();lt!==null&&Q.push(lt)}return Q}}]),gt}(),W=function(){function gt(ut){n(this,gt),this.rings=ut,this.polys=this._composePolys(ut)}return e(gt,[{key:"getGeom",value:function(){for(var Q=[],Y=0,et=this.polys.length;Y<et;Y++){var lt=this.polys[Y].getGeom();lt!==null&&Q.push(lt)}return Q}},{key:"_composePolys",value:function(Q){for(var Y=[],et=0,lt=Q.length;et<lt;et++){var pt=Q[et];if(!pt.poly)if(pt.isExteriorRing())Y.push(new ct(pt));else{var bt=pt.enclosingRing();bt.poly||Y.push(new ct(bt)),bt.poly.addInterior(pt)}}return Y}}]),gt}(),q=function(){function gt(ut){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.compare;n(this,gt),this.queue=ut,this.tree=new h(Q),this.segments=[]}return e(gt,[{key:"process",value:function(Q){var Y=Q.segment,et=[];if(Q.consumedBy)return Q.isLeft?this.queue.remove(Q.otherSE):this.tree.remove(Y),et;var lt=Q.isLeft?this.tree.insert(Y):this.tree.find(Y);if(!lt)throw new Error("Unable to find segment #".concat(Y.id," ")+"[".concat(Y.leftSE.point.x,", ").concat(Y.leftSE.point.y,"] -> ")+"[".concat(Y.rightSE.point.x,", ").concat(Y.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var pt=lt,bt=lt,Et=void 0,Ot=void 0;Et===void 0;)pt=this.tree.prev(pt),pt===null?Et=null:pt.key.consumedBy===void 0&&(Et=pt.key);for(;Ot===void 0;)bt=this.tree.next(bt),bt===null?Ot=null:bt.key.consumedBy===void 0&&(Ot=bt.key);if(Q.isLeft){var zt=null;if(Et){var Gt=Et.getIntersection(Y);if(Gt!==null&&(Y.isAnEndpoint(Gt)||(zt=Gt),!Et.isAnEndpoint(Gt)))for(var Jt=this._splitSafely(Et,Gt),Kt=0,ie=Jt.length;Kt<ie;Kt++)et.push(Jt[Kt])}var Xt=null;if(Ot){var Ut=Ot.getIntersection(Y);if(Ut!==null&&(Y.isAnEndpoint(Ut)||(Xt=Ut),!Ot.isAnEndpoint(Ut)))for(var _e=this._splitSafely(Ot,Ut),le=0,ye=_e.length;le<ye;le++)et.push(_e[le])}if(zt!==null||Xt!==null){var Ze=null;if(zt===null)Ze=Xt;else if(Xt===null)Ze=zt;else{var ce=R.comparePoints(zt,Xt);Ze=ce<=0?zt:Xt}this.queue.remove(Y.rightSE),et.push(Y.rightSE);for(var ke=Y.split(Ze),He=0,$t=ke.length;He<$t;He++)et.push(ke[He])}et.length>0?(this.tree.remove(Y),et.push(Q)):(this.segments.push(Y),Y.prev=Et)}else{if(Et&&Ot){var Te=Et.getIntersection(Ot);if(Te!==null){if(!Et.isAnEndpoint(Te))for(var bi=this._splitSafely(Et,Te),ue=0,Fe=bi.length;ue<Fe;ue++)et.push(bi[ue]);if(!Ot.isAnEndpoint(Te))for(var ai=this._splitSafely(Ot,Te),Le=0,Oe=ai.length;Le<Oe;Le++)et.push(ai[Le])}}this.tree.remove(Y)}return et}},{key:"_splitSafely",value:function(Q,Y){this.tree.remove(Q);var et=Q.rightSE;this.queue.remove(et);var lt=Q.split(Y);return lt.push(et),Q.consumedBy===void 0&&this.tree.insert(Q),lt}}]),gt}(),rt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,mt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,wt=function(){function gt(){n(this,gt)}return e(gt,[{key:"run",value:function(Q,Y,et){_t.type=Q,G.reset();for(var lt=[new dt(Y,!0)],pt=0,bt=et.length;pt<bt;pt++)lt.push(new dt(et[pt],!1));if(_t.numMultiPolys=lt.length,_t.type==="difference")for(var Et=lt[0],Ot=1;Ot<lt.length;)S(lt[Ot].bbox,Et.bbox)!==null?Ot++:lt.splice(Ot,1);if(_t.type==="intersection"){for(var zt=0,Gt=lt.length;zt<Gt;zt++)for(var Jt=lt[zt],Kt=zt+1,ie=lt.length;Kt<ie;Kt++)if(S(Jt.bbox,lt[Kt].bbox)===null)return[]}for(var Xt=new h(R.compare),Ut=0,_e=lt.length;Ut<_e;Ut++)for(var le=lt[Ut].getSweepEvents(),ye=0,Ze=le.length;ye<Ze;ye++)if(Xt.insert(le[ye]),Xt.size>rt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var ce=new q(Xt),ke=Xt.size,He=Xt.pop();He;){var $t=He.key;if(Xt.size===ke){var Te=$t.segment;throw new Error("Unable to pop() ".concat($t.isLeft?"left":"right"," SweepEvent ")+"[".concat($t.point.x,", ").concat($t.point.y,"] from segment #").concat(Te.id," ")+"[".concat(Te.leftSE.point.x,", ").concat(Te.leftSE.point.y,"] -> ")+"[".concat(Te.rightSE.point.x,", ").concat(Te.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Xt.size>rt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(ce.segments.length>mt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var bi=ce.process($t),ue=0,Fe=bi.length;ue<Fe;ue++){var ai=bi[ue];ai.consumedBy===void 0&&Xt.insert(ai)}ke=Xt.size,He=Xt.pop()}G.reset();var Le=$.factory(ce.segments),Oe=new W(Le);return Oe.getGeom()}}]),gt}(),_t=new wt,Ct=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("union",ut,Y)},Ft=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("intersection",ut,Y)},At=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("xor",ut,Y)},vt=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("difference",ut,Y)},kt={union:Ct,intersection:Ft,xor:At,difference:vt};return kt})});var Ry=Ge((eh,Py)=>{(function(n,t){typeof eh=="object"&&typeof Py<"u"?t(eh):typeof define=="function"&&define.amd?define(["exports"],t):t(n.jsts={})})(eh,function(n){"use strict";function t(){}function e(u){this.message=u||""}function i(u){this.message=u||""}function r(u){this.message=u||""}function s(){}function a(u){return u===null?qt:u.color}function o(u){return u===null?null:u.parent}function l(u,f){u!==null&&(u.color=f)}function c(u){return u===null?null:u.left}function h(u){return u===null?null:u.right}function d(){this.root_=null,this.size_=0}function p(){}function g(){this.array_=[],arguments[0]instanceof ce&&this.addAll(arguments[0])}function m(){}function _(u){this.message=u||""}function v(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(u){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var f=Object(this),b=Math.max(Math.min(f.length,9007199254740991),0)||0,E=1 in arguments&&parseInt(Number(arguments[1]),10)||0;E=E<0?Math.max(b+E,0):Math.min(E,b);var A=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:b;for(A=A<0?Math.max(b+arguments[2],0):Math.min(A,b);E<A;)f[E]=u,++E;return f},writable:!0}),Number.isFinite=Number.isFinite||function(u){return typeof u=="number"&&isFinite(u)},Number.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(u){return u!=u},Math.trunc=Math.trunc||function(u){return u<0?Math.ceil(u):Math.floor(u)};var x=function(){};x.prototype.interfaces_=function(){return[]},x.prototype.getClass=function(){return x},x.prototype.equalsWithTolerance=function(u,f,b){return Math.abs(u-f)<=b};var S=function(u){function f(b){u.call(this,b),this.name="IllegalArgumentException",this.message=b,this.stack=new u().stack}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f}(Error),O=function(){},D={MAX_VALUE:{configurable:!0}};O.isNaN=function(u){return Number.isNaN(u)},O.doubleToLongBits=function(u){return u},O.longBitsToDouble=function(u){return u},O.isInfinite=function(u){return!Number.isFinite(u)},D.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(O,D);var U=function(){},z=function(){},V=function(){},G=function u(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=u.NULL_ORDINATE;else if(arguments.length===1){var f=arguments[0];this.x=f.x,this.y=f.y,this.z=f.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=u.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},tt={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};G.prototype.setOrdinate=function(u,f){switch(u){case G.X:this.x=f;break;case G.Y:this.y=f;break;case G.Z:this.z=f;break;default:throw new S("Invalid ordinate index: "+u)}},G.prototype.equals2D=function(){if(arguments.length===1){var u=arguments[0];return this.x===u.x&&this.y===u.y}if(arguments.length===2){var f=arguments[0],b=arguments[1];return!!x.equalsWithTolerance(this.x,f.x,b)&&!!x.equalsWithTolerance(this.y,f.y,b)}},G.prototype.getOrdinate=function(u){switch(u){case G.X:return this.x;case G.Y:return this.y;case G.Z:return this.z}throw new S("Invalid ordinate index: "+u)},G.prototype.equals3D=function(u){return this.x===u.x&&this.y===u.y&&(this.z===u.z||O.isNaN(this.z))&&O.isNaN(u.z)},G.prototype.equals=function(u){return u instanceof G&&this.equals2D(u)},G.prototype.equalInZ=function(u,f){return x.equalsWithTolerance(this.z,u.z,f)},G.prototype.compareTo=function(u){var f=u;return this.x<f.x?-1:this.x>f.x?1:this.y<f.y?-1:this.y>f.y?1:0},G.prototype.clone=function(){},G.prototype.copy=function(){return new G(this)},G.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},G.prototype.distance3D=function(u){var f=this.x-u.x,b=this.y-u.y,E=this.z-u.z;return Math.sqrt(f*f+b*b+E*E)},G.prototype.distance=function(u){var f=this.x-u.x,b=this.y-u.y;return Math.sqrt(f*f+b*b)},G.prototype.hashCode=function(){var u=17;return u=37*u+G.hashCode(this.x),u=37*u+G.hashCode(this.y)},G.prototype.setCoordinate=function(u){this.x=u.x,this.y=u.y,this.z=u.z},G.prototype.interfaces_=function(){return[U,z,t]},G.prototype.getClass=function(){return G},G.hashCode=function(){if(arguments.length===1){var u=arguments[0],f=O.doubleToLongBits(u);return Math.trunc((f^f)>>>32)}},tt.DimensionalComparator.get=function(){return K},tt.serialVersionUID.get=function(){return 6683108902428367e3},tt.NULL_ORDINATE.get=function(){return O.NaN},tt.X.get=function(){return 0},tt.Y.get=function(){return 1},tt.Z.get=function(){return 2},Object.defineProperties(G,tt);var K=function(u){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var f=arguments[0];if(f!==2&&f!==3)throw new S("only 2 or 3 dimensions may be specified");this._dimensionsToTest=f}}};K.prototype.compare=function(u,f){var b=u,E=f,A=K.compare(b.x,E.x);if(A!==0)return A;var J=K.compare(b.y,E.y);return J!==0?J:this._dimensionsToTest<=2?0:K.compare(b.z,E.z)},K.prototype.interfaces_=function(){return[V]},K.prototype.getClass=function(){return K},K.compare=function(u,f){return u<f?-1:u>f?1:O.isNaN(u)?O.isNaN(f)?0:-1:O.isNaN(f)?1:0};var B=function(){};B.prototype.create=function(){},B.prototype.interfaces_=function(){return[]},B.prototype.getClass=function(){return B};var N=function(){},Z={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};N.prototype.interfaces_=function(){return[]},N.prototype.getClass=function(){return N},N.toLocationSymbol=function(u){switch(u){case N.EXTERIOR:return"e";case N.BOUNDARY:return"b";case N.INTERIOR:return"i";case N.NONE:return"-"}throw new S("Unknown location value: "+u)},Z.INTERIOR.get=function(){return 0},Z.BOUNDARY.get=function(){return 1},Z.EXTERIOR.get=function(){return 2},Z.NONE.get=function(){return-1},Object.defineProperties(N,Z);var w=function(u,f){return u.interfaces_&&u.interfaces_().indexOf(f)>-1},C=function(){},k={LOG_10:{configurable:!0}};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.log10=function(u){var f=Math.log(u);return O.isInfinite(f)||O.isNaN(f)?f:f/C.LOG_10},C.min=function(u,f,b,E){var A=u;return f<A&&(A=f),b<A&&(A=b),E<A&&(A=E),A},C.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],f=arguments[1],b=arguments[2];return u<f?f:u>b?b:u}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var E=arguments[0],A=arguments[1],J=arguments[2];return E<A?A:E>J?J:E}},C.wrap=function(u,f){return u<0?f- -u%f:u%f},C.max=function(){if(arguments.length===3){var u=arguments[0],f=arguments[1],b=arguments[2],E=u;return f>E&&(E=f),b>E&&(E=b),E}if(arguments.length===4){var A=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3],St=A;return J>St&&(St=J),at>St&&(St=at),yt>St&&(St=yt),St}},C.average=function(u,f){return(u+f)/2},k.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(C,k);var T=function(u){this.str=u};T.prototype.append=function(u){this.str+=u},T.prototype.setCharAt=function(u,f){this.str=this.str.substr(0,u)+f+this.str.substr(u+1)},T.prototype.toString=function(u){return this.str};var R=function(u){this.value=u};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(u){return this.value<u?-1:this.value>u?1:0},R.isNaN=function(u){return Number.isNaN(u)};var F=function(){};F.isWhitespace=function(u){return u<=32&&u>=0||u===127},F.toUpperCase=function(u){return u.toUpperCase()};var H=function u(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var f=arguments[0];this.init(f)}else if(arguments[0]instanceof u){var b=arguments[0];this.init(b)}else if(typeof arguments[0]=="string"){var E=arguments[0];u.call(this,u.parse(E))}}else if(arguments.length===2){var A=arguments[0],J=arguments[1];this.init(A,J)}},it={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};H.prototype.le=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<=u._lo},H.prototype.extractSignificantDigits=function(u,f){var b=this.abs(),E=H.magnitude(b._hi),A=H.TEN.pow(E);(b=b.divide(A)).gt(H.TEN)?(b=b.divide(H.TEN),E+=1):b.lt(H.ONE)&&(b=b.multiply(H.TEN),E-=1);for(var J=E+1,at=new T,yt=H.MAX_PRINT_DIGITS-1,St=0;St<=yt;St++){u&&St===J&&at.append(".");var Bt=Math.trunc(b._hi);if(Bt<0)break;var Yt=!1,ee=0;Bt>9?(Yt=!0,ee="9"):ee="0"+Bt,at.append(ee),b=b.subtract(H.valueOf(Bt)).multiply(H.TEN),Yt&&b.selfAdd(H.TEN);var xe=!0,Me=H.magnitude(b._hi);if(Me<0&&Math.abs(Me)>=yt-St&&(xe=!1),!xe)break}return f[0]=E,at.toString()},H.prototype.sqr=function(){return this.multiply(this)},H.prototype.doubleValue=function(){return this._hi+this._lo},H.prototype.subtract=function(){if(arguments[0]instanceof H){var u=arguments[0];return this.add(u.negate())}if(typeof arguments[0]=="number"){var f=arguments[0];return this.add(-f)}},H.prototype.equals=function(){if(arguments.length===1){var u=arguments[0];return this._hi===u._hi&&this._lo===u._lo}},H.prototype.isZero=function(){return this._hi===0&&this._lo===0},H.prototype.selfSubtract=function(){if(arguments[0]instanceof H){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u._hi,-u._lo)}if(typeof arguments[0]=="number"){var f=arguments[0];return this.isNaN()?this:this.selfAdd(-f,0)}},H.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},H.prototype.min=function(u){return this.le(u)?this:u},H.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof H){var u=arguments[0];return this.selfDivide(u._hi,u._lo)}if(typeof arguments[0]=="number"){var f=arguments[0];return this.selfDivide(f,0)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1],A=null,J=null,at=null,yt=null,St=null,Bt=null,Yt=null,ee=null;return St=this._hi/b,Bt=H.SPLIT*St,A=Bt-St,ee=H.SPLIT*b,A=Bt-A,J=St-A,at=ee-b,Yt=St*b,at=ee-at,yt=b-at,ee=A*at-Yt+A*yt+J*at+J*yt,Bt=(this._hi-Yt-ee+this._lo-St*E)/b,ee=St+Bt,this._hi=ee,this._lo=St-ee+Bt,this}},H.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},H.prototype.divide=function(){if(arguments[0]instanceof H){var u=arguments[0],f=null,b=null,E=null,A=null,J=null,at=null,yt=null,St=null;return b=(J=this._hi/u._hi)-(f=(at=H.SPLIT*J)-(f=at-J)),St=f*(E=(St=H.SPLIT*u._hi)-(E=St-u._hi))-(yt=J*u._hi)+f*(A=u._hi-E)+b*E+b*A,at=(this._hi-yt-St+this._lo-J*u._lo)/u._hi,new H(St=J+at,J-St+at)}if(typeof arguments[0]=="number"){var Bt=arguments[0];return O.isNaN(Bt)?H.createNaN():H.copy(this).selfDivide(Bt,0)}},H.prototype.ge=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>=u._lo},H.prototype.pow=function(u){if(u===0)return H.valueOf(1);var f=new H(this),b=H.valueOf(1),E=Math.abs(u);if(E>1)for(;E>0;)E%2==1&&b.selfMultiply(f),(E/=2)>0&&(f=f.sqr());else b=f;return u<0?b.reciprocal():b},H.prototype.ceil=function(){if(this.isNaN())return H.NaN;var u=Math.ceil(this._hi),f=0;return u===this._hi&&(f=Math.ceil(this._lo)),new H(u,f)},H.prototype.compareTo=function(u){var f=u;return this._hi<f._hi?-1:this._hi>f._hi?1:this._lo<f._lo?-1:this._lo>f._lo?1:0},H.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},H.prototype.setValue=function(){if(arguments[0]instanceof H){var u=arguments[0];return this.init(u),this}if(typeof arguments[0]=="number"){var f=arguments[0];return this.init(f),this}},H.prototype.max=function(u){return this.ge(u)?this:u},H.prototype.sqrt=function(){if(this.isZero())return H.valueOf(0);if(this.isNegative())return H.NaN;var u=1/Math.sqrt(this._hi),f=this._hi*u,b=H.valueOf(f),E=this.subtract(b.sqr())._hi*(.5*u);return b.add(E)},H.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof H){var u=arguments[0];return this.selfAdd(u._hi,u._lo)}if(typeof arguments[0]=="number"){var f=arguments[0],b=null,E=null,A=null,J=null,at=null,yt=null;return A=this._hi+f,at=A-this._hi,J=A-at,J=f-at+(this._hi-J),yt=J+this._lo,b=A+yt,E=yt+(A-b),this._hi=b+E,this._lo=E+(b-this._hi),this}}else if(arguments.length===2){var St=arguments[0],Bt=arguments[1],Yt=null,ee=null,xe=null,Me=null,Be=null,qe=null,gr=null;Me=this._hi+St,ee=this._lo+Bt,Be=Me-(qe=Me-this._hi),xe=ee-(gr=ee-this._lo);var qr=(Yt=Me+(qe=(Be=St-qe+(this._hi-Be))+ee))+(qe=(xe=Bt-gr+(this._lo-xe))+(qe+(Me-Yt))),Fn=qe+(Yt-qr);return this._hi=qr,this._lo=Fn,this}},H.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof H){var u=arguments[0];return this.selfMultiply(u._hi,u._lo)}if(typeof arguments[0]=="number"){var f=arguments[0];return this.selfMultiply(f,0)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1],A=null,J=null,at=null,yt=null,St=null,Bt=null;A=(St=H.SPLIT*this._hi)-this._hi,Bt=H.SPLIT*b,A=St-A,J=this._hi-A,at=Bt-b;var Yt=(St=this._hi*b)+(Bt=A*(at=Bt-at)-St+A*(yt=b-at)+J*at+J*yt+(this._hi*E+this._lo*b)),ee=Bt+(A=St-Yt);return this._hi=Yt,this._lo=ee,this}},H.prototype.selfSqr=function(){return this.selfMultiply(this)},H.prototype.floor=function(){if(this.isNaN())return H.NaN;var u=Math.floor(this._hi),f=0;return u===this._hi&&(f=Math.floor(this._lo)),new H(u,f)},H.prototype.negate=function(){return this.isNaN()?this:new H(-this._hi,-this._lo)},H.prototype.clone=function(){},H.prototype.multiply=function(){if(arguments[0]instanceof H){var u=arguments[0];return u.isNaN()?H.createNaN():H.copy(this).selfMultiply(u)}if(typeof arguments[0]=="number"){var f=arguments[0];return O.isNaN(f)?H.createNaN():H.copy(this).selfMultiply(f,0)}},H.prototype.isNaN=function(){return O.isNaN(this._hi)},H.prototype.intValue=function(){return Math.trunc(this._hi)},H.prototype.toString=function(){var u=H.magnitude(this._hi);return u>=-3&&u<=20?this.toStandardNotation():this.toSciNotation()},H.prototype.toStandardNotation=function(){var u=this.getSpecialNumberString();if(u!==null)return u;var f=new Array(1).fill(null),b=this.extractSignificantDigits(!0,f),E=f[0]+1,A=b;if(b.charAt(0)===".")A="0"+b;else if(E<0)A="0."+H.stringOfChar("0",-E)+b;else if(b.indexOf(".")===-1){var J=E-b.length;A=b+H.stringOfChar("0",J)+".0"}return this.isNegative()?"-"+A:A},H.prototype.reciprocal=function(){var u=null,f=null,b=null,E=null,A=null,J=null,at=null,yt=null;f=(A=1/this._hi)-(u=(J=H.SPLIT*A)-(u=J-A)),b=(yt=H.SPLIT*this._hi)-this._hi;var St=A+(J=(1-(at=A*this._hi)-(yt=u*(b=yt-b)-at+u*(E=this._hi-b)+f*b+f*E)-A*this._lo)/this._hi);return new H(St,A-St+J)},H.prototype.toSciNotation=function(){if(this.isZero())return H.SCI_NOT_ZERO;var u=this.getSpecialNumberString();if(u!==null)return u;var f=new Array(1).fill(null),b=this.extractSignificantDigits(!1,f),E=H.SCI_NOT_EXPONENT_CHAR+f[0];if(b.charAt(0)==="0")throw new Error("Found leading zero: "+b);var A="";b.length>1&&(A=b.substring(1));var J=b.charAt(0)+"."+A;return this.isNegative()?"-"+J+E:J+E},H.prototype.abs=function(){return this.isNaN()?H.NaN:this.isNegative()?this.negate():new H(this)},H.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},H.prototype.lt=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<u._lo},H.prototype.add=function(){if(arguments[0]instanceof H){var u=arguments[0];return H.copy(this).selfAdd(u)}if(typeof arguments[0]=="number"){var f=arguments[0];return H.copy(this).selfAdd(f)}},H.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this._hi=u,this._lo=0}else if(arguments[0]instanceof H){var f=arguments[0];this._hi=f._hi,this._lo=f._lo}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this._hi=b,this._lo=E}},H.prototype.gt=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>u._lo},H.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},H.prototype.trunc=function(){return this.isNaN()?H.NaN:this.isPositive()?this.floor():this.ceil()},H.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},H.prototype.interfaces_=function(){return[t,U,z]},H.prototype.getClass=function(){return H},H.sqr=function(u){return H.valueOf(u).selfMultiply(u)},H.valueOf=function(){if(typeof arguments[0]=="string"){var u=arguments[0];return H.parse(u)}if(typeof arguments[0]=="number"){var f=arguments[0];return new H(f)}},H.sqrt=function(u){return H.valueOf(u).sqrt()},H.parse=function(u){for(var f=0,b=u.length;F.isWhitespace(u.charAt(f));)f++;var E=!1;if(f<b){var A=u.charAt(f);A!=="-"&&A!=="+"||(f++,A==="-"&&(E=!0))}for(var J=new H,at=0,yt=0,St=0;!(f>=b);){var Bt=u.charAt(f);if(f++,F.isDigit(Bt)){var Yt=Bt-"0";J.selfMultiply(H.TEN),J.selfAdd(Yt),at++}else{if(Bt!=="."){if(Bt==="e"||Bt==="E"){var ee=u.substring(f);try{St=R.parseInt(ee)}catch(gr){throw gr instanceof Error?new Error("Invalid exponent "+ee+" in string "+u):gr}break}throw new Error("Unexpected character '"+Bt+"' at position "+f+" in string "+u)}yt=at}}var xe=J,Me=at-yt-St;if(Me===0)xe=J;else if(Me>0){var Be=H.TEN.pow(Me);xe=J.divide(Be)}else if(Me<0){var qe=H.TEN.pow(-Me);xe=J.multiply(qe)}return E?xe.negate():xe},H.createNaN=function(){return new H(O.NaN,O.NaN)},H.copy=function(u){return new H(u)},H.magnitude=function(u){var f=Math.abs(u),b=Math.log(f)/Math.log(10),E=Math.trunc(Math.floor(b));return 10*Math.pow(10,E)<=f&&(E+=1),E},H.stringOfChar=function(u,f){for(var b=new T,E=0;E<f;E++)b.append(u);return b.toString()},it.PI.get=function(){return new H(3.141592653589793,12246467991473532e-32)},it.TWO_PI.get=function(){return new H(6.283185307179586,24492935982947064e-32)},it.PI_2.get=function(){return new H(1.5707963267948966,6123233995736766e-32)},it.E.get=function(){return new H(2.718281828459045,14456468917292502e-32)},it.NaN.get=function(){return new H(O.NaN,O.NaN)},it.EPS.get=function(){return 123259516440783e-46},it.SPLIT.get=function(){return 134217729},it.MAX_PRINT_DIGITS.get=function(){return 32},it.TEN.get=function(){return H.valueOf(10)},it.ONE.get=function(){return H.valueOf(1)},it.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},it.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(H,it);var ot=function(){},dt={DP_SAFE_EPSILON:{configurable:!0}};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(u,f,b){var E=ot.orientationIndexFilter(u,f,b);if(E<=1)return E;var A=H.valueOf(f.x).selfAdd(-u.x),J=H.valueOf(f.y).selfAdd(-u.y),at=H.valueOf(b.x).selfAdd(-f.x),yt=H.valueOf(b.y).selfAdd(-f.y);return A.selfMultiply(yt).selfSubtract(J.selfMultiply(at)).signum()},ot.signOfDet2x2=function(u,f,b,E){return u.multiply(E).selfSubtract(f.multiply(b)).signum()},ot.intersection=function(u,f,b,E){var A=H.valueOf(E.y).selfSubtract(b.y).selfMultiply(H.valueOf(f.x).selfSubtract(u.x)),J=H.valueOf(E.x).selfSubtract(b.x).selfMultiply(H.valueOf(f.y).selfSubtract(u.y)),at=A.subtract(J),yt=H.valueOf(E.x).selfSubtract(b.x).selfMultiply(H.valueOf(u.y).selfSubtract(b.y)),St=H.valueOf(E.y).selfSubtract(b.y).selfMultiply(H.valueOf(u.x).selfSubtract(b.x)),Bt=yt.subtract(St).selfDivide(at).doubleValue(),Yt=H.valueOf(u.x).selfAdd(H.valueOf(f.x).selfSubtract(u.x).selfMultiply(Bt)).doubleValue(),ee=H.valueOf(f.x).selfSubtract(u.x).selfMultiply(H.valueOf(u.y).selfSubtract(b.y)),xe=H.valueOf(f.y).selfSubtract(u.y).selfMultiply(H.valueOf(u.x).selfSubtract(b.x)),Me=ee.subtract(xe).selfDivide(at).doubleValue(),Be=H.valueOf(b.y).selfAdd(H.valueOf(E.y).selfSubtract(b.y).selfMultiply(Me)).doubleValue();return new G(Yt,Be)},ot.orientationIndexFilter=function(u,f,b){var E=null,A=(u.x-b.x)*(f.y-b.y),J=(u.y-b.y)*(f.x-b.x),at=A-J;if(A>0){if(J<=0)return ot.signum(at);E=A+J}else{if(!(A<0)||J>=0)return ot.signum(at);E=-A-J}var yt=ot.DP_SAFE_EPSILON*E;return at>=yt||-at>=yt?ot.signum(at):2},ot.signum=function(u){return u>0?1:u<0?-1:0},dt.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(ot,dt);var $=function(){},ct={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ct.X.get=function(){return 0},ct.Y.get=function(){return 1},ct.Z.get=function(){return 2},ct.M.get=function(){return 3},$.prototype.setOrdinate=function(u,f,b){},$.prototype.size=function(){},$.prototype.getOrdinate=function(u,f){},$.prototype.getCoordinate=function(){},$.prototype.getCoordinateCopy=function(u){},$.prototype.getDimension=function(){},$.prototype.getX=function(u){},$.prototype.clone=function(){},$.prototype.expandEnvelope=function(u){},$.prototype.copy=function(){},$.prototype.getY=function(u){},$.prototype.toCoordinateArray=function(){},$.prototype.interfaces_=function(){return[z]},$.prototype.getClass=function(){return $},Object.defineProperties($,ct);var W=function(){},q=function(u){function f(){u.call(this,"Projective point not representable on the Cartesian plane.")}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(W),rt=function(){};rt.arraycopy=function(u,f,b,E,A){for(var J=0,at=f;at<f+A;at++)b[E+J]=u[at],J++},rt.getProperty=function(u){return{"line.separator":`
`}[u]};var mt=function u(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var f=arguments[0];this.x=f.x,this.y=f.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var b=arguments[0],E=arguments[1];this.x=b,this.y=E,this.w=1}else if(arguments[0]instanceof u&&arguments[1]instanceof u){var A=arguments[0],J=arguments[1];this.x=A.y*J.w-J.y*A.w,this.y=J.x*A.w-A.x*J.w,this.w=A.x*J.y-J.x*A.y}else if(arguments[0]instanceof G&&arguments[1]instanceof G){var at=arguments[0],yt=arguments[1];this.x=at.y-yt.y,this.y=yt.x-at.x,this.w=at.x*yt.y-yt.x*at.y}}else if(arguments.length===3){var St=arguments[0],Bt=arguments[1],Yt=arguments[2];this.x=St,this.y=Bt,this.w=Yt}else if(arguments.length===4){var ee=arguments[0],xe=arguments[1],Me=arguments[2],Be=arguments[3],qe=ee.y-xe.y,gr=xe.x-ee.x,qr=ee.x*xe.y-xe.x*ee.y,Fn=Me.y-Be.y,ro=Be.x-Me.x,No=Me.x*Be.y-Be.x*Me.y;this.x=gr*No-ro*qr,this.y=Fn*qr-qe*No,this.w=qe*ro-Fn*gr}};mt.prototype.getY=function(){var u=this.y/this.w;if(O.isNaN(u)||O.isInfinite(u))throw new q;return u},mt.prototype.getX=function(){var u=this.x/this.w;if(O.isNaN(u)||O.isInfinite(u))throw new q;return u},mt.prototype.getCoordinate=function(){var u=new G;return u.x=this.getX(),u.y=this.getY(),u},mt.prototype.interfaces_=function(){return[]},mt.prototype.getClass=function(){return mt},mt.intersection=function(u,f,b,E){var A=u.y-f.y,J=f.x-u.x,at=u.x*f.y-f.x*u.y,yt=b.y-E.y,St=E.x-b.x,Bt=b.x*E.y-E.x*b.y,Yt=A*St-yt*J,ee=(J*Bt-St*at)/Yt,xe=(yt*at-A*Bt)/Yt;if(O.isNaN(ee)||O.isInfinite(ee)||O.isNaN(xe)||O.isInfinite(xe))throw new q;return new G(ee,xe)};var wt=function u(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof G){var f=arguments[0];this.init(f.x,f.x,f.y,f.y)}else if(arguments[0]instanceof u){var b=arguments[0];this.init(b)}}else if(arguments.length===2){var E=arguments[0],A=arguments[1];this.init(E.x,A.x,E.y,A.y)}else if(arguments.length===4){var J=arguments[0],at=arguments[1],yt=arguments[2],St=arguments[3];this.init(J,at,yt,St)}},_t={serialVersionUID:{configurable:!0}};wt.prototype.getArea=function(){return this.getWidth()*this.getHeight()},wt.prototype.equals=function(u){if(!(u instanceof wt))return!1;var f=u;return this.isNull()?f.isNull():this._maxx===f.getMaxX()&&this._maxy===f.getMaxY()&&this._minx===f.getMinX()&&this._miny===f.getMinY()},wt.prototype.intersection=function(u){if(this.isNull()||u.isNull()||!this.intersects(u))return new wt;var f=this._minx>u._minx?this._minx:u._minx,b=this._miny>u._miny?this._miny:u._miny,E=this._maxx<u._maxx?this._maxx:u._maxx,A=this._maxy<u._maxy?this._maxy:u._maxy;return new wt(f,E,b,A)},wt.prototype.isNull=function(){return this._maxx<this._minx},wt.prototype.getMaxX=function(){return this._maxx},wt.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof G){var u=arguments[0];return this.covers(u.x,u.y)}if(arguments[0]instanceof wt){var f=arguments[0];return!this.isNull()&&!f.isNull()&&f.getMinX()>=this._minx&&f.getMaxX()<=this._maxx&&f.getMinY()>=this._miny&&f.getMaxY()<=this._maxy}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];return!this.isNull()&&b>=this._minx&&b<=this._maxx&&E>=this._miny&&E<=this._maxy}},wt.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof wt){var u=arguments[0];return!this.isNull()&&!u.isNull()&&!(u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny)}if(arguments[0]instanceof G){var f=arguments[0];return this.intersects(f.x,f.y)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];return!this.isNull()&&!(b>this._maxx||b<this._minx||E>this._maxy||E<this._miny)}},wt.prototype.getMinY=function(){return this._miny},wt.prototype.getMinX=function(){return this._minx},wt.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof G){var u=arguments[0];this.expandToInclude(u.x,u.y)}else if(arguments[0]instanceof wt){var f=arguments[0];if(f.isNull())return null;this.isNull()?(this._minx=f.getMinX(),this._maxx=f.getMaxX(),this._miny=f.getMinY(),this._maxy=f.getMaxY()):(f._minx<this._minx&&(this._minx=f._minx),f._maxx>this._maxx&&(this._maxx=f._maxx),f._miny<this._miny&&(this._miny=f._miny),f._maxy>this._maxy&&(this._maxy=f._maxy))}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this.isNull()?(this._minx=b,this._maxx=b,this._miny=E,this._maxy=E):(b<this._minx&&(this._minx=b),b>this._maxx&&(this._maxx=b),E<this._miny&&(this._miny=E),E>this._maxy&&(this._maxy=E))}},wt.prototype.minExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),f=this.getHeight();return u<f?u:f},wt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},wt.prototype.compareTo=function(u){var f=u;return this.isNull()?f.isNull()?0:-1:f.isNull()?1:this._minx<f._minx?-1:this._minx>f._minx?1:this._miny<f._miny?-1:this._miny>f._miny?1:this._maxx<f._maxx?-1:this._maxx>f._maxx?1:this._maxy<f._maxy?-1:this._maxy>f._maxy?1:0},wt.prototype.translate=function(u,f){if(this.isNull())return null;this.init(this.getMinX()+u,this.getMaxX()+u,this.getMinY()+f,this.getMaxY()+f)},wt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},wt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},wt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},wt.prototype.maxExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),f=this.getHeight();return u>f?u:f},wt.prototype.expandBy=function(){if(arguments.length===1){var u=arguments[0];this.expandBy(u,u)}else if(arguments.length===2){var f=arguments[0],b=arguments[1];if(this.isNull())return null;this._minx-=f,this._maxx+=f,this._miny-=b,this._maxy+=b,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},wt.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof wt){var u=arguments[0];return this.covers(u)}if(arguments[0]instanceof G){var f=arguments[0];return this.covers(f)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];return this.covers(b,E)}},wt.prototype.centre=function(){return this.isNull()?null:new G((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},wt.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof G){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof wt){var f=arguments[0];this._minx=f._minx,this._maxx=f._maxx,this._miny=f._miny,this._maxy=f._maxy}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this.init(b.x,E.x,b.y,E.y)}else if(arguments.length===4){var A=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3];A<J?(this._minx=A,this._maxx=J):(this._minx=J,this._maxx=A),at<yt?(this._miny=at,this._maxy=yt):(this._miny=yt,this._maxy=at)}},wt.prototype.getMaxY=function(){return this._maxy},wt.prototype.distance=function(u){if(this.intersects(u))return 0;var f=0;this._maxx<u._minx?f=u._minx-this._maxx:this._minx>u._maxx&&(f=this._minx-u._maxx);var b=0;return this._maxy<u._miny?b=u._miny-this._maxy:this._miny>u._maxy&&(b=this._miny-u._maxy),f===0?b:b===0?f:Math.sqrt(f*f+b*b)},wt.prototype.hashCode=function(){var u=17;return u=37*u+G.hashCode(this._minx),u=37*u+G.hashCode(this._maxx),u=37*u+G.hashCode(this._miny),u=37*u+G.hashCode(this._maxy)},wt.prototype.interfaces_=function(){return[U,t]},wt.prototype.getClass=function(){return wt},wt.intersects=function(){if(arguments.length===3){var u=arguments[0],f=arguments[1],b=arguments[2];return b.x>=(u.x<f.x?u.x:f.x)&&b.x<=(u.x>f.x?u.x:f.x)&&b.y>=(u.y<f.y?u.y:f.y)&&b.y<=(u.y>f.y?u.y:f.y)}if(arguments.length===4){var E=arguments[0],A=arguments[1],J=arguments[2],at=arguments[3],yt=Math.min(J.x,at.x),St=Math.max(J.x,at.x),Bt=Math.min(E.x,A.x),Yt=Math.max(E.x,A.x);return!(Bt>St)&&!(Yt<yt)&&(yt=Math.min(J.y,at.y),St=Math.max(J.y,at.y),Bt=Math.min(E.y,A.y),Yt=Math.max(E.y,A.y),!(Bt>St)&&!(Yt<yt))}},_t.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(wt,_t);var Ct={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ft=function(u){this.geometryFactory=u||new Se};Ft.prototype.read=function(u){var f,b,E;u=u.replace(/[\n\r]/g," ");var A=Ct.typeStr.exec(u);if(u.search("EMPTY")!==-1&&((A=Ct.emptyTypeStr.exec(u))[2]=void 0),A&&(b=A[1].toLowerCase(),E=A[2],vt[b]&&(f=vt[b].apply(this,[E]))),f===void 0)throw new Error("Could not parse WKT "+u);return f},Ft.prototype.write=function(u){return this.extractGeometry(u)},Ft.prototype.extractGeometry=function(u){var f=u.getGeometryType().toLowerCase();if(!At[f])return null;var b=f.toUpperCase();return u.isEmpty()?b+" EMPTY":b+"("+At[f].apply(this,[u])+")"};var At={coordinate:function(u){return u.x+" "+u.y},point:function(u){return At.coordinate.call(this,u._coordinates._coordinates[0])},multipoint:function(u){for(var f=[],b=0,E=u._geometries.length;b<E;++b)f.push("("+At.point.apply(this,[u._geometries[b]])+")");return f.join(",")},linestring:function(u){for(var f=[],b=0,E=u._points._coordinates.length;b<E;++b)f.push(At.coordinate.apply(this,[u._points._coordinates[b]]));return f.join(",")},linearring:function(u){for(var f=[],b=0,E=u._points._coordinates.length;b<E;++b)f.push(At.coordinate.apply(this,[u._points._coordinates[b]]));return f.join(",")},multilinestring:function(u){for(var f=[],b=0,E=u._geometries.length;b<E;++b)f.push("("+At.linestring.apply(this,[u._geometries[b]])+")");return f.join(",")},polygon:function(u){var f=[];f.push("("+At.linestring.apply(this,[u._shell])+")");for(var b=0,E=u._holes.length;b<E;++b)f.push("("+At.linestring.apply(this,[u._holes[b]])+")");return f.join(",")},multipolygon:function(u){for(var f=[],b=0,E=u._geometries.length;b<E;++b)f.push("("+At.polygon.apply(this,[u._geometries[b]])+")");return f.join(",")},geometrycollection:function(u){for(var f=[],b=0,E=u._geometries.length;b<E;++b)f.push(this.extractGeometry(u._geometries[b]));return f.join(",")}},vt={point:function(u){if(u===void 0)return this.geometryFactory.createPoint();var f=u.trim().split(Ct.spaces);return this.geometryFactory.createPoint(new G(Number.parseFloat(f[0]),Number.parseFloat(f[1])))},multipoint:function(u){if(u===void 0)return this.geometryFactory.createMultiPoint();for(var f,b=u.trim().split(","),E=[],A=0,J=b.length;A<J;++A)f=b[A].replace(Ct.trimParens,"$1"),E.push(vt.point.apply(this,[f]));return this.geometryFactory.createMultiPoint(E)},linestring:function(u){if(u===void 0)return this.geometryFactory.createLineString();for(var f,b=u.trim().split(","),E=[],A=0,J=b.length;A<J;++A)f=b[A].trim().split(Ct.spaces),E.push(new G(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLineString(E)},linearring:function(u){if(u===void 0)return this.geometryFactory.createLinearRing();for(var f,b=u.trim().split(","),E=[],A=0,J=b.length;A<J;++A)f=b[A].trim().split(Ct.spaces),E.push(new G(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLinearRing(E)},multilinestring:function(u){if(u===void 0)return this.geometryFactory.createMultiLineString();for(var f,b=u.trim().split(Ct.parenComma),E=[],A=0,J=b.length;A<J;++A)f=b[A].replace(Ct.trimParens,"$1"),E.push(vt.linestring.apply(this,[f]));return this.geometryFactory.createMultiLineString(E)},polygon:function(u){if(u===void 0)return this.geometryFactory.createPolygon();for(var f,b,E,A,J=u.trim().split(Ct.parenComma),at=[],yt=0,St=J.length;yt<St;++yt)f=J[yt].replace(Ct.trimParens,"$1"),b=vt.linestring.apply(this,[f]),E=this.geometryFactory.createLinearRing(b._points),yt===0?A=E:at.push(E);return this.geometryFactory.createPolygon(A,at)},multipolygon:function(u){if(u===void 0)return this.geometryFactory.createMultiPolygon();for(var f,b=u.trim().split(Ct.doubleParenComma),E=[],A=0,J=b.length;A<J;++A)f=b[A].replace(Ct.trimParens,"$1"),E.push(vt.polygon.apply(this,[f]));return this.geometryFactory.createMultiPolygon(E)},geometrycollection:function(u){if(u===void 0)return this.geometryFactory.createGeometryCollection();for(var f=(u=u.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),b=[],E=0,A=f.length;E<A;++E)b.push(this.read(f[E]));return this.geometryFactory.createGeometryCollection(b)}},kt=function(u){this.parser=new Ft(u)};kt.prototype.write=function(u){return this.parser.write(u)},kt.toLineString=function(u,f){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+u.x+" "+u.y+", "+f.x+" "+f.y+" )"};var gt=function(u){function f(b){u.call(this,b),this.name="RuntimeException",this.message=b,this.stack=new u().stack}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f}(Error),ut=function(u){function f(){if(u.call(this),arguments.length===0)u.call(this);else if(arguments.length===1){var b=arguments[0];u.call(this,b)}}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(gt),Q=function(){};Q.prototype.interfaces_=function(){return[]},Q.prototype.getClass=function(){return Q},Q.shouldNeverReachHere=function(){if(arguments.length===0)Q.shouldNeverReachHere(null);else if(arguments.length===1){var u=arguments[0];throw new ut("Should never reach here"+(u!==null?": "+u:""))}},Q.isTrue=function(){var u,f;if(arguments.length===1)u=arguments[0],Q.isTrue(u,null);else if(arguments.length===2&&(u=arguments[0],f=arguments[1],!u))throw f===null?new ut:new ut(f)},Q.equals=function(){var u,f,b;if(arguments.length===2)u=arguments[0],f=arguments[1],Q.equals(u,f,null);else if(arguments.length===3&&(u=arguments[0],f=arguments[1],b=arguments[2],!f.equals(u)))throw new ut("Expected "+u+" but encountered "+f+(b!==null?": "+b:""))};var Y=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new G,this._intPt[1]=new G,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},et={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Y.prototype.getIndexAlongSegment=function(u,f){return this.computeIntLineIndex(),this._intLineIndex[u][f]},Y.prototype.getTopologySummary=function(){var u=new T;return this.isEndPoint()&&u.append(" endpoint"),this._isProper&&u.append(" proper"),this.isCollinear()&&u.append(" collinear"),u.toString()},Y.prototype.computeIntersection=function(u,f,b,E){this._inputLines[0][0]=u,this._inputLines[0][1]=f,this._inputLines[1][0]=b,this._inputLines[1][1]=E,this._result=this.computeIntersect(u,f,b,E)},Y.prototype.getIntersectionNum=function(){return this._result},Y.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var u=arguments[0];this.getEdgeDistance(u,0)>this.getEdgeDistance(u,1)?(this._intLineIndex[u][0]=0,this._intLineIndex[u][1]=1):(this._intLineIndex[u][0]=1,this._intLineIndex[u][1]=0)}},Y.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Y.prototype.setPrecisionModel=function(u){this._precisionModel=u},Y.prototype.isInteriorIntersection=function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var u=arguments[0],f=0;f<this._result;f++)if(!this._intPt[f].equals2D(this._inputLines[u][0])&&!this._intPt[f].equals2D(this._inputLines[u][1]))return!0;return!1}},Y.prototype.getIntersection=function(u){return this._intPt[u]},Y.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Y.prototype.hasIntersection=function(){return this._result!==Y.NO_INTERSECTION},Y.prototype.getEdgeDistance=function(u,f){return Y.computeEdgeDistance(this._intPt[f],this._inputLines[u][0],this._inputLines[u][1])},Y.prototype.isCollinear=function(){return this._result===Y.COLLINEAR_INTERSECTION},Y.prototype.toString=function(){return kt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+kt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Y.prototype.getEndpoint=function(u,f){return this._inputLines[u][f]},Y.prototype.isIntersection=function(u){for(var f=0;f<this._result;f++)if(this._intPt[f].equals2D(u))return!0;return!1},Y.prototype.getIntersectionAlongSegment=function(u,f){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[u][f]]},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.computeEdgeDistance=function(u,f,b){var E=Math.abs(b.x-f.x),A=Math.abs(b.y-f.y),J=-1;if(u.equals(f))J=0;else if(u.equals(b))J=E>A?E:A;else{var at=Math.abs(u.x-f.x),yt=Math.abs(u.y-f.y);(J=E>A?at:yt)!==0||u.equals(f)||(J=Math.max(at,yt))}return Q.isTrue(!(J===0&&!u.equals(f)),"Bad distance calculation"),J},Y.nonRobustComputeEdgeDistance=function(u,f,b){var E=u.x-f.x,A=u.y-f.y,J=Math.sqrt(E*E+A*A);return Q.isTrue(!(J===0&&!u.equals(f)),"Invalid distance calculation"),J},et.DONT_INTERSECT.get=function(){return 0},et.DO_INTERSECT.get=function(){return 1},et.COLLINEAR.get=function(){return 2},et.NO_INTERSECTION.get=function(){return 0},et.POINT_INTERSECTION.get=function(){return 1},et.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Y,et);var lt=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.isInSegmentEnvelopes=function(b){var E=new wt(this._inputLines[0][0],this._inputLines[0][1]),A=new wt(this._inputLines[1][0],this._inputLines[1][1]);return E.contains(b)&&A.contains(b)},f.prototype.computeIntersection=function(){if(arguments.length!==3)return u.prototype.computeIntersection.apply(this,arguments);var b=arguments[0],E=arguments[1],A=arguments[2];if(this._isProper=!1,wt.intersects(E,A,b)&&Et.orientationIndex(E,A,b)===0&&Et.orientationIndex(A,E,b)===0)return this._isProper=!0,(b.equals(E)||b.equals(A))&&(this._isProper=!1),this._result=u.POINT_INTERSECTION,null;this._result=u.NO_INTERSECTION},f.prototype.normalizeToMinimum=function(b,E,A,J,at){at.x=this.smallestInAbsValue(b.x,E.x,A.x,J.x),at.y=this.smallestInAbsValue(b.y,E.y,A.y,J.y),b.x-=at.x,b.y-=at.y,E.x-=at.x,E.y-=at.y,A.x-=at.x,A.y-=at.y,J.x-=at.x,J.y-=at.y},f.prototype.safeHCoordinateIntersection=function(b,E,A,J){var at=null;try{at=mt.intersection(b,E,A,J)}catch(yt){if(!(yt instanceof q))throw yt;at=f.nearestEndpoint(b,E,A,J)}return at},f.prototype.intersection=function(b,E,A,J){var at=this.intersectionWithNormalization(b,E,A,J);return this.isInSegmentEnvelopes(at)||(at=new G(f.nearestEndpoint(b,E,A,J))),this._precisionModel!==null&&this._precisionModel.makePrecise(at),at},f.prototype.smallestInAbsValue=function(b,E,A,J){var at=b,yt=Math.abs(at);return Math.abs(E)<yt&&(at=E,yt=Math.abs(E)),Math.abs(A)<yt&&(at=A,yt=Math.abs(A)),Math.abs(J)<yt&&(at=J),at},f.prototype.checkDD=function(b,E,A,J,at){var yt=ot.intersection(b,E,A,J),St=this.isInSegmentEnvelopes(yt);rt.out.println("DD in env = "+St+"  --------------------- "+yt),at.distance(yt)>1e-4&&rt.out.println("Distance = "+at.distance(yt))},f.prototype.intersectionWithNormalization=function(b,E,A,J){var at=new G(b),yt=new G(E),St=new G(A),Bt=new G(J),Yt=new G;this.normalizeToEnvCentre(at,yt,St,Bt,Yt);var ee=this.safeHCoordinateIntersection(at,yt,St,Bt);return ee.x+=Yt.x,ee.y+=Yt.y,ee},f.prototype.computeCollinearIntersection=function(b,E,A,J){var at=wt.intersects(b,E,A),yt=wt.intersects(b,E,J),St=wt.intersects(A,J,b),Bt=wt.intersects(A,J,E);return at&&yt?(this._intPt[0]=A,this._intPt[1]=J,u.COLLINEAR_INTERSECTION):St&&Bt?(this._intPt[0]=b,this._intPt[1]=E,u.COLLINEAR_INTERSECTION):at&&St?(this._intPt[0]=A,this._intPt[1]=b,!A.equals(b)||yt||Bt?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):at&&Bt?(this._intPt[0]=A,this._intPt[1]=E,!A.equals(E)||yt||St?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):yt&&St?(this._intPt[0]=J,this._intPt[1]=b,!J.equals(b)||at||Bt?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):yt&&Bt?(this._intPt[0]=J,this._intPt[1]=E,!J.equals(E)||at||St?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):u.NO_INTERSECTION},f.prototype.normalizeToEnvCentre=function(b,E,A,J,at){var yt=b.x<E.x?b.x:E.x,St=b.y<E.y?b.y:E.y,Bt=b.x>E.x?b.x:E.x,Yt=b.y>E.y?b.y:E.y,ee=A.x<J.x?A.x:J.x,xe=A.y<J.y?A.y:J.y,Me=A.x>J.x?A.x:J.x,Be=A.y>J.y?A.y:J.y,qe=((yt>ee?yt:ee)+(Bt<Me?Bt:Me))/2,gr=((St>xe?St:xe)+(Yt<Be?Yt:Be))/2;at.x=qe,at.y=gr,b.x-=at.x,b.y-=at.y,E.x-=at.x,E.y-=at.y,A.x-=at.x,A.y-=at.y,J.x-=at.x,J.y-=at.y},f.prototype.computeIntersect=function(b,E,A,J){if(this._isProper=!1,!wt.intersects(b,E,A,J))return u.NO_INTERSECTION;var at=Et.orientationIndex(b,E,A),yt=Et.orientationIndex(b,E,J);if(at>0&&yt>0||at<0&&yt<0)return u.NO_INTERSECTION;var St=Et.orientationIndex(A,J,b),Bt=Et.orientationIndex(A,J,E);return St>0&&Bt>0||St<0&&Bt<0?u.NO_INTERSECTION:at===0&&yt===0&&St===0&&Bt===0?this.computeCollinearIntersection(b,E,A,J):(at===0||yt===0||St===0||Bt===0?(this._isProper=!1,b.equals2D(A)||b.equals2D(J)?this._intPt[0]=b:E.equals2D(A)||E.equals2D(J)?this._intPt[0]=E:at===0?this._intPt[0]=new G(A):yt===0?this._intPt[0]=new G(J):St===0?this._intPt[0]=new G(b):Bt===0&&(this._intPt[0]=new G(E))):(this._isProper=!0,this._intPt[0]=this.intersection(b,E,A,J)),u.POINT_INTERSECTION)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.nearestEndpoint=function(b,E,A,J){var at=b,yt=Et.distancePointLine(b,A,J),St=Et.distancePointLine(E,A,J);return St<yt&&(yt=St,at=E),(St=Et.distancePointLine(A,b,E))<yt&&(yt=St,at=A),(St=Et.distancePointLine(J,b,E))<yt&&(yt=St,at=J),at},f}(Y),pt=function(){};pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt},pt.orientationIndex=function(u,f,b){var E=f.x-u.x,A=f.y-u.y,J=b.x-f.x,at=b.y-f.y;return pt.signOfDet2x2(E,A,J,at)},pt.signOfDet2x2=function(u,f,b,E){var A=null,J=null,at=null;if(A=1,u===0||E===0)return f===0||b===0?0:f>0?b>0?-A:A:b>0?A:-A;if(f===0||b===0)return E>0?u>0?A:-A:u>0?-A:A;if(f>0?E>0?f<=E||(A=-A,J=u,u=b,b=J,J=f,f=E,E=J):f<=-E?(A=-A,b=-b,E=-E):(J=u,u=-b,b=J,J=f,f=-E,E=J):E>0?-f<=E?(A=-A,u=-u,f=-f):(J=-u,u=b,b=J,J=-f,f=E,E=J):f>=E?(u=-u,f=-f,b=-b,E=-E):(A=-A,J=-u,u=-b,b=J,J=-f,f=-E,E=J),u>0){if(!(b>0)||!(u<=b))return A}else{if(b>0||!(u>=b))return-A;A=-A,u=-u,b=-b}for(;;){if(at=Math.floor(b/u),b-=at*u,(E-=at*f)<0)return-A;if(E>f)return A;if(u>b+b){if(f<E+E)return A}else{if(f>E+E)return-A;b=u-b,E=f-E,A=-A}if(E===0)return b===0?0:-A;if(b===0||(at=Math.floor(u/b),u-=at*b,(f-=at*E)<0))return A;if(f>E)return-A;if(b>u+u){if(E<f+f)return-A}else{if(E>f+f)return A;u=b-u,f=E-f,A=-A}if(f===0)return u===0?0:A;if(u===0)return-A}};var bt=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var u=arguments[0];this._p=u};bt.prototype.countSegment=function(u,f){if(u.x<this._p.x&&f.x<this._p.x)return null;if(this._p.x===f.x&&this._p.y===f.y)return this._isPointOnSegment=!0,null;if(u.y===this._p.y&&f.y===this._p.y){var b=u.x,E=f.x;return b>E&&(b=f.x,E=u.x),this._p.x>=b&&this._p.x<=E&&(this._isPointOnSegment=!0),null}if(u.y>this._p.y&&f.y<=this._p.y||f.y>this._p.y&&u.y<=this._p.y){var A=u.x-this._p.x,J=u.y-this._p.y,at=f.x-this._p.x,yt=f.y-this._p.y,St=pt.signOfDet2x2(A,J,at,yt);if(St===0)return this._isPointOnSegment=!0,null;yt<J&&(St=-St),St>0&&this._crossingCount++}},bt.prototype.isPointInPolygon=function(){return this.getLocation()!==N.EXTERIOR},bt.prototype.getLocation=function(){return this._isPointOnSegment?N.BOUNDARY:this._crossingCount%2==1?N.INTERIOR:N.EXTERIOR},bt.prototype.isOnSegment=function(){return this._isPointOnSegment},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.locatePointInRing=function(){if(arguments[0]instanceof G&&w(arguments[1],$)){for(var u=arguments[0],f=arguments[1],b=new bt(u),E=new G,A=new G,J=1;J<f.size();J++)if(f.getCoordinate(J,E),f.getCoordinate(J-1,A),b.countSegment(E,A),b.isOnSegment())return b.getLocation();return b.getLocation()}if(arguments[0]instanceof G&&arguments[1]instanceof Array){for(var at=arguments[0],yt=arguments[1],St=new bt(at),Bt=1;Bt<yt.length;Bt++){var Yt=yt[Bt],ee=yt[Bt-1];if(St.countSegment(Yt,ee),St.isOnSegment())return St.getLocation()}return St.getLocation()}};var Et=function(){},Ot={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Et.prototype.interfaces_=function(){return[]},Et.prototype.getClass=function(){return Et},Et.orientationIndex=function(u,f,b){return ot.orientationIndex(u,f,b)},Et.signedArea=function(){if(arguments[0]instanceof Array){var u=arguments[0];if(u.length<3)return 0;for(var f=0,b=u[0].x,E=1;E<u.length-1;E++){var A=u[E].x-b,J=u[E+1].y;f+=A*(u[E-1].y-J)}return f/2}if(w(arguments[0],$)){var at=arguments[0],yt=at.size();if(yt<3)return 0;var St=new G,Bt=new G,Yt=new G;at.getCoordinate(0,Bt),at.getCoordinate(1,Yt);var ee=Bt.x;Yt.x-=ee;for(var xe=0,Me=1;Me<yt-1;Me++)St.y=Bt.y,Bt.x=Yt.x,Bt.y=Yt.y,at.getCoordinate(Me+1,Yt),Yt.x-=ee,xe+=Bt.x*(St.y-Yt.y);return xe/2}},Et.distanceLineLine=function(u,f,b,E){if(u.equals(f))return Et.distancePointLine(u,b,E);if(b.equals(E))return Et.distancePointLine(E,u,f);var A=!1;if(wt.intersects(u,f,b,E)){var J=(f.x-u.x)*(E.y-b.y)-(f.y-u.y)*(E.x-b.x);if(J===0)A=!0;else{var at=(u.y-b.y)*(E.x-b.x)-(u.x-b.x)*(E.y-b.y),yt=((u.y-b.y)*(f.x-u.x)-(u.x-b.x)*(f.y-u.y))/J,St=at/J;(St<0||St>1||yt<0||yt>1)&&(A=!0)}}else A=!0;return A?C.min(Et.distancePointLine(u,b,E),Et.distancePointLine(f,b,E),Et.distancePointLine(b,u,f),Et.distancePointLine(E,u,f)):0},Et.isPointInRing=function(u,f){return Et.locatePointInRing(u,f)!==N.EXTERIOR},Et.computeLength=function(u){var f=u.size();if(f<=1)return 0;var b=0,E=new G;u.getCoordinate(0,E);for(var A=E.x,J=E.y,at=1;at<f;at++){u.getCoordinate(at,E);var yt=E.x,St=E.y,Bt=yt-A,Yt=St-J;b+=Math.sqrt(Bt*Bt+Yt*Yt),A=yt,J=St}return b},Et.isCCW=function(u){var f=u.length-1;if(f<3)throw new S("Ring has fewer than 4 points, so orientation cannot be determined");for(var b=u[0],E=0,A=1;A<=f;A++){var J=u[A];J.y>b.y&&(b=J,E=A)}var at=E;do(at-=1)<0&&(at=f);while(u[at].equals2D(b)&&at!==E);var yt=E;do yt=(yt+1)%f;while(u[yt].equals2D(b)&&yt!==E);var St=u[at],Bt=u[yt];if(St.equals2D(b)||Bt.equals2D(b)||St.equals2D(Bt))return!1;var Yt=Et.computeOrientation(St,b,Bt),ee=!1;return ee=Yt===0?St.x>Bt.x:Yt>0,ee},Et.locatePointInRing=function(u,f){return bt.locatePointInRing(u,f)},Et.distancePointLinePerpendicular=function(u,f,b){var E=(b.x-f.x)*(b.x-f.x)+(b.y-f.y)*(b.y-f.y),A=((f.y-u.y)*(b.x-f.x)-(f.x-u.x)*(b.y-f.y))/E;return Math.abs(A)*Math.sqrt(E)},Et.computeOrientation=function(u,f,b){return Et.orientationIndex(u,f,b)},Et.distancePointLine=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];if(f.length===0)throw new S("Line array must contain at least one vertex");for(var b=u.distance(f[0]),E=0;E<f.length-1;E++){var A=Et.distancePointLine(u,f[E],f[E+1]);A<b&&(b=A)}return b}if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];if(at.x===yt.x&&at.y===yt.y)return J.distance(at);var St=(yt.x-at.x)*(yt.x-at.x)+(yt.y-at.y)*(yt.y-at.y),Bt=((J.x-at.x)*(yt.x-at.x)+(J.y-at.y)*(yt.y-at.y))/St;if(Bt<=0)return J.distance(at);if(Bt>=1)return J.distance(yt);var Yt=((at.y-J.y)*(yt.x-at.x)-(at.x-J.x)*(yt.y-at.y))/St;return Math.abs(Yt)*Math.sqrt(St)}},Et.isOnLine=function(u,f){for(var b=new lt,E=1;E<f.length;E++){var A=f[E-1],J=f[E];if(b.computeIntersection(u,A,J),b.hasIntersection())return!0}return!1},Ot.CLOCKWISE.get=function(){return-1},Ot.RIGHT.get=function(){return Et.CLOCKWISE},Ot.COUNTERCLOCKWISE.get=function(){return 1},Ot.LEFT.get=function(){return Et.COUNTERCLOCKWISE},Ot.COLLINEAR.get=function(){return 0},Ot.STRAIGHT.get=function(){return Et.COLLINEAR},Object.defineProperties(Et,Ot);var zt=function(){};zt.prototype.filter=function(u){},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var Gt=function(){var u=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=u,this._SRID=u.getSRID()},Jt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Gt.prototype.isGeometryCollection=function(){return this.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION},Gt.prototype.getFactory=function(){return this._factory},Gt.prototype.getGeometryN=function(u){return this},Gt.prototype.getArea=function(){return 0},Gt.prototype.isRectangle=function(){return!1},Gt.prototype.equals=function(){if(arguments[0]instanceof Gt){var u=arguments[0];return u!==null&&this.equalsTopo(u)}if(arguments[0]instanceof Object){var f=arguments[0];if(!(f instanceof Gt))return!1;var b=f;return this.equalsExact(b)}},Gt.prototype.equalsExact=function(u){return this===u||this.equalsExact(u,0)},Gt.prototype.geometryChanged=function(){this.apply(Gt.geometryChangedFilter)},Gt.prototype.geometryChangedAction=function(){this._envelope=null},Gt.prototype.equalsNorm=function(u){return u!==null&&this.norm().equalsExact(u.norm())},Gt.prototype.getLength=function(){return 0},Gt.prototype.getNumGeometries=function(){return 1},Gt.prototype.compareTo=function(){if(arguments.length===1){var u=arguments[0],f=u;return this.getSortIndex()!==f.getSortIndex()?this.getSortIndex()-f.getSortIndex():this.isEmpty()&&f.isEmpty()?0:this.isEmpty()?-1:f.isEmpty()?1:this.compareToSameClass(u)}if(arguments.length===2){var b=arguments[0],E=arguments[1];return this.getSortIndex()!==b.getSortIndex()?this.getSortIndex()-b.getSortIndex():this.isEmpty()&&b.isEmpty()?0:this.isEmpty()?-1:b.isEmpty()?1:this.compareToSameClass(b,E)}},Gt.prototype.getUserData=function(){return this._userData},Gt.prototype.getSRID=function(){return this._SRID},Gt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Gt.prototype.checkNotGeometryCollection=function(u){if(u.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION)throw new S("This method does not support GeometryCollection arguments")},Gt.prototype.equal=function(u,f,b){return b===0?u.equals(f):u.distance(f)<=b},Gt.prototype.norm=function(){var u=this.copy();return u.normalize(),u},Gt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Gt.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new wt(this._envelope)},Gt.prototype.setSRID=function(u){this._SRID=u},Gt.prototype.setUserData=function(u){this._userData=u},Gt.prototype.compare=function(u,f){for(var b=u.iterator(),E=f.iterator();b.hasNext()&&E.hasNext();){var A=b.next(),J=E.next(),at=A.compareTo(J);if(at!==0)return at}return b.hasNext()?1:E.hasNext()?-1:0},Gt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Gt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Gt.SORTINDEX_MULTIPOINT||this.getSortIndex()===Gt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Gt.SORTINDEX_MULTIPOLYGON},Gt.prototype.interfaces_=function(){return[z,U,t]},Gt.prototype.getClass=function(){return Gt},Gt.hasNonEmptyElements=function(u){for(var f=0;f<u.length;f++)if(!u[f].isEmpty())return!0;return!1},Gt.hasNullElements=function(u){for(var f=0;f<u.length;f++)if(u[f]===null)return!0;return!1},Jt.serialVersionUID.get=function(){return 8763622679187377e3},Jt.SORTINDEX_POINT.get=function(){return 0},Jt.SORTINDEX_MULTIPOINT.get=function(){return 1},Jt.SORTINDEX_LINESTRING.get=function(){return 2},Jt.SORTINDEX_LINEARRING.get=function(){return 3},Jt.SORTINDEX_MULTILINESTRING.get=function(){return 4},Jt.SORTINDEX_POLYGON.get=function(){return 5},Jt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Jt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Jt.geometryChangedFilter.get=function(){return Kt},Object.defineProperties(Gt,Jt);var Kt=function(){};Kt.interfaces_=function(){return[zt]},Kt.filter=function(u){u.geometryChangedAction()};var ie=function(){};ie.prototype.filter=function(u){},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie};var Xt=function(){},Ut={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Xt.prototype.isInBoundary=function(u){},Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Ut.Mod2BoundaryNodeRule.get=function(){return _e},Ut.EndPointBoundaryNodeRule.get=function(){return le},Ut.MultiValentEndPointBoundaryNodeRule.get=function(){return ye},Ut.MonoValentEndPointBoundaryNodeRule.get=function(){return Ze},Ut.MOD2_BOUNDARY_RULE.get=function(){return new _e},Ut.ENDPOINT_BOUNDARY_RULE.get=function(){return new le},Ut.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ye},Ut.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ze},Ut.OGC_SFS_BOUNDARY_RULE.get=function(){return Xt.MOD2_BOUNDARY_RULE},Object.defineProperties(Xt,Ut);var _e=function(){};_e.prototype.isInBoundary=function(u){return u%2==1},_e.prototype.interfaces_=function(){return[Xt]},_e.prototype.getClass=function(){return _e};var le=function(){};le.prototype.isInBoundary=function(u){return u>0},le.prototype.interfaces_=function(){return[Xt]},le.prototype.getClass=function(){return le};var ye=function(){};ye.prototype.isInBoundary=function(u){return u>1},ye.prototype.interfaces_=function(){return[Xt]},ye.prototype.getClass=function(){return ye};var Ze=function(){};Ze.prototype.isInBoundary=function(u){return u===1},Ze.prototype.interfaces_=function(){return[Xt]},Ze.prototype.getClass=function(){return Ze};var ce=function(){};ce.prototype.add=function(){},ce.prototype.addAll=function(){},ce.prototype.isEmpty=function(){},ce.prototype.iterator=function(){},ce.prototype.size=function(){},ce.prototype.toArray=function(){},ce.prototype.remove=function(){},(e.prototype=new Error).name="IndexOutOfBoundsException";var ke=function(){};ke.prototype.hasNext=function(){},ke.prototype.next=function(){},ke.prototype.remove=function(){};var He=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.get=function(){},f.prototype.set=function(){},f.prototype.isEmpty=function(){},f}(ce);(i.prototype=new Error).name="NoSuchElementException";var $t=function(u){function f(){u.call(this),this.array_=[],arguments[0]instanceof ce&&this.addAll(arguments[0])}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.ensureCapacity=function(){},f.prototype.interfaces_=function(){return[u,ce]},f.prototype.add=function(b){return arguments.length===1?this.array_.push(b):this.array_.splice(arguments[0],arguments[1]),!0},f.prototype.clear=function(){this.array_=[]},f.prototype.addAll=function(b){for(var E=b.iterator();E.hasNext();)this.add(E.next());return!0},f.prototype.set=function(b,E){var A=this.array_[b];return this.array_[b]=E,A},f.prototype.iterator=function(){return new Te(this)},f.prototype.get=function(b){if(b<0||b>=this.size())throw new e;return this.array_[b]},f.prototype.isEmpty=function(){return this.array_.length===0},f.prototype.size=function(){return this.array_.length},f.prototype.toArray=function(){for(var b=[],E=0,A=this.array_.length;E<A;E++)b.push(this.array_[E]);return b},f.prototype.remove=function(b){for(var E=!1,A=0,J=this.array_.length;A<J;A++)if(this.array_[A]===b){this.array_.splice(A,1),E=!0;break}return E},f}(He),Te=function(u){function f(b){u.call(this),this.arrayList_=b,this.position_=0}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},f.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},f.prototype.set=function(b){return this.arrayList_.set(this.position_-1,b)},f.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},f}(ke),bi=function(u){function f(){if(u.call(this),arguments.length!==0){if(arguments.length===1){var E=arguments[0];this.ensureCapacity(E.length),this.add(E,!0)}else if(arguments.length===2){var A=arguments[0],J=arguments[1];this.ensureCapacity(A.length),this.add(A,J)}}}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={coordArrayType:{configurable:!0}};return b.coordArrayType.get=function(){return new Array(0).fill(null)},f.prototype.getCoordinate=function(E){return this.get(E)},f.prototype.addAll=function(){if(arguments.length===2){for(var E=arguments[0],A=arguments[1],J=!1,at=E.iterator();at.hasNext();)this.add(at.next(),A),J=!0;return J}return u.prototype.addAll.apply(this,arguments)},f.prototype.clone=function(){for(var E=u.prototype.clone.call(this),A=0;A<this.size();A++)E.add(A,this.get(A).copy());return E},f.prototype.toCoordinateArray=function(){return this.toArray(f.coordArrayType)},f.prototype.add=function(){if(arguments.length===1){var E=arguments[0];u.prototype.add.call(this,E)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var A=arguments[0],J=arguments[1];return this.add(A,J,!0),!0}if(arguments[0]instanceof G&&typeof arguments[1]=="boolean"){var at=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(at))return null;u.prototype.add.call(this,at)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var yt=arguments[0],St=arguments[1];return this.add(yt,St),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Bt=arguments[0],Yt=arguments[1];if(arguments[2])for(var ee=0;ee<Bt.length;ee++)this.add(Bt[ee],Yt);else for(var xe=Bt.length-1;xe>=0;xe--)this.add(Bt[xe],Yt);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof G){var Me=arguments[0],Be=arguments[1];if(!arguments[2]){var qe=this.size();if(qe>0&&(Me>0&&this.get(Me-1).equals2D(Be)||Me<qe&&this.get(Me).equals2D(Be)))return null}u.prototype.add.call(this,Me,Be)}}else if(arguments.length===4){var gr=arguments[0],qr=arguments[1],Fn=arguments[2],ro=arguments[3],No=1;Fn>ro&&(No=-1);for(var Gh=Fn;Gh!==ro;Gh+=No)this.add(gr[Gh],qr);return!0}},f.prototype.closeRing=function(){this.size()>0&&this.add(new G(this.get(0)),!1)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},Object.defineProperties(f,b),f}($t),ue=function(){},Fe={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Fe.ForwardComparator.get=function(){return ai},Fe.BidirectionalComparator.get=function(){return Le},Fe.coordArrayType.get=function(){return new Array(0).fill(null)},ue.prototype.interfaces_=function(){return[]},ue.prototype.getClass=function(){return ue},ue.isRing=function(u){return!(u.length<4)&&!!u[0].equals2D(u[u.length-1])},ue.ptNotInList=function(u,f){for(var b=0;b<u.length;b++){var E=u[b];if(ue.indexOf(E,f)<0)return E}return null},ue.scroll=function(u,f){var b=ue.indexOf(f,u);if(b<0)return null;var E=new Array(u.length).fill(null);rt.arraycopy(u,b,E,0,u.length-b),rt.arraycopy(u,0,E,u.length-b,b),rt.arraycopy(E,0,u,0,u.length)},ue.equals=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];if(u===f)return!0;if(u===null||f===null||u.length!==f.length)return!1;for(var b=0;b<u.length;b++)if(!u[b].equals(f[b]))return!1;return!0}if(arguments.length===3){var E=arguments[0],A=arguments[1],J=arguments[2];if(E===A)return!0;if(E===null||A===null||E.length!==A.length)return!1;for(var at=0;at<E.length;at++)if(J.compare(E[at],A[at])!==0)return!1;return!0}},ue.intersection=function(u,f){for(var b=new bi,E=0;E<u.length;E++)f.intersects(u[E])&&b.add(u[E],!0);return b.toCoordinateArray()},ue.hasRepeatedPoints=function(u){for(var f=1;f<u.length;f++)if(u[f-1].equals(u[f]))return!0;return!1},ue.removeRepeatedPoints=function(u){return ue.hasRepeatedPoints(u)?new bi(u,!1).toCoordinateArray():u},ue.reverse=function(u){for(var f=u.length-1,b=Math.trunc(f/2),E=0;E<=b;E++){var A=u[E];u[E]=u[f-E],u[f-E]=A}},ue.removeNull=function(u){for(var f=0,b=0;b<u.length;b++)u[b]!==null&&f++;var E=new Array(f).fill(null);if(f===0)return E;for(var A=0,J=0;J<u.length;J++)u[J]!==null&&(E[A++]=u[J]);return E},ue.copyDeep=function(){if(arguments.length===1){for(var u=arguments[0],f=new Array(u.length).fill(null),b=0;b<u.length;b++)f[b]=new G(u[b]);return f}if(arguments.length===5)for(var E=arguments[0],A=arguments[1],J=arguments[2],at=arguments[3],yt=arguments[4],St=0;St<yt;St++)J[at+St]=new G(E[A+St])},ue.isEqualReversed=function(u,f){for(var b=0;b<u.length;b++){var E=u[b],A=f[u.length-b-1];if(E.compareTo(A)!==0)return!1}return!0},ue.envelope=function(u){for(var f=new wt,b=0;b<u.length;b++)f.expandToInclude(u[b]);return f},ue.toCoordinateArray=function(u){return u.toArray(ue.coordArrayType)},ue.atLeastNCoordinatesOrNothing=function(u,f){return f.length>=u?f:[]},ue.indexOf=function(u,f){for(var b=0;b<f.length;b++)if(u.equals(f[b]))return b;return-1},ue.increasingDirection=function(u){for(var f=0;f<Math.trunc(u.length/2);f++){var b=u.length-1-f,E=u[f].compareTo(u[b]);if(E!==0)return E}return 1},ue.compare=function(u,f){for(var b=0;b<u.length&&b<f.length;){var E=u[b].compareTo(f[b]);if(E!==0)return E;b++}return b<f.length?-1:b<u.length?1:0},ue.minCoordinate=function(u){for(var f=null,b=0;b<u.length;b++)(f===null||f.compareTo(u[b])>0)&&(f=u[b]);return f},ue.extract=function(u,f,b){f=C.clamp(f,0,u.length);var E=(b=C.clamp(b,-1,u.length))-f+1;b<0&&(E=0),f>=u.length&&(E=0),b<f&&(E=0);var A=new Array(E).fill(null);if(E===0)return A;for(var J=0,at=f;at<=b;at++)A[J++]=u[at];return A},Object.defineProperties(ue,Fe);var ai=function(){};ai.prototype.compare=function(u,f){return ue.compare(u,f)},ai.prototype.interfaces_=function(){return[V]},ai.prototype.getClass=function(){return ai};var Le=function(){};Le.prototype.compare=function(u,f){var b=u,E=f;if(b.length<E.length)return-1;if(b.length>E.length)return 1;if(b.length===0)return 0;var A=ue.compare(b,E);return ue.isEqualReversed(b,E)?0:A},Le.prototype.OLDcompare=function(u,f){var b=u,E=f;if(b.length<E.length)return-1;if(b.length>E.length)return 1;if(b.length===0)return 0;for(var A=ue.increasingDirection(b),J=ue.increasingDirection(E),at=A>0?0:b.length-1,yt=J>0?0:b.length-1,St=0;St<b.length;St++){var Bt=b[at].compareTo(E[yt]);if(Bt!==0)return Bt;at+=A,yt+=J}return 0},Le.prototype.interfaces_=function(){return[V]},Le.prototype.getClass=function(){return Le};var Oe=function(){};Oe.prototype.get=function(){},Oe.prototype.put=function(){},Oe.prototype.size=function(){},Oe.prototype.values=function(){},Oe.prototype.entrySet=function(){};var ir=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f}(Oe);(r.prototype=new Error).name="OperationNotSupported",(s.prototype=new ce).contains=function(){};var We=function(u){function f(){u.call(this),this.array_=[],arguments[0]instanceof ce&&this.addAll(arguments[0])}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.contains=function(b){for(var E=0,A=this.array_.length;E<A;E++)if(this.array_[E]===b)return!0;return!1},f.prototype.add=function(b){return!this.contains(b)&&(this.array_.push(b),!0)},f.prototype.addAll=function(b){for(var E=b.iterator();E.hasNext();)this.add(E.next());return!0},f.prototype.remove=function(b){throw new Error},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return this.array_.length===0},f.prototype.toArray=function(){for(var b=[],E=0,A=this.array_.length;E<A;E++)b.push(this.array_[E]);return b},f.prototype.iterator=function(){return new It(this)},f}(s),It=function(u){function f(b){u.call(this),this.hashSet_=b,this.position_=0}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},f.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},f.prototype.remove=function(){throw new r},f}(ke),qt=0;(d.prototype=new ir).get=function(u){for(var f=this.root_;f!==null;){var b=u.compareTo(f.key);if(b<0)f=f.left;else{if(!(b>0))return f.value;f=f.right}}return null},d.prototype.put=function(u,f){if(this.root_===null)return this.root_={key:u,value:f,left:null,right:null,parent:null,color:qt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var b,E,A=this.root_;do if(b=A,(E=u.compareTo(A.key))<0)A=A.left;else{if(!(E>0)){var J=A.value;return A.value=f,J}A=A.right}while(A!==null);var at={key:u,left:null,right:null,value:f,parent:b,color:qt,getValue:function(){return this.value},getKey:function(){return this.key}};return E<0?b.left=at:b.right=at,this.fixAfterInsertion(at),this.size_++,null},d.prototype.fixAfterInsertion=function(u){for(u.color=1;u!=null&&u!==this.root_&&u.parent.color===1;)if(o(u)===c(o(o(u)))){var f=h(o(o(u)));a(f)===1?(l(o(u),qt),l(f,qt),l(o(o(u)),1),u=o(o(u))):(u===h(o(u))&&(u=o(u),this.rotateLeft(u)),l(o(u),qt),l(o(o(u)),1),this.rotateRight(o(o(u))))}else{var b=c(o(o(u)));a(b)===1?(l(o(u),qt),l(b,qt),l(o(o(u)),1),u=o(o(u))):(u===c(o(u))&&(u=o(u),this.rotateRight(u)),l(o(u),qt),l(o(o(u)),1),this.rotateLeft(o(o(u))))}this.root_.color=qt},d.prototype.values=function(){var u=new $t,f=this.getFirstEntry();if(f!==null)for(u.add(f.value);(f=d.successor(f))!==null;)u.add(f.value);return u},d.prototype.entrySet=function(){var u=new We,f=this.getFirstEntry();if(f!==null)for(u.add(f);(f=d.successor(f))!==null;)u.add(f);return u},d.prototype.rotateLeft=function(u){if(u!=null){var f=u.right;u.right=f.left,f.left!=null&&(f.left.parent=u),f.parent=u.parent,u.parent===null?this.root_=f:u.parent.left===u?u.parent.left=f:u.parent.right=f,f.left=u,u.parent=f}},d.prototype.rotateRight=function(u){if(u!=null){var f=u.left;u.left=f.right,f.right!=null&&(f.right.parent=u),f.parent=u.parent,u.parent===null?this.root_=f:u.parent.right===u?u.parent.right=f:u.parent.left=f,f.right=u,u.parent=f}},d.prototype.getFirstEntry=function(){var u=this.root_;if(u!=null)for(;u.left!=null;)u=u.left;return u},d.successor=function(u){if(u===null)return null;if(u.right!==null){for(var f=u.right;f.left!==null;)f=f.left;return f}for(var b=u.parent,E=u;b!==null&&E===b.right;)E=b,b=b.parent;return b},d.prototype.size=function(){return this.size_};var jt=function(){};jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},p.prototype=new s,(g.prototype=new p).contains=function(u){for(var f=0,b=this.array_.length;f<b;f++)if(this.array_[f].compareTo(u)===0)return!0;return!1},g.prototype.add=function(u){if(this.contains(u))return!1;for(var f=0,b=this.array_.length;f<b;f++)if(this.array_[f].compareTo(u)===1)return this.array_.splice(f,0,u),!0;return this.array_.push(u),!0},g.prototype.addAll=function(u){for(var f=u.iterator();f.hasNext();)this.add(f.next());return!0},g.prototype.remove=function(u){throw new r},g.prototype.size=function(){return this.array_.length},g.prototype.isEmpty=function(){return this.array_.length===0},g.prototype.toArray=function(){for(var u=[],f=0,b=this.array_.length;f<b;f++)u.push(this.array_[f]);return u},g.prototype.iterator=function(){return new ae(this)};var ae=function(u){this.treeSet_=u,this.position_=0};ae.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},ae.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ae.prototype.remove=function(){throw new r};var Qe=function(){};Qe.sort=function(){var u,f,b,E,A=arguments[0];if(arguments.length===1)E=function(at,yt){return at.compareTo(yt)},A.sort(E);else if(arguments.length===2)b=arguments[1],E=function(at,yt){return b.compare(at,yt)},A.sort(E);else if(arguments.length===3){(f=A.slice(arguments[1],arguments[2])).sort();var J=A.slice(0,arguments[1]).concat(f,A.slice(arguments[2],A.length));for(A.splice(0,A.length),u=0;u<J.length;u++)A.push(J[u])}else if(arguments.length===4)for(f=A.slice(arguments[1],arguments[2]),b=arguments[3],E=function(at,yt){return b.compare(at,yt)},f.sort(E),J=A.slice(0,arguments[1]).concat(f,A.slice(arguments[2],A.length)),A.splice(0,A.length),u=0;u<J.length;u++)A.push(J[u])},Qe.asList=function(u){for(var f=new $t,b=0,E=u.length;b<E;b++)f.add(u[b]);return f};var se=function(){},ve={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};ve.P.get=function(){return 0},ve.L.get=function(){return 1},ve.A.get=function(){return 2},ve.FALSE.get=function(){return-1},ve.TRUE.get=function(){return-2},ve.DONTCARE.get=function(){return-3},ve.SYM_FALSE.get=function(){return"F"},ve.SYM_TRUE.get=function(){return"T"},ve.SYM_DONTCARE.get=function(){return"*"},ve.SYM_P.get=function(){return"0"},ve.SYM_L.get=function(){return"1"},ve.SYM_A.get=function(){return"2"},se.prototype.interfaces_=function(){return[]},se.prototype.getClass=function(){return se},se.toDimensionSymbol=function(u){switch(u){case se.FALSE:return se.SYM_FALSE;case se.TRUE:return se.SYM_TRUE;case se.DONTCARE:return se.SYM_DONTCARE;case se.P:return se.SYM_P;case se.L:return se.SYM_L;case se.A:return se.SYM_A}throw new S("Unknown dimension value: "+u)},se.toDimensionValue=function(u){switch(F.toUpperCase(u)){case se.SYM_FALSE:return se.FALSE;case se.SYM_TRUE:return se.TRUE;case se.SYM_DONTCARE:return se.DONTCARE;case se.SYM_P:return se.P;case se.SYM_L:return se.L;case se.SYM_A:return se.A}throw new S("Unknown dimension symbol: "+u)},Object.defineProperties(se,ve);var $e=function(){};$e.prototype.filter=function(u){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ie=function(){};Ie.prototype.filter=function(u,f){},Ie.prototype.isDone=function(){},Ie.prototype.isGeometryChanged=function(){},Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie};var fe=function(u){function f(E,A){if(u.call(this,A),this._geometries=E||[],u.hasNullElements(this._geometries))throw new S("geometries must not contain null elements")}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){for(var E=new wt,A=0;A<this._geometries.length;A++)E.expandToInclude(this._geometries[A].getEnvelopeInternal());return E},f.prototype.getGeometryN=function(E){return this._geometries[E]},f.prototype.getSortIndex=function(){return u.SORTINDEX_GEOMETRYCOLLECTION},f.prototype.getCoordinates=function(){for(var E=new Array(this.getNumPoints()).fill(null),A=-1,J=0;J<this._geometries.length;J++)for(var at=this._geometries[J].getCoordinates(),yt=0;yt<at.length;yt++)E[++A]=at[yt];return E},f.prototype.getArea=function(){for(var E=0,A=0;A<this._geometries.length;A++)E+=this._geometries[A].getArea();return E},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],A=arguments[1];if(!this.isEquivalentClass(E))return!1;var J=E;if(this._geometries.length!==J._geometries.length)return!1;for(var at=0;at<this._geometries.length;at++)if(!this._geometries[at].equalsExact(J._geometries[at],A))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){for(var E=0;E<this._geometries.length;E++)this._geometries[E].normalize();Qe.sort(this._geometries)},f.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},f.prototype.getBoundaryDimension=function(){for(var E=se.FALSE,A=0;A<this._geometries.length;A++)E=Math.max(E,this._geometries[A].getBoundaryDimension());return E},f.prototype.getDimension=function(){for(var E=se.FALSE,A=0;A<this._geometries.length;A++)E=Math.max(E,this._geometries[A].getDimension());return E},f.prototype.getLength=function(){for(var E=0,A=0;A<this._geometries.length;A++)E+=this._geometries[A].getLength();return E},f.prototype.getNumPoints=function(){for(var E=0,A=0;A<this._geometries.length;A++)E+=this._geometries[A].getNumPoints();return E},f.prototype.getNumGeometries=function(){return this._geometries.length},f.prototype.reverse=function(){for(var E=this._geometries.length,A=new Array(E).fill(null),J=0;J<this._geometries.length;J++)A[J]=this._geometries[J].reverse();return this.getFactory().createGeometryCollection(A)},f.prototype.compareToSameClass=function(){if(arguments.length===1){var E=arguments[0],A=new g(Qe.asList(this._geometries)),J=new g(Qe.asList(E._geometries));return this.compare(A,J)}if(arguments.length===2){for(var at=arguments[0],yt=arguments[1],St=at,Bt=this.getNumGeometries(),Yt=St.getNumGeometries(),ee=0;ee<Bt&&ee<Yt;){var xe=this.getGeometryN(ee),Me=St.getGeometryN(ee),Be=xe.compareToSameClass(Me,yt);if(Be!==0)return Be;ee++}return ee<Bt?1:ee<Yt?-1:0}},f.prototype.apply=function(){if(w(arguments[0],ie))for(var E=arguments[0],A=0;A<this._geometries.length;A++)this._geometries[A].apply(E);else if(w(arguments[0],Ie)){var J=arguments[0];if(this._geometries.length===0)return null;for(var at=0;at<this._geometries.length&&(this._geometries[at].apply(J),!J.isDone());at++);J.isGeometryChanged()&&this.geometryChanged()}else if(w(arguments[0],$e)){var yt=arguments[0];yt.filter(this);for(var St=0;St<this._geometries.length;St++)this._geometries[St].apply(yt)}else if(w(arguments[0],zt)){var Bt=arguments[0];Bt.filter(this);for(var Yt=0;Yt<this._geometries.length;Yt++)this._geometries[Yt].apply(Bt)}},f.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Q.shouldNeverReachHere(),null},f.prototype.clone=function(){var E=u.prototype.clone.call(this);E._geometries=new Array(this._geometries.length).fill(null);for(var A=0;A<this._geometries.length;A++)E._geometries[A]=this._geometries[A].clone();return E},f.prototype.getGeometryType=function(){return"GeometryCollection"},f.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),A=0;A<E.length;A++)E[A]=this._geometries[A].copy();return new f(E,this._factory)},f.prototype.isEmpty=function(){for(var E=0;E<this._geometries.length;E++)if(!this._geometries[E].isEmpty())return!1;return!0},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(f,b),f}(Gt),Ye=function(u){function f(){u.apply(this,arguments)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTILINESTRING},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],A=arguments[1];return!!this.isEquivalentClass(E)&&u.prototype.equalsExact.call(this,E,A)}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return this.isClosed()?se.FALSE:0},f.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var E=0;E<this._geometries.length;E++)if(!this._geometries[E].isClosed())return!1;return!0},f.prototype.getDimension=function(){return 1},f.prototype.reverse=function(){for(var E=this._geometries.length,A=new Array(E).fill(null),J=0;J<this._geometries.length;J++)A[E-1-J]=this._geometries[J].reverse();return this.getFactory().createMultiLineString(A)},f.prototype.getBoundary=function(){return new Ve(this).getBoundary()},f.prototype.getGeometryType=function(){return"MultiLineString"},f.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),A=0;A<E.length;A++)E[A]=this._geometries[A].copy();return new f(E,this._factory)},f.prototype.interfaces_=function(){return[jt]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(f,b),f}(fe),Ve=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var u=arguments[0],f=Xt.MOD2_BOUNDARY_RULE;this._geom=u,this._geomFact=u.getFactory(),this._bnRule=f}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this._geom=b,this._geomFact=b.getFactory(),this._bnRule=E}};Ve.prototype.boundaryMultiLineString=function(u){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var f=this.computeBoundaryCoordinates(u);return f.length===1?this._geomFact.createPoint(f[0]):this._geomFact.createMultiPointFromCoords(f)},Ve.prototype.getBoundary=function(){return this._geom instanceof oi?this.boundaryLineString(this._geom):this._geom instanceof Ye?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ve.prototype.boundaryLineString=function(u){return this._geom.isEmpty()?this.getEmptyMultiPoint():u.isClosed()?this._bnRule.isInBoundary(2)?u.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([u.getStartPoint(),u.getEndPoint()])},Ve.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ve.prototype.computeBoundaryCoordinates=function(u){var f=new $t;this._endpointMap=new d;for(var b=0;b<u.getNumGeometries();b++){var E=u.getGeometryN(b);E.getNumPoints()!==0&&(this.addEndpoint(E.getCoordinateN(0)),this.addEndpoint(E.getCoordinateN(E.getNumPoints()-1)))}for(var A=this._endpointMap.entrySet().iterator();A.hasNext();){var J=A.next(),at=J.getValue().count;this._bnRule.isInBoundary(at)&&f.add(J.getKey())}return ue.toCoordinateArray(f)},Ve.prototype.addEndpoint=function(u){var f=this._endpointMap.get(u);f===null&&(f=new ii,this._endpointMap.put(u,f)),f.count++},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.getBoundary=function(){if(arguments.length===1){var u=arguments[0];return new Ve(u).getBoundary()}if(arguments.length===2){var f=arguments[0],b=arguments[1];return new Ve(f,b).getBoundary()}};var ii=function(){this.count=null};ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii};var Ke=function(){},pr={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke},Ke.chars=function(u,f){for(var b=new Array(f).fill(null),E=0;E<f;E++)b[E]=u;return String(b)},Ke.getStackTrace=function(){if(arguments.length===1){var u=arguments[0],f=new function(){},b=new function(){}(f);return u.printStackTrace(b),f.toString()}if(arguments.length===2){for(var E=arguments[0],A=arguments[1],J="",at=new function(){}(new function(){}(Ke.getStackTrace(E))),yt=0;yt<A;yt++)try{J+=at.readLine()+Ke.NEWLINE}catch(St){if(!(St instanceof m))throw St;Q.shouldNeverReachHere()}return J}},Ke.split=function(u,f){for(var b=f.length,E=new $t,A=""+u,J=A.indexOf(f);J>=0;){var at=A.substring(0,J);E.add(at),J=(A=A.substring(J+b)).indexOf(f)}A.length>0&&E.add(A);for(var yt=new Array(E.size()).fill(null),St=0;St<yt.length;St++)yt[St]=E.get(St);return yt},Ke.toString=function(){if(arguments.length===1){var u=arguments[0];return Ke.SIMPLE_ORDINATE_FORMAT.format(u)}},Ke.spaces=function(u){return Ke.chars(" ",u)},pr.NEWLINE.get=function(){return rt.getProperty("line.separator")},pr.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Ke,pr);var Je=function(){};Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.copyCoord=function(u,f,b,E){for(var A=Math.min(u.getDimension(),b.getDimension()),J=0;J<A;J++)b.setOrdinate(E,J,u.getOrdinate(f,J))},Je.isRing=function(u){var f=u.size();return f===0||!(f<=3)&&u.getOrdinate(0,$.X)===u.getOrdinate(f-1,$.X)&&u.getOrdinate(0,$.Y)===u.getOrdinate(f-1,$.Y)},Je.isEqual=function(u,f){var b=u.size();if(b!==f.size())return!1;for(var E=Math.min(u.getDimension(),f.getDimension()),A=0;A<b;A++)for(var J=0;J<E;J++){var at=u.getOrdinate(A,J),yt=f.getOrdinate(A,J);if(u.getOrdinate(A,J)!==f.getOrdinate(A,J)&&(!O.isNaN(at)||!O.isNaN(yt)))return!1}return!0},Je.extend=function(u,f,b){var E=u.create(b,f.getDimension()),A=f.size();if(Je.copy(f,0,E,0,A),A>0)for(var J=A;J<b;J++)Je.copy(f,A-1,E,J,1);return E},Je.reverse=function(u){for(var f=u.size()-1,b=Math.trunc(f/2),E=0;E<=b;E++)Je.swap(u,E,f-E)},Je.swap=function(u,f,b){if(f===b)return null;for(var E=0;E<u.getDimension();E++){var A=u.getOrdinate(f,E);u.setOrdinate(f,E,u.getOrdinate(b,E)),u.setOrdinate(b,E,A)}},Je.copy=function(u,f,b,E,A){for(var J=0;J<A;J++)Je.copyCoord(u,f+J,b,E+J)},Je.toString=function(){if(arguments.length===1){var u=arguments[0],f=u.size();if(f===0)return"()";var b=u.getDimension(),E=new T;E.append("(");for(var A=0;A<f;A++){A>0&&E.append(" ");for(var J=0;J<b;J++)J>0&&E.append(","),E.append(Ke.toString(u.getOrdinate(A,J)))}return E.append(")"),E.toString()}},Je.ensureValidRing=function(u,f){var b=f.size();return b===0?f:b<=3?Je.createClosedRing(u,f,4):f.getOrdinate(0,$.X)===f.getOrdinate(b-1,$.X)&&f.getOrdinate(0,$.Y)===f.getOrdinate(b-1,$.Y)?f:Je.createClosedRing(u,f,b+1)},Je.createClosedRing=function(u,f,b){var E=u.create(b,f.getDimension()),A=f.size();Je.copy(f,0,E,0,A);for(var J=A;J<b;J++)Je.copy(f,0,E,J,1);return E};var oi=function(u){function f(E,A){u.call(this,A),this._points=null,this.init(E)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new wt:this._points.expandEnvelope(new wt)},f.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},f.prototype.getSortIndex=function(){return u.SORTINDEX_LINESTRING},f.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],A=arguments[1];if(!this.isEquivalentClass(E))return!1;var J=E;if(this._points.size()!==J._points.size())return!1;for(var at=0;at<this._points.size();at++)if(!this.equal(this._points.getCoordinate(at),J._points.getCoordinate(at),A))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){for(var E=0;E<Math.trunc(this._points.size()/2);E++){var A=this._points.size()-1-E;if(!this._points.getCoordinate(E).equals(this._points.getCoordinate(A)))return this._points.getCoordinate(E).compareTo(this._points.getCoordinate(A))>0&&Je.reverse(this._points),null}},f.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},f.prototype.getBoundaryDimension=function(){return this.isClosed()?se.FALSE:0},f.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},f.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},f.prototype.getDimension=function(){return 1},f.prototype.getLength=function(){return Et.computeLength(this._points)},f.prototype.getNumPoints=function(){return this._points.size()},f.prototype.reverse=function(){var E=this._points.copy();return Je.reverse(E),this.getFactory().createLineString(E)},f.prototype.compareToSameClass=function(){if(arguments.length===1){for(var E=arguments[0],A=0,J=0;A<this._points.size()&&J<E._points.size();){var at=this._points.getCoordinate(A).compareTo(E._points.getCoordinate(J));if(at!==0)return at;A++,J++}return A<this._points.size()?1:J<E._points.size()?-1:0}if(arguments.length===2){var yt=arguments[0];return arguments[1].compare(this._points,yt._points)}},f.prototype.apply=function(){if(w(arguments[0],ie))for(var E=arguments[0],A=0;A<this._points.size();A++)E.filter(this._points.getCoordinate(A));else if(w(arguments[0],Ie)){var J=arguments[0];if(this._points.size()===0)return null;for(var at=0;at<this._points.size()&&(J.filter(this._points,at),!J.isDone());at++);J.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],$e)?arguments[0].filter(this):w(arguments[0],zt)&&arguments[0].filter(this)},f.prototype.getBoundary=function(){return new Ve(this).getBoundary()},f.prototype.isEquivalentClass=function(E){return E instanceof f},f.prototype.clone=function(){var E=u.prototype.clone.call(this);return E._points=this._points.clone(),E},f.prototype.getCoordinateN=function(E){return this._points.getCoordinate(E)},f.prototype.getGeometryType=function(){return"LineString"},f.prototype.copy=function(){return new f(this._points.copy(),this._factory)},f.prototype.getCoordinateSequence=function(){return this._points},f.prototype.isEmpty=function(){return this._points.size()===0},f.prototype.init=function(E){if(E===null&&(E=this.getFactory().getCoordinateSequenceFactory().create([])),E.size()===1)throw new S("Invalid number of points in LineString (found "+E.size()+" - must be 0 or >= 2)");this._points=E},f.prototype.isCoordinate=function(E){for(var A=0;A<this._points.size();A++)if(this._points.getCoordinate(A).equals(E))return!0;return!1},f.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},f.prototype.getPointN=function(E){return this.getFactory().createPoint(this._points.getCoordinate(E))},f.prototype.interfaces_=function(){return[jt]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(f,b),f}(Gt),cr=function(){};cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var ki=function(u){function f(E,A){u.call(this,A),this._coordinates=E||null,this.init(this._coordinates)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new wt;var E=new wt;return E.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),E},f.prototype.getSortIndex=function(){return u.SORTINDEX_POINT},f.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],A=arguments[1];return!!this.isEquivalentClass(E)&&(!(!this.isEmpty()||!E.isEmpty())||this.isEmpty()===E.isEmpty()&&this.equal(E.getCoordinate(),this.getCoordinate(),A))}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){},f.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},f.prototype.getBoundaryDimension=function(){return se.FALSE},f.prototype.getDimension=function(){return 0},f.prototype.getNumPoints=function(){return this.isEmpty()?0:1},f.prototype.reverse=function(){return this.copy()},f.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},f.prototype.compareToSameClass=function(){if(arguments.length===1){var E=arguments[0];return this.getCoordinate().compareTo(E.getCoordinate())}if(arguments.length===2){var A=arguments[0];return arguments[1].compare(this._coordinates,A._coordinates)}},f.prototype.apply=function(){if(w(arguments[0],ie)){var E=arguments[0];if(this.isEmpty())return null;E.filter(this.getCoordinate())}else if(w(arguments[0],Ie)){var A=arguments[0];if(this.isEmpty())return null;A.filter(this._coordinates,0),A.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],$e)?arguments[0].filter(this):w(arguments[0],zt)&&arguments[0].filter(this)},f.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},f.prototype.clone=function(){var E=u.prototype.clone.call(this);return E._coordinates=this._coordinates.clone(),E},f.prototype.getGeometryType=function(){return"Point"},f.prototype.copy=function(){return new f(this._coordinates.copy(),this._factory)},f.prototype.getCoordinateSequence=function(){return this._coordinates},f.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},f.prototype.isEmpty=function(){return this._coordinates.size()===0},f.prototype.init=function(E){E===null&&(E=this.getFactory().getCoordinateSequenceFactory().create([])),Q.isTrue(E.size()<=1),this._coordinates=E},f.prototype.isSimple=function(){return!0},f.prototype.interfaces_=function(){return[cr]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(f,b),f}(Gt),Tt=function(){};Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt};var Ht=function(u){function f(E,A,J){if(u.call(this,J),this._shell=null,this._holes=null,E===null&&(E=this.getFactory().createLinearRing()),A===null&&(A=[]),u.hasNullElements(A))throw new S("holes must not contain null elements");if(E.isEmpty()&&u.hasNonEmptyElements(A))throw new S("shell is empty but holes are not");this._shell=E,this._holes=A}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},f.prototype.getSortIndex=function(){return u.SORTINDEX_POLYGON},f.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var E=new Array(this.getNumPoints()).fill(null),A=-1,J=this._shell.getCoordinates(),at=0;at<J.length;at++)E[++A]=J[at];for(var yt=0;yt<this._holes.length;yt++)for(var St=this._holes[yt].getCoordinates(),Bt=0;Bt<St.length;Bt++)E[++A]=St[Bt];return E},f.prototype.getArea=function(){var E=0;E+=Math.abs(Et.signedArea(this._shell.getCoordinateSequence()));for(var A=0;A<this._holes.length;A++)E-=Math.abs(Et.signedArea(this._holes[A].getCoordinateSequence()));return E},f.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var E=this._shell.getCoordinateSequence(),A=this.getEnvelopeInternal(),J=0;J<5;J++){var at=E.getX(J);if(at!==A.getMinX()&&at!==A.getMaxX())return!1;var yt=E.getY(J);if(yt!==A.getMinY()&&yt!==A.getMaxY())return!1}for(var St=E.getX(0),Bt=E.getY(0),Yt=1;Yt<=4;Yt++){var ee=E.getX(Yt),xe=E.getY(Yt);if(ee!==St==(xe!==Bt))return!1;St=ee,Bt=xe}return!0},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],A=arguments[1];if(!this.isEquivalentClass(E))return!1;var J=E,at=this._shell,yt=J._shell;if(!at.equalsExact(yt,A)||this._holes.length!==J._holes.length)return!1;for(var St=0;St<this._holes.length;St++)if(!this._holes[St].equalsExact(J._holes[St],A))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){if(arguments.length===0){this.normalize(this._shell,!0);for(var E=0;E<this._holes.length;E++)this.normalize(this._holes[E],!1);Qe.sort(this._holes)}else if(arguments.length===2){var A=arguments[0],J=arguments[1];if(A.isEmpty())return null;var at=new Array(A.getCoordinates().length-1).fill(null);rt.arraycopy(A.getCoordinates(),0,at,0,at.length);var yt=ue.minCoordinate(A.getCoordinates());ue.scroll(at,yt),rt.arraycopy(at,0,A.getCoordinates(),0,at.length),A.getCoordinates()[at.length]=at[0],Et.isCCW(A.getCoordinates())===J&&ue.reverse(A.getCoordinates())}},f.prototype.getCoordinate=function(){return this._shell.getCoordinate()},f.prototype.getNumInteriorRing=function(){return this._holes.length},f.prototype.getBoundaryDimension=function(){return 1},f.prototype.getDimension=function(){return 2},f.prototype.getLength=function(){var E=0;E+=this._shell.getLength();for(var A=0;A<this._holes.length;A++)E+=this._holes[A].getLength();return E},f.prototype.getNumPoints=function(){for(var E=this._shell.getNumPoints(),A=0;A<this._holes.length;A++)E+=this._holes[A].getNumPoints();return E},f.prototype.reverse=function(){var E=this.copy();E._shell=this._shell.copy().reverse(),E._holes=new Array(this._holes.length).fill(null);for(var A=0;A<this._holes.length;A++)E._holes[A]=this._holes[A].copy().reverse();return E},f.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},f.prototype.compareToSameClass=function(){if(arguments.length===1){var E=arguments[0],A=this._shell,J=E._shell;return A.compareToSameClass(J)}if(arguments.length===2){var at=arguments[0],yt=arguments[1],St=at,Bt=this._shell,Yt=St._shell,ee=Bt.compareToSameClass(Yt,yt);if(ee!==0)return ee;for(var xe=this.getNumInteriorRing(),Me=St.getNumInteriorRing(),Be=0;Be<xe&&Be<Me;){var qe=this.getInteriorRingN(Be),gr=St.getInteriorRingN(Be),qr=qe.compareToSameClass(gr,yt);if(qr!==0)return qr;Be++}return Be<xe?1:Be<Me?-1:0}},f.prototype.apply=function(E){if(w(E,ie)){this._shell.apply(E);for(var A=0;A<this._holes.length;A++)this._holes[A].apply(E)}else if(w(E,Ie)){if(this._shell.apply(E),!E.isDone())for(var J=0;J<this._holes.length&&(this._holes[J].apply(E),!E.isDone());J++);E.isGeometryChanged()&&this.geometryChanged()}else if(w(E,$e))E.filter(this);else if(w(E,zt)){E.filter(this),this._shell.apply(E);for(var at=0;at<this._holes.length;at++)this._holes[at].apply(E)}},f.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var E=new Array(this._holes.length+1).fill(null);E[0]=this._shell;for(var A=0;A<this._holes.length;A++)E[A+1]=this._holes[A];return E.length<=1?this.getFactory().createLinearRing(E[0].getCoordinateSequence()):this.getFactory().createMultiLineString(E)},f.prototype.clone=function(){var E=u.prototype.clone.call(this);E._shell=this._shell.clone(),E._holes=new Array(this._holes.length).fill(null);for(var A=0;A<this._holes.length;A++)E._holes[A]=this._holes[A].clone();return E},f.prototype.getGeometryType=function(){return"Polygon"},f.prototype.copy=function(){for(var E=this._shell.copy(),A=new Array(this._holes.length).fill(null),J=0;J<A.length;J++)A[J]=this._holes[J].copy();return new f(E,A,this._factory)},f.prototype.getExteriorRing=function(){return this._shell},f.prototype.isEmpty=function(){return this._shell.isEmpty()},f.prototype.getInteriorRingN=function(E){return this._holes[E]},f.prototype.interfaces_=function(){return[Tt]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(f,b),f}(Gt),re=function(u){function f(){u.apply(this,arguments)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTIPOINT},f.prototype.isValid=function(){return!0},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],A=arguments[1];return!!this.isEquivalentClass(E)&&u.prototype.equalsExact.call(this,E,A)}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.getCoordinate=function(){if(arguments.length===1){var E=arguments[0];return this._geometries[E].getCoordinate()}return u.prototype.getCoordinate.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return se.FALSE},f.prototype.getDimension=function(){return 0},f.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},f.prototype.getGeometryType=function(){return"MultiPoint"},f.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),A=0;A<E.length;A++)E[A]=this._geometries[A].copy();return new f(E,this._factory)},f.prototype.interfaces_=function(){return[cr]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(f,b),f}(fe),Qt=function(u){function f(E,A){E instanceof G&&A instanceof Se&&(E=A.getCoordinateSequenceFactory().create(E)),u.call(this,E,A),this.validateConstruction()}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return Gt.SORTINDEX_LINEARRING},f.prototype.getBoundaryDimension=function(){return se.FALSE},f.prototype.isClosed=function(){return!!this.isEmpty()||u.prototype.isClosed.call(this)},f.prototype.reverse=function(){var E=this._points.copy();return Je.reverse(E),this.getFactory().createLinearRing(E)},f.prototype.validateConstruction=function(){if(!this.isEmpty()&&!u.prototype.isClosed.call(this))throw new S("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<f.MINIMUM_VALID_SIZE)throw new S("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},f.prototype.getGeometryType=function(){return"LinearRing"},f.prototype.copy=function(){return new f(this._points.copy(),this._factory)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},b.MINIMUM_VALID_SIZE.get=function(){return 4},b.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(f,b),f}(oi),he=function(u){function f(){u.apply(this,arguments)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTIPOLYGON},f.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],A=arguments[1];return!!this.isEquivalentClass(E)&&u.prototype.equalsExact.call(this,E,A)}return u.prototype.equalsExact.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return 1},f.prototype.getDimension=function(){return 2},f.prototype.reverse=function(){for(var E=this._geometries.length,A=new Array(E).fill(null),J=0;J<this._geometries.length;J++)A[J]=this._geometries[J].reverse();return this.getFactory().createMultiPolygon(A)},f.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var E=new $t,A=0;A<this._geometries.length;A++)for(var J=this._geometries[A].getBoundary(),at=0;at<J.getNumGeometries();at++)E.add(J.getGeometryN(at));var yt=new Array(E.size()).fill(null);return this.getFactory().createMultiLineString(E.toArray(yt))},f.prototype.getGeometryType=function(){return"MultiPolygon"},f.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),A=0;A<E.length;A++)E[A]=this._geometries[A].copy();return new f(E,this._factory)},f.prototype.interfaces_=function(){return[Tt]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(f,b),f}(fe),Ee=function(u){this._factory=u||null,this._isUserDataCopied=!1},Ae={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Ee.prototype.setCopyUserData=function(u){this._isUserDataCopied=u},Ee.prototype.edit=function(u,f){if(u===null)return null;var b=this.editInternal(u,f);return this._isUserDataCopied&&b.setUserData(u.getUserData()),b},Ee.prototype.editInternal=function(u,f){return this._factory===null&&(this._factory=u.getFactory()),u instanceof fe?this.editGeometryCollection(u,f):u instanceof Ht?this.editPolygon(u,f):u instanceof ki?f.edit(u,this._factory):u instanceof oi?f.edit(u,this._factory):(Q.shouldNeverReachHere("Unsupported Geometry class: "+u.getClass().getName()),null)},Ee.prototype.editGeometryCollection=function(u,f){for(var b=f.edit(u,this._factory),E=new $t,A=0;A<b.getNumGeometries();A++){var J=this.edit(b.getGeometryN(A),f);J===null||J.isEmpty()||E.add(J)}return b.getClass()===re?this._factory.createMultiPoint(E.toArray([])):b.getClass()===Ye?this._factory.createMultiLineString(E.toArray([])):b.getClass()===he?this._factory.createMultiPolygon(E.toArray([])):this._factory.createGeometryCollection(E.toArray([]))},Ee.prototype.editPolygon=function(u,f){var b=f.edit(u,this._factory);if(b===null&&(b=this._factory.createPolygon(null)),b.isEmpty())return b;var E=this.edit(b.getExteriorRing(),f);if(E===null||E.isEmpty())return this._factory.createPolygon();for(var A=new $t,J=0;J<b.getNumInteriorRing();J++){var at=this.edit(b.getInteriorRingN(J),f);at===null||at.isEmpty()||A.add(at)}return this._factory.createPolygon(E,A.toArray([]))},Ee.prototype.interfaces_=function(){return[]},Ee.prototype.getClass=function(){return Ee},Ee.GeometryEditorOperation=function(){},Ae.NoOpGeometryOperation.get=function(){return ti},Ae.CoordinateOperation.get=function(){return Ue},Ae.CoordinateSequenceOperation.get=function(){return we},Object.defineProperties(Ee,Ae);var ti=function(){};ti.prototype.edit=function(u,f){return u},ti.prototype.interfaces_=function(){return[Ee.GeometryEditorOperation]},ti.prototype.getClass=function(){return ti};var Ue=function(){};Ue.prototype.edit=function(u,f){var b=this.editCoordinates(u.getCoordinates(),u);return b===null?u:u instanceof Qt?f.createLinearRing(b):u instanceof oi?f.createLineString(b):u instanceof ki?b.length>0?f.createPoint(b[0]):f.createPoint():u},Ue.prototype.interfaces_=function(){return[Ee.GeometryEditorOperation]},Ue.prototype.getClass=function(){return Ue};var we=function(){};we.prototype.edit=function(u,f){return u instanceof Qt?f.createLinearRing(this.edit(u.getCoordinateSequence(),u)):u instanceof oi?f.createLineString(this.edit(u.getCoordinateSequence(),u)):u instanceof ki?f.createPoint(this.edit(u.getCoordinateSequence(),u)):u},we.prototype.interfaces_=function(){return[Ee.GeometryEditorOperation]},we.prototype.getClass=function(){return we};var pe=function(){if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var u=arguments[0];this._coordinates=new Array(u).fill(null);for(var f=0;f<u;f++)this._coordinates[f]=new G}else if(w(arguments[0],$)){var b=arguments[0];if(b===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=b.getDimension(),this._coordinates=new Array(b.size()).fill(null);for(var E=0;E<this._coordinates.length;E++)this._coordinates[E]=b.getCoordinateCopy(E)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var A=arguments[0],J=arguments[1];this._coordinates=A,this._dimension=J,A===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var at=arguments[0],yt=arguments[1];this._coordinates=new Array(at).fill(null),this._dimension=yt;for(var St=0;St<at;St++)this._coordinates[St]=new G}}},yi={serialVersionUID:{configurable:!0}};pe.prototype.setOrdinate=function(u,f,b){switch(f){case $.X:this._coordinates[u].x=b;break;case $.Y:this._coordinates[u].y=b;break;case $.Z:this._coordinates[u].z=b;break;default:throw new S("invalid ordinateIndex")}},pe.prototype.size=function(){return this._coordinates.length},pe.prototype.getOrdinate=function(u,f){switch(f){case $.X:return this._coordinates[u].x;case $.Y:return this._coordinates[u].y;case $.Z:return this._coordinates[u].z}return O.NaN},pe.prototype.getCoordinate=function(){if(arguments.length===1){var u=arguments[0];return this._coordinates[u]}if(arguments.length===2){var f=arguments[0],b=arguments[1];b.x=this._coordinates[f].x,b.y=this._coordinates[f].y,b.z=this._coordinates[f].z}},pe.prototype.getCoordinateCopy=function(u){return new G(this._coordinates[u])},pe.prototype.getDimension=function(){return this._dimension},pe.prototype.getX=function(u){return this._coordinates[u].x},pe.prototype.clone=function(){for(var u=new Array(this.size()).fill(null),f=0;f<this._coordinates.length;f++)u[f]=this._coordinates[f].clone();return new pe(u,this._dimension)},pe.prototype.expandEnvelope=function(u){for(var f=0;f<this._coordinates.length;f++)u.expandToInclude(this._coordinates[f]);return u},pe.prototype.copy=function(){for(var u=new Array(this.size()).fill(null),f=0;f<this._coordinates.length;f++)u[f]=this._coordinates[f].copy();return new pe(u,this._dimension)},pe.prototype.toString=function(){if(this._coordinates.length>0){var u=new T(17*this._coordinates.length);u.append("("),u.append(this._coordinates[0]);for(var f=1;f<this._coordinates.length;f++)u.append(", "),u.append(this._coordinates[f]);return u.append(")"),u.toString()}return"()"},pe.prototype.getY=function(u){return this._coordinates[u].y},pe.prototype.toCoordinateArray=function(){return this._coordinates},pe.prototype.interfaces_=function(){return[$,t]},pe.prototype.getClass=function(){return pe},yi.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(pe,yi);var ri=function(){},li={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ri.prototype.readResolve=function(){return ri.instance()},ri.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new pe(u)}if(w(arguments[0],$)){var f=arguments[0];return new pe(f)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];return E>3&&(E=3),E<2?new pe(b):new pe(b,E)}},ri.prototype.interfaces_=function(){return[B,t]},ri.prototype.getClass=function(){return ri},ri.instance=function(){return ri.instanceObject},li.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},li.instanceObject.get=function(){return new ri},Object.defineProperties(ri,li);var wi=function(u){function f(){u.call(this),this.map_=new Map}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.get=function(b){return this.map_.get(b)||null},f.prototype.put=function(b,E){return this.map_.set(b,E),E},f.prototype.values=function(){for(var b=new $t,E=this.map_.values(),A=E.next();!A.done;)b.add(A.value),A=E.next();return b},f.prototype.entrySet=function(){var b=new We;return this.map_.entries().forEach(function(E){return b.add(E)}),b},f.prototype.size=function(){return this.map_.size()},f}(Oe),me=function u(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=u.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof br){var f=arguments[0];this._modelType=f,f===u.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var b=arguments[0];this._modelType=u.FIXED,this.setScale(b)}else if(arguments[0]instanceof u){var E=arguments[0];this._modelType=E._modelType,this._scale=E._scale}}},ui={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};me.prototype.equals=function(u){if(!(u instanceof me))return!1;var f=u;return this._modelType===f._modelType&&this._scale===f._scale},me.prototype.compareTo=function(u){var f=u,b=this.getMaximumSignificantDigits(),E=f.getMaximumSignificantDigits();return new R(b).compareTo(new R(E))},me.prototype.getScale=function(){return this._scale},me.prototype.isFloating=function(){return this._modelType===me.FLOATING||this._modelType===me.FLOATING_SINGLE},me.prototype.getType=function(){return this._modelType},me.prototype.toString=function(){var u="UNKNOWN";return this._modelType===me.FLOATING?u="Floating":this._modelType===me.FLOATING_SINGLE?u="Floating-Single":this._modelType===me.FIXED&&(u="Fixed (Scale="+this.getScale()+")"),u},me.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var u=arguments[0];return O.isNaN(u)||this._modelType===me.FLOATING_SINGLE?u:this._modelType===me.FIXED?Math.round(u*this._scale)/this._scale:u}if(arguments[0]instanceof G){var f=arguments[0];if(this._modelType===me.FLOATING)return null;f.x=this.makePrecise(f.x),f.y=this.makePrecise(f.y)}},me.prototype.getMaximumSignificantDigits=function(){var u=16;return this._modelType===me.FLOATING?u=16:this._modelType===me.FLOATING_SINGLE?u=6:this._modelType===me.FIXED&&(u=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),u},me.prototype.setScale=function(u){this._scale=Math.abs(u)},me.prototype.interfaces_=function(){return[t,U]},me.prototype.getClass=function(){return me},me.mostPrecise=function(u,f){return u.compareTo(f)>=0?u:f},ui.serialVersionUID.get=function(){return 7777263578777804e3},ui.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(me,ui);var br=function u(f){this._name=f||null,u.nameToTypeMap.put(f,this)},Xr={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};br.prototype.readResolve=function(){return br.nameToTypeMap.get(this._name)},br.prototype.toString=function(){return this._name},br.prototype.interfaces_=function(){return[t]},br.prototype.getClass=function(){return br},Xr.serialVersionUID.get=function(){return-552860263173159e4},Xr.nameToTypeMap.get=function(){return new wi},Object.defineProperties(br,Xr),me.Type=br,me.FIXED=new br("FIXED"),me.FLOATING=new br("FLOATING"),me.FLOATING_SINGLE=new br("FLOATING SINGLE");var Se=function u(){this._precisionModel=new me,this._SRID=0,this._coordinateSequenceFactory=u.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?w(arguments[0],B)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof me&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Ln={serialVersionUID:{configurable:!0}};Se.prototype.toGeometry=function(u){return u.isNull()?this.createPoint(null):u.getMinX()===u.getMaxX()&&u.getMinY()===u.getMaxY()?this.createPoint(new G(u.getMinX(),u.getMinY())):u.getMinX()===u.getMaxX()||u.getMinY()===u.getMaxY()?this.createLineString([new G(u.getMinX(),u.getMinY()),new G(u.getMaxX(),u.getMaxY())]):this.createPolygon(this.createLinearRing([new G(u.getMinX(),u.getMinY()),new G(u.getMinX(),u.getMaxY()),new G(u.getMaxX(),u.getMaxY()),new G(u.getMaxX(),u.getMinY()),new G(u.getMinX(),u.getMinY())]),null)},Se.prototype.createLineString=function(u){return u?u instanceof Array?new oi(this.getCoordinateSequenceFactory().create(u),this):w(u,$)?new oi(u,this):void 0:new oi(this.getCoordinateSequenceFactory().create([]),this)},Se.prototype.createMultiLineString=function(){if(arguments.length===0)return new Ye(null,this);if(arguments.length===1){var u=arguments[0];return new Ye(u,this)}},Se.prototype.buildGeometry=function(u){for(var f=null,b=!1,E=!1,A=u.iterator();A.hasNext();){var J=A.next(),at=J.getClass();f===null&&(f=at),at!==f&&(b=!0),J.isGeometryCollectionOrDerived()&&(E=!0)}if(f===null)return this.createGeometryCollection();if(b||E)return this.createGeometryCollection(Se.toGeometryArray(u));var yt=u.iterator().next();if(u.size()>1){if(yt instanceof Ht)return this.createMultiPolygon(Se.toPolygonArray(u));if(yt instanceof oi)return this.createMultiLineString(Se.toLineStringArray(u));if(yt instanceof ki)return this.createMultiPoint(Se.toPointArray(u));Q.shouldNeverReachHere("Unhandled class: "+yt.getClass().getName())}return yt},Se.prototype.createMultiPointFromCoords=function(u){return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)},Se.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof G){var u=arguments[0];return this.createPoint(u!==null?this.getCoordinateSequenceFactory().create([u]):null)}if(w(arguments[0],$)){var f=arguments[0];return new ki(f,this)}}},Se.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Se.prototype.createPolygon=function(){if(arguments.length===0)return new Ht(null,null,this);if(arguments.length===1){if(w(arguments[0],$)){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof Array){var f=arguments[0];return this.createPolygon(this.createLinearRing(f))}if(arguments[0]instanceof Qt){var b=arguments[0];return this.createPolygon(b,null)}}else if(arguments.length===2){var E=arguments[0],A=arguments[1];return new Ht(E,A,this)}},Se.prototype.getSRID=function(){return this._SRID},Se.prototype.createGeometryCollection=function(){if(arguments.length===0)return new fe(null,this);if(arguments.length===1){var u=arguments[0];return new fe(u,this)}},Se.prototype.createGeometry=function(u){return new Ee(this).edit(u,{edit:function(){if(arguments.length===2){var f=arguments[0];return this._coordinateSequenceFactory.create(f)}}})},Se.prototype.getPrecisionModel=function(){return this._precisionModel},Se.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLinearRing(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(w(arguments[0],$)){var f=arguments[0];return new Qt(f,this)}}},Se.prototype.createMultiPolygon=function(){if(arguments.length===0)return new he(null,this);if(arguments.length===1){var u=arguments[0];return new he(u,this)}},Se.prototype.createMultiPoint=function(){if(arguments.length===0)return new re(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new re(u,this)}if(arguments[0]instanceof Array){var f=arguments[0];return this.createMultiPoint(f!==null?this.getCoordinateSequenceFactory().create(f):null)}if(w(arguments[0],$)){var b=arguments[0];if(b===null)return this.createMultiPoint(new Array(0).fill(null));for(var E=new Array(b.size()).fill(null),A=0;A<b.size();A++){var J=this.getCoordinateSequenceFactory().create(1,b.getDimension());Je.copy(b,A,J,0,1),E[A]=this.createPoint(J)}return this.createMultiPoint(E)}}},Se.prototype.interfaces_=function(){return[t]},Se.prototype.getClass=function(){return Se},Se.toMultiPolygonArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toGeometryArray=function(u){if(u===null)return null;var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.getDefaultCoordinateSequenceFactory=function(){return ri.instance()},Se.toMultiLineStringArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toLineStringArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toMultiPointArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toLinearRingArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toPointArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.toPolygonArray=function(u){var f=new Array(u.size()).fill(null);return u.toArray(f)},Se.createPointFromInternalCoord=function(u,f){return f.getPrecisionModel().makePrecise(u),f.getFactory().createPoint(u)},Ln.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(Se,Ln);var Vn=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],ni=function(u){this.geometryFactory=u||new Se};ni.prototype.read=function(u){var f,b=(f=typeof u=="string"?JSON.parse(u):u).type;if(!ze[b])throw new Error("Unknown GeoJSON type: "+f.type);return Vn.indexOf(b)!==-1?ze[b].apply(this,[f.coordinates]):b==="GeometryCollection"?ze[b].apply(this,[f.geometries]):ze[b].apply(this,[f])},ni.prototype.write=function(u){var f=u.getGeometryType();if(!Tr[f])throw new Error("Geometry is not supported");return Tr[f].apply(this,[u])};var ze={Feature:function(u){var f={};for(var b in u)f[b]=u[b];if(u.geometry){var E=u.geometry.type;if(!ze[E])throw new Error("Unknown GeoJSON type: "+u.type);f.geometry=this.read(u.geometry)}return u.bbox&&(f.bbox=ze.bbox.apply(this,[u.bbox])),f},FeatureCollection:function(u){var f={};if(u.features){f.features=[];for(var b=0;b<u.features.length;++b)f.features.push(this.read(u.features[b]))}return u.bbox&&(f.bbox=this.parse.bbox.apply(this,[u.bbox])),f},coordinates:function(u){for(var f=[],b=0;b<u.length;++b){var E=u[b];f.push(new G(E[0],E[1]))}return f},bbox:function(u){return this.geometryFactory.createLinearRing([new G(u[0],u[1]),new G(u[2],u[1]),new G(u[2],u[3]),new G(u[0],u[3]),new G(u[0],u[1])])},Point:function(u){var f=new G(u[0],u[1]);return this.geometryFactory.createPoint(f)},MultiPoint:function(u){for(var f=[],b=0;b<u.length;++b)f.push(ze.Point.apply(this,[u[b]]));return this.geometryFactory.createMultiPoint(f)},LineString:function(u){var f=ze.coordinates.apply(this,[u]);return this.geometryFactory.createLineString(f)},MultiLineString:function(u){for(var f=[],b=0;b<u.length;++b)f.push(ze.LineString.apply(this,[u[b]]));return this.geometryFactory.createMultiLineString(f)},Polygon:function(u){for(var f=ze.coordinates.apply(this,[u[0]]),b=this.geometryFactory.createLinearRing(f),E=[],A=1;A<u.length;++A){var J=u[A],at=ze.coordinates.apply(this,[J]),yt=this.geometryFactory.createLinearRing(at);E.push(yt)}return this.geometryFactory.createPolygon(b,E)},MultiPolygon:function(u){for(var f=[],b=0;b<u.length;++b){var E=u[b];f.push(ze.Polygon.apply(this,[E]))}return this.geometryFactory.createMultiPolygon(f)},GeometryCollection:function(u){for(var f=[],b=0;b<u.length;++b){var E=u[b];f.push(this.read(E))}return this.geometryFactory.createGeometryCollection(f)}},Tr={coordinate:function(u){return[u.x,u.y]},Point:function(u){return{type:"Point",coordinates:Tr.coordinate.apply(this,[u.getCoordinate()])}},MultiPoint:function(u){for(var f=[],b=0;b<u._geometries.length;++b){var E=u._geometries[b],A=Tr.Point.apply(this,[E]);f.push(A.coordinates)}return{type:"MultiPoint",coordinates:f}},LineString:function(u){for(var f=[],b=u.getCoordinates(),E=0;E<b.length;++E){var A=b[E];f.push(Tr.coordinate.apply(this,[A]))}return{type:"LineString",coordinates:f}},MultiLineString:function(u){for(var f=[],b=0;b<u._geometries.length;++b){var E=u._geometries[b],A=Tr.LineString.apply(this,[E]);f.push(A.coordinates)}return{type:"MultiLineString",coordinates:f}},Polygon:function(u){var f=[],b=Tr.LineString.apply(this,[u._shell]);f.push(b.coordinates);for(var E=0;E<u._holes.length;++E){var A=u._holes[E],J=Tr.LineString.apply(this,[A]);f.push(J.coordinates)}return{type:"Polygon",coordinates:f}},MultiPolygon:function(u){for(var f=[],b=0;b<u._geometries.length;++b){var E=u._geometries[b],A=Tr.Polygon.apply(this,[E]);f.push(A.coordinates)}return{type:"MultiPolygon",coordinates:f}},GeometryCollection:function(u){for(var f=[],b=0;b<u._geometries.length;++b){var E=u._geometries[b],A=E.getGeometryType();f.push(Tr[A].apply(this,[E]))}return{type:"GeometryCollection",geometries:f}}},Rr=function(u){this.geometryFactory=u||new Se,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new ni(this.geometryFactory)};Rr.prototype.read=function(u){var f=this.parser.read(u);return this.precisionModel.getType()===me.FIXED&&this.reducePrecision(f),f},Rr.prototype.reducePrecision=function(u){var f,b;if(u.coordinate)this.precisionModel.makePrecise(u.coordinate);else if(u.points)for(f=0,b=u.points.length;f<b;f++)this.precisionModel.makePrecise(u.points[f]);else if(u.geometries)for(f=0,b=u.geometries.length;f<b;f++)this.reducePrecision(u.geometries[f])};var bn=function(){this.parser=new ni(this.geometryFactory)};bn.prototype.write=function(u){return this.parser.write(u)};var oe=function(){},Ar={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.opposite=function(u){return u===oe.LEFT?oe.RIGHT:u===oe.RIGHT?oe.LEFT:u},Ar.ON.get=function(){return 0},Ar.LEFT.get=function(){return 1},Ar.RIGHT.get=function(){return 2},Object.defineProperties(oe,Ar),(_.prototype=new Error).name="EmptyStackException",(v.prototype=new He).add=function(u){return this.array_.push(u),!0},v.prototype.get=function(u){if(u<0||u>=this.size())throw new Error;return this.array_[u]},v.prototype.push=function(u){return this.array_.push(u),u},v.prototype.pop=function(u){if(this.array_.length===0)throw new _;return this.array_.pop()},v.prototype.peek=function(){if(this.array_.length===0)throw new _;return this.array_[this.array_.length-1]},v.prototype.empty=function(){return this.array_.length===0},v.prototype.isEmpty=function(){return this.empty()},v.prototype.search=function(u){return this.array_.indexOf(u)},v.prototype.size=function(){return this.array_.length},v.prototype.toArray=function(){for(var u=[],f=0,b=this.array_.length;f<b;f++)u.push(this.array_[f]);return u};var gi=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};gi.prototype.getCoordinate=function(){return this._minCoord},gi.prototype.getRightmostSide=function(u,f){var b=this.getRightmostSideOfSegment(u,f);return b<0&&(b=this.getRightmostSideOfSegment(u,f-1)),b<0&&(this._minCoord=null,this.checkForRightmostCoordinate(u)),b},gi.prototype.findRightmostEdgeAtVertex=function(){var u=this._minDe.getEdge().getCoordinates();Q.isTrue(this._minIndex>0&&this._minIndex<u.length,"rightmost point expected to be interior vertex of edge");var f=u[this._minIndex-1],b=u[this._minIndex+1],E=Et.computeOrientation(this._minCoord,b,f),A=!1;(f.y<this._minCoord.y&&b.y<this._minCoord.y&&E===Et.COUNTERCLOCKWISE||f.y>this._minCoord.y&&b.y>this._minCoord.y&&E===Et.CLOCKWISE)&&(A=!0),A&&(this._minIndex=this._minIndex-1)},gi.prototype.getRightmostSideOfSegment=function(u,f){var b=u.getEdge().getCoordinates();if(f<0||f+1>=b.length||b[f].y===b[f+1].y)return-1;var E=oe.LEFT;return b[f].y<b[f+1].y&&(E=oe.RIGHT),E},gi.prototype.getEdge=function(){return this._orientedDe},gi.prototype.checkForRightmostCoordinate=function(u){for(var f=u.getEdge().getCoordinates(),b=0;b<f.length-1;b++)(this._minCoord===null||f[b].x>this._minCoord.x)&&(this._minDe=u,this._minIndex=b,this._minCoord=f[b])},gi.prototype.findRightmostEdgeAtNode=function(){var u=this._minDe.getNode().getEdges();this._minDe=u.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},gi.prototype.findEdge=function(u){for(var f=u.iterator();f.hasNext();){var b=f.next();b.isForward()&&this.checkForRightmostCoordinate(b)}Q.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===oe.LEFT&&(this._orientedDe=this._minDe.getSym())},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi};var _r=function(u){function f(b,E){u.call(this,f.msgWithCoord(b,E)),this.pt=E?new G(E):null,this.name="TopologyException"}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.getCoordinate=function(){return this.pt},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.msgWithCoord=function(b,E){return E?b:b+" [ "+E+" ]"},f}(gt),on=function(){this.array_=[]};on.prototype.addLast=function(u){this.array_.push(u)},on.prototype.removeFirst=function(){return this.array_.shift()},on.prototype.isEmpty=function(){return this.array_.length===0};var yr=function(){this._finder=null,this._dirEdgeList=new $t,this._nodes=new $t,this._rightMostCoord=null,this._env=null,this._finder=new gi};yr.prototype.clearVisitedEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();)u.next().setVisited(!1)},yr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},yr.prototype.computeNodeDepth=function(u){for(var f=null,b=u.getEdges().iterator();b.hasNext();){var E=b.next();if(E.isVisited()||E.getSym().isVisited()){f=E;break}}if(f===null)throw new _r("unable to find edge to compute depths at "+u.getCoordinate());u.getEdges().computeDepths(f);for(var A=u.getEdges().iterator();A.hasNext();){var J=A.next();J.setVisited(!0),this.copySymDepths(J)}},yr.prototype.computeDepth=function(u){this.clearVisitedEdges();var f=this._finder.getEdge();f.setEdgeDepths(oe.RIGHT,u),this.copySymDepths(f),this.computeDepths(f)},yr.prototype.create=function(u){this.addReachable(u),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},yr.prototype.findResultEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();){var f=u.next();f.getDepth(oe.RIGHT)>=1&&f.getDepth(oe.LEFT)<=0&&!f.isInteriorAreaEdge()&&f.setInResult(!0)}},yr.prototype.computeDepths=function(u){var f=new We,b=new on,E=u.getNode();for(b.addLast(E),f.add(E),u.setVisited(!0);!b.isEmpty();){var A=b.removeFirst();f.add(A),this.computeNodeDepth(A);for(var J=A.getEdges().iterator();J.hasNext();){var at=J.next().getSym();if(!at.isVisited()){var yt=at.getNode();f.contains(yt)||(b.addLast(yt),f.add(yt))}}}},yr.prototype.compareTo=function(u){var f=u;return this._rightMostCoord.x<f._rightMostCoord.x?-1:this._rightMostCoord.x>f._rightMostCoord.x?1:0},yr.prototype.getEnvelope=function(){if(this._env===null){for(var u=new wt,f=this._dirEdgeList.iterator();f.hasNext();)for(var b=f.next().getEdge().getCoordinates(),E=0;E<b.length-1;E++)u.expandToInclude(b[E]);this._env=u}return this._env},yr.prototype.addReachable=function(u){var f=new v;for(f.add(u);!f.empty();){var b=f.pop();this.add(b,f)}},yr.prototype.copySymDepths=function(u){var f=u.getSym();f.setDepth(oe.LEFT,u.getDepth(oe.RIGHT)),f.setDepth(oe.RIGHT,u.getDepth(oe.LEFT))},yr.prototype.add=function(u,f){u.setVisited(!0),this._nodes.add(u);for(var b=u.getEdges().iterator();b.hasNext();){var E=b.next();this._dirEdgeList.add(E);var A=E.getSym().getNode();A.isVisited()||f.push(A)}},yr.prototype.getNodes=function(){return this._nodes},yr.prototype.getDirectedEdges=function(){return this._dirEdgeList},yr.prototype.interfaces_=function(){return[U]},yr.prototype.getClass=function(){return yr};var hi=function u(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var f=arguments[0];this.init(f.length)}else if(Number.isInteger(arguments[0])){var b=arguments[0];this.init(1),this.location[oe.ON]=b}else if(arguments[0]instanceof u){var E=arguments[0];if(this.init(E.location.length),E!==null)for(var A=0;A<this.location.length;A++)this.location[A]=E.location[A]}}else if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];this.init(3),this.location[oe.ON]=J,this.location[oe.LEFT]=at,this.location[oe.RIGHT]=yt}};hi.prototype.setAllLocations=function(u){for(var f=0;f<this.location.length;f++)this.location[f]=u},hi.prototype.isNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]!==N.NONE)return!1;return!0},hi.prototype.setAllLocationsIfNull=function(u){for(var f=0;f<this.location.length;f++)this.location[f]===N.NONE&&(this.location[f]=u)},hi.prototype.isLine=function(){return this.location.length===1},hi.prototype.merge=function(u){if(u.location.length>this.location.length){var f=new Array(3).fill(null);f[oe.ON]=this.location[oe.ON],f[oe.LEFT]=N.NONE,f[oe.RIGHT]=N.NONE,this.location=f}for(var b=0;b<this.location.length;b++)this.location[b]===N.NONE&&b<u.location.length&&(this.location[b]=u.location[b])},hi.prototype.getLocations=function(){return this.location},hi.prototype.flip=function(){if(this.location.length<=1)return null;var u=this.location[oe.LEFT];this.location[oe.LEFT]=this.location[oe.RIGHT],this.location[oe.RIGHT]=u},hi.prototype.toString=function(){var u=new T;return this.location.length>1&&u.append(N.toLocationSymbol(this.location[oe.LEFT])),u.append(N.toLocationSymbol(this.location[oe.ON])),this.location.length>1&&u.append(N.toLocationSymbol(this.location[oe.RIGHT])),u.toString()},hi.prototype.setLocations=function(u,f,b){this.location[oe.ON]=u,this.location[oe.LEFT]=f,this.location[oe.RIGHT]=b},hi.prototype.get=function(u){return u<this.location.length?this.location[u]:N.NONE},hi.prototype.isArea=function(){return this.location.length>1},hi.prototype.isAnyNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]===N.NONE)return!0;return!1},hi.prototype.setLocation=function(){if(arguments.length===1){var u=arguments[0];this.setLocation(oe.ON,u)}else if(arguments.length===2){var f=arguments[0],b=arguments[1];this.location[f]=b}},hi.prototype.init=function(u){this.location=new Array(u).fill(null),this.setAllLocations(N.NONE)},hi.prototype.isEqualOnSide=function(u,f){return this.location[f]===u.location[f]},hi.prototype.allPositionsEqual=function(u){for(var f=0;f<this.location.length;f++)if(this.location[f]!==u)return!1;return!0},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi};var fi=function u(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var f=arguments[0];this.elt[0]=new hi(f),this.elt[1]=new hi(f)}else if(arguments[0]instanceof u){var b=arguments[0];this.elt[0]=new hi(b.elt[0]),this.elt[1]=new hi(b.elt[1])}}else if(arguments.length===2){var E=arguments[0],A=arguments[1];this.elt[0]=new hi(N.NONE),this.elt[1]=new hi(N.NONE),this.elt[E].setLocation(A)}else if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];this.elt[0]=new hi(J,at,yt),this.elt[1]=new hi(J,at,yt)}else if(arguments.length===4){var St=arguments[0],Bt=arguments[1],Yt=arguments[2],ee=arguments[3];this.elt[0]=new hi(N.NONE,N.NONE,N.NONE),this.elt[1]=new hi(N.NONE,N.NONE,N.NONE),this.elt[St].setLocations(Bt,Yt,ee)}};fi.prototype.getGeometryCount=function(){var u=0;return this.elt[0].isNull()||u++,this.elt[1].isNull()||u++,u},fi.prototype.setAllLocations=function(u,f){this.elt[u].setAllLocations(f)},fi.prototype.isNull=function(u){return this.elt[u].isNull()},fi.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var u=arguments[0];this.setAllLocationsIfNull(0,u),this.setAllLocationsIfNull(1,u)}else if(arguments.length===2){var f=arguments[0],b=arguments[1];this.elt[f].setAllLocationsIfNull(b)}},fi.prototype.isLine=function(u){return this.elt[u].isLine()},fi.prototype.merge=function(u){for(var f=0;f<2;f++)this.elt[f]===null&&u.elt[f]!==null?this.elt[f]=new hi(u.elt[f]):this.elt[f].merge(u.elt[f])},fi.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},fi.prototype.getLocation=function(){if(arguments.length===1){var u=arguments[0];return this.elt[u].get(oe.ON)}if(arguments.length===2){var f=arguments[0],b=arguments[1];return this.elt[f].get(b)}},fi.prototype.toString=function(){var u=new T;return this.elt[0]!==null&&(u.append("A:"),u.append(this.elt[0].toString())),this.elt[1]!==null&&(u.append(" B:"),u.append(this.elt[1].toString())),u.toString()},fi.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var u=arguments[0];return this.elt[u].isArea()}},fi.prototype.isAnyNull=function(u){return this.elt[u].isAnyNull()},fi.prototype.setLocation=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];this.elt[u].setLocation(oe.ON,f)}else if(arguments.length===3){var b=arguments[0],E=arguments[1],A=arguments[2];this.elt[b].setLocation(E,A)}},fi.prototype.isEqualOnSide=function(u,f){return this.elt[0].isEqualOnSide(u.elt[0],f)&&this.elt[1].isEqualOnSide(u.elt[1],f)},fi.prototype.allPositionsEqual=function(u,f){return this.elt[u].allPositionsEqual(f)},fi.prototype.toLine=function(u){this.elt[u].isArea()&&(this.elt[u]=new hi(this.elt[u].location[0]))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},fi.toLineLabel=function(u){for(var f=new fi(N.NONE),b=0;b<2;b++)f.setLocation(b,u.getLocation(b));return f};var Ti=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new $t,this._pts=new $t,this._label=new fi(N.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new $t,this._geometryFactory=null;var u=arguments[0],f=arguments[1];this._geometryFactory=f,this.computePoints(u),this.computeRing()};Ti.prototype.computeRing=function(){if(this._ring!==null)return null;for(var u=new Array(this._pts.size()).fill(null),f=0;f<this._pts.size();f++)u[f]=this._pts.get(f);this._ring=this._geometryFactory.createLinearRing(u),this._isHole=Et.isCCW(this._ring.getCoordinates())},Ti.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Ti.prototype.computePoints=function(u){this._startDe=u;var f=u,b=!0;do{if(f===null)throw new _r("Found null DirectedEdge");if(f.getEdgeRing()===this)throw new _r("Directed Edge visited twice during ring-building at "+f.getCoordinate());this._edges.add(f);var E=f.getLabel();Q.isTrue(E.isArea()),this.mergeLabel(E),this.addPoints(f.getEdge(),f.isForward(),b),b=!1,this.setEdgeRing(f,this),f=this.getNext(f)}while(f!==this._startDe)},Ti.prototype.getLinearRing=function(){return this._ring},Ti.prototype.getCoordinate=function(u){return this._pts.get(u)},Ti.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var u=this._startDe;do{var f=u.getNode().getEdges().getOutgoingDegree(this);f>this._maxNodeDegree&&(this._maxNodeDegree=f),u=this.getNext(u)}while(u!==this._startDe);this._maxNodeDegree*=2},Ti.prototype.addPoints=function(u,f,b){var E=u.getCoordinates();if(f){var A=1;b&&(A=0);for(var J=A;J<E.length;J++)this._pts.add(E[J])}else{var at=E.length-2;b&&(at=E.length-1);for(var yt=at;yt>=0;yt--)this._pts.add(E[yt])}},Ti.prototype.isHole=function(){return this._isHole},Ti.prototype.setInResult=function(){var u=this._startDe;do u.getEdge().setInResult(!0),u=u.getNext();while(u!==this._startDe)},Ti.prototype.containsPoint=function(u){var f=this.getLinearRing();if(!f.getEnvelopeInternal().contains(u)||!Et.isPointInRing(u,f.getCoordinates()))return!1;for(var b=this._holes.iterator();b.hasNext();)if(b.next().containsPoint(u))return!1;return!0},Ti.prototype.addHole=function(u){this._holes.add(u)},Ti.prototype.isShell=function(){return this._shell===null},Ti.prototype.getLabel=function(){return this._label},Ti.prototype.getEdges=function(){return this._edges},Ti.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ti.prototype.getShell=function(){return this._shell},Ti.prototype.mergeLabel=function(){if(arguments.length===1){var u=arguments[0];this.mergeLabel(u,0),this.mergeLabel(u,1)}else if(arguments.length===2){var f=arguments[0],b=arguments[1],E=f.getLocation(b,oe.RIGHT);if(E===N.NONE)return null;if(this._label.getLocation(b)===N.NONE)return this._label.setLocation(b,E),null}},Ti.prototype.setShell=function(u){this._shell=u,u!==null&&u.addHole(this)},Ti.prototype.toPolygon=function(u){for(var f=new Array(this._holes.size()).fill(null),b=0;b<this._holes.size();b++)f[b]=this._holes.get(b).getLinearRing();return u.createPolygon(this.getLinearRing(),f)},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var $r=function(u){function f(){var b=arguments[0],E=arguments[1];u.call(this,b,E)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.setEdgeRing=function(b,E){b.setMinEdgeRing(E)},f.prototype.getNext=function(b){return b.getNextMin()},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Ti),us=function(u){function f(){var b=arguments[0],E=arguments[1];u.call(this,b,E)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.buildMinimalRings=function(){var b=new $t,E=this._startDe;do{if(E.getMinEdgeRing()===null){var A=new $r(E,this._geometryFactory);b.add(A)}E=E.getNext()}while(E!==this._startDe);return b},f.prototype.setEdgeRing=function(b,E){b.setEdgeRing(E)},f.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var b=this._startDe;do b.getNode().getEdges().linkMinimalDirectedEdges(this),b=b.getNext();while(b!==this._startDe)},f.prototype.getNext=function(b){return b.getNext()},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Ti),je=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._label=u}}};je.prototype.setVisited=function(u){this._isVisited=u},je.prototype.setInResult=function(u){this._isInResult=u},je.prototype.isCovered=function(){return this._isCovered},je.prototype.isCoveredSet=function(){return this._isCoveredSet},je.prototype.setLabel=function(u){this._label=u},je.prototype.getLabel=function(){return this._label},je.prototype.setCovered=function(u){this._isCovered=u,this._isCoveredSet=!0},je.prototype.updateIM=function(u){Q.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(u)},je.prototype.isInResult=function(){return this._isInResult},je.prototype.isVisited=function(){return this._isVisited},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var Yr=function(u){function f(){u.call(this),this._coord=null,this._edges=null;var b=arguments[0],E=arguments[1];this._coord=b,this._edges=E,this._label=new fi(0,N.NONE)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.isIncidentEdgeInResult=function(){for(var b=this.getEdges().getEdges().iterator();b.hasNext();)if(b.next().getEdge().isInResult())return!0;return!1},f.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},f.prototype.getCoordinate=function(){return this._coord},f.prototype.print=function(b){b.println("node "+this._coord+" lbl: "+this._label)},f.prototype.computeIM=function(b){},f.prototype.computeMergedLocation=function(b,E){var A=N.NONE;if(A=this._label.getLocation(E),!b.isNull(E)){var J=b.getLocation(E);A!==N.BOUNDARY&&(A=J)}return A},f.prototype.setLabel=function(){if(arguments.length!==2)return u.prototype.setLabel.apply(this,arguments);var b=arguments[0],E=arguments[1];this._label===null?this._label=new fi(b,E):this._label.setLocation(b,E)},f.prototype.getEdges=function(){return this._edges},f.prototype.mergeLabel=function(){if(arguments[0]instanceof f){var b=arguments[0];this.mergeLabel(b._label)}else if(arguments[0]instanceof fi)for(var E=arguments[0],A=0;A<2;A++){var J=this.computeMergedLocation(E,A);this._label.getLocation(A)===N.NONE&&this._label.setLocation(A,J)}},f.prototype.add=function(b){this._edges.insert(b),b.setNode(this)},f.prototype.setLabelBoundary=function(b){if(this._label===null)return null;var E=N.NONE;this._label!==null&&(E=this._label.getLocation(b));var A=null;switch(E){case N.BOUNDARY:A=N.INTERIOR;break;case N.INTERIOR:default:A=N.BOUNDARY}this._label.setLocation(b,A)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(je),ci=function(){this.nodeMap=new d,this.nodeFact=null;var u=arguments[0];this.nodeFact=u};ci.prototype.find=function(u){return this.nodeMap.get(u)},ci.prototype.addNode=function(){if(arguments[0]instanceof G){var u=arguments[0],f=this.nodeMap.get(u);return f===null&&(f=this.nodeFact.createNode(u),this.nodeMap.put(u,f)),f}if(arguments[0]instanceof Yr){var b=arguments[0],E=this.nodeMap.get(b.getCoordinate());return E===null?(this.nodeMap.put(b.getCoordinate(),b),b):(E.mergeLabel(b),E)}},ci.prototype.print=function(u){for(var f=this.iterator();f.hasNext();)f.next().print(u)},ci.prototype.iterator=function(){return this.nodeMap.values().iterator()},ci.prototype.values=function(){return this.nodeMap.values()},ci.prototype.getBoundaryNodes=function(u){for(var f=new $t,b=this.iterator();b.hasNext();){var E=b.next();E.getLabel().getLocation(u)===N.BOUNDARY&&f.add(E)}return f},ci.prototype.add=function(u){var f=u.getCoordinate();this.addNode(f).add(u)},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var M=function(){},I={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.isNorthern=function(u){return u===M.NE||u===M.NW},M.isOpposite=function(u,f){return u===f?!1:(u-f+4)%4===2},M.commonHalfPlane=function(u,f){if(u===f)return u;if((u-f+4)%4===2)return-1;var b=u<f?u:f;return b===0&&(u>f?u:f)===3?3:b},M.isInHalfPlane=function(u,f){return f===M.SE?u===M.SE||u===M.SW:u===f||u===f+1},M.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],f=arguments[1];if(u===0&&f===0)throw new S("Cannot compute the quadrant for point ( "+u+", "+f+" )");return u>=0?f>=0?M.NE:M.SE:f>=0?M.NW:M.SW}if(arguments[0]instanceof G&&arguments[1]instanceof G){var b=arguments[0],E=arguments[1];if(E.x===b.x&&E.y===b.y)throw new S("Cannot compute the quadrant for two identical points "+b);return E.x>=b.x?E.y>=b.y?M.NE:M.SE:E.y>=b.y?M.NW:M.SW}},I.NE.get=function(){return 0},I.NW.get=function(){return 1},I.SW.get=function(){return 2},I.SE.get=function(){return 3},Object.defineProperties(M,I);var j=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var u=arguments[0];this._edge=u}else if(arguments.length===3){var f=arguments[0],b=arguments[1],E=arguments[2];this._edge=f,this.init(b,E),this._label=null}else if(arguments.length===4){var A=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3];this._edge=A,this.init(J,at),this._label=yt}};j.prototype.compareDirection=function(u){return this._dx===u._dx&&this._dy===u._dy?0:this._quadrant>u._quadrant?1:this._quadrant<u._quadrant?-1:Et.computeOrientation(u._p0,u._p1,this._p1)},j.prototype.getDy=function(){return this._dy},j.prototype.getCoordinate=function(){return this._p0},j.prototype.setNode=function(u){this._node=u},j.prototype.print=function(u){var f=Math.atan2(this._dy,this._dx),b=this.getClass().getName(),E=b.lastIndexOf("."),A=b.substring(E+1);u.print("  "+A+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+f+"   "+this._label)},j.prototype.compareTo=function(u){var f=u;return this.compareDirection(f)},j.prototype.getDirectedCoordinate=function(){return this._p1},j.prototype.getDx=function(){return this._dx},j.prototype.getLabel=function(){return this._label},j.prototype.getEdge=function(){return this._edge},j.prototype.getQuadrant=function(){return this._quadrant},j.prototype.getNode=function(){return this._node},j.prototype.toString=function(){var u=Math.atan2(this._dy,this._dx),f=this.getClass().getName(),b=f.lastIndexOf(".");return"  "+f.substring(b+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+u+"   "+this._label},j.prototype.computeLabel=function(u){},j.prototype.init=function(u,f){this._p0=u,this._p1=f,this._dx=f.x-u.x,this._dy=f.y-u.y,this._quadrant=M.quadrant(this._dx,this._dy),Q.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},j.prototype.interfaces_=function(){return[U]},j.prototype.getClass=function(){return j};var nt=function(u){function f(){var b=arguments[0],E=arguments[1];if(u.call(this,b),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=E,E)this.init(b.getCoordinate(0),b.getCoordinate(1));else{var A=b.getNumPoints()-1;this.init(b.getCoordinate(A),b.getCoordinate(A-1))}this.computeDirectedLabel()}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.getNextMin=function(){return this._nextMin},f.prototype.getDepth=function(b){return this._depth[b]},f.prototype.setVisited=function(b){this._isVisited=b},f.prototype.computeDirectedLabel=function(){this._label=new fi(this._edge.getLabel()),this._isForward||this._label.flip()},f.prototype.getNext=function(){return this._next},f.prototype.setDepth=function(b,E){if(this._depth[b]!==-999&&this._depth[b]!==E)throw new _r("assigned depths do not match",this.getCoordinate());this._depth[b]=E},f.prototype.isInteriorAreaEdge=function(){for(var b=!0,E=0;E<2;E++)this._label.isArea(E)&&this._label.getLocation(E,oe.LEFT)===N.INTERIOR&&this._label.getLocation(E,oe.RIGHT)===N.INTERIOR||(b=!1);return b},f.prototype.setNextMin=function(b){this._nextMin=b},f.prototype.print=function(b){u.prototype.print.call(this,b),b.print(" "+this._depth[oe.LEFT]+"/"+this._depth[oe.RIGHT]),b.print(" ("+this.getDepthDelta()+")"),this._isInResult&&b.print(" inResult")},f.prototype.setMinEdgeRing=function(b){this._minEdgeRing=b},f.prototype.isLineEdge=function(){var b=this._label.isLine(0)||this._label.isLine(1),E=!this._label.isArea(0)||this._label.allPositionsEqual(0,N.EXTERIOR),A=!this._label.isArea(1)||this._label.allPositionsEqual(1,N.EXTERIOR);return b&&E&&A},f.prototype.setEdgeRing=function(b){this._edgeRing=b},f.prototype.getMinEdgeRing=function(){return this._minEdgeRing},f.prototype.getDepthDelta=function(){var b=this._edge.getDepthDelta();return this._isForward||(b=-b),b},f.prototype.setInResult=function(b){this._isInResult=b},f.prototype.getSym=function(){return this._sym},f.prototype.isForward=function(){return this._isForward},f.prototype.getEdge=function(){return this._edge},f.prototype.printEdge=function(b){this.print(b),b.print(" "),this._isForward?this._edge.print(b):this._edge.printReverse(b)},f.prototype.setSym=function(b){this._sym=b},f.prototype.setVisitedEdge=function(b){this.setVisited(b),this._sym.setVisited(b)},f.prototype.setEdgeDepths=function(b,E){var A=this.getEdge().getDepthDelta();this._isForward||(A=-A);var J=1;b===oe.LEFT&&(J=-1);var at=oe.opposite(b),yt=E+A*J;this.setDepth(b,E),this.setDepth(at,yt)},f.prototype.getEdgeRing=function(){return this._edgeRing},f.prototype.isInResult=function(){return this._isInResult},f.prototype.setNext=function(b){this._next=b},f.prototype.isVisited=function(){return this._isVisited},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.depthFactor=function(b,E){return b===N.EXTERIOR&&E===N.INTERIOR?1:b===N.INTERIOR&&E===N.EXTERIOR?-1:0},f}(j),ht=function(){};ht.prototype.createNode=function(u){return new Yr(u,null)},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var xt=function(){if(this._edges=new $t,this._nodes=null,this._edgeEndList=new $t,arguments.length===0)this._nodes=new ci(new ht);else if(arguments.length===1){var u=arguments[0];this._nodes=new ci(u)}};xt.prototype.printEdges=function(u){u.println("Edges:");for(var f=0;f<this._edges.size();f++){u.println("edge "+f+":");var b=this._edges.get(f);b.print(u),b.eiList.print(u)}},xt.prototype.find=function(u){return this._nodes.find(u)},xt.prototype.addNode=function(){if(arguments[0]instanceof Yr){var u=arguments[0];return this._nodes.addNode(u)}if(arguments[0]instanceof G){var f=arguments[0];return this._nodes.addNode(f)}},xt.prototype.getNodeIterator=function(){return this._nodes.iterator()},xt.prototype.linkResultDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkResultDirectedEdges()},xt.prototype.debugPrintln=function(u){rt.out.println(u)},xt.prototype.isBoundaryNode=function(u,f){var b=this._nodes.find(f);if(b===null)return!1;var E=b.getLabel();return E!==null&&E.getLocation(u)===N.BOUNDARY},xt.prototype.linkAllDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkAllDirectedEdges()},xt.prototype.matchInSameDirection=function(u,f,b,E){return!!u.equals(b)&&Et.computeOrientation(u,f,E)===Et.COLLINEAR&&M.quadrant(u,f)===M.quadrant(b,E)},xt.prototype.getEdgeEnds=function(){return this._edgeEndList},xt.prototype.debugPrint=function(u){rt.out.print(u)},xt.prototype.getEdgeIterator=function(){return this._edges.iterator()},xt.prototype.findEdgeInSameDirection=function(u,f){for(var b=0;b<this._edges.size();b++){var E=this._edges.get(b),A=E.getCoordinates();if(this.matchInSameDirection(u,f,A[0],A[1])||this.matchInSameDirection(u,f,A[A.length-1],A[A.length-2]))return E}return null},xt.prototype.insertEdge=function(u){this._edges.add(u)},xt.prototype.findEdgeEnd=function(u){for(var f=this.getEdgeEnds().iterator();f.hasNext();){var b=f.next();if(b.getEdge()===u)return b}return null},xt.prototype.addEdges=function(u){for(var f=u.iterator();f.hasNext();){var b=f.next();this._edges.add(b);var E=new nt(b,!0),A=new nt(b,!1);E.setSym(A),A.setSym(E),this.add(E),this.add(A)}},xt.prototype.add=function(u){this._nodes.add(u),this._edgeEndList.add(u)},xt.prototype.getNodes=function(){return this._nodes.values()},xt.prototype.findEdge=function(u,f){for(var b=0;b<this._edges.size();b++){var E=this._edges.get(b),A=E.getCoordinates();if(u.equals(A[0])&&f.equals(A[1]))return E}return null},xt.prototype.interfaces_=function(){return[]},xt.prototype.getClass=function(){return xt},xt.linkResultDirectedEdges=function(u){for(var f=u.iterator();f.hasNext();)f.next().getEdges().linkResultDirectedEdges()};var Lt=function(){this._geometryFactory=null,this._shellList=new $t;var u=arguments[0];this._geometryFactory=u};Lt.prototype.sortShellsAndHoles=function(u,f,b){for(var E=u.iterator();E.hasNext();){var A=E.next();A.isHole()?b.add(A):f.add(A)}},Lt.prototype.computePolygons=function(u){for(var f=new $t,b=u.iterator();b.hasNext();){var E=b.next().toPolygon(this._geometryFactory);f.add(E)}return f},Lt.prototype.placeFreeHoles=function(u,f){for(var b=f.iterator();b.hasNext();){var E=b.next();if(E.getShell()===null){var A=this.findEdgeRingContaining(E,u);if(A===null)throw new _r("unable to assign hole to a shell",E.getCoordinate(0));E.setShell(A)}}},Lt.prototype.buildMinimalEdgeRings=function(u,f,b){for(var E=new $t,A=u.iterator();A.hasNext();){var J=A.next();if(J.getMaxNodeDegree()>2){J.linkDirectedEdgesForMinimalEdgeRings();var at=J.buildMinimalRings(),yt=this.findShell(at);yt!==null?(this.placePolygonHoles(yt,at),f.add(yt)):b.addAll(at)}else E.add(J)}return E},Lt.prototype.containsPoint=function(u){for(var f=this._shellList.iterator();f.hasNext();)if(f.next().containsPoint(u))return!0;return!1},Lt.prototype.buildMaximalEdgeRings=function(u){for(var f=new $t,b=u.iterator();b.hasNext();){var E=b.next();if(E.isInResult()&&E.getLabel().isArea()&&E.getEdgeRing()===null){var A=new us(E,this._geometryFactory);f.add(A),A.setInResult()}}return f},Lt.prototype.placePolygonHoles=function(u,f){for(var b=f.iterator();b.hasNext();){var E=b.next();E.isHole()&&E.setShell(u)}},Lt.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Lt.prototype.findEdgeRingContaining=function(u,f){for(var b=u.getLinearRing(),E=b.getEnvelopeInternal(),A=b.getCoordinateN(0),J=null,at=null,yt=f.iterator();yt.hasNext();){var St=yt.next(),Bt=St.getLinearRing(),Yt=Bt.getEnvelopeInternal();J!==null&&(at=J.getLinearRing().getEnvelopeInternal());var ee=!1;Yt.contains(E)&&Et.isPointInRing(A,Bt.getCoordinates())&&(ee=!0),ee&&(J===null||at.contains(Yt))&&(J=St)}return J},Lt.prototype.findShell=function(u){for(var f=0,b=null,E=u.iterator();E.hasNext();){var A=E.next();A.isHole()||(b=A,f++)}return Q.isTrue(f<=1,"found two shells in MinimalEdgeRing list"),b},Lt.prototype.add=function(){if(arguments.length===1){var u=arguments[0];this.add(u.getEdgeEnds(),u.getNodes())}else if(arguments.length===2){var f=arguments[0],b=arguments[1];xt.linkResultDirectedEdges(b);var E=this.buildMaximalEdgeRings(f),A=new $t,J=this.buildMinimalEdgeRings(E,this._shellList,A);this.sortShellsAndHoles(J,this._shellList,A),this.placeFreeHoles(this._shellList,A)}},Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt};var Rt=function(){};Rt.prototype.getBounds=function(){},Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt};var Pt=function(){this._bounds=null,this._item=null;var u=arguments[0],f=arguments[1];this._bounds=u,this._item=f};Pt.prototype.getItem=function(){return this._item},Pt.prototype.getBounds=function(){return this._bounds},Pt.prototype.interfaces_=function(){return[Rt,t]},Pt.prototype.getClass=function(){return Pt};var Nt=function(){this._size=null,this._items=null,this._size=0,this._items=new $t,this._items.add(null)};Nt.prototype.poll=function(){if(this.isEmpty())return null;var u=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),u},Nt.prototype.size=function(){return this._size},Nt.prototype.reorder=function(u){for(var f=null,b=this._items.get(u);2*u<=this._size&&((f=2*u)!==this._size&&this._items.get(f+1).compareTo(this._items.get(f))<0&&f++,this._items.get(f).compareTo(b)<0);u=f)this._items.set(u,this._items.get(f));this._items.set(u,b)},Nt.prototype.clear=function(){this._size=0,this._items.clear()},Nt.prototype.isEmpty=function(){return this._size===0},Nt.prototype.add=function(u){this._items.add(null),this._size+=1;var f=this._size;for(this._items.set(0,u);u.compareTo(this._items.get(Math.trunc(f/2)))<0;f/=2)this._items.set(f,this._items.get(Math.trunc(f/2)));this._items.set(f,u)},Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt};var Vt=function(){};Vt.prototype.visitItem=function(u){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var ne=function(){};ne.prototype.insert=function(u,f){},ne.prototype.remove=function(u,f){},ne.prototype.query=function(){},ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne};var Zt=function(){if(this._childBoundables=new $t,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._level=u}}},ge={serialVersionUID:{configurable:!0}};Zt.prototype.getLevel=function(){return this._level},Zt.prototype.size=function(){return this._childBoundables.size()},Zt.prototype.getChildBoundables=function(){return this._childBoundables},Zt.prototype.addChildBoundable=function(u){Q.isTrue(this._bounds===null),this._childBoundables.add(u)},Zt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Zt.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},Zt.prototype.interfaces_=function(){return[Rt,t]},Zt.prototype.getClass=function(){return Zt},ge.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(Zt,ge);var Ce=function(){};Ce.reverseOrder=function(){return{compare:function(u,f){return f.compareTo(u)}}},Ce.min=function(u){return Ce.sort(u),u.get(0)},Ce.sort=function(u,f){var b=u.toArray();f?Qe.sort(b,f):Qe.sort(b);for(var E=u.iterator(),A=0,J=b.length;A<J;A++)E.next(),E.set(b[A])},Ce.singletonList=function(u){var f=new $t;return f.add(u),f};var Ne=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var u=arguments[0],f=arguments[1],b=arguments[2];this._boundable1=u,this._boundable2=f,this._itemDistance=b,this._distance=this.distance()};Ne.prototype.expandToQueue=function(u,f){var b=Ne.isComposite(this._boundable1),E=Ne.isComposite(this._boundable2);if(b&&E)return Ne.area(this._boundable1)>Ne.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,u,f),null):(this.expand(this._boundable2,this._boundable1,u,f),null);if(b)return this.expand(this._boundable1,this._boundable2,u,f),null;if(E)return this.expand(this._boundable2,this._boundable1,u,f),null;throw new S("neither boundable is composite")},Ne.prototype.isLeaves=function(){return!(Ne.isComposite(this._boundable1)||Ne.isComposite(this._boundable2))},Ne.prototype.compareTo=function(u){var f=u;return this._distance<f._distance?-1:this._distance>f._distance?1:0},Ne.prototype.expand=function(u,f,b,E){for(var A=u.getChildBoundables().iterator();A.hasNext();){var J=A.next(),at=new Ne(J,f,this._itemDistance);at.getDistance()<E&&b.add(at)}},Ne.prototype.getBoundable=function(u){return u===0?this._boundable1:this._boundable2},Ne.prototype.getDistance=function(){return this._distance},Ne.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Ne.prototype.interfaces_=function(){return[U]},Ne.prototype.getClass=function(){return Ne},Ne.area=function(u){return u.getBounds().getArea()},Ne.isComposite=function(u){return u instanceof Zt};var be=function u(){if(this._root=null,this._built=!1,this._itemBoundables=new $t,this._nodeCapacity=null,arguments.length===0){var f=u.DEFAULT_NODE_CAPACITY;this._nodeCapacity=f}else if(arguments.length===1){var b=arguments[0];Q.isTrue(b>1,"Node capacity must be greater than 1"),this._nodeCapacity=b}},vr={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};be.prototype.getNodeCapacity=function(){return this._nodeCapacity},be.prototype.lastNode=function(u){return u.get(u.size()-1)},be.prototype.size=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var u=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var b=f.next();b instanceof Zt?u+=this.size(b):b instanceof Pt&&(u+=1)}return u}},be.prototype.removeItem=function(u,f){for(var b=null,E=u.getChildBoundables().iterator();E.hasNext();){var A=E.next();A instanceof Pt&&A.getItem()===f&&(b=A)}return b!==null&&(u.getChildBoundables().remove(b),!0)},be.prototype.itemsTree=function(){if(arguments.length===0){this.build();var u=this.itemsTree(this._root);return u===null?new $t:u}if(arguments.length===1){for(var f=arguments[0],b=new $t,E=f.getChildBoundables().iterator();E.hasNext();){var A=E.next();if(A instanceof Zt){var J=this.itemsTree(A);J!==null&&b.add(J)}else A instanceof Pt?b.add(A.getItem()):Q.shouldNeverReachHere()}return b.size()<=0?null:b}},be.prototype.insert=function(u,f){Q.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Pt(u,f))},be.prototype.boundablesAtLevel=function(){if(arguments.length===1){var u=arguments[0],f=new $t;return this.boundablesAtLevel(u,this._root,f),f}if(arguments.length===3){var b=arguments[0],E=arguments[1],A=arguments[2];if(Q.isTrue(b>-2),E.getLevel()===b)return A.add(E),null;for(var J=E.getChildBoundables().iterator();J.hasNext();){var at=J.next();at instanceof Zt?this.boundablesAtLevel(b,at,A):(Q.isTrue(at instanceof Pt),b===-1&&A.add(at))}return null}},be.prototype.query=function(){if(arguments.length===1){var u=arguments[0];this.build();var f=new $t;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.query(u,this._root,f),f}if(arguments.length===2){var b=arguments[0],E=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),b)&&this.query(b,this._root,E)}else if(arguments.length===3){if(w(arguments[2],Vt)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt)for(var A=arguments[0],J=arguments[1],at=arguments[2],yt=J.getChildBoundables(),St=0;St<yt.size();St++){var Bt=yt.get(St);this.getIntersectsOp().intersects(Bt.getBounds(),A)&&(Bt instanceof Zt?this.query(A,Bt,at):Bt instanceof Pt?at.visitItem(Bt.getItem()):Q.shouldNeverReachHere())}else if(w(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt)for(var Yt=arguments[0],ee=arguments[1],xe=arguments[2],Me=ee.getChildBoundables(),Be=0;Be<Me.size();Be++){var qe=Me.get(Be);this.getIntersectsOp().intersects(qe.getBounds(),Yt)&&(qe instanceof Zt?this.query(Yt,qe,xe):qe instanceof Pt?xe.add(qe.getItem()):Q.shouldNeverReachHere())}}},be.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},be.prototype.getRoot=function(){return this.build(),this._root},be.prototype.remove=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.remove(u,this._root,f)}if(arguments.length===3){var b=arguments[0],E=arguments[1],A=arguments[2],J=this.removeItem(E,A);if(J)return!0;for(var at=null,yt=E.getChildBoundables().iterator();yt.hasNext();){var St=yt.next();if(this.getIntersectsOp().intersects(St.getBounds(),b)&&St instanceof Zt&&(J=this.remove(b,St,A))){at=St;break}}return at!==null&&at.getChildBoundables().isEmpty()&&E.getChildBoundables().remove(at),J}},be.prototype.createHigherLevels=function(u,f){Q.isTrue(!u.isEmpty());var b=this.createParentBoundables(u,f+1);return b.size()===1?b.get(0):this.createHigherLevels(b,f+1)},be.prototype.depth=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var u=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var b=f.next();if(b instanceof Zt){var E=this.depth(b);E>u&&(u=E)}}return u+1}},be.prototype.createParentBoundables=function(u,f){Q.isTrue(!u.isEmpty());var b=new $t;b.add(this.createNode(f));var E=new $t(u);Ce.sort(E,this.getComparator());for(var A=E.iterator();A.hasNext();){var J=A.next();this.lastNode(b).getChildBoundables().size()===this.getNodeCapacity()&&b.add(this.createNode(f)),this.lastNode(b).addChildBoundable(J)}return b},be.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},be.prototype.interfaces_=function(){return[t]},be.prototype.getClass=function(){return be},be.compareDoubles=function(u,f){return u>f?1:u<f?-1:0},vr.IntersectsOp.get=function(){return mr},vr.serialVersionUID.get=function(){return-3886435814360241e3},vr.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(be,vr);var mr=function(){},Ei=function(){};Ei.prototype.distance=function(u,f){},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var an=function(u){function f(E){E=E||f.DEFAULT_NODE_CAPACITY,u.call(this,E)}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return f.prototype.createParentBoundablesFromVerticalSlices=function(E,A){Q.isTrue(E.length>0);for(var J=new $t,at=0;at<E.length;at++)J.addAll(this.createParentBoundablesFromVerticalSlice(E[at],A));return J},f.prototype.createNode=function(E){return new qn(E)},f.prototype.size=function(){return arguments.length===0?u.prototype.size.call(this):u.prototype.size.apply(this,arguments)},f.prototype.insert=function(){if(arguments.length!==2)return u.prototype.insert.apply(this,arguments);var E=arguments[0],A=arguments[1];if(E.isNull())return null;u.prototype.insert.call(this,E,A)},f.prototype.getIntersectsOp=function(){return f.intersectsOp},f.prototype.verticalSlices=function(E,A){for(var J=Math.trunc(Math.ceil(E.size()/A)),at=new Array(A).fill(null),yt=E.iterator(),St=0;St<A;St++){at[St]=new $t;for(var Bt=0;yt.hasNext()&&Bt<J;){var Yt=yt.next();at[St].add(Yt),Bt++}}return at},f.prototype.query=function(){if(arguments.length===1){var E=arguments[0];return u.prototype.query.call(this,E)}if(arguments.length===2){var A=arguments[0],J=arguments[1];u.prototype.query.call(this,A,J)}else if(arguments.length===3){if(w(arguments[2],Vt)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt){var at=arguments[0],yt=arguments[1],St=arguments[2];u.prototype.query.call(this,at,yt,St)}else if(w(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt){var Bt=arguments[0],Yt=arguments[1],ee=arguments[2];u.prototype.query.call(this,Bt,Yt,ee)}}},f.prototype.getComparator=function(){return f.yComparator},f.prototype.createParentBoundablesFromVerticalSlice=function(E,A){return u.prototype.createParentBoundables.call(this,E,A)},f.prototype.remove=function(){if(arguments.length===2){var E=arguments[0],A=arguments[1];return u.prototype.remove.call(this,E,A)}return u.prototype.remove.apply(this,arguments)},f.prototype.depth=function(){return arguments.length===0?u.prototype.depth.call(this):u.prototype.depth.apply(this,arguments)},f.prototype.createParentBoundables=function(E,A){Q.isTrue(!E.isEmpty());var J=Math.trunc(Math.ceil(E.size()/this.getNodeCapacity())),at=new $t(E);Ce.sort(at,f.xComparator);var yt=this.verticalSlices(at,Math.trunc(Math.ceil(Math.sqrt(J))));return this.createParentBoundablesFromVerticalSlices(yt,A)},f.prototype.nearestNeighbour=function(){if(arguments.length===1){if(w(arguments[0],Ei)){var E=arguments[0],A=new Ne(this.getRoot(),this.getRoot(),E);return this.nearestNeighbour(A)}if(arguments[0]instanceof Ne){var J=arguments[0];return this.nearestNeighbour(J,O.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof f&&w(arguments[1],Ei)){var at=arguments[0],yt=arguments[1],St=new Ne(this.getRoot(),at.getRoot(),yt);return this.nearestNeighbour(St)}if(arguments[0]instanceof Ne&&typeof arguments[1]=="number"){var Bt=arguments[0],Yt=arguments[1],ee=null,xe=new Nt;for(xe.add(Bt);!xe.isEmpty()&&Yt>0;){var Me=xe.poll(),Be=Me.getDistance();if(Be>=Yt)break;Me.isLeaves()?(Yt=Be,ee=Me):Me.expandToQueue(xe,Yt)}return[ee.getBoundable(0).getItem(),ee.getBoundable(1).getItem()]}}else if(arguments.length===3){var qe=arguments[0],gr=arguments[1],qr=arguments[2],Fn=new Pt(qe,gr),ro=new Ne(this.getRoot(),Fn,qr);return this.nearestNeighbour(ro)[0]}},f.prototype.interfaces_=function(){return[ne,t]},f.prototype.getClass=function(){return f},f.centreX=function(E){return f.avg(E.getMinX(),E.getMaxX())},f.avg=function(E,A){return(E+A)/2},f.centreY=function(E){return f.avg(E.getMinY(),E.getMaxY())},b.STRtreeNode.get=function(){return qn},b.serialVersionUID.get=function(){return 0x39920f7d5f261e0},b.xComparator.get=function(){return{interfaces_:function(){return[V]},compare:function(E,A){return u.compareDoubles(f.centreX(E.getBounds()),f.centreX(A.getBounds()))}}},b.yComparator.get=function(){return{interfaces_:function(){return[V]},compare:function(E,A){return u.compareDoubles(f.centreY(E.getBounds()),f.centreY(A.getBounds()))}}},b.intersectsOp.get=function(){return{interfaces_:function(){return[u.IntersectsOp]},intersects:function(E,A){return E.intersects(A)}}},b.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(f,b),f}(be),qn=function(u){function f(){var b=arguments[0];u.call(this,b)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.computeBounds=function(){for(var b=null,E=this.getChildBoundables().iterator();E.hasNext();){var A=E.next();b===null?b=new wt(A.getBounds()):b.expandToInclude(A.getBounds())}return b},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Zt),Mr=function(){};Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.relativeSign=function(u,f){return u<f?-1:u>f?1:0},Mr.compare=function(u,f,b){if(f.equals2D(b))return 0;var E=Mr.relativeSign(f.x,b.x),A=Mr.relativeSign(f.y,b.y);switch(u){case 0:return Mr.compareValue(E,A);case 1:return Mr.compareValue(A,E);case 2:return Mr.compareValue(A,-E);case 3:return Mr.compareValue(-E,A);case 4:return Mr.compareValue(-E,-A);case 5:return Mr.compareValue(-A,-E);case 6:return Mr.compareValue(-A,E);case 7:return Mr.compareValue(E,-A)}return Q.shouldNeverReachHere("invalid octant value"),0},Mr.compareValue=function(u,f){return u<0?-1:u>0?1:f<0?-1:f>0?1:0};var ys=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var u=arguments[0],f=arguments[1],b=arguments[2],E=arguments[3];this._segString=u,this.coord=new G(f),this.segmentIndex=b,this._segmentOctant=E,this._isInterior=!f.equals2D(u.getCoordinate(b))};ys.prototype.getCoordinate=function(){return this.coord},ys.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex)},ys.prototype.compareTo=function(u){var f=u;return this.segmentIndex<f.segmentIndex?-1:this.segmentIndex>f.segmentIndex?1:this.coord.equals2D(f.coord)?0:Mr.compare(this._segmentOctant,this.coord,f.coord)},ys.prototype.isEndPoint=function(u){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===u},ys.prototype.isInterior=function(){return this._isInterior},ys.prototype.interfaces_=function(){return[U]},ys.prototype.getClass=function(){return ys};var Br=function(){this._nodeMap=new d,this._edge=null;var u=arguments[0];this._edge=u};Br.prototype.getSplitCoordinates=function(){var u=new bi;this.addEndpoints();for(var f=this.iterator(),b=f.next();f.hasNext();){var E=f.next();this.addEdgeCoordinates(b,E,u),b=E}return u.toCoordinateArray()},Br.prototype.addCollapsedNodes=function(){var u=new $t;this.findCollapsesFromInsertedNodes(u),this.findCollapsesFromExistingVertices(u);for(var f=u.iterator();f.hasNext();){var b=f.next().intValue();this.add(this._edge.getCoordinate(b),b)}},Br.prototype.print=function(u){u.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(u)},Br.prototype.findCollapsesFromExistingVertices=function(u){for(var f=0;f<this._edge.size()-2;f++){var b=this._edge.getCoordinate(f),E=this._edge.getCoordinate(f+2);b.equals2D(E)&&u.add(new R(f+1))}},Br.prototype.addEdgeCoordinates=function(u,f,b){var E=this._edge.getCoordinate(f.segmentIndex),A=f.isInterior()||!f.coord.equals2D(E);b.add(new G(u.coord),!1);for(var J=u.segmentIndex+1;J<=f.segmentIndex;J++)b.add(this._edge.getCoordinate(J));A&&b.add(new G(f.coord))},Br.prototype.iterator=function(){return this._nodeMap.values().iterator()},Br.prototype.addSplitEdges=function(u){this.addEndpoints(),this.addCollapsedNodes();for(var f=this.iterator(),b=f.next();f.hasNext();){var E=f.next(),A=this.createSplitEdge(b,E);u.add(A),b=E}},Br.prototype.findCollapseIndex=function(u,f,b){if(!u.coord.equals2D(f.coord))return!1;var E=f.segmentIndex-u.segmentIndex;return f.isInterior()||E--,E===1&&(b[0]=u.segmentIndex+1,!0)},Br.prototype.findCollapsesFromInsertedNodes=function(u){for(var f=new Array(1).fill(null),b=this.iterator(),E=b.next();b.hasNext();){var A=b.next();this.findCollapseIndex(E,A,f)&&u.add(new R(f[0])),E=A}},Br.prototype.getEdge=function(){return this._edge},Br.prototype.addEndpoints=function(){var u=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(u),u)},Br.prototype.createSplitEdge=function(u,f){var b=f.segmentIndex-u.segmentIndex+2,E=this._edge.getCoordinate(f.segmentIndex),A=f.isInterior()||!f.coord.equals2D(E);A||b--;var J=new Array(b).fill(null),at=0;J[at++]=new G(u.coord);for(var yt=u.segmentIndex+1;yt<=f.segmentIndex;yt++)J[at++]=this._edge.getCoordinate(yt);return A&&(J[at]=new G(f.coord)),new Sr(J,this._edge.getData())},Br.prototype.add=function(u,f){var b=new ys(this._edge,u,f,this._edge.getSegmentOctant(f)),E=this._nodeMap.get(b);return E!==null?(Q.isTrue(E.coord.equals2D(u),"Found equal nodes with different coordinates"),E):(this._nodeMap.put(b,b),b)},Br.prototype.checkSplitEdgesCorrectness=function(u){var f=this._edge.getCoordinates(),b=u.get(0).getCoordinate(0);if(!b.equals2D(f[0]))throw new gt("bad split edge start point at "+b);var E=u.get(u.size()-1).getCoordinates(),A=E[E.length-1];if(!A.equals2D(f[f.length-1]))throw new gt("bad split edge end point at "+A)},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br};var Wn=function(){};Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn},Wn.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],f=arguments[1];if(u===0&&f===0)throw new S("Cannot compute the octant for point ( "+u+", "+f+" )");var b=Math.abs(u),E=Math.abs(f);return u>=0?f>=0?b>=E?0:1:b>=E?7:6:f>=0?b>=E?3:2:b>=E?4:5}if(arguments[0]instanceof G&&arguments[1]instanceof G){var A=arguments[0],J=arguments[1],at=J.x-A.x,yt=J.y-A.y;if(at===0&&yt===0)throw new S("Cannot compute the octant for two identical points "+A);return Wn.octant(at,yt)}};var es=function(){};es.prototype.getCoordinates=function(){},es.prototype.size=function(){},es.prototype.getCoordinate=function(u){},es.prototype.isClosed=function(){},es.prototype.setData=function(u){},es.prototype.getData=function(){},es.prototype.interfaces_=function(){return[]},es.prototype.getClass=function(){return es};var Ns=function(){};Ns.prototype.addIntersection=function(u,f){},Ns.prototype.interfaces_=function(){return[es]},Ns.prototype.getClass=function(){return Ns};var Sr=function(){this._nodeList=new Br(this),this._pts=null,this._data=null;var u=arguments[0],f=arguments[1];this._pts=u,this._data=f};Sr.prototype.getCoordinates=function(){return this._pts},Sr.prototype.size=function(){return this._pts.length},Sr.prototype.getCoordinate=function(u){return this._pts[u]},Sr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Sr.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(u),this.getCoordinate(u+1))},Sr.prototype.setData=function(u){this._data=u},Sr.prototype.safeOctant=function(u,f){return u.equals2D(f)?0:Wn.octant(u,f)},Sr.prototype.getData=function(){return this._data},Sr.prototype.addIntersection=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];this.addIntersectionNode(u,f)}else if(arguments.length===4){var b=arguments[0],E=arguments[1],A=arguments[3],J=new G(b.getIntersection(A));this.addIntersection(J,E)}},Sr.prototype.toString=function(){return kt.toLineString(new pe(this._pts))},Sr.prototype.getNodeList=function(){return this._nodeList},Sr.prototype.addIntersectionNode=function(u,f){var b=f,E=b+1;if(E<this._pts.length){var A=this._pts[E];u.equals2D(A)&&(b=E)}return this._nodeList.add(u,b)},Sr.prototype.addIntersections=function(u,f,b){for(var E=0;E<u.getIntersectionNum();E++)this.addIntersection(u,f,b,E)},Sr.prototype.interfaces_=function(){return[Ns]},Sr.prototype.getClass=function(){return Sr},Sr.getNodedSubstrings=function(){if(arguments.length===1){var u=arguments[0],f=new $t;return Sr.getNodedSubstrings(u,f),f}if(arguments.length===2)for(var b=arguments[0],E=arguments[1],A=b.iterator();A.hasNext();)A.next().getNodeList().addSplitEdges(E)};var Pe=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new G,this.p1=new G;else if(arguments.length===1){var u=arguments[0];this.p0=new G(u.p0),this.p1=new G(u.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var f=arguments[0],b=arguments[1],E=arguments[2],A=arguments[3];this.p0=new G(f,b),this.p1=new G(E,A)}},va={serialVersionUID:{configurable:!0}};Pe.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Pe.prototype.orientationIndex=function(){if(arguments[0]instanceof Pe){var u=arguments[0],f=Et.orientationIndex(this.p0,this.p1,u.p0),b=Et.orientationIndex(this.p0,this.p1,u.p1);return f>=0&&b>=0||f<=0&&b<=0?Math.max(f,b):0}if(arguments[0]instanceof G){var E=arguments[0];return Et.orientationIndex(this.p0,this.p1,E)}},Pe.prototype.toGeometry=function(u){return u.createLineString([this.p0,this.p1])},Pe.prototype.isVertical=function(){return this.p0.x===this.p1.x},Pe.prototype.equals=function(u){if(!(u instanceof Pe))return!1;var f=u;return this.p0.equals(f.p0)&&this.p1.equals(f.p1)},Pe.prototype.intersection=function(u){var f=new lt;return f.computeIntersection(this.p0,this.p1,u.p0,u.p1),f.hasIntersection()?f.getIntersection(0):null},Pe.prototype.project=function(){if(arguments[0]instanceof G){var u=arguments[0];if(u.equals(this.p0)||u.equals(this.p1))return new G(u);var f=this.projectionFactor(u),b=new G;return b.x=this.p0.x+f*(this.p1.x-this.p0.x),b.y=this.p0.y+f*(this.p1.y-this.p0.y),b}if(arguments[0]instanceof Pe){var E=arguments[0],A=this.projectionFactor(E.p0),J=this.projectionFactor(E.p1);if(A>=1&&J>=1||A<=0&&J<=0)return null;var at=this.project(E.p0);A<0&&(at=this.p0),A>1&&(at=this.p1);var yt=this.project(E.p1);return J<0&&(yt=this.p0),J>1&&(yt=this.p1),new Pe(at,yt)}},Pe.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Pe.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Pe.prototype.getCoordinate=function(u){return u===0?this.p0:this.p1},Pe.prototype.distancePerpendicular=function(u){return Et.distancePointLinePerpendicular(u,this.p0,this.p1)},Pe.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Pe.prototype.midPoint=function(){return Pe.midPoint(this.p0,this.p1)},Pe.prototype.projectionFactor=function(u){if(u.equals(this.p0))return 0;if(u.equals(this.p1))return 1;var f=this.p1.x-this.p0.x,b=this.p1.y-this.p0.y,E=f*f+b*b;return E<=0?O.NaN:((u.x-this.p0.x)*f+(u.y-this.p0.y)*b)/E},Pe.prototype.closestPoints=function(u){var f=this.intersection(u);if(f!==null)return[f,f];var b=new Array(2).fill(null),E=O.MAX_VALUE,A=null,J=this.closestPoint(u.p0);E=J.distance(u.p0),b[0]=J,b[1]=u.p0;var at=this.closestPoint(u.p1);(A=at.distance(u.p1))<E&&(E=A,b[0]=at,b[1]=u.p1);var yt=u.closestPoint(this.p0);(A=yt.distance(this.p0))<E&&(E=A,b[0]=this.p0,b[1]=yt);var St=u.closestPoint(this.p1);return(A=St.distance(this.p1))<E&&(E=A,b[0]=this.p1,b[1]=St),b},Pe.prototype.closestPoint=function(u){var f=this.projectionFactor(u);return f>0&&f<1?this.project(u):this.p0.distance(u)<this.p1.distance(u)?this.p0:this.p1},Pe.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Pe.prototype.getLength=function(){return this.p0.distance(this.p1)},Pe.prototype.compareTo=function(u){var f=u,b=this.p0.compareTo(f.p0);return b!==0?b:this.p1.compareTo(f.p1)},Pe.prototype.reverse=function(){var u=this.p0;this.p0=this.p1,this.p1=u},Pe.prototype.equalsTopo=function(u){return this.p0.equals(u.p0)&&(this.p1.equals(u.p1)||this.p0.equals(u.p1))&&this.p1.equals(u.p0)},Pe.prototype.lineIntersection=function(u){try{return mt.intersection(this.p0,this.p1,u.p0,u.p1)}catch(f){if(!(f instanceof q))throw f}return null},Pe.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Pe.prototype.pointAlongOffset=function(u,f){var b=this.p0.x+u*(this.p1.x-this.p0.x),E=this.p0.y+u*(this.p1.y-this.p0.y),A=this.p1.x-this.p0.x,J=this.p1.y-this.p0.y,at=Math.sqrt(A*A+J*J),yt=0,St=0;if(f!==0){if(at<=0)throw new Error("Cannot compute offset from zero-length line segment");yt=f*A/at,St=f*J/at}return new G(b-St,E+yt)},Pe.prototype.setCoordinates=function(){if(arguments.length===1){var u=arguments[0];this.setCoordinates(u.p0,u.p1)}else if(arguments.length===2){var f=arguments[0],b=arguments[1];this.p0.x=f.x,this.p0.y=f.y,this.p1.x=b.x,this.p1.y=b.y}},Pe.prototype.segmentFraction=function(u){var f=this.projectionFactor(u);return f<0?f=0:(f>1||O.isNaN(f))&&(f=1),f},Pe.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Pe.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Pe.prototype.distance=function(){if(arguments[0]instanceof Pe){var u=arguments[0];return Et.distanceLineLine(this.p0,this.p1,u.p0,u.p1)}if(arguments[0]instanceof G){var f=arguments[0];return Et.distancePointLine(f,this.p0,this.p1)}},Pe.prototype.pointAlong=function(u){var f=new G;return f.x=this.p0.x+u*(this.p1.x-this.p0.x),f.y=this.p0.y+u*(this.p1.y-this.p0.y),f},Pe.prototype.hashCode=function(){var u=O.doubleToLongBits(this.p0.x);u^=31*O.doubleToLongBits(this.p0.y);var f=Math.trunc(u)^Math.trunc(u>>32),b=O.doubleToLongBits(this.p1.x);return b^=31*O.doubleToLongBits(this.p1.y),f^(Math.trunc(b)^Math.trunc(b>>32))},Pe.prototype.interfaces_=function(){return[U,t]},Pe.prototype.getClass=function(){return Pe},Pe.midPoint=function(u,f){return new G((u.x+f.x)/2,(u.y+f.y)/2)},va.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Pe,va);var ho=function(){this.tempEnv1=new wt,this.tempEnv2=new wt,this._overlapSeg1=new Pe,this._overlapSeg2=new Pe};ho.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var u=arguments[0],f=arguments[1],b=arguments[2],E=arguments[3];u.getLineSegment(f,this._overlapSeg1),b.getLineSegment(E,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},ho.prototype.interfaces_=function(){return[]},ho.prototype.getClass=function(){return ho};var Fr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var u=arguments[0],f=arguments[1],b=arguments[2],E=arguments[3];this._pts=u,this._start=f,this._end=b,this._context=E};Fr.prototype.getLineSegment=function(u,f){f.p0=this._pts[u],f.p1=this._pts[u+1]},Fr.prototype.computeSelect=function(u,f,b,E){var A=this._pts[f],J=this._pts[b];if(E.tempEnv1.init(A,J),b-f==1)return E.select(this,f),null;if(!u.intersects(E.tempEnv1))return null;var at=Math.trunc((f+b)/2);f<at&&this.computeSelect(u,f,at,E),at<b&&this.computeSelect(u,at,b,E)},Fr.prototype.getCoordinates=function(){for(var u=new Array(this._end-this._start+1).fill(null),f=0,b=this._start;b<=this._end;b++)u[f++]=this._pts[b];return u},Fr.prototype.computeOverlaps=function(u,f){this.computeOverlapsInternal(this._start,this._end,u,u._start,u._end,f)},Fr.prototype.setId=function(u){this._id=u},Fr.prototype.select=function(u,f){this.computeSelect(u,this._start,this._end,f)},Fr.prototype.getEnvelope=function(){if(this._env===null){var u=this._pts[this._start],f=this._pts[this._end];this._env=new wt(u,f)}return this._env},Fr.prototype.getEndIndex=function(){return this._end},Fr.prototype.getStartIndex=function(){return this._start},Fr.prototype.getContext=function(){return this._context},Fr.prototype.getId=function(){return this._id},Fr.prototype.computeOverlapsInternal=function(u,f,b,E,A,J){var at=this._pts[u],yt=this._pts[f],St=b._pts[E],Bt=b._pts[A];if(f-u==1&&A-E==1)return J.overlap(this,u,b,E),null;if(J.tempEnv1.init(at,yt),J.tempEnv2.init(St,Bt),!J.tempEnv1.intersects(J.tempEnv2))return null;var Yt=Math.trunc((u+f)/2),ee=Math.trunc((E+A)/2);u<Yt&&(E<ee&&this.computeOverlapsInternal(u,Yt,b,E,ee,J),ee<A&&this.computeOverlapsInternal(u,Yt,b,ee,A,J)),Yt<f&&(E<ee&&this.computeOverlapsInternal(Yt,f,b,E,ee,J),ee<A&&this.computeOverlapsInternal(Yt,f,b,ee,A,J))},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr};var hs=function(){};hs.prototype.interfaces_=function(){return[]},hs.prototype.getClass=function(){return hs},hs.getChainStartIndices=function(u){var f=0,b=new $t;b.add(new R(f));do{var E=hs.findChainEnd(u,f);b.add(new R(E)),f=E}while(f<u.length-1);return hs.toIntArray(b)},hs.findChainEnd=function(u,f){for(var b=f;b<u.length-1&&u[b].equals2D(u[b+1]);)b++;if(b>=u.length-1)return u.length-1;for(var E=M.quadrant(u[b],u[b+1]),A=f+1;A<u.length&&!(!u[A-1].equals2D(u[A])&&M.quadrant(u[A-1],u[A])!==E);)A++;return A-1},hs.getChains=function(){if(arguments.length===1){var u=arguments[0];return hs.getChains(u,null)}if(arguments.length===2){for(var f=arguments[0],b=arguments[1],E=new $t,A=hs.getChainStartIndices(f),J=0;J<A.length-1;J++){var at=new Fr(f,A[J],A[J+1],b);E.add(at)}return E}},hs.toIntArray=function(u){for(var f=new Array(u.size()).fill(null),b=0;b<f.length;b++)f[b]=u.get(b).intValue();return f};var Xs=function(){};Xs.prototype.computeNodes=function(u){},Xs.prototype.getNodedSubstrings=function(){},Xs.prototype.interfaces_=function(){return[]},Xs.prototype.getClass=function(){return Xs};var ia=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setSegmentIntersector(u)}}};ia.prototype.setSegmentIntersector=function(u){this._segInt=u},ia.prototype.interfaces_=function(){return[Xs]},ia.prototype.getClass=function(){return ia};var sl=function(u){function f(E){E?u.call(this,E):u.call(this),this._monoChains=new $t,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}u&&(f.__proto__=u),(f.prototype=Object.create(u&&u.prototype)).constructor=f;var b={SegmentOverlapAction:{configurable:!0}};return f.prototype.getMonotoneChains=function(){return this._monoChains},f.prototype.getNodedSubstrings=function(){return Sr.getNodedSubstrings(this._nodedSegStrings)},f.prototype.getIndex=function(){return this._index},f.prototype.add=function(E){for(var A=hs.getChains(E.getCoordinates(),E).iterator();A.hasNext();){var J=A.next();J.setId(this._idCounter++),this._index.insert(J.getEnvelope(),J),this._monoChains.add(J)}},f.prototype.computeNodes=function(E){this._nodedSegStrings=E;for(var A=E.iterator();A.hasNext();)this.add(A.next());this.intersectChains()},f.prototype.intersectChains=function(){for(var E=new ba(this._segInt),A=this._monoChains.iterator();A.hasNext();)for(var J=A.next(),at=this._index.query(J.getEnvelope()).iterator();at.hasNext();){var yt=at.next();if(yt.getId()>J.getId()&&(J.computeOverlaps(yt,E),this._nOverlaps++),this._segInt.isDone())return null}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},b.SegmentOverlapAction.get=function(){return ba},Object.defineProperties(f,b),f}(ia),ba=function(u){function f(){u.call(this),this._si=null;var b=arguments[0];this._si=b}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.overlap=function(){if(arguments.length!==4)return u.prototype.overlap.apply(this,arguments);var b=arguments[0],E=arguments[1],A=arguments[2],J=arguments[3],at=b.getContext(),yt=A.getContext();this._si.processIntersections(at,E,yt,J)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(ho),Pi=function u(){if(this._quadrantSegments=u.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=u.CAP_ROUND,this._joinStyle=u.JOIN_ROUND,this._mitreLimit=u.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=u.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var f=arguments[0];this.setQuadrantSegments(f)}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this.setQuadrantSegments(b),this.setEndCapStyle(E)}else if(arguments.length===4){var A=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3];this.setQuadrantSegments(A),this.setEndCapStyle(J),this.setJoinStyle(at),this.setMitreLimit(yt)}}},ks={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Pi.prototype.getEndCapStyle=function(){return this._endCapStyle},Pi.prototype.isSingleSided=function(){return this._isSingleSided},Pi.prototype.setQuadrantSegments=function(u){this._quadrantSegments=u,this._quadrantSegments===0&&(this._joinStyle=Pi.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Pi.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),u<=0&&(this._quadrantSegments=1),this._joinStyle!==Pi.JOIN_ROUND&&(this._quadrantSegments=Pi.DEFAULT_QUADRANT_SEGMENTS)},Pi.prototype.getJoinStyle=function(){return this._joinStyle},Pi.prototype.setJoinStyle=function(u){this._joinStyle=u},Pi.prototype.setSimplifyFactor=function(u){this._simplifyFactor=u<0?0:u},Pi.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Pi.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Pi.prototype.setEndCapStyle=function(u){this._endCapStyle=u},Pi.prototype.getMitreLimit=function(){return this._mitreLimit},Pi.prototype.setMitreLimit=function(u){this._mitreLimit=u},Pi.prototype.setSingleSided=function(u){this._isSingleSided=u},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.bufferDistanceError=function(u){var f=Math.PI/2/u;return 1-Math.cos(f/2)},ks.CAP_ROUND.get=function(){return 1},ks.CAP_FLAT.get=function(){return 2},ks.CAP_SQUARE.get=function(){return 3},ks.JOIN_ROUND.get=function(){return 1},ks.JOIN_MITRE.get=function(){return 2},ks.JOIN_BEVEL.get=function(){return 3},ks.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},ks.DEFAULT_MITRE_LIMIT.get=function(){return 5},ks.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(Pi,ks);var kr=function(u){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Et.COUNTERCLOCKWISE,this._inputLine=u||null},co={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};kr.prototype.isDeletable=function(u,f,b,E){var A=this._inputLine[u],J=this._inputLine[f],at=this._inputLine[b];return!!this.isConcave(A,J,at)&&!!this.isShallow(A,J,at,E)&&this.isShallowSampled(A,J,u,b,E)},kr.prototype.deleteShallowConcavities=function(){for(var u=1,f=this.findNextNonDeletedIndex(u),b=this.findNextNonDeletedIndex(f),E=!1;b<this._inputLine.length;){var A=!1;this.isDeletable(u,f,b,this._distanceTol)&&(this._isDeleted[f]=kr.DELETE,A=!0,E=!0),u=A?b:f,f=this.findNextNonDeletedIndex(u),b=this.findNextNonDeletedIndex(f)}return E},kr.prototype.isShallowConcavity=function(u,f,b,E){return Et.computeOrientation(u,f,b)!==this._angleOrientation?!1:Et.distancePointLine(f,u,b)<E},kr.prototype.isShallowSampled=function(u,f,b,E,A){var J=Math.trunc((E-b)/kr.NUM_PTS_TO_CHECK);J<=0&&(J=1);for(var at=b;at<E;at+=J)if(!this.isShallow(u,f,this._inputLine[at],A))return!1;return!0},kr.prototype.isConcave=function(u,f,b){var E=Et.computeOrientation(u,f,b)===this._angleOrientation;return E},kr.prototype.simplify=function(u){this._distanceTol=Math.abs(u),u<0&&(this._angleOrientation=Et.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var f=!1;do f=this.deleteShallowConcavities();while(f);return this.collapseLine()},kr.prototype.findNextNonDeletedIndex=function(u){for(var f=u+1;f<this._inputLine.length&&this._isDeleted[f]===kr.DELETE;)f++;return f},kr.prototype.isShallow=function(u,f,b,E){return Et.distancePointLine(f,u,b)<E},kr.prototype.collapseLine=function(){for(var u=new bi,f=0;f<this._inputLine.length;f++)this._isDeleted[f]!==kr.DELETE&&u.add(this._inputLine[f]);return u.toCoordinateArray()},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.simplify=function(u,f){return new kr(u).simplify(f)},co.INIT.get=function(){return 0},co.DELETE.get=function(){return 1},co.KEEP.get=function(){return 1},co.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(kr,co);var Zr=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new $t},ru={COORDINATE_ARRAY_TYPE:{configurable:!0}};Zr.prototype.getCoordinates=function(){return this._ptList.toArray(Zr.COORDINATE_ARRAY_TYPE)},Zr.prototype.setPrecisionModel=function(u){this._precisionModel=u},Zr.prototype.addPt=function(u){var f=new G(u);if(this._precisionModel.makePrecise(f),this.isRedundant(f))return null;this._ptList.add(f)},Zr.prototype.revere=function(){},Zr.prototype.addPts=function(u,f){if(f)for(var b=0;b<u.length;b++)this.addPt(u[b]);else for(var E=u.length-1;E>=0;E--)this.addPt(u[E])},Zr.prototype.isRedundant=function(u){if(this._ptList.size()<1)return!1;var f=this._ptList.get(this._ptList.size()-1);return u.distance(f)<this._minimimVertexDistance},Zr.prototype.toString=function(){return new Se().createLineString(this.getCoordinates()).toString()},Zr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var u=new G(this._ptList.get(0)),f=this._ptList.get(this._ptList.size()-1);if(u.equals(f))return null;this._ptList.add(u)},Zr.prototype.setMinimumVertexDistance=function(u){this._minimimVertexDistance=u},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},ru.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Zr,ru);var di=function(){},_n={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},di.toDegrees=function(u){return 180*u/Math.PI},di.normalize=function(u){for(;u>Math.PI;)u-=di.PI_TIMES_2;for(;u<=-Math.PI;)u+=di.PI_TIMES_2;return u},di.angle=function(){if(arguments.length===1){var u=arguments[0];return Math.atan2(u.y,u.x)}if(arguments.length===2){var f=arguments[0],b=arguments[1],E=b.x-f.x,A=b.y-f.y;return Math.atan2(A,E)}},di.isAcute=function(u,f,b){var E=u.x-f.x,A=u.y-f.y;return E*(b.x-f.x)+A*(b.y-f.y)>0},di.isObtuse=function(u,f,b){var E=u.x-f.x,A=u.y-f.y;return E*(b.x-f.x)+A*(b.y-f.y)<0},di.interiorAngle=function(u,f,b){var E=di.angle(f,u),A=di.angle(f,b);return Math.abs(A-E)},di.normalizePositive=function(u){if(u<0){for(;u<0;)u+=di.PI_TIMES_2;u>=di.PI_TIMES_2&&(u=0)}else{for(;u>=di.PI_TIMES_2;)u-=di.PI_TIMES_2;u<0&&(u=0)}return u},di.angleBetween=function(u,f,b){var E=di.angle(f,u),A=di.angle(f,b);return di.diff(E,A)},di.diff=function(u,f){var b=null;return(b=u<f?f-u:u-f)>Math.PI&&(b=2*Math.PI-b),b},di.toRadians=function(u){return u*Math.PI/180},di.getTurn=function(u,f){var b=Math.sin(f-u);return b>0?di.COUNTERCLOCKWISE:b<0?di.CLOCKWISE:di.NONE},di.angleBetweenOriented=function(u,f,b){var E=di.angle(f,u),A=di.angle(f,b)-E;return A<=-Math.PI?A+di.PI_TIMES_2:A>Math.PI?A-di.PI_TIMES_2:A},_n.PI_TIMES_2.get=function(){return 2*Math.PI},_n.PI_OVER_2.get=function(){return Math.PI/2},_n.PI_OVER_4.get=function(){return Math.PI/4},_n.COUNTERCLOCKWISE.get=function(){return Et.COUNTERCLOCKWISE},_n.CLOCKWISE.get=function(){return Et.CLOCKWISE},_n.NONE.get=function(){return Et.COLLINEAR},Object.defineProperties(di,_n);var wr=function u(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Pe,this._seg1=new Pe,this._offset0=new Pe,this._offset1=new Pe,this._side=0,this._hasNarrowConcaveAngle=!1;var f=arguments[0],b=arguments[1],E=arguments[2];this._precisionModel=f,this._bufParams=b,this._li=new lt,this._filletAngleQuantum=Math.PI/2/b.getQuadrantSegments(),b.getQuadrantSegments()>=8&&b.getJoinStyle()===Pi.JOIN_ROUND&&(this._closingSegLengthFactor=u.MAX_CLOSING_SEG_LEN_FACTOR),this.init(E)},Ho={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};wr.prototype.addNextSegment=function(u,f){if(this._s0=this._s1,this._s1=this._s2,this._s2=u,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var b=Et.computeOrientation(this._s0,this._s1,this._s2),E=b===Et.CLOCKWISE&&this._side===oe.LEFT||b===Et.COUNTERCLOCKWISE&&this._side===oe.RIGHT;b===0?this.addCollinear(f):E?this.addOutsideTurn(b,f):this.addInsideTurn(b,f)},wr.prototype.addLineEndCap=function(u,f){var b=new Pe(u,f),E=new Pe;this.computeOffsetSegment(b,oe.LEFT,this._distance,E);var A=new Pe;this.computeOffsetSegment(b,oe.RIGHT,this._distance,A);var J=f.x-u.x,at=f.y-u.y,yt=Math.atan2(at,J);switch(this._bufParams.getEndCapStyle()){case Pi.CAP_ROUND:this._segList.addPt(E.p1),this.addFilletArc(f,yt+Math.PI/2,yt-Math.PI/2,Et.CLOCKWISE,this._distance),this._segList.addPt(A.p1);break;case Pi.CAP_FLAT:this._segList.addPt(E.p1),this._segList.addPt(A.p1);break;case Pi.CAP_SQUARE:var St=new G;St.x=Math.abs(this._distance)*Math.cos(yt),St.y=Math.abs(this._distance)*Math.sin(yt);var Bt=new G(E.p1.x+St.x,E.p1.y+St.y),Yt=new G(A.p1.x+St.x,A.p1.y+St.y);this._segList.addPt(Bt),this._segList.addPt(Yt)}},wr.prototype.getCoordinates=function(){return this._segList.getCoordinates()},wr.prototype.addMitreJoin=function(u,f,b,E){var A=!0,J=null;try{J=mt.intersection(f.p0,f.p1,b.p0,b.p1),(E<=0?1:J.distance(u)/Math.abs(E))>this._bufParams.getMitreLimit()&&(A=!1)}catch(at){if(!(at instanceof q))throw at;J=new G(0,0),A=!1}A?this._segList.addPt(J):this.addLimitedMitreJoin(f,b,E,this._bufParams.getMitreLimit())},wr.prototype.addFilletCorner=function(u,f,b,E,A){var J=f.x-u.x,at=f.y-u.y,yt=Math.atan2(at,J),St=b.x-u.x,Bt=b.y-u.y,Yt=Math.atan2(Bt,St);E===Et.CLOCKWISE?yt<=Yt&&(yt+=2*Math.PI):yt>=Yt&&(yt-=2*Math.PI),this._segList.addPt(f),this.addFilletArc(u,yt,Yt,E,A),this._segList.addPt(b)},wr.prototype.addOutsideTurn=function(u,f){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*wr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Pi.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Pi.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(f&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,u,this._distance),this._segList.addPt(this._offset1.p0))},wr.prototype.createSquare=function(u){this._segList.addPt(new G(u.x+this._distance,u.y+this._distance)),this._segList.addPt(new G(u.x+this._distance,u.y-this._distance)),this._segList.addPt(new G(u.x-this._distance,u.y-this._distance)),this._segList.addPt(new G(u.x-this._distance,u.y+this._distance)),this._segList.closeRing()},wr.prototype.addSegments=function(u,f){this._segList.addPts(u,f)},wr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},wr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},wr.prototype.initSideSegments=function(u,f,b){this._s1=u,this._s2=f,this._side=b,this._seg1.setCoordinates(u,f),this.computeOffsetSegment(this._seg1,b,this._distance,this._offset1)},wr.prototype.addLimitedMitreJoin=function(u,f,b,E){var A=this._seg0.p1,J=di.angle(A,this._seg0.p0),at=di.angleBetweenOriented(this._seg0.p0,A,this._seg1.p1)/2,yt=di.normalize(J+at),St=di.normalize(yt+Math.PI),Bt=E*b,Yt=b-Bt*Math.abs(Math.sin(at)),ee=A.x+Bt*Math.cos(St),xe=A.y+Bt*Math.sin(St),Me=new G(ee,xe),Be=new Pe(A,Me),qe=Be.pointAlongOffset(1,Yt),gr=Be.pointAlongOffset(1,-Yt);this._side===oe.LEFT?(this._segList.addPt(qe),this._segList.addPt(gr)):(this._segList.addPt(gr),this._segList.addPt(qe))},wr.prototype.computeOffsetSegment=function(u,f,b,E){var A=f===oe.LEFT?1:-1,J=u.p1.x-u.p0.x,at=u.p1.y-u.p0.y,yt=Math.sqrt(J*J+at*at),St=A*b*J/yt,Bt=A*b*at/yt;E.p0.x=u.p0.x-Bt,E.p0.y=u.p0.y+St,E.p1.x=u.p1.x-Bt,E.p1.y=u.p1.y+St},wr.prototype.addFilletArc=function(u,f,b,E,A){var J=E===Et.CLOCKWISE?-1:1,at=Math.abs(f-b),yt=Math.trunc(at/this._filletAngleQuantum+.5);if(yt<1)return null;for(var St=at/yt,Bt=0,Yt=new G;Bt<at;){var ee=f+J*Bt;Yt.x=u.x+A*Math.cos(ee),Yt.y=u.y+A*Math.sin(ee),this._segList.addPt(Yt),Bt+=St}},wr.prototype.addInsideTurn=function(u,f){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*wr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var b=new G((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(b);var E=new G((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(E)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},wr.prototype.createCircle=function(u){var f=new G(u.x+this._distance,u.y);this._segList.addPt(f),this.addFilletArc(u,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},wr.prototype.addBevelJoin=function(u,f){this._segList.addPt(u.p1),this._segList.addPt(f.p0)},wr.prototype.init=function(u){this._distance=u,this._maxCurveSegmentError=u*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Zr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(u*wr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},wr.prototype.addCollinear=function(u){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Pi.JOIN_BEVEL||this._bufParams.getJoinStyle()===Pi.JOIN_MITRE?(u&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Et.CLOCKWISE,this._distance))},wr.prototype.closeRing=function(){this._segList.closeRing()},wr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr},Ho.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},Ho.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},Ho.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ho.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(wr,Ho);var Tn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var u=arguments[0],f=arguments[1];this._precisionModel=u,this._bufParams=f};Tn.prototype.getOffsetCurve=function(u,f){if(this._distance=f,f===0)return null;var b=f<0,E=Math.abs(f),A=this.getSegGen(E);u.length<=1?this.computePointCurve(u[0],A):this.computeOffsetCurve(u,b,A);var J=A.getCoordinates();return b&&ue.reverse(J),J},Tn.prototype.computeSingleSidedBufferCurve=function(u,f,b){var E=this.simplifyTolerance(this._distance);if(f){b.addSegments(u,!0);var A=kr.simplify(u,-E),J=A.length-1;b.initSideSegments(A[J],A[J-1],oe.LEFT),b.addFirstSegment();for(var at=J-2;at>=0;at--)b.addNextSegment(A[at],!0)}else{b.addSegments(u,!1);var yt=kr.simplify(u,E),St=yt.length-1;b.initSideSegments(yt[0],yt[1],oe.LEFT),b.addFirstSegment();for(var Bt=2;Bt<=St;Bt++)b.addNextSegment(yt[Bt],!0)}b.addLastSegment(),b.closeRing()},Tn.prototype.computeRingBufferCurve=function(u,f,b){var E=this.simplifyTolerance(this._distance);f===oe.RIGHT&&(E=-E);var A=kr.simplify(u,E),J=A.length-1;b.initSideSegments(A[J-1],A[0],f);for(var at=1;at<=J;at++){var yt=at!==1;b.addNextSegment(A[at],yt)}b.closeRing()},Tn.prototype.computeLineBufferCurve=function(u,f){var b=this.simplifyTolerance(this._distance),E=kr.simplify(u,b),A=E.length-1;f.initSideSegments(E[0],E[1],oe.LEFT);for(var J=2;J<=A;J++)f.addNextSegment(E[J],!0);f.addLastSegment(),f.addLineEndCap(E[A-1],E[A]);var at=kr.simplify(u,-b),yt=at.length-1;f.initSideSegments(at[yt],at[yt-1],oe.LEFT);for(var St=yt-2;St>=0;St--)f.addNextSegment(at[St],!0);f.addLastSegment(),f.addLineEndCap(at[1],at[0]),f.closeRing()},Tn.prototype.computePointCurve=function(u,f){switch(this._bufParams.getEndCapStyle()){case Pi.CAP_ROUND:f.createCircle(u);break;case Pi.CAP_SQUARE:f.createSquare(u)}},Tn.prototype.getLineCurve=function(u,f){if(this._distance=f,f<0&&!this._bufParams.isSingleSided()||f===0)return null;var b=Math.abs(f),E=this.getSegGen(b);if(u.length<=1)this.computePointCurve(u[0],E);else if(this._bufParams.isSingleSided()){var A=f<0;this.computeSingleSidedBufferCurve(u,A,E)}else this.computeLineBufferCurve(u,E);return E.getCoordinates()},Tn.prototype.getBufferParameters=function(){return this._bufParams},Tn.prototype.simplifyTolerance=function(u){return u*this._bufParams.getSimplifyFactor()},Tn.prototype.getRingCurve=function(u,f,b){if(this._distance=b,u.length<=2)return this.getLineCurve(u,b);if(b===0)return Tn.copyCoordinates(u);var E=this.getSegGen(b);return this.computeRingBufferCurve(u,f,E),E.getCoordinates()},Tn.prototype.computeOffsetCurve=function(u,f,b){var E=this.simplifyTolerance(this._distance);if(f){var A=kr.simplify(u,-E),J=A.length-1;b.initSideSegments(A[J],A[J-1],oe.LEFT),b.addFirstSegment();for(var at=J-2;at>=0;at--)b.addNextSegment(A[at],!0)}else{var yt=kr.simplify(u,E),St=yt.length-1;b.initSideSegments(yt[0],yt[1],oe.LEFT),b.addFirstSegment();for(var Bt=2;Bt<=St;Bt++)b.addNextSegment(yt[Bt],!0)}b.addLastSegment()},Tn.prototype.getSegGen=function(u){return new wr(this._precisionModel,this._bufParams,u)},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.copyCoordinates=function(u){for(var f=new Array(u.length).fill(null),b=0;b<f.length;b++)f[b]=new G(u[b]);return f};var fo=function(){this._subgraphs=null,this._seg=new Pe,this._cga=new Et;var u=arguments[0];this._subgraphs=u},ol={DepthSegment:{configurable:!0}};fo.prototype.findStabbedSegments=function(){if(arguments.length===1){for(var u=arguments[0],f=new $t,b=this._subgraphs.iterator();b.hasNext();){var E=b.next(),A=E.getEnvelope();u.y<A.getMinY()||u.y>A.getMaxY()||this.findStabbedSegments(u,E.getDirectedEdges(),f)}return f}if(arguments.length===3){if(w(arguments[2],He)&&arguments[0]instanceof G&&arguments[1]instanceof nt){for(var J=arguments[0],at=arguments[1],yt=arguments[2],St=at.getEdge().getCoordinates(),Bt=0;Bt<St.length-1;Bt++)if(this._seg.p0=St[Bt],this._seg.p1=St[Bt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<J.x)&&!(this._seg.isHorizontal()||J.y<this._seg.p0.y||J.y>this._seg.p1.y||Et.computeOrientation(this._seg.p0,this._seg.p1,J)===Et.RIGHT)){var Yt=at.getDepth(oe.LEFT);this._seg.p0.equals(St[Bt])||(Yt=at.getDepth(oe.RIGHT));var ee=new po(this._seg,Yt);yt.add(ee)}}else if(w(arguments[2],He)&&arguments[0]instanceof G&&w(arguments[1],He))for(var xe=arguments[0],Me=arguments[1],Be=arguments[2],qe=Me.iterator();qe.hasNext();){var gr=qe.next();gr.isForward()&&this.findStabbedSegments(xe,gr,Be)}}},fo.prototype.getDepth=function(u){var f=this.findStabbedSegments(u);return f.size()===0?0:Ce.min(f)._leftDepth},fo.prototype.interfaces_=function(){return[]},fo.prototype.getClass=function(){return fo},ol.DepthSegment.get=function(){return po},Object.defineProperties(fo,ol);var po=function(){this._upwardSeg=null,this._leftDepth=null;var u=arguments[0],f=arguments[1];this._upwardSeg=new Pe(u),this._leftDepth=f};po.prototype.compareTo=function(u){var f=u;if(this._upwardSeg.minX()>=f._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=f._upwardSeg.minX())return-1;var b=this._upwardSeg.orientationIndex(f._upwardSeg);return b!==0||(b=-1*f._upwardSeg.orientationIndex(this._upwardSeg))!=0?b:this._upwardSeg.compareTo(f._upwardSeg)},po.prototype.compareX=function(u,f){var b=u.p0.compareTo(f.p0);return b!==0?b:u.p1.compareTo(f.p1)},po.prototype.toString=function(){return this._upwardSeg.toString()},po.prototype.interfaces_=function(){return[U]},po.prototype.getClass=function(){return po};var Ci=function(u,f,b){this.p0=u||null,this.p1=f||null,this.p2=b||null};Ci.prototype.area=function(){return Ci.area(this.p0,this.p1,this.p2)},Ci.prototype.signedArea=function(){return Ci.signedArea(this.p0,this.p1,this.p2)},Ci.prototype.interpolateZ=function(u){if(u===null)throw new S("Supplied point is null.");return Ci.interpolateZ(u,this.p0,this.p1,this.p2)},Ci.prototype.longestSideLength=function(){return Ci.longestSideLength(this.p0,this.p1,this.p2)},Ci.prototype.isAcute=function(){return Ci.isAcute(this.p0,this.p1,this.p2)},Ci.prototype.circumcentre=function(){return Ci.circumcentre(this.p0,this.p1,this.p2)},Ci.prototype.area3D=function(){return Ci.area3D(this.p0,this.p1,this.p2)},Ci.prototype.centroid=function(){return Ci.centroid(this.p0,this.p1,this.p2)},Ci.prototype.inCentre=function(){return Ci.inCentre(this.p0,this.p1,this.p2)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.area=function(u,f,b){return Math.abs(((b.x-u.x)*(f.y-u.y)-(f.x-u.x)*(b.y-u.y))/2)},Ci.signedArea=function(u,f,b){return((b.x-u.x)*(f.y-u.y)-(f.x-u.x)*(b.y-u.y))/2},Ci.det=function(u,f,b,E){return u*E-f*b},Ci.interpolateZ=function(u,f,b,E){var A=f.x,J=f.y,at=b.x-A,yt=E.x-A,St=b.y-J,Bt=E.y-J,Yt=at*Bt-yt*St,ee=u.x-A,xe=u.y-J,Me=(Bt*ee-yt*xe)/Yt,Be=(-St*ee+at*xe)/Yt;return f.z+Me*(b.z-f.z)+Be*(E.z-f.z)},Ci.longestSideLength=function(u,f,b){var E=u.distance(f),A=f.distance(b),J=b.distance(u),at=E;return A>at&&(at=A),J>at&&(at=J),at},Ci.isAcute=function(u,f,b){return!!di.isAcute(u,f,b)&&!!di.isAcute(f,b,u)&&!!di.isAcute(b,u,f)},Ci.circumcentre=function(u,f,b){var E=b.x,A=b.y,J=u.x-E,at=u.y-A,yt=f.x-E,St=f.y-A,Bt=2*Ci.det(J,at,yt,St),Yt=Ci.det(at,J*J+at*at,St,yt*yt+St*St),ee=Ci.det(J,J*J+at*at,yt,yt*yt+St*St);return new G(E-Yt/Bt,A+ee/Bt)},Ci.perpendicularBisector=function(u,f){var b=f.x-u.x,E=f.y-u.y,A=new mt(u.x+b/2,u.y+E/2,1),J=new mt(u.x-E+b/2,u.y+b+E/2,1);return new mt(A,J)},Ci.angleBisector=function(u,f,b){var E=f.distance(u),A=E/(E+f.distance(b)),J=b.x-u.x,at=b.y-u.y;return new G(u.x+A*J,u.y+A*at)},Ci.area3D=function(u,f,b){var E=f.x-u.x,A=f.y-u.y,J=f.z-u.z,at=b.x-u.x,yt=b.y-u.y,St=b.z-u.z,Bt=A*St-J*yt,Yt=J*at-E*St,ee=E*yt-A*at,xe=Bt*Bt+Yt*Yt+ee*ee,Me=Math.sqrt(xe)/2;return Me},Ci.centroid=function(u,f,b){var E=(u.x+f.x+b.x)/3,A=(u.y+f.y+b.y)/3;return new G(E,A)},Ci.inCentre=function(u,f,b){var E=f.distance(b),A=u.distance(b),J=u.distance(f),at=E+A+J,yt=(E*u.x+A*f.x+J*b.x)/at,St=(E*u.y+A*f.y+J*b.y)/at;return new G(yt,St)};var Dn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new $t;var u=arguments[0],f=arguments[1],b=arguments[2];this._inputGeom=u,this._distance=f,this._curveBuilder=b};Dn.prototype.addPoint=function(u){if(this._distance<=0)return null;var f=u.getCoordinates(),b=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(b,N.EXTERIOR,N.INTERIOR)},Dn.prototype.addPolygon=function(u){var f=this._distance,b=oe.LEFT;this._distance<0&&(f=-this._distance,b=oe.RIGHT);var E=u.getExteriorRing(),A=ue.removeRepeatedPoints(E.getCoordinates());if(this._distance<0&&this.isErodedCompletely(E,this._distance)||this._distance<=0&&A.length<3)return null;this.addPolygonRing(A,f,b,N.EXTERIOR,N.INTERIOR);for(var J=0;J<u.getNumInteriorRing();J++){var at=u.getInteriorRingN(J),yt=ue.removeRepeatedPoints(at.getCoordinates());this._distance>0&&this.isErodedCompletely(at,-this._distance)||this.addPolygonRing(yt,f,oe.opposite(b),N.INTERIOR,N.EXTERIOR)}},Dn.prototype.isTriangleErodedCompletely=function(u,f){var b=new Ci(u[0],u[1],u[2]),E=b.inCentre();return Et.distancePointLine(E,b.p0,b.p1)<Math.abs(f)},Dn.prototype.addLineString=function(u){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var f=ue.removeRepeatedPoints(u.getCoordinates()),b=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(b,N.EXTERIOR,N.INTERIOR)},Dn.prototype.addCurve=function(u,f,b){if(u===null||u.length<2)return null;var E=new Sr(u,new fi(0,N.BOUNDARY,f,b));this._curveList.add(E)},Dn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Dn.prototype.addPolygonRing=function(u,f,b,E,A){if(f===0&&u.length<Qt.MINIMUM_VALID_SIZE)return null;var J=E,at=A;u.length>=Qt.MINIMUM_VALID_SIZE&&Et.isCCW(u)&&(J=A,at=E,b=oe.opposite(b));var yt=this._curveBuilder.getRingCurve(u,b,f);this.addCurve(yt,J,at)},Dn.prototype.add=function(u){if(u.isEmpty())return null;u instanceof Ht?this.addPolygon(u):u instanceof oi?this.addLineString(u):u instanceof ki?this.addPoint(u):u instanceof re?this.addCollection(u):u instanceof Ye?this.addCollection(u):u instanceof he?this.addCollection(u):u instanceof fe&&this.addCollection(u)},Dn.prototype.isErodedCompletely=function(u,f){var b=u.getCoordinates();if(b.length<4)return f<0;if(b.length===4)return this.isTriangleErodedCompletely(b,f);var E=u.getEnvelopeInternal(),A=Math.min(E.getHeight(),E.getWidth());return f<0&&2*Math.abs(f)>A},Dn.prototype.addCollection=function(u){for(var f=0;f<u.getNumGeometries();f++){var b=u.getGeometryN(f);this.add(b)}},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn};var Go=function(){};Go.prototype.locate=function(u){},Go.prototype.interfaces_=function(){return[]},Go.prototype.getClass=function(){return Go};var Ls=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var u=arguments[0];this._parent=u,this._atStart=!0,this._index=0,this._max=u.getNumGeometries()};Ls.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ls.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new i;var u=this._parent.getGeometryN(this._index++);return u instanceof fe?(this._subcollectionIterator=new Ls(u),this._subcollectionIterator.next()):u},Ls.prototype.remove=function(){throw new Error(this.getClass().getName())},Ls.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ls.prototype.interfaces_=function(){return[ke]},Ls.prototype.getClass=function(){return Ls},Ls.isAtomic=function(u){return!(u instanceof fe)};var Bn=function(){this._geom=null;var u=arguments[0];this._geom=u};Bn.prototype.locate=function(u){return Bn.locate(u,this._geom)},Bn.prototype.interfaces_=function(){return[Go]},Bn.prototype.getClass=function(){return Bn},Bn.isPointInRing=function(u,f){return!!f.getEnvelopeInternal().intersects(u)&&Et.isPointInRing(u,f.getCoordinates())},Bn.containsPointInPolygon=function(u,f){if(f.isEmpty())return!1;var b=f.getExteriorRing();if(!Bn.isPointInRing(u,b))return!1;for(var E=0;E<f.getNumInteriorRing();E++){var A=f.getInteriorRingN(E);if(Bn.isPointInRing(u,A))return!1}return!0},Bn.containsPoint=function(u,f){if(f instanceof Ht)return Bn.containsPointInPolygon(u,f);if(f instanceof fe)for(var b=new Ls(f);b.hasNext();){var E=b.next();if(E!==f&&Bn.containsPoint(u,E))return!0}return!1},Bn.locate=function(u,f){return f.isEmpty()?N.EXTERIOR:Bn.containsPoint(u,f)?N.INTERIOR:N.EXTERIOR};var mn=function(){this._edgeMap=new d,this._edgeList=null,this._ptInAreaLocation=[N.NONE,N.NONE]};mn.prototype.getNextCW=function(u){this.getEdges();var f=this._edgeList.indexOf(u),b=f-1;return f===0&&(b=this._edgeList.size()-1),this._edgeList.get(b)},mn.prototype.propagateSideLabels=function(u){for(var f=N.NONE,b=this.iterator();b.hasNext();){var E=b.next().getLabel();E.isArea(u)&&E.getLocation(u,oe.LEFT)!==N.NONE&&(f=E.getLocation(u,oe.LEFT))}if(f===N.NONE)return null;for(var A=f,J=this.iterator();J.hasNext();){var at=J.next(),yt=at.getLabel();if(yt.getLocation(u,oe.ON)===N.NONE&&yt.setLocation(u,oe.ON,A),yt.isArea(u)){var St=yt.getLocation(u,oe.LEFT),Bt=yt.getLocation(u,oe.RIGHT);if(Bt!==N.NONE){if(Bt!==A)throw new _r("side location conflict",at.getCoordinate());St===N.NONE&&Q.shouldNeverReachHere("found single null side (at "+at.getCoordinate()+")"),A=St}else Q.isTrue(yt.getLocation(u,oe.LEFT)===N.NONE,"found single null side"),yt.setLocation(u,oe.RIGHT,A),yt.setLocation(u,oe.LEFT,A)}}},mn.prototype.getCoordinate=function(){var u=this.iterator();return u.hasNext()?u.next().getCoordinate():null},mn.prototype.print=function(u){rt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var f=this.iterator();f.hasNext();)f.next().print(u)},mn.prototype.isAreaLabelsConsistent=function(u){return this.computeEdgeEndLabels(u.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},mn.prototype.checkAreaLabelsConsistent=function(u){var f=this.getEdges();if(f.size()<=0)return!0;var b=f.size()-1,E=f.get(b).getLabel().getLocation(u,oe.LEFT);Q.isTrue(E!==N.NONE,"Found unlabelled area edge");for(var A=E,J=this.iterator();J.hasNext();){var at=J.next().getLabel();Q.isTrue(at.isArea(u),"Found non-area edge");var yt=at.getLocation(u,oe.LEFT),St=at.getLocation(u,oe.RIGHT);if(yt===St||St!==A)return!1;A=yt}return!0},mn.prototype.findIndex=function(u){this.iterator();for(var f=0;f<this._edgeList.size();f++)if(this._edgeList.get(f)===u)return f;return-1},mn.prototype.iterator=function(){return this.getEdges().iterator()},mn.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new $t(this._edgeMap.values())),this._edgeList},mn.prototype.getLocation=function(u,f,b){return this._ptInAreaLocation[u]===N.NONE&&(this._ptInAreaLocation[u]=Bn.locate(f,b[u].getGeometry())),this._ptInAreaLocation[u]},mn.prototype.toString=function(){var u=new T;u.append("EdgeEndStar:   "+this.getCoordinate()),u.append(`
`);for(var f=this.iterator();f.hasNext();){var b=f.next();u.append(b),u.append(`
`)}return u.toString()},mn.prototype.computeEdgeEndLabels=function(u){for(var f=this.iterator();f.hasNext();)f.next().computeLabel(u)},mn.prototype.computeLabelling=function(u){this.computeEdgeEndLabels(u[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var f=[!1,!1],b=this.iterator();b.hasNext();)for(var E=b.next().getLabel(),A=0;A<2;A++)E.isLine(A)&&E.getLocation(A)===N.BOUNDARY&&(f[A]=!0);for(var J=this.iterator();J.hasNext();)for(var at=J.next(),yt=at.getLabel(),St=0;St<2;St++)if(yt.isAnyNull(St)){var Bt=N.NONE;if(f[St])Bt=N.EXTERIOR;else{var Yt=at.getCoordinate();Bt=this.getLocation(St,Yt,u)}yt.setAllLocationsIfNull(St,Bt)}},mn.prototype.getDegree=function(){return this._edgeMap.size()},mn.prototype.insertEdgeEnd=function(u,f){this._edgeMap.put(u,f),this._edgeList=null},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var Ts=function(u){function f(){u.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var b=null,E=null,A=this._SCANNING_FOR_INCOMING,J=0;J<this._resultAreaEdgeList.size();J++){var at=this._resultAreaEdgeList.get(J),yt=at.getSym();if(at.getLabel().isArea())switch(b===null&&at.isInResult()&&(b=at),A){case this._SCANNING_FOR_INCOMING:if(!yt.isInResult())continue;E=yt,A=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!at.isInResult())continue;E.setNext(at),A=this._SCANNING_FOR_INCOMING}}if(A===this._LINKING_TO_OUTGOING){if(b===null)throw new _r("no outgoing dirEdge found",this.getCoordinate());Q.isTrue(b.isInResult(),"unable to link last incoming dirEdge"),E.setNext(b)}},f.prototype.insert=function(b){var E=b;this.insertEdgeEnd(E,E)},f.prototype.getRightmostEdge=function(){var b=this.getEdges(),E=b.size();if(E<1)return null;var A=b.get(0);if(E===1)return A;var J=b.get(E-1),at=A.getQuadrant(),yt=J.getQuadrant();return M.isNorthern(at)&&M.isNorthern(yt)?A:M.isNorthern(at)||M.isNorthern(yt)?A.getDy()!==0?A:J.getDy()!==0?J:(Q.shouldNeverReachHere("found two horizontal edges incident on node"),null):J},f.prototype.print=function(b){rt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var E=this.iterator();E.hasNext();){var A=E.next();b.print("out "),A.print(b),b.println(),b.print("in "),A.getSym().print(b),b.println()}},f.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new $t;for(var b=this.iterator();b.hasNext();){var E=b.next();(E.isInResult()||E.getSym().isInResult())&&this._resultAreaEdgeList.add(E)}return this._resultAreaEdgeList},f.prototype.updateLabelling=function(b){for(var E=this.iterator();E.hasNext();){var A=E.next().getLabel();A.setAllLocationsIfNull(0,b.getLocation(0)),A.setAllLocationsIfNull(1,b.getLocation(1))}},f.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var b=null,E=null,A=this._edgeList.size()-1;A>=0;A--){var J=this._edgeList.get(A),at=J.getSym();E===null&&(E=at),b!==null&&at.setNext(b),b=J}E.setNext(b)},f.prototype.computeDepths=function(){if(arguments.length===1){var b=arguments[0],E=this.findIndex(b),A=b.getDepth(oe.LEFT),J=b.getDepth(oe.RIGHT),at=this.computeDepths(E+1,this._edgeList.size(),A);if(this.computeDepths(0,E,at)!==J)throw new _r("depth mismatch at "+b.getCoordinate())}else if(arguments.length===3){for(var yt=arguments[0],St=arguments[1],Bt=arguments[2],Yt=yt;Yt<St;Yt++){var ee=this._edgeList.get(Yt);ee.setEdgeDepths(oe.RIGHT,Bt),Bt=ee.getDepth(oe.LEFT)}return Bt}},f.prototype.mergeSymLabels=function(){for(var b=this.iterator();b.hasNext();){var E=b.next();E.getLabel().merge(E.getSym().getLabel())}},f.prototype.linkMinimalDirectedEdges=function(b){for(var E=null,A=null,J=this._SCANNING_FOR_INCOMING,at=this._resultAreaEdgeList.size()-1;at>=0;at--){var yt=this._resultAreaEdgeList.get(at),St=yt.getSym();switch(E===null&&yt.getEdgeRing()===b&&(E=yt),J){case this._SCANNING_FOR_INCOMING:if(St.getEdgeRing()!==b)continue;A=St,J=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(yt.getEdgeRing()!==b)continue;A.setNextMin(yt),J=this._SCANNING_FOR_INCOMING}}J===this._LINKING_TO_OUTGOING&&(Q.isTrue(E!==null,"found null for first outgoing dirEdge"),Q.isTrue(E.getEdgeRing()===b,"unable to link last incoming dirEdge"),A.setNextMin(E))},f.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var b=0,E=this.iterator();E.hasNext();)E.next().isInResult()&&b++;return b}if(arguments.length===1){for(var A=arguments[0],J=0,at=this.iterator();at.hasNext();)at.next().getEdgeRing()===A&&J++;return J}},f.prototype.getLabel=function(){return this._label},f.prototype.findCoveredLineEdges=function(){for(var b=N.NONE,E=this.iterator();E.hasNext();){var A=E.next(),J=A.getSym();if(!A.isLineEdge()){if(A.isInResult()){b=N.INTERIOR;break}if(J.isInResult()){b=N.EXTERIOR;break}}}if(b===N.NONE)return null;for(var at=b,yt=this.iterator();yt.hasNext();){var St=yt.next(),Bt=St.getSym();St.isLineEdge()?St.getEdge().setCovered(at===N.INTERIOR):(St.isInResult()&&(at=N.EXTERIOR),Bt.isInResult()&&(at=N.INTERIOR))}},f.prototype.computeLabelling=function(b){u.prototype.computeLabelling.call(this,b),this._label=new fi(N.NONE);for(var E=this.iterator();E.hasNext();)for(var A=E.next().getEdge().getLabel(),J=0;J<2;J++){var at=A.getLocation(J);at!==N.INTERIOR&&at!==N.BOUNDARY||this._label.setLocation(J,N.INTERIOR)}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(mn),ko=function(u){function f(){u.apply(this,arguments)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.createNode=function(b){return new Yr(b,new Ts)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(ht),$s=function u(){this._pts=null,this._orientation=null;var f=arguments[0];this._pts=f,this._orientation=u.orientation(f)};$s.prototype.compareTo=function(u){var f=u;return $s.compareOriented(this._pts,this._orientation,f._pts,f._orientation)},$s.prototype.interfaces_=function(){return[U]},$s.prototype.getClass=function(){return $s},$s.orientation=function(u){return ue.increasingDirection(u)===1},$s.compareOriented=function(u,f,b,E){for(var A=f?1:-1,J=E?1:-1,at=f?u.length:-1,yt=E?b.length:-1,St=f?0:u.length-1,Bt=E?0:b.length-1;;){var Yt=u[St].compareTo(b[Bt]);if(Yt!==0)return Yt;var ee=(St+=A)===at,xe=(Bt+=J)===yt;if(ee&&!xe)return-1;if(!ee&&xe)return 1;if(ee&&xe)return 0}};var Kr=function(){this._edges=new $t,this._ocaMap=new d};Kr.prototype.print=function(u){u.print("MULTILINESTRING ( ");for(var f=0;f<this._edges.size();f++){var b=this._edges.get(f);f>0&&u.print(","),u.print("(");for(var E=b.getCoordinates(),A=0;A<E.length;A++)A>0&&u.print(","),u.print(E[A].x+" "+E[A].y);u.println(")")}u.print(")  ")},Kr.prototype.addAll=function(u){for(var f=u.iterator();f.hasNext();)this.add(f.next())},Kr.prototype.findEdgeIndex=function(u){for(var f=0;f<this._edges.size();f++)if(this._edges.get(f).equals(u))return f;return-1},Kr.prototype.iterator=function(){return this._edges.iterator()},Kr.prototype.getEdges=function(){return this._edges},Kr.prototype.get=function(u){return this._edges.get(u)},Kr.prototype.findEqualEdge=function(u){var f=new $s(u.getCoordinates());return this._ocaMap.get(f)},Kr.prototype.add=function(u){this._edges.add(u);var f=new $s(u.getCoordinates());this._ocaMap.put(f,u)},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr};var mo=function(){};mo.prototype.processIntersections=function(u,f,b,E){},mo.prototype.isDone=function(){},mo.prototype.interfaces_=function(){return[]},mo.prototype.getClass=function(){return mo};var ln=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var u=arguments[0];this._li=u};ln.prototype.isTrivialIntersection=function(u,f,b,E){if(u===b&&this._li.getIntersectionNum()===1){if(ln.isAdjacentSegments(f,E))return!0;if(u.isClosed()){var A=u.size()-1;if(f===0&&E===A||E===0&&f===A)return!0}}return!1},ln.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ln.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ln.prototype.getLineIntersector=function(){return this._li},ln.prototype.hasProperIntersection=function(){return this._hasProper},ln.prototype.processIntersections=function(u,f,b,E){if(u===b&&f===E)return null;this.numTests++;var A=u.getCoordinates()[f],J=u.getCoordinates()[f+1],at=b.getCoordinates()[E],yt=b.getCoordinates()[E+1];this._li.computeIntersection(A,J,at,yt),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(u,f,b,E)||(this._hasIntersection=!0,u.addIntersections(this._li,f,0),b.addIntersections(this._li,E,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},ln.prototype.hasIntersection=function(){return this._hasIntersection},ln.prototype.isDone=function(){return!1},ln.prototype.hasInteriorIntersection=function(){return this._hasInterior},ln.prototype.interfaces_=function(){return[mo]},ln.prototype.getClass=function(){return ln},ln.isAdjacentSegments=function(u,f){return Math.abs(u-f)===1};var vs=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var u=arguments[0],f=arguments[1],b=arguments[2];this.coord=new G(u),this.segmentIndex=f,this.dist=b};vs.prototype.getSegmentIndex=function(){return this.segmentIndex},vs.prototype.getCoordinate=function(){return this.coord},vs.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex),u.println(" dist = "+this.dist)},vs.prototype.compareTo=function(u){var f=u;return this.compare(f.segmentIndex,f.dist)},vs.prototype.isEndPoint=function(u){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===u},vs.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},vs.prototype.getDistance=function(){return this.dist},vs.prototype.compare=function(u,f){return this.segmentIndex<u?-1:this.segmentIndex>u?1:this.dist<f?-1:this.dist>f?1:0},vs.prototype.interfaces_=function(){return[U]},vs.prototype.getClass=function(){return vs};var Xn=function(){this._nodeMap=new d,this.edge=null;var u=arguments[0];this.edge=u};Xn.prototype.print=function(u){u.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(u)},Xn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Xn.prototype.addSplitEdges=function(u){this.addEndpoints();for(var f=this.iterator(),b=f.next();f.hasNext();){var E=f.next(),A=this.createSplitEdge(b,E);u.add(A),b=E}},Xn.prototype.addEndpoints=function(){var u=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[u],u,0)},Xn.prototype.createSplitEdge=function(u,f){var b=f.segmentIndex-u.segmentIndex+2,E=this.edge.pts[f.segmentIndex],A=f.dist>0||!f.coord.equals2D(E);A||b--;var J=new Array(b).fill(null),at=0;J[at++]=new G(u.coord);for(var yt=u.segmentIndex+1;yt<=f.segmentIndex;yt++)J[at++]=this.edge.pts[yt];return A&&(J[at]=f.coord),new Lo(J,new fi(this.edge._label))},Xn.prototype.add=function(u,f,b){var E=new vs(u,f,b),A=this._nodeMap.get(E);return A!==null?A:(this._nodeMap.put(E,E),E)},Xn.prototype.isIntersection=function(u){for(var f=this.iterator();f.hasNext();)if(f.next().coord.equals(u))return!0;return!1},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Ys=function(){};Ys.prototype.getChainStartIndices=function(u){var f=0,b=new $t;b.add(new R(f));do{var E=this.findChainEnd(u,f);b.add(new R(E)),f=E}while(f<u.length-1);return Ys.toIntArray(b)},Ys.prototype.findChainEnd=function(u,f){for(var b=M.quadrant(u[f],u[f+1]),E=f+1;E<u.length&&M.quadrant(u[E-1],u[E])===b;)E++;return E-1},Ys.prototype.interfaces_=function(){return[]},Ys.prototype.getClass=function(){return Ys},Ys.toIntArray=function(u){for(var f=new Array(u.size()).fill(null),b=0;b<f.length;b++)f[b]=u.get(b).intValue();return f};var cs=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new wt,this.env2=new wt;var u=arguments[0];this.e=u,this.pts=u.getCoordinates();var f=new Ys;this.startIndex=f.getChainStartIndices(this.pts)};cs.prototype.getCoordinates=function(){return this.pts},cs.prototype.getMaxX=function(u){var f=this.pts[this.startIndex[u]].x,b=this.pts[this.startIndex[u+1]].x;return f>b?f:b},cs.prototype.getMinX=function(u){var f=this.pts[this.startIndex[u]].x,b=this.pts[this.startIndex[u+1]].x;return f<b?f:b},cs.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var u=arguments[0],f=arguments[1],b=arguments[2],E=arguments[3];this.computeIntersectsForChain(this.startIndex[u],this.startIndex[u+1],f,f.startIndex[b],f.startIndex[b+1],E)}else if(arguments.length===6){var A=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3],St=arguments[4],Bt=arguments[5],Yt=this.pts[A],ee=this.pts[J],xe=at.pts[yt],Me=at.pts[St];if(J-A==1&&St-yt==1)return Bt.addIntersections(this.e,A,at.e,yt),null;if(this.env1.init(Yt,ee),this.env2.init(xe,Me),!this.env1.intersects(this.env2))return null;var Be=Math.trunc((A+J)/2),qe=Math.trunc((yt+St)/2);A<Be&&(yt<qe&&this.computeIntersectsForChain(A,Be,at,yt,qe,Bt),qe<St&&this.computeIntersectsForChain(A,Be,at,qe,St,Bt)),Be<J&&(yt<qe&&this.computeIntersectsForChain(Be,J,at,yt,qe,Bt),qe<St&&this.computeIntersectsForChain(Be,J,at,qe,St,Bt))}},cs.prototype.getStartIndexes=function(){return this.startIndex},cs.prototype.computeIntersects=function(u,f){for(var b=0;b<this.startIndex.length-1;b++)for(var E=0;E<u.startIndex.length-1;E++)this.computeIntersectsForChain(b,u,E,f)},cs.prototype.interfaces_=function(){return[]},cs.prototype.getClass=function(){return cs};var un=function u(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var f=0;f<2;f++)for(var b=0;b<3;b++)this._depth[f][b]=u.NULL_VALUE},Zs={NULL_VALUE:{configurable:!0}};un.prototype.getDepth=function(u,f){return this._depth[u][f]},un.prototype.setDepth=function(u,f,b){this._depth[u][f]=b},un.prototype.isNull=function(){if(arguments.length===0){for(var u=0;u<2;u++)for(var f=0;f<3;f++)if(this._depth[u][f]!==un.NULL_VALUE)return!1;return!0}if(arguments.length===1){var b=arguments[0];return this._depth[b][1]===un.NULL_VALUE}if(arguments.length===2){var E=arguments[0],A=arguments[1];return this._depth[E][A]===un.NULL_VALUE}},un.prototype.normalize=function(){for(var u=0;u<2;u++)if(!this.isNull(u)){var f=this._depth[u][1];this._depth[u][2]<f&&(f=this._depth[u][2]),f<0&&(f=0);for(var b=1;b<3;b++){var E=0;this._depth[u][b]>f&&(E=1),this._depth[u][b]=E}}},un.prototype.getDelta=function(u){return this._depth[u][oe.RIGHT]-this._depth[u][oe.LEFT]},un.prototype.getLocation=function(u,f){return this._depth[u][f]<=0?N.EXTERIOR:N.INTERIOR},un.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},un.prototype.add=function(){if(arguments.length===1)for(var u=arguments[0],f=0;f<2;f++)for(var b=1;b<3;b++){var E=u.getLocation(f,b);E!==N.EXTERIOR&&E!==N.INTERIOR||(this.isNull(f,b)?this._depth[f][b]=un.depthAtLocation(E):this._depth[f][b]+=un.depthAtLocation(E))}else if(arguments.length===3){var A=arguments[0],J=arguments[1];arguments[2]===N.INTERIOR&&this._depth[A][J]++}},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.depthAtLocation=function(u){return u===N.EXTERIOR?0:u===N.INTERIOR?1:un.NULL_VALUE},Zs.NULL_VALUE.get=function(){return-1},Object.defineProperties(un,Zs);var Lo=function(u){function f(){if(u.call(this),this.pts=null,this._env=null,this.eiList=new Xn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new un,this._depthDelta=0,arguments.length===1){var b=arguments[0];f.call(this,b,null)}else if(arguments.length===2){var E=arguments[0],A=arguments[1];this.pts=E,this._label=A}}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.getDepth=function(){return this._depth},f.prototype.getCollapsedEdge=function(){var b=new Array(2).fill(null);return b[0]=this.pts[0],b[1]=this.pts[1],new f(b,fi.toLineLabel(this._label))},f.prototype.isIsolated=function(){return this._isIsolated},f.prototype.getCoordinates=function(){return this.pts},f.prototype.setIsolated=function(b){this._isIsolated=b},f.prototype.setName=function(b){this._name=b},f.prototype.equals=function(b){if(!(b instanceof f))return!1;var E=b;if(this.pts.length!==E.pts.length)return!1;for(var A=!0,J=!0,at=this.pts.length,yt=0;yt<this.pts.length;yt++)if(this.pts[yt].equals2D(E.pts[yt])||(A=!1),this.pts[yt].equals2D(E.pts[--at])||(J=!1),!A&&!J)return!1;return!0},f.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var b=arguments[0];return this.pts[b]}},f.prototype.print=function(b){b.print("edge "+this._name+": "),b.print("LINESTRING (");for(var E=0;E<this.pts.length;E++)E>0&&b.print(","),b.print(this.pts[E].x+" "+this.pts[E].y);b.print(")  "+this._label+" "+this._depthDelta)},f.prototype.computeIM=function(b){f.updateIM(this._label,b)},f.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},f.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},f.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},f.prototype.getDepthDelta=function(){return this._depthDelta},f.prototype.getNumPoints=function(){return this.pts.length},f.prototype.printReverse=function(b){b.print("edge "+this._name+": ");for(var E=this.pts.length-1;E>=0;E--)b.print(this.pts[E]+" ");b.println("")},f.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new cs(this)),this._mce},f.prototype.getEnvelope=function(){if(this._env===null){this._env=new wt;for(var b=0;b<this.pts.length;b++)this._env.expandToInclude(this.pts[b])}return this._env},f.prototype.addIntersection=function(b,E,A,J){var at=new G(b.getIntersection(J)),yt=E,St=b.getEdgeDistance(A,J),Bt=yt+1;if(Bt<this.pts.length){var Yt=this.pts[Bt];at.equals2D(Yt)&&(yt=Bt,St=0)}this.eiList.add(at,yt,St)},f.prototype.toString=function(){var b=new T;b.append("edge "+this._name+": "),b.append("LINESTRING (");for(var E=0;E<this.pts.length;E++)E>0&&b.append(","),b.append(this.pts[E].x+" "+this.pts[E].y);return b.append(")  "+this._label+" "+this._depthDelta),b.toString()},f.prototype.isPointwiseEqual=function(b){if(this.pts.length!==b.pts.length)return!1;for(var E=0;E<this.pts.length;E++)if(!this.pts[E].equals2D(b.pts[E]))return!1;return!0},f.prototype.setDepthDelta=function(b){this._depthDelta=b},f.prototype.getEdgeIntersectionList=function(){return this.eiList},f.prototype.addIntersections=function(b,E,A){for(var J=0;J<b.getIntersectionNum();J++)this.addIntersection(b,E,A,J)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.updateIM=function(){if(arguments.length!==2)return u.prototype.updateIM.apply(this,arguments);var b=arguments[0],E=arguments[1];E.setAtLeastIfValid(b.getLocation(0,oe.ON),b.getLocation(1,oe.ON),1),b.isArea()&&(E.setAtLeastIfValid(b.getLocation(0,oe.LEFT),b.getLocation(1,oe.LEFT),2),E.setAtLeastIfValid(b.getLocation(0,oe.RIGHT),b.getLocation(1,oe.RIGHT),2))},f}(je),wn=function(u){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Kr,this._bufParams=u||null};wn.prototype.setWorkingPrecisionModel=function(u){this._workingPrecisionModel=u},wn.prototype.insertUniqueEdge=function(u){var f=this._edgeList.findEqualEdge(u);if(f!==null){var b=f.getLabel(),E=u.getLabel();f.isPointwiseEqual(u)||(E=new fi(u.getLabel())).flip(),b.merge(E);var A=wn.depthDelta(E),J=f.getDepthDelta()+A;f.setDepthDelta(J)}else this._edgeList.add(u),u.setDepthDelta(wn.depthDelta(u.getLabel()))},wn.prototype.buildSubgraphs=function(u,f){for(var b=new $t,E=u.iterator();E.hasNext();){var A=E.next(),J=A.getRightmostCoordinate(),at=new fo(b).getDepth(J);A.computeDepth(at),A.findResultEdges(),b.add(A),f.add(A.getDirectedEdges(),A.getNodes())}},wn.prototype.createSubgraphs=function(u){for(var f=new $t,b=u.getNodes().iterator();b.hasNext();){var E=b.next();if(!E.isVisited()){var A=new yr;A.create(E),f.add(A)}}return Ce.sort(f,Ce.reverseOrder()),f},wn.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},wn.prototype.getNoder=function(u){if(this._workingNoder!==null)return this._workingNoder;var f=new sl,b=new lt;return b.setPrecisionModel(u),f.setSegmentIntersector(new ln(b)),f},wn.prototype.buffer=function(u,f){var b=this._workingPrecisionModel;b===null&&(b=u.getPrecisionModel()),this._geomFact=u.getFactory();var E=new Tn(b,this._bufParams),A=new Dn(u,f,E).getCurves();if(A.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(A,b),this._graph=new xt(new ko),this._graph.addEdges(this._edgeList.getEdges());var J=this.createSubgraphs(this._graph),at=new Lt(this._geomFact);this.buildSubgraphs(J,at);var yt=at.getPolygons();return yt.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(yt)},wn.prototype.computeNodedEdges=function(u,f){var b=this.getNoder(f);b.computeNodes(u);for(var E=b.getNodedSubstrings().iterator();E.hasNext();){var A=E.next(),J=A.getCoordinates();if(J.length!==2||!J[0].equals2D(J[1])){var at=A.getData(),yt=new Lo(A.getCoordinates(),new fi(at));this.insertUniqueEdge(yt)}}},wn.prototype.setNoder=function(u){this._workingNoder=u},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.depthDelta=function(u){var f=u.getLocation(0,oe.LEFT),b=u.getLocation(0,oe.RIGHT);return f===N.INTERIOR&&b===N.EXTERIOR?1:f===N.EXTERIOR&&b===N.INTERIOR?-1:0},wn.convertSegStrings=function(u){for(var f=new Se,b=new $t;u.hasNext();){var E=u.next(),A=f.createLineString(E.getCoordinates());b.add(A)}return f.buildGeometry(b)};var Ps=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var u=arguments[0],f=arguments[1];this._noder=u,this._scaleFactor=f,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var b=arguments[0],E=arguments[1],A=arguments[2],J=arguments[3];this._noder=b,this._scaleFactor=E,this._offsetX=A,this._offsetY=J,this._isScaled=!this.isIntegerPrecision()}};Ps.prototype.rescale=function(){if(w(arguments[0],ce))for(var u=arguments[0].iterator();u.hasNext();){var f=u.next();this.rescale(f.getCoordinates())}else if(arguments[0]instanceof Array){for(var b=arguments[0],E=0;E<b.length;E++)b[E].x=b[E].x/this._scaleFactor+this._offsetX,b[E].y=b[E].y/this._scaleFactor+this._offsetY;b.length===2&&b[0].equals2D(b[1])&&rt.out.println(b)}},Ps.prototype.scale=function(){if(w(arguments[0],ce)){for(var u=arguments[0],f=new $t,b=u.iterator();b.hasNext();){var E=b.next();f.add(new Sr(this.scale(E.getCoordinates()),E.getData()))}return f}if(arguments[0]instanceof Array){for(var A=arguments[0],J=new Array(A.length).fill(null),at=0;at<A.length;at++)J[at]=new G(Math.round((A[at].x-this._offsetX)*this._scaleFactor),Math.round((A[at].y-this._offsetY)*this._scaleFactor),A[at].z);return ue.removeRepeatedPoints(J)}},Ps.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},Ps.prototype.getNodedSubstrings=function(){var u=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(u),u},Ps.prototype.computeNodes=function(u){var f=u;this._isScaled&&(f=this.scale(u)),this._noder.computeNodes(f)},Ps.prototype.interfaces_=function(){return[Xs]},Ps.prototype.getClass=function(){return Ps};var bs=function(){this._li=new lt,this._segStrings=null;var u=arguments[0];this._segStrings=u},Ds={fact:{configurable:!0}};bs.prototype.checkEndPtVertexIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var f=u.next().getCoordinates();this.checkEndPtVertexIntersections(f[0],this._segStrings),this.checkEndPtVertexIntersections(f[f.length-1],this._segStrings)}else if(arguments.length===2){for(var b=arguments[0],E=arguments[1].iterator();E.hasNext();)for(var A=E.next().getCoordinates(),J=1;J<A.length-1;J++)if(A[J].equals(b))throw new gt("found endpt/interior pt intersection at index "+J+" :pt "+b)}},bs.prototype.checkInteriorIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();)for(var f=u.next(),b=this._segStrings.iterator();b.hasNext();){var E=b.next();this.checkInteriorIntersections(f,E)}else if(arguments.length===2)for(var A=arguments[0],J=arguments[1],at=A.getCoordinates(),yt=J.getCoordinates(),St=0;St<at.length-1;St++)for(var Bt=0;Bt<yt.length-1;Bt++)this.checkInteriorIntersections(A,St,J,Bt);else if(arguments.length===4){var Yt=arguments[0],ee=arguments[1],xe=arguments[2],Me=arguments[3];if(Yt===xe&&ee===Me)return null;var Be=Yt.getCoordinates()[ee],qe=Yt.getCoordinates()[ee+1],gr=xe.getCoordinates()[Me],qr=xe.getCoordinates()[Me+1];if(this._li.computeIntersection(Be,qe,gr,qr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Be,qe)||this.hasInteriorIntersection(this._li,gr,qr)))throw new gt("found non-noded intersection at "+Be+"-"+qe+" and "+gr+"-"+qr)}},bs.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},bs.prototype.checkCollapses=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var f=u.next();this.checkCollapses(f)}else if(arguments.length===1)for(var b=arguments[0].getCoordinates(),E=0;E<b.length-2;E++)this.checkCollapse(b[E],b[E+1],b[E+2])},bs.prototype.hasInteriorIntersection=function(u,f,b){for(var E=0;E<u.getIntersectionNum();E++){var A=u.getIntersection(E);if(!A.equals(f)&&!A.equals(b))return!0}return!1},bs.prototype.checkCollapse=function(u,f,b){if(u.equals(b))throw new gt("found non-noded collapse at "+bs.fact.createLineString([u,f,b]))},bs.prototype.interfaces_=function(){return[]},bs.prototype.getClass=function(){return bs},Ds.fact.get=function(){return new Se},Object.defineProperties(bs,Ds);var Pn=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var u=arguments[0],f=arguments[1],b=arguments[2];if(this._originalPt=u,this._pt=u,this._scaleFactor=f,this._li=b,f<=0)throw new S("Scale factor must be non-zero");f!==1&&(this._pt=new G(this.scale(u.x),this.scale(u.y)),this._p0Scaled=new G,this._p1Scaled=new G),this.initCorners(this._pt)},To={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Pn.prototype.intersectsScaled=function(u,f){var b=Math.min(u.x,f.x),E=Math.max(u.x,f.x),A=Math.min(u.y,f.y),J=Math.max(u.y,f.y),at=this._maxx<b||this._minx>E||this._maxy<A||this._miny>J;if(at)return!1;var yt=this.intersectsToleranceSquare(u,f);return Q.isTrue(!(at&&yt),"Found bad envelope test"),yt},Pn.prototype.initCorners=function(u){this._minx=u.x-.5,this._maxx=u.x+.5,this._miny=u.y-.5,this._maxy=u.y+.5,this._corner[0]=new G(this._maxx,this._maxy),this._corner[1]=new G(this._minx,this._maxy),this._corner[2]=new G(this._minx,this._miny),this._corner[3]=new G(this._maxx,this._miny)},Pn.prototype.intersects=function(u,f){return this._scaleFactor===1?this.intersectsScaled(u,f):(this.copyScaled(u,this._p0Scaled),this.copyScaled(f,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Pn.prototype.scale=function(u){return Math.round(u*this._scaleFactor)},Pn.prototype.getCoordinate=function(){return this._originalPt},Pn.prototype.copyScaled=function(u,f){f.x=this.scale(u.x),f.y=this.scale(u.y)},Pn.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var u=Pn.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new wt(this._originalPt.x-u,this._originalPt.x+u,this._originalPt.y-u,this._originalPt.y+u)}return this._safeEnv},Pn.prototype.intersectsPixelClosure=function(u,f){return this._li.computeIntersection(u,f,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,f,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,f,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,f,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},Pn.prototype.intersectsToleranceSquare=function(u,f){var b=!1,E=!1;return this._li.computeIntersection(u,f,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(u,f,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(b=!0),this._li.computeIntersection(u,f,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(E=!0),this._li.computeIntersection(u,f,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!b||!E)||!!u.equals(this._pt)||!!f.equals(this._pt))))},Pn.prototype.addSnappedNode=function(u,f){var b=u.getCoordinate(f),E=u.getCoordinate(f+1);return!!this.intersects(b,E)&&(u.addIntersection(this.getCoordinate(),f),!0)},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},To.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(Pn,To);var ra=function(){this.tempEnv1=new wt,this.selectedSegment=new Pe};ra.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var u=arguments[0],f=arguments[1];u.getLineSegment(f,this.selectedSegment),this.select(this.selectedSegment)}}},ra.prototype.interfaces_=function(){return[]},ra.prototype.getClass=function(){return ra};var is=function(){this._index=null;var u=arguments[0];this._index=u},na={HotPixelSnapAction:{configurable:!0}};is.prototype.snap=function(){if(arguments.length===1){var u=arguments[0];return this.snap(u,null,-1)}if(arguments.length===3){var f=arguments[0],b=arguments[1],E=arguments[2],A=f.getSafeEnvelope(),J=new al(f,b,E);return this._index.query(A,{interfaces_:function(){return[Vt]},visitItem:function(at){at.select(A,J)}}),J.isNodeAdded()}},is.prototype.interfaces_=function(){return[]},is.prototype.getClass=function(){return is},na.HotPixelSnapAction.get=function(){return al},Object.defineProperties(is,na);var al=function(u){function f(){u.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var b=arguments[0],E=arguments[1],A=arguments[2];this._hotPixel=b,this._parentEdge=E,this._hotPixelVertexIndex=A}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.isNodeAdded=function(){return this._isNodeAdded},f.prototype.select=function(){if(arguments.length!==2)return u.prototype.select.apply(this,arguments);var b=arguments[0],E=arguments[1],A=b.getContext();if(this._parentEdge!==null&&A===this._parentEdge&&E===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(A,E)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(ra),Ks=function(){this._li=null,this._interiorIntersections=null;var u=arguments[0];this._li=u,this._interiorIntersections=new $t};Ks.prototype.processIntersections=function(u,f,b,E){if(u===b&&f===E)return null;var A=u.getCoordinates()[f],J=u.getCoordinates()[f+1],at=b.getCoordinates()[E],yt=b.getCoordinates()[E+1];if(this._li.computeIntersection(A,J,at,yt),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var St=0;St<this._li.getIntersectionNum();St++)this._interiorIntersections.add(this._li.getIntersection(St));u.addIntersections(this._li,f,0),b.addIntersections(this._li,E,1)}},Ks.prototype.isDone=function(){return!1},Ks.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Ks.prototype.interfaces_=function(){return[mo]},Ks.prototype.getClass=function(){return Ks};var rs=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var u=arguments[0];this._pm=u,this._li=new lt,this._li.setPrecisionModel(u),this._scaleFactor=u.getScale()};rs.prototype.checkCorrectness=function(u){var f=Sr.getNodedSubstrings(u),b=new bs(f);try{b.checkValid()}catch(E){if(!(E instanceof W))throw E;E.printStackTrace()}},rs.prototype.getNodedSubstrings=function(){return Sr.getNodedSubstrings(this._nodedSegStrings)},rs.prototype.snapRound=function(u,f){var b=this.findInteriorIntersections(u,f);this.computeIntersectionSnaps(b),this.computeVertexSnaps(u)},rs.prototype.findInteriorIntersections=function(u,f){var b=new Ks(f);return this._noder.setSegmentIntersector(b),this._noder.computeNodes(u),b.getInteriorIntersections()},rs.prototype.computeVertexSnaps=function(){if(w(arguments[0],ce))for(var u=arguments[0].iterator();u.hasNext();){var f=u.next();this.computeVertexSnaps(f)}else if(arguments[0]instanceof Sr)for(var b=arguments[0],E=b.getCoordinates(),A=0;A<E.length;A++){var J=new Pn(E[A],this._scaleFactor,this._li);this._pointSnapper.snap(J,b,A)&&b.addIntersection(E[A],A)}},rs.prototype.computeNodes=function(u){this._nodedSegStrings=u,this._noder=new sl,this._pointSnapper=new is(this._noder.getIndex()),this.snapRound(u,this._li)},rs.prototype.computeIntersectionSnaps=function(u){for(var f=u.iterator();f.hasNext();){var b=f.next(),E=new Pn(b,this._scaleFactor,this._li);this._pointSnapper.snap(E)}},rs.prototype.interfaces_=function(){return[Xs]},rs.prototype.getClass=function(){return rs};var Hr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Pi,this._resultGeometry=null,this._saveException=null,arguments.length===1){var u=arguments[0];this._argGeom=u}else if(arguments.length===2){var f=arguments[0],b=arguments[1];this._argGeom=f,this._bufParams=b}},Js={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Hr.prototype.bufferFixedPrecision=function(u){var f=new Ps(new rs(new me(1)),u.getScale()),b=new wn(this._bufParams);b.setWorkingPrecisionModel(u),b.setNoder(f),this._resultGeometry=b.buffer(this._argGeom,this._distance)},Hr.prototype.bufferReducedPrecision=function(){var u=this;if(arguments.length===0){for(var f=Hr.MAX_PRECISION_DIGITS;f>=0;f--){try{u.bufferReducedPrecision(f)}catch(J){if(!(J instanceof _r))throw J;u._saveException=J}if(u._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var b=arguments[0],E=Hr.precisionScaleFactor(this._argGeom,this._distance,b),A=new me(E);this.bufferFixedPrecision(A)}},Hr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var u=this._argGeom.getFactory().getPrecisionModel();u.getType()===me.FIXED?this.bufferFixedPrecision(u):this.bufferReducedPrecision()},Hr.prototype.setQuadrantSegments=function(u){this._bufParams.setQuadrantSegments(u)},Hr.prototype.bufferOriginalPrecision=function(){try{var u=new wn(this._bufParams);this._resultGeometry=u.buffer(this._argGeom,this._distance)}catch(f){if(!(f instanceof gt))throw f;this._saveException=f}},Hr.prototype.getResultGeometry=function(u){return this._distance=u,this.computeGeometry(),this._resultGeometry},Hr.prototype.setEndCapStyle=function(u){this._bufParams.setEndCapStyle(u)},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.bufferOp=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];return new Hr(u).getResultGeometry(f)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Gt&&typeof arguments[1]=="number"){var b=arguments[0],E=arguments[1],A=arguments[2],J=new Hr(b);return J.setQuadrantSegments(A),J.getResultGeometry(E)}if(arguments[2]instanceof Pi&&arguments[0]instanceof Gt&&typeof arguments[1]=="number"){var at=arguments[0],yt=arguments[1],St=arguments[2];return new Hr(at,St).getResultGeometry(yt)}}else if(arguments.length===4){var Bt=arguments[0],Yt=arguments[1],ee=arguments[2],xe=arguments[3],Me=new Hr(Bt);return Me.setQuadrantSegments(ee),Me.setEndCapStyle(xe),Me.getResultGeometry(Yt)}},Hr.precisionScaleFactor=function(u,f,b){var E=u.getEnvelopeInternal(),A=C.max(Math.abs(E.getMaxX()),Math.abs(E.getMaxY()),Math.abs(E.getMinX()),Math.abs(E.getMinY()))+2*(f>0?f:0),J=b-Math.trunc(Math.log(A)/Math.log(10)+1);return Math.pow(10,J)},Js.CAP_ROUND.get=function(){return Pi.CAP_ROUND},Js.CAP_BUTT.get=function(){return Pi.CAP_FLAT},Js.CAP_FLAT.get=function(){return Pi.CAP_FLAT},Js.CAP_SQUARE.get=function(){return Pi.CAP_SQUARE},Js.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Hr,Js);var zr=function(){this._pt=[new G,new G],this._distance=O.NaN,this._isNull=!0};zr.prototype.getCoordinates=function(){return this._pt},zr.prototype.getCoordinate=function(u){return this._pt[u]},zr.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var E=f.distance(b);E<this._distance&&this.initialize(f,b,E)}},zr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],f=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(f),this._distance=u.distance(f),this._isNull=!1}else if(arguments.length===3){var b=arguments[0],E=arguments[1],A=arguments[2];this._pt[0].setCoordinate(b),this._pt[1].setCoordinate(E),this._distance=A,this._isNull=!1}},zr.prototype.getDistance=function(){return this._distance},zr.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var E=f.distance(b);E>this._distance&&this.initialize(f,b,E)}},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr};var ns=function(){};ns.prototype.interfaces_=function(){return[]},ns.prototype.getClass=function(){return ns},ns.computeDistance=function(){if(arguments[2]instanceof zr&&arguments[0]instanceof oi&&arguments[1]instanceof G)for(var u=arguments[0],f=arguments[1],b=arguments[2],E=u.getCoordinates(),A=new Pe,J=0;J<E.length-1;J++){A.setCoordinates(E[J],E[J+1]);var at=A.closestPoint(f);b.setMinimum(at,f)}else if(arguments[2]instanceof zr&&arguments[0]instanceof Ht&&arguments[1]instanceof G){var yt=arguments[0],St=arguments[1],Bt=arguments[2];ns.computeDistance(yt.getExteriorRing(),St,Bt);for(var Yt=0;Yt<yt.getNumInteriorRing();Yt++)ns.computeDistance(yt.getInteriorRingN(Yt),St,Bt)}else if(arguments[2]instanceof zr&&arguments[0]instanceof Gt&&arguments[1]instanceof G){var ee=arguments[0],xe=arguments[1],Me=arguments[2];if(ee instanceof oi)ns.computeDistance(ee,xe,Me);else if(ee instanceof Ht)ns.computeDistance(ee,xe,Me);else if(ee instanceof fe)for(var Be=ee,qe=0;qe<Be.getNumGeometries();qe++){var gr=Be.getGeometryN(qe);ns.computeDistance(gr,xe,Me)}else Me.setMinimum(ee.getCoordinate(),xe)}else if(arguments[2]instanceof zr&&arguments[0]instanceof Pe&&arguments[1]instanceof G){var qr=arguments[0],Fn=arguments[1],ro=arguments[2],No=qr.closestPoint(Fn);ro.setMinimum(No,Fn)}};var Bs=function(u){this._maxPtDist=new zr,this._inputGeom=u||null},_a={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Bs.prototype.computeMaxMidpointDistance=function(u){var f=new _s(this._inputGeom);u.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())},Bs.prototype.computeMaxVertexDistance=function(u){var f=new Po(this._inputGeom);u.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())},Bs.prototype.findDistance=function(u){return this.computeMaxVertexDistance(u),this.computeMaxMidpointDistance(u),this._maxPtDist.getDistance()},Bs.prototype.getDistancePoints=function(){return this._maxPtDist},Bs.prototype.interfaces_=function(){return[]},Bs.prototype.getClass=function(){return Bs},_a.MaxPointDistanceFilter.get=function(){return Po},_a.MaxMidpointDistanceFilter.get=function(){return _s},Object.defineProperties(Bs,_a);var Po=function(u){this._maxPtDist=new zr,this._minPtDist=new zr,this._geom=u||null};Po.prototype.filter=function(u){this._minPtDist.initialize(),ns.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Po.prototype.getMaxPointDistance=function(){return this._maxPtDist},Po.prototype.interfaces_=function(){return[ie]},Po.prototype.getClass=function(){return Po};var _s=function(u){this._maxPtDist=new zr,this._minPtDist=new zr,this._geom=u||null};_s.prototype.filter=function(u,f){if(f===0)return null;var b=u.getCoordinate(f-1),E=u.getCoordinate(f),A=new G((b.x+E.x)/2,(b.y+E.y)/2);this._minPtDist.initialize(),ns.computeDistance(this._geom,A,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},_s.prototype.isDone=function(){return!1},_s.prototype.isGeometryChanged=function(){return!1},_s.prototype.getMaxPointDistance=function(){return this._maxPtDist},_s.prototype.interfaces_=function(){return[Ie]},_s.prototype.getClass=function(){return _s};var Fs=function(u){this._comps=u||null};Fs.prototype.filter=function(u){u instanceof Ht&&this._comps.add(u)},Fs.prototype.interfaces_=function(){return[$e]},Fs.prototype.getClass=function(){return Fs},Fs.getPolygons=function(){if(arguments.length===1){var u=arguments[0];return Fs.getPolygons(u,new $t)}if(arguments.length===2){var f=arguments[0],b=arguments[1];return f instanceof Ht?b.add(f):f instanceof fe&&f.apply(new Fs(b)),b}};var Jr=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var u=arguments[0];this._lines=u}else if(arguments.length===2){var f=arguments[0],b=arguments[1];this._lines=f,this._isForcedToLineString=b}};Jr.prototype.filter=function(u){if(this._isForcedToLineString&&u instanceof Qt){var f=u.getFactory().createLineString(u.getCoordinateSequence());return this._lines.add(f),null}u instanceof oi&&this._lines.add(u)},Jr.prototype.setForceToLineString=function(u){this._isForcedToLineString=u},Jr.prototype.interfaces_=function(){return[zt]},Jr.prototype.getClass=function(){return Jr},Jr.getGeometry=function(){if(arguments.length===1){var u=arguments[0];return u.getFactory().buildGeometry(Jr.getLines(u))}if(arguments.length===2){var f=arguments[0],b=arguments[1];return f.getFactory().buildGeometry(Jr.getLines(f,b))}},Jr.getLines=function(){if(arguments.length===1){var u=arguments[0];return Jr.getLines(u,!1)}if(arguments.length===2){if(w(arguments[0],ce)&&w(arguments[1],ce)){for(var f=arguments[0],b=arguments[1],E=f.iterator();E.hasNext();){var A=E.next();Jr.getLines(A,b)}return b}if(arguments[0]instanceof Gt&&typeof arguments[1]=="boolean"){var J=arguments[0],at=arguments[1],yt=new $t;return J.apply(new Jr(yt,at)),yt}if(arguments[0]instanceof Gt&&w(arguments[1],ce)){var St=arguments[0],Bt=arguments[1];return St instanceof oi?Bt.add(St):St.apply(new Jr(Bt)),Bt}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&w(arguments[0],ce)&&w(arguments[1],ce)){for(var Yt=arguments[0],ee=arguments[1],xe=arguments[2],Me=Yt.iterator();Me.hasNext();){var Be=Me.next();Jr.getLines(Be,ee,xe)}return ee}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Gt&&w(arguments[1],ce)){var qe=arguments[0],gr=arguments[1],qr=arguments[2];return qe.apply(new Jr(gr,qr)),gr}}};var fs=function(){if(this._boundaryRule=Xt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];if(u===null)throw new S("Rule must be non-null");this._boundaryRule=u}}};fs.prototype.locateInternal=function(){if(arguments[0]instanceof G&&arguments[1]instanceof Ht){var u=arguments[0],f=arguments[1];if(f.isEmpty())return N.EXTERIOR;var b=f.getExteriorRing(),E=this.locateInPolygonRing(u,b);if(E===N.EXTERIOR)return N.EXTERIOR;if(E===N.BOUNDARY)return N.BOUNDARY;for(var A=0;A<f.getNumInteriorRing();A++){var J=f.getInteriorRingN(A),at=this.locateInPolygonRing(u,J);if(at===N.INTERIOR)return N.EXTERIOR;if(at===N.BOUNDARY)return N.BOUNDARY}return N.INTERIOR}if(arguments[0]instanceof G&&arguments[1]instanceof oi){var yt=arguments[0],St=arguments[1];if(!St.getEnvelopeInternal().intersects(yt))return N.EXTERIOR;var Bt=St.getCoordinates();return St.isClosed()||!yt.equals(Bt[0])&&!yt.equals(Bt[Bt.length-1])?Et.isOnLine(yt,Bt)?N.INTERIOR:N.EXTERIOR:N.BOUNDARY}if(arguments[0]instanceof G&&arguments[1]instanceof ki){var Yt=arguments[0];return arguments[1].getCoordinate().equals2D(Yt)?N.INTERIOR:N.EXTERIOR}},fs.prototype.locateInPolygonRing=function(u,f){return f.getEnvelopeInternal().intersects(u)?Et.locatePointInRing(u,f.getCoordinates()):N.EXTERIOR},fs.prototype.intersects=function(u,f){return this.locate(u,f)!==N.EXTERIOR},fs.prototype.updateLocationInfo=function(u){u===N.INTERIOR&&(this._isIn=!0),u===N.BOUNDARY&&this._numBoundaries++},fs.prototype.computeLocation=function(u,f){if(f instanceof ki&&this.updateLocationInfo(this.locateInternal(u,f)),f instanceof oi)this.updateLocationInfo(this.locateInternal(u,f));else if(f instanceof Ht)this.updateLocationInfo(this.locateInternal(u,f));else if(f instanceof Ye)for(var b=f,E=0;E<b.getNumGeometries();E++){var A=b.getGeometryN(E);this.updateLocationInfo(this.locateInternal(u,A))}else if(f instanceof he)for(var J=f,at=0;at<J.getNumGeometries();at++){var yt=J.getGeometryN(at);this.updateLocationInfo(this.locateInternal(u,yt))}else if(f instanceof fe)for(var St=new Ls(f);St.hasNext();){var Bt=St.next();Bt!==f&&this.computeLocation(u,Bt)}},fs.prototype.locate=function(u,f){return f.isEmpty()?N.EXTERIOR:f instanceof oi?this.locateInternal(u,f):f instanceof Ht?this.locateInternal(u,f):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(u,f),this._boundaryRule.isInBoundary(this._numBoundaries)?N.BOUNDARY:this._numBoundaries>0||this._isIn?N.INTERIOR:N.EXTERIOR)},fs.prototype.interfaces_=function(){return[]},fs.prototype.getClass=function(){return fs};var gn=function u(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var f=arguments[0],b=arguments[1];u.call(this,f,u.INSIDE_AREA,b)}else if(arguments.length===3){var E=arguments[0],A=arguments[1],J=arguments[2];this._component=E,this._segIndex=A,this._pt=J}},nu={INSIDE_AREA:{configurable:!0}};gn.prototype.isInsideArea=function(){return this._segIndex===gn.INSIDE_AREA},gn.prototype.getCoordinate=function(){return this._pt},gn.prototype.getGeometryComponent=function(){return this._component},gn.prototype.getSegmentIndex=function(){return this._segIndex},gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn},nu.INSIDE_AREA.get=function(){return-1},Object.defineProperties(gn,nu);var xn=function(u){this._pts=u||null};xn.prototype.filter=function(u){u instanceof ki&&this._pts.add(u)},xn.prototype.interfaces_=function(){return[$e]},xn.prototype.getClass=function(){return xn},xn.getPoints=function(){if(arguments.length===1){var u=arguments[0];return u instanceof ki?Ce.singletonList(u):xn.getPoints(u,new $t)}if(arguments.length===2){var f=arguments[0],b=arguments[1];return f instanceof ki?b.add(f):f instanceof fe&&f.apply(new xn(b)),b}};var zs=function(){this._locations=null;var u=arguments[0];this._locations=u};zs.prototype.filter=function(u){(u instanceof ki||u instanceof oi||u instanceof Ht)&&this._locations.add(new gn(u,0,u.getCoordinate()))},zs.prototype.interfaces_=function(){return[$e]},zs.prototype.getClass=function(){return zs},zs.getLocations=function(u){var f=new $t;return u.apply(new zs(f)),f};var hn=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new fs,this._minDistanceLocation=null,this._minDistance=O.MAX_VALUE,arguments.length===2){var u=arguments[0],f=arguments[1];this._geom=[u,f],this._terminateDistance=0}else if(arguments.length===3){var b=arguments[0],E=arguments[1],A=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=b,this._geom[1]=E,this._terminateDistance=A}};hn.prototype.computeContainmentDistance=function(){if(arguments.length===0){var u=new Array(2).fill(null);if(this.computeContainmentDistance(0,u),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,u)}else if(arguments.length===2){var f=arguments[0],b=arguments[1],E=1-f,A=Fs.getPolygons(this._geom[f]);if(A.size()>0){var J=zs.getLocations(this._geom[E]);if(this.computeContainmentDistance(J,A,b),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[E]=b[0],this._minDistanceLocation[f]=b[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&w(arguments[0],He)&&w(arguments[1],He)){for(var at=arguments[0],yt=arguments[1],St=arguments[2],Bt=0;Bt<at.size();Bt++)for(var Yt=at.get(Bt),ee=0;ee<yt.size();ee++)if(this.computeContainmentDistance(Yt,yt.get(ee),St),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof gn&&arguments[1]instanceof Ht){var xe=arguments[0],Me=arguments[1],Be=arguments[2],qe=xe.getCoordinate();if(N.EXTERIOR!==this._ptLocator.locate(qe,Me))return this._minDistance=0,Be[0]=xe,Be[1]=new gn(Me,qe),null}}},hn.prototype.computeMinDistanceLinesPoints=function(u,f,b){for(var E=0;E<u.size();E++)for(var A=u.get(E),J=0;J<f.size();J++){var at=f.get(J);if(this.computeMinDistance(A,at,b),this._minDistance<=this._terminateDistance)return null}},hn.prototype.computeFacetDistance=function(){var u=new Array(2).fill(null),f=Jr.getLines(this._geom[0]),b=Jr.getLines(this._geom[1]),E=xn.getPoints(this._geom[0]),A=xn.getPoints(this._geom[1]);return this.computeMinDistanceLines(f,b,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(f,A,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(b,E,u),this.updateMinDistance(u,!0),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistancePoints(E,A,u),void this.updateMinDistance(u,!1))))},hn.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},hn.prototype.updateMinDistance=function(u,f){if(u[0]===null)return null;f?(this._minDistanceLocation[0]=u[1],this._minDistanceLocation[1]=u[0]):(this._minDistanceLocation[0]=u[0],this._minDistanceLocation[1]=u[1])},hn.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},hn.prototype.computeMinDistance=function(){if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof oi&&arguments[1]instanceof ki){var u=arguments[0],f=arguments[1],b=arguments[2];if(u.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this._minDistance)return null;for(var E=u.getCoordinates(),A=f.getCoordinate(),J=0;J<E.length-1;J++){var at=Et.distancePointLine(A,E[J],E[J+1]);if(at<this._minDistance){this._minDistance=at;var yt=new Pe(E[J],E[J+1]).closestPoint(A);b[0]=new gn(u,J,yt),b[1]=new gn(f,0,A)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof oi&&arguments[1]instanceof oi){var St=arguments[0],Bt=arguments[1],Yt=arguments[2];if(St.getEnvelopeInternal().distance(Bt.getEnvelopeInternal())>this._minDistance)return null;for(var ee=St.getCoordinates(),xe=Bt.getCoordinates(),Me=0;Me<ee.length-1;Me++)for(var Be=0;Be<xe.length-1;Be++){var qe=Et.distanceLineLine(ee[Me],ee[Me+1],xe[Be],xe[Be+1]);if(qe<this._minDistance){this._minDistance=qe;var gr=new Pe(ee[Me],ee[Me+1]),qr=new Pe(xe[Be],xe[Be+1]),Fn=gr.closestPoints(qr);Yt[0]=new gn(St,Me,Fn[0]),Yt[1]=new gn(Bt,Be,Fn[1])}if(this._minDistance<=this._terminateDistance)return null}}}},hn.prototype.computeMinDistancePoints=function(u,f,b){for(var E=0;E<u.size();E++)for(var A=u.get(E),J=0;J<f.size();J++){var at=f.get(J),yt=A.getCoordinate().distance(at.getCoordinate());if(yt<this._minDistance&&(this._minDistance=yt,b[0]=new gn(A,0,A.getCoordinate()),b[1]=new gn(at,0,at.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},hn.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new S("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},hn.prototype.computeMinDistanceLines=function(u,f,b){for(var E=0;E<u.size();E++)for(var A=u.get(E),J=0;J<f.size();J++){var at=f.get(J);if(this.computeMinDistance(A,at,b),this._minDistance<=this._terminateDistance)return null}},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.distance=function(u,f){return new hn(u,f).distance()},hn.isWithinDistance=function(u,f,b){return new hn(u,f,b).distance()<=b},hn.nearestPoints=function(u,f){return new hn(u,f).nearestPoints()};var Gr=function(){this._pt=[new G,new G],this._distance=O.NaN,this._isNull=!0};Gr.prototype.getCoordinates=function(){return this._pt},Gr.prototype.getCoordinate=function(u){return this._pt[u]},Gr.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var E=f.distance(b);E<this._distance&&this.initialize(f,b,E)}},Gr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],f=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(f),this._distance=u.distance(f),this._isNull=!1}else if(arguments.length===3){var b=arguments[0],E=arguments[1],A=arguments[2];this._pt[0].setCoordinate(b),this._pt[1].setCoordinate(E),this._distance=A,this._isNull=!1}},Gr.prototype.toString=function(){return kt.toLineString(this._pt[0],this._pt[1])},Gr.prototype.getDistance=function(){return this._distance},Gr.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var E=f.distance(b);E>this._distance&&this.initialize(f,b,E)}},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr};var ws=function(){};ws.prototype.interfaces_=function(){return[]},ws.prototype.getClass=function(){return ws},ws.computeDistance=function(){if(arguments[2]instanceof Gr&&arguments[0]instanceof oi&&arguments[1]instanceof G)for(var u=arguments[0],f=arguments[1],b=arguments[2],E=new Pe,A=u.getCoordinates(),J=0;J<A.length-1;J++){E.setCoordinates(A[J],A[J+1]);var at=E.closestPoint(f);b.setMinimum(at,f)}else if(arguments[2]instanceof Gr&&arguments[0]instanceof Ht&&arguments[1]instanceof G){var yt=arguments[0],St=arguments[1],Bt=arguments[2];ws.computeDistance(yt.getExteriorRing(),St,Bt);for(var Yt=0;Yt<yt.getNumInteriorRing();Yt++)ws.computeDistance(yt.getInteriorRingN(Yt),St,Bt)}else if(arguments[2]instanceof Gr&&arguments[0]instanceof Gt&&arguments[1]instanceof G){var ee=arguments[0],xe=arguments[1],Me=arguments[2];if(ee instanceof oi)ws.computeDistance(ee,xe,Me);else if(ee instanceof Ht)ws.computeDistance(ee,xe,Me);else if(ee instanceof fe)for(var Be=ee,qe=0;qe<Be.getNumGeometries();qe++){var gr=Be.getGeometryN(qe);ws.computeDistance(gr,xe,Me)}else Me.setMinimum(ee.getCoordinate(),xe)}else if(arguments[2]instanceof Gr&&arguments[0]instanceof Pe&&arguments[1]instanceof G){var qr=arguments[0],Fn=arguments[1],ro=arguments[2],No=qr.closestPoint(Fn);ro.setMinimum(No,Fn)}};var $n=function(){this._g0=null,this._g1=null,this._ptDist=new Gr,this._densifyFrac=0;var u=arguments[0],f=arguments[1];this._g0=u,this._g1=f},ll={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};$n.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},$n.prototype.setDensifyFraction=function(u){if(u>1||u<=0)throw new S("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=u},$n.prototype.compute=function(u,f){this.computeOrientedDistance(u,f,this._ptDist),this.computeOrientedDistance(f,u,this._ptDist)},$n.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},$n.prototype.computeOrientedDistance=function(u,f,b){var E=new Rs(f);if(u.apply(E),b.setMaximum(E.getMaxPointDistance()),this._densifyFrac>0){var A=new Qs(f,this._densifyFrac);u.apply(A),b.setMaximum(A.getMaxPointDistance())}},$n.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.distance=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1];return new $n(u,f).distance()}if(arguments.length===3){var b=arguments[0],E=arguments[1],A=arguments[2],J=new $n(b,E);return J.setDensifyFraction(A),J.distance()}},ll.MaxPointDistanceFilter.get=function(){return Rs},ll.MaxDensifiedByFractionDistanceFilter.get=function(){return Qs},Object.defineProperties($n,ll);var Rs=function(){this._maxPtDist=new Gr,this._minPtDist=new Gr,this._euclideanDist=new ws,this._geom=null;var u=arguments[0];this._geom=u};Rs.prototype.filter=function(u){this._minPtDist.initialize(),ws.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rs.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rs.prototype.interfaces_=function(){return[ie]},Rs.prototype.getClass=function(){return Rs};var Qs=function(){this._maxPtDist=new Gr,this._minPtDist=new Gr,this._geom=null,this._numSubSegs=0;var u=arguments[0],f=arguments[1];this._geom=u,this._numSubSegs=Math.trunc(Math.round(1/f))};Qs.prototype.filter=function(u,f){if(f===0)return null;for(var b=u.getCoordinate(f-1),E=u.getCoordinate(f),A=(E.x-b.x)/this._numSubSegs,J=(E.y-b.y)/this._numSubSegs,at=0;at<this._numSubSegs;at++){var yt=b.x+at*A,St=b.y+at*J,Bt=new G(yt,St);this._minPtDist.initialize(),ws.computeDistance(this._geom,Bt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Qs.prototype.isDone=function(){return!1},Qs.prototype.isGeometryChanged=function(){return!1},Qs.prototype.getMaxPointDistance=function(){return this._maxPtDist},Qs.prototype.interfaces_=function(){return[Ie]},Qs.prototype.getClass=function(){return Qs};var Qr=function(u,f,b){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._bufDistance=f||null,this._result=b||null},wa={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Qr.prototype.checkMaximumDistance=function(u,f,b){var E=new $n(f,u);if(E.setDensifyFraction(.25),this._maxDistanceFound=E.orientedDistance(),this._maxDistanceFound>b){this._isValid=!1;var A=E.getCoordinates();this._errorLocation=A[1],this._errorIndicator=u.getFactory().createLineString(A),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+kt.toLineString(A[0],A[1])+")"}},Qr.prototype.isValid=function(){var u=Math.abs(this._bufDistance),f=Qr.MAX_DISTANCE_DIFF_FRAC*u;return this._minValidDistance=u-f,this._maxValidDistance=u+f,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Qr.VERBOSE&&rt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Qr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ht||this._input instanceof he||this._input instanceof fe))return null;var u=this.getPolygonLines(this._input);if(this.checkMinimumDistance(u,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(u,this._result,this._maxValidDistance)},Qr.prototype.getErrorIndicator=function(){return this._errorIndicator},Qr.prototype.checkMinimumDistance=function(u,f,b){var E=new hn(u,f,b);if(this._minDistanceFound=E.distance(),this._minDistanceFound<b){this._isValid=!1;var A=E.nearestPoints();this._errorLocation=E.nearestPoints()[1],this._errorIndicator=u.getFactory().createLineString(A),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+kt.toLineString(A[0],A[1])+" )"}},Qr.prototype.checkPositiveValid=function(){var u=this._result.getBoundary();if(this.checkMinimumDistance(this._input,u,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,u,this._maxValidDistance)},Qr.prototype.getErrorLocation=function(){return this._errorLocation},Qr.prototype.getPolygonLines=function(u){for(var f=new $t,b=new Jr(f),E=Fs.getPolygons(u).iterator();E.hasNext();)E.next().apply(b);return u.getFactory().buildGeometry(f)},Qr.prototype.getErrorMessage=function(){return this._errMsg},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},wa.VERBOSE.get=function(){return!1},wa.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(Qr,wa);var tn=function(u,f,b){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._distance=f||null,this._result=b||null},ul={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};tn.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},tn.prototype.checkEnvelope=function(){if(this._distance<0)return null;var u=this._distance*tn.MAX_ENV_DIFF_FRAC;u===0&&(u=.001);var f=new wt(this._input.getEnvelopeInternal());f.expandBy(this._distance);var b=new wt(this._result.getEnvelopeInternal());b.expandBy(u),b.contains(f)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(b)),this.report("Envelope")},tn.prototype.checkDistance=function(){var u=new Qr(this._input,this._distance,this._result);u.isValid()||(this._isValid=!1,this._errorMsg=u.getErrorMessage(),this._errorLocation=u.getErrorLocation(),this._errorIndicator=u.getErrorIndicator()),this.report("Distance")},tn.prototype.checkArea=function(){var u=this._input.getArea(),f=this._result.getArea();this._distance>0&&u>f&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&u<f&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},tn.prototype.checkPolygonal=function(){this._result instanceof Ht||this._result instanceof he||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},tn.prototype.getErrorIndicator=function(){return this._errorIndicator},tn.prototype.getErrorLocation=function(){return this._errorLocation},tn.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},tn.prototype.report=function(u){if(!tn.VERBOSE)return null;rt.out.println("Check "+u+": "+(this._isValid?"passed":"FAILED"))},tn.prototype.getErrorMessage=function(){return this._errorMsg},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn},tn.isValidMsg=function(u,f,b){var E=new tn(u,f,b);return E.isValid()?null:E.getErrorMessage()},tn.isValid=function(u,f,b){return!!new tn(u,f,b).isValid()},ul.VERBOSE.get=function(){return!1},ul.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(tn,ul);var cn=function(){this._pts=null,this._data=null;var u=arguments[0],f=arguments[1];this._pts=u,this._data=f};cn.prototype.getCoordinates=function(){return this._pts},cn.prototype.size=function(){return this._pts.length},cn.prototype.getCoordinate=function(u){return this._pts[u]},cn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},cn.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:Wn.octant(this.getCoordinate(u),this.getCoordinate(u+1))},cn.prototype.setData=function(u){this._data=u},cn.prototype.getData=function(){return this._data},cn.prototype.toString=function(){return kt.toLineString(new pe(this._pts))},cn.prototype.interfaces_=function(){return[es]},cn.prototype.getClass=function(){return cn};var Ur=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new $t,this._intersectionCount=0,this._keepIntersections=!0;var u=arguments[0];this._li=u,this._interiorIntersection=null};Ur.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Ur.prototype.setCheckEndSegmentsOnly=function(u){this._isCheckEndSegmentsOnly=u},Ur.prototype.getIntersectionSegments=function(){return this._intSegments},Ur.prototype.count=function(){return this._intersectionCount},Ur.prototype.getIntersections=function(){return this._intersections},Ur.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},Ur.prototype.setKeepIntersections=function(u){this._keepIntersections=u},Ur.prototype.processIntersections=function(u,f,b,E){if(!this._findAllIntersections&&this.hasIntersection()||u===b&&f===E||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(u,f)||this.isEndSegment(b,E)))return null;var A=u.getCoordinates()[f],J=u.getCoordinates()[f+1],at=b.getCoordinates()[E],yt=b.getCoordinates()[E+1];this._li.computeIntersection(A,J,at,yt),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=A,this._intSegments[1]=J,this._intSegments[2]=at,this._intSegments[3]=yt,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Ur.prototype.isEndSegment=function(u,f){return f===0||f>=u.size()-2},Ur.prototype.hasIntersection=function(){return this._interiorIntersection!==null},Ur.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},Ur.prototype.interfaces_=function(){return[mo]},Ur.prototype.getClass=function(){return Ur},Ur.createAllIntersectionsFinder=function(u){var f=new Ur(u);return f.setFindAllIntersections(!0),f},Ur.createAnyIntersectionFinder=function(u){return new Ur(u)},Ur.createIntersectionCounter=function(u){var f=new Ur(u);return f.setFindAllIntersections(!0),f.setKeepIntersections(!1),f};var ss=function(){this._li=new lt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var u=arguments[0];this._segStrings=u};ss.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},ss.prototype.getIntersections=function(){return this._segInt.getIntersections()},ss.prototype.isValid=function(){return this.execute(),this._isValid},ss.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},ss.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ur(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var u=new sl;if(u.setSegmentIntersector(this._segInt),u.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},ss.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new _r(this.getErrorMessage(),this._segInt.getInteriorIntersection())},ss.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var u=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+kt.toLineString(u[0],u[1])+" and "+kt.toLineString(u[2],u[3])},ss.prototype.interfaces_=function(){return[]},ss.prototype.getClass=function(){return ss},ss.computeIntersections=function(u){var f=new ss(u);return f.setFindAllIntersections(!0),f.isValid(),f.getIntersections()};var xs=function u(){this._nv=null;var f=arguments[0];this._nv=new ss(u.toSegmentStrings(f))};xs.prototype.checkValid=function(){this._nv.checkValid()},xs.prototype.interfaces_=function(){return[]},xs.prototype.getClass=function(){return xs},xs.toSegmentStrings=function(u){for(var f=new $t,b=u.iterator();b.hasNext();){var E=b.next();f.add(new cn(E.getCoordinates(),E))}return f},xs.checkValid=function(u){new xs(u).checkValid()};var Ro=function(u){this._mapOp=u};Ro.prototype.map=function(u){for(var f=new $t,b=0;b<u.getNumGeometries();b++){var E=this._mapOp.map(u.getGeometryN(b));E.isEmpty()||f.add(E)}return u.getFactory().createGeometryCollection(Se.toGeometryArray(f))},Ro.prototype.interfaces_=function(){return[]},Ro.prototype.getClass=function(){return Ro},Ro.map=function(u,f){return new Ro(f).map(u)};var Yn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new $t,this._resultLineList=new $t;var u=arguments[0],f=arguments[1],b=arguments[2];this._op=u,this._geometryFactory=f,this._ptLocator=b};Yn.prototype.collectLines=function(u){for(var f=this._op.getGraph().getEdgeEnds().iterator();f.hasNext();){var b=f.next();this.collectLineEdge(b,u,this._lineEdgesList),this.collectBoundaryTouchEdge(b,u,this._lineEdgesList)}},Yn.prototype.labelIsolatedLine=function(u,f){var b=this._ptLocator.locate(u.getCoordinate(),this._op.getArgGeometry(f));u.getLabel().setLocation(f,b)},Yn.prototype.build=function(u){return this.findCoveredLineEdges(),this.collectLines(u),this.buildLines(u),this._resultLineList},Yn.prototype.collectLineEdge=function(u,f,b){var E=u.getLabel(),A=u.getEdge();u.isLineEdge()&&(u.isVisited()||!ei.isResultOfOp(E,f)||A.isCovered()||(b.add(A),u.setVisitedEdge(!0)))},Yn.prototype.findCoveredLineEdges=function(){for(var u=this._op.getGraph().getNodes().iterator();u.hasNext();)u.next().getEdges().findCoveredLineEdges();for(var f=this._op.getGraph().getEdgeEnds().iterator();f.hasNext();){var b=f.next(),E=b.getEdge();if(b.isLineEdge()&&!E.isCoveredSet()){var A=this._op.isCoveredByA(b.getCoordinate());E.setCovered(A)}}},Yn.prototype.labelIsolatedLines=function(u){for(var f=u.iterator();f.hasNext();){var b=f.next(),E=b.getLabel();b.isIsolated()&&(E.isNull(0)?this.labelIsolatedLine(b,0):this.labelIsolatedLine(b,1))}},Yn.prototype.buildLines=function(u){for(var f=this._lineEdgesList.iterator();f.hasNext();){var b=f.next(),E=this._geometryFactory.createLineString(b.getCoordinates());this._resultLineList.add(E),b.setInResult(!0)}},Yn.prototype.collectBoundaryTouchEdge=function(u,f,b){var E=u.getLabel();return u.isLineEdge()||u.isVisited()||u.isInteriorAreaEdge()||u.getEdge().isInResult()?null:(Q.isTrue(!(u.isInResult()||u.getSym().isInResult())||!u.getEdge().isInResult()),void(ei.isResultOfOp(E,f)&&f===ei.INTERSECTION&&(b.add(u.getEdge()),u.setVisitedEdge(!0))))},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Os=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new $t;var u=arguments[0],f=arguments[1];this._op=u,this._geometryFactory=f};Os.prototype.filterCoveredNodeToPoint=function(u){var f=u.getCoordinate();if(!this._op.isCoveredByLA(f)){var b=this._geometryFactory.createPoint(f);this._resultPointList.add(b)}},Os.prototype.extractNonCoveredResultNodes=function(u){for(var f=this._op.getGraph().getNodes().iterator();f.hasNext();){var b=f.next();if(!b.isInResult()&&!b.isIncidentEdgeInResult()&&(b.getEdges().getDegree()===0||u===ei.INTERSECTION)){var E=b.getLabel();ei.isResultOfOp(E,u)&&this.filterCoveredNodeToPoint(b)}}},Os.prototype.build=function(u){return this.extractNonCoveredResultNodes(u),this._resultPointList},Os.prototype.interfaces_=function(){return[]},Os.prototype.getClass=function(){return Os};var En=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};En.prototype.transformPoint=function(u,f){return this._factory.createPoint(this.transformCoordinates(u.getCoordinateSequence(),u))},En.prototype.transformPolygon=function(u,f){var b=!0,E=this.transformLinearRing(u.getExteriorRing(),u);E!==null&&E instanceof Qt&&!E.isEmpty()||(b=!1);for(var A=new $t,J=0;J<u.getNumInteriorRing();J++){var at=this.transformLinearRing(u.getInteriorRingN(J),u);at===null||at.isEmpty()||(at instanceof Qt||(b=!1),A.add(at))}if(b)return this._factory.createPolygon(E,A.toArray([]));var yt=new $t;return E!==null&&yt.add(E),yt.addAll(A),this._factory.buildGeometry(yt)},En.prototype.createCoordinateSequence=function(u){return this._factory.getCoordinateSequenceFactory().create(u)},En.prototype.getInputGeometry=function(){return this._inputGeom},En.prototype.transformMultiLineString=function(u,f){for(var b=new $t,E=0;E<u.getNumGeometries();E++){var A=this.transformLineString(u.getGeometryN(E),u);A!==null&&(A.isEmpty()||b.add(A))}return this._factory.buildGeometry(b)},En.prototype.transformCoordinates=function(u,f){return this.copy(u)},En.prototype.transformLineString=function(u,f){return this._factory.createLineString(this.transformCoordinates(u.getCoordinateSequence(),u))},En.prototype.transformMultiPoint=function(u,f){for(var b=new $t,E=0;E<u.getNumGeometries();E++){var A=this.transformPoint(u.getGeometryN(E),u);A!==null&&(A.isEmpty()||b.add(A))}return this._factory.buildGeometry(b)},En.prototype.transformMultiPolygon=function(u,f){for(var b=new $t,E=0;E<u.getNumGeometries();E++){var A=this.transformPolygon(u.getGeometryN(E),u);A!==null&&(A.isEmpty()||b.add(A))}return this._factory.buildGeometry(b)},En.prototype.copy=function(u){return u.copy()},En.prototype.transformGeometryCollection=function(u,f){for(var b=new $t,E=0;E<u.getNumGeometries();E++){var A=this.transform(u.getGeometryN(E));A!==null&&(this._pruneEmptyGeometry&&A.isEmpty()||b.add(A))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Se.toGeometryArray(b)):this._factory.buildGeometry(b)},En.prototype.transform=function(u){if(this._inputGeom=u,this._factory=u.getFactory(),u instanceof ki)return this.transformPoint(u,null);if(u instanceof re)return this.transformMultiPoint(u,null);if(u instanceof Qt)return this.transformLinearRing(u,null);if(u instanceof oi)return this.transformLineString(u,null);if(u instanceof Ye)return this.transformMultiLineString(u,null);if(u instanceof Ht)return this.transformPolygon(u,null);if(u instanceof he)return this.transformMultiPolygon(u,null);if(u instanceof fe)return this.transformGeometryCollection(u,null);throw new S("Unknown Geometry subtype: "+u.getClass().getName())},En.prototype.transformLinearRing=function(u,f){var b=this.transformCoordinates(u.getCoordinateSequence(),u);if(b===null)return this._factory.createLinearRing(null);var E=b.size();return E>0&&E<4&&!this._preserveType?this._factory.createLineString(b):this._factory.createLinearRing(b)},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En};var Es=function u(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Pe,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof oi&&typeof arguments[1]=="number"){var f=arguments[0],b=arguments[1];u.call(this,f.getCoordinates(),b)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var E=arguments[0],A=arguments[1];this._srcPts=E,this._isClosed=u.isClosed(E),this._snapTolerance=A}};Es.prototype.snapVertices=function(u,f){for(var b=this._isClosed?u.size()-1:u.size(),E=0;E<b;E++){var A=u.get(E),J=this.findSnapForVertex(A,f);J!==null&&(u.set(E,new G(J)),E===0&&this._isClosed&&u.set(u.size()-1,new G(J)))}},Es.prototype.findSnapForVertex=function(u,f){for(var b=0;b<f.length;b++){if(u.equals2D(f[b]))return null;if(u.distance(f[b])<this._snapTolerance)return f[b]}return null},Es.prototype.snapTo=function(u){var f=new bi(this._srcPts);return this.snapVertices(f,u),this.snapSegments(f,u),f.toCoordinateArray()},Es.prototype.snapSegments=function(u,f){if(f.length===0)return null;var b=f.length;f[0].equals2D(f[f.length-1])&&(b=f.length-1);for(var E=0;E<b;E++){var A=f[E],J=this.findSegmentIndexToSnap(A,u);J>=0&&u.add(J+1,new G(A),!1)}},Es.prototype.findSegmentIndexToSnap=function(u,f){for(var b=O.MAX_VALUE,E=-1,A=0;A<f.size()-1;A++){if(this._seg.p0=f.get(A),this._seg.p1=f.get(A+1),this._seg.p0.equals2D(u)||this._seg.p1.equals2D(u)){if(this._allowSnappingToSourceVertices)continue;return-1}var J=this._seg.distance(u);J<this._snapTolerance&&J<b&&(b=J,E=A)}return E},Es.prototype.setAllowSnappingToSourceVertices=function(u){this._allowSnappingToSourceVertices=u},Es.prototype.interfaces_=function(){return[]},Es.prototype.getClass=function(){return Es},Es.isClosed=function(u){return!(u.length<=1)&&u[0].equals2D(u[u.length-1])};var Or=function(u){this._srcGeom=u||null},hl={SNAP_PRECISION_FACTOR:{configurable:!0}};Or.prototype.snapTo=function(u,f){var b=this.extractTargetCoordinates(u);return new cl(f,b).transform(this._srcGeom)},Or.prototype.snapToSelf=function(u,f){var b=this.extractTargetCoordinates(this._srcGeom),E=new cl(u,b,!0).transform(this._srcGeom),A=E;return f&&w(A,Tt)&&(A=E.buffer(0)),A},Or.prototype.computeSnapTolerance=function(u){return this.computeMinimumSegmentLength(u)/10},Or.prototype.extractTargetCoordinates=function(u){for(var f=new g,b=u.getCoordinates(),E=0;E<b.length;E++)f.add(b[E]);return f.toArray(new Array(0).fill(null))},Or.prototype.computeMinimumSegmentLength=function(u){for(var f=O.MAX_VALUE,b=0;b<u.length-1;b++){var E=u[b].distance(u[b+1]);E<f&&(f=E)}return f},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.snap=function(u,f,b){var E=new Array(2).fill(null),A=new Or(u);E[0]=A.snapTo(f,b);var J=new Or(f);return E[1]=J.snapTo(E[0],b),E},Or.computeOverlaySnapTolerance=function(){if(arguments.length===1){var u=arguments[0],f=Or.computeSizeBasedSnapTolerance(u),b=u.getPrecisionModel();if(b.getType()===me.FIXED){var E=1/b.getScale()*2/1.415;E>f&&(f=E)}return f}if(arguments.length===2){var A=arguments[0],J=arguments[1];return Math.min(Or.computeOverlaySnapTolerance(A),Or.computeOverlaySnapTolerance(J))}},Or.computeSizeBasedSnapTolerance=function(u){var f=u.getEnvelopeInternal();return Math.min(f.getHeight(),f.getWidth())*Or.SNAP_PRECISION_FACTOR},Or.snapToSelf=function(u,f,b){return new Or(u).snapToSelf(f,b)},hl.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Or,hl);var cl=function(u){function f(b,E,A){u.call(this),this._snapTolerance=b||null,this._snapPts=E||null,this._isSelfSnap=A!==void 0&&A}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.snapLine=function(b,E){var A=new Es(b,this._snapTolerance);return A.setAllowSnappingToSourceVertices(this._isSelfSnap),A.snapTo(E)},f.prototype.transformCoordinates=function(b,E){var A=b.toCoordinateArray(),J=this.snapLine(A,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(J)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(En),yn=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};yn.prototype.getCommon=function(){return O.longBitsToDouble(this._commonBits)},yn.prototype.add=function(u){var f=O.doubleToLongBits(u);if(this._isFirst)return this._commonBits=f,this._commonSignExp=yn.signExpBits(this._commonBits),this._isFirst=!1,null;if(yn.signExpBits(f)!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=yn.numCommonMostSigMantissaBits(this._commonBits,f),this._commonBits=yn.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},yn.prototype.toString=function(){if(arguments.length===1){var u=arguments[0],f=O.longBitsToDouble(u),b="0000000000000000000000000000000000000000000000000000000000000000"+O.toBinaryString(u),E=b.substring(b.length-64);return E.substring(0,1)+"  "+E.substring(1,12)+"(exp) "+E.substring(12)+" [ "+f+" ]"}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn},yn.getBit=function(u,f){return u&1<<f?1:0},yn.signExpBits=function(u){return u>>52},yn.zeroLowerBits=function(u,f){return u&~((1<<f)-1)},yn.numCommonMostSigMantissaBits=function(u,f){for(var b=0,E=52;E>=0;E--){if(yn.getBit(u,E)!==yn.getBit(f,E))return b;b++}return 52};var js=function(){this._commonCoord=null,this._ccFilter=new Oo},xa={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};js.prototype.addCommonBits=function(u){var f=new Hs(this._commonCoord);u.apply(f),u.geometryChanged()},js.prototype.removeCommonBits=function(u){if(this._commonCoord.x===0&&this._commonCoord.y===0)return u;var f=new G(this._commonCoord);f.x=-f.x,f.y=-f.y;var b=new Hs(f);return u.apply(b),u.geometryChanged(),u},js.prototype.getCommonCoordinate=function(){return this._commonCoord},js.prototype.add=function(u){u.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},js.prototype.interfaces_=function(){return[]},js.prototype.getClass=function(){return js},xa.CommonCoordinateFilter.get=function(){return Oo},xa.Translater.get=function(){return Hs},Object.defineProperties(js,xa);var Oo=function(){this._commonBitsX=new yn,this._commonBitsY=new yn};Oo.prototype.filter=function(u){this._commonBitsX.add(u.x),this._commonBitsY.add(u.y)},Oo.prototype.getCommonCoordinate=function(){return new G(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Oo.prototype.interfaces_=function(){return[ie]},Oo.prototype.getClass=function(){return Oo};var Hs=function(){this.trans=null;var u=arguments[0];this.trans=u};Hs.prototype.filter=function(u,f){var b=u.getOrdinate(f,0)+this.trans.x,E=u.getOrdinate(f,1)+this.trans.y;u.setOrdinate(f,0,b),u.setOrdinate(f,1,E)},Hs.prototype.isDone=function(){return!1},Hs.prototype.isGeometryChanged=function(){return!0},Hs.prototype.interfaces_=function(){return[Ie]},Hs.prototype.getClass=function(){return Hs};var Vr=function(u,f){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=u,this._geom[1]=f,this.computeSnapTolerance()};Vr.prototype.selfSnap=function(u){return new Or(u).snapTo(u,this._snapTolerance)},Vr.prototype.removeCommonBits=function(u){this._cbr=new js,this._cbr.add(u[0]),this._cbr.add(u[1]);var f=new Array(2).fill(null);return f[0]=this._cbr.removeCommonBits(u[0].copy()),f[1]=this._cbr.removeCommonBits(u[1].copy()),f},Vr.prototype.prepareResult=function(u){return this._cbr.addCommonBits(u),u},Vr.prototype.getResultGeometry=function(u){var f=this.snap(this._geom),b=ei.overlayOp(f[0],f[1],u);return this.prepareResult(b)},Vr.prototype.checkValid=function(u){u.isValid()||rt.out.println("Snapped geometry is invalid")},Vr.prototype.computeSnapTolerance=function(){this._snapTolerance=Or.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Vr.prototype.snap=function(u){var f=this.removeCommonBits(u);return Or.snap(f[0],f[1],this._snapTolerance)},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.overlayOp=function(u,f,b){return new Vr(u,f).getResultGeometry(b)},Vr.union=function(u,f){return Vr.overlayOp(u,f,ei.UNION)},Vr.intersection=function(u,f){return Vr.overlayOp(u,f,ei.INTERSECTION)},Vr.symDifference=function(u,f){return Vr.overlayOp(u,f,ei.SYMDIFFERENCE)},Vr.difference=function(u,f){return Vr.overlayOp(u,f,ei.DIFFERENCE)};var Cn=function(u,f){this._geom=new Array(2).fill(null),this._geom[0]=u,this._geom[1]=f};Cn.prototype.getResultGeometry=function(u){var f=null,b=!1,E=null;try{f=ei.overlayOp(this._geom[0],this._geom[1],u),b=!0}catch(A){if(!(A instanceof gt))throw A;E=A}if(!b)try{f=Vr.overlayOp(this._geom[0],this._geom[1],u)}catch(A){throw A instanceof gt?E:A}return f},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.overlayOp=function(u,f,b){return new Cn(u,f).getResultGeometry(b)},Cn.union=function(u,f){return Cn.overlayOp(u,f,ei.UNION)},Cn.intersection=function(u,f){return Cn.overlayOp(u,f,ei.INTERSECTION)},Cn.symDifference=function(u,f){return Cn.overlayOp(u,f,ei.SYMDIFFERENCE)},Cn.difference=function(u,f){return Cn.overlayOp(u,f,ei.DIFFERENCE)};var y=function(){this.mce=null,this.chainIndex=null;var u=arguments[0],f=arguments[1];this.mce=u,this.chainIndex=f};y.prototype.computeIntersections=function(u,f){this.mce.computeIntersectsForChain(this.chainIndex,u.mce,u.chainIndex,f)},y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y};var P=function u(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var f=arguments[0],b=arguments[1];this._eventType=u.DELETE,this._xValue=f,this._insertEvent=b}else if(arguments.length===3){var E=arguments[0],A=arguments[1],J=arguments[2];this._eventType=u.INSERT,this._label=E,this._xValue=A,this._obj=J}},X={INSERT:{configurable:!0},DELETE:{configurable:!0}};P.prototype.isDelete=function(){return this._eventType===P.DELETE},P.prototype.setDeleteEventIndex=function(u){this._deleteEventIndex=u},P.prototype.getObject=function(){return this._obj},P.prototype.compareTo=function(u){var f=u;return this._xValue<f._xValue?-1:this._xValue>f._xValue?1:this._eventType<f._eventType?-1:this._eventType>f._eventType?1:0},P.prototype.getInsertEvent=function(){return this._insertEvent},P.prototype.isInsert=function(){return this._eventType===P.INSERT},P.prototype.isSameLabel=function(u){return this._label!==null&&this._label===u._label},P.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},P.prototype.interfaces_=function(){return[U]},P.prototype.getClass=function(){return P},X.INSERT.get=function(){return 1},X.DELETE.get=function(){return 2},Object.defineProperties(P,X);var st=function(){};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st};var ft=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var u=arguments[0],f=arguments[1],b=arguments[2];this._li=u,this._includeProper=f,this._recordIsolated=b};ft.prototype.isTrivialIntersection=function(u,f,b,E){if(u===b&&this._li.getIntersectionNum()===1){if(ft.isAdjacentSegments(f,E))return!0;if(u.isClosed()){var A=u.getNumPoints()-1;if(f===0&&E===A||E===0&&f===A)return!0}}return!1},ft.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ft.prototype.setIsDoneIfProperInt=function(u){this._isDoneWhenProperInt=u},ft.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ft.prototype.isBoundaryPointInternal=function(u,f){for(var b=f.iterator();b.hasNext();){var E=b.next().getCoordinate();if(u.isIntersection(E))return!0}return!1},ft.prototype.hasProperIntersection=function(){return this._hasProper},ft.prototype.hasIntersection=function(){return this._hasIntersection},ft.prototype.isDone=function(){return this._isDone},ft.prototype.isBoundaryPoint=function(u,f){return f!==null&&(!!this.isBoundaryPointInternal(u,f[0])||!!this.isBoundaryPointInternal(u,f[1]))},ft.prototype.setBoundaryNodes=function(u,f){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=u,this._bdyNodes[1]=f},ft.prototype.addIntersections=function(u,f,b,E){if(u===b&&f===E)return null;this.numTests++;var A=u.getCoordinates()[f],J=u.getCoordinates()[f+1],at=b.getCoordinates()[E],yt=b.getCoordinates()[E+1];this._li.computeIntersection(A,J,at,yt),this._li.hasIntersection()&&(this._recordIsolated&&(u.setIsolated(!1),b.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(u,f,b,E)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(u.addIntersections(this._li,f,0),b.addIntersections(this._li,E,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft},ft.isAdjacentSegments=function(u,f){return Math.abs(u-f)===1};var Mt=function(u){function f(){u.call(this),this.events=new $t,this.nOverlaps=null}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.prepareEvents=function(){Ce.sort(this.events);for(var b=0;b<this.events.size();b++){var E=this.events.get(b);E.isDelete()&&E.getInsertEvent().setDeleteEventIndex(b)}},f.prototype.computeIntersections=function(){if(arguments.length===1){var b=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var E=0;E<this.events.size();E++){var A=this.events.get(E);if(A.isInsert()&&this.processOverlaps(E,A.getDeleteEventIndex(),A,b),b.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof ft&&w(arguments[0],He)&&w(arguments[1],He)){var J=arguments[0],at=arguments[1],yt=arguments[2];this.addEdges(J,J),this.addEdges(at,at),this.computeIntersections(yt)}else if(typeof arguments[2]=="boolean"&&w(arguments[0],He)&&arguments[1]instanceof ft){var St=arguments[0],Bt=arguments[1];arguments[2]?this.addEdges(St,null):this.addEdges(St),this.computeIntersections(Bt)}}},f.prototype.addEdge=function(b,E){for(var A=b.getMonotoneChainEdge(),J=A.getStartIndexes(),at=0;at<J.length-1;at++){var yt=new y(A,at),St=new P(E,A.getMinX(at),yt);this.events.add(St),this.events.add(new P(A.getMaxX(at),St))}},f.prototype.processOverlaps=function(b,E,A,J){for(var at=A.getObject(),yt=b;yt<E;yt++){var St=this.events.get(yt);if(St.isInsert()){var Bt=St.getObject();A.isSameLabel(St)||(at.computeIntersections(Bt,J),this.nOverlaps++)}}},f.prototype.addEdges=function(){if(arguments.length===1)for(var b=arguments[0].iterator();b.hasNext();){var E=b.next();this.addEdge(E,E)}else if(arguments.length===2)for(var A=arguments[0],J=arguments[1],at=A.iterator();at.hasNext();){var yt=at.next();this.addEdge(yt,J)}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(st),Dt=function(){this._min=O.POSITIVE_INFINITY,this._max=O.NEGATIVE_INFINITY},Wt={NodeComparator:{configurable:!0}};Dt.prototype.getMin=function(){return this._min},Dt.prototype.intersects=function(u,f){return!(this._min>f||this._max<u)},Dt.prototype.getMax=function(){return this._max},Dt.prototype.toString=function(){return kt.toLineString(new G(this._min,0),new G(this._max,0))},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},Wt.NodeComparator.get=function(){return te},Object.defineProperties(Dt,Wt);var te=function(){};te.prototype.compare=function(u,f){var b=u,E=f,A=(b._min+b._max)/2,J=(E._min+E._max)/2;return A<J?-1:A>J?1:0},te.prototype.interfaces_=function(){return[V]},te.prototype.getClass=function(){return te};var de=function(u){function f(){u.call(this),this._item=null;var b=arguments[0],E=arguments[1],A=arguments[2];this._min=b,this._max=E,this._item=A}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.query=function(b,E,A){if(!this.intersects(b,E))return null;A.visitItem(this._item)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Dt),De=function(u){function f(){u.call(this),this._node1=null,this._node2=null;var b=arguments[0],E=arguments[1];this._node1=b,this._node2=E,this.buildExtent(this._node1,this._node2)}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.buildExtent=function(b,E){this._min=Math.min(b._min,E._min),this._max=Math.max(b._max,E._max)},f.prototype.query=function(b,E,A){if(!this.intersects(b,E))return null;this._node1!==null&&this._node1.query(b,E,A),this._node2!==null&&this._node2.query(b,E,A)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Dt),Xe=function(){this._leaves=new $t,this._root=null,this._level=0};Xe.prototype.buildTree=function(){Ce.sort(this._leaves,new Dt.NodeComparator);for(var u=this._leaves,f=null,b=new $t;;){if(this.buildLevel(u,b),b.size()===1)return b.get(0);f=u,u=b,b=f}},Xe.prototype.insert=function(u,f,b){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new de(u,f,b))},Xe.prototype.query=function(u,f,b){this.init(),this._root.query(u,f,b)},Xe.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},Xe.prototype.printNode=function(u){rt.out.println(kt.toLineString(new G(u._min,this._level),new G(u._max,this._level)))},Xe.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},Xe.prototype.buildLevel=function(u,f){this._level++,f.clear();for(var b=0;b<u.size();b+=2){var E=u.get(b);if((b+1<u.size()?u.get(b):null)===null)f.add(E);else{var A=new De(u.get(b),u.get(b+1));f.add(A)}}},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var _i=function(){this._items=new $t};_i.prototype.visitItem=function(u){this._items.add(u)},_i.prototype.getItems=function(){return this._items},_i.prototype.interfaces_=function(){return[Vt]},_i.prototype.getClass=function(){return _i};var Rn=function(){this._index=null;var u=arguments[0];if(!w(u,Tt))throw new S("Argument must be Polygonal");this._index=new Zn(u)},to={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Rn.prototype.locate=function(u){var f=new bt(u),b=new eo(f);return this._index.query(u.y,u.y,b),f.getLocation()},Rn.prototype.interfaces_=function(){return[Go]},Rn.prototype.getClass=function(){return Rn},to.SegmentVisitor.get=function(){return eo},to.IntervalIndexedGeometry.get=function(){return Zn},Object.defineProperties(Rn,to);var eo=function(){this._counter=null;var u=arguments[0];this._counter=u};eo.prototype.visitItem=function(u){var f=u;this._counter.countSegment(f.getCoordinate(0),f.getCoordinate(1))},eo.prototype.interfaces_=function(){return[Vt]},eo.prototype.getClass=function(){return eo};var Zn=function(){this._index=new Xe;var u=arguments[0];this.init(u)};Zn.prototype.init=function(u){for(var f=Jr.getLines(u).iterator();f.hasNext();){var b=f.next().getCoordinates();this.addLine(b)}},Zn.prototype.addLine=function(u){for(var f=1;f<u.length;f++){var b=new Pe(u[f-1],u[f]),E=Math.min(b.p0.y,b.p1.y),A=Math.max(b.p0.y,b.p1.y);this._index.insert(E,A,b)}},Zn.prototype.query=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1],b=new _i;return this._index.query(u,f,b),b.getItems()}if(arguments.length===3){var E=arguments[0],A=arguments[1],J=arguments[2];this._index.query(E,A,J)}},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Io=function(u){function f(){if(u.call(this),this._parentGeom=null,this._lineEdgeMap=new wi,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new fs,arguments.length===2){var b=arguments[0],E=arguments[1],A=Xt.OGC_SFS_BOUNDARY_RULE;this._argIndex=b,this._parentGeom=E,this._boundaryNodeRule=A,E!==null&&this.add(E)}else if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];this._argIndex=J,this._parentGeom=at,this._boundaryNodeRule=yt,at!==null&&this.add(at)}}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.insertBoundaryPoint=function(b,E){var A=this._nodes.addNode(E).getLabel(),J=1;N.NONE,A.getLocation(b,oe.ON)===N.BOUNDARY&&J++;var at=f.determineBoundary(this._boundaryNodeRule,J);A.setLocation(b,at)},f.prototype.computeSelfNodes=function(){if(arguments.length===2){var b=arguments[0],E=arguments[1];return this.computeSelfNodes(b,E,!1)}if(arguments.length===3){var A=arguments[0],J=arguments[1],at=arguments[2],yt=new ft(A,!0,!1);yt.setIsDoneIfProperInt(at);var St=this.createEdgeSetIntersector(),Bt=this._parentGeom instanceof Qt||this._parentGeom instanceof Ht||this._parentGeom instanceof he,Yt=J||!Bt;return St.computeIntersections(this._edges,yt,Yt),this.addSelfIntersectionNodes(this._argIndex),yt}},f.prototype.computeSplitEdges=function(b){for(var E=this._edges.iterator();E.hasNext();)E.next().eiList.addSplitEdges(b)},f.prototype.computeEdgeIntersections=function(b,E,A){var J=new ft(E,A,!0);return J.setBoundaryNodes(this.getBoundaryNodes(),b.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,b._edges,J),J},f.prototype.getGeometry=function(){return this._parentGeom},f.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},f.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},f.prototype.addPoint=function(){if(arguments[0]instanceof ki){var b=arguments[0].getCoordinate();this.insertPoint(this._argIndex,b,N.INTERIOR)}else if(arguments[0]instanceof G){var E=arguments[0];this.insertPoint(this._argIndex,E,N.INTERIOR)}},f.prototype.addPolygon=function(b){this.addPolygonRing(b.getExteriorRing(),N.EXTERIOR,N.INTERIOR);for(var E=0;E<b.getNumInteriorRing();E++){var A=b.getInteriorRingN(E);this.addPolygonRing(A,N.INTERIOR,N.EXTERIOR)}},f.prototype.addEdge=function(b){this.insertEdge(b);var E=b.getCoordinates();this.insertPoint(this._argIndex,E[0],N.BOUNDARY),this.insertPoint(this._argIndex,E[E.length-1],N.BOUNDARY)},f.prototype.addLineString=function(b){var E=ue.removeRepeatedPoints(b.getCoordinates());if(E.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=E[0],null;var A=new Lo(E,new fi(this._argIndex,N.INTERIOR));this._lineEdgeMap.put(b,A),this.insertEdge(A),Q.isTrue(E.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,E[0]),this.insertBoundaryPoint(this._argIndex,E[E.length-1])},f.prototype.getInvalidPoint=function(){return this._invalidPoint},f.prototype.getBoundaryPoints=function(){for(var b=this.getBoundaryNodes(),E=new Array(b.size()).fill(null),A=0,J=b.iterator();J.hasNext();){var at=J.next();E[A++]=at.getCoordinate().copy()}return E},f.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},f.prototype.addSelfIntersectionNode=function(b,E,A){if(this.isBoundaryNode(b,E))return null;A===N.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(b,E):this.insertPoint(b,E,A)},f.prototype.addPolygonRing=function(b,E,A){if(b.isEmpty())return null;var J=ue.removeRepeatedPoints(b.getCoordinates());if(J.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=J[0],null;var at=E,yt=A;Et.isCCW(J)&&(at=A,yt=E);var St=new Lo(J,new fi(this._argIndex,N.BOUNDARY,at,yt));this._lineEdgeMap.put(b,St),this.insertEdge(St),this.insertPoint(this._argIndex,J[0],N.BOUNDARY)},f.prototype.insertPoint=function(b,E,A){var J=this._nodes.addNode(E),at=J.getLabel();at===null?J._label=new fi(b,A):at.setLocation(b,A)},f.prototype.createEdgeSetIntersector=function(){return new Mt},f.prototype.addSelfIntersectionNodes=function(b){for(var E=this._edges.iterator();E.hasNext();)for(var A=E.next(),J=A.getLabel().getLocation(b),at=A.eiList.iterator();at.hasNext();){var yt=at.next();this.addSelfIntersectionNode(b,yt.coord,J)}},f.prototype.add=function(){if(arguments.length!==1)return u.prototype.add.apply(this,arguments);var b=arguments[0];if(b.isEmpty())return null;if(b instanceof he&&(this._useBoundaryDeterminationRule=!1),b instanceof Ht)this.addPolygon(b);else if(b instanceof oi)this.addLineString(b);else if(b instanceof ki)this.addPoint(b);else if(b instanceof re)this.addCollection(b);else if(b instanceof Ye)this.addCollection(b);else if(b instanceof he)this.addCollection(b);else{if(!(b instanceof fe))throw new Error(b.getClass().getName());this.addCollection(b)}},f.prototype.addCollection=function(b){for(var E=0;E<b.getNumGeometries();E++){var A=b.getGeometryN(E);this.add(A)}},f.prototype.locate=function(b){return w(this._parentGeom,Tt)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Rn(this._parentGeom)),this._areaPtLocator.locate(b)):this._ptLocator.locate(b,this._parentGeom)},f.prototype.findEdge=function(){if(arguments.length===1){var b=arguments[0];return this._lineEdgeMap.get(b)}return u.prototype.findEdge.apply(this,arguments)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.determineBoundary=function(b,E){return b.isInBoundary(E)?N.BOUNDARY:N.INTERIOR},f}(xt),Uo=function(){if(this._li=new lt,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var u=arguments[0];this.setComputationPrecision(u.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Io(0,u)}else if(arguments.length===2){var f=arguments[0],b=arguments[1],E=Xt.OGC_SFS_BOUNDARY_RULE;f.getPrecisionModel().compareTo(b.getPrecisionModel())>=0?this.setComputationPrecision(f.getPrecisionModel()):this.setComputationPrecision(b.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Io(0,f,E),this._arg[1]=new Io(1,b,E)}else if(arguments.length===3){var A=arguments[0],J=arguments[1],at=arguments[2];A.getPrecisionModel().compareTo(J.getPrecisionModel())>=0?this.setComputationPrecision(A.getPrecisionModel()):this.setComputationPrecision(J.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Io(0,A,at),this._arg[1]=new Io(1,J,at)}};Uo.prototype.getArgGeometry=function(u){return this._arg[u].getGeometry()},Uo.prototype.setComputationPrecision=function(u){this._resultPrecisionModel=u,this._li.setPrecisionModel(this._resultPrecisionModel)},Uo.prototype.interfaces_=function(){return[]},Uo.prototype.getClass=function(){return Uo};var go=function(){};go.prototype.interfaces_=function(){return[]},go.prototype.getClass=function(){return go},go.map=function(){if(arguments[0]instanceof Gt&&w(arguments[1],go.MapOp)){for(var u=arguments[0],f=arguments[1],b=new $t,E=0;E<u.getNumGeometries();E++){var A=f.map(u.getGeometryN(E));A!==null&&b.add(A)}return u.getFactory().buildGeometry(b)}if(w(arguments[0],ce)&&w(arguments[1],go.MapOp)){for(var J=arguments[0],at=arguments[1],yt=new $t,St=J.iterator();St.hasNext();){var Bt=St.next(),Yt=at.map(Bt);Yt!==null&&yt.add(Yt)}return yt}},go.MapOp=function(){};var ei=function(u){function f(){var b=arguments[0],E=arguments[1];u.call(this,b,E),this._ptLocator=new fs,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Kr,this._resultPolyList=new $t,this._resultLineList=new $t,this._resultPointList=new $t,this._graph=new xt(new ko),this._geomFact=b.getFactory()}return u&&(f.__proto__=u),f.prototype=Object.create(u&&u.prototype),f.prototype.constructor=f,f.prototype.insertUniqueEdge=function(b){var E=this._edgeList.findEqualEdge(b);if(E!==null){var A=E.getLabel(),J=b.getLabel();E.isPointwiseEqual(b)||(J=new fi(b.getLabel())).flip();var at=E.getDepth();at.isNull()&&at.add(A),at.add(J),A.merge(J)}else this._edgeList.add(b)},f.prototype.getGraph=function(){return this._graph},f.prototype.cancelDuplicateResultEdges=function(){for(var b=this._graph.getEdgeEnds().iterator();b.hasNext();){var E=b.next(),A=E.getSym();E.isInResult()&&A.isInResult()&&(E.setInResult(!1),A.setInResult(!1))}},f.prototype.isCoveredByLA=function(b){return!!this.isCovered(b,this._resultLineList)||!!this.isCovered(b,this._resultPolyList)},f.prototype.computeGeometry=function(b,E,A,J){var at=new $t;return at.addAll(b),at.addAll(E),at.addAll(A),at.isEmpty()?f.createEmptyResult(J,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(at)},f.prototype.mergeSymLabels=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().mergeSymLabels()},f.prototype.isCovered=function(b,E){for(var A=E.iterator();A.hasNext();){var J=A.next();if(this._ptLocator.locate(b,J)!==N.EXTERIOR)return!0}return!1},f.prototype.replaceCollapsedEdges=function(){for(var b=new $t,E=this._edgeList.iterator();E.hasNext();){var A=E.next();A.isCollapsed()&&(E.remove(),b.add(A.getCollapsedEdge()))}this._edgeList.addAll(b)},f.prototype.updateNodeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var E=b.next(),A=E.getEdges().getLabel();E.getLabel().merge(A)}},f.prototype.getResultGeometry=function(b){return this.computeOverlay(b),this._resultGeom},f.prototype.insertUniqueEdges=function(b){for(var E=b.iterator();E.hasNext();){var A=E.next();this.insertUniqueEdge(A)}},f.prototype.computeOverlay=function(b){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var E=new $t;this._arg[0].computeSplitEdges(E),this._arg[1].computeSplitEdges(E),this.insertUniqueEdges(E),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),xs.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(b),this.cancelDuplicateResultEdges();var A=new Lt(this._geomFact);A.add(this._graph),this._resultPolyList=A.getPolygons();var J=new Yn(this,this._geomFact,this._ptLocator);this._resultLineList=J.build(b);var at=new Os(this,this._geomFact,this._ptLocator);this._resultPointList=at.build(b),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,b)},f.prototype.labelIncompleteNode=function(b,E){var A=this._ptLocator.locate(b.getCoordinate(),this._arg[E].getGeometry());b.getLabel().setLocation(E,A)},f.prototype.copyPoints=function(b){for(var E=this._arg[b].getNodeIterator();E.hasNext();){var A=E.next();this._graph.addNode(A.getCoordinate()).setLabel(b,A.getLabel().getLocation(b))}},f.prototype.findResultAreaEdges=function(b){for(var E=this._graph.getEdgeEnds().iterator();E.hasNext();){var A=E.next(),J=A.getLabel();J.isArea()&&!A.isInteriorAreaEdge()&&f.isResultOfOp(J.getLocation(0,oe.RIGHT),J.getLocation(1,oe.RIGHT),b)&&A.setInResult(!0)}},f.prototype.computeLabelsFromDepths=function(){for(var b=this._edgeList.iterator();b.hasNext();){var E=b.next(),A=E.getLabel(),J=E.getDepth();if(!J.isNull()){J.normalize();for(var at=0;at<2;at++)A.isNull(at)||!A.isArea()||J.isNull(at)||(J.getDelta(at)===0?A.toLine(at):(Q.isTrue(!J.isNull(at,oe.LEFT),"depth of LEFT side has not been initialized"),A.setLocation(at,oe.LEFT,J.getLocation(at,oe.LEFT)),Q.isTrue(!J.isNull(at,oe.RIGHT),"depth of RIGHT side has not been initialized"),A.setLocation(at,oe.RIGHT,J.getLocation(at,oe.RIGHT))))}}},f.prototype.computeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},f.prototype.labelIncompleteNodes=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var E=b.next(),A=E.getLabel();E.isIsolated()&&(A.isNull(0)?this.labelIncompleteNode(E,0):this.labelIncompleteNode(E,1)),E.getEdges().updateLabelling(A)}},f.prototype.isCoveredByA=function(b){return!!this.isCovered(b,this._resultPolyList)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Uo);ei.overlayOp=function(u,f,b){return new ei(u,f).getResultGeometry(b)},ei.intersection=function(u,f){if(u.isEmpty()||f.isEmpty())return ei.createEmptyResult(ei.INTERSECTION,u,f,u.getFactory());if(u.isGeometryCollection()){var b=f;return Ro.map(u,{interfaces_:function(){return[go.MapOp]},map:function(E){return E.intersection(b)}})}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(f),Cn.overlayOp(u,f,ei.INTERSECTION)},ei.symDifference=function(u,f){if(u.isEmpty()||f.isEmpty()){if(u.isEmpty()&&f.isEmpty())return ei.createEmptyResult(ei.SYMDIFFERENCE,u,f,u.getFactory());if(u.isEmpty())return f.copy();if(f.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(f),Cn.overlayOp(u,f,ei.SYMDIFFERENCE)},ei.resultDimension=function(u,f,b){var E=f.getDimension(),A=b.getDimension(),J=-1;switch(u){case ei.INTERSECTION:J=Math.min(E,A);break;case ei.UNION:J=Math.max(E,A);break;case ei.DIFFERENCE:J=E;break;case ei.SYMDIFFERENCE:J=Math.max(E,A)}return J},ei.createEmptyResult=function(u,f,b,E){var A=null;switch(ei.resultDimension(u,f,b)){case-1:A=E.createGeometryCollection(new Array(0).fill(null));break;case 0:A=E.createPoint();break;case 1:A=E.createLineString();break;case 2:A=E.createPolygon()}return A},ei.difference=function(u,f){return u.isEmpty()?ei.createEmptyResult(ei.DIFFERENCE,u,f,u.getFactory()):f.isEmpty()?u.copy():(u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(f),Cn.overlayOp(u,f,ei.DIFFERENCE))},ei.isResultOfOp=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1],b=u.getLocation(0),E=u.getLocation(1);return ei.isResultOfOp(b,E,f)}if(arguments.length===3){var A=arguments[0],J=arguments[1],at=arguments[2];switch(A===N.BOUNDARY&&(A=N.INTERIOR),J===N.BOUNDARY&&(J=N.INTERIOR),at){case ei.INTERSECTION:return A===N.INTERIOR&&J===N.INTERIOR;case ei.UNION:return A===N.INTERIOR||J===N.INTERIOR;case ei.DIFFERENCE:return A===N.INTERIOR&&J!==N.INTERIOR;case ei.SYMDIFFERENCE:return A===N.INTERIOR&&J!==N.INTERIOR||A!==N.INTERIOR&&J===N.INTERIOR}return!1}},ei.INTERSECTION=1,ei.UNION=2,ei.DIFFERENCE=3,ei.SYMDIFFERENCE=4;var Gs=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new fs,this._seg=new Pe;var u=arguments[0],f=arguments[1];this._g=u,this._boundaryDistanceTolerance=f,this._linework=this.extractLinework(u)};Gs.prototype.isWithinToleranceOfBoundary=function(u){for(var f=0;f<this._linework.getNumGeometries();f++)for(var b=this._linework.getGeometryN(f).getCoordinateSequence(),E=0;E<b.size()-1;E++)if(b.getCoordinate(E,this._seg.p0),b.getCoordinate(E+1,this._seg.p1),this._seg.distance(u)<=this._boundaryDistanceTolerance)return!0;return!1},Gs.prototype.getLocation=function(u){return this.isWithinToleranceOfBoundary(u)?N.BOUNDARY:this._ptLocator.locate(u,this._g)},Gs.prototype.extractLinework=function(u){var f=new Vo;u.apply(f);var b=f.getLinework(),E=Se.toLineStringArray(b);return u.getFactory().createMultiLineString(E)},Gs.prototype.interfaces_=function(){return[]},Gs.prototype.getClass=function(){return Gs};var Vo=function(){this._linework=null,this._linework=new $t};Vo.prototype.getLinework=function(){return this._linework},Vo.prototype.filter=function(u){if(u instanceof Ht){var f=u;this._linework.add(f.getExteriorRing());for(var b=0;b<f.getNumInteriorRing();b++)this._linework.add(f.getInteriorRingN(b))}},Vo.prototype.interfaces_=function(){return[$e]},Vo.prototype.getClass=function(){return Vo};var io=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var u=arguments[0];this._g=u};io.prototype.extractPoints=function(u,f,b){for(var E=u.getCoordinates(),A=0;A<E.length-1;A++)this.computeOffsetPoints(E[A],E[A+1],f,b)},io.prototype.setSidesToGenerate=function(u,f){this._doLeft=u,this._doRight=f},io.prototype.getPoints=function(u){for(var f=new $t,b=Jr.getLines(this._g).iterator();b.hasNext();){var E=b.next();this.extractPoints(E,u,f)}return f},io.prototype.computeOffsetPoints=function(u,f,b,E){var A=f.x-u.x,J=f.y-u.y,at=Math.sqrt(A*A+J*J),yt=b*A/at,St=b*J/at,Bt=(f.x+u.x)/2,Yt=(f.y+u.y)/2;if(this._doLeft){var ee=new G(Bt-St,Yt+yt);E.add(ee)}if(this._doRight){var xe=new G(Bt+St,Yt-yt);E.add(xe)}},io.prototype.interfaces_=function(){return[]},io.prototype.getClass=function(){return io};var fr=function u(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=u.TOLERANCE,this._testCoords=new $t;var f=arguments[0],b=arguments[1],E=arguments[2];this._boundaryDistanceTolerance=u.computeBoundaryDistanceTolerance(f,b),this._geom=[f,b,E],this._locFinder=[new Gs(this._geom[0],this._boundaryDistanceTolerance),new Gs(this._geom[1],this._boundaryDistanceTolerance),new Gs(this._geom[2],this._boundaryDistanceTolerance)]},sa={TOLERANCE:{configurable:!0}};fr.prototype.reportResult=function(u,f,b){rt.out.println("Overlay result invalid - A:"+N.toLocationSymbol(f[0])+" B:"+N.toLocationSymbol(f[1])+" expected:"+(b?"i":"e")+" actual:"+N.toLocationSymbol(f[2]))},fr.prototype.isValid=function(u){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var f=this.checkValid(u);return f},fr.prototype.checkValid=function(){if(arguments.length===1){for(var u=arguments[0],f=0;f<this._testCoords.size();f++){var b=this._testCoords.get(f);if(!this.checkValid(u,b))return this._invalidLocation=b,!1}return!0}if(arguments.length===2){var E=arguments[0],A=arguments[1];return this._location[0]=this._locFinder[0].getLocation(A),this._location[1]=this._locFinder[1].getLocation(A),this._location[2]=this._locFinder[2].getLocation(A),!!fr.hasLocation(this._location,N.BOUNDARY)||this.isValidResult(E,this._location)}},fr.prototype.addTestPts=function(u){var f=new io(u);this._testCoords.addAll(f.getPoints(5*this._boundaryDistanceTolerance))},fr.prototype.isValidResult=function(u,f){var b=ei.isResultOfOp(f[0],f[1],u),E=!(b^f[2]===N.INTERIOR);return E||this.reportResult(u,f,b),E},fr.prototype.getInvalidLocation=function(){return this._invalidLocation},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr},fr.hasLocation=function(u,f){for(var b=0;b<3;b++)if(u[b]===f)return!0;return!1},fr.computeBoundaryDistanceTolerance=function(u,f){return Math.min(Or.computeSizeBasedSnapTolerance(u),Or.computeSizeBasedSnapTolerance(f))},fr.isValid=function(u,f,b,E){return new fr(u,f,E).isValid(b)},sa.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(fr,sa);var Kn=function u(f){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=u.extractFactory(f),this._inputGeoms=f};Kn.prototype.extractElements=function(u,f){if(u===null)return null;for(var b=0;b<u.getNumGeometries();b++){var E=u.getGeometryN(b);this._skipEmpty&&E.isEmpty()||f.add(E)}},Kn.prototype.combine=function(){for(var u=new $t,f=this._inputGeoms.iterator();f.hasNext();){var b=f.next();this.extractElements(b,u)}return u.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(u)},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.combine=function(){if(arguments.length===1){var u=arguments[0];return new Kn(u).combine()}if(arguments.length===2){var f=arguments[0],b=arguments[1];return new Kn(Kn.createList(f,b)).combine()}if(arguments.length===3){var E=arguments[0],A=arguments[1],J=arguments[2];return new Kn(Kn.createList(E,A,J)).combine()}},Kn.extractFactory=function(u){return u.isEmpty()?null:u.iterator().next().getFactory()},Kn.createList=function(){if(arguments.length===2){var u=arguments[0],f=arguments[1],b=new $t;return b.add(u),b.add(f),b}if(arguments.length===3){var E=arguments[0],A=arguments[1],J=arguments[2],at=new $t;return at.add(E),at.add(A),at.add(J),at}};var Nr=function(){this._inputPolys=null,this._geomFactory=null;var u=arguments[0];this._inputPolys=u,this._inputPolys===null&&(this._inputPolys=new $t)},su={STRTREE_NODE_CAPACITY:{configurable:!0}};Nr.prototype.reduceToGeometries=function(u){for(var f=new $t,b=u.iterator();b.hasNext();){var E=b.next(),A=null;w(E,He)?A=this.unionTree(E):E instanceof Gt&&(A=E),f.add(A)}return f},Nr.prototype.extractByEnvelope=function(u,f,b){for(var E=new $t,A=0;A<f.getNumGeometries();A++){var J=f.getGeometryN(A);J.getEnvelopeInternal().intersects(u)?E.add(J):b.add(J)}return this._geomFactory.buildGeometry(E)},Nr.prototype.unionOptimized=function(u,f){var b=u.getEnvelopeInternal(),E=f.getEnvelopeInternal();if(!b.intersects(E))return Kn.combine(u,f);if(u.getNumGeometries()<=1&&f.getNumGeometries()<=1)return this.unionActual(u,f);var A=b.intersection(E);return this.unionUsingEnvelopeIntersection(u,f,A)},Nr.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var u=new an(Nr.STRTREE_NODE_CAPACITY),f=this._inputPolys.iterator();f.hasNext();){var b=f.next();u.insert(b.getEnvelopeInternal(),b)}this._inputPolys=null;var E=u.itemsTree();return this.unionTree(E)},Nr.prototype.binaryUnion=function(){if(arguments.length===1){var u=arguments[0];return this.binaryUnion(u,0,u.size())}if(arguments.length===3){var f=arguments[0],b=arguments[1],E=arguments[2];if(E-b<=1){var A=Nr.getGeometry(f,b);return this.unionSafe(A,null)}if(E-b==2)return this.unionSafe(Nr.getGeometry(f,b),Nr.getGeometry(f,b+1));var J=Math.trunc((E+b)/2),at=this.binaryUnion(f,b,J),yt=this.binaryUnion(f,J,E);return this.unionSafe(at,yt)}},Nr.prototype.repeatedUnion=function(u){for(var f=null,b=u.iterator();b.hasNext();){var E=b.next();f=f===null?E.copy():f.union(E)}return f},Nr.prototype.unionSafe=function(u,f){return u===null&&f===null?null:u===null?f.copy():f===null?u.copy():this.unionOptimized(u,f)},Nr.prototype.unionActual=function(u,f){return Nr.restrictToPolygons(u.union(f))},Nr.prototype.unionTree=function(u){var f=this.reduceToGeometries(u);return this.binaryUnion(f)},Nr.prototype.unionUsingEnvelopeIntersection=function(u,f,b){var E=new $t,A=this.extractByEnvelope(b,u,E),J=this.extractByEnvelope(b,f,E),at=this.unionActual(A,J);return E.add(at),Kn.combine(E)},Nr.prototype.bufferUnion=function(){if(arguments.length===1){var u=arguments[0];return u.get(0).getFactory().buildGeometry(u).buffer(0)}if(arguments.length===2){var f=arguments[0],b=arguments[1];return f.getFactory().createGeometryCollection([f,b]).buffer(0)}},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.restrictToPolygons=function(u){if(w(u,Tt))return u;var f=Fs.getPolygons(u);return f.size()===1?f.get(0):u.getFactory().createMultiPolygon(Se.toPolygonArray(f))},Nr.getGeometry=function(u,f){return f>=u.size()?null:u.get(f)},Nr.union=function(u){return new Nr(u).union()},su.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Nr,su);var Ao=function(){};Ao.prototype.interfaces_=function(){return[]},Ao.prototype.getClass=function(){return Ao},Ao.union=function(u,f){if(u.isEmpty()||f.isEmpty()){if(u.isEmpty()&&f.isEmpty())return ei.createEmptyResult(ei.UNION,u,f,u.getFactory());if(u.isEmpty())return f.copy();if(f.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(f),Cn.overlayOp(u,f,ei.UNION)},n.GeoJSONReader=Rr,n.GeoJSONWriter=bn,n.OverlayOp=ei,n.UnionOp=Ao,n.BufferOp=Hr,Object.defineProperty(n,"__esModule",{value:!0})})});var Eh=Ge((rd,nd)=>{(function(n,t){typeof rd=="object"&&typeof nd<"u"?nd.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis<"u"?globalThis:n||self,n.DOMPurify=t())})(rd,function(){"use strict";let{entries:n,setPrototypeOf:t,isFrozen:e,getPrototypeOf:i,getOwnPropertyDescriptor:r}=Object,{freeze:s,seal:a,create:o}=Object,{apply:l,construct:c}=typeof Reflect<"u"&&Reflect;l||(l=function(kt,gt,ut){return kt.apply(gt,ut)}),s||(s=function(kt){return kt}),a||(a=function(kt){return kt}),c||(c=function(kt,gt){return new kt(...gt)});let h=U(Array.prototype.forEach),d=U(Array.prototype.pop),p=U(Array.prototype.push),g=U(String.prototype.toLowerCase),m=U(String.prototype.toString),_=U(String.prototype.match),v=U(String.prototype.replace),x=U(String.prototype.indexOf),S=U(String.prototype.trim),O=U(RegExp.prototype.test),D=z(TypeError);function U(vt){return function(kt){for(var gt=arguments.length,ut=new Array(gt>1?gt-1:0),Q=1;Q<gt;Q++)ut[Q-1]=arguments[Q];return l(vt,kt,ut)}}function z(vt){return function(){for(var kt=arguments.length,gt=new Array(kt),ut=0;ut<kt;ut++)gt[ut]=arguments[ut];return c(vt,gt)}}function V(vt,kt,gt){gt=gt||g,t&&t(vt,null);let ut=kt.length;for(;ut--;){let Q=kt[ut];if(typeof Q=="string"){let Y=gt(Q);Y!==Q&&(e(kt)||(kt[ut]=Y),Q=Y)}vt[Q]=!0}return vt}function G(vt){let kt=o(null);for(let[gt,ut]of n(vt))kt[gt]=ut;return kt}function tt(vt,kt){for(;vt!==null;){let ut=r(vt,kt);if(ut){if(ut.get)return U(ut.get);if(typeof ut.value=="function")return U(ut.value)}vt=i(vt)}function gt(ut){return console.warn("fallback value for",ut),null}return gt}let K=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),B=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Z=s(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),w=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),C=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),k=s(["#text"]),T=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),F=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),H=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),it=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ot=a(/<%[\w\W]*|[\w\W]*%>/gm),dt=a(/\${[\w\W]*}/gm),$=a(/^data-[\-\w.\u00B7-\uFFFF]/),ct=a(/^aria-[\-\w]+$/),W=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q=a(/^(?:\w+script|data):/i),rt=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mt=a(/^html$/i);var wt=Object.freeze({__proto__:null,MUSTACHE_EXPR:it,ERB_EXPR:ot,TMPLIT_EXPR:dt,DATA_ATTR:$,ARIA_ATTR:ct,IS_ALLOWED_URI:W,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:rt,DOCTYPE_NAME:mt});let _t=()=>typeof window>"u"?null:window,Ct=function(kt,gt){if(typeof kt!="object"||typeof kt.createPolicy!="function")return null;let ut=null,Q="data-tt-policy-suffix";gt.currentScript&&gt.currentScript.hasAttribute(Q)&&(ut=gt.currentScript.getAttribute(Q));let Y="dompurify"+(ut?"#"+ut:"");try{return kt.createPolicy(Y,{createHTML(et){return et},createScriptURL(et){return et}})}catch{return console.warn("TrustedTypes policy "+Y+" could not be created."),null}};function Ft(){let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_t(),kt=I=>Ft(I);if(kt.version="3.0.2",kt.removed=[],!vt||!vt.document||vt.document.nodeType!==9)return kt.isSupported=!1,kt;let gt=vt.document,{document:ut}=vt,{DocumentFragment:Q,HTMLTemplateElement:Y,Node:et,Element:lt,NodeFilter:pt,NamedNodeMap:bt=vt.NamedNodeMap||vt.MozNamedAttrMap,HTMLFormElement:Et,DOMParser:Ot,trustedTypes:zt}=vt,Gt=lt.prototype,Jt=tt(Gt,"cloneNode"),Kt=tt(Gt,"nextSibling"),ie=tt(Gt,"childNodes"),Xt=tt(Gt,"parentNode");if(typeof Y=="function"){let I=ut.createElement("template");I.content&&I.content.ownerDocument&&(ut=I.content.ownerDocument)}let Ut=Ct(zt,gt),_e=Ut?Ut.createHTML(""):"",{implementation:le,createNodeIterator:ye,createDocumentFragment:Ze,getElementsByTagName:ce}=ut,{importNode:ke}=gt,He={};kt.isSupported=typeof n=="function"&&typeof Xt=="function"&&le&&typeof le.createHTMLDocument<"u";let{MUSTACHE_EXPR:$t,ERB_EXPR:Te,TMPLIT_EXPR:bi,DATA_ATTR:ue,ARIA_ATTR:Fe,IS_SCRIPT_OR_DATA:ai,ATTR_WHITESPACE:Le}=wt,{IS_ALLOWED_URI:Oe}=wt,ir=null,We=V({},[...K,...B,...N,...w,...k]),It=null,qt=V({},[...T,...R,...F,...H]),jt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ae=null,Qe=null,se=!0,ve=!0,$e=!1,Ie=!0,fe=!1,Ye=!1,Ve=!1,ii=!1,Ke=!1,pr=!1,Je=!1,oi=!0,cr=!1,ki="user-content-",Tt=!0,Ht=!1,re={},Qt=null,he=V({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ee=null,Ae=V({},["audio","video","img","source","image","track"]),ti=null,Ue=V({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),we="http://www.w3.org/1998/Math/MathML",pe="http://www.w3.org/2000/svg",yi="http://www.w3.org/1999/xhtml",ri=yi,li=!1,wi=null,me=V({},[we,pe,yi],m),ui,br=["application/xhtml+xml","text/html"],Xr="text/html",Se,Ln=null,Vn=ut.createElement("form"),ni=function(j){return j instanceof RegExp||j instanceof Function},ze=function(j){Ln&&Ln===j||((!j||typeof j!="object")&&(j={}),j=G(j),ui=br.indexOf(j.PARSER_MEDIA_TYPE)===-1?ui=Xr:ui=j.PARSER_MEDIA_TYPE,Se=ui==="application/xhtml+xml"?m:g,ir="ALLOWED_TAGS"in j?V({},j.ALLOWED_TAGS,Se):We,It="ALLOWED_ATTR"in j?V({},j.ALLOWED_ATTR,Se):qt,wi="ALLOWED_NAMESPACES"in j?V({},j.ALLOWED_NAMESPACES,m):me,ti="ADD_URI_SAFE_ATTR"in j?V(G(Ue),j.ADD_URI_SAFE_ATTR,Se):Ue,Ee="ADD_DATA_URI_TAGS"in j?V(G(Ae),j.ADD_DATA_URI_TAGS,Se):Ae,Qt="FORBID_CONTENTS"in j?V({},j.FORBID_CONTENTS,Se):he,ae="FORBID_TAGS"in j?V({},j.FORBID_TAGS,Se):{},Qe="FORBID_ATTR"in j?V({},j.FORBID_ATTR,Se):{},re="USE_PROFILES"in j?j.USE_PROFILES:!1,se=j.ALLOW_ARIA_ATTR!==!1,ve=j.ALLOW_DATA_ATTR!==!1,$e=j.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,fe=j.SAFE_FOR_TEMPLATES||!1,Ye=j.WHOLE_DOCUMENT||!1,Ke=j.RETURN_DOM||!1,pr=j.RETURN_DOM_FRAGMENT||!1,Je=j.RETURN_TRUSTED_TYPE||!1,ii=j.FORCE_BODY||!1,oi=j.SANITIZE_DOM!==!1,cr=j.SANITIZE_NAMED_PROPS||!1,Tt=j.KEEP_CONTENT!==!1,Ht=j.IN_PLACE||!1,Oe=j.ALLOWED_URI_REGEXP||W,ri=j.NAMESPACE||yi,jt=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&ni(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(jt.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&ni(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(jt.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(jt.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),fe&&(ve=!1),pr&&(Ke=!0),re&&(ir=V({},[...k]),It=[],re.html===!0&&(V(ir,K),V(It,T)),re.svg===!0&&(V(ir,B),V(It,R),V(It,H)),re.svgFilters===!0&&(V(ir,N),V(It,R),V(It,H)),re.mathMl===!0&&(V(ir,w),V(It,F),V(It,H))),j.ADD_TAGS&&(ir===We&&(ir=G(ir)),V(ir,j.ADD_TAGS,Se)),j.ADD_ATTR&&(It===qt&&(It=G(It)),V(It,j.ADD_ATTR,Se)),j.ADD_URI_SAFE_ATTR&&V(ti,j.ADD_URI_SAFE_ATTR,Se),j.FORBID_CONTENTS&&(Qt===he&&(Qt=G(Qt)),V(Qt,j.FORBID_CONTENTS,Se)),Tt&&(ir["#text"]=!0),Ye&&V(ir,["html","head","body"]),ir.table&&(V(ir,["tbody"]),delete ae.tbody),s&&s(j),Ln=j)},Tr=V({},["mi","mo","mn","ms","mtext"]),Rr=V({},["foreignobject","desc","title","annotation-xml"]),bn=V({},["title","style","font","a","script"]),oe=V({},B);V(oe,N),V(oe,Z);let Ar=V({},w);V(Ar,C);let gi=function(j){let nt=Xt(j);(!nt||!nt.tagName)&&(nt={namespaceURI:ri,tagName:"template"});let ht=g(j.tagName),xt=g(nt.tagName);return wi[j.namespaceURI]?j.namespaceURI===pe?nt.namespaceURI===yi?ht==="svg":nt.namespaceURI===we?ht==="svg"&&(xt==="annotation-xml"||Tr[xt]):!!oe[ht]:j.namespaceURI===we?nt.namespaceURI===yi?ht==="math":nt.namespaceURI===pe?ht==="math"&&Rr[xt]:!!Ar[ht]:j.namespaceURI===yi?nt.namespaceURI===pe&&!Rr[xt]||nt.namespaceURI===we&&!Tr[xt]?!1:!Ar[ht]&&(bn[ht]||!oe[ht]):!!(ui==="application/xhtml+xml"&&wi[j.namespaceURI]):!1},_r=function(j){p(kt.removed,{element:j});try{j.parentNode.removeChild(j)}catch{j.remove()}},on=function(j,nt){try{p(kt.removed,{attribute:nt.getAttributeNode(j),from:nt})}catch{p(kt.removed,{attribute:null,from:nt})}if(nt.removeAttribute(j),j==="is"&&!It[j])if(Ke||pr)try{_r(nt)}catch{}else try{nt.setAttribute(j,"")}catch{}},yr=function(j){let nt,ht;if(ii)j="<remove></remove>"+j;else{let Rt=_(j,/^[\r\n\t ]+/);ht=Rt&&Rt[0]}ui==="application/xhtml+xml"&&ri===yi&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");let xt=Ut?Ut.createHTML(j):j;if(ri===yi)try{nt=new Ot().parseFromString(xt,ui)}catch{}if(!nt||!nt.documentElement){nt=le.createDocument(ri,"template",null);try{nt.documentElement.innerHTML=li?_e:xt}catch{}}let Lt=nt.body||nt.documentElement;return j&&ht&&Lt.insertBefore(ut.createTextNode(ht),Lt.childNodes[0]||null),ri===yi?ce.call(nt,Ye?"html":"body")[0]:Ye?nt.documentElement:Lt},hi=function(j){return ye.call(j.ownerDocument||j,j,pt.SHOW_ELEMENT|pt.SHOW_COMMENT|pt.SHOW_TEXT,null,!1)},fi=function(j){return j instanceof Et&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof bt)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},Ti=function(j){return typeof et=="object"?j instanceof et:j&&typeof j=="object"&&typeof j.nodeType=="number"&&typeof j.nodeName=="string"},$r=function(j,nt,ht){He[j]&&h(He[j],xt=>{xt.call(kt,nt,ht,Ln)})},us=function(j){let nt;if($r("beforeSanitizeElements",j,null),fi(j))return _r(j),!0;let ht=Se(j.nodeName);if($r("uponSanitizeElement",j,{tagName:ht,allowedTags:ir}),j.hasChildNodes()&&!Ti(j.firstElementChild)&&(!Ti(j.content)||!Ti(j.content.firstElementChild))&&O(/<[/\w]/g,j.innerHTML)&&O(/<[/\w]/g,j.textContent))return _r(j),!0;if(!ir[ht]||ae[ht]){if(!ae[ht]&&Yr(ht)&&(jt.tagNameCheck instanceof RegExp&&O(jt.tagNameCheck,ht)||jt.tagNameCheck instanceof Function&&jt.tagNameCheck(ht)))return!1;if(Tt&&!Qt[ht]){let xt=Xt(j)||j.parentNode,Lt=ie(j)||j.childNodes;if(Lt&&xt){let Rt=Lt.length;for(let Pt=Rt-1;Pt>=0;--Pt)xt.insertBefore(Jt(Lt[Pt],!0),Kt(j))}}return _r(j),!0}return j instanceof lt&&!gi(j)||(ht==="noscript"||ht==="noembed")&&O(/<\/no(script|embed)/i,j.innerHTML)?(_r(j),!0):(fe&&j.nodeType===3&&(nt=j.textContent,nt=v(nt,$t," "),nt=v(nt,Te," "),nt=v(nt,bi," "),j.textContent!==nt&&(p(kt.removed,{element:j.cloneNode()}),j.textContent=nt)),$r("afterSanitizeElements",j,null),!1)},je=function(j,nt,ht){if(oi&&(nt==="id"||nt==="name")&&(ht in ut||ht in Vn))return!1;if(!(ve&&!Qe[nt]&&O(ue,nt))){if(!(se&&O(Fe,nt))){if(!It[nt]||Qe[nt]){if(!(Yr(j)&&(jt.tagNameCheck instanceof RegExp&&O(jt.tagNameCheck,j)||jt.tagNameCheck instanceof Function&&jt.tagNameCheck(j))&&(jt.attributeNameCheck instanceof RegExp&&O(jt.attributeNameCheck,nt)||jt.attributeNameCheck instanceof Function&&jt.attributeNameCheck(nt))||nt==="is"&&jt.allowCustomizedBuiltInElements&&(jt.tagNameCheck instanceof RegExp&&O(jt.tagNameCheck,ht)||jt.tagNameCheck instanceof Function&&jt.tagNameCheck(ht))))return!1}else if(!ti[nt]){if(!O(Oe,v(ht,Le,""))){if(!((nt==="src"||nt==="xlink:href"||nt==="href")&&j!=="script"&&x(ht,"data:")===0&&Ee[j])){if(!($e&&!O(ai,v(ht,Le,"")))){if(ht)return!1}}}}}}return!0},Yr=function(j){return j.indexOf("-")>0},ci=function(j){let nt,ht,xt,Lt;$r("beforeSanitizeAttributes",j,null);let{attributes:Rt}=j;if(!Rt)return;let Pt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:It};for(Lt=Rt.length;Lt--;){nt=Rt[Lt];let{name:Nt,namespaceURI:Vt}=nt;if(ht=Nt==="value"?nt.value:S(nt.value),xt=Se(Nt),Pt.attrName=xt,Pt.attrValue=ht,Pt.keepAttr=!0,Pt.forceKeepAttr=void 0,$r("uponSanitizeAttribute",j,Pt),ht=Pt.attrValue,Pt.forceKeepAttr||(on(Nt,j),!Pt.keepAttr))continue;if(!Ie&&O(/\/>/i,ht)){on(Nt,j);continue}fe&&(ht=v(ht,$t," "),ht=v(ht,Te," "),ht=v(ht,bi," "));let ne=Se(j.nodeName);if(je(ne,xt,ht)){if(cr&&(xt==="id"||xt==="name")&&(on(Nt,j),ht=ki+ht),Ut&&typeof zt=="object"&&typeof zt.getAttributeType=="function"&&!Vt)switch(zt.getAttributeType(ne,xt)){case"TrustedHTML":ht=Ut.createHTML(ht);break;case"TrustedScriptURL":ht=Ut.createScriptURL(ht);break}try{Vt?j.setAttributeNS(Vt,Nt,ht):j.setAttribute(Nt,ht),d(kt.removed)}catch{}}}$r("afterSanitizeAttributes",j,null)},M=function I(j){let nt,ht=hi(j);for($r("beforeSanitizeShadowDOM",j,null);nt=ht.nextNode();)$r("uponSanitizeShadowNode",nt,null),!us(nt)&&(nt.content instanceof Q&&I(nt.content),ci(nt));$r("afterSanitizeShadowDOM",j,null)};return kt.sanitize=function(I){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt,ht,xt,Lt;if(li=!I,li&&(I="<!-->"),typeof I!="string"&&!Ti(I)){if(typeof I.toString!="function")throw D("toString is not a function");if(I=I.toString(),typeof I!="string")throw D("dirty is not a string, aborting")}if(!kt.isSupported)return I;if(Ve||ze(j),kt.removed=[],typeof I=="string"&&(Ht=!1),Ht){if(I.nodeName){let Nt=Se(I.nodeName);if(!ir[Nt]||ae[Nt])throw D("root node is forbidden and cannot be sanitized in-place")}}else if(I instanceof et)nt=yr("<!---->"),ht=nt.ownerDocument.importNode(I,!0),ht.nodeType===1&&ht.nodeName==="BODY"||ht.nodeName==="HTML"?nt=ht:nt.appendChild(ht);else{if(!Ke&&!fe&&!Ye&&I.indexOf("<")===-1)return Ut&&Je?Ut.createHTML(I):I;if(nt=yr(I),!nt)return Ke?null:Je?_e:""}nt&&ii&&_r(nt.firstChild);let Rt=hi(Ht?I:nt);for(;xt=Rt.nextNode();)us(xt)||(xt.content instanceof Q&&M(xt.content),ci(xt));if(Ht)return I;if(Ke){if(pr)for(Lt=Ze.call(nt.ownerDocument);nt.firstChild;)Lt.appendChild(nt.firstChild);else Lt=nt;return(It.shadowroot||It.shadowrootmod)&&(Lt=ke.call(gt,Lt,!0)),Lt}let Pt=Ye?nt.outerHTML:nt.innerHTML;return Ye&&ir["!doctype"]&&nt.ownerDocument&&nt.ownerDocument.doctype&&nt.ownerDocument.doctype.name&&O(mt,nt.ownerDocument.doctype.name)&&(Pt="<!DOCTYPE "+nt.ownerDocument.doctype.name+`>
`+Pt),fe&&(Pt=v(Pt,$t," "),Pt=v(Pt,Te," "),Pt=v(Pt,bi," ")),Ut&&Je?Ut.createHTML(Pt):Pt},kt.setConfig=function(I){ze(I),Ve=!0},kt.clearConfig=function(){Ln=null,Ve=!1},kt.isValidAttribute=function(I,j,nt){Ln||ze({});let ht=Se(I),xt=Se(j);return je(ht,xt,nt)},kt.addHook=function(I,j){typeof j=="function"&&(He[I]=He[I]||[],p(He[I],j))},kt.removeHook=function(I){if(He[I])return d(He[I])},kt.removeHooks=function(I){He[I]&&(He[I]=[])},kt.removeAllHooks=function(){He={}},kt}var At=Ft();return At})});var bv=Ge((vH,md)=>{(function(n){if(typeof define=="function"&&define.amd)define(["leaflet"],n);else if(typeof md<"u")md.exports=n(Jn());else{if(typeof window.L>"u")throw new Error("Leaflet must be loaded first");n(window.L)}})(function(n){return n.Control.Search=n.Control.extend({includes:n.version[0]==="1"?n.Evented.prototype:n.Mixin.Events,options:{url:"",layer:null,sourceData:null,jsonpParam:null,propertyLoc:"loc",propertyName:"title",formatData:null,filterData:null,moveToLocation:null,buildTip:null,container:"",zoom:null,minLength:1,initial:!0,casesensitive:!1,autoType:!0,delayType:400,tooltipLimit:-1,tipAutoSubmit:!0,firstTipSubmit:!1,autoResize:!0,collapsed:!0,autoCollapse:!1,autoCollapseTime:1200,textErr:"Location not found",textCancel:"Cancel",textPlaceholder:"Search...",hideMarkerOnCollapse:!1,position:"topleft",marker:{icon:!1,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}}},_getPath:function(t,e){let i=e.split("."),r=i.pop(),s=i.length,a=i[0],o=1;if(s>0)for(;(t=t[a])&&o<s;)a=i[o++];if(t)return t[r]},_isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},initialize:function(t){n.Util.setOptions(this,t||{}),this._inputMinSize=this.options.textPlaceholder?this.options.textPlaceholder.length:10,this._layer=this.options.layer||new n.LayerGroup,this._filterData=this.options.filterData||this._defaultFilterData,this._formatData=this.options.formatData||this._defaultFormatData,this._moveToLocation=this.options.moveToLocation||this._defaultMoveToLocation,this._autoTypeTmp=this.options.autoType,this._countertips=0,this._recordsCache={},this._curReq=null},onAdd:function(t){return this._map=t,this._container=n.DomUtil.create("div","leaflet-control-search"),this._input=this._createInput(this.options.textPlaceholder,"search-input"),this._tooltip=this._createTooltip("search-tooltip"),this._cancel=this._createCancel(this.options.textCancel,"search-cancel"),this._button=this._createButton(this.options.textPlaceholder,"search-button"),this._alert=this._createAlert("search-alert"),this.options.collapsed===!1&&this.expand(this.options.collapsed),this.options.marker&&(this.options.marker instanceof n.Marker||this.options.marker instanceof n.CircleMarker?this._markerSearch=this.options.marker:this._isObject(this.options.marker)&&(this._markerSearch=new n.Control.Search.Marker([0,0],this.options.marker)),this._markerSearch._isMarkerSearch=!0),this.setLayer(this._layer),t.on({resize:this._handleAutoresize},this),this._container},addTo:function(t){return this.options.container?(this._container=this.onAdd(t),this._wrapper=n.DomUtil.get(this.options.container),this._wrapper.style.position="relative",this._wrapper.appendChild(this._container)):n.Control.prototype.addTo.call(this,t),this},onRemove:function(t){this._recordsCache={},t.off({resize:this._handleAutoresize},this)},setLayer:function(t){return this._layer=t,this._layer.addTo(this._map),this},showAlert:function(t){let e=this;return t=t||this.options.textErr,this._alert.style.display="block",this._alert.innerHTML=t,clearTimeout(this.timerAlert),this.timerAlert=setTimeout(function(){e.hideAlert()},this.options.autoCollapseTime),this},hideAlert:function(){return this._alert.style.display="none",this},cancel:function(){return this._input.value="",this._handleKeypress({keyCode:8}),this._input.size=this._inputMinSize,this._input.focus(),this._cancel.style.display="none",this._hideTooltip(),this.fire("search:cancel"),this},expand:function(t){return t=typeof t=="boolean"?t:!0,this._input.style.display="block",n.DomUtil.addClass(this._container,"search-exp"),t!==!1&&(this._input.focus(),this._map.on("dragstart click",this.collapse,this)),this.fire("search:expanded"),this},collapse:function(){return this._hideTooltip(),this.cancel(),this._alert.style.display="none",this._input.blur(),this.options.collapsed&&(this._input.style.display="none",this._cancel.style.display="none",n.DomUtil.removeClass(this._container,"search-exp"),this.options.hideMarkerOnCollapse&&this._map.removeLayer(this._markerSearch),this._map.off("dragstart click",this.collapse,this)),this.fire("search:collapsed"),this},collapseDelayed:function(){let t=this;return this.options.autoCollapse?(clearTimeout(this.timerCollapse),this.timerCollapse=setTimeout(function(){t.collapse()},this.options.autoCollapseTime),this):this},collapseDelayedStop:function(){return clearTimeout(this.timerCollapse),this},_createAlert:function(t){let e=n.DomUtil.create("div",t,this._container);return e.style.display="none",n.DomEvent.on(e,"click",n.DomEvent.stop,this).on(e,"click",this.hideAlert,this),e},_createInput:function(t,e){let i=this,r=n.DomUtil.create("label",e,this._container),s=n.DomUtil.create("input",e,this._container);return s.type="text",s.size=this._inputMinSize,s.value="",s.autocomplete="off",s.autocorrect="off",s.autocapitalize="off",s.placeholder=t,s.style.display="none",s.role="search",s.id=s.role+s.type+s.size,r.htmlFor=s.id,r.style.display="none",r.value=t,n.DomEvent.disableClickPropagation(s).on(s,"keyup",this._handleKeypress,this).on(s,"paste",function(a){setTimeout(function(o){i._handleKeypress(o)},10,a)},this).on(s,"blur",this.collapseDelayed,this).on(s,"focus",this.collapseDelayedStop,this),s},_createCancel:function(t,e){let i=n.DomUtil.create("a",e,this._container);return i.href="#",i.title=t,i.style.display="none",i.innerHTML="<span>&otimes;</span>",n.DomEvent.on(i,"click",n.DomEvent.stop,this).on(i,"click",this.cancel,this),i},_createButton:function(t,e){let i=n.DomUtil.create("a",e,this._container);return i.href="#",i.title=t,n.DomEvent.on(i,"click",n.DomEvent.stop,this).on(i,"click",this._handleSubmit,this).on(i,"focus",this.collapseDelayedStop,this).on(i,"blur",this.collapseDelayed,this),i},_createTooltip:function(t){let e=this,i=n.DomUtil.create("ul",t,this._container);return i.style.display="none",n.DomEvent.disableClickPropagation(i).on(i,"blur",this.collapseDelayed,this).on(i,"wheel",function(r){e.collapseDelayedStop(),n.DomEvent.stopPropagation(r)},this).on(i,"mouseover",function(r){e.collapseDelayedStop()},this),i},_createTip:function(t,e){let i;if(this.options.buildTip){if(i=this.options.buildTip.call(this,t,e),typeof i=="string"){let r=n.DomUtil.create("div");r.innerHTML=i,i=r.firstChild}}else i=n.DomUtil.create("li",""),i.innerHTML=t;return n.DomUtil.addClass(i,"search-tip"),i._text=t,this.options.tipAutoSubmit&&n.DomEvent.disableClickPropagation(i).on(i,"click",n.DomEvent.stop,this).on(i,"click",function(r){this._input.value=t,this._handleAutoresize(),this._input.focus(),this._hideTooltip(),this._handleSubmit()},this),i},_getUrl:function(t){return typeof this.options.url=="function"?this.options.url(t):this.options.url},_defaultFilterData:function(t,e){let i={};if(t=t.replace(new RegExp("[.*+?^${}()|[]\\]","g"),""),t==="")return[];let r=this.options.initial?"^":"",s=this.options.casesensitive?void 0:"i",a=new RegExp(r+t,s);for(let o in e)a.test(o)&&(i[o]=e[o]);return i},showTooltip:function(t){if(this._countertips=0,this._tooltip.innerHTML="",this._tooltip.currentSelection=-1,this.options.tooltipLimit)for(let e in t){if(this._countertips===this.options.tooltipLimit)break;this._countertips++,this._tooltip.appendChild(this._createTip(e,t[e]))}return this._countertips>0?(this._tooltip.style.display="block",this._autoTypeTmp&&this._autoType(),this._autoTypeTmp=this.options.autoType):this._hideTooltip(),this._tooltip.scrollTop=0,this._countertips},_hideTooltip:function(){return this._tooltip.style.display="none",this._tooltip.innerHTML="",0},_defaultFormatData:function(t){let e=this,i=this.options.propertyName,r=this.options.propertyLoc,s={};if(n.Util.isArray(r))for(let a in t)s[e._getPath(t[a],i)]=n.latLng(e._getPath(t[a],r[0]),e._getPath(t[a],r[1]));else for(let a in t)s[e._getPath(t[a],i)]=n.latLng(e._getPath(t[a],r));return s},_recordsFromJsonp:function(t,e){n.Control.Search.callJsonp=e;let i=n.DomUtil.create("script","leaflet-search-jsonp",document.getElementsByTagName("body")[0]),r=n.Util.template(this._getUrl(t)+"&"+this.options.jsonpParam+"=L.Control.Search.callJsonp",{s:t});return i.type="text/javascript",i.src=r,{abort:function(){i.parentNode.removeChild(i)}}},_recordsFromAjax:function(t,e){let i;try{i=new window.XMLHttpRequest}catch{throw new Error("XMLHttpRequest is not supported")}let r=n.Util.template(this._getUrl(t),{s:t});return i.open("GET",r),i.onload=function(){e(JSON.parse(i.responseText))},i.onreadystatechange=function(){i.readyState===4&&i.status===200&&this.onload()},i.send(),i},_searchInLayer:function(t,e,i){let r=this,s;t instanceof n.Control.Search.Marker||(t instanceof n.Marker||t instanceof n.CircleMarker?r._getPath(t.options,i)?(s=t.getLatLng(),s.layer=t,e[r._getPath(t.options,i)]=s):r._getPath(t.feature.properties,i)&&(s=t.getLatLng(),s.layer=t,e[r._getPath(t.feature.properties,i)]=s):t instanceof n.Path||t instanceof n.Polyline||t instanceof n.Polygon?r._getPath(t.options,i)?(s=t.getBounds().getCenter(),s.layer=t,e[r._getPath(t.options,i)]=s):r._getPath(t.feature.properties,i)&&(s=t.getBounds().getCenter(),s.layer=t,e[r._getPath(t.feature.properties,i)]=s):Object.prototype.hasOwnProperty.call(t,"feature")?Object.prototype.hasOwnProperty.call(t.feature.properties,i)&&(t.getLatLng&&typeof t.getLatLng=="function"?(s=t.getLatLng(),s.layer=t,e[t.feature.properties[i]]=s):t.getBounds&&typeof t.getBounds=="function"&&(s=t.getBounds().getCenter(),s.layer=t,e[t.feature.properties[i]]=s)):t instanceof n.LayerGroup&&t.eachLayer(function(a){r._searchInLayer(a,e,i)}))},_recordsFromLayer:function(){let t=this,e={},i=this.options.propertyName;return this._layer.eachLayer(function(r){t._searchInLayer(r,e,i)}),e},_autoType:function(){let t=this._input.value.length,e=this._tooltip.firstChild?this._tooltip.firstChild._text:"",i=e.length;if(e.indexOf(this._input.value)===0)if(this._input.value=e,this._handleAutoresize(),this._input.createTextRange){let r=this._input.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",i),r.select()}else this._input.setSelectionRange?this._input.setSelectionRange(t,i):this._input.selectionStart&&(this._input.selectionStart=t,this._input.selectionEnd=i)},_hideAutoType:function(){let t;if((t=this._input.selection)&&t.empty)t.empty();else if(this._input.createTextRange){t=this._input.createTextRange(),t.collapse(!0);let e=this._input.value.length;t.moveStart("character",e),t.moveEnd("character",e),t.select()}else this._input.getSelection&&this._input.getSelection().removeAllRanges(),this._input.selectionStart=this._input.selectionEnd},_handleKeypress:function(t){let e=this;switch(t.keyCode){case 27:this.collapse();break;case 13:(this._countertips===1||this.options.firstTipSubmit&&this._countertips>0)&&this._tooltip.currentSelection===-1&&this._handleArrowSelect(1),this._handleSubmit();break;case 38:this._handleArrowSelect(-1);break;case 40:this._handleArrowSelect(1);break;case 45:case 46:this._autoTypeTmp=!1;break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:this._input.value.length?this._cancel.style.display="block":this._cancel.style.display="none",this._input.value.length>=this.options.minLength?(clearTimeout(this.timerKeypress),this.timerKeypress=setTimeout(function(){e._fillRecordsCache()},this.options.delayType)):this._hideTooltip()}this._handleAutoresize()},searchText:function(t){let e=t.charCodeAt(t.length);this._input.value=t,this._input.style.display="block",n.DomUtil.addClass(this._container,"search-exp"),this._autoTypeTmp=!1,this._handleKeypress({keyCode:e})},_fillRecordsCache:function(){let t=this,e=this._input.value,i;this._curReq&&this._curReq.abort&&this._curReq.abort(),n.DomUtil.addClass(this._container,"search-load"),this.options.layer?(this._recordsCache=this._recordsFromLayer(),i=this._filterData(this._input.value,this._recordsCache),this.showTooltip(i),n.DomUtil.removeClass(this._container,"search-load")):(this.options.sourceData?this._retrieveData=this.options.sourceData:this.options.url&&(this._retrieveData=this.options.jsonpParam?this._recordsFromJsonp:this._recordsFromAjax),this._curReq=this._retrieveData(this,e,function(r){t._recordsCache=t._formatData(t,r),t.options.sourceData?i=t._filterData(t._input.value,t._recordsCache):i=t._recordsCache,t.showTooltip(i),n.DomUtil.removeClass(t._container,"search-load")}))},_handleAutoresize:function(){let t;this._input.style.maxWidth!==this._map._container.offsetWidth&&(t=this._map._container.clientWidth,t-=83,this._input.style.maxWidth=t.toString()+"px"),this.options.autoResize&&this._container.offsetWidth+20<this._map._container.offsetWidth&&(this._input.size=this._input.value.length<this._inputMinSize?this._inputMinSize:this._input.value.length)},_handleArrowSelect:function(t){let e=this._tooltip.hasChildNodes()?this._tooltip.childNodes:[];for(let i=0;i<e.length;i++)n.DomUtil.removeClass(e[i],"search-tip-select");if(t===1&&this._tooltip.currentSelection>=e.length-1)n.DomUtil.addClass(e[this._tooltip.currentSelection],"search-tip-select");else if(t===-1&&this._tooltip.currentSelection<=0)this._tooltip.currentSelection=-1;else if(this._tooltip.style.display!=="none"){this._tooltip.currentSelection+=t,n.DomUtil.addClass(e[this._tooltip.currentSelection],"search-tip-select"),this._input.value=e[this._tooltip.currentSelection]._text;let i=e[this._tooltip.currentSelection].offsetTop;i+e[this._tooltip.currentSelection].clientHeight>=this._tooltip.scrollTop+this._tooltip.clientHeight?this._tooltip.scrollTop=i-this._tooltip.clientHeight+e[this._tooltip.currentSelection].clientHeight:i<=this._tooltip.scrollTop&&(this._tooltip.scrollTop=i)}},_handleSubmit:function(){if(this._hideAutoType(),this.hideAlert(),this._hideTooltip(),this._input.style.display==="none")this.expand();else if(this._input.value==="")this.collapse();else{let t=this._getLocation(this._input.value);t?(this.showLocation(t,this._input.value),this.fire("search:locationfound",{latlng:t,text:this._input.value,layer:t.layer?t.layer:null})):this.showAlert()}},_getLocation:function(t){return Object.prototype.hasOwnProperty.call(this._recordsCache,t)?this._recordsCache[t]:!1},_defaultMoveToLocation:function(t,e,i){this.options.zoom?this._map.setView(t,this.options.zoom):this._map.panTo(t)},showLocation:function(t,e){let i=this;return i._map.once("moveend zoomend",function(r){i._markerSearch&&i._markerSearch.addTo(i._map).setLatLng(t)}),i._moveToLocation(t,e,i._map),i.options.autoCollapse&&i.collapse(),i}}),n.Control.Search.Marker=n.Marker.extend({includes:n.version[0]==="1"?n.Evented.prototype:n.Mixin.Events,options:{icon:new n.Icon.Default,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}},initialize:function(t,e){n.setOptions(this,e),e.icon===!0&&(e.icon=new n.Icon.Default),n.Marker.prototype.initialize.call(this,t,e),n.Control.Search.prototype._isObject(this.options.circle)&&(this._circleLoc=new n.CircleMarker(t,this.options.circle))},onAdd:function(t){n.Marker.prototype.onAdd.call(this,t),this._circleLoc&&(t.addLayer(this._circleLoc),this.options.animate&&this.animate())},onRemove:function(t){n.Marker.prototype.onRemove.call(this,t),this._circleLoc&&t.removeLayer(this._circleLoc)},setLatLng:function(t){return n.Marker.prototype.setLatLng.call(this,t),this._circleLoc&&this._circleLoc.setLatLng(t),this},_initIcon:function(){this.options.icon&&n.Marker.prototype._initIcon.call(this)},_removeIcon:function(){this.options.icon&&n.Marker.prototype._removeIcon.call(this)},animate:function(){if(this._circleLoc){let t=this._circleLoc,e=200,r=parseInt(t._radius/5),s=this.options.circle.radius,a=t._radius*2,o=0;t._timerAnimLoc=setInterval(function(){o+=.5,r+=o,a-=r,t.setRadius(a),a<s&&(clearInterval(t._timerAnimLoc),t.setRadius(s))},e)}return this}}),n.Map.addInitHook(function(){this.options.searchControl&&(this.searchControl=n.control.search(this.options.searchControl),this.addControl(this.searchControl))}),n.control.search=function(t){return new n.Control.Search(t)},n.Control.Search})});var Tv=Ge((Lv,Pp)=>{(function(n){typeof Lv=="object"&&typeof Pp<"u"?Pp.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).ExcelJS=n()})(function(){return function n(t,e,i){function r(o,l){if(!e[o]){if(!t[o]){var c=typeof fl=="function"&&fl;if(!l&&c)return c(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var d=e[o]={exports:{}};t[o][0].call(d.exports,function(p){return r(t[o][1][p]||p)},d,d.exports,n,t,e,i)}return e[o].exports}for(var s=typeof fl=="function"&&fl,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(n,t,e){"use strict";let i=n("fs"),r=n("fast-csv"),s=n("dayjs/plugin/customParseFormat"),a=n("dayjs/plugin/utc"),o=n("dayjs").extend(s).extend(a),l=n("../utils/stream-buf"),{fs:{exists:c}}=n("../utils/utils"),h={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};t.exports=class{constructor(d){this.workbook=d,this.worksheet=null}async readFile(d,p){if(p=p||{},!await c(d))throw new Error("File not found: "+d);let g=i.createReadStream(d),m=await this.read(g,p);return g.close(),m}read(d,p){return p=p||{},new Promise((g,m)=>{let _=this.workbook.addWorksheet(p.sheetName),v=p.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],x=p.map||function(O){if(O==="")return null;let D=Number(O);if(!Number.isNaN(D)&&D!==1/0)return D;let U=v.reduce((V,G)=>{if(V)return V;let tt=o(O,G,!0);return tt.isValid()?tt:null},null);if(U)return new Date(U.valueOf());let z=h[O];return z!==void 0?z:O},S=r.parse(p.parserOptions).on("data",O=>{_.addRow(O.map(x))}).on("end",()=>{S.emit("worksheet",_)});S.on("worksheet",g).on("error",m),d.pipe(S)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(d,p){return new Promise((g,m)=>{p=p||{};let _=this.workbook.getWorksheet(p.sheetName||p.sheetId),v=r.format(p.formatterOptions);d.on("finish",()=>{g()}),v.on("error",m),v.pipe(d);let{dateFormat:x,dateUTC:S}=p,O=p.map||(z=>{if(z){if(z.text||z.hyperlink)return z.hyperlink||z.text||"";if(z.formula||z.result)return z.result||"";if(z instanceof Date)return x?S?o.utc(z).format(x):o(z).format(x):S?o.utc(z).format():o(z).format();if(z.error)return z.error;if(typeof z=="object")return JSON.stringify(z)}return z}),D=p.includeEmptyRows===void 0||p.includeEmptyRows,U=1;_&&_.eachRow((z,V)=>{if(D)for(;U++<V-1;)v.write([]);let{values:G}=z;G.shift(),v.write(G.map(O)),U=V}),v.end()})}writeFile(d,p){let g={encoding:(p=p||{}).encoding||"utf8"},m=i.createWriteStream(d,g);return this.write(m,p)}async writeBuffer(d){let p=new l;return await this.write(p,d),p.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(n,t,e){"use strict";let i=n("../utils/col-cache");class r{constructor(a,o){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=a,o)if(typeof o=="string"){let c=i.decodeAddress(o);this.nativeCol=c.col+l,this.nativeColOff=0,this.nativeRow=c.row+l,this.nativeRowOff=0}else o.nativeCol!==void 0?(this.nativeCol=o.nativeCol||0,this.nativeColOff=o.nativeColOff||0,this.nativeRow=o.nativeRow||0,this.nativeRowOff=o.nativeRowOff||0):o.col!==void 0?(this.col=o.col+l,this.row=o.row+l):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(a){return a instanceof r||a==null?a:new r(a)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(a){this.nativeCol=Math.floor(a),this.nativeColOff=Math.floor((a-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(a){this.nativeRow=Math.floor(a),this.nativeRowOff=Math.floor((a-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(a){this.nativeCol=a.nativeCol,this.nativeColOff=a.nativeColOff,this.nativeRow=a.nativeRow,this.nativeRowOff=a.nativeRowOff}}t.exports=r},{"../utils/col-cache":19}],3:[function(n,t,e){"use strict";let i=n("../utils/col-cache"),r=n("../utils/under-dash"),s=n("./enums"),{slideFormula:a}=n("../utils/shared-formula"),o=n("./note");class l{constructor(d,p,g){if(!d||!p)throw new Error("A Cell needs a Row");this._row=d,this._column=p,i.validateAddress(g),this._address=g,this._value=c.create(l.Types.Null,this),this.style=this._mergeStyle(d.style,p.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(d){this.style.numFmt=d}get font(){return this.style.font}set font(d){this.style.font=d}get alignment(){return this.style.alignment}set alignment(d){this.style.alignment=d}get border(){return this.style.border}set border(d){this.style.border=d}get fill(){return this.style.fill}set fill(d){this.style.fill=d}get protection(){return this.style.protection}set protection(d){this.style.protection=d}_mergeStyle(d,p,g){let m=d&&d.numFmt||p&&p.numFmt;m&&(g.numFmt=m);let _=d&&d.font||p&&p.font;_&&(g.font=_);let v=d&&d.alignment||p&&p.alignment;v&&(g.alignment=v);let x=d&&d.border||p&&p.border;x&&(g.border=x);let S=d&&d.fill||p&&p.fill;S&&(g.fill=S);let O=d&&d.protection||p&&p.protection;return O&&(g.protection=O),g}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===l.Types.Merge}merge(d,p){this._value.release(),this._value=c.create(l.Types.Merge,this,d),p||(this.style=d.style)}unmerge(){this.type===l.Types.Merge&&(this._value.release(),this._value=c.create(l.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(d){return this._value.type===l.Types.Merge&&this._value.isMergedTo(d)}get master(){return this.type===l.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===l.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(d){this.type!==l.Types.Merge?(this._value.release(),this._value=c.create(c.getType(d),this,d)):this._value.master.value=d}get note(){return this._comment&&this._comment.note}set note(d){this._comment=new o(d)}get text(){return this._value.toString()}get html(){return r.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(d){this.type===l.Types.String&&(this._value=c.create(l.Types.Hyperlink,this,{text:this._value.value,hyperlink:d}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){let{worksheet:d}=this._row;return{sheetName:d.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(d){this.names=[d]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(d){let{definedNames:p}=this.workbook;p.removeAllNames(this.fullAddress),d.forEach(g=>{p.addEx(this.fullAddress,g)})}addName(d){this.workbook.definedNames.addEx(this.fullAddress,d)}removeName(d){this.workbook.definedNames.removeEx(this.fullAddress,d)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(d){this._dataValidations.add(this.address,d)}get model(){let{model:d}=this._value;return d.style=this.style,this._comment&&(d.comment=this._comment.model),d}set model(d){if(this._value.release(),this._value=c.create(d.type,this),this._value.model=d,d.comment)switch(d.comment.type){case"note":this._comment=o.fromModel(d.comment)}d.style?this.style=d.style:this.style={}}}l.Types=s.ValueType;let c={getType:h=>h==null?l.Types.Null:h instanceof String||typeof h=="string"?l.Types.String:typeof h=="number"?l.Types.Number:typeof h=="boolean"?l.Types.Boolean:h instanceof Date?l.Types.Date:h.text&&h.hyperlink?l.Types.Hyperlink:h.formula||h.sharedFormula?l.Types.Formula:h.richText?l.Types.RichText:h.sharedString?l.Types.SharedString:h.error?l.Types.Error:l.Types.JSON,types:[{t:l.Types.Null,f:class{constructor(h){this.model={address:h.address,type:l.Types.Null}}get value(){return null}set value(h){}get type(){return l.Types.Null}get effectiveType(){return l.Types.Null}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){}toString(){return""}}},{t:l.Types.Number,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Number,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.Number}get effectiveType(){return l.Types.Number}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.String,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.String,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.String}get effectiveType(){return l.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:l.Types.Date,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Date,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.Date}get effectiveType(){return l.Types.Date}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.Hyperlink,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Hyperlink,text:d?d.text:void 0,hyperlink:d?d.hyperlink:void 0},d&&d.tooltip&&(this.model.tooltip=d.tooltip)}get value(){let h={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(h.tooltip=this.model.tooltip),h}set value(h){this.model={text:h.text,hyperlink:h.hyperlink},h.tooltip&&(this.model.tooltip=h.tooltip)}get text(){return this.model.text}set text(h){this.model.text=h}get hyperlink(){return this.model.hyperlink}set hyperlink(h){this.model.hyperlink=h}get type(){return l.Types.Hyperlink}get effectiveType(){return l.Types.Hyperlink}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:l.Types.Formula,f:class{constructor(h,d){this.cell=h,this.model={address:h.address,type:l.Types.Formula,shareType:d?d.shareType:void 0,ref:d?d.ref:void 0,formula:d?d.formula:void 0,sharedFormula:d?d.sharedFormula:void 0,result:d?d.result:void 0}}_copyModel(h){let d={},p=g=>{let m=h[g];m&&(d[g]=m)};return p("formula"),p("result"),p("ref"),p("shareType"),p("sharedFormula"),d}get value(){return this._copyModel(this.model)}set value(h){this.model=this._copyModel(h)}validate(h){switch(c.getType(h)){case l.Types.Null:case l.Types.String:case l.Types.Number:case l.Types.Date:break;case l.Types.Hyperlink:case l.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(h){this.model.formula=h}get formulaType(){return this.model.formula?s.FormulaType.Master:this.model.sharedFormula?s.FormulaType.Shared:s.FormulaType.None}get result(){return this.model.result}set result(h){this.model.result=h}get type(){return l.Types.Formula}get effectiveType(){let h=this.model.result;return h==null?s.ValueType.Null:h instanceof String||typeof h=="string"?s.ValueType.String:typeof h=="number"?s.ValueType.Number:h instanceof Date?s.ValueType.Date:h.text&&h.hyperlink?s.ValueType.Hyperlink:h.formula?s.ValueType.Formula:s.ValueType.Null}get address(){return this.model.address}set address(h){this.model.address=h}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){let{worksheet:h}=this.cell,d=h.findCell(this.model.sharedFormula);this._translatedFormula=d&&a(d.formula,d.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:l.Types.Merge,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Merge,master:d?d.address:void 0},this._master=d,d&&d.addMergeRef()}get value(){return this._master.value}set value(h){h instanceof l?(this._master&&this._master.releaseMergeRef(),h.addMergeRef(),this._master=h):this._master.value=h}isMergedTo(h){return h===this._master}get master(){return this._master}get type(){return l.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:l.Types.JSON,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.String,value:JSON.stringify(d),rawValue:d}}get value(){return this.model.rawValue}set value(h){this.model.rawValue=h,this.model.value=JSON.stringify(h)}get type(){return l.Types.String}get effectiveType(){return l.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:l.Types.SharedString,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.SharedString,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.SharedString}get effectiveType(){return l.Types.SharedString}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.RichText,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.String,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}toString(){return this.model.value.richText.map(h=>h.text).join("")}get type(){return l.Types.RichText}get effectiveType(){return l.Types.RichText}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:l.Types.Boolean,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Boolean,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.Boolean}get effectiveType(){return l.Types.Boolean}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.Error,f:class{constructor(h,d){this.model={address:h.address,type:l.Types.Error,value:d}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return l.Types.Error}get effectiveType(){return l.Types.Error}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((h,d)=>(h[d.t]=d.f,h),[]),create(h,d,p){let g=this.types[h];if(!g)throw new Error("Could not create Value of type "+h);return new g(d,p)}};t.exports=l},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(n,t,e){"use strict";let i=n("../utils/under-dash"),r=n("./enums"),s=n("../utils/col-cache");class a{constructor(l,c,h){this._worksheet=l,this._number=c,h!==!1&&(this.defn=h)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return s.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(l){l?(this.key=l.key,this.width=l.width!==void 0?l.width:9,this.outlineLevel=l.outlineLevel,l.style?this.style=l.style:this.style={},this.header=l.header,this._hidden=!!l.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(l){l!==void 0?(this._header=l,this.headers.forEach((c,h)=>{this._worksheet.getCell(h+1,this.number).value=c})):this._header=void 0}get key(){return this._key}set key(l){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=l,l&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(l){this._hidden=l}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(l){this._outlineLevel=l}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(l){return this.width===l.width&&this.hidden===l.hidden&&this.outlineLevel===l.outlineLevel&&i.isEqual(this.style,l.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;let l=this.style;return!l||!(l.font||l.numFmt||l.alignment||l.border||l.fill||l.protection)}get headerCount(){return this.headers.length}eachCell(l,c){let h=this.number;c||(c=l,l=null),this._worksheet.eachRow(l,(d,p)=>{c(d.getCell(h),p)})}get values(){let l=[];return this.eachCell((c,h)=>{c&&c.type!==r.ValueType.Null&&(l[h]=c.value)}),l}set values(l){if(!l)return;let c=this.number,h=0;l.hasOwnProperty("0")&&(h=1),l.forEach((d,p)=>{this._worksheet.getCell(p+h,c).value=d})}_applyStyle(l,c){return this.style[l]=c,this.eachCell(h=>{h[l]=c}),c}get numFmt(){return this.style.numFmt}set numFmt(l){this._applyStyle("numFmt",l)}get font(){return this.style.font}set font(l){this._applyStyle("font",l)}get alignment(){return this.style.alignment}set alignment(l){this._applyStyle("alignment",l)}get protection(){return this.style.protection}set protection(l){this._applyStyle("protection",l)}get border(){return this.style.border}set border(l){this._applyStyle("border",l)}get fill(){return this.style.fill}set fill(l){this._applyStyle("fill",l)}static toModel(l){let c=[],h=null;return l&&l.forEach((d,p)=>{d.isDefault?h&&(h=null):h&&d.equivalentTo(h)?h.max=p+1:(h={min:p+1,max:p+1,width:d.width!==void 0?d.width:9,style:d.style,isCustomWidth:d.isCustomWidth,hidden:d.hidden,outlineLevel:d.outlineLevel,collapsed:d.collapsed},c.push(h))}),c.length?c:void 0}static fromModel(l,c){let h=[],d=1,p=0;for(c=(c=c||[]).sort(function(g,m){return g.min-m.min});p<c.length;){let g=c[p++];for(;d<g.min;)h.push(new a(l,d++));for(;d<=g.max;)h.push(new a(l,d++,g))}return h.length?h:null}}t.exports=a},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(n,t,e){"use strict";t.exports=class{constructor(i){this.model=i||{}}add(i,r){return this.model[i]=r}find(i){return this.model[i]}remove(i){this.model[i]=void 0}}},{}],6:[function(n,t,e){"use strict";let i=n("../utils/under-dash"),r=n("../utils/col-cache"),s=n("../utils/cell-matrix"),a=n("./range"),o=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;t.exports=class{constructor(){this.matrixMap={}}getMatrix(l){return this.matrixMap[l]||(this.matrixMap[l]=new s)}add(l,c){let h=r.decodeEx(l);this.addEx(h,c)}addEx(l,c){let h=this.getMatrix(c);if(l.top)for(let d=l.left;d<=l.right;d++)for(let p=l.top;p<=l.bottom;p++){let g={sheetName:l.sheetName,address:r.n2l(d)+p,row:p,col:d};h.addCellEx(g)}else h.addCellEx(l)}remove(l,c){let h=r.decodeEx(l);this.removeEx(h,c)}removeEx(l,c){this.getMatrix(c).removeCellEx(l)}removeAllNames(l){i.each(this.matrixMap,c=>{c.removeCellEx(l)})}forEach(l){i.each(this.matrixMap,(c,h)=>{c.forEach(d=>{l(h,d)})})}getNames(l){return this.getNamesEx(r.decodeEx(l))}getNamesEx(l){return i.map(this.matrixMap,(c,h)=>c.findCellEx(l)&&h).filter(Boolean)}_explore(l,c){c.mark=!1;let{sheetName:h}=c,d=new a(c.row,c.col,c.row,c.col,h),p,g;function m(v,x){let S=l.findCellAt(h,v,c.col);return!(!S||!S.mark)&&(d[x]=v,S.mark=!1,!0)}for(g=c.row-1;m(g,"top");g--);for(g=c.row+1;m(g,"bottom");g++);function _(v,x){let S=[];for(g=d.top;g<=d.bottom;g++){let O=l.findCellAt(h,g,v);if(!O||!O.mark)return!1;S.push(O)}d[x]=v;for(let O=0;O<S.length;O++)S[O].mark=!1;return!0}for(p=c.col-1;_(p,"left");p--);for(p=c.col+1;_(p,"right");p++);return d}getRanges(l,c){return(c=c||this.matrixMap[l])?(c.forEach(h=>{h.mark=!0}),{name:l,ranges:c.map(h=>h.mark&&this._explore(c,h)).filter(Boolean).map(h=>h.$shortRange)}):{name:l,ranges:[]}}normaliseMatrix(l,c){l.forEachInSheet(c,(h,d,p)=>{h&&(h.row===d&&h.col===p||(h.row=d,h.col=p,h.address=r.n2l(p)+d))})}spliceRows(l,c,h,d){i.each(this.matrixMap,p=>{p.spliceRows(l,c,h,d),this.normaliseMatrix(p,l)})}spliceColumns(l,c,h,d){i.each(this.matrixMap,p=>{p.spliceColumns(l,c,h,d),this.normaliseMatrix(p,l)})}get model(){return i.map(this.matrixMap,(l,c)=>this.getRanges(c,l)).filter(l=>l.ranges.length)}set model(l){let c=this.matrixMap={};l.forEach(h=>{let d=c[h.name]=new s;h.ranges.forEach(p=>{o.test(p.split("!").pop()||"")&&d.addCell(p)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(n,t,e){"use strict";t.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(n,t,e){"use strict";let i=n("../utils/col-cache"),r=n("./anchor");t.exports=class{constructor(s,a){this.worksheet=s,this.model=a}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(s){let{type:a,imageId:o,range:l,hyperlinks:c}=s;if(this.type=a,this.imageId=o,a==="image")if(typeof l=="string"){let h=i.decode(l);this.range={tl:new r(this.worksheet,{col:h.left,row:h.top},-1),br:new r(this.worksheet,{col:h.right,row:h.bottom},0),editAs:"oneCell"}}else this.range={tl:new r(this.worksheet,l.tl,0),br:l.br&&new r(this.worksheet,l.br,0),ext:l.ext,editAs:l.editAs,hyperlinks:c||l.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(n,t,e){"use strict";let i=n("../utils/under-dash");class r{constructor(a){this.note=a}get model(){let a=null;switch(typeof this.note){case"string":a={type:"note",note:{texts:[{text:this.note}]}};break;default:a={type:"note",note:this.note}}return i.deepMerge({},r.DEFAULT_CONFIGS,a)}set model(a){let{note:o}=a,{texts:l}=o;l.length===1&&Object.keys(l[0]).length===1?this.note=l[0].text:this.note=o}static fromModel(a){let o=new r;return o.model=a,o}}r.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},t.exports=r},{"../utils/under-dash":26}],10:[function(n,t,e){"use strict";let i=n("../utils/col-cache");class r{constructor(){this.decode(arguments)}setTLBR(a,o,l,c,h){if(arguments.length<4){let d=i.decodeAddress(a),p=i.decodeAddress(o);this.model={top:Math.min(d.row,p.row),left:Math.min(d.col,p.col),bottom:Math.max(d.row,p.row),right:Math.max(d.col,p.col),sheetName:l},this.setTLBR(d.row,d.col,p.row,p.col,h)}else this.model={top:Math.min(a,l),left:Math.min(o,c),bottom:Math.max(a,l),right:Math.max(o,c),sheetName:h}}decode(a){switch(a.length){case 5:this.setTLBR(a[0],a[1],a[2],a[3],a[4]);break;case 4:this.setTLBR(a[0],a[1],a[2],a[3]);break;case 3:this.setTLBR(a[0],a[1],a[2]);break;case 2:this.setTLBR(a[0],a[1]);break;case 1:{let o=a[0];if(o instanceof r)this.model={top:o.model.top,left:o.model.left,bottom:o.model.bottom,right:o.model.right,sheetName:o.sheetName};else if(o instanceof Array)this.decode(o);else if(o.top&&o.left&&o.bottom&&o.right)this.model={top:o.top,left:o.left,bottom:o.bottom,right:o.right,sheetName:o.sheetName};else{let l=i.decodeEx(o);l.top?this.model={top:l.top,left:l.left,bottom:l.bottom,right:l.right,sheetName:l.sheetName}:this.model={top:l.row,left:l.col,bottom:l.row,right:l.col,sheetName:l.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+a.length)}}get top(){return this.model.top||1}set top(a){this.model.top=a}get left(){return this.model.left||1}set left(a){this.model.left=a}get bottom(){return this.model.bottom||1}set bottom(a){this.model.bottom=a}get right(){return this.model.right||1}set right(a){this.model.right=a}get sheetName(){return this.model.sheetName}set sheetName(a){this.model.sheetName=a}get _serialisedSheetName(){let{sheetName:a}=this.model;return a?/^[a-zA-Z0-9]*$/.test(a)?a+"!":`'${a}'!`:""}expand(a,o,l,c){(!this.model.top||a<this.top)&&(this.top=a),(!this.model.left||o<this.left)&&(this.left=o),(!this.model.bottom||l>this.bottom)&&(this.bottom=l),(!this.model.right||c>this.right)&&(this.right=c)}expandRow(a){if(a){let{dimensions:o,number:l}=a;o&&this.expand(l,o.min,l,o.max)}}expandToAddress(a){let o=i.decodeEx(a);this.expand(o.row,o.col,o.row,o.col)}get tl(){return i.n2l(this.left)+this.top}get $t$l(){return`$${i.n2l(this.left)}$${this.top}`}get br(){return i.n2l(this.right)+this.bottom}get $b$r(){return`$${i.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(a){return(!a.sheetName||!this.sheetName||a.sheetName===this.sheetName)&&!(a.bottom<this.top)&&!(a.top>this.bottom)&&!(a.right<this.left)&&!(a.left>this.right)}contains(a){let o=i.decodeEx(a);return this.containsEx(o)}containsEx(a){return(!a.sheetName||!this.sheetName||a.sheetName===this.sheetName)&&a.row>=this.top&&a.row<=this.bottom&&a.col>=this.left&&a.col<=this.right}forEachAddress(a){for(let o=this.left;o<=this.right;o++)for(let l=this.top;l<=this.bottom;l++)a(i.encodeAddress(l,o),l,o)}}t.exports=r},{"../utils/col-cache":19}],11:[function(n,t,e){"use strict";let i=n("../utils/under-dash"),r=n("./enums"),s=n("../utils/col-cache"),a=n("./cell");t.exports=class{constructor(o,l){this._worksheet=o,this._number=l,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(o){return this._cells[o-1]}getCellEx(o){let l=this._cells[o.col-1];if(!l){let c=this._worksheet.getColumn(o.col);l=new a(this,c,o.address),this._cells[o.col-1]=l}return l}getCell(o){if(typeof o=="string"){let l=this._worksheet.getColumnKey(o);o=l?l.number:s.l2n(o)}return this._cells[o-1]||this.getCellEx({address:s.encodeAddress(this._number,o),row:this._number,col:o})}splice(o,l){let c=o+l;for(var h=arguments.length,d=new Array(h>2?h-2:0),p=2;p<h;p++)d[p-2]=arguments[p];let g=d.length-l,m=this._cells.length,_,v,x;if(g<0)for(_=o+d.length;_<=m;_++)x=this._cells[_-1],v=this._cells[_-g-1],v?(x=this.getCell(_),x.value=v.value,x.style=v.style,x._comment=v._comment):x&&(x.value=null,x.style={},x._comment=void 0);else if(g>0)for(_=m;_>=c;_--)v=this._cells[_-1],v?(x=this.getCell(_+g),x.value=v.value,x.style=v.style,x._comment=v._comment):this._cells[_+g-1]=void 0;for(_=0;_<d.length;_++)x=this.getCell(o+_),x.value=d[_],x.style={},x._comment=void 0}eachCell(o,l){if(l||(l=o,o=null),o&&o.includeEmpty){let c=this._cells.length;for(let h=1;h<=c;h++)l(this.getCell(h),h)}else this._cells.forEach((c,h)=>{c&&c.type!==r.ValueType.Null&&l(c,h+1)})}addPageBreak(o,l){let c=this._worksheet,h=Math.max(0,o-1)||0,d=Math.max(0,l-1)||16838,p={id:this._number,max:d,man:1};h&&(p.min=h),c.rowBreaks.push(p)}get values(){let o=[];return this._cells.forEach(l=>{l&&l.type!==r.ValueType.Null&&(o[l.col]=l.value)}),o}set values(o){if(this._cells=[],o)if(o instanceof Array){let l=0;o.hasOwnProperty("0")&&(l=1),o.forEach((c,h)=>{c!==void 0&&(this.getCellEx({address:s.encodeAddress(this._number,h+l),row:this._number,col:h+l}).value=c)})}else this._worksheet.eachColumnKey((l,c)=>{o[c]!==void 0&&(this.getCellEx({address:s.encodeAddress(this._number,l.number),row:this._number,col:l.number}).value=o[c])})}get hasValues(){return i.some(this._cells,o=>o&&o.type!==r.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let o=0;return this.eachCell(()=>{o++}),o}get dimensions(){let o=0,l=0;return this._cells.forEach(c=>{c&&c.type!==r.ValueType.Null&&((!o||o>c.col)&&(o=c.col),l<c.col&&(l=c.col))}),o>0?{min:o,max:l}:null}_applyStyle(o,l){return this.style[o]=l,this._cells.forEach(c=>{c&&(c[o]=l)}),l}get numFmt(){return this.style.numFmt}set numFmt(o){this._applyStyle("numFmt",o)}get font(){return this.style.font}set font(o){this._applyStyle("font",o)}get alignment(){return this.style.alignment}set alignment(o){this._applyStyle("alignment",o)}get protection(){return this.style.protection}set protection(o){this._applyStyle("protection",o)}get border(){return this.style.border}set border(o){this._applyStyle("border",o)}get fill(){return this.style.fill}set fill(o){this._applyStyle("fill",o)}get hidden(){return!!this._hidden}set hidden(o){this._hidden=o}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(o){this._outlineLevel=o}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){let o=[],l=0,c=0;return this._cells.forEach(h=>{if(h){let d=h.model;d&&((!l||l>h.col)&&(l=h.col),c<h.col&&(c=h.col),o.push(d))}}),this.height||o.length?{cells:o,number:this.number,min:l,max:c,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(o){if(o.number!==this._number)throw new Error("Invalid row number in model");let l;this._cells=[],o.cells.forEach(c=>{switch(c.type){case a.Types.Merge:break;default:{let h;if(c.address)h=s.decodeAddress(c.address);else if(l){let{row:d}=l,p=l.col+1;h={row:d,col:p,address:s.encodeAddress(d,p),$col$row:`$${s.n2l(p)}$${d}`}}l=h,this.getCellEx(h).model=c;break}}}),o.height?this.height=o.height:delete this.height,this.hidden=o.hidden,this.outlineLevel=o.outlineLevel||0,this.style=o.style&&JSON.parse(JSON.stringify(o.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(n,t,e){"use strict";let i=n("../utils/col-cache");class r{constructor(a,o,l){this.table=a,this.column=o,this.index=l}_set(a,o){this.table.cacheState(),this.column[a]=o}get name(){return this.column.name}set name(a){this._set("name",a)}get filterButton(){return this.column.filterButton}set filterButton(a){this.column.filterButton=a}get style(){return this.column.style}set style(a){this.column.style=a}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(a){this._set("totalsRowLabel",a)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(a){this._set("totalsRowFunction",a)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(a){this._set("totalsRowResult",a)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(a){this._set("totalsRowFormula",a)}}t.exports=class{constructor(s,a){this.worksheet=s,a&&(this.table=a,this.validate(),this.store())}getFormula(s){switch(s.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${s.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${s.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${s.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${s.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${s.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${s.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${s.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${s.name}])`;case"custom":return s.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+s.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){let{table:s}=this,a=(g,m,_)=>{g[m]===void 0&&(g[m]=_)};a(s,"headerRow",!0),a(s,"totalsRow",!1),a(s,"style",{}),a(s.style,"theme","TableStyleMedium2"),a(s.style,"showFirstColumn",!1),a(s.style,"showLastColumn",!1),a(s.style,"showRowStripes",!1),a(s.style,"showColumnStripes",!1);let o=(g,m)=>{if(!g)throw new Error(m)};o(s.ref,"Table must have ref"),o(s.columns,"Table must have column definitions"),o(s.rows,"Table must have row definitions"),s.tl=i.decodeAddress(s.ref);let{row:l,col:c}=s.tl;o(l>0,"Table must be on valid row"),o(c>0,"Table must be on valid col");let{width:h,filterHeight:d,tableHeight:p}=this;s.autoFilterRef=i.encode(l,c,l+d-1,c+h-1),s.tableRef=i.encode(l,c,l+p-1,c+h-1),s.columns.forEach((g,m)=>{o(g.name,`Column ${m} must have a name`),m===0?a(g,"totalsRowLabel","Total"):(a(g,"totalsRowFunction","none"),g.totalsRowFormula=this.getFormula(g))})}store(){let s=(d,p)=>{p&&Object.keys(p).forEach(g=>{d[g]=p[g]})},{worksheet:a,table:o}=this,{row:l,col:c}=o.tl,h=0;if(o.headerRow){let d=a.getRow(l+h++);o.columns.forEach((p,g)=>{let{style:m,name:_}=p,v=d.getCell(c+g);v.value=_,s(v,m)})}if(o.rows.forEach(d=>{let p=a.getRow(l+h++);d.forEach((g,m)=>{let _=p.getCell(c+m);_.value=g,s(_,o.columns[m].style)})}),o.totalsRow){let d=a.getRow(l+h++);o.columns.forEach((p,g)=>{let m=d.getCell(c+g);if(g===0)m.value=p.totalsRowLabel;else{let _=this.getFormula(p);m.value=_?{formula:p.totalsRowFormula,result:p.totalsRowResult}:null}s(m,p.style)})}}load(s){let{table:a}=this,{row:o,col:l}=a.tl,c=0;if(a.headerRow){let h=s.getRow(o+c++);a.columns.forEach((d,p)=>{h.getCell(l+p).value=d.name})}if(a.rows.forEach(h=>{let d=s.getRow(o+c++);h.forEach((p,g)=>{d.getCell(l+g).value=p})}),a.totalsRow){let h=s.getRow(o+c++);a.columns.forEach((d,p)=>{let g=h.getCell(l+p);p===0?g.value=d.totalsRowLabel:this.getFormula(d)&&(g.value={formula:d.totalsRowFormula,result:d.totalsRowResult})})}}get model(){return this.table}set model(s){this.table=s}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();let s=i.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let a=0;a<this._cache.tableHeight;a++){let o=this.worksheet.getRow(s.row+a);for(let l=0;l<this._cache.width;l++)o.getCell(s.col+l).value=null}else{for(let a=this.tableHeight;a<this._cache.tableHeight;a++){let o=this.worksheet.getRow(s.row+a);for(let l=0;l<this._cache.width;l++)o.getCell(s.col+l).value=null}for(let a=0;a<this.tableHeight;a++){let o=this.worksheet.getRow(s.row+a);for(let l=this.width;l<this._cache.width;l++)o.getCell(s.col+l).value=null}}this.store()}addRow(s,a){this.cacheState(),a===void 0?this.table.rows.push(s):this.table.rows.splice(a,0,s)}removeRows(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(s,a)}getColumn(s){let a=this.table.columns[s];return new r(this,a,s)}addColumn(s,a,o){this.cacheState(),o===void 0?(this.table.columns.push(s),this.table.rows.forEach((l,c)=>{l.push(a[c])})):(this.table.columns.splice(o,0,s),this.table.rows.forEach((l,c)=>{l.splice(o,0,a[c])}))}removeColumns(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(s,a),this.table.rows.forEach(o=>{o.splice(s,a)})}_assign(s,a,o){this.cacheState(),s[a]=o}get ref(){return this.table.ref}set ref(s){this._assign(this.table,"ref",s)}get name(){return this.table.name}set name(s){this.table.name=s}get displayName(){return this.table.displyName||this.table.name}set displayNamename(s){this.table.displayName=s}get headerRow(){return this.table.headerRow}set headerRow(s){this._assign(this.table,"headerRow",s)}get totalsRow(){return this.table.totalsRow}set totalsRow(s){this._assign(this.table,"totalsRow",s)}get theme(){return this.table.style.name}set theme(s){this.table.style.name=s}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(s){this.table.style.showFirstColumn=s}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(s){this.table.style.showLastColumn=s}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(s){this.table.style.showRowStripes=s}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(s){this.table.style.showColumnStripes=s}}},{"../utils/col-cache":19}],13:[function(n,t,e){"use strict";let i=n("./worksheet"),r=n("./defined-names"),s=n("../xlsx/xlsx"),a=n("../csv/csv");t.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new r}get xlsx(){return this._xlsx||(this._xlsx=new s(this)),this._xlsx}get csv(){return this._csv||(this._csv=new a(this)),this._csv}get nextId(){for(let o=1;o<this._worksheets.length;o++)if(!this._worksheets[o])return o;return this._worksheets.length||1}addWorksheet(o,l){let c=this.nextId;l&&(typeof l=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),l={properties:{tabColor:{argb:l}}}):(l.argb||l.theme||l.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),l={properties:{tabColor:l}}));let h=this._worksheets.reduce((g,m)=>(m&&m.orderNo)>g?m.orderNo:g,0),d=Object.assign({},l,{id:c,name:o,orderNo:h+1,workbook:this}),p=new i(d);return this._worksheets[c]=p,p}removeWorksheetEx(o){delete this._worksheets[o.id]}removeWorksheet(o){let l=this.getWorksheet(o);l&&l.destroy()}getWorksheet(o){return o===void 0?this._worksheets.find(Boolean):typeof o=="number"?this._worksheets[o]:typeof o=="string"?this._worksheets.find(l=>l&&l.name===o):void 0}get worksheets(){return this._worksheets.slice(1).sort((o,l)=>o.orderNo-l.orderNo).filter(Boolean)}eachSheet(o){this.worksheets.forEach(l=>{o(l,l.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(o){let l=this.media.length;return this.media.push(Object.assign({},o,{type:"image"})),l}getImage(o){return this.media[o]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(o=>o.model),sheets:this.worksheets.map(o=>o.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(o){this.creator=o.creator,this.lastModifiedBy=o.lastModifiedBy,this.lastPrinted=o.lastPrinted,this.created=o.created,this.modified=o.modified,this.company=o.company,this.manager=o.manager,this.title=o.title,this.subject=o.subject,this.keywords=o.keywords,this.category=o.category,this.description=o.description,this.language=o.language,this.revision=o.revision,this.contentStatus=o.contentStatus,this.properties=o.properties,this.calcProperties=o.calcProperties,this._worksheets=[],o.worksheets.forEach(l=>{let{id:c,name:h,state:d}=l,p=o.sheets&&o.sheets.findIndex(g=>g.id===c);(this._worksheets[c]=new i({id:c,name:h,orderNo:p,state:d,workbook:this})).model=l}),this._definedNames.model=o.definedNames,this.views=o.views,this._themes=o.themes,this.media=o.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(n,t,e){"use strict";let i=n("../utils/under-dash"),r=n("../utils/col-cache"),s=n("./range"),a=n("./row"),o=n("./column"),l=n("./enums"),c=n("./image"),h=n("./table"),d=n("./data-validations"),p=n("../utils/encryptor"),{copyStyle:g}=n("../utils/copy-style");t.exports=class{constructor(m){m=m||{},this._workbook=m.workbook,this.id=m.id,this.orderNo=m.orderNo,this.name=m.name,this.state=m.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},m.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!m.pageSetup||!m.pageSetup.fitToWidth&&!m.pageSetup.fitToHeight||m.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},m.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},m.headerFooter),this.dataValidations=new d,this.views=m.views||[],this.autoFilter=m.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(m){if(m===void 0&&(m="sheet"+this.id),this._name!==m){if(typeof m!="string")throw new Error("The name has to be a string.");if(m==="")throw new Error("The name can't be empty.");if(m==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(m))throw new Error(`Worksheet name ${m} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(m))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+m);if(m&&m.length>31&&(console.warn(`Worksheet name ${m} exceeds 31 chars. This will be truncated`),m=m.substring(0,31)),this._workbook._worksheets.find(_=>_&&_.name.toLowerCase()===m.toLowerCase()))throw new Error("Worksheet name already exists: "+m);this._name=m}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){let m=new s;return this._rows.forEach(_=>{if(_){let v=_.dimensions;v&&m.expand(_.number,v.min,_.number,v.max)}}),m}get columns(){return this._columns}set columns(m){this._headerRowCount=m.reduce((x,S)=>{let O=(S.header?1:S.headers&&S.headers.length)||0;return Math.max(x,O)},0);let _=1,v=this._columns=[];m.forEach(x=>{let S=new o(this,_++,!1);v.push(S),S.defn=x})}getColumnKey(m){return this._keys[m]}setColumnKey(m,_){this._keys[m]=_}deleteColumnKey(m){delete this._keys[m]}eachColumnKey(m){i.each(this._keys,m)}getColumn(m){if(typeof m=="string"){let _=this._keys[m];if(_)return _;m=r.l2n(m)}if(this._columns||(this._columns=[]),m>this._columns.length){let _=this._columns.length+1;for(;_<=m;)this._columns.push(new o(this,_++))}return this._columns[m-1]}spliceColumns(m,_){let v=this._rows.length;for(var x=arguments.length,S=new Array(x>2?x-2:0),O=2;O<x;O++)S[O-2]=arguments[O];if(S.length>0)for(let V=0;V<v;V++){let G=[m,_];S.forEach(K=>{G.push(K[V]||null)});let tt=this.getRow(V+1);tt.splice.apply(tt,G)}else this._rows.forEach(V=>{V&&V.splice(m,_)});let D=S.length-_,U=m+_,z=this._columns.length;if(D<0)for(let V=m+S.length;V<=z;V++)this.getColumn(V).defn=this.getColumn(V-D).defn;else if(D>0)for(let V=z;V>=U;V--)this.getColumn(V+D).defn=this.getColumn(V).defn;for(let V=m;V<m+S.length;V++)this.getColumn(V).defn=null;this.workbook.definedNames.spliceColumns(this.name,m,_,S.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let m=0;return this.eachRow(_=>{m=Math.max(m,_.cellCount)}),m}get actualColumnCount(){let m=[],_=0;return this.eachRow(v=>{v.eachCell(x=>{let{col:S}=x;m[S]||(m[S]=!0,_++)})}),_}_commitRow(){}get _lastRowNumber(){let m=this._rows,_=m.length;for(;_>0&&m[_-1]===void 0;)_--;return _}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(m){return this._rows[m-1]}findRows(m,_){return this._rows.slice(m-1,m-1+_)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let m=0;return this.eachRow(()=>{m++}),m}getRow(m){let _=this._rows[m-1];return _||(_=this._rows[m-1]=new a(this,m)),_}getRows(m,_){if(_<1)return;let v=[];for(let x=m;x<m+_;x++)v.push(this.getRow(x));return v}addRow(m){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n",v=this._nextRow,x=this.getRow(v);return x.values=m,this._setStyleOption(v,_[0]==="i"?_:"n"),x}addRows(m){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n",v=[];return m.forEach(x=>{v.push(this.addRow(x,_))}),v}insertRow(m,_){let v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(m,0,_),this._setStyleOption(m,v),this.getRow(m)}insertRows(m,_){let v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(m,0,..._),v!=="n")for(let x=0;x<_.length;x++)v[0]==="o"&&this.findRow(_.length+m+x)!==void 0?this._copyStyle(_.length+m+x,m+x,v[1]==="+"):v[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m+x,v[1]==="+");return this.getRows(m,_.length)}_setStyleOption(m){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";_[0]==="o"&&this.findRow(m+1)!==void 0?this._copyStyle(m+1,m,_[1]==="+"):_[0]==="i"&&this.findRow(m-1)!==void 0&&this._copyStyle(m-1,m,_[1]==="+")}_copyStyle(m,_){let v=arguments.length>2&&arguments[2]!==void 0&&arguments[2],x=this.getRow(m),S=this.getRow(_);S.style=g(x.style),x.eachCell({includeEmpty:v},(O,D)=>{S.getCell(D).style=g(O.style)}),S.height=x.height}duplicateRow(m,_){let v=arguments.length>2&&arguments[2]!==void 0&&arguments[2],x=this._rows[m-1],S=new Array(_).fill(x.values);this.spliceRows(m+1,v?0:_,...S);for(let O=0;O<_;O++){let D=this._rows[m+O];D.style=x.style,D.height=x.height,x.eachCell({includeEmpty:!0},(U,z)=>{D.getCell(z).style=U.style})}}spliceRows(m,_){let v=m+_;for(var x=arguments.length,S=new Array(x>2?x-2:0),O=2;O<x;O++)S[O-2]=arguments[O];let D=S.length,U=D-_,z=this._rows.length,V,G;if(U<0)for(m===z&&(this._rows[z-1]=void 0),V=v;V<=z;V++)if(G=this._rows[V-1],G){let tt=this.getRow(V+U);tt.values=G.values,tt.style=G.style,tt.height=G.height,G.eachCell({includeEmpty:!0},(K,B)=>{tt.getCell(B).style=K.style}),this._rows[V-1]=void 0}else this._rows[V+U-1]=void 0;else if(U>0)for(V=z;V>=v;V--)if(G=this._rows[V-1],G){let tt=this.getRow(V+U);tt.values=G.values,tt.style=G.style,tt.height=G.height,G.eachCell({includeEmpty:!0},(K,B)=>{if(tt.getCell(B).style=K.style,K._value.constructor.name==="MergeValue"){let N=this.getRow(K._row._number+D).getCell(B),Z=K._value._master,w=this.getRow(Z._row._number+D).getCell(Z._column._number);N.merge(w)}})}else this._rows[V+U-1]=void 0;for(V=0;V<D;V++){let tt=this.getRow(m+V);tt.style={},tt.values=S[V]}this.workbook.definedNames.spliceRows(this.name,m,_,D)}eachRow(m,_){if(_||(_=m,m=void 0),m&&m.includeEmpty){let v=this._rows.length;for(let x=1;x<=v;x++)_(this.getRow(x),x)}else this._rows.forEach(v=>{v&&v.hasValues&&_(v,v.number)})}getSheetValues(){let m=[];return this._rows.forEach(_=>{_&&(m[_.number]=_.values)}),m}findCell(m,_){let v=r.getAddress(m,_),x=this._rows[v.row-1];return x?x.findCell(v.col):void 0}getCell(m,_){let v=r.getAddress(m,_);return this.getRow(v.row).getCellEx(v)}mergeCells(){for(var m=arguments.length,_=new Array(m),v=0;v<m;v++)_[v]=arguments[v];let x=new s(_);this._mergeCellsInternal(x)}mergeCellsWithoutStyle(){for(var m=arguments.length,_=new Array(m),v=0;v<m;v++)_[v]=arguments[v];let x=new s(_);this._mergeCellsInternal(x,!0)}_mergeCellsInternal(m,_){i.each(this._merges,x=>{if(x.intersects(m))throw new Error("Cannot merge already merged cells")});let v=this.getCell(m.top,m.left);for(let x=m.top;x<=m.bottom;x++)for(let S=m.left;S<=m.right;S++)(x>m.top||S>m.left)&&this.getCell(x,S).merge(v,_);this._merges[v.address]=m}_unMergeMaster(m){let _=this._merges[m.address];if(_){for(let v=_.top;v<=_.bottom;v++)for(let x=_.left;x<=_.right;x++)this.getCell(v,x).unmerge();delete this._merges[m.address]}}get hasMerges(){return i.some(this._merges,Boolean)}unMergeCells(){for(var m=arguments.length,_=new Array(m),v=0;v<m;v++)_[v]=arguments[v];let x=new s(_);for(let S=x.top;S<=x.bottom;S++)for(let O=x.left;O<=x.right;O++){let D=this.findCell(S,O);D&&(D.type===l.ValueType.Merge?this._unMergeMaster(D.master):this._merges[D.address]&&this._unMergeMaster(D))}}fillFormula(m,_,v){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared",S=r.decode(m),{top:O,left:D,bottom:U,right:z}=S,V=z-D+1,G=r.encodeAddress(O,D),tt=x==="shared",K;K=typeof v=="function"?v:Array.isArray(v)?Array.isArray(v[0])?(N,Z)=>v[N-O][Z-D]:(N,Z)=>v[(N-O)*V+(Z-D)]:()=>{};let B=!0;for(let N=O;N<=U;N++)for(let Z=D;Z<=z;Z++)B?(this.getCell(N,Z).value={shareType:x,formula:_,ref:m,result:K(N,Z)},B=!1):this.getCell(N,Z).value=tt?{sharedFormula:G,result:K(N,Z)}:K(N,Z)}addImage(m,_){let v={type:"image",imageId:m,range:_};this._media.push(new c(this,v))}getImages(){return this._media.filter(m=>m.type==="image")}addBackgroundImage(m){let _={type:"background",imageId:m};this._media.push(new c(this,_))}getBackgroundImageId(){let m=this._media.find(_=>_.type==="background");return m&&m.imageId}protect(m,_){return new Promise(v=>{this.sheetProtection={sheet:!0},_&&"spinCount"in _&&(_.spinCount=Number.isFinite(_.spinCount)?Math.round(Math.max(0,_.spinCount)):1e5),m&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=p.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=_&&"spinCount"in _?_.spinCount:1e5,this.sheetProtection.hashValue=p.convertPasswordToHash(m,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),_&&(this.sheetProtection=Object.assign(this.sheetProtection,_),!m&&"spinCount"in _&&delete this.sheetProtection.spinCount),v()})}unprotect(){this.sheetProtection=null}addTable(m){let _=new h(this,m);return this.tables[m.name]=_,_}getTable(m){return this.tables[m]}removeTable(m){delete this.tables[m]}getTables(){return Object.values(this.tables)}addConditionalFormatting(m){this.conditionalFormattings.push(m)}removeConditionalFormatting(m){typeof m=="number"?this.conditionalFormattings.splice(m,1):this.conditionalFormattings=m instanceof Function?this.conditionalFormattings.filter(m):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(m){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=m}get model(){let m={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(x=>x.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(x=>x.model),conditionalFormattings:this.conditionalFormattings};m.cols=o.toModel(this.columns);let _=m.rows=[],v=m.dimensions=new s;return this._rows.forEach(x=>{let S=x&&x.model;S&&(v.expand(S.number,S.min,S.number,S.max),_.push(S))}),m.merges=[],i.each(this._merges,x=>{m.merges.push(x.range)}),m}_parseRows(m){this._rows=[],m.rows.forEach(_=>{let v=new a(this,_.number);this._rows[v.number-1]=v,v.model=_})}_parseMergeCells(m){i.each(m.mergeCells,_=>{this.mergeCellsWithoutStyle(_)})}set model(m){this.name=m.name,this._columns=o.fromModel(this,m.cols),this._parseRows(m),this._parseMergeCells(m),this.dataValidations=new d(m.dataValidations),this.properties=m.properties,this.pageSetup=m.pageSetup,this.headerFooter=m.headerFooter,this.views=m.views,this.autoFilter=m.autoFilter,this._media=m.media.map(_=>new c(this,_)),this.sheetProtection=m.sheetProtection,this.tables=m.tables.reduce((_,v)=>{let x=new h;return x.model=v,_[v.name]=x,_},{}),this.conditionalFormattings=m.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(n,t,e){"use strict";n("core-js/modules/es.promise"),n("core-js/modules/es.promise.finally"),n("core-js/modules/es.object.assign"),n("core-js/modules/es.object.keys"),n("core-js/modules/es.object.values"),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.async-iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.includes"),n("core-js/modules/es.array.find-index"),n("core-js/modules/es.array.find"),n("core-js/modules/es.string.from-code-point"),n("core-js/modules/es.string.includes"),n("core-js/modules/es.number.is-nan"),n("regenerator-runtime/runtime");let i={Workbook:n("./doc/workbook")},r=n("./doc/enums");Object.keys(r).forEach(s=>{i[s]=r[s]}),t.exports=i},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(n,t,e){"use strict";let i=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");e.bufferToString=function(r){return typeof r=="string"?r:i?i.decode(r):r.toString()}},{}],17:[function(n,t,e){"use strict";let i=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:r}=n("buffer");e.stringToBuffer=function(s){return typeof s!="string"?s:i?r.from(i.encode(s).buffer):r.from(s)}},{buffer:220}],18:[function(n,t,e){"use strict";let i=n("./under-dash"),r=n("./col-cache");t.exports=class{constructor(s){this.template=s,this.sheets={}}addCell(s){this.addCellEx(r.decodeEx(s))}getCell(s){return this.findCellEx(r.decodeEx(s),!0)}findCell(s){return this.findCellEx(r.decodeEx(s),!1)}findCellAt(s,a,o){let l=this.sheets[s],c=l&&l[a];return c&&c[o]}addCellEx(s){if(s.top)for(let a=s.top;a<=s.bottom;a++)for(let o=s.left;o<=s.right;o++)this.getCellAt(s.sheetName,a,o);else this.findCellEx(s,!0)}getCellEx(s){return this.findCellEx(s,!0)}findCellEx(s,a){let o=this.findSheet(s,a),l=this.findSheetRow(o,s,a);return this.findRowCell(l,s,a)}getCellAt(s,a,o){let l=this.sheets[s]||(this.sheets[s]=[]),c=l[a]||(l[a]=[]);return c[o]||(c[o]={sheetName:s,address:r.n2l(o)+a,row:a,col:o})}removeCellEx(s){let a=this.findSheet(s);if(!a)return;let o=this.findSheetRow(a,s);o&&delete o[s.col]}forEachInSheet(s,a){let o=this.sheets[s];o&&o.forEach((l,c)=>{l&&l.forEach((h,d)=>{h&&a(h,c,d)})})}forEach(s){i.each(this.sheets,(a,o)=>{this.forEachInSheet(o,s)})}map(s){let a=[];return this.forEach(o=>{a.push(s(o))}),a}findSheet(s,a){let o=s.sheetName;return this.sheets[o]?this.sheets[o]:a?this.sheets[o]=[]:void 0}findSheetRow(s,a,o){let{row:l}=a;return s&&s[l]?s[l]:o?s[l]=[]:void 0}findRowCell(s,a,o){let{col:l}=a;return s&&s[l]?s[l]:o?s[l]=this.template?Object.assign(a,JSON.parse(JSON.stringify(this.template))):a:void 0}spliceRows(s,a,o,l){let c=this.sheets[s];if(c){let h=[];for(let d=0;d<l;d++)h.push([]);c.splice(a,o,...h)}}spliceColumns(s,a,o,l){let c=this.sheets[s];if(c){let h=[];for(let d=0;d<l;d++)h.push(null);i.each(c,d=>{d.splice(a,o,...h)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(n,t,e){"use strict";let i=/^[A-Z]+\d+$/,r={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:s=>s<=26?1:s<=676?2:3,_fill(s){let a,o,l,c,h,d=1;if(s>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&s>=1){for(;d<=26;)a=this._dictionary[d-1],this._n2l[d]=a,this._l2n[a]=d,d++;this._l2nFill=1}if(this._l2nFill<2&&s>=2){for(d=27;d<=702;)o=d-27,l=o%26,c=Math.floor(o/26),a=this._dictionary[c]+this._dictionary[l],this._n2l[d]=a,this._l2n[a]=d,d++;this._l2nFill=2}if(this._l2nFill<3&&s>=3){for(d=703;d<=16384;)o=d-703,l=o%26,c=Math.floor(o/26)%26,h=Math.floor(o/676),a=this._dictionary[h]+this._dictionary[c]+this._dictionary[l],this._n2l[d]=a,this._l2n[a]=d,d++;this._l2nFill=3}},l2n(s){if(this._l2n[s]||this._fill(s.length),!this._l2n[s])throw new Error("Out of bounds. Invalid column letter: "+s);return this._l2n[s]},n2l(s){if(s<1||s>16384)throw new Error(s+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[s]||this._fill(this._level(s)),this._n2l[s]},_hash:{},validateAddress(s){if(!i.test(s))throw new Error("Invalid Address: "+s);return!0},decodeAddress(s){let a=s.length<5&&this._hash[s];if(a)return a;let o=!1,l="",c=0,h=!1,d="",p=0;for(let m,_=0;_<s.length;_++)if(m=s.charCodeAt(_),!h&&m>=65&&m<=90)o=!0,l+=s[_],c=26*c+m-64;else if(m>=48&&m<=57)h=!0,d+=s[_],p=10*p+m-48;else if(h&&o&&m!==36)break;if(o){if(c>16384)throw new Error("Out of bounds. Invalid column letter: "+l)}else c=void 0;h||(p=void 0);let g={address:s=l+d,col:c,row:p,$col$row:`$${l}$${d}`};return c<=100&&p<=100&&(this._hash[s]=g,this._hash[g.$col$row]=g),g},getAddress(s,a){if(a){let o=this.n2l(a)+s;return this.decodeAddress(o)}return this.decodeAddress(s)},decode(s){let a=s.split(":");if(a.length===2){let o=this.decodeAddress(a[0]),l=this.decodeAddress(a[1]),c={top:Math.min(o.row,l.row),left:Math.min(o.col,l.col),bottom:Math.max(o.row,l.row),right:Math.max(o.col,l.col)};return c.tl=this.n2l(c.left)+c.top,c.br=this.n2l(c.right)+c.bottom,c.dimensions=`${c.tl}:${c.br}`,c}return this.decodeAddress(s)},decodeEx(s){let a=s.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),o=a[1]||a[2],l=a[3],c=l.split(":");if(c.length>1){let d=this.decodeAddress(c[0]),p=this.decodeAddress(c[1]),g=Math.min(d.row,p.row),m=Math.min(d.col,p.col),_=Math.max(d.row,p.row),v=Math.max(d.col,p.col);return d=this.n2l(m)+g,p=this.n2l(v)+_,{top:g,left:m,bottom:_,right:v,sheetName:o,tl:{address:d,col:m,row:g,$col$row:`$${this.n2l(m)}$${g}`,sheetName:o},br:{address:p,col:v,row:_,$col$row:`$${this.n2l(v)}$${_}`,sheetName:o},dimensions:`${d}:${p}`}}if(l.startsWith("#"))return o?{sheetName:o,error:l}:{error:l};let h=this.decodeAddress(l);return o?{sheetName:o,...h}:h},encodeAddress:(s,a)=>r.n2l(a)+s,encode(){switch(arguments.length){case 2:return r.encodeAddress(arguments[0],arguments[1]);case 4:return`${r.encodeAddress(arguments[0],arguments[1])}:${r.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(s,a){let[o,l,,c,h]=s,[d,p]=a;return d>=o&&d<=c&&p>=l&&p<=h}};t.exports=r},{}],20:[function(n,t,e){"use strict";let i=(s,a)=>({...s,...a.reduce((o,l)=>(s[l]&&(o[l]={...s[l]}),o),{})}),r=function(s,a,o){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];s[o]&&(a[o]=i(s[o],l))};e.copyStyle=s=>{if(!s)return s;if(a=s,Object.keys(a).length===0)return{};var a;let o={...s};return r(s,o,"font",["color"]),r(s,o,"alignment"),r(s,o,"protection"),s.border&&(r(s,o,"border"),r(s.border,o.border,"top",["color"]),r(s.border,o.border,"left",["color"]),r(s.border,o.border,"bottom",["color"]),r(s.border,o.border,"right",["color"]),r(s.border,o.border,"diagonal",["color"])),s.fill&&(r(s,o,"fill",["fgColor","bgColor","center"]),s.fill.stops&&(o.fill.stops=s.fill.stops.map(l=>i(l,["color"])))),o}},{}],21:[function(n,t,e){(function(i){(function(){"use strict";let r=n("crypto"),s={hash(a){let o=r.createHash(a);for(var l=arguments.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];return o.update(i.concat(c)),o.digest()},convertPasswordToHash(a,o,l,c){if(o=o.toLowerCase(),r.getHashes().indexOf(o)<0)throw new Error(`Hash algorithm '${o}' not supported!`);let h=i.from(a,"utf16le"),d=this.hash(o,i.from(l,"base64"),h);for(let p=0;p<c;p++){let g=i.alloc(4);g.writeUInt32LE(p,0),d=this.hash(o,d,g)}return d.toString("base64")},randomBytes:a=>r.randomBytes(a)};t.exports=s}).call(this)}).call(this,n("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(n,t,e){"use strict";let{SaxesParser:i}=n("saxes"),{PassThrough:r}=n("readable-stream"),{bufferToString:s}=n("./browser-buffer-decode");t.exports=async function*(a){a.pipe&&!a[Symbol.asyncIterator]&&(a=a.pipe(new r));let o=new i,l;o.on("error",h=>{l=h});let c=[];o.on("opentag",h=>c.push({eventType:"opentag",value:h})),o.on("text",h=>c.push({eventType:"text",value:h})),o.on("closetag",h=>c.push({eventType:"closetag",value:h}));for await(let h of a){if(o.write(s(h)),l)throw l;yield c,c=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(n,t,e){"use strict";let i=n("./col-cache"),r=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,s=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;t.exports={slideFormula:function(a,o,l){let c=i.decode(o),h=i.decode(l);return a.replace(r,(d,p,g,m,_)=>{if(_)return d;let v=s.exec(m);if(v){let x=v[1],S=v[2].toUpperCase(),O=v[3],D=v[4];if(S.length>3||S.length===3&&S>"XFD")return d;let U=i.l2n(S),z=parseInt(D,10);return x||(U+=h.col-c.col),O||(z+=h.row-c.row),(p||"")+(x||"")+i.n2l(U)+(O||"")+z}return d})}}},{"./col-cache":19}],24:[function(n,t,e){(function(i,r){(function(){"use strict";let s=n("readable-stream"),a=n("./utils"),o=n("./string-buf");class l{constructor(m,_){this._data=m,this._encoding=_}get length(){return this.toBuffer().length}copy(m,_,v,x){return this.toBuffer().copy(m,_,v,x)}toBuffer(){return this._buffer||(this._buffer=r.from(this._data,this._encoding)),this._buffer}}class c{constructor(m){this._data=m}get length(){return this._data.length}copy(m,_,v,x){return this._data._buf.copy(m,_,v,x)}toBuffer(){return this._data.toBuffer()}}class h{constructor(m){this._data=m}get length(){return this._data.length}copy(m,_,v,x){this._data.copy(m,_,v,x)}toBuffer(){return this._data}}class d{constructor(m){this.size=m,this.buffer=r.alloc(m),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;let m=r.alloc(this.iWrite-this.iRead);return this.buffer.copy(m,0,this.iRead,this.iWrite),m}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(m){let _;return m===0?null:m===void 0||m>=this.length?(_=this.toBuffer(),this.iRead=this.iWrite,_):(_=r.alloc(m),this.buffer.copy(_,0,this.iRead,m),this.iRead+=m,_)}write(m,_,v){let x=Math.min(v,this.size-this.iWrite);return m.copy(this.buffer,this.iWrite,_,_+x),this.iWrite+=x,x}}let p=function(g){g=g||{},this.bufSize=g.bufSize||1048576,this.buffers=[],this.batch=g.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};a.inherits(p,s.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return r.concat(this.buffers.map(g=>g.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){let m=this.buffers[this.buffers.length-1];if(!m.full)return m}let g=new d(this.bufSize);return this.buffers.push(g),g},async _pipe(g){await Promise.all(this.pipes.map(function(m){return new Promise(_=>{m.write(g.toBuffer(),()=>{_()})})}))},_writeToBuffers(g){let m=0,_=g.length;for(;m<_;)m+=this._getWritableBuffer().write(g,m,_-m)},async write(g,m,_){let v;if(m instanceof Function&&(_=m,m="utf8"),_=_||a.nop,g instanceof o)v=new c(g);else if(g instanceof r)v=new h(g);else{if(!(typeof g=="string"||g instanceof String||g instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");v=new l(g,m)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(v);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(v),i.nextTick(_)):(await this._pipe(v),_());else this.paused||this.emit("data",v.toBuffer()),this._writeToBuffers(v),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(g,m,_){let v=x=>{x?_(x):(this._flush(),this.pipes.forEach(S=>{S.end()}),this.emit("finish"))};g?this.write(g,m,v):v()},read(g){let m;if(g){for(m=[];g&&this.buffers.length&&!this.buffers[0].eod;){let _=this.buffers[0],v=_.read(g);g-=v.length,m.push(v),_.eod&&_.full&&this.buffers.shift()}return r.concat(m)}return m=this.buffers.map(_=>_.toBuffer()).filter(Boolean),this.buffers=[],r.concat(m)},setEncoding(g){this.encoding=g},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(g){this.pipes.push(g),!this.paused&&this.buffers.length&&this.end()},unpipe(g){this.pipes=this.pipes.filter(m=>m!==g)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),t.exports=p}).call(this)}).call(this,n("_process"),n("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(n,t,e){(function(i){(function(){"use strict";t.exports=class{constructor(r){this._buf=i.alloc(r&&r.size||16384),this._encoding=r&&r.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=i.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(r){r=r||0,this._buffer=void 0,this._inPos=r}_grow(r){let s=2*this._buf.length;for(;s<r;)s*=2;let a=i.alloc(s);this._buf.copy(a,0),this._buf=a}addText(r){this._buffer=void 0;let s=this._inPos+this._buf.write(r,this._inPos,this._encoding);for(;s>=this._buf.length-4;)this._grow(this._inPos+r.length),s=this._inPos+this._buf.write(r,this._inPos,this._encoding);this._inPos=s}addStringBuf(r){r.length&&(this._buffer=void 0,this.length+r.length>this.capacity&&this._grow(this.length+r.length),r._buf.copy(this._buf,this._inPos,0,r.length),this._inPos+=r.length)}}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:220}],26:[function(n,t,e){"use strict";let{toString:i}=Object.prototype,r=/["&<>]/,s={each:function(a,o){a&&(Array.isArray(a)?a.forEach(o):Object.keys(a).forEach(l=>{o(a[l],l)}))},some:function(a,o){return!!a&&(Array.isArray(a)?a.some(o):Object.keys(a).some(l=>o(a[l],l)))},every:function(a,o){return!a||(Array.isArray(a)?a.every(o):Object.keys(a).every(l=>o(a[l],l)))},map:function(a,o){return a?Array.isArray(a)?a.map(o):Object.keys(a).map(l=>o(a[l],l)):[]},keyBy:(a,o)=>a.reduce((l,c)=>(l[c[o]]=c,l),{}),isEqual:function(a,o){let l=typeof a,c=typeof o,h=Array.isArray(a),d=Array.isArray(o),p;if(l!==c)return!1;switch(typeof a){case"object":if(h||d)return!(!h||!d)&&a.length===o.length&&a.every((g,m)=>{let _=o[m];return s.isEqual(g,_)});if(a===null||o===null)return a===o;if(p=Object.keys(a),Object.keys(o).length!==p.length)return!1;for(let g of p)if(!o.hasOwnProperty(g))return!1;return s.every(a,(g,m)=>{let _=o[m];return s.isEqual(g,_)});default:return a===o}},escapeHtml(a){let o=r.exec(a);if(!o)return a;let l="",c="",h=0,d=o.index;for(;d<a.length;d++){switch(a.charAt(d)){case'"':c="&quot;";break;case"&":c="&amp;";break;case"'":c="&apos;";break;case"<":c="&lt;";break;case">":c="&gt;";break;default:continue}h!==d&&(l+=a.substring(h,d)),h=d+1,l+=c}return h!==d?l+a.substring(h,d):l},strcmp:(a,o)=>a<o?-1:a>o?1:0,isUndefined:a=>i.call(a)==="[object Undefined]",isObject:a=>i.call(a)==="[object Object]",deepMerge(){let a=arguments[0]||{},{length:o}=arguments,l,c,h;function d(p,g){l=a[g],h=Array.isArray(p),s.isObject(p)||h?(h?(h=!1,c=l&&Array.isArray(l)?l:[]):c=l&&s.isObject(l)?l:{},a[g]=s.deepMerge(c,p)):s.isUndefined(p)||(a[g]=p)}for(let p=0;p<o;p++)s.each(arguments[p],d);return a}};t.exports=s},{}],27:[function(n,t,e){(function(i,r){(function(){"use strict";let s=n("fs"),a=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,o={nop(){},promiseImmediate:l=>new Promise(c=>{i.setImmediate?r(()=>{c(l)}):setTimeout(()=>{c(l)},1)}),inherits:function(l,c,h,d){l.super_=c,d||(d=h,h=null),h&&Object.keys(h).forEach(g=>{Object.defineProperty(l,g,Object.getOwnPropertyDescriptor(h,g))});let p={constructor:{value:l,enumerable:!1,writable:!1,configurable:!0}};d&&Object.keys(d).forEach(g=>{p[g]=Object.getOwnPropertyDescriptor(d,g)}),l.prototype=Object.create(c.prototype,p)},dateToExcel:(l,c)=>25569+l.getTime()/864e5-(c?1462:0),excelToDate(l,c){let h=Math.round(24*(l-25569+(c?1462:0))*3600*1e3);return new Date(h)},parsePath(l){let c=l.lastIndexOf("/");return{path:l.substring(0,c),name:l.substring(c+1)}},getRelsPath(l){let c=o.parsePath(l);return`${c.path}/_rels/${c.name}.rels`},xmlEncode(l){let c=a.exec(l);if(!c)return l;let h="",d="",p=0,g=c.index;for(;g<l.length;g++){let m=l.charCodeAt(g);switch(m){case 34:d="&quot;";break;case 38:d="&amp;";break;case 39:d="&apos;";break;case 60:d="&lt;";break;case 62:d="&gt;";break;case 127:d="";break;default:if(m<=31&&(m<=8||m>=11&&m!==13)){d="";break}continue}p!==g&&(h+=l.substring(p,g)),p=g+1,d&&(h+=d)}return p!==g?h+l.substring(p,g):h},xmlDecode:l=>l.replace(/&([a-z]*);/g,c=>{switch(c){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return c}}),validInt(l){let c=parseInt(l,10);return Number.isNaN(c)?0:c},isDateFmt(l){return l?(l=(l=l.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:l=>new Promise(c=>{s.access(l,s.constants.F_OK,h=>{c(!h)})})},toIsoDateString:l=>l.toIsoString().subsstr(0,10),parseBoolean:l=>l===!0||l==="true"||l===1||l==="1"};t.exports=o}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},n("timers").setImmediate)},{fs:216,timers:523}],28:[function(n,t,e){"use strict";let i=n("./under-dash"),r=n("./utils");function s(l,c,h){l.push(` ${c}="${r.xmlEncode(h.toString())}"`)}function a(l,c){if(c){let h=[];i.each(c,(d,p)=>{d!==void 0&&s(h,p,d)}),l.push(h.join(""))}}class o{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(c){let h=this._xml;h.push("<?xml"),a(h,c),h.push(`?>
`)}openNode(c,h){let d=this.tos,p=this._xml;d&&this.open&&p.push(">"),this._stack.push(c),p.push("<"),p.push(c),a(p,h),this.leaf=!0,this.open=!0}addAttribute(c,h){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");h!==void 0&&s(this._xml,c,h)}addAttributes(c){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");a(this._xml,c)}writeText(c){let h=this._xml;this.open&&(h.push(">"),this.open=!1),this.leaf=!1,h.push(r.xmlEncode(c.toString()))}writeXml(c){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(c)}closeNode(){let c=this._stack.pop(),h=this._xml;this.leaf?h.push("/>"):(h.push("</"),h.push(c),h.push(">")),this.open=!1,this.leaf=!1}leafNode(c,h,d){this.openNode(c,h),d!==void 0&&this.writeText(d),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){let c=this._rollbacks.pop();this._xml.length>c.xml&&this._xml.splice(c.xml,this._xml.length-c.xml),this._stack.length>c.stack&&this._stack.splice(c.stack,this._stack.length-c.stack),this.leaf=c.leaf,this.open=c.open}get xml(){return this.closeAll(),this._xml.join("")}}o.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},t.exports=o},{"./under-dash":26,"./utils":27}],29:[function(n,t,e){(function(i){(function(){"use strict";let r=n("events"),s=n("jszip"),a=n("./stream-buf"),{stringToBuffer:o}=n("./browser-buffer-encode");class l extends r.EventEmitter{constructor(h){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},h),this.zip=new s,this.stream=new a}append(h,d){d.hasOwnProperty("base64")&&d.base64?this.zip.file(d.name,h,{base64:!0}):(i.browser&&typeof h=="string"&&(h=o(h)),this.zip.file(d.name,h))}async finalize(){let h=await this.zip.generateAsync(this.options);this.stream.end(h),this.emit("finish")}read(h){return this.stream.read(h)}setEncoding(h){return this.stream.setEncoding(h)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(h,d){return this.stream.pipe(h,d)}unpipe(h){return this.stream.unpipe(h)}unshift(h){return this.stream.unshift(h)}wrap(h){return this.stream.wrap(h)}}t.exports={ZipWriter:l}}).call(this)}).call(this,n("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(n,t,e){"use strict";t.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},28:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'yyyy"\u5E74"m"\u6708"d"\u65E5"',"ja-jp":'yyyy"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":'yyyy"\uB144" mm"\uC6D4" dd"\uC77C"'},32:{"zh-tw":'hh"\u6642"mm"\u5206"',"zh-cn":'h"\u65F6"mm"\u5206"',"ja-jp":'h"\u6642"mm"\u5206"',"ko-kr":'h"\uC2DC" mm"\uBD84"'},33:{"zh-tw":'hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'h"\u65F6"mm"\u5206"ss"\u79D2"',"ja-jp":'h"\u6642"mm"\u5206"ss"\u79D2"',"ko-kr":'h"\uC2DC" mm"\uBD84" ss"\uCD08"'},34:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"',"ja-jp":'yyyy"\u5E74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"ss"\u79D2"',"ja-jp":'m"\u6708"d"\u65E5"',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},51:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},52:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":'yyyy"\u5E74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'m"\u6708"d"\u65E5"',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},55:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"',"ja-jp":'yyyy"\u5E74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"ss"\u79D2"',"ja-jp":'m"\u6708"d"\u65E5"',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},58:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(n,t,e){"use strict";t.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(n,t,e){"use strict";let i=n("../../utils/parse-sax"),r=n("../../utils/xml-stream");class s{prepare(){}render(){}parseOpen(o){}parseText(o){}parseClose(o){}reconcile(o,l){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(o=>{o instanceof s?o.reset():o.xform&&o.xform.reset()})}mergeModel(o){this.model=Object.assign(this.model||{},o)}async parse(o){for await(let l of o)for(let{eventType:c,value:h}of l)if(c==="opentag")this.parseOpen(h);else if(c==="text")this.parseText(h);else if(c==="closetag"&&!this.parseClose(h.name))return this.model;return this.model}async parseStream(o){return this.parse(i(o))}get xml(){return this.toXml(this.model)}toXml(o){let l=new r;return this.render(l,o),l.xml}static toAttribute(o,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(o===void 0){if(c)return l}else if(c||o!==l)return o.toString()}static toStringAttribute(o,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return s.toAttribute(o,l,c)}static toStringValue(o,l){return o===void 0?l:o}static toBoolAttribute(o,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(o===void 0){if(c)return l}else if(c||o!==l)return o?"1":"0"}static toBoolValue(o,l){return o===void 0?l:o==="1"}static toIntAttribute(o,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return s.toAttribute(o,l,c)}static toIntValue(o,l){return o===void 0?l:parseInt(o,10)}static toFloatAttribute(o,l){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return s.toAttribute(o,l,c)}static toFloatValue(o,l){return o===void 0?l:parseFloat(o)}}t.exports=s},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("../../../utils/col-cache");function s(o){try{return r.decodeEx(o),!0}catch{return!1}}function a(o){let l=[],c=!1,h="";return o.split(",").forEach(d=>{if(!d)return;let p=(d.match(/'/g)||[]).length;if(!p)return void(c?h+=d+",":s(d)&&l.push(d));let g=p%2==0;!c&&g&&s(d)?l.push(d):c&&!g?(c=!1,s(h+d)&&l.push(h+d),h=""):(c=!0,h+=d+",")}),l}t.exports=class extends i{render(o,l){o.openNode("definedName",{name:l.name,localSheetId:l.localSheetId}),o.writeText(l.ranges.join(",")),o.closeNode()}parseOpen(o){switch(o.name){case"definedName":return this._parsedName=o.attributes.name,this._parsedLocalSheetId=o.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(o){this._parsedText.push(o)}parseClose(){return this.model={name:this._parsedName,ranges:a(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(n,t,e){"use strict";let i=n("../../../utils/utils"),r=n("../base-xform");t.exports=class extends r{render(s,a){s.leafNode("sheet",{sheetId:a.id,name:a.name,state:a.state,"r:id":a.rId})}parseOpen(s){return s.name==="sheet"&&(this.model={name:i.xmlDecode(s.attributes.name),id:parseInt(s.attributes.sheetId,10),state:s.attributes.state,rId:s.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{render(r,s){r.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:s.fullCalcOnLoad?1:void 0})}parseOpen(r){return r.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{render(r,s){r.leafNode("workbookPr",{date1904:s.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(r){return r.name==="workbookPr"&&(this.model={date1904:r.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{render(r,s){let a={xWindow:s.x||0,yWindow:s.y||0,windowWidth:s.width||12e3,windowHeight:s.height||24e3,firstSheet:s.firstSheet,activeTab:s.activeTab};s.visibility&&s.visibility!=="visible"&&(a.visibility=s.visibility),r.leafNode("workbookView",a)}parseOpen(r){if(r.name==="workbookView"){let s=this.model={},a=function(l,c,h){let d=c!==void 0?s[l]=c:h;d!==void 0&&(s[l]=d)},o=function(l,c,h){let d=c!==void 0?s[l]=parseInt(c,10):h;d!==void 0&&(s[l]=d)};return o("x",r.attributes.xWindow,0),o("y",r.attributes.yWindow,0),o("width",r.attributes.windowWidth,25e3),o("height",r.attributes.windowHeight,1e4),a("visibility",r.attributes.visibility,"visible"),o("activeTab",r.attributes.activeTab,void 0),o("firstSheet",r.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../../../utils/col-cache"),s=n("../../../utils/xml-stream"),a=n("../base-xform"),o=n("../static-xform"),l=n("../list-xform"),c=n("./defined-name-xform"),h=n("./sheet-xform"),d=n("./workbook-view-xform"),p=n("./workbook-properties-xform"),g=n("./workbook-calc-properties-xform");class m extends a{constructor(){super(),this.map={fileVersion:m.STATIC_XFORMS.fileVersion,workbookPr:new p,bookViews:new l({tag:"bookViews",count:!1,childXform:new d}),sheets:new l({tag:"sheets",count:!1,childXform:new h}),definedNames:new l({tag:"definedNames",count:!1,childXform:new c}),calcPr:new g}}prepare(v){v.sheets=v.worksheets;let x=[],S=0;v.sheets.forEach(O=>{if(O.pageSetup&&O.pageSetup.printArea&&O.pageSetup.printArea.split("&&").forEach(D=>{let U=D.split(":"),z={name:"_xlnm.Print_Area",ranges:[`'${O.name}'!$${U[0]}:$${U[1]}`],localSheetId:S};x.push(z)}),O.pageSetup&&(O.pageSetup.printTitlesRow||O.pageSetup.printTitlesColumn)){let D=[];if(O.pageSetup.printTitlesColumn){let z=O.pageSetup.printTitlesColumn.split(":");D.push(`'${O.name}'!$${z[0]}:$${z[1]}`)}if(O.pageSetup.printTitlesRow){let z=O.pageSetup.printTitlesRow.split(":");D.push(`'${O.name}'!$${z[0]}:$${z[1]}`)}let U={name:"_xlnm.Print_Titles",ranges:D,localSheetId:S};x.push(U)}S++}),x.length&&(v.definedNames=v.definedNames.concat(x)),(v.media||[]).forEach((O,D)=>{O.name=O.type+(D+1)})}render(v,x){v.openXml(s.StdDocAttributes),v.openNode("workbook",m.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(v),this.map.workbookPr.render(v,x.properties),this.map.bookViews.render(v,x.views),this.map.sheets.render(v,x.sheets),this.map.definedNames.render(v,x.definedNames),this.map.calcPr.render(v,x.calcProperties),v.closeNode()}parseOpen(v){if(this.parser)return this.parser.parseOpen(v),!0;switch(v.name){case"workbook":return!0;default:return this.parser=this.map[v.name],this.parser&&this.parser.parseOpen(v),!0}}parseText(v){this.parser&&this.parser.parseText(v)}parseClose(v){if(this.parser)return this.parser.parseClose(v)||(this.parser=void 0),!0;switch(v){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(v){let x=(v.workbookRels||[]).reduce((z,V)=>(z[V.Id]=V,z),{}),S=[],O,D=0;(v.sheets||[]).forEach(z=>{let V=x[z.rId];V&&(O=v.worksheetHash["xl/"+V.Target.replace(/^(\s|\/xl\/)+/,"")],O&&(O.name=z.name,O.id=z.id,O.state=z.state,S[D++]=O))});let U=[];i.each(v.definedNames,z=>{if(z.name==="_xlnm.Print_Area"){if(O=S[z.localSheetId],O){O.pageSetup||(O.pageSetup={});let V=r.decodeEx(z.ranges[0]);O.pageSetup.printArea=O.pageSetup.printArea?`${O.pageSetup.printArea}&&${V.dimensions}`:V.dimensions}}else if(z.name==="_xlnm.Print_Titles"){if(O=S[z.localSheetId],O){O.pageSetup||(O.pageSetup={});let V=z.ranges.join(","),G=/\$/g,tt=/\$\d+:\$\d+/,K=V.match(tt);if(K&&K.length){let Z=K[0];O.pageSetup.printTitlesRow=Z.replace(G,"")}let B=/\$[A-Z]+:\$[A-Z]+/,N=V.match(B);if(N&&N.length){let Z=N[0];O.pageSetup.printTitlesColumn=Z.replace(G,"")}}}else U.push(z)}),v.definedNames=U,v.media.forEach((z,V)=>{z.index=V})}}m.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},m.STATIC_XFORMS={fileVersion:new o({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},t.exports=m},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(n,t,e){"use strict";let i=n("../strings/rich-text-xform"),r=n("../../../utils/utils"),s=n("../base-xform"),a=t.exports=function(o){this.model=o};r.inherits(a,s,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new i),this._richTextXform},render(o,l){l=l||this.model,o.openNode("comment",{ref:l.ref,authorId:0}),o.openNode("text"),l&&l.note&&l.note.texts&&l.note.texts.forEach(c=>{this.richTextXform.render(o,c)}),o.closeNode(),o.closeNode()},parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case"comment":return this.model={type:"note",note:{texts:[]},...o.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(o),!0;default:return!1}},parseText(o){this.parser&&this.parser.parseText(o)},parseClose(o){switch(o){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(o),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(n,t,e){"use strict";let i=n("../../../utils/xml-stream"),r=n("../../../utils/utils"),s=n("../base-xform"),a=n("./comment-xform"),o=t.exports=function(){this.map={comment:new a}};r.inherits(o,s,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(l,c){c=c||this.model,l.openXml(i.StdDocAttributes),l.openNode("comments",o.COMMENTS_ATTRIBUTES),l.openNode("authors"),l.leafNode("author",null,"Author"),l.closeNode(),l.openNode("commentList"),c.comments.forEach(h=>{this.map.comment.render(l,h)}),l.closeNode(),l.closeNode()},parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(l),!0;default:return!1}},parseText(l){this.parser&&this.parser.parseText(l)},parseClose(l){switch(l){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(l),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(n,t,e){"use strict";let i=n("../../base-xform");t.exports=class extends i{constructor(r){super(),this._model=r}get tag(){return this._model&&this._model.tag}render(r,s,a){(s===a[2]||this.tag==="x:SizeWithCells"&&s===a[1])&&r.leafNode(this.tag)}parseOpen(r){switch(r.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(n,t,e){"use strict";let i=n("../../base-xform");t.exports=class extends i{constructor(r){super(),this._model=r}get tag(){return this._model&&this._model.tag}render(r,s){r.leafNode(this.tag,null,s)}parseOpen(r){switch(r.name){case this.tag:return this.text="",!0;default:return!1}}parseText(r){this.text=r}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"x:Anchor"}getAnchorRect(r){let s=Math.floor(r.left),a=Math.floor(68*(r.left-s)),o=Math.floor(r.top),l=Math.floor(18*(r.top-o)),c=Math.floor(r.right),h=Math.floor(68*(r.right-c)),d=Math.floor(r.bottom);return[s,a,o,l,c,h,d,Math.floor(18*(r.bottom-d))]}getDefaultRect(r){let s=r.col,a=Math.max(r.row-2,0);return[s,6,a,14,s+2,2,a+4,16]}render(r,s){let a=s.anchor?this.getAnchorRect(s.anchor):this.getDefaultRect(s.refAddress);r.leafNode("x:Anchor",null,a.join(", "))}parseOpen(r){switch(r.name){case this.tag:return this.text="",!0;default:return!1}}parseText(r){this.text=r}parseClose(){return!1}}},{"../base-xform":32}],44:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("./vml-anchor-xform"),s=n("./style/vml-protection-xform"),a=n("./style/vml-position-xform"),o=["twoCells","oneCells","absolute"];t.exports=class extends i{constructor(){super(),this.map={"x:Anchor":new r,"x:Locked":new s({tag:"x:Locked"}),"x:LockText":new s({tag:"x:LockText"}),"x:SizeWithCells":new a({tag:"x:SizeWithCells"}),"x:MoveWithCells":new a({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(l,c){let{protection:h,editAs:d}=c.note;l.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(l,d,o),this.map["x:SizeWithCells"].render(l,d,o),this.map["x:Anchor"].render(l,c),this.map["x:Locked"].render(l,h.locked),l.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(l,h.lockText),l.leafNode("x:Row",null,c.refAddress.row-1),l.leafNode("x:Column",null,c.refAddress.col-1),l.closeNode()}parseOpen(l){switch(l.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){let l=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),c=Object.keys(l).length;this.model.editAs=o[c],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(n,t,e){"use strict";let i=n("../../../utils/xml-stream"),r=n("../base-xform"),s=n("./vml-shape-xform");class a extends r{constructor(){super(),this.map={"v:shape":new s}}get tag(){return"xml"}render(l,c){l.openXml(i.StdDocAttributes),l.openNode(this.tag,a.DRAWING_ATTRIBUTES),l.openNode("o:shapelayout",{"v:ext":"edit"}),l.leafNode("o:idmap",{"v:ext":"edit",data:1}),l.closeNode(),l.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),l.leafNode("v:stroke",{joinstyle:"miter"}),l.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),l.closeNode(),c.comments.forEach((h,d)=>{this.map["v:shape"].render(l,h,d)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(l){case this.tag:return!1;default:return!0}}reconcile(l,c){l.anchors.forEach(h=>{h.br?this.map["xdr:twoCellAnchor"].reconcile(h,c):this.map["xdr:oneCellAnchor"].reconcile(h,c)})}}a.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},t.exports=a},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("./vml-textbox-xform"),s=n("./vml-client-data-xform");class a extends i{constructor(){super(),this.map={"v:textbox":new r,"x:ClientData":new s}}get tag(){return"v:shape"}render(l,c,h){l.openNode("v:shape",a.V_SHAPE_ATTRIBUTES(c,h)),l.leafNode("v:fill",{color2:"infoBackground [80]"}),l.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),l.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(l,c),this.map["x:ClientData"].render(l,c),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset(),this.model={margins:{insetmode:l.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}a.V_SHAPE_ATTRIBUTES=(o,l)=>({id:"_x0000_s"+(1025+l),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":o.note.margins&&o.note.margins.insetmode}),t.exports=a},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"v:textbox"}conversionUnit(r,s,a){return`${parseFloat(r)*s.toFixed(2)}${a}`}reverseConversionUnit(r){return(r||"").split(",").map(s=>Number(parseFloat(this.conversionUnit(parseFloat(s),.1,"")).toFixed(2)))}render(r,s){let a={style:"mso-direction-alt:auto"};if(s&&s.note){let{inset:o}=s.note&&s.note.margins;Array.isArray(o)&&(o=o.map(l=>this.conversionUnit(l,10,"mm")).join(",")),o&&(a.inset=o)}r.openNode("v:textbox",a),r.leafNode("div",{style:"text-align:left"}),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:return this.model={inset:this.reverseConversionUnit(r.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(n,t,e){"use strict";let i=n("./base-xform");t.exports=class extends i{createNewModel(r){return{}}parseOpen(r){return this.parser=this.parser||this.map[r.name],this.parser?(this.parser.parseOpen(r),!0):r.name===this.tag&&(this.model=this.createNewModel(r),!0)}parseText(r){this.parser&&this.parser.parseText(r)}onParserClose(r,s){this.model[r]=s.model}parseClose(r){return this.parser?(this.parser.parseClose(r)||(this.onParserClose(r,this.parser),this.parser=void 0),!0):r!==this.tag}}},{"./base-xform":32}],49:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{render(r,s){r.openNode("HeadingPairs"),r.openNode("vt:vector",{size:2,baseType:"variant"}),r.openNode("vt:variant"),r.leafNode("vt:lpstr",void 0,"Worksheets"),r.closeNode(),r.openNode("vt:variant"),r.leafNode("vt:i4",void 0,s.length),r.closeNode(),r.closeNode(),r.closeNode()}parseOpen(r){return r.name==="HeadingPairs"}parseText(){}parseClose(r){return r!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{render(r,s){r.openNode("TitlesOfParts"),r.openNode("vt:vector",{size:s.length,baseType:"lpstr"}),s.forEach(a=>{r.leafNode("vt:lpstr",void 0,a.name)}),r.closeNode(),r.closeNode()}parseOpen(r){return r.name==="TitlesOfParts"}parseText(){}parseClose(r){return r!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(n,t,e){"use strict";let i=n("../../../utils/xml-stream"),r=n("../base-xform"),s=n("../simple/string-xform"),a=n("./app-heading-pairs-xform"),o=n("./app-titles-of-parts-xform");class l extends r{constructor(){super(),this.map={Company:new s({tag:"Company"}),Manager:new s({tag:"Manager"}),HeadingPairs:new a,TitleOfParts:new o}}render(h,d){h.openXml(i.StdDocAttributes),h.openNode("Properties",l.PROPERTY_ATTRIBUTES),h.leafNode("Application",void 0,"Microsoft Excel"),h.leafNode("DocSecurity",void 0,"0"),h.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(h,d.worksheets),this.map.TitleOfParts.render(h,d.worksheets),this.map.Company.render(h,d.company||""),this.map.Manager.render(h,d.manager),h.leafNode("LinksUpToDate",void 0,"false"),h.leafNode("SharedDoc",void 0,"false"),h.leafNode("HyperlinksChanged",void 0,"false"),h.leafNode("AppVersion",void 0,"16.0300"),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"Properties":return!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}l.DateFormat=function(c){return c.toISOString().replace(/[.]\d{3,6}/,"")},l.DateAttrs={"xsi:type":"dcterms:W3CDTF"},l.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},t.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(n,t,e){"use strict";let i=n("../../../utils/xml-stream"),r=n("../base-xform");class s extends r{render(o,l){o.openXml(i.StdDocAttributes),o.openNode("Types",s.PROPERTY_ATTRIBUTES);let c={};(l.media||[]).forEach(h=>{if(h.type==="image"){let d=h.extension;c[d]||(c[d]=!0,o.leafNode("Default",{Extension:d,ContentType:"image/"+d}))}}),o.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),o.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),o.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),l.worksheets.forEach(h=>{let d=`/xl/worksheets/sheet${h.id}.xml`;o.leafNode("Override",{PartName:d,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),o.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),o.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),l.sharedStrings&&l.sharedStrings.count&&o.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),l.tables&&l.tables.forEach(h=>{o.leafNode("Override",{PartName:"/xl/tables/"+h.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),l.drawings&&l.drawings.forEach(h=>{o.leafNode("Override",{PartName:`/xl/drawings/${h.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),l.commentRefs&&(o.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),l.commentRefs.forEach(h=>{let{commentName:d}=h;o.leafNode("Override",{PartName:`/xl/${d}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),o.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),o.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),o.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}s.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},t.exports=s},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(n,t,e){"use strict";let i=n("../../../utils/xml-stream"),r=n("../base-xform"),s=n("../simple/date-xform"),a=n("../simple/string-xform"),o=n("../simple/integer-xform");class l extends r{constructor(){super(),this.map={"dc:creator":new a({tag:"dc:creator"}),"dc:title":new a({tag:"dc:title"}),"dc:subject":new a({tag:"dc:subject"}),"dc:description":new a({tag:"dc:description"}),"dc:identifier":new a({tag:"dc:identifier"}),"dc:language":new a({tag:"dc:language"}),"cp:keywords":new a({tag:"cp:keywords"}),"cp:category":new a({tag:"cp:category"}),"cp:lastModifiedBy":new a({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new s({tag:"cp:lastPrinted",format:l.DateFormat}),"cp:revision":new o({tag:"cp:revision"}),"cp:version":new a({tag:"cp:version"}),"cp:contentStatus":new a({tag:"cp:contentStatus"}),"cp:contentType":new a({tag:"cp:contentType"}),"dcterms:created":new s({tag:"dcterms:created",attrs:l.DateAttrs,format:l.DateFormat}),"dcterms:modified":new s({tag:"dcterms:modified",attrs:l.DateAttrs,format:l.DateFormat})}}render(h,d){h.openXml(i.StdDocAttributes),h.openNode("cp:coreProperties",l.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(h,d.creator),this.map["dc:title"].render(h,d.title),this.map["dc:subject"].render(h,d.subject),this.map["dc:description"].render(h,d.description),this.map["dc:identifier"].render(h,d.identifier),this.map["dc:language"].render(h,d.language),this.map["cp:keywords"].render(h,d.keywords),this.map["cp:category"].render(h,d.category),this.map["cp:lastModifiedBy"].render(h,d.lastModifiedBy),this.map["cp:lastPrinted"].render(h,d.lastPrinted),this.map["cp:revision"].render(h,d.revision),this.map["cp:version"].render(h,d.version),this.map["cp:contentStatus"].render(h,d.contentStatus),this.map["cp:contentType"].render(h,d.contentType),this.map["dcterms:created"].render(h,d.created),this.map["dcterms:modified"].render(h,d.modified),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[h.name],this.parser)return this.parser.parseOpen(h),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(h))}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+h)}}}l.DateFormat=function(c){return c.toISOString().replace(/[.]\d{3}/,"")},l.DateAttrs={"xsi:type":"dcterms:W3CDTF"},l.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},t.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{render(r,s){r.leafNode("Relationship",s)}parseOpen(r){switch(r.name){case"Relationship":return this.model=r.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(n,t,e){"use strict";let i=n("../../../utils/xml-stream"),r=n("../base-xform"),s=n("./relationship-xform");class a extends r{constructor(){super(),this.map={Relationship:new s}}render(l,c){c=c||this._values,l.openXml(i.StdDocAttributes),l.openNode("Relationships",a.RELATIONSHIPS_ATTRIBUTES),c.forEach(h=>{this.map.Relationship.render(l,h)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[l.name],this.parser)return this.parser.parseOpen(l),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(l){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}a.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},t.exports=a},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:this.reset(),this.model={range:{editAs:r.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[r.name],this.parser&&this.parser.parseOpen(r)}return!0}parseText(r){this.parser&&this.parser.parseText(r)}reconcilePicture(r,s){if(r&&r.rId){let a=s.rels[r.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(a){let o=a[1],l=s.mediaIndex[o];return s.media[l]}}}}},{"../base-xform":32}],57:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("./blip-xform");t.exports=class extends i{constructor(){super(),this.map={"a:blip":new r}}get tag(){return"xdr:blipFill"}render(s,a){s.openNode(this.tag),this.map["a:blip"].render(s,a),s.openNode("a:stretch"),s.leafNode("a:fillRect"),s.closeNode(),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset();break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(){}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;switch(s){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"a:blip"}render(r,s){r.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":s.rId,cstate:"print"})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"xdr:cNvPicPr"}render(r){r.openNode(this.tag),r.leafNode("a:picLocks",{noChangeAspect:"1"}),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("./hlink-click-xform"),s=n("./ext-lst-xform");t.exports=class extends i{constructor(){super(),this.map={"a:hlinkClick":new r,"a:extLst":new s}}get tag(){return"xdr:cNvPr"}render(a,o){a.openNode(this.tag,{id:o.index,name:"Picture "+o.index}),this.map["a:hlinkClick"].render(a,o),this.map["a:extLst"].render(a,o),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("../simple/integer-xform");t.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.map={"xdr:col":new r({tag:"xdr:col",zero:!0}),"xdr:colOff":new r({tag:"xdr:colOff",zero:!0}),"xdr:row":new r({tag:"xdr:row",zero:!0}),"xdr:rowOff":new r({tag:"xdr:rowOff",zero:!0})}}render(s,a){s.openNode(this.tag),this.map["xdr:col"].render(s,a.nativeCol),this.map["xdr:colOff"].render(s,a.nativeColOff),this.map["xdr:row"].render(s,a.nativeRow),this.map["xdr:rowOff"].render(s,a.nativeRowOff),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset();break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;switch(s){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(n,t,e){"use strict";let i=n("../../../utils/col-cache"),r=n("../../../utils/xml-stream"),s=n("../base-xform"),a=n("./two-cell-anchor-xform"),o=n("./one-cell-anchor-xform");class l extends s{constructor(){super(),this.map={"xdr:twoCellAnchor":new a,"xdr:oneCellAnchor":new o}}prepare(h){h.anchors.forEach((d,p)=>{d.anchorType=function(g){return(typeof g.range=="string"?i.decode(g.range):g.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(d),this.map[d.anchorType].prepare(d,{index:p})})}get tag(){return"xdr:wsDr"}render(h,d){h.openXml(r.StdDocAttributes),h.openNode(this.tag,l.DRAWING_ATTRIBUTES),d.anchors.forEach(p=>{this.map[p.anchorType].render(h,p)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(h){case this.tag:return!1;default:return!0}}reconcile(h,d){h.anchors.forEach(p=>{p.br?this.map["xdr:twoCellAnchor"].reconcile(p,d):this.map["xdr:oneCellAnchor"].reconcile(p,d)})}}l.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},t.exports=l},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"a:extLst"}render(r){r.openNode(this.tag),r.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),r.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),r.closeNode(),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.map={}}render(r,s){r.openNode(this.tag);let a=Math.floor(9525*s.width),o=Math.floor(9525*s.height);r.addAttribute("cx",a),r.addAttribute("cy",o),r.closeNode()}parseOpen(r){return r.name===this.tag&&(this.model={width:parseInt(r.attributes.cx||"0",10)/9525,height:parseInt(r.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"a:hlinkClick"}render(r,s){s.hyperlinks&&s.hyperlinks.rId&&r.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":s.hyperlinks.rId,tooltip:s.hyperlinks.tooltip})}parseOpen(r){switch(r.name){case this.tag:return this.model={hyperlinks:{rId:r.attributes["r:id"],tooltip:r.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("./c-nv-pr-xform"),s=n("./c-nv-pic-pr-xform");t.exports=class extends i{constructor(){super(),this.map={"xdr:cNvPr":new r,"xdr:cNvPicPr":new s}}get tag(){return"xdr:nvPicPr"}render(a,o){a.openNode(this.tag),this.map["xdr:cNvPr"].render(a,o),this.map["xdr:cNvPicPr"].render(a,o),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(n,t,e){"use strict";let i=n("./base-cell-anchor-xform"),r=n("../static-xform"),s=n("./cell-position-xform"),a=n("./ext-xform"),o=n("./pic-xform");t.exports=class extends i{constructor(){super(),this.map={"xdr:from":new s({tag:"xdr:from"}),"xdr:ext":new a({tag:"xdr:ext"}),"xdr:pic":new o,"xdr:clientData":new r({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(l,c){this.map["xdr:pic"].prepare(l.picture,c)}render(l,c){l.openNode(this.tag,{editAs:c.range.editAs||"oneCell"}),this.map["xdr:from"].render(l,c.range.tl),this.map["xdr:ext"].render(l,c.range.ext),this.map["xdr:pic"].render(l,c.picture),this.map["xdr:clientData"].render(l,{}),l.closeNode()}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(l,c){l.medium=this.reconcilePicture(l.picture,c)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("../static-xform"),s=n("./blip-fill-xform"),a=n("./nv-pic-pr-xform"),o=n("./sp-pr");t.exports=class extends i{constructor(){super(),this.map={"xdr:nvPicPr":new a,"xdr:blipFill":new s,"xdr:spPr":new r(o)}}get tag(){return"xdr:pic"}prepare(l,c){l.index=c.index+1}render(l,c){l.openNode(this.tag),this.map["xdr:nvPicPr"].render(l,c),this.map["xdr:blipFill"].render(l,c),this.map["xdr:spPr"].render(l,c),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(n,t,e){"use strict";t.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(n,t,e){"use strict";let i=n("./base-cell-anchor-xform"),r=n("../static-xform"),s=n("./cell-position-xform"),a=n("./pic-xform");t.exports=class extends i{constructor(){super(),this.map={"xdr:from":new s({tag:"xdr:from"}),"xdr:to":new s({tag:"xdr:to"}),"xdr:pic":new a,"xdr:clientData":new r({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(o,l){this.map["xdr:pic"].prepare(o.picture,l)}render(o,l){o.openNode(this.tag,{editAs:l.range.editAs||"oneCell"}),this.map["xdr:from"].render(o,l.range.tl),this.map["xdr:to"].render(o,l.range.br),this.map["xdr:pic"].render(o,l.picture),this.map["xdr:clientData"].render(o,{}),o.closeNode()}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(o,l){o.medium=this.reconcilePicture(o.picture,l)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(n,t,e){"use strict";let i=n("./base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.always=!!r.always,this.count=r.count,this.empty=r.empty,this.$count=r.$count||"count",this.$=r.$,this.childXform=r.childXform,this.maxItems=r.maxItems}prepare(r,s){let{childXform:a}=this;r&&r.forEach((o,l)=>{s.index=l,a.prepare(o,s)})}render(r,s){if(this.always||s&&s.length){r.openNode(this.tag,this.$),this.count&&r.addAttribute(this.$count,s&&s.length||0);let{childXform:a}=this;(s||[]).forEach((o,l)=>{a.render(r,o,l)}),r.closeNode()}else this.empty&&r.leafNode(this.tag)}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(r)&&(this.parser=this.childXform,!0)}}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser){if(!this.parser.parseClose(r)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(r,s){if(r){let{childXform:a}=this;r.forEach(o=>{a.reconcile(o,s)})}}}},{"./base-xform":32}],72:[function(n,t,e){"use strict";let i=n("../../../utils/col-cache"),r=n("../base-xform");t.exports=class extends r{get tag(){return"autoFilter"}render(s,a){if(a)if(typeof a=="string")s.leafNode("autoFilter",{ref:a});else{let o=function(h){return typeof h=="string"?h:i.getAddress(h.row,h.column).address},l=o(a.from),c=o(a.to);l&&c&&s.leafNode("autoFilter",{ref:`${l}:${c}`})}}parseOpen(s){s.name==="autoFilter"&&(this.model=s.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(n,t,e){"use strict";let i=n("../../../utils/utils"),r=n("../base-xform"),s=n("../../../doc/range"),a=n("../../../doc/enums"),o=n("../strings/rich-text-xform");function l(c){if(c==null)return a.ValueType.Null;if(c instanceof String||typeof c=="string")return a.ValueType.String;if(typeof c=="number")return a.ValueType.Number;if(typeof c=="boolean")return a.ValueType.Boolean;if(c instanceof Date)return a.ValueType.Date;if(c.text&&c.hyperlink)return a.ValueType.Hyperlink;if(c.formula)return a.ValueType.Formula;if(c.error)return a.ValueType.Error;throw new Error("I could not understand type of value")}t.exports=class extends r{constructor(){super(),this.richTextXForm=new o}get tag(){return"c"}prepare(c,h){let d=h.styles.addStyleModel(c.style||{},function(p){switch(p.type){case a.ValueType.Formula:return l(p.result);default:return p.type}}(c));switch(d&&(c.styleId=d),c.comment&&h.comments.push({...c.comment,ref:c.address}),c.type){case a.ValueType.String:case a.ValueType.RichText:h.sharedStrings&&(c.ssId=h.sharedStrings.add(c.value));break;case a.ValueType.Date:h.date1904&&(c.date1904=!0);break;case a.ValueType.Hyperlink:h.sharedStrings&&c.text!==void 0&&c.text!==null&&(c.ssId=h.sharedStrings.add(c.text)),h.hyperlinks.push({address:c.address,target:c.hyperlink,tooltip:c.tooltip});break;case a.ValueType.Merge:h.merges.add(c);break;case a.ValueType.Formula:if(h.date1904&&(c.date1904=!0),c.shareType==="shared"&&(c.si=h.siFormulae++),c.formula)h.formulae[c.address]=c;else if(c.sharedFormula){let p=h.formulae[c.sharedFormula];if(!p)throw new Error("Shared Formula master must exist above and or left of clone for cell "+c.address);p.si===void 0?(p.shareType="shared",p.si=h.siFormulae++,p.range=new s(p.address,c.address)):p.range&&p.range.expandToAddress(c.address),c.si=p.si}}}renderFormula(c,h){let d=null;switch(h.shareType){case"shared":d={t:"shared",ref:h.ref||h.range.range,si:h.si};break;case"array":d={t:"array",ref:h.ref};break;default:h.si!==void 0&&(d={t:"shared",si:h.si})}switch(l(h.result)){case a.ValueType.Null:c.leafNode("f",d,h.formula);break;case a.ValueType.String:c.addAttribute("t","str"),c.leafNode("f",d,h.formula),c.leafNode("v",null,h.result);break;case a.ValueType.Number:c.leafNode("f",d,h.formula),c.leafNode("v",null,h.result);break;case a.ValueType.Boolean:c.addAttribute("t","b"),c.leafNode("f",d,h.formula),c.leafNode("v",null,h.result?1:0);break;case a.ValueType.Error:c.addAttribute("t","e"),c.leafNode("f",d,h.formula),c.leafNode("v",null,h.result.error);break;case a.ValueType.Date:c.leafNode("f",d,h.formula),c.leafNode("v",null,i.dateToExcel(h.result,h.date1904));break;default:throw new Error("I could not understand type of value")}}render(c,h){if(h.type!==a.ValueType.Null||h.styleId){switch(c.openNode("c"),c.addAttribute("r",h.address),h.styleId&&c.addAttribute("s",h.styleId),h.type){case a.ValueType.Null:break;case a.ValueType.Number:c.leafNode("v",null,h.value);break;case a.ValueType.Boolean:c.addAttribute("t","b"),c.leafNode("v",null,h.value?"1":"0");break;case a.ValueType.Error:c.addAttribute("t","e"),c.leafNode("v",null,h.value.error);break;case a.ValueType.String:case a.ValueType.RichText:h.ssId!==void 0?(c.addAttribute("t","s"),c.leafNode("v",null,h.ssId)):h.value&&h.value.richText?(c.addAttribute("t","inlineStr"),c.openNode("is"),h.value.richText.forEach(d=>{this.richTextXForm.render(c,d)}),c.closeNode("is")):(c.addAttribute("t","str"),c.leafNode("v",null,h.value));break;case a.ValueType.Date:c.leafNode("v",null,i.dateToExcel(h.value,h.date1904));break;case a.ValueType.Hyperlink:h.ssId!==void 0?(c.addAttribute("t","s"),c.leafNode("v",null,h.ssId)):(c.addAttribute("t","str"),c.leafNode("v",null,h.text));break;case a.ValueType.Formula:this.renderFormula(c,h);break;case a.ValueType.Merge:}c.closeNode()}}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"c":return this.model={address:c.attributes.r},this.t=c.attributes.t,c.attributes.s&&(this.model.styleId=parseInt(c.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=c.attributes.si,this.model.shareType=c.attributes.t,this.model.ref=c.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){if(this.parser)this.parser.parseText(c);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+c:c;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+c:c:this.model.value=this.model.value?this.model.value+c:c}}parseClose(c){switch(c){case"c":{let{model:h}=this;if(h.formula||h.shareType)h.type=a.ValueType.Formula,h.value&&(this.t==="str"?h.result=i.xmlDecode(h.value):this.t==="b"?h.result=parseInt(h.value,10)!==0:this.t==="e"?h.result={error:h.value}:h.result=parseFloat(h.value),h.value=void 0);else if(h.value!==void 0)switch(this.t){case"s":h.type=a.ValueType.String,h.value=parseInt(h.value,10);break;case"str":h.type=a.ValueType.String,h.value=i.xmlDecode(h.value);break;case"inlineStr":h.type=a.ValueType.String;break;case"b":h.type=a.ValueType.Boolean,h.value=parseInt(h.value,10)!==0;break;case"e":h.type=a.ValueType.Error,h.value={error:h.value};break;default:h.type=a.ValueType.Number,h.value=parseFloat(h.value)}else h.styleId?h.type=a.ValueType.Null:h.type=a.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(c),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(c),!0)}}reconcile(c,h){let d=c.styleId&&h.styles&&h.styles.getStyleModel(c.styleId);switch(d&&(c.style=d),c.styleId!==void 0&&(c.styleId=void 0),c.type){case a.ValueType.String:typeof c.value=="number"&&h.sharedStrings&&(c.value=h.sharedStrings.getString(c.value)),c.value.richText&&(c.type=a.ValueType.RichText);break;case a.ValueType.Number:d&&i.isDateFmt(d.numFmt)&&(c.type=a.ValueType.Date,c.value=i.excelToDate(c.value,h.date1904));break;case a.ValueType.Formula:c.result!==void 0&&d&&i.isDateFmt(d.numFmt)&&(c.result=i.excelToDate(c.result,h.date1904)),c.shareType==="shared"&&(c.ref?h.formulae[c.si]=c.address:(c.sharedFormula=h.formulae[c.si],delete c.shareType),delete c.si)}let p=h.hyperlinkMap[c.address];p&&(c.type===a.ValueType.Formula?(c.text=c.result,c.result=void 0):(c.text=c.value,c.value=void 0),c.type=a.ValueType.Hyperlink,c.hyperlink=p);let g=h.commentsMap&&h.commentsMap[c.address];g&&(c.comment=g)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(n,t,e){"use strict";let i=n("../../base-xform");t.exports=class extends i{get tag(){return"x14:cfIcon"}render(r,s){r.leafNode(this.tag,{iconSet:s.iconSet,iconId:s.iconId})}parseOpen(r){let{attributes:s}=r;this.model={iconSet:s.iconSet,iconId:i.toIntValue(s.iconId)}}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],75:[function(n,t,e){"use strict";let{v4:i}=n("uuid"),r=n("../../base-xform"),s=n("../../composite-xform"),a=n("./databar-ext-xform"),o=n("./icon-set-ext-xform"),l={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class c extends s{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new a,"x14:iconSet":this.iconSetXform=new o}}get tag(){return"x14:cfRule"}static isExt(d){return d.type==="dataBar"?a.isExt(d):!(d.type!=="iconSet"||!d.custom&&!l[d.iconSet])}prepare(d){c.isExt(d)&&(d.x14Id=`{${i()}}`.toUpperCase())}render(d,p){if(c.isExt(p))switch(p.type){case"dataBar":this.renderDataBar(d,p);break;case"iconSet":this.renderIconSet(d,p)}}renderDataBar(d,p){d.openNode(this.tag,{type:"dataBar",id:p.x14Id}),this.databarXform.render(d,p),d.closeNode()}renderIconSet(d,p){d.openNode(this.tag,{type:"iconSet",priority:p.priority,id:p.x14Id||`{${i()}}`}),this.iconSetXform.render(d,p),d.closeNode()}createNewModel(d){let{attributes:p}=d;return{type:p.type,x14Id:p.id,priority:r.toIntValue(p.priority)}}onParserClose(d,p){Object.assign(this.model,p.model)}}t.exports=c},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(n,t,e){"use strict";let i=n("../../composite-xform"),r=n("./f-ext-xform");t.exports=class extends i{constructor(){super(),this.map={"xm:f":this.fExtXform=new r}}get tag(){return"x14:cfvo"}render(s,a){s.openNode(this.tag,{type:a.type}),a.value!==void 0&&this.fExtXform.render(s,a.value),s.closeNode()}createNewModel(s){return{type:s.attributes.type}}onParserClose(s,a){switch(s){case"xm:f":this.model.value=a.model?parseFloat(a.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(n,t,e){"use strict";let i=n("../../composite-xform"),r=n("./sqref-ext-xform"),s=n("./cf-rule-ext-xform");t.exports=class extends i{constructor(){super(),this.map={"xm:sqref":this.sqRef=new r,"x14:cfRule":this.cfRule=new s}}get tag(){return"x14:conditionalFormatting"}prepare(a,o){a.rules.forEach(l=>{this.cfRule.prepare(l,o)})}render(a,o){o.rules.some(s.isExt)&&(a.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),o.rules.filter(s.isExt).forEach(l=>this.cfRule.render(a,l)),this.sqRef.render(a,o.ref),a.closeNode())}createNewModel(){return{rules:[]}}onParserClose(a,o){switch(a){case"xm:sqref":this.model.ref=o.model;break;case"x14:cfRule":this.model.rules.push(o.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(n,t,e){"use strict";let i=n("../../composite-xform"),r=n("./cf-rule-ext-xform"),s=n("./conditional-formatting-ext-xform");t.exports=class extends i{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new s}}get tag(){return"x14:conditionalFormattings"}hasContent(a){return a.hasExtContent===void 0&&(a.hasExtContent=a.some(o=>o.rules.some(r.isExt))),a.hasExtContent}prepare(a,o){a.forEach(l=>{this.cfXform.prepare(l,o)})}render(a,o){this.hasContent(o)&&(a.openNode(this.tag),o.forEach(l=>this.cfXform.render(a,l)),a.closeNode())}createNewModel(){return[]}onParserClose(a,o){this.model.push(o.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(n,t,e){"use strict";let i=n("../../base-xform"),r=n("../../composite-xform"),s=n("../../style/color-xform"),a=n("./cfvo-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new a,"x14:borderColor":this.borderColorXform=new s("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new s("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new s("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new s("x14:axisColor")}}static isExt(o){return!o.gradient}get tag(){return"x14:dataBar"}render(o,l){o.openNode(this.tag,{minLength:i.toIntAttribute(l.minLength,0,!0),maxLength:i.toIntAttribute(l.maxLength,100,!0),border:i.toBoolAttribute(l.border,!1),gradient:i.toBoolAttribute(l.gradient,!0),negativeBarColorSameAsPositive:i.toBoolAttribute(l.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolAttribute(l.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toAttribute(l.axisPosition,"auto"),direction:i.toAttribute(l.direction,"leftToRight")}),l.cfvo.forEach(c=>{this.cfvoXform.render(o,c)}),this.borderColorXform.render(o,l.borderColor),this.negativeBorderColorXform.render(o,l.negativeBorderColor),this.negativeFillColorXform.render(o,l.negativeFillColor),this.axisColorXform.render(o,l.axisColor),o.closeNode()}createNewModel(o){let{attributes:l}=o;return{cfvo:[],minLength:i.toIntValue(l.minLength,0),maxLength:i.toIntValue(l.maxLength,100),border:i.toBoolValue(l.border,!1),gradient:i.toBoolValue(l.gradient,!0),negativeBarColorSameAsPositive:i.toBoolValue(l.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolValue(l.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toStringValue(l.axisPosition,"auto"),direction:i.toStringValue(l.direction,"leftToRight")}}onParserClose(o,l){let[,c]=o.split(":");switch(c){case"cfvo":this.model.cfvo.push(l.model);break;default:this.model[c]=l.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(n,t,e){"use strict";let i=n("../../base-xform");t.exports=class extends i{get tag(){return"xm:f"}render(r,s){r.leafNode(this.tag,null,s)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],81:[function(n,t,e){"use strict";let i=n("../../base-xform"),r=n("../../composite-xform"),s=n("./cfvo-ext-xform"),a=n("./cf-icon-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new s,"x14:cfIcon":this.cfIconXform=new a}}get tag(){return"x14:iconSet"}render(o,l){o.openNode(this.tag,{iconSet:i.toStringAttribute(l.iconSet),reverse:i.toBoolAttribute(l.reverse,!1),showValue:i.toBoolAttribute(l.showValue,!0),custom:i.toBoolAttribute(l.icons,!1)}),l.cfvo.forEach(c=>{this.cfvoXform.render(o,c)}),l.icons&&l.icons.forEach((c,h)=>{c.iconId=h,this.cfIconXform.render(o,c)}),o.closeNode()}createNewModel(o){let{attributes:l}=o;return{cfvo:[],iconSet:i.toStringValue(l.iconSet,"3TrafficLights"),reverse:i.toBoolValue(l.reverse,!1),showValue:i.toBoolValue(l.showValue,!0)}}onParserClose(o,l){let[,c]=o.split(":");switch(c){case"cfvo":this.model.cfvo.push(l.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(l.model);break;default:this.model[c]=l.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(n,t,e){"use strict";let i=n("../../base-xform");t.exports=class extends i{get tag(){return"xm:sqref"}render(r,s){r.leafNode(this.tag,null,s)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],83:[function(n,t,e){"use strict";let i=n("../../base-xform"),r=n("../../composite-xform"),s=n("../../../../doc/range"),a=n("./databar-xform"),o=n("./ext-lst-ref-xform"),l=n("./formula-xform"),c=n("./color-scale-xform"),h=n("./icon-set-xform"),d={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},p=m=>{let{type:_,operator:v}=m;switch(_){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:_};default:return{type:_,operator:v}}};class g extends r{constructor(){super(),this.map={dataBar:this.databarXform=new a,extLst:this.extLstRefXform=new o,formula:this.formulaXform=new l,colorScale:this.colorScaleXform=new c,iconSet:this.iconSetXform=new h}}get tag(){return"cfRule"}static isPrimitive(_){return _.type!=="iconSet"||!_.custom&&!d[_.iconSet]}render(_,v){switch(v.type){case"expression":this.renderExpression(_,v);break;case"cellIs":this.renderCellIs(_,v);break;case"top10":this.renderTop10(_,v);break;case"aboveAverage":this.renderAboveAverage(_,v);break;case"dataBar":this.renderDataBar(_,v);break;case"colorScale":this.renderColorScale(_,v);break;case"iconSet":this.renderIconSet(_,v);break;case"containsText":this.renderText(_,v);break;case"timePeriod":this.renderTimePeriod(_,v)}}renderExpression(_,v){_.openNode(this.tag,{type:"expression",dxfId:v.dxfId,priority:v.priority}),this.formulaXform.render(_,v.formulae[0]),_.closeNode()}renderCellIs(_,v){_.openNode(this.tag,{type:"cellIs",dxfId:v.dxfId,priority:v.priority,operator:v.operator}),v.formulae.forEach(x=>{this.formulaXform.render(_,x)}),_.closeNode()}renderTop10(_,v){_.leafNode(this.tag,{type:"top10",dxfId:v.dxfId,priority:v.priority,percent:i.toBoolAttribute(v.percent,!1),bottom:i.toBoolAttribute(v.bottom,!1),rank:i.toIntValue(v.rank,10,!0)})}renderAboveAverage(_,v){_.leafNode(this.tag,{type:"aboveAverage",dxfId:v.dxfId,priority:v.priority,aboveAverage:i.toBoolAttribute(v.aboveAverage,!0)})}renderDataBar(_,v){_.openNode(this.tag,{type:"dataBar",priority:v.priority}),this.databarXform.render(_,v),this.extLstRefXform.render(_,v),_.closeNode()}renderColorScale(_,v){_.openNode(this.tag,{type:"colorScale",priority:v.priority}),this.colorScaleXform.render(_,v),_.closeNode()}renderIconSet(_,v){g.isPrimitive(v)&&(_.openNode(this.tag,{type:"iconSet",priority:v.priority}),this.iconSetXform.render(_,v),_.closeNode())}renderText(_,v){_.openNode(this.tag,{type:v.operator,dxfId:v.dxfId,priority:v.priority,operator:i.toStringAttribute(v.operator,"containsText")});let x=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];let O=new s(S.ref),{tl:D}=O;switch(S.operator){case"containsText":return`NOT(ISERROR(SEARCH("${S.text}",${D})))`;case"containsBlanks":return`LEN(TRIM(${D}))=0`;case"notContainsBlanks":return`LEN(TRIM(${D}))>0`;case"containsErrors":return`ISERROR(${D})`;case"notContainsErrors":return`NOT(ISERROR(${D}))`;default:return}})(v);x&&this.formulaXform.render(_,x),_.closeNode()}renderTimePeriod(_,v){_.openNode(this.tag,{type:"timePeriod",dxfId:v.dxfId,priority:v.priority,timePeriod:v.timePeriod});let x=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];let O=new s(S.ref),{tl:D}=O;switch(S.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${D},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${D},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${D},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${D},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${D},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${D},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${D},1)=TODAY()-1`;case"today":return`FLOOR(${D},1)=TODAY()`;case"tomorrow":return`FLOOR(${D},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${D},1)<=6,FLOOR(${D},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${D})=MONTH(EDATE(TODAY(),0-1)),YEAR(${D})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${D})=MONTH(TODAY()),YEAR(${D})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${D})=MONTH(EDATE(TODAY(),0+1)),YEAR(${D})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(v);x&&this.formulaXform.render(_,x),_.closeNode()}createNewModel(_){let{attributes:v}=_;return{...p(v),dxfId:i.toIntValue(v.dxfId),priority:i.toIntValue(v.priority),timePeriod:v.timePeriod,percent:i.toBoolValue(v.percent),bottom:i.toBoolValue(v.bottom),rank:i.toIntValue(v.rank),aboveAverage:i.toBoolValue(v.aboveAverage)}}onParserClose(_,v){switch(_){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,v.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(v.model)}}}t.exports=g},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(n,t,e){"use strict";let i=n("../../base-xform");t.exports=class extends i{get tag(){return"cfvo"}render(r,s){r.leafNode(this.tag,{type:s.type,val:s.value})}parseOpen(r){this.model={type:r.attributes.type,value:i.toFloatValue(r.attributes.val)}}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],85:[function(n,t,e){"use strict";let i=n("../../composite-xform"),r=n("../../style/color-xform"),s=n("./cfvo-xform");t.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new s,color:this.colorXform=new r}}get tag(){return"colorScale"}render(a,o){a.openNode(this.tag),o.cfvo.forEach(l=>{this.cfvoXform.render(a,l)}),o.color.forEach(l=>{this.colorXform.render(a,l)}),a.closeNode()}createNewModel(a){return{cfvo:[],color:[]}}onParserClose(a,o){this.model[a].push(o.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(n,t,e){"use strict";let i=n("../../composite-xform"),r=n("./cf-rule-xform");t.exports=class extends i{constructor(){super(),this.map={cfRule:new r}}get tag(){return"conditionalFormatting"}render(s,a){a.rules.some(r.isPrimitive)&&(s.openNode(this.tag,{sqref:a.ref}),a.rules.forEach(o=>{r.isPrimitive(o)&&(o.ref=a.ref,this.map.cfRule.render(s,o))}),s.closeNode())}createNewModel(s){let{attributes:a}=s;return{ref:a.sqref,rules:[]}}onParserClose(s,a){this.model.rules.push(a.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(n,t,e){"use strict";let i=n("../../base-xform"),r=n("./conditional-formatting-xform");t.exports=class extends i{constructor(){super(),this.cfXform=new r}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(s,a){let o=s.reduce((l,c)=>Math.max(l,...c.rules.map(h=>h.priority||0)),1);s.forEach(l=>{l.rules.forEach(c=>{c.priority||(c.priority=o++),c.style&&(c.dxfId=a.styles.addDxfStyle(c.style))})})}render(s,a){a.forEach(o=>{this.cfXform.render(s,o)})}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(s),!0;default:return!1}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){return!!this.parser&&(!!this.parser.parseClose(s)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(s,a){s.forEach(o=>{o.rules.forEach(l=>{l.dxfId!==void 0&&(l.style=a.styles.getDxfStyle(l.dxfId),delete l.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(n,t,e){"use strict";let i=n("../../composite-xform"),r=n("../../style/color-xform"),s=n("./cfvo-xform");t.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new s,color:this.colorXform=new r}}get tag(){return"dataBar"}render(a,o){a.openNode(this.tag),o.cfvo.forEach(l=>{this.cfvoXform.render(a,l)}),this.colorXform.render(a,o.color),a.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(a,o){switch(a){case"cfvo":this.model.cfvo.push(o.model);break;case"color":this.model.color=o.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(n,t,e){"use strict";let i=n("../../base-xform"),r=n("../../composite-xform");class s extends i{get tag(){return"x14:id"}render(l,c){l.leafNode(this.tag,null,c)}parseOpen(){this.model=""}parseText(l){this.model+=l}parseClose(l){return l!==this.tag}}class a extends r{constructor(){super(),this.map={"x14:id":this.idXform=new s}}get tag(){return"ext"}render(l,c){l.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(l,c.x14Id),l.closeNode()}createNewModel(){return{}}onParserClose(l,c){this.model.x14Id=c.model}}t.exports=class extends r{constructor(){super(),this.map={ext:new a}}get tag(){return"extLst"}render(o,l){o.openNode(this.tag),this.map.ext.render(o,l),o.closeNode()}createNewModel(){return{}}onParserClose(o,l){Object.assign(this.model,l.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(n,t,e){"use strict";let i=n("../../base-xform");t.exports=class extends i{get tag(){return"formula"}render(r,s){r.leafNode(this.tag,null,s)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],91:[function(n,t,e){"use strict";let i=n("../../base-xform"),r=n("../../composite-xform"),s=n("./cfvo-xform");t.exports=class extends r{constructor(){super(),this.map={cfvo:this.cfvoXform=new s}}get tag(){return"iconSet"}render(a,o){a.openNode(this.tag,{iconSet:i.toStringAttribute(o.iconSet,"3TrafficLights"),reverse:i.toBoolAttribute(o.reverse,!1),showValue:i.toBoolAttribute(o.showValue,!0)}),o.cfvo.forEach(l=>{this.cfvoXform.render(a,l)}),a.closeNode()}createNewModel(a){let{attributes:o}=a;return{iconSet:i.toStringValue(o.iconSet,"3TrafficLights"),reverse:i.toBoolValue(o.reverse),showValue:i.toBoolValue(o.showValue),cfvo:[]}}onParserClose(a,o){this.model[a].push(o.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(n,t,e){"use strict";let i=n("../../../utils/utils"),r=n("../base-xform");t.exports=class extends r{get tag(){return"col"}prepare(s,a){let o=a.styles.addStyleModel(s.style||{});o&&(s.styleId=o)}render(s,a){s.openNode("col"),s.addAttribute("min",a.min),s.addAttribute("max",a.max),a.width&&s.addAttribute("width",a.width),a.styleId&&s.addAttribute("style",a.styleId),a.hidden&&s.addAttribute("hidden","1"),a.bestFit&&s.addAttribute("bestFit","1"),a.outlineLevel&&s.addAttribute("outlineLevel",a.outlineLevel),a.collapsed&&s.addAttribute("collapsed","1"),s.addAttribute("customWidth","1"),s.closeNode()}parseOpen(s){if(s.name==="col"){let a=this.model={min:parseInt(s.attributes.min||"0",10),max:parseInt(s.attributes.max||"0",10),width:s.attributes.width===void 0?void 0:parseFloat(s.attributes.width||"0")};return s.attributes.style&&(a.styleId=parseInt(s.attributes.style,10)),i.parseBoolean(s.attributes.hidden)&&(a.hidden=!0),i.parseBoolean(s.attributes.bestFit)&&(a.bestFit=!0),s.attributes.outlineLevel&&(a.outlineLevel=parseInt(s.attributes.outlineLevel,10)),i.parseBoolean(s.attributes.collapsed)&&(a.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(s,a){s.styleId&&(s.style=a.styles.getStyleModel(s.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../../../utils/utils"),s=n("../../../utils/col-cache"),a=n("../base-xform"),o=n("../../../doc/range");function l(h,d,p,g){let m=d[p];m!==void 0?h[p]=m:g!==void 0&&(h[p]=g)}function c(h,d,p,g){let m=d[p];m!==void 0?h[p]=r.parseBoolean(m):g!==void 0&&(h[p]=g)}t.exports=class extends a{get tag(){return"dataValidations"}render(h,d){let p=function(g){let m=i.map(g,(x,S)=>({address:S,dataValidation:x,marked:!1})).sort((x,S)=>i.strcmp(x.address,S.address)),_=i.keyBy(m,"address"),v=(x,S,O)=>{for(let D=0;D<S;D++){let U=s.encodeAddress(x.row+D,O);if(!g[U]||!i.isEqual(g[x.address],g[U]))return!1}return!0};return m.map(x=>{if(!x.marked){let S=s.decodeEx(x.address);if(S.dimensions)return _[S.dimensions].marked=!0,{...x.dataValidation,sqref:x.address};let O=1,D=s.encodeAddress(S.row+O,S.col);for(;g[D]&&i.isEqual(x.dataValidation,g[D]);)O++,D=s.encodeAddress(S.row+O,S.col);let U=1;for(;v(S,O,S.col+U);)U++;for(let z=0;z<O;z++)for(let V=0;V<U;V++)D=s.encodeAddress(S.row+z,S.col+V),_[D].marked=!0;if(O>1||U>1){let z=S.row+(O-1),V=S.col+(U-1);return{...x.dataValidation,sqref:`${x.address}:${s.encodeAddress(z,V)}`}}return{...x.dataValidation,sqref:x.address}}return null}).filter(Boolean)}(d);p.length&&(h.openNode("dataValidations",{count:p.length}),p.forEach(g=>{h.openNode("dataValidation"),g.type!=="any"&&(h.addAttribute("type",g.type),g.operator&&g.type!=="list"&&g.operator!=="between"&&h.addAttribute("operator",g.operator),g.allowBlank&&h.addAttribute("allowBlank","1")),g.showInputMessage&&h.addAttribute("showInputMessage","1"),g.promptTitle&&h.addAttribute("promptTitle",g.promptTitle),g.prompt&&h.addAttribute("prompt",g.prompt),g.showErrorMessage&&h.addAttribute("showErrorMessage","1"),g.errorStyle&&h.addAttribute("errorStyle",g.errorStyle),g.errorTitle&&h.addAttribute("errorTitle",g.errorTitle),g.error&&h.addAttribute("error",g.error),h.addAttribute("sqref",g.sqref),(g.formulae||[]).forEach((m,_)=>{h.openNode("formula"+(_+1)),g.type==="date"?h.writeText(r.dateToExcel(new Date(m))):h.writeText(m),h.closeNode()}),h.closeNode()}),h.closeNode())}parseOpen(h){switch(h.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=h.attributes.sqref;let d={type:h.attributes.type||"any",formulae:[]};switch(h.attributes.type&&c(d,h.attributes,"allowBlank"),c(d,h.attributes,"showInputMessage"),c(d,h.attributes,"showErrorMessage"),d.type){case"any":case"list":case"custom":break;default:l(d,h.attributes,"operator","between")}return l(d,h.attributes,"promptTitle"),l(d,h.attributes,"prompt"),l(d,h.attributes,"errorStyle"),l(d,h.attributes,"errorTitle"),l(d,h.attributes,"error"),this._dataValidation=d,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(h){this._formula&&this._formula.push(h)}parseClose(h){switch(h){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(d=>{d.includes(":")?new o(d).forEachAddress(p=>{this.model[p]=this._dataValidation}):this.model[d]=this._dataValidation}),!0;case"formula1":case"formula2":{let d=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":d=parseInt(d,10);break;case"decimal":d=parseFloat(d);break;case"date":d=r.excelToDate(parseFloat(d))}return this._dataValidation.formulae.push(d),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"dimension"}render(r,s){s&&r.leafNode("dimension",{ref:s})}parseOpen(r){return r.name==="dimension"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"drawing"}render(r,s){s&&r.leafNode(this.tag,{"r:id":s.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(n,t,e){"use strict";let i=n("../composite-xform"),r=n("./cf-ext/conditional-formattings-ext-xform");class s extends i{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new r}}get tag(){return"ext"}hasContent(o){return this.conditionalFormattings.hasContent(o.conditionalFormattings)}prepare(o,l){this.conditionalFormattings.prepare(o.conditionalFormattings,l)}render(o,l){o.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(o,l.conditionalFormattings),o.closeNode()}createNewModel(){return{}}onParserClose(o,l){this.model[o]=l.model}}t.exports=class extends i{constructor(){super(),this.map={ext:this.ext=new s}}get tag(){return"extLst"}prepare(a,o){this.ext.prepare(a,o)}hasContent(a){return this.ext.hasContent(a)}render(a,o){this.hasContent(o)&&(a.openNode("extLst"),this.ext.render(a,o),a.closeNode())}createNewModel(){return{}}onParserClose(a,o){Object.assign(this.model,o.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"headerFooter"}render(r,s){if(s){r.addRollback();let a=!1;r.openNode("headerFooter"),s.differentFirst&&(r.addAttribute("differentFirst","1"),a=!0),s.differentOddEven&&(r.addAttribute("differentOddEven","1"),a=!0),s.oddHeader&&typeof s.oddHeader=="string"&&(r.leafNode("oddHeader",null,s.oddHeader),a=!0),s.oddFooter&&typeof s.oddFooter=="string"&&(r.leafNode("oddFooter",null,s.oddFooter),a=!0),s.evenHeader&&typeof s.evenHeader=="string"&&(r.leafNode("evenHeader",null,s.evenHeader),a=!0),s.evenFooter&&typeof s.evenFooter=="string"&&(r.leafNode("evenFooter",null,s.evenFooter),a=!0),s.firstHeader&&typeof s.firstHeader=="string"&&(r.leafNode("firstHeader",null,s.firstHeader),a=!0),s.firstFooter&&typeof s.firstFooter=="string"&&(r.leafNode("firstFooter",null,s.firstFooter),a=!0),a?(r.closeNode(),r.commit()):r.rollback()}}parseOpen(r){switch(r.name){case"headerFooter":return this.model={},r.attributes.differentFirst&&(this.model.differentFirst=parseInt(r.attributes.differentFirst,0)===1),r.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(r.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(r){switch(this.currentNode){case"oddHeader":this.model.oddHeader=r;break;case"oddFooter":this.model.oddFooter=r;break;case"evenHeader":this.model.evenHeader=r;break;case"evenFooter":this.model.evenFooter=r;break;case"firstHeader":this.model.firstHeader=r;break;case"firstFooter":this.model.firstFooter=r}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"hyperlink"}render(r,s){this.isInternalLink(s)?r.leafNode("hyperlink",{ref:s.address,"r:id":s.rId,tooltip:s.tooltip,location:s.target}):r.leafNode("hyperlink",{ref:s.address,"r:id":s.rId,tooltip:s.tooltip})}parseOpen(r){return r.name==="hyperlink"&&(this.model={address:r.attributes.ref,rId:r.attributes["r:id"],tooltip:r.attributes.tooltip},r.attributes.location&&(this.model.target=r.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(r){return r.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(r.target)}}},{"../base-xform":32}],99:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"mergeCell"}render(r,s){r.leafNode("mergeCell",{ref:s})}parseOpen(r){return r.name==="mergeCell"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../../../doc/range"),s=n("../../../utils/col-cache"),a=n("../../../doc/enums");t.exports=class{constructor(){this.merges={}}add(o){if(this.merges[o.master])this.merges[o.master].expandToAddress(o.address);else{let l=`${o.master}:${o.address}`;this.merges[o.master]=new r(l)}}get mergeCells(){return i.map(this.merges,o=>o.range)}reconcile(o,l){i.each(o,c=>{let h=s.decode(c);for(let d=h.top;d<=h.bottom;d++){let p=l[d-1];for(let g=h.left;g<=h.right;g++){let m=p.cells[g-1];m?m.type===a.ValueType.Merge&&(m.master=h.tl):p.cells[g]={type:a.ValueType.Null,address:s.encodeAddress(d,g)}}}})}getMasterAddress(o){let l=this.hash[o];return l&&l.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(n,t,e){"use strict";let i=n("../base-xform"),r=s=>s!==void 0;t.exports=class extends i{get tag(){return"outlinePr"}render(s,a){return!(!a||!r(a.summaryBelow)&&!r(a.summaryRight))&&(s.leafNode(this.tag,{summaryBelow:r(a.summaryBelow)?Number(a.summaryBelow):void 0,summaryRight:r(a.summaryRight)?Number(a.summaryRight):void 0}),!0)}parseOpen(s){return s.name===this.tag&&(this.model={summaryBelow:r(s.attributes.summaryBelow)?!!Number(s.attributes.summaryBelow):void 0,summaryRight:r(s.attributes.summaryRight)?!!Number(s.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"brk"}render(r,s){r.leafNode("brk",s)}parseOpen(r){return r.name==="brk"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../base-xform");t.exports=class extends r{get tag(){return"pageMargins"}render(s,a){if(a){let o={left:a.left,right:a.right,top:a.top,bottom:a.bottom,header:a.header,footer:a.footer};i.some(o,l=>l!==void 0)&&s.leafNode(this.tag,o)}}parseOpen(s){switch(s.name){case this.tag:return this.model={left:parseFloat(s.attributes.left||.7),right:parseFloat(s.attributes.right||.7),top:parseFloat(s.attributes.top||.75),bottom:parseFloat(s.attributes.bottom||.75),header:parseFloat(s.attributes.header||.3),footer:parseFloat(s.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"pageSetUpPr"}render(r,s){return!(!s||!s.fitToPage)&&(r.leafNode(this.tag,{fitToPage:s.fitToPage?"1":void 0}),!0)}parseOpen(r){return r.name===this.tag&&(this.model={fitToPage:r.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../base-xform");function s(c){return c?"1":void 0}function a(c){switch(c){case"overThenDown":return c;default:return}}function o(c){switch(c){case"atEnd":case"asDisplyed":return c;default:return}}function l(c){switch(c){case"dash":case"blank":case"NA":return c;default:return}}t.exports=class extends r{get tag(){return"pageSetup"}render(c,h){if(h){let d={paperSize:h.paperSize,orientation:h.orientation,horizontalDpi:h.horizontalDpi,verticalDpi:h.verticalDpi,pageOrder:a(h.pageOrder),blackAndWhite:s(h.blackAndWhite),draft:s(h.draft),cellComments:o(h.cellComments),errors:l(h.errors),scale:h.scale,fitToWidth:h.fitToWidth,fitToHeight:h.fitToHeight,firstPageNumber:h.firstPageNumber,useFirstPageNumber:s(h.firstPageNumber),usePrinterDefaults:s(h.usePrinterDefaults),copies:h.copies};i.some(d,p=>p!==void 0)&&c.leafNode(this.tag,d)}}parseOpen(c){switch(c.name){case this.tag:return this.model={paperSize:(h=c.attributes.paperSize,h!==void 0?parseInt(h,10):void 0),orientation:c.attributes.orientation||"portrait",horizontalDpi:parseInt(c.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(c.attributes.verticalDpi||"4294967295",10),pageOrder:c.attributes.pageOrder||"downThenOver",blackAndWhite:c.attributes.blackAndWhite==="1",draft:c.attributes.draft==="1",cellComments:c.attributes.cellComments||"None",errors:c.attributes.errors||"displayed",scale:parseInt(c.attributes.scale||"100",10),fitToWidth:parseInt(c.attributes.fitToWidth||"1",10),fitToHeight:parseInt(c.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(c.attributes.firstPageNumber||"1",10),useFirstPageNumber:c.attributes.useFirstPageNumber==="1",usePrinterDefaults:c.attributes.usePrinterDefaults==="1",copies:parseInt(c.attributes.copies||"1",10)},!0;default:return!1}var h}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"picture"}render(r,s){s&&r.leafNode(this.tag,{"r:id":s.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../base-xform");function s(a){return a?"1":void 0}t.exports=class extends r{get tag(){return"printOptions"}render(a,o){if(o){let l={headings:s(o.showRowColHeaders),gridLines:s(o.showGridLines),horizontalCentered:s(o.horizontalCentered),verticalCentered:s(o.verticalCentered)};i.some(l,c=>c!==void 0)&&a.leafNode(this.tag,l)}}parseOpen(a){switch(a.name){case this.tag:return this.model={showRowColHeaders:a.attributes.headings==="1",showGridLines:a.attributes.gridLines==="1",horizontalCentered:a.attributes.horizontalCentered==="1",verticalCentered:a.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(n,t,e){"use strict";let i=n("./page-breaks-xform"),r=n("../list-xform");t.exports=class extends r{constructor(){super({tag:"rowBreaks",count:!0,childXform:new i})}render(s,a){if(a&&a.length){s.openNode(this.tag,this.$),this.count&&(s.addAttribute(this.$count,a.length),s.addAttribute("manualBreakCount",a.length));let{childXform:o}=this;a.forEach(l=>{o.render(s,l)}),s.closeNode()}else this.empty&&s.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("../../../utils/utils"),s=n("./cell-xform");t.exports=class extends i{constructor(a){super(),this.maxItems=a&&a.maxItems,this.map={c:new s}}get tag(){return"row"}prepare(a,o){let l=o.styles.addStyleModel(a.style);l&&(a.styleId=l);let c=this.map.c;a.cells.forEach(h=>{c.prepare(h,o)})}render(a,o,l){a.openNode("row"),a.addAttribute("r",o.number),o.height&&(a.addAttribute("ht",o.height),a.addAttribute("customHeight","1")),o.hidden&&a.addAttribute("hidden","1"),o.min>0&&o.max>0&&o.min<=o.max&&a.addAttribute("spans",`${o.min}:${o.max}`),o.styleId&&(a.addAttribute("s",o.styleId),a.addAttribute("customFormat","1")),a.addAttribute("x14ac:dyDescent","0.25"),o.outlineLevel&&a.addAttribute("outlineLevel",o.outlineLevel),o.collapsed&&a.addAttribute("collapsed","1");let c=this.map.c;o.cells.forEach(h=>{c.render(a,h,l)}),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;if(a.name==="row"){this.numRowsSeen+=1;let o=a.attributes.spans?a.attributes.spans.split(":").map(c=>parseInt(c,10)):[void 0,void 0],l=this.model={number:parseInt(a.attributes.r,10),min:o[0],max:o[1],cells:[]};return a.attributes.s&&(l.styleId=parseInt(a.attributes.s,10)),r.parseBoolean(a.attributes.hidden)&&(l.hidden=!0),r.parseBoolean(a.attributes.bestFit)&&(l.bestFit=!0),a.attributes.ht&&(l.height=parseFloat(a.attributes.ht)),a.attributes.outlineLevel&&(l.outlineLevel=parseInt(a.attributes.outlineLevel,10)),r.parseBoolean(a.attributes.collapsed)&&(l.collapsed=!0),!0}return this.parser=this.map[a.name],!!this.parser&&(this.parser.parseOpen(a),!0)}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser){if(!this.parser.parseClose(a)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(a,o){a.style=a.styleId?o.styles.getStyleModel(a.styleId):{},a.styleId!==void 0&&(a.styleId=void 0);let l=this.map.c;a.cells.forEach(c=>{l.reconcile(c,o)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../base-xform");t.exports=class extends r{get tag(){return"sheetFormatPr"}render(s,a){if(a){let o={defaultRowHeight:a.defaultRowHeight,outlineLevelRow:a.outlineLevelRow,outlineLevelCol:a.outlineLevelCol,"x14ac:dyDescent":a.dyDescent};a.defaultColWidth&&(o.defaultColWidth=a.defaultColWidth),a.defaultRowHeight&&a.defaultRowHeight===15||(o.customHeight="1"),i.some(o,l=>l!==void 0)&&s.leafNode("sheetFormatPr",o)}}parseOpen(s){return s.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(s.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(s.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(s.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(s.attributes.outlineLevelCol||"0",10)},s.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(s.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("../style/color-xform"),s=n("./page-setup-properties-xform"),a=n("./outline-properties-xform");t.exports=class extends i{constructor(){super(),this.map={tabColor:new r("tabColor"),pageSetUpPr:new s,outlinePr:new a}}get tag(){return"sheetPr"}render(o,l){if(l){o.addRollback(),o.openNode("sheetPr");let c=!1;c=this.map.tabColor.render(o,l.tabColor)||c,c=this.map.pageSetUpPr.render(o,l.pageSetup)||c,c=this.map.outlinePr.render(o,l.outlineProperties)||c,c?(o.closeNode(),o.commit()):o.rollback()}}parseOpen(o){return this.parser?(this.parser.parseOpen(o),!0):o.name===this.tag?(this.reset(),!0):!!this.map[o.name]&&(this.parser=this.map[o.name],this.parser.parseOpen(o),!0)}parseText(o){return!!this.parser&&(this.parser.parseText(o),!0)}parseClose(o){return this.parser?(this.parser.parseClose(o)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../base-xform");function s(o,l){return o?l:void 0}function a(o,l){return o===l||void 0}t.exports=class extends r{get tag(){return"sheetProtection"}render(o,l){if(l){let c={sheet:s(l.sheet,"1"),selectLockedCells:l.selectLockedCells===!1?"1":void 0,selectUnlockedCells:l.selectUnlockedCells===!1?"1":void 0,formatCells:s(l.formatCells,"0"),formatColumns:s(l.formatColumns,"0"),formatRows:s(l.formatRows,"0"),insertColumns:s(l.insertColumns,"0"),insertRows:s(l.insertRows,"0"),insertHyperlinks:s(l.insertHyperlinks,"0"),deleteColumns:s(l.deleteColumns,"0"),deleteRows:s(l.deleteRows,"0"),sort:s(l.sort,"0"),autoFilter:s(l.autoFilter,"0"),pivotTables:s(l.pivotTables,"0")};l.sheet&&(c.algorithmName=l.algorithmName,c.hashValue=l.hashValue,c.saltValue=l.saltValue,c.spinCount=l.spinCount,c.objects=s(l.objects===!1,"1"),c.scenarios=s(l.scenarios===!1,"1")),i.some(c,h=>h!==void 0)&&o.leafNode(this.tag,c)}}parseOpen(o){switch(o.name){case this.tag:return this.model={sheet:a(o.attributes.sheet,"1"),objects:o.attributes.objects!=="1"&&void 0,scenarios:o.attributes.scenarios!=="1"&&void 0,selectLockedCells:o.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:o.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:a(o.attributes.formatCells,"0"),formatColumns:a(o.attributes.formatColumns,"0"),formatRows:a(o.attributes.formatRows,"0"),insertColumns:a(o.attributes.insertColumns,"0"),insertRows:a(o.attributes.insertRows,"0"),insertHyperlinks:a(o.attributes.insertHyperlinks,"0"),deleteColumns:a(o.attributes.deleteColumns,"0"),deleteRows:a(o.attributes.deleteRows,"0"),sort:a(o.attributes.sort,"0"),autoFilter:a(o.attributes.autoFilter,"0"),pivotTables:a(o.attributes.pivotTables,"0")},o.attributes.algorithmName&&(this.model.algorithmName=o.attributes.algorithmName,this.model.hashValue=o.attributes.hashValue,this.model.saltValue=o.attributes.saltValue,this.model.spinCount=parseInt(o.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(n,t,e){"use strict";let i=n("../../../utils/col-cache"),r=n("../base-xform"),s={frozen:"frozen",frozenSplit:"frozen",split:"split"};t.exports=class extends r{get tag(){return"sheetView"}prepare(a){switch(a.state){case"frozen":case"split":break;default:a.state="normal"}}render(a,o){a.openNode("sheetView",{workbookViewId:o.workbookViewId||0});let l=function(g,m,_){_&&a.addAttribute(g,m)},c,h,d,p;switch(l("rightToLeft","1",o.rightToLeft===!0),l("tabSelected","1",o.tabSelected),l("showRuler","0",o.showRuler===!1),l("showRowColHeaders","0",o.showRowColHeaders===!1),l("showGridLines","0",o.showGridLines===!1),l("zoomScale",o.zoomScale,o.zoomScale),l("zoomScaleNormal",o.zoomScaleNormal,o.zoomScaleNormal),l("view",o.style,o.style),o.state){case"frozen":h=o.xSplit||0,d=o.ySplit||0,c=o.topLeftCell||i.getAddress(d+1,h+1).address,p=(o.xSplit&&o.ySplit?"bottomRight":o.xSplit&&"topRight")||"bottomLeft",a.leafNode("pane",{xSplit:o.xSplit||void 0,ySplit:o.ySplit||void 0,topLeftCell:c,activePane:p,state:"frozen"}),a.leafNode("selection",{pane:p,activeCell:o.activeCell,sqref:o.activeCell});break;case"split":o.activePane==="topLeft"&&(o.activePane=void 0),a.leafNode("pane",{xSplit:o.xSplit||void 0,ySplit:o.ySplit||void 0,topLeftCell:o.topLeftCell,activePane:o.activePane}),a.leafNode("selection",{pane:o.activePane,activeCell:o.activeCell,sqref:o.activeCell});break;case"normal":o.activeCell&&a.leafNode("selection",{activeCell:o.activeCell,sqref:o.activeCell})}a.closeNode()}parseOpen(a){switch(a.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(a.attributes.workbookViewId,10),rightToLeft:a.attributes.rightToLeft==="1",tabSelected:a.attributes.tabSelected==="1",showRuler:a.attributes.showRuler!=="0",showRowColHeaders:a.attributes.showRowColHeaders!=="0",showGridLines:a.attributes.showGridLines!=="0",zoomScale:parseInt(a.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(a.attributes.zoomScaleNormal||"100",10),style:a.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(a.attributes.xSplit||"0",10),ySplit:parseInt(a.attributes.ySplit||"0",10),topLeftCell:a.attributes.topLeftCell,activePane:a.attributes.activePane||"topLeft",state:a.attributes.state},!0;case"selection":{let o=a.attributes.pane||"topLeft";return this.selections[o]={pane:o,activeCell:a.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(a){let o,l;switch(a){case"sheetView":return this.sheetView&&this.pane?(o=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:s[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(o.activePane=this.pane.activePane),l=this.selections[this.pane.activePane],l&&l.activeCell&&(o.activeCell=l.activeCell),this.sheetView.style&&(o.style=this.sheetView.style)):(o=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},l=this.selections.topLeft,l&&l.activeCell&&(o.activeCell=l.activeCell),this.sheetView.style&&(o.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"tablePart"}render(r,s){s&&r.leafNode(this.tag,{"r:id":s.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../../../utils/col-cache"),s=n("../../../utils/xml-stream"),a=n("../../rel-type"),o=n("./merges"),l=n("../base-xform"),c=n("../list-xform"),h=n("./row-xform"),d=n("./col-xform"),p=n("./dimension-xform"),g=n("./hyperlink-xform"),m=n("./merge-cell-xform"),_=n("./data-validations-xform"),v=n("./sheet-properties-xform"),x=n("./sheet-format-properties-xform"),S=n("./sheet-view-xform"),O=n("./sheet-protection-xform"),D=n("./page-margins-xform"),U=n("./page-setup-xform"),z=n("./print-options-xform"),V=n("./auto-filter-xform"),G=n("./picture-xform"),tt=n("./drawing-xform"),K=n("./table-part-xform"),B=n("./row-breaks-xform"),N=n("./header-footer-xform"),Z=n("./cf/conditional-formattings-xform"),w=n("./ext-lst-xform"),C=(T,R)=>{if(!R||!R.length)return T;if(!T||!T.length)return R;let F={},H={};return T.forEach(it=>{F[it.ref]=it,it.rules.forEach(ot=>{let{x14Id:dt}=ot;dt&&(H[dt]=ot)})}),R.forEach(it=>{it.rules.forEach(ot=>{let dt=H[ot.x14Id];dt?(($,ct)=>{Object.keys(ct).forEach(W=>{let q=$[W],rt=ct[W];q===void 0&&rt!==void 0&&($[W]=rt)})})(dt,ot):F[it.ref]?F[it.ref].rules.push(ot):T.push({ref:it.ref,rules:[ot]})})}),T};class k extends l{constructor(R){super();let{maxRows:F,maxCols:H,ignoreNodes:it}=R||{};this.ignoreNodes=it||[],this.map={sheetPr:new v,dimension:new p,sheetViews:new c({tag:"sheetViews",count:!1,childXform:new S}),sheetFormatPr:new x,cols:new c({tag:"cols",count:!1,childXform:new d}),sheetData:new c({tag:"sheetData",count:!1,empty:!0,childXform:new h({maxItems:H}),maxItems:F}),autoFilter:new V,mergeCells:new c({tag:"mergeCells",count:!0,childXform:new m}),rowBreaks:new B,hyperlinks:new c({tag:"hyperlinks",count:!1,childXform:new g}),pageMargins:new D,dataValidations:new _,pageSetup:new U,headerFooter:new N,printOptions:new z,picture:new G,drawing:new tt,sheetProtection:new O,tableParts:new c({tag:"tableParts",count:!0,childXform:new K}),conditionalFormatting:new Z,extLst:new w}}prepare(R,F){F.merges=new o,R.hyperlinks=F.hyperlinks=[],R.comments=F.comments=[],F.formulae={},F.siFormulae=0,this.map.cols.prepare(R.cols,F),this.map.sheetData.prepare(R.rows,F),this.map.conditionalFormatting.prepare(R.conditionalFormattings,F),R.mergeCells=F.merges.mergeCells;let H=R.rels=[];function it($){return"rId"+($.length+1)}if(R.hyperlinks.forEach($=>{let ct=it(H);$.rId=ct,H.push({Id:ct,Type:a.Hyperlink,Target:$.target,TargetMode:"External"})}),R.comments.length>0){let $={Id:it(H),Type:a.Comments,Target:`../comments${R.id}.xml`};H.push($);let ct={Id:it(H),Type:a.VmlDrawing,Target:`../drawings/vmlDrawing${R.id}.vml`};H.push(ct),R.comments.forEach(W=>{W.refAddress=r.decodeAddress(W.ref)}),F.commentRefs.push({commentName:"comments"+R.id,vmlDrawing:"vmlDrawing"+R.id})}let ot=[],dt;R.media.forEach($=>{if($.type==="background"){let ct=it(H);dt=F.media[$.imageId],H.push({Id:ct,Type:a.Image,Target:`../media/${dt.name}.${dt.extension}`}),R.background={rId:ct},R.image=F.media[$.imageId]}else if($.type==="image"){let{drawing:ct}=R;dt=F.media[$.imageId],ct||(ct=R.drawing={rId:it(H),name:"drawing"+ ++F.drawingsCount,anchors:[],rels:[]},F.drawings.push(ct),H.push({Id:ct.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${ct.name}.xml`}));let W=this.preImageId===$.imageId?ot[$.imageId]:ot[ct.rels.length];W||(W=it(ct.rels),ot[ct.rels.length]=W,ct.rels.push({Id:W,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${dt.name}.${dt.extension}`}));let q={picture:{rId:W},range:$.range};if($.hyperlinks&&$.hyperlinks.hyperlink){let rt=it(ct.rels);ot[ct.rels.length]=rt,q.picture.hyperlinks={tooltip:$.hyperlinks.tooltip,rId:rt},ct.rels.push({Id:rt,Type:a.Hyperlink,Target:$.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=$.imageId,ct.anchors.push(q)}}),R.tables.forEach($=>{let ct=it(H);$.rId=ct,H.push({Id:ct,Type:a.Table,Target:"../tables/"+$.target}),$.columns.forEach(W=>{let{style:q}=W;q&&(W.dxfId=F.styles.addDxfStyle(q))})}),this.map.extLst.prepare(R,F)}render(R,F){R.openXml(s.StdDocAttributes),R.openNode("worksheet",k.WORKSHEET_ATTRIBUTES);let H=F.properties?{defaultRowHeight:F.properties.defaultRowHeight,dyDescent:F.properties.dyDescent,outlineLevelCol:F.properties.outlineLevelCol,outlineLevelRow:F.properties.outlineLevelRow}:void 0;F.properties&&F.properties.defaultColWidth&&(H.defaultColWidth=F.properties.defaultColWidth);let it={outlineProperties:F.properties&&F.properties.outlineProperties,tabColor:F.properties&&F.properties.tabColor,pageSetup:F.pageSetup&&F.pageSetup.fitToPage?{fitToPage:F.pageSetup.fitToPage}:void 0},ot=F.pageSetup&&F.pageSetup.margins,dt={showRowColHeaders:F.pageSetup&&F.pageSetup.showRowColHeaders,showGridLines:F.pageSetup&&F.pageSetup.showGridLines,horizontalCentered:F.pageSetup&&F.pageSetup.horizontalCentered,verticalCentered:F.pageSetup&&F.pageSetup.verticalCentered},$=F.sheetProtection;this.map.sheetPr.render(R,it),this.map.dimension.render(R,F.dimensions),this.map.sheetViews.render(R,F.views),this.map.sheetFormatPr.render(R,H),this.map.cols.render(R,F.cols),this.map.sheetData.render(R,F.rows),this.map.sheetProtection.render(R,$),this.map.autoFilter.render(R,F.autoFilter),this.map.mergeCells.render(R,F.mergeCells),this.map.conditionalFormatting.render(R,F.conditionalFormattings),this.map.dataValidations.render(R,F.dataValidations),this.map.hyperlinks.render(R,F.hyperlinks),this.map.printOptions.render(R,dt),this.map.pageMargins.render(R,ot),this.map.pageSetup.render(R,F.pageSetup),this.map.headerFooter.render(R,F.headerFooter),this.map.rowBreaks.render(R,F.rowBreaks),this.map.drawing.render(R,F.drawing),this.map.picture.render(R,F.background),this.map.tableParts.render(R,F.tables),this.map.extLst.render(R,F),F.rels&&F.rels.forEach(ct=>{ct.Type===a.VmlDrawing&&R.leafNode("legacyDrawing",{"r:id":ct.Id})}),R.closeNode()}parseOpen(R){return this.parser?(this.parser.parseOpen(R),!0):R.name==="worksheet"?(i.each(this.map,F=>{F.reset()}),!0):(this.map[R.name]&&!this.ignoreNodes.includes(R.name)&&(this.parser=this.map[R.name],this.parser.parseOpen(R)),!0)}parseText(R){this.parser&&this.parser.parseText(R)}parseClose(R){if(this.parser)return this.parser.parseClose(R)||(this.parser=void 0),!0;switch(R){case"worksheet":{let F=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(F.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(F.outlineProperties=this.map.sheetPr.model.outlineProperties);let H={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},it=Object.assign(H,this.map.pageSetup.model,this.map.printOptions.model),ot=C(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:F,views:this.map.sheetViews.model,pageSetup:it,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:ot},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(R,F){let H=(R.relationships||[]).reduce((ot,dt)=>{if(ot[dt.Id]=dt,dt.Type===a.Comments&&(R.comments=F.comments[dt.Target].comments),dt.Type===a.VmlDrawing&&R.comments&&R.comments.length){let $=F.vmlDrawings[dt.Target].comments;R.comments.forEach((ct,W)=>{ct.note=Object.assign({},ct.note,$[W])})}return ot},{});if(F.commentsMap=(R.comments||[]).reduce((ot,dt)=>(dt.ref&&(ot[dt.ref]=dt),ot),{}),F.hyperlinkMap=(R.hyperlinks||[]).reduce((ot,dt)=>(dt.rId&&(ot[dt.address]=H[dt.rId].Target),ot),{}),F.formulae={},R.rows=R.rows&&R.rows.filter(Boolean)||[],R.rows.forEach(ot=>{ot.cells=ot.cells&&ot.cells.filter(Boolean)||[]}),this.map.cols.reconcile(R.cols,F),this.map.sheetData.reconcile(R.rows,F),this.map.conditionalFormatting.reconcile(R.conditionalFormattings,F),R.media=[],R.drawing){let ot=H[R.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(ot){let dt=ot[1];F.drawings[dt].anchors.forEach($=>{if($.medium){let ct={type:"image",imageId:$.medium.index,range:$.range,hyperlinks:$.picture.hyperlinks};R.media.push(ct)}})}}let it=R.background&&H[R.background.rId];if(it){let ot=it.Target.split("/media/")[1],dt=F.mediaIndex&&F.mediaIndex[ot];dt!==void 0&&R.media.push({type:"background",imageId:dt})}R.tables=(R.tables||[]).map(ot=>{let dt=H[ot.rId];return F.tables[dt.Target]}),delete R.relationships,delete R.hyperlinks,delete R.comments}}k.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},t.exports=k},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.attr=r.attr}render(r,s){s&&(r.openNode(this.tag),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs,this._format=r.format||function(s){try{return Number.isNaN(s.getTime())?"":s.toISOString()}catch{return""}},this._parse=r.parse||function(s){return new Date(s)}}render(r,s){s&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,this._format(s)):r.writeText(this._format(s)),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.attr?this.model=this._parse(r.attributes[this.attr]):this.text=[])}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs,this.zero=r.zero}render(r,s){(s||this.zero)&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,s):r.writeText(s),r.closeNode())}parseOpen(r){return r.name===this.tag&&(this.attr?this.model=parseInt(r.attributes[this.attr],10):this.text=[],!0)}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs}render(r,s){s!==void 0&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,s):r.writeText(s),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.attr?this.model=r.attributes[this.attr]:this.text=[])}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(n,t,e){"use strict";let i=n("./base-xform"),r=n("../../utils/xml-stream");t.exports=class extends i{constructor(s){super(),this._model=s}render(s){if(!this._xml){let a=new r;(function o(l,c){l.openNode(c.tag,c.$),c.c&&c.c.forEach(h=>{o(l,h)}),c.t&&l.writeText(c.t),l.closeNode()})(a,this._model),this._xml=a.xml}s.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(s){switch(s){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(n,t,e){"use strict";let i=n("./text-xform"),r=n("./rich-text-xform"),s=n("../base-xform");t.exports=class extends s{constructor(){super(),this.map={r:new r,t:new i}}get tag(){return"rPh"}render(a,o){if(a.openNode(this.tag,{sb:o.sb||0,eb:o.eb||0}),o&&o.hasOwnProperty("richText")&&o.richText){let{r:l}=this.map;o.richText.forEach(c=>{l.render(a,c)})}else o&&this.map.t.render(a,o.text);a.closeNode()}parseOpen(a){let{name:o}=a;return this.parser?(this.parser.parseOpen(a),!0):o===this.tag?(this.model={sb:parseInt(a.attributes.sb,10),eb:parseInt(a.attributes.eb,10)},!0):(this.parser=this.map[o],!!this.parser&&(this.parser.parseOpen(a),!0))}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser){if(!this.parser.parseClose(a)){switch(a){case"r":{let o=this.model.richText;o||(o=this.model.richText=[]),o.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(n,t,e){"use strict";let i=n("./text-xform"),r=n("../style/font-xform"),s=n("../base-xform");class a extends s{constructor(l){super(),this.model=l}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new i)}get fontXform(){return this._fontXform||(this._fontXform=new r(a.FONT_OPTIONS))}render(l,c){c=c||this.model,l.openNode("r"),c.font&&this.fontXform.render(l,c.font),this.textXform.render(l,c.text),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(l),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){switch(l){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(l),!0}}}a.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},t.exports=a},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(n,t,e){"use strict";let i=n("./text-xform"),r=n("./rich-text-xform"),s=n("./phonetic-text-xform"),a=n("../base-xform");t.exports=class extends a{constructor(o){super(),this.model=o,this.map={r:new r,t:new i,rPh:new s}}get tag(){return"si"}render(o,l){o.openNode(this.tag),l&&l.hasOwnProperty("richText")&&l.richText?l.richText.length?l.richText.forEach(c=>{this.map.r.render(o,c)}):this.map.t.render(o,""):l!=null&&this.map.t.render(o,l),o.closeNode()}parseOpen(o){let{name:l}=o;return this.parser?(this.parser.parseOpen(o),!0):l===this.tag?(this.model={},!0):(this.parser=this.map[l],!!this.parser&&(this.parser.parseOpen(o),!0))}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser){if(!this.parser.parseClose(o)){switch(o){case"r":{let l=this.model.richText;l||(l=this.model.richText=[]),l.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(n,t,e){"use strict";let i=n("../../../utils/xml-stream"),r=n("../base-xform"),s=n("./shared-string-xform");t.exports=class extends r{constructor(a){super(),this.model=a||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new s)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(a){return this.model.values[a]}add(a){return a.richText?this.addRichText(a):this.addText(a)}addText(a){let o=this.hash[a];return o===void 0&&(o=this.hash[a]=this.model.values.length,this.model.values.push(a)),this.model.count++,o}addRichText(a){let o=this.sharedStringXform.toXml(a),l=this.rich[o];return l===void 0&&(l=this.rich[o]=this.model.values.length,this.model.values.push(a)),this.model.count++,l}render(a,o){o=o||this._values,a.openXml(i.StdDocAttributes),a.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:o.count,uniqueCount:o.values.length});let l=this.sharedStringXform;o.values.forEach(c=>{l.render(a,c)}),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(a),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(a){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+a)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"t"}render(r,s){r.openNode("t"),/^\s|\n|\s$/.test(s)&&r.addAttribute("xml:space","preserve"),r.writeText(s),r.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(r,s)=>String.fromCharCode(parseInt(s,16)))}parseOpen(r){switch(r.name){case"t":return this._text=[],!0;default:return!1}}parseText(r){this._text.push(r)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(n,t,e){"use strict";let i=n("../../../doc/enums"),r=n("../../../utils/utils"),s=n("../base-xform"),a={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((l,c)=>(l[c]=!0,l),{}),horizontal(l){return this.horizontalValues[l]?l:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((l,c)=>(l[c]=!0,l),{}),vertical(l){return l==="middle"?"center":this.verticalValues[l]?l:void 0},wrapText:l=>!!l||void 0,shrinkToFit:l=>!!l||void 0,textRotation(l){switch(l){case"vertical":return l;default:return(l=r.validInt(l))>=-90&&l<=90?l:void 0}},indent:l=>(l=r.validInt(l),Math.max(0,l)),readingOrder(l){switch(l){case"ltr":return i.ReadingOrder.LeftToRight;case"rtl":return i.ReadingOrder.RightToLeft;default:return}}},o={toXml(l){if(l=a.textRotation(l)){if(l==="vertical")return 255;let c=Math.round(l);if(c>=0&&c<=90)return c;if(c<0&&c>=-90)return 90-c}},toModel(l){let c=r.validInt(l);if(c!==void 0){if(c===255)return"vertical";if(c>=0&&c<=90)return c;if(c>90&&c<=180)return 90-c}}};t.exports=class extends s{get tag(){return"alignment"}render(l,c){l.addRollback(),l.openNode("alignment");let h=!1;function d(p,g){g&&(l.addAttribute(p,g),h=!0)}d("horizontal",a.horizontal(c.horizontal)),d("vertical",a.vertical(c.vertical)),d("wrapText",!!a.wrapText(c.wrapText)&&"1"),d("shrinkToFit",!!a.shrinkToFit(c.shrinkToFit)&&"1"),d("indent",a.indent(c.indent)),d("textRotation",o.toXml(c.textRotation)),d("readingOrder",a.readingOrder(c.readingOrder)),l.closeNode(),h?l.commit():l.rollback()}parseOpen(l){let c={},h=!1;function d(p,g,m){p&&(c[g]=m,h=!0)}d(l.attributes.horizontal,"horizontal",l.attributes.horizontal),d(l.attributes.vertical,"vertical",l.attributes.vertical==="center"?"middle":l.attributes.vertical),d(l.attributes.wrapText,"wrapText",r.parseBoolean(l.attributes.wrapText)),d(l.attributes.shrinkToFit,"shrinkToFit",r.parseBoolean(l.attributes.shrinkToFit)),d(l.attributes.indent,"indent",parseInt(l.attributes.indent,10)),d(l.attributes.textRotation,"textRotation",o.toModel(l.attributes.textRotation)),d(l.attributes.readingOrder,"readingOrder",l.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=h?c:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("../../../utils/utils"),s=n("./color-xform");class a extends i{constructor(l){super(),this.name=l,this.map={color:new s}}get tag(){return this.name}render(l,c,h){let d=c&&c.color||h||this.defaultColor;l.openNode(this.name),c&&c.style&&(l.addAttribute("style",c.style),d&&this.map.color.render(l,d)),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.name:{let{style:c}=l.attributes;return this.model=c?{style:c}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return this.parser?(this.parser.parseClose(l)||(this.parser=void 0),!0):(l===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(l){return a.validStyleValues[l]}}a.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((o,l)=>(o[l]=!0,o),{}),t.exports=class extends i{constructor(){super(),this.map={top:new a("top"),left:new a("left"),bottom:new a("bottom"),right:new a("right"),diagonal:new a("diagonal")}}render(o,l){let{color:c}=l;function h(d,p){d&&!d.color&&l.color&&(d={...d,color:l.color}),p.render(o,d,c)}o.openNode("border"),l.diagonal&&l.diagonal.style&&(l.diagonal.up&&o.addAttribute("diagonalUp","1"),l.diagonal.down&&o.addAttribute("diagonalDown","1")),h(l.left,this.map.left),h(l.right,this.map.right),h(l.top,this.map.top),h(l.bottom,this.map.bottom),h(l.diagonal,this.map.diagonal),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case"border":return this.reset(),this.diagonalUp=r.parseBoolean(o.attributes.diagonalUp),this.diagonalDown=r.parseBoolean(o.attributes.diagonalDown),!0;default:return this.parser=this.map[o.name],!!this.parser&&(this.parser.parseOpen(o),!0)}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;if(o==="border"){let l=this.model={},c=function(h,d,p){d&&(p&&Object.assign(d,p),l[h]=d)};c("left",this.map.left.model),c("right",this.map.right.model),c("top",this.map.top.model),c("bottom",this.map.bottom.model),c("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{constructor(r){super(),this.name=r||"color"}get tag(){return this.name}render(r,s){return!!s&&(r.openNode(this.name),s.argb?r.addAttribute("rgb",s.argb):s.theme!==void 0?(r.addAttribute("theme",s.theme),s.tint!==void 0&&r.addAttribute("tint",s.tint)):s.indexed!==void 0?r.addAttribute("indexed",s.indexed):r.addAttribute("auto","1"),r.closeNode(),!0)}parseOpen(r){return r.name===this.name&&(r.attributes.rgb?this.model={argb:r.attributes.rgb}:r.attributes.theme?(this.model={theme:parseInt(r.attributes.theme,10)},r.attributes.tint&&(this.model.tint=parseFloat(r.attributes.tint))):r.attributes.indexed?this.model={indexed:parseInt(r.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("./alignment-xform"),s=n("./border-xform"),a=n("./fill-xform"),o=n("./font-xform"),l=n("./numfmt-xform"),c=n("./protection-xform");t.exports=class extends i{constructor(){super(),this.map={alignment:new r,border:new s,fill:new a,font:new o,numFmt:new l,protection:new c}}get tag(){return"dxf"}render(h,d){if(h.openNode(this.tag),d.font&&this.map.font.render(h,d.font),d.numFmt&&d.numFmtId){let p={id:d.numFmtId,formatCode:d.numFmt};this.map.numFmt.render(h,p)}d.fill&&this.map.fill.render(h,d.fill),d.alignment&&this.map.alignment.render(h,d.alignment),d.border&&this.map.border.render(h,d.border),d.protection&&this.map.protection.render(h,d.protection),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h),!0}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return this.parser?(this.parser.parseClose(h)||(this.parser=void 0),!0):h!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("./color-xform");class s extends i{constructor(){super(),this.map={color:new r}}get tag(){return"stop"}render(h,d){h.openNode("stop"),h.addAttribute("position",d.position),this.map.color.render(h,d.color),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"stop":return this.model={position:parseFloat(h.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(h),!0;default:return!1}}parseText(){}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class a extends i{constructor(){super(),this.map={fgColor:new r("fgColor"),bgColor:new r("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(h,d){h.openNode("patternFill"),h.addAttribute("patternType",d.pattern),d.fgColor&&this.map.fgColor.render(h,d.fgColor),d.bgColor&&this.map.bgColor.render(h,d.bgColor),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"patternFill":return this.model={type:"pattern",pattern:h.attributes.patternType},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.parser.model&&(this.model[h]=this.parser.model),this.parser=void 0),!0)}}class o extends i{constructor(){super(),this.map={stop:new s}}get name(){return"gradient"}get tag(){return"gradientFill"}render(h,d){switch(h.openNode("gradientFill"),d.gradient){case"angle":h.addAttribute("degree",d.degree);break;case"path":h.addAttribute("type","path"),d.center.left&&(h.addAttribute("left",d.center.left),d.center.right===void 0&&h.addAttribute("right",d.center.left)),d.center.right&&h.addAttribute("right",d.center.right),d.center.top&&(h.addAttribute("top",d.center.top),d.center.bottom===void 0&&h.addAttribute("bottom",d.center.top)),d.center.bottom&&h.addAttribute("bottom",d.center.bottom)}let p=this.map.stop;d.stops.forEach(g=>{p.render(h,g)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"gradientFill":{let d=this.model={stops:[]};return h.attributes.degree?(d.gradient="angle",d.degree=parseInt(h.attributes.degree,10)):h.attributes.type==="path"&&(d.gradient="path",d.center={left:h.attributes.left?parseFloat(h.attributes.left):0,top:h.attributes.top?parseFloat(h.attributes.top):0},h.attributes.right!==h.attributes.left&&(d.center.right=h.attributes.right?parseFloat(h.attributes.right):0),h.attributes.bottom!==h.attributes.top&&(d.center.bottom=h.attributes.bottom?parseFloat(h.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(h),!0;default:return!1}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class l extends i{constructor(){super(),this.map={patternFill:new a,gradientFill:new o}}get tag(){return"fill"}render(h,d){switch(h.addRollback(),h.openNode("fill"),d.type){case"pattern":this.map.patternFill.render(h,d);break;case"gradient":this.map.gradientFill.render(h,d);break;default:return void h.rollback()}h.closeNode(),h.commit()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"fill":return this.model={},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(h){return l.validPatternValues[h]}}l.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((c,h)=>(c[h]=!0,c),{}),l.StopXform=s,l.PatternFillXform=a,l.GradientFillXform=o,t.exports=l},{"../base-xform":32,"./color-xform":128}],131:[function(n,t,e){"use strict";let i=n("./color-xform"),r=n("../simple/boolean-xform"),s=n("../simple/integer-xform"),a=n("../simple/string-xform"),o=n("./underline-xform"),l=n("../../../utils/under-dash"),c=n("../base-xform");class h extends c{constructor(p){super(),this.options=p||h.OPTIONS,this.map={b:{prop:"bold",xform:new r({tag:"b",attr:"val"})},i:{prop:"italic",xform:new r({tag:"i",attr:"val"})},u:{prop:"underline",xform:new o},charset:{prop:"charset",xform:new s({tag:"charset",attr:"val"})},color:{prop:"color",xform:new i},condense:{prop:"condense",xform:new r({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new r({tag:"extend",attr:"val"})},family:{prop:"family",xform:new s({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new r({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new a({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new a({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new r({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new r({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new s({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new a({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(p,g){let{map:m}=this;p.openNode(this.options.tagName),l.each(this.map,(_,v)=>{m[v].xform.render(p,g[_.prop])}),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;if(this.map[p.name])return this.parser=this.map[p.name].xform,this.parser.parseOpen(p);switch(p.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser&&!this.parser.parseClose(p)){let g=this.map[p];return this.parser.model&&(this.model[g.prop]=this.parser.model),this.parser=void 0,!0}switch(p){case this.options.tagName:return!1;default:return!0}}}h.OPTIONS={tagName:"font",fontNameTag:"name"},t.exports=h},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(n,t,e){"use strict";let i=n("../../../utils/under-dash"),r=n("../../defaultnumformats"),s=n("../base-xform"),a=function(){let l={};return i.each(r,(c,h)=>{c.f&&(l[c.f]=parseInt(h,10))}),l}();class o extends s{constructor(c,h){super(),this.id=c,this.formatCode=h}get tag(){return"numFmt"}render(c,h){c.leafNode("numFmt",{numFmtId:h.id,formatCode:h.formatCode})}parseOpen(c){switch(c.name){case"numFmt":return this.model={id:parseInt(c.attributes.numFmtId,10),formatCode:c.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}o.getDefaultFmtId=function(l){return a[l]},o.getDefaultFmtCode=function(l){return r[l]&&r[l].f},t.exports=o},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(n,t,e){"use strict";let i=n("../base-xform"),r={boolean:(s,a)=>s===void 0?a:s};t.exports=class extends i{get tag(){return"protection"}render(s,a){s.addRollback(),s.openNode("protection");let o=!1;function l(c,h){h!==void 0&&(s.addAttribute(c,h),o=!0)}l("locked",r.boolean(a.locked,!0)?void 0:"0"),l("hidden",r.boolean(a.hidden,!1)?"1":void 0),s.closeNode(),o?s.commit():s.rollback()}parseOpen(s){let a={locked:s.attributes.locked!=="0",hidden:s.attributes.hidden==="1"},o=!a.locked||a.hidden;this.model=o?a:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("./alignment-xform"),s=n("./protection-xform");t.exports=class extends i{constructor(a){super(),this.xfId=!(!a||!a.xfId),this.map={alignment:new r,protection:new s}}get tag(){return"xf"}render(a,o){a.openNode("xf",{numFmtId:o.numFmtId||0,fontId:o.fontId||0,fillId:o.fillId||0,borderId:o.borderId||0}),this.xfId&&a.addAttribute("xfId",o.xfId||0),o.numFmtId&&a.addAttribute("applyNumberFormat","1"),o.fontId&&a.addAttribute("applyFont","1"),o.fillId&&a.addAttribute("applyFill","1"),o.borderId&&a.addAttribute("applyBorder","1"),o.alignment&&a.addAttribute("applyAlignment","1"),o.protection&&a.addAttribute("applyProtection","1"),o.alignment&&this.map.alignment.render(a,o.alignment),o.protection&&this.map.protection.render(a,o.protection),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"xf":return this.model={numFmtId:parseInt(a.attributes.numFmtId,10),fontId:parseInt(a.attributes.fontId,10),fillId:parseInt(a.attributes.fillId,10),borderId:parseInt(a.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(a.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(a),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(a),!0;default:return!1}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){return this.parser?(this.parser.parseClose(a)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):a!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(n,t,e){"use strict";let i=n("../../../doc/enums"),r=n("../../../utils/xml-stream"),s=n("../base-xform"),a=n("../static-xform"),o=n("../list-xform"),l=n("./font-xform"),c=n("./fill-xform"),h=n("./border-xform"),d=n("./numfmt-xform"),p=n("./style-xform"),g=n("./dxf-xform");class m extends s{constructor(v){super(),this.map={numFmts:new o({tag:"numFmts",count:!0,childXform:new d}),fonts:new o({tag:"fonts",count:!0,childXform:new l,$:{"x14ac:knownFonts":1}}),fills:new o({tag:"fills",count:!0,childXform:new c}),borders:new o({tag:"borders",count:!0,childXform:new h}),cellStyleXfs:new o({tag:"cellStyleXfs",count:!0,childXform:new p}),cellXfs:new o({tag:"cellXfs",count:!0,childXform:new p({xfId:!0})}),dxfs:new o({tag:"dxfs",always:!0,count:!0,childXform:new g}),numFmt:new d,font:new l,fill:new c,border:new h,style:new p({xfId:!0}),cellStyles:m.STATIC_XFORMS.cellStyles,tableStyles:m.STATIC_XFORMS.tableStyles,extLst:m.STATIC_XFORMS.extLst},v&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(v,x){x=x||this.model,v.openXml(r.StdDocAttributes),v.openNode("styleSheet",m.STYLESHEET_ATTRIBUTES),this.index?(x.numFmts&&x.numFmts.length&&(v.openNode("numFmts",{count:x.numFmts.length}),x.numFmts.forEach(S=>{v.writeXml(S)}),v.closeNode()),x.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),v.openNode("fonts",{count:x.fonts.length,"x14ac:knownFonts":1}),x.fonts.forEach(S=>{v.writeXml(S)}),v.closeNode(),v.openNode("fills",{count:x.fills.length}),x.fills.forEach(S=>{v.writeXml(S)}),v.closeNode(),v.openNode("borders",{count:x.borders.length}),x.borders.forEach(S=>{v.writeXml(S)}),v.closeNode(),this.map.cellStyleXfs.render(v,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),v.openNode("cellXfs",{count:x.styles.length}),x.styles.forEach(S=>{v.writeXml(S)}),v.closeNode()):(this.map.numFmts.render(v,x.numFmts),this.map.fonts.render(v,x.fonts),this.map.fills.render(v,x.fills),this.map.borders.render(v,x.borders),this.map.cellStyleXfs.render(v,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(v,x.styles)),m.STATIC_XFORMS.cellStyles.render(v),this.map.dxfs.render(v,x.dxfs),m.STATIC_XFORMS.tableStyles.render(v),m.STATIC_XFORMS.extLst.render(v),v.closeNode()}parseOpen(v){if(this.parser)return this.parser.parseOpen(v),!0;switch(v.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[v.name],this.parser&&this.parser.parseOpen(v),!0}}parseText(v){this.parser&&this.parser.parseText(v)}parseClose(v){if(this.parser)return this.parser.parseClose(v)||(this.parser=void 0),!0;switch(v){case"styleSheet":{this.model={};let x=(S,O)=>{O.model&&O.model.length&&(this.model[S]=O.model)};if(x("numFmts",this.map.numFmts),x("fonts",this.map.fonts),x("fills",this.map.fills),x("borders",this.map.borders),x("styles",this.map.cellXfs),x("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){let S=this.index.numFmt;this.model.numFmts.forEach(O=>{S[O.id]=O.formatCode})}return!1}default:return!0}}addStyleModel(v,x){if(!v)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(v))return this.weakMap.get(v);let S={};if(x=x||i.ValueType.Number,v.numFmt)S.numFmtId=this._addNumFmtStr(v.numFmt);else switch(x){case i.ValueType.Number:S.numFmtId=this._addNumFmtStr("General");break;case i.ValueType.Date:S.numFmtId=this._addNumFmtStr("mm-dd-yy")}v.font&&(S.fontId=this._addFont(v.font)),v.border&&(S.borderId=this._addBorder(v.border)),v.fill&&(S.fillId=this._addFill(v.fill)),v.alignment&&(S.alignment=v.alignment),v.protection&&(S.protection=v.protection);let O=this._addStyle(S);return this.weakMap&&this.weakMap.set(v,O),O}getStyleModel(v){let x=this.model.styles[v];if(!x)return null;let S=this.index.model[v];if(S)return S;if(S=this.index.model[v]={},x.numFmtId){let D=this.index.numFmt[x.numFmtId]||d.getDefaultFmtCode(x.numFmtId);D&&(S.numFmt=D)}function O(D,U,z){if(z||z===0){let V=U[z];V&&(S[D]=V)}}return O("font",this.model.fonts,x.fontId),O("border",this.model.borders,x.borderId),O("fill",this.model.fills,x.fillId),x.alignment&&(S.alignment=x.alignment),x.protection&&(S.protection=x.protection),S}addDxfStyle(v){return v.numFmt&&(v.numFmtId=this._addNumFmtStr(v.numFmt)),this.model.dxfs.push(v),this.model.dxfs.length-1}getDxfStyle(v){return this.model.dxfs[v]}_addStyle(v){let x=this.map.style.toXml(v),S=this.index.style[x];return S===void 0&&(S=this.index.style[x]=this.model.styles.length,this.model.styles.push(x)),S}_addNumFmtStr(v){let x=d.getDefaultFmtId(v);if(x!==void 0||(x=this.index.numFmt[v],x!==void 0))return x;x=this.index.numFmt[v]=164+this.model.numFmts.length;let S=this.map.numFmt.toXml({id:x,formatCode:v});return this.model.numFmts.push(S),x}_addFont(v){let x=this.map.font.toXml(v),S=this.index.font[x];return S===void 0&&(S=this.index.font[x]=this.model.fonts.length,this.model.fonts.push(x)),S}_addBorder(v){let x=this.map.border.toXml(v),S=this.index.border[x];return S===void 0&&(S=this.index.border[x]=this.model.borders.length,this.model.borders.push(x)),S}_addFill(v){let x=this.map.fill.toXml(v),S=this.index.fill[x];return S===void 0&&(S=this.index.fill[x]=this.model.fills.length,this.model.fills.push(x)),S}}m.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},m.STATIC_XFORMS={cellStyles:new a({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new a({tag:"dxfs",$:{count:0}}),tableStyles:new a({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new a({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},m.Mock=class extends m{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(_){return _.autodrain(),Promise.resolve()}addStyleModel(_,v){switch(v){case i.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){let _={numFmtId:d.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(_)}return this._dateStyleId}getStyleModel(){return{}}},t.exports=m},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(n,t,e){"use strict";let i=n("../base-xform");class r extends i{constructor(a){super(),this.model=a}get tag(){return"u"}render(a,o){if((o=o||this.model)===!0)a.leafNode("u");else{let l=r.Attributes[o];l&&a.leafNode("u",l)}}parseOpen(a){a.name==="u"&&(this.model=a.attributes.val||!0)}parseText(){}parseClose(){return!1}}r.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},t.exports=r},{"../base-xform":32}],137:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("./filter-column-xform");t.exports=class extends i{constructor(){super(),this.map={filterColumn:new r}}get tag(){return"autoFilter"}prepare(s){s.columns.forEach((a,o)=>{this.map.filterColumn.prepare(a,{index:o})})}render(s,a){return s.openNode(this.tag,{ref:a.autoFilterRef}),a.columns.forEach(o=>{this.map.filterColumn.render(s,o)}),s.closeNode(),!0}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:return this.model={autoFilterRef:s.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[s.name],this.parser)return this.parseOpen(s),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(s))}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(s){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+s)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"customFilter"}render(r,s){r.leafNode(this.tag,{val:s.val,operator:s.operator})}parseOpen(r){return r.name===this.tag&&(this.model={val:r.attributes.val,operator:r.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(n,t,e){"use strict";let i=n("../base-xform"),r=n("../list-xform"),s=n("./custom-filter-xform"),a=n("./filter-xform");t.exports=class extends i{constructor(){super(),this.map={customFilters:new r({tag:"customFilters",count:!1,empty:!0,childXform:new s}),filters:new r({tag:"filters",count:!1,empty:!0,childXform:new a})}}get tag(){return"filterColumn"}prepare(o,l){o.colId=l.index.toString()}render(o,l){return l.customFilters?(o.openNode(this.tag,{colId:l.colId,hiddenButton:l.filterButton?"0":"1"}),this.map.customFilters.render(o,l.customFilters),o.closeNode(),!0):(o.leafNode(this.tag,{colId:l.colId,hiddenButton:l.filterButton?"0":"1"}),!0)}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;let{attributes:l}=o;switch(o.name){case this.tag:return this.model={filterButton:l.hiddenButton==="0"},!0;default:if(this.parser=this.map[o.name],this.parser)return this.parseOpen(o),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(o))}}parseText(){}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"filter"}render(r,s){r.leafNode(this.tag,{val:s.val})}parseOpen(r){return r.name===this.tag&&(this.model={val:r.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"tableColumn"}prepare(r,s){r.id=s.index+1}render(r,s){return r.leafNode(this.tag,{id:s.id.toString(),name:s.name,totalsRowLabel:s.totalsRowLabel,totalsRowFunction:s.totalsRowFunction,dxfId:s.dxfId}),!0}parseOpen(r){if(r.name===this.tag){let{attributes:s}=r;return this.model={name:s.name,totalsRowLabel:s.totalsRowLabel,totalsRowFunction:s.totalsRowFunction,dxfId:s.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(n,t,e){"use strict";let i=n("../base-xform");t.exports=class extends i{get tag(){return"tableStyleInfo"}render(r,s){return r.leafNode(this.tag,{name:s.theme?s.theme:void 0,showFirstColumn:s.showFirstColumn?"1":"0",showLastColumn:s.showLastColumn?"1":"0",showRowStripes:s.showRowStripes?"1":"0",showColumnStripes:s.showColumnStripes?"1":"0"}),!0}parseOpen(r){if(r.name===this.tag){let{attributes:s}=r;return this.model={theme:s.name?s.name:null,showFirstColumn:s.showFirstColumn==="1",showLastColumn:s.showLastColumn==="1",showRowStripes:s.showRowStripes==="1",showColumnStripes:s.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(n,t,e){"use strict";let i=n("../../../utils/xml-stream"),r=n("../base-xform"),s=n("../list-xform"),a=n("./auto-filter-xform"),o=n("./table-column-xform"),l=n("./table-style-info-xform");class c extends r{constructor(){super(),this.map={autoFilter:new a,tableColumns:new s({tag:"tableColumns",count:!0,empty:!0,childXform:new o}),tableStyleInfo:new l}}prepare(d,p){this.map.autoFilter.prepare(d),this.map.tableColumns.prepare(d.columns,p)}get tag(){return"table"}render(d,p){d.openXml(i.StdDocAttributes),d.openNode(this.tag,{...c.TABLE_ATTRIBUTES,id:p.id,name:p.name,displayName:p.displayName||p.name,ref:p.tableRef,totalsRowCount:p.totalsRow?"1":void 0,totalsRowShown:p.totalsRow?void 0:"1",headerRowCount:p.headerRow?"1":"0"}),this.map.autoFilter.render(d,p),this.map.tableColumns.render(d,p.columns),this.map.tableStyleInfo.render(d,p.style),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;let{name:p,attributes:g}=d;switch(p){case this.tag:this.reset(),this.model={name:g.name,displayName:g.displayName||g.name,tableRef:g.ref,totalsRow:g.totalsRowCount==="1",headerRow:g.headerRowCount==="1"};break;default:this.parser=this.map[d.name],this.parser&&this.parser.parseOpen(d)}return!0}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((p,g)=>{this.model.columns[g].filterButton=p.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(d,p){d.columns.forEach(g=>{g.dxfId!==void 0&&(g.style=p.styles.getDxfStyle(g.dxfId))})}}c.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},t.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(n,t,e){(function(i,r){(function(){"use strict";let s=n("fs"),a=n("jszip"),{PassThrough:o}=n("readable-stream"),l=n("../utils/zip-stream"),c=n("../utils/stream-buf"),h=n("../utils/utils"),d=n("../utils/xml-stream"),{bufferToString:p}=n("../utils/browser-buffer-decode"),g=n("./xform/style/styles-xform"),m=n("./xform/core/core-xform"),_=n("./xform/strings/shared-strings-xform"),v=n("./xform/core/relationships-xform"),x=n("./xform/core/content-types-xform"),S=n("./xform/core/app-xform"),O=n("./xform/book/workbook-xform"),D=n("./xform/sheet/worksheet-xform"),U=n("./xform/drawing/drawing-xform"),z=n("./xform/table/table-xform"),V=n("./xform/comment/comments-xform"),G=n("./xform/comment/vml-notes-xform"),tt=n("./xml/theme1");class K{constructor(N){this.workbook=N}async readFile(N,Z){if(!await h.fs.exists(N))throw new Error("File not found: "+N);let w=s.createReadStream(N);try{let C=await this.read(w,Z);return w.close(),C}catch(C){throw w.close(),C}}parseRels(N){return new v().parseStream(N)}parseWorkbook(N){return new O().parseStream(N)}parseSharedStrings(N){return new _().parseStream(N)}reconcile(N,Z){let w=new O,C=new D(Z),k=new U,T=new z;w.reconcile(N);let R={media:N.media,mediaIndex:N.mediaIndex};Object.keys(N.drawings).forEach(it=>{let ot=N.drawings[it],dt=N.drawingRels[it];dt&&(R.rels=dt.reduce(($,ct)=>($[ct.Id]=ct,$),{}),(ot.anchors||[]).forEach($=>{let ct=$.picture&&$.picture.hyperlinks;ct&&R.rels[ct.rId]&&(ct.hyperlink=R.rels[ct.rId].Target,delete ct.rId)}),k.reconcile(ot,R))});let F={styles:N.styles};Object.values(N.tables).forEach(it=>{T.reconcile(it,F)});let H={styles:N.styles,sharedStrings:N.sharedStrings,media:N.media,mediaIndex:N.mediaIndex,date1904:N.properties&&N.properties.date1904,drawings:N.drawings,comments:N.comments,tables:N.tables,vmlDrawings:N.vmlDrawings};N.worksheets.forEach(it=>{it.relationships=N.worksheetRels[it.sheetNo],C.reconcile(it,H)}),delete N.worksheetHash,delete N.worksheetRels,delete N.globalRels,delete N.sharedStrings,delete N.workbookRels,delete N.sheetDefs,delete N.styles,delete N.mediaIndex,delete N.drawings,delete N.drawingRels,delete N.vmlDrawings}async _processWorksheetEntry(N,Z,w,C,k){let T=new D(C),R=await T.parseStream(N);R.sheetNo=w,Z.worksheetHash[k]=R,Z.worksheets.push(R)}async _processCommentEntry(N,Z,w){let C=new V,k=await C.parseStream(N);Z.comments[`../${w}.xml`]=k}async _processTableEntry(N,Z,w){let C=new z,k=await C.parseStream(N);Z.tables[`../tables/${w}.xml`]=k}async _processWorksheetRelsEntry(N,Z,w){let C=new v,k=await C.parseStream(N);Z.worksheetRels[w]=k}async _processMediaEntry(N,Z,w){let C=w.lastIndexOf(".");if(C>=1){let k=w.substr(C+1),T=w.substr(0,C);await new Promise((R,F)=>{let H=new c;H.on("finish",()=>{Z.mediaIndex[w]=Z.media.length,Z.mediaIndex[T]=Z.media.length;let it={type:"image",name:T,extension:k,buffer:H.toBuffer()};Z.media.push(it),R()}),N.on("error",it=>{F(it)}),N.pipe(H)})}}async _processDrawingEntry(N,Z,w){let C=new U,k=await C.parseStream(N);Z.drawings[w]=k}async _processDrawingRelsEntry(N,Z,w){let C=new v,k=await C.parseStream(N);Z.drawingRels[w]=k}async _processVmlDrawingEntry(N,Z,w){let C=new G,k=await C.parseStream(N);Z.vmlDrawings[`../drawings/${w}.vml`]=k}async _processThemeEntry(N,Z,w){await new Promise((C,k)=>{let T=new c;N.on("error",k),T.on("error",k),T.on("finish",()=>{Z.themes[w]=T.read().toString(),C()}),N.pipe(T)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(N,Z){!N[Symbol.asyncIterator]&&N.pipe&&(N=N.pipe(new o));let w=[];for await(let C of N)w.push(C);return this.load(r.concat(w),Z)}async load(N,Z){let w;w=Z&&Z.base64?r.from(N.toString(),"base64"):N;let C={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},k=await a.loadAsync(w);for(let T of Object.values(k.files))if(!T.dir){let R,F=T.name;if(F[0]==="/"&&(F=F.substr(1)),F.match(/xl\/media\//)||F.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))R=new o,R.write(await T.async("nodebuffer"));else{let H;R=new o({writableObjectMode:!0,readableObjectMode:!0}),H=i.browser?p(await T.async("nodebuffer")):await T.async("string");let it=16384;for(let ot=0;ot<H.length;ot+=it)R.write(H.substring(ot,ot+it))}switch(R.end(),F){case"_rels/.rels":C.globalRels=await this.parseRels(R);break;case"xl/workbook.xml":{let H=await this.parseWorkbook(R);C.sheets=H.sheets,C.definedNames=H.definedNames,C.views=H.views,C.properties=H.properties,C.calcProperties=H.calcProperties;break}case"xl/_rels/workbook.xml.rels":C.workbookRels=await this.parseRels(R);break;case"xl/sharedStrings.xml":C.sharedStrings=new _,await C.sharedStrings.parseStream(R);break;case"xl/styles.xml":C.styles=new g,await C.styles.parseStream(R);break;case"docProps/app.xml":{let H=new S,it=await H.parseStream(R);C.company=it.company,C.manager=it.manager;break}case"docProps/core.xml":{let H=new m,it=await H.parseStream(R);Object.assign(C,it);break}default:{let H=F.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(H){await this._processWorksheetEntry(R,C,H[1],Z,F);break}if(H=F.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),H){await this._processWorksheetRelsEntry(R,C,H[1]);break}if(H=F.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),H){await this._processThemeEntry(R,C,H[1]);break}if(H=F.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),H){await this._processMediaEntry(R,C,H[1]);break}if(H=F.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),H){await this._processDrawingEntry(R,C,H[1]);break}if(H=F.match(/xl\/(comments\d+)[.]xml/),H){await this._processCommentEntry(R,C,H[1]);break}if(H=F.match(/xl\/tables\/(table\d+)[.]xml/),H){await this._processTableEntry(R,C,H[1]);break}if(H=F.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),H){await this._processDrawingRelsEntry(R,C,H[1]);break}if(H=F.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),H){await this._processVmlDrawingEntry(R,C,H[1]);break}}}}return this.reconcile(C,Z),this.workbook.model=C,this.workbook}async addMedia(N,Z){await Promise.all(Z.media.map(async w=>{if(w.type==="image"){let C=`xl/media/${w.name}.${w.extension}`;if(w.filename){let k=await function(T,R){return new Promise((F,H)=>{s.readFile(T,R,(it,ot)=>{it?H(it):F(ot)})})}(w.filename);return N.append(k,{name:C})}if(w.buffer)return N.append(w.buffer,{name:C});if(w.base64){let k=w.base64,T=k.substring(k.indexOf(",")+1);return N.append(T,{name:C,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(N,Z){let w=new U,C=new v;Z.worksheets.forEach(k=>{let{drawing:T}=k;if(T){w.prepare(T,{});let R=w.toXml(T);N.append(R,{name:`xl/drawings/${T.name}.xml`}),R=C.toXml(T.rels),N.append(R,{name:`xl/drawings/_rels/${T.name}.xml.rels`})}})}addTables(N,Z){let w=new z;Z.worksheets.forEach(C=>{let{tables:k}=C;k.forEach(T=>{w.prepare(T,{});let R=w.toXml(T);N.append(R,{name:"xl/tables/"+T.target})})})}async addContentTypes(N,Z){let w=new x().toXml(Z);N.append(w,{name:"[Content_Types].xml"})}async addApp(N,Z){let w=new S().toXml(Z);N.append(w,{name:"docProps/app.xml"})}async addCore(N,Z){let w=new m;N.append(w.toXml(Z),{name:"docProps/core.xml"})}async addThemes(N,Z){let w=Z.themes||{theme1:tt};Object.keys(w).forEach(C=>{let k=w[C],T=`xl/theme/${C}.xml`;N.append(k,{name:T})})}async addOfficeRels(N){let Z=new v().toXml([{Id:"rId1",Type:K.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:K.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:K.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);N.append(Z,{name:"_rels/.rels"})}async addWorkbookRels(N,Z){let w=1,C=[{Id:"rId"+w++,Type:K.RelType.Styles,Target:"styles.xml"},{Id:"rId"+w++,Type:K.RelType.Theme,Target:"theme/theme1.xml"}];Z.sharedStrings.count&&C.push({Id:"rId"+w++,Type:K.RelType.SharedStrings,Target:"sharedStrings.xml"}),Z.worksheets.forEach(T=>{T.rId="rId"+w++,C.push({Id:T.rId,Type:K.RelType.Worksheet,Target:`worksheets/sheet${T.id}.xml`})});let k=new v().toXml(C);N.append(k,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(N,Z){Z.sharedStrings&&Z.sharedStrings.count&&N.append(Z.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(N,Z){let{xml:w}=Z.styles;w&&N.append(w,{name:"xl/styles.xml"})}async addWorkbook(N,Z){let w=new O;N.append(w.toXml(Z),{name:"xl/workbook.xml"})}async addWorksheets(N,Z){let w=new D,C=new v,k=new V,T=new G;Z.worksheets.forEach(R=>{let F=new d;w.render(F,R),N.append(F.xml,{name:`xl/worksheets/sheet${R.id}.xml`}),R.rels&&R.rels.length&&(F=new d,C.render(F,R.rels),N.append(F.xml,{name:`xl/worksheets/_rels/sheet${R.id}.xml.rels`})),R.comments.length>0&&(F=new d,k.render(F,R),N.append(F.xml,{name:`xl/comments${R.id}.xml`}),F=new d,T.render(F,R),N.append(F.xml,{name:`xl/drawings/vmlDrawing${R.id}.vml`}))})}_finalize(N){return new Promise((Z,w)=>{N.on("finish",()=>{Z(this)}),N.on("error",w),N.finalize()})}prepareModel(N,Z){N.creator=N.creator||"ExcelJS",N.lastModifiedBy=N.lastModifiedBy||"ExcelJS",N.created=N.created||new Date,N.modified=N.modified||new Date,N.useSharedStrings=Z.useSharedStrings===void 0||Z.useSharedStrings,N.useStyles=Z.useStyles===void 0||Z.useStyles,N.sharedStrings=new _,N.styles=N.useStyles?new g(!0):new g.Mock;let w=new O,C=new D;w.prepare(N);let k={sharedStrings:N.sharedStrings,styles:N.styles,date1904:N.properties.date1904,drawingsCount:0,media:N.media};k.drawings=N.drawings=[],k.commentRefs=N.commentRefs=[];let T=0;N.tables=[],N.worksheets.forEach(R=>{R.tables.forEach(F=>{T++,F.target=`table${T}.xml`,F.id=T,N.tables.push(F)}),C.prepare(R,k)})}async write(N,Z){Z=Z||{};let{model:w}=this.workbook,C=new l.ZipWriter(Z.zip);return C.pipe(N),this.prepareModel(w,Z),await this.addContentTypes(C,w),await this.addOfficeRels(C,w),await this.addWorkbookRels(C,w),await this.addWorksheets(C,w),await this.addSharedStrings(C,w),await this.addDrawings(C,w),await this.addTables(C,w),await Promise.all([this.addThemes(C,w),this.addStyles(C,w)]),await this.addMedia(C,w),await Promise.all([this.addApp(C,w),this.addCore(C,w)]),await this.addWorkbook(C,w),this._finalize(C)}writeFile(N,Z){let w=s.createWriteStream(N);return new Promise((C,k)=>{w.on("finish",()=>{C()}),w.on("error",T=>{k(T)}),this.write(w,Z).then(()=>{w.end()}).catch(T=>{k(T)})})}async writeBuffer(N){let Z=new c;return await this.write(Z,N),Z.read()}}K.RelType=n("./rel-type"),t.exports=K}).call(this)}).call(this,n("_process"),n("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(n,t,e){"use strict";t.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/> <a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/> <a:font script="Hans" typeface="\u5B8B\u4F53"/> <a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/> <a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/> <a:font script="Hans" typeface="\u5B8B\u4F53"/> <a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(n,t,e){(function(i){(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CsvFormatterStream=void 0;let r=n("stream"),s=n("./formatter");class a extends r.Transform{constructor(l){super({writableObjectMode:l.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=l,this.rowFormatter=new s.RowFormatter(l),this.hasWrittenBOM=!l.writeBOM}transform(l){return this.rowFormatter.rowTransform=l,this}_transform(l,c,h){let d=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(l,(p,g)=>p?(d=!0,h(p)):(g&&g.forEach(m=>{this.push(i.from(m,"utf8"))}),d=!0,h()))}catch(p){if(d)throw p;h(p)}}_flush(l){this.rowFormatter.finish((c,h)=>c?l(c):(h&&h.forEach(d=>{this.push(i.from(d,"utf8"))}),l()))}}e.CsvFormatterStream=a}).call(this)}).call(this,n("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormatterOptions=void 0,e.FormatterOptions=class{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,i||{}),i?.quoteHeaders===void 0&&(this.quoteHeaders=this.quoteColumns),i?.quote===!0?this.quote='"':i?.quote===!1&&(this.quote=""),typeof i?.escape!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((r=i.writeHeaders)===null||r===void 0||r),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(n,t,e){"use strict";var i=function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.FieldFormatter=void 0;let r=i(n("lodash.isboolean")),s=i(n("lodash.isnil")),a=i(n("lodash.escaperegexp"));e.FieldFormatter=class{constructor(o){this._headers=null,this.formatterOptions=o,o.headers!==null&&(this.headers=o.headers),this.REPLACE_REGEXP=new RegExp(o.quote,"g");let l=`[${o.delimiter}${a.default(o.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(l)}set headers(o){this._headers=o}shouldQuote(o,l){let c=l?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return r.default(c)?c:Array.isArray(c)?c[o]:this._headers!==null&&c[this._headers[o]]}format(o,l,c){let h=(""+(s.default(o)?"":o)).replace(/\0/g,""),{formatterOptions:d}=this;return d.quote!==""&&h.indexOf(d.quote)!==-1?this.quoteField(h.replace(this.REPLACE_REGEXP,d.escapedQuote)):h.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(l,c)?this.quoteField(h):h}quoteField(o){let{quote:l}=this.formatterOptions;return`${l}${o}${l}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(n,t,e){"use strict";var i=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RowFormatter=void 0;let r=i(n("lodash.isfunction")),s=i(n("lodash.isequal")),a=n("./FieldFormatter"),o=n("../types");class l{constructor(h){this.rowCount=0,this.formatterOptions=h,this.fieldFormatter=new a.FieldFormatter(h),this.headers=h.headers,this.shouldWriteHeaders=h.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),h.transform&&(this.rowTransform=h.transform)}static isRowHashArray(h){return!!Array.isArray(h)&&Array.isArray(h[0])&&h[0].length===2}static isRowArray(h){return Array.isArray(h)&&!this.isRowHashArray(h)}static gatherHeaders(h){return l.isRowHashArray(h)?h.map(d=>d[0]):Array.isArray(h)?h:Object.keys(h)}static createTransform(h){return o.isSyncTransform(h)?(d,p)=>{let g=null;try{g=h(d)}catch(m){return p(m)}return p(null,g)}:(d,p)=>{h(d,p)}}set rowTransform(h){if(!r.default(h))throw new TypeError("The transform should be a function");this._rowTransform=l.createTransform(h)}format(h,d){this.callTransformer(h,(p,g)=>{if(p)return d(p);if(!h)return d(null);let m=[];if(g){let{shouldFormatColumns:_,headers:v}=this.checkHeaders(g);if(this.shouldWriteHeaders&&v&&!this.hasWrittenHeaders&&(m.push(this.formatColumns(v,!0)),this.hasWrittenHeaders=!0),_){let x=this.gatherColumns(g);m.push(this.formatColumns(x,!1))}}return d(null,m)})}finish(h){let d=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return h(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));d.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&d.push(this.formatterOptions.rowDelimiter),h(null,d)}checkHeaders(h){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};let d=l.gatherHeaders(h);return this.headers=d,this.fieldFormatter.headers=d,this.shouldWriteHeaders?{shouldFormatColumns:!s.default(d,h),headers:d}:{shouldFormatColumns:!0,headers:null}}gatherColumns(h){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(h)?l.isRowHashArray(h)?this.headers.map((d,p)=>{let g=h[p];return g?g[1]:""}):l.isRowArray(h)&&!this.shouldWriteHeaders?h:this.headers.map((d,p)=>h[p]):this.headers.map(d=>h[d])}callTransformer(h,d){return this._rowTransform?this._rowTransform(h,d):d(null,h)}formatColumns(h,d){let p=h.map((m,_)=>this.fieldFormatter.format(m,_,d)).join(this.formatterOptions.delimiter),{rowCount:g}=this;return this.rowCount+=1,g?[this.formatterOptions.rowDelimiter,p].join(""):p}}e.RowFormatter=l},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FieldFormatter=e.RowFormatter=void 0;var i=n("./RowFormatter");Object.defineProperty(e,"RowFormatter",{enumerable:!0,get:function(){return i.RowFormatter}});var r=n("./FieldFormatter");Object.defineProperty(e,"FieldFormatter",{enumerable:!0,get:function(){return r.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(n,t,e){(function(i){(function(){"use strict";var r=Object.create?function(_,v,x,S){S===void 0&&(S=x),Object.defineProperty(_,S,{enumerable:!0,get:function(){return v[x]}})}:function(_,v,x,S){S===void 0&&(S=x),_[S]=v[x]},s=Object.create?function(_,v){Object.defineProperty(_,"default",{enumerable:!0,value:v})}:function(_,v){_.default=v},a=function(_){if(_&&_.__esModule)return _;var v={};if(_!=null)for(var x in _)x!=="default"&&Object.prototype.hasOwnProperty.call(_,x)&&r(v,_,x);return s(v,_),v},o=function(_,v){for(var x in _)x==="default"||Object.prototype.hasOwnProperty.call(v,x)||r(v,_,x)};Object.defineProperty(e,"__esModule",{value:!0}),e.writeToPath=e.writeToString=e.writeToBuffer=e.writeToStream=e.write=e.format=e.FormatterOptions=e.CsvFormatterStream=void 0;let l=n("util"),c=n("stream"),h=a(n("fs")),d=n("./FormatterOptions"),p=n("./CsvFormatterStream");o(n("./types"),e);var g=n("./CsvFormatterStream");Object.defineProperty(e,"CsvFormatterStream",{enumerable:!0,get:function(){return g.CsvFormatterStream}});var m=n("./FormatterOptions");Object.defineProperty(e,"FormatterOptions",{enumerable:!0,get:function(){return m.FormatterOptions}}),e.format=_=>new p.CsvFormatterStream(new d.FormatterOptions(_)),e.write=(_,v)=>{let x=e.format(v),S=l.promisify((O,D)=>{x.write(O,void 0,D)});return _.reduce((O,D)=>O.then(()=>S(D)),Promise.resolve()).then(()=>x.end()).catch(O=>{x.emit("error",O)}),x},e.writeToStream=(_,v,x)=>e.write(v,x).pipe(_),e.writeToBuffer=function(_){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=[],S=new c.Writable({write(O,D,U){x.push(O),U()}});return new Promise((O,D)=>{S.on("error",D).on("finish",()=>O(i.concat(x))),e.write(_,v).pipe(S)})},e.writeToString=(_,v)=>e.writeToBuffer(_,v).then(x=>x.toString()),e.writeToPath=(_,v,x)=>{let S=h.createWriteStream(_,{encoding:"utf8"});return e.write(v,x).pipe(S)}}).call(this)}).call(this,n("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSyncTransform=void 0,e.isSyncTransform=i=>i.length===1},{}],153:[function(n,t,e){(function(i){(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CsvParserStream=void 0;let r=n("string_decoder"),s=n("stream"),a=n("./transforms"),o=n("./parser");class l extends s.Transform{constructor(h){super({objectMode:h.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=h,this.parser=new o.Parser(h),this.headerTransformer=new a.HeaderTransformer(h),this.decoder=new r.StringDecoder(h.encoding),this.rowTransformerValidator=new a.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(h){return this.rowTransformerValidator.rowTransform=h,this}validate(h){return this.rowTransformerValidator.rowValidator=h,this}emit(h){if(h==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var d=arguments.length,p=new Array(d>1?d-1:0),g=1;g<d;g++)p[g-1]=arguments[g];return super.emit(h,...p)}_transform(h,d,p){if(this.hasHitRowLimit)return p();let g=l.wrapDoneCallback(p);try{let{lines:m}=this,_=m+this.decoder.write(h),v=this.parse(_,!0);return this.processRows(v,g)}catch(m){return g(m)}}_flush(h){let d=l.wrapDoneCallback(h);if(this.hasHitRowLimit)return d();try{let p=this.lines+this.decoder.end(),g=this.parse(p,!1);return this.processRows(g,d)}catch(p){return d(p)}}parse(h,d){if(!h)return[];let{line:p,rows:g}=this.parser.parse(h,d);return this.lines=p,g}processRows(h,d){let p=h.length,g=m=>{let _=S=>S?d(S):m%100!=0?g(m+1):void i(()=>g(m+1));if(this.checkAndEmitHeaders(),m>=p||this.hasHitRowLimit)return d();if(this.parsedLineCount+=1,this.shouldSkipLine)return _();let v=h[m];this.rowCount+=1,this.parsedRowCount+=1;let x=this.rowCount;return this.transformRow(v,(S,O)=>{if(S)return this.rowCount-=1,_(S);if(!O)return _(new Error("expected transform result"));if(O.isValid){if(O.row)return this.pushRow(O.row,_)}else this.emit("data-invalid",O.row,x,O.reason);return _()})};g(0)}transformRow(h,d){try{this.headerTransformer.transform(h,(p,g)=>p?d(p):g?g.isValid?g.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(g.row,d):this.skipRow(d):(this.rowCount-=1,this.parsedRowCount-=1,d(null,{row:null,isValid:!0})):this.shouldEmitRows?d(null,{isValid:!1,row:h}):this.skipRow(d):d(new Error("Expected result from header transform")))}catch(p){d(p)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(h){return this.rowCount-=1,h(null,{row:null,isValid:!0})}pushRow(h,d){try{this.parserOptions.objectMode?this.push(h):this.push(JSON.stringify(h)),d()}catch(p){d(p)}}static wrapDoneCallback(h){let d=!1;return function(p){if(p){if(d)throw p;return d=!0,void h(p)}for(var g=arguments.length,m=new Array(g>1?g-1:0),_=1;_<g;_++)m[_-1]=arguments[_];h(...m)}}}e.CsvParserStream=l}).call(this)}).call(this,n("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(n,t,e){"use strict";var i=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.ParserOptions=void 0;let r=i(n("lodash.escaperegexp")),s=i(n("lodash.isnil"));e.ParserOptions=class{constructor(a){var o;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,a||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=r.default(this.delimiter),this.escapeChar=(o=this.escape)!==null&&o!==void 0?o:this.quote,this.supportsComments=!s.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(n,t,e){"use strict";var i=Object.create?function(g,m,_,v){v===void 0&&(v=_),Object.defineProperty(g,v,{enumerable:!0,get:function(){return m[_]}})}:function(g,m,_,v){v===void 0&&(v=_),g[v]=m[_]},r=Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m},s=function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var _ in g)_!=="default"&&Object.prototype.hasOwnProperty.call(g,_)&&i(m,g,_);return r(m,g),m},a=function(g,m){for(var _ in g)_==="default"||Object.prototype.hasOwnProperty.call(m,_)||i(m,g,_)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseString=e.parseFile=e.parseStream=e.parse=e.ParserOptions=e.CsvParserStream=void 0;let o=s(n("fs")),l=n("stream"),c=n("./ParserOptions"),h=n("./CsvParserStream");a(n("./types"),e);var d=n("./CsvParserStream");Object.defineProperty(e,"CsvParserStream",{enumerable:!0,get:function(){return d.CsvParserStream}});var p=n("./ParserOptions");Object.defineProperty(e,"ParserOptions",{enumerable:!0,get:function(){return p.ParserOptions}}),e.parse=g=>new h.CsvParserStream(new c.ParserOptions(g)),e.parseStream=(g,m)=>g.pipe(new h.CsvParserStream(new c.ParserOptions(m))),e.parseFile=function(g){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.createReadStream(g).pipe(new h.CsvParserStream(new c.ParserOptions(m)))},e.parseString=(g,m)=>{let _=new l.Readable;return _.push(g),_.push(null),_.pipe(new h.CsvParserStream(new c.ParserOptions(m)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;let i=n("./Scanner"),r=n("./RowParser"),s=n("./Token");class a{constructor(l){this.parserOptions=l,this.rowParser=new r.RowParser(this.parserOptions)}static removeBOM(l){return l&&l.charCodeAt(0)===65279?l.slice(1):l}parse(l,c){let h=new i.Scanner({line:a.removeBOM(l),parserOptions:this.parserOptions,hasMoreData:c});return this.parserOptions.supportsComments?this.parseWithComments(h):this.parseWithoutComments(h)}parseWithoutComments(l){let c=[],h=!0;for(;h;)h=this.parseRow(l,c);return{line:l.line,rows:c}}parseWithComments(l){let{parserOptions:c}=this,h=[];for(let d=l.nextCharacterToken;d!==null;d=l.nextCharacterToken)if(s.Token.isTokenComment(d,c)){if(l.advancePastLine()===null)return{line:l.lineFromCursor,rows:h};if(!l.hasMoreCharacters)return{line:l.lineFromCursor,rows:h};l.truncateToCursor()}else if(!this.parseRow(l,h))break;return{line:l.line,rows:h}}parseRow(l,c){if(!l.nextNonSpaceToken)return!1;let h=this.rowParser.parse(l);return h!==null&&(this.parserOptions.ignoreEmpty&&r.RowParser.isEmptyRow(h)||c.push(h),!0)}}e.Parser=a},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RowParser=void 0;let i=n("./column"),r=n("./Token");e.RowParser=class{constructor(s){this.parserOptions=s,this.columnParser=new i.ColumnParser(s)}static isEmptyRow(s){return s.join("").replace(/\s+/g,"")===""}parse(s){let{parserOptions:a}=this,{hasMoreData:o}=s,l=s,c=[],h=this.getStartToken(l,c);for(;h;){if(r.Token.isTokenRowDelimiter(h))return l.advancePastToken(h),!l.hasMoreCharacters&&r.Token.isTokenCarriageReturn(h,a)&&o?null:(l.truncateToCursor(),c);if(!this.shouldSkipColumnParse(l,h,c)){let d=this.columnParser.parse(l);if(d===null)return null;c.push(d)}h=l.nextNonSpaceToken}return o?null:(l.truncateToCursor(),c)}getStartToken(s,a){let o=s.nextNonSpaceToken;return o!==null&&r.Token.isTokenDelimiter(o,this.parserOptions)?(a.push(""),s.nextNonSpaceToken):o}shouldSkipColumnParse(s,a,o){let{parserOptions:l}=this;if(r.Token.isTokenDelimiter(a,l)){s.advancePastToken(a);let c=s.nextCharacterToken;if(!s.hasMoreCharacters||c!==null&&r.Token.isTokenRowDelimiter(c)||c!==null&&r.Token.isTokenDelimiter(c,l))return o.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scanner=void 0;let i=n("./Token"),r=/((?:\r\n)|\n|\r)/;e.Scanner=class{constructor(s){this.cursor=0,this.line=s.line,this.lineLength=this.line.length,this.parserOptions=s.parserOptions,this.hasMoreData=s.hasMoreData,this.cursor=s.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){let{lineFromCursor:s}=this,a=this.parserOptions.NEXT_TOKEN_REGEXP;if(s.search(a)===-1)return null;let o=a.exec(s);if(o==null)return null;let l=o[1],c=this.cursor+(o.index||0);return new i.Token({token:l,startCursor:c,endCursor:c+l.length-1})}get nextCharacterToken(){let{cursor:s,lineLength:a}=this;return a<=s?null:new i.Token({token:this.line[s],startCursor:s,endCursor:s})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){let s=r.exec(this.lineFromCursor);return s?(this.cursor+=(s.index||0)+s[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(s){return this.cursor=s,this}advanceToToken(s){return this.cursor=s.startCursor,this}advancePastToken(s){return this.cursor=s.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Token=void 0,e.Token=class{constructor(i){this.token=i.token,this.startCursor=i.startCursor,this.endCursor=i.endCursor}static isTokenRowDelimiter(i){let r=i.token;return r==="\r"||r===`
`||r===`\r
`}static isTokenCarriageReturn(i,r){return i.token===r.carriageReturn}static isTokenComment(i,r){return r.supportsComments&&!!i&&i.token===r.comment}static isTokenEscapeCharacter(i,r){return i.token===r.escapeChar}static isTokenQuote(i,r){return i.token===r.quote}static isTokenDelimiter(i,r){return i.token===r.delimiter}}},{}],160:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnFormatter=void 0,e.ColumnFormatter=class{constructor(i){i.trim?this.format=r=>r.trim():i.ltrim?this.format=r=>r.trimLeft():i.rtrim?this.format=r=>r.trimRight():this.format=r=>r}}},{}],161:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnParser=void 0;let i=n("./NonQuotedColumnParser"),r=n("./QuotedColumnParser"),s=n("../Token");e.ColumnParser=class{constructor(a){this.parserOptions=a,this.quotedColumnParser=new r.QuotedColumnParser(a),this.nonQuotedColumnParser=new i.NonQuotedColumnParser(a)}parse(a){let{nextNonSpaceToken:o}=a;return o!==null&&s.Token.isTokenQuote(o,this.parserOptions)?(a.advanceToToken(o),this.quotedColumnParser.parse(a)):this.nonQuotedColumnParser.parse(a)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonQuotedColumnParser=void 0;let i=n("./ColumnFormatter"),r=n("../Token");e.NonQuotedColumnParser=class{constructor(s){this.parserOptions=s,this.columnFormatter=new i.ColumnFormatter(s)}parse(s){if(!s.hasMoreCharacters)return null;let{parserOptions:a}=this,o=[],l=s.nextCharacterToken;for(;l&&!r.Token.isTokenDelimiter(l,a)&&!r.Token.isTokenRowDelimiter(l);l=s.nextCharacterToken)o.push(l.token),s.advancePastToken(l);return this.columnFormatter.format(o.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuotedColumnParser=void 0;let i=n("./ColumnFormatter"),r=n("../Token");e.QuotedColumnParser=class{constructor(s){this.parserOptions=s,this.columnFormatter=new i.ColumnFormatter(s)}parse(s){if(!s.hasMoreCharacters)return null;let a=s.cursor,{foundClosingQuote:o,col:l}=this.gatherDataBetweenQuotes(s);if(!o){if(s.advanceTo(a),!s.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${s.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(s),l}gatherDataBetweenQuotes(s){let{parserOptions:a}=this,o=!1,l=!1,c=[],h=s.nextCharacterToken;for(;!l&&h!==null;h=s.nextCharacterToken){let d=r.Token.isTokenQuote(h,a);if(!o&&d)o=!0;else if(o)if(r.Token.isTokenEscapeCharacter(h,a)){s.advancePastToken(h);let p=s.nextCharacterToken;p!==null&&(r.Token.isTokenQuote(p,a)||r.Token.isTokenEscapeCharacter(p,a))?(c.push(p.token),h=p):d?l=!0:c.push(h.token)}else d?l=!0:c.push(h.token);s.advancePastToken(h)}return{col:this.columnFormatter.format(c.join("")),foundClosingQuote:l}}checkForMalformedColumn(s){let{parserOptions:a}=this,{nextNonSpaceToken:o}=s;if(o){let l=r.Token.isTokenDelimiter(o,a),c=r.Token.isTokenRowDelimiter(o);if(!l&&!c){let h=s.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${a.escapedDelimiter}' OR new line got: '${o.token}'. at '${h}`)}s.advanceToToken(o)}else s.hasMoreData||s.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnFormatter=e.QuotedColumnParser=e.NonQuotedColumnParser=e.ColumnParser=void 0;var i=n("./ColumnParser");Object.defineProperty(e,"ColumnParser",{enumerable:!0,get:function(){return i.ColumnParser}});var r=n("./NonQuotedColumnParser");Object.defineProperty(e,"NonQuotedColumnParser",{enumerable:!0,get:function(){return r.NonQuotedColumnParser}});var s=n("./QuotedColumnParser");Object.defineProperty(e,"QuotedColumnParser",{enumerable:!0,get:function(){return s.QuotedColumnParser}});var a=n("./ColumnFormatter");Object.defineProperty(e,"ColumnFormatter",{enumerable:!0,get:function(){return a.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuotedColumnParser=e.NonQuotedColumnParser=e.ColumnParser=e.Token=e.Scanner=e.RowParser=e.Parser=void 0;var i=n("./Parser");Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return i.Parser}});var r=n("./RowParser");Object.defineProperty(e,"RowParser",{enumerable:!0,get:function(){return r.RowParser}});var s=n("./Scanner");Object.defineProperty(e,"Scanner",{enumerable:!0,get:function(){return s.Scanner}});var a=n("./Token");Object.defineProperty(e,"Token",{enumerable:!0,get:function(){return a.Token}});var o=n("./column");Object.defineProperty(e,"ColumnParser",{enumerable:!0,get:function(){return o.ColumnParser}}),Object.defineProperty(e,"NonQuotedColumnParser",{enumerable:!0,get:function(){return o.NonQuotedColumnParser}}),Object.defineProperty(e,"QuotedColumnParser",{enumerable:!0,get:function(){return o.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(n,t,e){"use strict";var i=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.HeaderTransformer=void 0;let r=i(n("lodash.isundefined")),s=i(n("lodash.isfunction")),a=i(n("lodash.uniq")),o=i(n("lodash.groupby"));e.HeaderTransformer=class{constructor(l){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=l,l.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(l.headers)?this.setHeaders(l.headers):s.default(l.headers)&&(this.headersTransform=l.headers)}transform(l,c){return this.shouldMapRow(l)?c(null,this.processRow(l)):c(null,{row:null,isValid:!0})}shouldMapRow(l){let{parserOptions:c}=this;if(!this.headersTransform&&c.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(l)){if(this.headersTransform)this.setHeaders(this.headersTransform(l));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(l)}return!1}return!0}processRow(l){if(!this.headers)return{row:l,isValid:!0};let{parserOptions:c}=this;if(!c.discardUnmappedColumns&&l.length>this.headersLength){if(!c.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${l.length}`);return{row:l,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${l.length}`}}return c.strictColumnHandling&&l.length<this.headersLength?{row:l,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${l.length}`}:{row:this.mapHeaders(l),isValid:!0}}mapHeaders(l){let c={},{headers:h,headersLength:d}=this;for(let p=0;p<d;p+=1){let g=h[p];if(!r.default(g)){let m=l[p];r.default(m)?c[g]="":c[g]=m}}return c}setHeaders(l){var c;let h=l.filter(d=>!!d);if(a.default(h).length!==h.length){let d=o.default(h),p=Object.keys(d).filter(g=>d[g].length>1);throw new Error("Duplicate headers found "+JSON.stringify(p))}this.headers=l,this.receivedHeaders=!0,this.headersLength=((c=this.headers)===null||c===void 0?void 0:c.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(n,t,e){"use strict";var i=function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.RowTransformerValidator=void 0;let r=i(n("lodash.isfunction")),s=n("../types");class a{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(l){return s.isSyncTransform(l)?(c,h)=>{let d=null;try{d=l(c)}catch(p){return h(p)}return h(null,d)}:l}static createValidator(l){return s.isSyncValidate(l)?(c,h)=>{h(null,{row:c,isValid:l(c)})}:(c,h)=>{l(c,(d,p,g)=>d?h(d):h(null,p?{row:c,isValid:p,reason:g}:{row:c,isValid:!1,reason:g}))}}set rowTransform(l){if(!r.default(l))throw new TypeError("The transform should be a function");this._rowTransform=a.createTransform(l)}set rowValidator(l){if(!r.default(l))throw new TypeError("The validate should be a function");this._rowValidator=a.createValidator(l)}transformAndValidate(l,c){return this.callTransformer(l,(h,d)=>h?c(h):d?this.callValidator(d,(p,g)=>p?c(p):g&&!g.isValid?c(null,{row:d,isValid:!1,reason:g.reason}):c(null,{row:d,isValid:!0})):c(null,{row:null,isValid:!0}))}callTransformer(l,c){return this._rowTransform?this._rowTransform(l,c):c(null,l)}callValidator(l,c){return this._rowValidator?this._rowValidator(l,c):c(null,{row:l,isValid:!0})}}e.RowTransformerValidator=a},{"../types":169,"lodash.isfunction":446}],168:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeaderTransformer=e.RowTransformerValidator=void 0;var i=n("./RowTransformerValidator");Object.defineProperty(e,"RowTransformerValidator",{enumerable:!0,get:function(){return i.RowTransformerValidator}});var r=n("./HeaderTransformer");Object.defineProperty(e,"HeaderTransformer",{enumerable:!0,get:function(){return r.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSyncValidate=e.isSyncTransform=void 0,e.isSyncTransform=i=>i.length===1,e.isSyncValidate=i=>i.length===1},{}],170:[function(n,t,e){"use strict";let i=e;i.bignum=n("bn.js"),i.define=n("./asn1/api").define,i.base=n("./asn1/base"),i.constants=n("./asn1/constants"),i.decoders=n("./asn1/decoders"),i.encoders=n("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(n,t,e){"use strict";let i=n("./encoders"),r=n("./decoders"),s=n("inherits");function a(o,l){this.name=o,this.body=l,this.decoders={},this.encoders={}}e.define=function(o,l){return new a(o,l)},a.prototype._createNamed=function(o){let l=this.name;function c(h){this._initNamed(h,l)}return s(c,o),c.prototype._initNamed=function(h,d){o.call(this,h,d)},new c(this)},a.prototype._getDecoder=function(o){return o=o||"der",this.decoders.hasOwnProperty(o)||(this.decoders[o]=this._createNamed(r[o])),this.decoders[o]},a.prototype.decode=function(o,l,c){return this._getDecoder(l).decode(o,c)},a.prototype._getEncoder=function(o){return o=o||"der",this.encoders.hasOwnProperty(o)||(this.encoders[o]=this._createNamed(i[o])),this.encoders[o]},a.prototype.encode=function(o,l,c){return this._getEncoder(l).encode(o,c)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(n,t,e){"use strict";let i=n("inherits"),r=n("../base/reporter").Reporter,s=n("safer-buffer").Buffer;function a(l,c){r.call(this,c),s.isBuffer(l)?(this.base=l,this.offset=0,this.length=l.length):this.error("Input not Buffer")}function o(l,c){if(Array.isArray(l))this.length=0,this.value=l.map(function(h){return o.isEncoderBuffer(h)||(h=new o(h,c)),this.length+=h.length,h},this);else if(typeof l=="number"){if(!(0<=l&&l<=255))return c.error("non-byte EncoderBuffer value");this.value=l,this.length=1}else if(typeof l=="string")this.value=l,this.length=s.byteLength(l);else{if(!s.isBuffer(l))return c.error("Unsupported type: "+typeof l);this.value=l,this.length=l.length}}i(a,r),e.DecoderBuffer=a,a.isDecoderBuffer=function(l){return l instanceof a?!0:typeof l=="object"&&s.isBuffer(l.base)&&l.constructor.name==="DecoderBuffer"&&typeof l.offset=="number"&&typeof l.length=="number"&&typeof l.save=="function"&&typeof l.restore=="function"&&typeof l.isEmpty=="function"&&typeof l.readUInt8=="function"&&typeof l.skip=="function"&&typeof l.raw=="function"},a.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},a.prototype.restore=function(l){let c=new a(this.base);return c.offset=l.offset,c.length=this.offset,this.offset=l.offset,r.prototype.restore.call(this,l.reporter),c},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(l){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(l||"DecoderBuffer overrun")},a.prototype.skip=function(l,c){if(!(this.offset+l<=this.length))return this.error(c||"DecoderBuffer overrun");let h=new a(this.base);return h._reporterState=this._reporterState,h.offset=this.offset,h.length=this.offset+l,this.offset+=l,h},a.prototype.raw=function(l){return this.base.slice(l?l.offset:this.offset,this.length)},e.EncoderBuffer=o,o.isEncoderBuffer=function(l){return l instanceof o?!0:typeof l=="object"&&l.constructor.name==="EncoderBuffer"&&typeof l.length=="number"&&typeof l.join=="function"},o.prototype.join=function(l,c){return l||(l=s.alloc(this.length)),c||(c=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(h){h.join(l,c),c+=h.length}):(typeof this.value=="number"?l[c]=this.value:typeof this.value=="string"?l.write(this.value,c):s.isBuffer(this.value)&&this.value.copy(l,c),c+=this.length)),l}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(n,t,e){"use strict";let i=e;i.Reporter=n("./reporter").Reporter,i.DecoderBuffer=n("./buffer").DecoderBuffer,i.EncoderBuffer=n("./buffer").EncoderBuffer,i.Node=n("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(n,t,e){"use strict";let i=n("../base/reporter").Reporter,r=n("../base/buffer").EncoderBuffer,s=n("../base/buffer").DecoderBuffer,a=n("minimalistic-assert"),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function c(d,p,g){let m={};this._baseState=m,m.name=g,m.enc=d,m.parent=p||null,m.children=null,m.tag=null,m.args=null,m.reverseArgs=null,m.choice=null,m.optional=!1,m.any=!1,m.obj=!1,m.use=null,m.useDecoder=null,m.key=null,m.default=null,m.explicit=null,m.implicit=null,m.contains=null,m.parent||(m.children=[],this._wrap())}t.exports=c;let h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){let d=this._baseState,p={};h.forEach(function(m){p[m]=d[m]});let g=new this.constructor(p.parent);return g._baseState=p,g},c.prototype._wrap=function(){let d=this._baseState;l.forEach(function(p){this[p]=function(){let g=new this.constructor(this);return d.children.push(g),g[p].apply(g,arguments)}},this)},c.prototype._init=function(d){let p=this._baseState;a(p.parent===null),d.call(this),p.children=p.children.filter(function(g){return g._baseState.parent===this},this),a.equal(p.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(d){let p=this._baseState,g=d.filter(function(m){return m instanceof this.constructor},this);d=d.filter(function(m){return!(m instanceof this.constructor)},this),g.length!==0&&(a(p.children===null),p.children=g,g.forEach(function(m){m._baseState.parent=this},this)),d.length!==0&&(a(p.args===null),p.args=d,p.reverseArgs=d.map(function(m){if(typeof m!="object"||m.constructor!==Object)return m;let _={};return Object.keys(m).forEach(function(v){v==(0|v)&&(v|=0);let x=m[v];_[x]=v}),_}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(d){c.prototype[d]=function(){let p=this._baseState;throw new Error(d+" not implemented for encoding: "+p.enc)}}),o.forEach(function(d){c.prototype[d]=function(){let p=this._baseState,g=Array.prototype.slice.call(arguments);return a(p.tag===null),p.tag=d,this._useArgs(g),this}}),c.prototype.use=function(d){a(d);let p=this._baseState;return a(p.use===null),p.use=d,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(d){let p=this._baseState;return a(p.default===null),p.default=d,p.optional=!0,this},c.prototype.explicit=function(d){let p=this._baseState;return a(p.explicit===null&&p.implicit===null),p.explicit=d,this},c.prototype.implicit=function(d){let p=this._baseState;return a(p.explicit===null&&p.implicit===null),p.implicit=d,this},c.prototype.obj=function(){let d=this._baseState,p=Array.prototype.slice.call(arguments);return d.obj=!0,p.length!==0&&this._useArgs(p),this},c.prototype.key=function(d){let p=this._baseState;return a(p.key===null),p.key=d,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(d){let p=this._baseState;return a(p.choice===null),p.choice=d,this._useArgs(Object.keys(d).map(function(g){return d[g]})),this},c.prototype.contains=function(d){let p=this._baseState;return a(p.use===null),p.contains=d,this},c.prototype._decode=function(d,p){let g=this._baseState;if(g.parent===null)return d.wrapResult(g.children[0]._decode(d,p));let m,_=g.default,v=!0,x=null;if(g.key!==null&&(x=d.enterKey(g.key)),g.optional){let S=null;if(g.explicit!==null?S=g.explicit:g.implicit!==null?S=g.implicit:g.tag!==null&&(S=g.tag),S!==null||g.any){if(v=this._peekTag(d,S,g.any),d.isError(v))return v}else{let O=d.save();try{g.choice===null?this._decodeGeneric(g.tag,d,p):this._decodeChoice(d,p),v=!0}catch{v=!1}d.restore(O)}}if(g.obj&&v&&(m=d.enterObject()),v){if(g.explicit!==null){let O=this._decodeTag(d,g.explicit);if(d.isError(O))return O;d=O}let S=d.offset;if(g.use===null&&g.choice===null){let O;g.any&&(O=d.save());let D=this._decodeTag(d,g.implicit!==null?g.implicit:g.tag,g.any);if(d.isError(D))return D;g.any?_=d.raw(O):d=D}if(p&&p.track&&g.tag!==null&&p.track(d.path(),S,d.length,"tagged"),p&&p.track&&g.tag!==null&&p.track(d.path(),d.offset,d.length,"content"),g.any||(_=g.choice===null?this._decodeGeneric(g.tag,d,p):this._decodeChoice(d,p)),d.isError(_))return _;if(g.any||g.choice!==null||g.children===null||g.children.forEach(function(O){O._decode(d,p)}),g.contains&&(g.tag==="octstr"||g.tag==="bitstr")){let O=new s(_);_=this._getUse(g.contains,d._reporterState.obj)._decode(O,p)}}return g.obj&&v&&(_=d.leaveObject(m)),g.key===null||_===null&&v!==!0?x!==null&&d.exitKey(x):d.leaveKey(x,g.key,_),_},c.prototype._decodeGeneric=function(d,p,g){let m=this._baseState;return d==="seq"||d==="set"?null:d==="seqof"||d==="setof"?this._decodeList(p,d,m.args[0],g):/str$/.test(d)?this._decodeStr(p,d,g):d==="objid"&&m.args?this._decodeObjid(p,m.args[0],m.args[1],g):d==="objid"?this._decodeObjid(p,null,null,g):d==="gentime"||d==="utctime"?this._decodeTime(p,d,g):d==="null_"?this._decodeNull(p,g):d==="bool"?this._decodeBool(p,g):d==="objDesc"?this._decodeStr(p,d,g):d==="int"||d==="enum"?this._decodeInt(p,m.args&&m.args[0],g):m.use!==null?this._getUse(m.use,p._reporterState.obj)._decode(p,g):p.error("unknown tag: "+d)},c.prototype._getUse=function(d,p){let g=this._baseState;return g.useDecoder=this._use(d,p),a(g.useDecoder._baseState.parent===null),g.useDecoder=g.useDecoder._baseState.children[0],g.implicit!==g.useDecoder._baseState.implicit&&(g.useDecoder=g.useDecoder.clone(),g.useDecoder._baseState.implicit=g.implicit),g.useDecoder},c.prototype._decodeChoice=function(d,p){let g=this._baseState,m=null,_=!1;return Object.keys(g.choice).some(function(v){let x=d.save(),S=g.choice[v];try{let O=S._decode(d,p);if(d.isError(O))return!1;m={type:v,value:O},_=!0}catch{return d.restore(x),!1}return!0},this),_?m:d.error("Choice not matched")},c.prototype._createEncoderBuffer=function(d){return new r(d,this.reporter)},c.prototype._encode=function(d,p,g){let m=this._baseState;if(m.default!==null&&m.default===d)return;let _=this._encodeValue(d,p,g);return _===void 0||this._skipDefault(_,p,g)?void 0:_},c.prototype._encodeValue=function(d,p,g){let m=this._baseState;if(m.parent===null)return m.children[0]._encode(d,p||new i);let _=null;if(this.reporter=p,m.optional&&d===void 0){if(m.default===null)return;d=m.default}let v=null,x=!1;if(m.any)_=this._createEncoderBuffer(d);else if(m.choice)_=this._encodeChoice(d,p);else if(m.contains)v=this._getUse(m.contains,g)._encode(d,p),x=!0;else if(m.children)v=m.children.map(function(S){if(S._baseState.tag==="null_")return S._encode(null,p,d);if(S._baseState.key===null)return p.error("Child should have a key");let O=p.enterKey(S._baseState.key);if(typeof d!="object")return p.error("Child expected, but input is not object");let D=S._encode(d[S._baseState.key],p,d);return p.leaveKey(O),D},this).filter(function(S){return S}),v=this._createEncoderBuffer(v);else if(m.tag==="seqof"||m.tag==="setof"){if(!m.args||m.args.length!==1)return p.error("Too many args for : "+m.tag);if(!Array.isArray(d))return p.error("seqof/setof, but data is not Array");let S=this.clone();S._baseState.implicit=null,v=this._createEncoderBuffer(d.map(function(O){let D=this._baseState;return this._getUse(D.args[0],d)._encode(O,p)},S))}else m.use!==null?_=this._getUse(m.use,g)._encode(d,p):(v=this._encodePrimitive(m.tag,d),x=!0);if(!m.any&&m.choice===null){let S=m.implicit!==null?m.implicit:m.tag,O=m.implicit===null?"universal":"context";S===null?m.use===null&&p.error("Tag could be omitted only for .use()"):m.use===null&&(_=this._encodeComposite(S,x,O,v))}return m.explicit!==null&&(_=this._encodeComposite(m.explicit,!1,"context",_)),_},c.prototype._encodeChoice=function(d,p){let g=this._baseState,m=g.choice[d.type];return m||a(!1,d.type+" not found in "+JSON.stringify(Object.keys(g.choice))),m._encode(d.value,p)},c.prototype._encodePrimitive=function(d,p){let g=this._baseState;if(/str$/.test(d))return this._encodeStr(p,d);if(d==="objid"&&g.args)return this._encodeObjid(p,g.reverseArgs[0],g.args[1]);if(d==="objid")return this._encodeObjid(p,null,null);if(d==="gentime"||d==="utctime")return this._encodeTime(p,d);if(d==="null_")return this._encodeNull();if(d==="int"||d==="enum")return this._encodeInt(p,g.args&&g.reverseArgs[0]);if(d==="bool")return this._encodeBool(p);if(d==="objDesc")return this._encodeStr(p,d);throw new Error("Unsupported tag: "+d)},c.prototype._isNumstr=function(d){return/^[0-9 ]*$/.test(d)},c.prototype._isPrintstr=function(d){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(d)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(n,t,e){"use strict";let i=n("inherits");function r(a){this._reporterState={obj:null,path:[],options:a||{},errors:[]}}function s(a,o){this.path=a,this.rethrow(o)}e.Reporter=r,r.prototype.isError=function(a){return a instanceof s},r.prototype.save=function(){let a=this._reporterState;return{obj:a.obj,pathLen:a.path.length}},r.prototype.restore=function(a){let o=this._reporterState;o.obj=a.obj,o.path=o.path.slice(0,a.pathLen)},r.prototype.enterKey=function(a){return this._reporterState.path.push(a)},r.prototype.exitKey=function(a){let o=this._reporterState;o.path=o.path.slice(0,a-1)},r.prototype.leaveKey=function(a,o,l){let c=this._reporterState;this.exitKey(a),c.obj!==null&&(c.obj[o]=l)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){let a=this._reporterState,o=a.obj;return a.obj={},o},r.prototype.leaveObject=function(a){let o=this._reporterState,l=o.obj;return o.obj=a,l},r.prototype.error=function(a){let o,l=this._reporterState,c=a instanceof s;if(o=c?a:new s(l.path.map(function(h){return"["+JSON.stringify(h)+"]"}).join(""),a.message||a,a.stack),!l.options.partial)throw o;return c||l.errors.push(o),o},r.prototype.wrapResult=function(a){let o=this._reporterState;return o.options.partial?{result:this.isError(a)?null:a,errors:o.errors}:a},i(s,Error),s.prototype.rethrow=function(a){if(this.message=a+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(o){this.stack=o.stack}return this}},{inherits:440}],176:[function(n,t,e){"use strict";function i(r){let s={};return Object.keys(r).forEach(function(a){(0|a)==a&&(a|=0);let o=r[a];s[o]=a}),s}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=i(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=i(e.tag)},{}],177:[function(n,t,e){"use strict";let i=e;i._reverse=function(r){let s={};return Object.keys(r).forEach(function(a){(0|a)==a&&(a|=0);let o=r[a];s[o]=a}),s},i.der=n("./der")},{"./der":176}],178:[function(n,t,e){"use strict";let i=n("inherits"),r=n("bn.js"),s=n("../base/buffer").DecoderBuffer,a=n("../base/node"),o=n("../constants/der");function l(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new c,this.tree._init(p.body)}function c(p){a.call(this,"der",p)}function h(p,g){let m=p.readUInt8(g);if(p.isError(m))return m;let _=o.tagClass[m>>6],v=(32&m)==0;if((31&m)==31){let x=m;for(m=0;(128&x)==128;){if(x=p.readUInt8(g),p.isError(x))return x;m<<=7,m|=127&x}}else m&=31;return{cls:_,primitive:v,tag:m,tagStr:o.tag[m]}}function d(p,g,m){let _=p.readUInt8(m);if(p.isError(_))return _;if(!g&&_===128)return null;if(!(128&_))return _;let v=127&_;if(v>4)return p.error("length octect is too long");_=0;for(let x=0;x<v;x++){_<<=8;let S=p.readUInt8(m);if(p.isError(S))return S;_|=S}return _}t.exports=l,l.prototype.decode=function(p,g){return s.isDecoderBuffer(p)||(p=new s(p,g)),this.tree._decode(p,g)},i(c,a),c.prototype._peekTag=function(p,g,m){if(p.isEmpty())return!1;let _=p.save(),v=h(p,'Failed to peek tag: "'+g+'"');return p.isError(v)?v:(p.restore(_),v.tag===g||v.tagStr===g||v.tagStr+"of"===g||m)},c.prototype._decodeTag=function(p,g,m){let _=h(p,'Failed to decode tag of "'+g+'"');if(p.isError(_))return _;let v=d(p,_.primitive,'Failed to get length of "'+g+'"');if(p.isError(v))return v;if(!m&&_.tag!==g&&_.tagStr!==g&&_.tagStr+"of"!==g)return p.error('Failed to match tag: "'+g+'"');if(_.primitive||v!==null)return p.skip(v,'Failed to match body of: "'+g+'"');let x=p.save(),S=this._skipUntilEnd(p,'Failed to skip indefinite length body: "'+this.tag+'"');return p.isError(S)?S:(v=p.offset-x.offset,p.restore(x),p.skip(v,'Failed to match body of: "'+g+'"'))},c.prototype._skipUntilEnd=function(p,g){for(;;){let m=h(p,g);if(p.isError(m))return m;let _=d(p,m.primitive,g);if(p.isError(_))return _;let v;if(v=m.primitive||_!==null?p.skip(_):this._skipUntilEnd(p,g),p.isError(v))return v;if(m.tagStr==="end")break}},c.prototype._decodeList=function(p,g,m,_){let v=[];for(;!p.isEmpty();){let x=this._peekTag(p,"end");if(p.isError(x))return x;let S=m.decode(p,"der",_);if(p.isError(S)&&x)break;v.push(S)}return v},c.prototype._decodeStr=function(p,g){if(g==="bitstr"){let m=p.readUInt8();return p.isError(m)?m:{unused:m,data:p.raw()}}if(g==="bmpstr"){let m=p.raw();if(m.length%2==1)return p.error("Decoding of string type: bmpstr length mismatch");let _="";for(let v=0;v<m.length/2;v++)_+=String.fromCharCode(m.readUInt16BE(2*v));return _}if(g==="numstr"){let m=p.raw().toString("ascii");return this._isNumstr(m)?m:p.error("Decoding of string type: numstr unsupported characters")}if(g==="octstr"||g==="objDesc")return p.raw();if(g==="printstr"){let m=p.raw().toString("ascii");return this._isPrintstr(m)?m:p.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(g)?p.raw().toString():p.error("Decoding of string type: "+g+" unsupported")},c.prototype._decodeObjid=function(p,g,m){let _,v=[],x=0,S=0;for(;!p.isEmpty();)S=p.readUInt8(),x<<=7,x|=127&S,!(128&S)&&(v.push(x),x=0);128&S&&v.push(x);let O=v[0]/40|0,D=v[0]%40;if(_=m?v:[O,D].concat(v.slice(1)),g){let U=g[_.join(" ")];U===void 0&&(U=g[_.join(".")]),U!==void 0&&(_=U)}return _},c.prototype._decodeTime=function(p,g){let m=p.raw().toString(),_,v,x,S,O,D;if(g==="gentime")_=0|m.slice(0,4),v=0|m.slice(4,6),x=0|m.slice(6,8),S=0|m.slice(8,10),O=0|m.slice(10,12),D=0|m.slice(12,14);else{if(g!=="utctime")return p.error("Decoding "+g+" time is not supported yet");_=0|m.slice(0,2),v=0|m.slice(2,4),x=0|m.slice(4,6),S=0|m.slice(6,8),O=0|m.slice(8,10),D=0|m.slice(10,12),_=_<70?2e3+_:1900+_}return Date.UTC(_,v-1,x,S,O,D,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(p){let g=p.readUInt8();return p.isError(g)?g:g!==0},c.prototype._decodeInt=function(p,g){let m=p.raw(),_=new r(m);return g&&(_=g[_.toString(10)]||_),_},c.prototype._use=function(p,g){return typeof p=="function"&&(p=p(g)),p._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(n,t,e){"use strict";let i=e;i.der=n("./der"),i.pem=n("./pem")},{"./der":178,"./pem":180}],180:[function(n,t,e){"use strict";let i=n("inherits"),r=n("safer-buffer").Buffer,s=n("./der");function a(o){s.call(this,o),this.enc="pem"}i(a,s),t.exports=a,a.prototype.decode=function(o,l){let c=o.toString().split(/[\r\n]+/g),h=l.label.toUpperCase(),d=/^-----(BEGIN|END) ([^-]+)-----$/,p=-1,g=-1;for(let v=0;v<c.length;v++){let x=c[v].match(d);if(x!==null&&x[2]===h){if(p!==-1){if(x[1]!=="END")break;g=v;break}if(x[1]!=="BEGIN")break;p=v}}if(p===-1||g===-1)throw new Error("PEM section not found for: "+h);let m=c.slice(p+1,g).join("");m.replace(/[^a-z0-9+/=]+/gi,"");let _=r.from(m,"base64");return s.prototype.decode.call(this,_,l)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(n,t,e){"use strict";let i=n("inherits"),r=n("safer-buffer").Buffer,s=n("../base/node"),a=n("../constants/der");function o(h){this.enc="der",this.name=h.name,this.entity=h,this.tree=new l,this.tree._init(h.body)}function l(h){s.call(this,"der",h)}function c(h){return h<10?"0"+h:h}t.exports=o,o.prototype.encode=function(h,d){return this.tree._encode(h,d).join()},i(l,s),l.prototype._encodeComposite=function(h,d,p,g){let m=function(x,S,O,D){let U;if(x==="seqof"?x="seq":x==="setof"&&(x="set"),a.tagByName.hasOwnProperty(x))U=a.tagByName[x];else{if(typeof x!="number"||(0|x)!==x)return D.error("Unknown tag: "+x);U=x}return U>=31?D.error("Multi-octet tag encoding unsupported"):(S||(U|=32),U|=a.tagClassByName[O||"universal"]<<6,U)}(h,d,p,this.reporter);if(g.length<128){let x=r.alloc(2);return x[0]=m,x[1]=g.length,this._createEncoderBuffer([x,g])}let _=1;for(let x=g.length;x>=256;x>>=8)_++;let v=r.alloc(2+_);v[0]=m,v[1]=128|_;for(let x=1+_,S=g.length;S>0;x--,S>>=8)v[x]=255&S;return this._createEncoderBuffer([v,g])},l.prototype._encodeStr=function(h,d){if(d==="bitstr")return this._createEncoderBuffer([0|h.unused,h.data]);if(d==="bmpstr"){let p=r.alloc(2*h.length);for(let g=0;g<h.length;g++)p.writeUInt16BE(h.charCodeAt(g),2*g);return this._createEncoderBuffer(p)}return d==="numstr"?this._isNumstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: numstr supports only digits and space"):d==="printstr"?this._isPrintstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(d)||d==="objDesc"?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: "+d+" unsupported")},l.prototype._encodeObjid=function(h,d,p){if(typeof h=="string"){if(!d)return this.reporter.error("string objid given, but no values map found");if(!d.hasOwnProperty(h))return this.reporter.error("objid not found in values map");h=d[h].split(/[\s.]+/g);for(let v=0;v<h.length;v++)h[v]|=0}else if(Array.isArray(h)){h=h.slice();for(let v=0;v<h.length;v++)h[v]|=0}if(!Array.isArray(h))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(h));if(!p){if(h[1]>=40)return this.reporter.error("Second objid identifier OOB");h.splice(0,2,40*h[0]+h[1])}let g=0;for(let v=0;v<h.length;v++){let x=h[v];for(g++;x>=128;x>>=7)g++}let m=r.alloc(g),_=m.length-1;for(let v=h.length-1;v>=0;v--){let x=h[v];for(m[_--]=127&x;(x>>=7)>0;)m[_--]=128|127&x}return this._createEncoderBuffer(m)},l.prototype._encodeTime=function(h,d){let p,g=new Date(h);return d==="gentime"?p=[c(g.getUTCFullYear()),c(g.getUTCMonth()+1),c(g.getUTCDate()),c(g.getUTCHours()),c(g.getUTCMinutes()),c(g.getUTCSeconds()),"Z"].join(""):d==="utctime"?p=[c(g.getUTCFullYear()%100),c(g.getUTCMonth()+1),c(g.getUTCDate()),c(g.getUTCHours()),c(g.getUTCMinutes()),c(g.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+d+" time is not supported yet"),this._encodeStr(p,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(h,d){if(typeof h=="string"){if(!d)return this.reporter.error("String int or enum given, but no values map");if(!d.hasOwnProperty(h))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(h));h=d[h]}if(typeof h!="number"&&!r.isBuffer(h)){let m=h.toArray();!h.sign&&128&m[0]&&m.unshift(0),h=r.from(m)}if(r.isBuffer(h)){let m=h.length;h.length===0&&m++;let _=r.alloc(m);return h.copy(_),h.length===0&&(_[0]=0),this._createEncoderBuffer(_)}if(h<128)return this._createEncoderBuffer(h);if(h<256)return this._createEncoderBuffer([0,h]);let p=1;for(let m=h;m>=256;m>>=8)p++;let g=new Array(p);for(let m=g.length-1;m>=0;m--)g[m]=255&h,h>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(r.from(g))},l.prototype._encodeBool=function(h){return this._createEncoderBuffer(h?255:0)},l.prototype._use=function(h,d){return typeof h=="function"&&(h=h(d)),h._getEncoder("der").tree},l.prototype._skipDefault=function(h,d,p){let g=this._baseState,m;if(g.default===null)return!1;let _=h.join();if(g.defaultBuffer===void 0&&(g.defaultBuffer=this._encodeValue(g.default,d,p).join()),_.length!==g.defaultBuffer.length)return!1;for(m=0;m<_.length;m++)if(_[m]!==g.defaultBuffer[m])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(n,t,e){"use strict";let i=e;i.der=n("./der"),i.pem=n("./pem")},{"./der":181,"./pem":183}],183:[function(n,t,e){"use strict";let i=n("inherits"),r=n("./der");function s(a){r.call(this,a),this.enc="pem"}i(s,r),t.exports=s,s.prototype.encode=function(a,o){let l=r.prototype.encode.call(this,a).toString("base64"),c=["-----BEGIN "+o.label+"-----"];for(let h=0;h<l.length;h+=64)c.push(l.slice(h,h+64));return c.push("-----END "+o.label+"-----"),c.join(`
`)}},{"./der":181,inherits:440}],184:[function(n,t,e){"use strict";(function(i,r){function s(B,N){if(!B)throw new Error(N||"Assertion failed")}function a(B,N){B.super_=N;var Z=function(){};Z.prototype=N.prototype,B.prototype=new Z,B.prototype.constructor=B}function o(B,N,Z){if(o.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&(N!=="le"&&N!=="be"||(Z=N,N=10),this._init(B||0,N||10,Z||"be"))}var l;typeof i=="object"?i.exports=o:(void 0).BN=o,o.BN=o,o.wordSize=26;try{l=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:n("buffer").Buffer}catch{}function c(B,N){var Z=B.charCodeAt(N);return Z>=65&&Z<=70?Z-55:Z>=97&&Z<=102?Z-87:Z-48&15}function h(B,N,Z){var w=c(B,Z);return Z-1>=N&&(w|=c(B,Z-1)<<4),w}function d(B,N,Z,w){for(var C=0,k=Math.min(B.length,Z),T=N;T<k;T++){var R=B.charCodeAt(T)-48;C*=w,C+=R>=49?R-49+10:R>=17?R-17+10:R}return C}o.isBN=function(B){return B instanceof o||B!==null&&typeof B=="object"&&B.constructor.wordSize===o.wordSize&&Array.isArray(B.words)},o.max=function(B,N){return B.cmp(N)>0?B:N},o.min=function(B,N){return B.cmp(N)<0?B:N},o.prototype._init=function(B,N,Z){if(typeof B=="number")return this._initNumber(B,N,Z);if(typeof B=="object")return this._initArray(B,N,Z);N==="hex"&&(N=16),s(N===(0|N)&&N>=2&&N<=36);var w=0;(B=B.toString().replace(/\s+/g,""))[0]==="-"&&(w++,this.negative=1),w<B.length&&(N===16?this._parseHex(B,w,Z):(this._parseBase(B,N,w),Z==="le"&&this._initArray(this.toArray(),N,Z)))},o.prototype._initNumber=function(B,N,Z){B<0&&(this.negative=1,B=-B),B<67108864?(this.words=[67108863&B],this.length=1):B<4503599627370496?(this.words=[67108863&B,B/67108864&67108863],this.length=2):(s(B<9007199254740992),this.words=[67108863&B,B/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),N,Z)},o.prototype._initArray=function(B,N,Z){if(s(typeof B.length=="number"),B.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(B.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C,k,T=0;if(Z==="be")for(w=B.length-1,C=0;w>=0;w-=3)k=B[w]|B[w-1]<<8|B[w-2]<<16,this.words[C]|=k<<T&67108863,this.words[C+1]=k>>>26-T&67108863,(T+=24)>=26&&(T-=26,C++);else if(Z==="le")for(w=0,C=0;w<B.length;w+=3)k=B[w]|B[w+1]<<8|B[w+2]<<16,this.words[C]|=k<<T&67108863,this.words[C+1]=k>>>26-T&67108863,(T+=24)>=26&&(T-=26,C++);return this.strip()},o.prototype._parseHex=function(B,N,Z){this.length=Math.ceil((B.length-N)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C,k=0,T=0;if(Z==="be")for(w=B.length-1;w>=N;w-=2)C=h(B,N,w)<<k,this.words[T]|=67108863&C,k>=18?(k-=18,T+=1,this.words[T]|=C>>>26):k+=8;else for(w=(B.length-N)%2==0?N+1:N;w<B.length;w+=2)C=h(B,N,w)<<k,this.words[T]|=67108863&C,k>=18?(k-=18,T+=1,this.words[T]|=C>>>26):k+=8;this.strip()},o.prototype._parseBase=function(B,N,Z){this.words=[0],this.length=1;for(var w=0,C=1;C<=67108863;C*=N)w++;w--,C=C/N|0;for(var k=B.length-Z,T=k%w,R=Math.min(k,k-T)+Z,F=0,H=Z;H<R;H+=w)F=d(B,H,H+w,N),this.imuln(C),this.words[0]+F<67108864?this.words[0]+=F:this._iaddn(F);if(T!==0){var it=1;for(F=d(B,H,B.length,N),H=0;H<T;H++)it*=N;this.imuln(it),this.words[0]+F<67108864?this.words[0]+=F:this._iaddn(F)}this.strip()},o.prototype.copy=function(B){B.words=new Array(this.length);for(var N=0;N<this.length;N++)B.words[N]=this.words[N];B.length=this.length,B.negative=this.negative,B.red=this.red},o.prototype.clone=function(){var B=new o(null);return this.copy(B),B},o.prototype._expand=function(B){for(;this.length<B;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function _(B,N,Z){Z.negative=N.negative^B.negative;var w=B.length+N.length|0;Z.length=w,w=w-1|0;var C=0|B.words[0],k=0|N.words[0],T=C*k,R=67108863&T,F=T/67108864|0;Z.words[0]=R;for(var H=1;H<w;H++){for(var it=F>>>26,ot=67108863&F,dt=Math.min(H,N.length-1),$=Math.max(0,H-B.length+1);$<=dt;$++){var ct=H-$|0;it+=(T=(C=0|B.words[ct])*(k=0|N.words[$])+ot)/67108864|0,ot=67108863&T}Z.words[H]=0|ot,F=0|it}return F!==0?Z.words[H]=0|F:Z.length--,Z.strip()}o.prototype.toString=function(B,N){var Z;if(N=0|N||1,(B=B||10)===16||B==="hex"){Z="";for(var w=0,C=0,k=0;k<this.length;k++){var T=this.words[k],R=(16777215&(T<<w|C)).toString(16);Z=(C=T>>>24-w&16777215)!==0||k!==this.length-1?p[6-R.length]+R+Z:R+Z,(w+=2)>=26&&(w-=26,k--)}for(C!==0&&(Z=C.toString(16)+Z);Z.length%N!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(B===(0|B)&&B>=2&&B<=36){var F=g[B],H=m[B];Z="";var it=this.clone();for(it.negative=0;!it.isZero();){var ot=it.modn(H).toString(B);Z=(it=it.idivn(H)).isZero()?ot+Z:p[F-ot.length]+ot+Z}for(this.isZero()&&(Z="0"+Z);Z.length%N!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}s(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var B=this.words[0];return this.length===2?B+=67108864*this.words[1]:this.length===3&&this.words[2]===1?B+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-B:B},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(B,N){return s(l!==void 0),this.toArrayLike(l,B,N)},o.prototype.toArray=function(B,N){return this.toArrayLike(Array,B,N)},o.prototype.toArrayLike=function(B,N,Z){var w=this.byteLength(),C=Z||Math.max(1,w);s(w<=C,"byte array longer than desired length"),s(C>0,"Requested array length <= 0"),this.strip();var k,T,R=N==="le",F=new B(C),H=this.clone();if(R){for(T=0;!H.isZero();T++)k=H.andln(255),H.iushrn(8),F[T]=k;for(;T<C;T++)F[T]=0}else{for(T=0;T<C-w;T++)F[T]=0;for(T=0;!H.isZero();T++)k=H.andln(255),H.iushrn(8),F[C-T-1]=k}return F},Math.clz32?o.prototype._countBits=function(B){return 32-Math.clz32(B)}:o.prototype._countBits=function(B){var N=B,Z=0;return N>=4096&&(Z+=13,N>>>=13),N>=64&&(Z+=7,N>>>=7),N>=8&&(Z+=4,N>>>=4),N>=2&&(Z+=2,N>>>=2),Z+N},o.prototype._zeroBits=function(B){if(B===0)return 26;var N=B,Z=0;return!(8191&N)&&(Z+=13,N>>>=13),!(127&N)&&(Z+=7,N>>>=7),!(15&N)&&(Z+=4,N>>>=4),!(3&N)&&(Z+=2,N>>>=2),!(1&N)&&Z++,Z},o.prototype.bitLength=function(){var B=this.words[this.length-1],N=this._countBits(B);return 26*(this.length-1)+N},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var B=0,N=0;N<this.length;N++){var Z=this._zeroBits(this.words[N]);if(B+=Z,Z!==26)break}return B},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(B){return this.negative!==0?this.abs().inotn(B).iaddn(1):this.clone()},o.prototype.fromTwos=function(B){return this.testn(B-1)?this.notn(B).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(B){for(;this.length<B.length;)this.words[this.length++]=0;for(var N=0;N<B.length;N++)this.words[N]=this.words[N]|B.words[N];return this.strip()},o.prototype.ior=function(B){return s((this.negative|B.negative)==0),this.iuor(B)},o.prototype.or=function(B){return this.length>B.length?this.clone().ior(B):B.clone().ior(this)},o.prototype.uor=function(B){return this.length>B.length?this.clone().iuor(B):B.clone().iuor(this)},o.prototype.iuand=function(B){var N;N=this.length>B.length?B:this;for(var Z=0;Z<N.length;Z++)this.words[Z]=this.words[Z]&B.words[Z];return this.length=N.length,this.strip()},o.prototype.iand=function(B){return s((this.negative|B.negative)==0),this.iuand(B)},o.prototype.and=function(B){return this.length>B.length?this.clone().iand(B):B.clone().iand(this)},o.prototype.uand=function(B){return this.length>B.length?this.clone().iuand(B):B.clone().iuand(this)},o.prototype.iuxor=function(B){var N,Z;this.length>B.length?(N=this,Z=B):(N=B,Z=this);for(var w=0;w<Z.length;w++)this.words[w]=N.words[w]^Z.words[w];if(this!==N)for(;w<N.length;w++)this.words[w]=N.words[w];return this.length=N.length,this.strip()},o.prototype.ixor=function(B){return s((this.negative|B.negative)==0),this.iuxor(B)},o.prototype.xor=function(B){return this.length>B.length?this.clone().ixor(B):B.clone().ixor(this)},o.prototype.uxor=function(B){return this.length>B.length?this.clone().iuxor(B):B.clone().iuxor(this)},o.prototype.inotn=function(B){s(typeof B=="number"&&B>=0);var N=0|Math.ceil(B/26),Z=B%26;this._expand(N),Z>0&&N--;for(var w=0;w<N;w++)this.words[w]=67108863&~this.words[w];return Z>0&&(this.words[w]=~this.words[w]&67108863>>26-Z),this.strip()},o.prototype.notn=function(B){return this.clone().inotn(B)},o.prototype.setn=function(B,N){s(typeof B=="number"&&B>=0);var Z=B/26|0,w=B%26;return this._expand(Z+1),this.words[Z]=N?this.words[Z]|1<<w:this.words[Z]&~(1<<w),this.strip()},o.prototype.iadd=function(B){var N,Z,w;if(this.negative!==0&&B.negative===0)return this.negative=0,N=this.isub(B),this.negative^=1,this._normSign();if(this.negative===0&&B.negative!==0)return B.negative=0,N=this.isub(B),B.negative=1,N._normSign();this.length>B.length?(Z=this,w=B):(Z=B,w=this);for(var C=0,k=0;k<w.length;k++)N=(0|Z.words[k])+(0|w.words[k])+C,this.words[k]=67108863&N,C=N>>>26;for(;C!==0&&k<Z.length;k++)N=(0|Z.words[k])+C,this.words[k]=67108863&N,C=N>>>26;if(this.length=Z.length,C!==0)this.words[this.length]=C,this.length++;else if(Z!==this)for(;k<Z.length;k++)this.words[k]=Z.words[k];return this},o.prototype.add=function(B){var N;return B.negative!==0&&this.negative===0?(B.negative=0,N=this.sub(B),B.negative^=1,N):B.negative===0&&this.negative!==0?(this.negative=0,N=B.sub(this),this.negative=1,N):this.length>B.length?this.clone().iadd(B):B.clone().iadd(this)},o.prototype.isub=function(B){if(B.negative!==0){B.negative=0;var N=this.iadd(B);return B.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(B),this.negative=1,this._normSign();var Z,w,C=this.cmp(B);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;C>0?(Z=this,w=B):(Z=B,w=this);for(var k=0,T=0;T<w.length;T++)k=(N=(0|Z.words[T])-(0|w.words[T])+k)>>26,this.words[T]=67108863&N;for(;k!==0&&T<Z.length;T++)k=(N=(0|Z.words[T])+k)>>26,this.words[T]=67108863&N;if(k===0&&T<Z.length&&Z!==this)for(;T<Z.length;T++)this.words[T]=Z.words[T];return this.length=Math.max(this.length,T),Z!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(B){return this.clone().isub(B)};var v=function(B,N,Z){var w,C,k,T=B.words,R=N.words,F=Z.words,H=0,it=0|T[0],ot=8191&it,dt=it>>>13,$=0|T[1],ct=8191&$,W=$>>>13,q=0|T[2],rt=8191&q,mt=q>>>13,wt=0|T[3],_t=8191&wt,Ct=wt>>>13,Ft=0|T[4],At=8191&Ft,vt=Ft>>>13,kt=0|T[5],gt=8191&kt,ut=kt>>>13,Q=0|T[6],Y=8191&Q,et=Q>>>13,lt=0|T[7],pt=8191&lt,bt=lt>>>13,Et=0|T[8],Ot=8191&Et,zt=Et>>>13,Gt=0|T[9],Jt=8191&Gt,Kt=Gt>>>13,ie=0|R[0],Xt=8191&ie,Ut=ie>>>13,_e=0|R[1],le=8191&_e,ye=_e>>>13,Ze=0|R[2],ce=8191&Ze,ke=Ze>>>13,He=0|R[3],$t=8191&He,Te=He>>>13,bi=0|R[4],ue=8191&bi,Fe=bi>>>13,ai=0|R[5],Le=8191&ai,Oe=ai>>>13,ir=0|R[6],We=8191&ir,It=ir>>>13,qt=0|R[7],jt=8191&qt,ae=qt>>>13,Qe=0|R[8],se=8191&Qe,ve=Qe>>>13,$e=0|R[9],Ie=8191&$e,fe=$e>>>13;Z.negative=B.negative^N.negative,Z.length=19;var Ye=(H+(w=Math.imul(ot,Xt))|0)+((8191&(C=(C=Math.imul(ot,Ut))+Math.imul(dt,Xt)|0))<<13)|0;H=((k=Math.imul(dt,Ut))+(C>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,w=Math.imul(ct,Xt),C=(C=Math.imul(ct,Ut))+Math.imul(W,Xt)|0,k=Math.imul(W,Ut);var Ve=(H+(w=w+Math.imul(ot,le)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ye)|0)+Math.imul(dt,le)|0))<<13)|0;H=((k=k+Math.imul(dt,ye)|0)+(C>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,w=Math.imul(rt,Xt),C=(C=Math.imul(rt,Ut))+Math.imul(mt,Xt)|0,k=Math.imul(mt,Ut),w=w+Math.imul(ct,le)|0,C=(C=C+Math.imul(ct,ye)|0)+Math.imul(W,le)|0,k=k+Math.imul(W,ye)|0;var ii=(H+(w=w+Math.imul(ot,ce)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ke)|0)+Math.imul(dt,ce)|0))<<13)|0;H=((k=k+Math.imul(dt,ke)|0)+(C>>>13)|0)+(ii>>>26)|0,ii&=67108863,w=Math.imul(_t,Xt),C=(C=Math.imul(_t,Ut))+Math.imul(Ct,Xt)|0,k=Math.imul(Ct,Ut),w=w+Math.imul(rt,le)|0,C=(C=C+Math.imul(rt,ye)|0)+Math.imul(mt,le)|0,k=k+Math.imul(mt,ye)|0,w=w+Math.imul(ct,ce)|0,C=(C=C+Math.imul(ct,ke)|0)+Math.imul(W,ce)|0,k=k+Math.imul(W,ke)|0;var Ke=(H+(w=w+Math.imul(ot,$t)|0)|0)+((8191&(C=(C=C+Math.imul(ot,Te)|0)+Math.imul(dt,$t)|0))<<13)|0;H=((k=k+Math.imul(dt,Te)|0)+(C>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,w=Math.imul(At,Xt),C=(C=Math.imul(At,Ut))+Math.imul(vt,Xt)|0,k=Math.imul(vt,Ut),w=w+Math.imul(_t,le)|0,C=(C=C+Math.imul(_t,ye)|0)+Math.imul(Ct,le)|0,k=k+Math.imul(Ct,ye)|0,w=w+Math.imul(rt,ce)|0,C=(C=C+Math.imul(rt,ke)|0)+Math.imul(mt,ce)|0,k=k+Math.imul(mt,ke)|0,w=w+Math.imul(ct,$t)|0,C=(C=C+Math.imul(ct,Te)|0)+Math.imul(W,$t)|0,k=k+Math.imul(W,Te)|0;var pr=(H+(w=w+Math.imul(ot,ue)|0)|0)+((8191&(C=(C=C+Math.imul(ot,Fe)|0)+Math.imul(dt,ue)|0))<<13)|0;H=((k=k+Math.imul(dt,Fe)|0)+(C>>>13)|0)+(pr>>>26)|0,pr&=67108863,w=Math.imul(gt,Xt),C=(C=Math.imul(gt,Ut))+Math.imul(ut,Xt)|0,k=Math.imul(ut,Ut),w=w+Math.imul(At,le)|0,C=(C=C+Math.imul(At,ye)|0)+Math.imul(vt,le)|0,k=k+Math.imul(vt,ye)|0,w=w+Math.imul(_t,ce)|0,C=(C=C+Math.imul(_t,ke)|0)+Math.imul(Ct,ce)|0,k=k+Math.imul(Ct,ke)|0,w=w+Math.imul(rt,$t)|0,C=(C=C+Math.imul(rt,Te)|0)+Math.imul(mt,$t)|0,k=k+Math.imul(mt,Te)|0,w=w+Math.imul(ct,ue)|0,C=(C=C+Math.imul(ct,Fe)|0)+Math.imul(W,ue)|0,k=k+Math.imul(W,Fe)|0;var Je=(H+(w=w+Math.imul(ot,Le)|0)|0)+((8191&(C=(C=C+Math.imul(ot,Oe)|0)+Math.imul(dt,Le)|0))<<13)|0;H=((k=k+Math.imul(dt,Oe)|0)+(C>>>13)|0)+(Je>>>26)|0,Je&=67108863,w=Math.imul(Y,Xt),C=(C=Math.imul(Y,Ut))+Math.imul(et,Xt)|0,k=Math.imul(et,Ut),w=w+Math.imul(gt,le)|0,C=(C=C+Math.imul(gt,ye)|0)+Math.imul(ut,le)|0,k=k+Math.imul(ut,ye)|0,w=w+Math.imul(At,ce)|0,C=(C=C+Math.imul(At,ke)|0)+Math.imul(vt,ce)|0,k=k+Math.imul(vt,ke)|0,w=w+Math.imul(_t,$t)|0,C=(C=C+Math.imul(_t,Te)|0)+Math.imul(Ct,$t)|0,k=k+Math.imul(Ct,Te)|0,w=w+Math.imul(rt,ue)|0,C=(C=C+Math.imul(rt,Fe)|0)+Math.imul(mt,ue)|0,k=k+Math.imul(mt,Fe)|0,w=w+Math.imul(ct,Le)|0,C=(C=C+Math.imul(ct,Oe)|0)+Math.imul(W,Le)|0,k=k+Math.imul(W,Oe)|0;var oi=(H+(w=w+Math.imul(ot,We)|0)|0)+((8191&(C=(C=C+Math.imul(ot,It)|0)+Math.imul(dt,We)|0))<<13)|0;H=((k=k+Math.imul(dt,It)|0)+(C>>>13)|0)+(oi>>>26)|0,oi&=67108863,w=Math.imul(pt,Xt),C=(C=Math.imul(pt,Ut))+Math.imul(bt,Xt)|0,k=Math.imul(bt,Ut),w=w+Math.imul(Y,le)|0,C=(C=C+Math.imul(Y,ye)|0)+Math.imul(et,le)|0,k=k+Math.imul(et,ye)|0,w=w+Math.imul(gt,ce)|0,C=(C=C+Math.imul(gt,ke)|0)+Math.imul(ut,ce)|0,k=k+Math.imul(ut,ke)|0,w=w+Math.imul(At,$t)|0,C=(C=C+Math.imul(At,Te)|0)+Math.imul(vt,$t)|0,k=k+Math.imul(vt,Te)|0,w=w+Math.imul(_t,ue)|0,C=(C=C+Math.imul(_t,Fe)|0)+Math.imul(Ct,ue)|0,k=k+Math.imul(Ct,Fe)|0,w=w+Math.imul(rt,Le)|0,C=(C=C+Math.imul(rt,Oe)|0)+Math.imul(mt,Le)|0,k=k+Math.imul(mt,Oe)|0,w=w+Math.imul(ct,We)|0,C=(C=C+Math.imul(ct,It)|0)+Math.imul(W,We)|0,k=k+Math.imul(W,It)|0;var cr=(H+(w=w+Math.imul(ot,jt)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ae)|0)+Math.imul(dt,jt)|0))<<13)|0;H=((k=k+Math.imul(dt,ae)|0)+(C>>>13)|0)+(cr>>>26)|0,cr&=67108863,w=Math.imul(Ot,Xt),C=(C=Math.imul(Ot,Ut))+Math.imul(zt,Xt)|0,k=Math.imul(zt,Ut),w=w+Math.imul(pt,le)|0,C=(C=C+Math.imul(pt,ye)|0)+Math.imul(bt,le)|0,k=k+Math.imul(bt,ye)|0,w=w+Math.imul(Y,ce)|0,C=(C=C+Math.imul(Y,ke)|0)+Math.imul(et,ce)|0,k=k+Math.imul(et,ke)|0,w=w+Math.imul(gt,$t)|0,C=(C=C+Math.imul(gt,Te)|0)+Math.imul(ut,$t)|0,k=k+Math.imul(ut,Te)|0,w=w+Math.imul(At,ue)|0,C=(C=C+Math.imul(At,Fe)|0)+Math.imul(vt,ue)|0,k=k+Math.imul(vt,Fe)|0,w=w+Math.imul(_t,Le)|0,C=(C=C+Math.imul(_t,Oe)|0)+Math.imul(Ct,Le)|0,k=k+Math.imul(Ct,Oe)|0,w=w+Math.imul(rt,We)|0,C=(C=C+Math.imul(rt,It)|0)+Math.imul(mt,We)|0,k=k+Math.imul(mt,It)|0,w=w+Math.imul(ct,jt)|0,C=(C=C+Math.imul(ct,ae)|0)+Math.imul(W,jt)|0,k=k+Math.imul(W,ae)|0;var ki=(H+(w=w+Math.imul(ot,se)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ve)|0)+Math.imul(dt,se)|0))<<13)|0;H=((k=k+Math.imul(dt,ve)|0)+(C>>>13)|0)+(ki>>>26)|0,ki&=67108863,w=Math.imul(Jt,Xt),C=(C=Math.imul(Jt,Ut))+Math.imul(Kt,Xt)|0,k=Math.imul(Kt,Ut),w=w+Math.imul(Ot,le)|0,C=(C=C+Math.imul(Ot,ye)|0)+Math.imul(zt,le)|0,k=k+Math.imul(zt,ye)|0,w=w+Math.imul(pt,ce)|0,C=(C=C+Math.imul(pt,ke)|0)+Math.imul(bt,ce)|0,k=k+Math.imul(bt,ke)|0,w=w+Math.imul(Y,$t)|0,C=(C=C+Math.imul(Y,Te)|0)+Math.imul(et,$t)|0,k=k+Math.imul(et,Te)|0,w=w+Math.imul(gt,ue)|0,C=(C=C+Math.imul(gt,Fe)|0)+Math.imul(ut,ue)|0,k=k+Math.imul(ut,Fe)|0,w=w+Math.imul(At,Le)|0,C=(C=C+Math.imul(At,Oe)|0)+Math.imul(vt,Le)|0,k=k+Math.imul(vt,Oe)|0,w=w+Math.imul(_t,We)|0,C=(C=C+Math.imul(_t,It)|0)+Math.imul(Ct,We)|0,k=k+Math.imul(Ct,It)|0,w=w+Math.imul(rt,jt)|0,C=(C=C+Math.imul(rt,ae)|0)+Math.imul(mt,jt)|0,k=k+Math.imul(mt,ae)|0,w=w+Math.imul(ct,se)|0,C=(C=C+Math.imul(ct,ve)|0)+Math.imul(W,se)|0,k=k+Math.imul(W,ve)|0;var Tt=(H+(w=w+Math.imul(ot,Ie)|0)|0)+((8191&(C=(C=C+Math.imul(ot,fe)|0)+Math.imul(dt,Ie)|0))<<13)|0;H=((k=k+Math.imul(dt,fe)|0)+(C>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,w=Math.imul(Jt,le),C=(C=Math.imul(Jt,ye))+Math.imul(Kt,le)|0,k=Math.imul(Kt,ye),w=w+Math.imul(Ot,ce)|0,C=(C=C+Math.imul(Ot,ke)|0)+Math.imul(zt,ce)|0,k=k+Math.imul(zt,ke)|0,w=w+Math.imul(pt,$t)|0,C=(C=C+Math.imul(pt,Te)|0)+Math.imul(bt,$t)|0,k=k+Math.imul(bt,Te)|0,w=w+Math.imul(Y,ue)|0,C=(C=C+Math.imul(Y,Fe)|0)+Math.imul(et,ue)|0,k=k+Math.imul(et,Fe)|0,w=w+Math.imul(gt,Le)|0,C=(C=C+Math.imul(gt,Oe)|0)+Math.imul(ut,Le)|0,k=k+Math.imul(ut,Oe)|0,w=w+Math.imul(At,We)|0,C=(C=C+Math.imul(At,It)|0)+Math.imul(vt,We)|0,k=k+Math.imul(vt,It)|0,w=w+Math.imul(_t,jt)|0,C=(C=C+Math.imul(_t,ae)|0)+Math.imul(Ct,jt)|0,k=k+Math.imul(Ct,ae)|0,w=w+Math.imul(rt,se)|0,C=(C=C+Math.imul(rt,ve)|0)+Math.imul(mt,se)|0,k=k+Math.imul(mt,ve)|0;var Ht=(H+(w=w+Math.imul(ct,Ie)|0)|0)+((8191&(C=(C=C+Math.imul(ct,fe)|0)+Math.imul(W,Ie)|0))<<13)|0;H=((k=k+Math.imul(W,fe)|0)+(C>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,w=Math.imul(Jt,ce),C=(C=Math.imul(Jt,ke))+Math.imul(Kt,ce)|0,k=Math.imul(Kt,ke),w=w+Math.imul(Ot,$t)|0,C=(C=C+Math.imul(Ot,Te)|0)+Math.imul(zt,$t)|0,k=k+Math.imul(zt,Te)|0,w=w+Math.imul(pt,ue)|0,C=(C=C+Math.imul(pt,Fe)|0)+Math.imul(bt,ue)|0,k=k+Math.imul(bt,Fe)|0,w=w+Math.imul(Y,Le)|0,C=(C=C+Math.imul(Y,Oe)|0)+Math.imul(et,Le)|0,k=k+Math.imul(et,Oe)|0,w=w+Math.imul(gt,We)|0,C=(C=C+Math.imul(gt,It)|0)+Math.imul(ut,We)|0,k=k+Math.imul(ut,It)|0,w=w+Math.imul(At,jt)|0,C=(C=C+Math.imul(At,ae)|0)+Math.imul(vt,jt)|0,k=k+Math.imul(vt,ae)|0,w=w+Math.imul(_t,se)|0,C=(C=C+Math.imul(_t,ve)|0)+Math.imul(Ct,se)|0,k=k+Math.imul(Ct,ve)|0;var re=(H+(w=w+Math.imul(rt,Ie)|0)|0)+((8191&(C=(C=C+Math.imul(rt,fe)|0)+Math.imul(mt,Ie)|0))<<13)|0;H=((k=k+Math.imul(mt,fe)|0)+(C>>>13)|0)+(re>>>26)|0,re&=67108863,w=Math.imul(Jt,$t),C=(C=Math.imul(Jt,Te))+Math.imul(Kt,$t)|0,k=Math.imul(Kt,Te),w=w+Math.imul(Ot,ue)|0,C=(C=C+Math.imul(Ot,Fe)|0)+Math.imul(zt,ue)|0,k=k+Math.imul(zt,Fe)|0,w=w+Math.imul(pt,Le)|0,C=(C=C+Math.imul(pt,Oe)|0)+Math.imul(bt,Le)|0,k=k+Math.imul(bt,Oe)|0,w=w+Math.imul(Y,We)|0,C=(C=C+Math.imul(Y,It)|0)+Math.imul(et,We)|0,k=k+Math.imul(et,It)|0,w=w+Math.imul(gt,jt)|0,C=(C=C+Math.imul(gt,ae)|0)+Math.imul(ut,jt)|0,k=k+Math.imul(ut,ae)|0,w=w+Math.imul(At,se)|0,C=(C=C+Math.imul(At,ve)|0)+Math.imul(vt,se)|0,k=k+Math.imul(vt,ve)|0;var Qt=(H+(w=w+Math.imul(_t,Ie)|0)|0)+((8191&(C=(C=C+Math.imul(_t,fe)|0)+Math.imul(Ct,Ie)|0))<<13)|0;H=((k=k+Math.imul(Ct,fe)|0)+(C>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,w=Math.imul(Jt,ue),C=(C=Math.imul(Jt,Fe))+Math.imul(Kt,ue)|0,k=Math.imul(Kt,Fe),w=w+Math.imul(Ot,Le)|0,C=(C=C+Math.imul(Ot,Oe)|0)+Math.imul(zt,Le)|0,k=k+Math.imul(zt,Oe)|0,w=w+Math.imul(pt,We)|0,C=(C=C+Math.imul(pt,It)|0)+Math.imul(bt,We)|0,k=k+Math.imul(bt,It)|0,w=w+Math.imul(Y,jt)|0,C=(C=C+Math.imul(Y,ae)|0)+Math.imul(et,jt)|0,k=k+Math.imul(et,ae)|0,w=w+Math.imul(gt,se)|0,C=(C=C+Math.imul(gt,ve)|0)+Math.imul(ut,se)|0,k=k+Math.imul(ut,ve)|0;var he=(H+(w=w+Math.imul(At,Ie)|0)|0)+((8191&(C=(C=C+Math.imul(At,fe)|0)+Math.imul(vt,Ie)|0))<<13)|0;H=((k=k+Math.imul(vt,fe)|0)+(C>>>13)|0)+(he>>>26)|0,he&=67108863,w=Math.imul(Jt,Le),C=(C=Math.imul(Jt,Oe))+Math.imul(Kt,Le)|0,k=Math.imul(Kt,Oe),w=w+Math.imul(Ot,We)|0,C=(C=C+Math.imul(Ot,It)|0)+Math.imul(zt,We)|0,k=k+Math.imul(zt,It)|0,w=w+Math.imul(pt,jt)|0,C=(C=C+Math.imul(pt,ae)|0)+Math.imul(bt,jt)|0,k=k+Math.imul(bt,ae)|0,w=w+Math.imul(Y,se)|0,C=(C=C+Math.imul(Y,ve)|0)+Math.imul(et,se)|0,k=k+Math.imul(et,ve)|0;var Ee=(H+(w=w+Math.imul(gt,Ie)|0)|0)+((8191&(C=(C=C+Math.imul(gt,fe)|0)+Math.imul(ut,Ie)|0))<<13)|0;H=((k=k+Math.imul(ut,fe)|0)+(C>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,w=Math.imul(Jt,We),C=(C=Math.imul(Jt,It))+Math.imul(Kt,We)|0,k=Math.imul(Kt,It),w=w+Math.imul(Ot,jt)|0,C=(C=C+Math.imul(Ot,ae)|0)+Math.imul(zt,jt)|0,k=k+Math.imul(zt,ae)|0,w=w+Math.imul(pt,se)|0,C=(C=C+Math.imul(pt,ve)|0)+Math.imul(bt,se)|0,k=k+Math.imul(bt,ve)|0;var Ae=(H+(w=w+Math.imul(Y,Ie)|0)|0)+((8191&(C=(C=C+Math.imul(Y,fe)|0)+Math.imul(et,Ie)|0))<<13)|0;H=((k=k+Math.imul(et,fe)|0)+(C>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,w=Math.imul(Jt,jt),C=(C=Math.imul(Jt,ae))+Math.imul(Kt,jt)|0,k=Math.imul(Kt,ae),w=w+Math.imul(Ot,se)|0,C=(C=C+Math.imul(Ot,ve)|0)+Math.imul(zt,se)|0,k=k+Math.imul(zt,ve)|0;var ti=(H+(w=w+Math.imul(pt,Ie)|0)|0)+((8191&(C=(C=C+Math.imul(pt,fe)|0)+Math.imul(bt,Ie)|0))<<13)|0;H=((k=k+Math.imul(bt,fe)|0)+(C>>>13)|0)+(ti>>>26)|0,ti&=67108863,w=Math.imul(Jt,se),C=(C=Math.imul(Jt,ve))+Math.imul(Kt,se)|0,k=Math.imul(Kt,ve);var Ue=(H+(w=w+Math.imul(Ot,Ie)|0)|0)+((8191&(C=(C=C+Math.imul(Ot,fe)|0)+Math.imul(zt,Ie)|0))<<13)|0;H=((k=k+Math.imul(zt,fe)|0)+(C>>>13)|0)+(Ue>>>26)|0,Ue&=67108863;var we=(H+(w=Math.imul(Jt,Ie))|0)+((8191&(C=(C=Math.imul(Jt,fe))+Math.imul(Kt,Ie)|0))<<13)|0;return H=((k=Math.imul(Kt,fe))+(C>>>13)|0)+(we>>>26)|0,we&=67108863,F[0]=Ye,F[1]=Ve,F[2]=ii,F[3]=Ke,F[4]=pr,F[5]=Je,F[6]=oi,F[7]=cr,F[8]=ki,F[9]=Tt,F[10]=Ht,F[11]=re,F[12]=Qt,F[13]=he,F[14]=Ee,F[15]=Ae,F[16]=ti,F[17]=Ue,F[18]=we,H!==0&&(F[19]=H,Z.length++),Z};function x(B,N,Z){return new S().mulp(B,N,Z)}function S(B,N){this.x=B,this.y=N}Math.imul||(v=_),o.prototype.mulTo=function(B,N){var Z=this.length+B.length;return this.length===10&&B.length===10?v(this,B,N):Z<63?_(this,B,N):Z<1024?function(w,C,k){k.negative=C.negative^w.negative,k.length=w.length+C.length;for(var T=0,R=0,F=0;F<k.length-1;F++){var H=R;R=0;for(var it=67108863&T,ot=Math.min(F,C.length-1),dt=Math.max(0,F-w.length+1);dt<=ot;dt++){var $=F-dt,ct=(0|w.words[$])*(0|C.words[dt]),W=67108863&ct;it=67108863&(W=W+it|0),R+=(H=(H=H+(ct/67108864|0)|0)+(W>>>26)|0)>>>26,H&=67108863}k.words[F]=it,T=H,H=R}return T!==0?k.words[F]=T:k.length--,k.strip()}(this,B,N):x(this,B,N)},S.prototype.makeRBT=function(B){for(var N=new Array(B),Z=o.prototype._countBits(B)-1,w=0;w<B;w++)N[w]=this.revBin(w,Z,B);return N},S.prototype.revBin=function(B,N,Z){if(B===0||B===Z-1)return B;for(var w=0,C=0;C<N;C++)w|=(1&B)<<N-C-1,B>>=1;return w},S.prototype.permute=function(B,N,Z,w,C,k){for(var T=0;T<k;T++)w[T]=N[B[T]],C[T]=Z[B[T]]},S.prototype.transform=function(B,N,Z,w,C,k){this.permute(k,B,N,Z,w,C);for(var T=1;T<C;T<<=1)for(var R=T<<1,F=Math.cos(2*Math.PI/R),H=Math.sin(2*Math.PI/R),it=0;it<C;it+=R)for(var ot=F,dt=H,$=0;$<T;$++){var ct=Z[it+$],W=w[it+$],q=Z[it+$+T],rt=w[it+$+T],mt=ot*q-dt*rt;rt=ot*rt+dt*q,q=mt,Z[it+$]=ct+q,w[it+$]=W+rt,Z[it+$+T]=ct-q,w[it+$+T]=W-rt,$!==R&&(mt=F*ot-H*dt,dt=F*dt+H*ot,ot=mt)}},S.prototype.guessLen13b=function(B,N){var Z=1|Math.max(N,B),w=1&Z,C=0;for(Z=Z/2|0;Z;Z>>>=1)C++;return 1<<C+1+w},S.prototype.conjugate=function(B,N,Z){if(!(Z<=1))for(var w=0;w<Z/2;w++){var C=B[w];B[w]=B[Z-w-1],B[Z-w-1]=C,C=N[w],N[w]=-N[Z-w-1],N[Z-w-1]=-C}},S.prototype.normalize13b=function(B,N){for(var Z=0,w=0;w<N/2;w++){var C=8192*Math.round(B[2*w+1]/N)+Math.round(B[2*w]/N)+Z;B[w]=67108863&C,Z=C<67108864?0:C/67108864|0}return B},S.prototype.convert13b=function(B,N,Z,w){for(var C=0,k=0;k<N;k++)C+=0|B[k],Z[2*k]=8191&C,C>>>=13,Z[2*k+1]=8191&C,C>>>=13;for(k=2*N;k<w;++k)Z[k]=0;s(C===0),s((-8192&C)==0)},S.prototype.stub=function(B){for(var N=new Array(B),Z=0;Z<B;Z++)N[Z]=0;return N},S.prototype.mulp=function(B,N,Z){var w=2*this.guessLen13b(B.length,N.length),C=this.makeRBT(w),k=this.stub(w),T=new Array(w),R=new Array(w),F=new Array(w),H=new Array(w),it=new Array(w),ot=new Array(w),dt=Z.words;dt.length=w,this.convert13b(B.words,B.length,T,w),this.convert13b(N.words,N.length,H,w),this.transform(T,k,R,F,w,C),this.transform(H,k,it,ot,w,C);for(var $=0;$<w;$++){var ct=R[$]*it[$]-F[$]*ot[$];F[$]=R[$]*ot[$]+F[$]*it[$],R[$]=ct}return this.conjugate(R,F,w),this.transform(R,F,dt,k,w,C),this.conjugate(dt,k,w),this.normalize13b(dt,w),Z.negative=B.negative^N.negative,Z.length=B.length+N.length,Z.strip()},o.prototype.mul=function(B){var N=new o(null);return N.words=new Array(this.length+B.length),this.mulTo(B,N)},o.prototype.mulf=function(B){var N=new o(null);return N.words=new Array(this.length+B.length),x(this,B,N)},o.prototype.imul=function(B){return this.clone().mulTo(B,this)},o.prototype.imuln=function(B){s(typeof B=="number"),s(B<67108864);for(var N=0,Z=0;Z<this.length;Z++){var w=(0|this.words[Z])*B,C=(67108863&w)+(67108863&N);N>>=26,N+=w/67108864|0,N+=C>>>26,this.words[Z]=67108863&C}return N!==0&&(this.words[Z]=N,this.length++),this},o.prototype.muln=function(B){return this.clone().imuln(B)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(B){var N=function(k){for(var T=new Array(k.bitLength()),R=0;R<T.length;R++){var F=R/26|0,H=R%26;T[R]=(k.words[F]&1<<H)>>>H}return T}(B);if(N.length===0)return new o(1);for(var Z=this,w=0;w<N.length&&N[w]===0;w++,Z=Z.sqr());if(++w<N.length)for(var C=Z.sqr();w<N.length;w++,C=C.sqr())N[w]!==0&&(Z=Z.mul(C));return Z},o.prototype.iushln=function(B){s(typeof B=="number"&&B>=0);var N,Z=B%26,w=(B-Z)/26,C=67108863>>>26-Z<<26-Z;if(Z!==0){var k=0;for(N=0;N<this.length;N++){var T=this.words[N]&C,R=(0|this.words[N])-T<<Z;this.words[N]=R|k,k=T>>>26-Z}k&&(this.words[N]=k,this.length++)}if(w!==0){for(N=this.length-1;N>=0;N--)this.words[N+w]=this.words[N];for(N=0;N<w;N++)this.words[N]=0;this.length+=w}return this.strip()},o.prototype.ishln=function(B){return s(this.negative===0),this.iushln(B)},o.prototype.iushrn=function(B,N,Z){var w;s(typeof B=="number"&&B>=0),w=N?(N-N%26)/26:0;var C=B%26,k=Math.min((B-C)/26,this.length),T=67108863^67108863>>>C<<C,R=Z;if(w-=k,w=Math.max(0,w),R){for(var F=0;F<k;F++)R.words[F]=this.words[F];R.length=k}if(k!==0)if(this.length>k)for(this.length-=k,F=0;F<this.length;F++)this.words[F]=this.words[F+k];else this.words[0]=0,this.length=1;var H=0;for(F=this.length-1;F>=0&&(H!==0||F>=w);F--){var it=0|this.words[F];this.words[F]=H<<26-C|it>>>C,H=it&T}return R&&H!==0&&(R.words[R.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(B,N,Z){return s(this.negative===0),this.iushrn(B,N,Z)},o.prototype.shln=function(B){return this.clone().ishln(B)},o.prototype.ushln=function(B){return this.clone().iushln(B)},o.prototype.shrn=function(B){return this.clone().ishrn(B)},o.prototype.ushrn=function(B){return this.clone().iushrn(B)},o.prototype.testn=function(B){s(typeof B=="number"&&B>=0);var N=B%26,Z=(B-N)/26,w=1<<N;return!(this.length<=Z)&&!!(this.words[Z]&w)},o.prototype.imaskn=function(B){s(typeof B=="number"&&B>=0);var N=B%26,Z=(B-N)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(N!==0&&Z++,this.length=Math.min(Z,this.length),N!==0){var w=67108863^67108863>>>N<<N;this.words[this.length-1]&=w}return this.strip()},o.prototype.maskn=function(B){return this.clone().imaskn(B)},o.prototype.iaddn=function(B){return s(typeof B=="number"),s(B<67108864),B<0?this.isubn(-B):this.negative!==0?this.length===1&&(0|this.words[0])<B?(this.words[0]=B-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(B),this.negative=1,this):this._iaddn(B)},o.prototype._iaddn=function(B){this.words[0]+=B;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},o.prototype.isubn=function(B){if(s(typeof B=="number"),s(B<67108864),B<0)return this.iaddn(-B);if(this.negative!==0)return this.negative=0,this.iaddn(B),this.negative=1,this;if(this.words[0]-=B,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},o.prototype.addn=function(B){return this.clone().iaddn(B)},o.prototype.subn=function(B){return this.clone().isubn(B)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(B,N,Z){var w,C,k=B.length+Z;this._expand(k);var T=0;for(w=0;w<B.length;w++){C=(0|this.words[w+Z])+T;var R=(0|B.words[w])*N;T=((C-=67108863&R)>>26)-(R/67108864|0),this.words[w+Z]=67108863&C}for(;w<this.length-Z;w++)T=(C=(0|this.words[w+Z])+T)>>26,this.words[w+Z]=67108863&C;if(T===0)return this.strip();for(s(T===-1),T=0,w=0;w<this.length;w++)T=(C=-(0|this.words[w])+T)>>26,this.words[w]=67108863&C;return this.negative=1,this.strip()},o.prototype._wordDiv=function(B,N){var Z=(this.length,B.length),w=this.clone(),C=B,k=0|C.words[C.length-1];(Z=26-this._countBits(k))!==0&&(C=C.ushln(Z),w.iushln(Z),k=0|C.words[C.length-1]);var T,R=w.length-C.length;if(N!=="mod"){(T=new o(null)).length=R+1,T.words=new Array(T.length);for(var F=0;F<T.length;F++)T.words[F]=0}var H=w.clone()._ishlnsubmul(C,1,R);H.negative===0&&(w=H,T&&(T.words[R]=1));for(var it=R-1;it>=0;it--){var ot=67108864*(0|w.words[C.length+it])+(0|w.words[C.length+it-1]);for(ot=Math.min(ot/k|0,67108863),w._ishlnsubmul(C,ot,it);w.negative!==0;)ot--,w.negative=0,w._ishlnsubmul(C,1,it),w.isZero()||(w.negative^=1);T&&(T.words[it]=ot)}return T&&T.strip(),w.strip(),N!=="div"&&Z!==0&&w.iushrn(Z),{div:T||null,mod:w}},o.prototype.divmod=function(B,N,Z){return s(!B.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:this.negative!==0&&B.negative===0?(k=this.neg().divmod(B,N),N!=="mod"&&(w=k.div.neg()),N!=="div"&&(C=k.mod.neg(),Z&&C.negative!==0&&C.iadd(B)),{div:w,mod:C}):this.negative===0&&B.negative!==0?(k=this.divmod(B.neg(),N),N!=="mod"&&(w=k.div.neg()),{div:w,mod:k.mod}):this.negative&B.negative?(k=this.neg().divmod(B.neg(),N),N!=="div"&&(C=k.mod.neg(),Z&&C.negative!==0&&C.isub(B)),{div:k.div,mod:C}):B.length>this.length||this.cmp(B)<0?{div:new o(0),mod:this}:B.length===1?N==="div"?{div:this.divn(B.words[0]),mod:null}:N==="mod"?{div:null,mod:new o(this.modn(B.words[0]))}:{div:this.divn(B.words[0]),mod:new o(this.modn(B.words[0]))}:this._wordDiv(B,N);var w,C,k},o.prototype.div=function(B){return this.divmod(B,"div",!1).div},o.prototype.mod=function(B){return this.divmod(B,"mod",!1).mod},o.prototype.umod=function(B){return this.divmod(B,"mod",!0).mod},o.prototype.divRound=function(B){var N=this.divmod(B);if(N.mod.isZero())return N.div;var Z=N.div.negative!==0?N.mod.isub(B):N.mod,w=B.ushrn(1),C=B.andln(1),k=Z.cmp(w);return k<0||C===1&&k===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},o.prototype.modn=function(B){s(B<=67108863);for(var N=(1<<26)%B,Z=0,w=this.length-1;w>=0;w--)Z=(N*Z+(0|this.words[w]))%B;return Z},o.prototype.idivn=function(B){s(B<=67108863);for(var N=0,Z=this.length-1;Z>=0;Z--){var w=(0|this.words[Z])+67108864*N;this.words[Z]=w/B|0,N=w%B}return this.strip()},o.prototype.divn=function(B){return this.clone().idivn(B)},o.prototype.egcd=function(B){s(B.negative===0),s(!B.isZero());var N=this,Z=B.clone();N=N.negative!==0?N.umod(B):N.clone();for(var w=new o(1),C=new o(0),k=new o(0),T=new o(1),R=0;N.isEven()&&Z.isEven();)N.iushrn(1),Z.iushrn(1),++R;for(var F=Z.clone(),H=N.clone();!N.isZero();){for(var it=0,ot=1;!(N.words[0]&ot)&&it<26;++it,ot<<=1);if(it>0)for(N.iushrn(it);it-- >0;)(w.isOdd()||C.isOdd())&&(w.iadd(F),C.isub(H)),w.iushrn(1),C.iushrn(1);for(var dt=0,$=1;!(Z.words[0]&$)&&dt<26;++dt,$<<=1);if(dt>0)for(Z.iushrn(dt);dt-- >0;)(k.isOdd()||T.isOdd())&&(k.iadd(F),T.isub(H)),k.iushrn(1),T.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),w.isub(k),C.isub(T)):(Z.isub(N),k.isub(w),T.isub(C))}return{a:k,b:T,gcd:Z.iushln(R)}},o.prototype._invmp=function(B){s(B.negative===0),s(!B.isZero());var N=this,Z=B.clone();N=N.negative!==0?N.umod(B):N.clone();for(var w,C=new o(1),k=new o(0),T=Z.clone();N.cmpn(1)>0&&Z.cmpn(1)>0;){for(var R=0,F=1;!(N.words[0]&F)&&R<26;++R,F<<=1);if(R>0)for(N.iushrn(R);R-- >0;)C.isOdd()&&C.iadd(T),C.iushrn(1);for(var H=0,it=1;!(Z.words[0]&it)&&H<26;++H,it<<=1);if(H>0)for(Z.iushrn(H);H-- >0;)k.isOdd()&&k.iadd(T),k.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),C.isub(k)):(Z.isub(N),k.isub(C))}return(w=N.cmpn(1)===0?C:k).cmpn(0)<0&&w.iadd(B),w},o.prototype.gcd=function(B){if(this.isZero())return B.abs();if(B.isZero())return this.abs();var N=this.clone(),Z=B.clone();N.negative=0,Z.negative=0;for(var w=0;N.isEven()&&Z.isEven();w++)N.iushrn(1),Z.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var C=N.cmp(Z);if(C<0){var k=N;N=Z,Z=k}else if(C===0||Z.cmpn(1)===0)break;N.isub(Z)}return Z.iushln(w)},o.prototype.invm=function(B){return this.egcd(B).a.umod(B)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(B){return this.words[0]&B},o.prototype.bincn=function(B){s(typeof B=="number");var N=B%26,Z=(B-N)/26,w=1<<N;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=w,this;for(var C=w,k=Z;C!==0&&k<this.length;k++){var T=0|this.words[k];C=(T+=C)>>>26,T&=67108863,this.words[k]=T}return C!==0&&(this.words[k]=C,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(B){var N,Z=B<0;if(this.negative!==0&&!Z)return-1;if(this.negative===0&&Z)return 1;if(this.strip(),this.length>1)N=1;else{Z&&(B=-B),s(B<=67108863,"Number is too big");var w=0|this.words[0];N=w===B?0:w<B?-1:1}return this.negative!==0?0|-N:N},o.prototype.cmp=function(B){if(this.negative!==0&&B.negative===0)return-1;if(this.negative===0&&B.negative!==0)return 1;var N=this.ucmp(B);return this.negative!==0?0|-N:N},o.prototype.ucmp=function(B){if(this.length>B.length)return 1;if(this.length<B.length)return-1;for(var N=0,Z=this.length-1;Z>=0;Z--){var w=0|this.words[Z],C=0|B.words[Z];if(w!==C){w<C?N=-1:w>C&&(N=1);break}}return N},o.prototype.gtn=function(B){return this.cmpn(B)===1},o.prototype.gt=function(B){return this.cmp(B)===1},o.prototype.gten=function(B){return this.cmpn(B)>=0},o.prototype.gte=function(B){return this.cmp(B)>=0},o.prototype.ltn=function(B){return this.cmpn(B)===-1},o.prototype.lt=function(B){return this.cmp(B)===-1},o.prototype.lten=function(B){return this.cmpn(B)<=0},o.prototype.lte=function(B){return this.cmp(B)<=0},o.prototype.eqn=function(B){return this.cmpn(B)===0},o.prototype.eq=function(B){return this.cmp(B)===0},o.red=function(B){return new tt(B)},o.prototype.toRed=function(B){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),B.convertTo(this)._forceRed(B)},o.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(B){return this.red=B,this},o.prototype.forceRed=function(B){return s(!this.red,"Already a number in reduction context"),this._forceRed(B)},o.prototype.redAdd=function(B){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,B)},o.prototype.redIAdd=function(B){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,B)},o.prototype.redSub=function(B){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,B)},o.prototype.redISub=function(B){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,B)},o.prototype.redShl=function(B){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,B)},o.prototype.redMul=function(B){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,B),this.red.mul(this,B)},o.prototype.redIMul=function(B){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,B),this.red.imul(this,B)},o.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(B){return s(this.red&&!B.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,B)};var O={k256:null,p224:null,p192:null,p25519:null};function D(B,N){this.name=B,this.p=new o(N,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function z(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function V(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function G(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function tt(B){if(typeof B=="string"){var N=o._prime(B);this.m=N.p,this.prime=N}else s(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}function K(B){tt.call(this,B),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}D.prototype._tmp=function(){var B=new o(null);return B.words=new Array(Math.ceil(this.n/13)),B},D.prototype.ireduce=function(B){var N,Z=B;do this.split(Z,this.tmp),N=(Z=(Z=this.imulK(Z)).iadd(this.tmp)).bitLength();while(N>this.n);var w=N<this.n?-1:Z.ucmp(this.p);return w===0?(Z.words[0]=0,Z.length=1):w>0?Z.isub(this.p):Z.strip!==void 0?Z.strip():Z._strip(),Z},D.prototype.split=function(B,N){B.iushrn(this.n,0,N)},D.prototype.imulK=function(B){return B.imul(this.k)},a(U,D),U.prototype.split=function(B,N){for(var Z=Math.min(B.length,9),w=0;w<Z;w++)N.words[w]=B.words[w];if(N.length=Z,B.length<=9)return B.words[0]=0,void(B.length=1);var C=B.words[9];for(N.words[N.length++]=4194303&C,w=10;w<B.length;w++){var k=0|B.words[w];B.words[w-10]=(4194303&k)<<4|C>>>22,C=k}C>>>=22,B.words[w-10]=C,C===0&&B.length>10?B.length-=10:B.length-=9},U.prototype.imulK=function(B){B.words[B.length]=0,B.words[B.length+1]=0,B.length+=2;for(var N=0,Z=0;Z<B.length;Z++){var w=0|B.words[Z];N+=977*w,B.words[Z]=67108863&N,N=64*w+(N/67108864|0)}return B.words[B.length-1]===0&&(B.length--,B.words[B.length-1]===0&&B.length--),B},a(z,D),a(V,D),a(G,D),G.prototype.imulK=function(B){for(var N=0,Z=0;Z<B.length;Z++){var w=19*(0|B.words[Z])+N,C=67108863&w;w>>>=26,B.words[Z]=C,N=w}return N!==0&&(B.words[B.length++]=N),B},o._prime=function(B){if(O[B])return O[B];var N;if(B==="k256")N=new U;else if(B==="p224")N=new z;else if(B==="p192")N=new V;else{if(B!=="p25519")throw new Error("Unknown prime "+B);N=new G}return O[B]=N,N},tt.prototype._verify1=function(B){s(B.negative===0,"red works only with positives"),s(B.red,"red works only with red numbers")},tt.prototype._verify2=function(B,N){s((B.negative|N.negative)==0,"red works only with positives"),s(B.red&&B.red===N.red,"red works only with red numbers")},tt.prototype.imod=function(B){return this.prime?this.prime.ireduce(B)._forceRed(this):B.umod(this.m)._forceRed(this)},tt.prototype.neg=function(B){return B.isZero()?B.clone():this.m.sub(B)._forceRed(this)},tt.prototype.add=function(B,N){this._verify2(B,N);var Z=B.add(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},tt.prototype.iadd=function(B,N){this._verify2(B,N);var Z=B.iadd(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},tt.prototype.sub=function(B,N){this._verify2(B,N);var Z=B.sub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},tt.prototype.isub=function(B,N){this._verify2(B,N);var Z=B.isub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},tt.prototype.shl=function(B,N){return this._verify1(B),this.imod(B.ushln(N))},tt.prototype.imul=function(B,N){return this._verify2(B,N),this.imod(B.imul(N))},tt.prototype.mul=function(B,N){return this._verify2(B,N),this.imod(B.mul(N))},tt.prototype.isqr=function(B){return this.imul(B,B.clone())},tt.prototype.sqr=function(B){return this.mul(B,B)},tt.prototype.sqrt=function(B){if(B.isZero())return B.clone();var N=this.m.andln(3);if(s(N%2==1),N===3){var Z=this.m.add(new o(1)).iushrn(2);return this.pow(B,Z)}for(var w=this.m.subn(1),C=0;!w.isZero()&&w.andln(1)===0;)C++,w.iushrn(1);s(!w.isZero());var k=new o(1).toRed(this),T=k.redNeg(),R=this.m.subn(1).iushrn(1),F=this.m.bitLength();for(F=new o(2*F*F).toRed(this);this.pow(F,R).cmp(T)!==0;)F.redIAdd(T);for(var H=this.pow(F,w),it=this.pow(B,w.addn(1).iushrn(1)),ot=this.pow(B,w),dt=C;ot.cmp(k)!==0;){for(var $=ot,ct=0;$.cmp(k)!==0;ct++)$=$.redSqr();s(ct<dt);var W=this.pow(H,new o(1).iushln(dt-ct-1));it=it.redMul(W),H=W.redSqr(),ot=ot.redMul(H),dt=ct}return it},tt.prototype.invm=function(B){var N=B._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},tt.prototype.pow=function(B,N){if(N.isZero())return new o(1).toRed(this);if(N.cmpn(1)===0)return B.clone();var Z=new Array(16);Z[0]=new o(1).toRed(this),Z[1]=B;for(var w=2;w<Z.length;w++)Z[w]=this.mul(Z[w-1],B);var C=Z[0],k=0,T=0,R=N.bitLength()%26;for(R===0&&(R=26),w=N.length-1;w>=0;w--){for(var F=N.words[w],H=R-1;H>=0;H--){var it=F>>H&1;C!==Z[0]&&(C=this.sqr(C)),it!==0||k!==0?(k<<=1,k|=it,(++T===4||w===0&&H===0)&&(C=this.mul(C,Z[k]),T=0,k=0)):T=0}R=26}return C},tt.prototype.convertTo=function(B){var N=B.umod(this.m);return N===B?N.clone():N},tt.prototype.convertFrom=function(B){var N=B.clone();return N.red=null,N},o.mont=function(B){return new K(B)},a(K,tt),K.prototype.convertTo=function(B){return this.imod(B.ushln(this.shift))},K.prototype.convertFrom=function(B){var N=this.imod(B.mul(this.rinv));return N.red=null,N},K.prototype.imul=function(B,N){if(B.isZero()||N.isZero())return B.words[0]=0,B.length=1,B;var Z=B.imul(N),w=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=Z.isub(w).iushrn(this.shift),k=C;return C.cmp(this.m)>=0?k=C.isub(this.m):C.cmpn(0)<0&&(k=C.iadd(this.m)),k._forceRed(this)},K.prototype.mul=function(B,N){if(B.isZero()||N.isZero())return new o(0)._forceRed(this);var Z=B.mul(N),w=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=Z.isub(w).iushrn(this.shift),k=C;return C.cmp(this.m)>=0?k=C.isub(this.m):C.cmpn(0)<0&&(k=C.iadd(this.m)),k._forceRed(this)},K.prototype.invm=function(B){return this.imod(B._invmp(this.m).mul(this.r2))._forceRed(this)}})(t===void 0||t)},{buffer:188}],185:[function(n,t,e){"use strict";e.byteLength=function(d){var p=c(d),g=p[0],m=p[1];return 3*(g+m)/4-m},e.toByteArray=function(d){var p,g,m=c(d),_=m[0],v=m[1],x=new s(function(D,U,z){return 3*(U+z)/4-z}(0,_,v)),S=0,O=v>0?_-4:_;for(g=0;g<O;g+=4)p=r[d.charCodeAt(g)]<<18|r[d.charCodeAt(g+1)]<<12|r[d.charCodeAt(g+2)]<<6|r[d.charCodeAt(g+3)],x[S++]=p>>16&255,x[S++]=p>>8&255,x[S++]=255&p;return v===2&&(p=r[d.charCodeAt(g)]<<2|r[d.charCodeAt(g+1)]>>4,x[S++]=255&p),v===1&&(p=r[d.charCodeAt(g)]<<10|r[d.charCodeAt(g+1)]<<4|r[d.charCodeAt(g+2)]>>2,x[S++]=p>>8&255,x[S++]=255&p),x},e.fromByteArray=function(d){for(var p,g=d.length,m=g%3,_=[],v=0,x=g-m;v<x;v+=16383)_.push(h(d,v,v+16383>x?x:v+16383));return m===1?(p=d[g-1],_.push(i[p>>2]+i[p<<4&63]+"==")):m===2&&(p=(d[g-2]<<8)+d[g-1],_.push(i[p>>10]+i[p>>4&63]+i[p<<2&63]+"=")),_.join("")};for(var i=[],r=[],s=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)i[o]=a[o],r[a.charCodeAt(o)]=o;function c(d){var p=d.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=d.indexOf("=");return g===-1&&(g=p),[g,g===p?0:4-g%4]}function h(d,p,g){for(var m,_,v=[],x=p;x<g;x+=3)m=(d[x]<<16&16711680)+(d[x+1]<<8&65280)+(255&d[x+2]),v.push(i[(_=m)>>18&63]+i[_>>12&63]+i[_>>6&63]+i[63&_]);return v.join("")}r[45]=62,r[95]=63},{}],186:[function(n,t,e){"use strict";(function(i,r){function s(w,C){if(!w)throw new Error(C||"Assertion failed")}function a(w,C){w.super_=C;var k=function(){};k.prototype=C.prototype,w.prototype=new k,w.prototype.constructor=w}function o(w,C,k){if(o.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&(C!=="le"&&C!=="be"||(k=C,C=10),this._init(w||0,C||10,k||"be"))}var l;typeof i=="object"?i.exports=o:(void 0).BN=o,o.BN=o,o.wordSize=26;try{l=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:n("buffer").Buffer}catch{}function c(w,C){var k=w.charCodeAt(C);return k>=48&&k<=57?k-48:k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:void s(!1,"Invalid character in "+w)}function h(w,C,k){var T=c(w,k);return k-1>=C&&(T|=c(w,k-1)<<4),T}function d(w,C,k,T){for(var R=0,F=0,H=Math.min(w.length,k),it=C;it<H;it++){var ot=w.charCodeAt(it)-48;R*=T,F=ot>=49?ot-49+10:ot>=17?ot-17+10:ot,s(ot>=0&&F<T,"Invalid character"),R+=F}return R}function p(w,C){w.words=C.words,w.length=C.length,w.negative=C.negative,w.red=C.red}if(o.isBN=function(w){return w instanceof o||w!==null&&typeof w=="object"&&w.constructor.wordSize===o.wordSize&&Array.isArray(w.words)},o.max=function(w,C){return w.cmp(C)>0?w:C},o.min=function(w,C){return w.cmp(C)<0?w:C},o.prototype._init=function(w,C,k){if(typeof w=="number")return this._initNumber(w,C,k);if(typeof w=="object")return this._initArray(w,C,k);C==="hex"&&(C=16),s(C===(0|C)&&C>=2&&C<=36);var T=0;(w=w.toString().replace(/\s+/g,""))[0]==="-"&&(T++,this.negative=1),T<w.length&&(C===16?this._parseHex(w,T,k):(this._parseBase(w,C,T),k==="le"&&this._initArray(this.toArray(),C,k)))},o.prototype._initNumber=function(w,C,k){w<0&&(this.negative=1,w=-w),w<67108864?(this.words=[67108863&w],this.length=1):w<4503599627370496?(this.words=[67108863&w,w/67108864&67108863],this.length=2):(s(w<9007199254740992),this.words=[67108863&w,w/67108864&67108863,1],this.length=3),k==="le"&&this._initArray(this.toArray(),C,k)},o.prototype._initArray=function(w,C,k){if(s(typeof w.length=="number"),w.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(w.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var R,F,H=0;if(k==="be")for(T=w.length-1,R=0;T>=0;T-=3)F=w[T]|w[T-1]<<8|w[T-2]<<16,this.words[R]|=F<<H&67108863,this.words[R+1]=F>>>26-H&67108863,(H+=24)>=26&&(H-=26,R++);else if(k==="le")for(T=0,R=0;T<w.length;T+=3)F=w[T]|w[T+1]<<8|w[T+2]<<16,this.words[R]|=F<<H&67108863,this.words[R+1]=F>>>26-H&67108863,(H+=24)>=26&&(H-=26,R++);return this._strip()},o.prototype._parseHex=function(w,C,k){this.length=Math.ceil((w.length-C)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var R,F=0,H=0;if(k==="be")for(T=w.length-1;T>=C;T-=2)R=h(w,C,T)<<F,this.words[H]|=67108863&R,F>=18?(F-=18,H+=1,this.words[H]|=R>>>26):F+=8;else for(T=(w.length-C)%2==0?C+1:C;T<w.length;T+=2)R=h(w,C,T)<<F,this.words[H]|=67108863&R,F>=18?(F-=18,H+=1,this.words[H]|=R>>>26):F+=8;this._strip()},o.prototype._parseBase=function(w,C,k){this.words=[0],this.length=1;for(var T=0,R=1;R<=67108863;R*=C)T++;T--,R=R/C|0;for(var F=w.length-k,H=F%T,it=Math.min(F,F-H)+k,ot=0,dt=k;dt<it;dt+=T)ot=d(w,dt,dt+T,C),this.imuln(R),this.words[0]+ot<67108864?this.words[0]+=ot:this._iaddn(ot);if(H!==0){var $=1;for(ot=d(w,dt,w.length,C),dt=0;dt<H;dt++)$*=C;this.imuln($),this.words[0]+ot<67108864?this.words[0]+=ot:this._iaddn(ot)}this._strip()},o.prototype.copy=function(w){w.words=new Array(this.length);for(var C=0;C<this.length;C++)w.words[C]=this.words[C];w.length=this.length,w.negative=this.negative,w.red=this.red},o.prototype._move=function(w){p(w,this)},o.prototype.clone=function(){var w=new o(null);return this.copy(w),w},o.prototype._expand=function(w){for(;this.length<w;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{o.prototype.inspect=g}else o.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(w,C){var k;if(C=0|C||1,(w=w||10)===16||w==="hex"){k="";for(var T=0,R=0,F=0;F<this.length;F++){var H=this.words[F],it=(16777215&(H<<T|R)).toString(16);R=H>>>24-T&16777215,(T+=2)>=26&&(T-=26,F--),k=R!==0||F!==this.length-1?m[6-it.length]+it+k:it+k}for(R!==0&&(k=R.toString(16)+k);k.length%C!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}if(w===(0|w)&&w>=2&&w<=36){var ot=_[w],dt=v[w];k="";var $=this.clone();for($.negative=0;!$.isZero();){var ct=$.modrn(dt).toString(w);k=($=$.idivn(dt)).isZero()?ct+k:m[ot-ct.length]+ct+k}for(this.isZero()&&(k="0"+k);k.length%C!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}s(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var w=this.words[0];return this.length===2?w+=67108864*this.words[1]:this.length===3&&this.words[2]===1?w+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-w:w},o.prototype.toJSON=function(){return this.toString(16,2)},l&&(o.prototype.toBuffer=function(w,C){return this.toArrayLike(l,w,C)}),o.prototype.toArray=function(w,C){return this.toArrayLike(Array,w,C)};function x(w,C,k){k.negative=C.negative^w.negative;var T=w.length+C.length|0;k.length=T,T=T-1|0;var R=0|w.words[0],F=0|C.words[0],H=R*F,it=67108863&H,ot=H/67108864|0;k.words[0]=it;for(var dt=1;dt<T;dt++){for(var $=ot>>>26,ct=67108863&ot,W=Math.min(dt,C.length-1),q=Math.max(0,dt-w.length+1);q<=W;q++){var rt=dt-q|0;$+=(H=(R=0|w.words[rt])*(F=0|C.words[q])+ct)/67108864|0,ct=67108863&H}k.words[dt]=0|ct,ot=0|$}return ot!==0?k.words[dt]=0|ot:k.length--,k._strip()}o.prototype.toArrayLike=function(w,C,k){this._strip();var T=this.byteLength(),R=k||Math.max(1,T);s(T<=R,"byte array longer than desired length"),s(R>0,"Requested array length <= 0");var F=function(H,it){return H.allocUnsafe?H.allocUnsafe(it):new H(it)}(w,R);return this["_toArrayLike"+(C==="le"?"LE":"BE")](F,T),F},o.prototype._toArrayLikeLE=function(w,C){for(var k=0,T=0,R=0,F=0;R<this.length;R++){var H=this.words[R]<<F|T;w[k++]=255&H,k<w.length&&(w[k++]=H>>8&255),k<w.length&&(w[k++]=H>>16&255),F===6?(k<w.length&&(w[k++]=H>>24&255),T=0,F=0):(T=H>>>24,F+=2)}if(k<w.length)for(w[k++]=T;k<w.length;)w[k++]=0},o.prototype._toArrayLikeBE=function(w,C){for(var k=w.length-1,T=0,R=0,F=0;R<this.length;R++){var H=this.words[R]<<F|T;w[k--]=255&H,k>=0&&(w[k--]=H>>8&255),k>=0&&(w[k--]=H>>16&255),F===6?(k>=0&&(w[k--]=H>>24&255),T=0,F=0):(T=H>>>24,F+=2)}if(k>=0)for(w[k--]=T;k>=0;)w[k--]=0},Math.clz32?o.prototype._countBits=function(w){return 32-Math.clz32(w)}:o.prototype._countBits=function(w){var C=w,k=0;return C>=4096&&(k+=13,C>>>=13),C>=64&&(k+=7,C>>>=7),C>=8&&(k+=4,C>>>=4),C>=2&&(k+=2,C>>>=2),k+C},o.prototype._zeroBits=function(w){if(w===0)return 26;var C=w,k=0;return!(8191&C)&&(k+=13,C>>>=13),!(127&C)&&(k+=7,C>>>=7),!(15&C)&&(k+=4,C>>>=4),!(3&C)&&(k+=2,C>>>=2),!(1&C)&&k++,k},o.prototype.bitLength=function(){var w=this.words[this.length-1],C=this._countBits(w);return 26*(this.length-1)+C},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var w=0,C=0;C<this.length;C++){var k=this._zeroBits(this.words[C]);if(w+=k,k!==26)break}return w},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(w){return this.negative!==0?this.abs().inotn(w).iaddn(1):this.clone()},o.prototype.fromTwos=function(w){return this.testn(w-1)?this.notn(w).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(w){for(;this.length<w.length;)this.words[this.length++]=0;for(var C=0;C<w.length;C++)this.words[C]=this.words[C]|w.words[C];return this._strip()},o.prototype.ior=function(w){return s((this.negative|w.negative)==0),this.iuor(w)},o.prototype.or=function(w){return this.length>w.length?this.clone().ior(w):w.clone().ior(this)},o.prototype.uor=function(w){return this.length>w.length?this.clone().iuor(w):w.clone().iuor(this)},o.prototype.iuand=function(w){var C;C=this.length>w.length?w:this;for(var k=0;k<C.length;k++)this.words[k]=this.words[k]&w.words[k];return this.length=C.length,this._strip()},o.prototype.iand=function(w){return s((this.negative|w.negative)==0),this.iuand(w)},o.prototype.and=function(w){return this.length>w.length?this.clone().iand(w):w.clone().iand(this)},o.prototype.uand=function(w){return this.length>w.length?this.clone().iuand(w):w.clone().iuand(this)},o.prototype.iuxor=function(w){var C,k;this.length>w.length?(C=this,k=w):(C=w,k=this);for(var T=0;T<k.length;T++)this.words[T]=C.words[T]^k.words[T];if(this!==C)for(;T<C.length;T++)this.words[T]=C.words[T];return this.length=C.length,this._strip()},o.prototype.ixor=function(w){return s((this.negative|w.negative)==0),this.iuxor(w)},o.prototype.xor=function(w){return this.length>w.length?this.clone().ixor(w):w.clone().ixor(this)},o.prototype.uxor=function(w){return this.length>w.length?this.clone().iuxor(w):w.clone().iuxor(this)},o.prototype.inotn=function(w){s(typeof w=="number"&&w>=0);var C=0|Math.ceil(w/26),k=w%26;this._expand(C),k>0&&C--;for(var T=0;T<C;T++)this.words[T]=67108863&~this.words[T];return k>0&&(this.words[T]=~this.words[T]&67108863>>26-k),this._strip()},o.prototype.notn=function(w){return this.clone().inotn(w)},o.prototype.setn=function(w,C){s(typeof w=="number"&&w>=0);var k=w/26|0,T=w%26;return this._expand(k+1),this.words[k]=C?this.words[k]|1<<T:this.words[k]&~(1<<T),this._strip()},o.prototype.iadd=function(w){var C,k,T;if(this.negative!==0&&w.negative===0)return this.negative=0,C=this.isub(w),this.negative^=1,this._normSign();if(this.negative===0&&w.negative!==0)return w.negative=0,C=this.isub(w),w.negative=1,C._normSign();this.length>w.length?(k=this,T=w):(k=w,T=this);for(var R=0,F=0;F<T.length;F++)C=(0|k.words[F])+(0|T.words[F])+R,this.words[F]=67108863&C,R=C>>>26;for(;R!==0&&F<k.length;F++)C=(0|k.words[F])+R,this.words[F]=67108863&C,R=C>>>26;if(this.length=k.length,R!==0)this.words[this.length]=R,this.length++;else if(k!==this)for(;F<k.length;F++)this.words[F]=k.words[F];return this},o.prototype.add=function(w){var C;return w.negative!==0&&this.negative===0?(w.negative=0,C=this.sub(w),w.negative^=1,C):w.negative===0&&this.negative!==0?(this.negative=0,C=w.sub(this),this.negative=1,C):this.length>w.length?this.clone().iadd(w):w.clone().iadd(this)},o.prototype.isub=function(w){if(w.negative!==0){w.negative=0;var C=this.iadd(w);return w.negative=1,C._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(w),this.negative=1,this._normSign();var k,T,R=this.cmp(w);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;R>0?(k=this,T=w):(k=w,T=this);for(var F=0,H=0;H<T.length;H++)F=(C=(0|k.words[H])-(0|T.words[H])+F)>>26,this.words[H]=67108863&C;for(;F!==0&&H<k.length;H++)F=(C=(0|k.words[H])+F)>>26,this.words[H]=67108863&C;if(F===0&&H<k.length&&k!==this)for(;H<k.length;H++)this.words[H]=k.words[H];return this.length=Math.max(this.length,H),k!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(w){return this.clone().isub(w)};var S=function(w,C,k){var T,R,F,H=w.words,it=C.words,ot=k.words,dt=0,$=0|H[0],ct=8191&$,W=$>>>13,q=0|H[1],rt=8191&q,mt=q>>>13,wt=0|H[2],_t=8191&wt,Ct=wt>>>13,Ft=0|H[3],At=8191&Ft,vt=Ft>>>13,kt=0|H[4],gt=8191&kt,ut=kt>>>13,Q=0|H[5],Y=8191&Q,et=Q>>>13,lt=0|H[6],pt=8191&lt,bt=lt>>>13,Et=0|H[7],Ot=8191&Et,zt=Et>>>13,Gt=0|H[8],Jt=8191&Gt,Kt=Gt>>>13,ie=0|H[9],Xt=8191&ie,Ut=ie>>>13,_e=0|it[0],le=8191&_e,ye=_e>>>13,Ze=0|it[1],ce=8191&Ze,ke=Ze>>>13,He=0|it[2],$t=8191&He,Te=He>>>13,bi=0|it[3],ue=8191&bi,Fe=bi>>>13,ai=0|it[4],Le=8191&ai,Oe=ai>>>13,ir=0|it[5],We=8191&ir,It=ir>>>13,qt=0|it[6],jt=8191&qt,ae=qt>>>13,Qe=0|it[7],se=8191&Qe,ve=Qe>>>13,$e=0|it[8],Ie=8191&$e,fe=$e>>>13,Ye=0|it[9],Ve=8191&Ye,ii=Ye>>>13;k.negative=w.negative^C.negative,k.length=19;var Ke=(dt+(T=Math.imul(ct,le))|0)+((8191&(R=(R=Math.imul(ct,ye))+Math.imul(W,le)|0))<<13)|0;dt=((F=Math.imul(W,ye))+(R>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,T=Math.imul(rt,le),R=(R=Math.imul(rt,ye))+Math.imul(mt,le)|0,F=Math.imul(mt,ye);var pr=(dt+(T=T+Math.imul(ct,ce)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ke)|0)+Math.imul(W,ce)|0))<<13)|0;dt=((F=F+Math.imul(W,ke)|0)+(R>>>13)|0)+(pr>>>26)|0,pr&=67108863,T=Math.imul(_t,le),R=(R=Math.imul(_t,ye))+Math.imul(Ct,le)|0,F=Math.imul(Ct,ye),T=T+Math.imul(rt,ce)|0,R=(R=R+Math.imul(rt,ke)|0)+Math.imul(mt,ce)|0,F=F+Math.imul(mt,ke)|0;var Je=(dt+(T=T+Math.imul(ct,$t)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Te)|0)+Math.imul(W,$t)|0))<<13)|0;dt=((F=F+Math.imul(W,Te)|0)+(R>>>13)|0)+(Je>>>26)|0,Je&=67108863,T=Math.imul(At,le),R=(R=Math.imul(At,ye))+Math.imul(vt,le)|0,F=Math.imul(vt,ye),T=T+Math.imul(_t,ce)|0,R=(R=R+Math.imul(_t,ke)|0)+Math.imul(Ct,ce)|0,F=F+Math.imul(Ct,ke)|0,T=T+Math.imul(rt,$t)|0,R=(R=R+Math.imul(rt,Te)|0)+Math.imul(mt,$t)|0,F=F+Math.imul(mt,Te)|0;var oi=(dt+(T=T+Math.imul(ct,ue)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Fe)|0)+Math.imul(W,ue)|0))<<13)|0;dt=((F=F+Math.imul(W,Fe)|0)+(R>>>13)|0)+(oi>>>26)|0,oi&=67108863,T=Math.imul(gt,le),R=(R=Math.imul(gt,ye))+Math.imul(ut,le)|0,F=Math.imul(ut,ye),T=T+Math.imul(At,ce)|0,R=(R=R+Math.imul(At,ke)|0)+Math.imul(vt,ce)|0,F=F+Math.imul(vt,ke)|0,T=T+Math.imul(_t,$t)|0,R=(R=R+Math.imul(_t,Te)|0)+Math.imul(Ct,$t)|0,F=F+Math.imul(Ct,Te)|0,T=T+Math.imul(rt,ue)|0,R=(R=R+Math.imul(rt,Fe)|0)+Math.imul(mt,ue)|0,F=F+Math.imul(mt,Fe)|0;var cr=(dt+(T=T+Math.imul(ct,Le)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Oe)|0)+Math.imul(W,Le)|0))<<13)|0;dt=((F=F+Math.imul(W,Oe)|0)+(R>>>13)|0)+(cr>>>26)|0,cr&=67108863,T=Math.imul(Y,le),R=(R=Math.imul(Y,ye))+Math.imul(et,le)|0,F=Math.imul(et,ye),T=T+Math.imul(gt,ce)|0,R=(R=R+Math.imul(gt,ke)|0)+Math.imul(ut,ce)|0,F=F+Math.imul(ut,ke)|0,T=T+Math.imul(At,$t)|0,R=(R=R+Math.imul(At,Te)|0)+Math.imul(vt,$t)|0,F=F+Math.imul(vt,Te)|0,T=T+Math.imul(_t,ue)|0,R=(R=R+Math.imul(_t,Fe)|0)+Math.imul(Ct,ue)|0,F=F+Math.imul(Ct,Fe)|0,T=T+Math.imul(rt,Le)|0,R=(R=R+Math.imul(rt,Oe)|0)+Math.imul(mt,Le)|0,F=F+Math.imul(mt,Oe)|0;var ki=(dt+(T=T+Math.imul(ct,We)|0)|0)+((8191&(R=(R=R+Math.imul(ct,It)|0)+Math.imul(W,We)|0))<<13)|0;dt=((F=F+Math.imul(W,It)|0)+(R>>>13)|0)+(ki>>>26)|0,ki&=67108863,T=Math.imul(pt,le),R=(R=Math.imul(pt,ye))+Math.imul(bt,le)|0,F=Math.imul(bt,ye),T=T+Math.imul(Y,ce)|0,R=(R=R+Math.imul(Y,ke)|0)+Math.imul(et,ce)|0,F=F+Math.imul(et,ke)|0,T=T+Math.imul(gt,$t)|0,R=(R=R+Math.imul(gt,Te)|0)+Math.imul(ut,$t)|0,F=F+Math.imul(ut,Te)|0,T=T+Math.imul(At,ue)|0,R=(R=R+Math.imul(At,Fe)|0)+Math.imul(vt,ue)|0,F=F+Math.imul(vt,Fe)|0,T=T+Math.imul(_t,Le)|0,R=(R=R+Math.imul(_t,Oe)|0)+Math.imul(Ct,Le)|0,F=F+Math.imul(Ct,Oe)|0,T=T+Math.imul(rt,We)|0,R=(R=R+Math.imul(rt,It)|0)+Math.imul(mt,We)|0,F=F+Math.imul(mt,It)|0;var Tt=(dt+(T=T+Math.imul(ct,jt)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ae)|0)+Math.imul(W,jt)|0))<<13)|0;dt=((F=F+Math.imul(W,ae)|0)+(R>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,T=Math.imul(Ot,le),R=(R=Math.imul(Ot,ye))+Math.imul(zt,le)|0,F=Math.imul(zt,ye),T=T+Math.imul(pt,ce)|0,R=(R=R+Math.imul(pt,ke)|0)+Math.imul(bt,ce)|0,F=F+Math.imul(bt,ke)|0,T=T+Math.imul(Y,$t)|0,R=(R=R+Math.imul(Y,Te)|0)+Math.imul(et,$t)|0,F=F+Math.imul(et,Te)|0,T=T+Math.imul(gt,ue)|0,R=(R=R+Math.imul(gt,Fe)|0)+Math.imul(ut,ue)|0,F=F+Math.imul(ut,Fe)|0,T=T+Math.imul(At,Le)|0,R=(R=R+Math.imul(At,Oe)|0)+Math.imul(vt,Le)|0,F=F+Math.imul(vt,Oe)|0,T=T+Math.imul(_t,We)|0,R=(R=R+Math.imul(_t,It)|0)+Math.imul(Ct,We)|0,F=F+Math.imul(Ct,It)|0,T=T+Math.imul(rt,jt)|0,R=(R=R+Math.imul(rt,ae)|0)+Math.imul(mt,jt)|0,F=F+Math.imul(mt,ae)|0;var Ht=(dt+(T=T+Math.imul(ct,se)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ve)|0)+Math.imul(W,se)|0))<<13)|0;dt=((F=F+Math.imul(W,ve)|0)+(R>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,T=Math.imul(Jt,le),R=(R=Math.imul(Jt,ye))+Math.imul(Kt,le)|0,F=Math.imul(Kt,ye),T=T+Math.imul(Ot,ce)|0,R=(R=R+Math.imul(Ot,ke)|0)+Math.imul(zt,ce)|0,F=F+Math.imul(zt,ke)|0,T=T+Math.imul(pt,$t)|0,R=(R=R+Math.imul(pt,Te)|0)+Math.imul(bt,$t)|0,F=F+Math.imul(bt,Te)|0,T=T+Math.imul(Y,ue)|0,R=(R=R+Math.imul(Y,Fe)|0)+Math.imul(et,ue)|0,F=F+Math.imul(et,Fe)|0,T=T+Math.imul(gt,Le)|0,R=(R=R+Math.imul(gt,Oe)|0)+Math.imul(ut,Le)|0,F=F+Math.imul(ut,Oe)|0,T=T+Math.imul(At,We)|0,R=(R=R+Math.imul(At,It)|0)+Math.imul(vt,We)|0,F=F+Math.imul(vt,It)|0,T=T+Math.imul(_t,jt)|0,R=(R=R+Math.imul(_t,ae)|0)+Math.imul(Ct,jt)|0,F=F+Math.imul(Ct,ae)|0,T=T+Math.imul(rt,se)|0,R=(R=R+Math.imul(rt,ve)|0)+Math.imul(mt,se)|0,F=F+Math.imul(mt,ve)|0;var re=(dt+(T=T+Math.imul(ct,Ie)|0)|0)+((8191&(R=(R=R+Math.imul(ct,fe)|0)+Math.imul(W,Ie)|0))<<13)|0;dt=((F=F+Math.imul(W,fe)|0)+(R>>>13)|0)+(re>>>26)|0,re&=67108863,T=Math.imul(Xt,le),R=(R=Math.imul(Xt,ye))+Math.imul(Ut,le)|0,F=Math.imul(Ut,ye),T=T+Math.imul(Jt,ce)|0,R=(R=R+Math.imul(Jt,ke)|0)+Math.imul(Kt,ce)|0,F=F+Math.imul(Kt,ke)|0,T=T+Math.imul(Ot,$t)|0,R=(R=R+Math.imul(Ot,Te)|0)+Math.imul(zt,$t)|0,F=F+Math.imul(zt,Te)|0,T=T+Math.imul(pt,ue)|0,R=(R=R+Math.imul(pt,Fe)|0)+Math.imul(bt,ue)|0,F=F+Math.imul(bt,Fe)|0,T=T+Math.imul(Y,Le)|0,R=(R=R+Math.imul(Y,Oe)|0)+Math.imul(et,Le)|0,F=F+Math.imul(et,Oe)|0,T=T+Math.imul(gt,We)|0,R=(R=R+Math.imul(gt,It)|0)+Math.imul(ut,We)|0,F=F+Math.imul(ut,It)|0,T=T+Math.imul(At,jt)|0,R=(R=R+Math.imul(At,ae)|0)+Math.imul(vt,jt)|0,F=F+Math.imul(vt,ae)|0,T=T+Math.imul(_t,se)|0,R=(R=R+Math.imul(_t,ve)|0)+Math.imul(Ct,se)|0,F=F+Math.imul(Ct,ve)|0,T=T+Math.imul(rt,Ie)|0,R=(R=R+Math.imul(rt,fe)|0)+Math.imul(mt,Ie)|0,F=F+Math.imul(mt,fe)|0;var Qt=(dt+(T=T+Math.imul(ct,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ii)|0)+Math.imul(W,Ve)|0))<<13)|0;dt=((F=F+Math.imul(W,ii)|0)+(R>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,T=Math.imul(Xt,ce),R=(R=Math.imul(Xt,ke))+Math.imul(Ut,ce)|0,F=Math.imul(Ut,ke),T=T+Math.imul(Jt,$t)|0,R=(R=R+Math.imul(Jt,Te)|0)+Math.imul(Kt,$t)|0,F=F+Math.imul(Kt,Te)|0,T=T+Math.imul(Ot,ue)|0,R=(R=R+Math.imul(Ot,Fe)|0)+Math.imul(zt,ue)|0,F=F+Math.imul(zt,Fe)|0,T=T+Math.imul(pt,Le)|0,R=(R=R+Math.imul(pt,Oe)|0)+Math.imul(bt,Le)|0,F=F+Math.imul(bt,Oe)|0,T=T+Math.imul(Y,We)|0,R=(R=R+Math.imul(Y,It)|0)+Math.imul(et,We)|0,F=F+Math.imul(et,It)|0,T=T+Math.imul(gt,jt)|0,R=(R=R+Math.imul(gt,ae)|0)+Math.imul(ut,jt)|0,F=F+Math.imul(ut,ae)|0,T=T+Math.imul(At,se)|0,R=(R=R+Math.imul(At,ve)|0)+Math.imul(vt,se)|0,F=F+Math.imul(vt,ve)|0,T=T+Math.imul(_t,Ie)|0,R=(R=R+Math.imul(_t,fe)|0)+Math.imul(Ct,Ie)|0,F=F+Math.imul(Ct,fe)|0;var he=(dt+(T=T+Math.imul(rt,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(rt,ii)|0)+Math.imul(mt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(mt,ii)|0)+(R>>>13)|0)+(he>>>26)|0,he&=67108863,T=Math.imul(Xt,$t),R=(R=Math.imul(Xt,Te))+Math.imul(Ut,$t)|0,F=Math.imul(Ut,Te),T=T+Math.imul(Jt,ue)|0,R=(R=R+Math.imul(Jt,Fe)|0)+Math.imul(Kt,ue)|0,F=F+Math.imul(Kt,Fe)|0,T=T+Math.imul(Ot,Le)|0,R=(R=R+Math.imul(Ot,Oe)|0)+Math.imul(zt,Le)|0,F=F+Math.imul(zt,Oe)|0,T=T+Math.imul(pt,We)|0,R=(R=R+Math.imul(pt,It)|0)+Math.imul(bt,We)|0,F=F+Math.imul(bt,It)|0,T=T+Math.imul(Y,jt)|0,R=(R=R+Math.imul(Y,ae)|0)+Math.imul(et,jt)|0,F=F+Math.imul(et,ae)|0,T=T+Math.imul(gt,se)|0,R=(R=R+Math.imul(gt,ve)|0)+Math.imul(ut,se)|0,F=F+Math.imul(ut,ve)|0,T=T+Math.imul(At,Ie)|0,R=(R=R+Math.imul(At,fe)|0)+Math.imul(vt,Ie)|0,F=F+Math.imul(vt,fe)|0;var Ee=(dt+(T=T+Math.imul(_t,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(_t,ii)|0)+Math.imul(Ct,Ve)|0))<<13)|0;dt=((F=F+Math.imul(Ct,ii)|0)+(R>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,T=Math.imul(Xt,ue),R=(R=Math.imul(Xt,Fe))+Math.imul(Ut,ue)|0,F=Math.imul(Ut,Fe),T=T+Math.imul(Jt,Le)|0,R=(R=R+Math.imul(Jt,Oe)|0)+Math.imul(Kt,Le)|0,F=F+Math.imul(Kt,Oe)|0,T=T+Math.imul(Ot,We)|0,R=(R=R+Math.imul(Ot,It)|0)+Math.imul(zt,We)|0,F=F+Math.imul(zt,It)|0,T=T+Math.imul(pt,jt)|0,R=(R=R+Math.imul(pt,ae)|0)+Math.imul(bt,jt)|0,F=F+Math.imul(bt,ae)|0,T=T+Math.imul(Y,se)|0,R=(R=R+Math.imul(Y,ve)|0)+Math.imul(et,se)|0,F=F+Math.imul(et,ve)|0,T=T+Math.imul(gt,Ie)|0,R=(R=R+Math.imul(gt,fe)|0)+Math.imul(ut,Ie)|0,F=F+Math.imul(ut,fe)|0;var Ae=(dt+(T=T+Math.imul(At,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(At,ii)|0)+Math.imul(vt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(vt,ii)|0)+(R>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,T=Math.imul(Xt,Le),R=(R=Math.imul(Xt,Oe))+Math.imul(Ut,Le)|0,F=Math.imul(Ut,Oe),T=T+Math.imul(Jt,We)|0,R=(R=R+Math.imul(Jt,It)|0)+Math.imul(Kt,We)|0,F=F+Math.imul(Kt,It)|0,T=T+Math.imul(Ot,jt)|0,R=(R=R+Math.imul(Ot,ae)|0)+Math.imul(zt,jt)|0,F=F+Math.imul(zt,ae)|0,T=T+Math.imul(pt,se)|0,R=(R=R+Math.imul(pt,ve)|0)+Math.imul(bt,se)|0,F=F+Math.imul(bt,ve)|0,T=T+Math.imul(Y,Ie)|0,R=(R=R+Math.imul(Y,fe)|0)+Math.imul(et,Ie)|0,F=F+Math.imul(et,fe)|0;var ti=(dt+(T=T+Math.imul(gt,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(gt,ii)|0)+Math.imul(ut,Ve)|0))<<13)|0;dt=((F=F+Math.imul(ut,ii)|0)+(R>>>13)|0)+(ti>>>26)|0,ti&=67108863,T=Math.imul(Xt,We),R=(R=Math.imul(Xt,It))+Math.imul(Ut,We)|0,F=Math.imul(Ut,It),T=T+Math.imul(Jt,jt)|0,R=(R=R+Math.imul(Jt,ae)|0)+Math.imul(Kt,jt)|0,F=F+Math.imul(Kt,ae)|0,T=T+Math.imul(Ot,se)|0,R=(R=R+Math.imul(Ot,ve)|0)+Math.imul(zt,se)|0,F=F+Math.imul(zt,ve)|0,T=T+Math.imul(pt,Ie)|0,R=(R=R+Math.imul(pt,fe)|0)+Math.imul(bt,Ie)|0,F=F+Math.imul(bt,fe)|0;var Ue=(dt+(T=T+Math.imul(Y,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(Y,ii)|0)+Math.imul(et,Ve)|0))<<13)|0;dt=((F=F+Math.imul(et,ii)|0)+(R>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,T=Math.imul(Xt,jt),R=(R=Math.imul(Xt,ae))+Math.imul(Ut,jt)|0,F=Math.imul(Ut,ae),T=T+Math.imul(Jt,se)|0,R=(R=R+Math.imul(Jt,ve)|0)+Math.imul(Kt,se)|0,F=F+Math.imul(Kt,ve)|0,T=T+Math.imul(Ot,Ie)|0,R=(R=R+Math.imul(Ot,fe)|0)+Math.imul(zt,Ie)|0,F=F+Math.imul(zt,fe)|0;var we=(dt+(T=T+Math.imul(pt,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(pt,ii)|0)+Math.imul(bt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(bt,ii)|0)+(R>>>13)|0)+(we>>>26)|0,we&=67108863,T=Math.imul(Xt,se),R=(R=Math.imul(Xt,ve))+Math.imul(Ut,se)|0,F=Math.imul(Ut,ve),T=T+Math.imul(Jt,Ie)|0,R=(R=R+Math.imul(Jt,fe)|0)+Math.imul(Kt,Ie)|0,F=F+Math.imul(Kt,fe)|0;var pe=(dt+(T=T+Math.imul(Ot,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(Ot,ii)|0)+Math.imul(zt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(zt,ii)|0)+(R>>>13)|0)+(pe>>>26)|0,pe&=67108863,T=Math.imul(Xt,Ie),R=(R=Math.imul(Xt,fe))+Math.imul(Ut,Ie)|0,F=Math.imul(Ut,fe);var yi=(dt+(T=T+Math.imul(Jt,Ve)|0)|0)+((8191&(R=(R=R+Math.imul(Jt,ii)|0)+Math.imul(Kt,Ve)|0))<<13)|0;dt=((F=F+Math.imul(Kt,ii)|0)+(R>>>13)|0)+(yi>>>26)|0,yi&=67108863;var ri=(dt+(T=Math.imul(Xt,Ve))|0)+((8191&(R=(R=Math.imul(Xt,ii))+Math.imul(Ut,Ve)|0))<<13)|0;return dt=((F=Math.imul(Ut,ii))+(R>>>13)|0)+(ri>>>26)|0,ri&=67108863,ot[0]=Ke,ot[1]=pr,ot[2]=Je,ot[3]=oi,ot[4]=cr,ot[5]=ki,ot[6]=Tt,ot[7]=Ht,ot[8]=re,ot[9]=Qt,ot[10]=he,ot[11]=Ee,ot[12]=Ae,ot[13]=ti,ot[14]=Ue,ot[15]=we,ot[16]=pe,ot[17]=yi,ot[18]=ri,dt!==0&&(ot[19]=dt,k.length++),k};function O(w,C,k){k.negative=C.negative^w.negative,k.length=w.length+C.length;for(var T=0,R=0,F=0;F<k.length-1;F++){var H=R;R=0;for(var it=67108863&T,ot=Math.min(F,C.length-1),dt=Math.max(0,F-w.length+1);dt<=ot;dt++){var $=F-dt,ct=(0|w.words[$])*(0|C.words[dt]),W=67108863&ct;it=67108863&(W=W+it|0),R+=(H=(H=H+(ct/67108864|0)|0)+(W>>>26)|0)>>>26,H&=67108863}k.words[F]=it,T=H,H=R}return T!==0?k.words[F]=T:k.length--,k._strip()}function D(w,C,k){return O(w,C,k)}function U(w,C){this.x=w,this.y=C}Math.imul||(S=x),o.prototype.mulTo=function(w,C){var k=this.length+w.length;return this.length===10&&w.length===10?S(this,w,C):k<63?x(this,w,C):k<1024?O(this,w,C):D(this,w,C)},U.prototype.makeRBT=function(w){for(var C=new Array(w),k=o.prototype._countBits(w)-1,T=0;T<w;T++)C[T]=this.revBin(T,k,w);return C},U.prototype.revBin=function(w,C,k){if(w===0||w===k-1)return w;for(var T=0,R=0;R<C;R++)T|=(1&w)<<C-R-1,w>>=1;return T},U.prototype.permute=function(w,C,k,T,R,F){for(var H=0;H<F;H++)T[H]=C[w[H]],R[H]=k[w[H]]},U.prototype.transform=function(w,C,k,T,R,F){this.permute(F,w,C,k,T,R);for(var H=1;H<R;H<<=1)for(var it=H<<1,ot=Math.cos(2*Math.PI/it),dt=Math.sin(2*Math.PI/it),$=0;$<R;$+=it)for(var ct=ot,W=dt,q=0;q<H;q++){var rt=k[$+q],mt=T[$+q],wt=k[$+q+H],_t=T[$+q+H],Ct=ct*wt-W*_t;_t=ct*_t+W*wt,wt=Ct,k[$+q]=rt+wt,T[$+q]=mt+_t,k[$+q+H]=rt-wt,T[$+q+H]=mt-_t,q!==it&&(Ct=ot*ct-dt*W,W=ot*W+dt*ct,ct=Ct)}},U.prototype.guessLen13b=function(w,C){var k=1|Math.max(C,w),T=1&k,R=0;for(k=k/2|0;k;k>>>=1)R++;return 1<<R+1+T},U.prototype.conjugate=function(w,C,k){if(!(k<=1))for(var T=0;T<k/2;T++){var R=w[T];w[T]=w[k-T-1],w[k-T-1]=R,R=C[T],C[T]=-C[k-T-1],C[k-T-1]=-R}},U.prototype.normalize13b=function(w,C){for(var k=0,T=0;T<C/2;T++){var R=8192*Math.round(w[2*T+1]/C)+Math.round(w[2*T]/C)+k;w[T]=67108863&R,k=R<67108864?0:R/67108864|0}return w},U.prototype.convert13b=function(w,C,k,T){for(var R=0,F=0;F<C;F++)R+=0|w[F],k[2*F]=8191&R,R>>>=13,k[2*F+1]=8191&R,R>>>=13;for(F=2*C;F<T;++F)k[F]=0;s(R===0),s((-8192&R)==0)},U.prototype.stub=function(w){for(var C=new Array(w),k=0;k<w;k++)C[k]=0;return C},U.prototype.mulp=function(w,C,k){var T=2*this.guessLen13b(w.length,C.length),R=this.makeRBT(T),F=this.stub(T),H=new Array(T),it=new Array(T),ot=new Array(T),dt=new Array(T),$=new Array(T),ct=new Array(T),W=k.words;W.length=T,this.convert13b(w.words,w.length,H,T),this.convert13b(C.words,C.length,dt,T),this.transform(H,F,it,ot,T,R),this.transform(dt,F,$,ct,T,R);for(var q=0;q<T;q++){var rt=it[q]*$[q]-ot[q]*ct[q];ot[q]=it[q]*ct[q]+ot[q]*$[q],it[q]=rt}return this.conjugate(it,ot,T),this.transform(it,ot,W,F,T,R),this.conjugate(W,F,T),this.normalize13b(W,T),k.negative=w.negative^C.negative,k.length=w.length+C.length,k._strip()},o.prototype.mul=function(w){var C=new o(null);return C.words=new Array(this.length+w.length),this.mulTo(w,C)},o.prototype.mulf=function(w){var C=new o(null);return C.words=new Array(this.length+w.length),D(this,w,C)},o.prototype.imul=function(w){return this.clone().mulTo(w,this)},o.prototype.imuln=function(w){var C=w<0;C&&(w=-w),s(typeof w=="number"),s(w<67108864);for(var k=0,T=0;T<this.length;T++){var R=(0|this.words[T])*w,F=(67108863&R)+(67108863&k);k>>=26,k+=R/67108864|0,k+=F>>>26,this.words[T]=67108863&F}return k!==0&&(this.words[T]=k,this.length++),C?this.ineg():this},o.prototype.muln=function(w){return this.clone().imuln(w)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(w){var C=function(F){for(var H=new Array(F.bitLength()),it=0;it<H.length;it++){var ot=it/26|0,dt=it%26;H[it]=F.words[ot]>>>dt&1}return H}(w);if(C.length===0)return new o(1);for(var k=this,T=0;T<C.length&&C[T]===0;T++,k=k.sqr());if(++T<C.length)for(var R=k.sqr();T<C.length;T++,R=R.sqr())C[T]!==0&&(k=k.mul(R));return k},o.prototype.iushln=function(w){s(typeof w=="number"&&w>=0);var C,k=w%26,T=(w-k)/26,R=67108863>>>26-k<<26-k;if(k!==0){var F=0;for(C=0;C<this.length;C++){var H=this.words[C]&R,it=(0|this.words[C])-H<<k;this.words[C]=it|F,F=H>>>26-k}F&&(this.words[C]=F,this.length++)}if(T!==0){for(C=this.length-1;C>=0;C--)this.words[C+T]=this.words[C];for(C=0;C<T;C++)this.words[C]=0;this.length+=T}return this._strip()},o.prototype.ishln=function(w){return s(this.negative===0),this.iushln(w)},o.prototype.iushrn=function(w,C,k){var T;s(typeof w=="number"&&w>=0),T=C?(C-C%26)/26:0;var R=w%26,F=Math.min((w-R)/26,this.length),H=67108863^67108863>>>R<<R,it=k;if(T-=F,T=Math.max(0,T),it){for(var ot=0;ot<F;ot++)it.words[ot]=this.words[ot];it.length=F}if(F!==0)if(this.length>F)for(this.length-=F,ot=0;ot<this.length;ot++)this.words[ot]=this.words[ot+F];else this.words[0]=0,this.length=1;var dt=0;for(ot=this.length-1;ot>=0&&(dt!==0||ot>=T);ot--){var $=0|this.words[ot];this.words[ot]=dt<<26-R|$>>>R,dt=$&H}return it&&dt!==0&&(it.words[it.length++]=dt),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(w,C,k){return s(this.negative===0),this.iushrn(w,C,k)},o.prototype.shln=function(w){return this.clone().ishln(w)},o.prototype.ushln=function(w){return this.clone().iushln(w)},o.prototype.shrn=function(w){return this.clone().ishrn(w)},o.prototype.ushrn=function(w){return this.clone().iushrn(w)},o.prototype.testn=function(w){s(typeof w=="number"&&w>=0);var C=w%26,k=(w-C)/26,T=1<<C;return!(this.length<=k)&&!!(this.words[k]&T)},o.prototype.imaskn=function(w){s(typeof w=="number"&&w>=0);var C=w%26,k=(w-C)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=k)return this;if(C!==0&&k++,this.length=Math.min(k,this.length),C!==0){var T=67108863^67108863>>>C<<C;this.words[this.length-1]&=T}return this._strip()},o.prototype.maskn=function(w){return this.clone().imaskn(w)},o.prototype.iaddn=function(w){return s(typeof w=="number"),s(w<67108864),w<0?this.isubn(-w):this.negative!==0?this.length===1&&(0|this.words[0])<=w?(this.words[0]=w-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(w),this.negative=1,this):this._iaddn(w)},o.prototype._iaddn=function(w){this.words[0]+=w;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},o.prototype.isubn=function(w){if(s(typeof w=="number"),s(w<67108864),w<0)return this.iaddn(-w);if(this.negative!==0)return this.negative=0,this.iaddn(w),this.negative=1,this;if(this.words[0]-=w,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this._strip()},o.prototype.addn=function(w){return this.clone().iaddn(w)},o.prototype.subn=function(w){return this.clone().isubn(w)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(w,C,k){var T,R,F=w.length+k;this._expand(F);var H=0;for(T=0;T<w.length;T++){R=(0|this.words[T+k])+H;var it=(0|w.words[T])*C;H=((R-=67108863&it)>>26)-(it/67108864|0),this.words[T+k]=67108863&R}for(;T<this.length-k;T++)H=(R=(0|this.words[T+k])+H)>>26,this.words[T+k]=67108863&R;if(H===0)return this._strip();for(s(H===-1),H=0,T=0;T<this.length;T++)H=(R=-(0|this.words[T])+H)>>26,this.words[T]=67108863&R;return this.negative=1,this._strip()},o.prototype._wordDiv=function(w,C){var k=(this.length,w.length),T=this.clone(),R=w,F=0|R.words[R.length-1];(k=26-this._countBits(F))!==0&&(R=R.ushln(k),T.iushln(k),F=0|R.words[R.length-1]);var H,it=T.length-R.length;if(C!=="mod"){(H=new o(null)).length=it+1,H.words=new Array(H.length);for(var ot=0;ot<H.length;ot++)H.words[ot]=0}var dt=T.clone()._ishlnsubmul(R,1,it);dt.negative===0&&(T=dt,H&&(H.words[it]=1));for(var $=it-1;$>=0;$--){var ct=67108864*(0|T.words[R.length+$])+(0|T.words[R.length+$-1]);for(ct=Math.min(ct/F|0,67108863),T._ishlnsubmul(R,ct,$);T.negative!==0;)ct--,T.negative=0,T._ishlnsubmul(R,1,$),T.isZero()||(T.negative^=1);H&&(H.words[$]=ct)}return H&&H._strip(),T._strip(),C!=="div"&&k!==0&&T.iushrn(k),{div:H||null,mod:T}},o.prototype.divmod=function(w,C,k){return s(!w.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:this.negative!==0&&w.negative===0?(F=this.neg().divmod(w,C),C!=="mod"&&(T=F.div.neg()),C!=="div"&&(R=F.mod.neg(),k&&R.negative!==0&&R.iadd(w)),{div:T,mod:R}):this.negative===0&&w.negative!==0?(F=this.divmod(w.neg(),C),C!=="mod"&&(T=F.div.neg()),{div:T,mod:F.mod}):this.negative&w.negative?(F=this.neg().divmod(w.neg(),C),C!=="div"&&(R=F.mod.neg(),k&&R.negative!==0&&R.isub(w)),{div:F.div,mod:R}):w.length>this.length||this.cmp(w)<0?{div:new o(0),mod:this}:w.length===1?C==="div"?{div:this.divn(w.words[0]),mod:null}:C==="mod"?{div:null,mod:new o(this.modrn(w.words[0]))}:{div:this.divn(w.words[0]),mod:new o(this.modrn(w.words[0]))}:this._wordDiv(w,C);var T,R,F},o.prototype.div=function(w){return this.divmod(w,"div",!1).div},o.prototype.mod=function(w){return this.divmod(w,"mod",!1).mod},o.prototype.umod=function(w){return this.divmod(w,"mod",!0).mod},o.prototype.divRound=function(w){var C=this.divmod(w);if(C.mod.isZero())return C.div;var k=C.div.negative!==0?C.mod.isub(w):C.mod,T=w.ushrn(1),R=w.andln(1),F=k.cmp(T);return F<0||R===1&&F===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},o.prototype.modrn=function(w){var C=w<0;C&&(w=-w),s(w<=67108863);for(var k=(1<<26)%w,T=0,R=this.length-1;R>=0;R--)T=(k*T+(0|this.words[R]))%w;return C?-T:T},o.prototype.modn=function(w){return this.modrn(w)},o.prototype.idivn=function(w){var C=w<0;C&&(w=-w),s(w<=67108863);for(var k=0,T=this.length-1;T>=0;T--){var R=(0|this.words[T])+67108864*k;this.words[T]=R/w|0,k=R%w}return this._strip(),C?this.ineg():this},o.prototype.divn=function(w){return this.clone().idivn(w)},o.prototype.egcd=function(w){s(w.negative===0),s(!w.isZero());var C=this,k=w.clone();C=C.negative!==0?C.umod(w):C.clone();for(var T=new o(1),R=new o(0),F=new o(0),H=new o(1),it=0;C.isEven()&&k.isEven();)C.iushrn(1),k.iushrn(1),++it;for(var ot=k.clone(),dt=C.clone();!C.isZero();){for(var $=0,ct=1;!(C.words[0]&ct)&&$<26;++$,ct<<=1);if($>0)for(C.iushrn($);$-- >0;)(T.isOdd()||R.isOdd())&&(T.iadd(ot),R.isub(dt)),T.iushrn(1),R.iushrn(1);for(var W=0,q=1;!(k.words[0]&q)&&W<26;++W,q<<=1);if(W>0)for(k.iushrn(W);W-- >0;)(F.isOdd()||H.isOdd())&&(F.iadd(ot),H.isub(dt)),F.iushrn(1),H.iushrn(1);C.cmp(k)>=0?(C.isub(k),T.isub(F),R.isub(H)):(k.isub(C),F.isub(T),H.isub(R))}return{a:F,b:H,gcd:k.iushln(it)}},o.prototype._invmp=function(w){s(w.negative===0),s(!w.isZero());var C=this,k=w.clone();C=C.negative!==0?C.umod(w):C.clone();for(var T,R=new o(1),F=new o(0),H=k.clone();C.cmpn(1)>0&&k.cmpn(1)>0;){for(var it=0,ot=1;!(C.words[0]&ot)&&it<26;++it,ot<<=1);if(it>0)for(C.iushrn(it);it-- >0;)R.isOdd()&&R.iadd(H),R.iushrn(1);for(var dt=0,$=1;!(k.words[0]&$)&&dt<26;++dt,$<<=1);if(dt>0)for(k.iushrn(dt);dt-- >0;)F.isOdd()&&F.iadd(H),F.iushrn(1);C.cmp(k)>=0?(C.isub(k),R.isub(F)):(k.isub(C),F.isub(R))}return(T=C.cmpn(1)===0?R:F).cmpn(0)<0&&T.iadd(w),T},o.prototype.gcd=function(w){if(this.isZero())return w.abs();if(w.isZero())return this.abs();var C=this.clone(),k=w.clone();C.negative=0,k.negative=0;for(var T=0;C.isEven()&&k.isEven();T++)C.iushrn(1),k.iushrn(1);for(;;){for(;C.isEven();)C.iushrn(1);for(;k.isEven();)k.iushrn(1);var R=C.cmp(k);if(R<0){var F=C;C=k,k=F}else if(R===0||k.cmpn(1)===0)break;C.isub(k)}return k.iushln(T)},o.prototype.invm=function(w){return this.egcd(w).a.umod(w)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(w){return this.words[0]&w},o.prototype.bincn=function(w){s(typeof w=="number");var C=w%26,k=(w-C)/26,T=1<<C;if(this.length<=k)return this._expand(k+1),this.words[k]|=T,this;for(var R=T,F=k;R!==0&&F<this.length;F++){var H=0|this.words[F];R=(H+=R)>>>26,H&=67108863,this.words[F]=H}return R!==0&&(this.words[F]=R,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(w){var C,k=w<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;if(this._strip(),this.length>1)C=1;else{k&&(w=-w),s(w<=67108863,"Number is too big");var T=0|this.words[0];C=T===w?0:T<w?-1:1}return this.negative!==0?0|-C:C},o.prototype.cmp=function(w){if(this.negative!==0&&w.negative===0)return-1;if(this.negative===0&&w.negative!==0)return 1;var C=this.ucmp(w);return this.negative!==0?0|-C:C},o.prototype.ucmp=function(w){if(this.length>w.length)return 1;if(this.length<w.length)return-1;for(var C=0,k=this.length-1;k>=0;k--){var T=0|this.words[k],R=0|w.words[k];if(T!==R){T<R?C=-1:T>R&&(C=1);break}}return C},o.prototype.gtn=function(w){return this.cmpn(w)===1},o.prototype.gt=function(w){return this.cmp(w)===1},o.prototype.gten=function(w){return this.cmpn(w)>=0},o.prototype.gte=function(w){return this.cmp(w)>=0},o.prototype.ltn=function(w){return this.cmpn(w)===-1},o.prototype.lt=function(w){return this.cmp(w)===-1},o.prototype.lten=function(w){return this.cmpn(w)<=0},o.prototype.lte=function(w){return this.cmp(w)<=0},o.prototype.eqn=function(w){return this.cmpn(w)===0},o.prototype.eq=function(w){return this.cmp(w)===0},o.red=function(w){return new N(w)},o.prototype.toRed=function(w){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),w.convertTo(this)._forceRed(w)},o.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(w){return this.red=w,this},o.prototype.forceRed=function(w){return s(!this.red,"Already a number in reduction context"),this._forceRed(w)},o.prototype.redAdd=function(w){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,w)},o.prototype.redIAdd=function(w){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,w)},o.prototype.redSub=function(w){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,w)},o.prototype.redISub=function(w){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,w)},o.prototype.redShl=function(w){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,w)},o.prototype.redMul=function(w){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.mul(this,w)},o.prototype.redIMul=function(w){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.imul(this,w)},o.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(w){return s(this.red&&!w.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,w)};var z={k256:null,p224:null,p192:null,p25519:null};function V(w,C){this.name=w,this.p=new o(C,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function G(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function tt(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function K(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function B(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(w){if(typeof w=="string"){var C=o._prime(w);this.m=C.p,this.prime=C}else s(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}function Z(w){N.call(this,w),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}V.prototype._tmp=function(){var w=new o(null);return w.words=new Array(Math.ceil(this.n/13)),w},V.prototype.ireduce=function(w){var C,k=w;do this.split(k,this.tmp),C=(k=(k=this.imulK(k)).iadd(this.tmp)).bitLength();while(C>this.n);var T=C<this.n?-1:k.ucmp(this.p);return T===0?(k.words[0]=0,k.length=1):T>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},V.prototype.split=function(w,C){w.iushrn(this.n,0,C)},V.prototype.imulK=function(w){return w.imul(this.k)},a(G,V),G.prototype.split=function(w,C){for(var k=Math.min(w.length,9),T=0;T<k;T++)C.words[T]=w.words[T];if(C.length=k,w.length<=9)return w.words[0]=0,void(w.length=1);var R=w.words[9];for(C.words[C.length++]=4194303&R,T=10;T<w.length;T++){var F=0|w.words[T];w.words[T-10]=(4194303&F)<<4|R>>>22,R=F}R>>>=22,w.words[T-10]=R,R===0&&w.length>10?w.length-=10:w.length-=9},G.prototype.imulK=function(w){w.words[w.length]=0,w.words[w.length+1]=0,w.length+=2;for(var C=0,k=0;k<w.length;k++){var T=0|w.words[k];C+=977*T,w.words[k]=67108863&C,C=64*T+(C/67108864|0)}return w.words[w.length-1]===0&&(w.length--,w.words[w.length-1]===0&&w.length--),w},a(tt,V),a(K,V),a(B,V),B.prototype.imulK=function(w){for(var C=0,k=0;k<w.length;k++){var T=19*(0|w.words[k])+C,R=67108863&T;T>>>=26,w.words[k]=R,C=T}return C!==0&&(w.words[w.length++]=C),w},o._prime=function(w){if(z[w])return z[w];var C;if(w==="k256")C=new G;else if(w==="p224")C=new tt;else if(w==="p192")C=new K;else{if(w!=="p25519")throw new Error("Unknown prime "+w);C=new B}return z[w]=C,C},N.prototype._verify1=function(w){s(w.negative===0,"red works only with positives"),s(w.red,"red works only with red numbers")},N.prototype._verify2=function(w,C){s((w.negative|C.negative)==0,"red works only with positives"),s(w.red&&w.red===C.red,"red works only with red numbers")},N.prototype.imod=function(w){return this.prime?this.prime.ireduce(w)._forceRed(this):(p(w,w.umod(this.m)._forceRed(this)),w)},N.prototype.neg=function(w){return w.isZero()?w.clone():this.m.sub(w)._forceRed(this)},N.prototype.add=function(w,C){this._verify2(w,C);var k=w.add(C);return k.cmp(this.m)>=0&&k.isub(this.m),k._forceRed(this)},N.prototype.iadd=function(w,C){this._verify2(w,C);var k=w.iadd(C);return k.cmp(this.m)>=0&&k.isub(this.m),k},N.prototype.sub=function(w,C){this._verify2(w,C);var k=w.sub(C);return k.cmpn(0)<0&&k.iadd(this.m),k._forceRed(this)},N.prototype.isub=function(w,C){this._verify2(w,C);var k=w.isub(C);return k.cmpn(0)<0&&k.iadd(this.m),k},N.prototype.shl=function(w,C){return this._verify1(w),this.imod(w.ushln(C))},N.prototype.imul=function(w,C){return this._verify2(w,C),this.imod(w.imul(C))},N.prototype.mul=function(w,C){return this._verify2(w,C),this.imod(w.mul(C))},N.prototype.isqr=function(w){return this.imul(w,w.clone())},N.prototype.sqr=function(w){return this.mul(w,w)},N.prototype.sqrt=function(w){if(w.isZero())return w.clone();var C=this.m.andln(3);if(s(C%2==1),C===3){var k=this.m.add(new o(1)).iushrn(2);return this.pow(w,k)}for(var T=this.m.subn(1),R=0;!T.isZero()&&T.andln(1)===0;)R++,T.iushrn(1);s(!T.isZero());var F=new o(1).toRed(this),H=F.redNeg(),it=this.m.subn(1).iushrn(1),ot=this.m.bitLength();for(ot=new o(2*ot*ot).toRed(this);this.pow(ot,it).cmp(H)!==0;)ot.redIAdd(H);for(var dt=this.pow(ot,T),$=this.pow(w,T.addn(1).iushrn(1)),ct=this.pow(w,T),W=R;ct.cmp(F)!==0;){for(var q=ct,rt=0;q.cmp(F)!==0;rt++)q=q.redSqr();s(rt<W);var mt=this.pow(dt,new o(1).iushln(W-rt-1));$=$.redMul(mt),dt=mt.redSqr(),ct=ct.redMul(dt),W=rt}return $},N.prototype.invm=function(w){var C=w._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},N.prototype.pow=function(w,C){if(C.isZero())return new o(1).toRed(this);if(C.cmpn(1)===0)return w.clone();var k=new Array(16);k[0]=new o(1).toRed(this),k[1]=w;for(var T=2;T<k.length;T++)k[T]=this.mul(k[T-1],w);var R=k[0],F=0,H=0,it=C.bitLength()%26;for(it===0&&(it=26),T=C.length-1;T>=0;T--){for(var ot=C.words[T],dt=it-1;dt>=0;dt--){var $=ot>>dt&1;R!==k[0]&&(R=this.sqr(R)),$!==0||F!==0?(F<<=1,F|=$,(++H===4||T===0&&dt===0)&&(R=this.mul(R,k[F]),H=0,F=0)):H=0}it=26}return R},N.prototype.convertTo=function(w){var C=w.umod(this.m);return C===w?C.clone():C},N.prototype.convertFrom=function(w){var C=w.clone();return C.red=null,C},o.mont=function(w){return new Z(w)},a(Z,N),Z.prototype.convertTo=function(w){return this.imod(w.ushln(this.shift))},Z.prototype.convertFrom=function(w){var C=this.imod(w.mul(this.rinv));return C.red=null,C},Z.prototype.imul=function(w,C){if(w.isZero()||C.isZero())return w.words[0]=0,w.length=1,w;var k=w.imul(C),T=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=k.isub(T).iushrn(this.shift),F=R;return R.cmp(this.m)>=0?F=R.isub(this.m):R.cmpn(0)<0&&(F=R.iadd(this.m)),F._forceRed(this)},Z.prototype.mul=function(w,C){if(w.isZero()||C.isZero())return new o(0)._forceRed(this);var k=w.mul(C),T=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=k.isub(T).iushrn(this.shift),F=R;return R.cmp(this.m)>=0?F=R.isub(this.m):R.cmpn(0)<0&&(F=R.iadd(this.m)),F._forceRed(this)},Z.prototype.invm=function(w){return this.imod(w._invmp(this.m).mul(this.r2))._forceRed(this)}})(t===void 0||t)},{buffer:188}],187:[function(n,t,e){"use strict";var i;function r(a){this.rand=a}if(t.exports=function(a){return i||(i=new r(null)),i.generate(a)},t.exports.Rand=r,r.prototype.generate=function(a){return this._rand(a)},r.prototype._rand=function(a){if(this.rand.getBytes)return this.rand.getBytes(a);for(var o=new Uint8Array(a),l=0;l<o.length;l++)o[l]=this.rand.getByte();return o},typeof self=="object")self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(a){var o=new Uint8Array(a);return self.crypto.getRandomValues(o),o}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(a){var o=new Uint8Array(a);return self.msCrypto.getRandomValues(o),o}:typeof window=="object"&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=n("crypto");if(typeof s.randomBytes!="function")throw new Error("Not supported");r.prototype._rand=function(a){return s.randomBytes(a)}}catch{}},{crypto:188}],188:[function(n,t,e){},{}],189:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer;function r(h){i.isBuffer(h)||(h=i.from(h));for(var d=h.length/4|0,p=new Array(d),g=0;g<d;g++)p[g]=h.readUInt32BE(4*g);return p}function s(h){for(;0<h.length;h++)h[0]=0}function a(h,d,p,g,m){for(var _,v,x,S,O=p[0],D=p[1],U=p[2],z=p[3],V=h[0]^d[0],G=h[1]^d[1],tt=h[2]^d[2],K=h[3]^d[3],B=4,N=1;N<m;N++)_=O[V>>>24]^D[G>>>16&255]^U[tt>>>8&255]^z[255&K]^d[B++],v=O[G>>>24]^D[tt>>>16&255]^U[K>>>8&255]^z[255&V]^d[B++],x=O[tt>>>24]^D[K>>>16&255]^U[V>>>8&255]^z[255&G]^d[B++],S=O[K>>>24]^D[V>>>16&255]^U[G>>>8&255]^z[255&tt]^d[B++],V=_,G=v,tt=x,K=S;return _=(g[V>>>24]<<24|g[G>>>16&255]<<16|g[tt>>>8&255]<<8|g[255&K])^d[B++],v=(g[G>>>24]<<24|g[tt>>>16&255]<<16|g[K>>>8&255]<<8|g[255&V])^d[B++],x=(g[tt>>>24]<<24|g[K>>>16&255]<<16|g[V>>>8&255]<<8|g[255&G])^d[B++],S=(g[K>>>24]<<24|g[V>>>16&255]<<16|g[G>>>8&255]<<8|g[255&tt])^d[B++],[_>>>=0,v>>>=0,x>>>=0,S>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var h=new Array(256),d=0;d<256;d++)h[d]=d<128?d<<1:d<<1^283;for(var p=[],g=[],m=[[],[],[],[]],_=[[],[],[],[]],v=0,x=0,S=0;S<256;++S){var O=x^x<<1^x<<2^x<<3^x<<4;O=O>>>8^255&O^99,p[v]=O,g[O]=v;var D=h[v],U=h[D],z=h[U],V=257*h[O]^16843008*O;m[0][v]=V<<24|V>>>8,m[1][v]=V<<16|V>>>16,m[2][v]=V<<8|V>>>24,m[3][v]=V,V=16843009*z^65537*U^257*D^16843008*v,_[0][O]=V<<24|V>>>8,_[1][O]=V<<16|V>>>16,_[2][O]=V<<8|V>>>24,_[3][O]=V,v===0?v=x=1:(v=D^h[h[h[z^D]]],x^=h[h[x]])}return{SBOX:p,INV_SBOX:g,SUB_MIX:m,INV_SUB_MIX:_}}();function c(h){this._key=r(h),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var h=this._key,d=h.length,p=d+6,g=4*(p+1),m=[],_=0;_<d;_++)m[_]=h[_];for(_=d;_<g;_++){var v=m[_-1];_%d==0?(v=v<<8|v>>>24,v=l.SBOX[v>>>24]<<24|l.SBOX[v>>>16&255]<<16|l.SBOX[v>>>8&255]<<8|l.SBOX[255&v],v^=o[_/d|0]<<24):d>6&&_%d==4&&(v=l.SBOX[v>>>24]<<24|l.SBOX[v>>>16&255]<<16|l.SBOX[v>>>8&255]<<8|l.SBOX[255&v]),m[_]=m[_-d]^v}for(var x=[],S=0;S<g;S++){var O=g-S,D=m[O-(S%4?0:4)];x[S]=S<4||O<=4?D:l.INV_SUB_MIX[0][l.SBOX[D>>>24]]^l.INV_SUB_MIX[1][l.SBOX[D>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[D>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&D]]}this._nRounds=p,this._keySchedule=m,this._invKeySchedule=x},c.prototype.encryptBlockRaw=function(h){return a(h=r(h),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},c.prototype.encryptBlock=function(h){var d=this.encryptBlockRaw(h),p=i.allocUnsafe(16);return p.writeUInt32BE(d[0],0),p.writeUInt32BE(d[1],4),p.writeUInt32BE(d[2],8),p.writeUInt32BE(d[3],12),p},c.prototype.decryptBlock=function(h){var d=(h=r(h))[1];h[1]=h[3],h[3]=d;var p=a(h,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),g=i.allocUnsafe(16);return g.writeUInt32BE(p[0],0),g.writeUInt32BE(p[3],4),g.writeUInt32BE(p[2],8),g.writeUInt32BE(p[1],12),g},c.prototype.scrub=function(){s(this._keySchedule),s(this._invKeySchedule),s(this._key)},t.exports.AES=c},{"safe-buffer":494}],190:[function(n,t,e){"use strict";var i=n("./aes"),r=n("safe-buffer").Buffer,s=n("cipher-base"),a=n("inherits"),o=n("./ghash"),l=n("buffer-xor"),c=n("./incr32");function h(d,p,g,m){s.call(this);var _=r.alloc(4,0);this._cipher=new i.AES(p);var v=this._cipher.encryptBlock(_);this._ghash=new o(v),g=function(x,S,O){if(S.length===12)return x._finID=r.concat([S,r.from([0,0,0,1])]),r.concat([S,r.from([0,0,0,2])]);var D=new o(O),U=S.length,z=U%16;D.update(S),z&&(z=16-z,D.update(r.alloc(z,0))),D.update(r.alloc(8,0));var V=8*U,G=r.alloc(8);G.writeUIntBE(V,0,8),D.update(G),x._finID=D.state;var tt=r.from(x._finID);return c(tt),tt}(this,g,v),this._prev=r.from(g),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=m,this._alen=0,this._len=0,this._mode=d,this._authTag=null,this._called=!1}a(h,s),h.prototype._update=function(d){if(!this._called&&this._alen){var p=16-this._alen%16;p<16&&(p=r.alloc(p,0),this._ghash.update(p))}this._called=!0;var g=this._mode.encrypt(this,d);return this._decrypt?this._ghash.update(d):this._ghash.update(g),this._len+=d.length,g},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var d=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(p,g){var m=0;p.length!==g.length&&m++;for(var _=Math.min(p.length,g.length),v=0;v<_;++v)m+=p[v]^g[v];return m}(d,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=d,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(d){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=d},h.prototype.setAAD=function(d){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(d),this._alen+=d.length},t.exports=h},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(n,t,e){"use strict";var i=n("./encrypter"),r=n("./decrypter"),s=n("./modes/list.json");e.createCipher=e.Cipher=i.createCipher,e.createCipheriv=e.Cipheriv=i.createCipheriv,e.createDecipher=e.Decipher=r.createDecipher,e.createDecipheriv=e.Decipheriv=r.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(s)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(n,t,e){"use strict";var i=n("./authCipher"),r=n("safe-buffer").Buffer,s=n("./modes"),a=n("./streamCipher"),o=n("cipher-base"),l=n("./aes"),c=n("evp_bytestokey");function h(g,m,_){o.call(this),this._cache=new d,this._last=void 0,this._cipher=new l.AES(m),this._prev=r.from(_),this._mode=g,this._autopadding=!0}function d(){this.cache=r.allocUnsafe(0)}function p(g,m,_){var v=s[g.toLowerCase()];if(!v)throw new TypeError("invalid suite type");if(typeof _=="string"&&(_=r.from(_)),v.mode!=="GCM"&&_.length!==v.iv)throw new TypeError("invalid iv length "+_.length);if(typeof m=="string"&&(m=r.from(m)),m.length!==v.key/8)throw new TypeError("invalid key length "+m.length);return v.type==="stream"?new a(v.module,m,_,!0):v.type==="auth"?new i(v.module,m,_,!0):new h(v.module,m,_)}n("inherits")(h,o),h.prototype._update=function(g){var m,_;this._cache.add(g);for(var v=[];m=this._cache.get(this._autopadding);)_=this._mode.decrypt(this,m),v.push(_);return r.concat(v)},h.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return function(m){var _=m[15];if(_<1||_>16)throw new Error("unable to decrypt data");for(var v=-1;++v<_;)if(m[v+(16-_)]!==_)throw new Error("unable to decrypt data");if(_!==16)return m.slice(0,16-_)}(this._mode.decrypt(this,g));if(g)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this},d.prototype.add=function(g){this.cache=r.concat([this.cache,g])},d.prototype.get=function(g){var m;if(g){if(this.cache.length>16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m}else if(this.cache.length>=16)return m=this.cache.slice(0,16),this.cache=this.cache.slice(16),m;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(g,m){var _=s[g.toLowerCase()];if(!_)throw new TypeError("invalid suite type");var v=c(m,!1,_.key,_.iv);return p(g,v.key,v.iv)},e.createDecipheriv=p},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(n,t,e){"use strict";var i=n("./modes"),r=n("./authCipher"),s=n("safe-buffer").Buffer,a=n("./streamCipher"),o=n("cipher-base"),l=n("./aes"),c=n("evp_bytestokey");function h(m,_,v){o.call(this),this._cache=new p,this._cipher=new l.AES(_),this._prev=s.from(v),this._mode=m,this._autopadding=!0}n("inherits")(h,o),h.prototype._update=function(m){var _,v;this._cache.add(m);for(var x=[];_=this._cache.get();)v=this._mode.encrypt(this,_),x.push(v);return s.concat(x)};var d=s.alloc(16,16);function p(){this.cache=s.allocUnsafe(0)}function g(m,_,v){var x=i[m.toLowerCase()];if(!x)throw new TypeError("invalid suite type");if(typeof _=="string"&&(_=s.from(_)),_.length!==x.key/8)throw new TypeError("invalid key length "+_.length);if(typeof v=="string"&&(v=s.from(v)),x.mode!=="GCM"&&v.length!==x.iv)throw new TypeError("invalid iv length "+v.length);return x.type==="stream"?new a(x.module,_,v):x.type==="auth"?new r(x.module,_,v):new h(x.module,_,v)}h.prototype._final=function(){var m=this._cache.flush();if(this._autopadding)return m=this._mode.encrypt(this,m),this._cipher.scrub(),m;if(!m.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(m){return this._autopadding=!!m,this},p.prototype.add=function(m){this.cache=s.concat([this.cache,m])},p.prototype.get=function(){if(this.cache.length>15){var m=this.cache.slice(0,16);return this.cache=this.cache.slice(16),m}return null},p.prototype.flush=function(){for(var m=16-this.cache.length,_=s.allocUnsafe(m),v=-1;++v<m;)_.writeUInt8(m,v);return s.concat([this.cache,_])},e.createCipheriv=g,e.createCipher=function(m,_){var v=i[m.toLowerCase()];if(!v)throw new TypeError("invalid suite type");var x=c(_,!1,v.key,v.iv);return g(m,x.key,x.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=i.alloc(16,0);function s(o){var l=i.allocUnsafe(16);return l.writeUInt32BE(o[0]>>>0,0),l.writeUInt32BE(o[1]>>>0,4),l.writeUInt32BE(o[2]>>>0,8),l.writeUInt32BE(o[3]>>>0,12),l}function a(o){this.h=o,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}a.prototype.ghash=function(o){for(var l=-1;++l<o.length;)this.state[l]^=o[l];this._multiply()},a.prototype._multiply=function(){for(var o,l,c,h=[(o=this.h).readUInt32BE(0),o.readUInt32BE(4),o.readUInt32BE(8),o.readUInt32BE(12)],d=[0,0,0,0],p=-1;++p<128;){for(this.state[~~(p/8)]&1<<7-p%8&&(d[0]^=h[0],d[1]^=h[1],d[2]^=h[2],d[3]^=h[3]),c=(1&h[3])!=0,l=3;l>0;l--)h[l]=h[l]>>>1|(1&h[l-1])<<31;h[0]=h[0]>>>1,c&&(h[0]=h[0]^225<<24)}this.state=s(d)},a.prototype.update=function(o){var l;for(this.cache=i.concat([this.cache,o]);this.cache.length>=16;)l=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(l)},a.prototype.final=function(o,l){return this.cache.length&&this.ghash(i.concat([this.cache,r],16)),this.ghash(s([0,o,0,l])),this.state},t.exports=a},{"safe-buffer":494}],195:[function(n,t,e){"use strict";t.exports=function(i){for(var r,s=i.length;s--;){if((r=i.readUInt8(s))!==255){r++,i.writeUInt8(r,s);break}i.writeUInt8(0,s)}}},{}],196:[function(n,t,e){"use strict";var i=n("buffer-xor");e.encrypt=function(r,s){var a=i(s,r._prev);return r._prev=r._cipher.encryptBlock(a),r._prev},e.decrypt=function(r,s){var a=r._prev;r._prev=s;var o=r._cipher.decryptBlock(s);return i(o,a)}},{"buffer-xor":219}],197:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=n("buffer-xor");function s(a,o,l){var c=o.length,h=r(o,a._cache);return a._cache=a._cache.slice(c),a._prev=i.concat([a._prev,l?o:h]),h}e.encrypt=function(a,o,l){for(var c,h=i.allocUnsafe(0);o.length;){if(a._cache.length===0&&(a._cache=a._cipher.encryptBlock(a._prev),a._prev=i.allocUnsafe(0)),!(a._cache.length<=o.length)){h=i.concat([h,s(a,o,l)]);break}c=a._cache.length,h=i.concat([h,s(a,o.slice(0,c),l)]),o=o.slice(c)}return h}},{"buffer-xor":219,"safe-buffer":494}],198:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer;function r(a,o,l){for(var c,h,d=-1,p=0;++d<8;)c=o&1<<7-d?128:0,p+=(128&(h=a._cipher.encryptBlock(a._prev)[0]^c))>>d%8,a._prev=s(a._prev,l?c:h);return p}function s(a,o){var l=a.length,c=-1,h=i.allocUnsafe(a.length);for(a=i.concat([a,i.from([o])]);++c<l;)h[c]=a[c]<<1|a[c+1]>>7;return h}e.encrypt=function(a,o,l){for(var c=o.length,h=i.allocUnsafe(c),d=-1;++d<c;)h[d]=r(a,o[d],l);return h}},{"safe-buffer":494}],199:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer;function r(s,a,o){var l=s._cipher.encryptBlock(s._prev)[0]^a;return s._prev=i.concat([s._prev.slice(1),i.from([o?a:l])]),l}e.encrypt=function(s,a,o){for(var l=a.length,c=i.allocUnsafe(l),h=-1;++h<l;)c[h]=r(s,a[h],o);return c}},{"safe-buffer":494}],200:[function(n,t,e){"use strict";var i=n("buffer-xor"),r=n("safe-buffer").Buffer,s=n("../incr32");function a(o){var l=o._cipher.encryptBlockRaw(o._prev);return s(o._prev),l}e.encrypt=function(o,l){var c=Math.ceil(l.length/16),h=o._cache.length;o._cache=r.concat([o._cache,r.allocUnsafe(16*c)]);for(var d=0;d<c;d++){var p=a(o),g=h+16*d;o._cache.writeUInt32BE(p[0],g+0),o._cache.writeUInt32BE(p[1],g+4),o._cache.writeUInt32BE(p[2],g+8),o._cache.writeUInt32BE(p[3],g+12)}var m=o._cache.slice(0,l.length);return o._cache=o._cache.slice(l.length),i(l,m)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(n,t,e){"use strict";e.encrypt=function(i,r){return i._cipher.encryptBlock(r)},e.decrypt=function(i,r){return i._cipher.decryptBlock(r)}},{}],202:[function(n,t,e){"use strict";var i={ECB:n("./ecb"),CBC:n("./cbc"),CFB:n("./cfb"),CFB8:n("./cfb8"),CFB1:n("./cfb1"),OFB:n("./ofb"),CTR:n("./ctr"),GCM:n("./ctr")},r=n("./list.json");for(var s in r)r[s].module=i[r[s].mode];t.exports=r},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(n,t,e){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(n,t,e){(function(i){(function(){"use strict";var r=n("buffer-xor");function s(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}e.encrypt=function(a,o){for(;a._cache.length<o.length;)a._cache=i.concat([a._cache,s(a)]);var l=a._cache.slice(0,o.length);return a._cache=a._cache.slice(o.length),r(o,l)}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(n,t,e){"use strict";var i=n("./aes"),r=n("safe-buffer").Buffer,s=n("cipher-base");function a(o,l,c,h){s.call(this),this._cipher=new i.AES(l),this._prev=r.from(c),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=h,this._mode=o}n("inherits")(a,s),a.prototype._update=function(o){return this._mode.encrypt(this,o,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(n,t,e){"use strict";var i=n("browserify-des"),r=n("browserify-aes/browser"),s=n("browserify-aes/modes"),a=n("browserify-des/modes"),o=n("evp_bytestokey");function l(h,d,p){if(h=h.toLowerCase(),s[h])return r.createCipheriv(h,d,p);if(a[h])return new i({key:d,iv:p,mode:h});throw new TypeError("invalid suite type")}function c(h,d,p){if(h=h.toLowerCase(),s[h])return r.createDecipheriv(h,d,p);if(a[h])return new i({key:d,iv:p,mode:h,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(h,d){var p,g;if(h=h.toLowerCase(),s[h])p=s[h].key,g=s[h].iv;else{if(!a[h])throw new TypeError("invalid suite type");p=8*a[h].key,g=a[h].iv}var m=o(d,!1,p,g);return l(h,m.key,m.iv)},e.createCipheriv=e.Cipheriv=l,e.createDecipher=e.Decipher=function(h,d){var p,g;if(h=h.toLowerCase(),s[h])p=s[h].key,g=s[h].iv;else{if(!a[h])throw new TypeError("invalid suite type");p=8*a[h].key,g=a[h].iv}var m=o(d,!1,p,g);return c(h,m.key,m.iv)},e.createDecipheriv=e.Decipheriv=c,e.listCiphers=e.getCiphers=function(){return Object.keys(a).concat(r.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(n,t,e){"use strict";var i=n("cipher-base"),r=n("des.js"),s=n("inherits"),a=n("safe-buffer").Buffer,o={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function l(c){i.call(this);var h,d=c.mode.toLowerCase(),p=o[d];h=c.decrypt?"decrypt":"encrypt";var g=c.key;a.isBuffer(g)||(g=a.from(g)),d!=="des-ede"&&d!=="des-ede-cbc"||(g=a.concat([g,g.slice(0,8)]));var m=c.iv;a.isBuffer(m)||(m=a.from(m)),this._des=p.create({key:g,iv:m,type:h})}o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],t.exports=l,s(l,i),l.prototype._update=function(c){return a.from(this._des.update(c))},l.prototype._final=function(){return a.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(n,t,e){"use strict";e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},{}],209:[function(n,t,e){(function(i){(function(){"use strict";var r=n("bn.js"),s=n("randombytes");function a(l){var c,h=l.modulus.byteLength();do c=new r(s(h));while(c.cmp(l.modulus)>=0||!c.umod(l.prime1)||!c.umod(l.prime2));return c}function o(l,c){var h=function(U){var z=a(U);return{blinder:z.toRed(r.mont(U.modulus)).redPow(new r(U.publicExponent)).fromRed(),unblinder:z.invm(U.modulus)}}(c),d=c.modulus.byteLength(),p=new r(l).mul(h.blinder).umod(c.modulus),g=p.toRed(r.mont(c.prime1)),m=p.toRed(r.mont(c.prime2)),_=c.coefficient,v=c.prime1,x=c.prime2,S=g.redPow(c.exponent1).fromRed(),O=m.redPow(c.exponent2).fromRed(),D=S.isub(O).imul(_).umod(v).imul(x);return O.iadd(D).imul(h.unblinder).umod(c.modulus).toArrayLike(i,"be",d)}o.getr=a,t.exports=o}).call(this)}).call(this,n("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(n,t,e){"use strict";t.exports=n("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(n,t,e){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(n,t,e){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=n("create-hash"),s=n("readable-stream"),a=n("inherits"),o=n("./sign"),l=n("./verify"),c=n("./algorithms.json");function h(m){s.Writable.call(this);var _=c[m];if(!_)throw new Error("Unknown message digest");this._hashType=_.hash,this._hash=r(_.hash),this._tag=_.id,this._signType=_.sign}function d(m){s.Writable.call(this);var _=c[m];if(!_)throw new Error("Unknown message digest");this._hash=r(_.hash),this._tag=_.id,this._signType=_.sign}function p(m){return new h(m)}function g(m){return new d(m)}Object.keys(c).forEach(function(m){c[m].id=i.from(c[m].id,"hex"),c[m.toLowerCase()]=c[m]}),a(h,s.Writable),h.prototype._write=function(m,_,v){this._hash.update(m),v()},h.prototype.update=function(m,_){return typeof m=="string"&&(m=i.from(m,_)),this._hash.update(m),this},h.prototype.sign=function(m,_){this.end();var v=this._hash.digest(),x=o(v,m,this._hashType,this._signType,this._tag);return _?x.toString(_):x},a(d,s.Writable),d.prototype._write=function(m,_,v){this._hash.update(m),v()},d.prototype.update=function(m,_){return typeof m=="string"&&(m=i.from(m,_)),this._hash.update(m),this},d.prototype.verify=function(m,_,v){typeof _=="string"&&(_=i.from(_,v)),this.end();var x=this._hash.digest();return l(_,x,m,this._signType,this._tag)},t.exports={Sign:p,Verify:g,createSign:p,createVerify:g}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=n("create-hmac"),s=n("browserify-rsa"),a=n("elliptic").ec,o=n("bn.js"),l=n("parse-asn1"),c=n("./curves.json");function h(m,_,v,x){if((m=i.from(m.toArray())).length<_.byteLength()){var S=i.alloc(_.byteLength()-m.length);m=i.concat([S,m])}var O=v.length,D=function(V,G){V=(V=d(V,G)).mod(G);var tt=i.from(V.toArray());if(tt.length<G.byteLength()){var K=i.alloc(G.byteLength()-tt.length);tt=i.concat([K,tt])}return tt}(v,_),U=i.alloc(O);U.fill(1);var z=i.alloc(O);return z=r(x,z).update(U).update(i.from([0])).update(m).update(D).digest(),U=r(x,z).update(U).digest(),{k:z=r(x,z).update(U).update(i.from([1])).update(m).update(D).digest(),v:U=r(x,z).update(U).digest()}}function d(m,_){var v=new o(m),x=(m.length<<3)-_.bitLength();return x>0&&v.ishrn(x),v}function p(m,_,v){var x,S;do{for(x=i.alloc(0);8*x.length<m.bitLength();)_.v=r(v,_.k).update(_.v).digest(),x=i.concat([x,_.v]);S=d(x,m),_.k=r(v,_.k).update(_.v).update(i.from([0])).digest(),_.v=r(v,_.k).update(_.v).digest()}while(S.cmp(m)!==-1);return S}function g(m,_,v,x){return m.toRed(o.mont(v)).redPow(_).fromRed().mod(x)}t.exports=function(m,_,v,x,S){var O=l(_);if(O.curve){if(x!=="ecdsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");return function(V,G){var tt=c[G.curve.join(".")];if(!tt)throw new Error("unknown curve "+G.curve.join("."));var K=new a(tt).keyFromPrivate(G.privateKey).sign(V);return i.from(K.toDER())}(m,O)}if(O.type==="dsa"){if(x!=="dsa")throw new Error("wrong private key type");return function(V,G,tt){for(var K,B=G.params.priv_key,N=G.params.p,Z=G.params.q,w=G.params.g,C=new o(0),k=d(V,Z).mod(Z),T=!1,R=h(B,Z,V,tt);T===!1;)K=p(Z,R,tt),C=g(w,K,N,Z),(T=K.invm(Z).imul(k.add(B.mul(C))).mod(Z)).cmpn(0)===0&&(T=!1,C=new o(0));return function(F,H){F=F.toArray(),H=H.toArray(),128&F[0]&&(F=[0].concat(F)),128&H[0]&&(H=[0].concat(H));var it=[48,F.length+H.length+4,2,F.length];return it=it.concat(F,[2,H.length],H),i.from(it)}(C,T)}(m,O,v)}if(x!=="rsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");m=i.concat([S,m]);for(var D=O.modulus.byteLength(),U=[0,1];m.length+U.length+1<D;)U.push(255);U.push(0);for(var z=-1;++z<m.length;)U.push(m[z]);return s(U,O)},t.exports.getKey=h,t.exports.makeKey=p},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=n("bn.js"),s=n("elliptic").ec,a=n("parse-asn1"),o=n("./curves.json");function l(c,h){if(c.cmpn(0)<=0)throw new Error("invalid sig");if(c.cmp(h)>=h)throw new Error("invalid sig")}t.exports=function(c,h,d,p,g){var m=a(d);if(m.type==="ec"){if(p!=="ecdsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");return function(U,z,V){var G=o[V.data.algorithm.curve.join(".")];if(!G)throw new Error("unknown curve "+V.data.algorithm.curve.join("."));var tt=new s(G),K=V.data.subjectPrivateKey.data;return tt.verify(z,U,K)}(c,h,m)}if(m.type==="dsa"){if(p!=="dsa")throw new Error("wrong public key type");return function(U,z,V){var G=V.data.p,tt=V.data.q,K=V.data.g,B=V.data.pub_key,N=a.signature.decode(U,"der"),Z=N.s,w=N.r;l(Z,tt),l(w,tt);var C=r.mont(G),k=Z.invm(tt);return K.toRed(C).redPow(new r(z).mul(k).mod(tt)).fromRed().mul(B.toRed(C).redPow(w.mul(k).mod(tt)).fromRed()).mod(G).mod(tt).cmp(w)===0}(c,h,m)}if(p!=="rsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");h=i.concat([g,h]);for(var _=m.modulus.byteLength(),v=[1],x=0;h.length+v.length+2<_;)v.push(255),x++;v.push(0);for(var S=-1;++S<h.length;)v.push(h[S]);v=i.from(v);var O=r.mont(m.modulus);c=(c=new r(c).toRed(O)).redPow(new r(m.publicExponent)),c=i.from(c.fromRed().toArray());var D=x<8?1:0;for(_=Math.min(c.length,v.length),c.length!==v.length&&(D=1),S=-1;++S<_;)D|=c[S]^v[S];return D===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(n,t,e){},{}],217:[function(n,t,e){"use strict";var i=n("buffer"),r=i.Buffer;function s(o,l){for(var c in o)l[c]=o[c]}function a(o,l,c){return r(o,l,c)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=a),s(r,a),a.from=function(o,l,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,l,c)},a.alloc=function(o,l,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=r(o);return l!==void 0?typeof c=="string"?h.fill(l,c):h.fill(l):h.fill(0),h},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(o)}},{buffer:220}],218:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=i.isEncoding||function(m){switch((m=""+m)&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(m){var _;switch(this.encoding=function(v){var x=function(S){if(!S)return"utf8";for(var O;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(O)return;S=(""+S).toLowerCase(),O=!0}}(v);if(typeof x!="string"&&(i.isEncoding===r||!r(v)))throw new Error("Unknown encoding: "+v);return x||v}(m),this.encoding){case"utf16le":this.text=l,this.end=c,_=4;break;case"utf8":this.fillLast=o,_=4;break;case"base64":this.text=h,this.end=d,_=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(_)}function a(m){return m<=127?0:m>>5==6?2:m>>4==14?3:m>>3==30?4:m>>6==2?-1:-2}function o(m){var _=this.lastTotal-this.lastNeed,v=function(x,S,O){if((192&S[0])!=128)return x.lastNeed=0,"\uFFFD";if(x.lastNeed>1&&S.length>1){if((192&S[1])!=128)return x.lastNeed=1,"\uFFFD";if(x.lastNeed>2&&S.length>2&&(192&S[2])!=128)return x.lastNeed=2,"\uFFFD"}}(this,m);return v!==void 0?v:this.lastNeed<=m.length?(m.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(m.copy(this.lastChar,_,0,m.length),void(this.lastNeed-=m.length))}function l(m,_){if((m.length-_)%2==0){var v=m.toString("utf16le",_);if(v){var x=v.charCodeAt(v.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",_,m.length-1)}function c(m){var _=m&&m.length?this.write(m):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,v)}return _}function h(m,_){var v=(m.length-_)%3;return v===0?m.toString("base64",_):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",_,m.length-v))}function d(m){var _=m&&m.length?this.write(m):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function p(m){return m.toString(this.encoding)}function g(m){return m&&m.length?this.write(m):""}e.StringDecoder=s,s.prototype.write=function(m){if(m.length===0)return"";var _,v;if(this.lastNeed){if((_=this.fillLast(m))===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<m.length?_?_+this.text(m,v):this.text(m,v):_||""},s.prototype.end=function(m){var _=m&&m.length?this.write(m):"";return this.lastNeed?_+"\uFFFD":_},s.prototype.text=function(m,_){var v=function(S,O,D){var U=O.length-1;if(U<D)return 0;var z=a(O[U]);return z>=0?(z>0&&(S.lastNeed=z-1),z):--U<D||z===-2?0:(z=a(O[U]))>=0?(z>0&&(S.lastNeed=z-2),z):--U<D||z===-2?0:(z=a(O[U]))>=0?(z>0&&(z===2?z=0:S.lastNeed=z-3),z):0}(this,m,_);if(!this.lastNeed)return m.toString("utf8",_);this.lastTotal=v;var x=m.length-(v-this.lastNeed);return m.copy(this.lastChar,0,x),m.toString("utf8",_,x)},s.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length}},{"safe-buffer":217}],219:[function(n,t,e){(function(i){(function(){"use strict";t.exports=function(r,s){for(var a=Math.min(r.length,s.length),o=new i(a),l=0;l<a;++l)o[l]=r[l]^s[l];return o}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:220}],220:[function(n,t,e){(function(i){(function(){"use strict";var r=n("base64-js"),s=n("ieee754");e.Buffer=o,e.SlowBuffer=function(W){return+W!=W&&(W=0),o.alloc(+W)},e.INSPECT_MAX_BYTES=50;function a(W){if(W>2147483647)throw new RangeError('The value "'+W+'" is invalid for option "size"');var q=new Uint8Array(W);return q.__proto__=o.prototype,q}function o(W,q,rt){if(typeof W=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(W)}return l(W,q,rt)}function l(W,q,rt){if(typeof W=="string")return function(_t,Ct){if(typeof Ct=="string"&&Ct!==""||(Ct="utf8"),!o.isEncoding(Ct))throw new TypeError("Unknown encoding: "+Ct);var Ft=0|g(_t,Ct),At=a(Ft),vt=At.write(_t,Ct);return vt!==Ft&&(At=At.slice(0,vt)),At}(W,q);if(ArrayBuffer.isView(W))return d(W);if(W==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if($(W,ArrayBuffer)||W&&$(W.buffer,ArrayBuffer))return function(_t,Ct,Ft){if(Ct<0||_t.byteLength<Ct)throw new RangeError('"offset" is outside of buffer bounds');if(_t.byteLength<Ct+(Ft||0))throw new RangeError('"length" is outside of buffer bounds');var At;return At=Ct===void 0&&Ft===void 0?new Uint8Array(_t):Ft===void 0?new Uint8Array(_t,Ct):new Uint8Array(_t,Ct,Ft),At.__proto__=o.prototype,At}(W,q,rt);if(typeof W=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var mt=W.valueOf&&W.valueOf();if(mt!=null&&mt!==W)return o.from(mt,q,rt);var wt=function(_t){if(o.isBuffer(_t)){var Ct=0|p(_t.length),Ft=a(Ct);return Ft.length===0||_t.copy(Ft,0,0,Ct),Ft}if(_t.length!==void 0)return typeof _t.length!="number"||ct(_t.length)?a(0):d(_t);if(_t.type==="Buffer"&&Array.isArray(_t.data))return d(_t.data)}(W);if(wt)return wt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof W[Symbol.toPrimitive]=="function")return o.from(W[Symbol.toPrimitive]("string"),q,rt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}function c(W){if(typeof W!="number")throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function h(W){return c(W),a(W<0?0:0|p(W))}function d(W){for(var q=W.length<0?0:0|p(W.length),rt=a(q),mt=0;mt<q;mt+=1)rt[mt]=255&W[mt];return rt}function p(W){if(W>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|W}function g(W,q){if(o.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||$(W,ArrayBuffer))return W.byteLength;if(typeof W!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);var rt=W.length,mt=arguments.length>2&&arguments[2]===!0;if(!mt&&rt===0)return 0;for(var wt=!1;;)switch(q){case"ascii":case"latin1":case"binary":return rt;case"utf8":case"utf-8":return it(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*rt;case"hex":return rt>>>1;case"base64":return ot(W).length;default:if(wt)return mt?-1:it(W).length;q=(""+q).toLowerCase(),wt=!0}}function m(W,q,rt){var mt=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((rt===void 0||rt>this.length)&&(rt=this.length),rt<=0)||(rt>>>=0)<=(q>>>=0))return"";for(W||(W="utf8");;)switch(W){case"hex":return N(this,q,rt);case"utf8":case"utf-8":return tt(this,q,rt);case"ascii":return K(this,q,rt);case"latin1":case"binary":return B(this,q,rt);case"base64":return G(this,q,rt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,q,rt);default:if(mt)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),mt=!0}}function _(W,q,rt){var mt=W[q];W[q]=W[rt],W[rt]=mt}function v(W,q,rt,mt,wt){if(W.length===0)return-1;if(typeof rt=="string"?(mt=rt,rt=0):rt>2147483647?rt=2147483647:rt<-2147483648&&(rt=-2147483648),ct(rt=+rt)&&(rt=wt?0:W.length-1),rt<0&&(rt=W.length+rt),rt>=W.length){if(wt)return-1;rt=W.length-1}else if(rt<0){if(!wt)return-1;rt=0}if(typeof q=="string"&&(q=o.from(q,mt)),o.isBuffer(q))return q.length===0?-1:x(W,q,rt,mt,wt);if(typeof q=="number")return q&=255,typeof Uint8Array.prototype.indexOf=="function"?wt?Uint8Array.prototype.indexOf.call(W,q,rt):Uint8Array.prototype.lastIndexOf.call(W,q,rt):x(W,[q],rt,mt,wt);throw new TypeError("val must be string, number or Buffer")}function x(W,q,rt,mt,wt){var _t,Ct=1,Ft=W.length,At=q.length;if(mt!==void 0&&((mt=String(mt).toLowerCase())==="ucs2"||mt==="ucs-2"||mt==="utf16le"||mt==="utf-16le")){if(W.length<2||q.length<2)return-1;Ct=2,Ft/=2,At/=2,rt/=2}function vt(Q,Y){return Ct===1?Q[Y]:Q.readUInt16BE(Y*Ct)}if(wt){var kt=-1;for(_t=rt;_t<Ft;_t++)if(vt(W,_t)===vt(q,kt===-1?0:_t-kt)){if(kt===-1&&(kt=_t),_t-kt+1===At)return kt*Ct}else kt!==-1&&(_t-=_t-kt),kt=-1}else for(rt+At>Ft&&(rt=Ft-At),_t=rt;_t>=0;_t--){for(var gt=!0,ut=0;ut<At;ut++)if(vt(W,_t+ut)!==vt(q,ut)){gt=!1;break}if(gt)return _t}return-1}function S(W,q,rt,mt){rt=Number(rt)||0;var wt=W.length-rt;mt?(mt=Number(mt))>wt&&(mt=wt):mt=wt;var _t=q.length;mt>_t/2&&(mt=_t/2);for(var Ct=0;Ct<mt;++Ct){var Ft=parseInt(q.substr(2*Ct,2),16);if(ct(Ft))return Ct;W[rt+Ct]=Ft}return Ct}function O(W,q,rt,mt){return dt(it(q,W.length-rt),W,rt,mt)}function D(W,q,rt,mt){return dt(function(wt){for(var _t=[],Ct=0;Ct<wt.length;++Ct)_t.push(255&wt.charCodeAt(Ct));return _t}(q),W,rt,mt)}function U(W,q,rt,mt){return D(W,q,rt,mt)}function z(W,q,rt,mt){return dt(ot(q),W,rt,mt)}function V(W,q,rt,mt){return dt(function(wt,_t){for(var Ct,Ft,At,vt=[],kt=0;kt<wt.length&&!((_t-=2)<0);++kt)Ct=wt.charCodeAt(kt),Ft=Ct>>8,At=Ct%256,vt.push(At),vt.push(Ft);return vt}(q,W.length-rt),W,rt,mt)}function G(W,q,rt){return q===0&&rt===W.length?r.fromByteArray(W):r.fromByteArray(W.slice(q,rt))}function tt(W,q,rt){rt=Math.min(W.length,rt);for(var mt=[],wt=q;wt<rt;){var _t,Ct,Ft,At,vt=W[wt],kt=null,gt=vt>239?4:vt>223?3:vt>191?2:1;if(wt+gt<=rt)switch(gt){case 1:vt<128&&(kt=vt);break;case 2:(192&(_t=W[wt+1]))==128&&(At=(31&vt)<<6|63&_t)>127&&(kt=At);break;case 3:_t=W[wt+1],Ct=W[wt+2],(192&_t)==128&&(192&Ct)==128&&(At=(15&vt)<<12|(63&_t)<<6|63&Ct)>2047&&(At<55296||At>57343)&&(kt=At);break;case 4:_t=W[wt+1],Ct=W[wt+2],Ft=W[wt+3],(192&_t)==128&&(192&Ct)==128&&(192&Ft)==128&&(At=(15&vt)<<18|(63&_t)<<12|(63&Ct)<<6|63&Ft)>65535&&At<1114112&&(kt=At)}kt===null?(kt=65533,gt=1):kt>65535&&(kt-=65536,mt.push(kt>>>10&1023|55296),kt=56320|1023&kt),mt.push(kt),wt+=gt}return function(ut){var Q=ut.length;if(Q<=4096)return String.fromCharCode.apply(String,ut);for(var Y="",et=0;et<Q;)Y+=String.fromCharCode.apply(String,ut.slice(et,et+=4096));return Y}(mt)}e.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function(){try{var W=new Uint8Array(1);return W.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},W.foo()===42}catch{return!1}}(),o.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(W,q,rt){return l(W,q,rt)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(W,q,rt){return function(mt,wt,_t){return c(mt),mt<=0?a(mt):wt!==void 0?typeof _t=="string"?a(mt).fill(wt,_t):a(mt).fill(wt):a(mt)}(W,q,rt)},o.allocUnsafe=function(W){return h(W)},o.allocUnsafeSlow=function(W){return h(W)},o.isBuffer=function(W){return W!=null&&W._isBuffer===!0&&W!==o.prototype},o.compare=function(W,q){if($(W,Uint8Array)&&(W=o.from(W,W.offset,W.byteLength)),$(q,Uint8Array)&&(q=o.from(q,q.offset,q.byteLength)),!o.isBuffer(W)||!o.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===q)return 0;for(var rt=W.length,mt=q.length,wt=0,_t=Math.min(rt,mt);wt<_t;++wt)if(W[wt]!==q[wt]){rt=W[wt],mt=q[wt];break}return rt<mt?-1:mt<rt?1:0},o.isEncoding=function(W){switch(String(W).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(W,q){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(W.length===0)return o.alloc(0);var rt;if(q===void 0)for(q=0,rt=0;rt<W.length;++rt)q+=W[rt].length;var mt=o.allocUnsafe(q),wt=0;for(rt=0;rt<W.length;++rt){var _t=W[rt];if($(_t,Uint8Array)&&(_t=o.from(_t)),!o.isBuffer(_t))throw new TypeError('"list" argument must be an Array of Buffers');_t.copy(mt,wt),wt+=_t.length}return mt},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var W=this.length;if(W%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var q=0;q<W;q+=2)_(this,q,q+1);return this},o.prototype.swap32=function(){var W=this.length;if(W%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var q=0;q<W;q+=4)_(this,q,q+3),_(this,q+1,q+2);return this},o.prototype.swap64=function(){var W=this.length;if(W%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var q=0;q<W;q+=8)_(this,q,q+7),_(this,q+1,q+6),_(this,q+2,q+5),_(this,q+3,q+4);return this},o.prototype.toString=function(){var W=this.length;return W===0?"":arguments.length===0?tt(this,0,W):m.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(W){if(!o.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W||o.compare(this,W)===0},o.prototype.inspect=function(){var W="",q=e.INSPECT_MAX_BYTES;return W=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(W+=" ... "),"<Buffer "+W+">"},o.prototype.compare=function(W,q,rt,mt,wt){if($(W,Uint8Array)&&(W=o.from(W,W.offset,W.byteLength)),!o.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof W);if(q===void 0&&(q=0),rt===void 0&&(rt=W?W.length:0),mt===void 0&&(mt=0),wt===void 0&&(wt=this.length),q<0||rt>W.length||mt<0||wt>this.length)throw new RangeError("out of range index");if(mt>=wt&&q>=rt)return 0;if(mt>=wt)return-1;if(q>=rt)return 1;if(this===W)return 0;for(var _t=(wt>>>=0)-(mt>>>=0),Ct=(rt>>>=0)-(q>>>=0),Ft=Math.min(_t,Ct),At=this.slice(mt,wt),vt=W.slice(q,rt),kt=0;kt<Ft;++kt)if(At[kt]!==vt[kt]){_t=At[kt],Ct=vt[kt];break}return _t<Ct?-1:Ct<_t?1:0},o.prototype.includes=function(W,q,rt){return this.indexOf(W,q,rt)!==-1},o.prototype.indexOf=function(W,q,rt){return v(this,W,q,rt,!0)},o.prototype.lastIndexOf=function(W,q,rt){return v(this,W,q,rt,!1)},o.prototype.write=function(W,q,rt,mt){if(q===void 0)mt="utf8",rt=this.length,q=0;else if(rt===void 0&&typeof q=="string")mt=q,rt=this.length,q=0;else{if(!isFinite(q))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");q>>>=0,isFinite(rt)?(rt>>>=0,mt===void 0&&(mt="utf8")):(mt=rt,rt=void 0)}var wt=this.length-q;if((rt===void 0||rt>wt)&&(rt=wt),W.length>0&&(rt<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");mt||(mt="utf8");for(var _t=!1;;)switch(mt){case"hex":return S(this,W,q,rt);case"utf8":case"utf-8":return O(this,W,q,rt);case"ascii":return D(this,W,q,rt);case"latin1":case"binary":return U(this,W,q,rt);case"base64":return z(this,W,q,rt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,W,q,rt);default:if(_t)throw new TypeError("Unknown encoding: "+mt);mt=(""+mt).toLowerCase(),_t=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(W,q,rt){var mt="";rt=Math.min(W.length,rt);for(var wt=q;wt<rt;++wt)mt+=String.fromCharCode(127&W[wt]);return mt}function B(W,q,rt){var mt="";rt=Math.min(W.length,rt);for(var wt=q;wt<rt;++wt)mt+=String.fromCharCode(W[wt]);return mt}function N(W,q,rt){var mt=W.length;(!q||q<0)&&(q=0),(!rt||rt<0||rt>mt)&&(rt=mt);for(var wt="",_t=q;_t<rt;++_t)wt+=H(W[_t]);return wt}function Z(W,q,rt){for(var mt=W.slice(q,rt),wt="",_t=0;_t<mt.length;_t+=2)wt+=String.fromCharCode(mt[_t]+256*mt[_t+1]);return wt}function w(W,q,rt){if(W%1!=0||W<0)throw new RangeError("offset is not uint");if(W+q>rt)throw new RangeError("Trying to access beyond buffer length")}function C(W,q,rt,mt,wt,_t){if(!o.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>wt||q<_t)throw new RangeError('"value" argument is out of bounds');if(rt+mt>W.length)throw new RangeError("Index out of range")}function k(W,q,rt,mt,wt,_t){if(rt+mt>W.length)throw new RangeError("Index out of range");if(rt<0)throw new RangeError("Index out of range")}function T(W,q,rt,mt,wt){return q=+q,rt>>>=0,wt||k(W,0,rt,4),s.write(W,q,rt,mt,23,4),rt+4}function R(W,q,rt,mt,wt){return q=+q,rt>>>=0,wt||k(W,0,rt,8),s.write(W,q,rt,mt,52,8),rt+8}o.prototype.slice=function(W,q){var rt=this.length;(W=~~W)<0?(W+=rt)<0&&(W=0):W>rt&&(W=rt),(q=q===void 0?rt:~~q)<0?(q+=rt)<0&&(q=0):q>rt&&(q=rt),q<W&&(q=W);var mt=this.subarray(W,q);return mt.__proto__=o.prototype,mt},o.prototype.readUIntLE=function(W,q,rt){W>>>=0,q>>>=0,rt||w(W,q,this.length);for(var mt=this[W],wt=1,_t=0;++_t<q&&(wt*=256);)mt+=this[W+_t]*wt;return mt},o.prototype.readUIntBE=function(W,q,rt){W>>>=0,q>>>=0,rt||w(W,q,this.length);for(var mt=this[W+--q],wt=1;q>0&&(wt*=256);)mt+=this[W+--q]*wt;return mt},o.prototype.readUInt8=function(W,q){return W>>>=0,q||w(W,1,this.length),this[W]},o.prototype.readUInt16LE=function(W,q){return W>>>=0,q||w(W,2,this.length),this[W]|this[W+1]<<8},o.prototype.readUInt16BE=function(W,q){return W>>>=0,q||w(W,2,this.length),this[W]<<8|this[W+1]},o.prototype.readUInt32LE=function(W,q){return W>>>=0,q||w(W,4,this.length),(this[W]|this[W+1]<<8|this[W+2]<<16)+16777216*this[W+3]},o.prototype.readUInt32BE=function(W,q){return W>>>=0,q||w(W,4,this.length),16777216*this[W]+(this[W+1]<<16|this[W+2]<<8|this[W+3])},o.prototype.readIntLE=function(W,q,rt){W>>>=0,q>>>=0,rt||w(W,q,this.length);for(var mt=this[W],wt=1,_t=0;++_t<q&&(wt*=256);)mt+=this[W+_t]*wt;return mt>=(wt*=128)&&(mt-=Math.pow(2,8*q)),mt},o.prototype.readIntBE=function(W,q,rt){W>>>=0,q>>>=0,rt||w(W,q,this.length);for(var mt=q,wt=1,_t=this[W+--mt];mt>0&&(wt*=256);)_t+=this[W+--mt]*wt;return _t>=(wt*=128)&&(_t-=Math.pow(2,8*q)),_t},o.prototype.readInt8=function(W,q){return W>>>=0,q||w(W,1,this.length),128&this[W]?-1*(255-this[W]+1):this[W]},o.prototype.readInt16LE=function(W,q){W>>>=0,q||w(W,2,this.length);var rt=this[W]|this[W+1]<<8;return 32768&rt?4294901760|rt:rt},o.prototype.readInt16BE=function(W,q){W>>>=0,q||w(W,2,this.length);var rt=this[W+1]|this[W]<<8;return 32768&rt?4294901760|rt:rt},o.prototype.readInt32LE=function(W,q){return W>>>=0,q||w(W,4,this.length),this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24},o.prototype.readInt32BE=function(W,q){return W>>>=0,q||w(W,4,this.length),this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]},o.prototype.readFloatLE=function(W,q){return W>>>=0,q||w(W,4,this.length),s.read(this,W,!0,23,4)},o.prototype.readFloatBE=function(W,q){return W>>>=0,q||w(W,4,this.length),s.read(this,W,!1,23,4)},o.prototype.readDoubleLE=function(W,q){return W>>>=0,q||w(W,8,this.length),s.read(this,W,!0,52,8)},o.prototype.readDoubleBE=function(W,q){return W>>>=0,q||w(W,8,this.length),s.read(this,W,!1,52,8)},o.prototype.writeUIntLE=function(W,q,rt,mt){W=+W,q>>>=0,rt>>>=0,mt||C(this,W,q,rt,Math.pow(2,8*rt)-1,0);var wt=1,_t=0;for(this[q]=255&W;++_t<rt&&(wt*=256);)this[q+_t]=W/wt&255;return q+rt},o.prototype.writeUIntBE=function(W,q,rt,mt){W=+W,q>>>=0,rt>>>=0,mt||C(this,W,q,rt,Math.pow(2,8*rt)-1,0);var wt=rt-1,_t=1;for(this[q+wt]=255&W;--wt>=0&&(_t*=256);)this[q+wt]=W/_t&255;return q+rt},o.prototype.writeUInt8=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,1,255,0),this[q]=255&W,q+1},o.prototype.writeUInt16LE=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,2,65535,0),this[q]=255&W,this[q+1]=W>>>8,q+2},o.prototype.writeUInt16BE=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,2,65535,0),this[q]=W>>>8,this[q+1]=255&W,q+2},o.prototype.writeUInt32LE=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,4,4294967295,0),this[q+3]=W>>>24,this[q+2]=W>>>16,this[q+1]=W>>>8,this[q]=255&W,q+4},o.prototype.writeUInt32BE=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,4,4294967295,0),this[q]=W>>>24,this[q+1]=W>>>16,this[q+2]=W>>>8,this[q+3]=255&W,q+4},o.prototype.writeIntLE=function(W,q,rt,mt){if(W=+W,q>>>=0,!mt){var wt=Math.pow(2,8*rt-1);C(this,W,q,rt,wt-1,-wt)}var _t=0,Ct=1,Ft=0;for(this[q]=255&W;++_t<rt&&(Ct*=256);)W<0&&Ft===0&&this[q+_t-1]!==0&&(Ft=1),this[q+_t]=(W/Ct>>0)-Ft&255;return q+rt},o.prototype.writeIntBE=function(W,q,rt,mt){if(W=+W,q>>>=0,!mt){var wt=Math.pow(2,8*rt-1);C(this,W,q,rt,wt-1,-wt)}var _t=rt-1,Ct=1,Ft=0;for(this[q+_t]=255&W;--_t>=0&&(Ct*=256);)W<0&&Ft===0&&this[q+_t+1]!==0&&(Ft=1),this[q+_t]=(W/Ct>>0)-Ft&255;return q+rt},o.prototype.writeInt8=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,1,127,-128),W<0&&(W=255+W+1),this[q]=255&W,q+1},o.prototype.writeInt16LE=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,2,32767,-32768),this[q]=255&W,this[q+1]=W>>>8,q+2},o.prototype.writeInt16BE=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,2,32767,-32768),this[q]=W>>>8,this[q+1]=255&W,q+2},o.prototype.writeInt32LE=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,4,2147483647,-2147483648),this[q]=255&W,this[q+1]=W>>>8,this[q+2]=W>>>16,this[q+3]=W>>>24,q+4},o.prototype.writeInt32BE=function(W,q,rt){return W=+W,q>>>=0,rt||C(this,W,q,4,2147483647,-2147483648),W<0&&(W=4294967295+W+1),this[q]=W>>>24,this[q+1]=W>>>16,this[q+2]=W>>>8,this[q+3]=255&W,q+4},o.prototype.writeFloatLE=function(W,q,rt){return T(this,W,q,!0,rt)},o.prototype.writeFloatBE=function(W,q,rt){return T(this,W,q,!1,rt)},o.prototype.writeDoubleLE=function(W,q,rt){return R(this,W,q,!0,rt)},o.prototype.writeDoubleBE=function(W,q,rt){return R(this,W,q,!1,rt)},o.prototype.copy=function(W,q,rt,mt){if(!o.isBuffer(W))throw new TypeError("argument should be a Buffer");if(rt||(rt=0),mt||mt===0||(mt=this.length),q>=W.length&&(q=W.length),q||(q=0),mt>0&&mt<rt&&(mt=rt),mt===rt||W.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(rt<0||rt>=this.length)throw new RangeError("Index out of range");if(mt<0)throw new RangeError("sourceEnd out of bounds");mt>this.length&&(mt=this.length),W.length-q<mt-rt&&(mt=W.length-q+rt);var wt=mt-rt;if(this===W&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(q,rt,mt);else if(this===W&&rt<q&&q<mt)for(var _t=wt-1;_t>=0;--_t)W[_t+q]=this[_t+rt];else Uint8Array.prototype.set.call(W,this.subarray(rt,mt),q);return wt},o.prototype.fill=function(W,q,rt,mt){if(typeof W=="string"){if(typeof q=="string"?(mt=q,q=0,rt=this.length):typeof rt=="string"&&(mt=rt,rt=this.length),mt!==void 0&&typeof mt!="string")throw new TypeError("encoding must be a string");if(typeof mt=="string"&&!o.isEncoding(mt))throw new TypeError("Unknown encoding: "+mt);if(W.length===1){var wt=W.charCodeAt(0);(mt==="utf8"&&wt<128||mt==="latin1")&&(W=wt)}}else typeof W=="number"&&(W&=255);if(q<0||this.length<q||this.length<rt)throw new RangeError("Out of range index");if(rt<=q)return this;var _t;if(q>>>=0,rt=rt===void 0?this.length:rt>>>0,W||(W=0),typeof W=="number")for(_t=q;_t<rt;++_t)this[_t]=W;else{var Ct=o.isBuffer(W)?W:o.from(W,mt),Ft=Ct.length;if(Ft===0)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(_t=0;_t<rt-q;++_t)this[_t+q]=Ct[_t%Ft]}return this};var F=/[^+/0-9A-Za-z-_]/g;function H(W){return W<16?"0"+W.toString(16):W.toString(16)}function it(W,q){var rt;q=q||1/0;for(var mt=W.length,wt=null,_t=[],Ct=0;Ct<mt;++Ct){if((rt=W.charCodeAt(Ct))>55295&&rt<57344){if(!wt){if(rt>56319){(q-=3)>-1&&_t.push(239,191,189);continue}if(Ct+1===mt){(q-=3)>-1&&_t.push(239,191,189);continue}wt=rt;continue}if(rt<56320){(q-=3)>-1&&_t.push(239,191,189),wt=rt;continue}rt=65536+(wt-55296<<10|rt-56320)}else wt&&(q-=3)>-1&&_t.push(239,191,189);if(wt=null,rt<128){if((q-=1)<0)break;_t.push(rt)}else if(rt<2048){if((q-=2)<0)break;_t.push(rt>>6|192,63&rt|128)}else if(rt<65536){if((q-=3)<0)break;_t.push(rt>>12|224,rt>>6&63|128,63&rt|128)}else{if(!(rt<1114112))throw new Error("Invalid code point");if((q-=4)<0)break;_t.push(rt>>18|240,rt>>12&63|128,rt>>6&63|128,63&rt|128)}}return _t}function ot(W){return r.toByteArray(function(q){if((q=(q=q.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;q.length%4!=0;)q+="=";return q}(W))}function dt(W,q,rt,mt){for(var wt=0;wt<mt&&!(wt+rt>=q.length||wt>=W.length);++wt)q[wt+rt]=W[wt];return wt}function $(W,q){return W instanceof q||W!=null&&W.constructor!=null&&W.constructor.name!=null&&W.constructor.name===q.name}function ct(W){return W!=W}}).call(this)}).call(this,n("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=n("stream").Transform,s=n("string_decoder").StringDecoder;function a(o){r.call(this),this.hashMode=typeof o=="string",this.hashMode?this[o]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n("inherits")(a,r),a.prototype.update=function(o,l,c){typeof o=="string"&&(o=i.from(o,l));var h=this._update(o);return this.hashMode?this:(c&&(h=this._toString(h,c)),h)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(o,l,c){var h;try{this.hashMode?this._update(o):this.push(this._update(o))}catch(d){h=d}finally{c(h)}},a.prototype._flush=function(o){var l;try{this.push(this.__final())}catch(c){l=c}o(l)},a.prototype._finalOrDigest=function(o){var l=this.__final()||i.alloc(0);return o&&(l=this._toString(l,o,!0)),l},a.prototype._toString=function(o,l,c){if(this._decoder||(this._decoder=new s(l),this._encoding=l),this._encoding!==l)throw new Error("can't switch encodings");var h=this._decoder.write(o);return c&&(h+=this._decoder.end()),h},t.exports=a},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(n,t,e){"use strict";var i=n("../internals/is-callable"),r=n("../internals/try-to-string"),s=TypeError;t.exports=function(a){if(i(a))return a;throw new s(r(a)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(n,t,e){"use strict";var i=n("../internals/is-constructor"),r=n("../internals/try-to-string"),s=TypeError;t.exports=function(a){if(i(a))return a;throw new s(r(a)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(n,t,e){"use strict";var i=n("../internals/is-callable"),r=String,s=TypeError;t.exports=function(a){if(typeof a=="object"||i(a))return a;throw new s("Can't set "+r(a)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(n,t,e){"use strict";var i=n("../internals/well-known-symbol"),r=n("../internals/object-create"),s=n("../internals/object-define-property").f,a=i("unscopables"),o=Array.prototype;o[a]===void 0&&s(o,a,{configurable:!0,value:r(null)}),t.exports=function(l){o[a][l]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(n,t,e){"use strict";var i=n("../internals/object-is-prototype-of"),r=TypeError;t.exports=function(s,a){if(i(a,s))return s;throw new r("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(n,t,e){"use strict";var i=n("../internals/is-object"),r=String,s=TypeError;t.exports=function(a){if(i(a))return a;throw new s(r(a)+" is not an object")}},{"../internals/is-object":289}],228:[function(n,t,e){"use strict";var i=n("../internals/to-indexed-object"),r=n("../internals/to-absolute-index"),s=n("../internals/length-of-array-like"),a=function(o){return function(l,c,h){var d,p=i(l),g=s(p),m=r(h,g);if(o&&c!=c){for(;g>m;)if((d=p[m++])!=d)return!0}else for(;g>m;m++)if((o||m in p)&&p[m]===c)return o||m||0;return!o&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(n,t,e){"use strict";var i=n("../internals/function-bind-context"),r=n("../internals/function-uncurry-this"),s=n("../internals/indexed-object"),a=n("../internals/to-object"),o=n("../internals/length-of-array-like"),l=n("../internals/array-species-create"),c=r([].push),h=function(d){var p=d===1,g=d===2,m=d===3,_=d===4,v=d===6,x=d===7,S=d===5||v;return function(O,D,U,z){for(var V,G,tt=a(O),K=s(tt),B=i(D,U),N=o(K),Z=0,w=z||l,C=p?w(O,N):g||x?w(O,0):void 0;N>Z;Z++)if((S||Z in K)&&(G=B(V=K[Z],Z,tt),d))if(p)C[Z]=G;else if(G)switch(d){case 3:return!0;case 5:return V;case 6:return Z;case 2:c(C,V)}else switch(d){case 4:return!1;case 7:c(C,V)}return v?-1:m||_?_:C}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(n,t,e){"use strict";var i=n("../internals/to-absolute-index"),r=n("../internals/length-of-array-like"),s=n("../internals/create-property"),a=Array,o=Math.max;t.exports=function(l,c,h){for(var d=r(l),p=i(c,d),g=i(h===void 0?d:h,d),m=a(o(g-p,0)),_=0;p<g;p++,_++)s(m,_,l[p]);return m.length=_,m}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this");t.exports=i([].slice)},{"../internals/function-uncurry-this":268}],232:[function(n,t,e){"use strict";var i=n("../internals/is-array"),r=n("../internals/is-constructor"),s=n("../internals/is-object"),a=n("../internals/well-known-symbol")("species"),o=Array;t.exports=function(l){var c;return i(l)&&(c=l.constructor,(r(c)&&(c===o||i(c.prototype))||s(c)&&(c=c[a])===null)&&(c=void 0)),c===void 0?o:c}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(n,t,e){"use strict";var i=n("../internals/array-species-constructor");t.exports=function(r,s){return new(i(r))(s===0?0:s)}},{"../internals/array-species-constructor":232}],234:[function(n,t,e){"use strict";var i=n("../internals/well-known-symbol")("iterator"),r=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){r=!0}};a[i]=function(){return this},Array.from(a,function(){throw 2})}catch{}t.exports=function(o,l){try{if(!l&&!r)return!1}catch{return!1}var c=!1;try{var h={};h[i]=function(){return{next:function(){return{done:c=!0}}}},o(h)}catch{}return c}},{"../internals/well-known-symbol":357}],235:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=i({}.toString),s=i("".slice);t.exports=function(a){return s(r(a),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(n,t,e){"use strict";var i=n("../internals/to-string-tag-support"),r=n("../internals/is-callable"),s=n("../internals/classof-raw"),a=n("../internals/well-known-symbol")("toStringTag"),o=Object,l=s(function(){return arguments}())==="Arguments";t.exports=i?s:function(c){var h,d,p;return c===void 0?"Undefined":c===null?"Null":typeof(d=function(g,m){try{return g[m]}catch{}}(h=o(c),a))=="string"?d:l?s(h):(p=s(h))==="Object"&&r(h.callee)?"Arguments":p}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(n,t,e){"use strict";var i=n("../internals/has-own-property"),r=n("../internals/own-keys"),s=n("../internals/object-get-own-property-descriptor"),a=n("../internals/object-define-property");t.exports=function(o,l,c){for(var h=r(l),d=a.f,p=s.f,g=0;g<h.length;g++){var m=h[g];i(o,m)||c&&i(c,m)||d(o,m,p(l,m))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(n,t,e){"use strict";var i=n("../internals/well-known-symbol")("match");t.exports=function(r){var s=/./;try{"/./"[r](s)}catch{try{return s[i]=!1,"/./"[r](s)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(n,t,e){"use strict";var i=n("../internals/fails");t.exports=!i(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},{"../internals/fails":260}],240:[function(n,t,e){"use strict";t.exports=function(i,r){return{value:i,done:r}}},{}],241:[function(n,t,e){"use strict";var i=n("../internals/descriptors"),r=n("../internals/object-define-property"),s=n("../internals/create-property-descriptor");t.exports=i?function(a,o,l){return r.f(a,o,s(1,l))}:function(a,o,l){return a[o]=l,a}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(n,t,e){"use strict";t.exports=function(i,r){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:r}}},{}],243:[function(n,t,e){"use strict";var i=n("../internals/to-property-key"),r=n("../internals/object-define-property"),s=n("../internals/create-property-descriptor");t.exports=function(a,o,l){var c=i(o);c in a?r.f(a,c,s(0,l)):a[c]=l}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(n,t,e){"use strict";var i=n("../internals/make-built-in"),r=n("../internals/object-define-property");t.exports=function(s,a,o){return o.get&&i(o.get,a,{getter:!0}),o.set&&i(o.set,a,{setter:!0}),r.f(s,a,o)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(n,t,e){"use strict";var i=n("../internals/is-callable"),r=n("../internals/object-define-property"),s=n("../internals/make-built-in"),a=n("../internals/define-global-property");t.exports=function(o,l,c,h){h||(h={});var d=h.enumerable,p=h.name!==void 0?h.name:l;if(i(c)&&s(c,p,h),h.global)d?o[l]=c:a(l,c);else{try{h.unsafe?o[l]&&(d=!0):delete o[l]}catch{}d?o[l]=c:r.f(o,l,{value:c,enumerable:!1,configurable:!h.nonConfigurable,writable:!h.nonWritable})}return o}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(n,t,e){"use strict";var i=n("../internals/global"),r=Object.defineProperty;t.exports=function(s,a){try{r(i,s,{value:a,configurable:!0,writable:!0})}catch{i[s]=a}return a}},{"../internals/global":274}],247:[function(n,t,e){"use strict";var i=n("../internals/fails");t.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(n,t,e){"use strict";var i=typeof document=="object"&&document.all,r=i===void 0&&i!==void 0;t.exports={all:i,IS_HTMLDDA:r}},{}],249:[function(n,t,e){"use strict";var i=n("../internals/global"),r=n("../internals/is-object"),s=i.document,a=r(s)&&r(s.createElement);t.exports=function(o){return a?s.createElement(o):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(n,t,e){"use strict";var i=n("../internals/engine-is-deno"),r=n("../internals/engine-is-node");t.exports=!i&&!r&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(n,t,e){"use strict";t.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(n,t,e){"use strict";var i=n("../internals/engine-user-agent");t.exports=/ipad|iphone|ipod/i.test(i)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(n,t,e){"use strict";var i=n("../internals/engine-user-agent");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},{"../internals/engine-user-agent":256}],254:[function(n,t,e){"use strict";var i=n("../internals/global"),r=n("../internals/classof-raw");t.exports=r(i.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(n,t,e){"use strict";var i=n("../internals/engine-user-agent");t.exports=/web0s(?!.*chrome)/i.test(i)},{"../internals/engine-user-agent":256}],256:[function(n,t,e){"use strict";t.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(n,t,e){"use strict";var i,r,s=n("../internals/global"),a=n("../internals/engine-user-agent"),o=s.process,l=s.Deno,c=o&&o.versions||l&&l.version,h=c&&c.v8;h&&(r=(i=h.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(n,t,e){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(n,t,e){"use strict";var i=n("../internals/global"),r=n("../internals/object-get-own-property-descriptor").f,s=n("../internals/create-non-enumerable-property"),a=n("../internals/define-built-in"),o=n("../internals/define-global-property"),l=n("../internals/copy-constructor-properties"),c=n("../internals/is-forced");t.exports=function(h,d){var p,g,m,_,v,x=h.target,S=h.global,O=h.stat;if(p=S?i:O?i[x]||o(x,{}):(i[x]||{}).prototype)for(g in d){if(_=d[g],m=h.dontCallGetSet?(v=r(p,g))&&v.value:p[g],!c(S?g:x+(O?".":"#")+g,h.forced)&&m!==void 0){if(typeof _==typeof m)continue;l(_,m)}(h.sham||m&&m.sham)&&s(_,"sham",!0),a(p,g,_,h)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(n,t,e){"use strict";t.exports=function(i){try{return!!i()}catch{return!0}}},{}],261:[function(n,t,e){"use strict";var i=n("../internals/function-bind-native"),r=Function.prototype,s=r.apply,a=r.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(i?a.bind(s):function(){return a.apply(s,arguments)})},{"../internals/function-bind-native":263}],262:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this-clause"),r=n("../internals/a-callable"),s=n("../internals/function-bind-native"),a=i(i.bind);t.exports=function(o,l){return r(o),l===void 0?o:s?a(o,l):function(){return o.apply(l,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(n,t,e){"use strict";var i=n("../internals/fails");t.exports=!i(function(){var r=function(){}.bind();return typeof r!="function"||r.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(n,t,e){"use strict";var i=n("../internals/function-bind-native"),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},{"../internals/function-bind-native":263}],265:[function(n,t,e){"use strict";var i=n("../internals/descriptors"),r=n("../internals/has-own-property"),s=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,o=r(s,"name"),l=o&&function(){}.name==="something",c=o&&(!i||i&&a(s,"name").configurable);t.exports={EXISTS:o,PROPER:l,CONFIGURABLE:c}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=n("../internals/a-callable");t.exports=function(s,a,o){try{return i(r(Object.getOwnPropertyDescriptor(s,a)[o]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(n,t,e){"use strict";var i=n("../internals/classof-raw"),r=n("../internals/function-uncurry-this");t.exports=function(s){if(i(s)==="Function")return r(s)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(n,t,e){"use strict";var i=n("../internals/function-bind-native"),r=Function.prototype,s=r.call,a=i&&r.bind.bind(s,s);t.exports=i?a:function(o){return function(){return s.apply(o,arguments)}}},{"../internals/function-bind-native":263}],269:[function(n,t,e){"use strict";var i=n("../internals/global"),r=n("../internals/is-callable"),s=function(a){return r(a)?a:void 0};t.exports=function(a,o){return arguments.length<2?s(i[a]):i[a]&&i[a][o]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(n,t,e){"use strict";var i=n("../internals/classof"),r=n("../internals/get-method"),s=n("../internals/is-null-or-undefined"),a=n("../internals/iterators"),o=n("../internals/well-known-symbol")("iterator");t.exports=function(l){if(!s(l))return r(l,o)||r(l,"@@iterator")||a[i(l)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(n,t,e){"use strict";var i=n("../internals/function-call"),r=n("../internals/a-callable"),s=n("../internals/an-object"),a=n("../internals/try-to-string"),o=n("../internals/get-iterator-method"),l=TypeError;t.exports=function(c,h){var d=arguments.length<2?o(c):h;if(r(d))return s(i(d,c));throw new l(a(c)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=n("../internals/is-array"),s=n("../internals/is-callable"),a=n("../internals/classof-raw"),o=n("../internals/to-string"),l=i([].push);t.exports=function(c){if(s(c))return c;if(r(c)){for(var h=c.length,d=[],p=0;p<h;p++){var g=c[p];typeof g=="string"?l(d,g):typeof g!="number"&&a(g)!=="Number"&&a(g)!=="String"||l(d,o(g))}var m=d.length,_=!0;return function(v,x){if(_)return _=!1,x;if(r(this))return x;for(var S=0;S<m;S++)if(d[S]===v)return x}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(n,t,e){"use strict";var i=n("../internals/a-callable"),r=n("../internals/is-null-or-undefined");t.exports=function(s,a){var o=s[a];return r(o)?void 0:i(o)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(n,t,e){(function(i){(function(){"use strict";var r=function(s){return s&&s.Math===Math&&s};t.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof i=="object"&&i)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=n("../internals/to-object"),s=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(a,o){return s(r(a),o)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(n,t,e){"use strict";t.exports={}},{}],277:[function(n,t,e){"use strict";t.exports=function(i,r){try{arguments.length===1?console.error(i):console.error(i,r)}catch{}}},{}],278:[function(n,t,e){"use strict";var i=n("../internals/get-built-in");t.exports=i("document","documentElement")},{"../internals/get-built-in":269}],279:[function(n,t,e){"use strict";var i=n("../internals/descriptors"),r=n("../internals/fails"),s=n("../internals/document-create-element");t.exports=!i&&!r(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=n("../internals/fails"),s=n("../internals/classof-raw"),a=Object,o=i("".split);t.exports=r(function(){return!a("z").propertyIsEnumerable(0)})?function(l){return s(l)==="String"?o(l,""):a(l)}:a},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=n("../internals/is-callable"),s=n("../internals/shared-store"),a=i(Function.toString);r(s.inspectSource)||(s.inspectSource=function(o){return a(o)}),t.exports=s.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(n,t,e){"use strict";var i,r,s,a=n("../internals/weak-map-basic-detection"),o=n("../internals/global"),l=n("../internals/is-object"),c=n("../internals/create-non-enumerable-property"),h=n("../internals/has-own-property"),d=n("../internals/shared-store"),p=n("../internals/shared-key"),g=n("../internals/hidden-keys"),m=o.TypeError,_=o.WeakMap;if(a||d.state){var v=d.state||(d.state=new _);v.get=v.get,v.has=v.has,v.set=v.set,i=function(S,O){if(v.has(S))throw new m("Object already initialized");return O.facade=S,v.set(S,O),O},r=function(S){return v.get(S)||{}},s=function(S){return v.has(S)}}else{var x=p("state");g[x]=!0,i=function(S,O){if(h(S,x))throw new m("Object already initialized");return O.facade=S,c(S,x,O),O},r=function(S){return h(S,x)?S[x]:{}},s=function(S){return h(S,x)}}t.exports={set:i,get:r,has:s,enforce:function(S){return s(S)?r(S):i(S,{})},getterFor:function(S){return function(O){var D;if(!l(O)||(D=r(O)).type!==S)throw new m("Incompatible receiver, "+S+" required");return D}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(n,t,e){"use strict";var i=n("../internals/well-known-symbol"),r=n("../internals/iterators"),s=i("iterator"),a=Array.prototype;t.exports=function(o){return o!==void 0&&(r.Array===o||a[s]===o)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(n,t,e){"use strict";var i=n("../internals/classof-raw");t.exports=Array.isArray||function(r){return i(r)==="Array"}},{"../internals/classof-raw":235}],285:[function(n,t,e){"use strict";var i=n("../internals/document-all"),r=i.all;t.exports=i.IS_HTMLDDA?function(s){return typeof s=="function"||s===r}:function(s){return typeof s=="function"}},{"../internals/document-all":248}],286:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=n("../internals/fails"),s=n("../internals/is-callable"),a=n("../internals/classof"),o=n("../internals/get-built-in"),l=n("../internals/inspect-source"),c=function(){},h=[],d=o("Reflect","construct"),p=/^\s*(?:class|function)\b/,g=i(p.exec),m=!p.test(c),_=function(x){if(!s(x))return!1;try{return d(c,h,x),!0}catch{return!1}},v=function(x){if(!s(x))return!1;switch(a(x)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!g(p,l(x))}catch{return!0}};v.sham=!0,t.exports=!d||r(function(){var x;return _(_.call)||!_(Object)||!_(function(){x=!0})||x})?v:_},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(n,t,e){"use strict";var i=n("../internals/fails"),r=n("../internals/is-callable"),s=/#|\.prototype\./,a=function(d,p){var g=l[o(d)];return g===h||g!==c&&(r(p)?i(p):!!p)},o=a.normalize=function(d){return String(d).replace(s,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",h=a.POLYFILL="P";t.exports=a},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(n,t,e){"use strict";t.exports=function(i){return i==null}},{}],289:[function(n,t,e){"use strict";var i=n("../internals/is-callable"),r=n("../internals/document-all"),s=r.all;t.exports=r.IS_HTMLDDA?function(a){return typeof a=="object"?a!==null:i(a)||a===s}:function(a){return typeof a=="object"?a!==null:i(a)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(n,t,e){"use strict";t.exports=!1},{}],291:[function(n,t,e){"use strict";var i=n("../internals/is-object"),r=n("../internals/classof-raw"),s=n("../internals/well-known-symbol")("match");t.exports=function(a){var o;return i(a)&&((o=a[s])!==void 0?!!o:r(a)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(n,t,e){"use strict";var i=n("../internals/get-built-in"),r=n("../internals/is-callable"),s=n("../internals/object-is-prototype-of"),a=n("../internals/use-symbol-as-uid"),o=Object;t.exports=a?function(l){return typeof l=="symbol"}:function(l){var c=i("Symbol");return r(c)&&s(c.prototype,o(l))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(n,t,e){"use strict";var i=n("../internals/function-bind-context"),r=n("../internals/function-call"),s=n("../internals/an-object"),a=n("../internals/try-to-string"),o=n("../internals/is-array-iterator-method"),l=n("../internals/length-of-array-like"),c=n("../internals/object-is-prototype-of"),h=n("../internals/get-iterator"),d=n("../internals/get-iterator-method"),p=n("../internals/iterator-close"),g=TypeError,m=function(v,x){this.stopped=v,this.result=x},_=m.prototype;t.exports=function(v,x,S){var O,D,U,z,V,G,tt,K=S&&S.that,B=!(!S||!S.AS_ENTRIES),N=!(!S||!S.IS_RECORD),Z=!(!S||!S.IS_ITERATOR),w=!(!S||!S.INTERRUPTED),C=i(x,K),k=function(R){return O&&p(O,"normal",R),new m(!0,R)},T=function(R){return B?(s(R),w?C(R[0],R[1],k):C(R[0],R[1])):w?C(R,k):C(R)};if(N)O=v.iterator;else if(Z)O=v;else{if(!(D=d(v)))throw new g(a(v)+" is not iterable");if(o(D)){for(U=0,z=l(v);z>U;U++)if((V=T(v[U]))&&c(_,V))return V;return new m(!1)}O=h(v,D)}for(G=N?v.next:O.next;!(tt=r(G,O)).done;){try{V=T(tt.value)}catch(R){p(O,"throw",R)}if(typeof V=="object"&&V&&c(_,V))return V}return new m(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(n,t,e){"use strict";var i=n("../internals/function-call"),r=n("../internals/an-object"),s=n("../internals/get-method");t.exports=function(a,o,l){var c,h;r(a);try{if(!(c=s(a,"return"))){if(o==="throw")throw l;return l}c=i(c,a)}catch(d){h=!0,c=d}if(o==="throw")throw l;if(h)throw c;return r(c),l}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(n,t,e){"use strict";var i=n("../internals/iterators-core").IteratorPrototype,r=n("../internals/object-create"),s=n("../internals/create-property-descriptor"),a=n("../internals/set-to-string-tag"),o=n("../internals/iterators"),l=function(){return this};t.exports=function(c,h,d,p){var g=h+" Iterator";return c.prototype=r(i,{next:s(+!p,d)}),a(c,g,!1,!0),o[g]=l,c}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/function-call"),s=n("../internals/is-pure"),a=n("../internals/function-name"),o=n("../internals/is-callable"),l=n("../internals/iterator-create-constructor"),c=n("../internals/object-get-prototype-of"),h=n("../internals/object-set-prototype-of"),d=n("../internals/set-to-string-tag"),p=n("../internals/create-non-enumerable-property"),g=n("../internals/define-built-in"),m=n("../internals/well-known-symbol"),_=n("../internals/iterators"),v=n("../internals/iterators-core"),x=a.PROPER,S=a.CONFIGURABLE,O=v.IteratorPrototype,D=v.BUGGY_SAFARI_ITERATORS,U=m("iterator"),z=function(){return this};t.exports=function(V,G,tt,K,B,N,Z){l(tt,G,K);var w,C,k,T=function($){if($===B&&ot)return ot;if(!D&&$&&$ in H)return H[$];switch($){case"keys":case"values":case"entries":return function(){return new tt(this,$)}}return function(){return new tt(this)}},R=G+" Iterator",F=!1,H=V.prototype,it=H[U]||H["@@iterator"]||B&&H[B],ot=!D&&it||T(B),dt=G==="Array"&&H.entries||it;if(dt&&(w=c(dt.call(new V)))!==Object.prototype&&w.next&&(s||c(w)===O||(h?h(w,O):o(w[U])||g(w,U,z)),d(w,R,!0,!0),s&&(_[R]=z)),x&&B==="values"&&it&&it.name!=="values"&&(!s&&S?p(H,"name","values"):(F=!0,ot=function(){return r(it,this)})),B)if(C={values:T("values"),keys:N?ot:T("keys"),entries:T("entries")},Z)for(k in C)(D||F||!(k in H))&&g(H,k,C[k]);else i({target:G,proto:!0,forced:D||F},C);return s&&!Z||H[U]===ot||g(H,U,ot,{name:B}),_[G]=ot,C}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(n,t,e){"use strict";var i,r,s,a=n("../internals/fails"),o=n("../internals/is-callable"),l=n("../internals/is-object"),c=n("../internals/object-create"),h=n("../internals/object-get-prototype-of"),d=n("../internals/define-built-in"),p=n("../internals/well-known-symbol"),g=n("../internals/is-pure"),m=p("iterator"),_=!1;[].keys&&("next"in(s=[].keys())?(r=h(h(s)))!==Object.prototype&&(i=r):_=!0),!l(i)||a(function(){var v={};return i[m].call(v)!==v})?i={}:g&&(i=c(i)),o(i[m])||d(i,m,function(){return this}),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:_}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(n,t,e){arguments[4][276][0].apply(e,arguments)},{dup:276}],299:[function(n,t,e){"use strict";var i=n("../internals/to-length");t.exports=function(r){return i(r.length)}},{"../internals/to-length":343}],300:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=n("../internals/fails"),s=n("../internals/is-callable"),a=n("../internals/has-own-property"),o=n("../internals/descriptors"),l=n("../internals/function-name").CONFIGURABLE,c=n("../internals/inspect-source"),h=n("../internals/internal-state"),d=h.enforce,p=h.get,g=String,m=Object.defineProperty,_=i("".slice),v=i("".replace),x=i([].join),S=o&&!r(function(){return m(function(){},"length",{value:8}).length!==8}),O=String(String).split("String"),D=t.exports=function(U,z,V){_(g(z),0,7)==="Symbol("&&(z="["+v(g(z),/^Symbol\(([^)]*)\)/,"$1")+"]"),V&&V.getter&&(z="get "+z),V&&V.setter&&(z="set "+z),(!a(U,"name")||l&&U.name!==z)&&(o?m(U,"name",{value:z,configurable:!0}):U.name=z),S&&V&&a(V,"arity")&&U.length!==V.arity&&m(U,"length",{value:V.arity});try{V&&a(V,"constructor")&&V.constructor?o&&m(U,"prototype",{writable:!1}):U.prototype&&(U.prototype=void 0)}catch{}var G=d(U);return a(G,"source")||(G.source=x(O,typeof z=="string"?z:"")),U};Function.prototype.toString=D(function(){return s(this)&&p(this).source||c(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(n,t,e){"use strict";var i=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(s){var a=+s;return(a>0?r:i)(a)}},{}],302:[function(n,t,e){"use strict";var i,r,s,a,o,l=n("../internals/global"),c=n("../internals/function-bind-context"),h=n("../internals/object-get-own-property-descriptor").f,d=n("../internals/task").set,p=n("../internals/queue"),g=n("../internals/engine-is-ios"),m=n("../internals/engine-is-ios-pebble"),_=n("../internals/engine-is-webos-webkit"),v=n("../internals/engine-is-node"),x=l.MutationObserver||l.WebKitMutationObserver,S=l.document,O=l.process,D=l.Promise,U=h(l,"queueMicrotask"),z=U&&U.value;if(!z){var V=new p,G=function(){var tt,K;for(v&&(tt=O.domain)&&tt.exit();K=V.get();)try{K()}catch(B){throw V.head&&i(),B}tt&&tt.enter()};g||v||_||!x||!S?!m&&D&&D.resolve?((a=D.resolve(void 0)).constructor=D,o=c(a.then,a),i=function(){o(G)}):v?i=function(){O.nextTick(G)}:(d=c(d,l),i=function(){d(G)}):(r=!0,s=S.createTextNode(""),new x(G).observe(s,{characterData:!0}),i=function(){s.data=r=!r}),z=function(tt){V.head||i(),V.add(tt)}}t.exports=z},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(n,t,e){"use strict";var i=n("../internals/a-callable"),r=TypeError,s=function(a){var o,l;this.promise=new a(function(c,h){if(o!==void 0||l!==void 0)throw new r("Bad Promise constructor");o=c,l=h}),this.resolve=i(o),this.reject=i(l)};t.exports.f=function(a){return new s(a)}},{"../internals/a-callable":222}],304:[function(n,t,e){"use strict";var i=n("../internals/is-regexp"),r=TypeError;t.exports=function(s){if(i(s))throw new r("The method doesn't accept regular expressions");return s}},{"../internals/is-regexp":291}],305:[function(n,t,e){"use strict";var i=n("../internals/descriptors"),r=n("../internals/function-uncurry-this"),s=n("../internals/function-call"),a=n("../internals/fails"),o=n("../internals/object-keys"),l=n("../internals/object-get-own-property-symbols"),c=n("../internals/object-property-is-enumerable"),h=n("../internals/to-object"),d=n("../internals/indexed-object"),p=Object.assign,g=Object.defineProperty,m=r([].concat);t.exports=!p||a(function(){if(i&&p({b:1},p(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var _={},v={},x=Symbol("assign detection");return _[x]=7,"abcdefghijklmnopqrst".split("").forEach(function(S){v[S]=S}),p({},_)[x]!==7||o(p({},v)).join("")!=="abcdefghijklmnopqrst"})?function(_,v){for(var x=h(_),S=arguments.length,O=1,D=l.f,U=c.f;S>O;)for(var z,V=d(arguments[O++]),G=D?m(o(V),D(V)):o(V),tt=G.length,K=0;tt>K;)z=G[K++],i&&!s(U,V,z)||(x[z]=V[z]);return x}:p},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(n,t,e){"use strict";var i,r=n("../internals/an-object"),s=n("../internals/object-define-properties"),a=n("../internals/enum-bug-keys"),o=n("../internals/hidden-keys"),l=n("../internals/html"),c=n("../internals/document-create-element"),h=n("../internals/shared-key"),d=h("IE_PROTO"),p=function(){},g=function(v){return"<script>"+v+"<\/script>"},m=function(v){v.write(g("")),v.close();var x=v.parentWindow.Object;return v=null,x},_=function(){try{i=new ActiveXObject("htmlfile")}catch{}var v,x;_=typeof document<"u"?document.domain&&i?m(i):((x=c("iframe")).style.display="none",l.appendChild(x),x.src="javascript:",(v=x.contentWindow.document).open(),v.write(g("document.F=Object")),v.close(),v.F):m(i);for(var S=a.length;S--;)delete _.prototype[a[S]];return _()};o[d]=!0,t.exports=Object.create||function(v,x){var S;return v!==null?(p.prototype=r(v),S=new p,p.prototype=null,S[d]=v):S=_(),x===void 0?S:s.f(S,x)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(n,t,e){"use strict";var i=n("../internals/descriptors"),r=n("../internals/v8-prototype-define-bug"),s=n("../internals/object-define-property"),a=n("../internals/an-object"),o=n("../internals/to-indexed-object"),l=n("../internals/object-keys");e.f=i&&!r?Object.defineProperties:function(c,h){a(c);for(var d,p=o(h),g=l(h),m=g.length,_=0;m>_;)s.f(c,d=g[_++],p[d]);return c}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(n,t,e){"use strict";var i=n("../internals/descriptors"),r=n("../internals/ie8-dom-define"),s=n("../internals/v8-prototype-define-bug"),a=n("../internals/an-object"),o=n("../internals/to-property-key"),l=TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor;e.f=i?s?function(d,p,g){if(a(d),p=o(p),a(g),typeof d=="function"&&p==="prototype"&&"value"in g&&"writable"in g&&!g.writable){var m=h(d,p);m&&m.writable&&(d[p]=g.value,g={configurable:"configurable"in g?g.configurable:m.configurable,enumerable:"enumerable"in g?g.enumerable:m.enumerable,writable:!1})}return c(d,p,g)}:c:function(d,p,g){if(a(d),p=o(p),a(g),r)try{return c(d,p,g)}catch{}if("get"in g||"set"in g)throw new l("Accessors not supported");return"value"in g&&(d[p]=g.value),d}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(n,t,e){"use strict";var i=n("../internals/descriptors"),r=n("../internals/function-call"),s=n("../internals/object-property-is-enumerable"),a=n("../internals/create-property-descriptor"),o=n("../internals/to-indexed-object"),l=n("../internals/to-property-key"),c=n("../internals/has-own-property"),h=n("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;e.f=i?d:function(p,g){if(p=o(p),g=l(g),h)try{return d(p,g)}catch{}if(c(p,g))return a(!r(s.f,p,g),p[g])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(n,t,e){"use strict";var i=n("../internals/classof-raw"),r=n("../internals/to-indexed-object"),s=n("../internals/object-get-own-property-names").f,a=n("../internals/array-slice-simple"),o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(l){return o&&i(l)==="Window"?function(c){try{return s(c)}catch{return a(o)}}(l):s(r(l))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(n,t,e){"use strict";var i=n("../internals/object-keys-internal"),r=n("../internals/enum-bug-keys").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(s){return i(s,r)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(n,t,e){"use strict";e.f=Object.getOwnPropertySymbols},{}],313:[function(n,t,e){"use strict";var i=n("../internals/has-own-property"),r=n("../internals/is-callable"),s=n("../internals/to-object"),a=n("../internals/shared-key"),o=n("../internals/correct-prototype-getter"),l=a("IE_PROTO"),c=Object,h=c.prototype;t.exports=o?c.getPrototypeOf:function(d){var p=s(d);if(i(p,l))return p[l];var g=p.constructor;return r(g)&&p instanceof g?g.prototype:p instanceof c?h:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this");t.exports=i({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=n("../internals/has-own-property"),s=n("../internals/to-indexed-object"),a=n("../internals/array-includes").indexOf,o=n("../internals/hidden-keys"),l=i([].push);t.exports=function(c,h){var d,p=s(c),g=0,m=[];for(d in p)!r(o,d)&&r(p,d)&&l(m,d);for(;h.length>g;)r(p,d=h[g++])&&(~a(m,d)||l(m,d));return m}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(n,t,e){"use strict";var i=n("../internals/object-keys-internal"),r=n("../internals/enum-bug-keys");t.exports=Object.keys||function(s){return i(s,r)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(n,t,e){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!i.call({1:2},1);e.f=s?function(a){var o=r(this,a);return!!o&&o.enumerable}:i},{}],318:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this-accessor"),r=n("../internals/an-object"),s=n("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,o=!1,l={};try{(a=i(Object.prototype,"__proto__","set"))(l,[]),o=l instanceof Array}catch{}return function(c,h){return r(c),s(h),o?a(c,h):c.__proto__=h,c}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(n,t,e){"use strict";var i=n("../internals/descriptors"),r=n("../internals/fails"),s=n("../internals/function-uncurry-this"),a=n("../internals/object-get-prototype-of"),o=n("../internals/object-keys"),l=n("../internals/to-indexed-object"),c=s(n("../internals/object-property-is-enumerable").f),h=s([].push),d=i&&r(function(){var g=Object.create(null);return g[2]=2,!c(g,2)}),p=function(g){return function(m){for(var _,v=l(m),x=o(v),S=d&&a(v)===null,O=x.length,D=0,U=[];O>D;)_=x[D++],i&&!(S?_ in v:c(v,_))||h(U,g?[_,v[_]]:v[_]);return U}};t.exports={entries:p(!0),values:p(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(n,t,e){"use strict";var i=n("../internals/function-call"),r=n("../internals/is-callable"),s=n("../internals/is-object"),a=TypeError;t.exports=function(o,l){var c,h;if(l==="string"&&r(c=o.toString)&&!s(h=i(c,o))||r(c=o.valueOf)&&!s(h=i(c,o))||l!=="string"&&r(c=o.toString)&&!s(h=i(c,o)))return h;throw new a("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(n,t,e){"use strict";var i=n("../internals/get-built-in"),r=n("../internals/function-uncurry-this"),s=n("../internals/object-get-own-property-names"),a=n("../internals/object-get-own-property-symbols"),o=n("../internals/an-object"),l=r([].concat);t.exports=i("Reflect","ownKeys")||function(c){var h=s.f(o(c)),d=a.f;return d?l(h,d(c)):h}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(n,t,e){"use strict";var i=n("../internals/global");t.exports=i},{"../internals/global":274}],323:[function(n,t,e){"use strict";t.exports=function(i){try{return{error:!1,value:i()}}catch(r){return{error:!0,value:r}}}},{}],324:[function(n,t,e){"use strict";var i=n("../internals/global"),r=n("../internals/promise-native-constructor"),s=n("../internals/is-callable"),a=n("../internals/is-forced"),o=n("../internals/inspect-source"),l=n("../internals/well-known-symbol"),c=n("../internals/engine-is-browser"),h=n("../internals/engine-is-deno"),d=n("../internals/is-pure"),p=n("../internals/engine-v8-version"),g=r&&r.prototype,m=l("species"),_=!1,v=s(i.PromiseRejectionEvent),x=a("Promise",function(){var S=o(r),O=S!==String(r);if(!O&&p===66||d&&(!g.catch||!g.finally))return!0;if(!p||p<51||!/native code/.test(S)){var D=new r(function(z){z(1)}),U=function(z){z(function(){},function(){})};if((D.constructor={})[m]=U,!(_=D.then(function(){})instanceof U))return!0}return!O&&(c||h)&&!v});t.exports={CONSTRUCTOR:x,REJECTION_EVENT:v,SUBCLASSING:_}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(n,t,e){"use strict";var i=n("../internals/global");t.exports=i.Promise},{"../internals/global":274}],326:[function(n,t,e){"use strict";var i=n("../internals/an-object"),r=n("../internals/is-object"),s=n("../internals/new-promise-capability");t.exports=function(a,o){if(i(a),r(o)&&o.constructor===a)return o;var l=s.f(a);return(0,l.resolve)(o),l.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(n,t,e){"use strict";var i=n("../internals/promise-native-constructor"),r=n("../internals/check-correctness-of-iteration"),s=n("../internals/promise-constructor-detection").CONSTRUCTOR;t.exports=s||!r(function(a){i.all(a).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(n,t,e){"use strict";var i=function(){this.head=null,this.tail=null};i.prototype={add:function(r){var s={item:r,next:null},a=this.tail;a?a.next=s:this.head=s,this.tail=s},get:function(){var r=this.head;if(r)return(this.head=r.next)===null&&(this.tail=null),r.item}},t.exports=i},{}],329:[function(n,t,e){"use strict";var i=n("../internals/is-null-or-undefined"),r=TypeError;t.exports=function(s){if(i(s))throw new r("Can't call method on "+s);return s}},{"../internals/is-null-or-undefined":288}],330:[function(n,t,e){"use strict";var i=n("../internals/get-built-in"),r=n("../internals/define-built-in-accessor"),s=n("../internals/well-known-symbol"),a=n("../internals/descriptors"),o=s("species");t.exports=function(l){var c=i(l);a&&c&&!c[o]&&r(c,o,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(n,t,e){"use strict";var i=n("../internals/object-define-property").f,r=n("../internals/has-own-property"),s=n("../internals/well-known-symbol")("toStringTag");t.exports=function(a,o,l){a&&!l&&(a=a.prototype),a&&!r(a,s)&&i(a,s,{configurable:!0,value:o})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(n,t,e){"use strict";var i=n("../internals/shared"),r=n("../internals/uid"),s=i("keys");t.exports=function(a){return s[a]||(s[a]=r(a))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(n,t,e){"use strict";var i=n("../internals/global"),r=n("../internals/define-global-property"),s=i["__core-js_shared__"]||r("__core-js_shared__",{});t.exports=s},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(n,t,e){"use strict";var i=n("../internals/is-pure"),r=n("../internals/shared-store");(t.exports=function(s,a){return r[s]||(r[s]=a!==void 0?a:{})})("versions",[]).push({version:"3.33.0",mode:i?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(n,t,e){"use strict";var i=n("../internals/an-object"),r=n("../internals/a-constructor"),s=n("../internals/is-null-or-undefined"),a=n("../internals/well-known-symbol")("species");t.exports=function(o,l){var c,h=i(o).constructor;return h===void 0||s(c=i(h)[a])?l:r(c)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(n,t,e){"use strict";var i=n("../internals/engine-v8-version"),r=n("../internals/fails"),s=n("../internals/global").String;t.exports=!!Object.getOwnPropertySymbols&&!r(function(){var a=Symbol("symbol detection");return!s(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&i&&i<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(n,t,e){"use strict";var i=n("../internals/function-call"),r=n("../internals/get-built-in"),s=n("../internals/well-known-symbol"),a=n("../internals/define-built-in");t.exports=function(){var o=r("Symbol"),l=o&&o.prototype,c=l&&l.valueOf,h=s("toPrimitive");l&&!l[h]&&a(l,h,function(d){return i(c,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(n,t,e){"use strict";var i=n("../internals/symbol-constructor-detection");t.exports=i&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(n,t,e){"use strict";var i,r,s,a,o=n("../internals/global"),l=n("../internals/function-apply"),c=n("../internals/function-bind-context"),h=n("../internals/is-callable"),d=n("../internals/has-own-property"),p=n("../internals/fails"),g=n("../internals/html"),m=n("../internals/array-slice"),_=n("../internals/document-create-element"),v=n("../internals/validate-arguments-length"),x=n("../internals/engine-is-ios"),S=n("../internals/engine-is-node"),O=o.setImmediate,D=o.clearImmediate,U=o.process,z=o.Dispatch,V=o.Function,G=o.MessageChannel,tt=o.String,K=0,B={};p(function(){i=o.location});var N=function(k){if(d(B,k)){var T=B[k];delete B[k],T()}},Z=function(k){return function(){N(k)}},w=function(k){N(k.data)},C=function(k){o.postMessage(tt(k),i.protocol+"//"+i.host)};O&&D||(O=function(k){v(arguments.length,1);var T=h(k)?k:V(k),R=m(arguments,1);return B[++K]=function(){l(T,void 0,R)},r(K),K},D=function(k){delete B[k]},S?r=function(k){U.nextTick(Z(k))}:z&&z.now?r=function(k){z.now(Z(k))}:G&&!x?(a=(s=new G).port2,s.port1.onmessage=w,r=c(a.postMessage,a)):o.addEventListener&&h(o.postMessage)&&!o.importScripts&&i&&i.protocol!=="file:"&&!p(C)?(r=C,o.addEventListener("message",w,!1)):r="onreadystatechange"in _("script")?function(k){g.appendChild(_("script")).onreadystatechange=function(){g.removeChild(this),N(k)}}:function(k){setTimeout(Z(k),0)}),t.exports={set:O,clear:D}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(n,t,e){"use strict";var i=n("../internals/to-integer-or-infinity"),r=Math.max,s=Math.min;t.exports=function(a,o){var l=i(a);return l<0?r(l+o,0):s(l,o)}},{"../internals/to-integer-or-infinity":342}],341:[function(n,t,e){"use strict";var i=n("../internals/indexed-object"),r=n("../internals/require-object-coercible");t.exports=function(s){return i(r(s))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(n,t,e){"use strict";var i=n("../internals/math-trunc");t.exports=function(r){var s=+r;return s!=s||s===0?0:i(s)}},{"../internals/math-trunc":301}],343:[function(n,t,e){"use strict";var i=n("../internals/to-integer-or-infinity"),r=Math.min;t.exports=function(s){return s>0?r(i(s),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(n,t,e){"use strict";var i=n("../internals/require-object-coercible"),r=Object;t.exports=function(s){return r(i(s))}},{"../internals/require-object-coercible":329}],345:[function(n,t,e){"use strict";var i=n("../internals/function-call"),r=n("../internals/is-object"),s=n("../internals/is-symbol"),a=n("../internals/get-method"),o=n("../internals/ordinary-to-primitive"),l=n("../internals/well-known-symbol"),c=TypeError,h=l("toPrimitive");t.exports=function(d,p){if(!r(d)||s(d))return d;var g,m=a(d,h);if(m){if(p===void 0&&(p="default"),g=i(m,d,p),!r(g)||s(g))return g;throw new c("Can't convert object to primitive value")}return p===void 0&&(p="number"),o(d,p)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(n,t,e){"use strict";var i=n("../internals/to-primitive"),r=n("../internals/is-symbol");t.exports=function(s){var a=i(s,"string");return r(a)?a:a+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(n,t,e){"use strict";var i={};i[n("../internals/well-known-symbol")("toStringTag")]="z",t.exports=String(i)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(n,t,e){"use strict";var i=n("../internals/classof"),r=String;t.exports=function(s){if(i(s)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return r(s)}},{"../internals/classof":236}],349:[function(n,t,e){"use strict";var i=String;t.exports=function(r){try{return i(r)}catch{return"Object"}}},{}],350:[function(n,t,e){"use strict";var i=n("../internals/function-uncurry-this"),r=0,s=Math.random(),a=i(1 .toString);t.exports=function(o){return"Symbol("+(o===void 0?"":o)+")_"+a(++r+s,36)}},{"../internals/function-uncurry-this":268}],351:[function(n,t,e){"use strict";var i=n("../internals/symbol-constructor-detection");t.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(n,t,e){"use strict";var i=n("../internals/descriptors"),r=n("../internals/fails");t.exports=i&&r(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(n,t,e){"use strict";var i=TypeError;t.exports=function(r,s){if(r<s)throw new i("Not enough arguments");return r}},{}],354:[function(n,t,e){"use strict";var i=n("../internals/global"),r=n("../internals/is-callable"),s=i.WeakMap;t.exports=r(s)&&/native code/.test(String(s))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(n,t,e){"use strict";var i=n("../internals/path"),r=n("../internals/has-own-property"),s=n("../internals/well-known-symbol-wrapped"),a=n("../internals/object-define-property").f;t.exports=function(o){var l=i.Symbol||(i.Symbol={});r(l,o)||a(l,o,{value:s.f(o)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(n,t,e){"use strict";var i=n("../internals/well-known-symbol");e.f=i},{"../internals/well-known-symbol":357}],357:[function(n,t,e){"use strict";var i=n("../internals/global"),r=n("../internals/shared"),s=n("../internals/has-own-property"),a=n("../internals/uid"),o=n("../internals/symbol-constructor-detection"),l=n("../internals/use-symbol-as-uid"),c=i.Symbol,h=r("wks"),d=l?c.for||c:c&&c.withoutSetter||a;t.exports=function(p){return s(h,p)||(h[p]=o&&s(c,p)?c[p]:d("Symbol."+p)),h[p]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/array-iteration").findIndex,s=n("../internals/add-to-unscopables"),a=!0;"findIndex"in[]&&Array(1).findIndex(function(){a=!1}),i({target:"Array",proto:!0,forced:a},{findIndex:function(o){return r(this,o,arguments.length>1?arguments[1]:void 0)}}),s("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/array-iteration").find,s=n("../internals/add-to-unscopables"),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),i({target:"Array",proto:!0,forced:a},{find:function(o){return r(this,o,arguments.length>1?arguments[1]:void 0)}}),s("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/array-includes").includes,s=n("../internals/fails"),a=n("../internals/add-to-unscopables");i({target:"Array",proto:!0,forced:s(function(){return!Array(1).includes()})},{includes:function(o){return r(this,o,arguments.length>1?arguments[1]:void 0)}}),a("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(n,t,e){"use strict";var i=n("../internals/to-indexed-object"),r=n("../internals/add-to-unscopables"),s=n("../internals/iterators"),a=n("../internals/internal-state"),o=n("../internals/object-define-property").f,l=n("../internals/iterator-define"),c=n("../internals/create-iter-result-object"),h=n("../internals/is-pure"),d=n("../internals/descriptors"),p=a.set,g=a.getterFor("Array Iterator");t.exports=l(Array,"Array",function(_,v){p(this,{type:"Array Iterator",target:i(_),index:0,kind:v})},function(){var _=g(this),v=_.target,x=_.kind,S=_.index++;if(!v||S>=v.length)return _.target=void 0,c(void 0,!0);switch(x){case"keys":return c(S,!1);case"values":return c(v[S],!1)}return c([S,v[S]],!1)},"values");var m=s.Arguments=s.Array;if(r("keys"),r("values"),r("entries"),!h&&d&&m.name!=="values")try{o(m,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/get-built-in"),s=n("../internals/function-apply"),a=n("../internals/function-call"),o=n("../internals/function-uncurry-this"),l=n("../internals/fails"),c=n("../internals/is-callable"),h=n("../internals/is-symbol"),d=n("../internals/array-slice"),p=n("../internals/get-json-replacer-function"),g=n("../internals/symbol-constructor-detection"),m=String,_=r("JSON","stringify"),v=o(/./.exec),x=o("".charAt),S=o("".charCodeAt),O=o("".replace),D=o(1 .toString),U=/[\uD800-\uDFFF]/g,z=/^[\uD800-\uDBFF]$/,V=/^[\uDC00-\uDFFF]$/,G=!g||l(function(){var N=r("Symbol")("stringify detection");return _([N])!=="[null]"||_({a:N})!=="{}"||_(Object(N))!=="{}"}),tt=l(function(){return _("\uDF06\uD834")!=='"\\udf06\\ud834"'||_("\uDEAD")!=='"\\udead"'}),K=function(N,Z){var w=d(arguments),C=p(Z);if(c(C)||N!==void 0&&!h(N))return w[1]=function(k,T){if(c(C)&&(T=a(C,this,m(k),T)),!h(T))return T},s(_,null,w)},B=function(N,Z,w){var C=x(w,Z-1),k=x(w,Z+1);return v(z,N)&&!v(V,k)||v(V,N)&&!v(z,C)?"\\u"+D(S(N,0),16):N};_&&i({target:"JSON",stat:!0,arity:3,forced:G||tt},{stringify:function(N,Z,w){var C=d(arguments),k=s(G?K:_,null,C);return tt&&typeof k=="string"?O(k,U,B):k}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(n,t,e){"use strict";n("../internals/export")({target:"Number",stat:!0},{isNaN:function(i){return i!=i}})},{"../internals/export":259}],364:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/object-assign");i({target:"Object",stat:!0,arity:2,forced:Object.assign!==r},{assign:r})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/symbol-constructor-detection"),s=n("../internals/fails"),a=n("../internals/object-get-own-property-symbols"),o=n("../internals/to-object");i({target:"Object",stat:!0,forced:!r||s(function(){a.f(1)})},{getOwnPropertySymbols:function(l){var c=a.f;return c?c(o(l)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/to-object"),s=n("../internals/object-keys");i({target:"Object",stat:!0,forced:n("../internals/fails")(function(){s(1)})},{keys:function(a){return s(r(a))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/object-to-array").values;i({target:"Object",stat:!0},{values:function(s){return r(s)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/function-call"),s=n("../internals/a-callable"),a=n("../internals/new-promise-capability"),o=n("../internals/perform"),l=n("../internals/iterate");i({target:"Promise",stat:!0,forced:n("../internals/promise-statics-incorrect-iteration")},{all:function(c){var h=this,d=a.f(h),p=d.resolve,g=d.reject,m=o(function(){var _=s(h.resolve),v=[],x=0,S=1;l(c,function(O){var D=x++,U=!1;S++,r(_,h,O).then(function(z){U||(U=!0,v[D]=z,--S||p(v))},g)}),--S||p(v)});return m.error&&g(m.value),d.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/is-pure"),s=n("../internals/promise-constructor-detection").CONSTRUCTOR,a=n("../internals/promise-native-constructor"),o=n("../internals/get-built-in"),l=n("../internals/is-callable"),c=n("../internals/define-built-in"),h=a&&a.prototype;if(i({target:"Promise",proto:!0,forced:s,real:!0},{catch:function(p){return this.then(void 0,p)}}),!r&&l(a)){var d=o("Promise").prototype.catch;h.catch!==d&&c(h,"catch",d,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(n,t,e){"use strict";var i,r,s,a=n("../internals/export"),o=n("../internals/is-pure"),l=n("../internals/engine-is-node"),c=n("../internals/global"),h=n("../internals/function-call"),d=n("../internals/define-built-in"),p=n("../internals/object-set-prototype-of"),g=n("../internals/set-to-string-tag"),m=n("../internals/set-species"),_=n("../internals/a-callable"),v=n("../internals/is-callable"),x=n("../internals/is-object"),S=n("../internals/an-instance"),O=n("../internals/species-constructor"),D=n("../internals/task").set,U=n("../internals/microtask"),z=n("../internals/host-report-errors"),V=n("../internals/perform"),G=n("../internals/queue"),tt=n("../internals/internal-state"),K=n("../internals/promise-native-constructor"),B=n("../internals/promise-constructor-detection"),N=n("../internals/new-promise-capability"),Z=B.CONSTRUCTOR,w=B.REJECTION_EVENT,C=B.SUBCLASSING,k=tt.getterFor("Promise"),T=tt.set,R=K&&K.prototype,F=K,H=R,it=c.TypeError,ot=c.document,dt=c.process,$=N.f,ct=$,W=!!(ot&&ot.createEvent&&c.dispatchEvent),q=function(gt){var ut;return!(!x(gt)||!v(ut=gt.then))&&ut},rt=function(gt,ut){var Q,Y,et,lt=ut.value,pt=ut.state===1,bt=pt?gt.ok:gt.fail,Et=gt.resolve,Ot=gt.reject,zt=gt.domain;try{bt?(pt||(ut.rejection===2&&Ft(ut),ut.rejection=1),bt===!0?Q=lt:(zt&&zt.enter(),Q=bt(lt),zt&&(zt.exit(),et=!0)),Q===gt.promise?Ot(new it("Promise-chain cycle")):(Y=q(Q))?h(Y,Q,Et,Ot):Et(Q)):Ot(lt)}catch(Gt){zt&&!et&&zt.exit(),Ot(Gt)}},mt=function(gt,ut){gt.notified||(gt.notified=!0,U(function(){for(var Q,Y=gt.reactions;Q=Y.get();)rt(Q,gt);gt.notified=!1,ut&&!gt.rejection&&_t(gt)}))},wt=function(gt,ut,Q){var Y,et;W?((Y=ot.createEvent("Event")).promise=ut,Y.reason=Q,Y.initEvent(gt,!1,!0),c.dispatchEvent(Y)):Y={promise:ut,reason:Q},!w&&(et=c["on"+gt])?et(Y):gt==="unhandledrejection"&&z("Unhandled promise rejection",Q)},_t=function(gt){h(D,c,function(){var ut,Q=gt.facade,Y=gt.value;if(Ct(gt)&&(ut=V(function(){l?dt.emit("unhandledRejection",Y,Q):wt("unhandledrejection",Q,Y)}),gt.rejection=l||Ct(gt)?2:1,ut.error))throw ut.value})},Ct=function(gt){return gt.rejection!==1&&!gt.parent},Ft=function(gt){h(D,c,function(){var ut=gt.facade;l?dt.emit("rejectionHandled",ut):wt("rejectionhandled",ut,gt.value)})},At=function(gt,ut,Q){return function(Y){gt(ut,Y,Q)}},vt=function(gt,ut,Q){gt.done||(gt.done=!0,Q&&(gt=Q),gt.value=ut,gt.state=2,mt(gt,!0))},kt=function(gt,ut,Q){if(!gt.done){gt.done=!0,Q&&(gt=Q);try{if(gt.facade===ut)throw new it("Promise can't be resolved itself");var Y=q(ut);Y?U(function(){var et={done:!1};try{h(Y,ut,At(kt,et,gt),At(vt,et,gt))}catch(lt){vt(et,lt,gt)}}):(gt.value=ut,gt.state=1,mt(gt,!1))}catch(et){vt({done:!1},et,gt)}}};if(Z&&(H=(F=function(gt){S(this,H),_(gt),h(i,this);var ut=k(this);try{gt(At(kt,ut),At(vt,ut))}catch(Q){vt(ut,Q)}}).prototype,(i=function(gt){T(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new G,rejection:!1,state:0,value:void 0})}).prototype=d(H,"then",function(gt,ut){var Q=k(this),Y=$(O(this,F));return Q.parent=!0,Y.ok=!v(gt)||gt,Y.fail=v(ut)&&ut,Y.domain=l?dt.domain:void 0,Q.state===0?Q.reactions.add(Y):U(function(){rt(Y,Q)}),Y.promise}),r=function(){var gt=new i,ut=k(gt);this.promise=gt,this.resolve=At(kt,ut),this.reject=At(vt,ut)},N.f=$=function(gt){return gt===F||gt===void 0?new r(gt):ct(gt)},!o&&v(K)&&R!==Object.prototype)){s=R.then,C||d(R,"then",function(gt,ut){var Q=this;return new F(function(Y,et){h(s,Q,Y,et)}).then(gt,ut)},{unsafe:!0});try{delete R.constructor}catch{}p&&p(R,H)}a({global:!0,constructor:!0,wrap:!0,forced:Z},{Promise:F}),g(F,"Promise",!1,!0),m("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/is-pure"),s=n("../internals/promise-native-constructor"),a=n("../internals/fails"),o=n("../internals/get-built-in"),l=n("../internals/is-callable"),c=n("../internals/species-constructor"),h=n("../internals/promise-resolve"),d=n("../internals/define-built-in"),p=s&&s.prototype;if(i({target:"Promise",proto:!0,real:!0,forced:!!s&&a(function(){p.finally.call({then:function(){}},function(){})})},{finally:function(m){var _=c(this,o("Promise")),v=l(m);return this.then(v?function(x){return h(_,m()).then(function(){return x})}:m,v?function(x){return h(_,m()).then(function(){throw x})}:m)}}),!r&&l(s)){var g=o("Promise").prototype.finally;p.finally!==g&&d(p,"finally",g,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(n,t,e){"use strict";n("../modules/es.promise.constructor"),n("../modules/es.promise.all"),n("../modules/es.promise.catch"),n("../modules/es.promise.race"),n("../modules/es.promise.reject"),n("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/function-call"),s=n("../internals/a-callable"),a=n("../internals/new-promise-capability"),o=n("../internals/perform"),l=n("../internals/iterate");i({target:"Promise",stat:!0,forced:n("../internals/promise-statics-incorrect-iteration")},{race:function(c){var h=this,d=a.f(h),p=d.reject,g=o(function(){var m=s(h.resolve);l(c,function(_){r(m,h,_).then(d.resolve,p)})});return g.error&&p(g.value),d.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/function-call"),s=n("../internals/new-promise-capability");i({target:"Promise",stat:!0,forced:n("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(a){var o=s.f(this);return r(o.reject,void 0,a),o.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/get-built-in"),s=n("../internals/is-pure"),a=n("../internals/promise-native-constructor"),o=n("../internals/promise-constructor-detection").CONSTRUCTOR,l=n("../internals/promise-resolve"),c=r("Promise"),h=s&&!o;i({target:"Promise",stat:!0,forced:s||o},{resolve:function(d){return l(h&&this===c?a:this,d)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/function-uncurry-this"),s=n("../internals/to-absolute-index"),a=RangeError,o=String.fromCharCode,l=String.fromCodePoint,c=r([].join);i({target:"String",stat:!0,arity:1,forced:!!l&&l.length!==1},{fromCodePoint:function(h){for(var d,p=[],g=arguments.length,m=0;g>m;){if(d=+arguments[m++],s(d,1114111)!==d)throw new a(d+" is not a valid code point");p[m]=d<65536?o(d):o(55296+((d-=65536)>>10),d%1024+56320)}return c(p,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/function-uncurry-this"),s=n("../internals/not-a-regexp"),a=n("../internals/require-object-coercible"),o=n("../internals/to-string"),l=n("../internals/correct-is-regexp-logic"),c=r("".indexOf);i({target:"String",proto:!0,forced:!l("includes")},{includes:function(h){return!!~c(o(a(this)),o(s(h)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(n,t,e){"use strict";n("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/global"),s=n("../internals/function-call"),a=n("../internals/function-uncurry-this"),o=n("../internals/is-pure"),l=n("../internals/descriptors"),c=n("../internals/symbol-constructor-detection"),h=n("../internals/fails"),d=n("../internals/has-own-property"),p=n("../internals/object-is-prototype-of"),g=n("../internals/an-object"),m=n("../internals/to-indexed-object"),_=n("../internals/to-property-key"),v=n("../internals/to-string"),x=n("../internals/create-property-descriptor"),S=n("../internals/object-create"),O=n("../internals/object-keys"),D=n("../internals/object-get-own-property-names"),U=n("../internals/object-get-own-property-names-external"),z=n("../internals/object-get-own-property-symbols"),V=n("../internals/object-get-own-property-descriptor"),G=n("../internals/object-define-property"),tt=n("../internals/object-define-properties"),K=n("../internals/object-property-is-enumerable"),B=n("../internals/define-built-in"),N=n("../internals/define-built-in-accessor"),Z=n("../internals/shared"),w=n("../internals/shared-key"),C=n("../internals/hidden-keys"),k=n("../internals/uid"),T=n("../internals/well-known-symbol"),R=n("../internals/well-known-symbol-wrapped"),F=n("../internals/well-known-symbol-define"),H=n("../internals/symbol-define-to-primitive"),it=n("../internals/set-to-string-tag"),ot=n("../internals/internal-state"),dt=n("../internals/array-iteration").forEach,$=w("hidden"),ct=ot.set,W=ot.getterFor("Symbol"),q=Object.prototype,rt=r.Symbol,mt=rt&&rt.prototype,wt=r.RangeError,_t=r.TypeError,Ct=r.QObject,Ft=V.f,At=G.f,vt=U.f,kt=K.f,gt=a([].push),ut=Z("symbols"),Q=Z("op-symbols"),Y=Z("wks"),et=!Ct||!Ct.prototype||!Ct.prototype.findChild,lt=function(ie,Xt,Ut){var _e=Ft(q,Xt);_e&&delete q[Xt],At(ie,Xt,Ut),_e&&ie!==q&&At(q,Xt,_e)},pt=l&&h(function(){return S(At({},"a",{get:function(){return At(this,"a",{value:7}).a}})).a!==7})?lt:At,bt=function(ie,Xt){var Ut=ut[ie]=S(mt);return ct(Ut,{type:"Symbol",tag:ie,description:Xt}),l||(Ut.description=Xt),Ut},Et=function(ie,Xt,Ut){ie===q&&Et(Q,Xt,Ut),g(ie);var _e=_(Xt);return g(Ut),d(ut,_e)?(Ut.enumerable?(d(ie,$)&&ie[$][_e]&&(ie[$][_e]=!1),Ut=S(Ut,{enumerable:x(0,!1)})):(d(ie,$)||At(ie,$,x(1,{})),ie[$][_e]=!0),pt(ie,_e,Ut)):At(ie,_e,Ut)},Ot=function(ie,Xt){g(ie);var Ut=m(Xt),_e=O(Ut).concat(Kt(Ut));return dt(_e,function(le){l&&!s(zt,Ut,le)||Et(ie,le,Ut[le])}),ie},zt=function(ie){var Xt=_(ie),Ut=s(kt,this,Xt);return!(this===q&&d(ut,Xt)&&!d(Q,Xt))&&(!(Ut||!d(this,Xt)||!d(ut,Xt)||d(this,$)&&this[$][Xt])||Ut)},Gt=function(ie,Xt){var Ut=m(ie),_e=_(Xt);if(Ut!==q||!d(ut,_e)||d(Q,_e)){var le=Ft(Ut,_e);return!le||!d(ut,_e)||d(Ut,$)&&Ut[$][_e]||(le.enumerable=!0),le}},Jt=function(ie){var Xt=vt(m(ie)),Ut=[];return dt(Xt,function(_e){d(ut,_e)||d(C,_e)||gt(Ut,_e)}),Ut},Kt=function(ie){var Xt=ie===q,Ut=vt(Xt?Q:m(ie)),_e=[];return dt(Ut,function(le){!d(ut,le)||Xt&&!d(q,le)||gt(_e,ut[le])}),_e};c||(B(mt=(rt=function(){if(p(mt,this))throw new _t("Symbol is not a constructor");var ie=arguments.length&&arguments[0]!==void 0?v(arguments[0]):void 0,Xt=k(ie),Ut=function(_e){this===q&&s(Ut,Q,_e),d(this,$)&&d(this[$],Xt)&&(this[$][Xt]=!1);var le=x(1,_e);try{pt(this,Xt,le)}catch(ye){if(!(ye instanceof wt))throw ye;lt(this,Xt,le)}};return l&&et&&pt(q,Xt,{configurable:!0,set:Ut}),bt(Xt,ie)}).prototype,"toString",function(){return W(this).tag}),B(rt,"withoutSetter",function(ie){return bt(k(ie),ie)}),K.f=zt,G.f=Et,tt.f=Ot,V.f=Gt,D.f=U.f=Jt,z.f=Kt,R.f=function(ie){return bt(T(ie),ie)},l&&(N(mt,"description",{configurable:!0,get:function(){return W(this).description}}),o||B(q,"propertyIsEnumerable",zt,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:rt}),dt(O(Y),function(ie){F(ie)}),i({target:"Symbol",stat:!0,forced:!c},{useSetter:function(){et=!0},useSimple:function(){et=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(ie,Xt){return Xt===void 0?S(ie):Ot(S(ie),Xt)},defineProperty:Et,defineProperties:Ot,getOwnPropertyDescriptor:Gt}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:Jt}),H(),it(rt,"Symbol"),C[$]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/get-built-in"),s=n("../internals/has-own-property"),a=n("../internals/to-string"),o=n("../internals/shared"),l=n("../internals/symbol-registry-detection"),c=o("string-to-symbol-registry"),h=o("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!l},{for:function(d){var p=a(d);if(s(c,p))return c[p];var g=r("Symbol")(p);return c[p]=g,h[g]=p,g}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(n,t,e){"use strict";n("../modules/es.symbol.constructor"),n("../modules/es.symbol.for"),n("../modules/es.symbol.key-for"),n("../modules/es.json.stringify"),n("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(n,t,e){"use strict";var i=n("../internals/export"),r=n("../internals/has-own-property"),s=n("../internals/is-symbol"),a=n("../internals/try-to-string"),o=n("../internals/shared"),l=n("../internals/symbol-registry-detection"),c=o("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!l},{keyFor:function(h){if(!s(h))throw new TypeError(a(h)+" is not a symbol");if(r(c,h))return c[h]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(n,t,e){"use strict";function i(r){return Object.prototype.toString.call(r)}e.isArray=function(r){return Array.isArray?Array.isArray(r):i(r)==="[object Array]"},e.isBoolean=function(r){return typeof r=="boolean"},e.isNull=function(r){return r===null},e.isNullOrUndefined=function(r){return r==null},e.isNumber=function(r){return typeof r=="number"},e.isString=function(r){return typeof r=="string"},e.isSymbol=function(r){return typeof r=="symbol"},e.isUndefined=function(r){return r===void 0},e.isRegExp=function(r){return i(r)==="[object RegExp]"},e.isObject=function(r){return typeof r=="object"&&r!==null},e.isDate=function(r){return i(r)==="[object Date]"},e.isError=function(r){return i(r)==="[object Error]"||r instanceof Error},e.isFunction=function(r){return typeof r=="function"},e.isPrimitive=function(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||r===void 0},e.isBuffer=n("buffer").Buffer.isBuffer},{buffer:220}],384:[function(n,t,e){(function(i){(function(){"use strict";var r=n("elliptic"),s=n("bn.js");t.exports=function(c){return new o(c)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function o(c){this.curveType=a[c],this.curveType||(this.curveType={name:c}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function l(c,h,d){Array.isArray(c)||(c=c.toArray());var p=new i(c);if(d&&p.length<d){var g=new i(d-p.length);g.fill(0),p=i.concat([g,p])}return h?p.toString(h):p}a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1,o.prototype.generateKeys=function(c,h){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,h)},o.prototype.computeSecret=function(c,h,d){return h=h||"utf8",i.isBuffer(c)||(c=new i(c,h)),l(this.curve.keyFromPublic(c).getPublic().mul(this.keys.getPrivate()).getX(),d,this.curveType.byteLength)},o.prototype.getPublicKey=function(c,h){var d=this.keys.getPublic(h==="compressed",!0);return h==="hybrid"&&(d[d.length-1]%2?d[0]=7:d[0]=6),l(d,c)},o.prototype.getPrivateKey=function(c){return l(this.keys.getPrivate(),c)},o.prototype.setPublicKey=function(c,h){return h=h||"utf8",i.isBuffer(c)||(c=new i(c,h)),this.keys._importPublic(c),this},o.prototype.setPrivateKey=function(c,h){h=h||"utf8",i.isBuffer(c)||(c=new i(c,h));var d=new s(c);return d=d.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(d),this}}).call(this)}).call(this,n("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],386:[function(n,t,e){"use strict";var i=n("inherits"),r=n("md5.js"),s=n("ripemd160"),a=n("sha.js"),o=n("cipher-base");function l(c){o.call(this,"digest"),this._hash=c}i(l,o),l.prototype._update=function(c){this._hash.update(c)},l.prototype._final=function(){return this._hash.digest()},t.exports=function(c){return(c=c.toLowerCase())==="md5"?new r:c==="rmd160"||c==="ripemd160"?new s:new l(a(c))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(n,t,e){"use strict";var i=n("md5.js");t.exports=function(r){return new i().update(r).digest()}},{"md5.js":450}],388:[function(n,t,e){"use strict";var i=n("inherits"),r=n("./legacy"),s=n("cipher-base"),a=n("safe-buffer").Buffer,o=n("create-hash/md5"),l=n("ripemd160"),c=n("sha.js"),h=a.alloc(128);function d(p,g){s.call(this,"digest"),typeof g=="string"&&(g=a.from(g));var m=p==="sha512"||p==="sha384"?128:64;this._alg=p,this._key=g,g.length>m?g=(p==="rmd160"?new l:c(p)).update(g).digest():g.length<m&&(g=a.concat([g,h],m));for(var _=this._ipad=a.allocUnsafe(m),v=this._opad=a.allocUnsafe(m),x=0;x<m;x++)_[x]=54^g[x],v[x]=92^g[x];this._hash=p==="rmd160"?new l:c(p),this._hash.update(_)}i(d,s),d.prototype._update=function(p){this._hash.update(p)},d.prototype._final=function(){var p=this._hash.digest();return(this._alg==="rmd160"?new l:c(this._alg)).update(this._opad).update(p).digest()},t.exports=function(p,g){return(p=p.toLowerCase())==="rmd160"||p==="ripemd160"?new d("rmd160",g):p==="md5"?new r(o,g):new d(p,g)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(n,t,e){"use strict";var i=n("inherits"),r=n("safe-buffer").Buffer,s=n("cipher-base"),a=r.alloc(128);function o(l,c){s.call(this,"digest"),typeof c=="string"&&(c=r.from(c)),this._alg=l,this._key=c,c.length>64?c=l(c):c.length<64&&(c=r.concat([c,a],64));for(var h=this._ipad=r.allocUnsafe(64),d=this._opad=r.allocUnsafe(64),p=0;p<64;p++)h[p]=54^c[p],d[p]=92^c[p];this._hash=[h]}i(o,s),o.prototype._update=function(l){this._hash.push(l)},o.prototype._final=function(){var l=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,l]))},t.exports=o},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(n,t,e){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=n("randombytes"),e.createHash=e.Hash=n("create-hash"),e.createHmac=e.Hmac=n("create-hmac");var i=n("browserify-sign/algos"),r=Object.keys(i),s=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);e.getHashes=function(){return s};var a=n("pbkdf2");e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync;var o=n("browserify-cipher");e.Cipher=o.Cipher,e.createCipher=o.createCipher,e.Cipheriv=o.Cipheriv,e.createCipheriv=o.createCipheriv,e.Decipher=o.Decipher,e.createDecipher=o.createDecipher,e.Decipheriv=o.Decipheriv,e.createDecipheriv=o.createDecipheriv,e.getCiphers=o.getCiphers,e.listCiphers=o.listCiphers;var l=n("diffie-hellman");e.DiffieHellmanGroup=l.DiffieHellmanGroup,e.createDiffieHellmanGroup=l.createDiffieHellmanGroup,e.getDiffieHellman=l.getDiffieHellman,e.createDiffieHellman=l.createDiffieHellman,e.DiffieHellman=l.DiffieHellman;var c=n("browserify-sign");e.createSign=c.createSign,e.Sign=c.Sign,e.createVerify=c.createVerify,e.Verify=c.Verify,e.createECDH=n("create-ecdh");var h=n("public-encrypt");e.publicEncrypt=h.publicEncrypt,e.privateEncrypt=h.privateEncrypt,e.publicDecrypt=h.publicDecrypt,e.privateDecrypt=h.privateDecrypt;var d=n("randomfill");e.randomFill=d.randomFill,e.randomFillSync=d.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(n,t,e){"use strict";(function(i,r){typeof e=="object"&&t!==void 0?t.exports=r():(i=typeof globalThis<"u"?globalThis:i||self).dayjs=r()})(void 0,function(){var i=6e4,r=36e5,s="millisecond",a="second",o="minute",l="hour",c="day",h="week",d="month",p="quarter",g="year",m="date",_="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var C=["th","st","nd","rd"],k=w%100;return"["+w+(C[(k-20)%10]||C[k]||C[0])+"]"}},O=function(w,C,k){var T=String(w);return!T||T.length>=C?w:""+Array(C+1-T.length).join(k)+w},D={s:O,z:function(w){var C=-w.utcOffset(),k=Math.abs(C),T=Math.floor(k/60),R=k%60;return(C<=0?"+":"-")+O(T,2,"0")+":"+O(R,2,"0")},m:function w(C,k){if(C.date()<k.date())return-w(k,C);var T=12*(k.year()-C.year())+(k.month()-C.month()),R=C.clone().add(T,d),F=k-R<0,H=C.clone().add(T+(F?-1:1),d);return+(-(T+(k-R)/(F?R-H:H-R))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:d,y:g,w:h,d:c,D:m,h:l,m:o,s:a,ms:s,Q:p}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},U="en",z={};z[U]=S;var V="$isDayjsObject",G=function(w){return w instanceof N||!(!w||!w[V])},tt=function w(C,k,T){var R;if(!C)return U;if(typeof C=="string"){var F=C.toLowerCase();z[F]&&(R=F),k&&(z[F]=k,R=F);var H=C.split("-");if(!R&&H.length>1)return w(H[0])}else{var it=C.name;z[it]=C,R=it}return!T&&R&&(U=R),R||!T&&U},K=function(w,C){if(G(w))return w.clone();var k=typeof C=="object"?C:{};return k.date=w,k.args=arguments,new N(k)},B=D;B.l=tt,B.i=G,B.w=function(w,C){return K(w,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var N=function(){function w(k){this.$L=tt(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[V]=!0}var C=w.prototype;return C.parse=function(k){this.$d=function(T){var R=T.date,F=T.utc;if(R===null)return new Date(NaN);if(B.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var H=R.match(v);if(H){var it=H[2]-1||0,ot=(H[7]||"0").substring(0,3);return F?new Date(Date.UTC(H[1],it,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ot)):new Date(H[1],it,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ot)}}return new Date(R)}(k),this.init()},C.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},C.$utils=function(){return B},C.isValid=function(){return this.$d.toString()!==_},C.isSame=function(k,T){var R=K(k);return this.startOf(T)<=R&&R<=this.endOf(T)},C.isAfter=function(k,T){return K(k)<this.startOf(T)},C.isBefore=function(k,T){return this.endOf(T)<K(k)},C.$g=function(k,T,R){return B.u(k)?this[T]:this.set(R,k)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(k,T){var R=this,F=!!B.u(T)||T,H=B.p(k),it=function(mt,wt){var _t=B.w(R.$u?Date.UTC(R.$y,wt,mt):new Date(R.$y,wt,mt),R);return F?_t:_t.endOf(c)},ot=function(mt,wt){return B.w(R.toDate()[mt].apply(R.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(wt)),R)},dt=this.$W,$=this.$M,ct=this.$D,W="set"+(this.$u?"UTC":"");switch(H){case g:return F?it(1,0):it(31,11);case d:return F?it(1,$):it(0,$+1);case h:var q=this.$locale().weekStart||0,rt=(dt<q?dt+7:dt)-q;return it(F?ct-rt:ct+(6-rt),$);case c:case m:return ot(W+"Hours",0);case l:return ot(W+"Minutes",1);case o:return ot(W+"Seconds",2);case a:return ot(W+"Milliseconds",3);default:return this.clone()}},C.endOf=function(k){return this.startOf(k,!1)},C.$set=function(k,T){var R,F=B.p(k),H="set"+(this.$u?"UTC":""),it=(R={},R[c]=H+"Date",R[m]=H+"Date",R[d]=H+"Month",R[g]=H+"FullYear",R[l]=H+"Hours",R[o]=H+"Minutes",R[a]=H+"Seconds",R[s]=H+"Milliseconds",R)[F],ot=F===c?this.$D+(T-this.$W):T;if(F===d||F===g){var dt=this.clone().set(m,1);dt.$d[it](ot),dt.init(),this.$d=dt.set(m,Math.min(this.$D,dt.daysInMonth())).$d}else it&&this.$d[it](ot);return this.init(),this},C.set=function(k,T){return this.clone().$set(k,T)},C.get=function(k){return this[B.p(k)]()},C.add=function(k,T){var R,F=this;k=Number(k);var H=B.p(T),it=function($){var ct=K(F);return B.w(ct.date(ct.date()+Math.round($*k)),F)};if(H===d)return this.set(d,this.$M+k);if(H===g)return this.set(g,this.$y+k);if(H===c)return it(1);if(H===h)return it(7);var ot=(R={},R[o]=i,R[l]=r,R[a]=1e3,R)[H]||1,dt=this.$d.getTime()+k*ot;return B.w(dt,this)},C.subtract=function(k,T){return this.add(-1*k,T)},C.format=function(k){var T=this,R=this.$locale();if(!this.isValid())return R.invalidDate||_;var F=k||"YYYY-MM-DDTHH:mm:ssZ",H=B.z(this),it=this.$H,ot=this.$m,dt=this.$M,$=R.weekdays,ct=R.months,W=R.meridiem,q=function(wt,_t,Ct,Ft){return wt&&(wt[_t]||wt(T,F))||Ct[_t].slice(0,Ft)},rt=function(wt){return B.s(it%12||12,wt,"0")},mt=W||function(wt,_t,Ct){var Ft=wt<12?"AM":"PM";return Ct?Ft.toLowerCase():Ft};return F.replace(x,function(wt,_t){return _t||function(Ct){switch(Ct){case"YY":return String(T.$y).slice(-2);case"YYYY":return B.s(T.$y,4,"0");case"M":return dt+1;case"MM":return B.s(dt+1,2,"0");case"MMM":return q(R.monthsShort,dt,ct,3);case"MMMM":return q(ct,dt);case"D":return T.$D;case"DD":return B.s(T.$D,2,"0");case"d":return String(T.$W);case"dd":return q(R.weekdaysMin,T.$W,$,2);case"ddd":return q(R.weekdaysShort,T.$W,$,3);case"dddd":return $[T.$W];case"H":return String(it);case"HH":return B.s(it,2,"0");case"h":return rt(1);case"hh":return rt(2);case"a":return mt(it,ot,!0);case"A":return mt(it,ot,!1);case"m":return String(ot);case"mm":return B.s(ot,2,"0");case"s":return String(T.$s);case"ss":return B.s(T.$s,2,"0");case"SSS":return B.s(T.$ms,3,"0");case"Z":return H}return null}(wt)||H.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(k,T,R){var F,H=this,it=B.p(T),ot=K(k),dt=(ot.utcOffset()-this.utcOffset())*i,$=this-ot,ct=function(){return B.m(H,ot)};switch(it){case g:F=ct()/12;break;case d:F=ct();break;case p:F=ct()/3;break;case h:F=($-dt)/6048e5;break;case c:F=($-dt)/864e5;break;case l:F=$/r;break;case o:F=$/i;break;case a:F=$/1e3;break;default:F=$}return R?F:B.a(F)},C.daysInMonth=function(){return this.endOf(d).$D},C.$locale=function(){return z[this.$L]},C.locale=function(k,T){if(!k)return this.$L;var R=this.clone(),F=tt(k,T,!0);return F&&(R.$L=F),R},C.clone=function(){return B.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},w}(),Z=N.prototype;return K.prototype=Z,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",c],["$M",d],["$y",g],["$D",m]].forEach(function(w){Z[w[1]]=function(C){return this.$g(C,w[0],w[1])}}),K.extend=function(w,C){return w.$i||(w(C,N,K),w.$i=!0),K},K.locale=tt,K.isDayjs=G,K.unix=function(w){return K(1e3*w)},K.en=z[U],K.Ls=z,K.p={},K})},{}],392:[function(n,t,e){"use strict";(function(i,r){typeof e=="object"&&t!==void 0?t.exports=r():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_customParseFormat=r()})(void 0,function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d\d/,a=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},c=function(v){return(v=+v)+(v>68?1900:2e3)},h=function(v){return function(x){this[v]=+x}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(x){if(!x||x==="Z")return 0;var S=x.match(/([+-]|\d\d)/g),O=60*S[1]+(+S[2]||0);return O===0?0:S[0]==="+"?-O:O}(v)}],p=function(v){var x=l[v];return x&&(x.indexOf?x:x.s.concat(x.f))},g=function(v,x){var S,O=l.meridiem;if(O){for(var D=1;D<=24;D+=1)if(v.indexOf(O(D,0,x))>-1){S=D>12;break}}else S=v===(x?"pm":"PM");return S},m={A:[o,function(v){this.afternoon=g(v,!1)}],a:[o,function(v){this.afternoon=g(v,!0)}],S:[/\d/,function(v){this.milliseconds=100*+v}],SS:[s,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[a,h("seconds")],ss:[a,h("seconds")],m:[a,h("minutes")],mm:[a,h("minutes")],H:[a,h("hours")],h:[a,h("hours")],HH:[a,h("hours")],hh:[a,h("hours")],D:[a,h("day")],DD:[s,h("day")],Do:[o,function(v){var x=l.ordinal,S=v.match(/\d+/);if(this.day=S[0],x)for(var O=1;O<=31;O+=1)x(O).replace(/\[|\]/g,"")===v&&(this.day=O)}],M:[a,h("month")],MM:[s,h("month")],MMM:[o,function(v){var x=p("months"),S=(p("monthsShort")||x.map(function(O){return O.slice(0,3)})).indexOf(v)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[o,function(v){var x=p("months").indexOf(v)+1;if(x<1)throw new Error;this.month=x%12||x}],Y:[/[+-]?\d+/,h("year")],YY:[s,function(v){this.year=c(v)}],YYYY:[/\d{4}/,h("year")],Z:d,ZZ:d};function _(v){var x,S;x=v,S=l&&l.formats;for(var O=(v=x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(K,B,N){var Z=N&&N.toUpperCase();return B||S[N]||i[N]||S[Z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,C,k){return C||k.slice(1)})})).match(r),D=O.length,U=0;U<D;U+=1){var z=O[U],V=m[z],G=V&&V[0],tt=V&&V[1];O[U]=tt?{regex:G,parser:tt}:z.replace(/^\[|\]$/g,"")}return function(K){for(var B={},N=0,Z=0;N<D;N+=1){var w=O[N];if(typeof w=="string")Z+=w.length;else{var C=w.regex,k=w.parser,T=K.slice(Z),R=C.exec(T)[0];k.call(B,R),K=K.replace(R,"")}}return function(F){var H=F.afternoon;if(H!==void 0){var it=F.hours;H?it<12&&(F.hours+=12):it===12&&(F.hours=0),delete F.afternoon}}(B),B}}return function(v,x,S){S.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(c=v.parseTwoDigitYear);var O=x.prototype,D=O.parse;O.parse=function(U){var z=U.date,V=U.utc,G=U.args;this.$u=V;var tt=G[1];if(typeof tt=="string"){var K=G[2]===!0,B=G[3]===!0,N=K||B,Z=G[2];B&&(Z=G[2]),l=this.$locale(),!K&&Z&&(l=S.Ls[Z]),this.$d=function(T,R,F){try{if(["x","X"].indexOf(R)>-1)return new Date((R==="X"?1e3:1)*T);var H=_(R)(T),it=H.year,ot=H.month,dt=H.day,$=H.hours,ct=H.minutes,W=H.seconds,q=H.milliseconds,rt=H.zone,mt=new Date,wt=dt||(it||ot?1:mt.getDate()),_t=it||mt.getFullYear(),Ct=0;it&&!ot||(Ct=ot>0?ot-1:mt.getMonth());var Ft=$||0,At=ct||0,vt=W||0,kt=q||0;return rt?new Date(Date.UTC(_t,Ct,wt,Ft,At,vt,kt+60*rt.offset*1e3)):F?new Date(Date.UTC(_t,Ct,wt,Ft,At,vt,kt)):new Date(_t,Ct,wt,Ft,At,vt,kt)}catch{return new Date("")}}(z,tt,V),this.init(),Z&&Z!==!0&&(this.$L=this.locale(Z).$L),N&&z!=this.format(tt)&&(this.$d=new Date("")),l={}}else if(tt instanceof Array)for(var w=tt.length,C=1;C<=w;C+=1){G[1]=tt[C-1];var k=S.apply(this,G);if(k.isValid()){this.$d=k.$d,this.$L=k.$L,this.init();break}C===w&&(this.$d=new Date(""))}else D.call(this,U)}}})},{}],393:[function(n,t,e){"use strict";(function(i,r){typeof e=="object"&&t!==void 0?t.exports=r():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_utc=r()})(void 0,function(){var i="minute",r=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(a,o,l){var c=o.prototype;l.utc=function(v){var x={date:v,utc:!0,args:arguments};return new o(x)},c.utc=function(v){var x=l(this.toDate(),{locale:this.$L,utc:!0});return v?x.add(this.utcOffset(),i):x},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var h=c.parse;c.parse=function(v){v.utc&&(this.$u=!0),this.$utils().u(v.$offset)||(this.$offset=v.$offset),h.call(this,v)};var d=c.init;c.init=function(){if(this.$u){var v=this.$d;this.$y=v.getUTCFullYear(),this.$M=v.getUTCMonth(),this.$D=v.getUTCDate(),this.$W=v.getUTCDay(),this.$H=v.getUTCHours(),this.$m=v.getUTCMinutes(),this.$s=v.getUTCSeconds(),this.$ms=v.getUTCMilliseconds()}else d.call(this)};var p=c.utcOffset;c.utcOffset=function(v,x){var S=this.$utils().u;if(S(v))return this.$u?0:S(this.$offset)?p.call(this):this.$offset;if(typeof v=="string"&&(v=function(z){z===void 0&&(z="");var V=z.match(r);if(!V)return null;var G=(""+V[0]).match(s)||["-",0,0],tt=G[0],K=60*+G[1]+ +G[2];return K===0?0:tt==="+"?K:-K}(v))===null)return this;var O=Math.abs(v)<=16?60*v:v,D=this;if(x)return D.$offset=O,D.$u=v===0,D;if(v!==0){var U=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(D=this.local().add(O+U,i)).$offset=O,D.$x.$localOffset=U}else D=this.utc();return D};var g=c.format;c.format=function(v){var x=v||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,x)},c.valueOf=function(){var v=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*v},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var m=c.toDate;c.toDate=function(v){return v==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var _=c.diff;c.diff=function(v,x,S){if(v&&this.$u===v.$u)return _.call(this,v,x,S);var O=this.local(),D=l(v).local();return _.call(O,D,x,S)}}})},{}],394:[function(n,t,e){"use strict";e.utils=n("./des/utils"),e.Cipher=n("./des/cipher"),e.DES=n("./des/des"),e.CBC=n("./des/cbc"),e.EDE=n("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(n,t,e){"use strict";var i=n("minimalistic-assert"),r=n("inherits"),s={};function a(o){i.equal(o.length,8,"Invalid IV length"),this.iv=new Array(8);for(var l=0;l<this.iv.length;l++)this.iv[l]=o[l]}e.instantiate=function(o){function l(p){o.call(this,p),this._cbcInit()}r(l,o);for(var c=Object.keys(s),h=0;h<c.length;h++){var d=c[h];l.prototype[d]=s[d]}return l.create=function(p){return new l(p)},l},s._cbcInit=function(){var o=new a(this.options.iv);this._cbcState=o},s._update=function(o,l,c,h){var d=this._cbcState,p=this.constructor.super_.prototype,g=d.iv;if(this.type==="encrypt"){for(var m=0;m<this.blockSize;m++)g[m]^=o[l+m];for(p._update.call(this,g,0,c,h),m=0;m<this.blockSize;m++)g[m]=c[h+m]}else{for(p._update.call(this,o,l,c,h),m=0;m<this.blockSize;m++)c[h+m]^=g[m];for(m=0;m<this.blockSize;m++)g[m]=o[l+m]}}},{inherits:440,"minimalistic-assert":453}],396:[function(n,t,e){"use strict";var i=n("minimalistic-assert");function r(s){this.options=s,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=s.padding!==!1}t.exports=r,r.prototype._init=function(){},r.prototype.update=function(s){return s.length===0?[]:this.type==="decrypt"?this._updateDecrypt(s):this._updateEncrypt(s)},r.prototype._buffer=function(s,a){for(var o=Math.min(this.buffer.length-this.bufferOff,s.length-a),l=0;l<o;l++)this.buffer[this.bufferOff+l]=s[a+l];return this.bufferOff+=o,o},r.prototype._flushBuffer=function(s,a){return this._update(this.buffer,0,s,a),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(s){var a=0,o=0,l=(this.bufferOff+s.length)/this.blockSize|0,c=new Array(l*this.blockSize);this.bufferOff!==0&&(a+=this._buffer(s,a),this.bufferOff===this.buffer.length&&(o+=this._flushBuffer(c,o)));for(var h=s.length-(s.length-a)%this.blockSize;a<h;a+=this.blockSize)this._update(s,a,c,o),o+=this.blockSize;for(;a<s.length;a++,this.bufferOff++)this.buffer[this.bufferOff]=s[a];return c},r.prototype._updateDecrypt=function(s){for(var a=0,o=0,l=Math.ceil((this.bufferOff+s.length)/this.blockSize)-1,c=new Array(l*this.blockSize);l>0;l--)a+=this._buffer(s,a),o+=this._flushBuffer(c,o);return a+=this._buffer(s,a),c},r.prototype.final=function(s){var a,o;return s&&(a=this.update(s)),o=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),a?a.concat(o):o},r.prototype._pad=function(s,a){if(a===0)return!1;for(;a<s.length;)s[a++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var s=new Array(this.blockSize);return this._update(this.buffer,0,s,0),s},r.prototype._unpad=function(s){return s},r.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var s=new Array(this.blockSize);return this._flushBuffer(s,0),this._unpad(s)}},{"minimalistic-assert":453}],397:[function(n,t,e){"use strict";var i=n("minimalistic-assert"),r=n("inherits"),s=n("./utils"),a=n("./cipher");function o(){this.tmp=new Array(2),this.keys=null}function l(h){a.call(this,h);var d=new o;this._desState=d,this.deriveKeys(d,h.key)}r(l,a),t.exports=l,l.create=function(h){return new l(h)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];l.prototype.deriveKeys=function(h,d){h.keys=new Array(32),i.equal(d.length,this.blockSize,"Invalid key length");var p=s.readUInt32BE(d,0),g=s.readUInt32BE(d,4);s.pc1(p,g,h.tmp,0),p=h.tmp[0],g=h.tmp[1];for(var m=0;m<h.keys.length;m+=2){var _=c[m>>>1];p=s.r28shl(p,_),g=s.r28shl(g,_),s.pc2(p,g,h.keys,m)}},l.prototype._update=function(h,d,p,g){var m=this._desState,_=s.readUInt32BE(h,d),v=s.readUInt32BE(h,d+4);s.ip(_,v,m.tmp,0),_=m.tmp[0],v=m.tmp[1],this.type==="encrypt"?this._encrypt(m,_,v,m.tmp,0):this._decrypt(m,_,v,m.tmp,0),_=m.tmp[0],v=m.tmp[1],s.writeUInt32BE(p,_,g),s.writeUInt32BE(p,v,g+4)},l.prototype._pad=function(h,d){if(this.padding===!1)return!1;for(var p=h.length-d,g=d;g<h.length;g++)h[g]=p;return!0},l.prototype._unpad=function(h){if(this.padding===!1)return h;for(var d=h[h.length-1],p=h.length-d;p<h.length;p++)i.equal(h[p],d);return h.slice(0,h.length-d)},l.prototype._encrypt=function(h,d,p,g,m){for(var _=d,v=p,x=0;x<h.keys.length;x+=2){var S=h.keys[x],O=h.keys[x+1];s.expand(v,h.tmp,0),S^=h.tmp[0],O^=h.tmp[1];var D=s.substitute(S,O),U=v;v=(_^s.permute(D))>>>0,_=U}s.rip(v,_,g,m)},l.prototype._decrypt=function(h,d,p,g,m){for(var _=p,v=d,x=h.keys.length-2;x>=0;x-=2){var S=h.keys[x],O=h.keys[x+1];s.expand(_,h.tmp,0),S^=h.tmp[0],O^=h.tmp[1];var D=s.substitute(S,O),U=_;_=(v^s.permute(D))>>>0,v=U}s.rip(_,v,g,m)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(n,t,e){"use strict";var i=n("minimalistic-assert"),r=n("inherits"),s=n("./cipher"),a=n("./des");function o(c,h){i.equal(h.length,24,"Invalid key length");var d=h.slice(0,8),p=h.slice(8,16),g=h.slice(16,24);this.ciphers=c==="encrypt"?[a.create({type:"encrypt",key:d}),a.create({type:"decrypt",key:p}),a.create({type:"encrypt",key:g})]:[a.create({type:"decrypt",key:g}),a.create({type:"encrypt",key:p}),a.create({type:"decrypt",key:d})]}function l(c){s.call(this,c);var h=new o(this.type,this.options.key);this._edeState=h}r(l,s),t.exports=l,l.create=function(c){return new l(c)},l.prototype._update=function(c,h,d,p){var g=this._edeState;g.ciphers[0]._update(c,h,d,p),g.ciphers[1]._update(d,p,d,p),g.ciphers[2]._update(d,p,d,p)},l.prototype._pad=a.prototype._pad,l.prototype._unpad=a.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(n,t,e){"use strict";e.readUInt32BE=function(a,o){return(a[0+o]<<24|a[1+o]<<16|a[2+o]<<8|a[3+o])>>>0},e.writeUInt32BE=function(a,o,l){a[0+l]=o>>>24,a[1+l]=o>>>16&255,a[2+l]=o>>>8&255,a[3+l]=255&o},e.ip=function(a,o,l,c){for(var h=0,d=0,p=6;p>=0;p-=2){for(var g=0;g<=24;g+=8)h<<=1,h|=o>>>g+p&1;for(g=0;g<=24;g+=8)h<<=1,h|=a>>>g+p&1}for(p=6;p>=0;p-=2){for(g=1;g<=25;g+=8)d<<=1,d|=o>>>g+p&1;for(g=1;g<=25;g+=8)d<<=1,d|=a>>>g+p&1}l[c+0]=h>>>0,l[c+1]=d>>>0},e.rip=function(a,o,l,c){for(var h=0,d=0,p=0;p<4;p++)for(var g=24;g>=0;g-=8)h<<=1,h|=o>>>g+p&1,h<<=1,h|=a>>>g+p&1;for(p=4;p<8;p++)for(g=24;g>=0;g-=8)d<<=1,d|=o>>>g+p&1,d<<=1,d|=a>>>g+p&1;l[c+0]=h>>>0,l[c+1]=d>>>0},e.pc1=function(a,o,l,c){for(var h=0,d=0,p=7;p>=5;p--){for(var g=0;g<=24;g+=8)h<<=1,h|=o>>g+p&1;for(g=0;g<=24;g+=8)h<<=1,h|=a>>g+p&1}for(g=0;g<=24;g+=8)h<<=1,h|=o>>g+p&1;for(p=1;p<=3;p++){for(g=0;g<=24;g+=8)d<<=1,d|=o>>g+p&1;for(g=0;g<=24;g+=8)d<<=1,d|=a>>g+p&1}for(g=0;g<=24;g+=8)d<<=1,d|=a>>g+p&1;l[c+0]=h>>>0,l[c+1]=d>>>0},e.r28shl=function(a,o){return a<<o&268435455|a>>>28-o};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(a,o,l,c){for(var h=0,d=0,p=i.length>>>1,g=0;g<p;g++)h<<=1,h|=a>>>i[g]&1;for(g=p;g<i.length;g++)d<<=1,d|=o>>>i[g]&1;l[c+0]=h>>>0,l[c+1]=d>>>0},e.expand=function(a,o,l){var c=0,h=0;c=(1&a)<<5|a>>>27;for(var d=23;d>=15;d-=4)c<<=6,c|=a>>>d&63;for(d=11;d>=3;d-=4)h|=a>>>d&63,h<<=6;h|=(31&a)<<1|a>>>31,o[l+0]=c>>>0,o[l+1]=h>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(a,o){for(var l=0,c=0;c<4;c++)l<<=4,l|=r[64*c+(a>>>18-6*c&63)];for(c=0;c<4;c++)l<<=4,l|=r[256+64*c+(o>>>18-6*c&63)];return l>>>0};var s=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(a){for(var o=0,l=0;l<s.length;l++)o<<=1,o|=a>>>s[l]&1;return o>>>0},e.padSplit=function(a,o,l){for(var c=a.toString(2);c.length<o;)c="0"+c;for(var h=[],d=0;d<o;d+=l)h.push(c.slice(d,d+l));return h.join(" ")}},{}],400:[function(n,t,e){(function(i){(function(){"use strict";var r=n("./lib/generatePrime"),s=n("./lib/primes.json"),a=n("./lib/dh"),o={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(l){var c=new i(s[l].prime,"hex"),h=new i(s[l].gen,"hex");return new a(c,h)},e.createDiffieHellman=e.DiffieHellman=function l(c,h,d,p){return i.isBuffer(h)||o[h]===void 0?l(c,"binary",h,d):(h=h||"binary",p=p||"binary",d=d||new i([2]),i.isBuffer(d)||(d=new i(d,p)),typeof c=="number"?new a(r(c,d),d,!0):(i.isBuffer(c)||(c=new i(c,h)),new a(c,d,!0)))}}).call(this)}).call(this,n("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(n,t,e){(function(i){(function(){"use strict";var r=n("bn.js"),s=new(n("miller-rabin")),a=new r(24),o=new r(11),l=new r(10),c=new r(3),h=new r(7),d=n("./generatePrime"),p=n("randombytes");function g(S,O){return O=O||"utf8",i.isBuffer(S)||(S=new i(S,O)),this._pub=new r(S),this}function m(S,O){return O=O||"utf8",i.isBuffer(S)||(S=new i(S,O)),this._priv=new r(S),this}t.exports=v;var _={};function v(S,O,D){this.setGenerator(O),this.__prime=new r(S),this._prime=r.mont(this.__prime),this._primeLen=S.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,D?(this.setPublicKey=g,this.setPrivateKey=m):this._primeCode=8}function x(S,O){var D=new i(S.toArray());return O?D.toString(O):D}Object.defineProperty(v.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(S,O){var D=O.toString("hex"),U=[D,S.toString(16)].join("_");if(U in _)return _[U];var z,V=0;if(S.isEven()||!d.simpleSieve||!d.fermatTest(S)||!s.test(S))return V+=1,V+=D==="02"||D==="05"?8:4,_[U]=V,V;switch(s.test(S.shrn(1))||(V+=2),D){case"02":S.mod(a).cmp(o)&&(V+=8);break;case"05":(z=S.mod(l)).cmp(c)&&z.cmp(h)&&(V+=8);break;default:V+=4}return _[U]=V,V}(this.__prime,this.__gen)),this._primeCode}}),v.prototype.generateKeys=function(){return this._priv||(this._priv=new r(p(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},v.prototype.computeSecret=function(S){var O=(S=(S=new r(S)).toRed(this._prime)).redPow(this._priv).fromRed(),D=new i(O.toArray()),U=this.getPrime();if(D.length<U.length){var z=new i(U.length-D.length);z.fill(0),D=i.concat([z,D])}return D},v.prototype.getPublicKey=function(S){return x(this._pub,S)},v.prototype.getPrivateKey=function(S){return x(this._priv,S)},v.prototype.getPrime=function(S){return x(this.__prime,S)},v.prototype.getGenerator=function(S){return x(this._gen,S)},v.prototype.setGenerator=function(S,O){return O=O||"utf8",i.isBuffer(S)||(S=new i(S,O)),this.__gen=S,this._gen=new r(S),this}}).call(this)}).call(this,n("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(n,t,e){"use strict";var i=n("randombytes");t.exports=S,S.simpleSieve=v,S.fermatTest=x;var r=n("bn.js"),s=new r(24),a=new(n("miller-rabin")),o=new r(1),l=new r(2),c=new r(5),h=(new r(16),new r(8),new r(10)),d=new r(3),p=(new r(7),new r(11)),g=new r(4),m=(new r(12),null);function _(){if(m!==null)return m;var O=[];O[0]=2;for(var D=1,U=3;U<1048576;U+=2){for(var z=Math.ceil(Math.sqrt(U)),V=0;V<D&&O[V]<=z&&U%O[V]!=0;V++);D!==V&&O[V]<=z||(O[D++]=U)}return m=O,O}function v(O){for(var D=_(),U=0;U<D.length;U++)if(O.modn(D[U])===0)return O.cmpn(D[U])===0;return!0}function x(O){var D=r.mont(O);return l.toRed(D).redPow(O.subn(1)).fromRed().cmpn(1)===0}function S(O,D){if(O<16)return new r(D===2||D===5?[140,123]:[140,39]);var U,z;for(D=new r(D);;){for(U=new r(i(Math.ceil(O/8)));U.bitLength()>O;)U.ishrn(1);if(U.isEven()&&U.iadd(o),U.testn(1)||U.iadd(l),D.cmp(l)){if(!D.cmp(c))for(;U.mod(h).cmp(d);)U.iadd(g)}else for(;U.mod(s).cmp(p);)U.iadd(g);if(v(z=U.shrn(1))&&v(U)&&x(z)&&x(U)&&a.test(z)&&a.test(U))return U}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(n,t,e){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],405:[function(n,t,e){"use strict";var i=e;i.version=n("../package.json").version,i.utils=n("./elliptic/utils"),i.rand=n("brorand"),i.curve=n("./elliptic/curve"),i.curves=n("./elliptic/curves"),i.ec=n("./elliptic/ec"),i.eddsa=n("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(n,t,e){"use strict";var i=n("bn.js"),r=n("../utils"),s=r.getNAF,a=r.getJSF,o=r.assert;function l(h,d){this.type=h,this.p=new i(d.p,16),this.red=d.prime?i.red(d.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=d.n&&new i(d.n,16),this.g=d.g&&this.pointFromJSON(d.g,d.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var p=this.n&&this.p.div(this.n);!p||p.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(h,d){this.curve=h,this.type=d,this.precomputed=null}t.exports=l,l.prototype.point=function(){throw new Error("Not implemented")},l.prototype.validate=function(){throw new Error("Not implemented")},l.prototype._fixedNafMul=function(h,d){o(h.precomputed);var p=h._getDoubles(),g=s(d,1,this._bitLength),m=(1<<p.step+1)-(p.step%2==0?2:1);m/=3;var _,v,x=[];for(_=0;_<g.length;_+=p.step){v=0;for(var S=_+p.step-1;S>=_;S--)v=(v<<1)+g[S];x.push(v)}for(var O=this.jpoint(null,null,null),D=this.jpoint(null,null,null),U=m;U>0;U--){for(_=0;_<x.length;_++)(v=x[_])===U?D=D.mixedAdd(p.points[_]):v===-U&&(D=D.mixedAdd(p.points[_].neg()));O=O.add(D)}return O.toP()},l.prototype._wnafMul=function(h,d){var p=4,g=h._getNAFPoints(p);p=g.wnd;for(var m=g.points,_=s(d,p,this._bitLength),v=this.jpoint(null,null,null),x=_.length-1;x>=0;x--){for(var S=0;x>=0&&_[x]===0;x--)S++;if(x>=0&&S++,v=v.dblp(S),x<0)break;var O=_[x];o(O!==0),v=h.type==="affine"?O>0?v.mixedAdd(m[O-1>>1]):v.mixedAdd(m[-O-1>>1].neg()):O>0?v.add(m[O-1>>1]):v.add(m[-O-1>>1].neg())}return h.type==="affine"?v.toP():v},l.prototype._wnafMulAdd=function(h,d,p,g,m){var _,v,x,S=this._wnafT1,O=this._wnafT2,D=this._wnafT3,U=0;for(_=0;_<g;_++){var z=(x=d[_])._getNAFPoints(h);S[_]=z.wnd,O[_]=z.points}for(_=g-1;_>=1;_-=2){var V=_-1,G=_;if(S[V]===1&&S[G]===1){var tt=[d[V],null,null,d[G]];d[V].y.cmp(d[G].y)===0?(tt[1]=d[V].add(d[G]),tt[2]=d[V].toJ().mixedAdd(d[G].neg())):d[V].y.cmp(d[G].y.redNeg())===0?(tt[1]=d[V].toJ().mixedAdd(d[G]),tt[2]=d[V].add(d[G].neg())):(tt[1]=d[V].toJ().mixedAdd(d[G]),tt[2]=d[V].toJ().mixedAdd(d[G].neg()));var K=[-3,-1,-5,-7,0,7,5,1,3],B=a(p[V],p[G]);for(U=Math.max(B[0].length,U),D[V]=new Array(U),D[G]=new Array(U),v=0;v<U;v++){var N=0|B[0][v],Z=0|B[1][v];D[V][v]=K[3*(N+1)+(Z+1)],D[G][v]=0,O[V]=tt}}else D[V]=s(p[V],S[V],this._bitLength),D[G]=s(p[G],S[G],this._bitLength),U=Math.max(D[V].length,U),U=Math.max(D[G].length,U)}var w=this.jpoint(null,null,null),C=this._wnafT4;for(_=U;_>=0;_--){for(var k=0;_>=0;){var T=!0;for(v=0;v<g;v++)C[v]=0|D[v][_],C[v]!==0&&(T=!1);if(!T)break;k++,_--}if(_>=0&&k++,w=w.dblp(k),_<0)break;for(v=0;v<g;v++){var R=C[v];R!==0&&(R>0?x=O[v][R-1>>1]:R<0&&(x=O[v][-R-1>>1].neg()),w=x.type==="affine"?w.mixedAdd(x):w.add(x))}}for(_=0;_<g;_++)O[_]=null;return m?w:w.toP()},l.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},l.prototype.decodePoint=function(h,d){h=r.toArray(h,d);var p=this.p.byteLength();if((h[0]===4||h[0]===6||h[0]===7)&&h.length-1==2*p)return h[0]===6?o(h[h.length-1]%2==0):h[0]===7&&o(h[h.length-1]%2==1),this.point(h.slice(1,1+p),h.slice(1+p,1+2*p));if((h[0]===2||h[0]===3)&&h.length-1===p)return this.pointFromX(h.slice(1,1+p),h[0]===3);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(h){return this.encode(h,!0)},c.prototype._encode=function(h){var d=this.curve.p.byteLength(),p=this.getX().toArray("be",d);return h?[this.getY().isEven()?2:3].concat(p):[4].concat(p,this.getY().toArray("be",d))},c.prototype.encode=function(h,d){return r.encode(this._encode(d),h)},c.prototype.precompute=function(h){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,h),d.beta=this._getBeta(),this.precomputed=d,this},c.prototype._hasDoubles=function(h){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((h.bitLength()+1)/d.step)},c.prototype._getDoubles=function(h,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var p=[this],g=this,m=0;m<d;m+=h){for(var _=0;_<h;_++)g=g.dbl();p.push(g)}return{step:h,points:p}},c.prototype._getNAFPoints=function(h){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],p=(1<<h)-1,g=p===1?null:this.dbl(),m=1;m<p;m++)d[m]=d[m-1].add(g);return{wnd:h,points:d}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(h){for(var d=this,p=0;p<h;p++)d=d.dbl();return d}},{"../utils":419,"bn.js":420}],407:[function(n,t,e){"use strict";var i=n("../utils"),r=n("bn.js"),s=n("inherits"),a=n("./base"),o=i.assert;function l(h){this.twisted=(0|h.a)!=1,this.mOneA=this.twisted&&(0|h.a)==-1,this.extended=this.mOneA,a.call(this,"edwards",h),this.a=new r(h.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(h.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(h.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|h.c)==1}function c(h,d,p,g,m){a.BasePoint.call(this,h,"projective"),d===null&&p===null&&g===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(d,16),this.y=new r(p,16),this.z=g?new r(g,16):this.curve.one,this.t=m&&new r(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(l,a),t.exports=l,l.prototype._mulA=function(h){return this.mOneA?h.redNeg():this.a.redMul(h)},l.prototype._mulC=function(h){return this.oneC?h:this.c.redMul(h)},l.prototype.jpoint=function(h,d,p,g){return this.point(h,d,p,g)},l.prototype.pointFromX=function(h,d){(h=new r(h,16)).red||(h=h.toRed(this.red));var p=h.redSqr(),g=this.c2.redSub(this.a.redMul(p)),m=this.one.redSub(this.c2.redMul(this.d).redMul(p)),_=g.redMul(m.redInvm()),v=_.redSqrt();if(v.redSqr().redSub(_).cmp(this.zero)!==0)throw new Error("invalid point");var x=v.fromRed().isOdd();return(d&&!x||!d&&x)&&(v=v.redNeg()),this.point(h,v)},l.prototype.pointFromY=function(h,d){(h=new r(h,16)).red||(h=h.toRed(this.red));var p=h.redSqr(),g=p.redSub(this.c2),m=p.redMul(this.d).redMul(this.c2).redSub(this.a),_=g.redMul(m.redInvm());if(_.cmp(this.zero)===0){if(d)throw new Error("invalid point");return this.point(this.zero,h)}var v=_.redSqrt();if(v.redSqr().redSub(_).cmp(this.zero)!==0)throw new Error("invalid point");return v.fromRed().isOdd()!==d&&(v=v.redNeg()),this.point(v,h)},l.prototype.validate=function(h){if(h.isInfinity())return!0;h.normalize();var d=h.x.redSqr(),p=h.y.redSqr(),g=d.redMul(this.a).redAdd(p),m=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(p)));return g.cmp(m)===0},s(c,a.BasePoint),l.prototype.pointFromJSON=function(h){return c.fromJSON(this,h)},l.prototype.point=function(h,d,p,g){return new c(this,h,d,p,g)},c.fromJSON=function(h,d){return new c(h,d[0],d[1],d[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},c.prototype._extDbl=function(){var h=this.x.redSqr(),d=this.y.redSqr(),p=this.z.redSqr();p=p.redIAdd(p);var g=this.curve._mulA(h),m=this.x.redAdd(this.y).redSqr().redISub(h).redISub(d),_=g.redAdd(d),v=_.redSub(p),x=g.redSub(d),S=m.redMul(v),O=_.redMul(x),D=m.redMul(x),U=v.redMul(_);return this.curve.point(S,O,U,D)},c.prototype._projDbl=function(){var h,d,p,g,m,_,v=this.x.redAdd(this.y).redSqr(),x=this.x.redSqr(),S=this.y.redSqr();if(this.curve.twisted){var O=(g=this.curve._mulA(x)).redAdd(S);this.zOne?(h=v.redSub(x).redSub(S).redMul(O.redSub(this.curve.two)),d=O.redMul(g.redSub(S)),p=O.redSqr().redSub(O).redSub(O)):(m=this.z.redSqr(),_=O.redSub(m).redISub(m),h=v.redSub(x).redISub(S).redMul(_),d=O.redMul(g.redSub(S)),p=O.redMul(_))}else g=x.redAdd(S),m=this.curve._mulC(this.z).redSqr(),_=g.redSub(m).redSub(m),h=this.curve._mulC(v.redISub(g)).redMul(_),d=this.curve._mulC(g).redMul(x.redISub(S)),p=g.redMul(_);return this.curve.point(h,d,p)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(h){var d=this.y.redSub(this.x).redMul(h.y.redSub(h.x)),p=this.y.redAdd(this.x).redMul(h.y.redAdd(h.x)),g=this.t.redMul(this.curve.dd).redMul(h.t),m=this.z.redMul(h.z.redAdd(h.z)),_=p.redSub(d),v=m.redSub(g),x=m.redAdd(g),S=p.redAdd(d),O=_.redMul(v),D=x.redMul(S),U=_.redMul(S),z=v.redMul(x);return this.curve.point(O,D,z,U)},c.prototype._projAdd=function(h){var d,p,g=this.z.redMul(h.z),m=g.redSqr(),_=this.x.redMul(h.x),v=this.y.redMul(h.y),x=this.curve.d.redMul(_).redMul(v),S=m.redSub(x),O=m.redAdd(x),D=this.x.redAdd(this.y).redMul(h.x.redAdd(h.y)).redISub(_).redISub(v),U=g.redMul(S).redMul(D);return this.curve.twisted?(d=g.redMul(O).redMul(v.redSub(this.curve._mulA(_))),p=S.redMul(O)):(d=g.redMul(O).redMul(v.redSub(_)),p=this.curve._mulC(S).redMul(O)),this.curve.point(U,d,p)},c.prototype.add=function(h){return this.isInfinity()?h:h.isInfinity()?this:this.curve.extended?this._extAdd(h):this._projAdd(h)},c.prototype.mul=function(h){return this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve._wnafMul(this,h)},c.prototype.mulAdd=function(h,d,p){return this.curve._wnafMulAdd(1,[this,d],[h,p],2,!1)},c.prototype.jmulAdd=function(h,d,p){return this.curve._wnafMulAdd(1,[this,d],[h,p],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var h=this.z.redInvm();return this.x=this.x.redMul(h),this.y=this.y.redMul(h),this.t&&(this.t=this.t.redMul(h)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(h){return this===h||this.getX().cmp(h.getX())===0&&this.getY().cmp(h.getY())===0},c.prototype.eqXToP=function(h){var d=h.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(d)===0)return!0;for(var p=h.clone(),g=this.curve.redN.redMul(this.z);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(d.redIAdd(g),this.x.cmp(d)===0)return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(n,t,e){"use strict";var i=e;i.base=n("./base"),i.short=n("./short"),i.mont=n("./mont"),i.edwards=n("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(n,t,e){"use strict";var i=n("bn.js"),r=n("inherits"),s=n("./base"),a=n("../utils");function o(c){s.call(this,"mont",c),this.a=new i(c.a,16).toRed(this.red),this.b=new i(c.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(c,h,d){s.BasePoint.call(this,c,"projective"),h===null&&d===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(h,16),this.z=new i(d,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(o,s),t.exports=o,o.prototype.validate=function(c){var h=c.normalize().x,d=h.redSqr(),p=d.redMul(h).redAdd(d.redMul(this.a)).redAdd(h);return p.redSqrt().redSqr().cmp(p)===0},r(l,s.BasePoint),o.prototype.decodePoint=function(c,h){return this.point(a.toArray(c,h),1)},o.prototype.point=function(c,h){return new l(this,c,h)},o.prototype.pointFromJSON=function(c){return l.fromJSON(this,c)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(c,h){return new l(c,h[0],h[1]||c.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.z.cmpn(0)===0},l.prototype.dbl=function(){var c=this.x.redAdd(this.z).redSqr(),h=this.x.redSub(this.z).redSqr(),d=c.redSub(h),p=c.redMul(h),g=d.redMul(h.redAdd(this.curve.a24.redMul(d)));return this.curve.point(p,g)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(c,h){var d=this.x.redAdd(this.z),p=this.x.redSub(this.z),g=c.x.redAdd(c.z),m=c.x.redSub(c.z).redMul(d),_=g.redMul(p),v=h.z.redMul(m.redAdd(_).redSqr()),x=h.x.redMul(m.redISub(_).redSqr());return this.curve.point(v,x)},l.prototype.mul=function(c){for(var h=c.clone(),d=this,p=this.curve.point(null,null),g=[];h.cmpn(0)!==0;h.iushrn(1))g.push(h.andln(1));for(var m=g.length-1;m>=0;m--)g[m]===0?(d=d.diffAdd(p,this),p=p.dbl()):(p=d.diffAdd(p,this),d=d.dbl());return p},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(c){return this.getX().cmp(c.getX())===0},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(n,t,e){"use strict";var i=n("../utils"),r=n("bn.js"),s=n("inherits"),a=n("./base"),o=i.assert;function l(d){a.call(this,"short",d),this.a=new r(d.a,16).toRed(this.red),this.b=new r(d.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(d),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(d,p,g,m){a.BasePoint.call(this,d,"affine"),p===null&&g===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(p,16),this.y=new r(g,16),m&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(d,p,g,m){a.BasePoint.call(this,d,"jacobian"),p===null&&g===null&&m===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(p,16),this.y=new r(g,16),this.z=new r(m,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(l,a),t.exports=l,l.prototype._getEndomorphism=function(d){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var p,g;if(d.beta)p=new r(d.beta,16).toRed(this.red);else{var m=this._getEndoRoots(this.p);p=(p=m[0].cmp(m[1])<0?m[0]:m[1]).toRed(this.red)}if(d.lambda)g=new r(d.lambda,16);else{var _=this._getEndoRoots(this.n);this.g.mul(_[0]).x.cmp(this.g.x.redMul(p))===0?g=_[0]:(g=_[1],o(this.g.mul(g).x.cmp(this.g.x.redMul(p))===0))}return{beta:p,lambda:g,basis:d.basis?d.basis.map(function(v){return{a:new r(v.a,16),b:new r(v.b,16)}}):this._getEndoBasis(g)}}},l.prototype._getEndoRoots=function(d){var p=d===this.p?this.red:r.mont(d),g=new r(2).toRed(p).redInvm(),m=g.redNeg(),_=new r(3).toRed(p).redNeg().redSqrt().redMul(g);return[m.redAdd(_).fromRed(),m.redSub(_).fromRed()]},l.prototype._getEndoBasis=function(d){for(var p,g,m,_,v,x,S,O,D,U=this.n.ushrn(Math.floor(this.n.bitLength()/2)),z=d,V=this.n.clone(),G=new r(1),tt=new r(0),K=new r(0),B=new r(1),N=0;z.cmpn(0)!==0;){var Z=V.div(z);O=V.sub(Z.mul(z)),D=K.sub(Z.mul(G));var w=B.sub(Z.mul(tt));if(!m&&O.cmp(U)<0)p=S.neg(),g=G,m=O.neg(),_=D;else if(m&&++N==2)break;S=O,V=z,z=O,K=G,G=D,B=tt,tt=w}v=O.neg(),x=D;var C=m.sqr().add(_.sqr());return v.sqr().add(x.sqr()).cmp(C)>=0&&(v=p,x=g),m.negative&&(m=m.neg(),_=_.neg()),v.negative&&(v=v.neg(),x=x.neg()),[{a:m,b:_},{a:v,b:x}]},l.prototype._endoSplit=function(d){var p=this.endo.basis,g=p[0],m=p[1],_=m.b.mul(d).divRound(this.n),v=g.b.neg().mul(d).divRound(this.n),x=_.mul(g.a),S=v.mul(m.a),O=_.mul(g.b),D=v.mul(m.b);return{k1:d.sub(x).sub(S),k2:O.add(D).neg()}},l.prototype.pointFromX=function(d,p){(d=new r(d,16)).red||(d=d.toRed(this.red));var g=d.redSqr().redMul(d).redIAdd(d.redMul(this.a)).redIAdd(this.b),m=g.redSqrt();if(m.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var _=m.fromRed().isOdd();return(p&&!_||!p&&_)&&(m=m.redNeg()),this.point(d,m)},l.prototype.validate=function(d){if(d.inf)return!0;var p=d.x,g=d.y,m=this.a.redMul(p),_=p.redSqr().redMul(p).redIAdd(m).redIAdd(this.b);return g.redSqr().redISub(_).cmpn(0)===0},l.prototype._endoWnafMulAdd=function(d,p,g){for(var m=this._endoWnafT1,_=this._endoWnafT2,v=0;v<d.length;v++){var x=this._endoSplit(p[v]),S=d[v],O=S._getBeta();x.k1.negative&&(x.k1.ineg(),S=S.neg(!0)),x.k2.negative&&(x.k2.ineg(),O=O.neg(!0)),m[2*v]=S,m[2*v+1]=O,_[2*v]=x.k1,_[2*v+1]=x.k2}for(var D=this._wnafMulAdd(1,m,_,2*v,g),U=0;U<2*v;U++)m[U]=null,_[U]=null;return D},s(c,a.BasePoint),l.prototype.point=function(d,p,g){return new c(this,d,p,g)},l.prototype.pointFromJSON=function(d,p){return c.fromJSON(this,d,p)},c.prototype._getBeta=function(){if(this.curve.endo){var d=this.precomputed;if(d&&d.beta)return d.beta;var p=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(d){var g=this.curve,m=function(_){return g.point(_.x.redMul(g.endo.beta),_.y)};d.beta=p,p.precomputed={beta:null,naf:d.naf&&{wnd:d.naf.wnd,points:d.naf.points.map(m)},doubles:d.doubles&&{step:d.doubles.step,points:d.doubles.points.map(m)}}}return p}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(d,p,g){typeof p=="string"&&(p=JSON.parse(p));var m=d.point(p[0],p[1],g);if(!p[2])return m;function _(x){return d.point(x[0],x[1],g)}var v=p[2];return m.precomputed={beta:null,doubles:v.doubles&&{step:v.doubles.step,points:[m].concat(v.doubles.points.map(_))},naf:v.naf&&{wnd:v.naf.wnd,points:[m].concat(v.naf.points.map(_))}},m},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(d){if(this.inf)return d;if(d.inf)return this;if(this.eq(d))return this.dbl();if(this.neg().eq(d))return this.curve.point(null,null);if(this.x.cmp(d.x)===0)return this.curve.point(null,null);var p=this.y.redSub(d.y);p.cmpn(0)!==0&&(p=p.redMul(this.x.redSub(d.x).redInvm()));var g=p.redSqr().redISub(this.x).redISub(d.x),m=p.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,m)},c.prototype.dbl=function(){if(this.inf)return this;var d=this.y.redAdd(this.y);if(d.cmpn(0)===0)return this.curve.point(null,null);var p=this.curve.a,g=this.x.redSqr(),m=d.redInvm(),_=g.redAdd(g).redIAdd(g).redIAdd(p).redMul(m),v=_.redSqr().redISub(this.x.redAdd(this.x)),x=_.redMul(this.x.redSub(v)).redISub(this.y);return this.curve.point(v,x)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(d){return d=new r(d,16),this.isInfinity()?this:this._hasDoubles(d)?this.curve._fixedNafMul(this,d):this.curve.endo?this.curve._endoWnafMulAdd([this],[d]):this.curve._wnafMul(this,d)},c.prototype.mulAdd=function(d,p,g){var m=[this,p],_=[d,g];return this.curve.endo?this.curve._endoWnafMulAdd(m,_):this.curve._wnafMulAdd(1,m,_,2)},c.prototype.jmulAdd=function(d,p,g){var m=[this,p],_=[d,g];return this.curve.endo?this.curve._endoWnafMulAdd(m,_,!0):this.curve._wnafMulAdd(1,m,_,2,!0)},c.prototype.eq=function(d){return this===d||this.inf===d.inf&&(this.inf||this.x.cmp(d.x)===0&&this.y.cmp(d.y)===0)},c.prototype.neg=function(d){if(this.inf)return this;var p=this.curve.point(this.x,this.y.redNeg());if(d&&this.precomputed){var g=this.precomputed,m=function(_){return _.neg()};p.precomputed={naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(m)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(m)}}}return p},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(h,a.BasePoint),l.prototype.jpoint=function(d,p,g){return new h(this,d,p,g)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var d=this.z.redInvm(),p=d.redSqr(),g=this.x.redMul(p),m=this.y.redMul(p).redMul(d);return this.curve.point(g,m)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(d){if(this.isInfinity())return d;if(d.isInfinity())return this;var p=d.z.redSqr(),g=this.z.redSqr(),m=this.x.redMul(p),_=d.x.redMul(g),v=this.y.redMul(p.redMul(d.z)),x=d.y.redMul(g.redMul(this.z)),S=m.redSub(_),O=v.redSub(x);if(S.cmpn(0)===0)return O.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var D=S.redSqr(),U=D.redMul(S),z=m.redMul(D),V=O.redSqr().redIAdd(U).redISub(z).redISub(z),G=O.redMul(z.redISub(V)).redISub(v.redMul(U)),tt=this.z.redMul(d.z).redMul(S);return this.curve.jpoint(V,G,tt)},h.prototype.mixedAdd=function(d){if(this.isInfinity())return d.toJ();if(d.isInfinity())return this;var p=this.z.redSqr(),g=this.x,m=d.x.redMul(p),_=this.y,v=d.y.redMul(p).redMul(this.z),x=g.redSub(m),S=_.redSub(v);if(x.cmpn(0)===0)return S.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var O=x.redSqr(),D=O.redMul(x),U=g.redMul(O),z=S.redSqr().redIAdd(D).redISub(U).redISub(U),V=S.redMul(U.redISub(z)).redISub(_.redMul(D)),G=this.z.redMul(x);return this.curve.jpoint(z,V,G)},h.prototype.dblp=function(d){if(d===0)return this;if(this.isInfinity())return this;if(!d)return this.dbl();var p;if(this.curve.zeroA||this.curve.threeA){var g=this;for(p=0;p<d;p++)g=g.dbl();return g}var m=this.curve.a,_=this.curve.tinv,v=this.x,x=this.y,S=this.z,O=S.redSqr().redSqr(),D=x.redAdd(x);for(p=0;p<d;p++){var U=v.redSqr(),z=D.redSqr(),V=z.redSqr(),G=U.redAdd(U).redIAdd(U).redIAdd(m.redMul(O)),tt=v.redMul(z),K=G.redSqr().redISub(tt.redAdd(tt)),B=tt.redISub(K),N=G.redMul(B);N=N.redIAdd(N).redISub(V);var Z=D.redMul(S);p+1<d&&(O=O.redMul(V)),v=K,S=Z,D=N}return this.curve.jpoint(v,D.redMul(_),S)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var d,p,g;if(this.zOne){var m=this.x.redSqr(),_=this.y.redSqr(),v=_.redSqr(),x=this.x.redAdd(_).redSqr().redISub(m).redISub(v);x=x.redIAdd(x);var S=m.redAdd(m).redIAdd(m),O=S.redSqr().redISub(x).redISub(x),D=v.redIAdd(v);D=(D=D.redIAdd(D)).redIAdd(D),d=O,p=S.redMul(x.redISub(O)).redISub(D),g=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),z=this.y.redSqr(),V=z.redSqr(),G=this.x.redAdd(z).redSqr().redISub(U).redISub(V);G=G.redIAdd(G);var tt=U.redAdd(U).redIAdd(U),K=tt.redSqr(),B=V.redIAdd(V);B=(B=B.redIAdd(B)).redIAdd(B),d=K.redISub(G).redISub(G),p=tt.redMul(G.redISub(d)).redISub(B),g=(g=this.y.redMul(this.z)).redIAdd(g)}return this.curve.jpoint(d,p,g)},h.prototype._threeDbl=function(){var d,p,g;if(this.zOne){var m=this.x.redSqr(),_=this.y.redSqr(),v=_.redSqr(),x=this.x.redAdd(_).redSqr().redISub(m).redISub(v);x=x.redIAdd(x);var S=m.redAdd(m).redIAdd(m).redIAdd(this.curve.a),O=S.redSqr().redISub(x).redISub(x);d=O;var D=v.redIAdd(v);D=(D=D.redIAdd(D)).redIAdd(D),p=S.redMul(x.redISub(O)).redISub(D),g=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),z=this.y.redSqr(),V=this.x.redMul(z),G=this.x.redSub(U).redMul(this.x.redAdd(U));G=G.redAdd(G).redIAdd(G);var tt=V.redIAdd(V),K=(tt=tt.redIAdd(tt)).redAdd(tt);d=G.redSqr().redISub(K),g=this.y.redAdd(this.z).redSqr().redISub(z).redISub(U);var B=z.redSqr();B=(B=(B=B.redIAdd(B)).redIAdd(B)).redIAdd(B),p=G.redMul(tt.redISub(d)).redISub(B)}return this.curve.jpoint(d,p,g)},h.prototype._dbl=function(){var d=this.curve.a,p=this.x,g=this.y,m=this.z,_=m.redSqr().redSqr(),v=p.redSqr(),x=g.redSqr(),S=v.redAdd(v).redIAdd(v).redIAdd(d.redMul(_)),O=p.redAdd(p),D=(O=O.redIAdd(O)).redMul(x),U=S.redSqr().redISub(D.redAdd(D)),z=D.redISub(U),V=x.redSqr();V=(V=(V=V.redIAdd(V)).redIAdd(V)).redIAdd(V);var G=S.redMul(z).redISub(V),tt=g.redAdd(g).redMul(m);return this.curve.jpoint(U,G,tt)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var d=this.x.redSqr(),p=this.y.redSqr(),g=this.z.redSqr(),m=p.redSqr(),_=d.redAdd(d).redIAdd(d),v=_.redSqr(),x=this.x.redAdd(p).redSqr().redISub(d).redISub(m),S=(x=(x=(x=x.redIAdd(x)).redAdd(x).redIAdd(x)).redISub(v)).redSqr(),O=m.redIAdd(m);O=(O=(O=O.redIAdd(O)).redIAdd(O)).redIAdd(O);var D=_.redIAdd(x).redSqr().redISub(v).redISub(S).redISub(O),U=p.redMul(D);U=(U=U.redIAdd(U)).redIAdd(U);var z=this.x.redMul(S).redISub(U);z=(z=z.redIAdd(z)).redIAdd(z);var V=this.y.redMul(D.redMul(O.redISub(D)).redISub(x.redMul(S)));V=(V=(V=V.redIAdd(V)).redIAdd(V)).redIAdd(V);var G=this.z.redAdd(x).redSqr().redISub(g).redISub(S);return this.curve.jpoint(z,V,G)},h.prototype.mul=function(d,p){return d=new r(d,p),this.curve._wnafMul(this,d)},h.prototype.eq=function(d){if(d.type==="affine")return this.eq(d.toJ());if(this===d)return!0;var p=this.z.redSqr(),g=d.z.redSqr();if(this.x.redMul(g).redISub(d.x.redMul(p)).cmpn(0)!==0)return!1;var m=p.redMul(this.z),_=g.redMul(d.z);return this.y.redMul(_).redISub(d.y.redMul(m)).cmpn(0)===0},h.prototype.eqXToP=function(d){var p=this.z.redSqr(),g=d.toRed(this.curve.red).redMul(p);if(this.x.cmp(g)===0)return!0;for(var m=d.clone(),_=this.curve.redN.redMul(p);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(_),this.x.cmp(g)===0)return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(n,t,e){"use strict";var i,r=e,s=n("hash.js"),a=n("./curve"),o=n("./utils").assert;function l(h){h.type==="short"?this.curve=new a.short(h):h.type==="edwards"?this.curve=new a.edwards(h):this.curve=new a.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(h,d){Object.defineProperty(r,h,{configurable:!0,enumerable:!0,get:function(){var p=new l(d);return Object.defineProperty(r,h,{configurable:!0,enumerable:!0,value:p}),p}})}r.PresetCurve=l,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=n("./precomputed/secp256k1")}catch{i=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(n,t,e){"use strict";var i=n("bn.js"),r=n("hmac-drbg"),s=n("../utils"),a=n("../curves"),o=n("brorand"),l=s.assert,c=n("./key"),h=n("./signature");function d(p){if(!(this instanceof d))return new d(p);typeof p=="string"&&(l(Object.prototype.hasOwnProperty.call(a,p),"Unknown curve "+p),p=a[p]),p instanceof a.PresetCurve&&(p={curve:p}),this.curve=p.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=p.curve.g,this.g.precompute(p.curve.n.bitLength()+1),this.hash=p.hash||p.curve.hash}t.exports=d,d.prototype.keyPair=function(p){return new c(this,p)},d.prototype.keyFromPrivate=function(p,g){return c.fromPrivate(this,p,g)},d.prototype.keyFromPublic=function(p,g){return c.fromPublic(this,p,g)},d.prototype.genKeyPair=function(p){p||(p={});for(var g=new r({hash:this.hash,pers:p.pers,persEnc:p.persEnc||"utf8",entropy:p.entropy||o(this.hash.hmacStrength),entropyEnc:p.entropy&&p.entropyEnc||"utf8",nonce:this.n.toArray()}),m=this.n.byteLength(),_=this.n.sub(new i(2));;){var v=new i(g.generate(m));if(!(v.cmp(_)>0))return v.iaddn(1),this.keyFromPrivate(v)}},d.prototype._truncateToN=function(p,g){var m=8*p.byteLength()-this.n.bitLength();return m>0&&(p=p.ushrn(m)),!g&&p.cmp(this.n)>=0?p.sub(this.n):p},d.prototype.sign=function(p,g,m,_){typeof m=="object"&&(_=m,m=null),_||(_={}),g=this.keyFromPrivate(g,m),p=this._truncateToN(new i(p,16));for(var v=this.n.byteLength(),x=g.getPrivate().toArray("be",v),S=p.toArray("be",v),O=new r({hash:this.hash,entropy:x,nonce:S,pers:_.pers,persEnc:_.persEnc||"utf8"}),D=this.n.sub(new i(1)),U=0;;U++){var z=_.k?_.k(U):new i(O.generate(this.n.byteLength()));if(!((z=this._truncateToN(z,!0)).cmpn(1)<=0||z.cmp(D)>=0)){var V=this.g.mul(z);if(!V.isInfinity()){var G=V.getX(),tt=G.umod(this.n);if(tt.cmpn(0)!==0){var K=z.invm(this.n).mul(tt.mul(g.getPrivate()).iadd(p));if((K=K.umod(this.n)).cmpn(0)!==0){var B=(V.getY().isOdd()?1:0)|(G.cmp(tt)!==0?2:0);return _.canonical&&K.cmp(this.nh)>0&&(K=this.n.sub(K),B^=1),new h({r:tt,s:K,recoveryParam:B})}}}}}},d.prototype.verify=function(p,g,m,_){p=this._truncateToN(new i(p,16)),m=this.keyFromPublic(m,_);var v=(g=new h(g,"hex")).r,x=g.s;if(v.cmpn(1)<0||v.cmp(this.n)>=0||x.cmpn(1)<0||x.cmp(this.n)>=0)return!1;var S,O=x.invm(this.n),D=O.mul(p).umod(this.n),U=O.mul(v).umod(this.n);return this.curve._maxwellTrick?!(S=this.g.jmulAdd(D,m.getPublic(),U)).isInfinity()&&S.eqXToP(v):!(S=this.g.mulAdd(D,m.getPublic(),U)).isInfinity()&&S.getX().umod(this.n).cmp(v)===0},d.prototype.recoverPubKey=function(p,g,m,_){l((3&m)===m,"The recovery param is more than two bits"),g=new h(g,_);var v=this.n,x=new i(p),S=g.r,O=g.s,D=1&m,U=m>>1;if(S.cmp(this.curve.p.umod(this.curve.n))>=0&&U)throw new Error("Unable to find sencond key candinate");S=U?this.curve.pointFromX(S.add(this.curve.n),D):this.curve.pointFromX(S,D);var z=g.r.invm(v),V=v.sub(x).mul(z).umod(v),G=O.mul(z).umod(v);return this.g.mulAdd(V,S,G)},d.prototype.getKeyRecoveryParam=function(p,g,m,_){if((g=new h(g,_)).recoveryParam!==null)return g.recoveryParam;for(var v=0;v<4;v++){var x;try{x=this.recoverPubKey(p,g,v)}catch{continue}if(x.eq(m))return v}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(n,t,e){"use strict";var i=n("bn.js"),r=n("../utils").assert;function s(a,o){this.ec=a,this.priv=null,this.pub=null,o.priv&&this._importPrivate(o.priv,o.privEnc),o.pub&&this._importPublic(o.pub,o.pubEnc)}t.exports=s,s.fromPublic=function(a,o,l){return o instanceof s?o:new s(a,{pub:o,pubEnc:l})},s.fromPrivate=function(a,o,l){return o instanceof s?o:new s(a,{priv:o,privEnc:l})},s.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(a,o){return typeof a=="string"&&(o=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),o?this.pub.encode(o,a):this.pub},s.prototype.getPrivate=function(a){return a==="hex"?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(a,o){this.priv=new i(a,o||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(a,o){if(a.x||a.y)return this.ec.curve.type==="mont"?r(a.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||r(a.x&&a.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(a.x,a.y));this.pub=this.ec.curve.decodePoint(a,o)},s.prototype.derive=function(a){return a.validate()||r(a.validate(),"public point not validated"),a.mul(this.priv).getX()},s.prototype.sign=function(a,o,l){return this.ec.sign(a,this,o,l)},s.prototype.verify=function(a,o){return this.ec.verify(a,o,this)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(n,t,e){"use strict";var i=n("bn.js"),r=n("../utils"),s=r.assert;function a(d,p){if(d instanceof a)return d;this._importDER(d,p)||(s(d.r&&d.s,"Signature without r or s"),this.r=new i(d.r,16),this.s=new i(d.s,16),d.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=d.recoveryParam)}function o(){this.place=0}function l(d,p){var g=d[p.place++];if(!(128&g))return g;var m=15&g;if(m===0||m>4)return!1;for(var _=0,v=0,x=p.place;v<m;v++,x++)_<<=8,_|=d[x],_>>>=0;return!(_<=127)&&(p.place=x,_)}function c(d){for(var p=0,g=d.length-1;!d[p]&&!(128&d[p+1])&&p<g;)p++;return p===0?d:d.slice(p)}function h(d,p){if(p<128)d.push(p);else{var g=1+(Math.log(p)/Math.LN2>>>3);for(d.push(128|g);--g;)d.push(p>>>(g<<3)&255);d.push(p)}}t.exports=a,a.prototype._importDER=function(d,p){d=r.toArray(d,p);var g=new o;if(d[g.place++]!==48)return!1;var m=l(d,g);if(m===!1||m+g.place!==d.length||d[g.place++]!==2)return!1;var _=l(d,g);if(_===!1)return!1;var v=d.slice(g.place,_+g.place);if(g.place+=_,d[g.place++]!==2)return!1;var x=l(d,g);if(x===!1||d.length!==x+g.place)return!1;var S=d.slice(g.place,x+g.place);if(v[0]===0){if(!(128&v[1]))return!1;v=v.slice(1)}if(S[0]===0){if(!(128&S[1]))return!1;S=S.slice(1)}return this.r=new i(v),this.s=new i(S),this.recoveryParam=null,!0},a.prototype.toDER=function(d){var p=this.r.toArray(),g=this.s.toArray();for(128&p[0]&&(p=[0].concat(p)),128&g[0]&&(g=[0].concat(g)),p=c(p),g=c(g);!(g[0]||128&g[1]);)g=g.slice(1);var m=[2];h(m,p.length),(m=m.concat(p)).push(2),h(m,g.length);var _=m.concat(g),v=[48];return h(v,_.length),v=v.concat(_),r.encode(v,d)}},{"../utils":419,"bn.js":420}],415:[function(n,t,e){"use strict";var i=n("hash.js"),r=n("../curves"),s=n("../utils"),a=s.assert,o=s.parseBytes,l=n("./key"),c=n("./signature");function h(d){if(a(d==="ed25519","only tested with ed25519 so far"),!(this instanceof h))return new h(d);d=r[d].curve,this.curve=d,this.g=d.g,this.g.precompute(d.n.bitLength()+1),this.pointClass=d.point().constructor,this.encodingLength=Math.ceil(d.n.bitLength()/8),this.hash=i.sha512}t.exports=h,h.prototype.sign=function(d,p){d=o(d);var g=this.keyFromSecret(p),m=this.hashInt(g.messagePrefix(),d),_=this.g.mul(m),v=this.encodePoint(_),x=this.hashInt(v,g.pubBytes(),d).mul(g.priv()),S=m.add(x).umod(this.curve.n);return this.makeSignature({R:_,S,Rencoded:v})},h.prototype.verify=function(d,p,g){d=o(d),p=this.makeSignature(p);var m=this.keyFromPublic(g),_=this.hashInt(p.Rencoded(),m.pubBytes(),d),v=this.g.mul(p.S());return p.R().add(m.pub().mul(_)).eq(v)},h.prototype.hashInt=function(){for(var d=this.hash(),p=0;p<arguments.length;p++)d.update(arguments[p]);return s.intFromLE(d.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(d){return l.fromPublic(this,d)},h.prototype.keyFromSecret=function(d){return l.fromSecret(this,d)},h.prototype.makeSignature=function(d){return d instanceof c?d:new c(this,d)},h.prototype.encodePoint=function(d){var p=d.getY().toArray("le",this.encodingLength);return p[this.encodingLength-1]|=d.getX().isOdd()?128:0,p},h.prototype.decodePoint=function(d){var p=(d=s.parseBytes(d)).length-1,g=d.slice(0,p).concat(-129&d[p]),m=(128&d[p])!=0,_=s.intFromLE(g);return this.curve.pointFromY(_,m)},h.prototype.encodeInt=function(d){return d.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(d){return s.intFromLE(d)},h.prototype.isPoint=function(d){return d instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(n,t,e){"use strict";var i=n("../utils"),r=i.assert,s=i.parseBytes,a=i.cachedProperty;function o(l,c){this.eddsa=l,this._secret=s(c.secret),l.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=s(c.pub)}o.fromPublic=function(l,c){return c instanceof o?c:new o(l,{pub:c})},o.fromSecret=function(l,c){return c instanceof o?c:new o(l,{secret:c})},o.prototype.secret=function(){return this._secret},a(o,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),a(o,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),a(o,"privBytes",function(){var l=this.eddsa,c=this.hash(),h=l.encodingLength-1,d=c.slice(0,l.encodingLength);return d[0]&=248,d[h]&=127,d[h]|=64,d}),a(o,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),a(o,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),a(o,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),o.prototype.sign=function(l){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(l,this)},o.prototype.verify=function(l,c){return this.eddsa.verify(l,c,this)},o.prototype.getSecret=function(l){return r(this._secret,"KeyPair is public only"),i.encode(this.secret(),l)},o.prototype.getPublic=function(l){return i.encode(this.pubBytes(),l)},t.exports=o},{"../utils":419}],417:[function(n,t,e){"use strict";var i=n("bn.js"),r=n("../utils"),s=r.assert,a=r.cachedProperty,o=r.parseBytes;function l(c,h){this.eddsa=c,typeof h!="object"&&(h=o(h)),Array.isArray(h)&&(h={R:h.slice(0,c.encodingLength),S:h.slice(c.encodingLength)}),s(h.R&&h.S,"Signature without R or S"),c.isPoint(h.R)&&(this._R=h.R),h.S instanceof i&&(this._S=h.S),this._Rencoded=Array.isArray(h.R)?h.R:h.Rencoded,this._Sencoded=Array.isArray(h.S)?h.S:h.Sencoded}a(l,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),a(l,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),a(l,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),a(l,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),l.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},l.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},t.exports=l},{"../utils":419,"bn.js":420}],418:[function(n,t,e){"use strict";t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(n,t,e){"use strict";var i=e,r=n("bn.js"),s=n("minimalistic-assert"),a=n("minimalistic-crypto-utils");i.assert=s,i.toArray=a.toArray,i.zero2=a.zero2,i.toHex=a.toHex,i.encode=a.encode,i.getNAF=function(o,l,c){var h=new Array(Math.max(o.bitLength(),c)+1);h.fill(0);for(var d=1<<l+1,p=o.clone(),g=0;g<h.length;g++){var m,_=p.andln(d-1);p.isOdd()?(m=_>(d>>1)-1?(d>>1)-_:_,p.isubn(m)):m=0,h[g]=m,p.iushrn(1)}return h},i.getJSF=function(o,l){var c=[[],[]];o=o.clone(),l=l.clone();for(var h,d=0,p=0;o.cmpn(-d)>0||l.cmpn(-p)>0;){var g,m,_=o.andln(3)+d&3,v=l.andln(3)+p&3;_===3&&(_=-1),v===3&&(v=-1),g=1&_?(h=o.andln(7)+d&7)!==3&&h!==5||v!==2?_:-_:0,c[0].push(g),m=1&v?(h=l.andln(7)+p&7)!==3&&h!==5||_!==2?v:-v:0,c[1].push(m),2*d===g+1&&(d=1-d),2*p===m+1&&(p=1-p),o.iushrn(1),l.iushrn(1)}return c},i.cachedProperty=function(o,l,c){var h="_"+l;o.prototype[l]=function(){return this[h]!==void 0?this[h]:this[h]=c.call(this)}},i.parseBytes=function(o){return typeof o=="string"?i.toArray(o,"hex"):o},i.intFromLE=function(o){return new r(o,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],421:[function(n,t,e){t.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(n,t,e){"use strict";var i=Object.create||function(z){var V=function(){};return V.prototype=z,new V},r=Object.keys||function(z){var V=[];for(var G in z)Object.prototype.hasOwnProperty.call(z,G)&&V.push(G);return G},s=Function.prototype.bind||function(z){var V=this;return function(){return V.apply(z,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var o,l=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=c.x===0}catch{o=!1}function h(z){return z._maxListeners===void 0?a.defaultMaxListeners:z._maxListeners}function d(z,V,G){if(V)z.call(G);else for(var tt=z.length,K=U(z,tt),B=0;B<tt;++B)K[B].call(G)}function p(z,V,G,tt){if(V)z.call(G,tt);else for(var K=z.length,B=U(z,K),N=0;N<K;++N)B[N].call(G,tt)}function g(z,V,G,tt,K){if(V)z.call(G,tt,K);else for(var B=z.length,N=U(z,B),Z=0;Z<B;++Z)N[Z].call(G,tt,K)}function m(z,V,G,tt,K,B){if(V)z.call(G,tt,K,B);else for(var N=z.length,Z=U(z,N),w=0;w<N;++w)Z[w].call(G,tt,K,B)}function _(z,V,G,tt){if(V)z.apply(G,tt);else for(var K=z.length,B=U(z,K),N=0;N<K;++N)B[N].apply(G,tt)}function v(z,V,G,tt){var K,B,N;if(typeof G!="function")throw new TypeError('"listener" argument must be a function');if((B=z._events)?(B.newListener&&(z.emit("newListener",V,G.listener?G.listener:G),B=z._events),N=B[V]):(B=z._events=i(null),z._eventsCount=0),N){if(typeof N=="function"?N=B[V]=tt?[G,N]:[N,G]:tt?N.unshift(G):N.push(G),!N.warned&&(K=h(z))&&K>0&&N.length>K){N.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+N.length+' "'+String(V)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');Z.name="MaxListenersExceededWarning",Z.emitter=z,Z.type=V,Z.count=N.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",Z.name,Z.message)}}else N=B[V]=G,++z._eventsCount;return z}function x(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var z=new Array(arguments.length),V=0;V<z.length;++V)z[V]=arguments[V];this.listener.apply(this.target,z)}}function S(z,V,G){var tt={fired:!1,wrapFn:void 0,target:z,type:V,listener:G},K=s.call(x,tt);return K.listener=G,tt.wrapFn=K,K}function O(z,V,G){var tt=z._events;if(!tt)return[];var K=tt[V];return K?typeof K=="function"?G?[K.listener||K]:[K]:G?function(B){for(var N=new Array(B.length),Z=0;Z<N.length;++Z)N[Z]=B[Z].listener||B[Z];return N}(K):U(K,K.length):[]}function D(z){var V=this._events;if(V){var G=V[z];if(typeof G=="function")return 1;if(G)return G.length}return 0}function U(z,V){for(var G=new Array(V),tt=0;tt<V;++tt)G[tt]=z[tt];return G}o?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(z){if(typeof z!="number"||z<0||z!=z)throw new TypeError('"defaultMaxListeners" must be a positive number');l=z}}):a.defaultMaxListeners=l,a.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||isNaN(z))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=z,this},a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(z){var V,G,tt,K,B,N,Z=z==="error";if(N=this._events)Z=Z&&N.error==null;else if(!Z)return!1;if(Z){if(arguments.length>1&&(V=arguments[1]),V instanceof Error)throw V;var w=new Error('Unhandled "error" event. ('+V+")");throw w.context=V,w}if(!(G=N[z]))return!1;var C=typeof G=="function";switch(tt=arguments.length){case 1:d(G,C,this);break;case 2:p(G,C,this,arguments[1]);break;case 3:g(G,C,this,arguments[1],arguments[2]);break;case 4:m(G,C,this,arguments[1],arguments[2],arguments[3]);break;default:for(K=new Array(tt-1),B=1;B<tt;B++)K[B-1]=arguments[B];_(G,C,this,K)}return!0},a.prototype.addListener=function(z,V){return v(this,z,V,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(z,V){return v(this,z,V,!0)},a.prototype.once=function(z,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.on(z,S(this,z,V)),this},a.prototype.prependOnceListener=function(z,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(z,S(this,z,V)),this},a.prototype.removeListener=function(z,V){var G,tt,K,B,N;if(typeof V!="function")throw new TypeError('"listener" argument must be a function');if(!(tt=this._events))return this;if(!(G=tt[z]))return this;if(G===V||G.listener===V)--this._eventsCount==0?this._events=i(null):(delete tt[z],tt.removeListener&&this.emit("removeListener",z,G.listener||V));else if(typeof G!="function"){for(K=-1,B=G.length-1;B>=0;B--)if(G[B]===V||G[B].listener===V){N=G[B].listener,K=B;break}if(K<0)return this;K===0?G.shift():function(Z,w){for(var C=w,k=C+1,T=Z.length;k<T;C+=1,k+=1)Z[C]=Z[k];Z.pop()}(G,K),G.length===1&&(tt[z]=G[0]),tt.removeListener&&this.emit("removeListener",z,N||V)}return this},a.prototype.removeAllListeners=function(z){var V,G,tt;if(!(G=this._events))return this;if(!G.removeListener)return arguments.length===0?(this._events=i(null),this._eventsCount=0):G[z]&&(--this._eventsCount==0?this._events=i(null):delete G[z]),this;if(arguments.length===0){var K,B=r(G);for(tt=0;tt<B.length;++tt)(K=B[tt])!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if(typeof(V=G[z])=="function")this.removeListener(z,V);else if(V)for(tt=V.length-1;tt>=0;tt--)this.removeListener(z,V[tt]);return this},a.prototype.listeners=function(z){return O(this,z,!0)},a.prototype.rawListeners=function(z){return O(this,z,!1)},a.listenerCount=function(z,V){return typeof z.listenerCount=="function"?z.listenerCount(V):D.call(z,V)},a.prototype.listenerCount=D,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=n("md5.js");t.exports=function(s,a,o,l){if(i.isBuffer(s)||(s=i.from(s,"binary")),a&&(i.isBuffer(a)||(a=i.from(a,"binary")),a.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var c=o/8,h=i.alloc(c),d=i.alloc(l||0),p=i.alloc(0);c>0||l>0;){var g=new r;g.update(p),g.update(s),a&&g.update(a),p=g.digest();var m=0;if(c>0){var _=h.length-c;m=Math.min(c,p.length),p.copy(h,_,0,m),c-=m}if(m<p.length&&l>0){var v=d.length-l,x=Math.min(l,p.length-m);p.copy(d,v,m,m+x),l-=x}}return p.fill(0),{key:h,iv:d}}},{"md5.js":450,"safe-buffer":494}],424:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CsvParserStream=e.ParserOptions=e.parseFile=e.parseStream=e.parseString=e.parse=e.FormatterOptions=e.CsvFormatterStream=e.writeToPath=e.writeToString=e.writeToBuffer=e.writeToStream=e.write=e.format=void 0;var i=n("@fast-csv/format");Object.defineProperty(e,"format",{enumerable:!0,get:function(){return i.format}}),Object.defineProperty(e,"write",{enumerable:!0,get:function(){return i.write}}),Object.defineProperty(e,"writeToStream",{enumerable:!0,get:function(){return i.writeToStream}}),Object.defineProperty(e,"writeToBuffer",{enumerable:!0,get:function(){return i.writeToBuffer}}),Object.defineProperty(e,"writeToString",{enumerable:!0,get:function(){return i.writeToString}}),Object.defineProperty(e,"writeToPath",{enumerable:!0,get:function(){return i.writeToPath}}),Object.defineProperty(e,"CsvFormatterStream",{enumerable:!0,get:function(){return i.CsvFormatterStream}}),Object.defineProperty(e,"FormatterOptions",{enumerable:!0,get:function(){return i.FormatterOptions}});var r=n("@fast-csv/parse");Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return r.parse}}),Object.defineProperty(e,"parseString",{enumerable:!0,get:function(){return r.parseString}}),Object.defineProperty(e,"parseStream",{enumerable:!0,get:function(){return r.parseStream}}),Object.defineProperty(e,"parseFile",{enumerable:!0,get:function(){return r.parseFile}}),Object.defineProperty(e,"ParserOptions",{enumerable:!0,get:function(){return r.ParserOptions}}),Object.defineProperty(e,"CsvParserStream",{enumerable:!0,get:function(){return r.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=n("readable-stream").Transform;function s(a){r.call(this),this._block=i.allocUnsafe(a),this._blockSize=a,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n("inherits")(s,r),s.prototype._transform=function(a,o,l){var c=null;try{this.update(a,o)}catch(h){c=h}l(c)},s.prototype._flush=function(a){var o=null;try{this.push(this.digest())}catch(l){o=l}a(o)},s.prototype.update=function(a,o){if(function(g,m){if(!i.isBuffer(g)&&typeof g!="string")throw new TypeError(m+" must be a string or a buffer")}(a,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(a)||(a=i.from(a,o));for(var l=this._block,c=0;this._blockOffset+a.length-c>=this._blockSize;){for(var h=this._blockOffset;h<this._blockSize;)l[h++]=a[c++];this._update(),this._blockOffset=0}for(;c<a.length;)l[this._blockOffset++]=a[c++];for(var d=0,p=8*a.length;p>0;++d)this._length[d]+=p,(p=this._length[d]/4294967296|0)>0&&(this._length[d]-=4294967296*p);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(a){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var o=this._digest();a!==void 0&&(o=o.toString(a)),this._block.fill(0),this._blockOffset=0;for(var l=0;l<4;++l)this._length[l]=0;return o},s.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=s},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(n,t,e){"use strict";var i=e;i.utils=n("./hash/utils"),i.common=n("./hash/common"),i.sha=n("./hash/sha"),i.ripemd=n("./hash/ripemd"),i.hmac=n("./hash/hmac"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(n,t,e){"use strict";var i=n("./utils"),r=n("minimalistic-assert");function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=s,s.prototype.update=function(a,o){if(a=i.toArray(a,o),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){var l=(a=this.pending).length%this._delta8;this.pending=a.slice(a.length-l,a.length),this.pending.length===0&&(this.pending=null),a=i.join32(a,0,a.length-l,this.endian);for(var c=0;c<a.length;c+=this._delta32)this._update(a,c,c+this._delta32)}return this},s.prototype.digest=function(a){return this.update(this._pad()),r(this.pending===null),this._digest(a)},s.prototype._pad=function(){var a=this.pendingTotal,o=this._delta8,l=o-(a+this.padLength)%o,c=new Array(l+this.padLength);c[0]=128;for(var h=1;h<l;h++)c[h]=0;if(a<<=3,this.endian==="big"){for(var d=8;d<this.padLength;d++)c[h++]=0;c[h++]=0,c[h++]=0,c[h++]=0,c[h++]=0,c[h++]=a>>>24&255,c[h++]=a>>>16&255,c[h++]=a>>>8&255,c[h++]=255&a}else for(c[h++]=255&a,c[h++]=a>>>8&255,c[h++]=a>>>16&255,c[h++]=a>>>24&255,c[h++]=0,c[h++]=0,c[h++]=0,c[h++]=0,d=8;d<this.padLength;d++)c[h++]=0;return c}},{"./utils":437,"minimalistic-assert":453}],428:[function(n,t,e){"use strict";var i=n("./utils"),r=n("minimalistic-assert");function s(a,o,l){if(!(this instanceof s))return new s(a,o,l);this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(o,l))}t.exports=s,s.prototype._init=function(a){a.length>this.blockSize&&(a=new this.Hash().update(a).digest()),r(a.length<=this.blockSize);for(var o=a.length;o<this.blockSize;o++)a.push(0);for(o=0;o<a.length;o++)a[o]^=54;for(this.inner=new this.Hash().update(a),o=0;o<a.length;o++)a[o]^=106;this.outer=new this.Hash().update(a)},s.prototype.update=function(a,o){return this.inner.update(a,o),this},s.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)}},{"./utils":437,"minimalistic-assert":453}],429:[function(n,t,e){"use strict";var i=n("./utils"),r=n("./common"),s=i.rotl32,a=i.sum32,o=i.sum32_3,l=i.sum32_4,c=r.BlockHash;function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(S,O,D,U){return S<=15?O^D^U:S<=31?O&D|~O&U:S<=47?(O|~D)^U:S<=63?O&U|D&~U:O^(D|~U)}function p(S){return S<=15?0:S<=31?1518500249:S<=47?1859775393:S<=63?2400959708:2840853838}function g(S){return S<=15?1352829926:S<=31?1548603684:S<=47?1836072691:S<=63?2053994217:0}i.inherits(h,c),e.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(S,O){for(var D=this.h[0],U=this.h[1],z=this.h[2],V=this.h[3],G=this.h[4],tt=D,K=U,B=z,N=V,Z=G,w=0;w<80;w++){var C=a(s(l(D,d(w,U,z,V),S[m[w]+O],p(w)),v[w]),G);D=G,G=V,V=s(z,10),z=U,U=C,C=a(s(l(tt,d(79-w,K,B,N),S[_[w]+O],g(w)),x[w]),Z),tt=Z,Z=N,N=s(B,10),B=K,K=C}C=o(this.h[1],z,N),this.h[1]=o(this.h[2],V,Z),this.h[2]=o(this.h[3],G,tt),this.h[3]=o(this.h[4],D,K),this.h[4]=o(this.h[0],U,B),this.h[0]=C},h.prototype._digest=function(S){return S==="hex"?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],x=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(n,t,e){"use strict";e.sha1=n("./sha/1"),e.sha224=n("./sha/224"),e.sha256=n("./sha/256"),e.sha384=n("./sha/384"),e.sha512=n("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(n,t,e){"use strict";var i=n("../utils"),r=n("../common"),s=n("./common"),a=i.rotl32,o=i.sum32,l=i.sum32_5,c=s.ft_1,h=r.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function p(){if(!(this instanceof p))return new p;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(p,h),t.exports=p,p.blockSize=512,p.outSize=160,p.hmacStrength=80,p.padLength=64,p.prototype._update=function(g,m){for(var _=this.W,v=0;v<16;v++)_[v]=g[m+v];for(;v<_.length;v++)_[v]=a(_[v-3]^_[v-8]^_[v-14]^_[v-16],1);var x=this.h[0],S=this.h[1],O=this.h[2],D=this.h[3],U=this.h[4];for(v=0;v<_.length;v++){var z=~~(v/20),V=l(a(x,5),c(z,S,O,D),U,_[v],d[z]);U=D,D=O,O=a(S,30),S=x,x=V}this.h[0]=o(this.h[0],x),this.h[1]=o(this.h[1],S),this.h[2]=o(this.h[2],O),this.h[3]=o(this.h[3],D),this.h[4]=o(this.h[4],U)},p.prototype._digest=function(g){return g==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./256");function s(){if(!(this instanceof s))return new s;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(s,r),t.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(a){return a==="hex"?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(n,t,e){"use strict";var i=n("../utils"),r=n("../common"),s=n("./common"),a=n("minimalistic-assert"),o=i.sum32,l=i.sum32_4,c=i.sum32_5,h=s.ch32,d=s.maj32,p=s.s0_256,g=s.s1_256,m=s.g0_256,_=s.g1_256,v=r.BlockHash,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function S(){if(!(this instanceof S))return new S;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=x,this.W=new Array(64)}i.inherits(S,v),t.exports=S,S.blockSize=512,S.outSize=256,S.hmacStrength=192,S.padLength=64,S.prototype._update=function(O,D){for(var U=this.W,z=0;z<16;z++)U[z]=O[D+z];for(;z<U.length;z++)U[z]=l(_(U[z-2]),U[z-7],m(U[z-15]),U[z-16]);var V=this.h[0],G=this.h[1],tt=this.h[2],K=this.h[3],B=this.h[4],N=this.h[5],Z=this.h[6],w=this.h[7];for(a(this.k.length===U.length),z=0;z<U.length;z++){var C=c(w,g(B),h(B,N,Z),this.k[z],U[z]),k=o(p(V),d(V,G,tt));w=Z,Z=N,N=B,B=o(K,C),K=tt,tt=G,G=V,V=o(C,k)}this.h[0]=o(this.h[0],V),this.h[1]=o(this.h[1],G),this.h[2]=o(this.h[2],tt),this.h[3]=o(this.h[3],K),this.h[4]=o(this.h[4],B),this.h[5]=o(this.h[5],N),this.h[6]=o(this.h[6],Z),this.h[7]=o(this.h[7],w)},S.prototype._digest=function(O){return O==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./512");function s(){if(!(this instanceof s))return new s;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(s,r),t.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(a){return a==="hex"?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(n,t,e){"use strict";var i=n("../utils"),r=n("../common"),s=n("minimalistic-assert"),a=i.rotr64_hi,o=i.rotr64_lo,l=i.shr64_hi,c=i.shr64_lo,h=i.sum64,d=i.sum64_hi,p=i.sum64_lo,g=i.sum64_4_hi,m=i.sum64_4_lo,_=i.sum64_5_hi,v=i.sum64_5_lo,x=r.BlockHash,S=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function O(){if(!(this instanceof O))return new O;x.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=S,this.W=new Array(160)}function D(k,T,R,F,H){var it=k&R^~k&H;return it<0&&(it+=4294967296),it}function U(k,T,R,F,H,it){var ot=T&F^~T&it;return ot<0&&(ot+=4294967296),ot}function z(k,T,R,F,H){var it=k&R^k&H^R&H;return it<0&&(it+=4294967296),it}function V(k,T,R,F,H,it){var ot=T&F^T&it^F&it;return ot<0&&(ot+=4294967296),ot}function G(k,T){var R=a(k,T,28)^a(T,k,2)^a(T,k,7);return R<0&&(R+=4294967296),R}function tt(k,T){var R=o(k,T,28)^o(T,k,2)^o(T,k,7);return R<0&&(R+=4294967296),R}function K(k,T){var R=a(k,T,14)^a(k,T,18)^a(T,k,9);return R<0&&(R+=4294967296),R}function B(k,T){var R=o(k,T,14)^o(k,T,18)^o(T,k,9);return R<0&&(R+=4294967296),R}function N(k,T){var R=a(k,T,1)^a(k,T,8)^l(k,T,7);return R<0&&(R+=4294967296),R}function Z(k,T){var R=o(k,T,1)^o(k,T,8)^c(k,T,7);return R<0&&(R+=4294967296),R}function w(k,T){var R=a(k,T,19)^a(T,k,29)^l(k,T,6);return R<0&&(R+=4294967296),R}function C(k,T){var R=o(k,T,19)^o(T,k,29)^c(k,T,6);return R<0&&(R+=4294967296),R}i.inherits(O,x),t.exports=O,O.blockSize=1024,O.outSize=512,O.hmacStrength=192,O.padLength=128,O.prototype._prepareBlock=function(k,T){for(var R=this.W,F=0;F<32;F++)R[F]=k[T+F];for(;F<R.length;F+=2){var H=w(R[F-4],R[F-3]),it=C(R[F-4],R[F-3]),ot=R[F-14],dt=R[F-13],$=N(R[F-30],R[F-29]),ct=Z(R[F-30],R[F-29]),W=R[F-32],q=R[F-31];R[F]=g(H,it,ot,dt,$,ct,W,q),R[F+1]=m(H,it,ot,dt,$,ct,W,q)}},O.prototype._update=function(k,T){this._prepareBlock(k,T);var R=this.W,F=this.h[0],H=this.h[1],it=this.h[2],ot=this.h[3],dt=this.h[4],$=this.h[5],ct=this.h[6],W=this.h[7],q=this.h[8],rt=this.h[9],mt=this.h[10],wt=this.h[11],_t=this.h[12],Ct=this.h[13],Ft=this.h[14],At=this.h[15];s(this.k.length===R.length);for(var vt=0;vt<R.length;vt+=2){var kt=Ft,gt=At,ut=K(q,rt),Q=B(q,rt),Y=D(q,rt,mt,wt,_t),et=U(q,rt,mt,wt,_t,Ct),lt=this.k[vt],pt=this.k[vt+1],bt=R[vt],Et=R[vt+1],Ot=_(kt,gt,ut,Q,Y,et,lt,pt,bt,Et),zt=v(kt,gt,ut,Q,Y,et,lt,pt,bt,Et);kt=G(F,H),gt=tt(F,H),ut=z(F,H,it,ot,dt),Q=V(F,H,it,ot,dt,$);var Gt=d(kt,gt,ut,Q),Jt=p(kt,gt,ut,Q);Ft=_t,At=Ct,_t=mt,Ct=wt,mt=q,wt=rt,q=d(ct,W,Ot,zt),rt=p(W,W,Ot,zt),ct=dt,W=$,dt=it,$=ot,it=F,ot=H,F=d(Ot,zt,Gt,Jt),H=p(Ot,zt,Gt,Jt)}h(this.h,0,F,H),h(this.h,2,it,ot),h(this.h,4,dt,$),h(this.h,6,ct,W),h(this.h,8,q,rt),h(this.h,10,mt,wt),h(this.h,12,_t,Ct),h(this.h,14,Ft,At)},O.prototype._digest=function(k){return k==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(n,t,e){"use strict";var i=n("../utils").rotr32;function r(o,l,c){return o&l^~o&c}function s(o,l,c){return o&l^o&c^l&c}function a(o,l,c){return o^l^c}e.ft_1=function(o,l,c,h){return o===0?r(l,c,h):o===1||o===3?a(l,c,h):o===2?s(l,c,h):void 0},e.ch32=r,e.maj32=s,e.p32=a,e.s0_256=function(o){return i(o,2)^i(o,13)^i(o,22)},e.s1_256=function(o){return i(o,6)^i(o,11)^i(o,25)},e.g0_256=function(o){return i(o,7)^i(o,18)^o>>>3},e.g1_256=function(o){return i(o,17)^i(o,19)^o>>>10}},{"../utils":437}],437:[function(n,t,e){"use strict";var i=n("minimalistic-assert"),r=n("inherits");function s(c,h){return(64512&c.charCodeAt(h))==55296&&!(h<0||h+1>=c.length)&&(64512&c.charCodeAt(h+1))==56320}function a(c){return(c>>>24|c>>>8&65280|c<<8&16711680|(255&c)<<24)>>>0}function o(c){return c.length===1?"0"+c:c}function l(c){return c.length===7?"0"+c:c.length===6?"00"+c:c.length===5?"000"+c:c.length===4?"0000"+c:c.length===3?"00000"+c:c.length===2?"000000"+c:c.length===1?"0000000"+c:c}e.inherits=r,e.toArray=function(c,h){if(Array.isArray(c))return c.slice();if(!c)return[];var d=[];if(typeof c=="string")if(h){if(h==="hex")for((c=c.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(c="0"+c),g=0;g<c.length;g+=2)d.push(parseInt(c[g]+c[g+1],16))}else for(var p=0,g=0;g<c.length;g++){var m=c.charCodeAt(g);m<128?d[p++]=m:m<2048?(d[p++]=m>>6|192,d[p++]=63&m|128):s(c,g)?(m=65536+((1023&m)<<10)+(1023&c.charCodeAt(++g)),d[p++]=m>>18|240,d[p++]=m>>12&63|128,d[p++]=m>>6&63|128,d[p++]=63&m|128):(d[p++]=m>>12|224,d[p++]=m>>6&63|128,d[p++]=63&m|128)}else for(g=0;g<c.length;g++)d[g]=0|c[g];return d},e.toHex=function(c){for(var h="",d=0;d<c.length;d++)h+=o(c[d].toString(16));return h},e.htonl=a,e.toHex32=function(c,h){for(var d="",p=0;p<c.length;p++){var g=c[p];h==="little"&&(g=a(g)),d+=l(g.toString(16))}return d},e.zero2=o,e.zero8=l,e.join32=function(c,h,d,p){var g=d-h;i(g%4==0);for(var m=new Array(g/4),_=0,v=h;_<m.length;_++,v+=4){var x;x=p==="big"?c[v]<<24|c[v+1]<<16|c[v+2]<<8|c[v+3]:c[v+3]<<24|c[v+2]<<16|c[v+1]<<8|c[v],m[_]=x>>>0}return m},e.split32=function(c,h){for(var d=new Array(4*c.length),p=0,g=0;p<c.length;p++,g+=4){var m=c[p];h==="big"?(d[g]=m>>>24,d[g+1]=m>>>16&255,d[g+2]=m>>>8&255,d[g+3]=255&m):(d[g+3]=m>>>24,d[g+2]=m>>>16&255,d[g+1]=m>>>8&255,d[g]=255&m)}return d},e.rotr32=function(c,h){return c>>>h|c<<32-h},e.rotl32=function(c,h){return c<<h|c>>>32-h},e.sum32=function(c,h){return c+h>>>0},e.sum32_3=function(c,h,d){return c+h+d>>>0},e.sum32_4=function(c,h,d,p){return c+h+d+p>>>0},e.sum32_5=function(c,h,d,p,g){return c+h+d+p+g>>>0},e.sum64=function(c,h,d,p){var g=c[h],m=p+c[h+1]>>>0,_=(m<p?1:0)+d+g;c[h]=_>>>0,c[h+1]=m},e.sum64_hi=function(c,h,d,p){return(h+p>>>0<h?1:0)+c+d>>>0},e.sum64_lo=function(c,h,d,p){return h+p>>>0},e.sum64_4_hi=function(c,h,d,p,g,m,_,v){var x=0,S=h;return x+=(S=S+p>>>0)<h?1:0,x+=(S=S+m>>>0)<m?1:0,c+d+g+_+(x+=(S=S+v>>>0)<v?1:0)>>>0},e.sum64_4_lo=function(c,h,d,p,g,m,_,v){return h+p+m+v>>>0},e.sum64_5_hi=function(c,h,d,p,g,m,_,v,x,S){var O=0,D=h;return O+=(D=D+p>>>0)<h?1:0,O+=(D=D+m>>>0)<m?1:0,O+=(D=D+v>>>0)<v?1:0,c+d+g+_+x+(O+=(D=D+S>>>0)<S?1:0)>>>0},e.sum64_5_lo=function(c,h,d,p,g,m,_,v,x,S){return h+p+m+v+S>>>0},e.rotr64_hi=function(c,h,d){return(h<<32-d|c>>>d)>>>0},e.rotr64_lo=function(c,h,d){return(c<<32-d|h>>>d)>>>0},e.shr64_hi=function(c,h,d){return c>>>d},e.shr64_lo=function(c,h,d){return(c<<32-d|h>>>d)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(n,t,e){"use strict";var i=n("hash.js"),r=n("minimalistic-crypto-utils"),s=n("minimalistic-assert");function a(o){if(!(this instanceof a))return new a(o);this.hash=o.hash,this.predResist=!!o.predResist,this.outLen=this.hash.outSize,this.minEntropy=o.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var l=r.toArray(o.entropy,o.entropyEnc||"hex"),c=r.toArray(o.nonce,o.nonceEnc||"hex"),h=r.toArray(o.pers,o.persEnc||"hex");s(l.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(l,c,h)}t.exports=a,a.prototype._init=function(o,l,c){var h=o.concat(l).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=1;this._update(h),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},a.prototype._update=function(o){var l=this._hmac().update(this.V).update([0]);o&&(l=l.update(o)),this.K=l.digest(),this.V=this._hmac().update(this.V).digest(),o&&(this.K=this._hmac().update(this.V).update([1]).update(o).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(o,l,c,h){typeof l!="string"&&(h=c,c=l,l=null),o=r.toArray(o,l),c=r.toArray(c,h),s(o.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(o.concat(c||[])),this._reseed=1},a.prototype.generate=function(o,l,c,h){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof l!="string"&&(h=c,c=l,l=null),c&&(c=r.toArray(c,h||"hex"),this._update(c));for(var d=[];d.length<o;)this.V=this._hmac().update(this.V).digest(),d=d.concat(this.V);var p=d.slice(0,o);return this._update(c),this._reseed++,r.encode(p,l)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(n,t,e){"use strict";e.read=function(i,r,s,a,o){var l,c,h=8*o-a-1,d=(1<<h)-1,p=d>>1,g=-7,m=s?o-1:0,_=s?-1:1,v=i[r+m];for(m+=_,l=v&(1<<-g)-1,v>>=-g,g+=h;g>0;l=256*l+i[r+m],m+=_,g-=8);for(c=l&(1<<-g)-1,l>>=-g,g+=a;g>0;c=256*c+i[r+m],m+=_,g-=8);if(l===0)l=1-p;else{if(l===d)return c?NaN:1/0*(v?-1:1);c+=Math.pow(2,a),l-=p}return(v?-1:1)*c*Math.pow(2,l-a)},e.write=function(i,r,s,a,o,l){var c,h,d,p=8*l-o-1,g=(1<<p)-1,m=g>>1,_=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=a?0:l-1,x=a?1:-1,S=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(h=isNaN(r)?1:0,c=g):(c=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-c))<1&&(c--,d*=2),(r+=c+m>=1?_/d:_*Math.pow(2,1-m))*d>=2&&(c++,d/=2),c+m>=g?(h=0,c=g):c+m>=1?(h=(r*d-1)*Math.pow(2,o),c+=m):(h=r*Math.pow(2,m-1)*Math.pow(2,o),c=0));o>=8;i[s+v]=255&h,v+=x,h/=256,o-=8);for(c=c<<o|h,p+=o;p>0;i[s+v]=255&c,v+=x,c/=256,p-=8);i[s+v-x]|=128*S}},{}],440:[function(n,t,e){"use strict";typeof Object.create=="function"?t.exports=function(i,r){r&&(i.super_=r,i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(i,r){if(r){i.super_=r;var s=function(){};s.prototype=r.prototype,i.prototype=new s,i.prototype.constructor=i}}},{}],441:[function(n,t,e){(function(i,r,s,a,o,l,c,h){(function(){"use strict";(function(d){typeof e=="object"&&t!==void 0?t.exports=d():(typeof window<"u"?window:r!==void 0?r:typeof self<"u"?self:this).JSZip=d()})(function(){return function d(p,g,m){function _(S,O){if(!g[S]){if(!p[S]){var D=typeof n=="function"&&n;if(!O&&D)return D(S,!0);if(v)return v(S,!0);var U=new Error("Cannot find module '"+S+"'");throw U.code="MODULE_NOT_FOUND",U}var z=g[S]={exports:{}};p[S][0].call(z.exports,function(V){return _(p[S][1][V]||V)},z,z.exports,d,p,g,m)}return g[S].exports}for(var v=typeof n=="function"&&n,x=0;x<m.length;x++)_(m[x]);return _}({1:[function(d,p,g){var m=d("./utils"),_=d("./support"),v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";g.encode=function(x){for(var S,O,D,U,z,V,G,tt=[],K=0,B=x.length,N=B,Z=m.getTypeOf(x)!=="string";K<x.length;)N=B-K,D=Z?(S=x[K++],O=K<B?x[K++]:0,K<B?x[K++]:0):(S=x.charCodeAt(K++),O=K<B?x.charCodeAt(K++):0,K<B?x.charCodeAt(K++):0),U=S>>2,z=(3&S)<<4|O>>4,V=1<N?(15&O)<<2|D>>6:64,G=2<N?63&D:64,tt.push(v.charAt(U)+v.charAt(z)+v.charAt(V)+v.charAt(G));return tt.join("")},g.decode=function(x){var S,O,D,U,z,V,G=0,tt=0,K="data:";if(x.substr(0,K.length)===K)throw new Error("Invalid base64 input, it looks like a data url.");var B,N=3*(x=x.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(x.charAt(x.length-1)===v.charAt(64)&&N--,x.charAt(x.length-2)===v.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(B=_.uint8array?new Uint8Array(0|N):new Array(0|N);G<x.length;)S=v.indexOf(x.charAt(G++))<<2|(U=v.indexOf(x.charAt(G++)))>>4,O=(15&U)<<4|(z=v.indexOf(x.charAt(G++)))>>2,D=(3&z)<<6|(V=v.indexOf(x.charAt(G++))),B[tt++]=S,z!==64&&(B[tt++]=O),V!==64&&(B[tt++]=D);return B}},{"./support":30,"./utils":32}],2:[function(d,p,g){var m=d("./external"),_=d("./stream/DataWorker"),v=d("./stream/Crc32Probe"),x=d("./stream/DataLengthProbe");function S(O,D,U,z,V){this.compressedSize=O,this.uncompressedSize=D,this.crc32=U,this.compression=z,this.compressedContent=V}S.prototype={getContentWorker:function(){var O=new _(m.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new x("data_length")),D=this;return O.on("end",function(){if(this.streamInfo.data_length!==D.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),O},getCompressedWorker:function(){return new _(m.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},S.createWorkerFrom=function(O,D,U){return O.pipe(new v).pipe(new x("uncompressedSize")).pipe(D.compressWorker(U)).pipe(new x("compressedSize")).withStreamInfo("compression",D)},p.exports=S},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(d,p,g){var m=d("./stream/GenericWorker");g.STORE={magic:"\0\0",compressWorker:function(){return new m("STORE compression")},uncompressWorker:function(){return new m("STORE decompression")}},g.DEFLATE=d("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(d,p,g){var m=d("./utils"),_=function(){for(var v,x=[],S=0;S<256;S++){v=S;for(var O=0;O<8;O++)v=1&v?3988292384^v>>>1:v>>>1;x[S]=v}return x}();p.exports=function(v,x){return v!==void 0&&v.length?m.getTypeOf(v)!=="string"?function(S,O,D,U){var z=_,V=0+D;S^=-1;for(var G=0;G<V;G++)S=S>>>8^z[255&(S^O[G])];return-1^S}(0|x,v,v.length):function(S,O,D,U){var z=_,V=0+D;S^=-1;for(var G=0;G<V;G++)S=S>>>8^z[255&(S^O.charCodeAt(G))];return-1^S}(0|x,v,v.length):0}},{"./utils":32}],5:[function(d,p,g){g.base64=!1,g.binary=!1,g.dir=!1,g.createFolders=!0,g.date=null,g.compression=null,g.compressionOptions=null,g.comment=null,g.unixPermissions=null,g.dosPermissions=null},{}],6:[function(d,p,g){var m;m=typeof Promise<"u"?Promise:d("lie"),p.exports={Promise:m}},{lie:37}],7:[function(d,p,g){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",_=d("pako"),v=d("./utils"),x=d("./stream/GenericWorker"),S=m?"uint8array":"array";function O(D,U){x.call(this,"FlateWorker/"+D),this._pako=null,this._pakoAction=D,this._pakoOptions=U,this.meta={}}g.magic="\b\0",v.inherits(O,x),O.prototype.processChunk=function(D){this.meta=D.meta,this._pako===null&&this._createPako(),this._pako.push(v.transformTo(S,D.data),!1)},O.prototype.flush=function(){x.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},O.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this._pako=null},O.prototype._createPako=function(){this._pako=new _[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var D=this;this._pako.onData=function(U){D.push({data:U,meta:D.meta})}},g.compressWorker=function(D){return new O("Deflate",D)},g.uncompressWorker=function(){return new O("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(d,p,g){function m(z,V){var G,tt="";for(G=0;G<V;G++)tt+=String.fromCharCode(255&z),z>>>=8;return tt}function _(z,V,G,tt,K,B){var N,Z,w=z.file,C=z.compression,k=B!==S.utf8encode,T=v.transformTo("string",B(w.name)),R=v.transformTo("string",S.utf8encode(w.name)),F=w.comment,H=v.transformTo("string",B(F)),it=v.transformTo("string",S.utf8encode(F)),ot=R.length!==w.name.length,dt=it.length!==F.length,$="",ct="",W="",q=w.dir,rt=w.date,mt={crc32:0,compressedSize:0,uncompressedSize:0};V&&!G||(mt.crc32=z.crc32,mt.compressedSize=z.compressedSize,mt.uncompressedSize=z.uncompressedSize);var wt=0;V&&(wt|=8),k||!ot&&!dt||(wt|=2048);var _t=0,Ct=0;q&&(_t|=16),K==="UNIX"?(Ct=798,_t|=function(At,vt){var kt=At;return At||(kt=vt?16893:33204),(65535&kt)<<16}(w.unixPermissions,q)):(Ct=20,_t|=function(At){return 63&(At||0)}(w.dosPermissions)),N=rt.getUTCHours(),N<<=6,N|=rt.getUTCMinutes(),N<<=5,N|=rt.getUTCSeconds()/2,Z=rt.getUTCFullYear()-1980,Z<<=4,Z|=rt.getUTCMonth()+1,Z<<=5,Z|=rt.getUTCDate(),ot&&(ct=m(1,1)+m(O(T),4)+R,$+="up"+m(ct.length,2)+ct),dt&&(W=m(1,1)+m(O(H),4)+it,$+="uc"+m(W.length,2)+W);var Ft="";return Ft+=`
\0`,Ft+=m(wt,2),Ft+=C.magic,Ft+=m(N,2),Ft+=m(Z,2),Ft+=m(mt.crc32,4),Ft+=m(mt.compressedSize,4),Ft+=m(mt.uncompressedSize,4),Ft+=m(T.length,2),Ft+=m($.length,2),{fileRecord:D.LOCAL_FILE_HEADER+Ft+T+$,dirRecord:D.CENTRAL_FILE_HEADER+m(Ct,2)+Ft+m(H.length,2)+"\0\0\0\0"+m(_t,4)+m(tt,4)+T+$+H}}var v=d("../utils"),x=d("../stream/GenericWorker"),S=d("../utf8"),O=d("../crc32"),D=d("../signature");function U(z,V,G,tt){x.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=V,this.zipPlatform=G,this.encodeFileName=tt,this.streamFiles=z,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}v.inherits(U,x),U.prototype.push=function(z){var V=z.meta.percent||0,G=this.entriesCount,tt=this._sources.length;this.accumulate?this.contentBuffer.push(z):(this.bytesWritten+=z.data.length,x.prototype.push.call(this,{data:z.data,meta:{currentFile:this.currentFile,percent:G?(V+100*(G-tt-1))/G:100}}))},U.prototype.openedSource=function(z){this.currentSourceOffset=this.bytesWritten,this.currentFile=z.file.name;var V=this.streamFiles&&!z.file.dir;if(V){var G=_(z,V,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:G.fileRecord,meta:{percent:0}})}else this.accumulate=!0},U.prototype.closedSource=function(z){this.accumulate=!1;var V=this.streamFiles&&!z.file.dir,G=_(z,V,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(G.dirRecord),V)this.push({data:function(tt){return D.DATA_DESCRIPTOR+m(tt.crc32,4)+m(tt.compressedSize,4)+m(tt.uncompressedSize,4)}(z),meta:{percent:100}});else for(this.push({data:G.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},U.prototype.flush=function(){for(var z=this.bytesWritten,V=0;V<this.dirRecords.length;V++)this.push({data:this.dirRecords[V],meta:{percent:100}});var G=this.bytesWritten-z,tt=function(K,B,N,Z,w){var C=v.transformTo("string",w(Z));return D.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(K,2)+m(K,2)+m(B,4)+m(N,4)+m(C.length,2)+C}(this.dirRecords.length,G,z,this.zipComment,this.encodeFileName);this.push({data:tt,meta:{percent:100}})},U.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},U.prototype.registerPrevious=function(z){this._sources.push(z);var V=this;return z.on("data",function(G){V.processChunk(G)}),z.on("end",function(){V.closedSource(V.previous.streamInfo),V._sources.length?V.prepareNextSource():V.end()}),z.on("error",function(G){V.error(G)}),this},U.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},U.prototype.error=function(z){var V=this._sources;if(!x.prototype.error.call(this,z))return!1;for(var G=0;G<V.length;G++)try{V[G].error(z)}catch{}return!0},U.prototype.lock=function(){x.prototype.lock.call(this);for(var z=this._sources,V=0;V<z.length;V++)z[V].lock()},p.exports=U},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(d,p,g){var m=d("../compressions"),_=d("./ZipFileWorker");g.generateWorker=function(v,x,S){var O=new _(x.streamFiles,S,x.platform,x.encodeFileName),D=0;try{v.forEach(function(U,z){D++;var V=function(B,N){var Z=B||N,w=m[Z];if(!w)throw new Error(Z+" is not a valid compression method !");return w}(z.options.compression,x.compression),G=z.options.compressionOptions||x.compressionOptions||{},tt=z.dir,K=z.date;z._compressWorker(V,G).withStreamInfo("file",{name:U,dir:tt,date:K,comment:z.comment||"",unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions}).pipe(O)}),O.entriesCount=D}catch(U){O.error(U)}return O}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(d,p,g){function m(){if(!(this instanceof m))return new m;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var _=new m;for(var v in this)typeof this[v]!="function"&&(_[v]=this[v]);return _}}(m.prototype=d("./object")).loadAsync=d("./load"),m.support=d("./support"),m.defaults=d("./defaults"),m.version="3.10.1",m.loadAsync=function(_,v){return new m().loadAsync(_,v)},m.external=d("./external"),p.exports=m},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(d,p,g){var m=d("./utils"),_=d("./external"),v=d("./utf8"),x=d("./zipEntries"),S=d("./stream/Crc32Probe"),O=d("./nodejsUtils");function D(U){return new _.Promise(function(z,V){var G=U.decompressed.getContentWorker().pipe(new S);G.on("error",function(tt){V(tt)}).on("end",function(){G.streamInfo.crc32!==U.decompressed.crc32?V(new Error("Corrupted zip : CRC32 mismatch")):z()}).resume()})}p.exports=function(U,z){var V=this;return z=m.extend(z||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:v.utf8decode}),O.isNode&&O.isStream(U)?_.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):m.prepareContent("the loaded zip file",U,!0,z.optimizedBinaryString,z.base64).then(function(G){var tt=new x(z);return tt.load(G),tt}).then(function(G){var tt=[_.Promise.resolve(G)],K=G.files;if(z.checkCRC32)for(var B=0;B<K.length;B++)tt.push(D(K[B]));return _.Promise.all(tt)}).then(function(G){for(var tt=G.shift(),K=tt.files,B=0;B<K.length;B++){var N=K[B],Z=N.fileNameStr,w=m.resolve(N.fileNameStr);V.file(w,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:z.createFolders}),N.dir||(V.file(w).unsafeOriginalName=Z)}return tt.zipComment.length&&(V.comment=tt.zipComment),V})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(d,p,g){var m=d("../utils"),_=d("../stream/GenericWorker");function v(x,S){_.call(this,"Nodejs stream input adapter for "+x),this._upstreamEnded=!1,this._bindStream(S)}m.inherits(v,_),v.prototype._bindStream=function(x){var S=this;(this._stream=x).pause(),x.on("data",function(O){S.push({data:O,meta:{percent:0}})}).on("error",function(O){S.isPaused?this.generatedError=O:S.error(O)}).on("end",function(){S.isPaused?S._upstreamEnded=!0:S.end()})},v.prototype.pause=function(){return!!_.prototype.pause.call(this)&&(this._stream.pause(),!0)},v.prototype.resume=function(){return!!_.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},p.exports=v},{"../stream/GenericWorker":28,"../utils":32}],13:[function(d,p,g){var m=d("readable-stream").Readable;function _(v,x,S){m.call(this,x),this._helper=v;var O=this;v.on("data",function(D,U){O.push(D)||O._helper.pause(),S&&S(U)}).on("error",function(D){O.emit("error",D)}).on("end",function(){O.push(null)})}d("../utils").inherits(_,m),_.prototype._read=function(){this._helper.resume()},p.exports=_},{"../utils":32,"readable-stream":16}],14:[function(d,p,g){p.exports={isNode:s!==void 0,newBufferFrom:function(m,_){if(s.from&&s.from!==Uint8Array.from)return s.from(m,_);if(typeof m=="number")throw new Error('The "data" argument must not be a number');return new s(m,_)},allocBuffer:function(m){if(s.alloc)return s.alloc(m);var _=new s(m);return _.fill(0),_},isBuffer:function(m){return s.isBuffer(m)},isStream:function(m){return m&&typeof m.on=="function"&&typeof m.pause=="function"&&typeof m.resume=="function"}}},{}],15:[function(d,p,g){function m(w,C,k){var T,R=v.getTypeOf(C),F=v.extend(k||{},O);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(w=K(w)),F.createFolders&&(T=tt(w))&&B.call(this,T,!0);var H=R==="string"&&F.binary===!1&&F.base64===!1;k&&k.binary!==void 0||(F.binary=!H),(C instanceof D&&C.uncompressedSize===0||F.dir||!C||C.length===0)&&(F.base64=!1,F.binary=!0,C="",F.compression="STORE",R="string");var it;it=C instanceof D||C instanceof x?C:V.isNode&&V.isStream(C)?new G(w,C):v.prepareContent(w,C,F.binary,F.optimizedBinaryString,F.base64);var ot=new U(w,it,F);this.files[w]=ot}var _=d("./utf8"),v=d("./utils"),x=d("./stream/GenericWorker"),S=d("./stream/StreamHelper"),O=d("./defaults"),D=d("./compressedObject"),U=d("./zipObject"),z=d("./generate"),V=d("./nodejsUtils"),G=d("./nodejs/NodejsStreamInputAdapter"),tt=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var C=w.lastIndexOf("/");return 0<C?w.substring(0,C):""},K=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},B=function(w,C){return C=C!==void 0?C:O.createFolders,w=K(w),this.files[w]||m.call(this,w,null,{dir:!0,createFolders:C}),this.files[w]};function N(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var Z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var C,k,T;for(C in this.files)T=this.files[C],(k=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&w(k,T)},filter:function(w){var C=[];return this.forEach(function(k,T){w(k,T)&&C.push(T)}),C},file:function(w,C,k){if(arguments.length!==1)return w=this.root+w,m.call(this,w,C,k),this;if(N(w)){var T=w;return this.filter(function(F,H){return!H.dir&&T.test(F)})}var R=this.files[this.root+w];return R&&!R.dir?R:null},folder:function(w){if(!w)return this;if(N(w))return this.filter(function(R,F){return F.dir&&w.test(R)});var C=this.root+w,k=B.call(this,C),T=this.clone();return T.root=k.name,T},remove:function(w){w=this.root+w;var C=this.files[w];if(C||(w.slice(-1)!=="/"&&(w+="/"),C=this.files[w]),C&&!C.dir)delete this.files[w];else for(var k=this.filter(function(R,F){return F.name.slice(0,w.length)===w}),T=0;T<k.length;T++)delete this.files[k[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var C,k={};try{if((k=v.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:_.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");v.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var T=k.comment||this.comment||"";C=z.generateWorker(this,k,T)}catch(R){(C=new x("error")).error(R)}return new S(C,k.type||"string",k.mimeType)},generateAsync:function(w,C){return this.generateInternalStream(w).accumulate(C)},generateNodeStream:function(w,C){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(C)}};p.exports=Z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(d,p,g){p.exports=d("stream")},{stream:void 0}],17:[function(d,p,g){var m=d("./DataReader");function _(v){m.call(this,v);for(var x=0;x<this.data.length;x++)v[x]=255&v[x]}d("../utils").inherits(_,m),_.prototype.byteAt=function(v){return this.data[this.zero+v]},_.prototype.lastIndexOfSignature=function(v){for(var x=v.charCodeAt(0),S=v.charCodeAt(1),O=v.charCodeAt(2),D=v.charCodeAt(3),U=this.length-4;0<=U;--U)if(this.data[U]===x&&this.data[U+1]===S&&this.data[U+2]===O&&this.data[U+3]===D)return U-this.zero;return-1},_.prototype.readAndCheckSignature=function(v){var x=v.charCodeAt(0),S=v.charCodeAt(1),O=v.charCodeAt(2),D=v.charCodeAt(3),U=this.readData(4);return x===U[0]&&S===U[1]&&O===U[2]&&D===U[3]},_.prototype.readData=function(v){if(this.checkOffset(v),v===0)return[];var x=this.data.slice(this.zero+this.index,this.zero+this.index+v);return this.index+=v,x},p.exports=_},{"../utils":32,"./DataReader":18}],18:[function(d,p,g){var m=d("../utils");function _(v){this.data=v,this.length=v.length,this.index=0,this.zero=0}_.prototype={checkOffset:function(v){this.checkIndex(this.index+v)},checkIndex:function(v){if(this.length<this.zero+v||v<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+v+"). Corrupted zip ?")},setIndex:function(v){this.checkIndex(v),this.index=v},skip:function(v){this.setIndex(this.index+v)},byteAt:function(){},readInt:function(v){var x,S=0;for(this.checkOffset(v),x=this.index+v-1;x>=this.index;x--)S=(S<<8)+this.byteAt(x);return this.index+=v,S},readString:function(v){return m.transformTo("string",this.readData(v))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var v=this.readInt(4);return new Date(Date.UTC(1980+(v>>25&127),(v>>21&15)-1,v>>16&31,v>>11&31,v>>5&63,(31&v)<<1))}},p.exports=_},{"../utils":32}],19:[function(d,p,g){var m=d("./Uint8ArrayReader");function _(v){m.call(this,v)}d("../utils").inherits(_,m),_.prototype.readData=function(v){this.checkOffset(v);var x=this.data.slice(this.zero+this.index,this.zero+this.index+v);return this.index+=v,x},p.exports=_},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(d,p,g){var m=d("./DataReader");function _(v){m.call(this,v)}d("../utils").inherits(_,m),_.prototype.byteAt=function(v){return this.data.charCodeAt(this.zero+v)},_.prototype.lastIndexOfSignature=function(v){return this.data.lastIndexOf(v)-this.zero},_.prototype.readAndCheckSignature=function(v){return v===this.readData(4)},_.prototype.readData=function(v){this.checkOffset(v);var x=this.data.slice(this.zero+this.index,this.zero+this.index+v);return this.index+=v,x},p.exports=_},{"../utils":32,"./DataReader":18}],21:[function(d,p,g){var m=d("./ArrayReader");function _(v){m.call(this,v)}d("../utils").inherits(_,m),_.prototype.readData=function(v){if(this.checkOffset(v),v===0)return new Uint8Array(0);var x=this.data.subarray(this.zero+this.index,this.zero+this.index+v);return this.index+=v,x},p.exports=_},{"../utils":32,"./ArrayReader":17}],22:[function(d,p,g){var m=d("../utils"),_=d("../support"),v=d("./ArrayReader"),x=d("./StringReader"),S=d("./NodeBufferReader"),O=d("./Uint8ArrayReader");p.exports=function(D){var U=m.getTypeOf(D);return m.checkSupport(U),U!=="string"||_.uint8array?U==="nodebuffer"?new S(D):_.uint8array?new O(m.transformTo("uint8array",D)):new v(m.transformTo("array",D)):new x(D)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(d,p,g){g.LOCAL_FILE_HEADER="PK",g.CENTRAL_FILE_HEADER="PK",g.CENTRAL_DIRECTORY_END="PK",g.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",g.ZIP64_CENTRAL_DIRECTORY_END="PK",g.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(d,p,g){var m=d("./GenericWorker"),_=d("../utils");function v(x){m.call(this,"ConvertWorker to "+x),this.destType=x}_.inherits(v,m),v.prototype.processChunk=function(x){this.push({data:_.transformTo(this.destType,x.data),meta:x.meta})},p.exports=v},{"../utils":32,"./GenericWorker":28}],25:[function(d,p,g){var m=d("./GenericWorker"),_=d("../crc32");function v(){m.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}d("../utils").inherits(v,m),v.prototype.processChunk=function(x){this.streamInfo.crc32=_(x.data,this.streamInfo.crc32||0),this.push(x)},p.exports=v},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(d,p,g){var m=d("../utils"),_=d("./GenericWorker");function v(x){_.call(this,"DataLengthProbe for "+x),this.propName=x,this.withStreamInfo(x,0)}m.inherits(v,_),v.prototype.processChunk=function(x){if(x){var S=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=S+x.data.length}_.prototype.processChunk.call(this,x)},p.exports=v},{"../utils":32,"./GenericWorker":28}],27:[function(d,p,g){var m=d("../utils"),_=d("./GenericWorker");function v(x){_.call(this,"DataWorker");var S=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,x.then(function(O){S.dataIsReady=!0,S.data=O,S.max=O&&O.length||0,S.type=m.getTypeOf(O),S.isPaused||S._tickAndRepeat()},function(O){S.error(O)})}m.inherits(v,_),v.prototype.cleanUp=function(){_.prototype.cleanUp.call(this),this.data=null},v.prototype.resume=function(){return!!_.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,m.delay(this._tickAndRepeat,[],this)),!0)},v.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(m.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},v.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var x=null,S=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":x=this.data.substring(this.index,S);break;case"uint8array":x=this.data.subarray(this.index,S);break;case"array":case"nodebuffer":x=this.data.slice(this.index,S)}return this.index=S,this.push({data:x,meta:{percent:this.max?this.index/this.max*100:0}})},p.exports=v},{"../utils":32,"./GenericWorker":28}],28:[function(d,p,g){function m(_){this.name=_||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}m.prototype={push:function(_){this.emit("data",_)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(_){this.emit("error",_)}return!0},error:function(_){return!this.isFinished&&(this.isPaused?this.generatedError=_:(this.isFinished=!0,this.emit("error",_),this.previous&&this.previous.error(_),this.cleanUp()),!0)},on:function(_,v){return this._listeners[_].push(v),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(_,v){if(this._listeners[_])for(var x=0;x<this._listeners[_].length;x++)this._listeners[_][x].call(this,v)},pipe:function(_){return _.registerPrevious(this)},registerPrevious:function(_){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=_.streamInfo,this.mergeStreamInfo(),this.previous=_;var v=this;return _.on("data",function(x){v.processChunk(x)}),_.on("end",function(){v.end()}),_.on("error",function(x){v.error(x)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var _=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),_=!0),this.previous&&this.previous.resume(),!_},flush:function(){},processChunk:function(_){this.push(_)},withStreamInfo:function(_,v){return this.extraStreamInfo[_]=v,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var _ in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,_)&&(this.streamInfo[_]=this.extraStreamInfo[_])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var _="Worker "+this.name;return this.previous?this.previous+" -> "+_:_}},p.exports=m},{}],29:[function(d,p,g){var m=d("../utils"),_=d("./ConvertWorker"),v=d("./GenericWorker"),x=d("../base64"),S=d("../support"),O=d("../external"),D=null;if(S.nodestream)try{D=d("../nodejs/NodejsStreamOutputAdapter")}catch{}function U(z,V,G){var tt=V;switch(V){case"blob":case"arraybuffer":tt="uint8array";break;case"base64":tt="string"}try{this._internalType=tt,this._outputType=V,this._mimeType=G,m.checkSupport(tt),this._worker=z.pipe(new _(tt)),z.lock()}catch(K){this._worker=new v("error"),this._worker.error(K)}}U.prototype={accumulate:function(z){return function(V,G){return new O.Promise(function(tt,K){var B=[],N=V._internalType,Z=V._outputType,w=V._mimeType;V.on("data",function(C,k){B.push(C),G&&G(k)}).on("error",function(C){B=[],K(C)}).on("end",function(){try{var C=function(k,T,R){switch(k){case"blob":return m.newBlob(m.transformTo("arraybuffer",T),R);case"base64":return x.encode(T);default:return m.transformTo(k,T)}}(Z,function(k,T){var R,F=0,H=null,it=0;for(R=0;R<T.length;R++)it+=T[R].length;switch(k){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(H=new Uint8Array(it),R=0;R<T.length;R++)H.set(T[R],F),F+=T[R].length;return H;case"nodebuffer":return s.concat(T);default:throw new Error("concat : unsupported type '"+k+"'")}}(N,B),w);tt(C)}catch(k){K(k)}B=[]}).resume()})}(this,z)},on:function(z,V){var G=this;return z==="data"?this._worker.on(z,function(tt){V.call(G,tt.data,tt.meta)}):this._worker.on(z,function(){m.delay(V,arguments,G)}),this},resume:function(){return m.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(z){if(m.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new D(this,{objectMode:this._outputType!=="nodebuffer"},z)}},p.exports=U},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(d,p,g){if(g.base64=!0,g.array=!0,g.string=!0,g.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",g.nodebuffer=s!==void 0,g.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")g.blob=!1;else{var m=new ArrayBuffer(0);try{g.blob=new Blob([m],{type:"application/zip"}).size===0}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);_.append(m),g.blob=_.getBlob("application/zip").size===0}catch{g.blob=!1}}}try{g.nodestream=!!d("readable-stream").Readable}catch{g.nodestream=!1}},{"readable-stream":16}],31:[function(d,p,g){for(var m=d("./utils"),_=d("./support"),v=d("./nodejsUtils"),x=d("./stream/GenericWorker"),S=new Array(256),O=0;O<256;O++)S[O]=252<=O?6:248<=O?5:240<=O?4:224<=O?3:192<=O?2:1;function D(){x.call(this,"utf-8 decode"),this.leftOver=null}function U(){x.call(this,"utf-8 encode")}S[254]=S[254]=1,g.utf8encode=function(z){return _.nodebuffer?v.newBufferFrom(z,"utf-8"):function(V){var G,tt,K,B,N,Z=V.length,w=0;for(B=0;B<Z;B++)(64512&(tt=V.charCodeAt(B)))==55296&&B+1<Z&&(64512&(K=V.charCodeAt(B+1)))==56320&&(tt=65536+(tt-55296<<10)+(K-56320),B++),w+=tt<128?1:tt<2048?2:tt<65536?3:4;for(G=_.uint8array?new Uint8Array(w):new Array(w),B=N=0;N<w;B++)(64512&(tt=V.charCodeAt(B)))==55296&&B+1<Z&&(64512&(K=V.charCodeAt(B+1)))==56320&&(tt=65536+(tt-55296<<10)+(K-56320),B++),tt<128?G[N++]=tt:(tt<2048?G[N++]=192|tt>>>6:(tt<65536?G[N++]=224|tt>>>12:(G[N++]=240|tt>>>18,G[N++]=128|tt>>>12&63),G[N++]=128|tt>>>6&63),G[N++]=128|63&tt);return G}(z)},g.utf8decode=function(z){return _.nodebuffer?m.transformTo("nodebuffer",z).toString("utf-8"):function(V){var G,tt,K,B,N=V.length,Z=new Array(2*N);for(G=tt=0;G<N;)if((K=V[G++])<128)Z[tt++]=K;else if(4<(B=S[K]))Z[tt++]=65533,G+=B-1;else{for(K&=B===2?31:B===3?15:7;1<B&&G<N;)K=K<<6|63&V[G++],B--;1<B?Z[tt++]=65533:K<65536?Z[tt++]=K:(K-=65536,Z[tt++]=55296|K>>10&1023,Z[tt++]=56320|1023&K)}return Z.length!==tt&&(Z.subarray?Z=Z.subarray(0,tt):Z.length=tt),m.applyFromCharCode(Z)}(z=m.transformTo(_.uint8array?"uint8array":"array",z))},m.inherits(D,x),D.prototype.processChunk=function(z){var V=m.transformTo(_.uint8array?"uint8array":"array",z.data);if(this.leftOver&&this.leftOver.length){if(_.uint8array){var G=V;(V=new Uint8Array(G.length+this.leftOver.length)).set(this.leftOver,0),V.set(G,this.leftOver.length)}else V=this.leftOver.concat(V);this.leftOver=null}var tt=function(B,N){var Z;for((N=N||B.length)>B.length&&(N=B.length),Z=N-1;0<=Z&&(192&B[Z])==128;)Z--;return Z<0||Z===0?N:Z+S[B[Z]]>N?Z:N}(V),K=V;tt!==V.length&&(_.uint8array?(K=V.subarray(0,tt),this.leftOver=V.subarray(tt,V.length)):(K=V.slice(0,tt),this.leftOver=V.slice(tt,V.length))),this.push({data:g.utf8decode(K),meta:z.meta})},D.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:g.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},g.Utf8DecodeWorker=D,m.inherits(U,x),U.prototype.processChunk=function(z){this.push({data:g.utf8encode(z.data),meta:z.meta})},g.Utf8EncodeWorker=U},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(d,p,g){var m=d("./support"),_=d("./base64"),v=d("./nodejsUtils"),x=d("./external");function S(G){return G}function O(G,tt){for(var K=0;K<G.length;++K)tt[K]=255&G.charCodeAt(K);return tt}d("setimmediate"),g.newBlob=function(G,tt){g.checkSupport("blob");try{return new Blob([G],{type:tt})}catch{try{var K=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return K.append(G),K.getBlob(tt)}catch{throw new Error("Bug : can't construct the Blob.")}}};var D={stringifyByChunk:function(G,tt,K){var B=[],N=0,Z=G.length;if(Z<=K)return String.fromCharCode.apply(null,G);for(;N<Z;)tt==="array"||tt==="nodebuffer"?B.push(String.fromCharCode.apply(null,G.slice(N,Math.min(N+K,Z)))):B.push(String.fromCharCode.apply(null,G.subarray(N,Math.min(N+K,Z)))),N+=K;return B.join("")},stringifyByChar:function(G){for(var tt="",K=0;K<G.length;K++)tt+=String.fromCharCode(G[K]);return tt},applyCanBeUsed:{uint8array:function(){try{return m.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return m.nodebuffer&&String.fromCharCode.apply(null,v.allocBuffer(1)).length===1}catch{return!1}}()}};function U(G){var tt=65536,K=g.getTypeOf(G),B=!0;if(K==="uint8array"?B=D.applyCanBeUsed.uint8array:K==="nodebuffer"&&(B=D.applyCanBeUsed.nodebuffer),B)for(;1<tt;)try{return D.stringifyByChunk(G,K,tt)}catch{tt=Math.floor(tt/2)}return D.stringifyByChar(G)}function z(G,tt){for(var K=0;K<G.length;K++)tt[K]=G[K];return tt}g.applyFromCharCode=U;var V={};V.string={string:S,array:function(G){return O(G,new Array(G.length))},arraybuffer:function(G){return V.string.uint8array(G).buffer},uint8array:function(G){return O(G,new Uint8Array(G.length))},nodebuffer:function(G){return O(G,v.allocBuffer(G.length))}},V.array={string:U,array:S,arraybuffer:function(G){return new Uint8Array(G).buffer},uint8array:function(G){return new Uint8Array(G)},nodebuffer:function(G){return v.newBufferFrom(G)}},V.arraybuffer={string:function(G){return U(new Uint8Array(G))},array:function(G){return z(new Uint8Array(G),new Array(G.byteLength))},arraybuffer:S,uint8array:function(G){return new Uint8Array(G)},nodebuffer:function(G){return v.newBufferFrom(new Uint8Array(G))}},V.uint8array={string:U,array:function(G){return z(G,new Array(G.length))},arraybuffer:function(G){return G.buffer},uint8array:S,nodebuffer:function(G){return v.newBufferFrom(G)}},V.nodebuffer={string:U,array:function(G){return z(G,new Array(G.length))},arraybuffer:function(G){return V.nodebuffer.uint8array(G).buffer},uint8array:function(G){return z(G,new Uint8Array(G.length))},nodebuffer:S},g.transformTo=function(G,tt){if(tt=tt||"",!G)return tt;g.checkSupport(G);var K=g.getTypeOf(tt);return V[K][G](tt)},g.resolve=function(G){for(var tt=G.split("/"),K=[],B=0;B<tt.length;B++){var N=tt[B];N==="."||N===""&&B!==0&&B!==tt.length-1||(N===".."?K.pop():K.push(N))}return K.join("/")},g.getTypeOf=function(G){return typeof G=="string"?"string":Object.prototype.toString.call(G)==="[object Array]"?"array":m.nodebuffer&&v.isBuffer(G)?"nodebuffer":m.uint8array&&G instanceof Uint8Array?"uint8array":m.arraybuffer&&G instanceof ArrayBuffer?"arraybuffer":void 0},g.checkSupport=function(G){if(!m[G.toLowerCase()])throw new Error(G+" is not supported by this platform")},g.MAX_VALUE_16BITS=65535,g.MAX_VALUE_32BITS=-1,g.pretty=function(G){var tt,K,B="";for(K=0;K<(G||"").length;K++)B+="\\x"+((tt=G.charCodeAt(K))<16?"0":"")+tt.toString(16).toUpperCase();return B},g.delay=function(G,tt,K){h(function(){G.apply(K||null,tt||[])})},g.inherits=function(G,tt){function K(){}K.prototype=tt.prototype,G.prototype=new K},g.extend=function(){var G,tt,K={};for(G=0;G<arguments.length;G++)for(tt in arguments[G])Object.prototype.hasOwnProperty.call(arguments[G],tt)&&K[tt]===void 0&&(K[tt]=arguments[G][tt]);return K},g.prepareContent=function(G,tt,K,B,N){return x.Promise.resolve(tt).then(function(Z){return m.blob&&(Z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Z))!==-1)&&typeof FileReader<"u"?new x.Promise(function(w,C){var k=new FileReader;k.onload=function(T){w(T.target.result)},k.onerror=function(T){C(T.target.error)},k.readAsArrayBuffer(Z)}):Z}).then(function(Z){var w=g.getTypeOf(Z);return w?(w==="arraybuffer"?Z=g.transformTo("uint8array",Z):w==="string"&&(N?Z=_.decode(Z):K&&B!==!0&&(Z=function(C){return O(C,m.uint8array?new Uint8Array(C.length):new Array(C.length))}(Z))),Z):x.Promise.reject(new Error("Can't read the data of '"+G+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(d,p,g){var m=d("./reader/readerFor"),_=d("./utils"),v=d("./signature"),x=d("./zipEntry"),S=d("./support");function O(D){this.files=[],this.loadOptions=D}O.prototype={checkSignature:function(D){if(!this.reader.readAndCheckSignature(D)){this.reader.index-=4;var U=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+_.pretty(U)+", expected "+_.pretty(D)+")")}},isSignature:function(D,U){var z=this.reader.index;this.reader.setIndex(D);var V=this.reader.readString(4)===U;return this.reader.setIndex(z),V},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var D=this.reader.readData(this.zipCommentLength),U=S.uint8array?"uint8array":"array",z=_.transformTo(U,D);this.zipComment=this.loadOptions.decodeFileName(z)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var D,U,z,V=this.zip64EndOfCentralSize-44;0<V;)D=this.reader.readInt(2),U=this.reader.readInt(4),z=this.reader.readData(U),this.zip64ExtensibleData[D]={id:D,length:U,value:z}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var D,U;for(D=0;D<this.files.length;D++)U=this.files[D],this.reader.setIndex(U.localHeaderOffset),this.checkSignature(v.LOCAL_FILE_HEADER),U.readLocalPart(this.reader),U.handleUTF8(),U.processAttributes()},readCentralDir:function(){var D;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(v.CENTRAL_FILE_HEADER);)(D=new x({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(D);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var D=this.reader.lastIndexOfSignature(v.CENTRAL_DIRECTORY_END);if(D<0)throw this.isSignature(0,v.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(D);var U=D;if(this.checkSignature(v.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===_.MAX_VALUE_16BITS||this.diskWithCentralDirStart===_.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===_.MAX_VALUE_16BITS||this.centralDirRecords===_.MAX_VALUE_16BITS||this.centralDirSize===_.MAX_VALUE_32BITS||this.centralDirOffset===_.MAX_VALUE_32BITS){if(this.zip64=!0,(D=this.reader.lastIndexOfSignature(v.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(D),this.checkSignature(v.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,v.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(v.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(v.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var z=this.centralDirOffset+this.centralDirSize;this.zip64&&(z+=20,z+=12+this.zip64EndOfCentralSize);var V=U-z;if(0<V)this.isSignature(U,v.CENTRAL_FILE_HEADER)||(this.reader.zero=V);else if(V<0)throw new Error("Corrupted zip: missing "+Math.abs(V)+" bytes.")},prepareReader:function(D){this.reader=m(D)},load:function(D){this.prepareReader(D),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},p.exports=O},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(d,p,g){var m=d("./reader/readerFor"),_=d("./utils"),v=d("./compressedObject"),x=d("./crc32"),S=d("./utf8"),O=d("./compressions"),D=d("./support");function U(z,V){this.options=z,this.loadOptions=V}U.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(z){var V,G;if(z.skip(22),this.fileNameLength=z.readInt(2),G=z.readInt(2),this.fileName=z.readData(this.fileNameLength),z.skip(G),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((V=function(tt){for(var K in O)if(Object.prototype.hasOwnProperty.call(O,K)&&O[K].magic===tt)return O[K];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+_.pretty(this.compressionMethod)+" unknown (inner file : "+_.transformTo("string",this.fileName)+")");this.decompressed=new v(this.compressedSize,this.uncompressedSize,this.crc32,V,z.readData(this.compressedSize))},readCentralPart:function(z){this.versionMadeBy=z.readInt(2),z.skip(2),this.bitFlag=z.readInt(2),this.compressionMethod=z.readString(2),this.date=z.readDate(),this.crc32=z.readInt(4),this.compressedSize=z.readInt(4),this.uncompressedSize=z.readInt(4);var V=z.readInt(2);if(this.extraFieldsLength=z.readInt(2),this.fileCommentLength=z.readInt(2),this.diskNumberStart=z.readInt(2),this.internalFileAttributes=z.readInt(2),this.externalFileAttributes=z.readInt(4),this.localHeaderOffset=z.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");z.skip(V),this.readExtraFields(z),this.parseZIP64ExtraField(z),this.fileComment=z.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var z=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),z==0&&(this.dosPermissions=63&this.externalFileAttributes),z==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var z=m(this.extraFields[1].value);this.uncompressedSize===_.MAX_VALUE_32BITS&&(this.uncompressedSize=z.readInt(8)),this.compressedSize===_.MAX_VALUE_32BITS&&(this.compressedSize=z.readInt(8)),this.localHeaderOffset===_.MAX_VALUE_32BITS&&(this.localHeaderOffset=z.readInt(8)),this.diskNumberStart===_.MAX_VALUE_32BITS&&(this.diskNumberStart=z.readInt(4))}},readExtraFields:function(z){var V,G,tt,K=z.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});z.index+4<K;)V=z.readInt(2),G=z.readInt(2),tt=z.readData(G),this.extraFields[V]={id:V,length:G,value:tt};z.setIndex(K)},handleUTF8:function(){var z=D.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=S.utf8decode(this.fileName),this.fileCommentStr=S.utf8decode(this.fileComment);else{var V=this.findExtraFieldUnicodePath();if(V!==null)this.fileNameStr=V;else{var G=_.transformTo(z,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(G)}var tt=this.findExtraFieldUnicodeComment();if(tt!==null)this.fileCommentStr=tt;else{var K=_.transformTo(z,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(K)}}},findExtraFieldUnicodePath:function(){var z=this.extraFields[28789];if(z){var V=m(z.value);return V.readInt(1)!==1||x(this.fileName)!==V.readInt(4)?null:S.utf8decode(V.readData(z.length-5))}return null},findExtraFieldUnicodeComment:function(){var z=this.extraFields[25461];if(z){var V=m(z.value);return V.readInt(1)!==1||x(this.fileComment)!==V.readInt(4)?null:S.utf8decode(V.readData(z.length-5))}return null}},p.exports=U},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(d,p,g){function m(V,G,tt){this.name=V,this.dir=tt.dir,this.date=tt.date,this.comment=tt.comment,this.unixPermissions=tt.unixPermissions,this.dosPermissions=tt.dosPermissions,this._data=G,this._dataBinary=tt.binary,this.options={compression:tt.compression,compressionOptions:tt.compressionOptions}}var _=d("./stream/StreamHelper"),v=d("./stream/DataWorker"),x=d("./utf8"),S=d("./compressedObject"),O=d("./stream/GenericWorker");m.prototype={internalStream:function(V){var G=null,tt="string";try{if(!V)throw new Error("No output type specified.");var K=(tt=V.toLowerCase())==="string"||tt==="text";tt!=="binarystring"&&tt!=="text"||(tt="string"),G=this._decompressWorker();var B=!this._dataBinary;B&&!K&&(G=G.pipe(new x.Utf8EncodeWorker)),!B&&K&&(G=G.pipe(new x.Utf8DecodeWorker))}catch(N){(G=new O("error")).error(N)}return new _(G,tt,"")},async:function(V,G){return this.internalStream(V).accumulate(G)},nodeStream:function(V,G){return this.internalStream(V||"nodebuffer").toNodejsStream(G)},_compressWorker:function(V,G){if(this._data instanceof S&&this._data.compression.magic===V.magic)return this._data.getCompressedWorker();var tt=this._decompressWorker();return this._dataBinary||(tt=tt.pipe(new x.Utf8EncodeWorker)),S.createWorkerFrom(tt,V,G)},_decompressWorker:function(){return this._data instanceof S?this._data.getContentWorker():this._data instanceof O?this._data:new v(this._data)}};for(var D=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],U=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},z=0;z<D.length;z++)m.prototype[D[z]]=U;p.exports=m},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(d,p,g){(function(m){var _,v,x=m.MutationObserver||m.WebKitMutationObserver;if(x){var S=0,O=new x(V),D=m.document.createTextNode("");O.observe(D,{characterData:!0}),_=function(){D.data=S=++S%2}}else if(m.setImmediate||m.MessageChannel===void 0)_="document"in m&&"onreadystatechange"in m.document.createElement("script")?function(){var G=m.document.createElement("script");G.onreadystatechange=function(){V(),G.onreadystatechange=null,G.parentNode.removeChild(G),G=null},m.document.documentElement.appendChild(G)}:function(){setTimeout(V,0)};else{var U=new m.MessageChannel;U.port1.onmessage=V,_=function(){U.port2.postMessage(0)}}var z=[];function V(){var G,tt;v=!0;for(var K=z.length;K;){for(tt=z,z=[],G=-1;++G<K;)tt[G]();K=z.length}v=!1}p.exports=function(G){z.push(G)!==1||v||_()}}).call(this,r!==void 0?r:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(d,p,g){var m=d("immediate");function _(){}var v={},x=["REJECTED"],S=["FULFILLED"],O=["PENDING"];function D(K){if(typeof K!="function")throw new TypeError("resolver must be a function");this.state=O,this.queue=[],this.outcome=void 0,K!==_&&G(this,K)}function U(K,B,N){this.promise=K,typeof B=="function"&&(this.onFulfilled=B,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function z(K,B,N){m(function(){var Z;try{Z=B(N)}catch(w){return v.reject(K,w)}Z===K?v.reject(K,new TypeError("Cannot resolve promise with itself")):v.resolve(K,Z)})}function V(K){var B=K&&K.then;if(K&&(typeof K=="object"||typeof K=="function")&&typeof B=="function")return function(){B.apply(K,arguments)}}function G(K,B){var N=!1;function Z(k){N||(N=!0,v.reject(K,k))}function w(k){N||(N=!0,v.resolve(K,k))}var C=tt(function(){B(w,Z)});C.status==="error"&&Z(C.value)}function tt(K,B){var N={};try{N.value=K(B),N.status="success"}catch(Z){N.status="error",N.value=Z}return N}(p.exports=D).prototype.finally=function(K){if(typeof K!="function")return this;var B=this.constructor;return this.then(function(N){return B.resolve(K()).then(function(){return N})},function(N){return B.resolve(K()).then(function(){throw N})})},D.prototype.catch=function(K){return this.then(null,K)},D.prototype.then=function(K,B){if(typeof K!="function"&&this.state===S||typeof B!="function"&&this.state===x)return this;var N=new this.constructor(_);return this.state!==O?z(N,this.state===S?K:B,this.outcome):this.queue.push(new U(N,K,B)),N},U.prototype.callFulfilled=function(K){v.resolve(this.promise,K)},U.prototype.otherCallFulfilled=function(K){z(this.promise,this.onFulfilled,K)},U.prototype.callRejected=function(K){v.reject(this.promise,K)},U.prototype.otherCallRejected=function(K){z(this.promise,this.onRejected,K)},v.resolve=function(K,B){var N=tt(V,B);if(N.status==="error")return v.reject(K,N.value);var Z=N.value;if(Z)G(K,Z);else{K.state=S,K.outcome=B;for(var w=-1,C=K.queue.length;++w<C;)K.queue[w].callFulfilled(B)}return K},v.reject=function(K,B){K.state=x,K.outcome=B;for(var N=-1,Z=K.queue.length;++N<Z;)K.queue[N].callRejected(B);return K},D.resolve=function(K){return K instanceof this?K:v.resolve(new this(_),K)},D.reject=function(K){var B=new this(_);return v.reject(B,K)},D.all=function(K){var B=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=K.length,Z=!1;if(!N)return this.resolve([]);for(var w=new Array(N),C=0,k=-1,T=new this(_);++k<N;)R(K[k],k);return T;function R(F,H){B.resolve(F).then(function(it){w[H]=it,++C!==N||Z||(Z=!0,v.resolve(T,w))},function(it){Z||(Z=!0,v.reject(T,it))})}},D.race=function(K){if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=K.length,N=!1;if(!B)return this.resolve([]);for(var Z,w=-1,C=new this(_);++w<B;)Z=K[w],this.resolve(Z).then(function(k){N||(N=!0,v.resolve(C,k))},function(k){N||(N=!0,v.reject(C,k))});return C}},{immediate:36}],38:[function(d,p,g){var m={};(0,d("./lib/utils/common").assign)(m,d("./lib/deflate"),d("./lib/inflate"),d("./lib/zlib/constants")),p.exports=m},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(d,p,g){var m=d("./zlib/deflate"),_=d("./utils/common"),v=d("./utils/strings"),x=d("./zlib/messages"),S=d("./zlib/zstream"),O=Object.prototype.toString;function D(z){if(!(this instanceof D))return new D(z);this.options=_.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},z||{});var V=this.options;V.raw&&0<V.windowBits?V.windowBits=-V.windowBits:V.gzip&&0<V.windowBits&&V.windowBits<16&&(V.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var G=m.deflateInit2(this.strm,V.level,V.method,V.windowBits,V.memLevel,V.strategy);if(G!==0)throw new Error(x[G]);if(V.header&&m.deflateSetHeader(this.strm,V.header),V.dictionary){var tt;if(tt=typeof V.dictionary=="string"?v.string2buf(V.dictionary):O.call(V.dictionary)==="[object ArrayBuffer]"?new Uint8Array(V.dictionary):V.dictionary,(G=m.deflateSetDictionary(this.strm,tt))!==0)throw new Error(x[G]);this._dict_set=!0}}function U(z,V){var G=new D(V);if(G.push(z,!0),G.err)throw G.msg||x[G.err];return G.result}D.prototype.push=function(z,V){var G,tt,K=this.strm,B=this.options.chunkSize;if(this.ended)return!1;tt=V===~~V?V:V===!0?4:0,typeof z=="string"?K.input=v.string2buf(z):O.call(z)==="[object ArrayBuffer]"?K.input=new Uint8Array(z):K.input=z,K.next_in=0,K.avail_in=K.input.length;do{if(K.avail_out===0&&(K.output=new _.Buf8(B),K.next_out=0,K.avail_out=B),(G=m.deflate(K,tt))!==1&&G!==0)return this.onEnd(G),!(this.ended=!0);K.avail_out!==0&&(K.avail_in!==0||tt!==4&&tt!==2)||(this.options.to==="string"?this.onData(v.buf2binstring(_.shrinkBuf(K.output,K.next_out))):this.onData(_.shrinkBuf(K.output,K.next_out)))}while((0<K.avail_in||K.avail_out===0)&&G!==1);return tt===4?(G=m.deflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===0):tt!==2||(this.onEnd(0),!(K.avail_out=0))},D.prototype.onData=function(z){this.chunks.push(z)},D.prototype.onEnd=function(z){z===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},g.Deflate=D,g.deflate=U,g.deflateRaw=function(z,V){return(V=V||{}).raw=!0,U(z,V)},g.gzip=function(z,V){return(V=V||{}).gzip=!0,U(z,V)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(d,p,g){var m=d("./zlib/inflate"),_=d("./utils/common"),v=d("./utils/strings"),x=d("./zlib/constants"),S=d("./zlib/messages"),O=d("./zlib/zstream"),D=d("./zlib/gzheader"),U=Object.prototype.toString;function z(G){if(!(this instanceof z))return new z(G);this.options=_.assign({chunkSize:16384,windowBits:0,to:""},G||{});var tt=this.options;tt.raw&&0<=tt.windowBits&&tt.windowBits<16&&(tt.windowBits=-tt.windowBits,tt.windowBits===0&&(tt.windowBits=-15)),!(0<=tt.windowBits&&tt.windowBits<16)||G&&G.windowBits||(tt.windowBits+=32),15<tt.windowBits&&tt.windowBits<48&&!(15&tt.windowBits)&&(tt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new O,this.strm.avail_out=0;var K=m.inflateInit2(this.strm,tt.windowBits);if(K!==x.Z_OK)throw new Error(S[K]);this.header=new D,m.inflateGetHeader(this.strm,this.header)}function V(G,tt){var K=new z(tt);if(K.push(G,!0),K.err)throw K.msg||S[K.err];return K.result}z.prototype.push=function(G,tt){var K,B,N,Z,w,C,k=this.strm,T=this.options.chunkSize,R=this.options.dictionary,F=!1;if(this.ended)return!1;B=tt===~~tt?tt:tt===!0?x.Z_FINISH:x.Z_NO_FLUSH,typeof G=="string"?k.input=v.binstring2buf(G):U.call(G)==="[object ArrayBuffer]"?k.input=new Uint8Array(G):k.input=G,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new _.Buf8(T),k.next_out=0,k.avail_out=T),(K=m.inflate(k,x.Z_NO_FLUSH))===x.Z_NEED_DICT&&R&&(C=typeof R=="string"?v.string2buf(R):U.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,K=m.inflateSetDictionary(this.strm,C)),K===x.Z_BUF_ERROR&&F===!0&&(K=x.Z_OK,F=!1),K!==x.Z_STREAM_END&&K!==x.Z_OK)return this.onEnd(K),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&K!==x.Z_STREAM_END&&(k.avail_in!==0||B!==x.Z_FINISH&&B!==x.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=v.utf8border(k.output,k.next_out),Z=k.next_out-N,w=v.buf2string(k.output,N),k.next_out=Z,k.avail_out=T-Z,Z&&_.arraySet(k.output,k.output,N,Z,0),this.onData(w)):this.onData(_.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(F=!0)}while((0<k.avail_in||k.avail_out===0)&&K!==x.Z_STREAM_END);return K===x.Z_STREAM_END&&(B=x.Z_FINISH),B===x.Z_FINISH?(K=m.inflateEnd(this.strm),this.onEnd(K),this.ended=!0,K===x.Z_OK):B!==x.Z_SYNC_FLUSH||(this.onEnd(x.Z_OK),!(k.avail_out=0))},z.prototype.onData=function(G){this.chunks.push(G)},z.prototype.onEnd=function(G){G===x.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=G,this.msg=this.strm.msg},g.Inflate=z,g.inflate=V,g.inflateRaw=function(G,tt){return(tt=tt||{}).raw=!0,V(G,tt)},g.ungzip=V},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(d,p,g){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";g.assign=function(x){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var O=S.shift();if(O){if(typeof O!="object")throw new TypeError(O+"must be non-object");for(var D in O)O.hasOwnProperty(D)&&(x[D]=O[D])}}return x},g.shrinkBuf=function(x,S){return x.length===S?x:x.subarray?x.subarray(0,S):(x.length=S,x)};var _={arraySet:function(x,S,O,D,U){if(S.subarray&&x.subarray)x.set(S.subarray(O,O+D),U);else for(var z=0;z<D;z++)x[U+z]=S[O+z]},flattenChunks:function(x){var S,O,D,U,z,V;for(S=D=0,O=x.length;S<O;S++)D+=x[S].length;for(V=new Uint8Array(D),S=U=0,O=x.length;S<O;S++)z=x[S],V.set(z,U),U+=z.length;return V}},v={arraySet:function(x,S,O,D,U){for(var z=0;z<D;z++)x[U+z]=S[O+z]},flattenChunks:function(x){return[].concat.apply([],x)}};g.setTyped=function(x){x?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,_)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,v))},g.setTyped(m)},{}],42:[function(d,p,g){var m=d("./common"),_=!0,v=!0;try{String.fromCharCode.apply(null,[0])}catch{_=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{v=!1}for(var x=new m.Buf8(256),S=0;S<256;S++)x[S]=252<=S?6:248<=S?5:240<=S?4:224<=S?3:192<=S?2:1;function O(D,U){if(U<65537&&(D.subarray&&v||!D.subarray&&_))return String.fromCharCode.apply(null,m.shrinkBuf(D,U));for(var z="",V=0;V<U;V++)z+=String.fromCharCode(D[V]);return z}x[254]=x[254]=1,g.string2buf=function(D){var U,z,V,G,tt,K=D.length,B=0;for(G=0;G<K;G++)(64512&(z=D.charCodeAt(G)))==55296&&G+1<K&&(64512&(V=D.charCodeAt(G+1)))==56320&&(z=65536+(z-55296<<10)+(V-56320),G++),B+=z<128?1:z<2048?2:z<65536?3:4;for(U=new m.Buf8(B),G=tt=0;tt<B;G++)(64512&(z=D.charCodeAt(G)))==55296&&G+1<K&&(64512&(V=D.charCodeAt(G+1)))==56320&&(z=65536+(z-55296<<10)+(V-56320),G++),z<128?U[tt++]=z:(z<2048?U[tt++]=192|z>>>6:(z<65536?U[tt++]=224|z>>>12:(U[tt++]=240|z>>>18,U[tt++]=128|z>>>12&63),U[tt++]=128|z>>>6&63),U[tt++]=128|63&z);return U},g.buf2binstring=function(D){return O(D,D.length)},g.binstring2buf=function(D){for(var U=new m.Buf8(D.length),z=0,V=U.length;z<V;z++)U[z]=D.charCodeAt(z);return U},g.buf2string=function(D,U){var z,V,G,tt,K=U||D.length,B=new Array(2*K);for(z=V=0;z<K;)if((G=D[z++])<128)B[V++]=G;else if(4<(tt=x[G]))B[V++]=65533,z+=tt-1;else{for(G&=tt===2?31:tt===3?15:7;1<tt&&z<K;)G=G<<6|63&D[z++],tt--;1<tt?B[V++]=65533:G<65536?B[V++]=G:(G-=65536,B[V++]=55296|G>>10&1023,B[V++]=56320|1023&G)}return O(B,V)},g.utf8border=function(D,U){var z;for((U=U||D.length)>D.length&&(U=D.length),z=U-1;0<=z&&(192&D[z])==128;)z--;return z<0||z===0?U:z+x[D[z]]>U?z:U}},{"./common":41}],43:[function(d,p,g){p.exports=function(m,_,v,x){for(var S=65535&m|0,O=m>>>16&65535|0,D=0;v!==0;){for(v-=D=2e3<v?2e3:v;O=O+(S=S+_[x++]|0)|0,--D;);S%=65521,O%=65521}return S|O<<16|0}},{}],44:[function(d,p,g){p.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(d,p,g){var m=function(){for(var _,v=[],x=0;x<256;x++){_=x;for(var S=0;S<8;S++)_=1&_?3988292384^_>>>1:_>>>1;v[x]=_}return v}();p.exports=function(_,v,x,S){var O=m,D=S+x;_^=-1;for(var U=S;U<D;U++)_=_>>>8^O[255&(_^v[U])];return-1^_}},{}],46:[function(d,p,g){var m,_=d("../utils/common"),v=d("./trees"),x=d("./adler32"),S=d("./crc32"),O=d("./messages"),D=-2,U=258,z=262,V=113;function G($,ct){return $.msg=O[ct],ct}function tt($){return($<<1)-(4<$?9:0)}function K($){for(var ct=$.length;0<=--ct;)$[ct]=0}function B($){var ct=$.state,W=ct.pending;W>$.avail_out&&(W=$.avail_out),W!==0&&(_.arraySet($.output,ct.pending_buf,ct.pending_out,W,$.next_out),$.next_out+=W,ct.pending_out+=W,$.total_out+=W,$.avail_out-=W,ct.pending-=W,ct.pending===0&&(ct.pending_out=0))}function N($,ct){v._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,ct),$.block_start=$.strstart,B($.strm)}function Z($,ct){$.pending_buf[$.pending++]=ct}function w($,ct){$.pending_buf[$.pending++]=ct>>>8&255,$.pending_buf[$.pending++]=255&ct}function C($,ct){var W,q,rt=$.max_chain_length,mt=$.strstart,wt=$.prev_length,_t=$.nice_match,Ct=$.strstart>$.w_size-z?$.strstart-($.w_size-z):0,Ft=$.window,At=$.w_mask,vt=$.prev,kt=$.strstart+U,gt=Ft[mt+wt-1],ut=Ft[mt+wt];$.prev_length>=$.good_match&&(rt>>=2),_t>$.lookahead&&(_t=$.lookahead);do if(Ft[(W=ct)+wt]===ut&&Ft[W+wt-1]===gt&&Ft[W]===Ft[mt]&&Ft[++W]===Ft[mt+1]){mt+=2,W++;do;while(Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&mt<kt);if(q=U-(kt-mt),mt=kt-U,wt<q){if($.match_start=ct,_t<=(wt=q))break;gt=Ft[mt+wt-1],ut=Ft[mt+wt]}}while((ct=vt[ct&At])>Ct&&--rt!=0);return wt<=$.lookahead?wt:$.lookahead}function k($){var ct,W,q,rt,mt,wt,_t,Ct,Ft,At,vt=$.w_size;do{if(rt=$.window_size-$.lookahead-$.strstart,$.strstart>=vt+(vt-z)){for(_.arraySet($.window,$.window,vt,vt,0),$.match_start-=vt,$.strstart-=vt,$.block_start-=vt,ct=W=$.hash_size;q=$.head[--ct],$.head[ct]=vt<=q?q-vt:0,--W;);for(ct=W=vt;q=$.prev[--ct],$.prev[ct]=vt<=q?q-vt:0,--W;);rt+=vt}if($.strm.avail_in===0)break;if(wt=$.strm,_t=$.window,Ct=$.strstart+$.lookahead,At=void 0,(Ft=rt)<(At=wt.avail_in)&&(At=Ft),W=At===0?0:(wt.avail_in-=At,_.arraySet(_t,wt.input,wt.next_in,At,Ct),wt.state.wrap===1?wt.adler=x(wt.adler,_t,At,Ct):wt.state.wrap===2&&(wt.adler=S(wt.adler,_t,At,Ct)),wt.next_in+=At,wt.total_in+=At,At),$.lookahead+=W,$.lookahead+$.insert>=3)for(mt=$.strstart-$.insert,$.ins_h=$.window[mt],$.ins_h=($.ins_h<<$.hash_shift^$.window[mt+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[mt+3-1])&$.hash_mask,$.prev[mt&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=mt,mt++,$.insert--,!($.lookahead+$.insert<3)););}while($.lookahead<z&&$.strm.avail_in!==0)}function T($,ct){for(var W,q;;){if($.lookahead<z){if(k($),$.lookahead<z&&ct===0)return 1;if($.lookahead===0)break}if(W=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),W!==0&&$.strstart-W<=$.w_size-z&&($.match_length=C($,W)),$.match_length>=3)if(q=v._tr_tally($,$.strstart-$.match_start,$.match_length-3),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=3){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else q=v._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(q&&(N($,!1),$.strm.avail_out===0))return 1}return $.insert=$.strstart<2?$.strstart:2,ct===4?(N($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(N($,!1),$.strm.avail_out===0)?1:2}function R($,ct){for(var W,q,rt;;){if($.lookahead<z){if(k($),$.lookahead<z&&ct===0)return 1;if($.lookahead===0)break}if(W=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=2,W!==0&&$.prev_length<$.max_lazy_match&&$.strstart-W<=$.w_size-z&&($.match_length=C($,W),$.match_length<=5&&($.strategy===1||$.match_length===3&&4096<$.strstart-$.match_start)&&($.match_length=2)),$.prev_length>=3&&$.match_length<=$.prev_length){for(rt=$.strstart+$.lookahead-3,q=v._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-3),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=rt&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=2,$.strstart++,q&&(N($,!1),$.strm.avail_out===0))return 1}else if($.match_available){if((q=v._tr_tally($,0,$.window[$.strstart-1]))&&N($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return 1}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(q=v._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<2?$.strstart:2,ct===4?(N($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(N($,!1),$.strm.avail_out===0)?1:2}function F($,ct,W,q,rt){this.good_length=$,this.max_lazy=ct,this.nice_length=W,this.max_chain=q,this.func=rt}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(1146),this.dyn_dtree=new _.Buf16(122),this.bl_tree=new _.Buf16(78),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(16),this.heap=new _.Buf16(573),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(573),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it($){var ct;return $&&$.state?($.total_in=$.total_out=0,$.data_type=2,(ct=$.state).pending=0,ct.pending_out=0,ct.wrap<0&&(ct.wrap=-ct.wrap),ct.status=ct.wrap?42:V,$.adler=ct.wrap===2?0:1,ct.last_flush=0,v._tr_init(ct),0):G($,D)}function ot($){var ct=it($);return ct===0&&function(W){W.window_size=2*W.w_size,K(W.head),W.max_lazy_match=m[W.level].max_lazy,W.good_match=m[W.level].good_length,W.nice_match=m[W.level].nice_length,W.max_chain_length=m[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=2,W.match_available=0,W.ins_h=0}($.state),ct}function dt($,ct,W,q,rt,mt){if(!$)return D;var wt=1;if(ct===-1&&(ct=6),q<0?(wt=0,q=-q):15<q&&(wt=2,q-=16),rt<1||9<rt||W!==8||q<8||15<q||ct<0||9<ct||mt<0||4<mt)return G($,D);q===8&&(q=9);var _t=new H;return($.state=_t).strm=$,_t.wrap=wt,_t.gzhead=null,_t.w_bits=q,_t.w_size=1<<_t.w_bits,_t.w_mask=_t.w_size-1,_t.hash_bits=rt+7,_t.hash_size=1<<_t.hash_bits,_t.hash_mask=_t.hash_size-1,_t.hash_shift=~~((_t.hash_bits+3-1)/3),_t.window=new _.Buf8(2*_t.w_size),_t.head=new _.Buf16(_t.hash_size),_t.prev=new _.Buf16(_t.w_size),_t.lit_bufsize=1<<rt+6,_t.pending_buf_size=4*_t.lit_bufsize,_t.pending_buf=new _.Buf8(_t.pending_buf_size),_t.d_buf=1*_t.lit_bufsize,_t.l_buf=3*_t.lit_bufsize,_t.level=ct,_t.strategy=mt,_t.method=W,ot($)}m=[new F(0,0,0,0,function($,ct){var W=65535;for(W>$.pending_buf_size-5&&(W=$.pending_buf_size-5);;){if($.lookahead<=1){if(k($),$.lookahead===0&&ct===0)return 1;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var q=$.block_start+W;if(($.strstart===0||$.strstart>=q)&&($.lookahead=$.strstart-q,$.strstart=q,N($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-z&&(N($,!1),$.strm.avail_out===0))return 1}return $.insert=0,ct===4?(N($,!0),$.strm.avail_out===0?3:4):($.strstart>$.block_start&&(N($,!1),$.strm.avail_out),1)}),new F(4,4,8,4,T),new F(4,5,16,8,T),new F(4,6,32,32,T),new F(4,4,16,16,R),new F(8,16,32,32,R),new F(8,16,128,128,R),new F(8,32,128,256,R),new F(32,128,258,1024,R),new F(32,258,258,4096,R)],g.deflateInit=function($,ct){return dt($,ct,8,15,8,0)},g.deflateInit2=dt,g.deflateReset=ot,g.deflateResetKeep=it,g.deflateSetHeader=function($,ct){return $&&$.state?$.state.wrap!==2?D:($.state.gzhead=ct,0):D},g.deflate=function($,ct){var W,q,rt,mt;if(!$||!$.state||5<ct||ct<0)return $?G($,D):D;if(q=$.state,!$.output||!$.input&&$.avail_in!==0||q.status===666&&ct!==4)return G($,$.avail_out===0?-5:D);if(q.strm=$,W=q.last_flush,q.last_flush=ct,q.status===42)if(q.wrap===2)$.adler=0,Z(q,31),Z(q,139),Z(q,8),q.gzhead?(Z(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),Z(q,255&q.gzhead.time),Z(q,q.gzhead.time>>8&255),Z(q,q.gzhead.time>>16&255),Z(q,q.gzhead.time>>24&255),Z(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),Z(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(Z(q,255&q.gzhead.extra.length),Z(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&($.adler=S($.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(Z(q,0),Z(q,0),Z(q,0),Z(q,0),Z(q,0),Z(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),Z(q,3),q.status=V);else{var wt=8+(q.w_bits-8<<4)<<8;wt|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(wt|=32),wt+=31-wt%31,q.status=V,w(q,wt),q.strstart!==0&&(w(q,$.adler>>>16),w(q,65535&$.adler)),$.adler=1}if(q.status===69)if(q.gzhead.extra){for(rt=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>rt&&($.adler=S($.adler,q.pending_buf,q.pending-rt,rt)),B($),rt=q.pending,q.pending!==q.pending_buf_size));)Z(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>rt&&($.adler=S($.adler,q.pending_buf,q.pending-rt,rt)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){rt=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>rt&&($.adler=S($.adler,q.pending_buf,q.pending-rt,rt)),B($),rt=q.pending,q.pending===q.pending_buf_size)){mt=1;break}mt=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,Z(q,mt)}while(mt!==0);q.gzhead.hcrc&&q.pending>rt&&($.adler=S($.adler,q.pending_buf,q.pending-rt,rt)),mt===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){rt=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>rt&&($.adler=S($.adler,q.pending_buf,q.pending-rt,rt)),B($),rt=q.pending,q.pending===q.pending_buf_size)){mt=1;break}mt=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,Z(q,mt)}while(mt!==0);q.gzhead.hcrc&&q.pending>rt&&($.adler=S($.adler,q.pending_buf,q.pending-rt,rt)),mt===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&B($),q.pending+2<=q.pending_buf_size&&(Z(q,255&$.adler),Z(q,$.adler>>8&255),$.adler=0,q.status=V)):q.status=V),q.pending!==0){if(B($),$.avail_out===0)return q.last_flush=-1,0}else if($.avail_in===0&&tt(ct)<=tt(W)&&ct!==4)return G($,-5);if(q.status===666&&$.avail_in!==0)return G($,-5);if($.avail_in!==0||q.lookahead!==0||ct!==0&&q.status!==666){var _t=q.strategy===2?function(Ct,Ft){for(var At;;){if(Ct.lookahead===0&&(k(Ct),Ct.lookahead===0)){if(Ft===0)return 1;break}if(Ct.match_length=0,At=v._tr_tally(Ct,0,Ct.window[Ct.strstart]),Ct.lookahead--,Ct.strstart++,At&&(N(Ct,!1),Ct.strm.avail_out===0))return 1}return Ct.insert=0,Ft===4?(N(Ct,!0),Ct.strm.avail_out===0?3:4):Ct.last_lit&&(N(Ct,!1),Ct.strm.avail_out===0)?1:2}(q,ct):q.strategy===3?function(Ct,Ft){for(var At,vt,kt,gt,ut=Ct.window;;){if(Ct.lookahead<=U){if(k(Ct),Ct.lookahead<=U&&Ft===0)return 1;if(Ct.lookahead===0)break}if(Ct.match_length=0,Ct.lookahead>=3&&0<Ct.strstart&&(vt=ut[kt=Ct.strstart-1])===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]){gt=Ct.strstart+U;do;while(vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&kt<gt);Ct.match_length=U-(gt-kt),Ct.match_length>Ct.lookahead&&(Ct.match_length=Ct.lookahead)}if(Ct.match_length>=3?(At=v._tr_tally(Ct,1,Ct.match_length-3),Ct.lookahead-=Ct.match_length,Ct.strstart+=Ct.match_length,Ct.match_length=0):(At=v._tr_tally(Ct,0,Ct.window[Ct.strstart]),Ct.lookahead--,Ct.strstart++),At&&(N(Ct,!1),Ct.strm.avail_out===0))return 1}return Ct.insert=0,Ft===4?(N(Ct,!0),Ct.strm.avail_out===0?3:4):Ct.last_lit&&(N(Ct,!1),Ct.strm.avail_out===0)?1:2}(q,ct):m[q.level].func(q,ct);if(_t!==3&&_t!==4||(q.status=666),_t===1||_t===3)return $.avail_out===0&&(q.last_flush=-1),0;if(_t===2&&(ct===1?v._tr_align(q):ct!==5&&(v._tr_stored_block(q,0,0,!1),ct===3&&(K(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),B($),$.avail_out===0))return q.last_flush=-1,0}return ct!==4?0:q.wrap<=0?1:(q.wrap===2?(Z(q,255&$.adler),Z(q,$.adler>>8&255),Z(q,$.adler>>16&255),Z(q,$.adler>>24&255),Z(q,255&$.total_in),Z(q,$.total_in>>8&255),Z(q,$.total_in>>16&255),Z(q,$.total_in>>24&255)):(w(q,$.adler>>>16),w(q,65535&$.adler)),B($),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?0:1)},g.deflateEnd=function($){var ct;return $&&$.state?(ct=$.state.status)!==42&&ct!==69&&ct!==73&&ct!==91&&ct!==103&&ct!==V&&ct!==666?G($,D):($.state=null,ct===V?G($,-3):0):D},g.deflateSetDictionary=function($,ct){var W,q,rt,mt,wt,_t,Ct,Ft,At=ct.length;if(!$||!$.state||(mt=(W=$.state).wrap)===2||mt===1&&W.status!==42||W.lookahead)return D;for(mt===1&&($.adler=x($.adler,ct,At,0)),W.wrap=0,At>=W.w_size&&(mt===0&&(K(W.head),W.strstart=0,W.block_start=0,W.insert=0),Ft=new _.Buf8(W.w_size),_.arraySet(Ft,ct,At-W.w_size,W.w_size,0),ct=Ft,At=W.w_size),wt=$.avail_in,_t=$.next_in,Ct=$.input,$.avail_in=At,$.next_in=0,$.input=ct,k(W);W.lookahead>=3;){for(q=W.strstart,rt=W.lookahead-2;W.ins_h=(W.ins_h<<W.hash_shift^W.window[q+3-1])&W.hash_mask,W.prev[q&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=q,q++,--rt;);W.strstart=q,W.lookahead=2,k(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=2,W.match_available=0,$.next_in=_t,$.input=Ct,$.avail_in=wt,W.wrap=mt,0},g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(d,p,g){p.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(d,p,g){p.exports=function(m,_){var v,x,S,O,D,U,z,V,G,tt,K,B,N,Z,w,C,k,T,R,F,H,it,ot,dt,$;v=m.state,x=m.next_in,dt=m.input,S=x+(m.avail_in-5),O=m.next_out,$=m.output,D=O-(_-m.avail_out),U=O+(m.avail_out-257),z=v.dmax,V=v.wsize,G=v.whave,tt=v.wnext,K=v.window,B=v.hold,N=v.bits,Z=v.lencode,w=v.distcode,C=(1<<v.lenbits)-1,k=(1<<v.distbits)-1;t:do{N<15&&(B+=dt[x++]<<N,N+=8,B+=dt[x++]<<N,N+=8),T=Z[B&C];e:for(;;){if(B>>>=R=T>>>24,N-=R,(R=T>>>16&255)==0)$[O++]=65535&T;else{if(!(16&R)){if(!(64&R)){T=Z[(65535&T)+(B&(1<<R)-1)];continue e}if(32&R){v.mode=12;break t}m.msg="invalid literal/length code",v.mode=30;break t}F=65535&T,(R&=15)&&(N<R&&(B+=dt[x++]<<N,N+=8),F+=B&(1<<R)-1,B>>>=R,N-=R),N<15&&(B+=dt[x++]<<N,N+=8,B+=dt[x++]<<N,N+=8),T=w[B&k];i:for(;;){if(B>>>=R=T>>>24,N-=R,!(16&(R=T>>>16&255))){if(!(64&R)){T=w[(65535&T)+(B&(1<<R)-1)];continue i}m.msg="invalid distance code",v.mode=30;break t}if(H=65535&T,N<(R&=15)&&(B+=dt[x++]<<N,(N+=8)<R&&(B+=dt[x++]<<N,N+=8)),z<(H+=B&(1<<R)-1)){m.msg="invalid distance too far back",v.mode=30;break t}if(B>>>=R,N-=R,(R=O-D)<H){if(G<(R=H-R)&&v.sane){m.msg="invalid distance too far back",v.mode=30;break t}if(ot=K,(it=0)===tt){if(it+=V-R,R<F){for(F-=R;$[O++]=K[it++],--R;);it=O-H,ot=$}}else if(tt<R){if(it+=V+tt-R,(R-=tt)<F){for(F-=R;$[O++]=K[it++],--R;);if(it=0,tt<F){for(F-=R=tt;$[O++]=K[it++],--R;);it=O-H,ot=$}}}else if(it+=tt-R,R<F){for(F-=R;$[O++]=K[it++],--R;);it=O-H,ot=$}for(;2<F;)$[O++]=ot[it++],$[O++]=ot[it++],$[O++]=ot[it++],F-=3;F&&($[O++]=ot[it++],1<F&&($[O++]=ot[it++]))}else{for(it=O-H;$[O++]=$[it++],$[O++]=$[it++],$[O++]=$[it++],2<(F-=3););F&&($[O++]=$[it++],1<F&&($[O++]=$[it++]))}break}}break}}while(x<S&&O<U);x-=F=N>>3,B&=(1<<(N-=F<<3))-1,m.next_in=x,m.next_out=O,m.avail_in=x<S?S-x+5:5-(x-S),m.avail_out=O<U?U-O+257:257-(O-U),v.hold=B,v.bits=N}},{}],49:[function(d,p,g){var m=d("../utils/common"),_=d("./adler32"),v=d("./crc32"),x=d("./inffast"),S=d("./inftrees"),O=-2;function D(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function U(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z(C){var k;return C&&C.state?(k=C.state,C.total_in=C.total_out=k.total=0,C.msg="",k.wrap&&(C.adler=1&k.wrap),k.mode=1,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new m.Buf32(852),k.distcode=k.distdyn=new m.Buf32(592),k.sane=1,k.back=-1,0):O}function V(C){var k;return C&&C.state?((k=C.state).wsize=0,k.whave=0,k.wnext=0,z(C)):O}function G(C,k){var T,R;return C&&C.state?(R=C.state,k<0?(T=0,k=-k):(T=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?O:(R.window!==null&&R.wbits!==k&&(R.window=null),R.wrap=T,R.wbits=k,V(C))):O}function tt(C,k){var T,R;return C?(R=new U,(C.state=R).window=null,(T=G(C,k))!==0&&(C.state=null),T):O}var K,B,N=!0;function Z(C){if(N){var k;for(K=new m.Buf32(512),B=new m.Buf32(32),k=0;k<144;)C.lens[k++]=8;for(;k<256;)C.lens[k++]=9;for(;k<280;)C.lens[k++]=7;for(;k<288;)C.lens[k++]=8;for(S(1,C.lens,0,288,K,0,C.work,{bits:9}),k=0;k<32;)C.lens[k++]=5;S(2,C.lens,0,32,B,0,C.work,{bits:5}),N=!1}C.lencode=K,C.lenbits=9,C.distcode=B,C.distbits=5}function w(C,k,T,R){var F,H=C.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new m.Buf8(H.wsize)),R>=H.wsize?(m.arraySet(H.window,k,T-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(R<(F=H.wsize-H.wnext)&&(F=R),m.arraySet(H.window,k,T-R,F,H.wnext),(R-=F)?(m.arraySet(H.window,k,T-R,R,0),H.wnext=R,H.whave=H.wsize):(H.wnext+=F,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=F))),0}g.inflateReset=V,g.inflateReset2=G,g.inflateResetKeep=z,g.inflateInit=function(C){return tt(C,15)},g.inflateInit2=tt,g.inflate=function(C,k){var T,R,F,H,it,ot,dt,$,ct,W,q,rt,mt,wt,_t,Ct,Ft,At,vt,kt,gt,ut,Q,Y,et=0,lt=new m.Buf8(4),pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return O;(T=C.state).mode===12&&(T.mode=13),it=C.next_out,F=C.output,dt=C.avail_out,H=C.next_in,R=C.input,ot=C.avail_in,$=T.hold,ct=T.bits,W=ot,q=dt,ut=0;t:for(;;)switch(T.mode){case 1:if(T.wrap===0){T.mode=13;break}for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(2&T.wrap&&$===35615){lt[T.check=0]=255&$,lt[1]=$>>>8&255,T.check=v(T.check,lt,2,0),ct=$=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&$)<<8)+($>>8))%31){C.msg="incorrect header check",T.mode=30;break}if((15&$)!=8){C.msg="unknown compression method",T.mode=30;break}if(ct-=4,gt=8+(15&($>>>=4)),T.wbits===0)T.wbits=gt;else if(gt>T.wbits){C.msg="invalid window size",T.mode=30;break}T.dmax=1<<gt,C.adler=T.check=1,T.mode=512&$?10:12,ct=$=0;break;case 2:for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(T.flags=$,(255&T.flags)!=8){C.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){C.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=$>>8&1),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,T.check=v(T.check,lt,2,0)),ct=$=0,T.mode=3;case 3:for(;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.head&&(T.head.time=$),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,lt[2]=$>>>16&255,lt[3]=$>>>24&255,T.check=v(T.check,lt,4,0)),ct=$=0,T.mode=4;case 4:for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.head&&(T.head.xflags=255&$,T.head.os=$>>8),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,T.check=v(T.check,lt,2,0)),ct=$=0,T.mode=5;case 5:if(1024&T.flags){for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.length=$,T.head&&(T.head.extra_len=$),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,T.check=v(T.check,lt,2,0)),ct=$=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(ot<(rt=T.length)&&(rt=ot),rt&&(T.head&&(gt=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),m.arraySet(T.head.extra,R,H,rt,gt)),512&T.flags&&(T.check=v(T.check,R,rt,H)),ot-=rt,H+=rt,T.length-=rt),T.length))break t;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(ot===0)break t;for(rt=0;gt=R[H+rt++],T.head&&gt&&T.length<65536&&(T.head.name+=String.fromCharCode(gt)),gt&&rt<ot;);if(512&T.flags&&(T.check=v(T.check,R,rt,H)),ot-=rt,H+=rt,gt)break t}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(ot===0)break t;for(rt=0;gt=R[H+rt++],T.head&&gt&&T.length<65536&&(T.head.comment+=String.fromCharCode(gt)),gt&&rt<ot;);if(512&T.flags&&(T.check=v(T.check,R,rt,H)),ot-=rt,H+=rt,gt)break t}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if($!==(65535&T.check)){C.msg="header crc mismatch",T.mode=30;break}ct=$=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),C.adler=T.check=0,T.mode=12;break;case 10:for(;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}C.adler=T.check=D($),ct=$=0,T.mode=11;case 11:if(T.havedict===0)return C.next_out=it,C.avail_out=dt,C.next_in=H,C.avail_in=ot,T.hold=$,T.bits=ct,2;C.adler=T.check=1,T.mode=12;case 12:if(k===5||k===6)break t;case 13:if(T.last){$>>>=7&ct,ct-=7&ct,T.mode=27;break}for(;ct<3;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}switch(T.last=1&$,ct-=1,3&($>>>=1)){case 0:T.mode=14;break;case 1:if(Z(T),T.mode=20,k!==6)break;$>>>=2,ct-=2;break t;case 2:T.mode=17;break;case 3:C.msg="invalid block type",T.mode=30}$>>>=2,ct-=2;break;case 14:for($>>>=7&ct,ct-=7&ct;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if((65535&$)!=($>>>16^65535)){C.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&$,ct=$=0,T.mode=15,k===6)break t;case 15:T.mode=16;case 16:if(rt=T.length){if(ot<rt&&(rt=ot),dt<rt&&(rt=dt),rt===0)break t;m.arraySet(F,R,H,rt,it),ot-=rt,H+=rt,dt-=rt,it+=rt,T.length-=rt;break}T.mode=12;break;case 17:for(;ct<14;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(T.nlen=257+(31&$),$>>>=5,ct-=5,T.ndist=1+(31&$),$>>>=5,ct-=5,T.ncode=4+(15&$),$>>>=4,ct-=4,286<T.nlen||30<T.ndist){C.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;ct<3;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.lens[pt[T.have++]]=7&$,$>>>=3,ct-=3}for(;T.have<19;)T.lens[pt[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,Q={bits:T.lenbits},ut=S(0,T.lens,0,19,T.lencode,0,T.work,Q),T.lenbits=Q.bits,ut){C.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;Ct=(et=T.lencode[$&(1<<T.lenbits)-1])>>>16&255,Ft=65535&et,!((_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(Ft<16)$>>>=_t,ct-=_t,T.lens[T.have++]=Ft;else{if(Ft===16){for(Y=_t+2;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if($>>>=_t,ct-=_t,T.have===0){C.msg="invalid bit length repeat",T.mode=30;break}gt=T.lens[T.have-1],rt=3+(3&$),$>>>=2,ct-=2}else if(Ft===17){for(Y=_t+3;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}ct-=_t,gt=0,rt=3+(7&($>>>=_t)),$>>>=3,ct-=3}else{for(Y=_t+7;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}ct-=_t,gt=0,rt=11+(127&($>>>=_t)),$>>>=7,ct-=7}if(T.have+rt>T.nlen+T.ndist){C.msg="invalid bit length repeat",T.mode=30;break}for(;rt--;)T.lens[T.have++]=gt}}if(T.mode===30)break;if(T.lens[256]===0){C.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,Q={bits:T.lenbits},ut=S(1,T.lens,0,T.nlen,T.lencode,0,T.work,Q),T.lenbits=Q.bits,ut){C.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,Q={bits:T.distbits},ut=S(2,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,Q),T.distbits=Q.bits,ut){C.msg="invalid distances set",T.mode=30;break}if(T.mode=20,k===6)break t;case 20:T.mode=21;case 21:if(6<=ot&&258<=dt){C.next_out=it,C.avail_out=dt,C.next_in=H,C.avail_in=ot,T.hold=$,T.bits=ct,x(C,q),it=C.next_out,F=C.output,dt=C.avail_out,H=C.next_in,R=C.input,ot=C.avail_in,$=T.hold,ct=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;Ct=(et=T.lencode[$&(1<<T.lenbits)-1])>>>16&255,Ft=65535&et,!((_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(Ct&&!(240&Ct)){for(At=_t,vt=Ct,kt=Ft;Ct=(et=T.lencode[kt+(($&(1<<At+vt)-1)>>At)])>>>16&255,Ft=65535&et,!(At+(_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}$>>>=At,ct-=At,T.back+=At}if($>>>=_t,ct-=_t,T.back+=_t,T.length=Ft,Ct===0){T.mode=26;break}if(32&Ct){T.back=-1,T.mode=12;break}if(64&Ct){C.msg="invalid literal/length code",T.mode=30;break}T.extra=15&Ct,T.mode=22;case 22:if(T.extra){for(Y=T.extra;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.length+=$&(1<<T.extra)-1,$>>>=T.extra,ct-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;Ct=(et=T.distcode[$&(1<<T.distbits)-1])>>>16&255,Ft=65535&et,!((_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(!(240&Ct)){for(At=_t,vt=Ct,kt=Ft;Ct=(et=T.distcode[kt+(($&(1<<At+vt)-1)>>At)])>>>16&255,Ft=65535&et,!(At+(_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}$>>>=At,ct-=At,T.back+=At}if($>>>=_t,ct-=_t,T.back+=_t,64&Ct){C.msg="invalid distance code",T.mode=30;break}T.offset=Ft,T.extra=15&Ct,T.mode=24;case 24:if(T.extra){for(Y=T.extra;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.offset+=$&(1<<T.extra)-1,$>>>=T.extra,ct-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){C.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(dt===0)break t;if(rt=q-dt,T.offset>rt){if((rt=T.offset-rt)>T.whave&&T.sane){C.msg="invalid distance too far back",T.mode=30;break}mt=rt>T.wnext?(rt-=T.wnext,T.wsize-rt):T.wnext-rt,rt>T.length&&(rt=T.length),wt=T.window}else wt=F,mt=it-T.offset,rt=T.length;for(dt<rt&&(rt=dt),dt-=rt,T.length-=rt;F[it++]=wt[mt++],--rt;);T.length===0&&(T.mode=21);break;case 26:if(dt===0)break t;F[it++]=T.length,dt--,T.mode=21;break;case 27:if(T.wrap){for(;ct<32;){if(ot===0)break t;ot--,$|=R[H++]<<ct,ct+=8}if(q-=dt,C.total_out+=q,T.total+=q,q&&(C.adler=T.check=T.flags?v(T.check,F,q,it-q):_(T.check,F,q,it-q)),q=dt,(T.flags?$:D($))!==T.check){C.msg="incorrect data check",T.mode=30;break}ct=$=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if($!==(4294967295&T.total)){C.msg="incorrect length check",T.mode=30;break}ct=$=0}T.mode=29;case 29:ut=1;break t;case 30:ut=-3;break t;case 31:return-4;case 32:default:return O}return C.next_out=it,C.avail_out=dt,C.next_in=H,C.avail_in=ot,T.hold=$,T.bits=ct,(T.wsize||q!==C.avail_out&&T.mode<30&&(T.mode<27||k!==4))&&w(C,C.output,C.next_out,q-C.avail_out)?(T.mode=31,-4):(W-=C.avail_in,q-=C.avail_out,C.total_in+=W,C.total_out+=q,T.total+=q,T.wrap&&q&&(C.adler=T.check=T.flags?v(T.check,F,q,C.next_out-q):_(T.check,F,q,C.next_out-q)),C.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(W==0&&q===0||k===4)&&ut===0&&(ut=-5),ut)},g.inflateEnd=function(C){if(!C||!C.state)return O;var k=C.state;return k.window&&(k.window=null),C.state=null,0},g.inflateGetHeader=function(C,k){var T;return C&&C.state&&2&(T=C.state).wrap?((T.head=k).done=!1,0):O},g.inflateSetDictionary=function(C,k){var T,R=k.length;return C&&C.state?(T=C.state).wrap!==0&&T.mode!==11?O:T.mode===11&&_(1,k,R,0)!==T.check?-3:w(C,k,R,R)?(T.mode=31,-4):(T.havedict=1,0):O},g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(d,p,g){var m=d("../utils/common"),_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],v=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];p.exports=function(O,D,U,z,V,G,tt,K){var B,N,Z,w,C,k,T,R,F,H=K.bits,it=0,ot=0,dt=0,$=0,ct=0,W=0,q=0,rt=0,mt=0,wt=0,_t=null,Ct=0,Ft=new m.Buf16(16),At=new m.Buf16(16),vt=null,kt=0;for(it=0;it<=15;it++)Ft[it]=0;for(ot=0;ot<z;ot++)Ft[D[U+ot]]++;for(ct=H,$=15;1<=$&&Ft[$]===0;$--);if($<ct&&(ct=$),$===0)return V[G++]=20971520,V[G++]=20971520,K.bits=1,0;for(dt=1;dt<$&&Ft[dt]===0;dt++);for(ct<dt&&(ct=dt),it=rt=1;it<=15;it++)if(rt<<=1,(rt-=Ft[it])<0)return-1;if(0<rt&&(O===0||$!==1))return-1;for(At[1]=0,it=1;it<15;it++)At[it+1]=At[it]+Ft[it];for(ot=0;ot<z;ot++)D[U+ot]!==0&&(tt[At[D[U+ot]]++]=ot);if(k=O===0?(_t=vt=tt,19):O===1?(_t=_,Ct-=257,vt=v,kt-=257,256):(_t=x,vt=S,-1),it=dt,C=G,q=ot=wt=0,Z=-1,w=(mt=1<<(W=ct))-1,O===1&&852<mt||O===2&&592<mt)return 1;for(;;){for(T=it-q,F=tt[ot]<k?(R=0,tt[ot]):tt[ot]>k?(R=vt[kt+tt[ot]],_t[Ct+tt[ot]]):(R=96,0),B=1<<it-q,dt=N=1<<W;V[C+(wt>>q)+(N-=B)]=T<<24|R<<16|F|0,N!==0;);for(B=1<<it-1;wt&B;)B>>=1;if(B!==0?(wt&=B-1,wt+=B):wt=0,ot++,--Ft[it]==0){if(it===$)break;it=D[U+tt[ot]]}if(ct<it&&(wt&w)!==Z){for(q===0&&(q=ct),C+=dt,rt=1<<(W=it-q);W+q<$&&!((rt-=Ft[W+q])<=0);)W++,rt<<=1;if(mt+=1<<W,O===1&&852<mt||O===2&&592<mt)return 1;V[Z=wt&w]=ct<<24|W<<16|C-G|0}}return wt!==0&&(V[C+wt]=it-q<<24|64<<16|0),K.bits=ct,0}},{"../utils/common":41}],51:[function(d,p,g){p.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(d,p,g){var m=d("../utils/common");function _(vt){for(var kt=vt.length;0<=--kt;)vt[kt]=0}var v=256,x=286,S=30,O=15,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(576);_(G);var tt=new Array(60);_(tt);var K=new Array(512);_(K);var B=new Array(256);_(B);var N=new Array(29);_(N);var Z,w,C,k=new Array(S);function T(vt,kt,gt,ut,Q){this.static_tree=vt,this.extra_bits=kt,this.extra_base=gt,this.elems=ut,this.max_length=Q,this.has_stree=vt&&vt.length}function R(vt,kt){this.dyn_tree=vt,this.max_code=0,this.stat_desc=kt}function F(vt){return vt<256?K[vt]:K[256+(vt>>>7)]}function H(vt,kt){vt.pending_buf[vt.pending++]=255&kt,vt.pending_buf[vt.pending++]=kt>>>8&255}function it(vt,kt,gt){vt.bi_valid>16-gt?(vt.bi_buf|=kt<<vt.bi_valid&65535,H(vt,vt.bi_buf),vt.bi_buf=kt>>16-vt.bi_valid,vt.bi_valid+=gt-16):(vt.bi_buf|=kt<<vt.bi_valid&65535,vt.bi_valid+=gt)}function ot(vt,kt,gt){it(vt,gt[2*kt],gt[2*kt+1])}function dt(vt,kt){for(var gt=0;gt|=1&vt,vt>>>=1,gt<<=1,0<--kt;);return gt>>>1}function $(vt,kt,gt){var ut,Q,Y=new Array(16),et=0;for(ut=1;ut<=O;ut++)Y[ut]=et=et+gt[ut-1]<<1;for(Q=0;Q<=kt;Q++){var lt=vt[2*Q+1];lt!==0&&(vt[2*Q]=dt(Y[lt]++,lt))}}function ct(vt){var kt;for(kt=0;kt<x;kt++)vt.dyn_ltree[2*kt]=0;for(kt=0;kt<S;kt++)vt.dyn_dtree[2*kt]=0;for(kt=0;kt<19;kt++)vt.bl_tree[2*kt]=0;vt.dyn_ltree[512]=1,vt.opt_len=vt.static_len=0,vt.last_lit=vt.matches=0}function W(vt){8<vt.bi_valid?H(vt,vt.bi_buf):0<vt.bi_valid&&(vt.pending_buf[vt.pending++]=vt.bi_buf),vt.bi_buf=0,vt.bi_valid=0}function q(vt,kt,gt,ut){var Q=2*kt,Y=2*gt;return vt[Q]<vt[Y]||vt[Q]===vt[Y]&&ut[kt]<=ut[gt]}function rt(vt,kt,gt){for(var ut=vt.heap[gt],Q=gt<<1;Q<=vt.heap_len&&(Q<vt.heap_len&&q(kt,vt.heap[Q+1],vt.heap[Q],vt.depth)&&Q++,!q(kt,ut,vt.heap[Q],vt.depth));)vt.heap[gt]=vt.heap[Q],gt=Q,Q<<=1;vt.heap[gt]=ut}function mt(vt,kt,gt){var ut,Q,Y,et,lt=0;if(vt.last_lit!==0)for(;ut=vt.pending_buf[vt.d_buf+2*lt]<<8|vt.pending_buf[vt.d_buf+2*lt+1],Q=vt.pending_buf[vt.l_buf+lt],lt++,ut===0?ot(vt,Q,kt):(ot(vt,(Y=B[Q])+v+1,kt),(et=D[Y])!==0&&it(vt,Q-=N[Y],et),ot(vt,Y=F(--ut),gt),(et=U[Y])!==0&&it(vt,ut-=k[Y],et)),lt<vt.last_lit;);ot(vt,256,kt)}function wt(vt,kt){var gt,ut,Q,Y=kt.dyn_tree,et=kt.stat_desc.static_tree,lt=kt.stat_desc.has_stree,pt=kt.stat_desc.elems,bt=-1;for(vt.heap_len=0,vt.heap_max=573,gt=0;gt<pt;gt++)Y[2*gt]!==0?(vt.heap[++vt.heap_len]=bt=gt,vt.depth[gt]=0):Y[2*gt+1]=0;for(;vt.heap_len<2;)Y[2*(Q=vt.heap[++vt.heap_len]=bt<2?++bt:0)]=1,vt.depth[Q]=0,vt.opt_len--,lt&&(vt.static_len-=et[2*Q+1]);for(kt.max_code=bt,gt=vt.heap_len>>1;1<=gt;gt--)rt(vt,Y,gt);for(Q=pt;gt=vt.heap[1],vt.heap[1]=vt.heap[vt.heap_len--],rt(vt,Y,1),ut=vt.heap[1],vt.heap[--vt.heap_max]=gt,vt.heap[--vt.heap_max]=ut,Y[2*Q]=Y[2*gt]+Y[2*ut],vt.depth[Q]=(vt.depth[gt]>=vt.depth[ut]?vt.depth[gt]:vt.depth[ut])+1,Y[2*gt+1]=Y[2*ut+1]=Q,vt.heap[1]=Q++,rt(vt,Y,1),2<=vt.heap_len;);vt.heap[--vt.heap_max]=vt.heap[1],function(Et,Ot){var zt,Gt,Jt,Kt,ie,Xt,Ut=Ot.dyn_tree,_e=Ot.max_code,le=Ot.stat_desc.static_tree,ye=Ot.stat_desc.has_stree,Ze=Ot.stat_desc.extra_bits,ce=Ot.stat_desc.extra_base,ke=Ot.stat_desc.max_length,He=0;for(Kt=0;Kt<=O;Kt++)Et.bl_count[Kt]=0;for(Ut[2*Et.heap[Et.heap_max]+1]=0,zt=Et.heap_max+1;zt<573;zt++)ke<(Kt=Ut[2*Ut[2*(Gt=Et.heap[zt])+1]+1]+1)&&(Kt=ke,He++),Ut[2*Gt+1]=Kt,_e<Gt||(Et.bl_count[Kt]++,ie=0,ce<=Gt&&(ie=Ze[Gt-ce]),Xt=Ut[2*Gt],Et.opt_len+=Xt*(Kt+ie),ye&&(Et.static_len+=Xt*(le[2*Gt+1]+ie)));if(He!==0){do{for(Kt=ke-1;Et.bl_count[Kt]===0;)Kt--;Et.bl_count[Kt]--,Et.bl_count[Kt+1]+=2,Et.bl_count[ke]--,He-=2}while(0<He);for(Kt=ke;Kt!==0;Kt--)for(Gt=Et.bl_count[Kt];Gt!==0;)_e<(Jt=Et.heap[--zt])||(Ut[2*Jt+1]!==Kt&&(Et.opt_len+=(Kt-Ut[2*Jt+1])*Ut[2*Jt],Ut[2*Jt+1]=Kt),Gt--)}}(vt,kt),$(Y,bt,vt.bl_count)}function _t(vt,kt,gt){var ut,Q,Y=-1,et=kt[1],lt=0,pt=7,bt=4;for(et===0&&(pt=138,bt=3),kt[2*(gt+1)+1]=65535,ut=0;ut<=gt;ut++)Q=et,et=kt[2*(ut+1)+1],++lt<pt&&Q===et||(lt<bt?vt.bl_tree[2*Q]+=lt:Q!==0?(Q!==Y&&vt.bl_tree[2*Q]++,vt.bl_tree[32]++):lt<=10?vt.bl_tree[34]++:vt.bl_tree[36]++,Y=Q,bt=(lt=0)===et?(pt=138,3):Q===et?(pt=6,3):(pt=7,4))}function Ct(vt,kt,gt){var ut,Q,Y=-1,et=kt[1],lt=0,pt=7,bt=4;for(et===0&&(pt=138,bt=3),ut=0;ut<=gt;ut++)if(Q=et,et=kt[2*(ut+1)+1],!(++lt<pt&&Q===et)){if(lt<bt)for(;ot(vt,Q,vt.bl_tree),--lt!=0;);else Q!==0?(Q!==Y&&(ot(vt,Q,vt.bl_tree),lt--),ot(vt,16,vt.bl_tree),it(vt,lt-3,2)):lt<=10?(ot(vt,17,vt.bl_tree),it(vt,lt-3,3)):(ot(vt,18,vt.bl_tree),it(vt,lt-11,7));Y=Q,bt=(lt=0)===et?(pt=138,3):Q===et?(pt=6,3):(pt=7,4)}}_(k);var Ft=!1;function At(vt,kt,gt,ut){it(vt,0+(ut?1:0),3),function(Q,Y,et,lt){W(Q),H(Q,et),H(Q,~et),m.arraySet(Q.pending_buf,Q.window,Y,et,Q.pending),Q.pending+=et}(vt,kt,gt)}g._tr_init=function(vt){Ft||(function(){var kt,gt,ut,Q,Y,et=new Array(16);for(Q=ut=0;Q<28;Q++)for(N[Q]=ut,kt=0;kt<1<<D[Q];kt++)B[ut++]=Q;for(B[ut-1]=Q,Q=Y=0;Q<16;Q++)for(k[Q]=Y,kt=0;kt<1<<U[Q];kt++)K[Y++]=Q;for(Y>>=7;Q<S;Q++)for(k[Q]=Y<<7,kt=0;kt<1<<U[Q]-7;kt++)K[256+Y++]=Q;for(gt=0;gt<=O;gt++)et[gt]=0;for(kt=0;kt<=143;)G[2*kt+1]=8,kt++,et[8]++;for(;kt<=255;)G[2*kt+1]=9,kt++,et[9]++;for(;kt<=279;)G[2*kt+1]=7,kt++,et[7]++;for(;kt<=287;)G[2*kt+1]=8,kt++,et[8]++;for($(G,287,et),kt=0;kt<S;kt++)tt[2*kt+1]=5,tt[2*kt]=dt(kt,5);Z=new T(G,D,257,x,O),w=new T(tt,U,0,S,O),C=new T(new Array(0),z,0,19,7)}(),Ft=!0),vt.l_desc=new R(vt.dyn_ltree,Z),vt.d_desc=new R(vt.dyn_dtree,w),vt.bl_desc=new R(vt.bl_tree,C),vt.bi_buf=0,vt.bi_valid=0,ct(vt)},g._tr_stored_block=At,g._tr_flush_block=function(vt,kt,gt,ut){var Q,Y,et=0;0<vt.level?(vt.strm.data_type===2&&(vt.strm.data_type=function(lt){var pt,bt=4093624447;for(pt=0;pt<=31;pt++,bt>>>=1)if(1&bt&&lt.dyn_ltree[2*pt]!==0)return 0;if(lt.dyn_ltree[18]!==0||lt.dyn_ltree[20]!==0||lt.dyn_ltree[26]!==0)return 1;for(pt=32;pt<v;pt++)if(lt.dyn_ltree[2*pt]!==0)return 1;return 0}(vt)),wt(vt,vt.l_desc),wt(vt,vt.d_desc),et=function(lt){var pt;for(_t(lt,lt.dyn_ltree,lt.l_desc.max_code),_t(lt,lt.dyn_dtree,lt.d_desc.max_code),wt(lt,lt.bl_desc),pt=18;3<=pt&&lt.bl_tree[2*V[pt]+1]===0;pt--);return lt.opt_len+=3*(pt+1)+5+5+4,pt}(vt),Q=vt.opt_len+3+7>>>3,(Y=vt.static_len+3+7>>>3)<=Q&&(Q=Y)):Q=Y=gt+5,gt+4<=Q&&kt!==-1?At(vt,kt,gt,ut):vt.strategy===4||Y===Q?(it(vt,2+(ut?1:0),3),mt(vt,G,tt)):(it(vt,4+(ut?1:0),3),function(lt,pt,bt,Et){var Ot;for(it(lt,pt-257,5),it(lt,bt-1,5),it(lt,Et-4,4),Ot=0;Ot<Et;Ot++)it(lt,lt.bl_tree[2*V[Ot]+1],3);Ct(lt,lt.dyn_ltree,pt-1),Ct(lt,lt.dyn_dtree,bt-1)}(vt,vt.l_desc.max_code+1,vt.d_desc.max_code+1,et+1),mt(vt,vt.dyn_ltree,vt.dyn_dtree)),ct(vt),ut&&W(vt)},g._tr_tally=function(vt,kt,gt){return vt.pending_buf[vt.d_buf+2*vt.last_lit]=kt>>>8&255,vt.pending_buf[vt.d_buf+2*vt.last_lit+1]=255&kt,vt.pending_buf[vt.l_buf+vt.last_lit]=255&gt,vt.last_lit++,kt===0?vt.dyn_ltree[2*gt]++:(vt.matches++,kt--,vt.dyn_ltree[2*(B[gt]+v+1)]++,vt.dyn_dtree[2*F(kt)]++),vt.last_lit===vt.lit_bufsize-1},g._tr_align=function(vt){it(vt,2,3),ot(vt,256,G),function(kt){kt.bi_valid===16?(H(kt,kt.bi_buf),kt.bi_buf=0,kt.bi_valid=0):8<=kt.bi_valid&&(kt.pending_buf[kt.pending++]=255&kt.bi_buf,kt.bi_buf>>=8,kt.bi_valid-=8)}(vt)}},{"../utils/common":41}],53:[function(d,p,g){p.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(d,p,g){(function(m){(function(_,v){if(!_.setImmediate){var x,S,O,D,U=1,z={},V=!1,G=_.document,tt=Object.getPrototypeOf&&Object.getPrototypeOf(_);tt=tt&&tt.setTimeout?tt:_,x={}.toString.call(_.process)==="[object process]"?function(Z){i.nextTick(function(){B(Z)})}:function(){if(_.postMessage&&!_.importScripts){var Z=!0,w=_.onmessage;return _.onmessage=function(){Z=!1},_.postMessage("","*"),_.onmessage=w,Z}}()?(D="setImmediate$"+Math.random()+"$",_.addEventListener?_.addEventListener("message",N,!1):_.attachEvent("onmessage",N),function(Z){_.postMessage(D+Z,"*")}):_.MessageChannel?((O=new MessageChannel).port1.onmessage=function(Z){B(Z.data)},function(Z){O.port2.postMessage(Z)}):G&&"onreadystatechange"in G.createElement("script")?(S=G.documentElement,function(Z){var w=G.createElement("script");w.onreadystatechange=function(){B(Z),w.onreadystatechange=null,S.removeChild(w),w=null},S.appendChild(w)}):function(Z){setTimeout(B,0,Z)},tt.setImmediate=function(Z){typeof Z!="function"&&(Z=new Function(""+Z));for(var w=new Array(arguments.length-1),C=0;C<w.length;C++)w[C]=arguments[C+1];var k={callback:Z,args:w};return z[U]=k,x(U),U++},tt.clearImmediate=K}function K(Z){delete z[Z]}function B(Z){if(V)setTimeout(B,0,Z);else{var w=z[Z];if(w){V=!0;try{(function(C){var k=C.callback,T=C.args;switch(T.length){case 0:k();break;case 1:k(T[0]);break;case 2:k(T[0],T[1]);break;case 3:k(T[0],T[1],T[2]);break;default:k.apply(void 0,T)}})(w)}finally{K(Z),V=!1}}}}function N(Z){Z.source===_&&typeof Z.data=="string"&&Z.data.indexOf(D)===0&&B(+Z.data.slice(D.length))}})(typeof self>"u"?m===void 0?this:m:self)}).call(this,r!==void 0?r:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],n("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(n,t,e){(function(i){(function(){"use strict";var r=/[\\^$.*+?()[\]{}|]/g,s=RegExp(r.source),a=typeof i=="object"&&i&&i.Object===Object&&i,o=typeof self=="object"&&self&&self.Object===Object&&self,l=a||o||Function("return this")(),c=Object.prototype.toString,h=l.Symbol,d=h?h.prototype:void 0,p=d?d.toString:void 0;function g(m){if(typeof m=="string")return m;if(function(v){return typeof v=="symbol"||function(x){return!!x&&typeof x=="object"}(v)&&c.call(v)=="[object Symbol]"}(m))return p?p.call(m):"";var _=m+"";return _=="0"&&1/m==-1/0?"-0":_}t.exports=function(m){var _;return(m=(_=m)==null?"":g(_))&&s.test(m)?m.replace(r,"\\$&"):m}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(n,t,e){(function(i){(function(){"use strict";var r="[object Arguments]",s="[object Map]",a="[object Object]",o="[object Set]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,h=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[r]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_["[object Function]"]=_[s]=_["[object Number]"]=_[a]=_["[object RegExp]"]=_[o]=_["[object String]"]=_["[object WeakMap]"]=!1;var v=typeof i=="object"&&i&&i.Object===Object&&i,x=typeof self=="object"&&self&&self.Object===Object&&self,S=v||x||Function("return this")(),O=typeof e=="object"&&e&&!e.nodeType&&e,D=O&&typeof t=="object"&&t&&!t.nodeType&&t,U=D&&D.exports===O&&v.process,z=function(){try{return U&&U.binding("util")}catch{}}(),V=z&&z.isTypedArray;function G(Tt,Ht,re,Qt){for(var he=-1,Ee=Tt?Tt.length:0;++he<Ee;){var Ae=Tt[he];Ht(Qt,Ae,re(Ae),Tt)}return Qt}function tt(Tt,Ht){for(var re=-1,Qt=Tt?Tt.length:0;++re<Qt;)if(Ht(Tt[re],re,Tt))return!0;return!1}function K(Tt){var Ht=!1;if(Tt!=null&&typeof Tt.toString!="function")try{Ht=!!(Tt+"")}catch{}return Ht}function B(Tt){var Ht=-1,re=Array(Tt.size);return Tt.forEach(function(Qt,he){re[++Ht]=[he,Qt]}),re}function N(Tt){var Ht=-1,re=Array(Tt.size);return Tt.forEach(function(Qt){re[++Ht]=Qt}),re}var Z,w,C,k=Array.prototype,T=Function.prototype,R=Object.prototype,F=S["__core-js_shared__"],H=(Z=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",it=T.toString,ot=R.hasOwnProperty,dt=R.toString,$=RegExp("^"+it.call(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=S.Symbol,W=S.Uint8Array,q=R.propertyIsEnumerable,rt=k.splice,mt=(w=Object.keys,C=Object,function(Tt){return w(C(Tt))}),wt=Fe(S,"DataView"),_t=Fe(S,"Map"),Ct=Fe(S,"Promise"),Ft=Fe(S,"Set"),At=Fe(S,"WeakMap"),vt=Fe(Object,"create"),kt=jt(wt),gt=jt(_t),ut=jt(Ct),Q=jt(Ft),Y=jt(At),et=ct?ct.prototype:void 0,lt=et?et.valueOf:void 0,pt=et?et.toString:void 0;function bt(Tt){var Ht=-1,re=Tt?Tt.length:0;for(this.clear();++Ht<re;){var Qt=Tt[Ht];this.set(Qt[0],Qt[1])}}function Et(Tt){var Ht=-1,re=Tt?Tt.length:0;for(this.clear();++Ht<re;){var Qt=Tt[Ht];this.set(Qt[0],Qt[1])}}function Ot(Tt){var Ht=-1,re=Tt?Tt.length:0;for(this.clear();++Ht<re;){var Qt=Tt[Ht];this.set(Qt[0],Qt[1])}}function zt(Tt){var Ht=-1,re=Tt?Tt.length:0;for(this.__data__=new Ot;++Ht<re;)this.add(Tt[Ht])}function Gt(Tt){this.__data__=new Et(Tt)}function Jt(Tt,Ht){var re=fe(Tt)||Ie(Tt)?function(Ae,ti){for(var Ue=-1,we=Array(Ae);++Ue<Ae;)we[Ue]=ti(Ue);return we}(Tt.length,String):[],Qt=re.length,he=!!Qt;for(var Ee in Tt)!Ht&&!ot.call(Tt,Ee)||he&&(Ee=="length"||Le(Ee,Qt))||re.push(Ee);return re}function Kt(Tt,Ht){for(var re=Tt.length;re--;)if($e(Tt[re][0],Ht))return re;return-1}function ie(Tt,Ht,re,Qt){return _e(Tt,function(he,Ee,Ae){Ht(Qt,he,re(he),Ae)}),Qt}bt.prototype.clear=function(){this.__data__=vt?vt(null):{}},bt.prototype.delete=function(Tt){return this.has(Tt)&&delete this.__data__[Tt]},bt.prototype.get=function(Tt){var Ht=this.__data__;if(vt){var re=Ht[Tt];return re==="__lodash_hash_undefined__"?void 0:re}return ot.call(Ht,Tt)?Ht[Tt]:void 0},bt.prototype.has=function(Tt){var Ht=this.__data__;return vt?Ht[Tt]!==void 0:ot.call(Ht,Tt)},bt.prototype.set=function(Tt,Ht){return this.__data__[Tt]=vt&&Ht===void 0?"__lodash_hash_undefined__":Ht,this},Et.prototype.clear=function(){this.__data__=[]},Et.prototype.delete=function(Tt){var Ht=this.__data__,re=Kt(Ht,Tt);return!(re<0)&&(re==Ht.length-1?Ht.pop():rt.call(Ht,re,1),!0)},Et.prototype.get=function(Tt){var Ht=this.__data__,re=Kt(Ht,Tt);return re<0?void 0:Ht[re][1]},Et.prototype.has=function(Tt){return Kt(this.__data__,Tt)>-1},Et.prototype.set=function(Tt,Ht){var re=this.__data__,Qt=Kt(re,Tt);return Qt<0?re.push([Tt,Ht]):re[Qt][1]=Ht,this},Ot.prototype.clear=function(){this.__data__={hash:new bt,map:new(_t||Et),string:new bt}},Ot.prototype.delete=function(Tt){return ue(this,Tt).delete(Tt)},Ot.prototype.get=function(Tt){return ue(this,Tt).get(Tt)},Ot.prototype.has=function(Tt){return ue(this,Tt).has(Tt)},Ot.prototype.set=function(Tt,Ht){return ue(this,Tt).set(Tt,Ht),this},zt.prototype.add=zt.prototype.push=function(Tt){return this.__data__.set(Tt,"__lodash_hash_undefined__"),this},zt.prototype.has=function(Tt){return this.__data__.has(Tt)},Gt.prototype.clear=function(){this.__data__=new Et},Gt.prototype.delete=function(Tt){return this.__data__.delete(Tt)},Gt.prototype.get=function(Tt){return this.__data__.get(Tt)},Gt.prototype.has=function(Tt){return this.__data__.has(Tt)},Gt.prototype.set=function(Tt,Ht){var re=this.__data__;if(re instanceof Et){var Qt=re.__data__;if(!_t||Qt.length<199)return Qt.push([Tt,Ht]),this;re=this.__data__=new Ot(Qt)}return re.set(Tt,Ht),this};var Xt,Ut,_e=(Xt=function(Tt,Ht){return Tt&&le(Tt,Ht,cr)},function(Tt,Ht){if(Tt==null)return Tt;if(!Ye(Tt))return Xt(Tt,Ht);for(var re=Tt.length,Qt=Ut?re:-1,he=Object(Tt);(Ut?Qt--:++Qt<re)&&Ht(he[Qt],Qt,he)!==!1;);return Tt}),le=function(Tt){return function(Ht,re,Qt){for(var he=-1,Ee=Object(Ht),Ae=Qt(Ht),ti=Ae.length;ti--;){var Ue=Ae[Tt?ti:++he];if(re(Ee[Ue],Ue,Ee)===!1)break}return Ht}}();function ye(Tt,Ht){for(var re=0,Qt=(Ht=Oe(Ht,Tt)?[Ht]:Te(Ht)).length;Tt!=null&&re<Qt;)Tt=Tt[qt(Ht[re++])];return re&&re==Qt?Tt:void 0}function Ze(Tt,Ht){return Tt!=null&&Ht in Object(Tt)}function ce(Tt,Ht,re,Qt,he){return Tt===Ht||(Tt==null||Ht==null||!Ke(Tt)&&!pr(Ht)?Tt!=Tt&&Ht!=Ht:function(Ee,Ae,ti,Ue,we,pe){var yi=fe(Ee),ri=fe(Ae),li="[object Array]",wi="[object Array]";yi||(li=(li=ai(Ee))==r?a:li),ri||(wi=(wi=ai(Ae))==r?a:wi);var me=li==a&&!K(Ee),ui=wi==a&&!K(Ae),br=li==wi;if(br&&!me)return pe||(pe=new Gt),yi||oi(Ee)?bi(Ee,Ae,ti,Ue,we,pe):function(ni,ze,Tr,Rr,bn,oe,Ar){switch(Tr){case"[object DataView]":if(ni.byteLength!=ze.byteLength||ni.byteOffset!=ze.byteOffset)return!1;ni=ni.buffer,ze=ze.buffer;case"[object ArrayBuffer]":return!(ni.byteLength!=ze.byteLength||!Rr(new W(ni),new W(ze)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $e(+ni,+ze);case"[object Error]":return ni.name==ze.name&&ni.message==ze.message;case"[object RegExp]":case"[object String]":return ni==ze+"";case s:var gi=B;case o:var _r=2&oe;if(gi||(gi=N),ni.size!=ze.size&&!_r)return!1;var on=Ar.get(ni);if(on)return on==ze;oe|=1,Ar.set(ni,ze);var yr=bi(gi(ni),gi(ze),Rr,bn,oe,Ar);return Ar.delete(ni),yr;case"[object Symbol]":if(lt)return lt.call(ni)==lt.call(ze)}return!1}(Ee,Ae,li,ti,Ue,we,pe);if(!(2&we)){var Xr=me&&ot.call(Ee,"__wrapped__"),Se=ui&&ot.call(Ae,"__wrapped__");if(Xr||Se){var Ln=Xr?Ee.value():Ee,Vn=Se?Ae.value():Ae;return pe||(pe=new Gt),ti(Ln,Vn,Ue,we,pe)}}return br?(pe||(pe=new Gt),function(ni,ze,Tr,Rr,bn,oe){var Ar=2&bn,gi=cr(ni),_r=gi.length,on=cr(ze).length;if(_r!=on&&!Ar)return!1;for(var yr=_r;yr--;){var hi=gi[yr];if(!(Ar?hi in ze:ot.call(ze,hi)))return!1}var fi=oe.get(ni);if(fi&&oe.get(ze))return fi==ze;var Ti=!0;oe.set(ni,ze),oe.set(ze,ni);for(var $r=Ar;++yr<_r;){hi=gi[yr];var us=ni[hi],je=ze[hi];if(Rr)var Yr=Ar?Rr(je,us,hi,ze,ni,oe):Rr(us,je,hi,ni,ze,oe);if(!(Yr===void 0?us===je||Tr(us,je,Rr,bn,oe):Yr)){Ti=!1;break}$r||($r=hi=="constructor")}if(Ti&&!$r){var ci=ni.constructor,M=ze.constructor;ci==M||!("constructor"in ni)||!("constructor"in ze)||typeof ci=="function"&&ci instanceof ci&&typeof M=="function"&&M instanceof M||(Ti=!1)}return oe.delete(ni),oe.delete(ze),Ti}(Ee,Ae,ti,Ue,we,pe)):!1}(Tt,Ht,ce,re,Qt,he))}function ke(Tt){return!(!Ke(Tt)||function(Ht){return!!H&&H in Ht}(Tt))&&(Ve(Tt)||K(Tt)?$:g).test(jt(Tt))}function He(Tt){return typeof Tt=="function"?Tt:Tt==null?ki:typeof Tt=="object"?fe(Tt)?function(Qt,he){return Oe(Qt)&&ir(he)?We(qt(Qt),he):function(Ee){var Ae=function(ti,Ue,we){var pe=ti==null?void 0:ye(ti,Ue);return pe===void 0?we:pe}(Ee,Qt);return Ae===void 0&&Ae===he?function(ti,Ue){return ti!=null&&function(we,pe,yi){pe=Oe(pe,we)?[pe]:Te(pe);for(var ri,li=-1,wi=pe.length;++li<wi;){var me=qt(pe[li]);if(!(ri=we!=null&&yi(we,me)))break;we=we[me]}return ri||!!(wi=we?we.length:0)&&ii(wi)&&Le(me,wi)&&(fe(we)||Ie(we))}(ti,Ue,Ze)}(Ee,Qt):ce(he,Ae,void 0,3)}}(Tt[0],Tt[1]):function(Qt){var he=function(Ee){for(var Ae=cr(Ee),ti=Ae.length;ti--;){var Ue=Ae[ti],we=Ee[Ue];Ae[ti]=[Ue,we,ir(we)]}return Ae}(Qt);return he.length==1&&he[0][2]?We(he[0][0],he[0][1]):function(Ee){return Ee===Qt||function(Ae,ti,Ue,we){var pe=Ue.length,yi=pe,ri=!we;if(Ae==null)return!yi;for(Ae=Object(Ae);pe--;){var li=Ue[pe];if(ri&&li[2]?li[1]!==Ae[li[0]]:!(li[0]in Ae))return!1}for(;++pe<yi;){var wi=(li=Ue[pe])[0],me=Ae[wi],ui=li[1];if(ri&&li[2]){if(me===void 0&&!(wi in Ae))return!1}else{var br=new Gt;if(we)var Xr=we(me,ui,wi,Ae,ti,br);if(!(Xr===void 0?ce(ui,me,we,3,br):Xr))return!1}}return!0}(Ee,Qt,he)}}(Tt):Oe(Ht=Tt)?(re=qt(Ht),function(Qt){return Qt?.[re]}):function(Qt){return function(he){return ye(he,Qt)}}(Ht);var Ht,re}function $t(Tt){if(re=(Ht=Tt)&&Ht.constructor,Qt=typeof re=="function"&&re.prototype||R,Ht!==Qt)return mt(Tt);var Ht,re,Qt,he=[];for(var Ee in Object(Tt))ot.call(Tt,Ee)&&Ee!="constructor"&&he.push(Ee);return he}function Te(Tt){return fe(Tt)?Tt:It(Tt)}function bi(Tt,Ht,re,Qt,he,Ee){var Ae=2&he,ti=Tt.length,Ue=Ht.length;if(ti!=Ue&&!(Ae&&Ue>ti))return!1;var we=Ee.get(Tt);if(we&&Ee.get(Ht))return we==Ht;var pe=-1,yi=!0,ri=1&he?new zt:void 0;for(Ee.set(Tt,Ht),Ee.set(Ht,Tt);++pe<ti;){var li=Tt[pe],wi=Ht[pe];if(Qt)var me=Ae?Qt(wi,li,pe,Ht,Tt,Ee):Qt(li,wi,pe,Tt,Ht,Ee);if(me!==void 0){if(me)continue;yi=!1;break}if(ri){if(!tt(Ht,function(ui,br){if(!ri.has(br)&&(li===ui||re(li,ui,Qt,he,Ee)))return ri.add(br)})){yi=!1;break}}else if(li!==wi&&!re(li,wi,Qt,he,Ee)){yi=!1;break}}return Ee.delete(Tt),Ee.delete(Ht),yi}function ue(Tt,Ht){var re,Qt,he=Tt.__data__;return((Qt=typeof(re=Ht))=="string"||Qt=="number"||Qt=="symbol"||Qt=="boolean"?re!=="__proto__":re===null)?he[typeof Ht=="string"?"string":"hash"]:he.map}function Fe(Tt,Ht){var re=function(Qt,he){return Qt?.[he]}(Tt,Ht);return ke(re)?re:void 0}var ai=function(Tt){return dt.call(Tt)};function Le(Tt,Ht){return!!(Ht=Ht??9007199254740991)&&(typeof Tt=="number"||m.test(Tt))&&Tt>-1&&Tt%1==0&&Tt<Ht}function Oe(Tt,Ht){if(fe(Tt))return!1;var re=typeof Tt;return!(re!="number"&&re!="symbol"&&re!="boolean"&&Tt!=null&&!Je(Tt))||c.test(Tt)||!l.test(Tt)||Ht!=null&&Tt in Object(Ht)}function ir(Tt){return Tt==Tt&&!Ke(Tt)}function We(Tt,Ht){return function(re){return re!=null&&re[Tt]===Ht&&(Ht!==void 0||Tt in Object(re))}}(wt&&ai(new wt(new ArrayBuffer(1)))!="[object DataView]"||_t&&ai(new _t)!=s||Ct&&ai(Ct.resolve())!="[object Promise]"||Ft&&ai(new Ft)!=o||At&&ai(new At)!="[object WeakMap]")&&(ai=function(Tt){var Ht=dt.call(Tt),re=Ht==a?Tt.constructor:void 0,Qt=re?jt(re):void 0;if(Qt)switch(Qt){case kt:return"[object DataView]";case gt:return s;case ut:return"[object Promise]";case Q:return o;case Y:return"[object WeakMap]"}return Ht});var It=ve(function(Tt){var Ht;Tt=(Ht=Tt)==null?"":function(Qt){if(typeof Qt=="string")return Qt;if(Je(Qt))return pt?pt.call(Qt):"";var he=Qt+"";return he=="0"&&1/Qt==-1/0?"-0":he}(Ht);var re=[];return h.test(Tt)&&re.push(""),Tt.replace(d,function(Qt,he,Ee,Ae){re.push(Ee?Ae.replace(p,"$1"):he||Qt)}),re});function qt(Tt){if(typeof Tt=="string"||Je(Tt))return Tt;var Ht=Tt+"";return Ht=="0"&&1/Tt==-1/0?"-0":Ht}function jt(Tt){if(Tt!=null){try{return it.call(Tt)}catch{}try{return Tt+""}catch{}}return""}var ae,Qe,se=(ae=function(Tt,Ht,re){ot.call(Tt,re)?Tt[re].push(Ht):Tt[re]=[Ht]},function(Tt,Ht){var re=fe(Tt)?G:ie,Qt=Qe?Qe():{};return re(Tt,ae,He(Ht),Qt)});function ve(Tt,Ht){if(typeof Tt!="function"||Ht&&typeof Ht!="function")throw new TypeError("Expected a function");var re=function(){var Qt=arguments,he=Ht?Ht.apply(this,Qt):Qt[0],Ee=re.cache;if(Ee.has(he))return Ee.get(he);var Ae=Tt.apply(this,Qt);return re.cache=Ee.set(he,Ae),Ae};return re.cache=new(ve.Cache||Ot),re}function $e(Tt,Ht){return Tt===Ht||Tt!=Tt&&Ht!=Ht}function Ie(Tt){return function(Ht){return pr(Ht)&&Ye(Ht)}(Tt)&&ot.call(Tt,"callee")&&(!q.call(Tt,"callee")||dt.call(Tt)==r)}ve.Cache=Ot;var fe=Array.isArray;function Ye(Tt){return Tt!=null&&ii(Tt.length)&&!Ve(Tt)}function Ve(Tt){var Ht=Ke(Tt)?dt.call(Tt):"";return Ht=="[object Function]"||Ht=="[object GeneratorFunction]"}function ii(Tt){return typeof Tt=="number"&&Tt>-1&&Tt%1==0&&Tt<=9007199254740991}function Ke(Tt){var Ht=typeof Tt;return!!Tt&&(Ht=="object"||Ht=="function")}function pr(Tt){return!!Tt&&typeof Tt=="object"}function Je(Tt){return typeof Tt=="symbol"||pr(Tt)&&dt.call(Tt)=="[object Symbol]"}var oi=V?function(Tt){return function(Ht){return Tt(Ht)}}(V):function(Tt){return pr(Tt)&&ii(Tt.length)&&!!_[dt.call(Tt)]};function cr(Tt){return Ye(Tt)?Jt(Tt):$t(Tt)}function ki(Tt){return Tt}t.exports=se}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(n,t,e){"use strict";var i=Object.prototype.toString;t.exports=function(r){return r===!0||r===!1||function(s){return!!s&&typeof s=="object"}(r)&&i.call(r)=="[object Boolean]"}},{}],445:[function(n,t,e){(function(i){(function(){"use strict";var r="[object Arguments]",s="[object Map]",a="[object Object]",o="[object Set]",l=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[r]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h["[object Function]"]=h[s]=h["[object Number]"]=h[a]=h["[object RegExp]"]=h[o]=h["[object String]"]=h["[object WeakMap]"]=!1;var d=typeof i=="object"&&i&&i.Object===Object&&i,p=typeof self=="object"&&self&&self.Object===Object&&self,g=d||p||Function("return this")(),m=typeof e=="object"&&e&&!e.nodeType&&e,_=m&&typeof t=="object"&&t&&!t.nodeType&&t,v=_&&_.exports===m,x=v&&d.process,S=function(){try{return x&&x.binding&&x.binding("util")}catch{}}(),O=S&&S.isTypedArray;function D(It,qt){for(var jt=-1,ae=It==null?0:It.length;++jt<ae;)if(qt(It[jt],jt,It))return!0;return!1}function U(It){var qt=-1,jt=Array(It.size);return It.forEach(function(ae,Qe){jt[++qt]=[Qe,ae]}),jt}function z(It){var qt=-1,jt=Array(It.size);return It.forEach(function(ae){jt[++qt]=ae}),jt}var V,G,tt,K=Array.prototype,B=Function.prototype,N=Object.prototype,Z=g["__core-js_shared__"],w=B.toString,C=N.hasOwnProperty,k=(V=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"",T=N.toString,R=RegExp("^"+w.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=v?g.Buffer:void 0,H=g.Symbol,it=g.Uint8Array,ot=N.propertyIsEnumerable,dt=K.splice,$=H?H.toStringTag:void 0,ct=Object.getOwnPropertySymbols,W=F?F.isBuffer:void 0,q=(G=Object.keys,tt=Object,function(It){return G(tt(It))}),rt=ye(g,"DataView"),mt=ye(g,"Map"),wt=ye(g,"Promise"),_t=ye(g,"Set"),Ct=ye(g,"WeakMap"),Ft=ye(Object,"create"),At=He(rt),vt=He(mt),kt=He(wt),gt=He(_t),ut=He(Ct),Q=H?H.prototype:void 0,Y=Q?Q.valueOf:void 0;function et(It){var qt=-1,jt=It==null?0:It.length;for(this.clear();++qt<jt;){var ae=It[qt];this.set(ae[0],ae[1])}}function lt(It){var qt=-1,jt=It==null?0:It.length;for(this.clear();++qt<jt;){var ae=It[qt];this.set(ae[0],ae[1])}}function pt(It){var qt=-1,jt=It==null?0:It.length;for(this.clear();++qt<jt;){var ae=It[qt];this.set(ae[0],ae[1])}}function bt(It){var qt=-1,jt=It==null?0:It.length;for(this.__data__=new pt;++qt<jt;)this.add(It[qt])}function Et(It){var qt=this.__data__=new lt(It);this.size=qt.size}function Ot(It,qt){var jt=bi(It),ae=!jt&&Te(It),Qe=!jt&&!ae&&ue(It),se=!jt&&!ae&&!Qe&&ir(It),ve=jt||ae||Qe||se,$e=ve?function(Ye,Ve){for(var ii=-1,Ke=Array(Ye);++ii<Ye;)Ke[ii]=Ve(ii);return Ke}(It.length,String):[],Ie=$e.length;for(var fe in It)!qt&&!C.call(It,fe)||ve&&(fe=="length"||Qe&&(fe=="offset"||fe=="parent")||se&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||ke(fe,Ie))||$e.push(fe);return $e}function zt(It,qt){for(var jt=It.length;jt--;)if($t(It[jt][0],qt))return jt;return-1}function Gt(It){return It==null?It===void 0?"[object Undefined]":"[object Null]":$&&$ in Object(It)?function(qt){var jt=C.call(qt,$),ae=qt[$];try{qt[$]=void 0;var Qe=!0}catch{}var se=T.call(qt);return Qe&&(jt?qt[$]=ae:delete qt[$]),se}(It):function(qt){return T.call(qt)}(It)}function Jt(It){return Oe(It)&&Gt(It)==r}function Kt(It,qt,jt,ae,Qe){return It===qt||(It==null||qt==null||!Oe(It)&&!Oe(qt)?It!=It&&qt!=qt:function(se,ve,$e,Ie,fe,Ye){var Ve=bi(se),ii=bi(ve),Ke=Ve?"[object Array]":ce(se),pr=ii?"[object Array]":ce(ve),Je=(Ke=Ke==r?a:Ke)==a,oi=(pr=pr==r?a:pr)==a,cr=Ke==pr;if(cr&&ue(se)){if(!ue(ve))return!1;Ve=!0,Je=!1}if(cr&&!Je)return Ye||(Ye=new Et),Ve||ir(se)?Ut(se,ve,$e,Ie,fe,Ye):function(Qt,he,Ee,Ae,ti,Ue,we){switch(Ee){case"[object DataView]":if(Qt.byteLength!=he.byteLength||Qt.byteOffset!=he.byteOffset)return!1;Qt=Qt.buffer,he=he.buffer;case"[object ArrayBuffer]":return!(Qt.byteLength!=he.byteLength||!Ue(new it(Qt),new it(he)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $t(+Qt,+he);case"[object Error]":return Qt.name==he.name&&Qt.message==he.message;case"[object RegExp]":case"[object String]":return Qt==he+"";case s:var pe=U;case o:var yi=1&Ae;if(pe||(pe=z),Qt.size!=he.size&&!yi)return!1;var ri=we.get(Qt);if(ri)return ri==he;Ae|=2,we.set(Qt,he);var li=Ut(pe(Qt),pe(he),Ae,ti,Ue,we);return we.delete(Qt),li;case"[object Symbol]":if(Y)return Y.call(Qt)==Y.call(he)}return!1}(se,ve,Ke,$e,Ie,fe,Ye);if(!(1&$e)){var ki=Je&&C.call(se,"__wrapped__"),Tt=oi&&C.call(ve,"__wrapped__");if(ki||Tt){var Ht=ki?se.value():se,re=Tt?ve.value():ve;return Ye||(Ye=new Et),fe(Ht,re,$e,Ie,Ye)}}return cr?(Ye||(Ye=new Et),function(Qt,he,Ee,Ae,ti,Ue){var we=1&Ee,pe=_e(Qt),yi=pe.length,ri=_e(he).length;if(yi!=ri&&!we)return!1;for(var li=yi;li--;){var wi=pe[li];if(!(we?wi in he:C.call(he,wi)))return!1}var me=Ue.get(Qt);if(me&&Ue.get(he))return me==he;var ui=!0;Ue.set(Qt,he),Ue.set(he,Qt);for(var br=we;++li<yi;){wi=pe[li];var Xr=Qt[wi],Se=he[wi];if(Ae)var Ln=we?Ae(Se,Xr,wi,he,Qt,Ue):Ae(Xr,Se,wi,Qt,he,Ue);if(!(Ln===void 0?Xr===Se||ti(Xr,Se,Ee,Ae,Ue):Ln)){ui=!1;break}br||(br=wi=="constructor")}if(ui&&!br){var Vn=Qt.constructor,ni=he.constructor;Vn==ni||!("constructor"in Qt)||!("constructor"in he)||typeof Vn=="function"&&Vn instanceof Vn&&typeof ni=="function"&&ni instanceof ni||(ui=!1)}return Ue.delete(Qt),Ue.delete(he),ui}(se,ve,$e,Ie,fe,Ye)):!1}(It,qt,jt,ae,Kt,Qe))}function ie(It){return!(!Le(It)||function(qt){return!!k&&k in qt}(It))&&(Fe(It)?R:l).test(He(It))}function Xt(It){if(jt=(qt=It)&&qt.constructor,ae=typeof jt=="function"&&jt.prototype||N,qt!==ae)return q(It);var qt,jt,ae,Qe=[];for(var se in Object(It))C.call(It,se)&&se!="constructor"&&Qe.push(se);return Qe}function Ut(It,qt,jt,ae,Qe,se){var ve=1&jt,$e=It.length,Ie=qt.length;if($e!=Ie&&!(ve&&Ie>$e))return!1;var fe=se.get(It);if(fe&&se.get(qt))return fe==qt;var Ye=-1,Ve=!0,ii=2&jt?new bt:void 0;for(se.set(It,qt),se.set(qt,It);++Ye<$e;){var Ke=It[Ye],pr=qt[Ye];if(ae)var Je=ve?ae(pr,Ke,Ye,qt,It,se):ae(Ke,pr,Ye,It,qt,se);if(Je!==void 0){if(Je)continue;Ve=!1;break}if(ii){if(!D(qt,function(oi,cr){if(ki=cr,!ii.has(ki)&&(Ke===oi||Qe(Ke,oi,jt,ae,se)))return ii.push(cr);var ki})){Ve=!1;break}}else if(Ke!==pr&&!Qe(Ke,pr,jt,ae,se)){Ve=!1;break}}return se.delete(It),se.delete(qt),Ve}function _e(It){return function(qt,jt,ae){var Qe=jt(qt);return bi(qt)?Qe:function(se,ve){for(var $e=-1,Ie=ve.length,fe=se.length;++$e<Ie;)se[fe+$e]=ve[$e];return se}(Qe,ae(qt))}(It,We,Ze)}function le(It,qt){var jt,ae,Qe=It.__data__;return((ae=typeof(jt=qt))=="string"||ae=="number"||ae=="symbol"||ae=="boolean"?jt!=="__proto__":jt===null)?Qe[typeof qt=="string"?"string":"hash"]:Qe.map}function ye(It,qt){var jt=function(ae,Qe){return ae?.[Qe]}(It,qt);return ie(jt)?jt:void 0}et.prototype.clear=function(){this.__data__=Ft?Ft(null):{},this.size=0},et.prototype.delete=function(It){var qt=this.has(It)&&delete this.__data__[It];return this.size-=qt?1:0,qt},et.prototype.get=function(It){var qt=this.__data__;if(Ft){var jt=qt[It];return jt==="__lodash_hash_undefined__"?void 0:jt}return C.call(qt,It)?qt[It]:void 0},et.prototype.has=function(It){var qt=this.__data__;return Ft?qt[It]!==void 0:C.call(qt,It)},et.prototype.set=function(It,qt){var jt=this.__data__;return this.size+=this.has(It)?0:1,jt[It]=Ft&&qt===void 0?"__lodash_hash_undefined__":qt,this},lt.prototype.clear=function(){this.__data__=[],this.size=0},lt.prototype.delete=function(It){var qt=this.__data__,jt=zt(qt,It);return!(jt<0)&&(jt==qt.length-1?qt.pop():dt.call(qt,jt,1),--this.size,!0)},lt.prototype.get=function(It){var qt=this.__data__,jt=zt(qt,It);return jt<0?void 0:qt[jt][1]},lt.prototype.has=function(It){return zt(this.__data__,It)>-1},lt.prototype.set=function(It,qt){var jt=this.__data__,ae=zt(jt,It);return ae<0?(++this.size,jt.push([It,qt])):jt[ae][1]=qt,this},pt.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new(mt||lt),string:new et}},pt.prototype.delete=function(It){var qt=le(this,It).delete(It);return this.size-=qt?1:0,qt},pt.prototype.get=function(It){return le(this,It).get(It)},pt.prototype.has=function(It){return le(this,It).has(It)},pt.prototype.set=function(It,qt){var jt=le(this,It),ae=jt.size;return jt.set(It,qt),this.size+=jt.size==ae?0:1,this},bt.prototype.add=bt.prototype.push=function(It){return this.__data__.set(It,"__lodash_hash_undefined__"),this},bt.prototype.has=function(It){return this.__data__.has(It)},Et.prototype.clear=function(){this.__data__=new lt,this.size=0},Et.prototype.delete=function(It){var qt=this.__data__,jt=qt.delete(It);return this.size=qt.size,jt},Et.prototype.get=function(It){return this.__data__.get(It)},Et.prototype.has=function(It){return this.__data__.has(It)},Et.prototype.set=function(It,qt){var jt=this.__data__;if(jt instanceof lt){var ae=jt.__data__;if(!mt||ae.length<199)return ae.push([It,qt]),this.size=++jt.size,this;jt=this.__data__=new pt(ae)}return jt.set(It,qt),this.size=jt.size,this};var Ze=ct?function(It){return It==null?[]:(It=Object(It),function(qt,jt){for(var ae=-1,Qe=qt==null?0:qt.length,se=0,ve=[];++ae<Qe;){var $e=qt[ae];jt($e,ae,qt)&&(ve[se++]=$e)}return ve}(ct(It),function(qt){return ot.call(It,qt)}))}:function(){return[]},ce=Gt;function ke(It,qt){return!!(qt=qt??9007199254740991)&&(typeof It=="number"||c.test(It))&&It>-1&&It%1==0&&It<qt}function He(It){if(It!=null){try{return w.call(It)}catch{}try{return It+""}catch{}}return""}function $t(It,qt){return It===qt||It!=It&&qt!=qt}(rt&&ce(new rt(new ArrayBuffer(1)))!="[object DataView]"||mt&&ce(new mt)!=s||wt&&ce(wt.resolve())!="[object Promise]"||_t&&ce(new _t)!=o||Ct&&ce(new Ct)!="[object WeakMap]")&&(ce=function(It){var qt=Gt(It),jt=qt==a?It.constructor:void 0,ae=jt?He(jt):"";if(ae)switch(ae){case At:return"[object DataView]";case vt:return s;case kt:return"[object Promise]";case gt:return o;case ut:return"[object WeakMap]"}return qt});var Te=Jt(function(){return arguments}())?Jt:function(It){return Oe(It)&&C.call(It,"callee")&&!ot.call(It,"callee")},bi=Array.isArray,ue=W||function(){return!1};function Fe(It){if(!Le(It))return!1;var qt=Gt(It);return qt=="[object Function]"||qt=="[object GeneratorFunction]"||qt=="[object AsyncFunction]"||qt=="[object Proxy]"}function ai(It){return typeof It=="number"&&It>-1&&It%1==0&&It<=9007199254740991}function Le(It){var qt=typeof It;return It!=null&&(qt=="object"||qt=="function")}function Oe(It){return It!=null&&typeof It=="object"}var ir=O?function(It){return function(qt){return It(qt)}}(O):function(It){return Oe(It)&&ai(It.length)&&!!h[Gt(It)]};function We(It){return(qt=It)!=null&&ai(qt.length)&&!Fe(qt)?Ot(It):Xt(It);var qt}t.exports=function(It,qt){return Kt(It,qt)}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(n,t,e){(function(i){(function(){"use strict";var r=typeof i=="object"&&i&&i.Object===Object&&i,s=typeof self=="object"&&self&&self.Object===Object&&self,a=r||s||Function("return this")(),o=Object.prototype,l=o.hasOwnProperty,c=o.toString,h=a.Symbol,d=h?h.toStringTag:void 0;function p(g){return g==null?g===void 0?"[object Undefined]":"[object Null]":d&&d in Object(g)?function(m){var _=l.call(m,d),v=m[d];try{m[d]=void 0;var x=!0}catch{}var S=c.call(m);return x&&(_?m[d]=v:delete m[d]),S}(g):function(m){return c.call(m)}(g)}t.exports=function(g){if(!function(_){var v=typeof _;return _!=null&&(v=="object"||v=="function")}(g))return!1;var m=p(g);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(n,t,e){"use strict";t.exports=function(i){return i==null}},{}],448:[function(n,t,e){"use strict";t.exports=function(i){return i===void 0}},{}],449:[function(n,t,e){(function(i){(function(){"use strict";var r=/^\[object .+?Constructor\]$/,s=typeof i=="object"&&i&&i.Object===Object&&i,a=typeof self=="object"&&self&&self.Object===Object&&self,o=s||a||Function("return this")();function l(it,ot){return!!(it&&it.length)&&function(dt,$,ct){if($!=$)return function(rt,mt,wt,_t){for(var Ct=rt.length,Ft=wt+(_t?1:-1);_t?Ft--:++Ft<Ct;)if(mt(rt[Ft],Ft,rt))return Ft;return-1}(dt,h,ct);for(var W=ct-1,q=dt.length;++W<q;)if(dt[W]===$)return W;return-1}(it,ot,0)>-1}function c(it,ot,dt){for(var $=-1,ct=it?it.length:0;++$<ct;)if(dt(ot,it[$]))return!0;return!1}function h(it){return it!=it}function d(it,ot){return it.has(ot)}function p(it){var ot=-1,dt=Array(it.size);return it.forEach(function($){dt[++ot]=$}),dt}var g,m=Array.prototype,_=Function.prototype,v=Object.prototype,x=o["__core-js_shared__"],S=(g=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",O=_.toString,D=v.hasOwnProperty,U=v.toString,z=RegExp("^"+O.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=m.splice,G=F(o,"Map"),tt=F(o,"Set"),K=F(Object,"create");function B(it){var ot=-1,dt=it?it.length:0;for(this.clear();++ot<dt;){var $=it[ot];this.set($[0],$[1])}}function N(it){var ot=-1,dt=it?it.length:0;for(this.clear();++ot<dt;){var $=it[ot];this.set($[0],$[1])}}function Z(it){var ot=-1,dt=it?it.length:0;for(this.clear();++ot<dt;){var $=it[ot];this.set($[0],$[1])}}function w(it){var ot=-1,dt=it?it.length:0;for(this.__data__=new Z;++ot<dt;)this.add(it[ot])}function C(it,ot){for(var dt,$,ct=it.length;ct--;)if((dt=it[ct][0])===($=ot)||dt!=dt&&$!=$)return ct;return-1}function k(it){return!(!H(it)||(ot=it,S&&S in ot))&&(function(dt){var $=H(dt)?U.call(dt):"";return $=="[object Function]"||$=="[object GeneratorFunction]"}(it)||function(dt){var $=!1;if(dt!=null&&typeof dt.toString!="function")try{$=!!(dt+"")}catch{}return $}(it)?z:r).test(function(dt){if(dt!=null){try{return O.call(dt)}catch{}try{return dt+""}catch{}}return""}(it));var ot}B.prototype.clear=function(){this.__data__=K?K(null):{}},B.prototype.delete=function(it){return this.has(it)&&delete this.__data__[it]},B.prototype.get=function(it){var ot=this.__data__;if(K){var dt=ot[it];return dt==="__lodash_hash_undefined__"?void 0:dt}return D.call(ot,it)?ot[it]:void 0},B.prototype.has=function(it){var ot=this.__data__;return K?ot[it]!==void 0:D.call(ot,it)},B.prototype.set=function(it,ot){return this.__data__[it]=K&&ot===void 0?"__lodash_hash_undefined__":ot,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(it){var ot=this.__data__,dt=C(ot,it);return!(dt<0)&&(dt==ot.length-1?ot.pop():V.call(ot,dt,1),!0)},N.prototype.get=function(it){var ot=this.__data__,dt=C(ot,it);return dt<0?void 0:ot[dt][1]},N.prototype.has=function(it){return C(this.__data__,it)>-1},N.prototype.set=function(it,ot){var dt=this.__data__,$=C(dt,it);return $<0?dt.push([it,ot]):dt[$][1]=ot,this},Z.prototype.clear=function(){this.__data__={hash:new B,map:new(G||N),string:new B}},Z.prototype.delete=function(it){return R(this,it).delete(it)},Z.prototype.get=function(it){return R(this,it).get(it)},Z.prototype.has=function(it){return R(this,it).has(it)},Z.prototype.set=function(it,ot){return R(this,it).set(it,ot),this},w.prototype.add=w.prototype.push=function(it){return this.__data__.set(it,"__lodash_hash_undefined__"),this},w.prototype.has=function(it){return this.__data__.has(it)};var T=tt&&1/p(new tt([,-0]))[1]==1/0?function(it){return new tt(it)}:function(){};function R(it,ot){var dt,$,ct=it.__data__;return(($=typeof(dt=ot))=="string"||$=="number"||$=="symbol"||$=="boolean"?dt!=="__proto__":dt===null)?ct[typeof ot=="string"?"string":"hash"]:ct.map}function F(it,ot){var dt=function($,ct){return $?.[ct]}(it,ot);return k(dt)?dt:void 0}function H(it){var ot=typeof it;return!!it&&(ot=="object"||ot=="function")}t.exports=function(it){return it&&it.length?function(ot,dt,$){var ct=-1,W=l,q=ot.length,rt=!0,mt=[],wt=mt;if($)rt=!1,W=c;else if(q>=200){var _t=dt?null:T(ot);if(_t)return p(_t);rt=!1,W=d,wt=new w}else wt=dt?[]:mt;t:for(;++ct<q;){var Ct=ot[ct],Ft=dt?dt(Ct):Ct;if(Ct=$||Ct!==0?Ct:0,rt&&Ft==Ft){for(var At=wt.length;At--;)if(wt[At]===Ft)continue t;dt&&wt.push(Ft),mt.push(Ct)}else W(wt,Ft,$)||(wt!==mt&&wt.push(Ft),mt.push(Ct))}return mt}(it):[]}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(n,t,e){"use strict";var i=n("inherits"),r=n("hash-base"),s=n("safe-buffer").Buffer,a=new Array(16);function o(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function l(g,m){return g<<m|g>>>32-m}function c(g,m,_,v,x,S,O){return l(g+(m&_|~m&v)+x+S|0,O)+m|0}function h(g,m,_,v,x,S,O){return l(g+(m&v|_&~v)+x+S|0,O)+m|0}function d(g,m,_,v,x,S,O){return l(g+(m^_^v)+x+S|0,O)+m|0}function p(g,m,_,v,x,S,O){return l(g+(_^(m|~v))+x+S|0,O)+m|0}i(o,r),o.prototype._update=function(){for(var g=a,m=0;m<16;++m)g[m]=this._block.readInt32LE(4*m);var _=this._a,v=this._b,x=this._c,S=this._d;_=c(_,v,x,S,g[0],3614090360,7),S=c(S,_,v,x,g[1],3905402710,12),x=c(x,S,_,v,g[2],606105819,17),v=c(v,x,S,_,g[3],3250441966,22),_=c(_,v,x,S,g[4],4118548399,7),S=c(S,_,v,x,g[5],1200080426,12),x=c(x,S,_,v,g[6],2821735955,17),v=c(v,x,S,_,g[7],4249261313,22),_=c(_,v,x,S,g[8],1770035416,7),S=c(S,_,v,x,g[9],2336552879,12),x=c(x,S,_,v,g[10],4294925233,17),v=c(v,x,S,_,g[11],2304563134,22),_=c(_,v,x,S,g[12],1804603682,7),S=c(S,_,v,x,g[13],4254626195,12),x=c(x,S,_,v,g[14],2792965006,17),_=h(_,v=c(v,x,S,_,g[15],1236535329,22),x,S,g[1],4129170786,5),S=h(S,_,v,x,g[6],3225465664,9),x=h(x,S,_,v,g[11],643717713,14),v=h(v,x,S,_,g[0],3921069994,20),_=h(_,v,x,S,g[5],3593408605,5),S=h(S,_,v,x,g[10],38016083,9),x=h(x,S,_,v,g[15],3634488961,14),v=h(v,x,S,_,g[4],3889429448,20),_=h(_,v,x,S,g[9],568446438,5),S=h(S,_,v,x,g[14],3275163606,9),x=h(x,S,_,v,g[3],4107603335,14),v=h(v,x,S,_,g[8],1163531501,20),_=h(_,v,x,S,g[13],2850285829,5),S=h(S,_,v,x,g[2],4243563512,9),x=h(x,S,_,v,g[7],1735328473,14),_=d(_,v=h(v,x,S,_,g[12],2368359562,20),x,S,g[5],4294588738,4),S=d(S,_,v,x,g[8],2272392833,11),x=d(x,S,_,v,g[11],1839030562,16),v=d(v,x,S,_,g[14],4259657740,23),_=d(_,v,x,S,g[1],2763975236,4),S=d(S,_,v,x,g[4],1272893353,11),x=d(x,S,_,v,g[7],4139469664,16),v=d(v,x,S,_,g[10],3200236656,23),_=d(_,v,x,S,g[13],681279174,4),S=d(S,_,v,x,g[0],3936430074,11),x=d(x,S,_,v,g[3],3572445317,16),v=d(v,x,S,_,g[6],76029189,23),_=d(_,v,x,S,g[9],3654602809,4),S=d(S,_,v,x,g[12],3873151461,11),x=d(x,S,_,v,g[15],530742520,16),_=p(_,v=d(v,x,S,_,g[2],3299628645,23),x,S,g[0],4096336452,6),S=p(S,_,v,x,g[7],1126891415,10),x=p(x,S,_,v,g[14],2878612391,15),v=p(v,x,S,_,g[5],4237533241,21),_=p(_,v,x,S,g[12],1700485571,6),S=p(S,_,v,x,g[3],2399980690,10),x=p(x,S,_,v,g[10],4293915773,15),v=p(v,x,S,_,g[1],2240044497,21),_=p(_,v,x,S,g[8],1873313359,6),S=p(S,_,v,x,g[15],4264355552,10),x=p(x,S,_,v,g[6],2734768916,15),v=p(v,x,S,_,g[13],1309151649,21),_=p(_,v,x,S,g[4],4149444226,6),S=p(S,_,v,x,g[11],3174756917,10),x=p(x,S,_,v,g[2],718787259,15),v=p(v,x,S,_,g[9],3951481745,21),this._a=this._a+_|0,this._b=this._b+v|0,this._c=this._c+x|0,this._d=this._d+S|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var g=s.allocUnsafe(16);return g.writeInt32LE(this._a,0),g.writeInt32LE(this._b,4),g.writeInt32LE(this._c,8),g.writeInt32LE(this._d,12),g},t.exports=o},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(n,t,e){"use strict";var i=n("bn.js"),r=n("brorand");function s(a){this.rand=a||new r.Rand}t.exports=s,s.create=function(a){return new s(a)},s.prototype._randbelow=function(a){var o=a.bitLength(),l=Math.ceil(o/8);do var c=new i(this.rand.generate(l));while(c.cmp(a)>=0);return c},s.prototype._randrange=function(a,o){var l=o.sub(a);return a.add(this._randbelow(l))},s.prototype.test=function(a,o,l){var c=a.bitLength(),h=i.mont(a),d=new i(1).toRed(h);o||(o=Math.max(1,c/48|0));for(var p=a.subn(1),g=0;!p.testn(g);g++);for(var m=a.shrn(g),_=p.toRed(h);o>0;o--){var v=this._randrange(new i(2),p);l&&l(v);var x=v.toRed(h).redPow(m);if(x.cmp(d)!==0&&x.cmp(_)!==0){for(var S=1;S<g;S++){if((x=x.redSqr()).cmp(d)===0)return!1;if(x.cmp(_)===0)break}if(S===g)return!1}}return!0},s.prototype.getDivisor=function(a,o){var l=a.bitLength(),c=i.mont(a),h=new i(1).toRed(c);o||(o=Math.max(1,l/48|0));for(var d=a.subn(1),p=0;!d.testn(p);p++);for(var g=a.shrn(p),m=d.toRed(c);o>0;o--){var _=this._randrange(new i(2),d),v=a.gcd(_);if(v.cmpn(1)!==0)return v;var x=_.toRed(c).redPow(g);if(x.cmp(h)!==0&&x.cmp(m)!==0){for(var S=1;S<p;S++){if((x=x.redSqr()).cmp(h)===0)return x.fromRed().subn(1).gcd(a);if(x.cmp(m)===0)break}if(S===p)return(x=x.redSqr()).fromRed().subn(1).gcd(a)}}return!1}},{"bn.js":452,brorand:187}],452:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],453:[function(n,t,e){"use strict";function i(r,s){if(!r)throw new Error(s||"Assertion failed")}t.exports=i,i.equal=function(r,s,a){if(r!=s)throw new Error(a||"Assertion failed: "+r+" != "+s)}},{}],454:[function(n,t,e){"use strict";var i=e;function r(a){return a.length===1?"0"+a:a}function s(a){for(var o="",l=0;l<a.length;l++)o+=r(a[l].toString(16));return o}i.toArray=function(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var l=[];if(typeof a!="string"){for(var c=0;c<a.length;c++)l[c]=0|a[c];return l}if(o==="hex")for((a=a.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(a="0"+a),c=0;c<a.length;c+=2)l.push(parseInt(a[c]+a[c+1],16));else for(c=0;c<a.length;c++){var h=a.charCodeAt(c),d=h>>8,p=255&h;d?l.push(d,p):l.push(p)}return l},i.zero2=r,i.toHex=s,i.encode=function(a,o){return o==="hex"?s(a):a}},{}],455:[function(n,t,e){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(n,t,e){"use strict";var i=n("asn1.js");e.certificate=n("./certificate");var r=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=r;var s=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=s;var a=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())});e.PublicKey=a;var o=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())});e.PrivateKey=l;var c=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=c;var h=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=h,e.DSAparam=i.define("DSAparam",function(){this.int()});var d=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=d;var p=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});e.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(n,t,e){"use strict";var i=n("asn1.js"),r=i.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),s=i.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),o=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),l=i.define("RelativeDistinguishedName",function(){this.setof(s)}),c=i.define("RDNSequence",function(){this.seqof(l)}),h=i.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),d=i.define("Validity",function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))}),p=i.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),g=i.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(h),this.key("validity").use(d),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(p).optional())}),m=i.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(g),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});t.exports=m},{"asn1.js":170}],458:[function(n,t,e){"use strict";var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=n("evp_bytestokey"),o=n("browserify-aes"),l=n("safe-buffer").Buffer;t.exports=function(c,h){var d,p=c.toString(),g=p.match(i);if(g){var m="aes"+g[1],_=l.from(g[2],"hex"),v=l.from(g[3].replace(/[\r\n]/g,""),"base64"),x=a(h,_.slice(0,8),parseInt(g[1],10)).key,S=[],O=o.createDecipheriv(m,x,_);S.push(O.update(v)),S.push(O.final()),d=l.concat(S)}else{var D=p.match(s);d=l.from(D[2].replace(/[\r\n]/g,""),"base64")}return{tag:p.match(r)[1],data:d}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(n,t,e){"use strict";var i=n("./asn1"),r=n("./aesid.json"),s=n("./fixProc"),a=n("browserify-aes"),o=n("pbkdf2"),l=n("safe-buffer").Buffer;function c(h){var d;typeof h!="object"||l.isBuffer(h)||(d=h.passphrase,h=h.key),typeof h=="string"&&(h=l.from(h));var p,g,m=s(h,d),_=m.tag,v=m.data;switch(_){case"CERTIFICATE":g=i.certificate.decode(v,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(g||(g=i.PublicKey.decode(v,"der")),p=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(g.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return g.subjectPrivateKey=g.subjectPublicKey,{type:"ec",data:g};case"1.2.840.10040.4.1":return g.algorithm.params.pub_key=i.DSAparam.decode(g.subjectPublicKey.data,"der"),{type:"dsa",data:g.algorithm.params};default:throw new Error("unknown key id "+p)}case"ENCRYPTED PRIVATE KEY":v=function(x,S){var O=x.algorithm.decrypt.kde.kdeparams.salt,D=parseInt(x.algorithm.decrypt.kde.kdeparams.iters.toString(),10),U=r[x.algorithm.decrypt.cipher.algo.join(".")],z=x.algorithm.decrypt.cipher.iv,V=x.subjectPrivateKey,G=parseInt(U.split("-")[1],10)/8,tt=o.pbkdf2Sync(S,O,D,G,"sha1"),K=a.createDecipheriv(U,tt,z),B=[];return B.push(K.update(V)),B.push(K.final()),l.concat(B)}(v=i.EncryptedPrivateKey.decode(v,"der"),d);case"PRIVATE KEY":switch(p=(g=i.PrivateKey.decode(v,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(g.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:g.algorithm.curve,privateKey:i.ECPrivateKey.decode(g.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return g.algorithm.params.priv_key=i.DSAparam.decode(g.subjectPrivateKey,"der"),{type:"dsa",params:g.algorithm.params};default:throw new Error("unknown key id "+p)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(v,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(v,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(v,"der")};case"EC PRIVATE KEY":return{curve:(v=i.ECPrivateKey.decode(v,"der")).parameters.value,privateKey:v.privateKey};default:throw new Error("unknown key type "+_)}}t.exports=c,c.signature=i.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(n,t,e){"use strict";e.pbkdf2=n("./lib/async"),e.pbkdf2Sync=n("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(n,t,e){(function(i){(function(){"use strict";var r,s,a=n("safe-buffer").Buffer,o=n("./precondition"),l=n("./default-encoding"),c=n("./sync"),h=n("./to-buffer"),d=i.crypto&&i.crypto.subtle,p={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},g=[];function m(){return s||(s=i.process&&i.process.nextTick?i.process.nextTick:i.queueMicrotask?i.queueMicrotask:i.setImmediate?i.setImmediate:i.setTimeout)}function _(v,x,S,O,D){return d.importKey("raw",v,{name:"PBKDF2"},!1,["deriveBits"]).then(function(U){return d.deriveBits({name:"PBKDF2",salt:x,iterations:S,hash:{name:D}},U,O<<3)}).then(function(U){return a.from(U)})}t.exports=function(v,x,S,O,D,U){typeof D=="function"&&(U=D,D=void 0);var z=p[(D=D||"sha1").toLowerCase()];if(z&&typeof i.Promise=="function"){if(o(S,O),v=h(v,l,"Password"),x=h(x,l,"Salt"),typeof U!="function")throw new Error("No callback provided to pbkdf2");(function(V,G){V.then(function(tt){m()(function(){G(null,tt)})},function(tt){m()(function(){G(tt)})})})(function(V){if(i.process&&!i.process.browser||!d||!d.importKey||!d.deriveBits)return Promise.resolve(!1);if(g[V]!==void 0)return g[V];var G=_(r=r||a.alloc(8),r,10,128,V).then(function(){return!0}).catch(function(){return!1});return g[V]=G,G}(z).then(function(V){return V?_(v,x,S,O,z):c(v,x,S,O,D)}),U)}else m()(function(){var V;try{V=c(v,x,S,O,D)}catch(G){return U(G)}U(null,V)})}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(n,t,e){(function(i,r){(function(){"use strict";var s;r.process&&r.process.browser?s="utf-8":r.process&&r.process.version?s=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":s="utf-8",t.exports=s}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(n,t,e){"use strict";var i=Math.pow(2,30)-1;t.exports=function(r,s){if(typeof r!="number")throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if(typeof s!="number")throw new TypeError("Key length not a number");if(s<0||s>i||s!=s)throw new TypeError("Bad key length")}},{}],464:[function(n,t,e){"use strict";var i=n("create-hash/md5"),r=n("ripemd160"),s=n("sha.js"),a=n("safe-buffer").Buffer,o=n("./precondition"),l=n("./default-encoding"),c=n("./to-buffer"),h=a.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function p(g,m,_){var v=function(z){function V(G){return s(z).update(G).digest()}return z==="rmd160"||z==="ripemd160"?function(G){return new r().update(G).digest()}:z==="md5"?i:V}(g),x=g==="sha512"||g==="sha384"?128:64;m.length>x?m=v(m):m.length<x&&(m=a.concat([m,h],x));for(var S=a.allocUnsafe(x+d[g]),O=a.allocUnsafe(x+d[g]),D=0;D<x;D++)S[D]=54^m[D],O[D]=92^m[D];var U=a.allocUnsafe(x+_+4);S.copy(U,0,0,x),this.ipad1=U,this.ipad2=S,this.opad=O,this.alg=g,this.blocksize=x,this.hash=v,this.size=d[g]}p.prototype.run=function(g,m){return g.copy(m,this.blocksize),this.hash(m).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(g,m,_,v,x){o(_,v);var S=new p(x=x||"sha1",g=c(g,l,"Password"),(m=c(m,l,"Salt")).length),O=a.allocUnsafe(v),D=a.allocUnsafe(m.length+4);m.copy(D,0,0,m.length);for(var U=0,z=d[x],V=Math.ceil(v/z),G=1;G<=V;G++){D.writeUInt32BE(G,m.length);for(var tt=S.run(D,S.ipad1),K=tt,B=1;B<_;B++){K=S.run(K,S.ipad2);for(var N=0;N<z;N++)tt[N]^=K[N]}tt.copy(O,U),U+=z}return O}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer;t.exports=function(r,s,a){if(i.isBuffer(r))return r;if(typeof r=="string")return i.from(r,s);if(ArrayBuffer.isView(r))return i.from(r.buffer);throw new TypeError(a+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(n,t,e){(function(i){(function(){"use strict";i===void 0||!i.version||i.version.indexOf("v0.")===0||i.version.indexOf("v1.")===0&&i.version.indexOf("v1.8.")!==0?t.exports={nextTick:function(r,s,a,o){if(typeof r!="function")throw new TypeError('"callback" argument must be a function');var l,c,h=arguments.length;switch(h){case 0:case 1:return i.nextTick(r);case 2:return i.nextTick(function(){r.call(null,s)});case 3:return i.nextTick(function(){r.call(null,s,a)});case 4:return i.nextTick(function(){r.call(null,s,a,o)});default:for(l=new Array(h-1),c=0;c<l.length;)l[c++]=arguments[c];return i.nextTick(function(){r.apply(null,l)})}}}:t.exports=i}).call(this)}).call(this,n("_process"))},{_process:467}],467:[function(n,t,e){"use strict";var i,r,s=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(x){if(i===setTimeout)return setTimeout(x,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(x,0);try{return i(x,0)}catch{try{return i.call(null,x,0)}catch{return i.call(this,x,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:a}catch{i=a}try{r=typeof clearTimeout=="function"?clearTimeout:o}catch{r=o}})();var c,h=[],d=!1,p=-1;function g(){d&&c&&(d=!1,c.length?h=c.concat(h):p=-1,h.length&&m())}function m(){if(!d){var x=l(g);d=!0;for(var S=h.length;S;){for(c=h,h=[];++p<S;)c&&c[p].run();p=-1,S=h.length}c=null,d=!1,function(O){if(r===clearTimeout)return clearTimeout(O);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(O);try{r(O)}catch{try{return r.call(null,O)}catch{return r.call(this,O)}}}(x)}}function _(x,S){this.fun=x,this.array=S}function v(){}s.nextTick=function(x){var S=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)S[O-1]=arguments[O];h.push(new _(x,S)),h.length!==1||d||l(m)},_.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(x){return[]},s.binding=function(x){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(x){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],468:[function(n,t,e){"use strict";e.publicEncrypt=n("./publicEncrypt"),e.privateDecrypt=n("./privateDecrypt"),e.privateEncrypt=function(i,r){return e.publicEncrypt(i,r,!0)},e.publicDecrypt=function(i,r){return e.privateDecrypt(i,r,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(n,t,e){"use strict";var i=n("create-hash"),r=n("safe-buffer").Buffer;function s(a){var o=r.allocUnsafe(4);return o.writeUInt32BE(a,0),o}t.exports=function(a,o){for(var l,c=r.alloc(0),h=0;c.length<o;)l=s(h++),c=r.concat([c,i("sha1").update(a).update(l).digest()]);return c.slice(0,o)}},{"create-hash":386,"safe-buffer":494}],470:[function(n,t,e){arguments[4][184][0].apply(e,arguments)},{buffer:188,dup:184}],471:[function(n,t,e){"use strict";var i=n("parse-asn1"),r=n("./mgf"),s=n("./xor"),a=n("bn.js"),o=n("browserify-rsa"),l=n("create-hash"),c=n("./withPublic"),h=n("safe-buffer").Buffer;t.exports=function(d,p,g){var m;m=d.padding?d.padding:g?1:4;var _,v=i(d),x=v.modulus.byteLength();if(p.length>x||new a(p).cmp(v.modulus)>=0)throw new Error("decryption error");_=g?c(new a(p),v):o(p,v);var S=h.alloc(x-_.length);if(_=h.concat([S,_],x),m===4)return function(O,D){var U=O.modulus.byteLength(),z=l("sha1").update(h.alloc(0)).digest(),V=z.length;if(D[0]!==0)throw new Error("decryption error");var G=D.slice(1,V+1),tt=D.slice(V+1),K=s(G,r(tt,V)),B=s(tt,r(K,U-V-1));if(function(Z,w){Z=h.from(Z),w=h.from(w);var C=0,k=Z.length;Z.length!==w.length&&(C++,k=Math.min(Z.length,w.length));for(var T=-1;++T<k;)C+=Z[T]^w[T];return C}(z,B.slice(0,V)))throw new Error("decryption error");for(var N=V;B[N]===0;)N++;if(B[N++]!==1)throw new Error("decryption error");return B.slice(N)}(v,_);if(m===1)return function(O,D,U){for(var z=D.slice(0,2),V=2,G=0;D[V++]!==0;)if(V>=D.length){G++;break}var tt=D.slice(2,V-1);if((z.toString("hex")!=="0002"&&!U||z.toString("hex")!=="0001"&&U)&&G++,tt.length<8&&G++,G)throw new Error("decryption error");return D.slice(V)}(0,_,g);if(m===3)return _;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(n,t,e){"use strict";var i=n("parse-asn1"),r=n("randombytes"),s=n("create-hash"),a=n("./mgf"),o=n("./xor"),l=n("bn.js"),c=n("./withPublic"),h=n("browserify-rsa"),d=n("safe-buffer").Buffer;t.exports=function(p,g,m){var _;_=p.padding?p.padding:m?1:4;var v,x=i(p);if(_===4)v=function(S,O){var D=S.modulus.byteLength(),U=O.length,z=s("sha1").update(d.alloc(0)).digest(),V=z.length,G=2*V;if(U>D-G-2)throw new Error("message too long");var tt=d.alloc(D-U-G-2),K=D-V-1,B=r(V),N=o(d.concat([z,tt,d.alloc(1,1),O],K),a(B,K)),Z=o(B,a(N,V));return new l(d.concat([d.alloc(1),Z,N],D))}(x,g);else if(_===1)v=function(S,O,D){var U,z=O.length,V=S.modulus.byteLength();if(z>V-11)throw new Error("message too long");return U=D?d.alloc(V-z-3,255):function(G){for(var tt,K=d.allocUnsafe(G),B=0,N=r(2*G),Z=0;B<G;)Z===N.length&&(N=r(2*G),Z=0),(tt=N[Z++])&&(K[B++]=tt);return K}(V-z-3),new l(d.concat([d.from([0,D?1:2]),U,d.alloc(1),O],V))}(x,g,m);else{if(_!==3)throw new Error("unknown padding");if((v=new l(g)).cmp(x.modulus)>=0)throw new Error("data too long for modulus")}return m?h(v,x):c(v,x)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(n,t,e){"use strict";var i=n("bn.js"),r=n("safe-buffer").Buffer;t.exports=function(s,a){return r.from(s.toRed(i.mont(a.modulus)).redPow(new i(a.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(n,t,e){"use strict";t.exports=function(i,r){for(var s=i.length,a=-1;++a<s;)i[a]^=r[a];return i}},{}],475:[function(n,t,e){(function(i,r){(function(){"use strict";var s=n("safe-buffer").Buffer,a=r.crypto||r.msCrypto;a&&a.getRandomValues?t.exports=function(o,l){if(o>4294967295)throw new RangeError("requested too many random bytes");var c=s.allocUnsafe(o);if(o>0)if(o>65536)for(var h=0;h<o;h+=65536)a.getRandomValues(c.slice(h,h+65536));else a.getRandomValues(c);return typeof l=="function"?i.nextTick(function(){l(null,c)}):c}:t.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(n,t,e){(function(i,r){(function(){"use strict";function s(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var a=n("safe-buffer"),o=n("randombytes"),l=a.Buffer,c=a.kMaxLength,h=r.crypto||r.msCrypto,d=Math.pow(2,32)-1;function p(_,v){if(typeof _!="number"||_!=_)throw new TypeError("offset must be a number");if(_>d||_<0)throw new TypeError("offset must be a uint32");if(_>c||_>v)throw new RangeError("offset out of range")}function g(_,v,x){if(typeof _!="number"||_!=_)throw new TypeError("size must be a number");if(_>d||_<0)throw new TypeError("size must be a uint32");if(_+v>x||_>c)throw new RangeError("buffer too small")}function m(_,v,x,S){if(i.browser){var O=_.buffer,D=new Uint8Array(O,v,x);return h.getRandomValues(D),S?void i.nextTick(function(){S(null,_)}):_}if(!S)return o(x).copy(_,v),_;o(x,function(U,z){if(U)return S(U);z.copy(_,v),S(null,_)})}h&&h.getRandomValues||!i.browser?(e.randomFill=function(_,v,x,S){if(!(l.isBuffer(_)||_ instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof v=="function")S=v,v=0,x=_.length;else if(typeof x=="function")S=x,x=_.length-v;else if(typeof S!="function")throw new TypeError('"cb" argument must be a function');return p(v,_.length),g(x,v,_.length),m(_,v,x,S)},e.randomFillSync=function(_,v,x){if(v===void 0&&(v=0),!(l.isBuffer(_)||_ instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return p(v,_.length),x===void 0&&(x=_.length-v),g(x,v,_.length),m(_,v,x)}):(e.randomFill=s,e.randomFillSync=s)}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(n,t,e){"use strict";var i={};function r(a,o,l){l||(l=Error);var c=function(h){var d,p;function g(m,_,v){return h.call(this,function(x,S,O){return typeof o=="string"?o:o(x,S,O)}(m,_,v))||this}return p=h,(d=g).prototype=Object.create(p.prototype),d.prototype.constructor=d,d.__proto__=p,g}(l);c.prototype.name=l.name,c.prototype.code=a,i[a]=c}function s(a,o){if(Array.isArray(a)){var l=a.length;return a=a.map(function(c){return String(c)}),l>2?"one of ".concat(o," ").concat(a.slice(0,l-1).join(", "),", or ")+a[l-1]:l===2?"one of ".concat(o," ").concat(a[0]," or ").concat(a[1]):"of ".concat(o," ").concat(a[0])}return"of ".concat(o," ").concat(String(a))}r("ERR_INVALID_OPT_VALUE",function(a,o){return'The value "'+o+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,o,l){var c,h,d,p;if(typeof o=="string"&&(h="not ",o.substr(!d||d<0?0:+d,h.length)===h)?(c="must not be",o=o.replace(/^not /,"")):c="must be",function(m,_,v){return(v===void 0||v>m.length)&&(v=m.length),m.substring(v-_.length,v)===_}(a," argument"))p="The ".concat(a," ").concat(c," ").concat(s(o,"type"));else{var g=function(m,_,v){return typeof v!="number"&&(v=0),!(v+_.length>m.length)&&m.indexOf(_,v)!==-1}(a,".")?"property":"argument";p='The "'.concat(a,'" ').concat(g," ").concat(c," ").concat(s(o,"type"))}return p+=". Received type ".concat(typeof l)},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},{}],478:[function(n,t,e){(function(i){(function(){"use strict";var r=Object.keys||function(g){var m=[];for(var _ in g)m.push(_);return m};t.exports=h;var s=n("./_stream_readable"),a=n("./_stream_writable");n("inherits")(h,s);for(var o=r(a.prototype),l=0;l<o.length;l++){var c=o[l];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(g){if(!(this instanceof h))return new h(g);s.call(this,g),a.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||i.nextTick(p,this)}function p(g){g.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}).call(this)}).call(this,n("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(n,t,e){"use strict";t.exports=r;var i=n("./_stream_transform");function r(s){if(!(this instanceof r))return new r(s);i.call(this,s)}n("inherits")(r,i),r.prototype._transform=function(s,a,o){o(null,s)}},{"./_stream_transform":481,inherits:440}],480:[function(n,t,e){(function(i,r){(function(){"use strict";var s;t.exports=K,K.ReadableState=tt,n("events").EventEmitter;var a=function(W,q){return W.listeners(q).length},o=n("./internal/streams/stream"),l=n("buffer").Buffer,c=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h,d=n("util");h=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g,m,_=n("./internal/streams/buffer_list"),v=n("./internal/streams/destroy"),x=n("./internal/streams/state").getHighWaterMark,S=n("../errors").codes,O=S.ERR_INVALID_ARG_TYPE,D=S.ERR_STREAM_PUSH_AFTER_EOF,U=S.ERR_METHOD_NOT_IMPLEMENTED,z=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n("inherits")(K,o);var V=v.errorOrDestroy,G=["error","close","destroy","pause","resume"];function tt(W,q,rt){s=s||n("./_stream_duplex"),W=W||{},typeof rt!="boolean"&&(rt=q instanceof s),this.objectMode=!!W.objectMode,rt&&(this.objectMode=this.objectMode||!!W.readableObjectMode),this.highWaterMark=x(this,W,"readableHighWaterMark",rt),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=W.emitClose!==!1,this.autoDestroy=!!W.autoDestroy,this.destroyed=!1,this.defaultEncoding=W.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,W.encoding&&(p||(p=n("string_decoder/").StringDecoder),this.decoder=new p(W.encoding),this.encoding=W.encoding)}function K(W){if(s=s||n("./_stream_duplex"),!(this instanceof K))return new K(W);var q=this instanceof s;this._readableState=new tt(W,this,q),this.readable=!0,W&&(typeof W.read=="function"&&(this._read=W.read),typeof W.destroy=="function"&&(this._destroy=W.destroy)),o.call(this)}function B(W,q,rt,mt,wt){h("readableAddChunk",q);var _t,Ct=W._readableState;if(q===null)Ct.reading=!1,function(Ft,At){if(h("onEofChunk"),!At.ended){if(At.decoder){var vt=At.decoder.end();vt&&vt.length&&(At.buffer.push(vt),At.length+=At.objectMode?1:vt.length)}At.ended=!0,At.sync?w(Ft):(At.needReadable=!1,At.emittedReadable||(At.emittedReadable=!0,C(Ft)))}}(W,Ct);else if(wt||(_t=function(Ft,At){var vt;kt=At,l.isBuffer(kt)||kt instanceof c||typeof At=="string"||At===void 0||Ft.objectMode||(vt=new O("chunk",["string","Buffer","Uint8Array"],At));var kt;return vt}(Ct,q)),_t)V(W,_t);else if(Ct.objectMode||q&&q.length>0)if(typeof q=="string"||Ct.objectMode||Object.getPrototypeOf(q)===l.prototype||(q=function(Ft){return l.from(Ft)}(q)),mt)Ct.endEmitted?V(W,new z):N(W,Ct,q,!0);else if(Ct.ended)V(W,new D);else{if(Ct.destroyed)return!1;Ct.reading=!1,Ct.decoder&&!rt?(q=Ct.decoder.write(q),Ct.objectMode||q.length!==0?N(W,Ct,q,!1):k(W,Ct)):N(W,Ct,q,!1)}else mt||(Ct.reading=!1,k(W,Ct));return!Ct.ended&&(Ct.length<Ct.highWaterMark||Ct.length===0)}function N(W,q,rt,mt){q.flowing&&q.length===0&&!q.sync?(q.awaitDrain=0,W.emit("data",rt)):(q.length+=q.objectMode?1:rt.length,mt?q.buffer.unshift(rt):q.buffer.push(rt),q.needReadable&&w(W)),k(W,q)}Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(W){this._readableState&&(this._readableState.destroyed=W)}}),K.prototype.destroy=v.destroy,K.prototype._undestroy=v.undestroy,K.prototype._destroy=function(W,q){q(W)},K.prototype.push=function(W,q){var rt,mt=this._readableState;return mt.objectMode?rt=!0:typeof W=="string"&&((q=q||mt.defaultEncoding)!==mt.encoding&&(W=l.from(W,q),q=""),rt=!0),B(this,W,q,!1,rt)},K.prototype.unshift=function(W){return B(this,W,null,!0,!1)},K.prototype.isPaused=function(){return this._readableState.flowing===!1},K.prototype.setEncoding=function(W){p||(p=n("string_decoder/").StringDecoder);var q=new p(W);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;for(var rt=this._readableState.buffer.head,mt="";rt!==null;)mt+=q.write(rt.data),rt=rt.next;return this._readableState.buffer.clear(),mt!==""&&this._readableState.buffer.push(mt),this._readableState.length=mt.length,this};function Z(W,q){return W<=0||q.length===0&&q.ended?0:q.objectMode?1:W!=W?q.flowing&&q.length?q.buffer.head.data.length:q.length:(W>q.highWaterMark&&(q.highWaterMark=function(rt){return rt>=1073741824?rt=1073741824:(rt--,rt|=rt>>>1,rt|=rt>>>2,rt|=rt>>>4,rt|=rt>>>8,rt|=rt>>>16,rt++),rt}(W)),W<=q.length?W:q.ended?q.length:(q.needReadable=!0,0))}function w(W){var q=W._readableState;h("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(h("emitReadable",q.flowing),q.emittedReadable=!0,i.nextTick(C,W))}function C(W){var q=W._readableState;h("emitReadable_",q.destroyed,q.length,q.ended),q.destroyed||!q.length&&!q.ended||(W.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,it(W)}function k(W,q){q.readingMore||(q.readingMore=!0,i.nextTick(T,W,q))}function T(W,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0);){var rt=q.length;if(h("maybeReadMore read 0"),W.read(0),rt===q.length)break}q.readingMore=!1}function R(W){var q=W._readableState;q.readableListening=W.listenerCount("readable")>0,q.resumeScheduled&&!q.paused?q.flowing=!0:W.listenerCount("data")>0&&W.resume()}function F(W){h("readable nexttick read 0"),W.read(0)}function H(W,q){h("resume",q.reading),q.reading||W.read(0),q.resumeScheduled=!1,W.emit("resume"),it(W),q.flowing&&!q.reading&&W.read(0)}function it(W){var q=W._readableState;for(h("flow",q.flowing);q.flowing&&W.read()!==null;);}function ot(W,q){return q.length===0?null:(q.objectMode?rt=q.buffer.shift():!W||W>=q.length?(rt=q.decoder?q.buffer.join(""):q.buffer.length===1?q.buffer.first():q.buffer.concat(q.length),q.buffer.clear()):rt=q.buffer.consume(W,q.decoder),rt);var rt}function dt(W){var q=W._readableState;h("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,i.nextTick($,q,W))}function $(W,q){if(h("endReadableNT",W.endEmitted,W.length),!W.endEmitted&&W.length===0&&(W.endEmitted=!0,q.readable=!1,q.emit("end"),W.autoDestroy)){var rt=q._writableState;(!rt||rt.autoDestroy&&rt.finished)&&q.destroy()}}function ct(W,q){for(var rt=0,mt=W.length;rt<mt;rt++)if(W[rt]===q)return rt;return-1}K.prototype.read=function(W){h("read",W),W=parseInt(W,10);var q=this._readableState,rt=W;if(W!==0&&(q.emittedReadable=!1),W===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended))return h("read: emitReadable",q.length,q.ended),q.length===0&&q.ended?dt(this):w(this),null;if((W=Z(W,q))===0&&q.ended)return q.length===0&&dt(this),null;var mt,wt=q.needReadable;return h("need readable",wt),(q.length===0||q.length-W<q.highWaterMark)&&h("length less than watermark",wt=!0),q.ended||q.reading?h("reading or ended",wt=!1):wt&&(h("do read"),q.reading=!0,q.sync=!0,q.length===0&&(q.needReadable=!0),this._read(q.highWaterMark),q.sync=!1,q.reading||(W=Z(rt,q))),(mt=W>0?ot(W,q):null)===null?(q.needReadable=q.length<=q.highWaterMark,W=0):(q.length-=W,q.awaitDrain=0),q.length===0&&(q.ended||(q.needReadable=!0),rt!==W&&q.ended&&dt(this)),mt!==null&&this.emit("data",mt),mt},K.prototype._read=function(W){V(this,new U("_read()"))},K.prototype.pipe=function(W,q){var rt=this,mt=this._readableState;switch(mt.pipesCount){case 0:mt.pipes=W;break;case 1:mt.pipes=[mt.pipes,W];break;default:mt.pipes.push(W)}mt.pipesCount+=1,h("pipe count=%d opts=%j",mt.pipesCount,q);var wt=(!q||q.end!==!1)&&W!==i.stdout&&W!==i.stderr?Ct:Q;function _t(Y,et){h("onunpipe"),Y===rt&&et&&et.hasUnpiped===!1&&(et.hasUnpiped=!0,h("cleanup"),W.removeListener("close",gt),W.removeListener("finish",ut),W.removeListener("drain",Ft),W.removeListener("error",kt),W.removeListener("unpipe",_t),rt.removeListener("end",Ct),rt.removeListener("end",Q),rt.removeListener("data",vt),At=!0,!mt.awaitDrain||W._writableState&&!W._writableState.needDrain||Ft())}function Ct(){h("onend"),W.end()}mt.endEmitted?i.nextTick(wt):rt.once("end",wt),W.on("unpipe",_t);var Ft=function(Y){return function(){var et=Y._readableState;h("pipeOnDrain",et.awaitDrain),et.awaitDrain&&et.awaitDrain--,et.awaitDrain===0&&a(Y,"data")&&(et.flowing=!0,it(Y))}}(rt);W.on("drain",Ft);var At=!1;function vt(Y){h("ondata");var et=W.write(Y);h("dest.write",et),et===!1&&((mt.pipesCount===1&&mt.pipes===W||mt.pipesCount>1&&ct(mt.pipes,W)!==-1)&&!At&&(h("false write response, pause",mt.awaitDrain),mt.awaitDrain++),rt.pause())}function kt(Y){h("onerror",Y),Q(),W.removeListener("error",kt),a(W,"error")===0&&V(W,Y)}function gt(){W.removeListener("finish",ut),Q()}function ut(){h("onfinish"),W.removeListener("close",gt),Q()}function Q(){h("unpipe"),rt.unpipe(W)}return rt.on("data",vt),function(Y,et,lt){if(typeof Y.prependListener=="function")return Y.prependListener(et,lt);Y._events&&Y._events[et]?Array.isArray(Y._events[et])?Y._events[et].unshift(lt):Y._events[et]=[lt,Y._events[et]]:Y.on(et,lt)}(W,"error",kt),W.once("close",gt),W.once("finish",ut),W.emit("pipe",rt),mt.flowing||(h("pipe resume"),rt.resume()),W},K.prototype.unpipe=function(W){var q=this._readableState,rt={hasUnpiped:!1};if(q.pipesCount===0)return this;if(q.pipesCount===1)return W&&W!==q.pipes||(W||(W=q.pipes),q.pipes=null,q.pipesCount=0,q.flowing=!1,W&&W.emit("unpipe",this,rt)),this;if(!W){var mt=q.pipes,wt=q.pipesCount;q.pipes=null,q.pipesCount=0,q.flowing=!1;for(var _t=0;_t<wt;_t++)mt[_t].emit("unpipe",this,{hasUnpiped:!1});return this}var Ct=ct(q.pipes,W);return Ct===-1||(q.pipes.splice(Ct,1),q.pipesCount-=1,q.pipesCount===1&&(q.pipes=q.pipes[0]),W.emit("unpipe",this,rt)),this},K.prototype.on=function(W,q){var rt=o.prototype.on.call(this,W,q),mt=this._readableState;return W==="data"?(mt.readableListening=this.listenerCount("readable")>0,mt.flowing!==!1&&this.resume()):W==="readable"&&(mt.endEmitted||mt.readableListening||(mt.readableListening=mt.needReadable=!0,mt.flowing=!1,mt.emittedReadable=!1,h("on readable",mt.length,mt.reading),mt.length?w(this):mt.reading||i.nextTick(F,this))),rt},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(W,q){var rt=o.prototype.removeListener.call(this,W,q);return W==="readable"&&i.nextTick(R,this),rt},K.prototype.removeAllListeners=function(W){var q=o.prototype.removeAllListeners.apply(this,arguments);return W!=="readable"&&W!==void 0||i.nextTick(R,this),q},K.prototype.resume=function(){var W=this._readableState;return W.flowing||(h("resume"),W.flowing=!W.readableListening,function(q,rt){rt.resumeScheduled||(rt.resumeScheduled=!0,i.nextTick(H,q,rt))}(this,W)),W.paused=!1,this},K.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},K.prototype.wrap=function(W){var q=this,rt=this._readableState,mt=!1;for(var wt in W.on("end",function(){if(h("wrapped end"),rt.decoder&&!rt.ended){var Ct=rt.decoder.end();Ct&&Ct.length&&q.push(Ct)}q.push(null)}),W.on("data",function(Ct){h("wrapped data"),rt.decoder&&(Ct=rt.decoder.write(Ct)),rt.objectMode&&Ct==null||(rt.objectMode||Ct&&Ct.length)&&(q.push(Ct)||(mt=!0,W.pause()))}),W)this[wt]===void 0&&typeof W[wt]=="function"&&(this[wt]=function(Ct){return function(){return W[Ct].apply(W,arguments)}}(wt));for(var _t=0;_t<G.length;_t++)W.on(G[_t],this.emit.bind(this,G[_t]));return this._read=function(Ct){h("wrapped _read",Ct),mt&&(mt=!1,W.resume())},this},typeof Symbol=="function"&&(K.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=n("./internal/streams/async_iterator")),g(this)}),Object.defineProperty(K.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(K.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(K.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(W){this._readableState&&(this._readableState.flowing=W)}}),K._fromList=ot,Object.defineProperty(K.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(K.from=function(W,q){return m===void 0&&(m=n("./internal/streams/from")),m(K,W,q)})}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(n,t,e){"use strict";t.exports=h;var i=n("../errors").codes,r=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,a=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=i.ERR_TRANSFORM_WITH_LENGTH_0,l=n("./_stream_duplex");function c(g,m){var _=this._transformState;_.transforming=!1;var v=_.writecb;if(v===null)return this.emit("error",new s);_.writechunk=null,_.writecb=null,m!=null&&this.push(m),v(g);var x=this._readableState;x.reading=!1,(x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}function h(g){if(!(this instanceof h))return new h(g);l.call(this,g),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",d)}function d(){var g=this;typeof this._flush!="function"||this._readableState.destroyed?p(this,null,null):this._flush(function(m,_){p(g,m,_)})}function p(g,m,_){if(m)return g.emit("error",m);if(_!=null&&g.push(_),g._writableState.length)throw new o;if(g._transformState.transforming)throw new a;return g.push(null)}n("inherits")(h,l),h.prototype.push=function(g,m){return this._transformState.needTransform=!1,l.prototype.push.call(this,g,m)},h.prototype._transform=function(g,m,_){_(new r("_transform()"))},h.prototype._write=function(g,m,_){var v=this._transformState;if(v.writecb=_,v.writechunk=g,v.writeencoding=m,!v.transforming){var x=this._readableState;(v.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},h.prototype._read=function(g){var m=this._transformState;m.writechunk===null||m.transforming?m.needTransform=!0:(m.transforming=!0,this._transform(m.writechunk,m.writeencoding,m.afterTransform))},h.prototype._destroy=function(g,m){l.prototype._destroy.call(this,g,function(_){m(_)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(n,t,e){(function(i,r){(function(){"use strict";function s(T){var R=this;this.next=null,this.entry=null,this.finish=function(){(function(F,H,it){var ot=F.entry;for(F.entry=null;ot;){var dt=ot.callback;H.pendingcb--,dt(it),ot=ot.next}H.corkedRequestsFree.next=F})(R,T)}}var a;t.exports=K,K.WritableState=tt;var o={deprecate:n("util-deprecate")},l=n("./internal/streams/stream"),c=n("buffer").Buffer,h=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},d,p=n("./internal/streams/destroy"),g=n("./internal/streams/state").getHighWaterMark,m=n("../errors").codes,_=m.ERR_INVALID_ARG_TYPE,v=m.ERR_METHOD_NOT_IMPLEMENTED,x=m.ERR_MULTIPLE_CALLBACK,S=m.ERR_STREAM_CANNOT_PIPE,O=m.ERR_STREAM_DESTROYED,D=m.ERR_STREAM_NULL_VALUES,U=m.ERR_STREAM_WRITE_AFTER_END,z=m.ERR_UNKNOWN_ENCODING,V=p.errorOrDestroy;function G(){}function tt(T,R,F){a=a||n("./_stream_duplex"),T=T||{},typeof F!="boolean"&&(F=R instanceof a),this.objectMode=!!T.objectMode,F&&(this.objectMode=this.objectMode||!!T.writableObjectMode),this.highWaterMark=g(this,T,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=T.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(it){(function(ot,dt){var $=ot._writableState,ct=$.sync,W=$.writecb;if(typeof W!="function")throw new x;if(function(rt){rt.writing=!1,rt.writecb=null,rt.length-=rt.writelen,rt.writelen=0}($),dt)(function(rt,mt,wt,_t,Ct){--mt.pendingcb,wt?(i.nextTick(Ct,_t),i.nextTick(k,rt,mt),rt._writableState.errorEmitted=!0,V(rt,_t)):(Ct(_t),rt._writableState.errorEmitted=!0,V(rt,_t),k(rt,mt))})(ot,$,ct,dt,W);else{var q=w($)||ot.destroyed;q||$.corked||$.bufferProcessing||!$.bufferedRequest||Z(ot,$),ct?i.nextTick(N,ot,$,q,W):N(ot,$,q,W)}})(R,it)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function K(T){var R=this instanceof(a=a||n("./_stream_duplex"));if(!R&&!d.call(K,this))return new K(T);this._writableState=new tt(T,this,R),this.writable=!0,T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final)),l.call(this)}function B(T,R,F,H,it,ot,dt){R.writelen=H,R.writecb=dt,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new O("write")):F?T._writev(it,R.onwrite):T._write(it,ot,R.onwrite),R.sync=!1}function N(T,R,F,H){F||function(it,ot){ot.length===0&&ot.needDrain&&(ot.needDrain=!1,it.emit("drain"))}(T,R),R.pendingcb--,H(),k(T,R)}function Z(T,R){R.bufferProcessing=!0;var F=R.bufferedRequest;if(T._writev&&F&&F.next){var H=R.bufferedRequestCount,it=new Array(H),ot=R.corkedRequestsFree;ot.entry=F;for(var dt=0,$=!0;F;)it[dt]=F,F.isBuf||($=!1),F=F.next,dt+=1;it.allBuffers=$,B(T,R,!0,R.length,it,"",ot.finish),R.pendingcb++,R.lastBufferedRequest=null,ot.next?(R.corkedRequestsFree=ot.next,ot.next=null):R.corkedRequestsFree=new s(R),R.bufferedRequestCount=0}else{for(;F;){var ct=F.chunk,W=F.encoding,q=F.callback;if(B(T,R,!1,R.objectMode?1:ct.length,ct,W,q),F=F.next,R.bufferedRequestCount--,R.writing)break}F===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=F,R.bufferProcessing=!1}function w(T){return T.ending&&T.length===0&&T.bufferedRequest===null&&!T.finished&&!T.writing}function C(T,R){T._final(function(F){R.pendingcb--,F&&V(T,F),R.prefinished=!0,T.emit("prefinish"),k(T,R)})}function k(T,R){var F=w(R);if(F&&(function(it,ot){ot.prefinished||ot.finalCalled||(typeof it._final!="function"||ot.destroyed?(ot.prefinished=!0,it.emit("prefinish")):(ot.pendingcb++,ot.finalCalled=!0,i.nextTick(C,it,ot)))}(T,R),R.pendingcb===0&&(R.finished=!0,T.emit("finish"),R.autoDestroy))){var H=T._readableState;(!H||H.autoDestroy&&H.endEmitted)&&T.destroy()}return F}n("inherits")(K,l),tt.prototype.getBuffer=function(){for(var T=this.bufferedRequest,R=[];T;)R.push(T),T=T.next;return R},function(){try{Object.defineProperty(tt.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(K,Symbol.hasInstance,{value:function(T){return!!d.call(this,T)||this===K&&T&&T._writableState instanceof tt}})):d=function(T){return T instanceof this},K.prototype.pipe=function(){V(this,new S)},K.prototype.write=function(T,R,F){var H,it=this._writableState,ot=!1,dt=!it.objectMode&&(H=T,c.isBuffer(H)||H instanceof h);return dt&&!c.isBuffer(T)&&(T=function($){return c.from($)}(T)),typeof R=="function"&&(F=R,R=null),dt?R="buffer":R||(R=it.defaultEncoding),typeof F!="function"&&(F=G),it.ending?function($,ct){var W=new U;V($,W),i.nextTick(ct,W)}(this,F):(dt||function($,ct,W,q){var rt;return W===null?rt=new D:typeof W=="string"||ct.objectMode||(rt=new _("chunk",["string","Buffer"],W)),!rt||(V($,rt),i.nextTick(q,rt),!1)}(this,it,T,F))&&(it.pendingcb++,ot=function($,ct,W,q,rt,mt){if(!W){var wt=function(At,vt,kt){return At.objectMode||At.decodeStrings===!1||typeof vt!="string"||(vt=c.from(vt,kt)),vt}(ct,q,rt);q!==wt&&(W=!0,rt="buffer",q=wt)}var _t=ct.objectMode?1:q.length;ct.length+=_t;var Ct=ct.length<ct.highWaterMark;if(Ct||(ct.needDrain=!0),ct.writing||ct.corked){var Ft=ct.lastBufferedRequest;ct.lastBufferedRequest={chunk:q,encoding:rt,isBuf:W,callback:mt,next:null},Ft?Ft.next=ct.lastBufferedRequest:ct.bufferedRequest=ct.lastBufferedRequest,ct.bufferedRequestCount+=1}else B($,ct,!1,_t,q,rt,mt);return Ct}(this,it,dt,T,R,F)),ot},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.bufferProcessing||!T.bufferedRequest||Z(this,T))},K.prototype.setDefaultEncoding=function(T){if(typeof T=="string"&&(T=T.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((T+"").toLowerCase())>-1))throw new z(T);return this._writableState.defaultEncoding=T,this},Object.defineProperty(K.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(K.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),K.prototype._write=function(T,R,F){F(new v("_write()"))},K.prototype._writev=null,K.prototype.end=function(T,R,F){var H=this._writableState;return typeof T=="function"?(F=T,T=null,R=null):typeof R=="function"&&(F=R,R=null),T!=null&&this.write(T,R),H.corked&&(H.corked=1,this.uncork()),H.ending||function(it,ot,dt){ot.ending=!0,k(it,ot),dt&&(ot.finished?i.nextTick(dt):it.once("finish",dt)),ot.ended=!0,it.writable=!1}(this,H,F),this},Object.defineProperty(K.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=T)}}),K.prototype.destroy=p.destroy,K.prototype._undestroy=p.undestroy,K.prototype._destroy=function(T,R){R(T)}}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(n,t,e){(function(i){(function(){"use strict";var r;function s(O,D,U){return(D=function(z){var V=function(G,tt){if(typeof G!="object"||G===null)return G;var K=G[Symbol.toPrimitive];if(K!==void 0){var B=K.call(G,tt||"default");if(typeof B!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(G)}(z,"string");return typeof V=="symbol"?V:String(V)}(D))in O?Object.defineProperty(O,D,{value:U,enumerable:!0,configurable:!0,writable:!0}):O[D]=U,O}var a=n("./end-of-stream"),o=Symbol("lastResolve"),l=Symbol("lastReject"),c=Symbol("error"),h=Symbol("ended"),d=Symbol("lastPromise"),p=Symbol("handlePromise"),g=Symbol("stream");function m(O,D){return{value:O,done:D}}function _(O){var D=O[o];if(D!==null){var U=O[g].read();U!==null&&(O[d]=null,O[o]=null,O[l]=null,D(m(U,!1)))}}function v(O){i.nextTick(_,O)}var x=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((s(r={get stream(){return this[g]},next:function(){var O=this,D=this[c];if(D!==null)return Promise.reject(D);if(this[h])return Promise.resolve(m(void 0,!0));if(this[g].destroyed)return new Promise(function(G,tt){i.nextTick(function(){O[c]?tt(O[c]):G(m(void 0,!0))})});var U,z=this[d];if(z)U=new Promise(function(G,tt){return function(K,B){G.then(function(){tt[h]?K(m(void 0,!0)):tt[p](K,B)},B)}}(z,this));else{var V=this[g].read();if(V!==null)return Promise.resolve(m(V,!1));U=new Promise(this[p])}return this[d]=U,U}},Symbol.asyncIterator,function(){return this}),s(r,"return",function(){var O=this;return new Promise(function(D,U){O[g].destroy(null,function(z){z?U(z):D(m(void 0,!0))})})}),r),x);t.exports=function(O){var D,U=Object.create(S,(s(D={},g,{value:O,writable:!0}),s(D,o,{value:null,writable:!0}),s(D,l,{value:null,writable:!0}),s(D,c,{value:null,writable:!0}),s(D,h,{value:O._readableState.endEmitted,writable:!0}),s(D,p,{value:function(z,V){var G=U[g].read();G?(U[d]=null,U[o]=null,U[l]=null,z(m(G,!1))):(U[o]=z,U[l]=V)},writable:!0}),D));return U[d]=null,a(O,function(z){if(z&&z.code!=="ERR_STREAM_PREMATURE_CLOSE"){var V=U[l];return V!==null&&(U[d]=null,U[o]=null,U[l]=null,V(z)),void(U[c]=z)}var G=U[o];G!==null&&(U[d]=null,U[o]=null,U[l]=null,G(m(void 0,!0))),U[h]=!0}),O.on("readable",v.bind(null,U)),U}}).call(this)}).call(this,n("_process"))},{"./end-of-stream":486,_process:467}],484:[function(n,t,e){"use strict";function i(d,p){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(d);p&&(m=m.filter(function(_){return Object.getOwnPropertyDescriptor(d,_).enumerable})),g.push.apply(g,m)}return g}function r(d){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?i(Object(g),!0).forEach(function(m){s(d,m,g[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):i(Object(g)).forEach(function(m){Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(g,m))})}return d}function s(d,p,g){return(p=o(p))in d?Object.defineProperty(d,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[p]=g,d}function a(d,p){for(var g=0;g<p.length;g++){var m=p[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,o(m.key),m)}}function o(d){var p=function(g,m){if(typeof g!="object"||g===null)return g;var _=g[Symbol.toPrimitive];if(_!==void 0){var v=_.call(g,m||"default");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(g)}(d,"string");return typeof p=="symbol"?p:String(p)}var l=n("buffer").Buffer,c=n("util").inspect,h=c&&c.custom||"inspect";t.exports=function(){function d(){(function(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.head=null,this.tail=null,this.length=0}var p,g,m;return p=d,(g=[{key:"push",value:function(_){var v={data:_,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(_){var v={data:_,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var v=this.head,x=""+v.data;v=v.next;)x+=_+v.data;return x}},{key:"concat",value:function(_){if(this.length===0)return l.alloc(0);for(var v,x,S,O=l.allocUnsafe(_>>>0),D=this.head,U=0;D;)v=D.data,x=O,S=U,l.prototype.copy.call(v,x,S),U+=D.data.length,D=D.next;return O}},{key:"consume",value:function(_,v){var x;return _<this.head.data.length?(x=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):x=_===this.head.data.length?this.shift():v?this._getString(_):this._getBuffer(_),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var v=this.head,x=1,S=v.data;for(_-=S.length;v=v.next;){var O=v.data,D=_>O.length?O.length:_;if(D===O.length?S+=O:S+=O.slice(0,_),(_-=D)==0){D===O.length?(++x,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=O.slice(D));break}++x}return this.length-=x,S}},{key:"_getBuffer",value:function(_){var v=l.allocUnsafe(_),x=this.head,S=1;for(x.data.copy(v),_-=x.data.length;x=x.next;){var O=x.data,D=_>O.length?O.length:_;if(O.copy(v,v.length-_,0,D),(_-=D)==0){D===O.length?(++S,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=O.slice(D));break}++S}return this.length-=S,v}},{key:h,value:function(_,v){return c(this,r(r({},v),{},{depth:0,customInspect:!1}))}}])&&a(p.prototype,g),m&&a(p,m),Object.defineProperty(p,"prototype",{writable:!1}),d}()},{buffer:220,util:188}],485:[function(n,t,e){(function(i){(function(){"use strict";function r(o,l){a(o,l),s(o)}function s(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function a(o,l){o.emit("error",l)}t.exports={destroy:function(o,l){var c=this,h=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return h||d?(l?l(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(a,this,o)):i.nextTick(a,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(p){!l&&p?c._writableState?c._writableState.errorEmitted?i.nextTick(s,c):(c._writableState.errorEmitted=!0,i.nextTick(r,c,p)):i.nextTick(r,c,p):l?(i.nextTick(s,c),l(p)):i.nextTick(s,c)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(o,l){var c=o._readableState,h=o._writableState;c&&c.autoDestroy||h&&h.autoDestroy?o.destroy(l):o.emit("error",l)}}}).call(this)}).call(this,n("_process"))},{_process:467}],486:[function(n,t,e){"use strict";var i=n("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}t.exports=function s(a,o,l){if(typeof o=="function")return s(a,null,o);o||(o={}),l=function(O){var D=!1;return function(){if(!D){D=!0;for(var U=arguments.length,z=new Array(U),V=0;V<U;V++)z[V]=arguments[V];O.apply(this,z)}}}(l||r);var c=o.readable||o.readable!==!1&&a.readable,h=o.writable||o.writable!==!1&&a.writable,d=function(){a.writable||g()},p=a._writableState&&a._writableState.finished,g=function(){h=!1,p=!0,c||l.call(a)},m=a._readableState&&a._readableState.endEmitted,_=function(){c=!1,m=!0,h||l.call(a)},v=function(O){l.call(a,O)},x=function(){var O;return c&&!m?(a._readableState&&a._readableState.ended||(O=new i),l.call(a,O)):h&&!p?(a._writableState&&a._writableState.ended||(O=new i),l.call(a,O)):void 0},S=function(){a.req.on("finish",g)};return function(O){return O.setHeader&&typeof O.abort=="function"}(a)?(a.on("complete",g),a.on("abort",x),a.req?S():a.on("request",S)):h&&!a._writableState&&(a.on("end",d),a.on("close",d)),a.on("end",_),a.on("finish",g),o.error!==!1&&a.on("error",v),a.on("close",x),function(){a.removeListener("complete",g),a.removeListener("abort",x),a.removeListener("request",S),a.req&&a.req.removeListener("finish",g),a.removeListener("end",d),a.removeListener("close",d),a.removeListener("finish",g),a.removeListener("end",_),a.removeListener("error",v),a.removeListener("close",x)}}},{"../../../errors":477}],487:[function(n,t,e){"use strict";t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(n,t,e){"use strict";var i,r=n("../../../errors").codes,s=r.ERR_MISSING_ARGS,a=r.ERR_STREAM_DESTROYED;function o(p){if(p)throw p}function l(p,g,m,_){_=function(S){var O=!1;return function(){O||(O=!0,S.apply(void 0,arguments))}}(_);var v=!1;p.on("close",function(){v=!0}),i===void 0&&(i=n("./end-of-stream")),i(p,{readable:g,writable:m},function(S){if(S)return _(S);v=!0,_()});var x=!1;return function(S){if(!v&&!x)return x=!0,function(O){return O.setHeader&&typeof O.abort=="function"}(p)?p.abort():typeof p.destroy=="function"?p.destroy():void _(S||new a("pipe"))}}function c(p){p()}function h(p,g){return p.pipe(g)}function d(p){return p.length?typeof p[p.length-1]!="function"?o:p.pop():o}t.exports=function(){for(var p=arguments.length,g=new Array(p),m=0;m<p;m++)g[m]=arguments[m];var _,v=d(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new s("streams");var x=g.map(function(S,O){var D=O<g.length-1;return l(S,D,O>0,function(U){_||(_=U),U&&x.forEach(c),D||(x.forEach(c),v(_))})});return g.reduce(h)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(n,t,e){"use strict";var i=n("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(r,s,a,o){var l=function(c,h,d){return c.highWaterMark!=null?c.highWaterMark:h?c[d]:null}(s,o,a);if(l!=null){if(!isFinite(l)||Math.floor(l)!==l||l<0)throw new i(o?a:"highWaterMark",l);return Math.floor(l)}return r.objectMode?16:16384}}},{"../../../errors":477}],490:[function(n,t,e){"use strict";t.exports=n("events").EventEmitter},{events:422}],491:[function(n,t,e){"use strict";(e=t.exports=n("./lib/_stream_readable.js")).Stream=e,e.Readable=e,e.Writable=n("./lib/_stream_writable.js"),e.Duplex=n("./lib/_stream_duplex.js"),e.Transform=n("./lib/_stream_transform.js"),e.PassThrough=n("./lib/_stream_passthrough.js"),e.finished=n("./lib/internal/streams/end-of-stream.js"),e.pipeline=n("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(n,t,e){"use strict";var i=function(r){var s=Object.prototype,a=s.hasOwnProperty,o=Object.defineProperty||function(k,T,R){k[T]=R.value},l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",h=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function p(k,T,R){return Object.defineProperty(k,T,{value:R,enumerable:!0,configurable:!0,writable:!0}),k[T]}try{p({},"")}catch{p=function(T,R,F){return T[R]=F}}function g(k,T,R,F){var H=T&&T.prototype instanceof v?T:v,it=Object.create(H.prototype),ot=new Z(F||[]);return o(it,"_invoke",{value:tt(k,R,ot)}),it}function m(k,T,R){try{return{type:"normal",arg:k.call(T,R)}}catch(F){return{type:"throw",arg:F}}}r.wrap=g;var _={};function v(){}function x(){}function S(){}var O={};p(O,c,function(){return this});var D=Object.getPrototypeOf,U=D&&D(D(w([])));U&&U!==s&&a.call(U,c)&&(O=U);var z=S.prototype=v.prototype=Object.create(O);function V(k){["next","throw","return"].forEach(function(T){p(k,T,function(R){return this._invoke(T,R)})})}function G(k,T){var R;o(this,"_invoke",{value:function(F,H){function it(){return new T(function(ot,dt){(function $(ct,W,q,rt){var mt=m(k[ct],k,W);if(mt.type!=="throw"){var wt=mt.arg,_t=wt.value;return _t&&typeof _t=="object"&&a.call(_t,"__await")?T.resolve(_t.__await).then(function(Ct){$("next",Ct,q,rt)},function(Ct){$("throw",Ct,q,rt)}):T.resolve(_t).then(function(Ct){wt.value=Ct,q(wt)},function(Ct){return $("throw",Ct,q,rt)})}rt(mt.arg)})(F,H,ot,dt)})}return R=R?R.then(it,it):it()}})}function tt(k,T,R){var F="suspendedStart";return function(H,it){if(F==="executing")throw new Error("Generator is already running");if(F==="completed"){if(H==="throw")throw it;return C()}for(R.method=H,R.arg=it;;){var ot=R.delegate;if(ot){var dt=K(ot,R);if(dt){if(dt===_)continue;return dt}}if(R.method==="next")R.sent=R._sent=R.arg;else if(R.method==="throw"){if(F==="suspendedStart")throw F="completed",R.arg;R.dispatchException(R.arg)}else R.method==="return"&&R.abrupt("return",R.arg);F="executing";var $=m(k,T,R);if($.type==="normal"){if(F=R.done?"completed":"suspendedYield",$.arg===_)continue;return{value:$.arg,done:R.done}}$.type==="throw"&&(F="completed",R.method="throw",R.arg=$.arg)}}}function K(k,T){var R=T.method,F=k.iterator[R];if(F===void 0)return T.delegate=null,R==="throw"&&k.iterator.return&&(T.method="return",T.arg=void 0,K(k,T),T.method==="throw")||R!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+R+"' method")),_;var H=m(F,k.iterator,T.arg);if(H.type==="throw")return T.method="throw",T.arg=H.arg,T.delegate=null,_;var it=H.arg;return it?it.done?(T[k.resultName]=it.value,T.next=k.nextLoc,T.method!=="return"&&(T.method="next",T.arg=void 0),T.delegate=null,_):it:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,_)}function B(k){var T={tryLoc:k[0]};1 in k&&(T.catchLoc=k[1]),2 in k&&(T.finallyLoc=k[2],T.afterLoc=k[3]),this.tryEntries.push(T)}function N(k){var T=k.completion||{};T.type="normal",delete T.arg,k.completion=T}function Z(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(B,this),this.reset(!0)}function w(k){if(k){var T=k[c];if(T)return T.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var R=-1,F=function H(){for(;++R<k.length;)if(a.call(k,R))return H.value=k[R],H.done=!1,H;return H.value=void 0,H.done=!0,H};return F.next=F}}return{next:C}}function C(){return{value:void 0,done:!0}}return x.prototype=S,o(z,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:x,configurable:!0}),x.displayName=p(S,d,"GeneratorFunction"),r.isGeneratorFunction=function(k){var T=typeof k=="function"&&k.constructor;return!!T&&(T===x||(T.displayName||T.name)==="GeneratorFunction")},r.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,S):(k.__proto__=S,p(k,d,"GeneratorFunction")),k.prototype=Object.create(z),k},r.awrap=function(k){return{__await:k}},V(G.prototype),p(G.prototype,h,function(){return this}),r.AsyncIterator=G,r.async=function(k,T,R,F,H){H===void 0&&(H=Promise);var it=new G(g(k,T,R,F),H);return r.isGeneratorFunction(T)?it:it.next().then(function(ot){return ot.done?ot.value:it.next()})},V(z),p(z,d,"Generator"),p(z,c,function(){return this}),p(z,"toString",function(){return"[object Generator]"}),r.keys=function(k){var T=Object(k),R=[];for(var F in T)R.push(F);return R.reverse(),function H(){for(;R.length;){var it=R.pop();if(it in T)return H.value=it,H.done=!1,H}return H.done=!0,H}},r.values=w,Z.prototype={constructor:Z,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!k)for(var T in this)T.charAt(0)==="t"&&a.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var T=this;function R($,ct){return it.type="throw",it.arg=k,T.next=$,ct&&(T.method="next",T.arg=void 0),!!ct}for(var F=this.tryEntries.length-1;F>=0;--F){var H=this.tryEntries[F],it=H.completion;if(H.tryLoc==="root")return R("end");if(H.tryLoc<=this.prev){var ot=a.call(H,"catchLoc"),dt=a.call(H,"finallyLoc");if(ot&&dt){if(this.prev<H.catchLoc)return R(H.catchLoc,!0);if(this.prev<H.finallyLoc)return R(H.finallyLoc)}else if(ot){if(this.prev<H.catchLoc)return R(H.catchLoc,!0)}else{if(!dt)throw new Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return R(H.finallyLoc)}}}},abrupt:function(k,T){for(var R=this.tryEntries.length-1;R>=0;--R){var F=this.tryEntries[R];if(F.tryLoc<=this.prev&&a.call(F,"finallyLoc")&&this.prev<F.finallyLoc){var H=F;break}}H&&(k==="break"||k==="continue")&&H.tryLoc<=T&&T<=H.finallyLoc&&(H=null);var it=H?H.completion:{};return it.type=k,it.arg=T,H?(this.method="next",this.next=H.finallyLoc,_):this.complete(it)},complete:function(k,T){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&T&&(this.next=T),_},finish:function(k){for(var T=this.tryEntries.length-1;T>=0;--T){var R=this.tryEntries[T];if(R.finallyLoc===k)return this.complete(R.completion,R.afterLoc),N(R),_}},catch:function(k){for(var T=this.tryEntries.length-1;T>=0;--T){var R=this.tryEntries[T];if(R.tryLoc===k){var F=R.completion;if(F.type==="throw"){var H=F.arg;N(R)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(k,T,R){return this.delegate={iterator:w(k),resultName:T,nextLoc:R},this.method==="next"&&(this.arg=void 0),_}},r}(typeof t=="object"?t.exports:{});try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},{}],493:[function(n,t,e){"use strict";var i=n("buffer").Buffer,r=n("inherits"),s=n("hash-base"),a=new Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0];function g(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function m(D,U){return D<<U|D>>>32-U}function _(D,U,z,V,G,tt,K,B){return m(D+(U^z^V)+tt+K|0,B)+G|0}function v(D,U,z,V,G,tt,K,B){return m(D+(U&z|~U&V)+tt+K|0,B)+G|0}function x(D,U,z,V,G,tt,K,B){return m(D+((U|~z)^V)+tt+K|0,B)+G|0}function S(D,U,z,V,G,tt,K,B){return m(D+(U&V|z&~V)+tt+K|0,B)+G|0}function O(D,U,z,V,G,tt,K,B){return m(D+(U^(z|~V))+tt+K|0,B)+G|0}r(g,s),g.prototype._update=function(){for(var D=a,U=0;U<16;++U)D[U]=this._block.readInt32LE(4*U);for(var z=0|this._a,V=0|this._b,G=0|this._c,tt=0|this._d,K=0|this._e,B=0|this._a,N=0|this._b,Z=0|this._c,w=0|this._d,C=0|this._e,k=0;k<80;k+=1){var T,R;k<16?(T=_(z,V,G,tt,K,D[o[k]],d[0],c[k]),R=O(B,N,Z,w,C,D[l[k]],p[0],h[k])):k<32?(T=v(z,V,G,tt,K,D[o[k]],d[1],c[k]),R=S(B,N,Z,w,C,D[l[k]],p[1],h[k])):k<48?(T=x(z,V,G,tt,K,D[o[k]],d[2],c[k]),R=x(B,N,Z,w,C,D[l[k]],p[2],h[k])):k<64?(T=S(z,V,G,tt,K,D[o[k]],d[3],c[k]),R=v(B,N,Z,w,C,D[l[k]],p[3],h[k])):(T=O(z,V,G,tt,K,D[o[k]],d[4],c[k]),R=_(B,N,Z,w,C,D[l[k]],p[4],h[k])),z=K,K=tt,tt=m(G,10),G=V,V=T,B=C,C=w,w=m(Z,10),Z=N,N=R}var F=this._b+G+w|0;this._b=this._c+tt+C|0,this._c=this._d+K+B|0,this._d=this._e+z+N|0,this._e=this._a+V+Z|0,this._a=F},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var D=i.alloc?i.alloc(20):new i(20);return D.writeInt32LE(this._a,0),D.writeInt32LE(this._b,4),D.writeInt32LE(this._c,8),D.writeInt32LE(this._d,12),D.writeInt32LE(this._e,16),D},t.exports=g},{buffer:220,"hash-base":425,inherits:440}],494:[function(n,t,e){"use strict";var i=n("buffer"),r=i.Buffer;function s(o,l){for(var c in o)l[c]=o[c]}function a(o,l,c){return r(o,l,c)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=a),a.prototype=Object.create(r.prototype),s(r,a),a.from=function(o,l,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,l,c)},a.alloc=function(o,l,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=r(o);return l!==void 0?typeof c=="string"?h.fill(l,c):h.fill(l):h.fill(0),h},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(o)}},{buffer:220}],495:[function(n,t,e){(function(i){(function(){"use strict";var r,s=n("buffer"),a=s.Buffer,o={};for(r in s)s.hasOwnProperty(r)&&r!=="SlowBuffer"&&r!=="Buffer"&&(o[r]=s[r]);var l=o.Buffer={};for(r in a)a.hasOwnProperty(r)&&r!=="allocUnsafe"&&r!=="allocUnsafeSlow"&&(l[r]=a[r]);if(o.Buffer.prototype=a.prototype,l.from&&l.from!==Uint8Array.from||(l.from=function(c,h,d){if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof c);if(c&&c.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);return a(c,h,d)}),l.alloc||(l.alloc=function(c,h,d){if(typeof c!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof c);if(c<0||c>=2*(1<<30))throw new RangeError('The value "'+c+'" is invalid for option "size"');var p=a(c);return h&&h.length!==0?typeof d=="string"?p.fill(h,d):p.fill(h):p.fill(0),p}),!o.kStringMaxLength)try{o.kStringMaxLength=i.binding("buffer").kStringMaxLength}catch{}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),t.exports=o}).call(this)}).call(this,n("_process"))},{_process:467,buffer:220}],496:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let i=n("xmlchars/xml/1.0/ed5"),r=n("xmlchars/xml/1.1/ed2"),s=n("xmlchars/xmlns/1.0/ed3");var a=i.isS,o=i.isChar,l=i.isNameStartChar,c=i.isNameChar,h=i.S_LIST,d=i.NAME_RE,p=r.isChar,g=s.isNCNameStartChar,m=s.isNCNameChar,_=s.NC_NAME_RE;let v="http://www.w3.org/XML/1998/namespace",x="http://www.w3.org/2000/xmlns/",S={__proto__:null,xml:v,xmlns:x},O={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},D=w=>w===34||w===39,U=[34,39],z=[...U,91,62],V=[...U,60,93],G=[61,63,...h],tt=[...h,62,38,60];function K(w,C,k){switch(C){case"xml":k!==v&&w.fail(`xml prefix must be bound to ${v}.`);break;case"xmlns":k!==x&&w.fail(`xmlns prefix must be bound to ${x}.`)}switch(k){case x:w.fail(C===""?`the default namespace may not be set to ${k}.`:`may not assign a prefix (even "xmlns") to the URI ${x}.`);break;case v:switch(C){case"xml":break;case"":w.fail(`the default namespace may not be set to ${k}.`);break;default:w.fail("may not assign the xml namespace to another prefix.")}}}let B=w=>_.test(w),N=w=>d.test(w);e.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];let Z={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};e.SaxesParser=class{constructor(w){this.opt=w??{},this.fragmentOpt=!!this.opt.fragment;let C=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,C){this.nameStartCheck=g,this.nameCheck=m,this.isName=B,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},S);let k=this.opt.additionalNamespaces;k!=null&&(function(T,R){for(let F of Object.keys(R))K(T,F,R[F])}(this,k),Object.assign(this.ns,k))}else this.nameStartCheck=l,this.nameCheck=c,this.isName=N,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var w;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];let{fragmentOpt:C}=this;this.state=C?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=C,this.xmlDeclPossible=!C,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:k}=this.opt;if(k===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");k="1.0"}this.setXMLVersion(k),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(O),(w=this.readyHandler)===null||w===void 0||w.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(w,C){this[Z[w]]=C}off(w){this[Z[w]]=void 0}makeError(w){var C;let k=(C=this.fileName)!==null&&C!==void 0?C:"";return this.trackPosition&&(k.length>0&&(k+=":"),k+=`${this.line}:${this.column}`),k.length>0&&(k+=": "),new Error(k+w)}fail(w){let C=this.makeError(w),k=this.errorHandler;if(k===void 0)throw C;return k(C),this}write(w){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let C=!1;w===null?(C=!0,w=""):typeof w=="object"&&(w=w.toString()),this.carriedFromPrevious!==void 0&&(w=`${this.carriedFromPrevious}${w}`,this.carriedFromPrevious=void 0);let k=w.length,T=w.charCodeAt(k-1);!C&&(T===13||T>=55296&&T<=56319)&&(this.carriedFromPrevious=w[k-1],k--,w=w.slice(0,k));let{stateTable:R}=this;for(this.chunk=w,this.i=0;this.i<k;)R[this.state].call(this);return this.chunkPosition+=k,C?this.end():this}close(){return this.write(null)}getCode10(){let{chunk:w,i:C}=this;if(this.prevI=C,this.i=C+1,C>=w.length)return-1;let k=w.charCodeAt(C);if(this.column++,k<55296){if(k>=32||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return w.charCodeAt(C+1)===10&&(this.i=C+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;let T=65536+1024*(k-55296)+(w.charCodeAt(C+1)-56320);return this.i=C+2,T>1114111&&this.fail("disallowed character."),T}getCode11(){let{chunk:w,i:C}=this;if(this.prevI=C,this.i=C+1,C>=w.length)return-1;let k=w.charCodeAt(C);if(this.column++,k<55296){if(k>31&&k<127||k>159&&k!==8232||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{let R=w.charCodeAt(C+1);R!==10&&R!==133||(this.i=C+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;let T=65536+1024*(k-55296)+(w.charCodeAt(C+1)-56320);return this.i=C+2,T>1114111&&this.fail("disallowed character."),T}getCodeNorm(){let w=this.getCode();return w===-2?10:w}unget(){this.i=this.prevI,this.column--}captureTo(w){let{i:C}=this,{chunk:k}=this;for(;;){let T=this.getCode(),R=T===-2,F=R?10:T;if(F===-1||w.includes(F))return this.text+=k.slice(C,this.prevI),F;R&&(this.text+=k.slice(C,this.prevI)+`
`,C=this.i)}}captureToChar(w){let{i:C}=this,{chunk:k}=this;for(;;){let T=this.getCode();switch(T){case-2:this.text+=k.slice(C,this.prevI)+`
`,C=this.i,T=10;break;case-1:return this.text+=k.slice(C),!1}if(T===w)return this.text+=k.slice(C,this.prevI),!0}}captureNameChars(){let{chunk:w,i:C}=this;for(;;){let k=this.getCode();if(k===-1)return this.name+=w.slice(C),-1;if(!c(k))return this.name+=w.slice(C,this.prevI),k===-2?10:k}}skipSpaces(){for(;;){let w=this.getCodeNorm();if(w===-1||!a(w))return w}}setXMLVersion(w){this.currentXMLVersion=w,w==="1.0"?(this.isChar=o,this.getCode=this.getCode10):(this.isChar=p,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){let w=this.i,C=this.skipSpaces();switch(this.prevI!==w&&(this.xmlDeclPossible=!1),C){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var w;let C=this.captureTo(z);switch(C){case 62:(w=this.doctypeHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(C),C===91?this.state=4:D(C)&&(this.state=3,this.q=C)}}sDoctypeQuote(){let w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.q=null,this.state=2)}sDTD(){let w=this.captureTo(V);w!==-1&&(this.text+=String.fromCodePoint(w),w===93?this.state=2:w===60?this.state=6:D(w)&&(this.state=5,this.q=w))}sDTDQuoted(){let w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.state=4,this.q=null)}sDTDOpenWaka(){let w=this.getCodeNorm();switch(this.text+=String.fromCodePoint(w),w){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){let w=String.fromCodePoint(this.getCodeNorm()),C=this.openWakaBang+=w;this.text+=w,C!=="-"&&(this.state=C==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){let w=this.getCodeNorm();this.text+=String.fromCodePoint(w),this.state=w===45?10:8}sDTDCommentEnded(){let w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){let w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:w}=this,{chunk:C}=this;t:for(;;)switch(this.getCode()){case-2:this.entity+=C.slice(w,this.prevI)+`
`,w=this.i;break;case 59:{let{entityReturnState:k}=this,T=this.entity+C.slice(w,this.prevI),R;this.state=k,T===""?(this.fail("empty entity name."),R="&;"):(R=this.parseEntity(T),this.entity=""),k===13&&this.textHandler===void 0||(this.text+=R);break t}case-1:this.entity+=C.slice(w);break t}}sOpenWaka(){let w=this.getCode();if(l(w))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(w){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var w;let C=this.getCodeNorm();C===45?(this.state=19,(w=this.commentHandler)===null||w===void 0||w.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(C),this.state=17)}sCommentEnded(){let w=this.getCodeNorm();w!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(w),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){let w=this.getCodeNorm();w===93?this.state=22:(this.text+="]"+String.fromCodePoint(w),this.state=20)}sCDataEnding2(){var w;let C=this.getCodeNorm();switch(C){case 62:(w=this.cdataHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(C),this.state=20}}sPIFirstChar(){let w=this.getCodeNorm();this.nameStartCheck(w)?(this.piTarget+=String.fromCodePoint(w),this.state=24):w===63||a(w)?(this.fail("processing instruction without a target."),this.state=w===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(w),this.state=24)}sPIRest(){let{chunk:w,i:C}=this;for(;;){let k=this.getCodeNorm();if(k===-1)return void(this.piTarget+=w.slice(C));if(!this.nameCheck(k)){this.piTarget+=w.slice(C,this.prevI);let T=k===63;T||a(k)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=T?33:27):this.state=T?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(k));break}}}sPIBody(){if(this.text.length===0){let w=this.getCodeNorm();w===63?this.state=26:a(w)||(this.text=String.fromCodePoint(w))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var w;let C=this.getCodeNorm();if(C===62){let{piTarget:k}=this;k.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(w=this.piHandler)===null||w===void 0||w.call(this,{target:k,body:this.text}),this.piTarget=this.text="",this.state=13}else C===63?this.text+="?":(this.text+="?"+String.fromCodePoint(C),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){let w=this.skipSpaces();w!==63?w!==-1&&(this.state=28,this.name=String.fromCodePoint(w)):this.state=33}sXMLDeclName(){let w=this.captureTo(G);if(w===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(a(w)||w===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=w===61?30:29}}sXMLDeclEq(){let w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");a(w)||(w!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){let w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");a(w)||(D(w)?this.q=w:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){let w=this.captureTo([this.q,63]);if(w===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(w===-1)return;let C=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];let k=C;this.xmlDecl.version=k,/^1\.[0-9]+$/.test(k)?this.opt.forceXMLVersion||this.setXMLVersion(k):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(C)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=C;break;case"standalone":C!=="yes"&&C!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=C}this.name="",this.state=32}sXMLDeclSeparator(){let w=this.getCodeNorm();w!==63?(a(w)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var w;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(w=this.xmldeclHandler)===null||w===void 0||w.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var w;let C=this.captureNameChars();if(C===-1)return;let k=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=k.ns=Object.create(null)),(w=this.openTagStartHandler)===null||w===void 0||w.call(this,k),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),C){case 62:this.openTag();break;case 47:this.state=35;break;default:a(C)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){let w=this.skipSpaces();w!==-1&&(l(w)?(this.unget(),this.state=37):w===62?this.openTag():w===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){let w=this.captureNameChars();w===61?this.state=39:a(w)?this.state=38:w===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):w!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){let w=this.skipSpaces();switch(w){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",w===62?this.openTag():l(w)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){let w=this.getCodeNorm();D(w)?(this.q=w,this.state=40):a(w)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){let{q:w,chunk:C}=this,{i:k}=this;for(;;)switch(this.getCode()){case w:return this.pushAttrib(this.name,this.text+C.slice(k,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=C.slice(k,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=C.slice(k,this.prevI)+" ",k=this.i;break;case 60:return this.text+=C.slice(k,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=C.slice(k))}}sAttribValueClosed(){let w=this.getCodeNorm();a(w)?this.state=36:w===62?this.openTag():w===47?this.state=35:l(w)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){let w=this.captureTo(tt);switch(w){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",w===62?this.openTag():this.state=36}}sCloseTag(){let w=this.captureNameChars();w===62?this.closeTag():a(w)?this.state=44:w!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:w,forbiddenState:C}=this,{chunk:k,textHandler:T}=this;t:for(;;)switch(this.getCode()){case 60:if(this.state=15,T!==void 0){let{text:R}=this,F=k.slice(w,this.prevI);R.length!==0?(T(R+F),this.text=""):F.length!==0&&T(F)}C=0;break t;case 38:this.state=14,this.entityReturnState=13,T!==void 0&&(this.text+=k.slice(w,this.prevI)),C=0;break t;case 93:switch(C){case 0:C=1;break;case 1:C=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:C===2&&this.fail('the string "]]>" is disallowed in char data.'),C=0;break;case-2:T!==void 0&&(this.text+=k.slice(w,this.prevI)+`
`),w=this.i,C=0;break;case-1:T!==void 0&&(this.text+=k.slice(w));break t;default:C=0}this.forbiddenState=C}handleTextOutsideRoot(){let{i:w}=this,{chunk:C,textHandler:k}=this,T=!1;t:for(;;){let R=this.getCode();switch(R){case 60:if(this.state=15,k!==void 0){let{text:F}=this,H=C.slice(w,this.prevI);F.length!==0?(k(F+H),this.text=""):H.length!==0&&k(H)}break t;case 38:this.state=14,this.entityReturnState=13,k!==void 0&&(this.text+=C.slice(w,this.prevI)),T=!0;break t;case-2:k!==void 0&&(this.text+=C.slice(w,this.prevI)+`
`),w=this.i;break;case-1:k!==void 0&&(this.text+=C.slice(w));break t;default:a(R)||(T=!0)}}T&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(w,C){var k;let{prefix:T,local:R}=this.qname(w),F={name:w,prefix:T,local:R,value:C};if(this.attribList.push(F),(k=this.attributeHandler)===null||k===void 0||k.call(this,F),T==="xmlns"){let H=C.trim();this.currentXMLVersion==="1.0"&&H===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[R]=H,K(this,R,H)}else if(w==="xmlns"){let H=C.trim();this.topNS[""]=H,K(this,"",H)}}pushAttribPlain(w,C){var k;let T={name:w,value:C};this.attribList.push(T),(k=this.attributeHandler)===null||k===void 0||k.call(this,T)}end(){var w,C;this.sawRoot||this.fail("document must contain a root element.");let{tags:k}=this;for(;k.length>0;){let R=k.pop();this.fail("unclosed tag: "+R.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");let{text:T}=this;return T.length!==0&&((w=this.textHandler)===null||w===void 0||w.call(this,T),this.text=""),this._closed=!0,(C=this.endHandler)===null||C===void 0||C.call(this),this._init(),this}resolve(w){var C,k;let T=this.topNS[w];if(T!==void 0)return T;let{tags:R}=this;for(let F=R.length-1;F>=0;F--)if(T=R[F].ns[w],T!==void 0)return T;return T=this.ns[w],T!==void 0?T:(k=(C=this.opt).resolvePrefix)===null||k===void 0?void 0:k.call(C,w)}qname(w){let C=w.indexOf(":");if(C===-1)return{prefix:"",local:w};let k=w.slice(C+1),T=w.slice(0,C);return(T===""||k===""||k.includes(":"))&&this.fail(`malformed name: ${w}.`),{prefix:T,local:k}}processAttribsNS(){var w;let{attribList:C}=this,k=this.tag;{let{prefix:F,local:H}=this.qname(k.name);k.prefix=F,k.local=H;let it=k.uri=(w=this.resolve(F))!==null&&w!==void 0?w:"";F!==""&&(F==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),it===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(F)}.`),k.uri=F))}if(C.length===0)return;let{attributes:T}=k,R=new Set;for(let F of C){let{name:H,prefix:it,local:ot}=F,dt,$;it===""?(dt=H==="xmlns"?x:"",$=H):(dt=this.resolve(it),dt===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(it)}.`),dt=it),$=`{${dt}}${ot}`),R.has($)&&this.fail(`duplicate attribute: ${$}.`),R.add($),F.uri=dt,T[H]=F}this.attribList=[]}processAttribsPlain(){let{attribList:w}=this,C=this.tag.attributes;for(let{name:k,value:T}of w)C[k]!==void 0&&this.fail(`duplicate attribute: ${k}.`),C[k]=T;this.attribList=[]}openTag(){var w;this.processAttribs();let{tags:C}=this,k=this.tag;k.isSelfClosing=!1,(w=this.openTagHandler)===null||w===void 0||w.call(this,k),C.push(k),this.state=13,this.name=""}openSelfClosingTag(){var w,C,k;this.processAttribs();let{tags:T}=this,R=this.tag;R.isSelfClosing=!0,(w=this.openTagHandler)===null||w===void 0||w.call(this,R),(C=this.closeTagHandler)===null||C===void 0||C.call(this,R),(this.tag=(k=T[T.length-1])!==null&&k!==void 0?k:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){let{tags:w,name:C}=this;if(this.state=13,this.name="",C==="")return this.fail("weird empty close tag."),void(this.text+="</>");let k=this.closeTagHandler,T=w.length;for(;T-- >0;){let R=this.tag=w.pop();if(this.topNS=R.ns,k?.(R),R.name===C)break;this.fail("unexpected close tag.")}T===0?this.closedRoot=!0:T<0&&(this.fail(`unmatched closing tag: ${C}.`),this.text+=`</${C}>`)}parseEntity(w){if(w[0]!=="#"){let k=this.ENTITIES[w];return k!==void 0?k:(this.fail(this.isName(w)?"undefined entity.":"disallowed character in entity name."),`&${w};`)}let C=NaN;return w[1]==="x"&&/^#x[0-9a-f]+$/i.test(w)?C=parseInt(w.slice(2),16):/^#[0-9]+$/.test(w)&&(C=parseInt(w.slice(1),10)),this.isChar(C)?String.fromCodePoint(C):(this.fail("malformed character entity."),`&${w};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer;function r(s,a){this._block=i.alloc(s),this._finalSize=a,this._blockSize=s,this._len=0}r.prototype.update=function(s,a){typeof s=="string"&&(a=a||"utf8",s=i.from(s,a));for(var o=this._block,l=this._blockSize,c=s.length,h=this._len,d=0;d<c;){for(var p=h%l,g=Math.min(c-d,l-p),m=0;m<g;m++)o[p+m]=s[d+m];d+=g,(h+=g)%l==0&&this._update(o)}return this._len+=c,this},r.prototype.digest=function(s){var a=this._len%this._blockSize;this._block[a]=128,this._block.fill(0,a+1),a>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=8*this._len;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var l=(4294967295&o)>>>0,c=(o-l)/4294967296;this._block.writeUInt32BE(c,this._blockSize-8),this._block.writeUInt32BE(l,this._blockSize-4)}this._update(this._block);var h=this._hash();return s?h.toString(s):h},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=r},{"safe-buffer":494}],498:[function(n,t,e){"use strict";var i=t.exports=function(r){r=r.toLowerCase();var s=i[r];if(!s)throw new Error(r+" is not supported (we accept pull requests)");return new s};i.sha=n("./sha"),i.sha1=n("./sha1"),i.sha224=n("./sha224"),i.sha256=n("./sha256"),i.sha384=n("./sha384"),i.sha512=n("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(n,t,e){"use strict";var i=n("inherits"),r=n("./hash"),s=n("safe-buffer").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function l(){this.init(),this._w=o,r.call(this,64,56)}function c(d){return d<<30|d>>>2}function h(d,p,g,m){return d===0?p&g|~p&m:d===2?p&g|p&m|g&m:p^g^m}i(l,r),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(d){for(var p,g=this._w,m=0|this._a,_=0|this._b,v=0|this._c,x=0|this._d,S=0|this._e,O=0;O<16;++O)g[O]=d.readInt32BE(4*O);for(;O<80;++O)g[O]=g[O-3]^g[O-8]^g[O-14]^g[O-16];for(var D=0;D<80;++D){var U=~~(D/20),z=0|((p=m)<<5|p>>>27)+h(U,_,v,x)+S+g[D]+a[U];S=x,x=v,v=c(_),_=m,m=z}this._a=m+this._a|0,this._b=_+this._b|0,this._c=v+this._c|0,this._d=x+this._d|0,this._e=S+this._e|0},l.prototype._hash=function(){var d=s.allocUnsafe(20);return d.writeInt32BE(0|this._a,0),d.writeInt32BE(0|this._b,4),d.writeInt32BE(0|this._c,8),d.writeInt32BE(0|this._d,12),d.writeInt32BE(0|this._e,16),d},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(n,t,e){"use strict";var i=n("inherits"),r=n("./hash"),s=n("safe-buffer").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function l(){this.init(),this._w=o,r.call(this,64,56)}function c(p){return p<<5|p>>>27}function h(p){return p<<30|p>>>2}function d(p,g,m,_){return p===0?g&m|~g&_:p===2?g&m|g&_|m&_:g^m^_}i(l,r),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(p){for(var g,m=this._w,_=0|this._a,v=0|this._b,x=0|this._c,S=0|this._d,O=0|this._e,D=0;D<16;++D)m[D]=p.readInt32BE(4*D);for(;D<80;++D)m[D]=(g=m[D-3]^m[D-8]^m[D-14]^m[D-16])<<1|g>>>31;for(var U=0;U<80;++U){var z=~~(U/20),V=c(_)+d(z,v,x,S)+O+m[U]+a[z]|0;O=S,S=x,x=h(v),v=_,_=V}this._a=_+this._a|0,this._b=v+this._b|0,this._c=x+this._c|0,this._d=S+this._d|0,this._e=O+this._e|0},l.prototype._hash=function(){var p=s.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(n,t,e){"use strict";var i=n("inherits"),r=n("./sha256"),s=n("./hash"),a=n("safe-buffer").Buffer,o=new Array(64);function l(){this.init(),this._w=o,s.call(this,64,56)}i(l,r),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var c=a.allocUnsafe(28);return c.writeInt32BE(this._a,0),c.writeInt32BE(this._b,4),c.writeInt32BE(this._c,8),c.writeInt32BE(this._d,12),c.writeInt32BE(this._e,16),c.writeInt32BE(this._f,20),c.writeInt32BE(this._g,24),c},t.exports=l},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(n,t,e){"use strict";var i=n("inherits"),r=n("./hash"),s=n("safe-buffer").Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function l(){this.init(),this._w=o,r.call(this,64,56)}function c(m,_,v){return v^m&(_^v)}function h(m,_,v){return m&_|v&(m|_)}function d(m){return(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10)}function p(m){return(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7)}function g(m){return(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3}i(l,r),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(m){for(var _,v=this._w,x=0|this._a,S=0|this._b,O=0|this._c,D=0|this._d,U=0|this._e,z=0|this._f,V=0|this._g,G=0|this._h,tt=0;tt<16;++tt)v[tt]=m.readInt32BE(4*tt);for(;tt<64;++tt)v[tt]=0|(((_=v[tt-2])>>>17|_<<15)^(_>>>19|_<<13)^_>>>10)+v[tt-7]+g(v[tt-15])+v[tt-16];for(var K=0;K<64;++K){var B=G+p(U)+c(U,z,V)+a[K]+v[K]|0,N=d(x)+h(x,S,O)|0;G=V,V=z,z=U,U=D+B|0,D=O,O=S,S=x,x=B+N|0}this._a=x+this._a|0,this._b=S+this._b|0,this._c=O+this._c|0,this._d=D+this._d|0,this._e=U+this._e|0,this._f=z+this._f|0,this._g=V+this._g|0,this._h=G+this._h|0},l.prototype._hash=function(){var m=s.allocUnsafe(32);return m.writeInt32BE(this._a,0),m.writeInt32BE(this._b,4),m.writeInt32BE(this._c,8),m.writeInt32BE(this._d,12),m.writeInt32BE(this._e,16),m.writeInt32BE(this._f,20),m.writeInt32BE(this._g,24),m.writeInt32BE(this._h,28),m},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(n,t,e){"use strict";var i=n("inherits"),r=n("./sha512"),s=n("./hash"),a=n("safe-buffer").Buffer,o=new Array(160);function l(){this.init(),this._w=o,s.call(this,128,112)}i(l,r),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var c=a.allocUnsafe(48);function h(d,p,g){c.writeInt32BE(d,g),c.writeInt32BE(p,g+4)}return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),c},t.exports=l},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(n,t,e){"use strict";var i=n("inherits"),r=n("./hash"),s=n("safe-buffer").Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function l(){this.init(),this._w=o,r.call(this,128,112)}function c(S,O,D){return D^S&(O^D)}function h(S,O,D){return S&O|D&(S|O)}function d(S,O){return(S>>>28|O<<4)^(O>>>2|S<<30)^(O>>>7|S<<25)}function p(S,O){return(S>>>14|O<<18)^(S>>>18|O<<14)^(O>>>9|S<<23)}function g(S,O){return(S>>>1|O<<31)^(S>>>8|O<<24)^S>>>7}function m(S,O){return(S>>>1|O<<31)^(S>>>8|O<<24)^(S>>>7|O<<25)}function _(S,O){return(S>>>19|O<<13)^(O>>>29|S<<3)^S>>>6}function v(S,O){return(S>>>19|O<<13)^(O>>>29|S<<3)^(S>>>6|O<<26)}function x(S,O){return S>>>0<O>>>0?1:0}i(l,r),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(S){for(var O=this._w,D=0|this._ah,U=0|this._bh,z=0|this._ch,V=0|this._dh,G=0|this._eh,tt=0|this._fh,K=0|this._gh,B=0|this._hh,N=0|this._al,Z=0|this._bl,w=0|this._cl,C=0|this._dl,k=0|this._el,T=0|this._fl,R=0|this._gl,F=0|this._hl,H=0;H<32;H+=2)O[H]=S.readInt32BE(4*H),O[H+1]=S.readInt32BE(4*H+4);for(;H<160;H+=2){var it=O[H-30],ot=O[H-30+1],dt=g(it,ot),$=m(ot,it),ct=_(it=O[H-4],ot=O[H-4+1]),W=v(ot,it),q=O[H-14],rt=O[H-14+1],mt=O[H-32],wt=O[H-32+1],_t=$+rt|0,Ct=dt+q+x(_t,$)|0;Ct=(Ct=Ct+ct+x(_t=_t+W|0,W)|0)+mt+x(_t=_t+wt|0,wt)|0,O[H]=Ct,O[H+1]=_t}for(var Ft=0;Ft<160;Ft+=2){Ct=O[Ft],_t=O[Ft+1];var At=h(D,U,z),vt=h(N,Z,w),kt=d(D,N),gt=d(N,D),ut=p(G,k),Q=p(k,G),Y=a[Ft],et=a[Ft+1],lt=c(G,tt,K),pt=c(k,T,R),bt=F+Q|0,Et=B+ut+x(bt,F)|0;Et=(Et=(Et=Et+lt+x(bt=bt+pt|0,pt)|0)+Y+x(bt=bt+et|0,et)|0)+Ct+x(bt=bt+_t|0,_t)|0;var Ot=gt+vt|0,zt=kt+At+x(Ot,gt)|0;B=K,F=R,K=tt,R=T,tt=G,T=k,G=V+Et+x(k=C+bt|0,C)|0,V=z,C=w,z=U,w=Z,U=D,Z=N,D=Et+zt+x(N=bt+Ot|0,bt)|0}this._al=this._al+N|0,this._bl=this._bl+Z|0,this._cl=this._cl+w|0,this._dl=this._dl+C|0,this._el=this._el+k|0,this._fl=this._fl+T|0,this._gl=this._gl+R|0,this._hl=this._hl+F|0,this._ah=this._ah+D+x(this._al,N)|0,this._bh=this._bh+U+x(this._bl,Z)|0,this._ch=this._ch+z+x(this._cl,w)|0,this._dh=this._dh+V+x(this._dl,C)|0,this._eh=this._eh+G+x(this._el,k)|0,this._fh=this._fh+tt+x(this._fl,T)|0,this._gh=this._gh+K+x(this._gl,R)|0,this._hh=this._hh+B+x(this._hl,F)|0},l.prototype._hash=function(){var S=s.allocUnsafe(64);function O(D,U,z){S.writeInt32BE(D,z),S.writeInt32BE(U,z+4)}return O(this._ah,this._al,0),O(this._bh,this._bl,8),O(this._ch,this._cl,16),O(this._dh,this._dl,24),O(this._eh,this._el,32),O(this._fh,this._fl,40),O(this._gh,this._gl,48),O(this._hh,this._hl,56),S},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(n,t,e){"use strict";t.exports=r;var i=n("events").EventEmitter;function r(){i.call(this)}n("inherits")(r,i),r.Readable=n("readable-stream/readable.js"),r.Writable=n("readable-stream/writable.js"),r.Duplex=n("readable-stream/duplex.js"),r.Transform=n("readable-stream/transform.js"),r.PassThrough=n("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(s,a){var o=this;function l(_){s.writable&&s.write(_)===!1&&o.pause&&o.pause()}function c(){o.readable&&o.resume&&o.resume()}o.on("data",l),s.on("drain",c),s._isStdio||a&&a.end===!1||(o.on("end",d),o.on("close",p));var h=!1;function d(){h||(h=!0,s.end())}function p(){h||(h=!0,typeof s.destroy=="function"&&s.destroy())}function g(_){if(m(),i.listenerCount(this,"error")===0)throw _}function m(){o.removeListener("data",l),s.removeListener("drain",c),o.removeListener("end",d),o.removeListener("close",p),o.removeListener("error",g),s.removeListener("error",g),o.removeListener("end",m),o.removeListener("close",m),s.removeListener("close",m)}return o.on("error",g),s.on("error",g),o.on("end",m),o.on("close",m),s.on("close",m),s.emit("pipe",o),s}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(n,t,e){"use strict";var i={}.toString;t.exports=Array.isArray||function(r){return i.call(r)=="[object Array]"}},{}],507:[function(n,t,e){"use strict";t.exports=n("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(n,t,e){"use strict";var i=n("process-nextick-args"),r=Object.keys||function(m){var _=[];for(var v in m)_.push(v);return _};t.exports=d;var s=Object.create(n("core-util-is"));s.inherits=n("inherits");var a=n("./_stream_readable"),o=n("./_stream_writable");s.inherits(d,a);for(var l=r(o.prototype),c=0;c<l.length;c++){var h=l[c];d.prototype[h]||(d.prototype[h]=o.prototype[h])}function d(m){if(!(this instanceof d))return new d(m);a.call(this,m),o.call(this,m),m&&m.readable===!1&&(this.readable=!1),m&&m.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,m&&m.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||i.nextTick(g,this)}function g(m){m.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),d.prototype._destroy=function(m,_){this.push(null),this.end(),i.nextTick(_,m)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(n,t,e){"use strict";t.exports=s;var i=n("./_stream_transform"),r=Object.create(n("core-util-is"));function s(a){if(!(this instanceof s))return new s(a);i.call(this,a)}r.inherits=n("inherits"),r.inherits(s,i),s.prototype._transform=function(a,o,l){l(null,a)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(n,t,e){(function(i,r){(function(){"use strict";var s=n("process-nextick-args");t.exports=D;var a,o=n("isarray");D.ReadableState=O,n("events").EventEmitter;var l=function(F,H){return F.listeners(H).length},c=n("./internal/streams/stream"),h=n("safe-buffer").Buffer,d=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p=Object.create(n("core-util-is"));p.inherits=n("inherits");var g=n("util"),m=void 0;m=g&&g.debuglog?g.debuglog("stream"):function(){};var _,v=n("./internal/streams/BufferList"),x=n("./internal/streams/destroy");p.inherits(D,c);var S=["error","close","destroy","pause","resume"];function O(F,H){F=F||{};var it=H instanceof(a=a||n("./_stream_duplex"));this.objectMode=!!F.objectMode,it&&(this.objectMode=this.objectMode||!!F.readableObjectMode);var ot=F.highWaterMark,dt=F.readableHighWaterMark,$=this.objectMode?16:16384;this.highWaterMark=ot||ot===0?ot:it&&(dt||dt===0)?dt:$,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(_||(_=n("string_decoder/").StringDecoder),this.decoder=new _(F.encoding),this.encoding=F.encoding)}function D(F){if(a=a||n("./_stream_duplex"),!(this instanceof D))return new D(F);this._readableState=new O(F,this),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),c.call(this)}function U(F,H,it,ot,dt){var $,ct=F._readableState;return H===null?(ct.reading=!1,function(W,q){if(!q.ended){if(q.decoder){var rt=q.decoder.end();rt&&rt.length&&(q.buffer.push(rt),q.length+=q.objectMode?1:rt.length)}q.ended=!0,G(W)}}(F,ct)):(dt||($=function(W,q){var rt;mt=q,h.isBuffer(mt)||mt instanceof d||typeof q=="string"||q===void 0||W.objectMode||(rt=new TypeError("Invalid non-string/buffer chunk"));var mt;return rt}(ct,H)),$?F.emit("error",$):ct.objectMode||H&&H.length>0?(typeof H=="string"||ct.objectMode||Object.getPrototypeOf(H)===h.prototype||(H=function(W){return h.from(W)}(H)),ot?ct.endEmitted?F.emit("error",new Error("stream.unshift() after end event")):z(F,ct,H,!0):ct.ended?F.emit("error",new Error("stream.push() after EOF")):(ct.reading=!1,ct.decoder&&!it?(H=ct.decoder.write(H),ct.objectMode||H.length!==0?z(F,ct,H,!1):K(F,ct)):z(F,ct,H,!1))):ot||(ct.reading=!1)),function(W){return!W.ended&&(W.needReadable||W.length<W.highWaterMark||W.length===0)}(ct)}function z(F,H,it,ot){H.flowing&&H.length===0&&!H.sync?(F.emit("data",it),F.read(0)):(H.length+=H.objectMode?1:it.length,ot?H.buffer.unshift(it):H.buffer.push(it),H.needReadable&&G(F)),K(F,H)}Object.defineProperty(D.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(F){this._readableState&&(this._readableState.destroyed=F)}}),D.prototype.destroy=x.destroy,D.prototype._undestroy=x.undestroy,D.prototype._destroy=function(F,H){this.push(null),H(F)},D.prototype.push=function(F,H){var it,ot=this._readableState;return ot.objectMode?it=!0:typeof F=="string"&&((H=H||ot.defaultEncoding)!==ot.encoding&&(F=h.from(F,H),H=""),it=!0),U(this,F,H,!1,it)},D.prototype.unshift=function(F){return U(this,F,null,!0,!1)},D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(F){return _||(_=n("string_decoder/").StringDecoder),this._readableState.decoder=new _(F),this._readableState.encoding=F,this};function V(F,H){return F<=0||H.length===0&&H.ended?0:H.objectMode?1:F!=F?H.flowing&&H.length?H.buffer.head.data.length:H.length:(F>H.highWaterMark&&(H.highWaterMark=function(it){return it>=8388608?it=8388608:(it--,it|=it>>>1,it|=it>>>2,it|=it>>>4,it|=it>>>8,it|=it>>>16,it++),it}(F)),F<=H.length?F:H.ended?H.length:(H.needReadable=!0,0))}function G(F){var H=F._readableState;H.needReadable=!1,H.emittedReadable||(m("emitReadable",H.flowing),H.emittedReadable=!0,H.sync?s.nextTick(tt,F):tt(F))}function tt(F){m("emit readable"),F.emit("readable"),w(F)}function K(F,H){H.readingMore||(H.readingMore=!0,s.nextTick(B,F,H))}function B(F,H){for(var it=H.length;!H.reading&&!H.flowing&&!H.ended&&H.length<H.highWaterMark&&(m("maybeReadMore read 0"),F.read(0),it!==H.length);)it=H.length;H.readingMore=!1}function N(F){m("readable nexttick read 0"),F.read(0)}function Z(F,H){H.reading||(m("resume read 0"),F.read(0)),H.resumeScheduled=!1,H.awaitDrain=0,F.emit("resume"),w(F),H.flowing&&!H.reading&&F.read(0)}function w(F){var H=F._readableState;for(m("flow",H.flowing);H.flowing&&F.read()!==null;);}function C(F,H){return H.length===0?null:(H.objectMode?it=H.buffer.shift():!F||F>=H.length?(it=H.decoder?H.buffer.join(""):H.buffer.length===1?H.buffer.head.data:H.buffer.concat(H.length),H.buffer.clear()):it=function(ot,dt,$){var ct;return ot<dt.head.data.length?(ct=dt.head.data.slice(0,ot),dt.head.data=dt.head.data.slice(ot)):ct=ot===dt.head.data.length?dt.shift():$?function(W,q){var rt=q.head,mt=1,wt=rt.data;for(W-=wt.length;rt=rt.next;){var _t=rt.data,Ct=W>_t.length?_t.length:W;if(Ct===_t.length?wt+=_t:wt+=_t.slice(0,W),(W-=Ct)===0){Ct===_t.length?(++mt,rt.next?q.head=rt.next:q.head=q.tail=null):(q.head=rt,rt.data=_t.slice(Ct));break}++mt}return q.length-=mt,wt}(ot,dt):function(W,q){var rt=h.allocUnsafe(W),mt=q.head,wt=1;for(mt.data.copy(rt),W-=mt.data.length;mt=mt.next;){var _t=mt.data,Ct=W>_t.length?_t.length:W;if(_t.copy(rt,rt.length-W,0,Ct),(W-=Ct)===0){Ct===_t.length?(++wt,mt.next?q.head=mt.next:q.head=q.tail=null):(q.head=mt,mt.data=_t.slice(Ct));break}++wt}return q.length-=wt,rt}(ot,dt),ct}(F,H.buffer,H.decoder),it);var it}function k(F){var H=F._readableState;if(H.length>0)throw new Error('"endReadable()" called on non-empty stream');H.endEmitted||(H.ended=!0,s.nextTick(T,H,F))}function T(F,H){F.endEmitted||F.length!==0||(F.endEmitted=!0,H.readable=!1,H.emit("end"))}function R(F,H){for(var it=0,ot=F.length;it<ot;it++)if(F[it]===H)return it;return-1}D.prototype.read=function(F){m("read",F),F=parseInt(F,10);var H=this._readableState,it=F;if(F!==0&&(H.emittedReadable=!1),F===0&&H.needReadable&&(H.length>=H.highWaterMark||H.ended))return m("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?k(this):G(this),null;if((F=V(F,H))===0&&H.ended)return H.length===0&&k(this),null;var ot,dt=H.needReadable;return m("need readable",dt),(H.length===0||H.length-F<H.highWaterMark)&&m("length less than watermark",dt=!0),H.ended||H.reading?m("reading or ended",dt=!1):dt&&(m("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(F=V(it,H))),(ot=F>0?C(F,H):null)===null?(H.needReadable=!0,F=0):H.length-=F,H.length===0&&(H.ended||(H.needReadable=!0),it!==F&&H.ended&&k(this)),ot!==null&&this.emit("data",ot),ot},D.prototype._read=function(F){this.emit("error",new Error("_read() is not implemented"))},D.prototype.pipe=function(F,H){var it=this,ot=this._readableState;switch(ot.pipesCount){case 0:ot.pipes=F;break;case 1:ot.pipes=[ot.pipes,F];break;default:ot.pipes.push(F)}ot.pipesCount+=1,m("pipe count=%d opts=%j",ot.pipesCount,H);var dt=(!H||H.end!==!1)&&F!==i.stdout&&F!==i.stderr?ct:Ft;function $(At,vt){m("onunpipe"),At===it&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,m("cleanup"),F.removeListener("close",_t),F.removeListener("finish",Ct),F.removeListener("drain",W),F.removeListener("error",wt),F.removeListener("unpipe",$),it.removeListener("end",ct),it.removeListener("end",Ft),it.removeListener("data",mt),q=!0,!ot.awaitDrain||F._writableState&&!F._writableState.needDrain||W())}function ct(){m("onend"),F.end()}ot.endEmitted?s.nextTick(dt):it.once("end",dt),F.on("unpipe",$);var W=function(At){return function(){var vt=At._readableState;m("pipeOnDrain",vt.awaitDrain),vt.awaitDrain&&vt.awaitDrain--,vt.awaitDrain===0&&l(At,"data")&&(vt.flowing=!0,w(At))}}(it);F.on("drain",W);var q=!1,rt=!1;function mt(At){m("ondata"),rt=!1,F.write(At)!==!1||rt||((ot.pipesCount===1&&ot.pipes===F||ot.pipesCount>1&&R(ot.pipes,F)!==-1)&&!q&&(m("false write response, pause",ot.awaitDrain),ot.awaitDrain++,rt=!0),it.pause())}function wt(At){m("onerror",At),Ft(),F.removeListener("error",wt),l(F,"error")===0&&F.emit("error",At)}function _t(){F.removeListener("finish",Ct),Ft()}function Ct(){m("onfinish"),F.removeListener("close",_t),Ft()}function Ft(){m("unpipe"),it.unpipe(F)}return it.on("data",mt),function(At,vt,kt){if(typeof At.prependListener=="function")return At.prependListener(vt,kt);At._events&&At._events[vt]?o(At._events[vt])?At._events[vt].unshift(kt):At._events[vt]=[kt,At._events[vt]]:At.on(vt,kt)}(F,"error",wt),F.once("close",_t),F.once("finish",Ct),F.emit("pipe",it),ot.flowing||(m("pipe resume"),it.resume()),F},D.prototype.unpipe=function(F){var H=this._readableState,it={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return F&&F!==H.pipes||(F||(F=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,F&&F.emit("unpipe",this,it)),this;if(!F){var ot=H.pipes,dt=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var $=0;$<dt;$++)ot[$].emit("unpipe",this,{hasUnpiped:!1});return this}var ct=R(H.pipes,F);return ct===-1||(H.pipes.splice(ct,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),F.emit("unpipe",this,it)),this},D.prototype.on=function(F,H){var it=c.prototype.on.call(this,F,H);if(F==="data")this._readableState.flowing!==!1&&this.resume();else if(F==="readable"){var ot=this._readableState;ot.endEmitted||ot.readableListening||(ot.readableListening=ot.needReadable=!0,ot.emittedReadable=!1,ot.reading?ot.length&&G(this):s.nextTick(N,this))}return it},D.prototype.addListener=D.prototype.on,D.prototype.resume=function(){var F=this._readableState;return F.flowing||(m("resume"),F.flowing=!0,function(H,it){it.resumeScheduled||(it.resumeScheduled=!0,s.nextTick(Z,H,it))}(this,F)),this},D.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},D.prototype.wrap=function(F){var H=this,it=this._readableState,ot=!1;for(var dt in F.on("end",function(){if(m("wrapped end"),it.decoder&&!it.ended){var ct=it.decoder.end();ct&&ct.length&&H.push(ct)}H.push(null)}),F.on("data",function(ct){m("wrapped data"),it.decoder&&(ct=it.decoder.write(ct)),it.objectMode&&ct==null||(it.objectMode||ct&&ct.length)&&(H.push(ct)||(ot=!0,F.pause()))}),F)this[dt]===void 0&&typeof F[dt]=="function"&&(this[dt]=function(ct){return function(){return F[ct].apply(F,arguments)}}(dt));for(var $=0;$<S.length;$++)F.on(S[$],this.emit.bind(this,S[$]));return this._read=function(ct){m("wrapped _read",ct),ot&&(ot=!1,F.resume())},this},Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),D._fromList=C}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(n,t,e){"use strict";t.exports=a;var i=n("./_stream_duplex"),r=Object.create(n("core-util-is"));function s(c,h){var d=this._transformState;d.transforming=!1;var p=d.writecb;if(!p)return this.emit("error",new Error("write callback called multiple times"));d.writechunk=null,d.writecb=null,h!=null&&this.push(h),p(c);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function a(c){if(!(this instanceof a))return new a(c);i.call(this,c),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",o)}function o(){var c=this;typeof this._flush=="function"?this._flush(function(h,d){l(c,h,d)}):l(this,null,null)}function l(c,h,d){if(h)return c.emit("error",h);if(d!=null&&c.push(d),c._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(c._transformState.transforming)throw new Error("Calling transform done when still transforming");return c.push(null)}r.inherits=n("inherits"),r.inherits(a,i),a.prototype.push=function(c,h){return this._transformState.needTransform=!1,i.prototype.push.call(this,c,h)},a.prototype._transform=function(c,h,d){throw new Error("_transform() is not implemented")},a.prototype._write=function(c,h,d){var p=this._transformState;if(p.writecb=d,p.writechunk=c,p.writeencoding=h,!p.transforming){var g=this._readableState;(p.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},a.prototype._read=function(c){var h=this._transformState;h.writechunk!==null&&h.writecb&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},a.prototype._destroy=function(c,h){var d=this;i.prototype._destroy.call(this,c,function(p){h(p),d.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(n,t,e){(function(i,r,s){(function(){"use strict";var a=n("process-nextick-args");function o(K){var B=this;this.next=null,this.entry=null,this.finish=function(){(function(N,Z,w){var C=N.entry;for(N.entry=null;C;){var k=C.callback;Z.pendingcb--,k(w),C=C.next}Z.corkedRequestsFree.next=N})(B,K)}}t.exports=O;var l,c=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?s:a.nextTick;O.WritableState=S;var h=Object.create(n("core-util-is"));h.inherits=n("inherits");var d={deprecate:n("util-deprecate")},p=n("./internal/streams/stream"),g=n("safe-buffer").Buffer,m=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},_,v=n("./internal/streams/destroy");function x(){}function S(K,B){l=l||n("./_stream_duplex"),K=K||{};var N=B instanceof l;this.objectMode=!!K.objectMode,N&&(this.objectMode=this.objectMode||!!K.writableObjectMode);var Z=K.highWaterMark,w=K.writableHighWaterMark,C=this.objectMode?16:16384;this.highWaterMark=Z||Z===0?Z:N&&(w||w===0)?w:C,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var k=K.decodeStrings===!1;this.decodeStrings=!k,this.defaultEncoding=K.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(T){(function(R,F){var H=R._writableState,it=H.sync,ot=H.writecb;if(function($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}(H),F)(function($,ct,W,q,rt){--ct.pendingcb,W?(a.nextTick(rt,q),a.nextTick(tt,$,ct),$._writableState.errorEmitted=!0,$.emit("error",q)):(rt(q),$._writableState.errorEmitted=!0,$.emit("error",q),tt($,ct))})(R,H,it,F,ot);else{var dt=V(H);dt||H.corked||H.bufferProcessing||!H.bufferedRequest||z(R,H),it?c(U,R,H,dt,ot):U(R,H,dt,ot)}})(B,T)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function O(K){if(l=l||n("./_stream_duplex"),!(_.call(O,this)||this instanceof l))return new O(K);this._writableState=new S(K,this),this.writable=!0,K&&(typeof K.write=="function"&&(this._write=K.write),typeof K.writev=="function"&&(this._writev=K.writev),typeof K.destroy=="function"&&(this._destroy=K.destroy),typeof K.final=="function"&&(this._final=K.final)),p.call(this)}function D(K,B,N,Z,w,C,k){B.writelen=Z,B.writecb=k,B.writing=!0,B.sync=!0,N?K._writev(w,B.onwrite):K._write(w,C,B.onwrite),B.sync=!1}function U(K,B,N,Z){N||function(w,C){C.length===0&&C.needDrain&&(C.needDrain=!1,w.emit("drain"))}(K,B),B.pendingcb--,Z(),tt(K,B)}function z(K,B){B.bufferProcessing=!0;var N=B.bufferedRequest;if(K._writev&&N&&N.next){var Z=B.bufferedRequestCount,w=new Array(Z),C=B.corkedRequestsFree;C.entry=N;for(var k=0,T=!0;N;)w[k]=N,N.isBuf||(T=!1),N=N.next,k+=1;w.allBuffers=T,D(K,B,!0,B.length,w,"",C.finish),B.pendingcb++,B.lastBufferedRequest=null,C.next?(B.corkedRequestsFree=C.next,C.next=null):B.corkedRequestsFree=new o(B),B.bufferedRequestCount=0}else{for(;N;){var R=N.chunk,F=N.encoding,H=N.callback;if(D(K,B,!1,B.objectMode?1:R.length,R,F,H),N=N.next,B.bufferedRequestCount--,B.writing)break}N===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=N,B.bufferProcessing=!1}function V(K){return K.ending&&K.length===0&&K.bufferedRequest===null&&!K.finished&&!K.writing}function G(K,B){K._final(function(N){B.pendingcb--,N&&K.emit("error",N),B.prefinished=!0,K.emit("prefinish"),tt(K,B)})}function tt(K,B){var N=V(B);return N&&(function(Z,w){w.prefinished||w.finalCalled||(typeof Z._final=="function"?(w.pendingcb++,w.finalCalled=!0,a.nextTick(G,Z,w)):(w.prefinished=!0,Z.emit("prefinish")))}(K,B),B.pendingcb===0&&(B.finished=!0,K.emit("finish"))),N}h.inherits(O,p),S.prototype.getBuffer=function(){for(var K=this.bufferedRequest,B=[];K;)B.push(K),K=K.next;return B},function(){try{Object.defineProperty(S.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(K){return!!_.call(this,K)||this===O&&K&&K._writableState instanceof S}})):_=function(K){return K instanceof this},O.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},O.prototype.write=function(K,B,N){var Z,w=this._writableState,C=!1,k=!w.objectMode&&(Z=K,g.isBuffer(Z)||Z instanceof m);return k&&!g.isBuffer(K)&&(K=function(T){return g.from(T)}(K)),typeof B=="function"&&(N=B,B=null),k?B="buffer":B||(B=w.defaultEncoding),typeof N!="function"&&(N=x),w.ended?function(T,R){var F=new Error("write after end");T.emit("error",F),a.nextTick(R,F)}(this,N):(k||function(T,R,F,H){var it=!0,ot=!1;return F===null?ot=new TypeError("May not write null values to stream"):typeof F=="string"||F===void 0||R.objectMode||(ot=new TypeError("Invalid non-string/buffer chunk")),ot&&(T.emit("error",ot),a.nextTick(H,ot),it=!1),it}(this,w,K,N))&&(w.pendingcb++,C=function(T,R,F,H,it,ot){if(!F){var dt=function(q,rt,mt){return q.objectMode||q.decodeStrings===!1||typeof rt!="string"||(rt=g.from(rt,mt)),rt}(R,H,it);H!==dt&&(F=!0,it="buffer",H=dt)}var $=R.objectMode?1:H.length;R.length+=$;var ct=R.length<R.highWaterMark;if(ct||(R.needDrain=!0),R.writing||R.corked){var W=R.lastBufferedRequest;R.lastBufferedRequest={chunk:H,encoding:it,isBuf:F,callback:ot,next:null},W?W.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else D(T,R,!1,$,H,it,ot);return ct}(this,w,k,K,B,N)),C},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var K=this._writableState;K.corked&&(K.corked--,K.writing||K.corked||K.bufferProcessing||!K.bufferedRequest||z(this,K))},O.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(K,B,N){N(new Error("_write() is not implemented"))},O.prototype._writev=null,O.prototype.end=function(K,B,N){var Z=this._writableState;typeof K=="function"?(N=K,K=null,B=null):typeof B=="function"&&(N=B,B=null),K!=null&&this.write(K,B),Z.corked&&(Z.corked=1,this.uncork()),Z.ending||function(w,C,k){C.ending=!0,tt(w,C),k&&(C.finished?a.nextTick(k):w.once("finish",k)),C.ended=!0,w.writable=!1}(this,Z,N)},Object.defineProperty(O.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),O.prototype.destroy=v.destroy,O.prototype._undestroy=v.undestroy,O.prototype._destroy=function(K,B){this.end(),B(K)}}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},n("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(n,t,e){"use strict";var i=n("safe-buffer").Buffer,r=n("util");t.exports=function(){function s(){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}return s.prototype.push=function(a){var o={data:a,next:null};this.length>0?this.tail.next=o:this.head=o,this.tail=o,++this.length},s.prototype.unshift=function(a){var o={data:a,next:this.head};this.length===0&&(this.tail=o),this.head=o,++this.length},s.prototype.shift=function(){if(this.length!==0){var a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},s.prototype.clear=function(){this.head=this.tail=null,this.length=0},s.prototype.join=function(a){if(this.length===0)return"";for(var o=this.head,l=""+o.data;o=o.next;)l+=a+o.data;return l},s.prototype.concat=function(a){if(this.length===0)return i.alloc(0);for(var o,l,c,h=i.allocUnsafe(a>>>0),d=this.head,p=0;d;)o=d.data,l=h,c=p,o.copy(l,c),p+=d.data.length,d=d.next;return h},s}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var s=r.inspect({length:this.length});return this.constructor.name+" "+s})},{"safe-buffer":520,util:188}],514:[function(n,t,e){"use strict";var i=n("process-nextick-args");function r(s,a){s.emit("error",a)}t.exports={destroy:function(s,a){var o=this,l=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return l||c?(a?a(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(r,this,s)):i.nextTick(r,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(h){!a&&h?o._writableState?o._writableState.errorEmitted||(o._writableState.errorEmitted=!0,i.nextTick(r,o,h)):i.nextTick(r,o,h):a&&a(h)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(n,t,e){arguments[4][490][0].apply(e,arguments)},{dup:490,events:422}],516:[function(n,t,e){"use strict";t.exports=n("./readable").PassThrough},{"./readable":517}],517:[function(n,t,e){"use strict";(e=t.exports=n("./lib/_stream_readable.js")).Stream=e,e.Readable=e,e.Writable=n("./lib/_stream_writable.js"),e.Duplex=n("./lib/_stream_duplex.js"),e.Transform=n("./lib/_stream_transform.js"),e.PassThrough=n("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(n,t,e){"use strict";t.exports=n("./readable").Transform},{"./readable":517}],519:[function(n,t,e){"use strict";t.exports=n("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(n,t,e){arguments[4][217][0].apply(e,arguments)},{buffer:220,dup:217}],521:[function(n,t,e){arguments[4][218][0].apply(e,arguments)},{dup:218,"safe-buffer":520}],522:[function(n,t,e){arguments[4][218][0].apply(e,arguments)},{dup:218,"safe-buffer":494}],523:[function(n,t,e){(function(i,r){(function(){"use strict";var s=n("process/browser.js").nextTick,a=Function.prototype.apply,o=Array.prototype.slice,l={},c=0;function h(d,p){this._id=d,this._clearFn=p}e.setTimeout=function(){return new h(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new h(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(d){d.close()},h.prototype.unref=h.prototype.ref=function(){},h.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(d,p){clearTimeout(d._idleTimeoutId),d._idleTimeout=p},e.unenroll=function(d){clearTimeout(d._idleTimeoutId),d._idleTimeout=-1},e._unrefActive=e.active=function(d){clearTimeout(d._idleTimeoutId);var p=d._idleTimeout;p>=0&&(d._idleTimeoutId=setTimeout(function(){d._onTimeout&&d._onTimeout()},p))},e.setImmediate=typeof i=="function"?i:function(d){var p=c++,g=!(arguments.length<2)&&o.call(arguments,1);return l[p]=!0,s(function(){l[p]&&(g?d.apply(null,g):d.call(null),e.clearImmediate(p))}),p},e.clearImmediate=typeof r=="function"?r:function(d){delete l[d]}}).call(this)}).call(this,n("timers").setImmediate,n("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(n,t,e){(function(i){(function(){"use strict";function r(s){try{if(!i.localStorage)return!1}catch{return!1}var a=i.localStorage[s];return a!=null&&String(a).toLowerCase()==="true"}t.exports=function(s,a){if(r("noDeprecation"))return s;var o=!1;return function(){if(!o){if(r("throwDeprecation"))throw new Error(a);r("traceDeprecation")?console.trace(a):console.warn(a),o=!0}return s.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(n,t,e){"use strict";typeof Object.create=="function"?t.exports=function(i,r){i.super_=r,i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(i,r){i.super_=r;var s=function(){};s.prototype=r.prototype,i.prototype=new s,i.prototype.constructor=i}},{}],526:[function(n,t,e){"use strict";t.exports=function(i){return i&&typeof i=="object"&&typeof i.copy=="function"&&typeof i.fill=="function"&&typeof i.readUInt8=="function"}},{}],527:[function(n,t,e){(function(i,r){(function(){"use strict";var s=/%[sdj%]/g;e.format=function(w){if(!S(w)){for(var C=[],k=0;k<arguments.length;k++)C.push(l(arguments[k]));return C.join(" ")}k=1;for(var T=arguments,R=T.length,F=String(w).replace(s,function(it){if(it==="%%")return"%";if(k>=R)return it;switch(it){case"%s":return String(T[k++]);case"%d":return Number(T[k++]);case"%j":try{return JSON.stringify(T[k++])}catch{return"[Circular]"}default:return it}}),H=T[k];k<R;H=T[++k])v(H)||!U(H)?F+=" "+H:F+=" "+l(H);return F},e.deprecate=function(w,C){if(O(r.process))return function(){return e.deprecate(w,C).apply(this,arguments)};if(i.noDeprecation===!0)return w;var k=!1;return function(){if(!k){if(i.throwDeprecation)throw new Error(C);i.traceDeprecation?console.trace(C):console.error(C),k=!0}return w.apply(this,arguments)}};var a,o={};function l(w,C){var k={seen:[],stylize:h};return arguments.length>=3&&(k.depth=arguments[2]),arguments.length>=4&&(k.colors=arguments[3]),_(C)?k.showHidden=C:C&&e._extend(k,C),O(k.showHidden)&&(k.showHidden=!1),O(k.depth)&&(k.depth=2),O(k.colors)&&(k.colors=!1),O(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=c),d(k,w,k.depth)}function c(w,C){var k=l.styles[C];return k?"\x1B["+l.colors[k][0]+"m"+w+"\x1B["+l.colors[k][1]+"m":w}function h(w,C){return w}function d(w,C,k){if(w.customInspect&&C&&G(C.inspect)&&C.inspect!==e.inspect&&(!C.constructor||C.constructor.prototype!==C)){var T=C.inspect(k,w);return S(T)||(T=d(w,T,k)),T}var R=function(W,q){if(O(q))return W.stylize("undefined","undefined");if(S(q)){var rt="'"+JSON.stringify(q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return W.stylize(rt,"string")}if(x(q))return W.stylize(""+q,"number");if(_(q))return W.stylize(""+q,"boolean");if(v(q))return W.stylize("null","null")}(w,C);if(R)return R;var F=Object.keys(C),H=function(W){var q={};return W.forEach(function(rt,mt){q[rt]=!0}),q}(F);if(w.showHidden&&(F=Object.getOwnPropertyNames(C)),V(C)&&(F.indexOf("message")>=0||F.indexOf("description")>=0))return p(C);if(F.length===0){if(G(C)){var it=C.name?": "+C.name:"";return w.stylize("[Function"+it+"]","special")}if(D(C))return w.stylize(RegExp.prototype.toString.call(C),"regexp");if(z(C))return w.stylize(Date.prototype.toString.call(C),"date");if(V(C))return p(C)}var ot,dt="",$=!1,ct=["{","}"];return m(C)&&($=!0,ct=["[","]"]),G(C)&&(dt=" [Function"+(C.name?": "+C.name:"")+"]"),D(C)&&(dt=" "+RegExp.prototype.toString.call(C)),z(C)&&(dt=" "+Date.prototype.toUTCString.call(C)),V(C)&&(dt=" "+p(C)),F.length!==0||$&&C.length!=0?k<0?D(C)?w.stylize(RegExp.prototype.toString.call(C),"regexp"):w.stylize("[Object]","special"):(w.seen.push(C),ot=$?function(W,q,rt,mt,wt){for(var _t=[],Ct=0,Ft=q.length;Ct<Ft;++Ct)Z(q,String(Ct))?_t.push(g(W,q,rt,mt,String(Ct),!0)):_t.push("");return wt.forEach(function(At){At.match(/^\d+$/)||_t.push(g(W,q,rt,mt,At,!0))}),_t}(w,C,k,H,F):F.map(function(W){return g(w,C,k,H,W,$)}),w.seen.pop(),function(W,q,rt){return W.reduce(function(mt,wt){return wt.indexOf(`
`)>=0,mt+wt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?rt[0]+(q===""?"":q+`
 `)+" "+W.join(`,
  `)+" "+rt[1]:rt[0]+q+" "+W.join(", ")+" "+rt[1]}(ot,dt,ct)):ct[0]+dt+ct[1]}function p(w){return"["+Error.prototype.toString.call(w)+"]"}function g(w,C,k,T,R,F){var H,it,ot;if((ot=Object.getOwnPropertyDescriptor(C,R)||{value:C[R]}).get?it=ot.set?w.stylize("[Getter/Setter]","special"):w.stylize("[Getter]","special"):ot.set&&(it=w.stylize("[Setter]","special")),Z(T,R)||(H="["+R+"]"),it||(w.seen.indexOf(ot.value)<0?(it=v(k)?d(w,ot.value,null):d(w,ot.value,k-1)).indexOf(`
`)>-1&&(it=F?it.split(`
`).map(function(dt){return"  "+dt}).join(`
`).substr(2):`
`+it.split(`
`).map(function(dt){return"   "+dt}).join(`
`)):it=w.stylize("[Circular]","special")),O(H)){if(F&&R.match(/^\d+$/))return it;(H=JSON.stringify(""+R)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(H=H.substr(1,H.length-2),H=w.stylize(H,"name")):(H=H.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),H=w.stylize(H,"string"))}return H+": "+it}function m(w){return Array.isArray(w)}function _(w){return typeof w=="boolean"}function v(w){return w===null}function x(w){return typeof w=="number"}function S(w){return typeof w=="string"}function O(w){return w===void 0}function D(w){return U(w)&&tt(w)==="[object RegExp]"}function U(w){return typeof w=="object"&&w!==null}function z(w){return U(w)&&tt(w)==="[object Date]"}function V(w){return U(w)&&(tt(w)==="[object Error]"||w instanceof Error)}function G(w){return typeof w=="function"}function tt(w){return Object.prototype.toString.call(w)}function K(w){return w<10?"0"+w.toString(10):w.toString(10)}e.debuglog=function(w){if(O(a)&&(a=i.env.NODE_DEBUG||""),w=w.toUpperCase(),!o[w])if(new RegExp("\\b"+w+"\\b","i").test(a)){var C=i.pid;o[w]=function(){var k=e.format.apply(e,arguments);console.error("%s %d: %s",w,C,k)}}else o[w]=function(){};return o[w]},e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=m,e.isBoolean=_,e.isNull=v,e.isNullOrUndefined=function(w){return w==null},e.isNumber=x,e.isString=S,e.isSymbol=function(w){return typeof w=="symbol"},e.isUndefined=O,e.isRegExp=D,e.isObject=U,e.isDate=z,e.isError=V,e.isFunction=G,e.isPrimitive=function(w){return w===null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||typeof w=="symbol"||w===void 0},e.isBuffer=n("./support/isBuffer");var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var w=new Date,C=[K(w.getHours()),K(w.getMinutes()),K(w.getSeconds())].join(":");return[w.getDate(),B[w.getMonth()],C].join(" ")}function Z(w,C){return Object.prototype.hasOwnProperty.call(w,C)}e.log=function(){console.log("%s - %s",N(),e.format.apply(e,arguments))},e.inherits=n("inherits"),e._extend=function(w,C){if(!C||!U(C))return w;for(var k=Object.keys(C),T=k.length;T--;)w[k[T]]=C[k[T]];return w}}).call(this)}).call(this,n("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return d.default}});var i=p(n("./v1.js")),r=p(n("./v3.js")),s=p(n("./v4.js")),a=p(n("./v5.js")),o=p(n("./nil.js")),l=p(n("./version.js")),c=p(n("./validate.js")),h=p(n("./stringify.js")),d=p(n("./parse.js"));function p(g){return g&&g.__esModule?g:{default:g}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(n,t,e){"use strict";function i(d){return 14+(d+64>>>9<<4)+1}function r(d,p){let g=(65535&d)+(65535&p);return(d>>16)+(p>>16)+(g>>16)<<16|65535&g}function s(d,p,g,m,_,v){return r((x=r(r(p,d),r(m,v)))<<(S=_)|x>>>32-S,g);var x,S}function a(d,p,g,m,_,v,x){return s(p&g|~p&m,d,p,_,v,x)}function o(d,p,g,m,_,v,x){return s(p&m|g&~m,d,p,_,v,x)}function l(d,p,g,m,_,v,x){return s(p^g^m,d,p,_,v,x)}function c(d,p,g,m,_,v,x){return s(g^(p|~m),d,p,_,v,x)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=function(d){if(typeof d=="string"){let p=unescape(encodeURIComponent(d));d=new Uint8Array(p.length);for(let g=0;g<p.length;++g)d[g]=p.charCodeAt(g)}return function(p){let g=[],m=32*p.length;for(let _=0;_<m;_+=8){let v=p[_>>5]>>>_%32&255,x=parseInt("0123456789abcdef".charAt(v>>>4&15)+"0123456789abcdef".charAt(15&v),16);g.push(x)}return g}(function(p,g){p[g>>5]|=128<<g%32,p[i(g)-1]=g;let m=1732584193,_=-271733879,v=-1732584194,x=271733878;for(let S=0;S<p.length;S+=16){let O=m,D=_,U=v,z=x;m=a(m,_,v,x,p[S],7,-680876936),x=a(x,m,_,v,p[S+1],12,-389564586),v=a(v,x,m,_,p[S+2],17,606105819),_=a(_,v,x,m,p[S+3],22,-1044525330),m=a(m,_,v,x,p[S+4],7,-176418897),x=a(x,m,_,v,p[S+5],12,1200080426),v=a(v,x,m,_,p[S+6],17,-1473231341),_=a(_,v,x,m,p[S+7],22,-45705983),m=a(m,_,v,x,p[S+8],7,1770035416),x=a(x,m,_,v,p[S+9],12,-1958414417),v=a(v,x,m,_,p[S+10],17,-42063),_=a(_,v,x,m,p[S+11],22,-1990404162),m=a(m,_,v,x,p[S+12],7,1804603682),x=a(x,m,_,v,p[S+13],12,-40341101),v=a(v,x,m,_,p[S+14],17,-1502002290),_=a(_,v,x,m,p[S+15],22,1236535329),m=o(m,_,v,x,p[S+1],5,-165796510),x=o(x,m,_,v,p[S+6],9,-1069501632),v=o(v,x,m,_,p[S+11],14,643717713),_=o(_,v,x,m,p[S],20,-373897302),m=o(m,_,v,x,p[S+5],5,-701558691),x=o(x,m,_,v,p[S+10],9,38016083),v=o(v,x,m,_,p[S+15],14,-660478335),_=o(_,v,x,m,p[S+4],20,-405537848),m=o(m,_,v,x,p[S+9],5,568446438),x=o(x,m,_,v,p[S+14],9,-1019803690),v=o(v,x,m,_,p[S+3],14,-187363961),_=o(_,v,x,m,p[S+8],20,1163531501),m=o(m,_,v,x,p[S+13],5,-1444681467),x=o(x,m,_,v,p[S+2],9,-51403784),v=o(v,x,m,_,p[S+7],14,1735328473),_=o(_,v,x,m,p[S+12],20,-1926607734),m=l(m,_,v,x,p[S+5],4,-378558),x=l(x,m,_,v,p[S+8],11,-2022574463),v=l(v,x,m,_,p[S+11],16,1839030562),_=l(_,v,x,m,p[S+14],23,-35309556),m=l(m,_,v,x,p[S+1],4,-1530992060),x=l(x,m,_,v,p[S+4],11,1272893353),v=l(v,x,m,_,p[S+7],16,-155497632),_=l(_,v,x,m,p[S+10],23,-1094730640),m=l(m,_,v,x,p[S+13],4,681279174),x=l(x,m,_,v,p[S],11,-358537222),v=l(v,x,m,_,p[S+3],16,-722521979),_=l(_,v,x,m,p[S+6],23,76029189),m=l(m,_,v,x,p[S+9],4,-640364487),x=l(x,m,_,v,p[S+12],11,-421815835),v=l(v,x,m,_,p[S+15],16,530742520),_=l(_,v,x,m,p[S+2],23,-995338651),m=c(m,_,v,x,p[S],6,-198630844),x=c(x,m,_,v,p[S+7],10,1126891415),v=c(v,x,m,_,p[S+14],15,-1416354905),_=c(_,v,x,m,p[S+5],21,-57434055),m=c(m,_,v,x,p[S+12],6,1700485571),x=c(x,m,_,v,p[S+3],10,-1894986606),v=c(v,x,m,_,p[S+10],15,-1051523),_=c(_,v,x,m,p[S+1],21,-2054922799),m=c(m,_,v,x,p[S+8],6,1873313359),x=c(x,m,_,v,p[S+15],10,-30611744),v=c(v,x,m,_,p[S+6],15,-1560198380),_=c(_,v,x,m,p[S+13],21,1309151649),m=c(m,_,v,x,p[S+4],6,-145523070),x=c(x,m,_,v,p[S+11],10,-1120210379),v=c(v,x,m,_,p[S+2],15,718787259),_=c(_,v,x,m,p[S+9],21,-343485551),m=r(m,O),_=r(_,D),v=r(v,U),x=r(x,z)}return[m,_,v,x]}(function(p){if(p.length===0)return[];let g=8*p.length,m=new Uint32Array(i(g));for(let _=0;_<g;_+=8)m[_>>5]|=(255&p[_/8])<<_%32;return m}(d),8*d.length))};e.default=h},{}],530:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n("./validate.js"))&&i.__esModule?i:{default:i},s=function(a){if(!(0,r.default)(a))throw TypeError("Invalid UUID");let o,l=new Uint8Array(16);return l[0]=(o=parseInt(a.slice(0,8),16))>>>24,l[1]=o>>>16&255,l[2]=o>>>8&255,l[3]=255&o,l[4]=(o=parseInt(a.slice(9,13),16))>>>8,l[5]=255&o,l[6]=(o=parseInt(a.slice(14,18),16))>>>8,l[7]=255&o,l[8]=(o=parseInt(a.slice(19,23),16))>>>8,l[9]=255&o,l[10]=(o=parseInt(a.slice(24,36),16))/1099511627776&255,l[11]=o/4294967296&255,l[12]=o>>>24&255,l[13]=o>>>16&255,l[14]=o>>>8&255,l[15]=255&o,l};e.default=s},{"./validate.js":541}],532:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(n,t,e){"use strict";let i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)};let r=new Uint8Array(16)},{}],534:[function(n,t,e){"use strict";function i(a,o,l,c){switch(a){case 0:return o&l^~o&c;case 1:return o^l^c;case 2:return o&l^o&c^l&c;case 3:return o^l^c}}function r(a,o){return a<<o|a>>>32-o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(a){let o=[1518500249,1859775393,2400959708,3395469782],l=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){let p=unescape(encodeURIComponent(a));a=[];for(let g=0;g<p.length;++g)a.push(p.charCodeAt(g))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);let c=a.length/4+2,h=Math.ceil(c/16),d=new Array(h);for(let p=0;p<h;++p){let g=new Uint32Array(16);for(let m=0;m<16;++m)g[m]=a[64*p+4*m]<<24|a[64*p+4*m+1]<<16|a[64*p+4*m+2]<<8|a[64*p+4*m+3];d[p]=g}d[h-1][14]=8*(a.length-1)/Math.pow(2,32),d[h-1][14]=Math.floor(d[h-1][14]),d[h-1][15]=8*(a.length-1)&4294967295;for(let p=0;p<h;++p){let g=new Uint32Array(80);for(let O=0;O<16;++O)g[O]=d[p][O];for(let O=16;O<80;++O)g[O]=r(g[O-3]^g[O-8]^g[O-14]^g[O-16],1);let m=l[0],_=l[1],v=l[2],x=l[3],S=l[4];for(let O=0;O<80;++O){let D=Math.floor(O/20),U=r(m,5)+i(D,_,v,x)+S+o[D]+g[O]>>>0;S=x,x=v,v=r(_,30)>>>0,_=m,m=U}l[0]=l[0]+m>>>0,l[1]=l[1]+_>>>0,l[2]=l[2]+v>>>0,l[3]=l[3]+x>>>0,l[4]=l[4]+S>>>0}return[l[0]>>24&255,l[0]>>16&255,l[0]>>8&255,255&l[0],l[1]>>24&255,l[1]>>16&255,l[1]>>8&255,255&l[1],l[2]>>24&255,l[2]>>16&255,l[2]>>8&255,255&l[2],l[3]>>24&255,l[3]>>16&255,l[3]>>8&255,255&l[3],l[4]>>24&255,l[4]>>16&255,l[4]>>8&255,255&l[4]]};e.default=s},{}],535:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n("./validate.js"))&&i.__esModule?i:{default:i};let s=[];for(let o=0;o<256;++o)s.push((o+256).toString(16).substr(1));var a=function(o){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=(s[o[l+0]]+s[o[l+1]]+s[o[l+2]]+s[o[l+3]]+"-"+s[o[l+4]]+s[o[l+5]]+"-"+s[o[l+6]]+s[o[l+7]]+"-"+s[o[l+8]]+s[o[l+9]]+"-"+s[o[l+10]]+s[o[l+11]]+s[o[l+12]]+s[o[l+13]]+s[o[l+14]]+s[o[l+15]]).toLowerCase();if(!(0,r.default)(c))throw TypeError("Stringified UUID is invalid");return c};e.default=a},{"./validate.js":541}],536:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("./rng.js")),r=s(n("./stringify.js"));function s(d){return d&&d.__esModule?d:{default:d}}let a,o,l=0,c=0;var h=function(d,p,g){let m=p&&g||0,_=p||new Array(16),v=(d=d||{}).node||a,x=d.clockseq!==void 0?d.clockseq:o;if(v==null||x==null){let V=d.random||(d.rng||i.default)();v==null&&(v=a=[1|V[0],V[1],V[2],V[3],V[4],V[5]]),x==null&&(x=o=16383&(V[6]<<8|V[7]))}let S=d.msecs!==void 0?d.msecs:Date.now(),O=d.nsecs!==void 0?d.nsecs:c+1,D=S-l+(O-c)/1e4;if(D<0&&d.clockseq===void 0&&(x=x+1&16383),(D<0||S>l)&&d.nsecs===void 0&&(O=0),O>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=S,c=O,o=x,S+=122192928e5;let U=(1e4*(268435455&S)+O)%4294967296;_[m++]=U>>>24&255,_[m++]=U>>>16&255,_[m++]=U>>>8&255,_[m++]=255&U;let z=S/4294967296*1e4&268435455;_[m++]=z>>>8&255,_[m++]=255&z,_[m++]=z>>>24&15|16,_[m++]=z>>>16&255,_[m++]=x>>>8|128,_[m++]=255&x;for(let V=0;V<6;++V)_[m+V]=v[V];return p||(0,r.default)(_)};e.default=h},{"./rng.js":533,"./stringify.js":535}],537:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("./v35.js")),r=s(n("./md5.js"));function s(o){return o&&o.__esModule?o:{default:o}}var a=(0,i.default)("v3",48,r.default);e.default=a},{"./md5.js":529,"./v35.js":538}],538:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(l,c,h){function d(p,g,m,_){if(typeof p=="string"&&(p=function(x){x=unescape(encodeURIComponent(x));let S=[];for(let O=0;O<x.length;++O)S.push(x.charCodeAt(O));return S}(p)),typeof g=="string"&&(g=(0,r.default)(g)),g.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let v=new Uint8Array(16+p.length);if(v.set(g),v.set(p,g.length),v=h(v),v[6]=15&v[6]|c,v[8]=63&v[8]|128,m){_=_||0;for(let x=0;x<16;++x)m[_+x]=v[x];return m}return(0,i.default)(v)}try{d.name=l}catch{}return d.DNS=a,d.URL=o,d},e.URL=e.DNS=void 0;var i=s(n("./stringify.js")),r=s(n("./parse.js"));function s(l){return l&&l.__esModule?l:{default:l}}let a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";e.DNS=a;let o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";e.URL=o},{"./parse.js":531,"./stringify.js":535}],539:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("./rng.js")),r=s(n("./stringify.js"));function s(o){return o&&o.__esModule?o:{default:o}}var a=function(o,l,c){let h=(o=o||{}).random||(o.rng||i.default)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,l){c=c||0;for(let d=0;d<16;++d)l[c+d]=h[d];return l}return(0,r.default)(h)};e.default=a},{"./rng.js":533,"./stringify.js":535}],540:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("./v35.js")),r=s(n("./sha1.js"));function s(o){return o&&o.__esModule?o:{default:o}}var a=(0,i.default)("v5",80,r.default);e.default=a},{"./sha1.js":534,"./v35.js":538}],541:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n("./regex.js"))&&i.__esModule?i:{default:i},s=function(a){return typeof a=="string"&&r.default.test(a)};e.default=s},{"./regex.js":532}],542:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n("./validate.js"))&&i.__esModule?i:{default:i},s=function(a){if(!(0,r.default)(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)};e.default=s},{"./validate.js":541}],543:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHAR=`	
\r -\uD7FF\uE000-\uFFFD\u{10000}-\u{10FFFF}`,e.S=` 	\r
`,e.NAME_START_CHAR=":A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u{10000}-\u{EFFFF}",e.NAME_CHAR="-"+e.NAME_START_CHAR+".0-9\xB7\u0300-\u036F\u203F-\u2040",e.CHAR_RE=new RegExp("^["+e.CHAR+"]$","u"),e.S_RE=new RegExp("^["+e.S+"]+$","u"),e.NAME_START_CHAR_RE=new RegExp("^["+e.NAME_START_CHAR+"]$","u"),e.NAME_CHAR_RE=new RegExp("^["+e.NAME_CHAR+"]$","u"),e.NAME_RE=new RegExp("^["+e.NAME_START_CHAR+"]["+e.NAME_CHAR+"]*$","u"),e.NMTOKEN_RE=new RegExp("^["+e.NAME_CHAR+"]+$","u");function i(r){return r>=65&&r<=90||r>=97&&r<=122||r===58||r===95||r===8204||r===8205||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}e.S_LIST=[32,10,13,9],e.isChar=function(r){return r>=32&&r<=55295||r===10||r===13||r===9||r>=57344&&r<=65533||r>=65536&&r<=1114111},e.isS=function(r){return r===32||r===10||r===13||r===9},e.isNameStartChar=i,e.isNameChar=function(r){return i(r)||r>=48&&r<=57||r===45||r===46||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}],544:[function(n,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHAR="-\uD7FF\uE000-\uFFFD\u{10000}-\u{10FFFF}",e.RESTRICTED_CHAR="-\b\v\f-\x7F-\x84\x86-\x9F",e.S=` 	\r
`,e.NAME_START_CHAR=":A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u{10000}-\u{EFFFF}",e.NAME_CHAR="-"+e.NAME_START_CHAR+".0-9\xB7\u0300-\u036F\u203F-\u2040",e.CHAR_RE=new RegExp("^["+e.CHAR+"]$","u"),e.RESTRICTED_CHAR_RE=new RegExp("^["+e.RESTRICTED_CHAR+"]$","u"),e.S_RE=new RegExp("^["+e.S+"]+$","u"),e.NAME_START_CHAR_RE=new RegExp("^["+e.NAME_START_CHAR+"]$","u"),e.NAME_CHAR_RE=new RegExp("^["+e.NAME_CHAR+"]$","u"),e.NAME_RE=new RegExp("^["+e.NAME_START_CHAR+"]["+e.NAME_CHAR+"]*$","u"),e.NMTOKEN_RE=new RegExp("^["+e.NAME_CHAR+"]+$","u");function i(r){return r>=65&&r<=90||r>=97&&r<=122||r===58||r===95||r===8204||r===8205||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}e.S_LIST=[32,10,13,9],e.isChar=function(r){return r>=1&&r<=55295||r>=57344&&r<=65533||r>=65536&&r<=1114111},e.isRestrictedChar=function(r){return r>=1&&r<=8||r===11||r===12||r>=14&&r<=31||r>=127&&r<=132||r>=134&&r<=159},e.isCharAndNotRestricted=function(r){return r===9||r===10||r===13||r>31&&r<127||r===133||r>159&&r<=55295||r>=57344&&r<=65533||r>=65536&&r<=1114111},e.isS=function(r){return r===32||r===10||r===13||r===9},e.isNameStartChar=i,e.isNameChar=function(r){return i(r)||r>=48&&r<=57||r===45||r===46||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}],545:[function(n,t,e){"use strict";function i(r){return r>=65&&r<=90||r===95||r>=97&&r<=122||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8204&&r<=8205||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}Object.defineProperty(e,"__esModule",{value:!0}),e.NC_NAME_START_CHAR="A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u{10000}-\u{EFFFF}",e.NC_NAME_CHAR="-"+e.NC_NAME_START_CHAR+".0-9\xB7\u0300-\u036F\u203F-\u2040",e.NC_NAME_START_CHAR_RE=new RegExp("^["+e.NC_NAME_START_CHAR+"]$","u"),e.NC_NAME_CHAR_RE=new RegExp("^["+e.NC_NAME_CHAR+"]$","u"),e.NC_NAME_RE=new RegExp("^["+e.NC_NAME_START_CHAR+"]["+e.NC_NAME_CHAR+"]*$","u"),e.isNCNameStartChar=i,e.isNCNameChar=function(r){return i(r)||r===45||r===46||r>=48&&r<=57||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}]},{},[15])(15)})});var Dr=Mi(Jn()),AH=Mi(Ap()),NH=Mi(Np());var Cs=Jn();Cs.Control.Coordinates=Cs.Control.extend({options:{position:"bottomleft",latitudeText:"lat.",longitudeText:"lon.",promptText:"Press Ctrl+C to copy coordinates",precision:4},initialize:function(n){Cs.Control.prototype.initialize.call(this,n)},onAdd:function(n){var t="leaflet-control-coordinates",e=this,i=this._container=Cs.DomUtil.create("div",t);return this.visible=!1,Cs.DomUtil.addClass(i,"hidden"),Cs.DomEvent.disableClickPropagation(i),this._addText(i,n),Cs.DomEvent.addListener(i,"click",function(){var r=Cs.DomUtil.get(e._lat),s=Cs.DomUtil.get(e._lng),a=this.options.latitudeText.length+1,o=this.options.longitudeText.length+1,l=r.textContent.indexOf(this.options.latitudeText)+a,c=s.textContent.indexOf(this.options.longitudeText)+o,h=r.textContent.substr(l),d=s.textContent.substr(c);window.prompt(this.options.promptText,h+" "+d)},this),i},_addText:function(n,t){return this._lat=Cs.DomUtil.create("span","leaflet-control-coordinates-lat",n),this._lng=Cs.DomUtil.create("span","leaflet-control-coordinates-lng",n),n},setCoordinates:function(n){this.visible||Cs.DomUtil.removeClass(this._container,"hidden"),n.latlng&&(Cs.DomUtil.get(this._lat).innerHTML="<strong>"+this.options.latitudeText+":</strong> "+n.latlng.lat.toFixed(this.options.precision).toString(),Cs.DomUtil.get(this._lng).innerHTML="<strong>"+this.options.longitudeText+":</strong> "+n.latlng.lng.toFixed(this.options.precision).toString())}});(()=>{var n={9705:(i,r,s)=>{"use strict";var a=s(1540);function o(l){var c=[1/0,1/0,-1/0,-1/0];return a.coordEach(l,function(h){c[0]>h[0]&&(c[0]=h[0]),c[1]>h[1]&&(c[1]=h[1]),c[2]<h[0]&&(c[2]=h[0]),c[3]<h[1]&&(c[3]=h[1])}),c}o.default=o,r.Z=o},4102:(i,r)=>{"use strict";function s(x,S,O){O===void 0&&(O={});var D={type:"Feature"};return(O.id===0||O.id)&&(D.id=O.id),O.bbox&&(D.bbox=O.bbox),D.properties=S||{},D.geometry=x,D}function a(x,S,O){if(O===void 0&&(O={}),!x)throw new Error("coordinates is required");if(!Array.isArray(x))throw new Error("coordinates must be an Array");if(x.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!v(x[0])||!v(x[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:x},S,O)}function o(x,S,O){O===void 0&&(O={});for(var D=0,U=x;D<U.length;D++){var z=U[D];if(z.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var V=0;V<z[z.length-1].length;V++)if(z[z.length-1][V]!==z[0][V])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:x},S,O)}function l(x,S,O){if(O===void 0&&(O={}),x.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:x},S,O)}function c(x,S){S===void 0&&(S={});var O={type:"FeatureCollection"};return S.id&&(O.id=S.id),S.bbox&&(O.bbox=S.bbox),O.features=x,O}function h(x,S,O){return O===void 0&&(O={}),s({type:"MultiLineString",coordinates:x},S,O)}function d(x,S,O){return O===void 0&&(O={}),s({type:"MultiPoint",coordinates:x},S,O)}function p(x,S,O){return O===void 0&&(O={}),s({type:"MultiPolygon",coordinates:x},S,O)}function g(x,S){S===void 0&&(S="kilometers");var O=r.factors[S];if(!O)throw new Error(S+" units is invalid");return x*O}function m(x,S){S===void 0&&(S="kilometers");var O=r.factors[S];if(!O)throw new Error(S+" units is invalid");return x/O}function _(x){return 180*(x%(2*Math.PI))/Math.PI}function v(x){return!isNaN(x)&&x!==null&&!Array.isArray(x)}Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=63710088e-1,r.factors={centimeters:100*r.earthRadius,centimetres:100*r.earthRadius,degrees:r.earthRadius/111325,feet:3.28084*r.earthRadius,inches:39.37*r.earthRadius,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:1e3*r.earthRadius,millimetres:1e3*r.earthRadius,nauticalmiles:r.earthRadius/1852,radians:1,yards:1.0936*r.earthRadius},r.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/r.earthRadius,yards:1.0936133},r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},r.feature=s,r.geometry=function(x,S,O){switch(O===void 0&&(O={}),x){case"Point":return a(S).geometry;case"LineString":return l(S).geometry;case"Polygon":return o(S).geometry;case"MultiPoint":return d(S).geometry;case"MultiLineString":return h(S).geometry;case"MultiPolygon":return p(S).geometry;default:throw new Error(x+" is invalid")}},r.point=a,r.points=function(x,S,O){return O===void 0&&(O={}),c(x.map(function(D){return a(D,S)}),O)},r.polygon=o,r.polygons=function(x,S,O){return O===void 0&&(O={}),c(x.map(function(D){return o(D,S)}),O)},r.lineString=l,r.lineStrings=function(x,S,O){return O===void 0&&(O={}),c(x.map(function(D){return l(D,S)}),O)},r.featureCollection=c,r.multiLineString=h,r.multiPoint=d,r.multiPolygon=p,r.geometryCollection=function(x,S,O){return O===void 0&&(O={}),s({type:"GeometryCollection",geometries:x},S,O)},r.round=function(x,S){if(S===void 0&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var O=Math.pow(10,S||0);return Math.round(x*O)/O},r.radiansToLength=g,r.lengthToRadians=m,r.lengthToDegrees=function(x,S){return _(m(x,S))},r.bearingToAzimuth=function(x){var S=x%360;return S<0&&(S+=360),S},r.radiansToDegrees=_,r.degreesToRadians=function(x){return x%360*Math.PI/180},r.convertLength=function(x,S,O){if(S===void 0&&(S="kilometers"),O===void 0&&(O="kilometers"),!(x>=0))throw new Error("length must be a positive number");return g(m(x,S),O)},r.convertArea=function(x,S,O){if(S===void 0&&(S="meters"),O===void 0&&(O="kilometers"),!(x>=0))throw new Error("area must be a positive number");var D=r.areaFactors[S];if(!D)throw new Error("invalid original units");var U=r.areaFactors[O];if(!U)throw new Error("invalid final units");return x/D*U},r.isNumber=v,r.isObject=function(x){return!!x&&x.constructor===Object},r.validateBBox=function(x){if(!x)throw new Error("bbox is required");if(!Array.isArray(x))throw new Error("bbox must be an Array");if(x.length!==4&&x.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");x.forEach(function(S){if(!v(S))throw new Error("bbox must only contain numbers")})},r.validateId=function(x){if(!x)throw new Error("id is required");if(["string","number"].indexOf(typeof x)===-1)throw new Error("id must be a number or a string")}},1540:(i,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=s(4102);function o(m,_,v){if(m!==null)for(var x,S,O,D,U,z,V,G,tt=0,K=0,B=m.type,N=B==="FeatureCollection",Z=B==="Feature",w=N?m.features.length:1,C=0;C<w;C++){U=(G=!!(V=N?m.features[C].geometry:Z?m.geometry:m)&&V.type==="GeometryCollection")?V.geometries.length:1;for(var k=0;k<U;k++){var T=0,R=0;if((D=G?V.geometries[k]:V)!==null){z=D.coordinates;var F=D.type;switch(tt=!v||F!=="Polygon"&&F!=="MultiPolygon"?0:1,F){case null:break;case"Point":if(_(z,K,C,T,R)===!1)return!1;K++,T++;break;case"LineString":case"MultiPoint":for(x=0;x<z.length;x++){if(_(z[x],K,C,T,R)===!1)return!1;K++,F==="MultiPoint"&&T++}F==="LineString"&&T++;break;case"Polygon":case"MultiLineString":for(x=0;x<z.length;x++){for(S=0;S<z[x].length-tt;S++){if(_(z[x][S],K,C,T,R)===!1)return!1;K++}F==="MultiLineString"&&T++,F==="Polygon"&&R++}F==="Polygon"&&T++;break;case"MultiPolygon":for(x=0;x<z.length;x++){for(R=0,S=0;S<z[x].length;S++){for(O=0;O<z[x][S].length-tt;O++){if(_(z[x][S][O],K,C,T,R)===!1)return!1;K++}R++}T++}break;case"GeometryCollection":for(x=0;x<D.geometries.length;x++)if(o(D.geometries[x],_,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(m,_){var v;switch(m.type){case"FeatureCollection":for(v=0;v<m.features.length&&_(m.features[v].properties,v)!==!1;v++);break;case"Feature":_(m.properties,0)}}function c(m,_){if(m.type==="Feature")_(m,0);else if(m.type==="FeatureCollection")for(var v=0;v<m.features.length&&_(m.features[v],v)!==!1;v++);}function h(m,_){var v,x,S,O,D,U,z,V,G,tt,K=0,B=m.type==="FeatureCollection",N=m.type==="Feature",Z=B?m.features.length:1;for(v=0;v<Z;v++){for(U=B?m.features[v].geometry:N?m.geometry:m,V=B?m.features[v].properties:N?m.properties:{},G=B?m.features[v].bbox:N?m.bbox:void 0,tt=B?m.features[v].id:N?m.id:void 0,D=(z=!!U&&U.type==="GeometryCollection")?U.geometries.length:1,S=0;S<D;S++)if((O=z?U.geometries[S]:U)!==null)switch(O.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_(O,K,V,G,tt)===!1)return!1;break;case"GeometryCollection":for(x=0;x<O.geometries.length;x++)if(_(O.geometries[x],K,V,G,tt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_(null,K,V,G,tt)===!1)return!1;K++}}function d(m,_){h(m,function(v,x,S,O,D){var U,z=v===null?null:v.type;switch(z){case null:case"Point":case"LineString":case"Polygon":return _(a.feature(v,S,{bbox:O,id:D}),x,0)!==!1&&void 0}switch(z){case"MultiPoint":U="Point";break;case"MultiLineString":U="LineString";break;case"MultiPolygon":U="Polygon"}for(var V=0;V<v.coordinates.length;V++){var G={type:U,coordinates:v.coordinates[V]};if(_(a.feature(G,S),x,V)===!1)return!1}})}function p(m,_){d(m,function(v,x,S){var O=0;if(v.geometry){var D=v.geometry.type;if(D!=="Point"&&D!=="MultiPoint"){var U,z=0,V=0,G=0;return o(v,function(tt,K,B,N,Z){if(U===void 0||x>z||N>V||Z>G)return U=tt,z=x,V=N,G=Z,void(O=0);var w=a.lineString([U,tt],v.properties);if(_(w,x,S,Z,O)===!1)return!1;O++,U=tt})!==!1&&void 0}}})}function g(m,_){if(!m)throw new Error("geojson is required");d(m,function(v,x,S){if(v.geometry!==null){var O=v.geometry.type,D=v.geometry.coordinates;switch(O){case"LineString":if(_(v,x,S,0,0)===!1)return!1;break;case"Polygon":for(var U=0;U<D.length;U++)if(_(a.lineString(D[U],v.properties),x,S,U)===!1)return!1}}})}r.coordAll=function(m){var _=[];return o(m,function(v){_.push(v)}),_},r.coordEach=o,r.coordReduce=function(m,_,v,x){var S=v;return o(m,function(O,D,U,z,V){S=D===0&&v===void 0?O:_(S,O,D,U,z,V)},x),S},r.featureEach=c,r.featureReduce=function(m,_,v){var x=v;return c(m,function(S,O){x=O===0&&v===void 0?S:_(x,S,O)}),x},r.findPoint=function(m,_){if(_=_||{},!a.isObject(_))throw new Error("options is invalid");var v,x=_.featureIndex||0,S=_.multiFeatureIndex||0,O=_.geometryIndex||0,D=_.coordIndex||0,U=_.properties;switch(m.type){case"FeatureCollection":x<0&&(x=m.features.length+x),U=U||m.features[x].properties,v=m.features[x].geometry;break;case"Feature":U=U||m.properties,v=m.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":v=m;break;default:throw new Error("geojson is invalid")}if(v===null)return null;var z=v.coordinates;switch(v.type){case"Point":return a.point(z,U,_);case"MultiPoint":return S<0&&(S=z.length+S),a.point(z[S],U,_);case"LineString":return D<0&&(D=z.length+D),a.point(z[D],U,_);case"Polygon":return O<0&&(O=z.length+O),D<0&&(D=z[O].length+D),a.point(z[O][D],U,_);case"MultiLineString":return S<0&&(S=z.length+S),D<0&&(D=z[S].length+D),a.point(z[S][D],U,_);case"MultiPolygon":return S<0&&(S=z.length+S),O<0&&(O=z[S].length+O),D<0&&(D=z[S][O].length-D),a.point(z[S][O][D],U,_)}throw new Error("geojson is invalid")},r.findSegment=function(m,_){if(_=_||{},!a.isObject(_))throw new Error("options is invalid");var v,x=_.featureIndex||0,S=_.multiFeatureIndex||0,O=_.geometryIndex||0,D=_.segmentIndex||0,U=_.properties;switch(m.type){case"FeatureCollection":x<0&&(x=m.features.length+x),U=U||m.features[x].properties,v=m.features[x].geometry;break;case"Feature":U=U||m.properties,v=m.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":v=m;break;default:throw new Error("geojson is invalid")}if(v===null)return null;var z=v.coordinates;switch(v.type){case"Point":case"MultiPoint":return null;case"LineString":return D<0&&(D=z.length+D-1),a.lineString([z[D],z[D+1]],U,_);case"Polygon":return O<0&&(O=z.length+O),D<0&&(D=z[O].length+D-1),a.lineString([z[O][D],z[O][D+1]],U,_);case"MultiLineString":return S<0&&(S=z.length+S),D<0&&(D=z[S].length+D-1),a.lineString([z[S][D],z[S][D+1]],U,_);case"MultiPolygon":return S<0&&(S=z.length+S),O<0&&(O=z[S].length+O),D<0&&(D=z[S][O].length-D-1),a.lineString([z[S][O][D],z[S][O][D+1]],U,_)}throw new Error("geojson is invalid")},r.flattenEach=d,r.flattenReduce=function(m,_,v){var x=v;return d(m,function(S,O,D){x=O===0&&D===0&&v===void 0?S:_(x,S,O,D)}),x},r.geomEach=h,r.geomReduce=function(m,_,v){var x=v;return h(m,function(S,O,D,U,z){x=O===0&&v===void 0?S:_(x,S,O,D,U,z)}),x},r.lineEach=g,r.lineReduce=function(m,_,v){var x=v;return g(m,function(S,O,D,U){x=O===0&&v===void 0?S:_(x,S,O,D,U)}),x},r.propEach=l,r.propReduce=function(m,_,v){var x=v;return l(m,function(S,O){x=O===0&&v===void 0?S:_(x,S,O)}),x},r.segmentEach=p,r.segmentReduce=function(m,_,v){var x=v,S=!1;return p(m,function(O,D,U,z,V){x=S===!1&&v===void 0?O:_(x,O,D,U,z,V),S=!0}),x}},5975:(i,r,s)=>{"use strict";s(7107);var a=s(2492),o=s.n(a);let l=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),c=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xF6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xF6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xFCpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"L\xE4nge","segmentLength":"Segment L\xE4nge","area":"Fl\xE4che","radius":"Radius","perimeter":"Umfang","height":"H\xF6he","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),h=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),d=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),p=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri","pinningButton":"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103"}}'),g=JSON.parse('{"tooltips":{"placeMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442","continueLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435","finishLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F","finishPoly":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","finishRect":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","startCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","cancel":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C","removeLastVertex":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D","drawLineButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E","drawCircleButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439","cutButton":"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439","deleteButton":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439","drawCircleMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C","pinningButton":"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435"}}'),m=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xE9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del c\xEDrculo","finishCircle":"Presiona para finalizar el c\xEDrculo","placeCircleMarker":"Presiona para colocar un marcador de c\xEDrculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xEDgono","drawLineButton":"Dibujar L\xEDnea","drawCircleButton":"Dibujar C\xEDrculo","drawRectButton":"Dibujar Rect\xE1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de C\xEDrculo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xE9rtices","pinningButton":"Fijar juntos los v\xE9rtices compartidos"}}'),_=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xEBindigen","finishPoly":"Klik op het eerst punt om te be\xEBindigen","finishRect":"Klik om te be\xEBindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xEBindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),v=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xE0 dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xC9diter des calques","dragButton":"D\xE9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"\xC9pingler ensemble les sommets partag\xE9s","rotateButton":"Tourner des calques"}}`),x=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0","firstVertex":"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9","continueLine":"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236","finishLine":"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210","finishPoly":"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210","finishRect":"\u5355\u51FB\u5B8C\u6210","startCircle":"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3","finishCircle":"\u5355\u51FB\u5B8C\u6210\u5706\u5F62","placeCircleMarker":"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},"buttonTitles":{"drawMarkerButton":"\u7ED8\u5236\u6807\u8BB0","drawPolyButton":"\u7ED8\u5236\u591A\u8FB9\u5F62","drawLineButton":"\u7ED8\u5236\u7EBF\u6BB5","drawCircleButton":"\u7ED8\u5236\u5706\u5F62","drawRectButton":"\u7ED8\u5236\u957F\u65B9\u5F62","editButton":"\u7F16\u8F91\u56FE\u5C42","dragButton":"\u62D6\u62FD\u56FE\u5C42","cutButton":"\u526A\u5207\u56FE\u5C42","deleteButton":"\u5220\u9664\u56FE\u5C42","drawCircleMarkerButton":"\u753B\u5706\u5708\u6807\u8BB0","snappingButton":"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9","pinningButton":"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),S=JSON.parse('{"tooltips":{"placeMarker":"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18","firstVertex":"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE","continueLine":"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD","finishLine":"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210","finishPoly":"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210","finishRect":"\u55AE\u64CA\u5B8C\u6210","startCircle":"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3","finishCircle":"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62","placeCircleMarker":"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},"buttonTitles":{"drawMarkerButton":"\u653E\u7F6E\u6A19\u8A18","drawPolyButton":"\u7E6A\u88FD\u591A\u908A\u5F62","drawLineButton":"\u7E6A\u88FD\u7DDA\u6BB5","drawCircleButton":"\u7E6A\u88FD\u5713\u5F62","drawRectButton":"\u7E6A\u88FD\u65B9\u5F62","editButton":"\u7DE8\u8F2F\u5716\u5F62","dragButton":"\u79FB\u52D5\u5716\u5F62","cutButton":"\u88C1\u5207\u5716\u5F62","deleteButton":"\u522A\u9664\u5716\u5F62","drawCircleMarkerButton":"\u756B\u5713\u5708\u6A19\u8A18","snappingButton":"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE","pinningButton":"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),O={en:l,de:c,it:h,id:d,ro:p,ru:g,es:m,nl:_,fr:v,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xE9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xEDgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xEDrculo","finishCircle":"Clique para fechar o c\xEDrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xEDgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xEDrculo","drawRectButton":"Desenhar um ret\xE2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xEDrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xE9rtices","pinningButton":"V\xE9rtices compartilhados de pinos juntos"}}'),zh:x,zh_tw:S,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi\u0107 znacznik","firstVertex":"Kliknij, aby ustawi\u0107 pierwszy punkt","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny punkt, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy punkt, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby ustawi\u0107 \u015Brodek ko\u0142a","finishCircle":"Kliknij, aby zako\u0144czy\u0107 rysowanie ko\u0142a","placeCircleMarker":"Kliknij, aby ustawi\u0107 okr\u0105g\u0142y znacznik"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielok\u0105t","drawLineButton":"Narysuj \u015Bcie\u017Ck\u0119","drawCircleButton":"Narysuj ko\u0142o","drawRectButton":"Narysuj prostok\u0105t","editButton":"Edytuj","dragButton":"Przesu\u0144","cutButton":"Wytnij","deleteButton":"Usu\u0144","drawCircleMarkerButton":"Narysuj okr\u0105g\u0142y znacznik","snappingButton":"Snap przeci\u0105gni\u0119ty marker na inne warstwy i wierzcho\u0142ki","pinningButton":"Sworze\u0144 wsp\xF3lne wierzcho\u0142ki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xF6r att placera mark\xF6r","firstVertex":"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet","continueLine":"Klicka f\xF6r att forts\xE4tta rita","finishLine":"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra","finishPoly":"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra","finishRect":"Klicka f\xF6r att slutf\xF6ra","startCircle":"Klicka f\xF6r att placera cirkelns centrum","finishCircle":"Klicka f\xF6r att slutf\xF6ra cirkeln","placeCircleMarker":"Klicka f\xF6r att placera cirkelmark\xF6r"},"actions":{"finish":"Slutf\xF6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xF6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xF6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xF6r","snappingButton":"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn","pinningButton":"F\xE4st delade h\xF6rn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","firstVertex":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF","continueLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5","finishLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF","finishPoly":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","finishRect":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","startCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","finishCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF","placeCircleMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},"actions":{"finish":"\u03A4\u03AD\u03BB\u03BF\u03C2","cancel":"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7","removeLastVertex":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},"buttonTitles":{"drawMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","drawPolyButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5","drawLineButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2","drawCircleButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","drawRectButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5","editButton":"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","dragButton":"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","cutButton":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","deleteButton":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","drawCircleMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","snappingButton":"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2","pinningButton":"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez","continueLine":"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez","finishLine":"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra","finishPoly":"A befejez\xE9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xE9shez","startCircle":"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez","finishCircle":"Kattintson a k\xF6r befejez\xE9s\xE9hez","placeCircleMarker":"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},"actions":{"finish":"Befejez\xE9s","cancel":"M\xE9gse","removeLastVertex":"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xF6l\u0151 rajzol\xE1sa","drawPolyButton":"Poligon rajzol\xE1sa","drawLineButton":"Vonal rajzol\xE1sa","drawCircleButton":"K\xF6r rajzol\xE1sa","drawRectButton":"N\xE9gyzet rajzol\xE1sa","editButton":"Elemek szerkeszt\xE9se","dragButton":"Elemek mozgat\xE1sa","cutButton":"Elemek v\xE1g\xE1sa","deleteButton":"Elemek t\xF6rl\xE9se","drawCircleMarkerButton":"K\xF6r jel\xF6l\u0151 rajzol\xE1sa","snappingButton":"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz","pinningButton":"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xF8r","firstVertex":"Tryk for at placere det f\xF8rste punkt","continueLine":"Tryk for at forts\xE6tte linjen","finishLine":"Tryk p\xE5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xE5 det f\xF8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xF8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xF8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xE6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xF8r","snappingButton":"Fastg\xF8r trukket mark\xF8r til andre elementer","pinningButton":"Sammenl\xE6g delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xE5 plassere punkt","firstVertex":"Klikk for \xE5 plassere f\xF8rste punkt","continueLine":"Klikk for \xE5 tegne videre","finishLine":"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re","finishPoly":"Klikk f\xF8rste punkt for \xE5 fullf\xF8re","finishRect":"Klikk for \xE5 fullf\xF8re","startCircle":"Klikk for \xE5 sette sirkel midtpunkt","finishCircle":"Klikk for \xE5 fullf\xF8re sirkel","placeCircleMarker":"Klikk for \xE5 plassere sirkel"},"actions":{"finish":"Fullf\xF8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646","firstVertex":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633","continueLine":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishPoly":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishRect":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","startCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647","finishCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","placeCircleMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","placeText":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0646\u0648\u0634\u062A\u0646 \u0645\u062A\u0646"},"actions":{"finish":"\u067E\u0627\u06CC\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062F\u0631\u062C \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC","drawLineButton":"\u0631\u0633\u0645 \u062E\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC","editButton":"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","dragButton":"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","deleteButton":"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F","rotateButton":"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647","drawTextButton":"\u0631\u0633\u0645 \u0645\u062A\u0646"}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443","continueLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438","finishLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430","finishCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E","placeCircleMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},"buttonTitles":{"drawMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D","drawLineButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443","drawCircleButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E","drawRectButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D","pinningButton":"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C"}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","continueLine":"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xE7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xE7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xF6\u015Feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xC7izim \u0130\u015Faret\xE7isi","drawPolyButton":"\xC7okgenler \xE7iz","drawLineButton":"\xC7oklu \xE7izgi \xE7iz","drawCircleButton":"\xC7ember \xE7iz","drawRectButton":"Dikd\xF6rtgen \xE7iz","editButton":"Katmanlar\u0131 d\xFCzenle","dragButton":"Katmanlar\u0131 s\xFCr\xFCkle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015Faret\xE7isi \xE7iz","snappingButton":"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r","pinningButton":"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku","firstVertex":"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt","continueLine":"Kliknut\xEDm pokra\u010Dujte v kreslen\xED","finishLine":"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED","finishPoly":"Vyberte prvn\xED bod pro dokon\u010Den\xED","finishRect":"Klikn\u011Bte pro dokon\u010Den\xED","startCircle":"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xEDm nastavte polom\u011Br"},"actions":{"finish":"Dokon\u010Dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xED akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010Dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xE9ln\xEDk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010Dku","snappingButton":"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm","pinningButton":"Spojit spole\u010Dn\xE9 body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","firstVertex":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u6700\u521D\u306E\u9802\u70B9\u3092\u914D\u7F6E","continueLine":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u63CF\u753B\u3092\u7D9A\u3051\u308B","finishLine":"\u4EFB\u610F\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishPoly":"\u6700\u521D\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishRect":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","startCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u4E2D\u5FC3\u3092\u914D\u7F6E","finishCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u63CF\u753B\u3092\u7D42\u4E86","placeCircleMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","placeText":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30C6\u30AD\u30B9\u30C8\u3092\u914D\u7F6E"},"actions":{"finish":"\u7D42\u4E86","cancel":"\u30AD\u30E3\u30F3\u30BB\u30EB","removeLastVertex":"\u6700\u5F8C\u306E\u9802\u70B9\u3092\u524A\u9664"},"buttonTitles":{"drawMarkerButton":"\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","drawPolyButton":"\u30DD\u30EA\u30B4\u30F3\u3092\u63CF\u753B","drawLineButton":"\u6298\u308C\u7DDA\u3092\u63CF\u753B","drawCircleButton":"\u5186\u3092\u63CF\u753B","drawRectButton":"\u77E9\u5F62\u3092\u63CF\u753B","editButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u7DE8\u96C6","dragButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u30C9\u30E9\u30C3\u30B0","cutButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u5207\u308A\u53D6\u308A","deleteButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u524A\u9664","drawCircleMarkerButton":"\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","snappingButton":"\u30C9\u30E9\u30C3\u30B0\u3057\u305F\u30DE\u30FC\u30AB\u30FC\u3092\u4ED6\u306E\u30EC\u30A4\u30E4\u30FC\u3084\u9802\u70B9\u306B\u30B9\u30CA\u30C3\u30D7\u3059\u308B","pinningButton":"\u5171\u6709\u3059\u308B\u9802\u70B9\u3092\u540C\u6642\u306B\u52D5\u304B\u3059","rotateButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u56DE\u8EE2","drawTextButton":"\u30C6\u30AD\u30B9\u30C8\u3092\u63CF\u753B"}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimm\xE4isen osuuden","continueLine":"Klikkaa jatkaaksesi piirt\xE4mist\xE4","finishLine":"Klikkaa olemassa olevaa merkki\xE4 lopettaaksesi","finishPoly":"Klikkaa ensimm\xE4ist\xE4 merkki\xE4 lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyr\xE4n keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyr\xE4n","placeCircleMarker":"Klikkaa asettaaksesi ympyr\xE4merkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirr\xE4 merkkej\xE4","drawPolyButton":"Piirr\xE4 monikulmioita","drawLineButton":"Piirr\xE4 viivoja","drawCircleButton":"Piirr\xE4 ympyr\xE4","drawRectButton":"Piirr\xE4 neliskulmioita","editButton":"Muokkaa","dragButton":"Siirr\xE4","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirr\xE4 ympyr\xE4merkki","snappingButton":"Kiinnit\xE4 siirrett\xE4v\xE4 merkki toisiin muotoihin","pinningButton":"Kiinnit\xE4 jaetut muodot yhteen","rotateButton":"K\xE4\xE4nn\xE4","drawTextButton":"Piirr\xE4 teksti\xE4"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"\uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","firstVertex":"\uCCAB\uBC88\uC9F8 \uAF2D\uC9C0\uC810 \uC704\uCE58\uC744 \uD074\uB9AD\uD558\uC138\uC694","continueLine":"\uACC4\uC18D \uADF8\uB9AC\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","finishLine":"\uB05D\uB0B4\uB824\uBA74 \uAE30\uC874 \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishPoly":"\uB05D\uB0B4\uB824\uBA74 \uCC98\uC74C \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishRect":"\uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","startCircle":"\uC6D0\uC758 \uC911\uC2EC\uC774 \uB420 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishCircle":"\uC6D0\uC744 \uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","placeCircleMarker":"\uC6D0 \uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","placeText":"\uD14D\uC2A4\uD2B8 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694"},"actions":{"finish":"\uB05D\uB0B4\uAE30","cancel":"\uCDE8\uC18C","removeLastVertex":"\uB9C8\uC9C0\uB9C9 \uAF2D\uC9C0\uC810 \uC81C\uAC70"},"buttonTitles":{"drawMarkerButton":"\uB9C8\uCEE4 \uADF8\uB9AC\uAE30","drawPolyButton":"\uB2E4\uAC01\uD615 \uADF8\uB9AC\uAE30","drawLineButton":"\uB2E4\uAC01\uC120 \uADF8\uB9AC\uAE30","drawCircleButton":"\uC6D0 \uADF8\uB9AC\uAE30","drawRectButton":"\uC9C1\uC0AC\uAC01\uD615 \uADF8\uB9AC\uAE30","editButton":"\uB808\uC774\uC5B4 \uD3B8\uC9D1\uD558\uAE30","dragButton":"\uB808\uC774\uC5B4 \uB04C\uAE30","cutButton":"\uB808\uC774\uC5B4 \uC790\uB974\uAE30","deleteButton":"\uB808\uC774\uC5B4 \uC81C\uAC70\uD558\uAE30","drawCircleMarkerButton":"\uC6D0 \uB9C8\uCEE4 \uADF8\uB9AC\uAE30","snappingButton":"\uC7A1\uC544\uB048 \uB9C8\uCEE4\uB97C \uB2E4\uB978 \uB808\uC774\uC5B4 \uBC0F \uAF2D\uC9C0\uC810\uC5D0 \uB4E4\uB7EC\uBD99\uAC8C \uD558\uAE30","pinningButton":"\uACF5\uC720 \uAF2D\uC9C0\uC810\uC744 \uD568\uAED8 \uCC0D\uAE30","rotateButton":"\uB808\uC774\uC5B4 \uD68C\uC804\uD558\uAE30","drawTextButton":"\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30"}}')};function D(M,I){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);I&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function U(M){for(var I=1;I<arguments.length;I++){var j=arguments[I]!=null?arguments[I]:{};I%2?D(Object(j),!0).forEach(function(nt){z(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):D(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function z(M,I,j){return I in M?Object.defineProperty(M,I,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[I]=j,M}let V={_globalEditModeEnabled:!1,enableGlobalEditMode:function(M){var I=U({},M);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(j){j.pm.enable(I)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(M){M.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(M)},handleLayerAdditionInGlobalEditMode:function(){var M=this._addedLayers;for(var I in this._addedLayers={},M){var j=M[I];this._isRelevantForEdit(j)&&this.globalEditModeEnabled()&&j.pm.enable(U({},this.globalOptions))}},_layerAdded:function(M){var I=M.layer;this._addedLayers[L.stamp(I)]=I},_isRelevantForEdit:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.allowEditing}},G={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var M=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},M.forEach(function(I){I.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var M=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,M.forEach(function(I){I.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var M=this._addedLayersDrag;for(var I in this._addedLayersDrag={},M){var j=M[I];this._isRelevantForDrag(j)&&this.globalDragModeEnabled()&&j.pm.enableLayerDrag()}},_layerAddedDrag:function(M){var I=M.layer;this._addedLayersDrag[L.stamp(I)]=I},_isRelevantForDrag:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.draggable}},tt={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var M=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(I){M._isRelevantForRemoval(I)&&(I.pm.disable(),I.on("click",M.removeLayer,M))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var M=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(I){I.off("click",M.removeLayer,M)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(M){var I=M.layer;this._isRelevantForRemoval(I)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(M){var I=M.target;this._isRelevantForRemoval(I)&&!I.pm.dragging()&&(I.removeFrom(this.map.pm._getContainingLayer()),I.remove(),I instanceof L.LayerGroup?(this._fireRemoveLayerGroup(I),this._fireRemoveLayerGroup(this.map,I)):(I.pm._fireRemove(I),I.pm._fireRemove(this.map,I)))},_isRelevantForRemoval:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.allowRemoval}},K={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var M=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(I){return I instanceof L.Polyline}).forEach(function(I){M._isRelevantForRotate(I)&&I.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(M){return M instanceof L.Polyline}).forEach(function(M){M.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(M){var I=M.layer;this._isRelevantForRotate(I)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.allowRotation}};function B(M,I){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);I&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function N(M){for(var I=1;I<arguments.length;I++){var j=arguments[I]!=null?arguments[I]:{};I%2?B(Object(j),!0).forEach(function(nt){Z(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):B(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Z(M,I,j){return I in M?Object.defineProperty(M,I,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[I]=j,M}var w={_fireDrawStart:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},M,I)},_fireDrawEnd:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},M,I)},_fireCreate:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:M,layer:M},I,j)},_fireCenterPlaced:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=M==="Draw"?this._layer:void 0,nt=M!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:j,layer:nt,latlng:this._layer.getLatLng()},M,I)},_fireCut:function(M,I,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(M,"pm:cut",{shape:this._shape,layer:I,originalLayer:j},nt,ht)},_fireEdit:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(M,"pm:edit",{layer:this._layer,shape:this.getShape()},I,j)},_fireEnable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},M,I)},_fireDisable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},M,I)},_fireUpdate:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},M,I)},_fireMarkerDragStart:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:M,shape:this.getShape(),indexPath:I},j,nt)},_fireMarkerDrag:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:M,shape:this.getShape(),indexPath:I},j,nt)},_fireMarkerDragEnd:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:M,shape:this.getShape(),indexPath:I,intersectionReset:j},nt,ht)},_fireDragStart:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},M,I)},_fireDrag:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",N(N({},M),{},{shape:this.getShape()}),I,j)},_fireDragEnd:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},M,I)},_fireDragEnable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},M,I)},_fireDragDisable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},M,I)},_fireRemove:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:remove",{layer:I,shape:this.getShape()},j,nt)},_fireVertexAdded:function(M,I,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:M,indexPath:I,latlng:j,shape:this.getShape()},nt,ht)},_fireVertexRemoved:function(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:M,indexPath:I,shape:this.getShape()},j,nt)},_fireVertexClick:function(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:M,indexPath:I,shape:this.getShape()},j,nt)},_fireIntersect:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:M,shape:this.getShape()},I,j)},_fireLayerReset:function(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:M,indexPath:I,shape:this.getShape()},j,nt)},_fireChange:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:M,shape:this.getShape()},I,j)},_fireTextChange:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:M,shape:this.getShape()},I,j)},_fireTextFocus:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},M,I)},_fireTextBlur:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},M,I)},_fireSnapDrag:function(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:snapdrag",I,j,nt)},_fireSnap:function(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:snap",I,j,nt)},_fireUnsnap:function(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:unsnap",I,j,nt)},_fireRotationEnable:function(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},j,nt)},_fireRotationDisable:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(M,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},I,j)},_fireRotationStart:function(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:I},j,nt)},_fireRotation:function(M,I,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",xt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(M,"pm:rotate",{layer:nt,helpLayer:this._layer,startAngle:this._startAngle,angle:nt.pm.getAngle(),angleDiff:I,oldLatLngs:j,newLatLngs:nt.getLatLngs()},ht,xt)},_fireRotationEnd:function(M,I,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(M,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:I,angle:this._rotationLayer.pm.getAngle(),originLatLngs:j,newLatLngs:this._rotationLayer.getLatLngs()},nt,ht)},_fireActionClick:function(M,I,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:M.text,action:M,btnName:I,button:j},nt,ht)},_fireButtonClick:function(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:M,button:I},j,nt)},_fireLangChange:function(M,I,j,nt){var ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",xt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:M,activeLang:I,fallback:j,translations:nt},ht,xt)},_fireGlobalDragModeToggled:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:M,map:this.map},I,j)},_fireGlobalEditModeToggled:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:M,map:this.map},I,j)},_fireGlobalRemovalModeToggled:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:M,map:this.map},I,j)},_fireGlobalCutModeToggled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},M,I)},_fireGlobalDrawModeToggled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},M,I)},_fireGlobalRotateModeToggled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},M,I)},_fireRemoveLayerGroup:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:remove",{layer:I,shape:void 0},j,nt)},_fireKeyeventEvent:function(M,I,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:M,eventType:I,focusOn:j},nt,ht)},__fire:function(M,I,j,nt){var ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};j=o()(j,ht,{source:nt}),L.PM.Utils._fireEvent(M,I,j)}};let C=w,k={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(M){this.map=M,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(M){var I="document";this.map.getContainer().contains(M.target)&&(I="map");var j={event:M,eventType:M.type,focusOn:I};this._lastEvents[M.type]=j,this._lastEvents.current=j,this.map.pm._fireKeyeventEvent(M,M.type,I)},_onBlur:function(M){M.altKey=!1;var I={event:M,eventType:M.type,focusOn:"document"};this._lastEvents[M.type]=I,this._lastEvents.current=I},getLastKeyEvent:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[M]},isShiftKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.shiftKey},isAltKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.altKey},isCtrlKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.ctrlKey},isMetaKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.metaKey},getPressedKey:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.key}};var T=s(7361),R=s.n(T),F=s(8721),H=s.n(F);function it(M){var I=L.PM.activeLang;return H()(O,I)||(I="en"),R()(O[I],M)}function ot(M){for(var I=0;I<M.length;I+=1){var j=M[I];if(Array.isArray(j)){if(ot(j))return!0}else if(j!=null&&j!=="")return!0}return!1}function dt(M){return M.reduce(function(I,j){if(j.length!==0){var nt=Array.isArray(j)?dt(j):j;Array.isArray(nt)?nt.length!==0&&I.push(nt):I.push(nt)}return I},[])}function $(M,I,j){for(var nt,ht,xt,Lt=6378137,Rt=63567523142e-4,Pt=.0033528106647474805,Nt=M.lng,Vt=M.lat,ne=j,Zt=Math.PI,ge=I*Zt/180,Ce=Math.sin(ge),Ne=Math.cos(ge),be=(1-Pt)*Math.tan(Vt*Zt/180),vr=1/Math.sqrt(1+be*be),mr=be*vr,Ei=Math.atan2(be,Ne),an=vr*Ce,qn=1-an*an,Mr=qn*(Lt*Lt-Rt*Rt)/(Rt*Rt),ys=1+Mr/16384*(4096+Mr*(Mr*(320-175*Mr)-768)),Br=Mr/1024*(256+Mr*(Mr*(74-47*Mr)-128)),Wn=ne/(Rt*ys),es=2*Math.PI;Math.abs(Wn-es)>1e-12;)nt=Math.cos(2*Ei+Wn),es=Wn,Wn=ne/(Rt*ys)+Br*(ht=Math.sin(Wn))*(nt+Br/4*((xt=Math.cos(Wn))*(2*nt*nt-1)-Br/6*nt*(4*ht*ht-3)*(4*nt*nt-3)));var Ns=mr*ht-vr*xt*Ne,Sr=Math.atan2(mr*xt+vr*ht*Ne,(1-Pt)*Math.sqrt(an*an+Ns*Ns)),Pe=Pt/16*qn*(4+Pt*(4-3*qn)),va=Nt+180*(Math.atan2(ht*Ce,vr*xt-mr*ht*Ne)-(1-Pe)*Pt*an*(Wn+Pe*ht*(nt+Pe*xt*(2*nt*nt-1))))/Zt,ho=180*Sr/Zt;return L.latLng(va,ho)}function ct(M,I,j,nt){for(var ht,xt,Lt=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],Rt=[],Pt=0;Pt<j;Pt+=1){if(Lt)ht=$(M,360*Pt/j+nt,I),xt=L.latLng(ht.lng,ht.lat);else{var Nt=M.lat+Math.cos(2*Pt*Math.PI/j)*I,Vt=M.lng+Math.sin(2*Pt*Math.PI/j)*I;xt=L.latLng(Nt,Vt)}Rt.push(xt)}return Rt}function W(M,I,j,nt){var ht=function(xt,Lt,Rt){var Pt=xt.latLngToContainerPoint(Lt),Nt=xt.latLngToContainerPoint(Rt),Vt=180*Math.atan2(Nt.y-Pt.y,Nt.x-Pt.x)/Math.PI+90;return Vt+(Vt<0?360:0)}(M,I,j);return function(xt,Lt,Rt){Lt=(Lt+360)%360;var Pt=Math.PI/180,Nt=180/Math.PI,Vt=6378137,ne=xt.lng*Pt,Zt=xt.lat*Pt,ge=Lt*Pt,Ce=Math.sin(Zt),Ne=Math.cos(Zt),be=Math.cos(Rt/Vt),vr=Math.sin(Rt/Vt),mr=Math.asin(Ce*be+Ne*vr*Math.cos(ge)),Ei=ne+Math.atan2(Math.sin(ge)*vr*Ne,be-Ce*Math.sin(mr));return Ei=(Ei*=Nt)>180?Ei-360:Ei<-180?Ei+360:Ei,L.latLng([mr*Nt,Ei])}(I,ht,nt)}function q(M,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!I||Object.keys(I).length===0)return function(Pt,Nt){return Pt-Nt};for(var nt,ht=Object.keys(I),xt=ht.length-1,Lt={};xt>=0;)nt=ht[xt],Lt[nt.toLowerCase()]=I[nt],xt-=1;function Rt(Pt){return Pt instanceof L.Marker?"Marker":Pt instanceof L.Circle?"Circle":Pt instanceof L.CircleMarker?"CircleMarker":Pt instanceof L.Rectangle?"Rectangle":Pt instanceof L.Polygon?"Polygon":Pt instanceof L.Polyline?"Line":void 0}return function(Pt,Nt){var Vt,ne;if(M==="instanceofShape"){if(Vt=Rt(Pt.layer).toLowerCase(),ne=Rt(Nt.layer).toLowerCase(),!Vt||!ne)return 0}else{if(!Pt.hasOwnProperty(M)||!Nt.hasOwnProperty(M))return 0;Vt=Pt[M].toLowerCase(),ne=Nt[M].toLowerCase()}var Zt=Vt in Lt?Lt[Vt]:Number.MAX_SAFE_INTEGER,ge=ne in Lt?Lt[ne]:Number.MAX_SAFE_INTEGER,Ce=0;return Zt<ge?Ce=-1:Zt>ge&&(Ce=1),j==="desc"?-1*Ce:Ce}}function rt(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M.getLatLngs();return M instanceof L.Polygon?L.polygon(I).getLatLngs():L.polyline(I).getLatLngs()}function mt(M,I){var j,nt;if((j=I.options.crs)!==null&&j!==void 0&&(nt=j.projection)!==null&&nt!==void 0&&nt.MAX_LATITUDE){var ht,xt,Lt=(ht=I.options.crs)===null||ht===void 0||(xt=ht.projection)===null||xt===void 0?void 0:xt.MAX_LATITUDE;M.lat=Math.max(Math.min(Lt,M.lat),-Lt)}return M}function wt(M){return M.options.renderer||M._map&&(M._map._getPaneRenderer(M.options.pane)||M._map.options.renderer||M._map._renderer)||M._renderer}let _t=L.Class.extend({includes:[V,G,tt,K,C],initialize:function(M){this.map=M,this.Draw=new L.PM.Draw(M),this.Toolbar=new L.PM.Toolbar(M),this.Keyboard=k,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(M)},setLang:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",I=arguments.length>1?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",nt=L.PM.activeLang;I&&(O[M]=o()(O[j],I)),L.PM.activeLang=M,this.map.pm.Toolbar.reinit(),this._fireLangChange(nt,M,j,O[M])},addControls:function(M){this.Toolbar.addControls(M)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",I=arguments.length>1?arguments[1]:void 0;M==="Poly"&&(M="Polygon"),this.Draw.enable(M,I)},disableDraw:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";M==="Poly"&&(M="Polygon"),this.Draw.disable(M)},setPathOptions:function(M){var I=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=j.ignoreShapes||[],ht=j.merge||!1;this.map.pm.Draw.shapes.forEach(function(xt){nt.indexOf(xt)===-1&&I.map.pm.Draw[xt].setPathOptions(M,ht)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(M){var I=this,j=o()(this.globalOptions,M),nt=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.editable!=!!j.editable&&(this.map.pm.Draw.CircleMarker.disable(),nt=!0),this.map.pm.Draw.shapes.forEach(function(ht){I.map.pm.Draw[ht].setOptions(j)}),nt&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(ht){ht.pm.setOptions(j)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=j,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(M){M.pm.enabled()&&M.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(M){return this.Draw.Cut.enable(M)},toggleGlobalCutMode:function(M){return this.Draw.Cut.toggle(M)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],I=L.PM.Utils.findLayers(this.map);if(!M)return I;var j=L.featureGroup();return j._pmTempLayer=!0,I.forEach(function(nt){j.addLayer(nt)}),j},getGeomanDrawLayers:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],I=L.PM.Utils.findLayers(this.map).filter(function(nt){return nt._drawnByGeoman===!0});if(!M)return I;var j=L.featureGroup();return j._pmTempLayer=!0,I.forEach(function(nt){j.addLayer(nt)}),j},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(M){this._touchEventCounter===0&&(L.DomEvent.on(M,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(M,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(M){this._touchEventCounter===1&&(L.DomEvent.off(M,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(M,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(M){wt(this.map)._onMouseMove(this._createMouseEvent("mousemove",M))},_canvasTouchClick:function(M){var I="";M.type==="touchstart"||M.type==="pointerdown"?I="mousedown":M.type==="touchend"||M.type==="pointerup"?I="mouseup":M.type!=="touchcancel"&&M.type!=="pointercancel"||(I="mouseup"),I&&wt(this.map)._onClick(this._createMouseEvent(I,M))},_createMouseEvent:function(M,I){var j,nt=I.touches[0]||I.changedTouches[0];try{j=new MouseEvent(M,{bubbles:I.bubbles,cancelable:I.cancelable,view:I.view,detail:nt.detail,screenX:nt.screenX,screenY:nt.screenY,clientX:nt.clientX,clientY:nt.clientY,ctrlKey:I.ctrlKey,altKey:I.altKey,shiftKey:I.shiftKey,metaKey:I.metaKey,button:I.button,relatedTarget:I.relatedTarget})}catch{(j=document.createEvent("MouseEvents")).initMouseEvent(M,I.bubbles,I.cancelable,I.view,nt.detail,nt.screenX,nt.screenY,nt.clientX,nt.clientY,I.ctrlKey,I.altKey,I.shiftKey,I.metaKey,I.button,I.relatedTarget)}return j}}),Ct=L.Control.extend({includes:[C],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(M){this._button=L.Util.extend({},this.options,M)},onAdd:function(M){return this._map=M,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(M){return this._button.toggleStatus=typeof M=="boolean"?M:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(M){M&&M.preventDefault(),this._button.disabled||(this._button.onClick(M,{button:this,event:M}),this._clicked(M),this._button.afterClick(M,{button:this,event:M}))},_makeButton:function(M){var I=this,j=this.options.position.indexOf("right")>-1?"pos-right":"",nt=L.DomUtil.create("div","button-container  ".concat(j),this._container);M.title&&nt.setAttribute("title",M.title);var ht=L.DomUtil.create("a","leaflet-buttons-control-button",nt);ht.setAttribute("role","button"),ht.setAttribute("tabindex","0"),ht.href="#";var xt=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(j),nt),Lt=M.actions,Rt={cancel:{text:it("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:it("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:it("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[M.jsClass]._removeLastVertex()}},finish:{text:it("actions.finish"),onClick:function(Nt){this._map.pm.Draw[M.jsClass]._finishShape(Nt)}}};Lt.forEach(function(Nt){var Vt,ne=typeof Nt=="string"?Nt:Nt.name;if(Rt[ne])Vt=Rt[ne];else{if(!Nt.text)return;Vt=Nt}var Zt=L.DomUtil.create("a","leaflet-pm-action ".concat(j," action-").concat(ne),xt);Zt.setAttribute("role","button"),Zt.setAttribute("tabindex","0"),Zt.href="#",Zt.innerHTML=Vt.text,L.DomEvent.disableClickPropagation(Zt),L.DomEvent.on(Zt,"click",L.DomEvent.stop),!M.disabled&&Vt.onClick&&(L.DomEvent.addListener(Zt,"click",function(ge){ge.preventDefault();var Ce="",Ne=I._map.pm.Toolbar.buttons;for(var be in Ne)if(Ne[be]._button===M){Ce=be;break}I._fireActionClick(Vt,Ce,M)},I),L.DomEvent.addListener(Zt,"click",Vt.onClick,I))}),M.toggleStatus&&L.DomUtil.addClass(nt,"active");var Pt=L.DomUtil.create("div","control-icon",ht);return M.iconUrl&&Pt.setAttribute("src",M.iconUrl),M.className&&L.DomUtil.addClass(Pt,M.className),L.DomEvent.disableClickPropagation(ht),L.DomEvent.on(ht,"click",L.DomEvent.stop),M.disabled||(L.DomEvent.addListener(ht,"click",this._onBtnClick,this),L.DomEvent.addListener(ht,"click",this._triggerClick,this)),M.disabled&&(L.DomUtil.addClass(ht,"pm-disabled"),ht.setAttribute("aria-disabled","true")),nt},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var M="",I=this._map.pm.Toolbar.buttons;for(var j in I)if(I[j]._button===this._button){M=j;break}this._fireButtonClick(M,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var M="pm-disabled",I=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(I,M),I.setAttribute("aria-disabled","true"),L.DomEvent.off(I,"click",this._triggerClick,this),L.DomEvent.off(I,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(I,M),I.setAttribute("aria-disabled","false"),L.DomEvent.on(I,"click",this._triggerClick,this),L.DomEvent.on(I,"click",this._onBtnClick,this))}}});function Ft(M,I){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);I&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function At(M){for(var I=1;I<arguments.length;I++){var j=arguments[I]!=null?arguments[I]:{};I%2?Ft(Object(j),!0).forEach(function(nt){vt(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):Ft(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function vt(M,I,j){return I in M?Object.defineProperty(M,I,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[I]=j,M}function kt(M){return kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},kt(M)}L.Control.PMButton=Ct;let gt=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(M){this.init(M)},reinit:function(){var M=this.isVisible;this.removeControls(),this._defineButtons(),M&&this.addControls()},init:function(M){this.map=M,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(M){var I="".concat(M,"Container");return this[I]||(this[I]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(M," leaflet-bar leaflet-control"))),this[I]},getButtons:function(){return this.buttons},addControls:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof M.editPolygon<"u"&&(M.editMode=M.editPolygon),typeof M.deleteLayer<"u"&&(M.removalMode=M.deleteLayer),L.Util.setOptions(this,M),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var M=this.getButtons(),I={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var j in M){var nt=M[j];L.Util.setOptions(nt,{className:I.geomanIcons[j]})}},removeControls:function(){var M=this.getButtons();for(var I in M)M[I].remove();this.isVisible=!1},toggleControls:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(M)},_addButton:function(M,I){return this.buttons[M]=I,this.options[M]=this.options[M]||!1,this.buttons[M]},triggerClickOnToggledButtons:function(M){for(var I in this.buttons){var j=this.buttons[I];j._button.disableByOtherButtons&&j!==M&&j.toggled()&&j._triggerClick()}},toggleButton:function(M,I){var j=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return M==="editPolygon"&&(M="editMode"),M==="deleteLayer"&&(M="removalMode"),j&&this.triggerClickOnToggledButtons(this.buttons[M]),!!this.buttons[M]&&this.buttons[M].toggle(I)},_defineButtons:function(){var M=this,I={className:"control-icon leaflet-pm-icon-marker",title:it("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},j={title:it("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},nt={className:"control-icon leaflet-pm-icon-polyline",title:it("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},ht={title:it("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},xt={title:it("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},Lt={title:it("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},Rt={title:it("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Pt={title:it("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Nt={title:it("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Vt={title:it("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ne={title:it("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Zt={className:"control-icon leaflet-pm-icon-text",title:it("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(I)),this._addButton("drawPolyline",new L.Control.PMButton(nt)),this._addButton("drawRectangle",new L.Control.PMButton(Lt)),this._addButton("drawPolygon",new L.Control.PMButton(j)),this._addButton("drawCircle",new L.Control.PMButton(ht)),this._addButton("drawCircleMarker",new L.Control.PMButton(xt)),this._addButton("drawText",new L.Control.PMButton(Zt)),this._addButton("editMode",new L.Control.PMButton(Rt)),this._addButton("dragMode",new L.Control.PMButton(Pt)),this._addButton("cutPolygon",new L.Control.PMButton(Nt)),this._addButton("removalMode",new L.Control.PMButton(Vt)),this._addButton("rotateMode",new L.Control.PMButton(ne))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var M=this.getButtons(),I=[];for(var j in this.options.drawControls===!1&&(I=I.concat(Object.keys(M).filter(function(ht){return!M[ht]._button.tool}))),this.options.editControls===!1&&(I=I.concat(Object.keys(M).filter(function(ht){return M[ht]._button.tool==="edit"}))),this.options.optionsControls===!1&&(I=I.concat(Object.keys(M).filter(function(ht){return M[ht]._button.tool==="options"}))),this.options.customControls===!1&&(I=I.concat(Object.keys(M).filter(function(ht){return M[ht]._button.tool==="custom"}))),M)if(this.options[j]&&I.indexOf(j)===-1){var nt=M[j]._button.tool;nt||(nt="draw"),M[j].setPosition(this._getBtnPosition(nt)),M[j].addTo(this.map)}}},_getBtnPosition:function(M){return this.options.positions&&this.options.positions[M]?this.options.positions[M]:this.options.position},setBlockPosition:function(M,I){this.options.positions[M]=I,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(M,I){if(!I)throw new TypeError("Button has no name");kt(I)!=="object"&&(I={name:I});var j=this._btnNameMapping(M);if(!I.name)throw new TypeError("Button has no name");if(this.buttons[I.name])throw new TypeError("Button with this name already exists");var nt=this.map.pm.Draw.createNewDrawInstance(I.name,j);return I=At(At({},this.buttons[j]._button),I),{drawInstance:nt,control:this.createCustomControl(I)}},createCustomControl:function(M){var I,j;if(!M.name)throw new TypeError("Button has no name");if(this.buttons[M.name])throw new TypeError("Button with this name already exists");M.onClick||(M.onClick=function(){}),M.afterClick||(M.afterClick=function(){}),M.toggle!==!1&&(M.toggle=!0),M.block&&(M.block=M.block.toLowerCase()),M.block&&M.block!=="draw"||(M.block=""),M.className?M.className.indexOf("control-icon")===-1&&(M.className="control-icon ".concat(M.className)):M.className="control-icon";var nt={tool:M.block,className:M.className,title:M.title||"",jsClass:M.name,onClick:M.onClick,afterClick:M.afterClick,doToggle:M.toggle,toggleStatus:!1,disableOtherButtons:(I=M.disableOtherButtons)===null||I===void 0||I,disableByOtherButtons:(j=M.disableByOtherButtons)===null||j===void 0||j,cssToggle:M.toggle,position:this.options.position,actions:M.actions||[],disabled:!!M.disabled};this.options[M.name]!==!1&&(this.options[M.name]=!0);var ht=this._addButton(M.name,new L.Control.PMButton(nt));return this.changeControlOrder(),ht},changeControlOrder:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],I=this._shapeMapping(),j=[];M.forEach(function(Nt){I[Nt]?j.push(I[Nt]):j.push(Nt)});var nt=this.getButtons(),ht={};j.forEach(function(Nt){nt[Nt]&&(ht[Nt]=nt[Nt])});var xt=Object.keys(nt).filter(function(Nt){return!nt[Nt]._button.tool});xt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])});var Lt=Object.keys(nt).filter(function(Nt){return nt[Nt]._button.tool==="edit"});Lt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])});var Rt=Object.keys(nt).filter(function(Nt){return nt[Nt]._button.tool==="options"});Rt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])});var Pt=Object.keys(nt).filter(function(Nt){return nt[Nt]._button.tool==="custom"});Pt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])}),Object.keys(nt).forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])}),this.map.pm.Toolbar.buttons=ht,this._showHideButtons()},getControlOrder:function(){var M=this.getButtons(),I=[];for(var j in M)I.push(j);return I},changeActionsOfControl:function(M,I){var j=this._btnNameMapping(M);if(!j)throw new TypeError("No name passed");if(!I)throw new TypeError("No actions passed");if(!this.buttons[j])throw new TypeError("Button with this name not exists");this.buttons[j]._button.actions=I,this.changeControlOrder()},setButtonDisabled:function(M,I){var j=this._btnNameMapping(M);I?this.buttons[j].disable():this.buttons[j].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(M){var I=this._shapeMapping();return I[M]?I[M]:M}});function ut(M,I){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);I&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function Q(M){for(var I=1;I<arguments.length;I++){var j=arguments[I]!=null?arguments[I]:{};I%2?ut(Object(j),!0).forEach(function(nt){Y(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):ut(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Y(M,I,j){return I in M?Object.defineProperty(M,I,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[I]=j,M}var et={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(M){var I=this;M.forEach(function(j){Array.isArray(j)?I._assignEvents(j):(j.off("drag",I._handleSnapping,I),j.on("drag",I._handleSnapping,I),j.off("dragend",I._cleanupSnapping,I),j.on("dragend",I._cleanupSnapping,I))})},_cleanupSnapping:function(M){M&&(M.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(I){I.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(M){var I=this,j=M.target;if(j._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var nt=this._calcClosestLayer(j.getLatLng(),this._snapList);if(Object.keys(nt).length===0)return!1;var ht,xt=nt.layer instanceof L.Marker||nt.layer instanceof L.CircleMarker||!this.options.snapSegment;ht=xt?nt.latlng:this._checkPrioritiySnapping(nt);var Lt=this.options.snapDistance,Rt={marker:j,shape:this._shape,snapLatLng:ht,segment:nt.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:nt.layer,distance:nt.distance};if(this._fireSnapDrag(Rt.marker,Rt),this._fireSnapDrag(this._layer,Rt),nt.distance<Lt){j._orgLatLng=j.getLatLng(),j.setLatLng(ht),j._snapped=!0,j._snapInfo=Rt;var Pt=this._snapLatLng||{},Nt=ht||{};Pt.lat===Nt.lat&&Pt.lng===Nt.lng||(I._snapLatLng=ht,I._fireSnap(j,Rt),I._fireSnap(I._layer,Rt))}else this._snapLatLng&&(this._unsnap(Rt),j._snapped=!1,j._snapInfo=void 0,this._fireUnsnap(Rt.marker,Rt),this._fireUnsnap(this._layer,Rt));return!0},_createSnapList:function(){var M=this,I=[],j=[],nt=this._map;nt.off("pm:remove",this._handleSnapLayerRemoval,this),nt.on("pm:remove",this._handleSnapLayerRemoval,this),nt.eachLayer(function(ht){if((ht instanceof L.Polyline||ht instanceof L.Marker||ht instanceof L.CircleMarker||ht instanceof L.ImageOverlay)&&ht.options.snapIgnore!==!0){if(ht.options.snapIgnore===void 0&&(!L.PM.optIn&&ht.options.pmIgnore===!0||L.PM.optIn&&ht.options.pmIgnore!==!1))return;(ht instanceof L.Circle||ht instanceof L.CircleMarker)&&ht.pm&&ht.pm._hiddenPolyCircle?I.push(ht.pm._hiddenPolyCircle):ht instanceof L.ImageOverlay&&(ht=L.rectangle(ht.getBounds())),I.push(ht);var xt=L.polyline([],{color:"red",pmIgnore:!0});xt._pmTempLayer=!0,j.push(xt),(ht instanceof L.Circle||ht instanceof L.CircleMarker)&&j.push(xt)}}),I=(I=(I=I.filter(function(ht){return M._layer!==ht})).filter(function(ht){return ht._latlng||ht._latlngs&&ot(ht._latlngs)})).filter(function(ht){return!ht._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var ht=L.polyline([],{color:"red",pmIgnore:!0});ht._pmTempLayer=!0,j.push(ht)}),this._snapList=I.concat(this._otherSnapLayers)):this._snapList=I,this.debugIndicatorLines=j},_handleSnapLayerRemoval:function(M){var I=M.layer,j=this._snapList.findIndex(function(nt){return nt._leaflet_id===I._leaflet_id});this._snapList.splice(j,1)},_calcClosestLayer:function(M,I){return this._calcClosestLayers(M,I,1)[0]},_calcClosestLayers:function(M,I){var j=this,nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ht=[],xt={};I.forEach(function(Rt,Pt){if(!Rt._parentCopy||Rt._parentCopy!==j._layer){var Nt=j._calcLayerDistances(M,Rt);if(Nt.distance=Math.floor(Nt.distance),j.debugIndicatorLines){if(!j.debugIndicatorLines[Pt]){var Vt=L.polyline([],{color:"red",pmIgnore:!0});Vt._pmTempLayer=!0,j.debugIndicatorLines[Pt]=Vt}j.debugIndicatorLines[Pt].setLatLngs([M,Nt.latlng])}nt===1&&(xt.distance===void 0||Nt.distance<=xt.distance)?(Nt.distance<xt.distance&&(ht=[]),(xt=Nt).layer=Rt,ht.push(xt)):nt!==1&&(xt={},(xt=Nt).layer=Rt,ht.push(xt))}}),nt!==1&&(ht=ht.sort(function(Rt,Pt){return Rt.distance-Pt.distance})),nt===-1&&(nt=ht.length);var Lt=this._getClosestLayerByPriority(ht,nt);return L.Util.isArray(Lt)?Lt:[Lt]},_calcLayerDistances:function(M,I){var j=this._map,nt=I instanceof L.Marker||I instanceof L.CircleMarker,ht=I instanceof L.Polygon,xt=M;if(nt){var Lt=I.getLatLng();return{latlng:Q({},Lt),distance:this._getDistance(j,Lt,xt)}}return this._calcLatLngDistances(xt,I.getLatLngs(),j,ht)},_calcLatLngDistances:function(M,I,j){var nt,ht,xt,Lt=this,Rt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Pt=function Vt(ne){ne.forEach(function(Zt,ge){if(Array.isArray(Zt))Vt(Zt);else if(Lt.options.snapSegment){var Ce,Ne=Zt;Ce=Rt?ge+1===ne.length?0:ge+1:ge+1===ne.length?void 0:ge+1;var be=ne[Ce];if(be){var vr=Lt._getDistanceToSegment(j,M,Ne,be);(ht===void 0||vr<ht)&&(ht=vr,xt=[Ne,be])}}else{var mr=Lt._getDistance(j,M,Zt);(ht===void 0||mr<ht)&&(ht=mr,nt=Zt)}})};if(Pt(I),this.options.snapSegment){var Nt=this._getClosestPointOnSegment(j,M,xt[0],xt[1]);return{latlng:Q({},Nt),segment:xt,distance:ht}}return{latlng:nt,distance:ht}},_getClosestLayerByPriority:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;M=M.sort(function(Lt,Rt){return Lt._leaflet_id-Rt._leaflet_id});var j=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],nt=this._map.pm.globalOptions.snappingOrder||[],ht=0,xt={};return nt.concat(j).forEach(function(Lt){xt[Lt]||(ht+=1,xt[Lt]=ht)}),M.sort(q("instanceofShape",xt)),I===1?M[0]||{}:M.slice(0,I)},_checkPrioritiySnapping:function(M){var I=this._map,j=M.segment[0],nt=M.segment[1],ht=M.latlng,xt=this._getDistance(I,j,ht),Lt=this._getDistance(I,nt,ht),Rt=xt<Lt?j:nt,Pt=xt<Lt?xt:Lt;if(this.options.snapMiddle){var Nt=L.PM.Utils.calcMiddleLatLng(I,j,nt),Vt=this._getDistance(I,Nt,ht);Vt<xt&&Vt<Lt&&(Rt=Nt,Pt=Vt)}return Q({},Pt<this.options.snapDistance?Rt:ht)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(M,I,j,nt){var ht=M.getMaxZoom();ht===1/0&&(ht=M.getZoom());var xt=M.project(I,ht),Lt=M.project(j,ht),Rt=M.project(nt,ht),Pt=L.LineUtil.closestPointOnSegment(xt,Lt,Rt);return M.unproject(Pt,ht)},_getDistanceToSegment:function(M,I,j,nt){var ht=M.latLngToLayerPoint(I),xt=M.latLngToLayerPoint(j),Lt=M.latLngToLayerPoint(nt);return L.LineUtil.pointToSegmentDistance(ht,xt,Lt)},_getDistance:function(M,I,j){return M.latLngToLayerPoint(I).distanceTo(M.latLngToLayerPoint(j))}};let lt=et,pt=L.Class.extend({includes:[lt,C],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(M){L.Util.setOptions(this,M),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(M){var I=this,j=new L.Icon.Default;j.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=j,this._map=M,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(nt){I[nt]=new L.PM.Draw[nt](I._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(M){var I=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=I?o()(this.options.pathOptions,M):M},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(M,I){if(!M)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[M].enable(I)},disable:function(){var M=this;this.shapes.forEach(function(I){M[I].disable()})},addControls:function(){var M=this;this.shapes.forEach(function(I){M[I].addButton()})},getActiveShape:function(){var M,I=this;return this.shapes.forEach(function(j){I[j]._enabled&&(M=j)}),M},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var M=L.PM.Utils.findLayers(this._map);this._enabled?M.forEach(function(I){L.PM.Utils.disablePopup(I)}):M.forEach(function(I){L.PM.Utils.enablePopup(I)})},createNewDrawInstance:function(M,I){var j=this._getShapeFromBtnName(I);if(this[M])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[j])throw new TypeError("There is no class L.PM.Draw.".concat(j));return this[M]=new L.PM.Draw[j](this._map),this[M].toolbarButtonName=M,this[M]._shape=M,this.shapes.push(M),this[I]&&this[M].setOptions(this[I].options),this[M].setOptions(this[M].options),this[M]},_getShapeFromBtnName:function(M){var I={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return I[M]?I[M]:this[M]?this[M]._shape:M},_finishLayer:function(M){M.pm&&(M.pm.setOptions(this.options),M.pm._shape=this._shape,M.pm._map=this._map),this._addDrawnLayerProp(M)},_addDrawnLayerProp:function(M){M._drawnByGeoman=!0},_setPane:function(M,I){I==="layerPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":I==="vertexPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":I==="markerPane"&&(M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});pt.Marker=pt.extend({initialize:function(M){this._map=M,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(M){var I=this;L.Util.setOptions(this,M),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(j){I.isRelevantMarker(j)&&j.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var M=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(I){M.isRelevantMarker(I)&&I.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},isRelevantMarker:function(M){return M instanceof L.Marker&&M.pm&&!M._pmTempLayer&&!M.pm._initTextMarker},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var I=M;I.target=this._hintMarker,this._handleSnapping(I)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(M){if(M.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var I=this._hintMarker.getLatLng(),j=new L.Marker(I,this.options.markerStyle);this._setPane(j,"markerPane"),this._finishLayer(j),j.pm||(j.options.draggable=!1),j.addTo(this._map.pm._getContainingLayer()),j.pm&&this.options.markerEditable?j.pm.enable():j.dragging&&j.dragging.disable(),this._fireCreate(j),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var M,I;(M=this.options.markerStyle)!==null&&M!==void 0&&M.icon&&((I=this._hintMarker)===null||I===void 0||I.setIcon(this.options.markerStyle.icon))}});var bt=63710088e-1,Et={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*bt,kilometers:6371.0088,kilometres:6371.0088,meters:bt,metres:bt,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:bt/1852,radians:1,yards:6967335223679999e-9};function Ot(M,I,j){j===void 0&&(j={});var nt={type:"Feature"};return(j.id===0||j.id)&&(nt.id=j.id),j.bbox&&(nt.bbox=j.bbox),nt.properties=I||{},nt.geometry=M,nt}function zt(M,I,j){if(j===void 0&&(j={}),!M)throw new Error("coordinates is required");if(!Array.isArray(M))throw new Error("coordinates must be an Array");if(M.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_e(M[0])||!_e(M[1]))throw new Error("coordinates must contain numbers");return Ot({type:"Point",coordinates:M},I,j)}function Gt(M,I,j){if(j===void 0&&(j={}),M.length<2)throw new Error("coordinates must be an array of two or more positions");return Ot({type:"LineString",coordinates:M},I,j)}function Jt(M,I){I===void 0&&(I={});var j={type:"FeatureCollection"};return I.id&&(j.id=I.id),I.bbox&&(j.bbox=I.bbox),j.features=M,j}function Kt(M,I){I===void 0&&(I="kilometers");var j=Et[I];if(!j)throw new Error(I+" units is invalid");return M*j}function ie(M,I){I===void 0&&(I="kilometers");var j=Et[I];if(!j)throw new Error(I+" units is invalid");return M/j}function Xt(M){return 180*(M%(2*Math.PI))/Math.PI}function Ut(M){return M%360*Math.PI/180}function _e(M){return!isNaN(M)&&M!==null&&!Array.isArray(M)}function le(M){var I,j,nt={type:"FeatureCollection",features:[]};if((j=M.type==="Feature"?M.geometry:M).type==="LineString")I=[j.coordinates];else if(j.type==="MultiLineString")I=j.coordinates;else if(j.type==="MultiPolygon")I=[].concat.apply([],j.coordinates);else{if(j.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");I=j.coordinates}return I.forEach(function(ht){I.forEach(function(xt){for(var Lt=0;Lt<ht.length-1;Lt++)for(var Rt=Lt;Rt<xt.length-1;Rt++)if(!(ht===xt&&(Math.abs(Lt-Rt)===1||Lt===0&&Rt===ht.length-2&&ht[Lt][0]===ht[ht.length-1][0]&&ht[Lt][1]===ht[ht.length-1][1]))){var Pt=ye(ht[Lt][0],ht[Lt][1],ht[Lt+1][0],ht[Lt+1][1],xt[Rt][0],xt[Rt][1],xt[Rt+1][0],xt[Rt+1][1]);Pt&&nt.features.push(zt([Pt[0],Pt[1]]))}})}),nt}function ye(M,I,j,nt,ht,xt,Lt,Rt){var Pt,Nt,Vt,ne,Zt={x:null,y:null,onLine1:!1,onLine2:!1};return(Pt=(Rt-xt)*(j-M)-(Lt-ht)*(nt-I))===0?Zt.x!==null&&Zt.y!==null&&Zt:(ne=(j-M)*(Nt=I-xt)-(nt-I)*(Vt=M-ht),Nt=((Lt-ht)*Nt-(Rt-xt)*Vt)/Pt,Vt=ne/Pt,Zt.x=M+Nt*(j-M),Zt.y=I+Nt*(nt-I),Nt>=0&&Nt<=1&&(Zt.onLine1=!0),Vt>=0&&Vt<=1&&(Zt.onLine2=!0),!(!Zt.onLine1||!Zt.onLine2)&&[Zt.x,Zt.y])}function Ze(M,I){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);I&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function ce(M){for(var I=1;I<arguments.length;I++){var j=arguments[I]!=null?arguments[I]:{};I%2?Ze(Object(j),!0).forEach(function(nt){ke(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):Ze(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function ke(M,I,j){return I in M?Object.defineProperty(M,I,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[I]=j,M}function He(M,I){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);I&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function $t(M){for(var I=1;I<arguments.length;I++){var j=arguments[I]!=null?arguments[I]:{};I%2?He(Object(j),!0).forEach(function(nt){Te(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):He(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Te(M,I,j){return I in M?Object.defineProperty(M,I,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[I]=j,M}function bi(M,I){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);I&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function ue(M){for(var I=1;I<arguments.length;I++){var j=arguments[I]!=null?arguments[I]:{};I%2?bi(Object(j),!0).forEach(function(nt){Fe(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):bi(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Fe(M,I,j){return I in M?Object.defineProperty(M,I,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[I]=j,M}function ai(M){if(!M)throw new Error("coord is required");if(!Array.isArray(M)){if(M.type==="Feature"&&M.geometry!==null&&M.geometry.type==="Point")return M.geometry.coordinates;if(M.type==="Point")return M.coordinates}if(Array.isArray(M)&&M.length>=2&&!Array.isArray(M[0])&&!Array.isArray(M[1]))return M;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Le(M){if(Array.isArray(M))return M;if(M.type==="Feature"){if(M.geometry!==null)return M.geometry.coordinates}else if(M.coordinates)return M.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Oe(M){return M.type==="Feature"?M.geometry:M}function ir(M,I){return M.type==="FeatureCollection"?"FeatureCollection":M.type==="GeometryCollection"?"GeometryCollection":M.type==="Feature"&&M.geometry!==null?M.geometry.type:M.type}function We(M,I,j){if(M!==null)for(var nt,ht,xt,Lt,Rt,Pt,Nt,Vt,ne=0,Zt=0,ge=M.type,Ce=ge==="FeatureCollection",Ne=ge==="Feature",be=Ce?M.features.length:1,vr=0;vr<be;vr++){Rt=(Vt=!!(Nt=Ce?M.features[vr].geometry:Ne?M.geometry:M)&&Nt.type==="GeometryCollection")?Nt.geometries.length:1;for(var mr=0;mr<Rt;mr++){var Ei=0,an=0;if((Lt=Vt?Nt.geometries[mr]:Nt)!==null){Pt=Lt.coordinates;var qn=Lt.type;switch(ne=!j||qn!=="Polygon"&&qn!=="MultiPolygon"?0:1,qn){case null:break;case"Point":if(I(Pt,Zt,vr,Ei,an)===!1)return!1;Zt++,Ei++;break;case"LineString":case"MultiPoint":for(nt=0;nt<Pt.length;nt++){if(I(Pt[nt],Zt,vr,Ei,an)===!1)return!1;Zt++,qn==="MultiPoint"&&Ei++}qn==="LineString"&&Ei++;break;case"Polygon":case"MultiLineString":for(nt=0;nt<Pt.length;nt++){for(ht=0;ht<Pt[nt].length-ne;ht++){if(I(Pt[nt][ht],Zt,vr,Ei,an)===!1)return!1;Zt++}qn==="MultiLineString"&&Ei++,qn==="Polygon"&&an++}qn==="Polygon"&&Ei++;break;case"MultiPolygon":for(nt=0;nt<Pt.length;nt++){for(an=0,ht=0;ht<Pt[nt].length;ht++){for(xt=0;xt<Pt[nt][ht].length-ne;xt++){if(I(Pt[nt][ht][xt],Zt,vr,Ei,an)===!1)return!1;Zt++}an++}Ei++}break;case"GeometryCollection":for(nt=0;nt<Lt.geometries.length;nt++)if(We(Lt.geometries[nt],I,j)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function It(M,I){if(M.type==="Feature")I(M,0);else if(M.type==="FeatureCollection")for(var j=0;j<M.features.length&&I(M.features[j],j)!==!1;j++);}function qt(M,I){var j,nt,ht,xt,Lt,Rt,Pt,Nt,Vt,ne,Zt=0,ge=M.type==="FeatureCollection",Ce=M.type==="Feature",Ne=ge?M.features.length:1;for(j=0;j<Ne;j++){for(Rt=ge?M.features[j].geometry:Ce?M.geometry:M,Nt=ge?M.features[j].properties:Ce?M.properties:{},Vt=ge?M.features[j].bbox:Ce?M.bbox:void 0,ne=ge?M.features[j].id:Ce?M.id:void 0,Lt=(Pt=!!Rt&&Rt.type==="GeometryCollection")?Rt.geometries.length:1,ht=0;ht<Lt;ht++)if((xt=Pt?Rt.geometries[ht]:Rt)!==null)switch(xt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(I(xt,Zt,Nt,Vt,ne)===!1)return!1;break;case"GeometryCollection":for(nt=0;nt<xt.geometries.length;nt++)if(I(xt.geometries[nt],Zt,Nt,Vt,ne)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(I(null,Zt,Nt,Vt,ne)===!1)return!1;Zt++}}function jt(M,I){qt(M,function(j,nt,ht,xt,Lt){var Rt,Pt=j===null?null:j.type;switch(Pt){case null:case"Point":case"LineString":case"Polygon":return I(Ot(j,ht,{bbox:xt,id:Lt}),nt,0)!==!1&&void 0}switch(Pt){case"MultiPoint":Rt="Point";break;case"MultiLineString":Rt="LineString";break;case"MultiPolygon":Rt="Polygon"}for(var Nt=0;Nt<j.coordinates.length;Nt++){var Vt=j.coordinates[Nt];if(I(Ot({type:Rt,coordinates:Vt},ht),nt,Nt)===!1)return!1}})}pt.Line=pt.extend({initialize:function(M){this._map=M,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(M){L.Util.setOptions(this,M),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],ce(ce({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_syncHintLine:function(){var M=this._layer.getLatLngs();if(M.length>0){var I=M[M.length-1];this._hintline.setLatLngs([I,this._hintMarker.getLatLng()])}},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var I=M;I.target=this._hintMarker,this._handleSnapping(I)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var j=this._layer._defaultShape().slice();j.push(this._hintMarker.getLatLng()),this._change(j)},hasSelfIntersection:function(){return le(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(M,I){var j=L.polyline(this._layer.getLatLngs());M&&(I||(I=this._hintMarker.getLatLng()),j.addLatLng(I));var nt=le(j.toGeoJSON(15));this._doesSelfIntersect=nt.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(M){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,M.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var I=this._hintMarker.getLatLng(),j=this._layer.getLatLngs(),nt=j[j.length-1];if(I.equals(j[0])||j.length>0&&I.equals(nt))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:I,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(I);var ht=this._createMarker(I);this._setTooltipText(),this._setHintLineAfterNewVertex(I),this._fireVertexAdded(ht,void 0,I,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(M)}}},_setHintLineAfterNewVertex:function(M){this._hintline.setLatLngs([M,M])},_removeLastVertex:function(){var M=this._markers;if(M.length<=1)this.disable();else{var I=this._layer.getLatLngs(),j=M[M.length-1],nt=L.PM.Utils.findDeepMarkerIndex(M,j).indexPath;M.pop(),this._layerGroup.removeLayer(j);var ht=M[M.length-1],xt=I.indexOf(ht.getLatLng());I=I.slice(0,xt+1),this._layer.setLatLngs(I),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(j,nt,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var M=this._layer.getLatLngs();if(!(M.length<=1)){var I=L.polyline(M,this.options.pathOptions);this._setPane(I,"layerPane"),this._finishLayer(I),I.addTo(this._map.pm._getContainingLayer()),this._fireCreate(I),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(M){var I=new L.Marker(M,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(I,"vertexPane"),I._pmTempLayer=!0,this._layerGroup.addLayer(I),this._markers.push(I),I.on("click",this._finishShape,this),I},_setTooltipText:function(){var M="";M=it(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(M)},_change:function(M){this._fireChange(M,"Draw")},setStyle:function(){var M,I;(M=this._layer)===null||M===void 0||M.setStyle(this.options.templineStyle),(I=this._hintline)===null||I===void 0||I.setStyle(this.options.hintlineStyle)}}),pt.Polygon=pt.Line.extend({initialize:function(M){this._map=M,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(M){L.PM.Draw.Line.prototype.enable.call(this,M),this._layer.pm._shape="Polygon"},_createMarker:function(M){var I=new L.Marker(M,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(I,"vertexPane"),I._pmTempLayer=!0,this._layerGroup.addLayer(I),this._markers.push(I),this._layer.getLatLngs().flat().length===1?(I.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(I)-1,this.options.snappable&&this._cleanupSnapping()):I.on("click",function(){return 1}),I},_setTooltipText:function(){var M="";M=it(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(M)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var M=this._layer.getLatLngs();if(!(M.length<=2)){var I=L.polygon(M,this.options.pathOptions);this._setPane(I,"layerPane"),this._finishLayer(I),I.addTo(this._map.pm._getContainingLayer()),this._fireCreate(I),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),pt.Rectangle=pt.extend({initialize:function(M){this._map=M,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(M){if(L.Util.setOptions(this,M),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var I=0;I<2;I+=1){var j=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(j,"vertexPane"),j._pmTempLayer=!0,this._layerGroup.addLayer(j),this._styleMarkers.push(j)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_placeStartingMarkers:function(M){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var I=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(I),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(j){L.DomUtil.addClass(j._icon,"visible"),j.setLatLng(I)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(it("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var M=this._startMarker.getLatLng();M&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([M,M]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var I=M;I.target=this._hintMarker,this._handleSnapping(I)}var j=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(j,"Draw")},_syncRectangleSize:function(){var M=this,I=mt(this._startMarker.getLatLng(),this._map),j=mt(this._hintMarker.getLatLng(),this._map),nt=L.PM.Utils._getRotatedRectangle(I,j,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(nt),this.options.cursorMarker&&this._styleMarkers){var ht=[];nt.forEach(function(xt){xt.equals(I,1e-8)||xt.equals(j,1e-8)||ht.push(xt)}),ht.forEach(function(xt,Lt){try{M._styleMarkers[Lt].setLatLng(xt)}catch{}})}},_findCorners:function(){var M=this._layer.getBounds();return[M.getNorthWest(),M.getNorthEast(),M.getSouthEast(),M.getSouthWest()]},_finishShape:function(M){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var I=this._hintMarker.getLatLng(),j=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var nt=L.rectangle([j,I],this.options.pathOptions);if(this.options.rectangleAngle){var ht=L.PM.Utils._getRotatedRectangle(j,I,this.options.rectangleAngle||0,this._map);nt.setLatLngs(ht),nt.pm&&nt.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(nt,"layerPane"),this._finishLayer(nt),nt.addTo(this._map.pm._getContainingLayer()),this._fireCreate(nt),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var M;(M=this._layer)===null||M===void 0||M.setStyle(this.options.pathOptions)}}),pt.Circle=pt.extend({initialize:function(M){this._map=M,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(M){L.Util.setOptions(this,M),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle(this._map.getCenter(),$t($t({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),I=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([M,I])},_syncCircleRadius:function(){var M,I=this._centerMarker.getLatLng(),j=this._hintMarker.getLatLng();M=this._map.options.crs===L.CRS.Simple?this._map.distance(I,j):I.distanceTo(j),this.options.minRadiusCircle&&M<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&M>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(M)},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var I=M;I.target=this._hintMarker,this._handleSnapping(I)}this._handleHintMarkerSnapping();var j=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(j,"Draw")},_placeCenterMarker:function(M){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var I=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(I),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var M=this._centerMarker.getLatLng();M&&(this._layer.setLatLng(M),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(it("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(M){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var I,j=this._centerMarker.getLatLng(),nt=this._hintMarker.getLatLng();I=this._map.options.crs===L.CRS.Simple?this._map.distance(j,nt):j.distanceTo(nt),this.options.minRadiusCircle&&I<this.options.minRadiusCircle?I=this.options.minRadiusCircle:this.options.maxRadiusCircle&&I>this.options.maxRadiusCircle&&(I=this.options.maxRadiusCircle);var ht=$t($t({},this.options.pathOptions),{},{radius:I}),xt=L.circle(j,ht);this._setPane(xt,"layerPane"),this._finishLayer(xt),xt.addTo(this._map.pm._getContainingLayer()),xt.pm&&xt.pm._updateHiddenPolyCircle(),this._fireCreate(xt),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var M=this._hintMarker.getLatLng();if(!this._layerGroup.hasLayer(this._centerMarker))return M;var I=this._centerMarker.getLatLng(),j=I.distanceTo(M);return this.options.minRadiusCircle&&j<this.options.minRadiusCircle?M=W(this._map,I,M,this.options.minRadiusCircle):this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle&&(M=W(this._map,I,M,this.options.maxRadiusCircle)),M},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var M=this._centerMarker.getLatLng(),I=this._hintMarker.getLatLng(),j=M.distanceTo(I);this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircle&&j<this.options.minRadiusCircle||this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())},setStyle:function(){var M,I;(M=this._layer)===null||M===void 0||M.setStyle(this.options.templineStyle),(I=this._hintline)===null||I===void 0||I.setStyle(this.options.hintlineStyle)}}),pt.CircleMarker=pt.Marker.extend({initialize:function(M){this._map=M,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(M){var I=this;if(L.Util.setOptions(this,M),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var j={};L.extend(j,this.options.templineStyle),j.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker(this._map.getCenter(),j),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker(this._map.getCenter(),this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(nt){I.isRelevantMarker(nt)&&nt.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var M=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(I){M.isRelevantMarker(I)&&I.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(M){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var I=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(I),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var M=this._centerMarker.getLatLng();M&&(this._layer.setLatLng(M),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(it("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),I=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([M,I])},_syncCircleRadius:function(){var M=this._centerMarker.getLatLng(),I=this._hintMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(I));this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(j)},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var I=M;I.target=this._hintMarker,this._handleSnapping(I)}this._handleHintMarkerSnapping();var j=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(j,"Draw")},isRelevantMarker:function(M){return M instanceof L.CircleMarker&&!(M instanceof L.Circle)&&M.pm&&!M._pmTempLayer},_createMarker:function(M){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&M.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var I=this._hintMarker.getLatLng(),j=L.circleMarker(I,this.options.pathOptions);this._setPane(j,"layerPane"),this._finishLayer(j),j.addTo(this._map.pm._getContainingLayer()),j.pm&&this.options.markerEditable&&j.pm.enable(),this._fireCreate(j),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(M){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var I=this._centerMarker.getLatLng(),j=this._hintMarker.getLatLng(),nt=this._map.project(I).distanceTo(this._map.project(j));this.options.editable&&(this.options.minRadiusCircleMarker&&nt<this.options.minRadiusCircleMarker?nt=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&nt>this.options.maxRadiusCircleMarker&&(nt=this.options.maxRadiusCircleMarker));var ht=ue(ue({},this.options.pathOptions),{},{radius:nt}),xt=L.circleMarker(I,ht);this._setPane(xt,"layerPane"),this._finishLayer(xt),xt.addTo(this._map.pm._getContainingLayer()),xt.pm&&xt.pm._updateHiddenPolyCircle(),this._fireCreate(xt),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var M=this._hintMarker.getLatLng();if(this.options.editable){if(!this._layerGroup.hasLayer(this._centerMarker))return M;var I=this._centerMarker.getLatLng(),j=this._map.project(I).distanceTo(this._map.project(M));this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?M=W(this._map,I,M,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker&&(M=W(this._map,I,M,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return M},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var M=this._centerMarker.getLatLng(),I=this._hintMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(I));this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(M){var I=this._centerMarker.getLatLng(),j=this._map.project(I),nt=L.point(j.x+M,j.y);return this._map.unproject(nt).distanceTo(I)},setStyle:function(){var M,I,j={};L.extend(j,this.options.templineStyle),this.options.editable&&(j.radius=0),(M=this._layer)===null||M===void 0||M.setStyle(j),(I=this._hintline)===null||I===void 0||I.setStyle(this.options.hintlineStyle)}});let ae=function(M){if(!M)throw new Error("geojson is required");var I=[];return jt(M,function(j){(function(nt,ht){var xt=[],Lt=nt.geometry;if(Lt!==null){switch(Lt.type){case"Polygon":xt=Le(Lt);break;case"LineString":xt=[Le(Lt)]}xt.forEach(function(Rt){var Pt=function(Nt,Vt){var ne=[];return Nt.reduce(function(Zt,ge){var Ce,Ne,be,vr,mr,Ei,an=Gt([Zt,ge],Vt);return an.bbox=(Ne=ge,be=(Ce=Zt)[0],vr=Ce[1],mr=Ne[0],Ei=Ne[1],[be<mr?be:mr,vr<Ei?vr:Ei,be>mr?be:mr,vr>Ei?vr:Ei]),ne.push(an),ge}),ne}(Rt,nt.properties);Pt.forEach(function(Nt){Nt.id=ht.length,ht.push(Nt)})})}})(j,I)}),Jt(I)};var Qe=s(1787);function se(M,I){var j=Le(M),nt=Le(I);if(j.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(nt.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var ht=j[0][0],xt=j[0][1],Lt=j[1][0],Rt=j[1][1],Pt=nt[0][0],Nt=nt[0][1],Vt=nt[1][0],ne=nt[1][1],Zt=(ne-Nt)*(Lt-ht)-(Vt-Pt)*(Rt-xt),ge=(Vt-Pt)*(xt-Nt)-(ne-Nt)*(ht-Pt),Ce=(Lt-ht)*(xt-Nt)-(Rt-xt)*(ht-Pt);if(Zt===0)return null;var Ne=ge/Zt,be=Ce/Zt;return Ne>=0&&Ne<=1&&be>=0&&be<=1?zt([ht+Ne*(Lt-ht),xt+Ne*(Rt-xt)]):null}let ve=function(M,I){var j={},nt=[];if(M.type==="LineString"&&(M=Ot(M)),I.type==="LineString"&&(I=Ot(I)),M.type==="Feature"&&I.type==="Feature"&&M.geometry!==null&&I.geometry!==null&&M.geometry.type==="LineString"&&I.geometry.type==="LineString"&&M.geometry.coordinates.length===2&&I.geometry.coordinates.length===2){var ht=se(M,I);return ht&&nt.push(ht),Jt(nt)}var xt=Qe();return xt.load(ae(I)),It(ae(M),function(Lt){It(xt.search(Lt),function(Rt){var Pt=se(Lt,Rt);if(Pt){var Nt=Le(Pt).join(",");j[Nt]||(j[Nt]=!0,nt.push(Pt))}})}),Jt(nt)},$e=function(M,I,j){j===void 0&&(j={});var nt=ai(M),ht=ai(I),xt=Ut(ht[1]-nt[1]),Lt=Ut(ht[0]-nt[0]),Rt=Ut(nt[1]),Pt=Ut(ht[1]),Nt=Math.pow(Math.sin(xt/2),2)+Math.pow(Math.sin(Lt/2),2)*Math.cos(Rt)*Math.cos(Pt);return Kt(2*Math.atan2(Math.sqrt(Nt),Math.sqrt(1-Nt)),j.units)},Ie=function(M){var I=M[0],j=M[1],nt=M[2],ht=M[3];if($e(M.slice(0,2),[nt,j])>=$e(M.slice(0,2),[I,ht])){var xt=(j+ht)/2;return[I,xt-(nt-I)/2,nt,xt+(nt-I)/2]}var Lt=(I+nt)/2;return[Lt-(ht-j)/2,j,Lt+(ht-j)/2,ht]};function fe(M){var I=[1/0,1/0,-1/0,-1/0];return We(M,function(j){I[0]>j[0]&&(I[0]=j[0]),I[1]>j[1]&&(I[1]=j[1]),I[2]<j[0]&&(I[2]=j[0]),I[3]<j[1]&&(I[3]=j[1])}),I}fe.default=fe;let Ye=fe,Ve=function(M,I){I===void 0&&(I={});var j=I.precision,nt=I.coordinates,ht=I.mutate;if(j=j==null||isNaN(j)?6:j,nt=nt==null||isNaN(nt)?3:nt,!M)throw new Error("<geojson> is required");if(typeof j!="number")throw new Error("<precision> must be a number");if(typeof nt!="number")throw new Error("<coordinates> must be a number");ht!==!1&&ht!==void 0||(M=JSON.parse(JSON.stringify(M)));var xt=Math.pow(10,j);return We(M,function(Lt){(function(Rt,Pt,Nt){Rt.length>Nt&&Rt.splice(Nt,Rt.length);for(var Vt=0;Vt<Rt.length;Vt++)Rt[Vt]=Math.round(Rt[Vt]*Pt)/Pt})(Lt,xt,nt)}),M};function ii(M,I,j){if(j===void 0&&(j={}),j.final===!0)return function(ne,Zt){var ge=ii(Zt,ne);return ge=(ge+180)%360}(M,I);var nt=ai(M),ht=ai(I),xt=Ut(nt[0]),Lt=Ut(ht[0]),Rt=Ut(nt[1]),Pt=Ut(ht[1]),Nt=Math.sin(Lt-xt)*Math.cos(Pt),Vt=Math.cos(Rt)*Math.sin(Pt)-Math.sin(Rt)*Math.cos(Pt)*Math.cos(Lt-xt);return Xt(Math.atan2(Nt,Vt))}function Ke(M,I,j,nt){nt===void 0&&(nt={});var ht=ai(M),xt=Ut(ht[0]),Lt=Ut(ht[1]),Rt=Ut(j),Pt=ie(I,nt.units),Nt=Math.asin(Math.sin(Lt)*Math.cos(Pt)+Math.cos(Lt)*Math.sin(Pt)*Math.cos(Rt));return zt([Xt(xt+Math.atan2(Math.sin(Rt)*Math.sin(Pt)*Math.cos(Lt),Math.cos(Pt)-Math.sin(Lt)*Math.sin(Nt))),Xt(Nt)],nt.properties)}let pr=function(M,I,j){j===void 0&&(j={});var nt=zt([1/0,1/0],{dist:1/0}),ht=0;return jt(M,function(xt){for(var Lt=Le(xt),Rt=0;Rt<Lt.length-1;Rt++){var Pt=zt(Lt[Rt]);Pt.properties.dist=$e(I,Pt,j);var Nt=zt(Lt[Rt+1]);Nt.properties.dist=$e(I,Nt,j);var Vt=$e(Pt,Nt,j),ne=Math.max(Pt.properties.dist,Nt.properties.dist),Zt=ii(Pt,Nt),ge=Ke(I,ne,Zt+90,j),Ce=Ke(I,ne,Zt-90,j),Ne=ve(Gt([ge.geometry.coordinates,Ce.geometry.coordinates]),Gt([Pt.geometry.coordinates,Nt.geometry.coordinates])),be=null;Ne.features.length>0&&((be=Ne.features[0]).properties.dist=$e(I,be,j),be.properties.location=ht+$e(Pt,be,j)),Pt.properties.dist<nt.properties.dist&&((nt=Pt).properties.index=Rt,nt.properties.location=ht),Nt.properties.dist<nt.properties.dist&&((nt=Nt).properties.index=Rt+1,nt.properties.location=ht+Vt),be&&be.properties.dist<nt.properties.dist&&((nt=be).properties.index=Rt),ht+=Vt}}),nt};function Je(M,I){var j=[],nt=Qe();return jt(I,function(ht){if(j.forEach(function(Rt,Pt){Rt.id=Pt}),j.length){var xt=nt.search(ht);if(xt.features.length){var Lt=cr(ht,xt);j=j.filter(function(Rt){return Rt.id!==Lt.id}),nt.remove(Lt),It(oi(Lt,ht),function(Rt){j.push(Rt),nt.insert(Rt)})}}else(j=oi(M,ht).features).forEach(function(Rt){Rt.bbox||(Rt.bbox=Ie(Ye(Rt)))}),nt.load(Jt(j))}),Jt(j)}function oi(M,I){var j=[],nt=Le(M)[0],ht=Le(M)[M.geometry.coordinates.length-1];if(ki(nt,ai(I))||ki(ht,ai(I)))return Jt([M]);var xt=Qe(),Lt=ae(M);xt.load(Lt);var Rt=xt.search(I);if(!Rt.features.length)return Jt([M]);var Pt=cr(I,Rt),Nt=function(Vt,ne,Zt){var ge=Zt;return It(Vt,function(Ce,Ne){ge=Ne===0&&Zt===void 0?Ce:ne(ge,Ce,Ne)}),ge}(Lt,function(Vt,ne,Zt){var ge=Le(ne)[1],Ce=ai(I);return Zt===Pt.id?(Vt.push(Ce),j.push(Gt(Vt)),ki(Ce,ge)?[Ce]:[Ce,ge]):(Vt.push(ge),Vt)},[nt]);return Nt.length>1&&j.push(Gt(Nt)),Jt(j)}function cr(M,I){if(!I.features.length)throw new Error("lines must contain features");if(I.features.length===1)return I.features[0];var j,nt=1/0;return It(I,function(ht){var xt=pr(ht,M).properties.dist;xt<nt&&(j=ht,nt=xt)}),j}function ki(M,I){return M[0]===I[0]&&M[1]===I[1]}let Tt=function(M,I){if(!M)throw new Error("line is required");if(!I)throw new Error("splitter is required");var j=ir(M),nt=ir(I);if(j!=="LineString")throw new Error("line must be LineString");if(nt==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(nt==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var ht=Ve(I,{precision:7});switch(nt){case"Point":return oi(M,ht);case"MultiPoint":return Je(M,ht);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Je(M,ve(M,ht))}};function Ht(M,I,j){if(j===void 0&&(j={}),!M)throw new Error("point is required");if(!I)throw new Error("polygon is required");var nt=ai(M),ht=Oe(I),xt=ht.type,Lt=I.bbox,Rt=ht.coordinates;if(Lt&&function(Zt,ge){return ge[0]<=Zt[0]&&ge[1]<=Zt[1]&&ge[2]>=Zt[0]&&ge[3]>=Zt[1]}(nt,Lt)===!1)return!1;xt==="Polygon"&&(Rt=[Rt]);for(var Pt=!1,Nt=0;Nt<Rt.length&&!Pt;Nt++)if(re(nt,Rt[Nt][0],j.ignoreBoundary)){for(var Vt=!1,ne=1;ne<Rt[Nt].length&&!Vt;)re(nt,Rt[Nt][ne],!j.ignoreBoundary)&&(Vt=!0),ne++;Vt||(Pt=!0)}return Pt}function re(M,I,j){var nt=!1;I[0][0]===I[I.length-1][0]&&I[0][1]===I[I.length-1][1]&&(I=I.slice(0,I.length-1));for(var ht=0,xt=I.length-1;ht<I.length;xt=ht++){var Lt=I[ht][0],Rt=I[ht][1],Pt=I[xt][0],Nt=I[xt][1];if(M[1]*(Lt-Pt)+Rt*(Pt-M[0])+Nt*(M[0]-Lt)==0&&(Lt-M[0])*(Pt-M[0])<=0&&(Rt-M[1])*(Nt-M[1])<=0)return!j;Rt>M[1]!=Nt>M[1]&&M[0]<(Pt-Lt)*(M[1]-Rt)/(Nt-Rt)+Lt&&(nt=!nt)}return nt}function Qt(M,I,j,nt,ht){var xt=j[0],Lt=j[1],Rt=M[0],Pt=M[1],Nt=I[0],Vt=I[1],ne=Nt-Rt,Zt=Vt-Pt,ge=(j[0]-Rt)*Zt-(j[1]-Pt)*ne;if(ht!==null){if(Math.abs(ge)>ht)return!1}else if(ge!==0)return!1;return nt?nt==="start"?Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<xt&&xt<=Nt:Nt<=xt&&xt<Rt:Zt>0?Pt<Lt&&Lt<=Vt:Vt<=Lt&&Lt<Pt:nt==="end"?Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<=xt&&xt<Nt:Nt<xt&&xt<=Rt:Zt>0?Pt<=Lt&&Lt<Vt:Vt<Lt&&Lt<=Pt:nt==="both"&&(Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<xt&&xt<Nt:Nt<xt&&xt<Rt:Zt>0?Pt<Lt&&Lt<Vt:Vt<Lt&&Lt<Pt):Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<=xt&&xt<=Nt:Nt<=xt&&xt<=Rt:Zt>0?Pt<=Lt&&Lt<=Vt:Vt<=Lt&&Lt<=Pt}let he=function(M,I,j){j===void 0&&(j={});for(var nt=ai(M),ht=Le(I),xt=0;xt<ht.length-1;xt++){var Lt=!1;if(j.ignoreEndVertices&&(xt===0&&(Lt="start"),xt===ht.length-2&&(Lt="end"),xt===0&&xt+1===ht.length-1&&(Lt="both")),Qt(ht[xt],ht[xt+1],nt,Lt,typeof j.epsilon>"u"?null:j.epsilon))return!0}return!1};function Ee(M,I){var j=Oe(M),nt=Oe(I),ht=j.type,xt=nt.type,Lt=j.coordinates,Rt=nt.coordinates;switch(ht){case"Point":if(xt==="Point")return ti(Lt,Rt);throw new Error("feature2 "+xt+" geometry not supported");case"MultiPoint":switch(xt){case"Point":return function(Pt,Nt){var Vt,ne=!1;for(Vt=0;Vt<Pt.coordinates.length;Vt++)if(ti(Pt.coordinates[Vt],Nt.coordinates)){ne=!0;break}return ne}(j,nt);case"MultiPoint":return function(Pt,Nt){for(var Vt=0,ne=Nt.coordinates;Vt<ne.length;Vt++){for(var Zt=ne[Vt],ge=!1,Ce=0,Ne=Pt.coordinates;Ce<Ne.length;Ce++)if(ti(Zt,Ne[Ce])){ge=!0;break}if(!ge)return!1}return!0}(j,nt);default:throw new Error("feature2 "+xt+" geometry not supported")}case"LineString":switch(xt){case"Point":return he(nt,j,{ignoreEndVertices:!0});case"LineString":return function(Pt,Nt){for(var Vt=!1,ne=0,Zt=Nt.coordinates;ne<Zt.length;ne++){var ge=Zt[ne];if(he({type:"Point",coordinates:ge},Pt,{ignoreEndVertices:!0})&&(Vt=!0),!he({type:"Point",coordinates:ge},Pt,{ignoreEndVertices:!1}))return!1}return Vt}(j,nt);case"MultiPoint":return function(Pt,Nt){for(var Vt=!1,ne=0,Zt=Nt.coordinates;ne<Zt.length;ne++){var ge=Zt[ne];if(he(ge,Pt,{ignoreEndVertices:!0})&&(Vt=!0),!he(ge,Pt))return!1}return!!Vt}(j,nt);default:throw new Error("feature2 "+xt+" geometry not supported")}case"Polygon":switch(xt){case"Point":return Ht(nt,j,{ignoreBoundary:!0});case"LineString":return function(Pt,Nt){var Vt=!1,ne=0,Zt=Ye(Pt),ge=Ye(Nt);if(!Ae(Zt,ge))return!1;for(;ne<Nt.coordinates.length-1;ne++)if(Ht({type:"Point",coordinates:Ue(Nt.coordinates[ne],Nt.coordinates[ne+1])},Pt,{ignoreBoundary:!0})){Vt=!0;break}return Vt}(j,nt);case"Polygon":return function(Pt,Nt){if(Pt.type==="Feature"&&Pt.geometry===null||Nt.type==="Feature"&&Nt.geometry===null)return!1;var Vt=Ye(Pt),ne=Ye(Nt);if(!Ae(Vt,ne))return!1;for(var Zt=Oe(Nt).coordinates,ge=0,Ce=Zt;ge<Ce.length;ge++)for(var Ne=0,be=Ce[ge];Ne<be.length;Ne++)if(!Ht(be[Ne],Pt))return!1;return!0}(j,nt);case"MultiPoint":return function(Pt,Nt){for(var Vt=0,ne=Nt.coordinates;Vt<ne.length;Vt++)if(!Ht(ne[Vt],Pt,{ignoreBoundary:!0}))return!1;return!0}(j,nt);default:throw new Error("feature2 "+xt+" geometry not supported")}default:throw new Error("feature1 "+ht+" geometry not supported")}}function Ae(M,I){return!(M[0]>I[0])&&!(M[2]<I[2])&&!(M[1]>I[1])&&!(M[3]<I[3])}function ti(M,I){return M[0]===I[0]&&M[1]===I[1]}function Ue(M,I){return[(M[0]+I[0])/2,(M[1]+I[1])/2]}var we=s(2676),pe=s.n(we);function yi(M){var I={type:"Feature"};return I.geometry=M,I}function ri(M){return M.type==="Feature"?M.geometry:M}function li(M){return M&&M.geometry&&M.geometry.coordinates?M.geometry.coordinates:M}function wi(M){return yi({type:"Polygon",coordinates:M})}function me(M){return yi({type:"MultiPolygon",coordinates:M})}function ui(M){return Array.isArray(M)?1+ui(M[0]):-1}function br(M){M instanceof L.Polyline&&(M=M.toGeoJSON(15));var I=li(M),j=ui(I),nt=[];return j>1?I.forEach(function(ht){nt.push(function(xt){return yi({type:"LineString",coordinates:xt})}(ht))}):nt.push(M),nt}function Xr(M){var I=[];return M.eachLayer(function(j){I.push(li(j.toGeoJSON(15)))}),function(j){return yi({type:"MultiLineString",coordinates:j})}(I)}function Se(M,I){return function(j){if(Array.isArray(j))return j}(M)||function(j,nt){var ht=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(ht!=null){var xt,Lt,Rt=[],Pt=!0,Nt=!1;try{for(ht=ht.call(j);!(Pt=(xt=ht.next()).done)&&(Rt.push(xt.value),!nt||Rt.length!==nt);Pt=!0);}catch(Vt){Nt=!0,Lt=Vt}finally{try{Pt||ht.return==null||ht.return()}finally{if(Nt)throw Lt}}return Rt}}(M,I)||function(j,nt){if(j){if(typeof j=="string")return Ln(j,nt);var ht=Object.prototype.toString.call(j).slice(8,-1);if(ht==="Object"&&j.constructor&&(ht=j.constructor.name),ht==="Map"||ht==="Set")return Array.from(j);if(ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return Ln(j,nt)}}(M,I)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ln(M,I){(I==null||I>M.length)&&(I=M.length);for(var j=0,nt=new Array(I);j<I;j++)nt[j]=M[j];return nt}function Vn(M){return function(I){if(Array.isArray(I))return ni(I)}(M)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(M)||function(I,j){if(I){if(typeof I=="string")return ni(I,j);var nt=Object.prototype.toString.call(I).slice(8,-1);if(nt==="Object"&&I.constructor&&(nt=I.constructor.name),nt==="Map"||nt==="Set")return Array.from(I);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return ni(I,j)}}(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ni(M,I){(I==null||I>M.length)&&(I=M.length);for(var j=0,nt=new Array(I);j<I;j++)nt[j]=M[j];return nt}pt.Cut=pt.Polygon.extend({initialize:function(M){this._map=M,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var M=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var I=this._layer.getLatLngs();if(!(I.length<=2)){var j=L.polygon(I,this.options.pathOptions);j._latlngInfos=this._layer._latlngInfo,this.cut(j),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(nt){var ht=nt.layer,xt=nt.originalLayer;M._fireCut(xt,ht,xt),M._fireCut(M._map,ht,xt),xt.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(M){var I=this,j=this._map._layers,nt=M._latlngInfos||[];Object.keys(j).map(function(ht){return j[ht]}).filter(function(ht){return ht.pm}).filter(function(ht){return!ht._pmTempLayer}).filter(function(ht){return!L.PM.optIn&&!ht.options.pmIgnore||L.PM.optIn&&ht.options.pmIgnore===!1}).filter(function(ht){return ht instanceof L.Polyline}).filter(function(ht){return ht!==M}).filter(function(ht){return ht.pm.options.allowCutting}).filter(function(ht){return!(I.options.layersToCut&&L.Util.isArray(I.options.layersToCut)&&I.options.layersToCut.length>0)||I.options.layersToCut.indexOf(ht)>-1}).filter(function(ht){return!I._layerGroup.hasLayer(ht)}).filter(function(ht){try{var xt=!!ve(M.toGeoJSON(15),ht.toGeoJSON(15)).features.length>0;return xt||ht instanceof L.Polyline&&!(ht instanceof L.Polygon)?xt:(Lt=M.toGeoJSON(15),Rt=ht.toGeoJSON(15),Pt=ri(Lt),Nt=ri(Rt),!((Vt=pe().intersection(Pt.coordinates,Nt.coordinates)).length===0||!(Vt.length===1?wi(Vt[0]):me(Vt))))}catch{return ht instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var Lt,Rt,Pt,Nt,Vt}).forEach(function(ht){var xt;if(ht instanceof L.Polygon){var Lt=(xt=L.polygon(ht.getLatLngs())).getLatLngs();nt.forEach(function(Zt){if(Zt&&Zt.snapInfo){var ge=Zt.latlng,Ce=I._calcClosestLayer(ge,[xt]);if(Ce&&Ce.segment&&Ce.distance<I.options.snapDistance){var Ne=Ce.segment;if(Ne&&Ne.length===2){var be=L.PM.Utils._getIndexFromSegment(Lt,Ne),vr=be.indexPath,mr=be.parentPath,Ei=be.newIndex;(vr.length>1?R()(Lt,mr):Lt).splice(Ei,0,ge)}}}})}else xt=ht;var Rt=I._cutLayer(M,xt),Pt=L.geoJSON(Rt,ht.options);if(Pt.getLayers().length===1){var Nt=Pt.getLayers();Pt=Se(Nt,1)[0]}I._setPane(Pt,"layerPane");var Vt=Pt.addTo(I._map.pm._getContainingLayer());if(Vt.pm.enable(ht.pm.options),Vt.pm.disable(),ht._pmTempLayer=!0,M._pmTempLayer=!0,ht.remove(),ht.removeFrom(I._map.pm._getContainingLayer()),M.remove(),M.removeFrom(I._map.pm._getContainingLayer()),Vt.getLayers&&Vt.getLayers().length===0&&I._map.pm.removeLayer({target:Vt}),Vt instanceof L.LayerGroup&&Vt.eachLayer(function(Zt){I._addDrawnLayerProp(Zt)}),I._addDrawnLayerProp(Vt),I.options.layersToCut&&L.Util.isArray(I.options.layersToCut)&&I.options.layersToCut.length>0){var ne=I.options.layersToCut.indexOf(ht);ne>-1&&I.options.layersToCut.splice(ne,1)}I._editedLayers.push({layer:Vt,originalLayer:ht})})},_cutLayer:function(M,I){var j,nt,ht,xt,Lt,Rt,Pt=L.geoJSON();if(I instanceof L.Polygon)nt=I.toGeoJSON(15),ht=M.toGeoJSON(15),xt=ri(nt),Lt=ri(ht),j=(Rt=pe().difference(xt.coordinates,Lt.coordinates)).length===0?null:Rt.length===1?wi(Rt[0]):me(Rt);else{var Nt=br(I);Nt.forEach(function(Vt){var ne=Tt(Vt,M.toGeoJSON(15));(ne&&ne.features.length>0?L.geoJSON(ne):L.geoJSON(Vt)).getLayers().forEach(function(Zt){Ee(M.toGeoJSON(15),Zt.toGeoJSON(15))||Zt.addTo(Pt)})}),j=Nt.length>1?Xr(Pt):Pt.toGeoJSON(15)}return j},_change:L.Util.falseFn}),pt.Text=pt.extend({initialize:function(M){this._map=M,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(M){L.Util.setOptions(this,M),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var I=M;I.target=this._hintMarker,this._handleSnapping(I)}},_createMarker:function(M){var I;if(M.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var j=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(I=this.options.textOptions)!==null&&I!==void 0&&I.className){var nt,ht=this.options.textOptions.className.split(" ");(nt=this.textArea.classList).add.apply(nt,Vn(ht))}var xt=this._createTextIcon(this.textArea),Lt=new L.Marker(j,{textMarker:!0,_textMarkerOverPM:!0,icon:xt});if(this._setPane(Lt,"markerPane"),this._finishLayer(Lt),Lt.pm||(Lt.options.draggable=!1),Lt.addTo(this._map.pm._getContainingLayer()),Lt.pm){var Rt,Pt,Nt,Vt,ne;Lt.pm.textArea=this.textArea,L.setOptions(Lt.pm,{removeIfEmpty:(Rt=(Pt=this.options.textOptions)===null||Pt===void 0?void 0:Pt.removeIfEmpty)===null||Rt===void 0||Rt});var Zt=(Nt=(Vt=this.options.textOptions)===null||Vt===void 0?void 0:Vt.focusAfterDraw)===null||Nt===void 0||Nt;Lt.pm._createTextMarker(Zt),(ne=this.options.textOptions)!==null&&ne!==void 0&&ne.text&&Lt.pm.setText(this.options.textOptions.text)}this._fireCreate(Lt),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var M=document.createElement("textarea");return M.autofocus=!0,M.readOnly=!0,M.classList.add("pm-textarea","pm-disabled"),M},_createTextIcon:function(M){return L.divIcon({className:"pm-text-marker",html:M})}});let ze={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,wt(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var M=this._getDOMElem();M&&(wt(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(M)):L.DomEvent.on(M,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,wt(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var M=this._getDOMElem();M&&(wt(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(M)):L.DomEvent.off(M,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(M){var I=M.touches?M.touches[0]:M,j={originalEvent:I,target:this._layer};return j.containerPoint=this._map.mouseEventToContainerPoint(I),j.latlng=this._map.containerPointToLatLng(j.containerPoint),this._dragMixinOnMouseDown(j),!1},_simulateMouseMoveEvent:function(M){var I=M.touches?M.touches[0]:M,j={originalEvent:I,target:this._layer};return j.containerPoint=this._map.mouseEventToContainerPoint(I),j.latlng=this._map.containerPointToLatLng(j.containerPoint),this._dragMixinOnMouseMove(j),!1},_simulateMouseUpEvent:function(M){var I={originalEvent:M.touches?M.touches[0]:M,target:this._layer};return M.type.indexOf("touch")===-1&&(I.containerPoint=this._map.mouseEventToContainerPoint(M),I.latlng=this._map.containerPointToLatLng(I.containerPoint)),this._dragMixinOnMouseUp(I),!1},_dragMixinOnMouseDown:function(M){if(!(M.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(M);var I=M._fromLayerSync,j=this._syncLayers("_dragMixinOnMouseDown",M);this._layer instanceof L.Marker&&(!this.options.snappable||I||j?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||I||j?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=M.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(M){this._overwriteEventIfItComesFromMarker(M);var I=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",M),this._dragging||(this._dragging=!0,L.DomUtil.addClass(I,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=M.latlng),this._onLayerDrag(M),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(M){var I=this,j=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",M),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){I._dragging=!1,j&&L.DomUtil.removeClass(j,"leaflet-pm-dragging"),I._fireDragEnd(),I._fireEdit(),I._layerEdited=!0},10),!0)},_onLayerDrag:function(M){var I=M.latlng,j=I.lat-this._tempDragCoord.lat,nt=I.lng-this._tempDragCoord.lng,ht=function Vt(ne){return ne.map(function(Zt){if(Array.isArray(Zt))return Vt(Zt);var ge={lat:Zt.lat+j,lng:Zt.lng+nt};return(Zt.alt||Zt.alt===0)&&(ge.alt=Zt.alt),ge})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var xt=ht([this._layer.getLatLng()]);this._layer.setLatLng(xt[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var Lt=this._layer.getLatLng();this._layer._snapped&&(Lt=this._layer._orgLatLng);var Rt=ht([Lt]);this._layer.setLatLng(Rt[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var Pt=ht([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(Pt),this._fireChange(this._layer.getBounds(),"Edit")}else{var Nt=ht(this._layer.getLatLngs());this._layer.setLatLngs(Nt),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=I,M.layer=this._layer,this._fireDrag(M)},addDraggingClass:function(){var M=this._getDOMElem();M&&L.DomUtil.addClass(M,"leaflet-pm-draggable")},removeDraggingClass:function(){var M=this._getDOMElem();M&&L.DomUtil.removeClass(M,"leaflet-pm-draggable")},_getDOMElem:function(){var M=null;return this._layer._path?M=this._layer._path:this._layer._renderer&&this._layer._renderer._container?M=this._layer._renderer._container:this._layer._image?M=this._layer._image:this._layer._icon&&(M=this._layer._icon),M},_overwriteEventIfItComesFromMarker:function(M){M.target.getLatLng&&(!M.target._radius||M.target._radius<=10)&&(M.containerPoint=this._map.mouseEventToContainerPoint(M.originalEvent),M.latlng=this._map.containerPointToLatLng(M.containerPoint))},_syncLayers:function(M,I){var j=this;if(this.enabled())return!1;if(!I._fromLayerSync&&this._layer===I.target&&this.options.syncLayersOnDrag){I._fromLayerSync=!0;var nt=[];if(L.Util.isArray(this.options.syncLayersOnDrag))nt=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(Lt){Lt instanceof L.LayerGroup&&(nt=nt.concat(Lt.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var ht in this._parentLayerGroup){var xt=this._parentLayerGroup[ht];xt.pm&&(nt=xt.pm.getLayers(!0))}return L.Util.isArray(nt)&&nt.length>0&&(nt=nt.filter(function(Lt){return!!Lt.pm}).filter(function(Lt){return!!Lt.pm.options.draggable})).forEach(function(Lt){Lt!==j._layer&&Lt.pm[M]&&(Lt._snapped=!1,Lt.pm[M](I))}),nt.length>0}return!1},_stopDOMImageDrag:function(M){return M.preventDefault(),!1}};function Tr(M,I,j){var nt=j.getMaxZoom();if(nt===1/0&&(nt=j.getZoom()),L.Util.isArray(M)){var ht=[];return M.forEach(function(xt){ht.push(Tr(xt,I,j))}),ht}return M instanceof L.LatLng?function(xt,Lt,Rt,Pt){return Rt.unproject(Lt.transform(Rt.project(xt,Pt)),Pt)}(M,I,j,nt):null}function Rr(M,I){I instanceof L.Layer&&(I=I.getLatLng());var j=M.getMaxZoom();return j===1/0&&(j=M.getZoom()),M.project(I,j)}function bn(M,I){var j=M.getMaxZoom();return j===1/0&&(j=M.getZoom()),M.unproject(I,j)}var oe={_onRotateStart:function(M){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Rr(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Rr(this._map,M.target.getLatLng()),this._initialRotateLatLng=rt(this._layer),this._startAngle=this.getAngle();var I=rt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,I),this._fireRotationStart(this._map,I)},_onRotate:function(M){var I=Rr(this._map,M.target.getLatLng()),j=this._rotationStartPoint,nt=this._rotationOriginPoint,ht=Math.atan2(I.y-nt.y,I.x-nt.x)-Math.atan2(j.y-nt.y,j.x-nt.x);this._layer.setLatLngs(this._rotateLayer(ht,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var xt=this;(function Nt(Vt){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(Zt>-1&&ne.push(Zt),L.Util.isArray(Vt[0]))Vt.forEach(function(Ce,Ne){return Nt(Ce,ne.slice(),Ne)});else{var ge=R()(xt._markers,ne);Vt.forEach(function(Ce,Ne){ge[Ne].setLatLng(Ce)})}})(this._layer.getLatLngs());var Lt=rt(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(ht,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var Rt=180*ht/Math.PI,Pt=(Rt=Rt<0?Rt+360:Rt)+this._startAngle;this._setAngle(Pt),this._rotationLayer.pm._setAngle(Pt),this._fireRotation(this._rotationLayer,Rt,Lt),this._fireRotation(this._map,Rt,Lt),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var M=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var I=rt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=rt(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,M,I),this._fireRotationEnd(this._map,M,I),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(M,I,j,nt,ht){var xt=Rr(ht,j);return this._matrix=nt.clone().rotate(M,xt).flip(),Tr(I,this._matrix,ht)},_setAngle:function(M){M=M<0?M+360:M,this._angle=M%360},_getRotationCenter:function(){var M=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),I=M.getCenter();return M.removeFrom(this._layer._map),I},enableRotate:function(){this.options.allowRotation?(this.rotateEnabled()&&this.disableRotate(),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=rt(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(M){var I=this.getAngle(),j=this._layer.getLatLngs(),nt=M*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(nt,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+M),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(nt,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var ht=this.getAngle()-I;ht=ht<0?ht+360:ht,this._startAngle=I,this._fireRotation(this._layer,ht,j,this._layer),this._fireRotation(this._map||this._layer._map,ht,j,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(M){var I=M-this.getAngle();this.rotateLayer(I)},getAngle:function(){return this._angle||0},setInitAngle:function(M){this._setAngle(M)}};let Ar=oe,gi=L.Class.extend({includes:[ze,lt,Ar,C],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(M){L.Util.setOptions(this,M)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(M,I){I==="layerPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":I==="vertexPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":I==="markerPane"&&(M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(M,I){var j=I.target,nt={layer:this._layer,marker:j,event:I},ht="";return M==="move"?ht="moveVertexValidation":M==="add"?ht="addVertexValidation":M==="remove"&&(ht="removeVertexValidation"),this.options[ht]&&typeof this.options[ht]=="function"&&!this.options[ht](nt)?(M==="move"&&(j._cancelDragEventChain=j.getLatLng()),!1):(j._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(M){return!M._cancelDragEventChain||(M._latlng=M._cancelDragEventChain,M.update(),!1)},_vertexValidationDragEnd:function(M){return!M._cancelDragEventChain||(M._cancelDragEventChain=null,!1)}});function _r(M){return function(I){if(Array.isArray(I))return on(I)}(M)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(M)||function(I,j){if(I){if(typeof I=="string")return on(I,j);var nt=Object.prototype.toString.call(I).slice(8,-1);if(nt==="Object"&&I.constructor&&(nt=I.constructor.name),nt==="Map"||nt==="Set")return Array.from(I);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return on(I,j)}}(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function on(M,I){(I==null||I>M.length)&&(I=M.length);for(var j=0,nt=new Array(I);j<I;j++)nt[j]=M[j];return nt}gi.LayerGroup=L.Class.extend({initialize:function(M){var I=this;this._layerGroup=M,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(j){return I._initLayer(j)}),this._layerGroup.on("layeradd",L.Util.throttle(function(j){if(!j.layer._pmTempLayer){I._layers=I.getLayers();var nt=I._layers.filter(function(ht){return!ht.pm._parentLayerGroup||!(I._layerGroup._leaflet_id in ht.pm._parentLayerGroup)});nt.forEach(function(ht){I._initLayer(ht)}),nt.length>0&&I._getMap()&&I._getMap().pm.globalEditModeEnabled()&&I.enabled()&&I.enable(I.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(j){I._removeLayerFromGroup(j.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(j){j.target._pmTempLayer||(I._layers=I.getLayers())},100,this),this)},enable:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];I.length===0&&(this._layers=this.getLayers()),this._options=M,this._layers.forEach(function(j){j instanceof L.LayerGroup?I.indexOf(j._leaflet_id)===-1&&(I.push(j._leaflet_id),j.pm.enable(M,I)):j.pm.enable(M)})},disable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];M.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(I){I instanceof L.LayerGroup?M.indexOf(I._leaflet_id)===-1&&(M.push(I._leaflet_id),I.pm.disable(M)):I.pm.disable()})},enabled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];M.length===0&&(this._layers=this.getLayers());var I=this._layers.find(function(j){return j instanceof L.LayerGroup?M.indexOf(j._leaflet_id)===-1&&(M.push(j._leaflet_id),j.pm.enabled(M)):j.pm.enabled()});return!!I},toggleEdit:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];I.length===0&&(this._layers=this.getLayers()),this._options=M,this._layers.forEach(function(j){j instanceof L.LayerGroup?I.indexOf(j._leaflet_id)===-1&&(I.push(j._leaflet_id),j.pm.toggleEdit(M,I)):j.pm.toggleEdit(M)})},_initLayer:function(M){var I=L.Util.stamp(this._layerGroup);M.pm._parentLayerGroup||(M.pm._parentLayerGroup={}),M.pm._parentLayerGroup[I]=this._layerGroup},_removeLayerFromGroup:function(M){if(M.pm&&M.pm._layerGroup){var I=L.Util.stamp(this._layerGroup);delete M.pm._layerGroup[I]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var M=this._layers.find(function(I){return I.pm.dragging()});return!!M}return!1},getOptions:function(){return this.options},_getMap:function(){var M;return this._map||((M=this._layers.find(function(I){return!!I._map}))===null||M===void 0?void 0:M._map)||null},getLayers:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],I=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],j=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],ht=[];return M?this._layerGroup.getLayers().forEach(function(xt){ht.push(xt),xt instanceof L.LayerGroup&&nt.indexOf(xt._leaflet_id)===-1&&(nt.push(xt._leaflet_id),ht=ht.concat(xt.pm.getLayers(!0,!0,!0,nt)))}):ht=this._layerGroup.getLayers(),j&&(ht=ht.filter(function(xt){return!(xt instanceof L.LayerGroup)})),I&&(ht=(ht=(ht=ht.filter(function(xt){return!!xt.pm})).filter(function(xt){return!xt._pmTempLayer})).filter(function(xt){return!L.PM.optIn&&!xt.options.pmIgnore||L.PM.optIn&&xt.options.pmIgnore===!1})),ht},setOptions:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];I.length===0&&(this._layers=this.getLayers()),this.options=M,this._layers.forEach(function(j){j.pm&&(j instanceof L.LayerGroup?I.indexOf(j._leaflet_id)===-1&&(I.push(j._leaflet_id),j.pm.setOptions(M,I)):j.pm.setOptions(M))})}}),gi.Marker=gi.extend({_shape:"Marker",initialize:function(M){this._layer=M,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,M),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(M){var I=M.target;I.remove(),this._fireRemove(I),this._fireRemove(this._map,I)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var M=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,M.off("pm:drag",this._handleSnapping,this),M.on("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.on("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this),M.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var M=this._layer;M.off("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this)}});let yr={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var M=[].concat(_r(this._markerGroup.getLayers()),_r(this.markerCache));this.markerCache=M.filter(function(I,j,nt){return nt.indexOf(I)===j})},renderLimits:function(M){var I=this;this.markerCache.forEach(function(j){M.includes(j)?I._markerGroup.addLayer(j):I._markerGroup.removeLayer(j)})},applyLimitFilters:function(M){var I=M.latlng,j=I===void 0?{lat:0,lng:0}:I;if(!this._preventRenderMarkers){var nt=_r(this._filterClosestMarkers(j));this.renderLimits(nt)}},_filterClosestMarkers:function(M){var I=_r(this.markerCache),j=this.options.limitMarkersToCount;return j===-1?I:(I.sort(function(nt,ht){return nt._latlng.distanceTo(M)-ht._latlng.distanceTo(M)}),I.filter(function(nt,ht){return!(j>-1)||ht<j}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(M){this._preventRenderMarkers=!!M}};function hi(M,I){return function(j){if(Array.isArray(j))return j}(M)||function(j,nt){var ht=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(ht!=null){var xt,Lt,Rt=[],Pt=!0,Nt=!1;try{for(ht=ht.call(j);!(Pt=(xt=ht.next()).done)&&(Rt.push(xt.value),!nt||Rt.length!==nt);Pt=!0);}catch(Vt){Nt=!0,Lt=Vt}finally{try{Pt||ht.return==null||ht.return()}finally{if(Nt)throw Lt}}return Rt}}(M,I)||function(j,nt){if(j){if(typeof j=="string")return fi(j,nt);var ht=Object.prototype.toString.call(j).slice(8,-1);if(ht==="Object"&&j.constructor&&(ht=j.constructor.name),ht==="Map"||ht==="Set")return Array.from(j);if(ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return fi(j,nt)}}(M,I)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fi(M,I){(I==null||I>M.length)&&(I=M.length);for(var j=0,nt=new Array(I);j<I;j++)nt[j]=M[j];return nt}function Ti(M){return function(I){if(Array.isArray(I))return $r(I)}(M)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(M)||function(I,j){if(I){if(typeof I=="string")return $r(I,j);var nt=Object.prototype.toString.call(I).slice(8,-1);if(nt==="Object"&&I.constructor&&(nt=I.constructor.name),nt==="Map"||nt==="Set")return Array.from(I);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return $r(I,j)}}(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $r(M,I){(I==null||I>M.length)&&(I=M.length);for(var j=0,nt=new Array(I);j<I;j++)nt[j]=M[j];return nt}gi.Line=gi.extend({includes:[yr],_shape:"Line",initialize:function(M){this._layer=M,this._enabled=!1},enable:function(M){L.Util.setOptions(this,M),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var M=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(M,"leaflet-pm-draggable"),this._map.hasLayer(this._layer)&&!this.hasSelfIntersection()||L.DomUtil.removeClass(M,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(M){return this.enabled()?this.disable():this.enable(M),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var M=this,I=this._map,j=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function nt(ht){if(Array.isArray(ht[0]))return ht.map(nt,M);var xt=ht.map(M._createMarker,M);return M.options.hideMiddleMarkers!==!0&&ht.map(function(Lt,Rt){var Pt=M.isPolygon()?(Rt+1)%ht.length:Rt+1;return M._createMiddleMarker(xt[Rt],xt[Pt])}),xt}(j),this.filterMarkerGroup(),I.addLayer(this._markerGroup)},_createMarker:function(M){var I=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(I,"vertexPane"),I._pmTempLayer=!0,this.options.rotate?(I.on("dragstart",this._onRotateStart,this),I.on("drag",this._onRotate,this),I.on("dragend",this._onRotateEnd,this)):(I.on("click",this._onVertexClick,this),I.on("dragstart",this._onMarkerDragStart,this),I.on("move",this._onMarkerDrag,this),I.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||I.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(I),I},_createMiddleMarker:function(M,I){if(!M||!I)return!1;var j=L.PM.Utils.calcMiddleLatLng(this._map,M.getLatLng(),I.getLatLng()),nt=this._createMarker(j),ht=L.divIcon({className:"marker-icon marker-icon-middle"});return nt.setIcon(ht),nt.leftM=M,nt.rightM=I,M._middleMarkerNext=nt,I._middleMarkerPrev=nt,nt.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),nt.on("movestart",this._onMiddleMarkerMoveStart,this),nt},_onMiddleMarkerClick:function(M){var I=M.target;if(this._vertexValidation("add",M)){var j=L.divIcon({className:"marker-icon"});I.setIcon(j),this._addMarker(I,I.leftM,I.rightM)}},_onMiddleMarkerMoveStart:function(M){var I=M.target;I.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",M)?(I._dragging=!0,this._addMarker(I,I.leftM,I.rightM)):I.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(M){var I=M.target;this._vertexValidationDrag(I)},_onMiddleMarkerMoveEnd:function(M){var I=M.target;if(I.off("move",this._onMiddleMarkerMovePrevent,this),I.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(I)){var j=L.divIcon({className:"marker-icon"});I.setIcon(j),setTimeout(function(){delete I._dragging},100)}},_addMarker:function(M,I,j){M.off("movestart",this._onMiddleMarkerMoveStart,this),M.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var nt=M.getLatLng(),ht=this._layer._latlngs;delete M.leftM,delete M.rightM;var xt=L.PM.Utils.findDeepMarkerIndex(this._markers,I),Lt=xt.indexPath,Rt=xt.index,Pt=xt.parentPath,Nt=Lt.length>1?R()(ht,Pt):ht,Vt=Lt.length>1?R()(this._markers,Pt):this._markers;Nt.splice(Rt+1,0,nt),Vt.splice(Rt+1,0,M),this._layer.setLatLngs(ht),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(I,M),this._createMiddleMarker(M,j)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(M,L.PM.Utils.findDeepMarkerIndex(this._markers,M).indexPath,nt),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return le(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(M){var I=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;M?this._flashLayer():(I.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(le(this._layer.toGeoJSON(15)))}else I.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var M=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){M._layer.setStyle({color:M.cachedColor}),M.isRed=!1},200)},_updateDisabledMarkerStyle:function(M,I){var j=this;M.forEach(function(nt){Array.isArray(nt)?j._updateDisabledMarkerStyle(nt,I):nt._icon&&(I&&!j._checkMarkerAllowedToDrag(nt)?L.DomUtil.addClass(nt._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(nt._icon,"vertexmarker-disabled"))})},_removeMarker:function(M){var I=M.target;if(this._vertexValidation("remove",M)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=rt(this._layer,this._layer.getLatLngs()));var j=this._layer.getLatLngs(),nt=L.PM.Utils.findDeepMarkerIndex(this._markers,I),ht=nt.indexPath,xt=nt.index,Lt=nt.parentPath;if(ht){var Rt=ht.length>1?R()(j,Lt):j,Pt=ht.length>1?R()(this._markers,Lt):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(Rt.length<=2||this.isPolygon()&&Rt.length<=3)){Rt.splice(xt,1),this._layer.setLatLngs(j),this.isPolygon()&&Rt.length<=2&&Rt.splice(0,Rt.length);var Nt=!1;if(Rt.length<=1&&(Rt.splice(0,Rt.length),Lt.length>1&&ht.length>1&&(j=dt(j)),this._layer.setLatLngs(j),this._initMarkers(),Nt=!0),ot(j)||this._layer.remove(),j=dt(j),this._layer.setLatLngs(j),this._markers=dt(this._markers),!Nt&&(Pt=ht.length>1?R()(this._markers,Lt):this._markers,I._middleMarkerPrev&&this._markerGroup.removeLayer(I._middleMarkerPrev),I._middleMarkerNext&&this._markerGroup.removeLayer(I._middleMarkerNext),this._markerGroup.removeLayer(I),Pt)){var Vt,ne;if(this.isPolygon()?(Vt=(xt+1)%Pt.length,ne=(xt+(Pt.length-1))%Pt.length):(ne=xt-1<0?void 0:xt-1,Vt=xt+1>=Pt.length?void 0:xt+1),Vt!==ne){var Zt=Pt[ne],ge=Pt[Vt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Zt,ge)}Pt.splice(xt,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(I,ht),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(M){var I=this._layer.getLatLngs(),j=M.getLatLng(),nt=L.PM.Utils.findDeepMarkerIndex(this._markers,M),ht=nt.indexPath,xt=nt.index,Lt=nt.parentPath;(ht.length>1?R()(I,Lt):I).splice(xt,1,j),this._layer.setLatLngs(I)},_getNeighborMarkers:function(M){var I=L.PM.Utils.findDeepMarkerIndex(this._markers,M),j=I.indexPath,nt=I.index,ht=I.parentPath,xt=j.length>1?R()(this._markers,ht):this._markers,Lt=(nt+1)%xt.length;return{prevMarker:xt[(nt+(xt.length-1))%xt.length],nextMarker:xt[Lt]}},_checkMarkerAllowedToDrag:function(M){var I=this._getNeighborMarkers(M),j=I.prevMarker,nt=I.nextMarker,ht=L.polyline([j.getLatLng(),M.getLatLng()]),xt=L.polyline([M.getLatLng(),nt.getLatLng()]),Lt=ve(this._layer.toGeoJSON(15),ht.toGeoJSON(15)).features.length,Rt=ve(this._layer.toGeoJSON(15),xt.toGeoJSON(15)).features.length;return M.getLatLng()===this._markers[0][0].getLatLng()?Rt+=1:M.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(Lt+=1),!(Lt<=2&&Rt<=2)},_onMarkerDragStart:function(M){var I=M.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",M)){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,I).indexPath;this._fireMarkerDragStart(M,j),this.options.allowSelfIntersection||(this._coordsBeforeEdit=rt(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(I):this._markerAllowedToDrag=null}},_onMarkerDrag:function(M){var I=M.target;if(this._vertexValidationDrag(I)){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,I),nt=j.indexPath,ht=j.index,xt=j.parentPath;if(nt){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(I);var Lt=nt.length>1?R()(this._markers,xt):this._markers,Rt=(ht+1)%Lt.length,Pt=(ht+(Lt.length-1))%Lt.length,Nt=I.getLatLng(),Vt=Lt[Pt].getLatLng(),ne=Lt[Rt].getLatLng();if(I._middleMarkerNext){var Zt=L.PM.Utils.calcMiddleLatLng(this._map,Nt,ne);I._middleMarkerNext.setLatLng(Zt)}if(I._middleMarkerPrev){var ge=L.PM.Utils.calcMiddleLatLng(this._map,Nt,Vt);I._middleMarkerPrev.setLatLng(ge)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(M,nt),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(M){var I=M.target;if(this._vertexValidationDragEnd(I)){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,I).indexPath,nt=this.hasSelfIntersection();nt&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(nt=!1);var ht=!this.options.allowSelfIntersection&&nt;if(this._fireMarkerDragEnd(M,j,ht),ht)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(M,j);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(M){var I=M.target;if(!I._dragging){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,I).indexPath;this._fireVertexClick(M,j)}}}),gi.Polygon=gi.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(M){var I=this._getNeighborMarkers(M),j=I.prevMarker,nt=I.nextMarker,ht=L.polyline([j.getLatLng(),M.getLatLng()]),xt=L.polyline([M.getLatLng(),nt.getLatLng()]),Lt=ve(this._layer.toGeoJSON(15),ht.toGeoJSON(15)).features.length,Rt=ve(this._layer.toGeoJSON(15),xt.toGeoJSON(15)).features.length;return!(Lt<=2&&Rt<=2)}}),gi.Rectangle=gi.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var M=this,I=this._map,j=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,I.addLayer(this._markerGroup),this._markers=[],this._markers[0]=j.map(this._createMarker,this);var nt=hi(this._markers,1);this._cornerMarkers=nt[0],this._layer.getLatLngs()[0].forEach(function(ht,xt){var Lt=M._cornerMarkers.find(function(Rt){return Rt._index===xt});Lt&&Lt.setLatLng(ht)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(M,I){var j=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(j,"vertexPane"),j._origLatLng=M,j._index=I,j._pmTempLayer=!0,this._markerGroup.addLayer(j),j},_addMarkerEvents:function(){var M=this;this._markers[0].forEach(function(I){I.on("dragstart",M._onMarkerDragStart,M),I.on("drag",M._onMarkerDrag,M),I.on("dragend",M._onMarkerDragEnd,M),M.options.preventMarkerRemoval||I.on("contextmenu",M._removeMarker,M)})},_removeMarker:function(){return null},_onMarkerDragStart:function(M){if(this._vertexValidation("move",M)){var I=M.target,j=this._cornerMarkers;I._oppositeCornerLatLng=j.find(function(nt){return nt._index===(I._index+2)%4}).getLatLng(),I._snapped=!1,this._fireMarkerDragStart(M)}},_onMarkerDrag:function(M){var I=M.target;this._vertexValidationDrag(I)&&I._index!==void 0&&(this._adjustRectangleForMarkerMove(I),this._fireMarkerDrag(M),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(M){var I=M.target;this._vertexValidationDragEnd(I)&&(this._cornerMarkers.forEach(function(j){delete j._oppositeCornerLatLng}),this._fireMarkerDragEnd(M),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(M){L.extend(M._origLatLng,M._latlng);var I=L.PM.Utils._getRotatedRectangle(M.getLatLng(),M._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(I),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var M=this,I=this._layer.getLatLngs()[0];I&&I.length!==4&&I.length>0?(I.forEach(function(j,nt){M._cornerMarkers[nt].setLatLng(j)}),this._cornerMarkers.slice(I.length).forEach(function(j){j.setLatLng(I[0])})):I&&I.length?this._cornerMarkers.forEach(function(j){j.setLatLng(I[j._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var M=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(M[0],M[2],this._angle||0,this._map)}}),gi.Circle=gi.extend({_shape:"Circle",initialize:function(M){this._layer=M,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(M){L.Util.setOptions(this,M),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var M=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(M,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},_initMarkers:function(){var M=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(M);var I=this._layer.getLatLng(),j=this._layer._radius,nt=this._getLatLngOnCircle(I,j);this._centerMarker=this._createCenterMarker(I),this._outerMarker=this._createOuterMarker(nt),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(M,I){var j=M.getLatLng(),nt=I.getLatLng();this._hintline=L.polyline([j,nt],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(M){var I=this._createMarker(M);return L.DomUtil.addClass(I._icon,"leaflet-pm-draggable"),I.on("drag",this._moveCircle,this),I.on("dragstart",this._onCircleDragStart,this),I.on("drag",this._onCircleDrag,this),I.on("dragend",this._onCircleDragEnd,this),I},_createOuterMarker:function(M){var I=this._createMarker(M);return I.on("drag",this._resizeCircle,this),I},_createMarker:function(M){var I=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(I,"vertexPane"),I._origLatLng=M,I._pmTempLayer=!0,I.on("dragstart",this._onMarkerDragStart,this),I.on("drag",this._onMarkerDrag,this),I.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(I),I},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(M){if(!M.target._cancelDragEventChain){var I=M.latlng;this._layer.setLatLng(I);var j=this._layer._radius,nt=this._getLatLngOnCircle(I,j);this._outerMarker._latlng=nt,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var M=this._centerMarker.getLatLng(),I=this._outerMarker.getLatLng(),j=this._map.distance(M,I);this.options.minRadiusCircle&&j<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(j),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),I=this._outerMarker.getLatLng();this._hintline.setLatLngs([M,I])},_disableSnapping:function(){var M=this;this._markers.forEach(function(I){I.off("move",M._syncHintLine,M),I.off("move",M._syncCircleRadius,M),I.off("drag",M._handleSnapping,M),I.off("dragend",M._cleanupSnapping,M)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(M){this._vertexValidation("move",M)&&this._fireMarkerDragStart(M)},_onMarkerDrag:function(M){var I=M.target;this._vertexValidationDrag(I)&&this._fireMarkerDrag(M)},_onMarkerDragEnd:function(M){var I=M.target;this._vertexValidationDragEnd(I)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(M))},_onCircleDragStart:function(M){this._vertexValidationDrag(M.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(M){this._vertexValidationReset||this._fireDrag(M)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var M=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!M).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!M),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(M,I){var j=this._map.project(M),nt=L.point(j.x+I,j.y);return this._map.unproject(nt)},_getNewDestinationOfOuterMarker:function(){var M=this._centerMarker.getLatLng(),I=this._outerMarker.getLatLng(),j=this._map.distance(M,I);return this.options.minRadiusCircle&&j<this.options.minRadiusCircle?I=W(this._map,M,I,this.options.minRadiusCircle):this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle&&(I=W(this._map,M,I,this.options.maxRadiusCircle)),I},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var M=this._centerMarker.getLatLng(),I=this._outerMarker.getLatLng(),j=this._map.distance(M,I);(this.options.minRadiusCircle&&j<this.options.minRadiusCircle||this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),gi.CircleMarker=gi.extend({_shape:"CircleMarker",initialize:function(M){this._layer=M,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,M),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var M=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(M);var I=this._layer.getLatLng(),j=this._layer._radius,nt=this._getLatLngOnCircle(I,j);this._centerMarker=this._createCenterMarker(I),this._outerMarker=this._createOuterMarker(nt),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(M,I){var j=this._map.project(M),nt=L.point(j.x+I,j.y);return this._map.unproject(nt)},_createHintLine:function(M,I){var j=M.getLatLng(),nt=I.getLatLng();this._hintline=L.polyline([j,nt],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(M){var I=this._createMarker(M);return this.options.draggable?L.DomUtil.addClass(I._icon,"leaflet-pm-draggable"):I.dragging.disable(),I},_createOuterMarker:function(M){var I=this._createMarker(M);return I.on("drag",this._resizeCircle,this),I},_createMarker:function(M){var I=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(I,"vertexPane"),I._origLatLng=M,I._pmTempLayer=!0,I.on("dragstart",this._onMarkerDragStart,this),I.on("drag",this._onMarkerDrag,this),I.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(I),I},_moveCircle:function(){var M=this._centerMarker.getLatLng();this._layer.setLatLng(M);var I=this._layer._radius,j=this._getLatLngOnCircle(M,I);this._outerMarker._latlng=j,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var M=this._layer.getLatLng(),I=this._layer._radius,j=this._getLatLngOnCircle(M,I);this._outerMarker.setLatLng(j),this._centerMarker.setLatLng(M),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var M=this._centerMarker.getLatLng(),I=this._outerMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(I));this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(j),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),I=this._outerMarker.getLatLng();this._hintline.setLatLngs([M,I])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(M){this._vertexValidation("move",M)&&this._fireMarkerDragStart(M)},_onMarkerDrag:function(M){var I=M.target;I instanceof L.Marker&&!this._vertexValidationDrag(I)||this._fireMarkerDrag(M)},_onMarkerDragEnd:function(M){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var I=M.target;this._vertexValidationDragEnd(I)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(M))},_initSnappableMarkersDrag:function(){var M=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,M.off("pm:drag",this._handleSnapping,this),M.on("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.on("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this),M.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var M=this._layer;M.off("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var M=this._layer._map||this._map;if(M){var I=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),M,this._layer.getLatLng()),j=L.circle(this._layer.getLatLng(),this._layer.options);j.setRadius(I);var nt=M&&M.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(j,200,!nt).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(j,200,!nt),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var M=this._centerMarker.getLatLng(),I=this._outerMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(I));return this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?I=W(this._map,M,I,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,M)):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker&&(I=W(this._map,M,I,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,M))),I},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var M=this._centerMarker.getLatLng(),I=this._outerMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(I));(this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),gi.ImageOverlay=gi.extend({_shape:"ImageOverlay",initialize:function(M){this._layer=M,this._enabled=!1},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},enabled:function(){return this._enabled},enable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,M),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var M=this._layer.getBounds();return[M.getNorthWest(),M.getNorthEast(),M.getSouthEast(),M.getSouthWest()]}}),gi.Text=gi.extend({_shape:"Text",initialize:function(M){this._layer=M,this._enabled=!1},enable:function(M){L.Util.setOptions(this,M),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var M=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),M.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var M=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,M.off("pm:drag",this._handleSnapping,this),M.on("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.on("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this),M.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var M=this._layer;M.off("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var M=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,I=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(M,"px"),this.textArea.style.width="".concat(I,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var M=this;this._disableOnBlurActive=!0,setTimeout(function(){M.enabled()&&L.DomEvent.on(document,"click",M._documentClick,M)},100)},_documentClick:function(M){M.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=this._hasFocus;this._hasFocus=M.type==="focus",!I!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(M){this.textArea.value=M,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var M,I=this.options.className.split(" ");(M=this.textArea.classList).add.apply(M,Ti(I))}var j=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(j),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),M===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(M){M.preventDefault()}});var us=function(M,I,j,nt,ht,xt){this._matrix=[M,I,j,nt,ht,xt]};us.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},us.prototype={transform:function(M){return this._transform(M.clone())},_transform:function(M){var I=this._matrix,j=M.x,nt=M.y;return M.x=I[0]*j+I[1]*nt+I[4],M.y=I[2]*j+I[3]*nt+I[5],M},untransform:function(M){var I=this._matrix;return new L.Point((M.x/I[0]-I[4])/I[0],(M.y/I[2]-I[5])/I[2])},clone:function(){var M=this._matrix;return new L.PM.Matrix(M[0],M[1],M[2],M[3],M[4],M[5])},translate:function(M){return M===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof M=="number"?(I=M,j=M):(I=M.x,j=M.y),this._add(1,0,0,1,I,j));var I,j},scale:function(M,I){return M===void 0?new L.Point(this._matrix[0],this._matrix[3]):(I=I||L.point(0,0),typeof M=="number"?(j=M,nt=M):(j=M.x,nt=M.y),this._add(j,0,0,nt,I.x,I.y)._add(1,0,0,1,-I.x,-I.y));var j,nt},rotate:function(M,I){var j=Math.cos(M),nt=Math.sin(M);return I=I||new L.Point(0,0),this._add(j,nt,-nt,j,I.x,I.y)._add(1,0,0,1,-I.x,-I.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(M,I,j,nt,ht,xt){var Lt,Rt=[[],[],[]],Pt=this._matrix,Nt=[[Pt[0],Pt[2],Pt[4]],[Pt[1],Pt[3],Pt[5]],[0,0,1]],Vt=[[M,j,ht],[I,nt,xt],[0,0,1]];M&&M instanceof L.PM.Matrix&&(Vt=[[(Pt=M._matrix)[0],Pt[2],Pt[4]],[Pt[1],Pt[3],Pt[5]],[0,0,1]]);for(var ne=0;ne<3;ne+=1)for(var Zt=0;Zt<3;Zt+=1){Lt=0;for(var ge=0;ge<3;ge+=1)Lt+=Nt[ne][ge]*Vt[ge][Zt];Rt[ne][Zt]=Lt}return this._matrix=[Rt[0][0],Rt[1][0],Rt[0][1],Rt[1][1],Rt[0][2],Rt[1][2]],this}};let je=us;var Yr={calcMiddleLatLng:function(M,I,j){var nt=M.project(I),ht=M.project(j);return M.unproject(nt._add(ht)._divideBy(2))},findLayers:function(M){var I=[];return M.eachLayer(function(j){(j instanceof L.Polyline||j instanceof L.Marker||j instanceof L.Circle||j instanceof L.CircleMarker||j instanceof L.ImageOverlay)&&I.push(j)}),I=(I=(I=I.filter(function(j){return!!j.pm})).filter(function(j){return!j._pmTempLayer})).filter(function(j){return!L.PM.optIn&&!j.options.pmIgnore||L.PM.optIn&&j.options.pmIgnore===!1})},circleToPolygon:function(M){for(var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,j=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],nt=M.getLatLng(),ht=M.getRadius(),xt=ct(nt,ht,I,0,j),Lt=[],Rt=0;Rt<xt.length;Rt+=1){var Pt=[xt[Rt].lat,xt[Rt].lng];Lt.push(Pt)}return L.polygon(Lt,M.options)},disablePopup:function(M){M.getPopup()&&(M._tempPopupCopy=M.getPopup(),M.unbindPopup())},enablePopup:function(M){M._tempPopupCopy&&(M.bindPopup(M._tempPopupCopy),delete M._tempPopupCopy)},_fireEvent:function(M,I,j){var nt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];M.fire(I,j,nt);var ht=this.getAllParentGroups(M),xt=ht.groups;xt.forEach(function(Lt){Lt.fire(I,j,nt)})},getAllParentGroups:function(M){var I=[],j=[];return!M._pmLastGroupFetch||!M._pmLastGroupFetch.time||new Date().getTime()-M._pmLastGroupFetch.time>1e3?(function nt(ht){for(var xt in ht._eventParents)if(I.indexOf(xt)===-1){I.push(xt);var Lt=ht._eventParents[xt];j.push(Lt),nt(Lt)}}(M),M._pmLastGroupFetch={time:new Date().getTime(),groups:j,groupIds:I},{groupIds:I,groups:j}):{groups:M._pmLastGroupFetch.groups,groupIds:M._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ct,getTranslation:it,findDeepCoordIndex:function(M,I){var j,nt=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],ht=function Lt(Rt){return function(Pt,Nt){var Vt=Rt.concat(Nt);if(nt){if(Pt.lat&&Pt.lat===I.lat&&Pt.lng===I.lng)return j=Vt,!0}else if(Pt.lat&&L.latLng(Pt).equals(I))return j=Vt,!0;return Array.isArray(Pt)&&Pt.some(Lt(Vt))}};M.some(ht([]));var xt={};return j&&(xt={indexPath:j,index:j[j.length-1],parentPath:j.slice(0,j.length-1)}),xt},findDeepMarkerIndex:function(M,I){var j;M.some(function ht(xt){return function(Lt,Rt){var Pt=xt.concat(Rt);return Lt._leaflet_id===I._leaflet_id?(j=Pt,!0):Array.isArray(Lt)&&Lt.some(ht(Pt))}}([]));var nt={};return j&&(nt={indexPath:j,index:j[j.length-1],parentPath:j.slice(0,j.length-1)}),nt},_getIndexFromSegment:function(M,I){if(I&&I.length===2){var j=this.findDeepCoordIndex(M,I[0]),nt=this.findDeepCoordIndex(M,I[1]),ht=Math.max(j.index,nt.index);return j.index!==0&&nt.index!==0||ht===1||(ht+=1),{indexA:j,indexB:nt,newIndex:ht,indexPath:j.indexPath,parentPath:j.parentPath}}return null},_getRotatedRectangle:function(M,I,j,nt){var ht=Rr(nt,M),xt=Rr(nt,I),Lt=j*Math.PI/180,Rt=Math.cos(Lt),Pt=Math.sin(Lt),Nt=(xt.x-ht.x)*Rt+(xt.y-ht.y)*Pt,Vt=(xt.y-ht.y)*Rt-(xt.x-ht.x)*Pt,ne=Nt*Rt+ht.x,Zt=Nt*Pt+ht.y,ge=-Vt*Pt+ht.x,Ce=Vt*Rt+ht.y;return[bn(nt,ht),bn(nt,{x:ne,y:Zt}),bn(nt,xt),bn(nt,{x:ge,y:Ce})]},pxRadiusToMeterRadius:function(M,I,j){var nt=I.project(j),ht=L.point(nt.x+M,nt.y);return I.distance(I.unproject(ht),j)}};let ci=Yr;L.PM=L.PM||{version:"2.14.2",Map:_t,Toolbar:gt,Draw:pt,Edit:gi,Utils:ci,Matrix:je,activeLang:"en",optIn:!1,initialize:function(M){this.addInitHooks(M)},setOptIn:function(M){this.optIn=!!M},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(M){var I=this;M instanceof L.LayerGroup&&M.eachLayer(function(j){I.reInitLayer(j)}),M.pm||L.PM.optIn&&M.options.pmIgnore!==!1||M.options.pmIgnore||(M instanceof L.Map?M.pm=new L.PM.Map(M):M instanceof L.Marker?M.options.textMarker?(M.pm=new L.PM.Edit.Text(M),M.pm._initTextMarker(),M.pm._createTextMarker(!1)):M.pm=new L.PM.Edit.Marker(M):M instanceof L.Circle?M.pm=new L.PM.Edit.Circle(M):M instanceof L.CircleMarker?M.pm=new L.PM.Edit.CircleMarker(M):M instanceof L.Rectangle?M.pm=new L.PM.Edit.Rectangle(M):M instanceof L.Polygon?M.pm=new L.PM.Edit.Polygon(M):M instanceof L.Polyline?M.pm=new L.PM.Edit.Line(M):M instanceof L.LayerGroup?M.pm=new L.PM.Edit.LayerGroup(M):M instanceof L.ImageOverlay&&(M.pm=new L.PM.Edit.ImageOverlay(M)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick:function(M){for(var I,j,nt=this._map.mouseEventToLayerPoint(M),ht=this._drawFirst;ht;ht=ht.next)(I=ht.layer).options.interactive&&I._containsPoint(nt)&&(M.type!=="click"&&M.type!=="preclick"||!this._map._draggableMoved(I))&&(j=I);j&&(L.DomEvent.fakeStop(M),this._fireEvent([j],M))}}),L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),s=r.length>>>0,a=arguments[1],o=0;o<s;o++)if(i.call(a,r[o],o,r))return o;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),s=r.length>>>0,a=arguments[1],o=0;o<s;o++){var l=r[o];if(i.call(a,l,o,r))return l}},typeof Object.assign!="function"&&(Object.assign=function(i){"use strict";if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var s=arguments[r];if(s!=null)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(i){i.hasOwnProperty("remove")||Object.defineProperty(i,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var s=Object(this),a=s.length>>>0;if(a===0)return!1;for(var o,l,c=0|r,h=Math.max(c>=0?c:a-Math.abs(c),0);h<a;){if((o=s[h])===(l=i)||typeof o=="number"&&typeof l=="number"&&isNaN(o)&&isNaN(l))return!0;h++}return!1}})},1787:(i,r,s)=>{var a=s(2582),o=s(4102),l=s(1540),c=s(9705).Z,h=l.featureEach,d=(l.coordEach,o.polygon,o.featureCollection);function p(g){var m=new a(g);return m.insert=function(_){if(_.type!=="Feature")throw new Error("invalid feature");return _.bbox=_.bbox?_.bbox:c(_),a.prototype.insert.call(this,_)},m.load=function(_){var v=[];return Array.isArray(_)?_.forEach(function(x){if(x.type!=="Feature")throw new Error("invalid features");x.bbox=x.bbox?x.bbox:c(x),v.push(x)}):h(_,function(x){if(x.type!=="Feature")throw new Error("invalid features");x.bbox=x.bbox?x.bbox:c(x),v.push(x)}),a.prototype.load.call(this,v)},m.remove=function(_,v){if(_.type!=="Feature")throw new Error("invalid feature");return _.bbox=_.bbox?_.bbox:c(_),a.prototype.remove.call(this,_,v)},m.clear=function(){return a.prototype.clear.call(this)},m.search=function(_){var v=a.prototype.search.call(this,this.toBBox(_));return d(v)},m.collides=function(_){return a.prototype.collides.call(this,this.toBBox(_))},m.all=function(){var _=a.prototype.all.call(this);return d(_)},m.toJSON=function(){return a.prototype.toJSON.call(this)},m.fromJSON=function(_){return a.prototype.fromJSON.call(this,_)},m.toBBox=function(_){var v;if(_.bbox)v=_.bbox;else if(Array.isArray(_)&&_.length===4)v=_;else if(Array.isArray(_)&&_.length===6)v=[_[0],_[1],_[3],_[4]];else if(_.type==="Feature")v=c(_);else{if(_.type!=="FeatureCollection")throw new Error("invalid geojson");v=c(_)}return{minX:v[0],minY:v[1],maxX:v[2],maxY:v[3]}},m}i.exports=p,i.exports.default=p},1989:(i,r,s)=>{var a=s(1789),o=s(401),l=s(7667),c=s(1327),h=s(1866);function d(p){var g=-1,m=p==null?0:p.length;for(this.clear();++g<m;){var _=p[g];this.set(_[0],_[1])}}d.prototype.clear=a,d.prototype.delete=o,d.prototype.get=l,d.prototype.has=c,d.prototype.set=h,i.exports=d},8407:(i,r,s)=>{var a=s(7040),o=s(4125),l=s(2117),c=s(7518),h=s(4705);function d(p){var g=-1,m=p==null?0:p.length;for(this.clear();++g<m;){var _=p[g];this.set(_[0],_[1])}}d.prototype.clear=a,d.prototype.delete=o,d.prototype.get=l,d.prototype.has=c,d.prototype.set=h,i.exports=d},7071:(i,r,s)=>{var a=s(852)(s(5639),"Map");i.exports=a},3369:(i,r,s)=>{var a=s(4785),o=s(1285),l=s(6e3),c=s(9916),h=s(5265);function d(p){var g=-1,m=p==null?0:p.length;for(this.clear();++g<m;){var _=p[g];this.set(_[0],_[1])}}d.prototype.clear=a,d.prototype.delete=o,d.prototype.get=l,d.prototype.has=c,d.prototype.set=h,i.exports=d},6384:(i,r,s)=>{var a=s(8407),o=s(7465),l=s(3779),c=s(7599),h=s(4758),d=s(4309);function p(g){var m=this.__data__=new a(g);this.size=m.size}p.prototype.clear=o,p.prototype.delete=l,p.prototype.get=c,p.prototype.has=h,p.prototype.set=d,i.exports=p},2705:(i,r,s)=>{var a=s(5639).Symbol;i.exports=a},1149:(i,r,s)=>{var a=s(5639).Uint8Array;i.exports=a},6874:i=>{i.exports=function(r,s,a){switch(a.length){case 0:return r.call(s);case 1:return r.call(s,a[0]);case 2:return r.call(s,a[0],a[1]);case 3:return r.call(s,a[0],a[1],a[2])}return r.apply(s,a)}},4636:(i,r,s)=>{var a=s(2545),o=s(5694),l=s(1469),c=s(4144),h=s(5776),d=s(6719),p=Object.prototype.hasOwnProperty;i.exports=function(g,m){var _=l(g),v=!_&&o(g),x=!_&&!v&&c(g),S=!_&&!v&&!x&&d(g),O=_||v||x||S,D=O?a(g.length,String):[],U=D.length;for(var z in g)!m&&!p.call(g,z)||O&&(z=="length"||x&&(z=="offset"||z=="parent")||S&&(z=="buffer"||z=="byteLength"||z=="byteOffset")||h(z,U))||D.push(z);return D}},9932:i=>{i.exports=function(r,s){for(var a=-1,o=r==null?0:r.length,l=Array(o);++a<o;)l[a]=s(r[a],a,r);return l}},6556:(i,r,s)=>{var a=s(9465),o=s(7813);i.exports=function(l,c,h){(h!==void 0&&!o(l[c],h)||h===void 0&&!(c in l))&&a(l,c,h)}},4865:(i,r,s)=>{var a=s(9465),o=s(7813),l=Object.prototype.hasOwnProperty;i.exports=function(c,h,d){var p=c[h];l.call(c,h)&&o(p,d)&&(d!==void 0||h in c)||a(c,h,d)}},8470:(i,r,s)=>{var a=s(7813);i.exports=function(o,l){for(var c=o.length;c--;)if(a(o[c][0],l))return c;return-1}},9465:(i,r,s)=>{var a=s(8777);i.exports=function(o,l,c){l=="__proto__"&&a?a(o,l,{configurable:!0,enumerable:!0,value:c,writable:!0}):o[l]=c}},3118:(i,r,s)=>{var a=s(3218),o=Object.create,l=function(){function c(){}return function(h){if(!a(h))return{};if(o)return o(h);c.prototype=h;var d=new c;return c.prototype=void 0,d}}();i.exports=l},8483:(i,r,s)=>{var a=s(5063)();i.exports=a},7786:(i,r,s)=>{var a=s(1811),o=s(327);i.exports=function(l,c){for(var h=0,d=(c=a(c,l)).length;l!=null&&h<d;)l=l[o(c[h++])];return h&&h==d?l:void 0}},4239:(i,r,s)=>{var a=s(2705),o=s(9607),l=s(2333),c=a?a.toStringTag:void 0;i.exports=function(h){return h==null?h===void 0?"[object Undefined]":"[object Null]":c&&c in Object(h)?o(h):l(h)}},8565:i=>{var r=Object.prototype.hasOwnProperty;i.exports=function(s,a){return s!=null&&r.call(s,a)}},9454:(i,r,s)=>{var a=s(4239),o=s(7005);i.exports=function(l){return o(l)&&a(l)=="[object Arguments]"}},8458:(i,r,s)=>{var a=s(3560),o=s(5346),l=s(3218),c=s(346),h=/^\[object .+?Constructor\]$/,d=Function.prototype,p=Object.prototype,g=d.toString,m=p.hasOwnProperty,_=RegExp("^"+g.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");i.exports=function(v){return!(!l(v)||o(v))&&(a(v)?_:h).test(c(v))}},8749:(i,r,s)=>{var a=s(4239),o=s(1780),l=s(7005),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1,i.exports=function(h){return l(h)&&o(h.length)&&!!c[a(h)]}},313:(i,r,s)=>{var a=s(3218),o=s(5726),l=s(3498),c=Object.prototype.hasOwnProperty;i.exports=function(h){if(!a(h))return l(h);var d=o(h),p=[];for(var g in h)(g!="constructor"||!d&&c.call(h,g))&&p.push(g);return p}},2980:(i,r,s)=>{var a=s(6384),o=s(6556),l=s(8483),c=s(9783),h=s(3218),d=s(1704),p=s(6390);i.exports=function g(m,_,v,x,S){m!==_&&l(_,function(O,D){if(S||(S=new a),h(O))c(m,_,D,v,g,x,S);else{var U=x?x(p(m,D),O,D+"",m,_,S):void 0;U===void 0&&(U=O),o(m,D,U)}},d)}},9783:(i,r,s)=>{var a=s(6556),o=s(4626),l=s(7133),c=s(278),h=s(8517),d=s(5694),p=s(1469),g=s(9246),m=s(4144),_=s(3560),v=s(3218),x=s(8630),S=s(6719),O=s(6390),D=s(9881);i.exports=function(U,z,V,G,tt,K,B){var N=O(U,V),Z=O(z,V),w=B.get(Z);if(w)a(U,V,w);else{var C=K?K(N,Z,V+"",U,z,B):void 0,k=C===void 0;if(k){var T=p(Z),R=!T&&m(Z),F=!T&&!R&&S(Z);C=Z,T||R||F?p(N)?C=N:g(N)?C=c(N):R?(k=!1,C=o(Z,!0)):F?(k=!1,C=l(Z,!0)):C=[]:x(Z)||d(Z)?(C=N,d(N)?C=D(N):v(N)&&!_(N)||(C=h(Z))):k=!1}k&&(B.set(Z,C),tt(C,Z,G,K,B),B.delete(Z)),a(U,V,C)}}},5976:(i,r,s)=>{var a=s(6557),o=s(5357),l=s(61);i.exports=function(c,h){return l(o(c,h,a),c+"")}},6560:(i,r,s)=>{var a=s(5703),o=s(8777),l=s(6557),c=o?function(h,d){return o(h,"toString",{configurable:!0,enumerable:!1,value:a(d),writable:!0})}:l;i.exports=c},2545:i=>{i.exports=function(r,s){for(var a=-1,o=Array(r);++a<r;)o[a]=s(a);return o}},531:(i,r,s)=>{var a=s(2705),o=s(9932),l=s(1469),c=s(3448),h=a?a.prototype:void 0,d=h?h.toString:void 0;i.exports=function p(g){if(typeof g=="string")return g;if(l(g))return o(g,p)+"";if(c(g))return d?d.call(g):"";var m=g+"";return m=="0"&&1/g==-1/0?"-0":m}},1717:i=>{i.exports=function(r){return function(s){return r(s)}}},1811:(i,r,s)=>{var a=s(1469),o=s(5403),l=s(5514),c=s(9833);i.exports=function(h,d){return a(h)?h:o(h,d)?[h]:l(c(h))}},4318:(i,r,s)=>{var a=s(1149);i.exports=function(o){var l=new o.constructor(o.byteLength);return new a(l).set(new a(o)),l}},4626:(i,r,s)=>{i=s.nmd(i);var a=s(5639),o=r&&!r.nodeType&&r,l=o&&i&&!i.nodeType&&i,c=l&&l.exports===o?a.Buffer:void 0,h=c?c.allocUnsafe:void 0;i.exports=function(d,p){if(p)return d.slice();var g=d.length,m=h?h(g):new d.constructor(g);return d.copy(m),m}},7133:(i,r,s)=>{var a=s(4318);i.exports=function(o,l){var c=l?a(o.buffer):o.buffer;return new o.constructor(c,o.byteOffset,o.length)}},278:i=>{i.exports=function(r,s){var a=-1,o=r.length;for(s||(s=Array(o));++a<o;)s[a]=r[a];return s}},8363:(i,r,s)=>{var a=s(4865),o=s(9465);i.exports=function(l,c,h,d){var p=!h;h||(h={});for(var g=-1,m=c.length;++g<m;){var _=c[g],v=d?d(h[_],l[_],_,h,l):void 0;v===void 0&&(v=l[_]),p?o(h,_,v):a(h,_,v)}return h}},4429:(i,r,s)=>{var a=s(5639)["__core-js_shared__"];i.exports=a},1463:(i,r,s)=>{var a=s(5976),o=s(6612);i.exports=function(l){return a(function(c,h){var d=-1,p=h.length,g=p>1?h[p-1]:void 0,m=p>2?h[2]:void 0;for(g=l.length>3&&typeof g=="function"?(p--,g):void 0,m&&o(h[0],h[1],m)&&(g=p<3?void 0:g,p=1),c=Object(c);++d<p;){var _=h[d];_&&l(c,_,d,g)}return c})}},5063:i=>{i.exports=function(r){return function(s,a,o){for(var l=-1,c=Object(s),h=o(s),d=h.length;d--;){var p=h[r?d:++l];if(a(c[p],p,c)===!1)break}return s}}},8777:(i,r,s)=>{var a=s(852),o=function(){try{var l=a(Object,"defineProperty");return l({},"",{}),l}catch{}}();i.exports=o},1957:(i,r,s)=>{var a=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g;i.exports=a},5050:(i,r,s)=>{var a=s(7019);i.exports=function(o,l){var c=o.__data__;return a(l)?c[typeof l=="string"?"string":"hash"]:c.map}},852:(i,r,s)=>{var a=s(8458),o=s(7801);i.exports=function(l,c){var h=o(l,c);return a(h)?h:void 0}},5924:(i,r,s)=>{var a=s(5569)(Object.getPrototypeOf,Object);i.exports=a},9607:(i,r,s)=>{var a=s(2705),o=Object.prototype,l=o.hasOwnProperty,c=o.toString,h=a?a.toStringTag:void 0;i.exports=function(d){var p=l.call(d,h),g=d[h];try{d[h]=void 0;var m=!0}catch{}var _=c.call(d);return m&&(p?d[h]=g:delete d[h]),_}},7801:i=>{i.exports=function(r,s){return r?.[s]}},222:(i,r,s)=>{var a=s(1811),o=s(5694),l=s(1469),c=s(5776),h=s(1780),d=s(327);i.exports=function(p,g,m){for(var _=-1,v=(g=a(g,p)).length,x=!1;++_<v;){var S=d(g[_]);if(!(x=p!=null&&m(p,S)))break;p=p[S]}return x||++_!=v?x:!!(v=p==null?0:p.length)&&h(v)&&c(S,v)&&(l(p)||o(p))}},1789:(i,r,s)=>{var a=s(4536);i.exports=function(){this.__data__=a?a(null):{},this.size=0}},401:i=>{i.exports=function(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}},7667:(i,r,s)=>{var a=s(4536),o=Object.prototype.hasOwnProperty;i.exports=function(l){var c=this.__data__;if(a){var h=c[l];return h==="__lodash_hash_undefined__"?void 0:h}return o.call(c,l)?c[l]:void 0}},1327:(i,r,s)=>{var a=s(4536),o=Object.prototype.hasOwnProperty;i.exports=function(l){var c=this.__data__;return a?c[l]!==void 0:o.call(c,l)}},1866:(i,r,s)=>{var a=s(4536);i.exports=function(o,l){var c=this.__data__;return this.size+=this.has(o)?0:1,c[o]=a&&l===void 0?"__lodash_hash_undefined__":l,this}},8517:(i,r,s)=>{var a=s(3118),o=s(5924),l=s(5726);i.exports=function(c){return typeof c.constructor!="function"||l(c)?{}:a(o(c))}},5776:i=>{var r=/^(?:0|[1-9]\d*)$/;i.exports=function(s,a){var o=typeof s;return!!(a=a??9007199254740991)&&(o=="number"||o!="symbol"&&r.test(s))&&s>-1&&s%1==0&&s<a}},6612:(i,r,s)=>{var a=s(7813),o=s(8612),l=s(5776),c=s(3218);i.exports=function(h,d,p){if(!c(p))return!1;var g=typeof d;return!!(g=="number"?o(p)&&l(d,p.length):g=="string"&&d in p)&&a(p[d],h)}},5403:(i,r,s)=>{var a=s(1469),o=s(3448),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;i.exports=function(h,d){if(a(h))return!1;var p=typeof h;return!(p!="number"&&p!="symbol"&&p!="boolean"&&h!=null&&!o(h))||c.test(h)||!l.test(h)||d!=null&&h in Object(d)}},7019:i=>{i.exports=function(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}},5346:(i,r,s)=>{var a,o=s(4429),l=(a=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";i.exports=function(c){return!!l&&l in c}},5726:i=>{var r=Object.prototype;i.exports=function(s){var a=s&&s.constructor;return s===(typeof a=="function"&&a.prototype||r)}},7040:i=>{i.exports=function(){this.__data__=[],this.size=0}},4125:(i,r,s)=>{var a=s(8470),o=Array.prototype.splice;i.exports=function(l){var c=this.__data__,h=a(c,l);return!(h<0)&&(h==c.length-1?c.pop():o.call(c,h,1),--this.size,!0)}},2117:(i,r,s)=>{var a=s(8470);i.exports=function(o){var l=this.__data__,c=a(l,o);return c<0?void 0:l[c][1]}},7518:(i,r,s)=>{var a=s(8470);i.exports=function(o){return a(this.__data__,o)>-1}},4705:(i,r,s)=>{var a=s(8470);i.exports=function(o,l){var c=this.__data__,h=a(c,o);return h<0?(++this.size,c.push([o,l])):c[h][1]=l,this}},4785:(i,r,s)=>{var a=s(1989),o=s(8407),l=s(7071);i.exports=function(){this.size=0,this.__data__={hash:new a,map:new(l||o),string:new a}}},1285:(i,r,s)=>{var a=s(5050);i.exports=function(o){var l=a(this,o).delete(o);return this.size-=l?1:0,l}},6e3:(i,r,s)=>{var a=s(5050);i.exports=function(o){return a(this,o).get(o)}},9916:(i,r,s)=>{var a=s(5050);i.exports=function(o){return a(this,o).has(o)}},5265:(i,r,s)=>{var a=s(5050);i.exports=function(o,l){var c=a(this,o),h=c.size;return c.set(o,l),this.size+=c.size==h?0:1,this}},4523:(i,r,s)=>{var a=s(8306);i.exports=function(o){var l=a(o,function(h){return c.size===500&&c.clear(),h}),c=l.cache;return l}},4536:(i,r,s)=>{var a=s(852)(Object,"create");i.exports=a},3498:i=>{i.exports=function(r){var s=[];if(r!=null)for(var a in Object(r))s.push(a);return s}},1167:(i,r,s)=>{i=s.nmd(i);var a=s(1957),o=r&&!r.nodeType&&r,l=o&&i&&!i.nodeType&&i,c=l&&l.exports===o&&a.process,h=function(){try{var d=l&&l.require&&l.require("util").types;return d||c&&c.binding&&c.binding("util")}catch{}}();i.exports=h},2333:i=>{var r=Object.prototype.toString;i.exports=function(s){return r.call(s)}},5569:i=>{i.exports=function(r,s){return function(a){return r(s(a))}}},5357:(i,r,s)=>{var a=s(6874),o=Math.max;i.exports=function(l,c,h){return c=o(c===void 0?l.length-1:c,0),function(){for(var d=arguments,p=-1,g=o(d.length-c,0),m=Array(g);++p<g;)m[p]=d[c+p];p=-1;for(var _=Array(c+1);++p<c;)_[p]=d[p];return _[c]=h(m),a(l,this,_)}}},5639:(i,r,s)=>{var a=s(1957),o=typeof self=="object"&&self&&self.Object===Object&&self,l=a||o||Function("return this")();i.exports=l},6390:i=>{i.exports=function(r,s){if((s!=="constructor"||typeof r[s]!="function")&&s!="__proto__")return r[s]}},61:(i,r,s)=>{var a=s(6560),o=s(1275)(a);i.exports=o},1275:i=>{var r=Date.now;i.exports=function(s){var a=0,o=0;return function(){var l=r(),c=16-(l-o);if(o=l,c>0){if(++a>=800)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}},7465:(i,r,s)=>{var a=s(8407);i.exports=function(){this.__data__=new a,this.size=0}},3779:i=>{i.exports=function(r){var s=this.__data__,a=s.delete(r);return this.size=s.size,a}},7599:i=>{i.exports=function(r){return this.__data__.get(r)}},4758:i=>{i.exports=function(r){return this.__data__.has(r)}},4309:(i,r,s)=>{var a=s(8407),o=s(7071),l=s(3369);i.exports=function(c,h){var d=this.__data__;if(d instanceof a){var p=d.__data__;if(!o||p.length<199)return p.push([c,h]),this.size=++d.size,this;d=this.__data__=new l(p)}return d.set(c,h),this.size=d.size,this}},5514:(i,r,s)=>{var a=s(4523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,c=a(function(h){var d=[];return h.charCodeAt(0)===46&&d.push(""),h.replace(o,function(p,g,m,_){d.push(m?_.replace(l,"$1"):g||p)}),d});i.exports=c},327:(i,r,s)=>{var a=s(3448);i.exports=function(o){if(typeof o=="string"||a(o))return o;var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}},346:i=>{var r=Function.prototype.toString;i.exports=function(s){if(s!=null){try{return r.call(s)}catch{}try{return s+""}catch{}}return""}},5703:i=>{i.exports=function(r){return function(){return r}}},7813:i=>{i.exports=function(r,s){return r===s||r!=r&&s!=s}},7361:(i,r,s)=>{var a=s(7786);i.exports=function(o,l,c){var h=o==null?void 0:a(o,l);return h===void 0?c:h}},8721:(i,r,s)=>{var a=s(8565),o=s(222);i.exports=function(l,c){return l!=null&&o(l,c,a)}},6557:i=>{i.exports=function(r){return r}},5694:(i,r,s)=>{var a=s(9454),o=s(7005),l=Object.prototype,c=l.hasOwnProperty,h=l.propertyIsEnumerable,d=a(function(){return arguments}())?a:function(p){return o(p)&&c.call(p,"callee")&&!h.call(p,"callee")};i.exports=d},1469:i=>{var r=Array.isArray;i.exports=r},8612:(i,r,s)=>{var a=s(3560),o=s(1780);i.exports=function(l){return l!=null&&o(l.length)&&!a(l)}},9246:(i,r,s)=>{var a=s(8612),o=s(7005);i.exports=function(l){return o(l)&&a(l)}},4144:(i,r,s)=>{i=s.nmd(i);var a=s(5639),o=s(5062),l=r&&!r.nodeType&&r,c=l&&i&&!i.nodeType&&i,h=c&&c.exports===l?a.Buffer:void 0,d=(h?h.isBuffer:void 0)||o;i.exports=d},3560:(i,r,s)=>{var a=s(4239),o=s(3218);i.exports=function(l){if(!o(l))return!1;var c=a(l);return c=="[object Function]"||c=="[object GeneratorFunction]"||c=="[object AsyncFunction]"||c=="[object Proxy]"}},1780:i=>{i.exports=function(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=9007199254740991}},3218:i=>{i.exports=function(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}},7005:i=>{i.exports=function(r){return r!=null&&typeof r=="object"}},8630:(i,r,s)=>{var a=s(4239),o=s(5924),l=s(7005),c=Function.prototype,h=Object.prototype,d=c.toString,p=h.hasOwnProperty,g=d.call(Object);i.exports=function(m){if(!l(m)||a(m)!="[object Object]")return!1;var _=o(m);if(_===null)return!0;var v=p.call(_,"constructor")&&_.constructor;return typeof v=="function"&&v instanceof v&&d.call(v)==g}},3448:(i,r,s)=>{var a=s(4239),o=s(7005);i.exports=function(l){return typeof l=="symbol"||o(l)&&a(l)=="[object Symbol]"}},6719:(i,r,s)=>{var a=s(8749),o=s(1717),l=s(1167),c=l&&l.isTypedArray,h=c?o(c):a;i.exports=h},1704:(i,r,s)=>{var a=s(4636),o=s(313),l=s(8612);i.exports=function(c){return l(c)?a(c,!0):o(c)}},8306:(i,r,s)=>{var a=s(3369);function o(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new TypeError("Expected a function");var h=function(){var d=arguments,p=c?c.apply(this,d):d[0],g=h.cache;if(g.has(p))return g.get(p);var m=l.apply(this,d);return h.cache=g.set(p,m)||g,m};return h.cache=new(o.Cache||a),h}o.Cache=a,i.exports=o},2492:(i,r,s)=>{var a=s(2980),o=s(1463)(function(l,c,h){a(l,c,h)});i.exports=o},5062:i=>{i.exports=function(){return!1}},9881:(i,r,s)=>{var a=s(8363),o=s(1704);i.exports=function(l){return a(l,o(l))}},9833:(i,r,s)=>{var a=s(531);i.exports=function(o){return o==null?"":a(o)}},2676:function(i){i.exports=function(){"use strict";function r(Q,Y){if(!(Q instanceof Y))throw new TypeError("Cannot call a class as a function")}function s(Q,Y){for(var et=0;et<Y.length;et++){var lt=Y[et];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(Q,lt.key,lt)}}function a(Q,Y,et){return Y&&s(Q.prototype,Y),et&&s(Q,et),Q}var o=function(){function Q(Y,et){this.next=null,this.key=Y,this.data=et,this.left=null,this.right=null}return Q}();function l(Q,Y){return Q>Y?1:Q<Y?-1:0}function c(Q,Y,et){for(var lt=new o(null,null),pt=lt,bt=lt;;){var Et=et(Q,Y.key);if(Et<0){if(Y.left===null)break;if(et(Q,Y.left.key)<0){var Ot=Y.left;if(Y.left=Ot.right,Ot.right=Y,(Y=Ot).left===null)break}bt.left=Y,bt=Y,Y=Y.left}else{if(!(Et>0)||Y.right===null||et(Q,Y.right.key)>0&&(Ot=Y.right,Y.right=Ot.left,Ot.left=Y,(Y=Ot).right===null))break;pt.right=Y,pt=Y,Y=Y.right}}return pt.right=Y.left,bt.left=Y.right,Y.left=lt.right,Y.right=lt.left,Y}function h(Q,Y,et,lt){var pt=new o(Q,Y);if(et===null)return pt.left=pt.right=null,pt;var bt=lt(Q,(et=c(Q,et,lt)).key);return bt<0?(pt.left=et.left,pt.right=et,et.left=null):bt>=0&&(pt.right=et.right,pt.left=et,et.right=null),pt}function d(Q,Y,et){var lt=null,pt=null;if(Y){var bt=et((Y=c(Q,Y,et)).key,Q);bt===0?(lt=Y.left,pt=Y.right):bt<0?(pt=Y.right,Y.right=null,lt=Y):(lt=Y.left,Y.left=null,pt=Y)}return{left:lt,right:pt}}function p(Q,Y,et){return Y===null?Q:(Q===null||((Y=c(Q.key,Y,et)).left=Q),Y)}function g(Q,Y,et,lt,pt){if(Q){lt(Y+(et?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+pt(Q)+`
`);var bt=Y+(et?"    ":"\u2502   ");Q.left&&g(Q.left,bt,!1,lt,pt),Q.right&&g(Q.right,bt,!0,lt,pt)}}var m=function(){function Q(Y){Y===void 0&&(Y=l),this._root=null,this._size=0,this._comparator=Y}return Q.prototype.insert=function(Y,et){return this._size++,this._root=h(Y,et,this._root,this._comparator)},Q.prototype.add=function(Y,et){var lt=new o(Y,et);this._root===null&&(lt.left=lt.right=null,this._size++,this._root=lt);var pt=this._comparator,bt=c(Y,this._root,pt),Et=pt(Y,bt.key);return Et===0?this._root=bt:(Et<0?(lt.left=bt.left,lt.right=bt,bt.left=null):Et>0&&(lt.right=bt.right,lt.left=bt,bt.right=null),this._size++,this._root=lt),this._root},Q.prototype.remove=function(Y){this._root=this._remove(Y,this._root,this._comparator)},Q.prototype._remove=function(Y,et,lt){var pt;return et===null?null:lt(Y,(et=c(Y,et,lt)).key)===0?(et.left===null?pt=et.right:(pt=c(Y,et.left,lt)).right=et.right,this._size--,pt):et},Q.prototype.pop=function(){var Y=this._root;if(Y){for(;Y.left;)Y=Y.left;return this._root=c(Y.key,this._root,this._comparator),this._root=this._remove(Y.key,this._root,this._comparator),{key:Y.key,data:Y.data}}return null},Q.prototype.findStatic=function(Y){for(var et=this._root,lt=this._comparator;et;){var pt=lt(Y,et.key);if(pt===0)return et;et=pt<0?et.left:et.right}return null},Q.prototype.find=function(Y){return this._root&&(this._root=c(Y,this._root,this._comparator),this._comparator(Y,this._root.key)!==0)?null:this._root},Q.prototype.contains=function(Y){for(var et=this._root,lt=this._comparator;et;){var pt=lt(Y,et.key);if(pt===0)return!0;et=pt<0?et.left:et.right}return!1},Q.prototype.forEach=function(Y,et){for(var lt=this._root,pt=[],bt=!1;!bt;)lt!==null?(pt.push(lt),lt=lt.left):pt.length!==0?(lt=pt.pop(),Y.call(et,lt),lt=lt.right):bt=!0;return this},Q.prototype.range=function(Y,et,lt,pt){for(var bt=[],Et=this._comparator,Ot=this._root;bt.length!==0||Ot;)if(Ot)bt.push(Ot),Ot=Ot.left;else{if(Et((Ot=bt.pop()).key,et)>0)break;if(Et(Ot.key,Y)>=0&&lt.call(pt,Ot))return this;Ot=Ot.right}return this},Q.prototype.keys=function(){var Y=[];return this.forEach(function(et){var lt=et.key;return Y.push(lt)}),Y},Q.prototype.values=function(){var Y=[];return this.forEach(function(et){var lt=et.data;return Y.push(lt)}),Y},Q.prototype.min=function(){return this._root?this.minNode(this._root).key:null},Q.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},Q.prototype.minNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.left;)Y=Y.left;return Y},Q.prototype.maxNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.right;)Y=Y.right;return Y},Q.prototype.at=function(Y){for(var et=this._root,lt=!1,pt=0,bt=[];!lt;)if(et)bt.push(et),et=et.left;else if(bt.length>0){if(et=bt.pop(),pt===Y)return et;pt++,et=et.right}else lt=!0;return null},Q.prototype.next=function(Y){var et=this._root,lt=null;if(Y.right){for(lt=Y.right;lt.left;)lt=lt.left;return lt}for(var pt=this._comparator;et;){var bt=pt(Y.key,et.key);if(bt===0)break;bt<0?(lt=et,et=et.left):et=et.right}return lt},Q.prototype.prev=function(Y){var et=this._root,lt=null;if(Y.left!==null){for(lt=Y.left;lt.right;)lt=lt.right;return lt}for(var pt=this._comparator;et;){var bt=pt(Y.key,et.key);if(bt===0)break;bt<0?et=et.left:(lt=et,et=et.right)}return lt},Q.prototype.clear=function(){return this._root=null,this._size=0,this},Q.prototype.toList=function(){return x(this._root)},Q.prototype.load=function(Y,et,lt){et===void 0&&(et=[]),lt===void 0&&(lt=!1);var pt=Y.length,bt=this._comparator;if(lt&&D(Y,et,0,pt-1,bt),this._root===null)this._root=_(Y,et,0,pt),this._size=pt;else{var Et=O(this.toList(),v(Y,et),bt);pt=this._size+pt,this._root=S({head:Et},0,pt)}return this},Q.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(Q.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Q.prototype.toString=function(Y){Y===void 0&&(Y=function(lt){return String(lt.key)});var et=[];return g(this._root,"",!0,function(lt){return et.push(lt)},Y),et.join("")},Q.prototype.update=function(Y,et,lt){var pt=this._comparator,bt=d(Y,this._root,pt),Et=bt.left,Ot=bt.right;pt(Y,et)<0?Ot=h(et,lt,Ot,pt):Et=h(et,lt,Et,pt),this._root=p(Et,Ot,pt)},Q.prototype.split=function(Y){return d(Y,this._root,this._comparator)},Q}();function _(Q,Y,et,lt){var pt=lt-et;if(pt>0){var bt=et+Math.floor(pt/2),Et=Q[bt],Ot=Y[bt],zt=new o(Et,Ot);return zt.left=_(Q,Y,et,bt),zt.right=_(Q,Y,bt+1,lt),zt}return null}function v(Q,Y){for(var et=new o(null,null),lt=et,pt=0;pt<Q.length;pt++)lt=lt.next=new o(Q[pt],Y[pt]);return lt.next=null,et.next}function x(Q){for(var Y=Q,et=[],lt=!1,pt=new o(null,null),bt=pt;!lt;)Y?(et.push(Y),Y=Y.left):et.length>0?Y=(Y=bt=bt.next=et.pop()).right:lt=!0;return bt.next=null,pt.next}function S(Q,Y,et){var lt=et-Y;if(lt>0){var pt=Y+Math.floor(lt/2),bt=S(Q,Y,pt),Et=Q.head;return Et.left=bt,Q.head=Q.head.next,Et.right=S(Q,pt+1,et),Et}return null}function O(Q,Y,et){for(var lt=new o(null,null),pt=lt,bt=Q,Et=Y;bt!==null&&Et!==null;)et(bt.key,Et.key)<0?(pt.next=bt,bt=bt.next):(pt.next=Et,Et=Et.next),pt=pt.next;return bt!==null?pt.next=bt:Et!==null&&(pt.next=Et),lt.next}function D(Q,Y,et,lt,pt){if(!(et>=lt)){for(var bt=Q[et+lt>>1],Et=et-1,Ot=lt+1;;){do Et++;while(pt(Q[Et],bt)<0);do Ot--;while(pt(Q[Ot],bt)>0);if(Et>=Ot)break;var zt=Q[Et];Q[Et]=Q[Ot],Q[Ot]=zt,zt=Y[Et],Y[Et]=Y[Ot],Y[Ot]=zt}D(Q,Y,et,Ot,pt),D(Q,Y,Ot+1,lt,pt)}}var U=function(Q,Y){return Q.ll.x<=Y.x&&Y.x<=Q.ur.x&&Q.ll.y<=Y.y&&Y.y<=Q.ur.y},z=function(Q,Y){if(Y.ur.x<Q.ll.x||Q.ur.x<Y.ll.x||Y.ur.y<Q.ll.y||Q.ur.y<Y.ll.y)return null;var et=Q.ll.x<Y.ll.x?Y.ll.x:Q.ll.x,lt=Q.ur.x<Y.ur.x?Q.ur.x:Y.ur.x;return{ll:{x:et,y:Q.ll.y<Y.ll.y?Y.ll.y:Q.ll.y},ur:{x:lt,y:Q.ur.y<Y.ur.y?Q.ur.y:Y.ur.y}}},V=Number.EPSILON;V===void 0&&(V=Math.pow(2,-52));var G=V*V,tt=function(Q,Y){if(-V<Q&&Q<V&&-V<Y&&Y<V)return 0;var et=Q-Y;return et*et<G*Q*Y?0:Q<Y?-1:1},K=function(){function Q(){r(this,Q),this.reset()}return a(Q,[{key:"reset",value:function(){this.xRounder=new B,this.yRounder=new B}},{key:"round",value:function(Y,et){return{x:this.xRounder.round(Y),y:this.yRounder.round(et)}}}]),Q}(),B=function(){function Q(){r(this,Q),this.tree=new m,this.round(0)}return a(Q,[{key:"round",value:function(Y){var et=this.tree.add(Y),lt=this.tree.prev(et);if(lt!==null&&tt(et.key,lt.key)===0)return this.tree.remove(Y),lt.key;var pt=this.tree.next(et);return pt!==null&&tt(et.key,pt.key)===0?(this.tree.remove(Y),pt.key):Y}}]),Q}(),N=new K,Z=function(Q,Y){return Q.x*Y.y-Q.y*Y.x},w=function(Q,Y){return Q.x*Y.x+Q.y*Y.y},C=function(Q,Y,et){var lt={x:Y.x-Q.x,y:Y.y-Q.y},pt={x:et.x-Q.x,y:et.y-Q.y},bt=Z(lt,pt);return tt(bt,0)},k=function(Q){return Math.sqrt(w(Q,Q))},T=function(Q,Y,et){var lt={x:Y.x-Q.x,y:Y.y-Q.y},pt={x:et.x-Q.x,y:et.y-Q.y};return Z(pt,lt)/k(pt)/k(lt)},R=function(Q,Y,et){var lt={x:Y.x-Q.x,y:Y.y-Q.y},pt={x:et.x-Q.x,y:et.y-Q.y};return w(pt,lt)/k(pt)/k(lt)},F=function(Q,Y,et){return Y.y===0?null:{x:Q.x+Y.x/Y.y*(et-Q.y),y:et}},H=function(Q,Y,et){return Y.x===0?null:{x:et,y:Q.y+Y.y/Y.x*(et-Q.x)}},it=function(Q,Y,et,lt){if(Y.x===0)return H(et,lt,Q.x);if(lt.x===0)return H(Q,Y,et.x);if(Y.y===0)return F(et,lt,Q.y);if(lt.y===0)return F(Q,Y,et.y);var pt=Z(Y,lt);if(pt==0)return null;var bt={x:et.x-Q.x,y:et.y-Q.y},Et=Z(bt,Y)/pt,Ot=Z(bt,lt)/pt;return{x:(Q.x+Ot*Y.x+(et.x+Et*lt.x))/2,y:(Q.y+Ot*Y.y+(et.y+Et*lt.y))/2}},ot=function(){function Q(Y,et){r(this,Q),Y.events===void 0?Y.events=[this]:Y.events.push(this),this.point=Y,this.isLeft=et}return a(Q,null,[{key:"compare",value:function(Y,et){var lt=Q.comparePoints(Y.point,et.point);return lt!==0?lt:(Y.point!==et.point&&Y.link(et),Y.isLeft!==et.isLeft?Y.isLeft?1:-1:$.compare(Y.segment,et.segment))}},{key:"comparePoints",value:function(Y,et){return Y.x<et.x?-1:Y.x>et.x?1:Y.y<et.y?-1:Y.y>et.y?1:0}}]),a(Q,[{key:"link",value:function(Y){if(Y.point===this.point)throw new Error("Tried to link already linked events");for(var et=Y.point.events,lt=0,pt=et.length;lt<pt;lt++){var bt=et[lt];this.point.events.push(bt),bt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Y=this.point.events.length,et=0;et<Y;et++){var lt=this.point.events[et];if(lt.segment.consumedBy===void 0)for(var pt=et+1;pt<Y;pt++){var bt=this.point.events[pt];bt.consumedBy===void 0&&lt.otherSE.point.events===bt.otherSE.point.events&&lt.segment.consume(bt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Y=[],et=0,lt=this.point.events.length;et<lt;et++){var pt=this.point.events[et];pt!==this&&!pt.segment.ringOut&&pt.segment.isInResult()&&Y.push(pt)}return Y}},{key:"getLeftmostComparator",value:function(Y){var et=this,lt=new Map,pt=function(bt){var Et=bt.otherSE;lt.set(bt,{sine:T(et.point,Y.point,Et.point),cosine:R(et.point,Y.point,Et.point)})};return function(bt,Et){lt.has(bt)||pt(bt),lt.has(Et)||pt(Et);var Ot=lt.get(bt),zt=Ot.sine,Gt=Ot.cosine,Jt=lt.get(Et),Kt=Jt.sine,ie=Jt.cosine;return zt>=0&&Kt>=0?Gt<ie?1:Gt>ie?-1:0:zt<0&&Kt<0?Gt<ie?-1:Gt>ie?1:0:Kt<zt?-1:Kt>zt?1:0}}}]),Q}(),dt=0,$=function(){function Q(Y,et,lt,pt){r(this,Q),this.id=++dt,this.leftSE=Y,Y.segment=this,Y.otherSE=et,this.rightSE=et,et.segment=this,et.otherSE=Y,this.rings=lt,this.windings=pt}return a(Q,null,[{key:"compare",value:function(Y,et){var lt=Y.leftSE.point.x,pt=et.leftSE.point.x,bt=Y.rightSE.point.x,Et=et.rightSE.point.x;if(Et<lt)return 1;if(bt<pt)return-1;var Ot=Y.leftSE.point.y,zt=et.leftSE.point.y,Gt=Y.rightSE.point.y,Jt=et.rightSE.point.y;if(lt<pt){if(zt<Ot&&zt<Gt)return 1;if(zt>Ot&&zt>Gt)return-1;var Kt=Y.comparePoint(et.leftSE.point);if(Kt<0)return 1;if(Kt>0)return-1;var ie=et.comparePoint(Y.rightSE.point);return ie!==0?ie:-1}if(lt>pt){if(Ot<zt&&Ot<Jt)return-1;if(Ot>zt&&Ot>Jt)return 1;var Xt=et.comparePoint(Y.leftSE.point);if(Xt!==0)return Xt;var Ut=Y.comparePoint(et.rightSE.point);return Ut<0?1:Ut>0?-1:1}if(Ot<zt)return-1;if(Ot>zt)return 1;if(bt<Et){var _e=et.comparePoint(Y.rightSE.point);if(_e!==0)return _e}if(bt>Et){var le=Y.comparePoint(et.rightSE.point);if(le<0)return 1;if(le>0)return-1}if(bt!==Et){var ye=Gt-Ot,Ze=bt-lt,ce=Jt-zt,ke=Et-pt;if(ye>Ze&&ce<ke)return 1;if(ye<Ze&&ce>ke)return-1}return bt>Et?1:bt<Et||Gt<Jt?-1:Gt>Jt?1:Y.id<et.id?-1:Y.id>et.id?1:0}}]),a(Q,[{key:"replaceRightSE",value:function(Y){this.rightSE=Y,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Y=this.leftSE.point.y,et=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Y<et?Y:et},ur:{x:this.rightSE.point.x,y:Y>et?Y:et}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Y){return Y.x===this.leftSE.point.x&&Y.y===this.leftSE.point.y||Y.x===this.rightSE.point.x&&Y.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Y){if(this.isAnEndpoint(Y))return 0;var et=this.leftSE.point,lt=this.rightSE.point,pt=this.vector();if(et.x===lt.x)return Y.x===et.x?0:Y.x<et.x?1:-1;var bt=(Y.y-et.y)/pt.y,Et=et.x+bt*pt.x;if(Y.x===Et)return 0;var Ot=(Y.x-et.x)/pt.x,zt=et.y+Ot*pt.y;return Y.y===zt?0:Y.y<zt?-1:1}},{key:"getIntersection",value:function(Y){var et=this.bbox(),lt=Y.bbox(),pt=z(et,lt);if(pt===null)return null;var bt=this.leftSE.point,Et=this.rightSE.point,Ot=Y.leftSE.point,zt=Y.rightSE.point,Gt=U(et,Ot)&&this.comparePoint(Ot)===0,Jt=U(lt,bt)&&Y.comparePoint(bt)===0,Kt=U(et,zt)&&this.comparePoint(zt)===0,ie=U(lt,Et)&&Y.comparePoint(Et)===0;if(Jt&&Gt)return ie&&!Kt?Et:!ie&&Kt?zt:null;if(Jt)return Kt&&bt.x===zt.x&&bt.y===zt.y?null:bt;if(Gt)return ie&&Et.x===Ot.x&&Et.y===Ot.y?null:Ot;if(ie&&Kt)return null;if(ie)return Et;if(Kt)return zt;var Xt=it(bt,this.vector(),Ot,Y.vector());return Xt===null?null:U(pt,Xt)?N.round(Xt.x,Xt.y):null}},{key:"split",value:function(Y){var et=[],lt=Y.events!==void 0,pt=new ot(Y,!0),bt=new ot(Y,!1),Et=this.rightSE;this.replaceRightSE(bt),et.push(bt),et.push(pt);var Ot=new Q(pt,Et,this.rings.slice(),this.windings.slice());return ot.comparePoints(Ot.leftSE.point,Ot.rightSE.point)>0&&Ot.swapEvents(),ot.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),lt&&(pt.checkForConsuming(),bt.checkForConsuming()),et}},{key:"swapEvents",value:function(){var Y=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Y,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var et=0,lt=this.windings.length;et<lt;et++)this.windings[et]*=-1}},{key:"consume",value:function(Y){for(var et=this,lt=Y;et.consumedBy;)et=et.consumedBy;for(;lt.consumedBy;)lt=lt.consumedBy;var pt=Q.compare(et,lt);if(pt!==0){if(pt>0){var bt=et;et=lt,lt=bt}if(et.prev===lt){var Et=et;et=lt,lt=Et}for(var Ot=0,zt=lt.rings.length;Ot<zt;Ot++){var Gt=lt.rings[Ot],Jt=lt.windings[Ot],Kt=et.rings.indexOf(Gt);Kt===-1?(et.rings.push(Gt),et.windings.push(Jt)):et.windings[Kt]+=Jt}lt.rings=null,lt.windings=null,lt.consumedBy=et,lt.leftSE.consumedBy=et.leftSE,lt.rightSE.consumedBy=et.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var Y=this.prev.consumedBy||this.prev;this._beforeState=Y.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var Y=this.beforeState();this._afterState={rings:Y.rings.slice(0),windings:Y.windings.slice(0),multiPolys:[]};for(var et=this._afterState.rings,lt=this._afterState.windings,pt=this._afterState.multiPolys,bt=0,Et=this.rings.length;bt<Et;bt++){var Ot=this.rings[bt],zt=this.windings[bt],Gt=et.indexOf(Ot);Gt===-1?(et.push(Ot),lt.push(zt)):lt[Gt]+=zt}for(var Jt=[],Kt=[],ie=0,Xt=et.length;ie<Xt;ie++)if(lt[ie]!==0){var Ut=et[ie],_e=Ut.poly;if(Kt.indexOf(_e)===-1)if(Ut.isExterior)Jt.push(_e);else{Kt.indexOf(_e)===-1&&Kt.push(_e);var le=Jt.indexOf(Ut.poly);le!==-1&&Jt.splice(le,1)}}for(var ye=0,Ze=Jt.length;ye<Ze;ye++){var ce=Jt[ye].multiPoly;pt.indexOf(ce)===-1&&pt.push(ce)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var Y=this.beforeState().multiPolys,et=this.afterState().multiPolys;switch(At.type){case"union":var lt=Y.length===0,pt=et.length===0;this._isInResult=lt!==pt;break;case"intersection":var bt,Et;Y.length<et.length?(bt=Y.length,Et=et.length):(bt=et.length,Et=Y.length),this._isInResult=Et===At.numMultiPolys&&bt<Et;break;case"xor":var Ot=Math.abs(Y.length-et.length);this._isInResult=Ot%2==1;break;case"difference":var zt=function(Gt){return Gt.length===1&&Gt[0].isSubject};this._isInResult=zt(Y)!==zt(et);break;default:throw new Error("Unrecognized operation type found ".concat(At.type))}return this._isInResult}}],[{key:"fromRing",value:function(Y,et,lt){var pt,bt,Et,Ot=ot.comparePoints(Y,et);if(Ot<0)pt=Y,bt=et,Et=1;else{if(!(Ot>0))throw new Error("Tried to create degenerate segment at [".concat(Y.x,", ").concat(Y.y,"]"));pt=et,bt=Y,Et=-1}return new Q(new ot(pt,!0),new ot(bt,!1),[lt],[Et])}}]),Q}(),ct=function(){function Q(Y,et,lt){if(r(this,Q),!Array.isArray(Y)||Y.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=et,this.isExterior=lt,this.segments=[],typeof Y[0][0]!="number"||typeof Y[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var pt=N.round(Y[0][0],Y[0][1]);this.bbox={ll:{x:pt.x,y:pt.y},ur:{x:pt.x,y:pt.y}};for(var bt=pt,Et=1,Ot=Y.length;Et<Ot;Et++){if(typeof Y[Et][0]!="number"||typeof Y[Et][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var zt=N.round(Y[Et][0],Y[Et][1]);zt.x===bt.x&&zt.y===bt.y||(this.segments.push($.fromRing(bt,zt,this)),zt.x<this.bbox.ll.x&&(this.bbox.ll.x=zt.x),zt.y<this.bbox.ll.y&&(this.bbox.ll.y=zt.y),zt.x>this.bbox.ur.x&&(this.bbox.ur.x=zt.x),zt.y>this.bbox.ur.y&&(this.bbox.ur.y=zt.y),bt=zt)}pt.x===bt.x&&pt.y===bt.y||this.segments.push($.fromRing(bt,pt,this))}return a(Q,[{key:"getSweepEvents",value:function(){for(var Y=[],et=0,lt=this.segments.length;et<lt;et++){var pt=this.segments[et];Y.push(pt.leftSE),Y.push(pt.rightSE)}return Y}}]),Q}(),W=function(){function Q(Y,et){if(r(this,Q),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ct(Y[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var lt=1,pt=Y.length;lt<pt;lt++){var bt=new ct(Y[lt],this,!1);bt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=bt.bbox.ll.x),bt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=bt.bbox.ll.y),bt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=bt.bbox.ur.x),bt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=bt.bbox.ur.y),this.interiorRings.push(bt)}this.multiPoly=et}return a(Q,[{key:"getSweepEvents",value:function(){for(var Y=this.exteriorRing.getSweepEvents(),et=0,lt=this.interiorRings.length;et<lt;et++)for(var pt=this.interiorRings[et].getSweepEvents(),bt=0,Et=pt.length;bt<Et;bt++)Y.push(pt[bt]);return Y}}]),Q}(),q=function(){function Q(Y,et){if(r(this,Q),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof Y[0][0][0]=="number"&&(Y=[Y])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var lt=0,pt=Y.length;lt<pt;lt++){var bt=new W(Y[lt],this);bt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=bt.bbox.ll.x),bt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=bt.bbox.ll.y),bt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=bt.bbox.ur.x),bt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=bt.bbox.ur.y),this.polys.push(bt)}this.isSubject=et}return a(Q,[{key:"getSweepEvents",value:function(){for(var Y=[],et=0,lt=this.polys.length;et<lt;et++)for(var pt=this.polys[et].getSweepEvents(),bt=0,Et=pt.length;bt<Et;bt++)Y.push(pt[bt]);return Y}}]),Q}(),rt=function(){function Q(Y){r(this,Q),this.events=Y;for(var et=0,lt=Y.length;et<lt;et++)Y[et].segment.ringOut=this;this.poly=null}return a(Q,null,[{key:"factory",value:function(Y){for(var et=[],lt=0,pt=Y.length;lt<pt;lt++){var bt=Y[lt];if(bt.isInResult()&&!bt.ringOut){for(var Et=null,Ot=bt.leftSE,zt=bt.rightSE,Gt=[Ot],Jt=Ot.point,Kt=[];Et=Ot,Ot=zt,Gt.push(Ot),Ot.point!==Jt;)for(;;){var ie=Ot.getAvailableLinkedEvents();if(ie.length===0){var Xt=Gt[0].point,Ut=Gt[Gt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Xt.x,",")+" ".concat(Xt.y,"]. Last matching segment found ends at")+" [".concat(Ut.x,", ").concat(Ut.y,"]."))}if(ie.length===1){zt=ie[0].otherSE;break}for(var _e=null,le=0,ye=Kt.length;le<ye;le++)if(Kt[le].point===Ot.point){_e=le;break}if(_e===null){Kt.push({index:Gt.length,point:Ot.point});var Ze=Ot.getLeftmostComparator(Et);zt=ie.sort(Ze)[0].otherSE;break}var ce=Kt.splice(_e)[0],ke=Gt.splice(ce.index);ke.unshift(ke[0].otherSE),et.push(new Q(ke.reverse()))}et.push(new Q(Gt))}}return et}}]),a(Q,[{key:"getGeom",value:function(){for(var Y=this.events[0].point,et=[Y],lt=1,pt=this.events.length-1;lt<pt;lt++){var bt=this.events[lt].point,Et=this.events[lt+1].point;C(bt,Y,Et)!==0&&(et.push(bt),Y=bt)}if(et.length===1)return null;var Ot=et[0],zt=et[1];C(Ot,Y,zt)===0&&et.shift(),et.push(et[0]);for(var Gt=this.isExteriorRing()?1:-1,Jt=this.isExteriorRing()?0:et.length-1,Kt=this.isExteriorRing()?et.length:-1,ie=[],Xt=Jt;Xt!=Kt;Xt+=Gt)ie.push([et[Xt].x,et[Xt].y]);return ie}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var Y=this.enclosingRing();this._isExteriorRing=!Y||!Y.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Y=this.events[0],et=1,lt=this.events.length;et<lt;et++){var pt=this.events[et];ot.compare(Y,pt)>0&&(Y=pt)}for(var bt=Y.segment.prevInResult(),Et=bt?bt.prevInResult():null;;){if(!bt)return null;if(!Et)return bt.ringOut;if(Et.ringOut!==bt.ringOut)return Et.ringOut.enclosingRing()!==bt.ringOut?bt.ringOut:bt.ringOut.enclosingRing();bt=Et.prevInResult(),Et=bt?bt.prevInResult():null}}}]),Q}(),mt=function(){function Q(Y){r(this,Q),this.exteriorRing=Y,Y.poly=this,this.interiorRings=[]}return a(Q,[{key:"addInterior",value:function(Y){this.interiorRings.push(Y),Y.poly=this}},{key:"getGeom",value:function(){var Y=[this.exteriorRing.getGeom()];if(Y[0]===null)return null;for(var et=0,lt=this.interiorRings.length;et<lt;et++){var pt=this.interiorRings[et].getGeom();pt!==null&&Y.push(pt)}return Y}}]),Q}(),wt=function(){function Q(Y){r(this,Q),this.rings=Y,this.polys=this._composePolys(Y)}return a(Q,[{key:"getGeom",value:function(){for(var Y=[],et=0,lt=this.polys.length;et<lt;et++){var pt=this.polys[et].getGeom();pt!==null&&Y.push(pt)}return Y}},{key:"_composePolys",value:function(Y){for(var et=[],lt=0,pt=Y.length;lt<pt;lt++){var bt=Y[lt];if(!bt.poly)if(bt.isExteriorRing())et.push(new mt(bt));else{var Et=bt.enclosingRing();Et.poly||et.push(new mt(Et)),Et.poly.addInterior(bt)}}return et}}]),Q}(),_t=function(){function Q(Y){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.compare;r(this,Q),this.queue=Y,this.tree=new m(et),this.segments=[]}return a(Q,[{key:"process",value:function(Y){var et=Y.segment,lt=[];if(Y.consumedBy)return Y.isLeft?this.queue.remove(Y.otherSE):this.tree.remove(et),lt;var pt=Y.isLeft?this.tree.insert(et):this.tree.find(et);if(!pt)throw new Error("Unable to find segment #".concat(et.id," ")+"[".concat(et.leftSE.point.x,", ").concat(et.leftSE.point.y,"] -> ")+"[".concat(et.rightSE.point.x,", ").concat(et.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var bt=pt,Et=pt,Ot=void 0,zt=void 0;Ot===void 0;)(bt=this.tree.prev(bt))===null?Ot=null:bt.key.consumedBy===void 0&&(Ot=bt.key);for(;zt===void 0;)(Et=this.tree.next(Et))===null?zt=null:Et.key.consumedBy===void 0&&(zt=Et.key);if(Y.isLeft){var Gt=null;if(Ot){var Jt=Ot.getIntersection(et);if(Jt!==null&&(et.isAnEndpoint(Jt)||(Gt=Jt),!Ot.isAnEndpoint(Jt)))for(var Kt=this._splitSafely(Ot,Jt),ie=0,Xt=Kt.length;ie<Xt;ie++)lt.push(Kt[ie])}var Ut=null;if(zt){var _e=zt.getIntersection(et);if(_e!==null&&(et.isAnEndpoint(_e)||(Ut=_e),!zt.isAnEndpoint(_e)))for(var le=this._splitSafely(zt,_e),ye=0,Ze=le.length;ye<Ze;ye++)lt.push(le[ye])}if(Gt!==null||Ut!==null){var ce=null;ce=Gt===null?Ut:Ut===null||ot.comparePoints(Gt,Ut)<=0?Gt:Ut,this.queue.remove(et.rightSE),lt.push(et.rightSE);for(var ke=et.split(ce),He=0,$t=ke.length;He<$t;He++)lt.push(ke[He])}lt.length>0?(this.tree.remove(et),lt.push(Y)):(this.segments.push(et),et.prev=Ot)}else{if(Ot&&zt){var Te=Ot.getIntersection(zt);if(Te!==null){if(!Ot.isAnEndpoint(Te))for(var bi=this._splitSafely(Ot,Te),ue=0,Fe=bi.length;ue<Fe;ue++)lt.push(bi[ue]);if(!zt.isAnEndpoint(Te))for(var ai=this._splitSafely(zt,Te),Le=0,Oe=ai.length;Le<Oe;Le++)lt.push(ai[Le])}}this.tree.remove(et)}return lt}},{key:"_splitSafely",value:function(Y,et){this.tree.remove(Y);var lt=Y.rightSE;this.queue.remove(lt);var pt=Y.split(et);return pt.push(lt),Y.consumedBy===void 0&&this.tree.insert(Y),pt}}]),Q}(),Ct=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ft=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,At=new(function(){function Q(){r(this,Q)}return a(Q,[{key:"run",value:function(Y,et,lt){At.type=Y,N.reset();for(var pt=[new q(et,!0)],bt=0,Et=lt.length;bt<Et;bt++)pt.push(new q(lt[bt],!1));if(At.numMultiPolys=pt.length,At.type==="difference")for(var Ot=pt[0],zt=1;zt<pt.length;)z(pt[zt].bbox,Ot.bbox)!==null?zt++:pt.splice(zt,1);if(At.type==="intersection"){for(var Gt=0,Jt=pt.length;Gt<Jt;Gt++)for(var Kt=pt[Gt],ie=Gt+1,Xt=pt.length;ie<Xt;ie++)if(z(Kt.bbox,pt[ie].bbox)===null)return[]}for(var Ut=new m(ot.compare),_e=0,le=pt.length;_e<le;_e++)for(var ye=pt[_e].getSweepEvents(),Ze=0,ce=ye.length;Ze<ce;Ze++)if(Ut.insert(ye[Ze]),Ut.size>Ct)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var ke=new _t(Ut),He=Ut.size,$t=Ut.pop();$t;){var Te=$t.key;if(Ut.size===He){var bi=Te.segment;throw new Error("Unable to pop() ".concat(Te.isLeft?"left":"right"," SweepEvent ")+"[".concat(Te.point.x,", ").concat(Te.point.y,"] from segment #").concat(bi.id," ")+"[".concat(bi.leftSE.point.x,", ").concat(bi.leftSE.point.y,"] -> ")+"[".concat(bi.rightSE.point.x,", ").concat(bi.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Ut.size>Ct)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(ke.segments.length>Ft)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var ue=ke.process(Te),Fe=0,ai=ue.length;Fe<ai;Fe++){var Le=ue[Fe];Le.consumedBy===void 0&&Ut.insert(Le)}He=Ut.size,$t=Ut.pop()}N.reset();var Oe=rt.factory(ke.segments);return new wt(Oe).getGeom()}}]),Q}()),vt=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return At.run("union",Q,et)},kt=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return At.run("intersection",Q,et)},gt=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return At.run("xor",Q,et)},ut=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return At.run("difference",Q,et)};return{union:vt,intersection:kt,xor:gt,difference:ut}}()},2582:function(i){i.exports=function(){"use strict";function r(D,U,z,V,G){(function tt(K,B,N,Z,w){for(;Z>N;){if(Z-N>600){var C=Z-N+1,k=B-N+1,T=Math.log(C),R=.5*Math.exp(2*T/3),F=.5*Math.sqrt(T*R*(C-R)/C)*(k-C/2<0?-1:1);tt(K,B,Math.max(N,Math.floor(B-k*R/C+F)),Math.min(Z,Math.floor(B+(C-k)*R/C+F)),w)}var H=K[B],it=N,ot=Z;for(s(K,N,B),w(K[Z],H)>0&&s(K,N,Z);it<ot;){for(s(K,it,ot),it++,ot--;w(K[it],H)<0;)it++;for(;w(K[ot],H)>0;)ot--}w(K[N],H)===0?s(K,N,ot):s(K,++ot,Z),ot<=B&&(N=ot+1),B<=ot&&(Z=ot-1)}})(D,U,z||0,V||D.length-1,G||a)}function s(D,U,z){var V=D[U];D[U]=D[z],D[z]=V}function a(D,U){return D<U?-1:D>U?1:0}var o=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(D,U,z){if(!z)return U.indexOf(D);for(var V=0;V<U.length;V++)if(z(D,U[V]))return V;return-1}function c(D,U){h(D,0,D.children.length,U,D)}function h(D,U,z,V,G){G||(G=S(null)),G.minX=1/0,G.minY=1/0,G.maxX=-1/0,G.maxY=-1/0;for(var tt=U;tt<z;tt++){var K=D.children[tt];d(G,D.leaf?V(K):K)}return G}function d(D,U){return D.minX=Math.min(D.minX,U.minX),D.minY=Math.min(D.minY,U.minY),D.maxX=Math.max(D.maxX,U.maxX),D.maxY=Math.max(D.maxY,U.maxY),D}function p(D,U){return D.minX-U.minX}function g(D,U){return D.minY-U.minY}function m(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function _(D){return D.maxX-D.minX+(D.maxY-D.minY)}function v(D,U){return D.minX<=U.minX&&D.minY<=U.minY&&U.maxX<=D.maxX&&U.maxY<=D.maxY}function x(D,U){return U.minX<=D.maxX&&U.minY<=D.maxY&&U.maxX>=D.minX&&U.maxY>=D.minY}function S(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function O(D,U,z,V,G){for(var tt=[U,z];tt.length;)if(!((z=tt.pop())-(U=tt.pop())<=V)){var K=U+Math.ceil((z-U)/V/2)*V;r(D,K,U,z,G),tt.push(U,K,K,z)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(D){var U=this.data,z=[];if(!x(D,U))return z;for(var V=this.toBBox,G=[];U;){for(var tt=0;tt<U.children.length;tt++){var K=U.children[tt],B=U.leaf?V(K):K;x(D,B)&&(U.leaf?z.push(K):v(D,B)?this._all(K,z):G.push(K))}U=G.pop()}return z},o.prototype.collides=function(D){var U=this.data;if(!x(D,U))return!1;for(var z=[];U;){for(var V=0;V<U.children.length;V++){var G=U.children[V],tt=U.leaf?this.toBBox(G):G;if(x(D,tt)){if(U.leaf||v(D,tt))return!0;z.push(G)}}U=z.pop()}return!1},o.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var U=0;U<D.length;U++)this.insert(D[U]);return this}var z=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length)if(this.data.height===z.height)this._splitRoot(this.data,z);else{if(this.data.height<z.height){var V=this.data;this.data=z,z=V}this._insert(z,this.data.height-z.height-1,!0)}else this.data=z;return this},o.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},o.prototype.clear=function(){return this.data=S([]),this},o.prototype.remove=function(D,U){if(!D)return this;for(var z,V,G,tt=this.data,K=this.toBBox(D),B=[],N=[];tt||B.length;){if(tt||(tt=B.pop(),V=B[B.length-1],z=N.pop(),G=!0),tt.leaf){var Z=l(D,tt.children,U);if(Z!==-1)return tt.children.splice(Z,1),B.push(tt),this._condense(B),this}G||tt.leaf||!v(tt,K)?V?(z++,tt=V.children[z],G=!1):tt=null:(B.push(tt),N.push(z),z=0,V=tt,tt=tt.children[0])}return this},o.prototype.toBBox=function(D){return D},o.prototype.compareMinX=function(D,U){return D.minX-U.minX},o.prototype.compareMinY=function(D,U){return D.minY-U.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(D){return this.data=D,this},o.prototype._all=function(D,U){for(var z=[];D;)D.leaf?U.push.apply(U,D.children):z.push.apply(z,D.children),D=z.pop();return U},o.prototype._build=function(D,U,z,V){var G,tt=z-U+1,K=this._maxEntries;if(tt<=K)return c(G=S(D.slice(U,z+1)),this.toBBox),G;V||(V=Math.ceil(Math.log(tt)/Math.log(K)),K=Math.ceil(tt/Math.pow(K,V-1))),(G=S([])).leaf=!1,G.height=V;var B=Math.ceil(tt/K),N=B*Math.ceil(Math.sqrt(K));O(D,U,z,N,this.compareMinX);for(var Z=U;Z<=z;Z+=N){var w=Math.min(Z+N-1,z);O(D,Z,w,B,this.compareMinY);for(var C=Z;C<=w;C+=B){var k=Math.min(C+B-1,w);G.children.push(this._build(D,C,k,V-1))}}return c(G,this.toBBox),G},o.prototype._chooseSubtree=function(D,U,z,V){for(;V.push(U),!U.leaf&&V.length-1!==z;){for(var G=1/0,tt=1/0,K=void 0,B=0;B<U.children.length;B++){var N=U.children[B],Z=m(N),w=(C=D,k=N,(Math.max(k.maxX,C.maxX)-Math.min(k.minX,C.minX))*(Math.max(k.maxY,C.maxY)-Math.min(k.minY,C.minY))-Z);w<tt?(tt=w,G=Z<G?Z:G,K=N):w===tt&&Z<G&&(G=Z,K=N)}U=K||U.children[0]}var C,k;return U},o.prototype._insert=function(D,U,z){var V=z?D:this.toBBox(D),G=[],tt=this._chooseSubtree(V,this.data,U,G);for(tt.children.push(D),d(tt,V);U>=0&&G[U].children.length>this._maxEntries;)this._split(G,U),U--;this._adjustParentBBoxes(V,G,U)},o.prototype._split=function(D,U){var z=D[U],V=z.children.length,G=this._minEntries;this._chooseSplitAxis(z,G,V);var tt=this._chooseSplitIndex(z,G,V),K=S(z.children.splice(tt,z.children.length-tt));K.height=z.height,K.leaf=z.leaf,c(z,this.toBBox),c(K,this.toBBox),U?D[U-1].children.push(K):this._splitRoot(z,K)},o.prototype._splitRoot=function(D,U){this.data=S([D,U]),this.data.height=D.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(D,U,z){for(var V,G,tt,K,B,N,Z,w=1/0,C=1/0,k=U;k<=z-U;k++){var T=h(D,0,k,this.toBBox),R=h(D,k,z,this.toBBox),F=(G=T,tt=R,K=void 0,B=void 0,N=void 0,Z=void 0,K=Math.max(G.minX,tt.minX),B=Math.max(G.minY,tt.minY),N=Math.min(G.maxX,tt.maxX),Z=Math.min(G.maxY,tt.maxY),Math.max(0,N-K)*Math.max(0,Z-B)),H=m(T)+m(R);F<w?(w=F,V=k,C=H<C?H:C):F===w&&H<C&&(C=H,V=k)}return V||z-U},o.prototype._chooseSplitAxis=function(D,U,z){var V=D.leaf?this.compareMinX:p,G=D.leaf?this.compareMinY:g;this._allDistMargin(D,U,z,V)<this._allDistMargin(D,U,z,G)&&D.children.sort(V)},o.prototype._allDistMargin=function(D,U,z,V){D.children.sort(V);for(var G=this.toBBox,tt=h(D,0,U,G),K=h(D,z-U,z,G),B=_(tt)+_(K),N=U;N<z-U;N++){var Z=D.children[N];d(tt,D.leaf?G(Z):Z),B+=_(tt)}for(var w=z-U-1;w>=U;w--){var C=D.children[w];d(K,D.leaf?G(C):C),B+=_(K)}return B},o.prototype._adjustParentBBoxes=function(D,U,z){for(var V=z;V>=0;V--)d(U[V],D)},o.prototype._condense=function(D){for(var U=D.length-1,z=void 0;U>=0;U--)D[U].children.length===0?U>0?(z=D[U-1].children).splice(z.indexOf(D[U]),1):this.clear():c(D[U],this.toBBox)},o}()}},t={};function e(i){var r=t[i];if(r!==void 0)return r.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return n[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}e.n=i=>{var r=i&&i.__esModule?()=>i.default:()=>i;return e.d(r,{a:r}),r},e.d=(i,r)=>{for(var s in r)e.o(r,s)&&!e.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:r[s]})},e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),e.o=(i,r)=>Object.prototype.hasOwnProperty.call(i,r),e.nmd=i=>(i.paths=[],i.children||(i.children=[]),i),e(5975)})();var wv=Mi(jp());var Yh=Mi(Jn()),Hp="https://bl.skookum.cc/data/bl24/power_grid.geojson",Gp="./data/bl24/labels/power_grid.geojson";async function ab(){try{return await(await fetch(Hp)).json()}catch(n){return console.error(n),console.warn("Failed to fetch from",Hp,"trying",Gp),await(await fetch(Gp)).json()}}var Up=async n=>{try{let t=await ab();for(let e of t.features){if(e.geometry.type!="Point")continue;let i=e.properties.Name,r=e.properties["marker-size"],{description:s,power_size:a,power_area:o}=e.properties,l=e.geometry.coordinates[0],c=e.geometry.coordinates[1],h=28+3*r,d=h*.5,p=new(Yh.default.Icon.extend({options:{iconSize:[h,h],iconAnchor:[d,d],popupAnchor:[0,-h*.25],iconUrl:"./img/icons/powerdot.png"}})),g=`<h3>${i}</h3>`;a&&(g+=`<p>Power Size: ${a}</p>`),o&&(g+=`<p>Power Area: ${o}</p>`),s&&(g+=`<p>${s}</p>`),Yh.default.marker([c,l],{icon:p}).addTo(n).bindPopup(g)}}catch(t){console.error("Failed to add the power grid layer",t)}};var Zh=Mi(Jn()),uu=32,Vp=uu*.5,lb=Zh.default.Icon.extend({options:{iconSize:[uu,uu],iconAnchor:[Vp,Vp],popupAnchor:[0,-uu*.25]}}),Kh=async(n,t)=>{let e=await(await fetch(`./data/bl25/poi/${n}`)).json(),i={};for(let r of e.features){let{name:s,description:a,category:o,link:l}=r.properties,c=r.geometry.coordinates[0],h=r.geometry.coordinates[1];if(i[o]||(i[o]=new lb({iconUrl:"./img/icons/"+o+".png"})),l&&a){let p=l[0]!="#"?'target="_blank':"";a=`${a}<br><a href="${l}" ${p}">Read more here</a>`}let d=`<h3>${s}</h3> <p>${a}</p>`;Zh.default.marker([h,c],{icon:i[o]}).addTo(t).bindPopup(d)}};var cu=Mi(Jn()),qp=async n=>{let t=await(await fetch("./data/bl25/labels/quarters.json")).json();hu(t,n,"white",.001)},Wp=async n=>{let t=await(await fetch("./data/bl25/labels/plazas.json")).json();hu(t,n,"white",.0015)},Xp=async n=>{let t=await(await fetch("./data/bl25/labels/neighbourhoods.json")).json();hu(t,n,"white",.003);let e=await(await fetch("./data/bl25/labels/non-camp-neighbourhoods.json")).json();hu(e,n,"white",.003)},hu=(n,t,e,i)=>{for(let s of n.features){let a=s.properties.size||i,o=s.properties.rotation||0,l=s.properties.name,c=s.geometry.coordinates[0],h=s.geometry.coordinates[1];var r=cu.latLngBounds([[h-a*.5,c-a*.5],[h+a*.5,c+a*.5]]);let d=ub(l,"bradleyHand",e,o);cu.svgOverlay(d,r,{opacity:1,interactive:!1}).addTo(t)}};function ub(n,t,e,i){let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg");let s="",a=n.split(`
`);for(let l of a)s+=`<tspan x="0" dy=".6em">${l}</tspan>`;r.innerHTML=`<text transform="rotate(${i})" id="text" fill="${e}"font-family="${t}" x="0" y="0" fill="white" >${s}</text>`,document.body.appendChild(r);let o=r.getBBox();return r.remove(),r.setAttribute("viewBox",`${o.x} ${o.y} ${o.width} ${o.height}`),r}var qo=Mi(Jn()),$p=async(n,t,e)=>{let i=qo.default.control({position:"bottomright"});i.onAdd=function(a){var o=qo.default.DomUtil.create("div","legend");return o.innerHTML+='<img src="./img/slopelegend.png" alt="legend" width="100" height="141">',o};let r=qo.default.control({position:"bottomright"});r.onAdd=function(a){var o=qo.default.DomUtil.create("div","legend");return o.innerHTML+='<img src="./img/heightlegend.png" alt="legend" width="100" height="124">',o};let s=qo.default.control({position:"bottomright"});s.onAdd=function(a){var o=qo.default.DomUtil.create("div","legend");return o.innerHTML+='<a target="blank" href="https://docs.google.com/document/d/1JjJArPpIsX-F82Xmcr2Y2dSPHtu2TjGTeYbP4ASkOWY"><img src="./img/soundlegend.png" alt="legend" width="150" height="165"></a>',o},n.on("overlayadd",function(a){switch(a.name){case"Slope":i.addTo(n);break;case"Height":r.addTo(n);break;case"Soundguide":s.addTo(n);break}}),n.on("overlayremove",function(a){switch(a.name){case"Slope":n.removeControl(i);break;case"Height":n.removeControl(r);break;case"Soundguide":n.removeControl(s);break}}),qo.default.control.layers(void 0,t,{position:"bottomright"}).addTo(n),e.has("Slope")&&i.addTo(n),e.has("Height")&&r.addTo(n),e.has("Soundguide")&&s.addTo(n)};var Zp=Mi(Jn());function Yp(n){return function(){let t={opacity:1,fillOpacity:0,weight:1.5,dashArray:"5"};switch(n){case"container":return{...t,fillOpacity:1,color:"#c3c3c3",weight:0};case"naturereserve":return{...t,color:"#00b521",weight:3};case"propertyborder":return{...t,color:"#e77409",weight:1};case"friends":return{...t,color:"turquoise"};case"forbidden":return{...t,color:"red",fillOpacity:.5};case"toilet":return{...t,color:"skyblue",fillOpacity:1,dashArray:"0"};case"bridge":return{...t,color:"brown",fillOpacity:1};case"oktocamp":case"publicplease":case"parking":return{...t,color:"lightblue",fillOpacity:0};case"slope":return{...t,fillOpacity:0,opacity:0};case"fireroad":return{...t,weight:1.5,dashArray:"2",color:"#f05039",fillOpacity:.15};case"plaza":return{...t,weight:2,dashArray:"4",color:"white",opacity:.5,fillOpacity:0};case"quarter":return{...t,weight:5,dashArray:"10",color:"white",opacity:.5,fillOpacity:0};case"neighbourhood":return{...t,weight:5,dashArray:"10",color:"white",opacity:.5,fillOpacity:0};case"minorroad":return{...t,weight:1,dashArray:"20",color:"black",opacity:.5,fillOpacity:0};case"area":return{dashArray:"5",color:"#e7e309",fillOpacity:0,weight:2};case"hiddenforbidden":return{color:"black",fillOpacity:1,weight:0};case"redsoundzone":return{...t,color:"#b60d0d",fillOpacity:.75,weight:0};case"orangesoundzone":return{...t,color:"#ff6f16",fillOpacity:.75,weight:0};case"yellowsoundzone":return{...t,color:"#f4e512",fillOpacity:.75,weight:0};case"closetosanctuary":case"greensoundzone":return{...t,color:"#00e300",fillOpacity:.75,weight:0};case"bluesoundzone":return{...t,color:"#29b6f3",fillOpacity:.75,weight:0};default:return{...t,color:"black"}}}}var Ea=async(n,t,e)=>{let r=await(await fetch(e)).json();new Set(r.features.map(a=>a.properties[t])).forEach(a=>{let o=Zp.default.geoJSON(r,{filter:hb(t,a),style:Yp(a)});n.groups[a]=o})};function hb(n,t){return function(e){return e.properties[n]===t}}var Jh=Mi(Jn()),Qh=async(n,t,e)=>{var i=Jh.default.latLngBounds(e),r=Jh.default.imageOverlay(t,i,{opacity:1,interactive:!1});return r};var Ca=null,tc=null,ec=null,fu={text:"Close",variant:"primary",shouldCloseDrawer:!1},Kp=new Promise(async n=>{await Promise.allSettled([customElements.whenDefined("sl-drawer")]);let t=document.getElementById("drawer");t.addEventListener("sl-request-close",e=>{t.placement!="end"&&e.detail.source==="overlay"&&e.preventDefault()}),t.addEventListener("sl-after-hide",e=>{ec&&ec(),tc&&tc(),Ca&&(Ca=null),yo.page=void 0}),n(t)});async function Jp(n){for(let t=0;t<n.length;t++){let e=n[t];t==n.length-1?await Vs(e,{keepOpen:!1}):await Vs(e,{keepOpen:!0})}}async function Vs(n,t={},e=()=>{}){return new Promise(async i=>{ec=n.onClose||null,tc=i;let r=await Kp;r.placement=n.position||"bottom";let s=r.querySelector(".container");s.innerHTML="";let o=await(await fetch(`drawers/${n.file}.html`)).text();n.file.indexOf("home")>-1&&(n.keepOpen=!0);let l=document.createElement("div");l.innerHTML=o;for(let h of Array.from(l.children))s.appendChild(h);let c=document.getElementById("buttons-container");c.innerHTML="",(!n.buttons||n.buttons.length===0)&&(n.buttons=[],n.buttons.push({text:fu.text,variant:fu.variant})),n.buttons.forEach(h=>{if(t.keepOpen)h.onClickAction=i;else if(Ca&&Ca.keepOpen){let p={...Ca};h.text="Back",h.shouldCloseDrawer=!1,h.onClickAction=async()=>{await Vs(p),i()}}let d=document.createElement("sl-button");d.innerText=h.text||fu.text,d.setAttribute("variant",h.variant||fu.variant),d.addEventListener("click",()=>{h.onClickAction?(h.onClickAction(),h.shouldCloseDrawer&&r.hide()):r.hide()}),c.appendChild(d)}),yo.page=n.file,Ca=n,r.show(),e()})}async function Qp(){(await Kp).hide()}async function qs(n,t="primary",e="info-circle",i=3e3){let r=Object.assign(document.createElement("sl-alert"),{variant:t,closable:!0,duration:i,innerHTML:`
		<sl-icon name="${e}" slot="icon"></sl-icon>
		${n}
	  `});return document.body.append(r),await Promise.allSettled([customElements.whenDefined("sl-alert")]),r.toast(),r}var du=Mi(Jn());function tm(n){let t=du.Control.extend({options:{position:"bottomleft"},onAdd:()=>{let e=du.DomUtil.create("div","note-about-editing");return e.innerHTML+=n,e}});return new t}var Ma="layers:",Sa="page:",ic=class{constructor(){this._leafletHash=null;this._leafletMap=null;this._hashMeta=[];this._layers=[];this._page=void 0;window.addEventListener("hashchange",()=>{if(!(location.hash.indexOf(Ma)==1||location.hash.indexOf(Sa)==1))return;let t=location.hash.substring(1).split("/");for(let e of t)e.indexOf(Ma)==0&&(this.layers=e.substring(Ma.length).split(",")),e.indexOf(Sa)==0&&(this.page=e.substring(Sa.length),Vs({file:this.page,position:"end"}))})}set map(t){this._leafletMap=t,this._leafletHash=new L.Hash(this._leafletMap)}get layers(){return this._layers}set layers(t){t instanceof Set&&(t=Array.from(t)),this._layers=t,this.encode()}get page(){return this._page}set page(t){this._page=t,this.encode()}encode(){this._hashMeta=[],this._layers.length>0&&this._hashMeta.push(Ma+this._layers.join(",")),this._page&&this._page.length>0&&this._hashMeta.push(Sa+this._page),this._leafletHash.setHashMeta(this._hashMeta,!0)}decode(t){this._hashMeta=t;let e=this._hashMeta.find(r=>r.startsWith(Ma));this._layers=e?e.substring(Ma.length).split(","):[];let i=this._hashMeta.find(r=>r.startsWith(Sa));this._page=i?i.substring(Sa.length):void 0,this._page&&this._page!=="edit-entity"&&Vs({file:this.page,position:"end"})}},yo=new ic;function rc(n,t="short",e="short"){return new Date(Date.parse(n)).toLocaleString("sv",{dateStyle:t,timeStyle:e})}var Ss=Mi(Jn());var Ch=Mi(Jn());var On=63710088e-1,im={centimeters:On*100,centimetres:On*100,degrees:On/111325,feet:On*3.28084,inches:On*39.37,kilometers:On/1e3,kilometres:On/1e3,meters:On,metres:On,miles:On/1609.344,millimeters:On*1e3,millimetres:On*1e3,nauticalmiles:On/1852,radians:1,yards:On*1.0936},y3={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/On,yards:1.0936133};function zn(n,t,e){e===void 0&&(e={});var i={type:"Feature"};return(e.id===0||e.id)&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.properties=t||{},i.geometry=n,i}function Er(n,t,e){if(e===void 0&&(e={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vo(n[0])||!vo(n[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:n};return zn(i,t,e)}function Wr(n,t,e){e===void 0&&(e={});for(var i=0,r=n;i<r.length;i++){var s=r[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}var o={type:"Polygon",coordinates:n};return zn(o,t,e)}function fn(n,t,e){if(e===void 0&&(e={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:n};return zn(i,t,e)}function Si(n,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=n,e}function nc(n,t,e){e===void 0&&(e={});var i={type:"MultiPoint",coordinates:n};return zn(i,t,e)}function dl(n,t){t===void 0&&(t="kilometers");var e=im[t];if(!e)throw new Error(t+" units is invalid");return n*e}function pl(n,t){t===void 0&&(t="kilometers");var e=im[t];if(!e)throw new Error(t+" units is invalid");return n/e}function oa(n){var t=n%(2*Math.PI);return t*180/Math.PI}function jn(n){var t=n%360;return t*Math.PI/180}function vo(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function jr(n){return!!n&&n.constructor===Object}function Mn(n,t,e){if(n!==null)for(var i,r,s,a,o,l,c,h=0,d=0,p,g=n.type,m=g==="FeatureCollection",_=g==="Feature",v=m?n.features.length:1,x=0;x<v;x++){c=m?n.features[x].geometry:_?n.geometry:n,p=c?c.type==="GeometryCollection":!1,o=p?c.geometries.length:1;for(var S=0;S<o;S++){var O=0,D=0;if(a=p?c.geometries[S]:c,a!==null){l=a.coordinates;var U=a.type;switch(h=e&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(l,d,x,O,D)===!1)return!1;d++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],d,x,O,D)===!1)return!1;d++,U==="MultiPoint"&&O++}U==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(t(l[i][r],d,x,O,D)===!1)return!1;d++}U==="MultiLineString"&&O++,U==="Polygon"&&D++}U==="Polygon"&&O++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(D=0,r=0;r<l[i].length;r++){for(s=0;s<l[i][r].length-h;s++){if(t(l[i][r][s],d,x,O,D)===!1)return!1;d++}D++}O++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(Mn(a.geometries[i],t,e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function rm(n,t,e,i){var r=e;return Mn(n,function(s,a,o,l,c){a===0&&e===void 0?r=s:r=t(r,s,a,o,l,c)},i),r}function Lr(n,t){if(n.type==="Feature")t(n,0);else if(n.type==="FeatureCollection")for(var e=0;e<n.features.length&&t(n.features[e],e)!==!1;e++);}function no(n,t){var e,i,r,s,a,o,l,c,h,d,p=0,g=n.type==="FeatureCollection",m=n.type==="Feature",_=g?n.features.length:1;for(e=0;e<_;e++){for(o=g?n.features[e].geometry:m?n.geometry:n,c=g?n.features[e].properties:m?n.properties:{},h=g?n.features[e].bbox:m?n.bbox:void 0,d=g?n.features[e].id:m?n.id:void 0,l=o?o.type==="GeometryCollection":!1,a=l?o.geometries.length:1,r=0;r<a;r++){if(s=l?o.geometries[r]:o,s===null){if(t(null,p,c,h,d)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,p,c,h,d)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],p,c,h,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function nm(n,t,e){var i=e;return no(n,function(r,s,a,o,l){s===0&&e===void 0?i=r:i=t(i,r,s,a,o,l)}),i}function os(n,t){no(n,function(e,i,r,s,a){var o=e===null?null:e.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(zn(e,r,{bbox:s,id:a}),i,0)===!1?!1:void 0}var l;switch(o){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<e.coordinates.length;c++){var h=e.coordinates[c],d={type:l,coordinates:h};if(t(zn(d,r),i,c)===!1)return!1}})}function Wo(n,t){os(n,function(e,i,r){var s=0;if(e.geometry){var a=e.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var o,l=0,c=0,h=0;if(Mn(e,function(d,p,g,m,_){if(o===void 0||i>l||m>c||_>h){o=d,l=i,c=m,h=_,s=0;return}var v=fn([o,d],e.properties);if(t(v,i,r,_,s)===!1)return!1;s++,o=d})===!1)return!1}}})}function sc(n){var t=[1/0,1/0,-1/0,-1/0];return Mn(n,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}sc.default=sc;var Sn=sc;function en(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Cr(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function oc(n,t,e){if(!n)throw new Error("No feature passed");if(!e)throw new Error(".featureOf() requires a name");if(!n||n.type!=="Feature"||!n.geometry)throw new Error("Invalid input to "+e+", Feature with geometry required");if(!n.geometry||n.geometry.type!==t)throw new Error("Invalid input to "+e+": must be a "+t+", given "+n.geometry.type)}function dn(n){return n.type==="Feature"?n.geometry:n}var vb=Mi(pu(),1);var Lb=Mi(xm(),1);function pn(n,t,e){if(e===void 0&&(e={}),!n)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=en(n),r=dn(t),s=r.type,a=t.bbox,o=r.coordinates;if(a&&Tb(i,a)===!1)return!1;s==="Polygon"&&(o=[o]);for(var l=!1,c=0;c<o.length&&!l;c++)if(Em(i,o[c][0],e.ignoreBoundary)){for(var h=!1,d=1;d<o[c].length&&!h;)Em(i,o[c][d],!e.ignoreBoundary)&&(h=!0),d++;h||(l=!0)}return l}function Em(n,t,e){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var r=0,s=t.length-1;r<t.length;s=r++){var a=t[r][0],o=t[r][1],l=t[s][0],c=t[s][1],h=n[1]*(a-l)+o*(l-n[0])+c*(n[0]-a)===0&&(a-n[0])*(l-n[0])<=0&&(o-n[1])*(c-n[1])<=0;if(h)return!e;var d=o>n[1]!=c>n[1]&&n[0]<(l-a)*(n[1]-o)/(c-o)+a;d&&(i=!i)}return i}function Tb(n,t){return t[0]<=n[0]&&t[1]<=n[1]&&t[2]>=n[0]&&t[3]>=n[1]}function Pb(n,t,e){e===void 0&&(e={});var i=en(n),r=en(t),s=jn(r[1]-i[1]),a=jn(r[0]-i[0]),o=jn(i[1]),l=jn(r[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(o)*Math.cos(l);return dl(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),e.units)}var rn=Pb;var Mm=new ArrayBuffer(16),WM=new Float64Array(Mm),XM=new Uint32Array(Mm);var qb=Mi(Rm(),1);var bk=function(){function n(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(var e=0;e<this.length-1;e++){var i=this.points[e],r=this.points[e+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var e=0;e<this.centers.length-1;e++){var s=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,a=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,o=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+s),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+a),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+o)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+s),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+a),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+o)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return n.prototype.cacheSteps=function(t){var e=[],i=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var s=this.pos(r),a=Math.sqrt((s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y)+(s.z-i.z)*(s.z-i.z));a>t&&(e.push(r),i=s)}return e},n.prototype.vector=function(t){var e=this.pos(t+10),i=this.pos(t-10);return{angle:180*Math.atan2(e.y-i.y,e.x-i.x)/3.14,speed:Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)+(i.z-e.z)*(i.z-e.z))}},n.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var i=e/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i),s=(this.length-1)*i-r;return Wb(s,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},n}();function Wb(n,t,e,i,r){var s=Xb(n),a={x:r.x*s[0]+i.x*s[1]+e.x*s[2]+t.x*s[3],y:r.y*s[0]+i.y*s[1]+e.y*s[2]+t.y*s[3],z:r.z*s[0]+i.z*s[1]+e.z*s[2]+t.z*s[3]};return a}function Xb(n){var t=n*n,e=t*n;return[e,3*t*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}function vl(n,t){t===void 0&&(t={});var e=Number(n[0]),i=Number(n[1]),r=Number(n[2]),s=Number(n[3]);if(n.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,i],o=[e,s],l=[r,s],c=[r,i];return Wr([[a,c,l,o,a]],t.properties,{bbox:n,id:t.id})}function $b(n){return vl(Sn(n))}var xc=$b;function bo(n,t,e,i){i===void 0&&(i={});var r=en(n),s=jn(r[0]),a=jn(r[1]),o=jn(e),l=pl(t,i.units),c=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(o)),h=s+Math.atan2(Math.sin(o)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(c)),d=oa(h),p=oa(c);return Er([d,p],i.properties)}function Do(n,t,e){if(e===void 0&&(e={}),e.final===!0)return Yb(n,t);var i=en(n),r=en(t),s=jn(i[0]),a=jn(r[0]),o=jn(i[1]),l=jn(r[1]),c=Math.sin(a-s)*Math.cos(l),h=Math.cos(o)*Math.sin(l)-Math.sin(o)*Math.cos(l)*Math.cos(a-s);return oa(Math.atan2(c,h))}function Yb(n,t){var e=Do(t,n);return e=(e+180)%360,e}function Zb(n,t){t===void 0&&(t={});var e=Sn(n),i=(e[0]+e[2])/2,r=(e[1]+e[3])/2;return Er([i,r],t.properties,t)}var bl=Zb;var d1=Mi(Dm(),1);function p1(n){if(!n)throw new Error("geojson is required");var t=[];return os(n,function(e){m1(e,t)}),Si(t)}function m1(n,t){var e=[],i=n.geometry;if(i!==null){switch(i.type){case"Polygon":e=Cr(i);break;case"LineString":e=[Cr(i)]}e.forEach(function(r){var s=g1(r,n.properties);s.forEach(function(a){a.id=t.length,t.push(a)})})}}function g1(n,t){var e=[];return n.reduce(function(i,r){var s=fn([i,r],t);return s.bbox=y1(i,r),e.push(s),r}),e}function y1(n,t){var e=n[0],i=n[1],r=t[0],s=t[1],a=e<r?e:r,o=i<s?i:s,l=e>r?e:r,c=i>s?i:s;return[a,o,l,c]}var Xo=p1;var Jm=Mi(Ru(),1);function V1(n,t){var e={},i=[];if(n.type==="LineString"&&(n=zn(n)),t.type==="LineString"&&(t=zn(t)),n.type==="Feature"&&t.type==="Feature"&&n.geometry!==null&&t.geometry!==null&&n.geometry.type==="LineString"&&t.geometry.type==="LineString"&&n.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var r=Km(n,t);return r&&i.push(r),Si(i)}var s=(0,Jm.default)();return s.load(Xo(t)),Lr(Xo(n),function(a){Lr(s.search(a),function(o){var l=Km(a,o);if(l){var c=Cr(l).join(",");e[c]||(e[c]=!0,i.push(l))}})}),Si(i)}function Km(n,t){var e=Cr(n),i=Cr(t);if(e.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(i.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=e[0][0],s=e[0][1],a=e[1][0],o=e[1][1],l=i[0][0],c=i[0][1],h=i[1][0],d=i[1][1],p=(d-c)*(a-r)-(h-l)*(o-s),g=(h-l)*(s-c)-(d-c)*(r-l),m=(a-r)*(s-c)-(o-s)*(r-l);if(p===0)return null;var _=g/p,v=m/p;if(_>=0&&_<=1&&v>=0&&v<=1){var x=r+_*(a-r),S=s+_*(o-s);return Er([x,S])}return null}var Yo=V1;function q1(n,t,e){e===void 0&&(e={});var i=Er([1/0,1/0],{dist:1/0}),r=0;return os(n,function(s){for(var a=Cr(s),o=0;o<a.length-1;o++){var l=Er(a[o]);l.properties.dist=rn(t,l,e);var c=Er(a[o+1]);c.properties.dist=rn(t,c,e);var h=rn(l,c,e),d=Math.max(l.properties.dist,c.properties.dist),p=Do(l,c),g=bo(t,d,p+90,e),m=bo(t,d,p-90,e),_=Yo(fn([g.geometry.coordinates,m.geometry.coordinates]),fn([l.geometry.coordinates,c.geometry.coordinates])),v=null;_.features.length>0&&(v=_.features[0],v.properties.dist=rn(t,v,e),v.properties.location=r+rn(l,v,e)),l.properties.dist<i.properties.dist&&(i=l,i.properties.index=o,i.properties.location=r),c.properties.dist<i.properties.dist&&(i=c,i.properties.index=o+1,i.properties.location=r+h),v&&v.properties.dist<i.properties.dist&&(i=v,i.properties.index=o),r+=h}}),i}var Bo=q1;var X1=Mi(pu(),1);var Qm=6378137;function wo(n){return nm(n,function(t,e){return t+$1(e)},0)}function $1(n){var t=0,e;switch(n.type){case"Polygon":return tg(n.coordinates);case"MultiPolygon":for(e=0;e<n.coordinates.length;e++)t+=tg(n.coordinates[e]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function tg(n){var t=0;if(n&&n.length>0){t+=Math.abs(eg(n[0]));for(var e=1;e<n.length;e++)t-=Math.abs(eg(n[e]))}return t}function eg(n){var t,e,i,r,s,a,o,l=0,c=n.length;if(c>2){for(o=0;o<c;o++)o===c-2?(r=c-2,s=c-1,a=0):o===c-1?(r=c-1,s=0,a=1):(r=o,s=o+1,a=o+2),t=n[r],e=n[s],i=n[a],l+=(jc(i[0])-jc(t[0]))*Math.sin(jc(e[1]));l=l*Qm*Qm/2}return l}function jc(n){return n*Math.PI/180}function Y1(n,t,e){e===void 0&&(e={});for(var i=en(n),r=Cr(t),s=0;s<r.length-1;s++){var a=!1;if(e.ignoreEndVertices&&(s===0&&(a="start"),s===r.length-2&&(a="end"),s===0&&s+1===r.length-1&&(a="both")),Z1(r[s],r[s+1],i,a,typeof e.epsilon>"u"?null:e.epsilon))return!0}return!1}function Z1(n,t,e,i,r){var s=e[0],a=e[1],o=n[0],l=n[1],c=t[0],h=t[1],d=e[0]-o,p=e[1]-l,g=c-o,m=h-l,_=d*m-p*g;if(r!==null){if(Math.abs(_)>r)return!1}else if(_!==0)return!1;if(i){if(i==="start")return Math.abs(g)>=Math.abs(m)?g>0?o<s&&s<=c:c<=s&&s<o:m>0?l<a&&a<=h:h<=a&&a<l;if(i==="end")return Math.abs(g)>=Math.abs(m)?g>0?o<=s&&s<c:c<s&&s<=o:m>0?l<=a&&a<h:h<a&&a<=l;if(i==="both")return Math.abs(g)>=Math.abs(m)?g>0?o<s&&s<c:c<s&&s<o:m>0?l<a&&a<h:h<a&&a<l}else return Math.abs(g)>=Math.abs(m)?g>0?o<=s&&s<=c:c<=s&&s<=o:m>0?l<=a&&a<=h:h<=a&&a<=l;return!1}var Is=Y1;var r_=Mi(ag(),1);var lg=Math.PI/180,ug=180/Math.PI,kl=function(n,t){this.lon=n,this.lat=t,this.x=lg*n,this.y=lg*t};kl.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};kl.prototype.antipode=function(){var n=-1*this.lat,t=this.lon<0?180+this.lon:(180-this.lon)*-1;return new kl(t,n)};var hg=function(){this.coords=[],this.length=0};hg.prototype.move_to=function(n){this.length++,this.coords.push(n)};var Wc=function(n){this.properties=n||{},this.geometries=[]};Wc.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],t=0;t<this.geometries.length;t++)n.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}};Wc.prototype.wkt=function(){for(var n="",t="LINESTRING(",e=function(s){t+=s[0]+" "+s[1]+","},i=0;i<this.geometries.length;i++){if(this.geometries[i].coords.length===0)return"LINESTRING(empty)";var r=this.geometries[i].coords;r.forEach(e),n+=t.substring(0,t.length-1)+")"}return n};var cg=function(n,t,e){if(!n||n.x===void 0||n.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||t.x===void 0||t.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new kl(n.x,n.y),this.end=new kl(t.x,t.y),this.properties=e||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,s=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(s)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+t)};cg.prototype.interpolate=function(n){var t=Math.sin((1-n)*this.g)/Math.sin(this.g),e=Math.sin(n*this.g)/Math.sin(this.g),i=t*Math.cos(this.start.y)*Math.cos(this.start.x)+e*Math.cos(this.end.y)*Math.cos(this.end.x),r=t*Math.cos(this.start.y)*Math.sin(this.start.x)+e*Math.cos(this.end.y)*Math.sin(this.end.x),s=t*Math.sin(this.start.y)+e*Math.sin(this.end.y),a=ug*Math.atan2(s,Math.sqrt(Math.pow(i,2)+Math.pow(r,2))),o=ug*Math.atan2(r,i);return[o,a]};cg.prototype.Arc=function(n,t){var e=[];if(!n||n<=2)e.push([this.start.lon,this.start.lat]),e.push([this.end.lon,this.end.lat]);else for(var i=1/(n-1),r=0;r<n;++r){var s=i*r,a=this.interpolate(s);e.push(a)}for(var o=!1,l=0,c=t&&t.offset?t.offset:10,h=180-c,d=-180+c,p=360-c,g=1;g<e.length;++g){var m=e[g-1][0],_=e[g][0],v=Math.abs(_-m);v>p&&(_>h&&m<d||m>h&&_<d)?o=!0:v>l&&(l=v)}var x=[];if(o&&l<c){var S=[];x.push(S);for(var O=0;O<e.length;++O){var D=parseFloat(e[O][0]);if(O>0&&Math.abs(D-e[O-1][0])>p){var U=parseFloat(e[O-1][0]),z=parseFloat(e[O-1][1]),V=parseFloat(e[O][0]),G=parseFloat(e[O][1]);if(U>-180&&U<d&&V===180&&O+1<e.length&&e[O-1][0]>-180&&e[O-1][0]<d){S.push([-180,e[O][1]]),O++,S.push([e[O][0],e[O][1]]);continue}else if(U>h&&U<180&&V===-180&&O+1<e.length&&e[O-1][0]>h&&e[O-1][0]<180){S.push([180,e[O][1]]),O++,S.push([e[O][0],e[O][1]]);continue}if(U<d&&V>h){var tt=U;U=V,V=tt;var K=z;z=G,G=K}if(U>h&&V<d&&(V+=360),U<=180&&V>=180&&U<V){var B=(180-U)/(V-U),N=B*G+(1-B)*z;S.push([e[O-1][0]>h?180:-180,N]),S=[],S.push([e[O-1][0]>h?-180:180,N]),x.push(S)}else S=[],x.push(S);S.push([D,e[O][1]])}else S.push([e[O][0],e[O][1]])}}else{var Z=[];x.push(Z);for(var w=0;w<e.length;++w)Z.push([e[w][0],e[w][1]])}for(var C=new Wc(this.properties),k=0;k<x.length;++k){var T=new hg;C.geometries.push(T);for(var R=x[k],F=0;F<R.length;++F)T.move_to(R[F])}return C};var o_=Mi(Ru(),1);var G0=Mi(Ru(),1);var Ha=Mi(mf(),1);function vw(n,t,e){if(e===void 0&&(e={}),e=e||{},!jr(e))throw new Error("options is invalid");var i=e.tolerance||0,r=[],s=(0,G0.default)(),a=Xo(n);s.load(a);var o;return Wo(t,function(l){var c=!1;l&&(Lr(s.search(l),function(h){if(c===!1){var d=Cr(l).sort(),p=Cr(h).sort();(0,Ha.default)(d,p)||(i===0?Is(d[0],h)&&Is(d[1],h):Bo(h,d[0]).properties.dist<=i&&Bo(h,d[1]).properties.dist<=i)?(c=!0,o?o=gf(o,l):o=l):(i===0?Is(p[0],l)&&Is(p[1],l):Bo(l,p[0]).properties.dist<=i&&Bo(l,p[1]).properties.dist<=i)&&(o?o=gf(o,h):o=h)}}),c===!1&&o&&(r.push(o),o=void 0))}),o&&r.push(o),Si(r)}function gf(n,t){var e=Cr(t),i=Cr(n),r=i[0],s=i[i.length-1],a=n.geometry.coordinates;return(0,Ha.default)(e[0],r)?a.unshift(e[1]):(0,Ha.default)(e[0],s)?a.push(e[1]):(0,Ha.default)(e[1],r)?a.unshift(e[0]):(0,Ha.default)(e[1],s)&&a.push(e[0]),n}var yf=vw;var ww=Mi(pu(),1);var Ri=[],Oi=[],Ii=[],Ai=[],Ni=[],Di=[],Bi=[],Fi=[],zi=[],ji=[],Hi=[],Gi=[],Ui=[],Vi=[],qi=[],Wi=[],Xi=[],$i=[],Yi=[],Zi=[],Ki=[],Ji=[],Qi=[],tr=[];Bi[85]=ji[85]=-1;Fi[85]=Hi[85]=0;zi[85]=Gi[85]=1;Yi[85]=Ji[85]=1;Zi[85]=Qi[85]=0;Ki[85]=tr[85]=1;Ri[85]=Ai[85]=0;Oi[85]=Ni[85]=-1;Ii[85]=qi[85]=0;Wi[85]=Ui[85]=0;Xi[85]=Vi[85]=1;Di[85]=$i[85]=1;Ji[1]=Ji[169]=0;Qi[1]=Qi[169]=-1;tr[1]=tr[169]=0;Ui[1]=Ui[169]=-1;Vi[1]=Vi[169]=0;qi[1]=qi[169]=0;ji[4]=ji[166]=0;Hi[4]=Hi[166]=-1;Gi[4]=Gi[166]=1;Wi[4]=Wi[166]=1;Xi[4]=Xi[166]=0;$i[4]=$i[166]=0;Bi[16]=Bi[154]=0;Fi[16]=Fi[154]=1;zi[16]=zi[154]=1;Ai[16]=Ai[154]=1;Ni[16]=Ni[154]=0;Di[16]=Di[154]=1;Yi[64]=Yi[106]=0;Zi[64]=Zi[106]=1;Ki[64]=Ki[106]=0;Ri[64]=Ri[106]=-1;Oi[64]=Oi[106]=0;Ii[64]=Ii[106]=1;Yi[2]=Yi[168]=0;Zi[2]=Zi[168]=-1;Ki[2]=Ki[168]=1;Ji[2]=Ji[168]=0;Qi[2]=Qi[168]=-1;tr[2]=tr[168]=0;Ui[2]=Ui[168]=-1;Vi[2]=Vi[168]=0;qi[2]=qi[168]=0;Wi[2]=Wi[168]=-1;Xi[2]=Xi[168]=0;$i[2]=$i[168]=1;Bi[8]=Bi[162]=0;Fi[8]=Fi[162]=-1;zi[8]=zi[162]=0;ji[8]=ji[162]=0;Hi[8]=Hi[162]=-1;Gi[8]=Gi[162]=1;Ui[8]=Ui[162]=1;Vi[8]=Vi[162]=0;qi[8]=qi[162]=1;Wi[8]=Wi[162]=1;Xi[8]=Xi[162]=0;$i[8]=$i[162]=0;Bi[32]=Bi[138]=0;Fi[32]=Fi[138]=1;zi[32]=zi[138]=1;ji[32]=ji[138]=0;Hi[32]=Hi[138]=1;Gi[32]=Gi[138]=0;Ri[32]=Ri[138]=1;Oi[32]=Oi[138]=0;Ii[32]=Ii[138]=0;Ai[32]=Ai[138]=1;Ni[32]=Ni[138]=0;Di[32]=Di[138]=1;Ji[128]=Ji[42]=0;Qi[128]=Qi[42]=1;tr[128]=tr[42]=1;Yi[128]=Yi[42]=0;Zi[128]=Zi[42]=1;Ki[128]=Ki[42]=0;Ri[128]=Ri[42]=-1;Oi[128]=Oi[42]=0;Ii[128]=Ii[42]=1;Ai[128]=Ai[42]=-1;Ni[128]=Ni[42]=0;Di[128]=Di[42]=0;ji[5]=ji[165]=-1;Hi[5]=Hi[165]=0;Gi[5]=Gi[165]=0;Ji[5]=Ji[165]=1;Qi[5]=Qi[165]=0;tr[5]=tr[165]=0;Wi[20]=Wi[150]=0;Xi[20]=Xi[150]=1;$i[20]=$i[150]=1;Ai[20]=Ai[150]=0;Ni[20]=Ni[150]=-1;Di[20]=Di[150]=1;Bi[80]=Bi[90]=-1;Fi[80]=Fi[90]=0;zi[80]=zi[90]=1;Yi[80]=Yi[90]=1;Zi[80]=Zi[90]=0;Ki[80]=Ki[90]=1;Ui[65]=Ui[105]=0;Vi[65]=Vi[105]=1;qi[65]=qi[105]=0;Ri[65]=Ri[105]=0;Oi[65]=Oi[105]=-1;Ii[65]=Ii[105]=0;Bi[160]=Bi[10]=-1;Fi[160]=Fi[10]=0;zi[160]=zi[10]=1;ji[160]=ji[10]=-1;Hi[160]=Hi[10]=0;Gi[160]=Gi[10]=0;Ji[160]=Ji[10]=1;Qi[160]=Qi[10]=0;tr[160]=tr[10]=0;Yi[160]=Yi[10]=1;Zi[160]=Zi[10]=0;Ki[160]=Ki[10]=1;Wi[130]=Wi[40]=0;Xi[130]=Xi[40]=1;$i[130]=$i[40]=1;Ui[130]=Ui[40]=0;Vi[130]=Vi[40]=1;qi[130]=qi[40]=0;Ri[130]=Ri[40]=0;Oi[130]=Oi[40]=-1;Ii[130]=Ii[40]=0;Ai[130]=Ai[40]=0;Ni[130]=Ni[40]=-1;Di[130]=Di[40]=1;ji[37]=ji[133]=0;Hi[37]=Hi[133]=1;Gi[37]=Gi[133]=1;Ji[37]=Ji[133]=0;Qi[37]=Qi[133]=1;tr[37]=tr[133]=0;Ri[37]=Ri[133]=-1;Oi[37]=Oi[133]=0;Ii[37]=Ii[133]=0;Ai[37]=Ai[133]=1;Ni[37]=Ni[133]=0;Di[37]=Di[133]=0;Wi[148]=Wi[22]=-1;Xi[148]=Xi[22]=0;$i[148]=$i[22]=0;Ji[148]=Ji[22]=0;Qi[148]=Qi[22]=-1;tr[148]=tr[22]=1;Yi[148]=Yi[22]=0;Zi[148]=Zi[22]=1;Ki[148]=Ki[22]=1;Ai[148]=Ai[22]=-1;Ni[148]=Ni[22]=0;Di[148]=Di[22]=1;Bi[82]=Bi[88]=0;Fi[82]=Fi[88]=-1;zi[82]=zi[88]=1;Wi[82]=Wi[88]=1;Xi[82]=Xi[88]=0;$i[82]=$i[88]=1;Ui[82]=Ui[88]=-1;Vi[82]=Vi[88]=0;qi[82]=qi[88]=1;Yi[82]=Yi[88]=0;Zi[82]=Zi[88]=-1;Ki[82]=Ki[88]=0;Bi[73]=Bi[97]=0;Fi[73]=Fi[97]=1;zi[73]=zi[97]=0;ji[73]=ji[97]=0;Hi[73]=Hi[97]=-1;Gi[73]=Gi[97]=0;Ui[73]=Ui[97]=1;Vi[73]=Vi[97]=0;qi[73]=qi[97]=0;Ri[73]=Ri[97]=1;Oi[73]=Oi[97]=0;Ii[73]=Ii[97]=1;Bi[145]=Bi[25]=0;Fi[145]=Fi[25]=-1;zi[145]=zi[25]=0;Ui[145]=Ui[25]=1;Vi[145]=Vi[25]=0;qi[145]=qi[25]=1;Ji[145]=Ji[25]=0;Qi[145]=Qi[25]=1;tr[145]=tr[25]=1;Ai[145]=Ai[25]=-1;Ni[145]=Ni[25]=0;Di[145]=Di[25]=0;ji[70]=ji[100]=0;Hi[70]=Hi[100]=1;Gi[70]=Gi[100]=0;Wi[70]=Wi[100]=-1;Xi[70]=Xi[100]=0;$i[70]=$i[100]=1;Yi[70]=Yi[100]=0;Zi[70]=Zi[100]=-1;Ki[70]=Ki[100]=1;Ri[70]=Ri[100]=1;Oi[70]=Oi[100]=0;Ii[70]=Ii[100]=0;ji[101]=ji[69]=0;Hi[101]=Hi[69]=1;Gi[101]=Gi[69]=0;Ri[101]=Ri[69]=1;Oi[101]=Oi[69]=0;Ii[101]=Ii[69]=0;Ji[149]=Ji[21]=0;Qi[149]=Qi[21]=1;tr[149]=tr[21]=1;Ai[149]=Ai[21]=-1;Ni[149]=Ni[21]=0;Di[149]=Di[21]=0;Wi[86]=Wi[84]=-1;Xi[86]=Xi[84]=0;$i[86]=$i[84]=1;Yi[86]=Yi[84]=0;Zi[86]=Zi[84]=-1;Ki[86]=Ki[84]=1;Bi[89]=Bi[81]=0;Fi[89]=Fi[81]=-1;zi[89]=zi[81]=0;Ui[89]=Ui[81]=1;Vi[89]=Vi[81]=0;qi[89]=qi[81]=1;Bi[96]=Bi[74]=0;Fi[96]=Fi[74]=1;zi[96]=zi[74]=0;ji[96]=ji[74]=-1;Hi[96]=Hi[74]=0;Gi[96]=Gi[74]=1;Yi[96]=Yi[74]=1;Zi[96]=Zi[74]=0;Ki[96]=Ki[74]=0;Ri[96]=Ri[74]=1;Oi[96]=Oi[74]=0;Ii[96]=Ii[74]=1;Bi[24]=Bi[146]=0;Fi[24]=Fi[146]=-1;zi[24]=zi[146]=1;Wi[24]=Wi[146]=1;Xi[24]=Xi[146]=0;$i[24]=$i[146]=1;Ui[24]=Ui[146]=0;Vi[24]=Vi[146]=1;qi[24]=qi[146]=1;Ai[24]=Ai[146]=0;Ni[24]=Ni[146]=-1;Di[24]=Di[146]=0;ji[6]=ji[164]=-1;Hi[6]=Hi[164]=0;Gi[6]=Gi[164]=1;Wi[6]=Wi[164]=-1;Xi[6]=Xi[164]=0;$i[6]=$i[164]=0;Ji[6]=Ji[164]=0;Qi[6]=Qi[164]=-1;tr[6]=tr[164]=1;Yi[6]=Yi[164]=1;Zi[6]=Zi[164]=0;Ki[6]=Ki[164]=0;Ui[129]=Ui[41]=0;Vi[129]=Vi[41]=1;qi[129]=qi[41]=1;Ji[129]=Ji[41]=0;Qi[129]=Qi[41]=1;tr[129]=tr[41]=0;Ri[129]=Ri[41]=-1;Oi[129]=Oi[41]=0;Ii[129]=Ii[41]=0;Ai[129]=Ai[41]=0;Ni[129]=Ni[41]=-1;Di[129]=Di[41]=0;Wi[66]=Wi[104]=0;Xi[66]=Xi[104]=1;$i[66]=$i[104]=0;Ui[66]=Ui[104]=-1;Vi[66]=Vi[104]=0;qi[66]=qi[104]=1;Yi[66]=Yi[104]=0;Zi[66]=Zi[104]=-1;Ki[66]=Ki[104]=0;Ri[66]=Ri[104]=0;Oi[66]=Oi[104]=-1;Ii[66]=Ii[104]=1;Bi[144]=Bi[26]=-1;Fi[144]=Fi[26]=0;zi[144]=zi[26]=0;Ji[144]=Ji[26]=1;Qi[144]=Qi[26]=0;tr[144]=tr[26]=1;Yi[144]=Yi[26]=0;Zi[144]=Zi[26]=1;Ki[144]=Ki[26]=1;Ai[144]=Ai[26]=-1;Ni[144]=Ni[26]=0;Di[144]=Di[26]=1;ji[36]=ji[134]=0;Hi[36]=Hi[134]=1;Gi[36]=Gi[134]=1;Wi[36]=Wi[134]=0;Xi[36]=Xi[134]=1;$i[36]=$i[134]=0;Ri[36]=Ri[134]=0;Oi[36]=Oi[134]=-1;Ii[36]=Ii[134]=1;Ai[36]=Ai[134]=1;Ni[36]=Ni[134]=0;Di[36]=Di[134]=0;Bi[9]=Bi[161]=-1;Fi[9]=Fi[161]=0;zi[9]=zi[161]=0;ji[9]=ji[161]=0;Hi[9]=Hi[161]=-1;Gi[9]=Gi[161]=0;Ui[9]=Ui[161]=1;Vi[9]=Vi[161]=0;qi[9]=qi[161]=0;Ji[9]=Ji[161]=1;Qi[9]=Qi[161]=0;tr[9]=tr[161]=1;Bi[136]=0;Fi[136]=1;zi[136]=1;ji[136]=0;Hi[136]=1;Gi[136]=0;Wi[136]=-1;Xi[136]=0;$i[136]=1;Ui[136]=-1;Vi[136]=0;qi[136]=0;Ji[136]=0;Qi[136]=-1;tr[136]=0;Yi[136]=0;Zi[136]=-1;Ki[136]=1;Ri[136]=1;Oi[136]=0;Ii[136]=0;Ai[136]=1;Ni[136]=0;Di[136]=1;Bi[34]=0;Fi[34]=-1;zi[34]=0;ji[34]=0;Hi[34]=-1;Gi[34]=1;Wi[34]=1;Xi[34]=0;$i[34]=0;Ui[34]=1;Vi[34]=0;qi[34]=1;Ji[34]=0;Qi[34]=1;tr[34]=1;Yi[34]=0;Zi[34]=1;Ki[34]=0;Ri[34]=-1;Oi[34]=0;Ii[34]=1;Ai[34]=-1;Ni[34]=0;Di[34]=0;Bi[35]=0;Fi[35]=1;zi[35]=1;ji[35]=0;Hi[35]=-1;Gi[35]=1;Wi[35]=1;Xi[35]=0;$i[35]=0;Ui[35]=-1;Vi[35]=0;qi[35]=0;Ji[35]=0;Qi[35]=-1;tr[35]=0;Yi[35]=0;Zi[35]=1;Ki[35]=0;Ri[35]=-1;Oi[35]=0;Ii[35]=1;Ai[35]=1;Ni[35]=0;Di[35]=1;Bi[153]=0;Fi[153]=1;zi[153]=1;Ui[153]=-1;Vi[153]=0;qi[153]=0;Ji[153]=0;Qi[153]=-1;tr[153]=0;Ai[153]=1;Ni[153]=0;Di[153]=1;ji[102]=0;Hi[102]=-1;Gi[102]=1;Wi[102]=1;Xi[102]=0;$i[102]=0;Yi[102]=0;Zi[102]=1;Ki[102]=0;Ri[102]=-1;Oi[102]=0;Ii[102]=1;Bi[155]=0;Fi[155]=-1;zi[155]=0;Ui[155]=1;Vi[155]=0;qi[155]=1;Ji[155]=0;Qi[155]=1;tr[155]=1;Ai[155]=-1;Ni[155]=0;Di[155]=0;ji[103]=0;Hi[103]=1;Gi[103]=0;Wi[103]=-1;Xi[103]=0;$i[103]=1;Yi[103]=0;Zi[103]=-1;Ki[103]=1;Ri[103]=1;Oi[103]=0;Ii[103]=0;Bi[152]=0;Fi[152]=1;zi[152]=1;Wi[152]=-1;Xi[152]=0;$i[152]=1;Ui[152]=-1;Vi[152]=0;qi[152]=0;Ji[152]=0;Qi[152]=-1;tr[152]=0;Yi[152]=0;Zi[152]=-1;Ki[152]=1;Ai[152]=1;Ni[152]=0;Di[152]=1;Bi[156]=0;Fi[156]=-1;zi[156]=1;Wi[156]=1;Xi[156]=0;$i[156]=1;Ui[156]=-1;Vi[156]=0;qi[156]=0;Ji[156]=0;Qi[156]=-1;tr[156]=0;Yi[156]=0;Zi[156]=1;Ki[156]=1;Ai[156]=-1;Ni[156]=0;Di[156]=1;Bi[137]=0;Fi[137]=1;zi[137]=1;ji[137]=0;Hi[137]=1;Gi[137]=0;Ui[137]=-1;Vi[137]=0;qi[137]=0;Ji[137]=0;Qi[137]=-1;tr[137]=0;Ri[137]=1;Oi[137]=0;Ii[137]=0;Ai[137]=1;Ni[137]=0;Di[137]=1;Bi[139]=0;Fi[139]=1;zi[139]=1;ji[139]=0;Hi[139]=-1;Gi[139]=0;Ui[139]=1;Vi[139]=0;qi[139]=0;Ji[139]=0;Qi[139]=1;tr[139]=0;Ri[139]=-1;Oi[139]=0;Ii[139]=0;Ai[139]=1;Ni[139]=0;Di[139]=1;Bi[98]=0;Fi[98]=-1;zi[98]=0;ji[98]=0;Hi[98]=-1;Gi[98]=1;Wi[98]=1;Xi[98]=0;$i[98]=0;Ui[98]=1;Vi[98]=0;qi[98]=1;Yi[98]=0;Zi[98]=1;Ki[98]=0;Ri[98]=-1;Oi[98]=0;Ii[98]=1;Bi[99]=0;Fi[99]=1;zi[99]=0;ji[99]=0;Hi[99]=-1;Gi[99]=1;Wi[99]=1;Xi[99]=0;$i[99]=0;Ui[99]=-1;Vi[99]=0;qi[99]=1;Yi[99]=0;Zi[99]=-1;Ki[99]=0;Ri[99]=1;Oi[99]=0;Ii[99]=1;ji[38]=0;Hi[38]=-1;Gi[38]=1;Wi[38]=1;Xi[38]=0;$i[38]=0;Ji[38]=0;Qi[38]=1;tr[38]=1;Yi[38]=0;Zi[38]=1;Ki[38]=0;Ri[38]=-1;Oi[38]=0;Ii[38]=1;Ai[38]=-1;Ni[38]=0;Di[38]=0;ji[39]=0;Hi[39]=1;Gi[39]=1;Wi[39]=-1;Xi[39]=0;$i[39]=0;Ji[39]=0;Qi[39]=-1;tr[39]=1;Yi[39]=0;Zi[39]=1;Ki[39]=0;Ri[39]=-1;Oi[39]=0;Ii[39]=1;Ai[39]=1;Ni[39]=0;Di[39]=0;var vf=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},bf=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},_f=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},wf=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},xf=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},Ef=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},Cf=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},Mf=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},xw=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},Ew=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},Cw=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},Mw=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Sw=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},kw=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},Lw=function(){return[[0,0],[0,1],[1,1],[1,0]]},Tw=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},Pw=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},Rw=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},Ow=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},Iw=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},Aw=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},Nw=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},Dw=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},Bw=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Fw=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},zw=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},jw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},Hw=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Gw=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Uw=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},Vw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},qw=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Ww=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Xw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},$w=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Yw=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Zw=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Kw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Jw=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Qw=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},rr=[],nr=[],sr=[],or=[],ar=[],lr=[],ur=[],hr=[];or[1]=ar[1]=18;or[169]=ar[169]=18;sr[4]=nr[4]=12;sr[166]=nr[166]=12;rr[16]=hr[16]=4;rr[154]=hr[154]=4;lr[64]=ur[64]=22;lr[106]=ur[106]=22;sr[2]=lr[2]=17;or[2]=ar[2]=18;sr[168]=lr[168]=17;or[168]=ar[168]=18;rr[8]=or[8]=9;nr[8]=sr[8]=12;rr[162]=or[162]=9;nr[162]=sr[162]=12;rr[32]=hr[32]=4;nr[32]=ur[32]=1;rr[138]=hr[138]=4;nr[138]=ur[138]=1;ar[128]=hr[128]=21;lr[128]=ur[128]=22;ar[42]=hr[42]=21;lr[42]=ur[42]=22;nr[5]=ar[5]=14;nr[165]=ar[165]=14;sr[20]=hr[20]=6;sr[150]=hr[150]=6;rr[80]=lr[80]=11;rr[90]=lr[90]=11;or[65]=ur[65]=3;or[105]=ur[105]=3;rr[160]=lr[160]=11;nr[160]=ar[160]=14;rr[10]=lr[10]=11;nr[10]=ar[10]=14;sr[130]=hr[130]=6;or[130]=ur[130]=3;sr[40]=hr[40]=6;or[40]=ur[40]=3;nr[101]=ur[101]=1;nr[69]=ur[69]=1;ar[149]=hr[149]=21;ar[21]=hr[21]=21;sr[86]=lr[86]=17;sr[84]=lr[84]=17;rr[89]=or[89]=9;rr[81]=or[81]=9;rr[96]=ur[96]=0;nr[96]=lr[96]=15;rr[74]=ur[74]=0;nr[74]=lr[74]=15;rr[24]=sr[24]=8;or[24]=hr[24]=7;rr[146]=sr[146]=8;or[146]=hr[146]=7;nr[6]=lr[6]=15;sr[6]=ar[6]=16;nr[164]=lr[164]=15;sr[164]=ar[164]=16;or[129]=hr[129]=7;ar[129]=ur[129]=20;or[41]=hr[41]=7;ar[41]=ur[41]=20;sr[66]=ur[66]=2;or[66]=lr[66]=19;sr[104]=ur[104]=2;or[104]=lr[104]=19;rr[144]=ar[144]=10;lr[144]=hr[144]=23;rr[26]=ar[26]=10;lr[26]=hr[26]=23;nr[36]=hr[36]=5;sr[36]=ur[36]=2;nr[134]=hr[134]=5;sr[134]=ur[134]=2;rr[9]=ar[9]=10;nr[9]=or[9]=13;rr[161]=ar[161]=10;nr[161]=or[161]=13;nr[37]=hr[37]=5;ar[37]=ur[37]=20;nr[133]=hr[133]=5;ar[133]=ur[133]=20;sr[148]=ar[148]=16;lr[148]=hr[148]=23;sr[22]=ar[22]=16;lr[22]=hr[22]=23;rr[82]=sr[82]=8;or[82]=lr[82]=19;rr[88]=sr[88]=8;or[88]=lr[88]=19;rr[73]=ur[73]=0;nr[73]=or[73]=13;rr[97]=ur[97]=0;nr[97]=or[97]=13;rr[145]=or[145]=9;ar[145]=hr[145]=21;rr[25]=or[25]=9;ar[25]=hr[25]=21;nr[70]=ur[70]=1;sr[70]=lr[70]=17;nr[100]=ur[100]=1;sr[100]=lr[100]=17;rr[34]=or[34]=9;nr[34]=sr[34]=12;ar[34]=hr[34]=21;lr[34]=ur[34]=22;rr[136]=hr[136]=4;nr[136]=ur[136]=1;sr[136]=lr[136]=17;or[136]=ar[136]=18;rr[35]=hr[35]=4;nr[35]=sr[35]=12;or[35]=ar[35]=18;lr[35]=ur[35]=22;rr[153]=hr[153]=4;or[153]=ar[153]=18;nr[102]=sr[102]=12;lr[102]=ur[102]=22;rr[155]=or[155]=9;ar[155]=hr[155]=23;nr[103]=ur[103]=1;sr[103]=lr[103]=17;rr[152]=hr[152]=4;sr[152]=lr[152]=17;or[152]=ar[152]=18;rr[156]=sr[156]=8;or[156]=ar[156]=18;lr[156]=hr[156]=23;rr[137]=hr[137]=4;nr[137]=ur[137]=1;or[137]=ar[137]=18;rr[139]=hr[139]=4;nr[139]=or[139]=13;ar[139]=ur[139]=20;rr[98]=or[98]=9;nr[98]=sr[98]=12;lr[98]=ur[98]=22;rr[99]=ur[99]=0;nr[99]=sr[99]=12;or[99]=lr[99]=19;nr[38]=sr[38]=12;ar[38]=hr[38]=21;lr[38]=ur[38]=22;nr[39]=hr[39]=5;sr[39]=ar[39]=16;lr[39]=ur[39]=22;var Re=[];Re[1]=Re[169]=vf;Re[4]=Re[166]=bf;Re[16]=Re[154]=_f;Re[64]=Re[106]=wf;Re[168]=Re[2]=xf;Re[162]=Re[8]=Ef;Re[138]=Re[32]=Cf;Re[42]=Re[128]=Mf;Re[5]=Re[165]=xw;Re[20]=Re[150]=Ew;Re[80]=Re[90]=Cw;Re[65]=Re[105]=Mw;Re[160]=Re[10]=Sw;Re[130]=Re[40]=kw;Re[85]=Lw;Re[101]=Re[69]=Tw;Re[149]=Re[21]=Pw;Re[86]=Re[84]=Rw;Re[89]=Re[81]=Ow;Re[96]=Re[74]=Iw;Re[24]=Re[146]=Aw;Re[6]=Re[164]=Nw;Re[129]=Re[41]=Dw;Re[66]=Re[104]=Bw;Re[144]=Re[26]=Fw;Re[36]=Re[134]=zw;Re[9]=Re[161]=jw;Re[37]=Re[133]=Hw;Re[148]=Re[22]=Gw;Re[82]=Re[88]=Uw;Re[73]=Re[97]=Vw;Re[145]=Re[25]=qw;Re[70]=Re[100]=Ww;Re[34]=function(n){return[Mf(n),Ef(n)]};Re[35]=Xw;Re[136]=function(n){return[Cf(n),xf(n)]};Re[153]=function(n){return[_f(n),vf(n)]};Re[102]=function(n){return[bf(n),wf(n)]};Re[155]=$w;Re[103]=Yw;Re[152]=function(n){return[_f(n),xf(n)]};Re[156]=Zw;Re[137]=function(n){return[Cf(n),vf(n)]};Re[139]=Kw;Re[98]=function(n){return[Ef(n),wf(n)]};Re[99]=Jw;Re[38]=function(n){return[bf(n),Mf(n)]};Re[39]=Qw;function ex(n){return(n>0)-(n<0)||+n}function Ga(n,t,e){var i=t[0]-n[0],r=t[1]-n[1],s=e[0]-t[0],a=e[1]-t[1];return ex(i*a-s*r)}function U0(n,t){var e=n.geometry.coordinates[0].map(function(a){return a[0]}),i=n.geometry.coordinates[0].map(function(a){return a[1]}),r=t.geometry.coordinates[0].map(function(a){return a[0]}),s=t.geometry.coordinates[0].map(function(a){return a[1]});return Math.max.apply(null,e)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,s)&&Math.min.apply(null,e)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,s)}function Sf(n,t){return t.geometry.coordinates[0].every(function(e){return pn(Er(e),n)})}function V0(n,t){return n[0]===t[0]&&n[1]===t[1]}var ix=function(){function n(t){this.id=n.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(t){return t.join(",")},n.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},n.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},n.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,i){var r=e.to,s=i.to;if(r.coordinates[0]-t.coordinates[0]>=0&&s.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&s.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]===0&&s.coordinates[0]-t.coordinates[0]===0)return r.coordinates[1]-t.coordinates[1]>=0||s.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-s.coordinates[1]:s.coordinates[1]-r.coordinates[1];var a=Ga(t.coordinates,r.coordinates,s.coordinates);if(a<0)return 1;if(a>0)return-1;var o=Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2),l=Math.pow(s.coordinates[0]-t.coordinates[0],2)+Math.pow(s.coordinates[1]-t.coordinates[1],2);return o-l}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},n.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},n}(),kf=ix;var rx=function(){function n(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return fn([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(t){return Ga(t.from.coordinates,t.to.coordinates,this.to.coordinates)},n}(),q0=rx;var nx=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},n.prototype.get=function(t){return this.edges[t]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(t){this.edges.forEach(t)},n.prototype.map=function(t){return this.edges.map(t)},n.prototype.some=function(t){return this.edges.some(t)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(a,o,l){return o.from.coordinates[1]>t.edges[a].from.coordinates[1]&&(a=l),a},0),i=(e===0?this.length:e)-1,r=(e+1)%this.length,s=Ga(this.edges[i].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return s===0?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:s>0},n.prototype.toMultiPoint=function(){return nc(this.edges.map(function(t){return t.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(e){return e.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=Wr([t])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=xc(this.toPolygon())},n.findEdgeRingContaining=function(t,e){var i=t.getEnvelope(),r,s;return e.forEach(function(a){var o=a.getEnvelope();if(s&&(r=s.getEnvelope()),!U0(o,i)&&Sf(o,i)){for(var l=t.map(function(m){return m.from.coordinates}),c=void 0,h=function(m){a.some(function(_){return V0(m,_.from.coordinates)})||(c=m)},d=0,p=l;d<p.length;d++){var g=p[d];h(g)}c&&a.inside(Er(c))&&(!s||Sf(r,o))&&(s=a)}}),s},n.prototype.inside=function(t){return pn(t,this.toPolygon())},n}(),Lf=nx;function sx(n){if(!n)throw new Error("No geojson passed");if(n.type!=="FeatureCollection"&&n.type!=="GeometryCollection"&&n.type!=="MultiLineString"&&n.type!=="LineString"&&n.type!=="Feature")throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var Y5=function(){function n(){this.edges=[],this.nodes={}}return n.fromGeoJson=function(t){sx(t);var e=new n;return os(t,function(i){oc(i,"LineString","Graph::fromGeoJson"),rm(i,function(r,s){if(r){var a=e.getNode(r),o=e.getNode(s);e.addEdge(a,o)}return s})}),e},n.prototype.getNode=function(t){var e=kf.buildId(t),i=this.nodes[e];return i||(i=this.nodes[e]=new kf(t)),i},n.prototype.addEdge=function(t,e){var i=new q0(t,e),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},n.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},n.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var i=t.getOuterEdges().map(function(r){return r.to});this.removeNode(t),i.forEach(function(r){return e._removeIfDangle(r)})}},n.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},n.prototype._computeNextCWEdges=function(t){var e=this;typeof t>"u"?Object.keys(this.nodes).forEach(function(i){return e._computeNextCWEdges(e.nodes[i])}):t.getOuterEdges().forEach(function(i,r){t.getOuterEdge((r===0?t.getOuterEdges().length:r)-1).symetric.next=i})},n.prototype._computeNextCCWEdges=function(t,e){for(var i=t.getOuterEdges(),r,s,a=i.length-1;a>=0;--a){var o=i[a],l=o.symetric,c=void 0,h=void 0;o.label===e&&(c=o),l.label===e&&(h=l),!(!c||!h)&&(h&&(s=h),c&&(s&&(s.next=c,s=void 0),r||(r=c)))}s&&(s.next=r)},n.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(i){if(!(i.label>=0)){t.push(i);var r=i;do r.label=e,r=r.next;while(!i.isEqual(r));e++}}),t},n.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){t._findIntersectionNodes(i).forEach(function(r){t._computeNextCCWEdges(r,i.label)})});var e=[];return this.edges.forEach(function(i){i.ring||e.push(t._findEdgeRing(i))}),e},n.prototype._findIntersectionNodes=function(t){var e=[],i=t,r=function(){var s=0;i.from.getOuterEdges().forEach(function(a){a.label===t.label&&++s}),s>1&&e.push(i.from),i=i.next};do r();while(!t.isEqual(i));return e},n.prototype._findEdgeRing=function(t){var e=t,i=new Lf;do i.push(e),e.ring=i,e=e.next;while(!t.isEqual(e));return i},n.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(i){return e.removeEdge(i)}),t.innerEdges.forEach(function(i){return e.removeEdge(i)}),delete this.nodes[t.id]},n.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},n}();function As(n,t){var e=dn(n),i=dn(t),r=e.type,s=i.type,a=e.coordinates,o=i.coordinates;switch(r){case"Point":switch(s){case"Point":return Tf(a,o);default:throw new Error("feature2 "+s+" geometry not supported")}case"MultiPoint":switch(s){case"Point":return ox(e,i);case"MultiPoint":return ax(e,i);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"Point":return Is(i,e,{ignoreEndVertices:!0});case"LineString":return hx(e,i);case"MultiPoint":return lx(e,i);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"Point":return pn(i,e,{ignoreBoundary:!0});case"LineString":return cx(e,i);case"Polygon":return fx(e,i);case"MultiPoint":return ux(e,i);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function ox(n,t){var e,i=!1;for(e=0;e<n.coordinates.length;e++)if(Tf(n.coordinates[e],t.coordinates)){i=!0;break}return i}function ax(n,t){for(var e=0,i=t.coordinates;e<i.length;e++){for(var r=i[e],s=!1,a=0,o=n.coordinates;a<o.length;a++){var l=o[a];if(Tf(r,l)){s=!0;break}}if(!s)return!1}return!0}function lx(n,t){for(var e=!1,i=0,r=t.coordinates;i<r.length;i++){var s=r[i];if(Is(s,n,{ignoreEndVertices:!0})&&(e=!0),!Is(s,n))return!1}return!!e}function ux(n,t){for(var e=0,i=t.coordinates;e<i.length;e++){var r=i[e];if(!pn(r,n,{ignoreBoundary:!0}))return!1}return!0}function hx(n,t){for(var e=!1,i=0,r=t.coordinates;i<r.length;i++){var s=r[i];if(Is({type:"Point",coordinates:s},n,{ignoreEndVertices:!0})&&(e=!0),!Is({type:"Point",coordinates:s},n,{ignoreEndVertices:!1}))return!1}return e}function cx(n,t){var e=!1,i=0,r=Sn(n),s=Sn(t);if(!X0(r,s))return!1;for(i;i<t.coordinates.length-1;i++){var a=dx(t.coordinates[i],t.coordinates[i+1]);if(pn({type:"Point",coordinates:a},n,{ignoreBoundary:!0})){e=!0;break}}return e}function fx(n,t){if(n.type==="Feature"&&n.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;var e=Sn(n),i=Sn(t);if(!X0(e,i))return!1;for(var r=dn(t).coordinates,s=0,a=r;s<a.length;s++)for(var o=a[s],l=0,c=o;l<c.length;l++){var h=c[l];if(!pn(h,n))return!1}return!0}function X0(n,t){return!(n[0]>t[0]||n[2]<t[2]||n[1]>t[1]||n[3]<t[3])}function Tf(n,t){return n[0]===t[0]&&n[1]===t[1]}function dx(n,t){return[(n[0]+t[0])/2,(n[1]+t[1])/2]}var K0=Mi(Pf(),1);function oo(n,t){var e=dn(n),i=dn(t),r=e.type,s=i.type;if(r==="MultiPoint"&&s!=="MultiPoint"||(r==="LineString"||r==="MultiLineString")&&s!=="LineString"&&s!=="MultiLineString"||(r==="Polygon"||r==="MultiPolygon")&&s!=="Polygon"&&s!=="MultiPolygon")throw new Error("features must be of the same type");if(r==="Point")throw new Error("Point geometry not supported");var a=new K0.default({precision:6});if(a.compare(n,t))return!1;var o=0;switch(r){case"MultiPoint":for(var l=0;l<e.coordinates.length;l++)for(var c=0;c<i.coordinates.length;c++){var h=e.coordinates[l],d=i.coordinates[c];if(h[0]===d[0]&&h[1]===d[1])return!0}return!1;case"LineString":case"MultiLineString":Wo(n,function(p){Wo(t,function(g){yf(p,g).features.length&&o++})});break;case"Polygon":case"MultiPolygon":Wo(n,function(p){Wo(t,function(g){Yo(p,g).features.length&&o++})});break}return o>0}var gx=Mi(Pf(),1);var vx=Mi(iy(),1);var Mx=Mi(fy(),1);function py(n){for(var t=n,e=[];t.parent;)e.unshift(t),t=t.parent;return e}function kx(){return new my(function(n){return n.f})}var Af={search:function(n,t,e,i){n.cleanDirty(),i=i||{};var r=i.heuristic||Af.heuristics.manhattan,s=i.closest||!1,a=kx(),o=t;for(t.h=r(t,e),a.push(t);a.size()>0;){var l=a.pop();if(l===e)return py(l);l.closed=!0;for(var c=n.neighbors(l),h=0,d=c.length;h<d;++h){var p=c[h];if(!(p.closed||p.isWall())){var g=l.g+p.getCost(l),m=p.visited;(!m||g<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||r(p,e),p.g=g,p.f=p.g+p.h,n.markDirty(p),s&&(p.h<o.h||p.h===o.h&&p.g<o.g)&&(o=p),m?a.rescoreElement(p):a.push(p))}}}return s?py(o):[]},heuristics:{manhattan:function(n,t){var e=Math.abs(t.x-n.x),i=Math.abs(t.y-n.y);return e+i},diagonal:function(n,t){var e=1,i=Math.sqrt(2),r=Math.abs(t.x-n.x),s=Math.abs(t.y-n.y);return e*(r+s)+(i-2*e)*Math.min(r,s)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function Il(n,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var e=0;e<n.length;e++){this.grid[e]=[];for(var i=0,r=n[e];i<r.length;i++){var s=new Ju(e,i,r[i]);this.grid[e][i]=s,this.nodes.push(s)}}this.init()}Il.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)Af.cleanNode(this.nodes[n])};Il.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)Af.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]};Il.prototype.markDirty=function(n){this.dirtyNodes.push(n)};Il.prototype.neighbors=function(n){var t=[],e=n.x,i=n.y,r=this.grid;return r[e-1]&&r[e-1][i]&&t.push(r[e-1][i]),r[e+1]&&r[e+1][i]&&t.push(r[e+1][i]),r[e]&&r[e][i-1]&&t.push(r[e][i-1]),r[e]&&r[e][i+1]&&t.push(r[e][i+1]),this.diagonal&&(r[e-1]&&r[e-1][i-1]&&t.push(r[e-1][i-1]),r[e+1]&&r[e+1][i-1]&&t.push(r[e+1][i-1]),r[e-1]&&r[e-1][i+1]&&t.push(r[e-1][i+1]),r[e+1]&&r[e+1][i+1]&&t.push(r[e+1][i+1])),t};Il.prototype.toString=function(){for(var n=[],t=this.grid,e,i,r,s,a=0,o=t.length;a<o;a++){for(e=[],i=t[a],r=0,s=i.length;r<s;r++)e.push(i[r].weight);n.push(e.join(" "))}return n.join(`
`)};function Ju(n,t,e){this.x=n,this.y=t,this.weight=e}Ju.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};Ju.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?this.weight*1.41421:this.weight};Ju.prototype.isWall=function(){return this.weight===0};function my(n){this.content=[],this.scoreFunction=n}my.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),n},remove:function(n){var t=this.content.indexOf(n),e=this.content.pop();t!==this.content.length-1&&(this.content[t]=e,this.scoreFunction(e)<this.scoreFunction(n)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var t=this.content[n];n>0;){var e=(n+1>>1)-1,i=this.content[e];if(this.scoreFunction(t)<this.scoreFunction(i))this.content[e]=t,this.content[n]=i,n=e;else break}},bubbleUp:function(n){for(var t=this.content.length,e=this.content[n],i=this.scoreFunction(e);;){var r=n+1<<1,s=r-1,a=null,o;if(s<t){var l=this.content[s];o=this.scoreFunction(l),o<i&&(a=s)}if(r<t){var c=this.content[r],h=this.scoreFunction(c);h<(a===null?i:o)&&(a=r)}if(a!==null)this.content[n]=this.content[a],this.content[a]=e,n=a;else break}}};function Nf(){this._=null}function Va(n){n.U=n.C=n.L=n.R=n.P=n.N=null}Nf.prototype={constructor:Nf,insert:function(n,t){var e,i,r;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=gy(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)i=e.U,e===i.L?(r=i.R,r&&r.C?(e.C=r.C=!1,i.C=!0,n=i):(n===e.R&&(Al(this,e),n=e,e=n.U),e.C=!1,i.C=!0,Nl(this,i))):(r=i.L,r&&r.C?(e.C=r.C=!1,i.C=!0,n=i):(n===e.L&&(Nl(this,e),n=e,e=n.U),e.C=!1,i.C=!0,Al(this,i))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t=n.U,e,i=n.L,r=n.R,s,a;if(i?r?s=gy(r):s=i:s=r,t?t.L===n?t.L=s:t.R=s:this._=s,i&&r?(a=s.C,s.C=n.C,s.L=i,i.U=s,s!==r?(t=s.U,s.U=n.U,n=s.R,t.L=n,s.R=r,r.U=s):(s.U=t,t=s,n=s.R)):(a=n.C,n=s),n&&(n.U=t),!a){if(n&&n.C){n.C=!1;return}do{if(n===this._)break;if(n===t.L){if(e=t.R,e.C&&(e.C=!1,t.C=!0,Al(this,t),e=t.R),e.L&&e.L.C||e.R&&e.R.C){(!e.R||!e.R.C)&&(e.L.C=!1,e.C=!0,Nl(this,e),e=t.R),e.C=t.C,t.C=e.R.C=!1,Al(this,t),n=this._;break}}else if(e=t.L,e.C&&(e.C=!1,t.C=!0,Nl(this,t),e=t.L),e.L&&e.L.C||e.R&&e.R.C){(!e.L||!e.L.C)&&(e.R.C=!1,e.C=!0,Al(this,e),e=t.L),e.C=t.C,t.C=e.L.C=!1,Nl(this,t),n=this._;break}e.C=!0,n=t,t=t.U}while(!n.C);n&&(n.C=!1)}}};function Al(n,t){var e=t,i=t.R,r=e.U;r?r.L===e?r.L=i:r.R=i:n._=i,i.U=r,e.U=i,e.R=i.L,e.R&&(e.R.U=e),i.L=e}function Nl(n,t){var e=t,i=t.L,r=e.U;r?r.L===e?r.L=i:r.R=i:n._=i,i.U=r,e.U=i,e.L=i.R,e.L&&(e.L.U=e),i.R=e}function gy(n){for(;n.L;)n=n.L;return n}var Df=Nf;function qa(n,t,e,i){var r=[null,null],s=Hn.push(r)-1;return r.left=n,r.right=t,e&&Dl(r,n,t,e),i&&Dl(r,t,n,i),ds[n.index].halfedges.push(s),ds[t.index].halfedges.push(s),r}function Wa(n,t,e){var i=[t,e];return i.left=n,i}function Dl(n,t,e,i){!n[0]&&!n[1]?(n[0]=i,n.left=t,n.right=e):n.left===e?n[1]=i:n[0]=i}function Lx(n,t,e,i,r){var s=n[0],a=n[1],o=s[0],l=s[1],c=a[0],h=a[1],d=0,p=1,g=c-o,m=h-l,_;if(_=t-o,!(!g&&_>0)){if(_/=g,g<0){if(_<d)return;_<p&&(p=_)}else if(g>0){if(_>p)return;_>d&&(d=_)}if(_=i-o,!(!g&&_<0)){if(_/=g,g<0){if(_>p)return;_>d&&(d=_)}else if(g>0){if(_<d)return;_<p&&(p=_)}if(_=e-l,!(!m&&_>0)){if(_/=m,m<0){if(_<d)return;_<p&&(p=_)}else if(m>0){if(_>p)return;_>d&&(d=_)}if(_=r-l,!(!m&&_<0)){if(_/=m,m<0){if(_>p)return;_>d&&(d=_)}else if(m>0){if(_<d)return;_<p&&(p=_)}return!(d>0)&&!(p<1)||(d>0&&(n[0]=[o+d*g,l+d*m]),p<1&&(n[1]=[o+p*g,l+p*m])),!0}}}}}function Tx(n,t,e,i,r){var s=n[1];if(s)return!0;var a=n[0],o=n.left,l=n.right,c=o[0],h=o[1],d=l[0],p=l[1],g=(c+d)/2,m=(h+p)/2,_,v;if(p===h){if(g<t||g>=i)return;if(c>d){if(!a)a=[g,e];else if(a[1]>=r)return;s=[g,r]}else{if(!a)a=[g,r];else if(a[1]<e)return;s=[g,e]}}else if(_=(c-d)/(p-h),v=m-_*g,_<-1||_>1)if(c>d){if(!a)a=[(e-v)/_,e];else if(a[1]>=r)return;s=[(r-v)/_,r]}else{if(!a)a=[(r-v)/_,r];else if(a[1]<e)return;s=[(e-v)/_,e]}else if(h<p){if(!a)a=[t,_*t+v];else if(a[0]>=i)return;s=[i,_*i+v]}else{if(!a)a=[i,_*i+v];else if(a[0]<t)return;s=[t,_*t+v]}return n[0]=a,n[1]=s,!0}function yy(n,t,e,i){for(var r=Hn.length,s;r--;)(!Tx(s=Hn[r],n,t,e,i)||!Lx(s,n,t,e,i)||!(Math.abs(s[0][0]-s[1][0])>Pr||Math.abs(s[0][1]-s[1][1])>Pr))&&delete Hn[r]}function vy(n){return ds[n.index]={site:n,halfedges:[]}}function Px(n,t){var e=n.site,i=t.left,r=t.right;return e===r&&(r=i,i=e),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(e===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Bf(n,t){return t[+(t.left!==n.site)]}function Rx(n,t){return t[+(t.left===n.site)]}function by(){for(var n=0,t=ds.length,e,i,r,s;n<t;++n)if((e=ds[n])&&(s=(i=e.halfedges).length)){var a=new Array(s),o=new Array(s);for(r=0;r<s;++r)a[r]=r,o[r]=Px(e,Hn[i[r]]);for(a.sort(function(l,c){return o[c]-o[l]}),r=0;r<s;++r)o[r]=i[a[r]];for(r=0;r<s;++r)i[r]=o[r]}}function _y(n,t,e,i){var r=ds.length,s,a,o,l,c,h,d,p,g,m,_,v,x=!0;for(s=0;s<r;++s)if(a=ds[s]){for(o=a.site,c=a.halfedges,l=c.length;l--;)Hn[c[l]]||c.splice(l,1);for(l=0,h=c.length;l<h;)m=Rx(a,Hn[c[l]]),_=m[0],v=m[1],d=Bf(a,Hn[c[++l%h]]),p=d[0],g=d[1],(Math.abs(_-p)>Pr||Math.abs(v-g)>Pr)&&(c.splice(l,0,Hn.push(Wa(o,m,Math.abs(_-n)<Pr&&i-v>Pr?[n,Math.abs(p-n)<Pr?g:i]:Math.abs(v-i)<Pr&&e-_>Pr?[Math.abs(g-i)<Pr?p:e,i]:Math.abs(_-e)<Pr&&v-t>Pr?[e,Math.abs(p-e)<Pr?g:t]:Math.abs(v-t)<Pr&&_-n>Pr?[Math.abs(g-t)<Pr?p:n,t]:null))-1),++h);h&&(x=!1)}if(x){var S,O,D,U=1/0;for(s=0,x=null;s<r;++s)(a=ds[s])&&(o=a.site,S=o[0]-n,O=o[1]-t,D=S*S+O*O,D<U&&(U=D,x=a));if(x){var z=[n,t],V=[n,i],G=[e,i],tt=[e,t];x.halfedges.push(Hn.push(Wa(o=x.site,z,V))-1,Hn.push(Wa(o,V,G))-1,Hn.push(Wa(o,G,tt))-1,Hn.push(Wa(o,tt,z))-1)}}for(s=0;s<r;++s)(a=ds[s])&&(a.halfedges.length||delete ds[s])}var wy=[],Qu;function Ox(){Va(this),this.x=this.y=this.arc=this.site=this.cy=null}function ca(n){var t=n.P,e=n.N;if(!(!t||!e)){var i=t.site,r=n.site,s=e.site;if(i!==s){var a=r[0],o=r[1],l=i[0]-a,c=i[1]-o,h=s[0]-a,d=s[1]-o,p=2*(l*d-c*h);if(!(p>=-xy)){var g=l*l+c*c,m=h*h+d*d,_=(d*g-c*m)/p,v=(l*m-h*g)/p,x=wy.pop()||new Ox;x.arc=n,x.site=r,x.x=_+a,x.y=(x.cy=v+o)+Math.sqrt(_*_+v*v),n.circle=x;for(var S=null,O=Xa._;O;)if(x.y<O.y||x.y===O.y&&x.x<=O.x)if(O.L)O=O.L;else{S=O.P;break}else if(O.R)O=O.R;else{S=O;break}Xa.insert(S,x),S||(Qu=x)}}}}function fa(n){var t=n.circle;t&&(t.P||(Qu=t.N),Xa.remove(t),wy.push(t),Va(t),n.circle=null)}var Cy=[];function Ix(){Va(this),this.edge=this.site=this.circle=null}function Ey(n){var t=Cy.pop()||new Ix;return t.site=n,t}function Ff(n){fa(n),da.remove(n),Cy.push(n),Va(n)}function My(n){var t=n.circle,e=t.x,i=t.cy,r=[e,i],s=n.P,a=n.N,o=[n];Ff(n);for(var l=s;l.circle&&Math.abs(e-l.circle.x)<Pr&&Math.abs(i-l.circle.cy)<Pr;)s=l.P,o.unshift(l),Ff(l),l=s;o.unshift(l),fa(l);for(var c=a;c.circle&&Math.abs(e-c.circle.x)<Pr&&Math.abs(i-c.circle.cy)<Pr;)a=c.N,o.push(c),Ff(c),c=a;o.push(c),fa(c);var h=o.length,d;for(d=1;d<h;++d)c=o[d],l=o[d-1],Dl(c.edge,l.site,c.site,r);l=o[0],c=o[h-1],c.edge=qa(l.site,c.site,null,r),ca(l),ca(c)}function Sy(n){for(var t=n[0],e=n[1],i,r,s,a,o=da._;o;)if(s=ky(o,e)-t,s>Pr)o=o.L;else if(a=t-Ax(o,e),a>Pr){if(!o.R){i=o;break}o=o.R}else{s>-Pr?(i=o.P,r=o):a>-Pr?(i=o,r=o.N):i=r=o;break}vy(n);var l=Ey(n);if(da.insert(i,l),!(!i&&!r)){if(i===r){fa(i),r=Ey(i.site),da.insert(l,r),l.edge=r.edge=qa(i.site,l.site),ca(i),ca(r);return}if(!r){l.edge=qa(i.site,l.site);return}fa(i),fa(r);var c=i.site,h=c[0],d=c[1],p=n[0]-h,g=n[1]-d,m=r.site,_=m[0]-h,v=m[1]-d,x=2*(p*v-g*_),S=p*p+g*g,O=_*_+v*v,D=[(v*S-g*O)/x+h,(p*O-_*S)/x+d];Dl(r.edge,c,m,D),l.edge=qa(c,n,null,D),r.edge=qa(n,m,null,D),ca(i),ca(r)}}function ky(n,t){var e=n.site,i=e[0],r=e[1],s=r-t;if(!s)return i;var a=n.P;if(!a)return-1/0;e=a.site;var o=e[0],l=e[1],c=l-t;if(!c)return o;var h=o-i,d=1/s-1/c,p=h/c;return d?(-p+Math.sqrt(p*p-2*d*(h*h/(-2*c)-l+c/2+r-s/2)))/d+i:(i+o)/2}function Ax(n,t){var e=n.N;if(e)return ky(e,t);var i=n.site;return i[1]===t?i[0]:1/0}var Pr=1e-6,xy=1e-12,da,ds,Xa,Hn;function Nx(n,t,e){return(n[0]-e[0])*(t[1]-n[1])-(n[0]-t[0])*(e[1]-n[1])}function Dx(n,t){return t[1]-n[1]||t[0]-n[0]}function th(n,t){var e=n.sort(Dx).pop(),i,r,s;for(Hn=[],ds=new Array(n.length),da=new Df,Xa=new Df;;)if(s=Qu,e&&(!s||e[1]<s.y||e[1]===s.y&&e[0]<s.x))(e[0]!==i||e[1]!==r)&&(Sy(e),i=e[0],r=e[1]),e=n.pop();else if(s)My(s.arc);else break;if(by(),t){var a=+t[0][0],o=+t[0][1],l=+t[1][0],c=+t[1][1];yy(a,o,l,c),_y(a,o,l,c)}this.edges=Hn,this.cells=ds,da=Xa=Hn=ds=null}th.prototype={constructor:th,polygons:function(){var n=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(i){return Bf(t,n[i])});return e.data=t.site.data,e})},triangles:function(){var n=[],t=this.edges;return this.cells.forEach(function(e,i){if(o=(s=e.halfedges).length)for(var r=e.site,s,a=-1,o,l,c=t[s[o-1]],h=c.left===r?c.right:c.left;++a<o;)l=h,c=t[s[a]],h=c.left===r?c.right:c.left,l&&h&&i<l.index&&i<h.index&&Nx(r,l,h)<0&&n.push([r.data,l.data,h.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,t,e){for(var i=this,r,s=i._found||0,a=i.cells.length,o;!(o=i.cells[s]);)if(++s>=a)return null;var l=n-o.site[0],c=t-o.site[1],h=l*l+c*c;do o=i.cells[r=s],s=null,o.halfedges.forEach(function(d){var p=i.edges[d],g=p.left;if(!((g===o.site||!g)&&!(g=p.right))){var m=n-g[0],_=t-g[1],v=m*m+_*_;v<h&&(h=v,s=g.index)}});while(s!==null);return i._found=r,e==null||h<=e*e?o.site:null}};var Vx=Mi($a(),1);var Qa=Mi(Ry(),1);function Ms(){return new rh}function rh(){this.reset()}rh.prototype={constructor:rh,reset:function(){this.s=this.t=0},add:function(n){Oy(ih,n,this.t),Oy(this,ih.s,this.s),this.s?this.t+=ih.t:this.s=ih.t},valueOf:function(){return this.s}};var ih=new rh;function Oy(n,t,e){var i=n.s=t+e,r=i-t,s=i-r;n.t=t-s+(e-r)}var vi=1e-6;var er=Math.PI,An=er/2,nh=er/4,Qn=er*2,ps=180/er,sn=er/180,xr=Math.abs,ao=Math.atan,Gn=Math.atan2,pi=Math.cos;var sh=Math.exp;var Bl=Math.log;var mi=Math.sin;var kn=Math.sqrt,Fl=Math.tan;function oh(n){return n>1?0:n<-1?er:Math.acos(n)}function Nn(n){return n>1?An:n<-1?-An:Math.asin(n)}function ms(){}function ah(n,t){n&&Ay.hasOwnProperty(n.type)&&Ay[n.type](n,t)}var Iy={Feature:function(n,t){ah(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)ah(e[i].geometry,t)}},Ay={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){Hf(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Hf(e[i],t,0)},Polygon:function(n,t){Ny(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Ny(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)ah(e[i],t)}};function Hf(n,t,e){var i=-1,r=n.length-e,s;for(t.lineStart();++i<r;)s=n[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function Ny(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)Hf(n[e],t,1);t.polygonEnd()}function Qo(n,t){n&&Iy.hasOwnProperty(n.type)?Iy[n.type](n,t):ah(n,t)}var qx=Ms(),UR=Ms();function Ya(n){return[Gn(n[1],n[0]),Nn(n[2])]}function lo(n){var t=n[0],e=n[1],i=pi(e);return[i*pi(t),i*mi(t),mi(e)]}function zl(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function pa(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function lh(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function jl(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Za(n){var t=kn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var QR=Ms();function uh(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function Gf(n,t){return[n>er?n-Qn:n<-er?n+Qn:n,t]}Gf.invert=Gf;function Uf(n,t,e){return(n%=Qn)?t||e?uh(By(n),Fy(t,e)):By(n):t||e?Fy(t,e):Gf}function Dy(n){return function(t,e){return t+=n,[t>er?t-Qn:t<-er?t+Qn:t,e]}}function By(n){var t=Dy(n);return t.invert=Dy(-n),t}function Fy(n,t){var e=pi(n),i=mi(n),r=pi(t),s=mi(t);function a(o,l){var c=pi(l),h=pi(o)*c,d=mi(o)*c,p=mi(l),g=p*e+h*i;return[Gn(d*r-g*s,h*e-p*i),Nn(g*r+d*s)]}return a.invert=function(o,l){var c=pi(l),h=pi(o)*c,d=mi(o)*c,p=mi(l),g=p*r-d*s;return[Gn(d*r+p*s,h*e+g*i),Nn(g*e-h*i)]},a}function jy(n,t,e,i,r,s){if(e){var a=pi(t),o=mi(t),l=i*e;r==null?(r=t+i*Qn,s=t-l/2):(r=zy(a,r),s=zy(a,s),(i>0?r<s:r>s)&&(r+=i*Qn));for(var c,h=r;i>0?h>s:h<s;h-=l)c=Ya([a,-o*pi(h),-o*mi(h)]),n.point(c[0],c[1])}}function zy(n,t){t=lo(t),t[0]-=n,Za(t);var e=oh(-t[1]);return((-t[2]<0?-e:e)+Qn-vi)%Qn}function hh(){var n=[],t;return{point:function(e,i){t.push([e,i])},lineStart:function(){n.push(t=[])},lineEnd:ms,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Hy(n,t,e,i,r,s){var a=n[0],o=n[1],l=t[0],c=t[1],h=0,d=1,p=l-a,g=c-o,m;if(m=e-a,!(!p&&m>0)){if(m/=p,p<0){if(m<h)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>h&&(h=m)}if(m=r-a,!(!p&&m<0)){if(m/=p,p<0){if(m>d)return;m>h&&(h=m)}else if(p>0){if(m<h)return;m<d&&(d=m)}if(m=i-o,!(!g&&m>0)){if(m/=g,g<0){if(m<h)return;m<d&&(d=m)}else if(g>0){if(m>d)return;m>h&&(h=m)}if(m=s-o,!(!g&&m<0)){if(m/=g,g<0){if(m>d)return;m>h&&(h=m)}else if(g>0){if(m<h)return;m<d&&(d=m)}return h>0&&(n[0]=a+h*p,n[1]=o+h*g),d<1&&(t[0]=a+d*p,t[1]=o+d*g),!0}}}}}function Ka(n,t){return xr(n[0]-t[0])<vi&&xr(n[1]-t[1])<vi}function ch(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function fh(n,t,e,i,r){var s=[],a=[],o,l;if(n.forEach(function(m){if(!((_=m.length-1)<=0)){var _,v=m[0],x=m[_],S;if(Ka(v,x)){for(r.lineStart(),o=0;o<_;++o)r.point((v=m[o])[0],v[1]);r.lineEnd();return}s.push(S=new ch(v,m,null,!0)),a.push(S.o=new ch(v,null,S,!1)),s.push(S=new ch(x,m,null,!1)),a.push(S.o=new ch(x,null,S,!0))}}),!!s.length){for(a.sort(t),Gy(s),Gy(a),o=0,l=a.length;o<l;++o)a[o].e=e=!e;for(var c=s[0],h,d;;){for(var p=c,g=!0;p.v;)if((p=p.n)===c)return;h=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(o=0,l=h.length;o<l;++o)r.point((d=h[o])[0],d[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(g)for(h=p.p.z,o=h.length-1;o>=0;--o)r.point((d=h[o])[0],d[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,h=p.z,g=!g}while(!p.v);r.lineEnd()}}}function Gy(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function ta(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function Vf(n){return n.length===1&&(n=Wx(n)),{left:function(t,e,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){var s=i+r>>>1;n(t[s],e)<0?i=s+1:r=s}return i},right:function(t,e,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){var s=i+r>>>1;n(t[s],e)>0?r=s:i=s+1}return i}}}function Wx(n){return function(t,e){return ta(n(t),e)}}var Uy=Vf(ta),Xx=Uy.right,$x=Uy.left;var Vy=Array.prototype,Zx=Vy.slice,Kx=Vy.map;var qO=Math.sqrt(50),WO=Math.sqrt(10),XO=Math.sqrt(2);function Hl(n){for(var t=n.length,e,i=-1,r=0,s,a;++i<t;)r+=n[i].length;for(s=new Array(r);--t>=0;)for(a=n[t],e=a.length;--e>=0;)s[--r]=a[e];return s}var Gl=1e9,ph=-Gl;function qf(n,t,e,i){function r(c,h){return n<=c&&c<=e&&t<=h&&h<=i}function s(c,h,d,p){var g=0,m=0;if(c==null||(g=a(c,d))!==(m=a(h,d))||l(c,h)<0^d>0)do p.point(g===0||g===3?n:e,g>1?i:t);while((g=(g+d+4)%4)!==m);else p.point(h[0],h[1])}function a(c,h){return xr(c[0]-n)<vi?h>0?0:3:xr(c[0]-e)<vi?h>0?2:1:xr(c[1]-t)<vi?h>0?1:0:h>0?3:2}function o(c,h){return l(c.x,h.x)}function l(c,h){var d=a(c,1),p=a(h,1);return d!==p?d-p:d===0?h[1]-c[1]:d===1?c[0]-h[0]:d===2?c[1]-h[1]:h[0]-c[0]}return function(c){var h=c,d=hh(),p,g,m,_,v,x,S,O,D,U,z,V={point:G,lineStart:N,lineEnd:Z,polygonStart:K,polygonEnd:B};function G(C,k){r(C,k)&&h.point(C,k)}function tt(){for(var C=0,k=0,T=g.length;k<T;++k)for(var R=g[k],F=1,H=R.length,it=R[0],ot,dt,$=it[0],ct=it[1];F<H;++F)ot=$,dt=ct,it=R[F],$=it[0],ct=it[1],dt<=i?ct>i&&($-ot)*(i-dt)>(ct-dt)*(n-ot)&&++C:ct<=i&&($-ot)*(i-dt)<(ct-dt)*(n-ot)&&--C;return C}function K(){h=d,p=[],g=[],z=!0}function B(){var C=tt(),k=z&&C,T=(p=Hl(p)).length;(k||T)&&(c.polygonStart(),k&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),T&&fh(p,o,C,s,c),c.polygonEnd()),h=c,p=g=m=null}function N(){V.point=w,g&&g.push(m=[]),U=!0,D=!1,S=O=NaN}function Z(){p&&(w(_,v),x&&D&&d.rejoin(),p.push(d.result())),V.point=G,D&&h.lineEnd()}function w(C,k){var T=r(C,k);if(g&&m.push([C,k]),U)_=C,v=k,x=T,U=!1,T&&(h.lineStart(),h.point(C,k));else if(T&&D)h.point(C,k);else{var R=[S=Math.max(ph,Math.min(Gl,S)),O=Math.max(ph,Math.min(Gl,O))],F=[C=Math.max(ph,Math.min(Gl,C)),k=Math.max(ph,Math.min(Gl,k))];Hy(R,F,n,t,e,i)?(D||(h.lineStart(),h.point(R[0],R[1])),h.point(F[0],F[1]),T||h.lineEnd(),z=!1):T&&(h.lineStart(),h.point(C,k),z=!1)}S=C,O=k,D=T}return V}}var Wf=Ms();function Xf(n,t){var e=t[0],i=t[1],r=[mi(e),-pi(e),0],s=0,a=0;Wf.reset();for(var o=0,l=n.length;o<l;++o)if(h=(c=n[o]).length)for(var c,h,d=c[h-1],p=d[0],g=d[1]/2+nh,m=mi(g),_=pi(g),v=0;v<h;++v,p=S,m=D,_=U,d=x){var x=c[v],S=x[0],O=x[1]/2+nh,D=mi(O),U=pi(O),z=S-p,V=z>=0?1:-1,G=V*z,tt=G>er,K=m*D;if(Wf.add(Gn(K*V*mi(G),_*U+K*pi(G))),s+=tt?z+V*Qn:z,tt^p>=e^S>=e){var B=pa(lo(d),lo(x));Za(B);var N=pa(r,B);Za(N);var Z=(tt^z>=0?-1:1)*Nn(N[2]);(i>Z||i===Z&&(B[0]||B[1]))&&(a+=tt^z>=0?1:-1)}}return(s<-vi||s<vi&&Wf<-vi)^a&1}var FI=Ms();function Ul(n){return n}var rA=Ms(),nA=Ms();var Ja=1/0,mh=Ja,Vl=-Ja,gh=Vl,a2={point:l2,lineStart:ms,lineEnd:ms,polygonStart:ms,polygonEnd:ms,result:function(){var n=[[Ja,mh],[Vl,gh]];return Vl=gh=-(mh=Ja=1/0),n}};function l2(n,t){n<Ja&&(Ja=n),n>Vl&&(Vl=n),t<mh&&(mh=t),t>gh&&(gh=t)}var yh=a2;function $f(n){this._context=n}$f.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,Qn);break}}},result:ms};var gA=Ms();function Yf(){this._string=[]}Yf.prototype={_radius:4.5,_circle:Xy(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._string.push("M",n,",",t),this._point=1;break}case 1:{this._string.push("L",n,",",t);break}default:{this._circle==null&&(this._circle=Xy(this._radius)),this._string.push("M",n,",",t,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function Xy(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function vh(n,t,e,i){return function(r,s){var a=t(s),o=r.invert(i[0],i[1]),l=hh(),c=t(l),h=!1,d,p,g,m={point:_,lineStart:x,lineEnd:S,polygonStart:function(){m.point=O,m.lineStart=D,m.lineEnd=U,p=[],d=[]},polygonEnd:function(){m.point=_,m.lineStart=x,m.lineEnd=S,p=Hl(p);var z=Xf(d,o);p.length?(h||(s.polygonStart(),h=!0),fh(p,h2,z,e,s)):z&&(h||(s.polygonStart(),h=!0),s.lineStart(),e(null,null,1,s),s.lineEnd()),h&&(s.polygonEnd(),h=!1),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),e(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function _(z,V){var G=r(z,V);n(z=G[0],V=G[1])&&s.point(z,V)}function v(z,V){var G=r(z,V);a.point(G[0],G[1])}function x(){m.point=v,a.lineStart()}function S(){m.point=_,a.lineEnd()}function O(z,V){g.push([z,V]);var G=r(z,V);c.point(G[0],G[1])}function D(){c.lineStart(),g=[]}function U(){O(g[0][0],g[0][1]),c.lineEnd();var z=c.clean(),V=l.result(),G,tt=V.length,K,B,N;if(g.pop(),d.push(g),g=null,!!tt){if(z&1){if(B=V[0],(K=B.length-1)>0){for(h||(s.polygonStart(),h=!0),s.lineStart(),G=0;G<K;++G)s.point((N=B[G])[0],N[1]);s.lineEnd()}return}tt>1&&z&2&&V.push(V.pop().concat(V.shift())),p.push(V.filter(u2))}}return m}}function u2(n){return n.length>1}function h2(n,t){return((n=n.x)[0]<0?n[1]-An-vi:An-n[1])-((t=t.x)[0]<0?t[1]-An-vi:An-t[1])}var Zf=vh(function(){return!0},c2,d2,[-er,-An]);function c2(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(s,a){var o=s>0?er:-er,l=xr(s-t);xr(l-er)<vi?(n.point(t,e=(e+a)/2>0?An:-An),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(o,e),n.point(s,e),r=0):i!==o&&l>=er&&(xr(t-i)<vi&&(t-=i*vi),xr(s-o)<vi&&(s-=o*vi),e=f2(t,e,s,a),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(o,e),r=0),n.point(t=s,e=a),i=o},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function f2(n,t,e,i){var r,s,a=mi(n-e);return xr(a)>vi?ao((mi(t)*(s=pi(i))*mi(e)-mi(i)*(r=pi(t))*mi(n))/(r*s*a)):(t+i)/2}function d2(n,t,e,i){var r;if(n==null)r=e*An,i.point(-er,r),i.point(0,r),i.point(er,r),i.point(er,0),i.point(er,-r),i.point(0,-r),i.point(-er,-r),i.point(-er,0),i.point(-er,r);else if(xr(n[0]-t[0])>vi){var s=n[0]<t[0]?er:-er;r=e*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function $y(n,t){var e=pi(n),i=e>0,r=xr(e)>vi;function s(h,d,p,g){jy(g,n,t,p,h,d)}function a(h,d){return pi(h)*pi(d)>e}function o(h){var d,p,g,m,_;return{lineStart:function(){m=g=!1,_=1},point:function(v,x){var S=[v,x],O,D=a(v,x),U=i?D?0:c(v,x):D?c(v+(v<0?er:-er),x):0;if(!d&&(m=g=D)&&h.lineStart(),D!==g&&(O=l(d,S),(!O||Ka(d,O)||Ka(S,O))&&(S[0]+=vi,S[1]+=vi,D=a(S[0],S[1]))),D!==g)_=0,D?(h.lineStart(),O=l(S,d),h.point(O[0],O[1])):(O=l(d,S),h.point(O[0],O[1]),h.lineEnd()),d=O;else if(r&&d&&i^D){var z;!(U&p)&&(z=l(S,d,!0))&&(_=0,i?(h.lineStart(),h.point(z[0][0],z[0][1]),h.point(z[1][0],z[1][1]),h.lineEnd()):(h.point(z[1][0],z[1][1]),h.lineEnd(),h.lineStart(),h.point(z[0][0],z[0][1])))}D&&(!d||!Ka(d,S))&&h.point(S[0],S[1]),d=S,g=D,p=U},lineEnd:function(){g&&h.lineEnd(),d=null},clean:function(){return _|(m&&g)<<1}}}function l(h,d,p){var g=lo(h),m=lo(d),_=[1,0,0],v=pa(g,m),x=zl(v,v),S=v[0],O=x-S*S;if(!O)return!p&&h;var D=e*x/O,U=-e*S/O,z=pa(_,v),V=jl(_,D),G=jl(v,U);lh(V,G);var tt=z,K=zl(V,tt),B=zl(tt,tt),N=K*K-B*(zl(V,V)-1);if(!(N<0)){var Z=kn(N),w=jl(tt,(-K-Z)/B);if(lh(w,V),w=Ya(w),!p)return w;var C=h[0],k=d[0],T=h[1],R=d[1],F;k<C&&(F=C,C=k,k=F);var H=k-C,it=xr(H-er)<vi,ot=it||H<vi;if(!it&&R<T&&(F=T,T=R,R=F),ot?it?T+R>0^w[1]<(xr(w[0]-C)<vi?T:R):T<=w[1]&&w[1]<=R:H>er^(C<=w[0]&&w[0]<=k)){var dt=jl(tt,(-K+Z)/B);return lh(dt,V),[w,Ya(dt)]}}}function c(h,d){var p=i?n:er-n,g=0;return h<-p?g|=1:h>p&&(g|=2),d<-p?g|=4:d>p&&(g|=8),g}return vh(a,o,s,i?[0,-n]:[-er,n-er])}function ql(n){return function(t){var e=new Kf;for(var i in n)e[i]=n[i];return e.stream=t,e}}function Kf(){}Kf.prototype={constructor:Kf,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Wl(n,t,e){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],s=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),s!=null&&n.clipExtent(null),Qo(e,n.stream(yh));var a=yh.result(),o=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),l=+t[0][0]+(i-o*(a[1][0]+a[0][0]))/2,c=+t[0][1]+(r-o*(a[1][1]+a[0][1]))/2;return s!=null&&n.clipExtent(s),n.scale(o*150).translate([l,c])}function bh(n,t,e){return Wl(n,[[0,0],t],e)}var Yy=16,p2=pi(30*sn);function Jf(n,t){return+t?g2(n,t):m2(n)}function m2(n){return ql({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function g2(n,t){function e(i,r,s,a,o,l,c,h,d,p,g,m,_,v){var x=c-i,S=h-r,O=x*x+S*S;if(O>4*t&&_--){var D=a+p,U=o+g,z=l+m,V=kn(D*D+U*U+z*z),G=Nn(z/=V),tt=xr(xr(z)-1)<vi||xr(s-d)<vi?(s+d)/2:Gn(U,D),K=n(tt,G),B=K[0],N=K[1],Z=B-i,w=N-r,C=S*Z-x*w;(C*C/O>t||xr((x*Z+S*w)/O-.5)>.3||a*p+o*g+l*m<p2)&&(e(i,r,s,a,o,l,B,N,tt,D/=V,U/=V,z,_,v),v.point(B,N),e(B,N,tt,D,U,z,c,h,d,p,g,m,_,v))}}return function(i){var r,s,a,o,l,c,h,d,p,g,m,_,v={point:x,lineStart:S,lineEnd:D,polygonStart:function(){i.polygonStart(),v.lineStart=U},polygonEnd:function(){i.polygonEnd(),v.lineStart=S}};function x(G,tt){G=n(G,tt),i.point(G[0],G[1])}function S(){d=NaN,v.point=O,i.lineStart()}function O(G,tt){var K=lo([G,tt]),B=n(G,tt);e(d,p,h,g,m,_,d=B[0],p=B[1],h=G,g=K[0],m=K[1],_=K[2],Yy,i),i.point(d,p)}function D(){v.point=x,i.lineEnd()}function U(){S(),v.point=z,v.lineEnd=V}function z(G,tt){O(r=G,tt),s=d,a=p,o=g,l=m,c=_,v.point=O}function V(){e(d,p,h,g,m,_,s,a,r,o,l,c,Yy,i),v.lineEnd=D,D()}return v}}var y2=ql({point:function(n,t){this.stream.point(n*sn,t*sn)}});function uo(n){return Qf(function(){return n})()}function Qf(n){var t,e=150,i=480,r=250,s,a,o=0,l=0,c=0,h=0,d=0,p,g,m=null,_=Zf,v=null,x,S,O,D=Ul,U=.5,z=Jf(B,U),V,G;function tt(w){return w=g(w[0]*sn,w[1]*sn),[w[0]*e+s,a-w[1]*e]}function K(w){return w=g.invert((w[0]-s)/e,(a-w[1])/e),w&&[w[0]*ps,w[1]*ps]}function B(w,C){return w=t(w,C),[w[0]*e+s,a-w[1]*e]}tt.stream=function(w){return V&&G===w?V:V=y2(_(p,z(D(G=w))))},tt.clipAngle=function(w){return arguments.length?(_=+w?$y(m=w*sn,6*sn):(m=null,Zf),Z()):m*ps},tt.clipExtent=function(w){return arguments.length?(D=w==null?(v=x=S=O=null,Ul):qf(v=+w[0][0],x=+w[0][1],S=+w[1][0],O=+w[1][1]),Z()):v==null?null:[[v,x],[S,O]]},tt.scale=function(w){return arguments.length?(e=+w,N()):e},tt.translate=function(w){return arguments.length?(i=+w[0],r=+w[1],N()):[i,r]},tt.center=function(w){return arguments.length?(o=w[0]%360*sn,l=w[1]%360*sn,N()):[o*ps,l*ps]},tt.rotate=function(w){return arguments.length?(c=w[0]%360*sn,h=w[1]%360*sn,d=w.length>2?w[2]%360*sn:0,N()):[c*ps,h*ps,d*ps]},tt.precision=function(w){return arguments.length?(z=Jf(B,U=w*w),Z()):kn(U)},tt.fitExtent=function(w,C){return Wl(tt,w,C)},tt.fitSize=function(w,C){return bh(tt,w,C)};function N(){g=uh(p=Uf(c,h,d),t);var w=t(o,l);return s=i-w[0]*e,a=r+w[1]*e,Z()}function Z(){return V=G=null,tt}return function(){return t=n.apply(this,arguments),tt.invert=t.invert&&K,N()}}function _h(n){return function(t,e){var i=pi(t),r=pi(e),s=n(i*r);return[s*r*mi(t),s*mi(e)]}}function Mo(n){return function(t,e){var i=kn(t*t+e*e),r=n(i),s=mi(r),a=pi(r);return[Gn(t*s,i*a),Nn(i&&e*s/i)]}}var Qy=_h(function(n){return kn(2/(1+n))});Qy.invert=Mo(function(n){return 2*Nn(n/2)});var td=_h(function(n){return(n=oh(n))&&n/mi(n)});td.invert=Mo(function(n){return n});function ed(){return uo(td).scale(79.4188).clipAngle(180-.001)}function id(n,t){return[n,Bl(Fl((An+t)/2))]}id.invert=function(n,t){return[n,2*ao(sh(t))-An]};function wh(n,t){return[n,t]}wh.invert=wh;function tv(n,t){var e=pi(t),i=pi(n)*e;return[e*mi(n)/i,mi(t)/i]}tv.invert=Mo(ao);function ev(n,t){var e=t*t,i=e*e;return[n*(.8707-.131979*e+i*(-.013791+i*(.003971*e-.001529*i))),t*(1.007226+e*(.015085+i*(-.044475+.028874*e-.005916*i)))]}ev.invert=function(n,t){var e=t,i=25,r;do{var s=e*e,a=s*s;e-=r=(e*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(xr(r)>vi&&--i>0);return[n/(.8707+(s=e*e)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),e]};function iv(n,t){return[pi(t)*mi(n),mi(t)]}iv.invert=Mo(Nn);function rv(n,t){var e=pi(t),i=1+pi(n)*e;return[e*mi(n)/i,mi(t)/i]}rv.invert=Mo(function(n){return 2*ao(n)});function nv(n,t){return[Bl(Fl((An+t)/2)),-n]}nv.invert=function(n,t){return[-t,2*ao(sh(n))-An]};function _2(n,t,e){e=e||{};var i=e.units||"kilometers",r=e.steps||8;if(!n)throw new Error("geojson is required");if(typeof e!="object")throw new Error("options must be an object");if(typeof r!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var s=[];switch(n.type){case"GeometryCollection":return no(n,function(a){var o=xh(a,t,i,r);o&&s.push(o)}),Si(s);case"FeatureCollection":return Lr(n,function(a){var o=xh(a,t,i,r);o&&Lr(o,function(l){l&&s.push(l)})}),Si(s)}return xh(n,t,i,r)}function xh(n,t,e,i){var r=n.properties||{},s=n.type==="Feature"?n.geometry:n;if(s.type==="GeometryCollection"){var a=[];return no(n,function(_){var v=xh(_,t,e,i);v&&a.push(v)}),Si(a)}var o=w2(s),l={type:s.type,coordinates:ov(s.coordinates,o)},c=new Qa.GeoJSONReader,h=c.read(l),d=dl(pl(t,e),"meters"),p=Qa.BufferOp.bufferOp(h,d,i),g=new Qa.GeoJSONWriter;if(p=g.write(p),!sv(p.coordinates)){var m={type:p.type,coordinates:av(p.coordinates,o)};return zn(m,r)}}function sv(n){return Array.isArray(n[0])?sv(n[0]):isNaN(n[0])}function ov(n,t){return typeof n[0]!="object"?t(n):n.map(function(e){return ov(e,t)})}function av(n,t){return typeof n[0]!="object"?t.invert(n):n.map(function(e){return av(e,t)})}function w2(n){var t=bl(n).geometry.coordinates,e=[-t[0],-t[1]];return ed().rotate(e).scale(On)}var Xl=_2;var x2=Mi($a(),1);var E2=Mi($a(),1);var M2=Mi($a(),1);var S2=Mi($a(),1);var gs=Mi(Eh());var sd="#7AE9FF",od={color:sd,fillColor:sd,fillOpacity:.3,weight:1},N2={color:"#FFBB00",fillColor:"#FFBB00",fillOpacity:.75,weight:3},D2={color:"#FF0000",fillColor:"#FF0000",fillOpacity:.95,weight:5},zo=class{constructor(t,e){this._bufferWidth=5;this._sqmPerPerson=10;this._sqmPerVehicle=70;this.supressWarnings=!1;this.id=t.id,this._rules=e,this.revision=t.revision,this.timeStamp=t.timeStamp,this.isDeleted=t.isDeleted,this.deleteReason=t.deleteReason,this._originalGeoJson=t.geoJson;let i=JSON.parse(t.geoJson);this.layer=new Ch.GeoJSON(i,{pmIgnore:!1,interactive:!0,bubblingMouseEvents:!1,snapIgnore:!0,style:()=>this.GetDefaultLayerStyle()}),this.revisions={},this.name=gs.default.sanitize(i.properties.name),this.contactInfo=gs.default.sanitize(i.properties.contactInfo)??"",this.description=gs.default.sanitize(i.properties.description)??"",this.nrOfPeople=i.properties.nrOfPeople??0,this.nrOfVehicles=i.properties.nrOfVechiles??0,this.additionalSqm=i.properties.additionalSqm??0,Number.isNaN(Number(i.properties.amplifiedSound))?this.amplifiedSound=-1:this.amplifiedSound=Number(i.properties.amplifiedSound),this.color=i.properties.color??sd,this.supressWarnings=i.properties.supressWarnings??!1,this.powerContactInfo=gs.default.sanitize(i.properties.techContactInfo)??"",this.powerPlugType=gs.default.sanitize(i.properties.powerPlugType)??"",this.powerExtraInfo=gs.default.sanitize(i.properties.powerExtraInfo)??"",this.powerImageUrl=gs.default.sanitize(i.properties.powerImage)??"",Number.isNaN(Number(i.properties.powerNeed))?this.powerNeed=-1:this.powerNeed=Number(i.properties.powerNeed),this.powerAppliances=i.properties.powerAppliances??[],this.updateBufferedLayer()}get calculatedAreaNeeded(){try{let t=0;return this.nrOfPeople&&(t+=this.nrOfPeople*this._sqmPerPerson),this.nrOfVehicles&&(t+=this.nrOfVehicles*this._sqmPerVehicle),this.additionalSqm&&(t+=this.additionalSqm),t}catch{return NaN}}get calculatedFireExtinguisherNeeded(){try{return 1}catch{return NaN}}get severityOfRulesBroken(){return this._rules.reduce((t,e)=>Math.max(t,e.severity),0)}get area(){return Math.round(wo(this.calculateGeoJson()))}get geoJson(){return JSON.stringify(this.toGeoJSON())}calculateGeoJson(){let t=this.layer.toGeoJSON();return t.features&&t.features[0]&&(t=t.features[0]),t}GetDefaultLayerStyle(t=!1){let e=this.color;return t&&(e="#00FF40"),{color:e,fillColor:e,fillOpacity:.3,weight:1}}checkAllRules(){for(let t of this._rules)t.checkRule(this)}setLayerStyle(t="severity"){if(t=="severity"||t=="cleancolors")this.severityOfRulesBroken>=3?this.layer.setStyle(D2):this.severityOfRulesBroken==2&&!this.supressWarnings?this.layer.setStyle(N2):this.layer.setStyle(this.GetDefaultLayerStyle(t=="cleancolors"));else if(t=="power"){let e="#00FF40";this.powerNeed?this.powerNeed>9e3?e="#FF0000":this.powerNeed>1e3&&(e="#FFA200"):e="#D1D1D1",this.layer.setStyle({color:e,fillColor:e,fillOpacity:.3,weight:1})}else if(t=="sound"){let e="#00FF40";this.amplifiedSound?this.amplifiedSound>2e3?e="#FF0000":this.amplifiedSound>120&&(e="#FFA200"):e="#D1D1D1",this.layer.setStyle({color:e,fillColor:e,fillOpacity:.3,weight:1})}}getAllTriggeredRules(){return this._rules.filter(t=>t.triggered)}updateBufferedLayer(){let t=this.layer.toGeoJSON(),e=Xl(t,this._bufferWidth,{units:"meters"}),i=0;this.bufferLayer?(this.bufferLayer.clearLayers(),this.bufferLayer.addData(e)):this.bufferLayer=Ch.geoJSON(e,{style:{color:"red",fillOpacity:0,weight:i,dashArray:"5, 5"},interactive:!1})}toGeoJSON(){let t=this.calculateGeoJson();return t.properties=t.properties||{},t.properties.name=gs.default.sanitize(this.name).substring(0,100),t.properties.description=gs.default.sanitize(this.description).substring(0,1e3),t.properties.contactInfo=gs.default.sanitize(this.contactInfo),t.properties.nrOfPeople=this.nrOfPeople,t.properties.nrOfVechiles=this.nrOfVehicles,t.properties.additionalSqm=this.additionalSqm,t.properties.amplifiedSound=this.amplifiedSound,t.properties.color=this.color,t.properties.supressWarnings=this.supressWarnings,t.properties.techContactInfo=gs.default.sanitize(this.powerContactInfo),t.properties.powerPlugType=gs.default.sanitize(this.powerPlugType),t.properties.powerExtraInfo=gs.default.sanitize(this.powerExtraInfo),t.properties.powerImage=gs.default.sanitize(this.powerImageUrl),t.properties.powerNeed=this.powerNeed,t.properties.powerAppliances=this.powerAppliances,t}hasChanges(){return this._originalGeoJson!=this.geoJson}};var uv=Mi(Eh());var ad=`MAP IS IN TEST MODE!
<img style='max-width:100%;' src='./img/test-in-production.jpg' />
Test data is from 2024 <br>Test period ends May 4th`,Mh="https://robnowa.runasp.net";var tl=Mh+"/api/v1/mapentities",$l=class{constructor(t){this._latestRevisions={};this._entityConstraints=null;this._rulesGenerator=t,this.loaded=new Promise(e=>this._update().then(()=>e(!0)))}async _update(){let t=await fetch(tl),e=t.ok?await t.json():[];this._latestRevisions={};for(let i of e){if(this._entityConstraints){let{earliest:r,latest:s}=this._entityConstraints;if(i.timeStamp>s||i.timeStamp<r)continue}this._latestRevisions[i.id]=new zo(i,this._rulesGenerator())}}async reload(){let t=await fetch(tl),e=t.ok?await t.json():[],i=new Array,r={refreshedDeleted:new Array,refreshedAdded:new Array,refreshedUpdated:new Array};for(let s of e){if(this._entityConstraints){let{earliest:a,latest:o}=this._entityConstraints;if(s.timeStamp>o||s.timeStamp<a)continue}i[s.id]=new zo(s,this._rulesGenerator())}for(let s in this._latestRevisions){let a=parseInt(s);i[a]||r.refreshedDeleted.push(a)}for(let s in i){let a=parseInt(s),o=i[a];this._latestRevisions[a]?this._latestRevisions[a].revision<o.revision&&(this._latestRevisions[a]=o,r.refreshedUpdated.push(a)):(this._latestRevisions[a]=o,r.refreshedAdded.push(a))}return r}async constrain(t){this._entityConstraints=t,await this._update()}async entities(){return await this.loaded,Object.values(this._latestRevisions)}getEntityById(t){return this._latestRevisions[t]}getAllEntities(){return Object.values(this._latestRevisions)}isLatest(t){return t.revision==this._latestRevisions[t.id].revision}async createEntity(t){console.log("createEntity",t);let e=await fetch(tl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:JSON.stringify(t)})});if(e.ok){let i=await e.json();console.log("[API]","Saved initial entity",i);let r=new zo(i,this._rulesGenerator());return this._latestRevisions[r.id]=r,r}else{let i=await e.json();return console.warn("[API]","Failed to save entity",i),null}}async updateEntity(t){let e=await fetch(`${tl}/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:t.geoJson,id:t.id})});if(e.ok){let i=await e.json();console.log("[API]","Updated existing entity",i);let r=new zo(i,this._rulesGenerator());return this._latestRevisions[t.id]=r,r}else{let i=await e.json();return console.warn("[API]","Failed to update entity with id:",t.id,i),null}}async deleteEntity(t,e="No reason given"){let i=await fetch(`${tl}/${t.id}?reason=${uv.default.sanitize(e)}`,{method:"DELETE"});if(i.ok)console.log("[API]","Deleted entity with id:",t.id),delete this._latestRevisions[t.id];else{let r=await i.json();console.warn("[API]","Failed to delete entity with id:",t.id,r)}}async remove(t){delete this._latestRevisions[t.id]}async getRevisionsForEntity(t){let e=await fetch(`${tl}/${t.id}`),i=e.ok?await e.json():[];for(let r of i)t.revisions[r.revision]=new zo(r,this._rulesGenerator())}};var Sh={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},B2=6378.137,hv=1/298.257223563,cv=hv*(2-hv),Yl=Math.PI/180,Zl=class n{static fromTile(t,e,i){let r=Math.PI*(1-2*(t+.5)/Math.pow(2,e)),s=Math.atan(.5*(Math.exp(r)-Math.exp(-r)))/Yl;return new n(s,i)}static get units(){return Sh}constructor(t,e){if(t===void 0)throw new Error("No latitude given.");if(e&&!Sh[e])throw new Error(`Unknown unit ${e}. Use one of: ${Object.keys(Sh).join(", ")}`);let i=Yl*B2*(e?Sh[e]:1),r=Math.cos(t*Yl),s=1/(1-cv*(1-r*r)),a=Math.sqrt(s);this.kx=i*a*r,this.ky=i*a*s*(1-cv)}distance(t,e){let i=Ws(t[0]-e[0])*this.kx,r=(t[1]-e[1])*this.ky;return Math.sqrt(i*i+r*r)}bearing(t,e){let i=Ws(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.atan2(i,r)/Yl}destination(t,e,i){let r=i*Yl;return this.offset(t,Math.sin(r)*e,Math.cos(r)*e)}offset(t,e,i){return[t[0]+e/this.kx,t[1]+i/this.ky]}lineDistance(t){let e=0;for(let i=0;i<t.length-1;i++)e+=this.distance(t[i],t[i+1]);return e}area(t){let e=0;for(let i=0;i<t.length;i++){let r=t[i];for(let s=0,a=r.length,o=a-1;s<a;o=s++)e+=Ws(r[s][0]-r[o][0])*(r[s][1]+r[o][1])*(i?-1:1)}return Math.abs(e)/2*this.kx*this.ky}along(t,e){let i=0;if(e<=0)return t[0];for(let r=0;r<t.length-1;r++){let s=t[r],a=t[r+1],o=this.distance(s,a);if(i+=o,i>e)return ld(s,a,(e-(i-o))/o)}return t[t.length-1]}pointToSegmentDistance(t,e,i){let[r,s]=e,a=Ws(i[0]-r)*this.kx,o=(i[1]-s)*this.ky,l=0;return(a!==0||o!==0)&&(l=(Ws(t[0]-r)*this.kx*a+(t[1]-s)*this.ky*o)/(a*a+o*o),l>1?(r=i[0],s=i[1]):l>0&&(r+=a/this.kx*l,s+=o/this.ky*l)),a=Ws(t[0]-r)*this.kx,o=(t[1]-s)*this.ky,Math.sqrt(a*a+o*o)}pointOnLine(t,e){let i=1/0,r,s,a,o;for(let l=0;l<t.length-1;l++){let c=t[l][0],h=t[l][1],d=Ws(t[l+1][0]-c)*this.kx,p=(t[l+1][1]-h)*this.ky,g=0;(d!==0||p!==0)&&(g=(Ws(e[0]-c)*this.kx*d+(e[1]-h)*this.ky*p)/(d*d+p*p),g>1?(c=t[l+1][0],h=t[l+1][1]):g>0&&(c+=d/this.kx*g,h+=p/this.ky*g)),d=Ws(e[0]-c)*this.kx,p=(e[1]-h)*this.ky;let m=d*d+p*p;m<i&&(i=m,r=c,s=h,a=l,o=g)}return{point:[r,s],index:a,t:Math.max(0,Math.min(1,o))}}lineSlice(t,e,i){let r=this.pointOnLine(i,t),s=this.pointOnLine(i,e);if(r.index>s.index||r.index===s.index&&r.t>s.t){let c=r;r=s,s=c}let a=[r.point],o=r.index+1,l=s.index;!fv(i[o],a[0])&&o<=l&&a.push(i[o]);for(let c=o+1;c<=l;c++)a.push(i[c]);return fv(i[l],s.point)||a.push(s.point),a}lineSliceAlong(t,e,i){let r=0,s=[];for(let a=0;a<i.length-1;a++){let o=i[a],l=i[a+1],c=this.distance(o,l);if(r+=c,r>t&&s.length===0&&s.push(ld(o,l,(t-(r-c))/c)),r>=e)return s.push(ld(o,l,(e-(r-c))/c)),s;r>t&&s.push(l)}return s}bufferPoint(t,e){let i=e/this.ky,r=e/this.kx;return[t[0]-r,t[1]-i,t[0]+r,t[1]+i]}bufferBBox(t,e){let i=e/this.ky,r=e/this.kx;return[t[0]-r,t[1]-i,t[2]+r,t[3]+i]}insideBBox(t,e){return Ws(t[0]-e[0])>=0&&Ws(t[0]-e[2])<=0&&t[1]>=e[1]&&t[1]<=e[3]}};function fv(n,t){return n[0]===t[0]&&n[1]===t[1]}function ld(n,t,e){let i=Ws(t[0]-n[0]),r=t[1]-n[1];return[n[0]+i*e,n[1]+r*e]}function Ws(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}var kh=class{constructor(){this.areaCache={};this.overlapCache={};this.coordsCache={}}coordsHaveChanged(t,e){let i=!1;if(!(t in this.coordsCache)||this.coordsCache[t].length==0||this.coordsCache[t].length!=e.length)i=!0;else for(let r=0;r<this.coordsCache[t].length;r++)if(!(this.coordsCache[t][r].lat==e[r].lat&&this.coordsCache[t][r].lng==e[r].lng)){i=!0;break}if(i){let r=[];for(let s=0;s<e.length;s++)r.push({lat:e[s].lat,lng:e[s].lng});return this.coordsCache[t]=r,!0}else return!1}areaIsCached(t){return t in this.areaCache}getAreaCache(t){return this.areaCache[t]}setAreaCache(t,e){this.areaCache[t]=e}overlapIsCached(t,e){return t in this.overlapCache&&e in this.overlapCache[t]}getOverlapCache(t,e){return this.overlapCache[t][e]}setOverlapCache(t,e,i){for(let r of[[t,e],[e,t]])r[0]in this.overlapCache||(this.overlapCache[r[0]]={}),this.overlapCache[r[0]][r[1]]=i}invalidateCache(t){if(t in this.overlapCache)for(let e in this.overlapCache[t])this.overlapCache[e]&&t in this.overlapCache[e]&&delete this.overlapCache[e][t];delete this.overlapCache[t],t in this.areaCache&&delete this.areaCache[t]}};var ud=()=>new vn(1,"Powerful.","You need a lot of power, make sure its not a typo.",n=>({triggered:n.powerNeed>8e3}));var hd=()=>new vn(2,"Missing info","Fill in name, description, contact info, power need and sound amplification please.",n=>({triggered:!n.name||!n.description||!n.contactInfo||n.powerNeed===-1||n.amplifiedSound===-1}));var cd=()=>new vn(2,"Bigger than needed?","Your area is quite big for the amount of people/vehicles and extras you have typed in.",n=>({triggered:n.area>z2(n.calculatedAreaNeeded),message:`Your area is <b>${n.area-n.calculatedAreaNeeded}m\xB2 bigger</b> than the suggested area size. Consider making it smaller.`}));function z2(n){let i=.5*Math.pow(n,-.2),r=Math.max(0,Math.min(i,.5));return Math.min(n*(1+r),1250)}var fd=()=>new vn(3,"Too many ppl/vehicles!","Calculated area need is bigger than the maximum allowed area size! Make another area to fix this.",n=>({triggered:n.calculatedAreaNeeded>1250}));var Lh=(n,t,e,i)=>j2(n,t,e,i,!1),j2=(n,t,e,i,r)=>new vn(t,e,i,s=>{let a=n.getLayers();for(let o of a){let l=o.toGeoJSON();if(l.features){for(let c=0;c<l.features.length;c++)if(As(l.features[c],s.toGeoJSON()))return{triggered:r}}else if(As(l,s.toGeoJSON()))return{triggered:r}}return{triggered:!r}});function Th(n,t){return n._leaflet_id===t._leaflet_id}function Jl(n){let t=[null,null,null,null],e=!0;for(let i of n)e?(t[0]=i[0],t[2]=i[0],t[1]=i[1],t[3]=i[1],e=!1):(i[0]<t[0]&&(t[0]=i[0]),i[0]>t[2]&&(t[2]=i[0]),i[1]<t[1]&&(t[1]=i[1]),i[1]>t[3]&&(t[3]=i[1]));return t}function Ph(n,t){return!(t[0]>n[2]||t[2]<n[0]||t[3]<n[1]||t[1]>n[3])}var dd=(n,t,e,i)=>new vn(t,e,i,r=>({triggered:H2(r.layer,n)}));function H2(n,t){let e=n.toGeoJSON(),i=Jl(e.features[0].geometry.coordinates[0]),r=!1,s=0;return t.eachLayer(a=>{if(r||Th(n,a))return;let o=a.toGeoJSON(),l=Jl(o.features[0].geometry.coordinates[0]);Ph(i,l)&&(oo(e.features[0],o.features[0])||As(e.features[0],o.features[0]))&&(r=!0)}),r}var jo=(n,t,e,i)=>new vn(t,e,i,r=>{let s=r.toGeoJSON(),a=!1;return n.eachLayer(o=>{let l=o.toGeoJSON();if(l.features){for(let c=0;c<l.features.length;c++)if(oo(s,l.features[c])||As(l.features[c],s)){a=!0;return}}else(oo(s,l)||As(l,s))&&(a=!0)}),{triggered:a}});var G2=6,pd=(n,t,e,i)=>new vn(t,e,i,r=>{let s=r.layer._layers[Object.keys(r.layer._layers)[0]];So.coordsHaveChanged(s._leaflet_id,s._latlngs[0])&&So.invalidateCache(r.layer._leaflet_id);let a=new Set;return pv(r.layer,n,a)>1250?{triggered:!0,severity:3,shortMessage:"We need some space between these camps"}:{triggered:!1}});function pv(n,t,e){if(e.has(n._leaflet_id))return 0;e.add(n._leaflet_id);let i;So.areaIsCached(n._leaflet_id)?i=So.getAreaCache(n._leaflet_id):(i=wo(n.toGeoJSON()),So.setAreaCache(n._leaflet_id,i));let r=Jl(n.toGeoJSON().features[0].geometry.coordinates[0]),s=mv.bufferBBox(r,G2);return t.eachLayer(a=>{if(!Th(n,a)){let o;if(So.overlapIsCached(n._leaflet_id,a._leaflet_id))o=So.getOverlapCache(n._leaflet_id,a._leaflet_id);else{let l=a.getBounds(),h=[l._southWest.lng,l._southWest.lat,l._northEast.lng,l._northEast.lat];if(!Ph(s,h))o=!1,So.setOverlapCache(n._leaflet_id,a._leaflet_id,o);else{let d=a.toGeoJSON(),p;if(d.type==="Feature")p=d.geometry;else if(d.type==="FeatureCollection")p=d.features[0];else throw new Error("unsupported geometry");let g=Xl(n.toGeoJSON(),5,{units:"meters"});oo(g.features[0],p)||As(g.features[0],p)?o=!0:o=!1,So.setOverlapCache(n._leaflet_id,a._leaflet_id,o)}}o&&(i+=pv(a,t,e))}}),i}var So=new kh,mv=new Zl(57.5,"meters");var vn=class{get severity(){return this._triggered?this._severity:0}get triggered(){return this._triggered}checkRule(t){let e=this._callback(t);this._triggered=e.triggered,e.shortMessage&&(this.shortMessage=e.shortMessage),e.message&&(this.message=e.message)}constructor(t,e,i,r){this._severity=t,this._triggered=!1,this._callback=r,this.shortMessage=e,this.message=i}};function gv(n,t){return()=>[cd(),fd(),ud(),hd(),dd(t,2,"Overlapping other area!","Your area is overlapping someone elses, plz fix <3"),jo(n.slope,1,"Slope warning!","Your area is in slopey or uneven terrain, make sure to check the slope map layer to make sure that you know what you are doing :)"),jo(n.fireroad,3,"Touching fireroad!","Plz move this area away from the fire road!"),Lh(n.propertyborder,3,"Outside border!","You have placed yourself outside our land, please fix that <3"),jo(n.hiddenforbidden,3,"Inside forbidden zone!","You are inside a zone that can not be used this year."),pd(t,3,"Too large/close to others!","For fire safety, we need to add a bit of open space (5m2) between these camps (or if not next to any camps, this camp simply to big)"),Lh(n.area,2,"Outside placement areas.","You are outside the main placement area (yellow border). Make sure you know what you are doing."),jo(n.publicplease,1,"Close to fire road","You are adjucant to a fire road, please use this space for public offerings and not just for sleeping"),jo(n.minorroad,2,"Blocking a path","You are possibly blocking a path for walking around (the black dotted lines). Keep it clean if possible or plan accordingly!"),jo(n.closetosanctuary,1,"Close to the  sanctuary","This area is in the viscinity of the sanctuary, please be mindful of what energy your camp is releasing and how it may effect the santuarcy"),jo(n.redsoundzone,1,"In the western meadow","You're in the western meadow, please be extra careful of keeping the land in good condition and do not put your overnight camp here unless necessary, public dreams are prefered")]}var el=Mi(Jn());function yv(n,t){let e=el.Control.extend({options:{position:"bottomleft"},onAdd:()=>{let i=el.DomUtil.create("button","btn button-shake-animate");i.title="Edit",i.textContent="Edit",el.DomEvent.disableClickPropagation(i);let r=n;return i.onclick=()=>{t(),r=!r,i.textContent=r?"Done":"Edit",i.title=r?"Done":"Edit"},i}});return new e}function Rh(n,t){let e=document.createElement("button");return e.innerHTML=n,e.onclick=t,e}L.PathDraggable=L.Draggable.extend({initialize:function(n){this._path=n,this._canvas=n._map.getRenderer(n)instanceof L.Canvas;var t=this._canvas?this._path._map.getRenderer(this._path)._container:this._path._path;L.Draggable.prototype.initialize.call(this,t,t,!0)},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("drag",n)},_onDown:function(n){var t=n.touches?n.touches[0]:n;this._startPoint=new L.Point(t.clientX,t.clientY),!(this._canvas&&!this._path._containsPoint(this._path._map.mouseEventToLayerPoint(t)))&&L.Draggable.prototype._onDown.call(this,n)}});L.Handler.PathDrag=L.Handler.extend({initialize:function(n){this._path=n},getEvents:function(){return{dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd}},addHooks:function(){this._draggable||(this._draggable=new L.PathDraggable(this._path)),this._draggable.on(this.getEvents(),this).enable(),L.DomUtil.addClass(this._draggable._element,"leaflet-path-draggable")},removeHooks:function(){this._draggable.off(this.getEvents(),this).disable(),L.DomUtil.removeClass(this._draggable._element,"leaflet-path-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._startPoint=this._draggable._startPoint,this._path.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(n){var t=this._path,e=n.originalEvent.touches&&n.originalEvent.touches.length===1?n.originalEvent.touches[0]:n.originalEvent,i=L.point(e.clientX,e.clientY),r=t._map.layerPointToLatLng(i);this._offset=i.subtract(this._startPoint),this._startPoint=i,this._path.eachLatLng(this.updateLatLng,this),t.redraw(),n.latlng=r,n.offset=this._offset,t.fire("drag",n),n.latlng=this._path.getCenter?this._path.getCenter():this._path.getLatLng(),t.fire("move",n)},_onDragEnd:function(n){this._path._bounds&&this.resetBounds(),this._path.fire("moveend").fire("dragend",n)},latLngToLayerPoint:function(n){var t=this._path._map.project(L.latLng(n));return t._subtract(this._path._map.getPixelOrigin())},updateLatLng:function(n){var t=this.latLngToLayerPoint(n);t._add(this._offset);var e=this._path._map.layerPointToLatLng(t);n.lat=e.lat,n.lng=e.lng},resetBounds:function(){this._path._bounds=new L.LatLngBounds,this._path.eachLatLng(function(n){this._bounds.extend(n)})}});L.Path.include({eachLatLng:function(n,t){t=t||this;var e=function(i){for(var r=0;r<i.length;r++)L.Util.isArray(i[r])?e(i[r]):n.call(t,i[r])};e(this.getLatLngs?this.getLatLngs():[this.getLatLng()])}});L.Path.addInitHook(function(){this.dragging=new L.Handler.PathDrag(this),this.options.draggable&&this.once("add",function(){this.dragging.enable()})});var TH=Mi(bv());var Ih=Mi(Eh());var gd=Mi(Jn());var Oh=class{constructor(t,e,i,r){this._largeCampPeopleLimit=25;this._largeCampPowerConsumtionLimit=5e3;this._entity=t,this._editEntityCallback=r,this._repository=e,this._ghostLayers=i}render(){Vs({file:"edit-entity",position:"end",buttons:[{text:"Close",variant:"neutral"},{text:"Save",onClickAction:()=>{this._editEntityCallback("save",this._entity)},shouldCloseDrawer:!0,variant:"primary"}]},{},()=>this.populate())}populate(){this.preChecks(),this.populateEditTab(),this.populatePowerTab(),this.populateHistoryTab(),this.populateAdvancedTab()}preChecks(){this.checkIfLargeCamp()}checkIfLargeCamp(){let t=document.getElementById("power-image-url");this._entity.nrOfPeople>=this._largeCampPeopleLimit||this._entity.powerNeed>=this._largeCampPowerConsumtionLimit?t.parentElement.style.display="block":t.parentElement.style.display="none"}populateEditTab(){let t=()=>{let c=document.getElementById("entity-area"),h=document.getElementById("entity-calculated-area-needed");h.innerText=String(this._entity?.calculatedAreaNeeded),c.innerText=String(this._entity?.area)},e=document.getElementById("entity-name");e.value=this._entity.name,e.oninput=()=>{this._entity.name=e.value};let i=document.getElementById("entity-description");i.value=this._entity.description,i.oninput=()=>{this._entity.description=i.value};let r=document.getElementById("entity-contact");r.value=this._entity.contactInfo,r.oninput=()=>{this._entity.contactInfo=r.value};let s=document.getElementById("entity-people");s.value=String(this._entity.nrOfPeople),s.oninput=()=>{this._entity.nrOfPeople=Number(s.value),t(),this.checkIfLargeCamp()};let a=document.getElementById("entity-vehicles");a.value=String(this._entity.nrOfVehicles),a.oninput=()=>{this._entity.nrOfVehicles=Number(a.value),t()};let o=document.getElementById("entity-other-sqm");o.value=String(this._entity.additionalSqm),o.oninput=()=>{this._entity.additionalSqm=Number(o.value),t()};let l=document.getElementById("entity-sound");l.value=String(this._entity.amplifiedSound),l.oninput=()=>{this._entity.amplifiedSound=Number(l.value)},t()}populatePowerTab(){let t=document.getElementById("entity-tech-lead");t.value=this._entity.powerContactInfo,t.oninput=()=>{this._entity.powerContactInfo=t.value};let e=document.getElementById("power-plug-type");e.value=this._entity.powerPlugType,e.addEventListener("sl-change",()=>{this._entity.powerPlugType=e.value});let i=document.getElementById("power-extra-info");i.value=this._entity.powerExtraInfo,i.oninput=()=>{this._entity.powerExtraInfo=i.value};let r=document.getElementById("power-image-url");r.value=this._entity.powerImageUrl,r.oninput=()=>{this._entity.powerImageUrl=r.value};let s=document.getElementById("power-form");s.onsubmit=l=>{l.preventDefault();let c=document.getElementById("appliance"),h=document.getElementById("amount"),d=document.getElementById("watt"),p=c.value,g=Number(h.value),m=Number(d.value);!p||g<1||m<1||(this.addApplianceToContainer([p,g,m]),this.updateEntityWithAddedAppliances(),this.calculateTotalPower(),s.reset(),c.focus())};for(var a=this._entity.powerAppliances.length;a--;){let l=this._entity.powerAppliances[a];this.addApplianceToContainer(Object.values(l))}let o=document.getElementById("entity-power-need");o.innerText=String(this._entity.powerNeed)}async populateHistoryTab(){let t=document.getElementById("entity-id"),e=document.getElementById("history-table"),i=document.getElementById("history-detail"),r=document.getElementById("history-description-header"),s=document.getElementById("entity-revisions"),a=document.getElementById("entity-last-edited");t.innerText=this._entity.id.toString(),s.innerText=this._entity.revision.toString(),a.innerText=rc(this._entity.timeStamp);let o=document.createElement("div");o.id="change-description",i.append(o);let l=document.createElement("table"),h=l.createTHead().insertRow();h.insertCell().innerText="Rev.",h.insertCell().innerText="Timestamp",h.insertCell().innerText="What Changed";let d=l.createTBody();await this._repository.getRevisionsForEntity(this._entity);let p=[],g=null,m=null,_={color:"#ff0000",fillColor:"#000000",fillOpacity:.5,weight:5};for(let v in this._entity.revisions){let x=document.createElement("ul"),S=document.createElement("tr");g=this._entity.revisions[v],S.insertCell().innerText=g.revision,S.insertCell().innerText=rc(g.timeStamp,"short","medium"),S.insertCell().append(x);let O=this.getEntityDifferences(g,m);for(let D in O){let U=O[D],z=document.createElement("li");z.innerText=U.changeShort;let V=document.createElement("sl-icon");V.setAttribute("name","eye"),V.style.fontSize="medium",V.style.marginRight="10px";let G=document.createElement("a");G.style.float="right",G.href="#",G.title="Show a detailed description about this change.",G.appendChild(V),G.onclick=()=>{let tt=this._entity.revisions[v];r.innerText=`Description of revision ${v}`,o.innerText=`${U.changeLong}

`;let K=gd.default.DomUtil.create("button","history-button");K.title=`Restores detailes from revision ${v}.`,K.textContent="\u26A0 Restore Details",K.onclick=()=>{console.log(`Restores detailes from revision ${v}.`),this._entity.name=this._entity.revisions[v].name,this._entity.description=this._entity.revisions[v].description,this._entity.contactInfo=this._entity.revisions[v].contactInfo,this._entity.nrOfPeople=this._entity.revisions[v].nrOfPeople,this._entity.nrOfVehicles=this._entity.revisions[v].nrOfVehicles,this._entity.additionalSqm=this._entity.revisions[v].additionalSqm,this._entity.amplifiedSound=this._entity.revisions[v].amplifiedSound,this._entity.color=this._entity.revisions[v].color,this._entity.supressWarnings=this._entity.revisions[v].supressWarnings,this._entity.powerContactInfo=this._entity.revisions[v].powerContactInfo,this._entity.powerPlugType=this._entity.revisions[v].powerPlugType,this._entity.powerExtraInfo=this._entity.revisions[v].powerExtraInfo,this._entity.powerImageUrl=this._entity.revisions[v].powerImageUrl,this._entity.powerNeed=this._entity.revisions[v].powerNeed,this._entity.powerAppliances=this._entity.revisions[v].powerAppliances,e.textContent="",r.textContent="",o.remove(),this.populate()},o.append(K);let B=gd.default.DomUtil.create("button","history-button");B.title=`Restores shape from revision ${v}.`,B.textContent="\u26A0 Restore Shape",B.onclick=()=>{console.log(`Restores shape from revision ${v}.`),this._editEntityCallback("restore",this._entity,v)},o.append(B),this._ghostLayers.clearLayers(),tt.layer.setStyle(_),this._ghostLayers.addLayer(tt.layer)},z.append(G),x.append(z)}p.push(S),m=g}p.slice().reverse().forEach(function(v){d.append(v)}),e.appendChild(l)}populateAdvancedTab(){let t=document.getElementsByClassName("entity-link");for(let s=0;s<t.length;s++)t[s].href="?id="+this._entity.id;let e=document.getElementById("entity-supress-warnings");e.checked=this._entity.supressWarnings,e.onchange=()=>{this._entity.supressWarnings=e.checked};let i=document.getElementById("entity-color");i.value=this._entity.color,i.addEventListener("sl-change",()=>{this._entity.color=i.value,this._entity.setLayerStyle()});let r=document.getElementById("entity-delete");r.onclick=()=>{let s=prompt("Are you really sure you should delete this area? Answer why.","");s==null||s==""||(console.log("Delete yes, deleteReason",s),Qp(),this._editEntityCallback("delete",this._entity,s))}}getEntityDifferences(t,e){let i=[];if(e==null)return i.push({what:"Created",changeShort:"Created",changeLong:"Someone created this entity."}),i;["name","description","contactInfo","nrOfPeople","nrOfVehicles","additionalSqm","amplifiedSound","color","supressWarnings","powerContactInfo","powerPlugType","powerExtraInfo","powerImageUrl","powerNeed"].forEach(o=>{t[o]!=e[o]&&i.push({what:o,changeShort:`${o}`,changeLong:`Someone changed ${o} from ${e[o]} to ${t[o]}.`})}),t.powerAppliances.length!=e.powerAppliances.length&&i.push({what:"PowerAppliances",changeShort:"Power Appliances",changeLong:`Someone changed the number of power appliances from ${e.powerAppliances.length} to ${t.powerAppliances.length}.`}),t.isDeleted!=e.isDeleted&&i.push({what:"Deleted",changeShort:"Is Deleted",changeLong:`Is Deleted due to ${t.deleteReason}.`});let s=JSON.stringify(t.toGeoJSON().geometry),a=JSON.stringify(e.toGeoJSON().geometry);return s!=a&&i.push({what:"GeoJson",changeShort:"Polygon",changeLong:"Someone changed the polygon."}),i.length==0&&i.push({what:"NoDifference",changeShort:"No difference",changeLong:"No difference detected between revisions."}),i}addApplianceToContainer(t){let e=document.getElementById("power-items-container"),i=document.createElement("div");i.classList.add("power-item"),i.classList.add("flex-row");let r=["text","number","number"];for(let s=0;s<3;s++){let a=document.createElement("sl-input");a.setAttribute("size","small"),a.setAttribute("no-spin-buttons",""),a.style.minWidth="0",a.type=r[s],a.value=t[s],a.onblur=()=>{this.updateEntityWithAddedAppliances(),this.calculateTotalPower()},i.appendChild(a)}this.addDeleteButton(i),e.prepend(i)}addDeleteButton(t){let e=document.createElement("sl-button"),i=document.createElement("sl-icon");e.setAttribute("variant","danger"),e.setAttribute("size","small"),e.setAttribute("outline",""),i.setAttribute("slot","prefix"),i.setAttribute("name","x-lg"),e.onclick=r=>{let s=r.target.closest(".power-item");s&&(s.remove(),this.updateEntityWithAddedAppliances(),this.calculateTotalPower())},e.appendChild(i),t.appendChild(e)}calculateTotalPower(){let t=0,e=this._entity.powerAppliances;for(let r=0;r<e.length;r++)t+=e[r].amount*e[r].watt;let i=document.getElementById("entity-power-need");return i.innerText=t.toString(),this._entity.powerNeed=t,this.checkIfLargeCamp(),t}updateEntityWithAddedAppliances(){let t=this.getAppliancesFromUi();this._entity.powerAppliances=[];for(let e=0;e<t.length;e++)this._entity.powerAppliances.push(t[e])}getAppliancesFromUi(){let t=[],e=document.querySelectorAll("#power-items-container .power-item");for(let i=0;i<e.length;i++){let r=e[i];t.push({name:r.childNodes[0].value,amount:r.childNodes[1].value,watt:r.childNodes[2].value})}return t}};var Ah=class{CreateInfoPopup(t,e,i,r,s,a){let o=document.createElement("div"),l=t.nrOfPeople===1?" person,":" people,",c=t.nrOfVehicles===1?" vehicle,":" vehicles,",h=t.name?t.name:"<i>No name yet</i>",d=t.description?t.description:"<i>No description yet</i>",p=t.contactInfo?t.contactInfo:"Please add contact info! Areas without it might be removed.",g=t.powerNeed!=-1?`${t.powerNeed} Watts`:"Please state your power need! Set to 0 if you will not use electricity.",m=t.amplifiedSound!=-1?`${t.amplifiedSound} Watts`:"Please set sound amplification! Set to 0 if you wont have speakers.",_=Ih.default.sanitize(d),v=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,x=_.replace(v,'<a href="$1" target="_blank">$1</a>');o.innerHTML+=`<div class="flex-column" style="margin-bottom: 10px;">
                                <header class="flex-row">
                                    <h3 style="margin: 0px;">${Ih.default.sanitize(h)}</h3>
                                    <a href="?id=${t.id}" style="margin: 5px;">
                                        <sl-icon name="share" title="Direct link to this area (right click & copy)" style="font-size: 18px;"></sl-icon>
                                    </a>
                                </header>
                                <p class="scrollable" style="margin: 0;">${x}</p>
                                <div class="flex-column" style="font-weight:200; margin:10px 0 5px 0;">
                                    <div>
                                        <b>Contact:</b> ${Ih.default.sanitize(p)}   
                                    </div>
                                    <div>
                                        <b>Power:</b> ${g}
                                    </div>
                                    <div>
                                        <b>Sound:</b> ${m}
                                    </div>
                                </div> 
                                <div style="font-size: 14px; color:#5c5c5c; margin: 0;">
                                    <b>${t.area}</b> m\xB2 - 
                                    ${t.nrOfPeople>0?"<b>"+t.nrOfPeople+"</b>"+l:""} 
                                    ${t.nrOfVehicles>0?"<b>"+t.nrOfVehicles+"</b>"+c:""} 
                                    ${t.additionalSqm>0?"<b>"+t.additionalSqm+"</b> m\xB2 other":""}
                                </div>
                            </div>`;let S=t.getAllTriggeredRules().sort((O,D)=>D.severity-O.severity);if(S.length>0){t.supressWarnings||(o.innerHTML+=`<p style="margin: 10px 0 0 0"><b>${S.length}</b> issues found:</p> `);let O=document.createElement("div");O.style.maxHeight="200px",O.style.overflowY="auto",o.appendChild(O);for(let D of S)D.severity>=3?O.innerHTML+=`<div class="error">${" "+D.message}</div>`:t.supressWarnings||(D.severity>=2?O.innerHTML+=`<div class="warning">${" "+D.message}</div>`:O.innerHTML+=`<div class="info">${" "+D.message}</div>`)}if(e){let O=new Oh(t,r,s,a),D=Rh("Edit shape",V=>{V.stopPropagation(),V.preventDefault(),i("editing-shape",t)});o.appendChild(D);let U=Rh("Move shape",V=>{V.stopPropagation(),V.preventDefault(),i("moving-shape",t)});o.appendChild(U);let z=Rh("Edit info",V=>{V.stopPropagation(),V.preventDefault(),O.render()});o.appendChild(z)}return o}};var Ql=class{constructor(t,e){this._isEditMode=!1;this._mode="none";this._currentLayerFilterStyle="severity";this._selected=null;this._map=t,this._popupContentFactory=new Ah,this._groups=e,this._placementLayers=new Ss.LayerGroup().addTo(t),this._placementBufferLayers=new Ss.LayerGroup().addTo(t),this._ghostLayers=new Ss.LayerGroup().addTo(t),this._placementLayers.addTo(e.placement),this._placementBufferLayers.addTo(e.placement),this._validateEntitiesQueue=new Array,this._lastEnityFetch=0,this._autoRefreshIntervall=90,this._currentRevisions={};let i=gv(this._groups,this._placementLayers);this._repository=new $l(i),this._popup=Ss.popup({autoClose:!1,closeButton:!1,closeOnClick:!1,closeOnEscapeKey:!1,maxWidth:350}),Ss.PM.setOptIn(!0),this._map.pm.addControls({position:"bottomleft",drawPolygon:!1,drawCircle:!1,drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawCircleMarker:!1,drawText:!1,removalMode:!1,editControls:!1,snappable:!1}),this._map.pm.setPathOptions(od),this._map.pm.setGlobalOptions({tooltips:!1,allowSelfIntersection:!1,snappable:!0,draggable:!0}),this.setupMapEvents(this._map),this.sqmTooltip=new Ss.Tooltip({permanent:!0,interactive:!1,direction:"center",className:"shape-tooltip"}),this.sqmTooltip.setLatLng([0,0]),this.sqmTooltip.addTo(this._map),this.sqmTooltip.closeTooltip(),this._nameTooltips={},document.onkeydown=s=>{this.keyEscapeListener(s)};var r=new Ss.Control.Search({layer:this._placementLayers,propertyName:"name",marker:!1,zoom:19,initial:!1});t.addControl(r)}async setMode(t,e){let i=this._mode,r=this._selected,s=t==i,a=e==r;if(!(s&&a)){if(this._ghostLayers.clearLayers(),t=="blur")if((i=="editing-shape"||i=="moving-shape")&&r){t="selected",e=e||r;let l=e.layer.getBounds().getCenter();this._popup.setLatLng(l)}else t="none",e=void 0;if(console.log("[Editor]","mode changed!",{mode:this._mode,nextMode:t,nextEntity:e}),this._mode=t,this._mode=="none"){this.setSelected(null,r),this.setPopup("none");return}if(this._mode=="selected"&&e){this.setSelected(e,r),this.setPopup("info",e),r&&(r?.layer.pm.disable(),r?.layer._layers[r.layer._leaflet_id-1].dragging.disable());return}if(this._mode=="editing-shape"&&e){e.layer.pm.enable({editMode:!0,snappable:!1}),this.setSelected(e,r),this.setPopup("none");return}if(this._mode=="moving-shape"&&e){this.setSelected(e,r),this.setPopup("none"),this.UpdateOnScreenDisplay(e,"Drag to move"),e.layer._layers[e.layer._leaflet_id-1].dragging.enable();return}}}async setSelected(t,e){this._isEditMode&&this.UpdateOnScreenDisplay(t),this._selected=t,this.refreshEntity(this._selected)}keyEscapeListener(t){"key"in t&&!(t.key==="Escape"||t.key==="Esc")||this.setMode("blur")}async setPopup(t,e){if(t=="none"||!e){this._popup.close();return}let i=async(s,a,o)=>{switch(s){case"delete":this.deleteAndRemoveEntity(a,o),qs("Deleted","success"),this._popup.close();break;case"save":this.setSelected(a,null),this._popup.close(),this.UpdateOnScreenDisplay(a,"Saving...");let l=await this.saveEntity(a);this.setPopup("info",l);break;case"restore":this.removeEntityNameTooltip(a),this.removeEntityFromLayers(a),a.layer=a.revisions[o].layer,this.addEntityToMap(a);break;default:console.log("Unknown action",s);break}};if(t=="info"){let s=this._popupContentFactory.CreateInfoPopup(e,this._isEditMode,this.setMode.bind(this),this._repository,this._ghostLayers,i.bind(this));this._popup.setContent(s).openOn(this._map);let a=this._popupContentFactory.CreateInfoPopup(e,this._isEditMode,this.setMode.bind(this),this._repository,this._ghostLayers,i.bind(this));var r=document.getElementById("fullScreenPopup");r.appendChild(a),r.classList.remove("hidden");let o=document.createElement("sl-icon");o.style.margin="5px",o.setAttribute("name","x-lg"),o.onclick=()=>{this.setMode("none")},r.querySelector("header").appendChild(o);return}}async onLayerClicked(t){console.log("[Editor]","Click event fired",{entity:t}),this.setMode("selected",t)}async saveEntity(t){if(console.log("[Editor]","saveEntity!",{selected:this._selected}),this.isAreaTooBig(t.toGeoJSON())){this.setMode("blur");return}t.layer.pm.disable(),await this._repository.getRevisionsForEntity(t);let e;for(let s in t.revisions)e=s;let i=t.revisions[e];t.revision!=i.revision&&qs(`<b>Someone else edited this shape at the same time as you</b><br/>
            You have now overwritten their changes, see the differences in the history tab.`,"danger",void 0,36e5);let r=await this._repository.updateEntity(t);if(this.UpdateOnScreenDisplay(null),r)return this.removeEntity(t,!1),this.addEntityToMap(r),qs("Saved!","success"),r}async onNewLayerCreated(t){console.log("[Editor]","Create event fired",{createEvent:t});let{layer:e}=t,i=e.toGeoJSON();if(this.isAreaTooBig(i)){this._map.removeLayer(e);return}let r=await this._repository.createEntity(i);if(r){this.addEntityToMap(r),this._map.removeLayer(e);let a=r.layer.getBounds().getCenter();this._popup.setLatLng(a),this.setMode("selected",r),qs("Saved!","success")}}createEntityTooltip(t){let e=new Ss.Marker(t.layer.getBounds().getCenter(),{opacity:0});return e.feature={type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}},e.options.icon.options.iconSize=[1,1],e.bindTooltip(t.name,{permanent:!0,interactive:!1,direction:"center",className:"name-tooltip"}),t.nameMarker=e,e}addEntityToMap(t,e=!0){this._currentRevisions[t.id]=t,t.layer.on("click",({latlng:i})=>{console.log(i),this._popup.setLatLng(i),this.onLayerClicked(t)}),this._nameTooltips[t.id]=this.createEntityTooltip(t),this._nameTooltips[t.id].addTo(this._groups.names),t.layer.on("pm:markerdrag",()=>{t.updateBufferedLayer(),this.refreshEntity(t),this.UpdateOnScreenDisplay(t)}),t.layer.on("pm:markerdragend",()=>{this.isAreaTooBig(t.toGeoJSON())}),t.layer._layers[t.layer._leaflet_id-1].on("drag",()=>{t.updateBufferedLayer(),this.refreshEntity(t),this.UpdateOnScreenDisplay(null)}),t.layer.on("pm:vertexremoved",()=>{t.updateBufferedLayer(),this.refreshEntity(t),this.UpdateOnScreenDisplay(t)}),this._placementLayers.addLayer(t.layer),this._placementBufferLayers.addLayer(t.bufferLayer),this._map.getZoom()<19&&t.bufferLayer.setStyle({opacity:0}),e&&this.refreshEntity(t)}refreshEntity(t,e=!0){if(t==null)return;let i=t.nameMarker.getLatLng(),r=t.layer.getBounds().getCenter();(r.lat!=i.lat||r.lng!=i.lng)&&t.nameMarker.setLatLng(r),t.nameMarker._tooltip._content!=t.name&&t.nameMarker.setTooltipContent(t.name);var s=this._map.getZoom();s>=19?this._nameTooltips[t.id]._tooltip.setOpacity(1):this._nameTooltips[t.id]._tooltip.setOpacity(0),e&&t.checkAllRules(),t.setLayerStyle(this._currentLayerFilterStyle)}refreshAllEntities(t=!0){for(let e in this._currentRevisions)this.refreshEntity(this._currentRevisions[e],t)}refreshEntitiesSlow(t=null){if(qs("Validating..."),t)this._validateEntitiesQueue=t;else for(let e in this._currentRevisions)this._validateEntitiesQueue.push(this._currentRevisions[e]);this.validateSlowly()}validateSlowly(){var e=[];for(let i=0;i<this._validateEntitiesQueue.length;i+=50){let r=this._validateEntitiesQueue.slice(i,i+50);e.push(new Promise(function(s,a){setTimeout(()=>{for(let o=0;o<r.length;o++)this.refreshEntity(r[o],!0);s(r.length)},50)}.bind(this)))}Promise.all(e).then(i=>{qs("Validation done","success")},i=>{console.log(i)})}setLayerFilter(t,e=!0){this._currentLayerFilterStyle=t,this.refreshAllEntities(e)}isAreaTooBig(t){return wo(t)>5e3?(qs("The area of the polygon is waaay to big. It will not be saved, please change it.","danger",void 0,36e5),!0):!1}deleteAndRemoveEntity(t,e=null){this._selected=null,this.setMode("none"),this.removeEntity(t),this._repository.deleteEntity(t,e)}removeEntityNameTooltip(t){t.nameMarker.unbindTooltip(),this._groups.names.removeLayer(t.nameMarker),t.nameMarker=null,delete this._nameTooltips[t.id]}removeEntityFromLayers(t){this._placementLayers.removeLayer(t.layer),this._placementBufferLayers.removeLayer(t.bufferLayer),this._map.removeLayer(t.layer),this._map.removeLayer(t.bufferLayer)}removeEntity(t,e=!0){this.removeEntityNameTooltip(t),this.removeEntityFromLayers(t),delete this._currentRevisions[t.id],e&&this._repository.remove(t)}addToggleEditButton(){!0&&this._map.addControl(yv(this._isEditMode,()=>{this.toggleEditMode()})),ad&&this._map.addControl(tm(ad))}async toggleEditMode(){if(!!0){this._isEditMode=!1;return}this._isEditMode=!this._isEditMode,this._isEditMode&&localStorage.getItem("hasSeenEditorInstructions")==null&&Jp([{file:"entering_edit_mode",position:"bottom",buttons:[{text:"Continue"}]},{file:"entering_edit_mode_page_two",position:"bottom",onClose:()=>{localStorage.setItem("hasSeenEditorInstructions","true")},buttons:[{text:"Close"}]}]),this.setPopup("info",this._selected),this._isEditMode==!1&&this._mode!="selected"&&this.setMode("none"),this._map.pm.addControls({drawPolygon:this._isEditMode}),this._map.pm.Toolbar.changeActionsOfControl("Polygon",["cancel"])}async addAPIEntities(){await qs("Loading your drawn polygons from da interweb!");let t=await this._repository.entities();this._lastEnityFetch=new Date().getTime()/1e3;for(let e of t)this.addEntityToMap(e,!1);this.refreshAllEntities(!1),setTimeout(()=>{this.refreshEntitiesSlow()},100),this.addToggleEditButton()}async checkForUpdatedEntities(){if(this._isEditMode==!1){var t=new Date().getTime()/1e3;if(t-this._lastEnityFetch>this._autoRefreshIntervall){this._lastEnityFetch=t;let e=await this._repository.reload(),i=new Array,r=new Array;for(let s of e.refreshedAdded){let a=this._repository.getEntityById(s);r.push(`Add new entity ${a.id} ${a.name}`),this.addEntityToMap(a,!1),i.push(a)}for(let s of e.refreshedDeleted){let a=this._currentRevisions[s];r.push(`Removed entity ${a.id} ${a.name}`),this.removeEntity(a)}for(let s of e.refreshedUpdated){let a=this._repository.getEntityById(s);r.push(`Updated entity ${a.id} ${a.name}`),this.removeEntity(this._currentRevisions[s],!1),this.addEntityToMap(a,!1),i.push(a)}r.length>0&&(console.log("Fetched latest changes from map",new Date().toISOString(),r),this.refreshAllEntities(!1)),i.length>0&&this.refreshEntitiesSlow(i)}}setTimeout(()=>{this.checkForUpdatedEntities()},1e4)}gotoEntity(t){let e=this._repository.getEntityById(t);if(e){let i=e.layer.getBounds().getCenter();this._map.setView(i,19),this._popup.setLatLng(i),this.onLayerClicked(e)}}UpdateOnScreenDisplay(t,e=null){if(t||e){let i="";if(e)i=e;else{i=t.area+"m\xB2";for(let r of t.getAllTriggeredRules())r.severity>=2&&(i+="<br>"+r.shortMessage)}this.sqmTooltip.openOn(this._map),this.sqmTooltip.setLatLng(t.layer.getBounds().getCenter()),this.sqmTooltip.setContent(i)}else this.sqmTooltip.close()}setupMapEvents(t){t.on("popupclose",function(){var i=document.getElementById("fullScreenPopup");i.innerHTML="",i.classList.add("hidden")});var e=this._placementBufferLayers;t.on("zoomend",function(){var i=t.getZoom();e.getLayers().forEach(function(r){r.setStyle({opacity:i>=19?1:0})}),this.groups.names.getLayers().forEach(function(r){r._tooltip.setOpacity(i>=19?1:0)})}),t.on("pm:create",this.onNewLayerCreated.bind(this)),t.on("click",i=>{console.log("[Editor]","Editor blur event fired (map click)",{mouseEvent:i}),this.setMode("blur")})}};var xv=async()=>{let n=new Set(["Placement","Placement_map","POI"]),t=Dr.default.map("map",{zoomControl:!1,maxZoom:21,drawControl:!0,attributionControl:!1}).setView([57.6226,14.9276],16);t.groups={placement:new Dr.default.LayerGroup,mapstuff:new Dr.default.LayerGroup,neighbourhoods:new Dr.default.LayerGroup,quarters:new Dr.default.LayerGroup,plazas:new Dr.default.LayerGroup,poi:new Dr.default.LayerGroup,powergrid:new Dr.default.LayerGroup,soundspots:new Dr.default.LayerGroup,soundguide:new Dr.default.LayerGroup,names:new Dr.default.LayerGroup},t.groups.googleSatellite=Dr.default.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:21,maxNativeZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(t),fetch("./data/analysis/contours.geojson").then(h=>h.json()).then(h=>{Dr.default.geoJSON(h.features,{style:{color:"#ffffff",weight:1,opacity:.5}}).addTo(t.groups.mapstuff)}),await Ea(t,"type","./data/bl25/placement_areas.geojson"),await Ea(t,"type","./data/bl25/borders.geojson"),await Ea(t,"type","./data/bl25/roads_and_distances.geojson"),await Ea(t,"type","./data/bl25/plazas.geojson"),await Ea(t,"type","./data/bl25/neighbourhoods.geojson"),t.groups.propertyborder.addTo(t.groups.mapstuff),t.removeLayer(t.groups.propertyborder),t.groups.minorroad.addTo(t.groups.mapstuff),t.removeLayer(t.groups.minorroad),t.groups.fireroad.addTo(t.groups.mapstuff),t.removeLayer(t.groups.fireroad),t.groups.area.addTo(t.groups.mapstuff),t.removeLayer(t.groups.area),t.groups.hiddenforbidden.addTo(t.groups.mapstuff),t.groups.container.addTo(t.groups.mapstuff),t.removeLayer(t.groups.container),t.groups.parking.addTo(t.groups.mapstuff),t.removeLayer(t.groups.parking),t.groups.toilet.addTo(t.groups.mapstuff),t.removeLayer(t.groups.toilet),t.groups.bridge.addTo(t.groups.mapstuff),t.removeLayer(t.groups.bridge),t.groups.bluesoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.bluesoundzone),t.groups.greensoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.greensoundzone),t.groups.yellowsoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.yellowsoundzone),t.groups.orangesoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.orangesoundzone),t.groups.redsoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.redsoundzone),t.on("overlayadd",function(h){t.groups.names.setZIndex(101),h.name==="Soundguide"&&(t.groups.bluesoundzone.bringToBack(),t.groups.greensoundzone.bringToBack(),t.groups.yellowsoundzone.bringToBack(),t.groups.orangesoundzone.bringToBack(),t.groups.redsoundzone.bringToBack())}),t.groups.terrain=await Qh(t,"./data/terrain.png",[[57.615642290070426,14.915097173672454],[57.62912303949617,14.936217846229036]]),t.groups.drawn=await Qh(t,"./data/drawn.jpg",[[57.6306870895,14.9142416425],[57.6178189445,14.9386124973]]),t.groups.heightmap=Dr.default.tileLayer("./data/analysis/height/{z}/{x}/{y}.jpg",{minZoom:13,maxZoom:21,minNativeZoom:16,maxNativeZoom:17,tms:!1}),t.groups.slopemap=Dr.default.tileLayer("./data/analysis/slope/{z}/{x}/{y}.png",{minZoom:13,maxZoom:21,minNativeZoom:16,maxNativeZoom:17,tms:!1}),t.groups.aftermath=Dr.default.tileLayer("./data/bl23/aftermath/{z}/{x}/{y}.png",{minZoom:0,maxZoom:21,minNativeZoom:0,maxNativeZoom:20,tms:!1}),t.groups.aftermath22=Dr.default.tileLayer("./data/bl22/aftermath/{z}/{x}/{y}.png",{minZoom:0,maxZoom:21,minNativeZoom:0,maxNativeZoom:20,tms:!1}),t.groups.plaza.addTo(t.groups.plazas),t.removeLayer(t.groups.plaza),t.groups.neighbourhood.addTo(t.groups.neighbourhoods),t.removeLayer(t.groups.neighbourhood);var e={Placement_map:t.groups.mapstuff,POI:t.groups.poi,PowerGrid:t.groups.powergrid,Soundguide:t.groups.soundguide,Slope:t.groups.slopemap,Height:t.groups.heightmap,Terrain:t.groups.terrain,Handdrawn:t.groups.drawn,Plazas:t.groups.plazas,Placement:t.groups.placement,Names:t.groups.names,Neighbourhoods:t.groups.neighbourhoods,Quarters:t.groups.quarters,Aftermath22:t.groups.aftermath22,Aftermath23:t.groups.aftermath};let i=new Ql(t,t.groups),r=Dr.default.Control.extend({options:{position:"topleft"},onAdd:()=>{let h=Dr.default.DomUtil.create("button","leaflet-bar help-button");return h.title="Guide to the placement process",h.textContent="\u26D1\uFE0F",Dr.default.DomEvent.disableClickPropagation(h),h.onclick=()=>{Vs({file:"guide-home",position:"end",onClose:()=>{localStorage.setItem("hasSeenPlacementWelcome","true")}})},h}});t.addControl(new r);let s=Dr.default.Control.extend({options:{position:"topleft"},onAdd:()=>{let h=Dr.default.DomUtil.create("button","leaflet-bar help-button");return h.title="Save everything",h.textContent="\u{1F4BE}",Dr.default.DomEvent.disableClickPropagation(h),h.onclick=async()=>{if(!confirm("This will download all the current map information as several KML and GeoJSON files, are you sure?"))return;let p=[["mapstuff"],["poi"],["powergrid"],["soundguide"],["plazas"],["names"],["neighbourhoods"],["placement"]];qs("Downloading map data...");for(let[m]of p)try{let v=t.groups[m].toGeoJSON();var g=(0,wv.default)(v,{documentName:m,name:"name",description:"description"});for(let[x,S]of[[g,".kml"],[JSON.stringify(v),".geojson"]]){let O=document.createElement("a"),D="data:text/kml;charset=utf-8,"+encodeURIComponent(x);O.download=m+S,O.target="_blank",O.href=D,O.click(),console.log("Downloading map data from layergroup "+m),await new Promise(U=>setTimeout(U,500))}}catch(_){console.error(_),console.warn("Failed to download map data from layergroup "+m)}},h}});t.addControl(new s),Dr.default.control.polylineMeasure({measureControlLabel:"&#128207;",arrow:{color:"#0000"}}).addTo(t);let o=new Dr.default.Control.Coordinates({position:"topright",latitudeText:"lat",longitudeText:"lng",promptText:"Current Coordinaes:",precision:10});o.addTo(t),t.on("hashmetainit",function(h){yo.decode(h.meta),yo.layers.filter(d=>d in e).forEach(d=>n.add(d)),n.forEach(d=>t.addLayer(e[d]))}),t.on("overlayadd",function(h){n.add(h.name),yo.layers=n}),t.on("overlayremove",function(h){n.delete(h.name),yo.layers=n}),yo.map=t,yo.layers=n,t.on("click",function(h){console.log(h.latlng),o.setCoordinates(h)}),await Kh("poi.json",t.groups.poi),await Up(t.groups.powergrid),await Kh("soundspots.json",t.groups.soundspots),t.groups.soundspots.addTo(t.groups.soundguide),t.removeLayer(t.groups.soundspots),qp(t.groups.quarters),Wp(t.groups.plazas),Xp(t.groups.neighbourhoods),await $p(t,e,n),t.removeLayer(e.Names),await i.addAPIEntities(),t.addLayer(e.Names);let l=new URLSearchParams(window.location.search),c=Number(l.get("id"));c&&i.gotoEntity(c),await qs("Loaded everything!","success")};var Un=class{constructor(t){this.table=t}reloadData(t,e,i){return this.table.dataLoader.load(t,void 0,void 0,void 0,e,i)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(t){return this.table.modules.layout.layout(t)}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t){return this.table.options[t]}setOption(t,e){return typeof e<"u"&&(this.table.options[t]=e),this.table.options[t]}deprecationCheck(t,e,i){return this.table.deprecationAdvisor.check(t,e,i)}deprecationCheckMsg(t,e){return this.table.deprecationAdvisor.checkMsg(t,e)}deprecationMsg(t){return this.table.deprecationAdvisor.msg(t)}module(t){return this.table.module(t)}},Ir=class{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}static retrieveNestedData(t,e,i){var r=t?e.split(t):[e],s=r.length,a;for(let o=0;o<s&&(i=i[r[o]],a=i,!!i);o++);return a}static deepClone(t,e,i=[]){var r={}.__proto__,s=[].__proto__;e||(e=Object.assign(Array.isArray(t)?[]:{},t));for(var a in t){let o=t[a],l,c;o!=null&&typeof o=="object"&&(o.__proto__===r||o.__proto__===s)&&(l=i.findIndex(h=>h.subject===o),l>-1?e[a]=i[l].copy:(c=Object.assign(Array.isArray(o)?[]:{},o),i.unshift({subject:o,copy:c}),e[a]=this.deepClone(o,c,i)))}return e}},V2=class Cv extends Un{constructor(t,e,i){super(t),this.element=e,this.container=this._lookupContainer(),this.parent=i,this.reversedX=!1,this.childPopup=null,this.blurable=!1,this.blurCallback=null,this.blurEventsBound=!1,this.renderedCallback=null,this.visible=!1,this.hideable=!0,this.element.classList.add("tabulator-popup-container"),this.blurEvent=this.hide.bind(this,!1),this.escEvent=this._escapeCheck.bind(this),this.destroyBinding=this.tableDestroyed.bind(this),this.destroyed=!1}tableDestroyed(){this.destroyed=!0,this.hide(!0)}_lookupContainer(){var t=this.table.options.popupContainer;return typeof t=="string"?(t=document.querySelector(t),t||console.warn("Menu Error - no container element found matching selector:",this.table.options.popupContainer,"(defaulting to document body)")):t===!0&&(t=this.table.element),t&&!this._checkContainerIsParent(t)&&(t=!1,console.warn("Menu Error - container element does not contain this table:",this.table.options.popupContainer,"(defaulting to document body)")),t||(t=document.body),t}_checkContainerIsParent(t,e=this.table.element){return t===e?!0:e.parentNode?this._checkContainerIsParent(t,e.parentNode):!1}renderCallback(t){this.renderedCallback=t}containerEventCoords(t){var e=!(t instanceof MouseEvent),i=e?t.touches[0].pageX:t.pageX,r=e?t.touches[0].pageY:t.pageY;if(this.container!==document.body){let s=Ir.elOffset(this.container);i-=s.left,r-=s.top}return{x:i,y:r}}elementPositionCoords(t,e="right"){var i=Ir.elOffset(t),r,s,a;switch(this.container!==document.body&&(r=Ir.elOffset(this.container),i.left-=r.left,i.top-=r.top),e){case"right":s=i.left+t.offsetWidth,a=i.top-1;break;case"bottom":s=i.left,a=i.top+t.offsetHeight;break;case"left":s=i.left,a=i.top-1;break;case"top":s=i.left,a=i.top;break;case"center":s=i.left+t.offsetWidth/2,a=i.top+t.offsetHeight/2;break}return{x:s,y:a,offset:i}}show(t,e){var i,r,s,a,o;return this.destroyed||this.table.destroyed?this:(t instanceof HTMLElement?(s=t,o=this.elementPositionCoords(t,e),a=o.offset,i=o.x,r=o.y):typeof t=="number"?(a={top:0,left:0},i=t,r=e):(o=this.containerEventCoords(t),i=o.x,r=o.y,this.reversedX=!1),this.element.style.top=r+"px",this.element.style.left=i+"px",this.container.appendChild(this.element),typeof this.renderedCallback=="function"&&this.renderedCallback(),this._fitToScreen(i,r,s,a,e),this.visible=!0,this.subscribe("table-destroy",this.destroyBinding),this.element.addEventListener("mousedown",l=>{l.stopPropagation()}),this)}_fitToScreen(t,e,i,r,s){var a=this.container===document.body?document.documentElement.scrollTop:this.container.scrollTop;(t+this.element.offsetWidth>=this.container.offsetWidth||this.reversedX)&&(this.element.style.left="",i?this.element.style.right=this.container.offsetWidth-r.left+"px":this.element.style.right=this.container.offsetWidth-t+"px",this.reversedX=!0);let o=Math.max(this.container.offsetHeight,a?this.container.scrollHeight:0);if(e+this.element.offsetHeight>o)if(i)switch(s){case"bottom":this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight-i.offsetHeight-1+"px";break;default:this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight+i.offsetHeight+1+"px"}else this.element.style.height=o+"px"}isVisible(){return this.visible}hideOnBlur(t){return this.blurable=!0,this.visible&&(setTimeout(()=>{this.visible&&(this.table.rowManager.element.addEventListener("scroll",this.blurEvent),this.subscribe("cell-editing",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),document.body.addEventListener("mousedown",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent),this.blurEventsBound=!0)},100),this.blurCallback=t),this}_escapeCheck(t){t.keyCode==27&&this.hide()}blockHide(){this.hideable=!1}restoreHide(){this.hideable=!0}hide(t=!1){return this.visible&&this.hideable&&(this.blurable&&this.blurEventsBound&&(document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),document.body.removeEventListener("mousedown",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent),this.unsubscribe("cell-editing",this.blurEvent),this.blurEventsBound=!1),this.childPopup&&this.childPopup.hide(),this.parent&&(this.parent.childPopup=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.visible=!1,this.blurCallback&&!t&&this.blurCallback(),this.unsubscribe("table-destroy",this.destroyBinding)),this}child(t){return this.childPopup&&this.childPopup.hide(),this.childPopup=new Cv(this.table,t,this),this.childPopup}},xi=class extends Un{constructor(t,e){super(t),this._handler=null}initialize(){}registerTableOption(t,e){this.table.optionsList.register(t,e)}registerColumnOption(t,e){this.table.columnManager.optionsList.register(t,e)}registerTableFunction(t,e){typeof this.table[t]>"u"?this.table[t]=(...i)=>(this.table.initGuard(t),e(...i)):console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,e,i){return this.table.componentFunctionBinder.bind(t,e,i)}registerDataHandler(t,e){this.table.rowManager.registerDataPipelineHandler(t,e),this._handler=t}registerDisplayHandler(t,e){this.table.rowManager.registerDisplayPipelineHandler(t,e),this._handler=t}displayRows(t){var e=this.table.rowManager.displayRows.length-1,i;if(this._handler&&(i=this.table.rowManager.displayPipeline.findIndex(r=>r.handler===this._handler),i>-1&&(e=i)),t&&(e=e+t),this._handler)return e>-1?this.table.rowManager.getDisplayRows(e):this.activeRows()}activeRows(){return this.table.rowManager.activeRows}refreshData(t,e){e||(e=this._handler),e&&this.table.rowManager.refreshActiveData(e,!1,t)}footerAppend(t){return this.table.footerManager.append(t)}footerPrepend(t){return this.table.footerManager.prepend(t)}footerRemove(t){return this.table.footerManager.remove(t)}popup(t,e){return new V2(this.table,t,e)}alert(t,e){return this.table.alertManager.alert(t,e)}clearAlert(){return this.table.alertManager.clear()}},q2={rownum:function(n,t,e,i,r,s){return s.getPosition()}},vd=class n extends xi{static moduleName="accessor";static accessors=q2;constructor(t){super(t),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(t){var e=!1,i={};this.allowedTypes.forEach(r=>{var s="accessor"+(r.charAt(0).toUpperCase()+r.slice(1)),a;t.definition[s]&&(a=this.lookupAccessor(t.definition[s]),a&&(e=!0,i[s]={accessor:a,params:t.definition[s+"Params"]||{}}))}),e&&(t.modules.accessor=i)}lookupAccessor(t){var e=!1;switch(typeof t){case"string":n.accessors[t]?e=n.accessors[t]:console.warn("Accessor Error - No such accessor found, ignoring: ",t);break;case"function":e=t;break}return e}transformRow(t,e){var i="accessor"+(e.charAt(0).toUpperCase()+e.slice(1)),r=t.getComponent(),s=Ir.deepClone(t.data||{});return this.table.columnManager.traverse(function(a){var o,l,c,h;a.modules.accessor&&(l=a.modules.accessor[i]||a.modules.accessor.accessor||!1,l&&(o=a.getFieldValue(s),o!="undefined"&&(h=a.getComponent(),c=typeof l.params=="function"?l.params(o,s,e,h,r):l.params,a.setFieldValue(s,l.accessor(o,s,e,c,h,r)))))}),s}},W2={method:"GET"};function bd(n,t){var e=[];if(t=t||"",Array.isArray(n))n.forEach((r,s)=>{e=e.concat(bd(r,t?t+"["+s+"]":s))});else if(typeof n=="object")for(var i in n)e=e.concat(bd(n[i],t?t+"["+i+"]":i));else e.push({key:t,value:n});return e}function X2(n){var t=bd(n),e=[];return t.forEach(function(i){e.push(encodeURIComponent(i.key)+"="+encodeURIComponent(i.value))}),e.join("&")}function Mv(n,t,e){return n&&e&&Object.keys(e).length&&(!t.method||t.method.toLowerCase()=="get")&&(t.method="get",n+=(n.includes("?")?"&":"?")+X2(e)),n}function $2(n,t,e){var i;return new Promise((r,s)=>{if(n=this.urlGenerator.call(this.table,n,t,e),t.method.toUpperCase()!="GET")if(i=typeof this.table.options.ajaxContentType=="object"?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType],i){for(var a in i.headers)t.headers||(t.headers={}),typeof t.headers[a]>"u"&&(t.headers[a]=i.headers[a]);t.body=i.body.call(this,n,t,e)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);n?(typeof t.headers>"u"&&(t.headers={}),typeof t.headers.Accept>"u"&&(t.headers.Accept="application/json"),typeof t.headers["X-Requested-With"]>"u"&&(t.headers["X-Requested-With"]="XMLHttpRequest"),typeof t.mode>"u"&&(t.mode="cors"),t.mode=="cors"?(typeof t.headers.Origin>"u"&&(t.headers.Origin=window.location.origin),typeof t.credentials>"u"&&(t.credentials="same-origin")):typeof t.credentials>"u"&&(t.credentials="include"),fetch(n,t).then(o=>{o.ok?o.json().then(l=>{r(l)}).catch(l=>{s(l),console.warn("Ajax Load Error - Invalid JSON returned",l)}):(console.error("Ajax Load Error - Connection Error: "+o.status,o.statusText),s(o))}).catch(o=>{console.error("Ajax Load Error - Connection Error: ",o),s(o)})):(console.warn("Ajax Load Error - No URL Set"),r([]))})}function _d(n,t){var e=[];if(t=t||"",Array.isArray(n))n.forEach((r,s)=>{e=e.concat(_d(r,t?t+"["+s+"]":s))});else if(typeof n=="object")for(var i in n)e=e.concat(_d(n[i],t?t+"["+i+"]":i));else e.push({key:t,value:n});return e}var Y2={json:{headers:{"Content-Type":"application/json"},body:function(n,t,e){return JSON.stringify(e)}},form:{headers:{},body:function(n,t,e){var i=_d(e),r=new FormData;return i.forEach(function(s){r.append(s.key,s.value)}),r}}},wd=class n extends xi{static moduleName="ajax";static defaultConfig=W2;static defaultURLGenerator=Mv;static defaultLoaderPromise=$2;static contentTypeFormatters=Y2;constructor(t){super(t),this.config={},this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=n.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||n.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||n.defaultURLGenerator,this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.setDefaultConfig(this.table.options.ajaxConfig),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-params",this.requestParams.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestParams(t,e,i,r){var s=this.table.options.ajaxParams;return s&&(typeof s=="function"&&(s=s.call(this.table)),r=Object.assign(Object.assign({},s),r)),r}requestDataCheck(t,e,i,r){return!!(!t&&this.url||typeof t=="string")}requestData(t,e,i,r,s){var a;return!s&&this.requestDataCheck(t)?(t&&this.setUrl(t),a=this.generateConfig(i),this.sendRequest(this.url,e,a)):s}setDefaultConfig(t={}){this.config=Object.assign({},n.defaultConfig),typeof t=="string"?this.config.method=t:Object.assign(this.config,t)}generateConfig(t={}){var e=Object.assign({},this.config);return typeof t=="string"?e.method=t:Object.assign(e,t),e}setUrl(t){this.url=t}getUrl(){return this.url}sendRequest(t,e,i){return this.table.options.ajaxRequesting.call(this.table,t,e)!==!1?this.loaderPromise(t,i,e).then(r=>(this.table.options.ajaxResponse&&(r=this.table.options.ajaxResponse.call(this.table,t,e,r)),r)):Promise.reject()}},Z2={replace:function(n){return this.table.setData(n)},update:function(n){return this.table.updateOrAddData(n)},insert:function(n){return this.table.addData(n)}},K2={table:function(n){var t=[],e=!0,i=this.table.columnManager.columns,r=[],s=[];return n=n.split(`
`),n.forEach(function(a){t.push(a.split("	"))}),t.length&&!(t.length===1&&t[0].length<2)?(t[0].forEach(function(a){var o=i.find(function(l){return a&&l.definition.title&&a.trim()&&l.definition.title.trim()===a.trim()});o?r.push(o):e=!1}),e||(e=!0,r=[],t[0].forEach(function(a){var o=i.find(function(l){return a&&l.field&&a.trim()&&l.field.trim()===a.trim()});o?r.push(o):e=!1}),e||(r=this.table.columnManager.columnsByIndex)),e&&t.shift(),t.forEach(function(a){var o={};a.forEach(function(l,c){r[c]&&(o[r[c].field]=l)}),s.push(o)}),s):!1}},J2={copyToClipboard:["ctrl + 67","meta + 67"]},Q2={copyToClipboard:function(n){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},tE={keybindings:{bindings:J2,actions:Q2}},xd=class n extends xi{static moduleName="clipboard";static moduleExtensions=tE;static pasteActions=Z2;static pasteParsers=K2;constructor(t){super(t),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",t=>{var e,i,r;this.blocked||(t.preventDefault(),this.customSelection?(e=this.customSelection,this.table.options.clipboardCopyFormatter&&(e=this.table.options.clipboardCopyFormatter("plain",e))):(r=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard"),i=this.table.modules.export.generateHTMLTable(r),e=i?this.generatePlainContent(r):"",this.table.options.clipboardCopyFormatter&&(e=this.table.options.clipboardCopyFormatter("plain",e),i=this.table.options.clipboardCopyFormatter("html",i))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",e):t.clipboardData&&t.clipboardData.setData?(t.clipboardData.setData("text/plain",e),i&&t.clipboardData.setData("text/html",i)):t.originalEvent&&t.originalEvent.clipboardData.setData&&(t.originalEvent.clipboardData.setData("text/plain",e),i&&t.originalEvent.clipboardData.setData("text/html",i)),this.dispatchExternal("clipboardCopied",e,i),this.reset())}),(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",t=>{this.paste(t)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(t){var e=[];return t.forEach(i=>{var r=[];i.columns.forEach(s=>{var a="";if(s)if(i.type==="group"&&(s.value=s.component.getKey()),s.value===null)a="";else switch(typeof s.value){case"object":a=JSON.stringify(s.value);break;case"undefined":a="";break;default:a=s.value}r.push(a)}),e.push(r.join("	"))}),e.join(`
`)}copy(t,e){var i,r;this.blocked=!1,this.customSelection=!1,(this.mode===!0||this.mode==="copy")&&(this.rowRange=t||this.table.options.clipboardCopyRowRange,typeof window.getSelection<"u"&&typeof document.createRange<"u"?(t=document.createRange(),t.selectNodeContents(this.table.element),i=window.getSelection(),i.toString()&&e&&(this.customSelection=i.toString()),i.removeAllRanges(),i.addRange(t)):typeof document.selection<"u"&&typeof document.body.createTextRange<"u"&&(r=document.body.createTextRange(),r.moveToElementText(this.table.element),r.select()),document.execCommand("copy"),i&&i.removeAllRanges())}setPasteAction(t){switch(typeof t){case"string":this.pasteAction=n.pasteActions[t],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",t);break;case"function":this.pasteAction=t;break}}setPasteParser(t){switch(typeof t){case"string":this.pasteParser=n.pasteParsers[t],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",t);break;case"function":this.pasteParser=t;break}}paste(t){var e,i,r;this.checkPasteOrigin(t)&&(e=this.getPasteData(t),i=this.pasteParser.call(this,e),i?(t.preventDefault(),this.table.modExists("mutator")&&(i=this.mutateData(i)),r=this.pasteAction.call(this,i),this.dispatchExternal("clipboardPasted",e,i,r)):this.dispatchExternal("clipboardPasteError",e))}mutateData(t){var e=[];return Array.isArray(t)?t.forEach(i=>{e.push(this.table.modules.mutator.transformRow(i,"clipboard"))}):e=t,e}checkPasteOrigin(t){var e=!0,i=this.confirm("clipboard-paste",[t]);return(i||!["DIV","SPAN"].includes(t.target.tagName))&&(e=!1),e}getPasteData(t){var e;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData?e=t.clipboardData.getData("text/plain"):t.originalEvent&&t.originalEvent.clipboardData.getData&&(e=t.originalEvent.clipboardData.getData("text/plain")),e}},Ed=class{constructor(t){return this._row=t,new Proxy(this,{get:function(e,i,r){return typeof e[i]<"u"?e[i]:e._row.table.componentFunctionBinder.handle("row",e._row,i)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return e?e.getComponent():!1}_getSelf(){return this._row}},Nh=class{constructor(t){return this._cell=t,new Proxy(this,{get:function(e,i,r){return typeof e[i]<"u"?e[i]:e._cell.table.componentFunctionBinder.handle("cell",e._cell,i)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(t){return this._cell.row.getData(t)}getType(){return"cell"}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,e){typeof e>"u"&&(e=!0),this._cell.setValue(t,e)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}},ga=class extends Un{constructor(t,e){super(t.table),this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.column.isRowHeader&&this.element.classList.add("tabulator-row-header")}_configureCell(){var t=this.element,e=this.column.getField(),i={top:"flex-start",bottom:"flex-end",middle:"center"},r={left:"flex-start",right:"flex-end",center:"center"};if(t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems=i[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent=r[this.column.hozAlign]||"")),e&&t.setAttribute("tabulator-field",e),this.column.definition.cssClass){var s=this.column.definition.cssClass.split(" ");s.forEach(a=>{t.classList.add(a)})}this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(t=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value),typeof t){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",t!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,e,i){var r=this.setValueProcessData(t,e,i);r&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.column.definition.cellEdited&&this.column.definition.cellEdited.call(this.table,this.getComponent()),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,e,i){var r=!1;return(this.value!==t||i)&&(r=!0,e&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),r&&this.dispatch("cell-value-changed",this),r}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null,this.dispatch("cell-height",this,"")}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled,this.dispatch("cell-height",this,this.row.heightStyled)}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Nh(this)),this.component}},Dh=class{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(e,i,r){return typeof e[i]<"u"?e[i]:e._column.table.componentFunctionBinder.handle("column",e._column,i)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getTitleDownload(){return this._column.getTitleDownload()}getCells(){var t=[];return this._column.cells.forEach(function(e){t.push(e.getComponent())}),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(e){t.push(e.getComponent())}),t}getParentColumn(){return this._column.getParentComponent()}_getSelf(){return this._column}scrollTo(t,e){return this._column.table.columnManager.scrollToColumn(this._column,t,e)}getTable(){return this._column.table}move(t,e){var i=this._column.table.columnManager.findColumn(t);i?this._column.table.columnManager.moveColumn(this._column,i,e):console.warn("Move Error - No matching column found:",i)}getNextColumn(){var t=this._column.nextColumn();return t?t.getComponent():!1}getPrevColumn(){var t=this._column.prevColumn();return t?t.getComponent():!1}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var e;return t===!0?e=this._column.reinitializeWidth(!0):e=this._column.setWidth(t),this._column.table.columnManager.rerenderColumns(!0),e}},Sv={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,maxInitialWidth:void 0,cssClass:void 0,variableHeight:void 0,headerVertical:void 0,headerHozAlign:void 0,headerWordWrap:!1,editableTitle:void 0},ma=class n extends Un{static defaultOptionList=Sv;constructor(t,e,i){super(e.table),this.definition=t,this.parent=e,this.type="column",this.columns=[],this.cells=[],this.isGroup=!1,this.isRowHeader=i,this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleDownload=null,this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.maxInitialWidth=null,this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((r,s)=>{var a=new n(r,this);this.attachColumn(a)}),this.checkColumnVisibility()):e.registerColumnField(this),this._initialize()}createElement(){var t=document.createElement("div");switch(t.classList.add("tabulator-col"),t.setAttribute("role","columnheader"),t.setAttribute("aria-sort","none"),this.isRowHeader&&t.classList.add("tabulator-row-header"),this.table.options.columnHeaderVertAlign){case"middle":t.style.justifyContent="center";break;case"bottom":t.style.justifyContent="flex-end";break}return t}createGroupElement(){var t=document.createElement("div");return t.classList.add("tabulator-col-group-cols"),t}mapDefinitions(){var t=this.table.options.columnDefaults;if(t)for(let e in t)typeof this.definition[e]>"u"&&(this.definition[e]=t[e]);this.definition=this.table.columnManager.optionsList.generate(n.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(t=>{n.defaultOptionList.indexOf(t)===-1&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",t)})}setField(t){this.field=t,this.fieldStructure=t?this.table.options.nestedFieldSeparator?t.split(this.table.options.nestedFieldSeparator):[t]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(t){this.parent.registerColumnPosition(t)}registerColumnField(t){this.parent.registerColumnField(t)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(t){t.reRegisterPosition()}):this.registerColumnPosition(this)}_initialize(){for(var t=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);t.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),t.headerVertical==="flip"&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.dispatch("column-init",this)}_buildColumnHeader(){var t=this.definition;if(this.dispatch("column-layout",this),typeof t.visible<"u"&&(t.visible?this.show(!0):this.hide(!0)),t.cssClass){var e=t.cssClass.split(" ");e.forEach(i=>{this.element.classList.add(i)})}t.field&&this.element.setAttribute("tabulator-field",t.field),this.setMinWidth(parseInt(t.minWidth)),t.maxInitialWidth&&(this.maxInitialWidth=parseInt(t.maxInitialWidth)),t.maxWidth&&this.setMaxWidth(parseInt(t.maxWidth)),this.reinitializeWidth(),this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var t=document.createElement("div");return t.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),t.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),t}_buildColumnHeaderTitle(){var t=this.definition,e=document.createElement("div");if(e.classList.add("tabulator-col-title"),t.headerWordWrap&&e.classList.add("tabulator-col-title-wrap"),t.editableTitle){var i=document.createElement("input");i.classList.add("tabulator-title-editor"),i.addEventListener("click",r=>{r.stopPropagation(),i.focus()}),i.addEventListener("mousedown",r=>{r.stopPropagation()}),i.addEventListener("change",()=>{t.title=i.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),e.appendChild(i),t.field?this.langBind("columns|"+t.field,r=>{i.value=r||t.title||"&nbsp;"}):i.value=t.title||"&nbsp;"}else t.field?this.langBind("columns|"+t.field,r=>{this._formatColumnHeaderTitle(e,r||t.title||"&nbsp;")}):this._formatColumnHeaderTitle(e,t.title||"&nbsp;");return e}_formatColumnHeaderTitle(t,e){var i=this.chain("column-format",[this,e,t],null,()=>e);switch(typeof i){case"object":i instanceof Node?t.appendChild(i):(t.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",i));break;case"undefined":t.innerHTML="";break;default:t.innerHTML=i}}_buildGroupHeader(){if(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass){var t=this.definition.cssClass.split(" ");t.forEach(e=>{this.element.classList.add(e)})}this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(t){return t[this.field]}_getNestedData(t){var e=t,i=this.fieldStructure,r=i.length,s;for(let a=0;a<r&&(e=e[i[a]],s=e,!!e);a++);return s}_setFlatData(t,e){this.field&&(t[this.field]=e)}_setNestedData(t,e){var i=t,r=this.fieldStructure,s=r.length;for(let a=0;a<s;a++)if(a==s-1)i[r[a]]=e;else{if(!i[r[a]])if(typeof e<"u")i[r[a]]={};else break;i=i[r[a]]}}attachColumn(t){this.groupElement?(this.columns.push(t),this.groupElement.appendChild(t.getElement()),t.columnRendered()):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(t,e){var i=this.parent.isGroup?this.parent.getGroupElement().clientHeight:e||this.parent.getHeadersElement().clientHeight;this.element.style.height=i+"px",this.dispatch("column-height",this,this.element.style.height),this.isGroup&&(this.groupElement.style.minHeight=i-this.contentElement.offsetHeight+"px"),this.columns.forEach(function(r){r.verticalAlign(t)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(t){t.clearVerticalAlign()}),this.dispatch("column-height",this,"")}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getTitleDownload(){return this.titleDownload}getFirstColumn(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this}getLastColumn(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this}getColumns(t){var e=[];return t?this.columns.forEach(i=>{e.push(i),e=e.concat(i.getColumns(!0))}):e=this.columns,e}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(t){var e=[];return this.isGroup&&t&&(this.columns.forEach(function(i){e.push(i.getDefinition(!0))}),this.definition.columns=e),this.definition}checkColumnVisibility(){var t=!1;this.columns.forEach(function(e){e.visible&&(t=!0)}),t?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(t,e){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(i){i.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,e),t||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}hide(t,e){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(i){i.hide()}),this.dispatch("column-hide",this,e),t||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}matchChildWidths(){var t=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(e){e.visible&&(t+=e.getWidth())}),this.contentElement.style.maxWidth=t-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(t){var e=this.columns.indexOf(t);e>-1&&this.columns.splice(e,1),this.columns.length||this.delete()}setWidth(t){this.widthFixed=!0,this.setWidthActual(t)}setWidthActual(t){isNaN(t)&&(t=Math.floor(this.table.element.clientWidth/100*parseInt(t))),t=Math.max(this.minWidth,t),this.maxWidth&&(t=Math.min(this.maxWidth,t)),this.width=t,this.widthStyled=t?t+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(e){e.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this),this.subscribedExternal("columnWidth")&&this.dispatchExternal("columnWidth",this.getComponent())}checkCellHeights(){var t=[];this.cells.forEach(function(e){e.row.heightInitialized&&(e.row.getElement().offsetParent!==null?(t.push(e.row),e.row.clearCellHeight()):e.row.heightInitialized=!1)}),t.forEach(function(e){e.calcHeight()}),t.forEach(function(e){e.setCellHeight()})}getWidth(){var t=0;return this.isGroup?this.columns.forEach(function(e){e.visible&&(t+=e.getWidth())}):t=this.width,t}getLeftOffset(){var t=this.element.offsetLeft;return this.parent.isGroup&&(t+=this.parent.getLeftOffset()),t}getHeight(){return Math.ceil(this.element.getBoundingClientRect().height)}setMinWidth(t){this.maxWidth&&t>this.maxWidth&&(t=this.maxWidth,console.warn("the minWidth ("+t+"px) for column '"+this.field+"' cannot be bigger that its maxWidth ("+this.maxWidthStyled+")")),this.minWidth=t,this.minWidthStyled=t?t+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(e){e.setMinWidth()})}setMaxWidth(t){this.minWidth&&t<this.minWidth&&(t=this.minWidth,console.warn("the maxWidth ("+t+"px) for column '"+this.field+"' cannot be smaller that its minWidth ("+this.minWidthStyled+")")),this.maxWidth=t,this.maxWidthStyled=t?t+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(e){e.setMaxWidth()})}delete(){return new Promise((t,e)=>{this.isGroup&&this.columns.forEach(function(r){r.delete()}),this.dispatch("column-delete",this);var i=this.cells.length;for(let r=0;r<i;r++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.rerenderColumns(!0),this.dispatch("column-deleted",this),t()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered(),this.dispatch("column-rendered",this)}generateCell(t){var e=new ga(this,t);return this.cells.push(e),e}nextColumn(){var t=this.table.columnManager.findColumnIndex(this);return t>-1?this._nextVisibleColumn(t+1):!1}_nextVisibleColumn(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._nextVisibleColumn(t+1)}prevColumn(){var t=this.table.columnManager.findColumnIndex(this);return t>-1?this._prevVisibleColumn(t-1):!1}_prevVisibleColumn(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._prevVisibleColumn(t-1)}reinitializeWidth(t){this.widthFixed=!1,typeof this.definition.width<"u"&&!t&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(t),this.dispatch("column-width-fit-after",this)}fitToData(t){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(r=>{r.clearWidth()}));var e=this.element.offsetWidth;if((!this.width||!this.widthFixed)&&(this.cells.forEach(r=>{var s=r.getWidth();s>e&&(e=s)}),e)){var i=e+1;this.maxInitialWidth&&!t&&(i=Math.min(i,this.maxInitialWidth)),this.setWidthActual(i)}}}updateDefinition(t){var e;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(e=Object.assign({},this.getDefinition()),e=Object.assign(e,t),this.table.columnManager.addColumn(e,!1,this).then(i=>(e.field==this.field&&(this.field=!1),this.delete().then(()=>i.getComponent()))))}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}getComponent(){return this.component||(this.component=new Dh(this)),this.component}getPosition(){return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this)+1}getParentComponent(){return this.parent instanceof n?this.parent.getComponent():!1}},rl=class{constructor(t){return this._row=t,new Proxy(this,{get:function(e,i,r){return typeof e[i]<"u"?e[i]:e._row.table.componentFunctionBinder.handle("row",e._row,i)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return e?e.getComponent():!1}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(){return this._row.getPosition()}watchPosition(t){return this._row.watchPosition(t)}delete(){return this._row.delete()}scrollTo(t,e){return this._row.table.rowManager.scrollToRow(this._row,t,e)}move(t,e){this._row.moveToRow(t,e)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t&&t.getComponent()}getPrevRow(){var t=this._row.prevRow();return t&&t.getComponent()}},ts=class extends Un{constructor(t,e,i="row"){super(e.table),this.parent=e,this.data={},this.type=i,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.position=0,this.positionWatchers=[],this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t,e){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.initialized=!0,this.table.columnManager.renderer.renderRowCells(this,e),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this,e)}rendered(){this.cells.forEach(t=>{t.cellRendered()})}reinitializeHeight(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)}deinitialize(){this.initialized=!1}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var e=0,i=0;this.table.options.rowHeight?this.height=this.table.options.rowHeight:(i=this.calcMinHeight(),e=this.calcMaxHeight(),t?this.height=Math.max(e,i):this.height=this.manualHeight?this.height:Math.max(e,i)),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}calcMinHeight(){return this.table.options.resizableRows?this.element.clientHeight:0}calcMaxHeight(){var t=0;return this.cells.forEach(function(e){var i=e.getHeight();i>t&&(t=i)}),t}setCellHeight(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(t){t.clearHeight()})}normalizeHeight(t){t&&!this.table.options.rowHeight&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight,this.subscribedExternal("rowHeight")&&this.dispatchExternal("rowHeight",this.getComponent()))}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var e=this.element&&Ir.elVisible(this.element),i={},r;return new Promise((s,a)=>{typeof t=="string"&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(i=Object.assign(i,this.data),i=Object.assign(i,t)),r=this.chain("row-data-changing",[this,i,t],null,t);for(let o in r)this.data[o]=r[o];this.dispatch("row-data-save-after",this);for(let o in t)this.table.columnManager.getColumnsByFieldRoot(o).forEach(c=>{let h=this.getCell(c.getField());if(h){let d=c.getFieldValue(r);h.getValue()!==d&&(h.setValueProcessData(d),e&&h.cellRendered())}});e?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,e,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),s()})}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){var e=!1;return t=this.table.columnManager.findColumn(t),!this.initialized&&this.cells.length===0&&this.generateCells(),e=this.cells.find(function(i){return i.column===t}),e}getCellIndex(t){return this.cells.findIndex(function(e){return e===t})}findCell(t){return this.cells.find(e=>e.element===t)}getCells(){return!this.initialized&&this.cells.length===0&&this.generateCells(),this.cells}nextRow(){var t=this.table.rowManager.nextDisplayRow(this,!0);return t||!1}prevRow(){var t=this.table.rowManager.prevDisplayRow(this,!0);return t||!1}moveToRow(t,e){var i=this.table.rowManager.findRow(t);i?(this.table.rowManager.moveRowActual(this,i,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.detachModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detachModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let e=0;e<t;e++)this.cells[0].delete()}wipe(){if(this.detachModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}isDisplayed(){return this.table.rowManager.getDisplayRows().includes(this)}getPosition(){return this.isDisplayed()?this.position:!1}setPosition(t){t!=this.position&&(this.position=t,this.positionWatchers.forEach(e=>{e(this.position)}))}watchPosition(t){this.positionWatchers.push(t),t(this.position)}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new rl(this)),this.component}},eE={avg:function(n,t,e){var i=0,r=typeof e.precision<"u"?e.precision:2;return n.length&&(i=n.reduce(function(s,a){return Number(s)+Number(a)}),i=i/n.length,i=r!==!1?i.toFixed(r):i),parseFloat(i).toString()},max:function(n,t,e){var i=null,r=typeof e.precision<"u"?e.precision:!1;return n.forEach(function(s){s=Number(s),(s>i||i===null)&&(i=s)}),i!==null?r!==!1?i.toFixed(r):i:""},min:function(n,t,e){var i=null,r=typeof e.precision<"u"?e.precision:!1;return n.forEach(function(s){s=Number(s),(s<i||i===null)&&(i=s)}),i!==null?r!==!1?i.toFixed(r):i:""},sum:function(n,t,e){var i=0,r=typeof e.precision<"u"?e.precision:!1;return n.length&&n.forEach(function(s){s=Number(s),i+=isNaN(s)?0:Number(s)}),r!==!1?i.toFixed(r):i},concat:function(n,t,e){var i=0;return n.length&&(i=n.reduce(function(r,s){return String(r)+String(s)})),i},count:function(n,t,e){var i=0;return n.length&&n.forEach(function(r){r&&i++}),i},unique:function(n,t,e){var i=n.filter((r,s)=>(n||r===0)&&n.indexOf(r)===s);return i.length}},Cd=class n extends xi{static moduleName="columnCalcs";static calculations=eE;constructor(t){super(t),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.blocked=!1,this.recalcAfterBlock=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-calcs-holder"),t}initialize(){this.genColumn=new ma({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refreshed",this.recalcActiveRowsRefresh.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this)),this.subscribe("redraw-blocked",this.blockRedraw.bind(this)),this.subscribe("redraw-restored",this.restoreRedraw.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this)),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}tableRedraw(t){this.recalc(this.table.rowManager.activeRows),t&&this.redraw()}blockRedraw(){this.blocked=!0,this.recalcAfterBlock=!1}restoreRedraw(){this.blocked=!1,this.recalcAfterBlock&&(this.recalcAfterBlock=!1,this.recalcActiveRowsRefresh())}userRecalc(){this.recalc(this.table.rowManager.activeRows)}blockCheck(){return this.blocked&&(this.recalcAfterBlock=!0),this.blocked}visibleRows(t,e){return this.topRow&&e.unshift(this.topRow),this.botRow&&e.push(this.botRow),e}rowsUpdated(t){this.table.options.groupBy?this.recalcRowGroup(t):this.recalcActiveRows()}recalcActiveRowsRefresh(){this.table.options.groupBy&&this.table.options.dataTreeStartExpanded&&this.table.options.dataTree?this.recalcAll():this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(t){(t.column.definition.topCalc||t.column.definition.bottomCalc)&&(this.table.options.groupBy?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.recalcActiveRows(),this.table.options.columnCalcs!="table"&&this.recalcRowGroup(t.row)):this.recalcActiveRows())}initializeColumnCheck(t){(t.definition.topCalc||t.definition.bottomCalc)&&this.initializeColumn(t)}initializeColumn(t){var e=t.definition,i={topCalcParams:e.topCalcParams||{},botCalcParams:e.bottomCalcParams||{}};if(e.topCalc){switch(typeof e.topCalc){case"string":n.calculations[e.topCalc]?i.topCalc=n.calculations[e.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.topCalc);break;case"function":i.topCalc=e.topCalc;break}i.topCalc&&(t.modules.columnCalcs=i,this.topCalcs.push(t),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(e.bottomCalc){switch(typeof e.bottomCalc){case"string":n.calculations[e.bottomCalc]?i.botCalc=n.calculations[e.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.bottomCalc);break;case"function":i.botCalc=e.bottomCalc;break}i.botCalc&&(t.modules.columnCalcs=i,this.botCalcs.push(t),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var t=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),t=!0),this.botInitialized&&(this.botInitialized=!1,this.footerRemove(this.botElement),t=!0),t&&this.table.rowManager.adjustTableSize()}reinitializeCalcs(){this.topCalcs.length&&this.initializeTopRow(),this.botCalcs.length&&this.initializeBottomRow()}initializeTopRow(){var t=document.createDocumentFragment();this.topInitialized||(t.appendChild(document.createElement("br")),t.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(t,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.footerPrepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(t){this.botInitialized&&this.botRow&&(this.botElement.scrollLeft=t)}recalc(t){var e,i;if(!this.blockCheck()&&(this.topInitialized||this.botInitialized)){if(e=this.rowsToData(t),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),i=this.generateRow("top",e),this.topRow=i;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(i.getElement()),i.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),i=this.generateRow("bottom",e),this.botRow=i;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(i.getElement()),i.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(t){this.recalcGroup(this.table.modules.groupRows.getRowGroup(t))}recalcAll(){if((this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalcActiveRows(),this.table.options.groupBy&&this.table.options.columnCalcs!=="table")){var t=this.table.modules.groupRows.getChildGroups();t.forEach(e=>{this.recalcGroup(e)})}}recalcGroup(t){var e,i;this.blockCheck()||t&&t.calcs&&(t.calcs.bottom&&(e=this.rowsToData(t.rows),i=this.generateRowData("bottom",e),t.calcs.bottom.updateData(i),t.calcs.bottom.reinitialize()),t.calcs.top&&(e=this.rowsToData(t.rows),i=this.generateRowData("top",e),t.calcs.top.updateData(i),t.calcs.top.reinitialize()))}generateTopRow(t){return this.generateRow("top",this.rowsToData(t))}generateBottomRow(t){return this.generateRow("bottom",this.rowsToData(t))}rowsToData(t){var e=[],i=this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs,r=this.table.modules.dataTree;return t.forEach(s=>{e.push(s.getData()),i&&s.modules.dataTree?.open&&this.rowsToData(r.getFilteredTreeChildren(s)).forEach(a=>{e.push(s)})}),e}generateRow(t,e){var i=this.generateRowData(t,e),r;return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),r=new ts(i,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),r.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+t),r.component=!1,r.getComponent=()=>(r.component||(r.component=new Ed(r)),r.component),r.generateCells=()=>{var s=[];this.table.columnManager.columnsByIndex.forEach(a=>{this.genColumn.setField(a.getField()),this.genColumn.hozAlign=a.hozAlign,a.definition[t+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.getFormatter(a.definition[t+"CalcFormatter"]),params:a.definition[t+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=a.definition.cssClass;var o=new ga(this.genColumn,r);o.getElement(),o.column=a,o.setWidth(),a.cells.push(o),s.push(o),a.visible||o.hide()}),r.cells=s},r}generateRowData(t,e){var i={},r=t=="top"?this.topCalcs:this.botCalcs,s=t=="top"?"topCalc":"botCalc",a,o;return r.forEach(function(l){var c=[];l.modules.columnCalcs&&l.modules.columnCalcs[s]&&(e.forEach(function(h){c.push(l.getFieldValue(h))}),o=s+"Params",a=typeof l.modules.columnCalcs[o]=="function"?l.modules.columnCalcs[o](c,e):l.modules.columnCalcs[o],l.setFieldValue(i,l.modules.columnCalcs[s](c,e,a)))}),i}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var t={},e;return this.table.options.groupBy&&this.table.modExists("groupRows")?(e=this.table.modules.groupRows.getGroups(!0),e.forEach(i=>{t[i.getKey()]=this.getGroupResults(i)})):t={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},t}getGroupResults(t){var e=t._getSelf(),i=t.getSubGroups(),r={},s={};return i.forEach(a=>{r[a.getKey()]=this.getGroupResults(a)}),s={top:e.calcs.top?e.calcs.top.getData():{},bottom:e.calcs.bottom?e.calcs.bottom.getData():{},groups:r},s}adjustForScrollbar(t){this.botRow&&(this.table.rtl?this.botElement.style.paddingLeft=t+"px":this.botElement.style.paddingRight=t+"px")}},Md=class extends xi{static moduleName="dataTree";constructor(t){super(t),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this)),this.registerComponentFunction("row","isTreeExpanded",this.isRowExpanded.bind(this))}initialize(){if(this.table.options.dataTree){var t=null,e=this.table.options;switch(this.field=e.dataTreeChildField,this.indent=e.dataTreeChildIndent,this.options("movableRows")&&console.warn("The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior"),e.dataTreeBranchElement?e.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof e.dataTreeBranchElement=="string"?(t=document.createElement("div"),t.innerHTML=e.dataTreeBranchElement,this.branchEl=t.firstChild):this.branchEl=e.dataTreeBranchElement:(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch-empty")),e.dataTreeCollapseElement?typeof e.dataTreeCollapseElement=="string"?(t=document.createElement("div"),t.innerHTML=e.dataTreeCollapseElement,this.collapseEl=t.firstChild):this.collapseEl=e.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),e.dataTreeExpandElement?typeof e.dataTreeExpandElement=="string"?(t=document.createElement("div"),t.innerHTML=e.dataTreeExpandElement,this.expandEl=t.firstChild):this.expandEl=e.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof e.dataTreeStartExpanded){case"boolean":this.startOpen=function(i,r){return e.dataTreeStartExpanded};break;case"function":this.startOpen=e.dataTreeStartExpanded;break;default:this.startOpen=function(i,r){return e.dataTreeStartExpanded[r]};break}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("cell-value-updated",this.cellValueChanged.bind(this)),this.subscribe("edit-cancelled",this.cellValueChanged.bind(this)),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.subscribe("table-built",this.initializeElementField.bind(this)),this.subscribe("table-redrawing",this.tableRedrawing.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}tableRedrawing(t){var e;t&&(e=this.table.rowManager.getRows(),e.forEach(i=>{this.reinitializeRowChildren(i)}))}initializeElementField(){var t=this.table.columnManager.getFirstVisibleColumn();this.elementField=this.table.options.dataTreeElementColumn||(t?t.field:!1)}getRowChildren(t){return this.getTreeChildren(t,!0)}columnMoving(){var t=[];return this.table.rowManager.rows.forEach(e=>{t=t.concat(this.getTreeChildren(e,!1,!0))}),t}rowDataChanged(t,e,i){this.redrawNeeded(i)&&(this.initializeRow(t),e&&(this.layoutRow(t),this.refreshData(!0)))}cellValueChanged(t){var e=t.column.getField();e===this.elementField&&this.layoutRow(t.row)}initializeRow(t){var e=t.getData()[this.field],i=Array.isArray(e),r=i||!i&&typeof e=="object"&&e!==null;!r&&t.modules.dataTree&&t.modules.dataTree.branchEl&&t.modules.dataTree.branchEl.parentNode.removeChild(t.modules.dataTree.branchEl),!r&&t.modules.dataTree&&t.modules.dataTree.controlEl&&t.modules.dataTree.controlEl.parentNode.removeChild(t.modules.dataTree.controlEl),t.modules.dataTree={index:t.modules.dataTree?t.modules.dataTree.index:0,open:r?t.modules.dataTree?t.modules.dataTree.open:this.startOpen(t.getComponent(),0):!1,controlEl:t.modules.dataTree&&r?t.modules.dataTree.controlEl:!1,branchEl:t.modules.dataTree&&r?t.modules.dataTree.branchEl:!1,parent:t.modules.dataTree?t.modules.dataTree.parent:!1,children:r}}reinitializeRowChildren(t){var e=this.getTreeChildren(t,!1,!0);e.forEach(function(i){i.reinitialize(!0)})}layoutRow(t){var e=this.elementField?t.getCell(this.elementField):t.getCells()[0],i=e.getElement(),r=t.modules.dataTree;r.branchEl&&(r.branchEl.parentNode&&r.branchEl.parentNode.removeChild(r.branchEl),r.branchEl=!1),r.controlEl&&(r.controlEl.parentNode&&r.controlEl.parentNode.removeChild(r.controlEl),r.controlEl=!1),this.generateControlElement(t,i),t.getElement().classList.add("tabulator-tree-level-"+r.index),r.index&&(this.branchEl?(r.branchEl=this.branchEl.cloneNode(!0),i.insertBefore(r.branchEl,i.firstChild),this.table.rtl?r.branchEl.style.marginRight=(r.branchEl.offsetWidth+r.branchEl.style.marginLeft)*(r.index-1)+r.index*this.indent+"px":r.branchEl.style.marginLeft=(r.branchEl.offsetWidth+r.branchEl.style.marginRight)*(r.index-1)+r.index*this.indent+"px"):this.table.rtl?i.style.paddingRight=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-right"))+r.index*this.indent+"px":i.style.paddingLeft=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-left"))+r.index*this.indent+"px")}generateControlElement(t,e){var i=t.modules.dataTree,r=i.controlEl;e=e||t.getCells()[0].getElement(),i.children!==!1&&(i.open?(i.controlEl=this.collapseEl.cloneNode(!0),i.controlEl.addEventListener("click",s=>{s.stopPropagation(),this.collapseRow(t)})):(i.controlEl=this.expandEl.cloneNode(!0),i.controlEl.addEventListener("click",s=>{s.stopPropagation(),this.expandRow(t)})),i.controlEl.addEventListener("mousedown",s=>{s.stopPropagation()}),r&&r.parentNode===e?r.parentNode.replaceChild(i.controlEl,r):e.insertBefore(i.controlEl,e.firstChild))}getRows(t){var e=[];return t.forEach((i,r)=>{var s,a;e.push(i),i instanceof ts&&(i.create(),s=i.modules.dataTree,!s.index&&s.children!==!1&&(a=this.getChildren(i,!1,!0),a.forEach(o=>{o.create(),e.push(o)})))}),e}getChildren(t,e,i){var r=t.modules.dataTree,s=[],a=[];return r.children!==!1&&(r.open||e)&&(Array.isArray(r.children)||(r.children=this.generateChildren(t)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?s=this.table.modules.filter.filter(r.children):s=r.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(s,i),s.forEach(o=>{a.push(o);var l=this.getChildren(o,!1,!0);l.forEach(c=>{a.push(c)})})),a}generateChildren(t){var e=[],i=t.getData()[this.field];return Array.isArray(i)||(i=[i]),i.forEach(r=>{var s=new ts(r||{},this.table.rowManager);s.create(),s.modules.dataTree.index=t.modules.dataTree.index+1,s.modules.dataTree.parent=t,s.modules.dataTree.children&&(s.modules.dataTree.open=this.startOpen(s.getComponent(),s.modules.dataTree.index)),e.push(s)}),e}expandRow(t,e){var i=t.modules.dataTree;i.children!==!1&&(i.open=!0,t.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",t.getComponent(),t.modules.dataTree.index))}collapseRow(t){var e=t.modules.dataTree;e.children!==!1&&(e.open=!1,t.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",t.getComponent(),t.modules.dataTree.index))}toggleRow(t){var e=t.modules.dataTree;e.children!==!1&&(e.open?this.collapseRow(t):this.expandRow(t))}isRowExpanded(t){return t.modules.dataTree.open}getTreeParent(t){return t.modules.dataTree.parent?t.modules.dataTree.parent.getComponent():!1}getTreeParentRoot(t){return t.modules.dataTree&&t.modules.dataTree.parent?this.getTreeParentRoot(t.modules.dataTree.parent):t}getFilteredTreeChildren(t){var e=t.modules.dataTree,i=[],r;return e.children&&(Array.isArray(e.children)||(e.children=this.generateChildren(t)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?r=this.table.modules.filter.filter(e.children):r=e.children,r.forEach(s=>{s instanceof ts&&i.push(s)})),i}rowDelete(t){var e=t.modules.dataTree.parent,i;e&&(i=this.findChildIndex(t,e),i!==!1&&e.data[this.field].splice(i,1),e.data[this.field].length||delete e.data[this.field],this.initializeRow(e),this.layoutRow(e)),this.refreshData(!0)}addTreeChildRow(t,e,i,r){var s=!1;typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(t.data[this.field])||(t.data[this.field]=[],t.modules.dataTree.open=this.startOpen(t.getComponent(),t.modules.dataTree.index)),typeof r<"u"&&(s=this.findChildIndex(r,t),s!==!1&&t.data[this.field].splice(i?s:s+1,0,e)),s===!1&&(i?t.data[this.field].unshift(e):t.data[this.field].push(e)),this.initializeRow(t),this.layoutRow(t),this.refreshData(!0)}findChildIndex(t,e){var i=!1;return typeof t=="object"?t instanceof ts?i=t.data:t instanceof rl?i=t._getSelf().data:typeof HTMLElement<"u"&&t instanceof HTMLElement?e.modules.dataTree&&(i=e.modules.dataTree.children.find(r=>r instanceof ts?r.element===t:!1),i&&(i=i.data)):t===null&&(i=!1):typeof t>"u"?i=!1:i=e.data[this.field].find(r=>r.data[this.table.options.index]==t),i&&(Array.isArray(e.data[this.field])&&(i=e.data[this.field].indexOf(i)),i==-1&&(i=!1)),i}getTreeChildren(t,e,i){var r=t.modules.dataTree,s=[];return r&&r.children&&(Array.isArray(r.children)||(r.children=this.generateChildren(t)),r.children.forEach(a=>{a instanceof ts&&(s.push(e?a.getComponent():a),i&&this.getTreeChildren(a,e,i).forEach(o=>{s.push(o)}))})),s}getChildField(){return this.field}redrawNeeded(t){return(this.field?typeof t[this.field]<"u":!1)||(this.elementField?typeof t[this.elementField]<"u":!1)}};function iE(n,t={},e){var i=t.delimiter?t.delimiter:",",r=[],s=[];n.forEach(a=>{var o=[];switch(a.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":a.columns.forEach((l,c)=>{l&&l.depth===1&&(s[c]=typeof l.value>"u"||l.value===null?"":'"'+String(l.value).split('"').join('""')+'"')});break;case"row":a.columns.forEach(l=>{if(l){switch(typeof l.value){case"object":l.value=l.value!==null?JSON.stringify(l.value):"";break;case"undefined":l.value="";break}o.push('"'+String(l.value).split('"').join('""')+'"')}}),r.push(o.join(i));break}}),s.length&&r.unshift(s.join(i)),r=r.join(`
`),t.bom&&(r="\uFEFF"+r),e(r,"text/csv")}function rE(n,t,e){var i=[];n.forEach(r=>{var s={};switch(r.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":r.columns.forEach(a=>{a&&(s[a.component.getTitleDownload()||a.component.getField()]=a.value)}),i.push(s);break}}),i=JSON.stringify(i,null,"	"),e(i,"application/json")}function nE(n,t={},e){var i=[],r=[],s={},a=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},o=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},l=t.jsPDF||{},c=t.title?t.title:"";l.orientation||(l.orientation=t.orientation||"landscape"),l.unit||(l.unit="pt"),n.forEach(p=>{switch(p.type){case"header":i.push(h(p));break;case"group":r.push(h(p,a));break;case"calc":r.push(h(p,o));break;case"row":r.push(h(p));break}});function h(p,g){var m=[];return p.columns.forEach(_=>{var v;if(_){switch(typeof _.value){case"object":_.value=_.value!==null?JSON.stringify(_.value):"";break;case"undefined":_.value="";break}v={content:_.value,colSpan:_.width,rowSpan:_.height},g&&(v.styles=g),m.push(v)}}),m}var d=new jspdf.jsPDF(l);t.autoTable&&(typeof t.autoTable=="function"?s=t.autoTable(d)||{}:s=t.autoTable),c&&(s.didDrawPage=function(p){d.text(c,40,30)}),s.head=i,s.body=r,d.autoTable(s),t.documentProcessing&&t.documentProcessing(d),e(d.output("arraybuffer"),"application/pdf")}function sE(n,t,e){var i=this,r=t.sheetName||"Sheet1",s=XLSX.utils.book_new(),a=new Un(this),o="compress"in t?t.compress:!0,l=t.writeOptions||{bookType:"xlsx",bookSST:!0,compression:o},c;l.type="binary",s.SheetNames=[],s.Sheets={};function h(){var g=[],m=[],_={},v={s:{c:0,r:0},e:{c:n[0]?n[0].columns.reduce((x,S)=>x+(S&&S.width?S.width:1),0):0,r:n.length}};return n.forEach((x,S)=>{var O=[];x.columns.forEach(function(D,U){D?(O.push(!(D.value instanceof Date)&&typeof D.value=="object"?JSON.stringify(D.value):D.value),(D.width>1||D.height>-1)&&(D.height>1||D.width>1)&&m.push({s:{r:S,c:U},e:{r:S+D.height-1,c:U+D.width-1}})):O.push("")}),g.push(O)}),XLSX.utils.sheet_add_aoa(_,g),_["!ref"]=XLSX.utils.encode_range(v),m.length&&(_["!merges"]=m),_}if(t.sheetOnly){e(h());return}if(t.sheets)for(var d in t.sheets)t.sheets[d]===!0?(s.SheetNames.push(d),s.Sheets[d]=h()):(s.SheetNames.push(d),a.commsSend(t.sheets[d],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:i.active,intercept:function(g){s.Sheets[d]=g}}));else s.SheetNames.push(r),s.Sheets[r]=h();t.documentProcessing&&(s=t.documentProcessing(s));function p(g){for(var m=new ArrayBuffer(g.length),_=new Uint8Array(m),v=0;v!=g.length;++v)_[v]=g.charCodeAt(v)&255;return m}c=XLSX.write(s,l),e(p(c),"application/octet-stream")}function oE(n,t,e){this.modExists("export",!0)&&e(this.modules.export.generateHTMLTable(n),"text/html")}function aE(n,t,e){let i=[];n.forEach(r=>{let s={};switch(r.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":r.columns.forEach(a=>{a&&(s[a.component.getTitleDownload()||a.component.getField()]=a.value)}),i.push(JSON.stringify(s));break}}),e(i.join(`
`),"application/x-ndjson")}var lE={csv:iE,json:rE,jsonLines:aE,pdf:nE,xlsx:sE,html:oE},Sd=class n extends xi{static moduleName="download";static downloaders=lE;constructor(t){super(t),this.registerTableOption("downloadEncoder",function(e,i){return new Blob([e],{type:i})}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.deprecatedOptionsCheck(),this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}deprecatedOptionsCheck(){}downloadToTab(t,e,i,r){this.download(t,e,i,r,!0)}download(t,e,i,r,s){var a=!1;function o(c,h){s?s===!0?this.triggerDownload(c,h,t,e,!0):s(c):this.triggerDownload(c,h,t,e)}if(typeof t=="function"?a=t:n.downloaders[t]?a=n.downloaders[t]:console.warn("Download Error - No such download type found: ",t),a){var l=this.generateExportList(r);a.call(this.table,l,i||{},o.bind(this))}}generateExportList(t){var e=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,t||this.table.options.downloadRowRange,"download"),i=this.table.options.groupHeaderDownload;return i&&!Array.isArray(i)&&(i=[i]),e.forEach(r=>{var s;r.type==="group"&&(s=r.columns[0],i&&i[r.indent]&&(s.value=i[r.indent](s.value,r.component._group.getRowCount(),r.component._group.getData(),r.component)))}),e}triggerDownload(t,e,i,r,s){var a=document.createElement("a"),o=this.table.options.downloadEncoder(t,e);o&&(s?window.open(window.URL.createObjectURL(o)):(r=r||"Tabulator."+(typeof i=="function"?"txt":i),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(o,r):(a.setAttribute("href",window.URL.createObjectURL(o)),a.setAttribute("download",r),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a))),this.dispatchExternal("downloadComplete"))}commsReceived(t,e,i){switch(e){case"intercept":this.download(i.type,"",i.options,i.active,i.intercept);break}}};function Hh(n,t){var e=t.mask,i=typeof t.maskLetterChar<"u"?t.maskLetterChar:"A",r=typeof t.maskNumberChar<"u"?t.maskNumberChar:"9",s=typeof t.maskWildcardChar<"u"?t.maskWildcardChar:"*";function a(o){var l=e[o];typeof l<"u"&&l!==s&&l!==i&&l!==r&&(n.value=n.value+""+l,a(o+1))}n.addEventListener("keydown",o=>{var l=n.value.length,c=o.key;if(o.keyCode>46&&!o.ctrlKey&&!o.metaKey){if(l>=e.length)return o.preventDefault(),o.stopPropagation(),!1;switch(e[l]){case i:if(c.toUpperCase()==c.toLowerCase())return o.preventDefault(),o.stopPropagation(),!1;break;case r:if(isNaN(c))return o.preventDefault(),o.stopPropagation(),!1;break;case s:break;default:if(c!==e[l])return o.preventDefault(),o.stopPropagation(),!1}}}),n.addEventListener("keyup",o=>{o.keyCode>46&&t.maskAutoFill&&a(n.value.length)}),n.placeholder||(n.placeholder=e),t.maskAutoFill&&a(n.value.length)}function uE(n,t,e,i,r){var s=n.getValue(),a=document.createElement("input");if(a.setAttribute("type",r.search?"search":"text"),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let l in r.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),a.setAttribute(l,a.getAttribute(l)+r.elementAttributes["+"+l])):a.setAttribute(l,r.elementAttributes[l]);a.value=typeof s<"u"?s:"",t(function(){n.getType()==="cell"&&(a.focus({preventScroll:!0}),a.style.height="100%",r.selectContents&&a.select())});function o(l){(s===null||typeof s>"u")&&a.value!==""||a.value!==s?e(a.value)&&(s=a.value):i()}return a.addEventListener("change",o),a.addEventListener("blur",o),a.addEventListener("keydown",function(l){switch(l.keyCode){case 13:o();break;case 27:i();break;case 35:case 36:l.stopPropagation();break}}),r.mask&&Hh(a,r),a}function hE(n,t,e,i,r){var s=n.getValue(),a=r.verticalNavigation||"hybrid",o=String(s!==null&&typeof s<"u"?s:""),l=document.createElement("textarea"),c=0;if(l.style.display="block",l.style.padding="2px",l.style.height="100%",l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.resize="none",r.elementAttributes&&typeof r.elementAttributes=="object")for(let d in r.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),l.setAttribute(d,l.getAttribute(d)+r.elementAttributes["+"+d])):l.setAttribute(d,r.elementAttributes[d]);l.value=o,t(function(){n.getType()==="cell"&&(l.focus({preventScroll:!0}),l.style.height="100%",l.scrollHeight,l.style.height=l.scrollHeight+"px",n.getRow().normalizeHeight(),r.selectContents&&l.select())});function h(d){(s===null||typeof s>"u")&&l.value!==""||l.value!==s?(e(l.value)&&(s=l.value),setTimeout(function(){n.getRow().normalizeHeight()},300)):i()}return l.addEventListener("change",h),l.addEventListener("blur",h),l.addEventListener("keyup",function(){l.style.height="";var d=l.scrollHeight;l.style.height=d+"px",d!=c&&(c=d,n.getRow().normalizeHeight())}),l.addEventListener("keydown",function(d){switch(d.keyCode){case 13:d.shiftKey&&r.shiftEnterSubmit&&h();break;case 27:i();break;case 38:(a=="editor"||a=="hybrid"&&l.selectionStart)&&(d.stopImmediatePropagation(),d.stopPropagation());break;case 40:(a=="editor"||a=="hybrid"&&l.selectionStart!==l.value.length)&&(d.stopImmediatePropagation(),d.stopPropagation());break;case 35:case 36:d.stopPropagation();break}}),r.mask&&Hh(l,r),l}function cE(n,t,e,i,r){var s=n.getValue(),a=r.verticalNavigation||"editor",o=document.createElement("input");if(o.setAttribute("type","number"),typeof r.max<"u"&&o.setAttribute("max",r.max),typeof r.min<"u"&&o.setAttribute("min",r.min),typeof r.step<"u"&&o.setAttribute("step",r.step),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let h in r.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),o.setAttribute(h,o.getAttribute(h)+r.elementAttributes["+"+h])):o.setAttribute(h,r.elementAttributes[h]);o.value=s;var l=function(h){c()};t(function(){n.getType()==="cell"&&(o.removeEventListener("blur",l),o.focus({preventScroll:!0}),o.style.height="100%",o.addEventListener("blur",l),r.selectContents&&o.select())});function c(){var h=o.value;!isNaN(h)&&h!==""&&(h=Number(h)),h!==s?e(h)&&(s=h):i()}return o.addEventListener("keydown",function(h){switch(h.keyCode){case 13:c();break;case 27:i();break;case 38:case 40:a=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break;case 35:case 36:h.stopPropagation();break}}),r.mask&&Hh(o,r),o}function fE(n,t,e,i,r){var s=n.getValue(),a=document.createElement("input");if(a.setAttribute("type","range"),typeof r.max<"u"&&a.setAttribute("max",r.max),typeof r.min<"u"&&a.setAttribute("min",r.min),typeof r.step<"u"&&a.setAttribute("step",r.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let l in r.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),a.setAttribute(l,a.getAttribute(l)+r.elementAttributes["+"+l])):a.setAttribute(l,r.elementAttributes[l]);a.value=s,t(function(){n.getType()==="cell"&&(a.focus({preventScroll:!0}),a.style.height="100%")});function o(){var l=a.value;!isNaN(l)&&l!==""&&(l=Number(l)),l!=s?e(l)&&(s=l):i()}return a.addEventListener("blur",function(l){o()}),a.addEventListener("keydown",function(l){switch(l.keyCode){case 13:o();break;case 27:i();break}}),a}function dE(n,t,e,i,r){var s=r.format,a=r.verticalNavigation||"editor",o=s?window.DateTime||luxon.DateTime:null,l=n.getValue(),c=document.createElement("input");function h(p){var g;return o.isDateTime(p)?g=p:s==="iso"?g=o.fromISO(String(p)):g=o.fromFormat(String(p),s),g.toFormat("yyyy-MM-dd")}if(c.type="date",c.style.padding="4px",c.style.width="100%",c.style.boxSizing="border-box",r.max&&c.setAttribute("max",s?h(r.max):r.max),r.min&&c.setAttribute("min",s?h(r.min):r.min),r.elementAttributes&&typeof r.elementAttributes=="object")for(let p in r.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),c.setAttribute(p,c.getAttribute(p)+r.elementAttributes["+"+p])):c.setAttribute(p,r.elementAttributes[p]);l=typeof l<"u"?l:"",s&&(o?l=h(l):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),c.value=l,t(function(){n.getType()==="cell"&&(c.focus({preventScroll:!0}),c.style.height="100%",r.selectContents&&c.select())});function d(){var p=c.value,g;if((l===null||typeof l>"u")&&p!==""||p!==l){if(p&&s)switch(g=o.fromFormat(String(p),"yyyy-MM-dd"),s){case!0:p=g;break;case"iso":p=g.toISO();break;default:p=g.toFormat(s)}e(p)&&(l=c.value)}else i()}return c.addEventListener("blur",function(p){(p.relatedTarget||p.rangeParent||p.explicitOriginalTarget!==c)&&d()}),c.addEventListener("keydown",function(p){switch(p.keyCode){case 13:d();break;case 27:i();break;case 35:case 36:p.stopPropagation();break;case 38:case 40:a=="editor"&&(p.stopImmediatePropagation(),p.stopPropagation());break}}),c}function pE(n,t,e,i,r){var s=r.format,a=r.verticalNavigation||"editor",o=s?window.DateTime||luxon.DateTime:null,l,c=n.getValue(),h=document.createElement("input");if(h.type="time",h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let p in r.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),h.setAttribute(p,h.getAttribute(p)+r.elementAttributes["+"+p])):h.setAttribute(p,r.elementAttributes[p]);c=typeof c<"u"?c:"",s&&(o?(o.isDateTime(c)?l=c:s==="iso"?l=o.fromISO(String(c)):l=o.fromFormat(String(c),s),c=l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),h.value=c,t(function(){n.getType()=="cell"&&(h.focus({preventScroll:!0}),h.style.height="100%",r.selectContents&&h.select())});function d(){var p=h.value,g;if((c===null||typeof c>"u")&&p!==""||p!==c){if(p&&s)switch(g=o.fromFormat(String(p),"hh:mm"),s){case!0:p=g;break;case"iso":p=g.toISO();break;default:p=g.toFormat(s)}e(p)&&(c=h.value)}else i()}return h.addEventListener("blur",function(p){(p.relatedTarget||p.rangeParent||p.explicitOriginalTarget!==h)&&d()}),h.addEventListener("keydown",function(p){switch(p.keyCode){case 13:d();break;case 27:i();break;case 35:case 36:p.stopPropagation();break;case 38:case 40:a=="editor"&&(p.stopImmediatePropagation(),p.stopPropagation());break}}),h}function mE(n,t,e,i,r){var s=r.format,a=r.verticalNavigation||"editor",o=s?window.DateTime||luxon.DateTime:null,l,c=n.getValue(),h=document.createElement("input");if(h.type="datetime-local",h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let p in r.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),h.setAttribute(p,h.getAttribute(p)+r.elementAttributes["+"+p])):h.setAttribute(p,r.elementAttributes[p]);c=typeof c<"u"?c:"",s&&(o?(o.isDateTime(c)?l=c:s==="iso"?l=o.fromISO(String(c)):l=o.fromFormat(String(c),s),c=l.toFormat("yyyy-MM-dd")+"T"+l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),h.value=c,t(function(){n.getType()==="cell"&&(h.focus({preventScroll:!0}),h.style.height="100%",r.selectContents&&h.select())});function d(){var p=h.value,g;if((c===null||typeof c>"u")&&p!==""||p!==c){if(p&&s)switch(g=o.fromISO(String(p)),s){case!0:p=g;break;case"iso":p=g.toISO();break;default:p=g.toFormat(s)}e(p)&&(c=h.value)}else i()}return h.addEventListener("blur",function(p){(p.relatedTarget||p.rangeParent||p.explicitOriginalTarget!==h)&&d()}),h.addEventListener("keydown",function(p){switch(p.keyCode){case 13:d();break;case 27:i();break;case 35:case 36:p.stopPropagation();break;case 38:case 40:a=="editor"&&(p.stopImmediatePropagation(),p.stopPropagation());break}}),h}var gE=class{constructor(t,e,i,r,s,a){this.edit=t,this.table=t.table,this.cell=e,this.params=this._initializeParams(a),this.data=[],this.displayItems=[],this.currentItems=[],this.focusedItem=null,this.input=this._createInputElement(),this.listEl=this._createListElement(),this.initialValues=null,this.isFilter=e.getType()==="header",this.filterTimeout=null,this.filtered=!1,this.typing=!1,this.values=[],this.popup=null,this.listIteration=0,this.lastAction="",this.filterTerm="",this.blurable=!0,this.actions={success:r,cancel:s},this._deprecatedOptionsCheck(),this._initializeValue(),i(this._onRendered.bind(this))}_deprecatedOptionsCheck(){}_initializeValue(){var t=this.cell.getValue();typeof t>"u"&&typeof this.params.defaultValue<"u"&&(t=this.params.defaultValue),this.initialValues=this.params.multiselect?t:[t],this.isFilter&&(this.input.value=this.initialValues?this.initialValues.join(","):"",this.headerFilterInitialListGen())}_onRendered(){var t=this.cell.getElement();function e(i){i.stopPropagation()}this.isFilter||(this.input.style.height="100%",this.input.focus({preventScroll:!0})),t.addEventListener("click",e),setTimeout(()=>{t.removeEventListener("click",e)},1e3),this.input.addEventListener("mousedown",this._preventPopupBlur.bind(this))}_createListElement(){var t=document.createElement("div");return t.classList.add("tabulator-edit-list"),t.addEventListener("mousedown",this._preventBlur.bind(this)),t.addEventListener("keydown",this._inputKeyDown.bind(this)),t}_setListWidth(){var t=this.isFilter?this.input:this.cell.getElement();this.listEl.style.minWidth=t.offsetWidth+"px",this.params.maxWidth&&(this.params.maxWidth===!0?this.listEl.style.maxWidth=t.offsetWidth+"px":typeof this.params.maxWidth=="number"?this.listEl.style.maxWidth=this.params.maxWidth+"px":this.listEl.style.maxWidth=this.params.maxWidth)}_createInputElement(){var t=this.params.elementAttributes,e=document.createElement("input");if(e.setAttribute("type",this.params.clearable?"search":"text"),e.style.padding="4px",e.style.width="100%",e.style.boxSizing="border-box",this.params.autocomplete||(e.style.cursor="default",e.style.caretColor="transparent"),t&&typeof t=="object")for(let i in t)i.charAt(0)=="+"?(i=i.slice(1),e.setAttribute(i,e.getAttribute(i)+t["+"+i])):e.setAttribute(i,t[i]);return this.params.mask&&Hh(e,this.params),this._bindInputEvents(e),e}_initializeParams(t){var e=["values","valuesURL","valuesLookup"],i;return t=Object.assign({},t),t.verticalNavigation=t.verticalNavigation||"editor",t.placeholderLoading=typeof t.placeholderLoading>"u"?"Searching ...":t.placeholderLoading,t.placeholderEmpty=typeof t.placeholderEmpty>"u"?"No Results Found":t.placeholderEmpty,t.filterDelay=typeof t.filterDelay>"u"?300:t.filterDelay,t.emptyValue=Object.keys(t).includes("emptyValue")?t.emptyValue:"",i=Object.keys(t).filter(r=>e.includes(r)).length,i?i>1&&console.warn("list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor"):console.warn("list editor config error - either the values, valuesURL, or valuesLookup option must be set"),t.autocomplete?t.multiselect&&(t.multiselect=!1,console.warn("list editor config error - multiselect option is not available when autocomplete is enabled")):(t.freetext&&(t.freetext=!1,console.warn("list editor config error - freetext option is only available when autocomplete is enabled")),t.filterFunc&&(t.filterFunc=!1,console.warn("list editor config error - filterFunc option is only available when autocomplete is enabled")),t.filterRemote&&(t.filterRemote=!1,console.warn("list editor config error - filterRemote option is only available when autocomplete is enabled")),t.mask&&(t.mask=!1,console.warn("list editor config error - mask option is only available when autocomplete is enabled")),t.allowEmpty&&(t.allowEmpty=!1,console.warn("list editor config error - allowEmpty option is only available when autocomplete is enabled")),t.listOnEmpty&&(t.listOnEmpty=!1,console.warn("list editor config error - listOnEmpty option is only available when autocomplete is enabled"))),t.filterRemote&&!(typeof t.valuesLookup=="function"||t.valuesURL)&&(t.filterRemote=!1,console.warn("list editor config error - filterRemote option should only be used when values list is populated from a remote source")),t}_bindInputEvents(t){t.addEventListener("focus",this._inputFocus.bind(this)),t.addEventListener("click",this._inputClick.bind(this)),t.addEventListener("blur",this._inputBlur.bind(this)),t.addEventListener("keydown",this._inputKeyDown.bind(this)),t.addEventListener("search",this._inputSearch.bind(this)),this.params.autocomplete&&t.addEventListener("keyup",this._inputKeyUp.bind(this))}_inputFocus(t){this.rebuildOptionsList()}_filter(){this.params.filterRemote?(clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(()=>{this.rebuildOptionsList()},this.params.filterDelay)):this._filterList()}_inputClick(t){t.stopPropagation()}_inputBlur(t){this.blurable&&(this.popup?this.popup.hide():this._resolveValue(!0))}_inputSearch(){this._clearChoices()}_inputKeyDown(t){switch(t.keyCode){case 38:this._keyUp(t);break;case 40:this._keyDown(t);break;case 37:case 39:this._keySide(t);break;case 13:this._keyEnter();break;case 27:this._keyEsc();break;case 36:case 35:this._keyHomeEnd(t);break;case 9:this._keyTab(t);break;default:this._keySelectLetter(t)}}_inputKeyUp(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:this._keyAutoCompLetter(t)}}_preventPopupBlur(){this.popup&&this.popup.blockHide(),setTimeout(()=>{this.popup&&this.popup.restoreHide()},10)}_preventBlur(){this.blurable=!1,setTimeout(()=>{this.blurable=!0},10)}_keyTab(t){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem,!0)}_keyUp(t){var e=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&e)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e>0&&this._focusItem(this.displayItems[e-1]))}_keyDown(t){var e=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&e<this.displayItems.length-1)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e<this.displayItems.length-1&&(e==-1?this._focusItem(this.displayItems[0]):this._focusItem(this.displayItems[e+1])))}_keySide(t){this.params.autocomplete||(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())}_keyEnter(t){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem)}_keyEsc(t){this._cancel()}_keyHomeEnd(t){this.params.autocomplete&&t.stopImmediatePropagation()}_keySelectLetter(t){this.params.autocomplete||(t.preventDefault(),t.keyCode>=38&&t.keyCode<=90&&this._scrollToValue(t.keyCode))}_keyAutoCompLetter(t){this._filter(),this.lastAction="typing",this.typing=!0}_scrollToValue(t){clearTimeout(this.filterTimeout);var e=String.fromCharCode(t).toLowerCase();this.filterTerm+=e.toLowerCase();var i=this.displayItems.find(r=>typeof r.label<"u"&&r.label.toLowerCase().startsWith(this.filterTerm));i&&this._focusItem(i),this.filterTimeout=setTimeout(()=>{this.filterTerm=""},800)}_focusItem(t){this.lastAction="focus",this.focusedItem&&this.focusedItem.element&&this.focusedItem.element.classList.remove("focused"),this.focusedItem=t,t&&t.element&&(t.element.classList.add("focused"),t.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}headerFilterInitialListGen(){this._generateOptions(!0)}rebuildOptionsList(){this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(t=>{Number.isInteger(t)||console.error("List generation error",t)})}_filterList(){this._buildList(this._filterOptions()),this._showList()}_generateOptions(t){var e=[],i=++this.listIteration;return this.filtered=!1,this.params.values?e=this.params.values:this.params.valuesURL?e=this._ajaxRequest(this.params.valuesURL,this.input.value):typeof this.params.valuesLookup=="function"?e=this.params.valuesLookup(this.cell,this.input.value):this.params.valuesLookup&&(e=this._uniqueColumnValues(this.params.valuesLookupField)),e instanceof Promise?(t||this._addPlaceholder(this.params.placeholderLoading),e.then().then(r=>this.listIteration===i?this._parseList(r):Promise.reject(i))):Promise.resolve(this._parseList(e))}_addPlaceholder(t){var e=document.createElement("div");typeof t=="function"&&(t=t(this.cell.getComponent(),this.listEl)),t&&(this._clearList(),t instanceof HTMLElement?e=t:(e.classList.add("tabulator-edit-list-placeholder"),e.innerHTML=t),this.listEl.appendChild(e),this._showList())}_ajaxRequest(t,e){var i=this.params.filterRemote?{term:e}:{};return t=Mv(t,{},i),fetch(t).then(r=>r.ok?r.json().catch(s=>(console.warn("List Ajax Load Error - Invalid JSON returned",s),Promise.reject(s))):(console.error("List Ajax Load Error - Connection Error: "+r.status,r.statusText),Promise.reject(r))).catch(r=>(console.error("List Ajax Load Error - Connection Error: ",r),Promise.reject(r)))}_uniqueColumnValues(t){var e={},i=this.table.getData(this.params.valuesLookup),r;return t?r=this.table.columnManager.getColumnByField(t):r=this.cell.getColumn()._getSelf(),r?i.forEach(s=>{var a=r.getFieldValue(s);a!==null&&typeof a<"u"&&a!==""&&(e[a]=!0)}):(console.warn("unable to find matching column to create select lookup list:",t),e=[]),Object.keys(e)}_parseList(t){var e=[];return Array.isArray(t)||(t=Object.entries(t).map(([i,r])=>({label:r,value:i}))),t.forEach(i=>{typeof i!="object"&&(i={label:i,value:i}),this._parseListItem(i,e,0)}),!this.currentItems.length&&this.params.freetext&&(this.input.value=this.initialValues,this.typing=!0,this.lastAction="typing"),this.data=e,e}_parseListItem(t,e,i){var r={};t.options?r=this._parseListGroup(t,i+1):(r={label:t.label,value:t.value,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1,selected:!1,visible:!0,level:i,original:t},this.initialValues&&this.initialValues.indexOf(t.value)>-1&&this._chooseItem(r,!0)),e.push(r)}_parseListGroup(t,e){var i={label:t.label,group:!0,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1,visible:!0,level:e,options:[],original:t};return t.options.forEach(r=>{this._parseListItem(r,i.options,e)}),i}_sortOptions(t){var e;return this.params.sort&&(e=typeof this.params.sort=="function"?this.params.sort:this._defaultSortFunction.bind(this),this._sortGroup(e,t)),t}_sortGroup(t,e){e.sort((i,r)=>t(i.label,r.label,i.value,r.value,i.original,r.original)),e.forEach(i=>{i.group&&this._sortGroup(t,i.options)})}_defaultSortFunction(t,e){var i,r,s,a,o=0,l,c=/(\d+)|(\D+)/g,h=/\d/,d=0;if(this.params.sort==="desc"&&([t,e]=[e,t]),!t&&t!==0)d=!e&&e!==0?0:-1;else if(!e&&e!==0)d=1;else{if(isFinite(t)&&isFinite(e))return t-e;if(i=String(t).toLowerCase(),r=String(e).toLowerCase(),i===r)return 0;if(!(h.test(i)&&h.test(r)))return i>r?1:-1;for(i=i.match(c),r=r.match(c),l=i.length>r.length?r.length:i.length;o<l;)if(s=i[o],a=r[o++],s!==a)return isFinite(s)&&isFinite(a)?(s.charAt(0)==="0"&&(s="."+s),a.charAt(0)==="0"&&(a="."+a),s-a):s>a?1:-1;return i.length>r.length}return d}_filterOptions(){var t=this.params.filterFunc||this._defaultFilterFunc,e=this.input.value;return e?(this.filtered=!0,this.data.forEach(i=>{this._filterItem(t,e,i)})):this.filtered=!1,this.data}_filterItem(t,e,i){var r=!1;return i.group?(i.options.forEach(s=>{this._filterItem(t,e,s)&&(r=!0)}),i.visible=r):i.visible=t(e,i.label,i.value,i.original),i.visible}_defaultFilterFunc(t,e,i,r){return t=String(t).toLowerCase(),e!==null&&typeof e<"u"&&(String(e).toLowerCase().indexOf(t)>-1||String(i).toLowerCase().indexOf(t)>-1)}_clearList(){for(;this.listEl.firstChild;)this.listEl.removeChild(this.listEl.firstChild);this.displayItems=[]}_buildList(t){this._clearList(),t.forEach(e=>{this._buildItem(e)}),this.displayItems.length||this._addPlaceholder(this.params.placeholderEmpty)}_buildItem(t){var e=t.element,i;if(!this.filtered||t.visible){if(!e){if(e=document.createElement("div"),e.tabIndex=0,i=this.params.itemFormatter?this.params.itemFormatter(t.label,t.value,t.original,e):t.label,i instanceof HTMLElement?e.appendChild(i):e.innerHTML=i,t.group?e.classList.add("tabulator-edit-list-group"):e.classList.add("tabulator-edit-list-item"),e.classList.add("tabulator-edit-list-group-level-"+t.level),t.elementAttributes&&typeof t.elementAttributes=="object")for(let r in t.elementAttributes)r.charAt(0)=="+"?(r=r.slice(1),e.setAttribute(r,this.input.getAttribute(r)+t.elementAttributes["+"+r])):e.setAttribute(r,t.elementAttributes[r]);t.group?e.addEventListener("click",this._groupClick.bind(this,t)):e.addEventListener("click",this._itemClick.bind(this,t)),e.addEventListener("mousedown",this._preventBlur.bind(this)),t.element=e}this._styleItem(t),this.listEl.appendChild(e),t.group?t.options.forEach(r=>{this._buildItem(r)}):this.displayItems.push(t)}}_showList(){var t=this.popup&&this.popup.isVisible();if(this.input.parentNode){if(this.params.autocomplete&&this.input.value===""&&!this.params.listOnEmpty){this.popup&&this.popup.hide(!0);return}this._setListWidth(),this.popup||(this.popup=this.edit.popup(this.listEl)),this.popup.show(this.cell.getElement(),"bottom"),t||setTimeout(()=>{this.popup.hideOnBlur(this._resolveValue.bind(this,!0))},10)}}_styleItem(t){t&&t.element&&(t.selected?t.element.classList.add("active"):t.element.classList.remove("active"))}_itemClick(t,e){e.stopPropagation(),this._chooseItem(t)}_groupClick(t,e){e.stopPropagation()}_cancel(){this.popup.hide(!0),this.actions.cancel()}_clearChoices(){this.typing=!0,this.currentItems.forEach(t=>{t.selected=!1,this._styleItem(t)}),this.currentItems=[],this.focusedItem=null}_chooseItem(t,e){var i;this.typing=!1,this.params.multiselect?(i=this.currentItems.indexOf(t),i>-1?(this.currentItems.splice(i,1),t.selected=!1):(this.currentItems.push(t),t.selected=!0),this.input.value=this.currentItems.map(r=>r.label).join(","),this._styleItem(t)):(this.currentItems=[t],t.selected=!0,this.input.value=t.label,this._styleItem(t),e||this._resolveValue()),this._focusItem(t)}_resolveValue(t){var e,i;if(this.popup&&this.popup.hide(!0),this.params.multiselect)e=this.currentItems.map(r=>r.value);else if(t&&this.params.autocomplete&&this.typing)if(this.params.freetext||this.params.allowEmpty&&this.input.value==="")e=this.input.value;else{this.actions.cancel();return}else this.currentItems[0]?e=this.currentItems[0].value:(i=Array.isArray(this.initialValues)?this.initialValues[0]:this.initialValues,i===null||typeof i>"u"||i===""?e=i:e=this.params.emptyValue);e===""&&(e=this.params.emptyValue),this.actions.success(e),this.isFilter&&(this.initialValues=e&&!Array.isArray(e)?[e]:e,this.currentItems=[])}};function yE(n,t,e,i,r){var s=new gE(this,n,t,e,i,r);return s.input}function vE(n,t,e,i,r){var s=this,a=n.getElement(),o=n.getValue(),l=a.getElementsByTagName("svg").length||5,c=a.getElementsByTagName("svg")[0]?a.getElementsByTagName("svg")[0].getAttribute("width"):14,h=[],d=document.createElement("div"),p=document.createElementNS("http://www.w3.org/2000/svg","svg");function g(x){h.forEach(function(S,O){O<x?(s.table.browser=="ie"?S.setAttribute("class","tabulator-star-active"):S.classList.replace("tabulator-star-inactive","tabulator-star-active"),S.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(s.table.browser=="ie"?S.setAttribute("class","tabulator-star-inactive"):S.classList.replace("tabulator-star-active","tabulator-star-inactive"),S.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function m(x){var S=document.createElement("span"),O=p.cloneNode(!0);h.push(O),S.addEventListener("mouseenter",function(D){D.stopPropagation(),D.stopImmediatePropagation(),g(x)}),S.addEventListener("mousemove",function(D){D.stopPropagation(),D.stopImmediatePropagation()}),S.addEventListener("click",function(D){D.stopPropagation(),D.stopImmediatePropagation(),e(x),a.blur()}),S.appendChild(O),d.appendChild(S)}function _(x){o=x,g(x)}if(a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",d.style.verticalAlign="middle",d.style.display="inline-block",d.style.padding="4px",p.setAttribute("width",c),p.setAttribute("height",c),p.setAttribute("viewBox","0 0 512 512"),p.setAttribute("xml:space","preserve"),p.style.padding="0 1px",r.elementAttributes&&typeof r.elementAttributes=="object")for(let x in r.elementAttributes)x.charAt(0)=="+"?(x=x.slice(1),d.setAttribute(x,d.getAttribute(x)+r.elementAttributes["+"+x])):d.setAttribute(x,r.elementAttributes[x]);for(var v=1;v<=l;v++)m(v);return o=Math.min(parseInt(o),l),g(o),d.addEventListener("mousemove",function(x){g(0)}),d.addEventListener("click",function(x){e(0)}),a.addEventListener("blur",function(x){i()}),a.addEventListener("keydown",function(x){switch(x.keyCode){case 39:_(o+1);break;case 37:_(o-1);break;case 13:e(o);break;case 27:i();break}}),d}function bE(n,t,e,i,r){var s=n.getElement(),a=typeof r.max>"u"?s.getElementsByTagName("div")[0]&&s.getElementsByTagName("div")[0].getAttribute("max")||100:r.max,o=typeof r.min>"u"?s.getElementsByTagName("div")[0]&&s.getElementsByTagName("div")[0].getAttribute("min")||0:r.min,l=(a-o)/100,c=n.getValue()||0,h=document.createElement("div"),d=document.createElement("div"),p,g;function m(){var _=window.getComputedStyle(s,null),v=l*Math.round(d.offsetWidth/((s.clientWidth-parseInt(_.getPropertyValue("padding-left"))-parseInt(_.getPropertyValue("padding-right")))/100))+o;e(v),s.setAttribute("aria-valuenow",v),s.setAttribute("aria-label",c)}if(h.style.position="absolute",h.style.right="0",h.style.top="0",h.style.bottom="0",h.style.width="5px",h.classList.add("tabulator-progress-handle"),d.style.display="inline-block",d.style.position="relative",d.style.height="100%",d.style.backgroundColor="#488CE9",d.style.maxWidth="100%",d.style.minWidth="0%",r.elementAttributes&&typeof r.elementAttributes=="object")for(let _ in r.elementAttributes)_.charAt(0)=="+"?(_=_.slice(1),d.setAttribute(_,d.getAttribute(_)+r.elementAttributes["+"+_])):d.setAttribute(_,r.elementAttributes[_]);return s.style.padding="4px 4px",c=Math.min(parseFloat(c),a),c=Math.max(parseFloat(c),o),c=Math.round((c-o)/l),d.style.width=c+"%",s.setAttribute("aria-valuemin",o),s.setAttribute("aria-valuemax",a),d.appendChild(h),h.addEventListener("mousedown",function(_){p=_.screenX,g=d.offsetWidth}),h.addEventListener("mouseover",function(){h.style.cursor="ew-resize"}),s.addEventListener("mousemove",function(_){p&&(d.style.width=g+_.screenX-p+"px")}),s.addEventListener("mouseup",function(_){p&&(_.stopPropagation(),_.stopImmediatePropagation(),p=!1,g=!1,m())}),s.addEventListener("keydown",function(_){switch(_.keyCode){case 39:_.preventDefault(),d.style.width=d.clientWidth+s.clientWidth/100+"px";break;case 37:_.preventDefault(),d.style.width=d.clientWidth-s.clientWidth/100+"px";break;case 9:case 13:m();break;case 27:i();break}}),s.addEventListener("blur",function(){i()}),d}function _E(n,t,e,i,r){var s=n.getValue(),a=document.createElement("input"),o=r.tristate,l=typeof r.indeterminateValue>"u"?null:r.indeterminateValue,c=!1,h=Object.keys(r).includes("trueValue"),d=Object.keys(r).includes("falseValue");if(a.setAttribute("type","checkbox"),a.style.marginTop="5px",a.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let g in r.elementAttributes)g.charAt(0)=="+"?(g=g.slice(1),a.setAttribute(g,a.getAttribute(g)+r.elementAttributes["+"+g])):a.setAttribute(g,r.elementAttributes[g]);a.value=s,o&&(typeof s>"u"||s===l||s==="")&&(c=!0,a.indeterminate=!0),this.table.browser!="firefox"&&this.table.browser!="safari"&&t(function(){n.getType()==="cell"&&a.focus({preventScroll:!0})}),a.checked=h?s===r.trueValue:s===!0||s==="true"||s==="True"||s===1;function p(g){var m=a.checked;return h&&m?m=r.trueValue:d&&!m&&(m=r.falseValue),o?g?c?l:m:a.checked&&!c?(a.checked=!1,a.indeterminate=!0,c=!0,l):(c=!1,m):m}return a.addEventListener("change",function(g){e(p())}),a.addEventListener("blur",function(g){e(p(!0))}),a.addEventListener("keydown",function(g){g.keyCode==13&&e(p()),g.keyCode==27&&i()}),a}var wE={input:uE,textarea:hE,number:cE,range:fE,date:dE,time:pE,datetime:mE,list:yE,star:vE,progress:bE,tickCross:_E},kd=class n extends xi{static moduleName="edit";static editors=wE;constructor(t){super(t),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.convertEmptyValues=!1,this.editors=n.editors,this.registerTableOption("editTriggerEvent","focus"),this.registerTableOption("editorEmptyValue"),this.registerTableOption("editorEmptyValueFunc",this.emptyValueCheck.bind(this)),this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("editorEmptyValue"),this.registerColumnOption("editorEmptyValueFunc"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellIsEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("cell-value-changed",this.updateCellClass.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("row-layout",this.rowEditableCheck.bind(this)),this.subscribe("data-refreshing",this.cancelEdit.bind(this)),this.subscribe("clipboard-paste",this.pasteBlocker.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this,void 0)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this,void 0)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this,void 0)),Object.keys(this.table.options).includes("editorEmptyValue")&&(this.convertEmptyValues=!0)}pasteBlocker(t){if(this.currentCell)return!0}keybindingNavigateNext(t){var e=this.currentCell,i=this.options("tabEndNewRow");e&&(this.navigateNext(e,t)||i&&(e.getElement().firstChild.blur(),this.invalidEdit||(i===!0?i=this.table.addRow({}):typeof i=="function"?i=this.table.addRow(i(e.row.getComponent())):i=this.table.addRow(Object.assign({},i)),i.then(()=>{setTimeout(()=>{e.getComponent().navigateNext()})}))))}cellIsEdited(t){return!!t.modules.edit&&t.modules.edit.edited}cellCancelEdit(t){t===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}updateCellClass(t){this.allowEdit(t)?t.getElement().classList.add("tabulator-editable"):t.getElement().classList.remove("tabulator-editable")}clearCellEdited(t){t||(t=this.table.modules.edit.getEditedCells()),Array.isArray(t)||(t=[t]),t.forEach(e=>{this.table.modules.edit.clearEdited(e._getSelf())})}navigatePrev(t=this.currentCell,e){var i,r;if(t){if(e&&e.preventDefault(),i=this.navigateLeft(),i)return!0;if(r=this.table.rowManager.prevDisplayRow(t.row,!0),r&&(i=this.findPrevEditableCell(r,r.cells.length),i))return i.getComponent().edit(),!0}return!1}navigateNext(t=this.currentCell,e){var i,r;if(t){if(e&&e.preventDefault(),i=this.navigateRight(),i)return!0;if(r=this.table.rowManager.nextDisplayRow(t.row,!0),r&&(i=this.findNextEditableCell(r,-1),i))return i.getComponent().edit(),!0}return!1}navigateLeft(t=this.currentCell,e){var i,r;return t&&(e&&e.preventDefault(),i=t.getIndex(),r=this.findPrevEditableCell(t.row,i),r)?(r.getComponent().edit(),!0):!1}navigateRight(t=this.currentCell,e){var i,r;return t&&(e&&e.preventDefault(),i=t.getIndex(),r=this.findNextEditableCell(t.row,i),r)?(r.getComponent().edit(),!0):!1}navigateUp(t=this.currentCell,e){var i,r;return t&&(e&&e.preventDefault(),i=t.getIndex(),r=this.table.rowManager.prevDisplayRow(t.row,!0),r)?(r.cells[i].getComponent().edit(),!0):!1}navigateDown(t=this.currentCell,e){var i,r;return t&&(e&&e.preventDefault(),i=t.getIndex(),r=this.table.rowManager.nextDisplayRow(t.row,!0),r)?(r.cells[i].getComponent().edit(),!0):!1}findNextEditableCell(t,e){var i=!1;if(e<t.cells.length-1)for(var r=e+1;r<t.cells.length;r++){let s=t.cells[r];if(s.column.modules.edit&&Ir.elVisible(s.getElement())&&this.allowEdit(s)){i=s;break}}return i}findPrevEditableCell(t,e){var i=!1;if(e>0)for(var r=e-1;r>=0;r--){let s=t.cells[r];if(s.column.modules.edit&&Ir.elVisible(s.getElement())&&this.allowEdit(s)){i=s;break}}return i}initializeColumnCheck(t){typeof t.definition.editor<"u"&&this.initializeColumn(t)}columnDeleteCheck(t){this.currentCell&&this.currentCell.column===t&&this.cancelEdit()}rowDeleteCheck(t){this.currentCell&&this.currentCell.row===t&&this.cancelEdit()}rowEditableCheck(t){t.getCells().forEach(e=>{e.column.modules.edit&&typeof e.column.modules.edit.check=="function"&&this.updateCellClass(e)})}initializeColumn(t){var e=Object.keys(t.definition).includes("editorEmptyValue"),i={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{},convertEmptyValues:e,editorEmptyValue:t.definition.editorEmptyValue,editorEmptyValueFunc:t.definition.editorEmptyValueFunc};switch(typeof t.definition.editor){case"string":this.editors[t.definition.editor]?i.editor=this.editors[t.definition.editor]:console.warn("Editor Error - No such editor found: ",t.definition.editor);break;case"function":i.editor=t.definition.editor;break;case"boolean":t.definition.editor===!0&&(typeof t.definition.formatter!="function"?this.editors[t.definition.formatter]?i.editor=this.editors[t.definition.formatter]:i.editor=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter));break}i.editor&&(t.modules.edit=i)}getCurrentCell(){return this.currentCell?this.currentCell.getComponent():!1}clearEditor(t){var e=this.currentCell,i;if(this.invalidEdit=!1,e){for(this.currentCell=!1,i=e.getElement(),this.dispatch("edit-editor-clear",e,t),i.classList.remove("tabulator-editing");i.firstChild;)i.removeChild(i.firstChild);e.row.getElement().classList.remove("tabulator-editing"),e.table.element.classList.remove("tabulator-editing")}}cancelEdit(){if(this.currentCell){var t=this.currentCell,e=this.currentCell.getComponent();this.clearEditor(!0),t.setValueActual(t.getValue()),t.cellRendered(),(t.column.definition.editor=="textarea"||t.column.definition.variableHeight)&&t.row.normalizeHeight(!0),t.column.definition.cellEditCancelled&&t.column.definition.cellEditCancelled.call(this.table,e),this.dispatch("edit-cancelled",t),this.dispatchExternal("cellEditCancelled",e)}}bindEditor(t){if(t.column.modules.edit){var e=this,i=t.getElement(!0);this.updateCellClass(t),i.setAttribute("tabindex",0),i.addEventListener("mousedown",function(r){r.button===2?r.preventDefault():e.mouseClick=!0}),this.options("editTriggerEvent")==="dblclick"&&i.addEventListener("dblclick",function(r){i.classList.contains("tabulator-editing")||(i.focus({preventScroll:!0}),e.edit(t,r,!1))}),(this.options("editTriggerEvent")==="focus"||this.options("editTriggerEvent")==="click")&&i.addEventListener("click",function(r){i.classList.contains("tabulator-editing")||(i.focus({preventScroll:!0}),e.edit(t,r,!1))}),this.options("editTriggerEvent")==="focus"&&i.addEventListener("focus",function(r){e.recursionBlock||e.edit(t,r,!1)})}}focusCellNoEvent(t,e){this.recursionBlock=!0,e&&this.table.browser==="ie"||t.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(t,e){this.focusCellNoEvent(t),this.edit(t,!1,e)}focusScrollAdjust(t){if(this.table.rowManager.getRenderMode()=="virtual"){var e=this.table.rowManager.element.scrollTop,i=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,r=t.row.getElement();r.offsetTop<e?this.table.rowManager.element.scrollTop-=e-r.offsetTop:r.offsetTop+r.offsetHeight>i&&(this.table.rowManager.element.scrollTop+=r.offsetTop+r.offsetHeight-i);var s=this.table.rowManager.element.scrollLeft,a=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,o=t.getElement();this.table.modExists("frozenColumns")&&(s+=parseInt(this.table.modules.frozenColumns.leftMargin||0),a-=parseInt(this.table.modules.frozenColumns.rightMargin||0)),this.table.options.renderHorizontal==="virtual"&&(s-=parseInt(this.table.columnManager.renderer.vDomPadLeft),a-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),o.offsetLeft<s?this.table.rowManager.element.scrollLeft-=s-o.offsetLeft:o.offsetLeft+o.offsetWidth>a&&(this.table.rowManager.element.scrollLeft+=o.offsetLeft+o.offsetWidth-a)}}allowEdit(t){var e=!!t.column.modules.edit;if(t.column.modules.edit)switch(typeof t.column.modules.edit.check){case"function":t.row.initialized&&(e=t.column.modules.edit.check(t.getComponent()));break;case"string":e=!!t.row.data[t.column.modules.edit.check];break;case"boolean":e=t.column.modules.edit.check;break}return e}edit(t,e,i){var r=this,s=!0,a=function(){},o=t.getElement(),l=!1,c,h,d;if(this.currentCell){!this.invalidEdit&&this.currentCell!==t&&this.cancelEdit();return}function p(x){if(r.currentCell===t&&!l){var S=r.chain("edit-success",[t,x],!0,!0);return S===!0||r.table.options.validationMode==="highlight"?(l=!0,r.clearEditor(),t.modules.edit||(t.modules.edit={}),t.modules.edit.edited=!0,r.editedCells.indexOf(t)==-1&&r.editedCells.push(t),x=r.transformEmptyValues(x,t),t.setValue(x,!0),S===!0):(l=!0,r.invalidEdit=!0,r.focusCellNoEvent(t,!0),a(),setTimeout(()=>{l=!1},10),!1)}}function g(){r.currentCell===t&&!l&&r.cancelEdit()}function m(x){a=x}if(t.column.modules.edit.blocked)return this.mouseClick=!1,this.blur(o),!1;if(e&&e.stopPropagation(),s=this.allowEdit(t),s||i){if(r.cancelEdit(),r.currentCell=t,this.focusScrollAdjust(t),h=t.getComponent(),this.mouseClick&&(this.mouseClick=!1,t.column.definition.cellClick&&t.column.definition.cellClick.call(this.table,e,h)),t.column.definition.cellEditing&&t.column.definition.cellEditing.call(this.table,h),this.dispatch("cell-editing",t),this.dispatchExternal("cellEditing",h),d=typeof t.column.modules.edit.params=="function"?t.column.modules.edit.params(h):t.column.modules.edit.params,c=t.column.modules.edit.editor.call(r,h,m,p,g,d),this.currentCell&&c!==!1)if(c instanceof Node){for(o.classList.add("tabulator-editing"),t.row.getElement().classList.add("tabulator-editing"),t.table.element.classList.add("tabulator-editing");o.firstChild;)o.removeChild(o.firstChild);o.appendChild(c),a();for(var _=o.children,v=0;v<_.length;v++)_[v].addEventListener("click",function(x){x.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",c),this.blur(o),!1;else return this.blur(o),!1;return!0}else return this.mouseClick=!1,this.blur(o),!1}emptyValueCheck(t){return t===""||t===null||typeof t>"u"}transformEmptyValues(t,e){var i=e.column.modules.edit,r=i.convertEmptyValues||this.convertEmptyValues,s;return r&&(s=i.editorEmptyValueFunc||this.options("editorEmptyValueFunc"),s&&s(t)&&(t=i.convertEmptyValues?i.editorEmptyValue:this.options("editorEmptyValue"))),t}blur(t){this.confirm("edit-blur",[t])||t.blur()}getEditedCells(){var t=[];return this.editedCells.forEach(e=>{t.push(e.getComponent())}),t}clearEdited(t){var e;t.modules.edit&&t.modules.edit.edited&&(t.modules.edit.edited=!1,this.dispatch("edit-edited-clear",t)),e=this.editedCells.indexOf(t),e>-1&&this.editedCells.splice(e,1)}},Bh=class{constructor(t,e,i,r){this.type=t,this.columns=e,this.component=i||!1,this.indent=r||0}},eu=class{constructor(t,e,i,r,s){this.value=t,this.component=e||!1,this.width=i,this.height=r,this.depth=s}},xE={},EE={visible:function(){return this.rowManager.getVisibleRows(!1,!0)},all:function(){return this.rowManager.rows},selected:function(){return this.modules.selectRow.selectedRows},active:function(){return this.options.pagination?this.rowManager.getDisplayRows(this.rowManager.displayRows.length-2):this.rowManager.getDisplayRows()}},Ld=class n extends xi{static moduleName="export";static columnLookups=xE;static rowLookups=EE;constructor(t){super(t),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.colVisPropAttach="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(t,e,i,r){var s,a,o,l;return this.cloneTableStyle=e,this.config=t||{},this.colVisProp=r,this.colVisPropAttach=this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1),l=n.columnLookups[i],l&&(o=l.call(this.table),o=o.filter(c=>this.columnVisCheck(c))),s=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders(o)):[],o&&(o=o.map(c=>c.getComponent())),a=this.bodyToExportRows(this.rowLookup(i),o),s.concat(a)}generateTable(t,e,i,r){var s=this.generateExportList(t,e,i,r);return this.generateTableElement(s)}rowLookup(t){var e=[],i;return typeof t=="function"?t.call(this.table).forEach(r=>{r=this.table.rowManager.findRow(r),r&&e.push(r)}):(i=n.rowLookups[t]||n.rowLookups.active,e=i.call(this.table)),Object.assign([],e)}generateColumnGroupHeaders(t){var e=[];return t||(t=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex),t.forEach(i=>{var r=this.processColumnGroup(i);r&&e.push(r)}),e}processColumnGroup(t){var e=t.columns,i=0,r=t.definition["title"+this.colVisPropAttach]||t.definition.title,s={title:r,column:t,depth:1};if(e.length){if(s.subGroups=[],s.width=0,e.forEach(a=>{var o=this.processColumnGroup(a);o&&(s.width+=o.width,s.subGroups.push(o),o.depth>i&&(i=o.depth))}),s.depth+=i,!s.width)return!1}else if(this.columnVisCheck(t))s.width=1;else return!1;return s}columnVisCheck(t){var e=t.definition[this.colVisProp];return this.config.rowHeaders===!1&&t.isRowHeader?!1:(typeof e=="function"&&(e=e.call(this.table,t.getComponent())),e===!1||e===!0?e:t.visible&&t.field)}headersToExportRows(t){var e=[],i=0,r=[];function s(a,o){var l=i-o;if(typeof e[o]>"u"&&(e[o]=[]),a.height=a.subGroups?1:l-a.depth+1,e[o].push(a),a.height>1)for(let c=1;c<a.height;c++)typeof e[o+c]>"u"&&(e[o+c]=[]),e[o+c].push(!1);if(a.width>1)for(let c=1;c<a.width;c++)e[o].push(!1);a.subGroups&&a.subGroups.forEach(function(c){s(c,o+1)})}return t.forEach(function(a){a.depth>i&&(i=a.depth)}),t.forEach(function(a){s(a,0)}),e.forEach(a=>{var o=[];a.forEach(l=>{if(l){let c=typeof l.title>"u"?"":l.title;o.push(new eu(c,l.column.getComponent(),l.width,l.height,l.depth))}else o.push(null)}),r.push(new Bh("header",o))}),r}bodyToExportRows(t,e=[]){var i=[];return e.length===0&&this.table.columnManager.columnsByIndex.forEach(r=>{this.columnVisCheck(r)&&e.push(r.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&t.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&t.push(this.table.modules.columnCalcs.botRow)),t=t.filter(r=>{switch(r.type){case"group":return this.config.rowGroups!==!1;case"calc":return this.config.columnCalcs!==!1;case"row":return!(this.table.options.dataTree&&this.config.dataTree===!1&&r.modules.dataTree.parent)}return!0}),t.forEach((r,s)=>{var a=r.getData(this.colVisProp),o=[],l=0;switch(r.type){case"group":l=r.level,o.push(new eu(r.key,r.getComponent(),e.length,1));break;case"calc":case"row":e.forEach(c=>{o.push(new eu(c._column.getFieldValue(a),c,1,1))}),this.table.options.dataTree&&this.config.dataTree!==!1&&(l=r.modules.dataTree.index);break}i.push(new Bh(r.type,o,r.getComponent(),l))}),i}generateTableElement(t){var e=document.createElement("table"),i=document.createElement("thead"),r=document.createElement("tbody"),s=this.lookupTableStyles(),a=this.table.options["rowFormatter"+this.colVisPropAttach],o={};return o.rowFormatter=a!==null?a:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(o.treeElementField=this.table.modules.dataTree.elementField),o.groupHeader=this.table.options["groupHeader"+this.colVisPropAttach],o.groupHeader&&!Array.isArray(o.groupHeader)&&(o.groupHeader=[o.groupHeader]),e.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),i,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),t.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),t.forEach((l,c)=>{let h;switch(l.type){case"header":i.appendChild(this.generateHeaderElement(l,o,s));break;case"group":r.appendChild(this.generateGroupElement(l,o,s));break;case"calc":r.appendChild(this.generateCalcElement(l,o,s));break;case"row":h=this.generateRowElement(l,o,s),this.mapElementStyles(c%2&&s.evenRow?s.evenRow:s.oddRow,h,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),r.appendChild(h);break}}),i.innerHTML&&e.appendChild(i),e.appendChild(r),this.mapElementStyles(this.table.element,e,["border-top","border-left","border-right","border-bottom"]),e}lookupTableStyles(){var t={};return this.cloneTableStyle&&window.getComputedStyle&&(t.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),t.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),t.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),t.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),t.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],t.firstRow&&(t.styleCells=t.firstRow.getElementsByClassName("tabulator-cell"),t.styleRowHeader=t.firstRow.getElementsByClassName("tabulator-row-header")[0],t.firstCell=t.styleCells[0],t.lastCell=t.styleCells[t.styleCells.length-1])),t}generateHeaderElement(t,e,i){var r=document.createElement("tr");return t.columns.forEach(s=>{if(s){var a=document.createElement("th"),o=s.component._column.definition.cssClass?s.component._column.definition.cssClass.split(" "):[];a.colSpan=s.width,a.rowSpan=s.height,a.innerHTML=s.value,this.cloneTableStyle&&(a.style.boxSizing="border-box"),o.forEach(function(l){a.classList.add(l)}),this.mapElementStyles(s.component.getElement(),a,["text-align","border-left","border-right","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(s.component._column.contentElement,a,["padding-top","padding-left","padding-right","padding-bottom"]),s.component._column.visible?this.mapElementStyles(s.component.getElement(),a,["width"]):s.component._column.definition.width&&(a.style.width=s.component._column.definition.width+"px"),s.component._column.parent&&s.component._column.parent.isGroup?this.mapElementStyles(s.component._column.parent.groupElement,a,["border-top"]):this.mapElementStyles(s.component.getElement(),a,["border-top"]),s.component._column.isGroup?this.mapElementStyles(s.component.getElement(),a,["border-bottom"]):this.mapElementStyles(this.table.columnManager.getElement(),a,["border-bottom"]),r.appendChild(a)}}),r}generateGroupElement(t,e,i){var r=document.createElement("tr"),s=document.createElement("td"),a=t.columns[0];return r.classList.add("tabulator-print-table-row"),e.groupHeader&&e.groupHeader[t.indent]?a.value=e.groupHeader[t.indent](a.value,t.component._group.getRowCount(),t.component._group.getData(),t.component):e.groupHeader!==!1&&(a.value=t.component._group.generator(a.value,t.component._group.getRowCount(),t.component._group.getData(),t.component)),s.colSpan=a.width,s.innerHTML=a.value,r.classList.add("tabulator-print-table-group"),r.classList.add("tabulator-group-level-"+t.indent),a.component.isVisible()&&r.classList.add("tabulator-group-visible"),this.mapElementStyles(i.firstGroup,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(i.firstGroup,s,["padding-top","padding-left","padding-right","padding-bottom"]),r.appendChild(s),r}generateCalcElement(t,e,i){var r=this.generateRowElement(t,e,i);return r.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(i.calcRow,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),r}generateRowElement(t,e,i){var r=document.createElement("tr");if(r.classList.add("tabulator-print-table-row"),t.columns.forEach((s,a)=>{if(s){var o=document.createElement("td"),l=s.component._column,c=this.table,h=c.columnManager.findColumnIndex(l),d=s.value,p,g,m={modules:{},getValue:function(){return d},getField:function(){return l.definition.field},getElement:function(){return o},getType:function(){return"cell"},getColumn:function(){return l.getComponent()},getData:function(){return t.component.getData()},getRow:function(){return t.component},getTable:function(){return c},getComponent:function(){return m},column:l},_=l.definition.cssClass?l.definition.cssClass.split(" "):[];if(_.forEach(function(v){o.classList.add(v)}),this.table.modExists("format")&&this.config.formatCells!==!1)d=this.table.modules.format.formatExportValue(m,this.colVisProp);else switch(typeof d){case"object":d=d!==null?JSON.stringify(d):"";break;case"undefined":d="";break}d instanceof Node?o.appendChild(d):o.innerHTML=d,g=["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","text-align"],l.isRowHeader?(p=i.styleRowHeader,g.push("background-color")):p=i.styleCells&&i.styleCells[h]?i.styleCells[h]:i.firstCell,p&&(this.mapElementStyles(p,o,g),l.definition.align&&(o.style.textAlign=l.definition.align)),this.table.options.dataTree&&this.config.dataTree!==!1&&(e.treeElementField&&e.treeElementField==l.field||!e.treeElementField&&a==0)&&(t.component._row.modules.dataTree.controlEl&&o.insertBefore(t.component._row.modules.dataTree.controlEl.cloneNode(!0),o.firstChild),t.component._row.modules.dataTree.branchEl&&o.insertBefore(t.component._row.modules.dataTree.branchEl.cloneNode(!0),o.firstChild)),r.appendChild(o),m.modules.format&&m.modules.format.renderedCallback&&m.modules.format.renderedCallback()}}),e.rowFormatter&&t.type==="row"&&this.config.formatCells!==!1){let s=Object.assign(t.component);s.getElement=function(){return r},e.rowFormatter(t.component)}return r}generateHTMLTable(t){var e=document.createElement("div");return e.appendChild(this.generateTableElement(t)),e.innerHTML}getHtml(t,e,i,r){var s=this.generateExportList(i||this.table.options.htmlOutputConfig,e,t,r||"htmlOutput");return this.generateHTMLTable(s)}mapElementStyles(t,e,i){if(this.cloneTableStyle&&t&&e){var r={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var s=window.getComputedStyle(t);i.forEach(function(a){e.style[r[a]]||(e.style[r[a]]=s.getPropertyValue(a))})}}}},CE={"=":function(n,t,e,i){return t==n},"<":function(n,t,e,i){return t<n},"<=":function(n,t,e,i){return t<=n},">":function(n,t,e,i){return t>n},">=":function(n,t,e,i){return t>=n},"!=":function(n,t,e,i){return t!=n},regex:function(n,t,e,i){return typeof n=="string"&&(n=new RegExp(n)),n.test(t)},like:function(n,t,e,i){return n===null||typeof n>"u"?t===n:typeof t<"u"&&t!==null?String(t).toLowerCase().indexOf(n.toLowerCase())>-1:!1},keywords:function(n,t,e,i){var r=n.toLowerCase().split(typeof i.separator>"u"?" ":i.separator),s=String(t===null||typeof t>"u"?"":t).toLowerCase(),a=[];return r.forEach(o=>{s.includes(o)&&a.push(!0)}),i.matchAll?a.length===r.length:!!a.length},starts:function(n,t,e,i){return n===null||typeof n>"u"?t===n:typeof t<"u"&&t!==null?String(t).toLowerCase().startsWith(n.toLowerCase()):!1},ends:function(n,t,e,i){return n===null||typeof n>"u"?t===n:typeof t<"u"&&t!==null?String(t).toLowerCase().endsWith(n.toLowerCase()):!1},in:function(n,t,e,i){return Array.isArray(n)?n.length?n.indexOf(t)>-1:!0:(console.warn("Filter Error - filter value is not an array:",n),!1)}},Td=class n extends xi{static moduleName="filter";static filters=CE;constructor(t){super(t),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerTableOption("placeholderHeaderFilter",!1),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.subscribe("placeholder",this.generatePlaceholder.bind(this)),this.table.options.filterMode==="remote"&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(t=>{var e=this.table.columnManager.findColumn(t.field);if(e)this.setHeaderFilterValue(e,t.value);else return console.warn("Column Filter Error - No matching column found:",t.field),!1}),this.tableInitialized=!0}remoteFilterParams(t,e,i,r){return r.filter=this.getFilters(!0,!0),r}generatePlaceholder(t){if(this.table.options.placeholderHeaderFilter&&Object.keys(this.headerFilters).length)return this.table.options.placeholderHeaderFilter}userSetFilter(t,e,i,r){this.setFilter(t,e,i,r),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(t,e,i,r){this.addFilter(t,e,i,r),this.refreshFilter()}userSetHeaderFilterFocus(t){var e=this.table.columnManager.findColumn(t);if(e)this.setHeaderFilterFocus(e);else return console.warn("Column Filter Focus Error - No matching column found:",t),!1}userGetHeaderFilterValue(t){var e=this.table.columnManager.findColumn(t);if(e)return this.getHeaderFilterValue(e);console.warn("Column Filter Error - No matching column found:",t)}userSetHeaderFilterValue(t,e){var i=this.table.columnManager.findColumn(t);if(i)this.setHeaderFilterValue(i,e);else return console.warn("Column Filter Error - No matching column found:",t),!1}userRemoveFilter(t,e,i){this.removeFilter(t,e,i),this.refreshFilter()}userClearFilter(t){this.clearFilter(t),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(t,e,i){return this.search("rows",t,e,i)}searchData(t,e,i){return this.search("data",t,e,i)}initializeColumnHeaderFilter(t){var e=t.definition;e.headerFilter&&this.initializeColumn(t)}initializeColumn(t,e){var i=this,r=t.getField();function s(a){var o=t.modules.filter.tagType=="input"&&t.modules.filter.attrType=="text"||t.modules.filter.tagType=="textarea"?"partial":"match",l="",c="",h;if(typeof t.modules.filter.prevSuccess>"u"||t.modules.filter.prevSuccess!==a){if(t.modules.filter.prevSuccess=a,t.modules.filter.emptyFunc(a))delete i.headerFilters[r];else{switch(t.modules.filter.value=a,typeof t.definition.headerFilterFunc){case"string":n.filters[t.definition.headerFilterFunc]?(l=t.definition.headerFilterFunc,h=function(d){var p=t.definition.headerFilterFuncParams||{},g=t.getFieldValue(d);return p=typeof p=="function"?p(a,g,d):p,n.filters[t.definition.headerFilterFunc](a,g,d,p)}):console.warn("Header Filter Error - Matching filter function not found: ",t.definition.headerFilterFunc);break;case"function":h=function(d){var p=t.definition.headerFilterFuncParams||{},g=t.getFieldValue(d);return p=typeof p=="function"?p(a,g,d):p,t.definition.headerFilterFunc(a,g,d,p)},l=h;break}if(!h)switch(o){case"partial":h=function(d){var p=t.getFieldValue(d);return typeof p<"u"&&p!==null?String(p).toLowerCase().indexOf(String(a).toLowerCase())>-1:!1},l="like";break;default:h=function(d){return t.getFieldValue(d)==a},l="="}i.headerFilters[r]={value:a,func:h,type:l}}t.modules.filter.value=a,c=JSON.stringify(i.headerFilters),i.prevHeaderFilterChangeCheck!==c&&(i.prevHeaderFilterChangeCheck=c,i.trackChanges(),i.refreshFilter())}return!0}t.modules.filter={success:s,attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(t)}generateHeaderFilterElement(t,e,i){var r=this,s=t.modules.filter.success,a=t.getField(),o,l,c,h,d,p,g,m;t.modules.filter.value=e;function _(){}function v(x){m=x}if(t.modules.filter.headerElement&&t.modules.filter.headerElement.parentNode&&t.contentElement.removeChild(t.modules.filter.headerElement.parentNode),a){switch(t.modules.filter.emptyFunc=t.definition.headerFilterEmptyCheck||function(x){return!x&&x!==0},o=document.createElement("div"),o.classList.add("tabulator-header-filter"),typeof t.definition.headerFilter){case"string":r.table.modules.edit.editors[t.definition.headerFilter]?(l=r.table.modules.edit.editors[t.definition.headerFilter],(t.definition.headerFilter==="tick"||t.definition.headerFilter==="tickCross")&&!t.definition.headerFilterEmptyCheck&&(t.modules.filter.emptyFunc=function(x){return x!==!0&&x!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",t.definition.editor);break;case"function":l=t.definition.headerFilter;break;case"boolean":t.modules.edit&&t.modules.edit.editor?l=t.modules.edit.editor:t.definition.formatter&&r.table.modules.edit.editors[t.definition.formatter]?(l=r.table.modules.edit.editors[t.definition.formatter],(t.definition.formatter==="tick"||t.definition.formatter==="tickCross")&&!t.definition.headerFilterEmptyCheck&&(t.modules.filter.emptyFunc=function(x){return x!==!0&&x!==!1})):l=r.table.modules.edit.editors.input;break}if(l){if(h={getValue:function(){return typeof e<"u"?e:""},getField:function(){return t.definition.field},getElement:function(){return o},getColumn:function(){return t.getComponent()},getTable:()=>this.table,getType:()=>"header",getRow:function(){return{normalizeHeight:function(){}}}},g=t.definition.headerFilterParams||{},g=typeof g=="function"?g.call(r.table,h):g,c=l.call(this.table.modules.edit,h,v,s,_,g),!c){console.warn("Filter Error - Cannot add filter to "+a+" column, editor returned a value of false");return}if(!(c instanceof Node)){console.warn("Filter Error - Cannot add filter to "+a+" column, editor should return an instance of Node, the editor returned:",c);return}r.langBind("headerFilters|columns|"+t.definition.field,function(x){c.setAttribute("placeholder",typeof x<"u"&&x?x:t.definition.headerFilterPlaceholder||r.langText("headerFilters|default"))}),c.addEventListener("click",function(x){x.stopPropagation(),c.focus()}),c.addEventListener("focus",x=>{var S=this.table.columnManager.contentsElement.scrollLeft,O=this.table.rowManager.element.scrollLeft;S!==O&&(this.table.rowManager.scrollHorizontal(S),this.table.columnManager.scrollHorizontal(S))}),d=!1,p=function(x){d&&clearTimeout(d),d=setTimeout(function(){s(c.value)},r.table.options.headerFilterLiveFilterDelay)},t.modules.filter.headerElement=c,t.modules.filter.attrType=c.hasAttribute("type")?c.getAttribute("type").toLowerCase():"",t.modules.filter.tagType=c.tagName.toLowerCase(),t.definition.headerFilterLiveFilter!==!1&&(t.definition.headerFilter==="autocomplete"||t.definition.headerFilter==="tickCross"||(t.definition.editor==="autocomplete"||t.definition.editor==="tickCross")&&t.definition.headerFilter===!0||(c.addEventListener("keyup",p),c.addEventListener("search",p),t.modules.filter.attrType=="number"&&c.addEventListener("change",function(x){s(c.value)}),t.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&c.setAttribute("type","search")),(t.modules.filter.tagType=="input"||t.modules.filter.tagType=="select"||t.modules.filter.tagType=="textarea")&&c.addEventListener("mousedown",function(x){x.stopPropagation()})),o.appendChild(c),t.contentElement.appendChild(o),i||r.headerFilterColumns.push(t),m&&m()}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(t){t.modules.filter&&t.modules.filter.headerElement?t.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",t.getField())}getHeaderFilterValue(t){if(t.modules.filter&&t.modules.filter.headerElement)return t.modules.filter.value;console.warn("Column Filter Error - No header filter set on column:",t.getField())}setHeaderFilterValue(t,e){t&&(t.modules.filter&&t.modules.filter.headerElement?(this.generateHeaderFilterElement(t,e,!0),t.modules.filter.success(e)):console.warn("Column Filter Error - No header filter set on column:",t.getField()))}reloadHeaderFilter(t){t&&(t.modules.filter&&t.modules.filter.headerElement?this.generateHeaderFilterElement(t,t.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",t.getField()))}refreshFilter(){this.tableInitialized&&(this.table.options.filterMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0))}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var t=this.changed;return this.changed=!1,t}setFilter(t,e,i,r){this.filterList=[],Array.isArray(t)||(t=[{field:t,type:e,value:i,params:r}]),this.addFilter(t)}addFilter(t,e,i,r){var s=!1;Array.isArray(t)||(t=[{field:t,type:e,value:i,params:r}]),t.forEach(a=>{a=this.findFilter(a),a&&(this.filterList.push(a),s=!0)}),s&&this.trackChanges()}findFilter(t){var e;if(Array.isArray(t))return this.findSubFilters(t);var i=!1;return typeof t.field=="function"?i=function(r){return t.field(r,t.type||{})}:n.filters[t.type]?(e=this.table.columnManager.getColumnByField(t.field),e?i=function(r){return n.filters[t.type](t.value,e.getFieldValue(r),r,t.params||{})}:i=function(r){return n.filters[t.type](t.value,r[t.field],r,t.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",t.type),t.func=i,t.func?t:!1}findSubFilters(t){var e=[];return t.forEach(i=>{i=this.findFilter(i),i&&e.push(i)}),e.length?e:!1}getFilters(t,e){var i=[];return t&&(i=this.getHeaderFilters()),e&&i.forEach(function(r){typeof r.type=="function"&&(r.type="function")}),i=i.concat(this.filtersToArray(this.filterList,e)),i}filtersToArray(t,e){var i=[];return t.forEach(r=>{var s;Array.isArray(r)?i.push(this.filtersToArray(r,e)):(s={field:r.field,type:r.type,value:r.value},e&&typeof s.type=="function"&&(s.type="function"),i.push(s))}),i}getHeaderFilters(){var t=[];for(var e in this.headerFilters)t.push({field:e,type:this.headerFilters[e].type,value:this.headerFilters[e].value});return t}removeFilter(t,e,i){Array.isArray(t)||(t=[{field:t,type:e,value:i}]),t.forEach(r=>{var s=-1;typeof r.field=="object"?s=this.filterList.findIndex(a=>r===a):s=this.filterList.findIndex(a=>r.field===a.field&&r.type===a.type&&r.value===a.value),s>-1?this.filterList.splice(s,1):console.warn("Filter Error - No matching filter type found, ignoring: ",r.type)}),this.trackChanges()}clearFilter(t){this.filterList=[],t&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(t=>{typeof t.modules.filter.value<"u"&&delete t.modules.filter.value,t.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(t)}),this.trackChanges()}search(t,e,i,r){var s=[],a=[];return Array.isArray(e)||(e=[{field:e,type:i,value:r}]),e.forEach(o=>{o=this.findFilter(o),o&&a.push(o)}),this.table.rowManager.rows.forEach(o=>{var l=!0;a.forEach(c=>{this.filterRecurse(c,o.getData())||(l=!1)}),l&&s.push(t==="data"?o.getData("data"):o.getComponent())}),s}filter(t,e){var i=[],r=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters(!0)),this.table.options.filterMode!=="remote"&&(this.filterList.length||Object.keys(this.headerFilters).length)?t.forEach(s=>{this.filterRow(s)&&i.push(s)}):i=t.slice(0),this.subscribedExternal("dataFiltered")&&(i.forEach(s=>{r.push(s.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(!0),r)),i}filterRow(t,e){var i=!0,r=t.getData();this.filterList.forEach(a=>{this.filterRecurse(a,r)||(i=!1)});for(var s in this.headerFilters)this.headerFilters[s].func(r)||(i=!1);return i}filterRecurse(t,e){var i=!1;return Array.isArray(t)?t.forEach(r=>{this.filterRecurse(r,e)&&(i=!0)}):i=t.func(e),i}};function ME(n,t,e){return this.emptyToSpace(this.sanitizeHTML(n.getValue()))}function SE(n,t,e){return n.getValue()}function kE(n,t,e){return n.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(n.getValue()))}function LE(n,t,e){var i=parseFloat(n.getValue()),r="",s,a,o,l,c,h=t.decimal||".",d=t.thousand||",",p=t.negativeSign||"-",g=t.symbol||"",m=!!t.symbolAfter,_=typeof t.precision<"u"?t.precision:2;if(isNaN(i))return this.emptyToSpace(this.sanitizeHTML(n.getValue()));if(i<0&&(i=Math.abs(i),r=p),s=_!==!1?i.toFixed(_):i,s=String(s).split("."),a=s[0],o=s.length>1?h+s[1]:"",t.thousand!==!1)for(l=/(\d+)(\d{3})/;l.test(a);)a=a.replace(l,"$1"+d+"$2");return c=a+o,r===!0?(c="("+c+")",m?c+g:g+c):m?r+c+g:r+g+c}function TE(n,t,e){var i=n.getValue(),r=t.urlPrefix||"",s=t.download,a=i,o=document.createElement("a"),l;function c(h,d){var p=h.shift(),g=d[p];return h.length&&typeof g=="object"?c(h,g):g}if(t.labelField&&(l=n.getData(),a=c(t.labelField.split(this.table.options.nestedFieldSeparator),l)),t.label)switch(typeof t.label){case"string":a=t.label;break;case"function":a=t.label(n);break}if(a){if(t.urlField&&(l=n.getData(),i=Ir.retrieveNestedData(this.table.options.nestedFieldSeparator,t.urlField,l)),t.url)switch(typeof t.url){case"string":i=t.url;break;case"function":i=t.url(n);break}return o.setAttribute("href",r+i),t.target&&o.setAttribute("target",t.target),t.download&&(typeof s=="function"?s=s(n):s=s===!0?"":s,o.setAttribute("download",s)),o.innerHTML=this.emptyToSpace(this.sanitizeHTML(a)),o}else return"&nbsp;"}function PE(n,t,e){var i=document.createElement("img"),r=n.getValue();switch(t.urlPrefix&&(r=t.urlPrefix+n.getValue()),t.urlSuffix&&(r=r+t.urlSuffix),i.setAttribute("src",r),typeof t.height){case"number":i.style.height=t.height+"px";break;case"string":i.style.height=t.height;break}switch(typeof t.width){case"number":i.style.width=t.width+"px";break;case"string":i.style.width=t.width;break}return i.addEventListener("load",function(){n.getRow().normalizeHeight()}),i}function RE(n,t,e){var i=n.getValue(),r=n.getElement(),s=t.allowEmpty,a=t.allowTruthy,o=Object.keys(t).includes("trueValue"),l=typeof t.tickElement<"u"?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',c=typeof t.crossElement<"u"?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return o&&i===t.trueValue||!o&&(a&&i||i===!0||i==="true"||i==="True"||i===1||i==="1")?(r.setAttribute("aria-checked",!0),l||""):s&&(i==="null"||i===""||i===null||typeof i>"u")?(r.setAttribute("aria-checked","mixed"),""):(r.setAttribute("aria-checked",!1),c||"")}function OE(n,t,e){var i=window.DateTime||luxon.DateTime,r=t.inputFormat||"yyyy-MM-dd HH:mm:ss",s=t.outputFormat||"dd/MM/yyyy HH:mm:ss",a=typeof t.invalidPlaceholder<"u"?t.invalidPlaceholder:"",o=n.getValue();if(typeof i<"u"){var l;return i.isDateTime(o)?l=o:r==="iso"?l=i.fromISO(String(o)):l=i.fromFormat(String(o),r),l.isValid?(t.timezone&&(l=l.setZone(t.timezone)),l.toFormat(s)):a===!0||!o?o:typeof a=="function"?a(o):a}else console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}function IE(n,t,e){var i=window.DateTime||luxon.DateTime,r=t.inputFormat||"yyyy-MM-dd HH:mm:ss",s=typeof t.invalidPlaceholder<"u"?t.invalidPlaceholder:"",a=typeof t.suffix<"u"?t.suffix:!1,o=typeof t.unit<"u"?t.unit:"days",l=typeof t.humanize<"u"?t.humanize:!1,c=typeof t.date<"u"?t.date:i.now(),h=n.getValue();if(typeof i<"u"){var d;return i.isDateTime(h)?d=h:r==="iso"?d=i.fromISO(String(h)):d=i.fromFormat(String(h),r),d.isValid?l?d.diff(c,o).toHuman()+(a?" "+a:""):parseInt(d.diff(c,o)[o])+(a?" "+a:""):s===!0?h:typeof s=="function"?s(h):s}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}function AE(n,t,e){var i=n.getValue();return typeof t[i]>"u"?(console.warn("Missing display value for "+i),i):t[i]}function NE(n,t,e){var i=n.getValue(),r=n.getElement(),s=t&&t.stars?t.stars:5,a=document.createElement("span"),o=document.createElementNS("http://www.w3.org/2000/svg","svg"),l='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',c='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';a.style.verticalAlign="middle",o.setAttribute("width","14"),o.setAttribute("height","14"),o.setAttribute("viewBox","0 0 512 512"),o.setAttribute("xml:space","preserve"),o.style.padding="0 1px",i=i&&!isNaN(i)?parseInt(i):0,i=Math.max(0,Math.min(i,s));for(var h=1;h<=s;h++){var d=o.cloneNode(!0);d.innerHTML=h<=i?l:c,a.appendChild(d)}return r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.setAttribute("aria-label",i),a}function DE(n,t,e){var i=this.sanitizeHTML(n.getValue())||0,r=document.createElement("span"),s=t&&t.max?t.max:100,a=t&&t.min?t.min:0,o=t&&typeof t.color<"u"?t.color:["red","orange","green"],l="#666666",c,h;if(!(isNaN(i)||typeof n.getValue()>"u")){switch(r.classList.add("tabulator-traffic-light"),h=parseFloat(i)<=s?parseFloat(i):s,h=parseFloat(h)>=a?parseFloat(h):a,c=(s-a)/100,h=Math.round((h-a)/c),typeof o){case"string":l=o;break;case"function":l=o(i);break;case"object":if(Array.isArray(o)){var d=100/o.length,p=Math.floor(h/d);p=Math.min(p,o.length-1),p=Math.max(p,0),l=o[p];break}}return r.style.backgroundColor=l,r}}function BE(n,t={},e){var i=this.sanitizeHTML(n.getValue())||0,r=n.getElement(),s=t.max?t.max:100,a=t.min?t.min:0,o=t.legendAlign?t.legendAlign:"center",l,c,h,d,p;switch(c=parseFloat(i)<=s?parseFloat(i):s,c=parseFloat(c)>=a?parseFloat(c):a,l=(s-a)/100,c=Math.round((c-a)/l),typeof t.color){case"string":h=t.color;break;case"function":h=t.color(i);break;case"object":if(Array.isArray(t.color)){let v=100/t.color.length,x=Math.floor(c/v);x=Math.min(x,t.color.length-1),x=Math.max(x,0),h=t.color[x];break}default:h="#2DC214"}switch(typeof t.legend){case"string":d=t.legend;break;case"function":d=t.legend(i);break;case"boolean":d=i;break;default:d=!1}switch(typeof t.legendColor){case"string":p=t.legendColor;break;case"function":p=t.legendColor(i);break;case"object":if(Array.isArray(t.legendColor)){let v=100/t.legendColor.length,x=Math.floor(c/v);x=Math.min(x,t.legendColor.length-1),x=Math.max(x,0),p=t.legendColor[x]}break;default:p="#000"}r.style.minWidth="30px",r.style.position="relative",r.setAttribute("aria-label",c);var g=document.createElement("div");g.style.display="inline-block",g.style.width=c+"%",g.style.backgroundColor=h,g.style.height="100%",g.setAttribute("data-max",s),g.setAttribute("data-min",a);var m=document.createElement("div");if(m.style.position="relative",m.style.width="100%",m.style.height="100%",d){var _=document.createElement("div");_.style.position="absolute",_.style.top=0,_.style.left=0,_.style.textAlign=o,_.style.width="100%",_.style.color=p,_.innerHTML=d}return e(function(){if(!(n instanceof Nh)){var v=document.createElement("div");v.style.position="absolute",v.style.top="4px",v.style.bottom="4px",v.style.left="4px",v.style.right="4px",r.appendChild(v),r=v}r.appendChild(m),m.appendChild(g),d&&m.appendChild(_)}),""}function FE(n,t,e){return n.getElement().style.backgroundColor=this.sanitizeHTML(n.getValue()),""}function zE(n,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'}function jE(n,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}function HE(n,t,e){var i=n.getValue(),r=t.size||15,s=r+"px",a,o,l=t.hasOwnProperty("onValue")?t.onValue:!0,c=t.hasOwnProperty("offValue")?t.offValue:!1,h=t.onTruthy?i:i===l;return a=document.createElement("div"),a.classList.add("tabulator-toggle"),h?(a.classList.add("tabulator-toggle-on"),a.style.flexDirection="row-reverse",t.onColor&&(a.style.background=t.onColor)):t.offColor&&(a.style.background=t.offColor),a.style.width=2.5*r+"px",a.style.borderRadius=s,t.clickable&&a.addEventListener("click",d=>{n.setValue(h?c:l)}),o=document.createElement("div"),o.classList.add("tabulator-toggle-switch"),o.style.height=s,o.style.width=s,o.style.borderRadius=s,a.appendChild(o),a}function GE(n,t,e){var i=document.createElement("span"),r=n.getRow(),s=n.getTable();return r.watchPosition(a=>{t.relativeToPage&&(a+=s.modules.page.getPageSize()*(s.modules.page.getPage()-1)),i.innerText=a}),i}function UE(n,t,e){return n.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"}var VE={plaintext:ME,html:SE,textarea:kE,money:LE,link:TE,image:PE,tickCross:RE,datetime:OE,datetimediff:IE,lookup:AE,star:NE,traffic:DE,progress:BE,color:FE,buttonTick:zE,buttonCross:jE,toggle:HE,rownum:GE,handle:UE},Pd=class n extends xi{static moduleName="format";static formatters=VE;constructor(t){super(t),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(t){t.modules.format=this.lookupFormatter(t,""),typeof t.definition.formatterPrint<"u"&&(t.modules.format.print=this.lookupFormatter(t,"Print")),typeof t.definition.formatterClipboard<"u"&&(t.modules.format.clipboard=this.lookupFormatter(t,"Clipboard")),typeof t.definition.formatterHtmlOutput<"u"&&(t.modules.format.htmlOutput=this.lookupFormatter(t,"HtmlOutput"))}lookupFormatter(t,e){var i={params:t.definition["formatter"+e+"Params"]||{}},r=t.definition["formatter"+e];switch(typeof r){case"string":n.formatters[r]?i.formatter=n.formatters[r]:(console.warn("Formatter Error - No such formatter found: ",r),i.formatter=n.formatters.plaintext);break;case"function":i.formatter=r;break;default:i.formatter=n.formatters.plaintext;break}return i}cellRendered(t){t.modules.format&&t.modules.format.renderedCallback&&!t.modules.format.rendered&&(t.modules.format.renderedCallback(),t.modules.format.rendered=!0)}formatHeader(t,e,i){var r,s,a,o;return t.definition.titleFormatter?(r=this.getFormatter(t.definition.titleFormatter),a=l=>{t.titleFormatterRendered=l},o={getValue:function(){return e},getElement:function(){return i},getType:function(){return"header"},getColumn:function(){return t.getComponent()},getTable:()=>this.table},s=t.definition.titleFormatterParams||{},s=typeof s=="function"?s():s,r.call(this,o,s,a)):e}formatValue(t){var e=t.getComponent(),i=typeof t.column.modules.format.params=="function"?t.column.modules.format.params(e):t.column.modules.format.params;function r(s){t.modules.format||(t.modules.format={}),t.modules.format.renderedCallback=s,t.modules.format.rendered=!1}return t.column.modules.format.formatter.call(this,e,i,r)}formatExportValue(t,e){var i=t.column.modules.format[e],r;if(i){let s=function(a){t.modules.format||(t.modules.format={}),t.modules.format.renderedCallback=a,t.modules.format.rendered=!1};return r=typeof i.params=="function"?i.params(t.getComponent()):i.params,i.formatter.call(this,t.getComponent(),r,s)}else return this.formatValue(t)}sanitizeHTML(t){if(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=/]/g,function(i){return e[i]})}else return t}emptyToSpace(t){return t===null||typeof t>"u"||t===""?"&nbsp;":t}getFormatter(t){switch(typeof t){case"string":n.formatters[t]?t=n.formatters[t]:(console.warn("Formatter Error - No such formatter found: ",t),t=n.formatters.plaintext);break;case"function":break;default:t=n.formatters.plaintext;break}return t}},Rd=class extends xi{static moduleName="frozenColumns";constructor(t){super(t),this.leftColumns=[],this.rightColumns=[],this.initializationMode="left",this.active=!1,this.blocked=!0,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("column-add",this.reinitializeColumns.bind(this)),this.subscribe("column-deleted",this.reinitializeColumns.bind(this)),this.subscribe("column-hide",this.reinitializeColumns.bind(this)),this.subscribe("column-show",this.reinitializeColumns.bind(this)),this.subscribe("columns-loaded",this.reinitializeColumns.bind(this)),this.subscribe("table-redraw",this.layout.bind(this)),this.subscribe("layout-refreshing",this.blockLayout.bind(this)),this.subscribe("layout-refreshed",this.unblockLayout.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this))}blockLayout(){this.blocked=!0}unblockLayout(){this.blocked=!1}layoutCell(t){this.layoutElement(t.element,t.column)}reinitializeColumns(){this.reset(),this.table.columnManager.columnsByIndex.forEach(t=>{this.initializeColumn(t)}),this.layout()}initializeColumn(t){var e={margin:0,edge:!1};t.isGroup||(this.frozenCheck(t)?(e.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(t):this.rightColumns.unshift(t),this.active=!0,t.modules.frozen=e):this.initializationMode="right")}frozenCheck(t){return t.parent.isGroup&&t.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),t.parent.isGroup?this.frozenCheck(t.parent):t.definition.frozen}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(t){t.forEach(e=>{e.calcs.top&&this.layoutRow(e.calcs.top),e.calcs.bottom&&this.layoutRow(e.calcs.bottom),e.groupList&&e.groupList.length&&this.layoutGroupCalcs(e.groupList)})}layoutColumnPosition(t){var e=[],i=0,r=0;this.leftColumns.forEach((s,a)=>{if(s.modules.frozen.marginValue=i,s.modules.frozen.margin=s.modules.frozen.marginValue+"px",s.visible&&(i+=s.getWidth()),a==this.leftColumns.length-1?s.modules.frozen.edge=!0:s.modules.frozen.edge=!1,s.parent.isGroup){var o=this.getColGroupParentElement(s);e.includes(o)||(this.layoutElement(o,s),e.push(o)),o.classList.toggle("tabulator-frozen-left",s.modules.frozen.edge&&s.modules.frozen.position==="left"),o.classList.toggle("tabulator-frozen-right",s.modules.frozen.edge&&s.modules.frozen.position==="right")}else this.layoutElement(s.getElement(),s);t&&s.cells.forEach(l=>{this.layoutElement(l.getElement(!0),s)})}),this.rightColumns.forEach((s,a)=>{s.modules.frozen.marginValue=r,s.modules.frozen.margin=s.modules.frozen.marginValue+"px",s.visible&&(r+=s.getWidth()),a==this.rightColumns.length-1?s.modules.frozen.edge=!0:s.modules.frozen.edge=!1,s.parent.isGroup?this.layoutElement(this.getColGroupParentElement(s),s):this.layoutElement(s.getElement(),s),t&&s.cells.forEach(o=>{this.layoutElement(o.getElement(!0),s)})})}getColGroupParentElement(t){return t.parent.isGroup?this.getColGroupParentElement(t.parent):t.getElement()}layout(){this.active&&!this.blocked&&(this.layoutColumnPosition(),this.reinitializeRows(),this.layoutCalcRows())}reinitializeRows(){var t=this.table.rowManager.getVisibleRows(!0),e=this.table.rowManager.getRows().filter(i=>!t.includes(i));e.forEach(i=>{i.deinitialize()}),t.forEach(i=>{i.type==="row"&&this.layoutRow(i)})}layoutRow(t){this.table.options.layout==="fitDataFill"&&this.rightColumns.length&&(this.table.rowManager.getTableElement().style.minWidth="calc(100% - "+this.rightMargin+")"),this.leftColumns.forEach(e=>{var i=t.getCell(e);i&&this.layoutElement(i.getElement(!0),e)}),this.rightColumns.forEach(e=>{var i=t.getCell(e);i&&this.layoutElement(i.getElement(!0),e)})}layoutElement(t,e){var i;e.modules.frozen&&t&&(t.style.position="sticky",this.table.rtl?i=e.modules.frozen.position==="left"?"right":"left":i=e.modules.frozen.position,t.style[i]=e.modules.frozen.margin,t.classList.add("tabulator-frozen"),t.classList.toggle("tabulator-frozen-left",e.modules.frozen.edge&&e.modules.frozen.position==="left"),t.classList.toggle("tabulator-frozen-right",e.modules.frozen.edge&&e.modules.frozen.position==="right"))}adjustForScrollbar(t){this.rightColumns.length&&(this.table.columnManager.getContentsElement().style.width="calc(100% - "+t+"px)")}getFrozenColumns(){return this.leftColumns.concat(this.rightColumns)}_calcSpace(t,e){var i=0;for(let r=0;r<e;r++)t[r].visible&&(i+=t[r].getWidth());return i}},Od=class extends xi{static moduleName="frozenRows";constructor(t){super(t),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this)),this.registerTableOption("frozenRowsField","id"),this.registerTableOption("frozenRows",!1)}initialize(){var t=document.createDocumentFragment();this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),t.appendChild(document.createElement("br")),t.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(t,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10),this.table.options.frozenRows&&(this.subscribe("data-processed",this.initializeRows.bind(this)),this.subscribe("row-added",this.initializeRow.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this))),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}initializeRows(){this.table.rowManager.getRows().forEach(t=>{this.initializeRow(t)})}initializeRow(t){var e=this.table.options.frozenRows,i=typeof e;i==="number"?t.getPosition()&&t.getPosition()+this.rows.length<=e&&this.freezeRow(t):i==="function"?e.call(this.table,t.getComponent())&&this.freezeRow(t):Array.isArray(e)&&e.includes(t.data[this.options("frozenRowsField")])&&this.freezeRow(t)}isRowFrozen(t){var e=this.rows.indexOf(t);return e>-1}isFrozen(){return!!this.rows.length}visibleRows(t,e){return this.rows.forEach(i=>{e.push(i)}),e}getRows(t){var e=t.slice(0);return this.rows.forEach(function(i){var r=e.indexOf(i);r>-1&&e.splice(r,1)}),e}freezeRow(t){t.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(t.modules.frozen=!0,this.topElement.appendChild(t.getElement()),t.initialize(),t.normalizeHeight(),this.rows.push(t),this.refreshData(!1,"display"),this.table.rowManager.adjustTableSize(),this.styleRows())}unfreezeRow(t){t.modules.frozen?(t.modules.frozen=!1,this.detachRow(t),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(t){var e=this.rows.indexOf(t);if(e>-1){var i=t.getElement();i.parentNode&&i.parentNode.removeChild(i),this.rows.splice(e,1)}}styleRows(t){this.rows.forEach((e,i)=>{this.table.rowManager.styleRow(e,i)})}},Id=class{constructor(t){return this._group=t,this.type="GroupComponent",new Proxy(this,{get:function(e,i,r){return typeof e[i]<"u"?e[i]:e._group.groupManager.table.componentFunctionBinder.handle("group",e._group,i)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return this._group.parent?this._group.parent.getComponent():!1}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}scrollTo(t,e){return this._group.groupManager.table.rowManager.scrollToRow(this._group,t,e)}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}},il=class n{constructor(t,e,i,r,s,a,o){this.groupManager=t,this.parent=e,this.key=r,this.level=i,this.field=s,this.hasSubGroups=i<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=o,this.rows=[],this.groups=[],this.groupList=[],this.generator=a,this.element=!1,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=o?o.visible:typeof t.startOpen[i]<"u"?t.startOpen[i]:t.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(t){t||(this.groupList.length?this.groupList.forEach(function(e){e.wipe()}):this.rows.forEach(e=>{e.modules&&delete e.modules.group})),this.element=!1,this.arrowElement=!1,this.elementContents=!1}createElements(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach(e=>{this._createGroup(e,t)})}addBindings(){var t;this.groupManager.table.options.groupToggleElement&&(t=this.groupManager.table.options.groupToggleElement=="arrow"?this.arrowElement:this.element,t.addEventListener("click",e=>{this.groupManager.table.options.groupToggleElement==="arrow"&&(e.stopPropagation(),e.stopImmediatePropagation()),setTimeout(()=>{this.toggleVisibility()})}))}_createGroup(t,e){var i=e+"_"+t,r=new n(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],this.old?this.old.groups[i]:!1);this.groups[i]=r,this.groupList.push(r)}_addRowToGroup(t){var e=this.level+1;if(this.hasSubGroups){var i=this.groupManager.groupIDLookups[e].func(t.getData()),r=e+"_"+i;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[r]&&this.groups[r].addRow(t):(this.groups[r]||this._createGroup(i,e),this.groups[r].addRow(t))}}_addRow(t){this.rows.push(t),t.modules.group=this}insertRow(t,e,i){var r=this.conformRowData({});t.updateData(r);var s=this.rows.indexOf(e);s>-1?i?this.rows.splice(s+1,0,t):this.rows.splice(s,0,t):i?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(t){this.arrowElement&&(this.arrowElement.style.marginLeft=t,this.groupList.forEach(function(e){e.scrollHeader(t)}))}getRowIndex(t){}conformRowData(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t}removeRow(t){var e=this.rows.indexOf(t),i=t.getElement();e>-1&&this.rows.splice(e,1),!this.groupManager.table.options.groupValues&&!this.rows.length?(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0)):(i.parentNode&&i.parentNode.removeChild(i),this.groupManager.blockRedraw||(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)))}removeGroup(t){var e=t.level+"_"+t.key,i;this.groups[e]&&(delete this.groups[e],i=this.groupList.indexOf(t),i>-1&&this.groupList.splice(i,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(){var t=[];return t.push(this),this._visSet(),this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.visible?this.groupList.length?this.groupList.forEach(function(e){t=t.concat(e.getHeadersAndRows())}):(this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),t=t.concat(this.rows),this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))):!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&(this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))),t}getData(t,e){var i=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(r=>{i.push(r.getData(e||"data"))}),i}getRowCount(){var t=0;return this.groupList.length?this.groupList.forEach(e=>{t+=e.getRowCount()}):t=this.rows.length,t}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination?(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(t=>{var e=t.getHeadersAndRows();e.forEach(i=>{i.detachElement()})}):this.rows.forEach(t=>{var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.updateGroupRows(!0)):this.groupManager.updateGroupRows(!0),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var t=this.generateElement();this.groupList.length?this.groupList.forEach(e=>{var i=e.getHeadersAndRows();i.forEach(r=>{var s=r.getElement();t.parentNode.insertBefore(s,t.nextSibling),r.initialize(),t=s})}):this.rows.forEach(e=>{var i=e.getElement();t.parentNode.insertBefore(i,t.nextSibling),e.initialize(),t=i}),this.groupManager.updateGroupRows(!0)}else this.groupManager.updateGroupRows(!0);this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var t=[];typeof this.visible=="function"&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))}getRowGroup(t){var e=!1;return this.groupList.length?this.groupList.forEach(function(i){var r=i.getRowGroup(t);r&&(e=r)}):this.rows.find(function(i){return i===t})&&(e=this),e}getSubGroups(t){var e=[];return this.groupList.forEach(function(i){e.push(t?i.getComponent():i)}),e}getRows(t,e){var i=[];return e&&this.groupList.length?this.groupList.forEach(r=>{i=i.concat(r.getRows(t,e))}):this.rows.forEach(function(r){i.push(t?r.getComponent():r)}),i}generateGroupHeaderContents(){var t=[],e=this.getRows(!1,!0);for(e.forEach(function(i){t.push(i.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(t=[]){return t.unshift(this.key),this.parent&&this.parent.getPath(t),t}getElement(){return this.elementContents?this.element:this.generateElement()}generateElement(){this.addBindings=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(t){(!this.initialized||t)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Ir.elVisible(this.element)&&this.initialize(!0)}setHeight(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}rendered(){}getComponent(){return this.component||(this.component=new Id(this)),this.component}},Ad=class extends xi{static moduleName="groupRows";constructor(t){super(t),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayHandler=this.getRows.bind(this),this.blockRedraw=!1,this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.subscribe("table-destroy",this._blockRedrawing.bind(this)),this.subscribe("rows-wipe",this._blockRedrawing.bind(this)),this.subscribe("rows-wiped",this._restore_redrawing.bind(this)),this.table.options.groupBy&&(this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("table-built",this.configureGroupSetup.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}_blockRedrawing(){this.blockRedraw=!0}_restore_redrawing(){this.blockRedraw=!1}configureGroupSetup(){if(this.table.options.groupBy){var t=this.table.options.groupBy,e=this.table.options.groupStartOpen,i=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(t)&&Array.isArray(i)&&t.length>i.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(s,a)=>{this.headerGenerator[0]=(o,l,c)=>(typeof o>"u"?"":o)+"<span>("+l+" "+(l===1?s:a.groups.items)+")</span>"}),this.groupIDLookups=[],t)this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"){var r=this.table.columnManager.getRealColumns();r.forEach(s=>{s.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),s.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()})}Array.isArray(t)||(t=[t]),t.forEach((s,a)=>{var o,l;typeof s=="function"?o=s:(l=this.table.columnManager.getColumnByField(s),l?o=function(c){return l.getFieldValue(c)}:o=function(c){return c[s]}),this.groupIDLookups.push({field:typeof s=="function"?!1:s,func:o,values:this.allowedValues?this.allowedValues[a]:!1})}),e&&(Array.isArray(e)||(e=[e]),e.forEach(s=>{}),this.startOpen=e),i&&(this.headerGenerator=Array.isArray(i)?i:[i])}else this.groupList=[],this.groups={}}rowSample(t,e){if(this.table.options.groupBy){var i=this.getGroups(!1)[0];e.push(i.getRows(!1)[0])}return e}virtualRenderFill(){var t=this.table.rowManager.tableElement,e=this.table.rowManager.getVisibleRows();if(this.table.options.groupBy)e=e.filter(i=>i.type!=="group"),t.style.minWidth=e.length?"":this.table.columnManager.getWidth()+"px";else return e}rowAddingIndex(t,e,i){if(this.table.options.groupBy){this.assignRowToGroup(t);var r=t.modules.group.rows;return r.length>1&&(!e||e&&r.indexOf(e)==-1?i?r[0]!==t&&(e=r[0],this.table.rowManager.moveRowInArray(t.modules.group.rows,t,e,!i)):r[r.length-1]!==t&&(e=r[r.length-1],this.table.rowManager.moveRowInArray(t.modules.group.rows,t,e,!i)):this.table.rowManager.moveRowInArray(t.modules.group.rows,t,e,!i)),e}}trackChanges(){this.dispatch("group-changed")}setGroupBy(t){this.table.options.groupBy=t,this.initialized||this.initialize(),this.configureGroupSetup(),!t&&this.table.modExists("columnCalcs")&&this.table.options.columnCalcs===!0&&this.table.modules.columnCalcs.reinitializeCalcs(),this.refreshData(),this.trackChanges()}setGroupValues(t){this.table.options.groupValues=t,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(t){this.table.options.groupStartOpen=t,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(t){this.table.options.groupHeader=t,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(t){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(t){return t.modules.group?t.modules.group.getComponent():!1}rowMoving(t,e,i){if(this.table.options.groupBy){!i&&e instanceof il&&(e=this.table.rowManager.prevDisplayRow(t)||e);var r=e instanceof il?e:e.modules.group,s=t instanceof il?t:t.modules.group;r===s?this.table.rowManager.moveRowInArray(r.rows,t,e,i):(s&&s.removeRow(t),r.insertRow(t,e,i))}}rowDeleting(t){this.table.options.groupBy&&t.modules.group&&t.modules.group.removeRow(t)}rowsUpdated(t){this.table.options.groupBy&&this.updateGroupRows(!0)}cellUpdated(t){this.table.options.groupBy&&this.reassignRowToGroup(t.row)}getRows(t){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(t),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):t.slice(0)}getGroups(t){var e=[];return this.groupList.forEach(function(i){e.push(t?i.getComponent():i)}),e}getChildGroups(t){var e=[];return t||(t=this),t.groupList.forEach(i=>{i.groupList.length?e=e.concat(this.getChildGroups(i)):e.push(i)}),e}wipe(){this.table.options.groupBy&&(this.groupList.forEach(function(t){t.wipe()}),this.groupList=[],this.groups={})}pullGroupListData(t){var e=[];return t.forEach(i=>{var r={};r.level=0,r.rowCount=0,r.headerContent="";var s=[];i.hasSubGroups?(s=this.pullGroupListData(i.groupList),r.level=i.level,r.rowCount=s.length-i.groupList.length,r.headerContent=i.generator(i.key,r.rowCount,i.rows,i),e.push(r),e=e.concat(s)):(r.level=i.level,r.headerContent=i.generator(i.key,i.rows.length,i.rows,i),r.rowCount=i.getRows().length,e.push(r),i.getRows().forEach(a=>{e.push(a.getData("data"))}))}),e}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(t){var e=!1;return this.options("dataTree")&&(t=this.table.modules.dataTree.getTreeParentRoot(t)),this.groupList.forEach(i=>{var r=i.getRowGroup(t);r&&(e=r)}),e}countGroups(){return this.groupList.length}generateGroups(t){var e=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(i=>{this.createGroup(i,0,e)}),t.forEach(i=>{this.assignRowToExistingGroup(i,e)})):t.forEach(i=>{this.assignRowToGroup(i,e)}),Object.values(e).forEach(i=>{i.wipe(!0)})}createGroup(t,e,i){var r=e+"_"+t,s;i=i||[],s=new il(this,!1,e,t,this.groupIDLookups[0].field,this.headerGenerator[0],i[r]),this.groups[r]=s,this.groupList.push(s)}assignRowToExistingGroup(t,e){var i=this.groupIDLookups[0].func(t.getData()),r="0_"+i;this.groups[r]&&this.groups[r].addRow(t)}assignRowToGroup(t,e){var i=this.groupIDLookups[0].func(t.getData()),r=!this.groups["0_"+i];return r&&this.createGroup(i,0,e),this.groups["0_"+i].addRow(t),!r}reassignRowToGroup(t){if(t.type==="row"){var e=t.modules.group,i=e.getPath(),r=this.getExpectedPath(t),s;s=i.length==r.length&&i.every((a,o)=>a===r[o]),s||(e.removeRow(t),this.assignRowToGroup(t,this.groups),this.refreshData(!0))}}getExpectedPath(t){var e=[],i=t.getData();return this.groupIDLookups.forEach(r=>{e.push(r.func(i))}),e}updateGroupRows(t){var e=[];return this.blockRedraw||(this.groupList.forEach(i=>{e=e.concat(i.getHeadersAndRows())}),t&&this.refreshData(!0)),e}scrollHeaders(t){this.table.options.groupBy&&(this.table.options.renderHorizontal==="virtual"&&(t-=this.table.columnManager.renderer.vDomPadLeft),t=t+"px",this.groupList.forEach(e=>{e.scrollHeader(t)}))}removeGroup(t){var e=t.level+"_"+t.key,i;this.groups[e]&&(delete this.groups[e],i=this.groupList.indexOf(t),i>-1&&this.groupList.splice(i,1))}checkBasicModeGroupHeaderWidth(){var t=this.table.rowManager.tableElement,e=!0;this.table.rowManager.getDisplayRows().forEach((i,r)=>{this.table.rowManager.styleRow(i,r),t.appendChild(i.getElement()),i.initialize(!0),i.type!=="group"&&(e=!1)}),e?t.style.minWidth=this.table.columnManager.getWidth()+"px":t.style.minWidth=""}},qE={cellEdit:function(n){n.component.setValueProcessData(n.data.oldValue),n.component.cellRendered()},rowAdd:function(n){n.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowDelete:function(n){var t=this.table.rowManager.addRowActual(n.data.data,n.data.pos,n.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(n.component,t),this.table.rowManager.checkPlaceholder()},rowMove:function(n){var t=n.data.posFrom-n.data.posTo>0;this.table.rowManager.moveRowActual(n.component,this.table.rowManager.getRowFromPosition(n.data.posFrom),t),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},WE={cellEdit:function(n){n.component.setValueProcessData(n.data.newValue),n.component.cellRendered()},rowAdd:function(n){var t=this.table.rowManager.addRowActual(n.data.data,n.data.pos,n.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(n.component,t),this.table.rowManager.checkPlaceholder()},rowDelete:function(n){n.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowMove:function(n){this.table.rowManager.moveRowActual(n.component,this.table.rowManager.getRowFromPosition(n.data.posTo),n.data.after),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},XE={undo:["ctrl + 90","meta + 90"],redo:["ctrl + 89","meta + 89"]},$E={undo:function(n){var t=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t||(n.preventDefault(),this.table.modules.history.undo()))},redo:function(n){var t=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t||(n.preventDefault(),this.table.modules.history.redo()))}},YE={keybindings:{bindings:XE,actions:$E}},Nd=class n extends xi{static moduleName="history";static moduleExtensions=YE;static undoers=qE;static redoers=WE;constructor(t){super(t),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(t,e,i){this.action("rowMove",t,{posFrom:t.getPosition(),posTo:e.getPosition(),to:e,after:i})}rowAdded(t,e,i,r){this.action("rowAdd",t,{data:e,pos:i,index:r})}rowDeleted(t){var e,i;this.table.options.groupBy?(i=t.getComponent().getGroup()._getSelf().rows,e=i.indexOf(t),e&&(e=i[e-1])):(e=t.table.rowManager.getRowIndex(t),e&&(e=t.table.rowManager.rows[e-1])),this.action("rowDelete",t,{data:t.getData(),pos:!e,index:e})}cellUpdated(t){this.action("cellEdit",t,{oldValue:t.oldValue,newValue:t.value})}clear(){this.history=[],this.index=-1}action(t,e,i){this.history=this.history.slice(0,this.index+1),this.history.push({type:t,component:e,data:i}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(t){var e=this.history.findIndex(function(i){return i.component===t});e>-1&&(this.history.splice(e,1),e<=this.index&&this.index--,this.clearComponentHistory(t))}undo(){if(this.index>-1){let t=this.history[this.index];return n.undoers[t.type].call(this,t),this.index--,this.dispatchExternal("historyUndo",t.type,t.component.getComponent(),t.data),!0}else return console.warn(this.options("history")?"History Undo Error - No more history to undo":"History module not enabled"),!1}redo(){if(this.history.length-1>this.index){this.index++;let t=this.history[this.index];return n.redoers[t.type].call(this,t),this.dispatchExternal("historyRedo",t.type,t.component.getComponent(),t.data),!0}else return console.warn(this.options("history")?"History Redo Error - No more history to redo":"History module not enabled"),!1}_rebindRow(t,e){this.history.forEach(function(i){if(i.component instanceof ts)i.component===t&&(i.component=e);else if(i.component instanceof ga&&i.component.row===t){var r=i.component.column.getField();r&&(i.component=e.getCell(r))}})}},Dd=class extends xi{static moduleName="htmlTableImport";constructor(t){super(t),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&this.table.originalElement.tagName==="TABLE"&&(this.table.originalElement.childNodes.length?this.parseTable():console.warn("Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element."))}parseTable(){var t=this.table.originalElement,e=this.table.options,i=t.getElementsByTagName("th"),r=t.getElementsByTagName("tbody")[0],s=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),r=r?r.getElementsByTagName("tr"):[],this._extractOptions(t,e),i.length?this._extractHeaders(i,r):this._generateBlankHeaders(i,r);for(var a=0;a<r.length;a++){var o=r[a],l=o.getElementsByTagName("td"),c={};this.hasIndex||(c[e.index]=a);for(var h=0;h<l.length;h++){var d=l[h];typeof this.fieldIndex[h]<"u"&&(c[this.fieldIndex[h]]=d.innerHTML)}s.push(c)}e.data=s,this.dispatchExternal("htmlImported")}_extractOptions(t,e,i){var r=t.attributes,s=Object.keys(i||e),a={};s.forEach(h=>{a[h.toLowerCase()]=h});for(var o in r){var l=r[o],c;l&&typeof l=="object"&&l.name&&l.name.indexOf("tabulator-")===0&&(c=l.name.replace("tabulator-",""),typeof a[c]<"u"&&(e[a[c]]=this._attribValue(l.value)))}}_attribValue(t){return t==="true"?!0:t==="false"?!1:t}_findCol(t){var e=this.table.options.columns.find(i=>i.title===t);return e||!1}_extractHeaders(t,e){for(var i=0;i<t.length;i++){var r=t[i],s=!1,a=this._findCol(r.textContent),o;a?s=!0:a={title:r.textContent.trim()},a.field||(a.field=r.textContent.trim().toLowerCase().replaceAll(" ","_")),o=r.getAttribute("width"),o&&!a.width&&(a.width=o),this._extractOptions(r,a,this.table.columnManager.optionsList.registeredDefaults),this.fieldIndex[i]=a.field,a.field==this.table.options.index&&(this.hasIndex=!0),s||this.table.options.columns.push(a)}}_generateBlankHeaders(t,e){for(var i=0;i<t.length;i++){var r=t[i],s={title:"",field:"col"+i};this.fieldIndex[i]=s.field;var a=r.getAttribute("width");a&&(s.width=a),this.table.options.columns.push(s)}}};function ZE(n){var t=[],e=0,i=0,r=!1;for(let s=0;s<n.length;s++){let a=n[s],o=n[s+1];if(t[e]||(t[e]=[]),t[e][i]||(t[e][i]=""),a=='"'&&r&&o=='"'){t[e][i]+=a,s++;continue}if(a=='"'){r=!r;continue}if(a==","&&!r){i++;continue}if(a=="\r"&&o==`
`&&!r){i=0,e++,s++;continue}if((a=="\r"||a==`
`)&&!r){i=0,e++;continue}t[e][i]+=a}return t}function KE(n){try{return JSON.parse(n)}catch(t){return console.warn("JSON Import Error - File contents is invalid JSON",t),Promise.reject()}}function JE(n){return n}function QE(n,t){var e=XLSX.read(n),i=e.Sheets[e.SheetNames[0]];return XLSX.utils.sheet_to_json(i,{})}var tC={csv:ZE,json:KE,array:JE,xlsx:QE},Bd=class n extends xi{static moduleName="import";static importers=tC;constructor(t){super(t),this.registerTableOption("importFormat"),this.registerTableOption("importReader","text")}initialize(){this.registerTableFunction("import",this.importFromFile.bind(this)),this.table.options.importFormat&&(this.subscribe("data-loading",this.loadDataCheck.bind(this),10),this.subscribe("data-load",this.loadData.bind(this),10))}loadDataCheck(t){return this.table.options.importFormat&&(typeof t=="string"||Array.isArray(t)&&t.length&&Array.isArray(t))}loadData(t,e,i,r,s){return this.importData(this.lookupImporter(),t).then(this.structureData.bind(this)).catch(a=>(console.error("Import Error:",a||"Unable to import data"),Promise.reject(a)))}lookupImporter(t){var e;return t||(t=this.table.options.importFormat),typeof t=="string"?e=n.importers[t]:e=t,e||console.error("Import Error - Importer not found:",t),e}importFromFile(t,e,i){var r=this.lookupImporter(t);if(r)return this.pickFile(e,i).then(this.importData.bind(this,r)).then(this.structureData.bind(this)).then(this.setData.bind(this)).catch(s=>(this.dispatch("import-error",s),this.dispatchExternal("importError",s),console.error("Import Error:",s||"Unable to import file"),Promise.reject(s)))}pickFile(t,e){return new Promise((i,r)=>{var s=document.createElement("input");s.type="file",s.accept=t,s.addEventListener("change",a=>{var o=s.files[0],l=new FileReader;switch(this.dispatch("import-importing",s.files),this.dispatchExternal("importImporting",s.files),e||this.table.options.importReader){case"buffer":l.readAsArrayBuffer(o);break;case"binary":l.readAsBinaryString(o);break;case"url":l.readAsDataURL(o);break;case"text":default:l.readAsText(o)}l.onload=c=>{i(l.result)},l.onerror=c=>{console.warn("File Load Error - Unable to read file"),r()}}),this.dispatch("import-choose"),this.dispatchExternal("importChoose"),s.click()})}importData(t,e){var i=t.call(this.table,e);return i instanceof Promise?i:i?Promise.resolve(i):Promise.reject()}structureData(t){var e=[];return Array.isArray(t)&&t.length&&Array.isArray(t[0])?(this.table.options.autoColumns?e=this.structureArrayToObject(t):e=this.structureArrayToColumns(t),e):t}structureArrayToObject(t){var e=t.shift(),i=t.map(r=>{var s={};return e.forEach((a,o)=>{s[a]=r[o]}),s});return i}structureArrayToColumns(t){var e=[],i=this.table.getColumns();return i[0]&&t[0][0]&&i[0].getDefinition().title===t[0][0]&&t.shift(),t.forEach(r=>{var s={};r.forEach((a,o)=>{var l=i[o];l&&(s[l.getField()]=a)}),e.push(s)}),e}setData(t){return this.dispatch("import-imported",t),this.dispatchExternal("importImported",t),this.table.setData(t)}},Fd=class extends xi{static moduleName="interaction";constructor(t){super(t),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowMouseDown:"row-mousedown",rowMouseUp:"row-mouseup",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellMouseDown:"cell-mousedown",cellMouseUp:"cell-mouseup",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerMouseDown:"column-mousedown",headerMouseUp:"column-mouseup",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupMouseDown:"group-mousedown",groupMouseUp:"group-mouseup",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null},group:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerMouseDown"),this.registerColumnOption("headerMouseUp"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellMouseDown"),this.registerColumnOption("cellMouseUp"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this)),this.subscribe("scroll-horizontal",this.clearTouchWatchers.bind(this)),this.subscribe("scroll-vertical",this.clearTouchWatchers.bind(this))}clearTouchWatchers(){var t=Object.values(this.touchWatchers);t.forEach(e=>{for(let i in e)e[i]=null})}cellContentsSelectionFixer(t,e){var i;if(!(this.table.modExists("edit")&&this.table.modules.edit.currentCell===e)){t.preventDefault();try{document.selection?(i=document.body.createTextRange(),i.moveToElementText(e.getElement()),i.select()):window.getSelection&&(i=document.createRange(),i.selectNode(e.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(i))}catch{}}}initializeExternalEvents(){for(let t in this.eventMap)this.subscriptionChangeExternal(t,this.subscriptionChanged.bind(this,t))}subscriptionChanged(t,e){e?this.subscribers[t]||(this.eventMap[t].includes("-")?(this.subscribers[t]=this.handle.bind(this,t),this.subscribe(this.eventMap[t],this.subscribers[t])):this.subscribeTouchEvents(t)):this.eventMap[t].includes("-")?this.subscribers[t]&&!this.columnSubscribers[t]&&!this.subscribedExternal(t)&&(this.unsubscribe(this.eventMap[t],this.subscribers[t]),delete this.subscribers[t]):this.unsubscribeTouchEvents(t)}subscribeTouchEvents(t){var e=this.eventMap[t];this.touchSubscribers[e+"-touchstart"]||(this.touchSubscribers[e+"-touchstart"]=this.handleTouch.bind(this,e,"start"),this.touchSubscribers[e+"-touchend"]=this.handleTouch.bind(this,e,"end"),this.subscribe(e+"-touchstart",this.touchSubscribers[e+"-touchstart"]),this.subscribe(e+"-touchend",this.touchSubscribers[e+"-touchend"])),this.subscribers[t]=!0}unsubscribeTouchEvents(t){var e=!0,i=this.eventMap[t];if(this.subscribers[t]&&!this.subscribedExternal(t)){delete this.subscribers[t];for(let r in this.eventMap)this.eventMap[r]===i&&this.subscribers[r]&&(e=!1);e&&(this.unsubscribe(i+"-touchstart",this.touchSubscribers[i+"-touchstart"]),this.unsubscribe(i+"-touchend",this.touchSubscribers[i+"-touchend"]),delete this.touchSubscribers[i+"-touchstart"],delete this.touchSubscribers[i+"-touchend"])}}initializeColumn(t){var e=t.definition;for(let i in this.eventMap)e[i]&&(this.subscriptionChanged(i,!0),this.columnSubscribers[i]||(this.columnSubscribers[i]=[]),this.columnSubscribers[i].push(t))}handle(t,e,i){this.dispatchEvent(t,e,i)}handleTouch(t,e,i,r){var s=this.touchWatchers[t];switch(t==="column"&&(t="header"),e){case"start":s.tap=!0,clearTimeout(s.tapHold),s.tapHold=setTimeout(()=>{clearTimeout(s.tapHold),s.tapHold=null,s.tap=null,clearTimeout(s.tapDbl),s.tapDbl=null,this.dispatchEvent(t+"TapHold",i,r)},1e3);break;case"end":s.tap&&(s.tap=null,this.dispatchEvent(t+"Tap",i,r)),s.tapDbl?(clearTimeout(s.tapDbl),s.tapDbl=null,this.dispatchEvent(t+"DblTap",i,r)):s.tapDbl=setTimeout(()=>{clearTimeout(s.tapDbl),s.tapDbl=null},300),clearTimeout(s.tapHold),s.tapHold=null;break}}dispatchEvent(t,e,i){var r=i.getComponent(),s;this.columnSubscribers[t]&&(i instanceof ga?s=i.column.definition[t]:i instanceof ma&&(s=i.definition[t]),s&&s(e,r)),this.dispatchExternal(t,e,r)}},eC={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,navLeft:37,navRight:39,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35},iC={keyBlock:function(n){n.stopPropagation(),n.preventDefault()},scrollPageUp:function(n){var t=this.table.rowManager,e=t.scrollTop-t.element.clientHeight;n.preventDefault(),t.displayRowsCount&&(e>=0?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(n){var t=this.table.rowManager,e=t.scrollTop+t.element.clientHeight,i=t.element.scrollHeight;n.preventDefault(),t.displayRowsCount&&(e<=i?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(n){var t=this.table.rowManager;n.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(n){var t=this.table.rowManager;n.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(n){this.dispatch("keybinding-nav-prev",n)},navNext:function(n){this.dispatch("keybinding-nav-next",n)},navLeft:function(n){this.dispatch("keybinding-nav-left",n)},navRight:function(n){this.dispatch("keybinding-nav-right",n)},navUp:function(n){this.dispatch("keybinding-nav-up",n)},navDown:function(n){this.dispatch("keybinding-nav-down",n)}},zd=class n extends xi{static moduleName="keybindings";static bindings=eC;static actions=iC;constructor(t){super(t),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",{}),this.registerTableOption("tabEndNewRow",!1)}initialize(){var t=this.table.options.keybindings,e={};this.watchKeys={},this.pressedKeys=[],t!==!1&&(Object.assign(e,n.bindings),Object.assign(e,t),this.mapBindings(e),this.bindEvents()),this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(t){for(let e in t)n.actions[e]?t[e]&&(typeof t[e]!="object"&&(t[e]=[t[e]]),t[e].forEach(i=>{var r=Array.isArray(i)?i:[i];r.forEach(s=>{this.mapBinding(e,s)})})):console.warn("Key Binding Error - no such action:",e)}mapBinding(t,e){var i={action:n.actions[t],keys:[],ctrl:!1,shift:!1,meta:!1},r=e.toString().toLowerCase().split(" ").join("").split("+");r.forEach(s=>{switch(s){case"ctrl":i.ctrl=!0;break;case"shift":i.shift=!0;break;case"meta":i.meta=!0;break;default:s=isNaN(s)?s.toUpperCase().charCodeAt(0):parseInt(s),i.keys.push(s),this.watchKeys[s]||(this.watchKeys[s]=[]),this.watchKeys[s].push(i)}})}bindEvents(){var t=this;this.keyupBinding=function(e){var i=e.keyCode,r=t.watchKeys[i];r&&(t.pressedKeys.push(i),r.forEach(function(s){t.checkBinding(e,s)}))},this.keydownBinding=function(e){var i=e.keyCode,r=t.watchKeys[i];if(r){var s=t.pressedKeys.indexOf(i);s>-1&&t.pressedKeys.splice(s,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(t,e){var i=!0;return t.ctrlKey==e.ctrl&&t.shiftKey==e.shift&&t.metaKey==e.meta?(e.keys.forEach(r=>{var s=this.pressedKeys.indexOf(r);s==-1&&(i=!1)}),i&&e.action.call(this,t),!0):!1}},jd=class extends xi{static moduleName="menu";constructor(t){super(t),this.menuContainer=null,this.nestedMenuBlock=!1,this.currentComponent=null,this.rootPopup=null,this.columnSubscribers={},this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("rowDblClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerTableOption("groupDblClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerClickMenu"),this.registerColumnOption("headerDblClickMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("headerMenuIcon"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu"),this.registerColumnOption("dblClickMenu")}initialize(){this.deprecatedOptionsCheck(),this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeRowWatchers(){this.table.options.rowContextMenu&&(this.subscribe("row-contextmenu",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu)),this.table.on("rowTapHold",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu))),this.table.options.rowClickMenu&&this.subscribe("row-click",this.loadMenuEvent.bind(this,this.table.options.rowClickMenu)),this.table.options.rowDblClickMenu&&this.subscribe("row-dblclick",this.loadMenuEvent.bind(this,this.table.options.rowDblClickMenu))}initializeGroupWatchers(){this.table.options.groupContextMenu&&(this.subscribe("group-contextmenu",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu)),this.table.on("groupTapHold",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu))),this.table.options.groupClickMenu&&this.subscribe("group-click",this.loadMenuEvent.bind(this,this.table.options.groupClickMenu)),this.table.options.groupDblClickMenu&&this.subscribe("group-dblclick",this.loadMenuEvent.bind(this,this.table.options.groupDblClickMenu))}initializeColumn(t){var e=t.definition;e.headerContextMenu&&!this.columnSubscribers.headerContextMenu&&(this.columnSubscribers.headerContextMenu=this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextMenu),this.table.on("headerTapHold",this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"))),e.headerClickMenu&&!this.columnSubscribers.headerClickMenu&&(this.columnSubscribers.headerClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerClickMenu"),this.subscribe("column-click",this.columnSubscribers.headerClickMenu)),e.headerDblClickMenu&&!this.columnSubscribers.headerDblClickMenu&&(this.columnSubscribers.headerDblClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerDblClickMenu"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickMenu)),e.headerMenu&&this.initializeColumnHeaderMenu(t),e.contextMenu&&!this.columnSubscribers.contextMenu&&(this.columnSubscribers.contextMenu=this.loadMenuTableCellEvent.bind(this,"contextMenu"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextMenu),this.table.on("cellTapHold",this.loadMenuTableCellEvent.bind(this,"contextMenu"))),e.clickMenu&&!this.columnSubscribers.clickMenu&&(this.columnSubscribers.clickMenu=this.loadMenuTableCellEvent.bind(this,"clickMenu"),this.subscribe("cell-click",this.columnSubscribers.clickMenu)),e.dblClickMenu&&!this.columnSubscribers.dblClickMenu&&(this.columnSubscribers.dblClickMenu=this.loadMenuTableCellEvent.bind(this,"dblClickMenu"),this.subscribe("cell-dblclick",this.columnSubscribers.dblClickMenu))}initializeColumnHeaderMenu(t){var e=t.definition.headerMenuIcon,i;i=document.createElement("span"),i.classList.add("tabulator-header-popup-button"),e?(typeof e=="function"&&(e=e(t.getComponent())),e instanceof HTMLElement?i.appendChild(e):i.innerHTML=e):i.innerHTML="&vellip;",i.addEventListener("click",r=>{r.stopPropagation(),r.preventDefault(),this.loadMenuEvent(t.definition.headerMenu,r,t)}),t.titleElement.insertBefore(i,t.titleElement.firstChild)}loadMenuTableCellEvent(t,e,i){i._cell&&(i=i._cell),i.column.definition[t]&&this.loadMenuEvent(i.column.definition[t],e,i)}loadMenuTableColumnEvent(t,e,i){i._column&&(i=i._column),i.definition[t]&&this.loadMenuEvent(i.definition[t],e,i)}loadMenuEvent(t,e,i){i._group?i=i._group:i._row&&(i=i._row),t=typeof t=="function"?t.call(this.table,e,i.getComponent()):t,this.loadMenu(e,i,t)}loadMenu(t,e,i,r,s){var a=!(t instanceof MouseEvent),o=document.createElement("div"),l;if(o.classList.add("tabulator-menu"),a||t.preventDefault(),!(!i||!i.length)){if(r)l=s.child(o);else{if(this.nestedMenuBlock){if(this.rootPopup)return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.rootPopup&&this.rootPopup.hide(),this.rootPopup=l=this.popup(o)}i.forEach(c=>{var h=document.createElement("div"),d=c.label,p=c.disabled;c.separator?h.classList.add("tabulator-menu-separator"):(h.classList.add("tabulator-menu-item"),typeof d=="function"&&(d=d.call(this.table,e.getComponent())),d instanceof Node?h.appendChild(d):h.innerHTML=d,typeof p=="function"&&(p=p.call(this.table,e.getComponent())),p?(h.classList.add("tabulator-menu-item-disabled"),h.addEventListener("click",g=>{g.stopPropagation()})):c.menu&&c.menu.length?h.addEventListener("click",g=>{g.stopPropagation(),this.loadMenu(g,e,c.menu,h,l)}):c.action&&h.addEventListener("click",g=>{c.action(g,e.getComponent())}),c.menu&&c.menu.length&&h.classList.add("tabulator-menu-item-submenu")),o.appendChild(h)}),o.addEventListener("click",c=>{this.rootPopup&&this.rootPopup.hide()}),l.show(r||t),l===this.rootPopup&&(this.rootPopup.hideOnBlur(()=>{this.rootPopup=null,this.currentComponent&&(this.dispatch("menu-closed",i,l),this.dispatchExternal("menuClosed",this.currentComponent.getComponent()),this.currentComponent=null)}),this.currentComponent=e,this.dispatch("menu-opened",i,l),this.dispatchExternal("menuOpened",e.getComponent()))}}},Hd=class extends xi{static moduleName="moveColumn";constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.classList.add("tabulator-col-placeholder"),t}initialize(){this.table.options.movableColumns&&(this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("alert-show",this.abortMove.bind(this)))}abortMove(){clearTimeout(this.checkTimeout)}initializeColumn(t){var e=this,i={},r;!t.modules.frozen&&!t.isGroup&&!t.isRowHeader&&(r=t.getElement(),i.mousemove=function(s){t.parent===e.moving.parent&&((e.touchMove?s.touches[0].pageX:s.pageX)-Ir.elOffset(r).left+e.table.columnManager.contentsElement.scrollLeft>t.getWidth()/2?(e.toCol!==t||!e.toColAfter)&&(r.parentNode.insertBefore(e.placeholderElement,r.nextSibling),e.moveColumn(t,!0)):(e.toCol!==t||e.toColAfter)&&(r.parentNode.insertBefore(e.placeholderElement,r),e.moveColumn(t,!1)))}.bind(e),r.addEventListener("mousedown",function(s){e.touchMove=!1,s.which===1&&(e.checkTimeout=setTimeout(function(){e.startMove(s,t)},e.checkPeriod))}),r.addEventListener("mouseup",function(s){s.which===1&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),e.bindTouchEvents(t)),t.modules.moveColumn=i}bindTouchEvents(t){var e=t.getElement(),i=!1,r,s,a,o,l,c;e.addEventListener("touchstart",h=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,r=t.nextColumn(),a=r?r.getWidth()/2:0,s=t.prevColumn(),o=s?s.getWidth()/2:0,l=0,c=0,i=!1,this.startMove(h,t)},this.checkPeriod)},{passive:!0}),e.addEventListener("touchmove",h=>{var d,p;this.moving&&(this.moveHover(h),i||(i=h.touches[0].pageX),d=h.touches[0].pageX-i,d>0?r&&d-l>a&&(p=r,p!==t&&(i=h.touches[0].pageX,p.getElement().parentNode.insertBefore(this.placeholderElement,p.getElement().nextSibling),this.moveColumn(p,!0))):s&&-d-c>o&&(p=s,p!==t&&(i=h.touches[0].pageX,p.getElement().parentNode.insertBefore(this.placeholderElement,p.getElement()),this.moveColumn(p,!1))),p&&(r=p.nextColumn(),l=a,a=r?r.getWidth()/2:0,s=p.prevColumn(),c=o,o=s?s.getWidth()/2:0))},{passive:!0}),e.addEventListener("touchend",h=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(h)})}startMove(t,e){var i=e.getElement(),r=this.table.columnManager.getContentsElement(),s=this.table.columnManager.getHeadersElement();this.table.modules.selectRange&&this.table.modules.selectRange.columnSelection&&this.table.modules.selectRange.mousedown&&this.table.modules.selectRange.selecting==="column"||(this.moving=e,this.startX=(this.touchMove?t.touches[0].pageX:t.pageX)-Ir.elOffset(i).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),r.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=r.clientHeight-s.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(t),this.dispatch("column-moving",t,this.moving))}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveColumn.mousemove)})}moveColumn(t,e){var i=this.moving.getCells();this.toCol=t,this.toColAfter=e,e?t.getCells().forEach(function(r,s){var a=r.getElement(!0);a.parentNode&&i[s]&&a.parentNode.insertBefore(i[s].getElement(),a.nextSibling)}):t.getCells().forEach(function(r,s){var a=r.getElement(!0);a.parentNode&&i[s]&&a.parentNode.insertBefore(i[s].getElement(),a)})}endMove(t){(t.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(t){var e=this.table.columnManager.getContentsElement(),i=e.scrollLeft,r=(this.touchMove?t.touches[0].pageX:t.pageX)-Ir.elOffset(e).left+i,s;this.hoverElement.style.left=r-this.startX+"px",r-i<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{s=Math.max(0,i-5),this.table.rowManager.getElement().scrollLeft=s,this.autoScrollTimeout=!1},1))),i+e.clientWidth-r<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{s=Math.min(e.clientWidth,i+5),this.table.rowManager.getElement().scrollLeft=s,this.autoScrollTimeout=!1},1)))}},rC={delete:function(n,t,e){n.delete()}},nC={insert:function(n,t,e){return this.table.addRow(n.getData(),void 0,t),!0},add:function(n,t,e){return this.table.addRow(n.getData()),!0},update:function(n,t,e){return t?(t.update(n.getData()),!0):!1},replace:function(n,t,e){return t?(this.table.addRow(n.getData(),void 0,t),t.delete(),!0):!1}},Gd=class n extends xi{static moduleName="moveRow";static senders=rC;static receivers=nC;constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(t){var e=this,i={};i.mouseup=function(r){e.tableRowDrop(r,t)}.bind(e),i.mousemove=function(r){var s;r.pageY-Ir.elOffset(t.element).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?(e.toRow!==t||!e.toRowAfter)&&(s=t.getElement(),s.parentNode.insertBefore(e.placeholderElement,s.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(s=t.getElement(),s.previousSibling&&(s.parentNode.insertBefore(e.placeholderElement,s),e.moveRow(t,!1)))}.bind(e),t.modules.moveRow=i}initializeRow(t){var e=this,i={},r;i.mouseup=function(s){e.tableRowDrop(s,t)}.bind(e),i.mousemove=function(s){var a=t.getElement();s.pageY-Ir.elOffset(a).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?(e.toRow!==t||!e.toRowAfter)&&(a.parentNode.insertBefore(e.placeholderElement,a.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(a.parentNode.insertBefore(e.placeholderElement,a),e.moveRow(t,!1))}.bind(e),this.hasHandle||(r=t.getElement(),r.addEventListener("mousedown",function(s){s.which===1&&(e.checkTimeout=setTimeout(function(){e.startMove(s,t)},e.checkPeriod))}),r.addEventListener("mouseup",function(s){s.which===1&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t,t.getElement())),t.modules.moveRow=i}initializeColumn(t){t.definition.rowHandle&&this.table.options.movableRows!==!1&&(this.hasHandle=!0)}initializeCell(t){if(t.column.definition.rowHandle&&this.table.options.movableRows!==!1){var e=this,i=t.getElement(!0);i.addEventListener("mousedown",function(r){r.which===1&&(e.checkTimeout=setTimeout(function(){e.startMove(r,t.row)},e.checkPeriod))}),i.addEventListener("mouseup",function(r){r.which===1&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t.row,i)}}bindTouchEvents(t,e){var i=!1,r,s,a,o,l,c;e.addEventListener("touchstart",h=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,r=t.nextRow(),a=r?r.getHeight()/2:0,s=t.prevRow(),o=s?s.getHeight()/2:0,l=0,c=0,i=!1,this.startMove(h,t)},this.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,e.addEventListener("touchmove",h=>{var d,p;this.moving&&(h.preventDefault(),this.moveHover(h),i||(i=h.touches[0].pageY),d=h.touches[0].pageY-i,d>0?r&&d-l>a&&(p=r,p!==t&&(i=h.touches[0].pageY,p.getElement().parentNode.insertBefore(this.placeholderElement,p.getElement().nextSibling),this.moveRow(p,!0))):s&&-d-c>o&&(p=s,p!==t&&(i=h.touches[0].pageY,p.getElement().parentNode.insertBefore(this.placeholderElement,p.getElement()),this.moveRow(p,!1))),p&&(r=p.nextRow(),l=a,a=r?r.getHeight()/2:0,s=p.prevRow(),c=o,o=s?s.getHeight()/2:0))}),e.addEventListener("touchend",h=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(h),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{(t.type==="row"||t.type==="group")&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{(t.type==="row"||t.type==="group")&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})}startMove(t,e){var i=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i)),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.dispatchExternal("rowMoving",e.getComponent()),this.moveHover(t)}setStartPosition(t,e){var i=this.touchMove?t.touches[0].pageX:t.pageX,r=this.touchMove?t.touches[0].pageY:t.pageY,s,a;s=e.getElement(),this.connection?(a=s.getBoundingClientRect(),this.startX=a.left-i+window.pageXOffset,this.startY=a.top-r+window.pageYOffset):this.startY=r-s.getBoundingClientRect().top}endMove(t){(!t||t.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow?this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter):this.dispatchExternal("rowMoveCancelled",this.moving.getComponent()),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(t,e){this.toRow=t,this.toRowAfter=e}moveHover(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)}moveHoverTable(t){var e=this.table.rowManager.getElement(),i=e.scrollTop,r=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+i;this.hoverElement.style.top=Math.min(r-this.startY,this.table.rowManager.element.scrollHeight-this.hoverElement.offsetHeight)+"px"}moveHoverConnections(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"}elementRowDrop(t,e,i){this.dispatchExternal("movableRowsElementDrop",t,e,i?i.getComponent():!1)}connectToTables(t){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",e),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:t})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(i=>{typeof i=="string"?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(i))):this.connectionElements.push(i)}),this.connectionElements.forEach(i=>{var r=s=>{this.elementRowDrop(s,i,this.moving)};i.addEventListener("mouseup",r),i.tabulatorElementDropEvent=r,i.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",t),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(e=>{e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent})}connect(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(i=>{i.type==="row"&&i.modules.moveRow&&i.modules.moveRow.mouseup&&i.getElement().addEventListener("mouseup",i.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",e,t),!0)}disconnect(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(e=>{e.type==="row"&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",t)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(t,e,i){var r=!1;if(i){switch(typeof this.table.options.movableRowsSender){case"string":r=n.senders[this.table.options.movableRowsSender];break;case"function":r=this.table.options.movableRowsSender;break}r?r.call(this,this.moving?this.moving.getComponent():void 0,e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()}tableRowDrop(t,e){var i=!1,r=!1;switch(t.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":i=n.receivers[this.table.options.movableRowsReceiver];break;case"function":i=this.table.options.movableRowsReceiver;break}i?r=i.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),r?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:e,success:r})}commsReceived(t,e,i){switch(e){case"connect":return this.connect(t,i.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,i.row,i.success)}}},sC={},Ud=class n extends xi{static moduleName="mutator";static mutators=sC;constructor(t){super(t),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams"),this.registerColumnOption("mutateLink")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("cell-value-changed",this.mutateLink.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(t,e,i){return this.transformRow(e,"data",i)}initializeColumn(t){var e=!1,i={};this.allowedTypes.forEach(r=>{var s="mutator"+(r.charAt(0).toUpperCase()+r.slice(1)),a;t.definition[s]&&(a=this.lookupMutator(t.definition[s]),a&&(e=!0,i[s]={mutator:a,params:t.definition[s+"Params"]||{}}))}),e&&(t.modules.mutate=i)}lookupMutator(t){var e=!1;switch(typeof t){case"string":n.mutators[t]?e=n.mutators[t]:console.warn("Mutator Error - No such mutator found, ignoring: ",t);break;case"function":e=t;break}return e}transformRow(t,e,i){var r="mutator"+(e.charAt(0).toUpperCase()+e.slice(1)),s;return this.enabled&&this.table.columnManager.traverse(a=>{var o,l,c;a.modules.mutate&&(o=a.modules.mutate[r]||a.modules.mutate.mutator||!1,o&&(s=a.getFieldValue(typeof i<"u"?i:t),(e=="data"&&!i||typeof s<"u")&&(c=a.getComponent(),l=typeof o.params=="function"?o.params(s,t,e,c):o.params,a.setFieldValue(t,o.mutator(s,t,e,l,c)))))}),t}transformCell(t,e){if(t.column.modules.mutate){var i=t.column.modules.mutate.mutatorEdit||t.column.modules.mutate.mutator||!1,r={};if(i)return r=Object.assign(r,t.row.getData()),t.column.setFieldValue(r,e),i.mutator(e,r,"edit",i.params,t.getComponent())}return e}mutateLink(t){var e=t.column.definition.mutateLink;e&&(Array.isArray(e)||(e=[e]),e.forEach(i=>{var r=t.row.getCell(i);r&&r.setValue(r.getValue(),!0,!0)}))}enable(){this.enabled=!0}disable(){this.enabled=!1}};function oC(n,t,e,i,r){var s=document.createElement("span"),a=document.createElement("span"),o=document.createElement("span"),l=document.createElement("span"),c=document.createElement("span"),h=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",d=>{a.innerHTML=d}),this.table.modules.localize.langBind("pagination|counter|of",d=>{l.innerHTML=d}),this.table.modules.localize.langBind("pagination|counter|rows",d=>{h.innerHTML=d}),i?(o.innerHTML=" "+t+"-"+Math.min(t+n-1,i)+" ",c.innerHTML=" "+i+" ",s.appendChild(a),s.appendChild(o),s.appendChild(l),s.appendChild(c),s.appendChild(h)):(o.innerHTML=" 0 ",s.appendChild(a),s.appendChild(o),s.appendChild(h)),s}function aC(n,t,e,i,r){var s=document.createElement("span"),a=document.createElement("span"),o=document.createElement("span"),l=document.createElement("span"),c=document.createElement("span"),h=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",d=>{a.innerHTML=d}),o.innerHTML=" "+e+" ",this.table.modules.localize.langBind("pagination|counter|of",d=>{l.innerHTML=d}),c.innerHTML=" "+r+" ",this.table.modules.localize.langBind("pagination|counter|pages",d=>{h.innerHTML=d}),s.appendChild(a),s.appendChild(o),s.appendChild(l),s.appendChild(c),s.appendChild(h),s}var lC={rows:oC,pages:aC},Vd=class n extends xi{static moduleName="page";static pageCounters=lC;constructor(t){super(t),this.mode="local",this.progressiveLoad=!1,this.element=null,this.pageCounterElement=null,this.pageCounter=null,this.size=0,this.page=1,this.count=5,this.max=1,this.remoteRowCountEstimate=null,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationCounter",!1),this.registerTableOption("paginationCounterElement",!1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("footer-redraw",this.footerRedraw.bind(this)),this.table.options.paginationAddRow=="page"&&this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.table.options.paginationMode==="remote"&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePageCounter(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),this.table.options.progressiveLoad==="scroll"&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(t,e){var i=this.table.rowManager,r=i.getDisplayRows(),s;return e?r.length?s=r[0]:i.activeRows.length&&(s=i.activeRows[i.activeRows.length-1],e=!1):r.length&&(s=r[r.length-1],e=!(r.length<this.size)),{index:s,top:e}}calculatePageSizes(){var t,e;this.table.options.paginationSize?this.size=this.table.options.paginationSize:(t=document.createElement("div"),t.classList.add("tabulator-row"),t.style.visibility="hidden",e=document.createElement("div"),e.classList.add("tabulator-cell"),e.innerHTML="Page Row Test",t.appendChild(e),this.table.rowManager.getTableElement().appendChild(t),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/t.offsetHeight),this.table.rowManager.getTableElement().removeChild(t)),this.dispatchExternal("pageSizeChanged",this.size),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(t,e,i,r){return this.initialLoad||(this.progressiveLoad&&!i||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),r.page=this.page,this.size&&(r.size=this.size),r}userSetPageToRow(t){return this.table.options.pagination&&(t=this.table.rowManager.findRow(t),t)?this.setPageToRow(t):Promise.reject()}userSetPageSize(t){return this.table.options.pagination?(this.setPageSize(t),this.setPage(1)):!1}scrollVertical(t,e){var i,r,s;!e&&!this.table.dataLoader.loading&&(i=this.table.rowManager.getElement(),r=i.scrollHeight-i.clientHeight-t,s=this.table.options.progressiveLoadScrollMargin||i.clientHeight*2,r<s&&this.nextPage().catch(()=>{}))}restOnRenderBefore(t,e){return e||this.mode==="local"&&this.reset(),t}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var t;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),t=document.createElement("button"),t.classList.add("tabulator-page"),t.setAttribute("type","button"),t.setAttribute("role","button"),t.setAttribute("aria-label",""),t.setAttribute("title",""),this.firstBut=t.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=t.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=t.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=t.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var t=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))t=this.table.options.paginationSizeSelector,this.pageSizes=t,this.pageSizes.indexOf(this.size)==-1&&t.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){t=[];for(let e=1;e<5;e++)t.push(this.size*e);this.pageSizes=t}else t=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);t.forEach(e=>{var i=document.createElement("option");i.value=e,e===!0?this.langBind("pagination|all",function(r){i.innerHTML=r}):i.innerHTML=e,this.pageSizeSelect.appendChild(i)}),this.pageSizeSelect.value=this.size}}initializePageCounter(){var t=this.table.options.paginationCounter,e=null;t&&(typeof t=="function"?e=t:e=n.pageCounters[t],e?(this.pageCounter=e,this.pageCounterElement=document.createElement("span"),this.pageCounterElement.classList.add("tabulator-page-counter")):console.warn("Pagination Error - No such page counter found: ",t))}initializePaginator(t){var e,i;t||(this.langBind("pagination|first",r=>{this.firstBut.innerHTML=r}),this.langBind("pagination|first_title",r=>{this.firstBut.setAttribute("aria-label",r),this.firstBut.setAttribute("title",r)}),this.langBind("pagination|prev",r=>{this.prevBut.innerHTML=r}),this.langBind("pagination|prev_title",r=>{this.prevBut.setAttribute("aria-label",r),this.prevBut.setAttribute("title",r)}),this.langBind("pagination|next",r=>{this.nextBut.innerHTML=r}),this.langBind("pagination|next_title",r=>{this.nextBut.setAttribute("aria-label",r),this.nextBut.setAttribute("title",r)}),this.langBind("pagination|last",r=>{this.lastBut.innerHTML=r}),this.langBind("pagination|last_title",r=>{this.lastBut.setAttribute("aria-label",r),this.lastBut.setAttribute("title",r)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(e=document.createElement("label"),this.langBind("pagination|page_size",r=>{this.pageSizeSelect.setAttribute("aria-label",r),this.pageSizeSelect.setAttribute("title",r),e.innerHTML=r}),this.element.appendChild(e),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",r=>{this.setPageSize(this.pageSizeSelect.value=="true"?!0:this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||(this.table.options.paginationCounter&&(this.table.options.paginationCounterElement?this.table.options.paginationCounterElement instanceof HTMLElement?this.table.options.paginationCounterElement.appendChild(this.pageCounterElement):typeof this.table.options.paginationCounterElement=="string"&&(i=document.querySelector(this.table.options.paginationCounterElement),i?i.appendChild(this.pageCounterElement):console.warn("Pagination Error - Unable to find element matching paginationCounterElement selector:",this.table.options.paginationCounterElement)):this.footerAppend(this.pageCounterElement)),this.footerAppend(this.element)),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(t){this.initializePaginator(!0),this.mode="progressive_"+t,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setMaxRows(t){t?this.max=this.size===!0?1:Math.ceil(t/this.size):this.max=1,this.page>this.max&&(this.page=this.max)}reset(t){this.initialLoad||(this.mode=="local"||t)&&(this.page=1,this.trackChanges())}setMaxPage(t){t=parseInt(t),this.max=t||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(t){switch(t){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return t=parseInt(t),t>0&&t<=this.max||this.mode!=="local"?(this.page=t,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",t),Promise.reject())}setPageToRow(t){var e=this.displayRows(-1),i=e.indexOf(t);if(i>-1){var r=this.size===!0?1:Math.ceil((i+1)/this.size);return this.setPage(r)}else return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(t){t!==!0&&(t=parseInt(t)),t>0&&(this.size=t,this.dispatchExternal("pageSizeChanged",t)),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageCounter(t,e,i){var r;if(this.pageCounter)switch(this.mode==="remote"&&(e=this.size,i=(this.page-1)*this.size+1,t=this.remoteRowCountEstimate),r=this.pageCounter.call(this,e,i,this.page,t,this.max),typeof r){case"object":if(r instanceof Node){for(;this.pageCounterElement.firstChild;)this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);this.pageCounterElement.appendChild(r)}else this.pageCounterElement.innerHTML="",r!=null&&console.warn("Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:",r);break;case"undefined":this.pageCounterElement.innerHTML="";break;default:this.pageCounterElement.innerHTML=r}}_setPageButtons(){let t=Math.floor((this.count-1)/2),e=Math.ceil((this.count-1)/2),i=this.max-this.page+t+1<this.count?this.max-this.count+1:Math.max(this.page-t,1),r=this.page<=e?Math.min(this.count,this.max):Math.min(this.page+e,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);this.page==1?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let s=i;s<=r;s++)s>0&&s<=this.max&&this.pagesElement.appendChild(this._generatePageButton(s));this.footerRedraw()}_generatePageButton(t){var e=document.createElement("button");return e.classList.add("tabulator-page"),t==this.page&&e.classList.add("active"),e.setAttribute("type","button"),e.setAttribute("role","button"),this.langBind("pagination|page_title",i=>{e.setAttribute("aria-label",i+" "+t),e.setAttribute("title",i+" "+t)}),e.setAttribute("data-page",t),e.textContent=t,e.addEventListener("click",i=>{this.setPage(t)}),e}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(t){return this.size}getMode(){return this.mode}getRows(t){var e=0,i,r,s,a,o=t.filter(l=>l.type==="row");if(this.mode=="local"){i=[],this.setMaxRows(t.length),this.size===!0?(r=0,s=t.length):(r=this.size*(this.page-1),s=r+parseInt(this.size)),this._setPageButtons();for(let l=r;l<s;l++){let c=t[l];c&&(i.push(c),c.type==="row"&&(a||(a=c),e++))}return this._setPageCounter(o.length,e,a?o.indexOf(a)+1:0),i}else return this._setPageButtons(),this._setPageCounter(o.length),t.slice(0)}trigger(){var t;switch(this.mode){case"local":return t=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(t),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(t){var e;if(typeof t.last_page>"u"&&console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").last_page||"last_page")+"' property"),t.data)if(this.max=parseInt(t.last_page)||1,this.remoteRowCountEstimate=typeof t.last_row<"u"?t.last_row:t.last_page*this.size-(this.page==t.last_page?this.size-t.data.length:0),this.progressiveLoad){switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(t.data,!1,this.page==1):this.table.rowManager.addRows(t.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":t=this.page===1?t.data:this.table.rowManager.getData().concat(t.data),this.table.rowManager.setData(t,this.page!==1,this.page==1),e=this.table.options.progressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+e&&this.page<this.max&&setTimeout(()=>{this.nextPage()});break}return!1}else this.dispatchExternal("pageLoaded",this.getPage());else console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").data||"data")+"' property");return t.data}footerRedraw(){var t=this.table.footerManager.containerElement;Math.ceil(t.clientWidth)-t.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(t.clientWidth)-t.scrollWidth<0&&(this.pagesElement.style.display="none"))}},uC={local:function(n,t){var e=localStorage.getItem(n+"-"+t);return e?JSON.parse(e):!1},cookie:function(n,t){var e=document.cookie,i=n+"-"+t,r=e.indexOf(i+"="),s,a;return r>-1&&(e=e.slice(r),s=e.indexOf(";"),s>-1&&(e=e.slice(0,s)),a=e.replace(i+"=","")),a?JSON.parse(a):!1}},hC={local:function(n,t,e){localStorage.setItem(n+"-"+t,JSON.stringify(e))},cookie:function(n,t,e){var i=new Date;i.setDate(i.getDate()+1e4),document.cookie=n+"-"+t+"="+JSON.stringify(e)+"; expires="+i.toUTCString()}},qd=class n extends xi{static moduleName="persistence";static moduleInitOrder=-10;static readers=uC;static writers=hC;constructor(t){super(t),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var t="_tabulator_test";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch{return!1}}initialize(){if(this.table.options.persistence){var t=this.table.options.persistenceMode,e=this.table.options.persistenceID,i;this.mode=t!==!0?t:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:n.readers[this.table.options.persistenceReaderFunc]?this.readFunc=n.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):n.readers[this.mode]?this.readFunc=n.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:n.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=n.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):n.writers[this.mode]?this.writeFunc=n.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(e||this.table.element.getAttribute("id")||""),this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,headerFilter:this.table.options.persistence===!0||this.table.options.persistence.headerFilter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(i=this.retrieveData("page"),i&&(typeof i.paginationSize<"u"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=i.paginationSize),typeof i.paginationInitialPage<"u"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=i.paginationInitialPage))),this.config.group&&(i=this.retrieveData("group"),i&&(typeof i.groupBy<"u"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=i.groupBy),typeof i.groupStartOpen<"u"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=i.groupStartOpen),typeof i.groupHeader<"u"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=i.groupHeader))),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns"))),this.subscribe("table-built",this.tableBuilt.bind(this),0),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("filter-changed",this.eventSave.bind(this,"headerFilter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("column-width",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(t){this.config[t]&&this.save(t)}tableBuilt(){var t,e,i;this.config.sort&&(t=this.load("sort"),t&&(this.table.options.initialSort=t)),this.config.filter&&(e=this.load("filter"),e&&(this.table.options.initialFilter=e)),this.config.headerFilter&&(i=this.load("headerFilter"),i&&(this.table.options.initialHeaderFilter=i))}tableRedraw(t){t&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(t){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,t,!0)),!0}initializeColumn(t){var e,i;this.config.columns&&(this.defWatcherBlock=!0,e=t.getDefinition(),i=this.config.columns===!0?Object.keys(e):this.config.columns,i.forEach(r=>{var s=Object.getOwnPropertyDescriptor(e,r),a=e[r];s&&Object.defineProperty(e,r,{set:o=>{a=o,this.defWatcherBlock||this.save("columns"),s.set&&s.set(o)},get:()=>(s.get&&s.get(),a)})}),this.defWatcherBlock=!1)}load(t,e){var i=this.retrieveData(t);return e&&(i=i?this.mergeDefinition(e,i):e),i}retrieveData(t){return this.readFunc?this.readFunc(this.id,t):!1}mergeDefinition(t,e,i){var r=[];return e=e||[],e.forEach((s,a)=>{var o=this._findColumn(t,s),l;o&&(i?l=Object.keys(s):this.config.columns===!0||this.config.columns==null?(l=Object.keys(o),l.push("width")):l=this.config.columns,l.forEach(c=>{c!=="columns"&&typeof s[c]<"u"&&(o[c]=s[c])}),o.columns&&(o.columns=this.mergeDefinition(o.columns,s.columns)),r.push(o))}),t.forEach((s,a)=>{var o=this._findColumn(e,s);o||(r.length>a?r.splice(a,0,s):r.push(s))}),r}_findColumn(t,e){var i=e.columns?"group":e.field?"field":"object";return t.find(function(r){switch(i){case"group":return r.title===e.title&&r.columns.length===e.columns.length;case"field":return r.field===e.field;case"object":return r===e}})}save(t){var e={};switch(t){case"columns":e=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":e=this.table.modules.filter.getFilters();break;case"headerFilter":e=this.table.modules.filter.getHeaderFilters();break;case"sort":e=this.validateSorters(this.table.modules.sort.getSort());break;case"group":e=this.getGroupConfig();break;case"page":e=this.getPageConfig();break}this.writeFunc&&this.writeFunc(this.id,t,e)}validateSorters(t){return t.forEach(function(e){e.column=e.field,delete e.field}),t}getGroupConfig(){var t={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(t.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(t.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(t.groupHeader=this.table.options.groupHeader)),t}getPageConfig(){var t={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(t.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(t.paginationInitialPage=this.table.modules.page.getPage())),t}parseColumns(t){var e=[],i=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return t.forEach(r=>{var s={},a=r.getDefinition(),o;r.isGroup?(s.title=a.title,s.columns=this.parseColumns(r.getColumns())):(s.field=r.getField(),this.config.columns===!0||this.config.columns==null?(o=Object.keys(a),o.push("width"),o.push("visible")):o=this.config.columns,o.forEach(l=>{switch(l){case"width":s.width=r.getWidth();break;case"visible":s.visible=r.visible;break;default:typeof a[l]!="function"&&i.indexOf(l)===-1&&(s[l]=a[l])}})),e.push(s)}),e}},Wd=class extends xi{static moduleName="popup";constructor(t){super(t),this.columnSubscribers={},this.registerTableOption("rowContextPopup",!1),this.registerTableOption("rowClickPopup",!1),this.registerTableOption("rowDblClickPopup",!1),this.registerTableOption("groupContextPopup",!1),this.registerTableOption("groupClickPopup",!1),this.registerTableOption("groupDblClickPopup",!1),this.registerColumnOption("headerContextPopup"),this.registerColumnOption("headerClickPopup"),this.registerColumnOption("headerDblClickPopup"),this.registerColumnOption("headerPopup"),this.registerColumnOption("headerPopupIcon"),this.registerColumnOption("contextPopup"),this.registerColumnOption("clickPopup"),this.registerColumnOption("dblClickPopup"),this.registerComponentFunction("cell","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("column","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("row","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("group","popup",this._componentPopupCall.bind(this))}initialize(){this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}_componentPopupCall(t,e,i){this.loadPopupEvent(e,null,t,i)}initializeRowWatchers(){this.table.options.rowContextPopup&&(this.subscribe("row-contextmenu",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup)),this.table.on("rowTapHold",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup))),this.table.options.rowClickPopup&&this.subscribe("row-click",this.loadPopupEvent.bind(this,this.table.options.rowClickPopup)),this.table.options.rowDblClickPopup&&this.subscribe("row-dblclick",this.loadPopupEvent.bind(this,this.table.options.rowDblClickPopup))}initializeGroupWatchers(){this.table.options.groupContextPopup&&(this.subscribe("group-contextmenu",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup)),this.table.on("groupTapHold",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup))),this.table.options.groupClickPopup&&this.subscribe("group-click",this.loadPopupEvent.bind(this,this.table.options.groupClickPopup)),this.table.options.groupDblClickPopup&&this.subscribe("group-dblclick",this.loadPopupEvent.bind(this,this.table.options.groupDblClickPopup))}initializeColumn(t){var e=t.definition;e.headerContextPopup&&!this.columnSubscribers.headerContextPopup&&(this.columnSubscribers.headerContextPopup=this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextPopup),this.table.on("headerTapHold",this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"))),e.headerClickPopup&&!this.columnSubscribers.headerClickPopup&&(this.columnSubscribers.headerClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerClickPopup"),this.subscribe("column-click",this.columnSubscribers.headerClickPopup)),e.headerDblClickPopup&&!this.columnSubscribers.headerDblClickPopup&&(this.columnSubscribers.headerDblClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerDblClickPopup"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickPopup)),e.headerPopup&&this.initializeColumnHeaderPopup(t),e.contextPopup&&!this.columnSubscribers.contextPopup&&(this.columnSubscribers.contextPopup=this.loadPopupTableCellEvent.bind(this,"contextPopup"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextPopup),this.table.on("cellTapHold",this.loadPopupTableCellEvent.bind(this,"contextPopup"))),e.clickPopup&&!this.columnSubscribers.clickPopup&&(this.columnSubscribers.clickPopup=this.loadPopupTableCellEvent.bind(this,"clickPopup"),this.subscribe("cell-click",this.columnSubscribers.clickPopup)),e.dblClickPopup&&!this.columnSubscribers.dblClickPopup&&(this.columnSubscribers.dblClickPopup=this.loadPopupTableCellEvent.bind(this,"dblClickPopup"),this.subscribe("cell-click",this.columnSubscribers.dblClickPopup))}initializeColumnHeaderPopup(t){var e=t.definition.headerPopupIcon,i;i=document.createElement("span"),i.classList.add("tabulator-header-popup-button"),e?(typeof e=="function"&&(e=e(t.getComponent())),e instanceof HTMLElement?i.appendChild(e):i.innerHTML=e):i.innerHTML="&vellip;",i.addEventListener("click",r=>{r.stopPropagation(),r.preventDefault(),this.loadPopupEvent(t.definition.headerPopup,r,t)}),t.titleElement.insertBefore(i,t.titleElement.firstChild)}loadPopupTableCellEvent(t,e,i){i._cell&&(i=i._cell),i.column.definition[t]&&this.loadPopupEvent(i.column.definition[t],e,i)}loadPopupTableColumnEvent(t,e,i){i._column&&(i=i._column),i.definition[t]&&this.loadPopupEvent(i.definition[t],e,i)}loadPopupEvent(t,e,i,r){var s;function a(o){s=o}i._group?i=i._group:i._row&&(i=i._row),t=typeof t=="function"?t.call(this.table,e,i.getComponent(),a):t,this.loadPopup(e,i,t,s,r)}loadPopup(t,e,i,r,s){var a=!(t instanceof MouseEvent),o,l;i instanceof HTMLElement?o=i:(o=document.createElement("div"),o.innerHTML=i),o.classList.add("tabulator-popup"),o.addEventListener("click",c=>{c.stopPropagation()}),a||t.preventDefault(),l=this.popup(o),typeof r=="function"&&l.renderCallback(r),t?l.show(t):l.show(e.getElement(),s||"center"),l.hideOnBlur(()=>{this.dispatchExternal("popupClosed",e.getComponent())}),this.dispatchExternal("popupOpened",e.getComponent())}},Xd=class extends xi{static moduleName="print";constructor(t){super(t),this.element=!1,this.manualBlock=!1,this.beforeprintEventHandler=null,this.afterprintEventHandler=null,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(this.beforeprintEventHandler=this.replaceTable.bind(this),this.afterprintEventHandler=this.cleanup.bind(this),window.addEventListener("beforeprint",this.beforeprintEventHandler),window.addEventListener("afterprint",this.afterprintEventHandler),this.subscribe("table-destroy",this.destroy.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}destroy(){this.table.options.printAsHtml&&(window.removeEventListener("beforeprint",this.beforeprintEventHandler),window.removeEventListener("afterprint",this.afterprintEventHandler))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(t,e,i){var r=window.scrollX,s=window.scrollY,a=document.createElement("div"),o=document.createElement("div"),l=this.table.modules.export.generateTable(typeof i<"u"?i:this.table.options.printConfig,typeof e<"u"?e:this.table.options.printStyled,t||this.table.options.printRowRange,"print"),c,h;this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(a.classList.add("tabulator-print-header"),c=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof c=="string"?a.innerHTML=c:a.appendChild(c),this.element.appendChild(a)),this.element.appendChild(l),this.table.options.printFooter&&(o.classList.add("tabulator-print-footer"),h=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof h=="string"?o.innerHTML=h:o.appendChild(h),this.element.appendChild(o)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,l),window.print(),this.cleanup(),window.scrollTo(r,s),this.manualBlock=!1}},$d=class extends xi{static moduleName="reactiveData";constructor(t){super(t),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this,"cellsave")),this.subscribe("cell-value-save-after",this.unblock.bind(this,"cellsave")),this.subscribe("row-data-save-before",this.block.bind(this,"rowsave")),this.subscribe("row-data-save-after",this.unblock.bind(this,"rowsave")),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(t){var e=this,i;this.currentVersion++,i=this.currentVersion,this.unwatchData(),this.data=t,this.origFuncs.push=t.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments),s;return!e.blocked&&i===e.currentVersion&&(e.block("data-push"),r.forEach(a=>{e.table.rowManager.addRowActual(a,!1)}),s=e.origFuncs.push.apply(t,arguments),e.unblock("data-push")),s}}),this.origFuncs.unshift=t.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments),s;return!e.blocked&&i===e.currentVersion&&(e.block("data-unshift"),r.forEach(a=>{e.table.rowManager.addRowActual(a,!0)}),s=e.origFuncs.unshift.apply(t,arguments),e.unblock("data-unshift")),s}}),this.origFuncs.shift=t.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var r,s;return!e.blocked&&i===e.currentVersion&&(e.block("data-shift"),e.data.length&&(r=e.table.rowManager.getRowFromDataObject(e.data[0]),r&&r.deleteActual()),s=e.origFuncs.shift.call(t),e.unblock("data-shift")),s}}),this.origFuncs.pop=t.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var r,s;return!e.blocked&&i===e.currentVersion&&(e.block("data-pop"),e.data.length&&(r=e.table.rowManager.getRowFromDataObject(e.data[e.data.length-1]),r&&r.deleteActual()),s=e.origFuncs.pop.call(t),e.unblock("data-pop")),s}}),this.origFuncs.splice=t.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments),s=r[0]<0?t.length+r[0]:r[0],a=r[1],o=r[2]?r.slice(2):!1,l,c;if(!e.blocked&&i===e.currentVersion){if(e.block("data-splice"),o&&(l=t[s]?e.table.rowManager.getRowFromDataObject(t[s]):!1,l?o.forEach(d=>{e.table.rowManager.addRowActual(d,!0,l,!0)}):(o=o.slice().reverse(),o.forEach(d=>{e.table.rowManager.addRowActual(d,!0,!1,!0)}))),a!==0){var h=t.slice(s,typeof r[1]>"u"?r[1]:s+a);h.forEach((d,p)=>{var g=e.table.rowManager.getRowFromDataObject(d);g&&g.deleteActual(p!==h.length-1)})}(o||a!==0)&&e.table.rowManager.reRenderInPosition(),c=e.origFuncs.splice.apply(t,arguments),e.unblock("data-splice")}return c}})}unwatchData(){if(this.data!==!1)for(var t in this.origFuncs)Object.defineProperty(this.data,t,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(t){var e=t.getData();for(var i in e)this.watchKey(t,e,i);this.table.options.dataTree&&this.watchTreeChildren(t)}watchTreeChildren(t){var e=this,i=t.getData()[this.table.options.dataTreeChildField],r={};i&&(r.push=i.push,Object.defineProperty(i,"push",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-push");var s=r.push.apply(i,arguments);this.rebuildTree(t),e.unblock("tree-push")}return s}}),r.unshift=i.unshift,Object.defineProperty(i,"unshift",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-unshift");var s=r.unshift.apply(i,arguments);this.rebuildTree(t),e.unblock("tree-unshift")}return s}}),r.shift=i.shift,Object.defineProperty(i,"shift",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-shift");var s=r.shift.call(i);this.rebuildTree(t),e.unblock("tree-shift")}return s}}),r.pop=i.pop,Object.defineProperty(i,"pop",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-pop");var s=r.pop.call(i);this.rebuildTree(t),e.unblock("tree-pop")}return s}}),r.splice=i.splice,Object.defineProperty(i,"splice",{enumerable:!1,configurable:!0,value:()=>{if(!e.blocked){e.block("tree-splice");var s=r.splice.apply(i,arguments);this.rebuildTree(t),e.unblock("tree-splice")}return s}}))}rebuildTree(t){this.table.modules.dataTree.initializeRow(t),this.table.modules.dataTree.layoutRow(t),this.table.rowManager.refreshActiveData("tree",!1,!0)}watchKey(t,e,i){var r=this,s=Object.getOwnPropertyDescriptor(e,i),a=e[i],o=this.currentVersion;Object.defineProperty(e,i,{set:l=>{if(a=l,!r.blocked&&o===r.currentVersion){r.block("key");var c={};c[i]=l,t.updateData(c),r.unblock("key")}s.set&&s.set(l)},get:()=>(s.get&&s.get(),a)})}unwatchRow(t){var e=t.getData();for(var i in e)Object.defineProperty(e,i,{value:e[i]})}block(t){this.blocked||(this.blocked=t)}unblock(t){this.blocked===t&&(this.blocked=!1)}},Yd=class extends xi{static moduleName="resizeColumns";constructor(t){super(t),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.latestX=!1,this.handle=null,this.initialNextColumn=null,this.nextColumn=null,this.initialized=!1,this.registerColumnOption("resizable",!0),this.registerTableOption("resizableColumnFit",!1),this.registerTableOption("resizableColumnGuide",!1)}initialize(){this.subscribe("column-rendered",this.layoutColumnHeader.bind(this))}initializeEventWatchers(){this.initialized||(this.subscribe("cell-rendered",this.layoutCellHandles.bind(this)),this.subscribe("cell-delete",this.deInitializeComponent.bind(this)),this.subscribe("cell-height",this.resizeHandle.bind(this)),this.subscribe("column-moved",this.columnLayoutUpdated.bind(this)),this.subscribe("column-hide",this.deInitializeColumn.bind(this)),this.subscribe("column-show",this.columnLayoutUpdated.bind(this)),this.subscribe("column-width",this.columnWidthUpdated.bind(this)),this.subscribe("column-delete",this.deInitializeComponent.bind(this)),this.subscribe("column-height",this.resizeHandle.bind(this)),this.initialized=!0)}layoutCellHandles(t){t.row.type==="row"&&(this.deInitializeComponent(t),this.initializeColumn("cell",t,t.column,t.element))}layoutColumnHeader(t){t.definition.resizable&&(this.initializeEventWatchers(),this.deInitializeComponent(t),this.initializeColumn("header",t,t,t.element))}columnLayoutUpdated(t){var e=t.prevColumn();this.reinitializeColumn(t),e&&this.reinitializeColumn(e)}columnWidthUpdated(t){t.modules.frozen&&(this.table.modules.frozenColumns.leftColumns.includes(t)?this.table.modules.frozenColumns.leftColumns.forEach(e=>{this.reinitializeColumn(e)}):this.table.modules.frozenColumns.rightColumns.includes(t)&&this.table.modules.frozenColumns.rightColumns.forEach(e=>{this.reinitializeColumn(e)}))}frozenColumnOffset(t){var e=!1;return t.modules.frozen&&(e=t.modules.frozen.marginValue,t.modules.frozen.position==="left"?e+=t.getWidth()-3:e&&(e-=3)),e!==!1?e+"px":!1}reinitializeColumn(t){var e=this.frozenColumnOffset(t);t.cells.forEach(i=>{i.modules.resize&&i.modules.resize.handleEl&&(e&&(i.modules.resize.handleEl.style[t.modules.frozen.position]=e,i.modules.resize.handleEl.style["z-index"]=11),i.element.after(i.modules.resize.handleEl))}),t.modules.resize&&t.modules.resize.handleEl&&(e&&(t.modules.resize.handleEl.style[t.modules.frozen.position]=e),t.element.after(t.modules.resize.handleEl))}initializeColumn(t,e,i,r){var s=this,a=!1,o=i.definition.resizable,l={},c=i.getLastColumn();if(t==="header"&&(a=i.definition.formatter=="textarea"||i.definition.variableHeight,l={variableHeight:a}),(o===!0||o==t)&&this._checkResizability(c)){var h=document.createElement("span");h.className="tabulator-col-resize-handle",h.addEventListener("click",function(p){p.stopPropagation()});var d=function(p){s.startColumn=i,s.initialNextColumn=s.nextColumn=c.nextColumn(),s._mouseDown(p,c,h)};h.addEventListener("mousedown",d),h.addEventListener("touchstart",d,{passive:!0}),h.addEventListener("dblclick",p=>{var g=c.getWidth();p.stopPropagation(),c.reinitializeWidth(!0),g!==c.getWidth()&&(s.dispatch("column-resized",c),s.dispatchExternal("columnResized",c.getComponent()))}),i.modules.frozen&&(h.style.position="sticky",h.style[i.modules.frozen.position]=this.frozenColumnOffset(i)),l.handleEl=h,r.parentNode&&i.visible&&r.after(h)}e.modules.resize=l}deInitializeColumn(t){this.deInitializeComponent(t),t.cells.forEach(e=>{this.deInitializeComponent(e)})}deInitializeComponent(t){var e;t.modules.resize&&(e=t.modules.resize.handleEl,e&&e.parentElement&&e.parentElement.removeChild(e))}resizeHandle(t,e){t.modules.resize&&t.modules.resize.handleEl&&(t.modules.resize.handleEl.style.height=e)}resize(t,e){var i=typeof t.clientX>"u"?t.touches[0].clientX:t.clientX,r=i-this.startX,s=i-this.latestX,a,o;if(this.latestX=i,this.table.rtl&&(r=-r,s=-s),a=e.width==e.minWidth||e.width==e.maxWidth,e.setWidth(this.startWidth+r),o=e.width==e.minWidth||e.width==e.maxWidth,s<0&&(this.nextColumn=this.initialNextColumn),this.table.options.resizableColumnFit&&this.nextColumn&&!(a&&o)){let l=this.nextColumn.getWidth();s>0&&l<=this.nextColumn.minWidth&&(this.nextColumn=this.nextColumn.nextColumn()),this.nextColumn&&this.nextColumn.setWidth(this.nextColumn.getWidth()-s)}this.table.columnManager.rerenderColumns(!0),!this.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights()}calcGuidePosition(t,e,i){var r=typeof t.clientX>"u"?t.touches[0].clientX:t.clientX,s=i.getBoundingClientRect().x-this.table.element.getBoundingClientRect().x,a=this.table.element.getBoundingClientRect().x,o=e.element.getBoundingClientRect().left-a,l=r-this.startX,c=Math.max(s+l,o+e.minWidth);return e.maxWidth&&(c=Math.min(c,o+e.maxWidth)),c}_checkResizability(t){return t.definition.resizable}_mouseDown(t,e,i){var r=this,s;this.dispatchExternal("columnResizing",e.getComponent()),r.table.options.resizableColumnGuide&&(s=document.createElement("span"),s.classList.add("tabulator-col-resize-guide"),r.table.element.appendChild(s),setTimeout(()=>{s.style.left=r.calcGuidePosition(t,e,i)+"px"})),r.table.element.classList.add("tabulator-block-select");function a(l){r.table.options.resizableColumnGuide?s.style.left=r.calcGuidePosition(l,e,i)+"px":r.resize(l,e)}function o(l){r.table.options.resizableColumnGuide&&(r.resize(l,e),s.remove()),r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!1),r.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights(),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",a),i.removeEventListener("touchmove",a),i.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),r.startWidth!==e.getWidth()&&(r.table.columnManager.verticalAlignHeaders(),r.dispatch("column-resized",e),r.dispatchExternal("columnResized",e.getComponent()))}t.stopPropagation(),r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!0),r.startX=typeof t.clientX>"u"?t.touches[0].clientX:t.clientX,r.latestX=r.startX,r.startWidth=e.getWidth(),document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",o),i.addEventListener("touchmove",a,{passive:!0}),i.addEventListener("touchend",o)}},Zd=class extends xi{static moduleName="resizeRows";constructor(t){super(t),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1),this.registerTableOption("resizableRowGuide",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(t){var e=this,i=t.getElement(),r=document.createElement("div");r.className="tabulator-row-resize-handle";var s=document.createElement("div");s.className="tabulator-row-resize-handle prev",r.addEventListener("click",function(l){l.stopPropagation()});var a=function(l){e.startRow=t,e._mouseDown(l,t,r)};r.addEventListener("mousedown",a),r.addEventListener("touchstart",a,{passive:!0}),s.addEventListener("click",function(l){l.stopPropagation()});var o=function(l){var c=e.table.rowManager.prevDisplayRow(t);c&&(e.startRow=c,e._mouseDown(l,c,s))};s.addEventListener("mousedown",o),s.addEventListener("touchstart",o,{passive:!0}),i.appendChild(r),i.appendChild(s)}resize(t,e){e.setHeight(this.startHeight+((typeof t.screenY>"u"?t.touches[0].screenY:t.screenY)-this.startY))}calcGuidePosition(t,e,i){var r=typeof t.screenY>"u"?t.touches[0].screenY:t.screenY,s=i.getBoundingClientRect().y-this.table.element.getBoundingClientRect().y,a=this.table.element.getBoundingClientRect().y,o=e.element.getBoundingClientRect().top-a,l=r-this.startY;return Math.max(s+l,o)}_mouseDown(t,e,i){var r=this,s;r.dispatchExternal("rowResizing",e.getComponent()),r.table.options.resizableRowGuide&&(s=document.createElement("span"),s.classList.add("tabulator-row-resize-guide"),r.table.element.appendChild(s),setTimeout(()=>{s.style.top=r.calcGuidePosition(t,e,i)+"px"})),r.table.element.classList.add("tabulator-block-select");function a(l){r.table.options.resizableRowGuide?s.style.top=r.calcGuidePosition(l,e,i)+"px":r.resize(l,e)}function o(l){r.table.options.resizableRowGuide&&(r.resize(l,e),s.remove()),document.body.removeEventListener("mouseup",a),document.body.removeEventListener("mousemove",a),i.removeEventListener("touchmove",a),i.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),r.dispatchExternal("rowResized",e.getComponent())}t.stopPropagation(),r.startY=typeof t.screenY>"u"?t.touches[0].screenY:t.screenY,r.startHeight=e.getHeight(),document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",o),i.addEventListener("touchmove",a,{passive:!0}),i.addEventListener("touchend",o)}},Kd=class extends xi{static moduleName="resizeTable";constructor(t){super(t),this.binding=!1,this.visibilityObserver=!1,this.resizeObserver=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.visible=!1,this.initialized=!1,this.initialRedraw=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var t=this.table,e;this.tableHeight=t.element.clientHeight,this.tableWidth=t.element.clientWidth,t.element.parentNode&&(this.containerHeight=t.element.parentNode.clientHeight,this.containerWidth=t.element.parentNode.clientWidth),typeof IntersectionObserver<"u"&&typeof ResizeObserver<"u"&&t.rowManager.getRenderMode()==="virtual"?(this.initializeVisibilityObserver(),this.autoResize=!0,this.resizeObserver=new ResizeObserver(i=>{if(!t.browserMobile||t.browserMobile&&(!t.modules.edit||t.modules.edit&&!t.modules.edit.currentCell)){var r=Math.floor(i[0].contentRect.height),s=Math.floor(i[0].contentRect.width);(this.tableHeight!=r||this.tableWidth!=s)&&(this.tableHeight=r,this.tableWidth=s,t.element.parentNode&&(this.containerHeight=t.element.parentNode.clientHeight,this.containerWidth=t.element.parentNode.clientWidth),this.redrawTable())}}),this.resizeObserver.observe(t.element),e=window.getComputedStyle(t.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(e.getPropertyValue("max-height")||e.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(i=>{if(!t.browserMobile||t.browserMobile&&(!t.modules.edit||t.modules.edit&&!t.modules.edit.currentCell)){var r=Math.floor(i[0].contentRect.height),s=Math.floor(i[0].contentRect.width);(this.containerHeight!=r||this.containerWidth!=s)&&(this.containerHeight=r,this.containerWidth=s,this.tableHeight=t.element.clientHeight,this.tableWidth=t.element.clientWidth),this.redrawTable()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!t.browserMobile||t.browserMobile&&(!t.modules.edit||t.modules.edit&&!t.modules.edit.currentCell))&&(t.columnManager.rerenderColumns(!0),t.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(t=>{this.visible=t[0].isIntersecting,this.initialized?this.visible&&(this.redrawTable(this.initialRedraw),this.initialRedraw=!1):(this.initialized=!0,this.initialRedraw=!this.visible)}),this.visibilityObserver.observe(this.table.element)}redrawTable(t){this.initialized&&this.visible&&(this.table.columnManager.rerenderColumns(!0),this.table.redraw(t))}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.resizeObserver&&this.resizeObserver.unobserve(this.table.element),this.visibilityObserver&&this.visibilityObserver.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}};function cC(n,t,e){var i=document.createElement("div"),r=n.getRow()._row.modules.responsiveLayout;i.classList.add("tabulator-responsive-collapse-toggle"),i.innerHTML=`<svg class='tabulator-responsive-collapse-toggle-open' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12" fill="none" stroke-width="3" stroke-linecap="round" />
  <line y1="7" x1="12" y2="17" x2="12" fill="none" stroke-width="3" stroke-linecap="round" />
</svg>

<svg class='tabulator-responsive-collapse-toggle-close' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12"  fill="none" stroke-width="3" stroke-linecap="round" />
</svg>`,n.getElement().classList.add("tabulator-row-handle");function s(a){var o=r.element;r.open=a,o&&(r.open?(i.classList.add("open"),o.style.display=""):(i.classList.remove("open"),o.style.display="none"))}return i.addEventListener("click",function(a){a.stopImmediatePropagation(),s(!r.open),n.getTable().rowManager.adjustTableSize()}),s(r.open),i}var fC={format:{formatters:{responsiveCollapse:cC}}},Jd=class extends xi{static moduleName="responsiveLayout";static moduleExtensions=fC;constructor(t){super(t),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),this.table.options.responsiveLayout==="collapse"&&(this.subscribe("row-data-changed",this.generateCollapsedRowContent.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(t){["fitColumns","fitDataStretch"].indexOf(this.layoutMode())===-1&&(t||this.update())}initializeResponsivity(){var t=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.collapseFormatter&&(this.collapseFormatter=this.collapseFormatter.bind(this.table)),this.table.columnManager.columnsByIndex.forEach((e,i)=>{e.modules.responsive&&e.modules.responsive.order&&e.modules.responsive.visible&&(e.modules.responsive.index=i,t.push(e),!e.visible&&this.mode==="collapse"&&this.hiddenColumns.push(e))}),t=t.reverse(),t=t.sort((e,i)=>{var r=i.modules.responsive.order-e.modules.responsive.order;return r||i.modules.responsive.index-e.modules.responsive.index}),this.columns=t,this.mode==="collapse"&&this.generateCollapsedContent();for(let e of this.table.columnManager.columnsByIndex)if(e.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=e;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(t){var e=t.getDefinition();t.modules.responsive={order:typeof e.responsive>"u"?1:e.responsive,visible:e.visible!==!1}}initializeRow(t){var e;t.type!=="calc"&&(e=document.createElement("div"),e.classList.add("tabulator-responsive-collapse"),t.modules.responsiveLayout={element:e,open:this.collapseStartOpen},this.collapseStartOpen||(e.style.display="none"))}layoutRow(t){var e=t.getElement();t.modules.responsiveLayout&&(e.appendChild(t.modules.responsiveLayout.element),this.generateCollapsedRowContent(t))}updateColumnVisibility(t,e){!e&&t.modules.responsive&&(t.modules.responsive.visible=t.visible,this.initializeResponsivity())}hideColumn(t){var e=this.hiddenColumns.length;t.hide(!1,!0),this.mode==="collapse"&&(this.hiddenColumns.unshift(t),this.generateCollapsedContent(),this.collapseHandleColumn&&!e&&this.collapseHandleColumn.show())}showColumn(t){var e;t.show(!1,!0),t.setWidth(t.getWidth()),this.mode==="collapse"&&(e=this.hiddenColumns.indexOf(t),e>-1&&this.hiddenColumns.splice(e,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var t=!0;t;){let e=this.table.modules.layout.getMode()=="fitColumns"?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),i=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-e;if(i<0){let r=this.columns[this.index];r?(this.hideColumn(r),this.index++):t=!1}else{let r=this.columns[this.index-1];r&&i>0&&i>=r.getWidth()?(this.showColumn(r),this.index--):t=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var t=this.table.rowManager.getDisplayRows();t.forEach(e=>{this.generateCollapsedRowContent(e)})}generateCollapsedRowContent(t){var e,i;if(t.modules.responsiveLayout){for(e=t.modules.responsiveLayout.element;e.firstChild;)e.removeChild(e.firstChild);i=this.collapseFormatter(this.generateCollapsedRowData(t)),i&&e.appendChild(i),t.calcHeight(!0)}}generateCollapsedRowData(t){var e=t.getData(),i=[],r;return this.hiddenColumns.forEach(s=>{var a=s.getFieldValue(e);if(s.definition.title&&s.field)if(s.modules.format&&this.table.options.responsiveLayoutCollapseUseFormatters){let o=function(l){l()};r={value:!1,data:{},getValue:function(){return a},getData:function(){return e},getType:function(){return"cell"},getElement:function(){return document.createElement("div")},getRow:function(){return t.getComponent()},getColumn:function(){return s.getComponent()},getTable:()=>this.table},i.push({field:s.field,title:s.definition.title,value:s.modules.format.formatter.call(this.table.modules.format,r,s.modules.format.params,o)})}else i.push({field:s.field,title:s.definition.title,value:a})}),i}formatCollapsedData(t){var e=document.createElement("table");return t.forEach(i=>{var r=document.createElement("tr"),s=document.createElement("td"),a=document.createElement("td"),o,l=document.createElement("strong");s.appendChild(l),this.modules.localize.bind("columns|"+i.field,function(c){l.innerHTML=c||i.title}),i.value instanceof Node?(o=document.createElement("div"),o.appendChild(i.value),a.appendChild(o)):a.innerHTML=i.value,r.appendChild(s),r.appendChild(a),e.appendChild(r)}),Object.keys(t).length?e:""}};function dC(n,t,e){var i=document.createElement("input"),r=!1;if(i.type="checkbox",i.setAttribute("aria-label","Select Row"),this.table.modExists("selectRow",!0))if(i.addEventListener("click",a=>{a.stopPropagation()}),typeof n.getRow=="function"){var s=n.getRow();s instanceof rl?(i.addEventListener("change",a=>{this.table.options.selectableRowsRangeMode==="click"&&r?r=!1:s.toggleSelect()}),this.table.options.selectableRowsRangeMode==="click"&&i.addEventListener("click",a=>{r=!0,this.table.modules.selectRow.handleComplexRowClick(s._row,a)}),i.checked=s.isSelected&&s.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(s,i)):i=""}else i.addEventListener("change",a=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(i);return i}var pC={format:{formatters:{rowSelection:dC}}},Qd=class extends xi{static moduleName="selectRow";static moduleExtensions=pC;constructor(t){super(t),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectableRows","highlight"),this.registerTableOption("selectableRowsRangeMode","drag"),this.registerTableOption("selectableRowsRollingSelection",!0),this.registerTableOption("selectableRowsPersistence",!0),this.registerTableOption("selectableRowsCheck",function(e,i){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){this.deprecatedOptionsCheck(),this.table.options.selectableRows==="highlight"&&this.table.options.selectableRange&&(this.table.options.selectableRows=!1),this.table.options.selectableRows!==!1&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectableRows&&!this.table.options.selectableRowsPersistence&&this.subscribe("data-refreshing",this.deselectRows.bind(this)))}deprecatedOptionsCheck(){}rowRetrieve(t,e){return t==="selected"?this.selectedRows:e}rowDeleted(t){this._deselectRow(t,!0)}clearSelectionData(t){var e=this.selectedRows.length;this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],e&&t!==!0&&this._rowSelectionChanged()}initializeRow(t){var e=this,i=e.checkRowSelectability(t),r=t.getElement(),s=function(){setTimeout(function(){e.selecting=!1},50),document.body.removeEventListener("mouseup",s)};t.modules.select={selected:!1},r.classList.toggle("tabulator-selectable",i),r.classList.toggle("tabulator-unselectable",!i),e.checkRowSelectability(t)&&e.table.options.selectableRows&&e.table.options.selectableRows!="highlight"&&(e.table.options.selectableRowsRangeMode==="click"?r.addEventListener("click",this.handleComplexRowClick.bind(this,t)):(r.addEventListener("click",function(a){(!e.table.modExists("edit")||!e.table.modules.edit.getCurrentCell())&&e.table._clearSelection(),e.selecting||e.toggleRow(t)}),r.addEventListener("mousedown",function(a){if(a.shiftKey)return e.table._clearSelection(),e.selecting=!0,e.selectPrev=[],document.body.addEventListener("mouseup",s),document.body.addEventListener("keyup",s),e.toggleRow(t),!1}),r.addEventListener("mouseenter",function(a){e.selecting&&(e.table._clearSelection(),e.toggleRow(t),e.selectPrev[1]==t&&e.toggleRow(e.selectPrev[0]))}),r.addEventListener("mouseout",function(a){e.selecting&&(e.table._clearSelection(),e.selectPrev.unshift(t))})))}handleComplexRowClick(t,e){if(e.shiftKey){this.table._clearSelection(),this.lastClickedRow=this.lastClickedRow||t;var i=this.table.rowManager.getDisplayRowIndex(this.lastClickedRow),r=this.table.rowManager.getDisplayRowIndex(t),s=i<=r?i:r,a=i>=r?i:r,o=this.table.rowManager.getDisplayRows().slice(0),l=o.splice(s,a-s+1);e.ctrlKey||e.metaKey?(l.forEach(c=>{c!==this.lastClickedRow&&(this.table.options.selectableRows!==!0&&!this.isRowSelected(t)?this.selectedRows.length<this.table.options.selectableRows&&this.toggleRow(c):this.toggleRow(c))}),this.lastClickedRow=t):(this.deselectRows(void 0,!0),this.table.options.selectableRows!==!0&&l.length>this.table.options.selectableRows&&(l=l.slice(0,this.table.options.selectableRows)),this.selectRows(l)),this.table._clearSelection()}else e.ctrlKey||e.metaKey?(this.toggleRow(t),this.lastClickedRow=t):(this.deselectRows(void 0,!0),this.selectRows(t),this.lastClickedRow=t)}checkRowSelectability(t){return t&&t.type==="row"?this.table.options.selectableRowsCheck.call(this.table,t.getComponent()):!1}toggleRow(t){this.checkRowSelectability(t)&&(t.modules.select&&t.modules.select.selected?this._deselectRow(t):this._selectRow(t))}selectRows(t){var e=[],i,r;switch(typeof t){case"undefined":i=this.table.rowManager.rows;break;case"number":i=this.table.rowManager.findRow(t);break;case"string":i=this.table.rowManager.findRow(t),i||(i=this.table.rowManager.getRows(t));break;default:i=t;break}Array.isArray(i)?i.length&&(i.forEach(s=>{r=this._selectRow(s,!0,!0),r&&e.push(r)}),this._rowSelectionChanged(!1,e)):i&&this._selectRow(i,!1,!0)}_selectRow(t,e,i){if(!isNaN(this.table.options.selectableRows)&&this.table.options.selectableRows!==!0&&!i&&this.selectedRows.length>=this.table.options.selectableRows)if(this.table.options.selectableRowsRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;var r=this.table.rowManager.findRow(t);if(r){if(this.selectedRows.indexOf(r)==-1)return r.getElement().classList.add("tabulator-selected"),r.modules.select||(r.modules.select={}),r.modules.select.selected=!0,r.modules.select.checkboxEl&&(r.modules.select.checkboxEl.checked=!0),this.selectedRows.push(r),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(r,!0),this.dispatchExternal("rowSelected",r.getComponent()),this._rowSelectionChanged(e,r),r}else e||console.warn("Selection Error - No such row found, ignoring selection:"+t)}isRowSelected(t){return this.selectedRows.indexOf(t)!==-1}deselectRows(t,e){var i=[],r,s;switch(typeof t){case"undefined":r=Object.assign([],this.selectedRows);break;case"number":r=this.table.rowManager.findRow(t);break;case"string":r=this.table.rowManager.findRow(t),r||(r=this.table.rowManager.getRows(t));break;default:r=t;break}Array.isArray(r)?r.length&&(r.forEach(a=>{s=this._deselectRow(a,!0,!0),s&&i.push(s)}),this._rowSelectionChanged(e,[],i)):r&&this._deselectRow(r,e,!0)}_deselectRow(t,e){var i=this,r=i.table.rowManager.findRow(t),s,a;if(r){if(s=i.selectedRows.findIndex(function(o){return o==r}),s>-1)return a=r.getElement(),a&&a.classList.remove("tabulator-selected"),r.modules.select||(r.modules.select={}),r.modules.select.selected=!1,r.modules.select.checkboxEl&&(r.modules.select.checkboxEl.checked=!1),i.selectedRows.splice(s,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(r,!1),this.dispatchExternal("rowDeselected",r.getComponent()),i._rowSelectionChanged(e,void 0,r),r}else e||console.warn("Deselection Error - No such row found, ignoring selection:"+t)}getSelectedData(){var t=[];return this.selectedRows.forEach(function(e){t.push(e.getData())}),t}getSelectedRows(){var t=[];return this.selectedRows.forEach(function(e){t.push(e.getComponent())}),t}_rowSelectionChanged(t,e=[],i=[]){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),t||(Array.isArray(e)||(e=[e]),e=e.map(r=>r.getComponent()),Array.isArray(i)||(i=[i]),i=i.map(r=>r.getComponent()),this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows(),e,i))}registerRowSelectCheckbox(t,e){t._row.modules.select||(t._row.modules.select={}),t._row.modules.select.checkboxEl=e}registerHeaderSelectCheckbox(t){this.headerCheckboxElement=t}childRowSelection(t,e){var i=this.table.modules.dataTree.getChildren(t,!0,!0);if(e)for(let r of i)this._selectRow(r,!0);else for(let r of i)this._deselectRow(r,!0)}},tp=class{constructor(t){return this._range=t,new Proxy(this,{get:function(e,i,r){return typeof e[i]<"u"?e[i]:e._range.table.componentFunctionBinder.handle("range",e._range,i)}})}getElement(){return this._range.element}getData(){return this._range.getData()}getCells(){return this._range.getCells(!0,!0)}getStructuredCells(){return this._range.getStructuredCells()}getRows(){return this._range.getRows().map(t=>t.getComponent())}getColumns(){return this._range.getColumns().map(t=>t.getComponent())}getBounds(){return this._range.getBounds()}getTopEdge(){return this._range.top}getBottomEdge(){return this._range.bottom}getLeftEdge(){return this._range.left}getRightEdge(){return this._range.right}setBounds(t,e){this._range.destroyedGuard("setBounds")&&this._range.setBounds(t&&t._cell,e&&e._cell)}setStartBound(t){this._range.destroyedGuard("setStartBound")&&(this._range.setEndBound(t&&t._cell),this._range.rangeManager.layoutElement())}setEndBound(t){this._range.destroyedGuard("setEndBound")&&(this._range.setEndBound(t&&t._cell),this._range.rangeManager.layoutElement())}clearValues(){this._range.destroyedGuard("clearValues")&&this._range.clearValues()}remove(){this._range.destroyedGuard("remove")&&this._range.destroy(!0)}},ep=class extends Un{constructor(t,e,i,r){super(t),this.rangeManager=e,this.element=null,this.initialized=!1,this.initializing={start:!1,end:!1},this.destroyed=!1,this.top=0,this.bottom=0,this.left=0,this.right=0,this.table=t,this.start={row:0,col:0},this.end={row:0,col:0},this.rangeManager.rowHeader&&(this.left=1,this.right=1,this.start.col=1,this.end.col=1),this.initElement(),setTimeout(()=>{this.initBounds(i,r)})}initElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-range")}initBounds(t,e){this._updateMinMax(),t&&this.setBounds(t,e||t)}setStart(t,e){(this.start.row!==t||this.start.col!==e)&&(this.start.row=t,this.start.col=e,this.initializing.start=!0,this._updateMinMax())}setEnd(t,e){(this.end.row!==t||this.end.col!==e)&&(this.end.row=t,this.end.col=e,this.initializing.end=!0,this._updateMinMax())}setBounds(t,e,i){t&&this.setStartBound(t),this.setEndBound(e||t),this.rangeManager.layoutElement(i)}setStartBound(t){var e,i;t.type==="column"?this.rangeManager.columnSelection&&this.setStart(0,t.getPosition()-1):(e=t.row.position-1,i=t.column.getPosition()-1,t.column===this.rangeManager.rowHeader?this.setStart(e,1):this.setStart(e,i))}setEndBound(t){var e=this._getTableRows().length,i,r,s;t.type==="column"?this.rangeManager.columnSelection&&(this.rangeManager.selecting==="column"?this.setEnd(e-1,t.getPosition()-1):this.rangeManager.selecting==="cell"&&this.setEnd(0,t.getPosition()-1)):(i=t.row.position-1,r=t.column.getPosition()-1,s=t.column===this.rangeManager.rowHeader,this.rangeManager.selecting==="row"?this.setEnd(i,this._getTableColumns().length-1):this.rangeManager.selecting!=="row"&&s?this.setEnd(i,0):this.rangeManager.selecting==="column"?this.setEnd(e-1,r):this.setEnd(i,r))}_updateMinMax(){this.top=Math.min(this.start.row,this.end.row),this.bottom=Math.max(this.start.row,this.end.row),this.left=Math.min(this.start.col,this.end.col),this.right=Math.max(this.start.col,this.end.col),this.initialized?this.dispatchExternal("rangeChanged",this.getComponent()):this.initializing.start&&this.initializing.end&&(this.initialized=!0,this.dispatchExternal("rangeAdded",this.getComponent()))}_getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}_getTableRows(){return this.table.rowManager.getDisplayRows().filter(t=>t.type==="row")}layout(){var t=this.table.rowManager.renderer.vDomTop,e=this.table.rowManager.renderer.vDomBottom,i=this.table.columnManager.renderer.leftCol,r=this.table.columnManager.renderer.rightCol,s,a,o,l,c,h,d,p,g,m;this.table.options.renderHorizontal==="virtual"&&this.rangeManager.rowHeader&&(r+=1),t==null&&(t=0),e==null&&(e=1/0),i==null&&(i=0),r==null&&(r=1/0),this.overlaps(i,t,r,e)&&(s=Math.max(this.top,t),a=Math.min(this.bottom,e),o=Math.max(this.left,i),l=Math.min(this.right,r),c=this.rangeManager.getCell(s,o),h=this.rangeManager.getCell(a,l),d=c.getElement(),p=h.getElement(),g=c.row.getElement(),m=h.row.getElement(),this.element.classList.add("tabulator-range-active"),this.table.rtl?(this.element.style.right=g.offsetWidth-d.offsetLeft-d.offsetWidth+"px",this.element.style.width=d.offsetLeft+d.offsetWidth-p.offsetLeft+"px"):(this.element.style.left=g.offsetLeft+d.offsetLeft+"px",this.element.style.width=p.offsetLeft+p.offsetWidth-d.offsetLeft+"px"),this.element.style.top=g.offsetTop+"px",this.element.style.height=m.offsetTop+m.offsetHeight-g.offsetTop+"px")}atTopLeft(t){return t.row.position-1===this.top&&t.column.getPosition()-1===this.left}atBottomRight(t){return t.row.position-1===this.bottom&&t.column.getPosition()-1===this.right}occupies(t){return this.occupiesRow(t.row)&&this.occupiesColumn(t.column)}occupiesRow(t){return this.top<=t.position-1&&t.position-1<=this.bottom}occupiesColumn(t){return this.left<=t.getPosition()-1&&t.getPosition()-1<=this.right}overlaps(t,e,i,r){return!(this.left>i||t>this.right||this.top>r||e>this.bottom)}getData(){var t=[],e=this.getRows(),i=this.getColumns();return e.forEach(r=>{var s=r.getData(),a={};i.forEach(o=>{a[o.field]=s[o.field]}),t.push(a)}),t}getCells(t,e){var i=[],r=this.getRows(),s=this.getColumns();return t?i=r.map(a=>{var o=[];return a.getCells().forEach(l=>{s.includes(l.column)&&o.push(e?l.getComponent():l)}),o}):r.forEach(a=>{a.getCells().forEach(o=>{s.includes(o.column)&&i.push(e?o.getComponent():o)})}),i}getStructuredCells(){return this.getCells(!0,!0)}getRows(){return this._getTableRows().slice(this.top,this.bottom+1)}getColumns(){return this._getTableColumns().slice(this.left,this.right+1)}clearValues(){var t=this.getCells(),e=this.table.options.selectableRangeClearCellsValue;this.table.blockRedraw(),t.forEach(i=>{i.setValue(e)}),this.table.restoreRedraw()}getBounds(t){var e=this.getCells(!1,t),i={start:null,end:null};return e.length?(i.start=e[0],i.end=e[e.length-1]):console.warn("No bounds defined on range"),i}getComponent(){return this.component||(this.component=new tp(this)),this.component}destroy(t){this.destroyed=!0,this.element.remove(),t&&this.rangeManager.rangeRemoved(this),this.initialized&&this.dispatchExternal("rangeRemoved",this.getComponent())}destroyedGuard(t){return this.destroyed&&console.warn("You cannot call the "+t+" function on a destroyed range"),!this.destroyed}},mC={rangeJumpUp:["ctrl + 38","meta + 38"],rangeJumpDown:["ctrl + 40","meta + 40"],rangeJumpLeft:["ctrl + 37","meta + 37"],rangeJumpRight:["ctrl + 39","meta + 39"],rangeExpandUp:"shift + 38",rangeExpandDown:"shift + 40",rangeExpandLeft:"shift + 37",rangeExpandRight:"shift + 39",rangeExpandJumpUp:["ctrl + shift + 38","meta + shift + 38"],rangeExpandJumpDown:["ctrl + shift + 40","meta + shift + 40"],rangeExpandJumpLeft:["ctrl + shift + 37","meta + shift + 37"],rangeExpandJumpRight:["ctrl + shift + 39","meta + shift + 39"]},gC={rangeJumpLeft:function(n){this.dispatch("keybinding-nav-range",n,"left",!0,!1)},rangeJumpRight:function(n){this.dispatch("keybinding-nav-range",n,"right",!0,!1)},rangeJumpUp:function(n){this.dispatch("keybinding-nav-range",n,"up",!0,!1)},rangeJumpDown:function(n){this.dispatch("keybinding-nav-range",n,"down",!0,!1)},rangeExpandLeft:function(n){this.dispatch("keybinding-nav-range",n,"left",!1,!0)},rangeExpandRight:function(n){this.dispatch("keybinding-nav-range",n,"right",!1,!0)},rangeExpandUp:function(n){this.dispatch("keybinding-nav-range",n,"up",!1,!0)},rangeExpandDown:function(n){this.dispatch("keybinding-nav-range",n,"down",!1,!0)},rangeExpandJumpLeft:function(n){this.dispatch("keybinding-nav-range",n,"left",!0,!0)},rangeExpandJumpRight:function(n){this.dispatch("keybinding-nav-range",n,"right",!0,!0)},rangeExpandJumpUp:function(n){this.dispatch("keybinding-nav-range",n,"up",!0,!0)},rangeExpandJumpDown:function(n){this.dispatch("keybinding-nav-range",n,"down",!0,!0)}},yC={range:function(n){var t=[],e=this.table.modules.selectRange.activeRange,i=!1,r,s,a,o,l;return l=n.length,e&&(r=e.getBounds(),s=r.start,r.start===r.end&&(i=!0),s&&(t=this.table.rowManager.activeRows.slice(),a=t.indexOf(s.row),i?o=n.length:o=t.indexOf(r.end.row)-a+1,a>-1&&(this.table.blockRedraw(),t=t.slice(a,a+o),t.forEach((c,h)=>{c.updateData(n[h%l])}),this.table.restoreRedraw()))),t}},vC={range:function(n){var t=[],e=[],i=this.table.modules.selectRange.activeRange,r=!1,s,a,o,l,c;return i&&(s=i.getBounds(),a=s.start,s.start===s.end&&(r=!0),a&&(n=n.split(`
`),n.forEach(function(h){t.push(h.split("	"))}),t.length&&(l=this.table.columnManager.getVisibleColumnsByIndex(),c=l.indexOf(a.column),c>-1)))?(r?o=t[0].length:o=l.indexOf(s.end.column)-c+1,l=l.slice(c,c+o),t.forEach(h=>{var d={},p=h.length;l.forEach(function(g,m){d[g.field]=h[m%p]}),e.push(d)}),e):!1}},bC={range:function(){var n=this.modules.selectRange.selectedColumns();return this.columnManager.rowHeader&&n.unshift(this.columnManager.rowHeader),n}},_C={range:function(){return this.modules.selectRange.selectedRows()}},wC={keybindings:{bindings:mC,actions:gC},clipboard:{pasteActions:yC,pasteParsers:vC},export:{columnLookups:bC,rowLookups:_C}},ip=class extends xi{static moduleName="selectRange";static moduleInitOrder=1;static moduleExtensions=wC;constructor(t){super(t),this.selecting="cell",this.mousedown=!1,this.ranges=[],this.overlay=null,this.rowHeader=null,this.layoutChangeTimeout=null,this.columnSelection=!1,this.rowSelection=!1,this.maxRanges=0,this.activeRange=!1,this.blockKeydown=!1,this.keyDownEvent=this._handleKeyDown.bind(this),this.mouseUpEvent=this._handleMouseUp.bind(this),this.registerTableOption("selectableRange",!1),this.registerTableOption("selectableRangeColumns",!1),this.registerTableOption("selectableRangeRows",!1),this.registerTableOption("selectableRangeClearCells",!1),this.registerTableOption("selectableRangeClearCellsValue",void 0),this.registerTableFunction("getRangesData",this.getRangesData.bind(this)),this.registerTableFunction("getRanges",this.getRanges.bind(this)),this.registerTableFunction("addRange",this.addRangeFromComponent.bind(this)),this.registerComponentFunction("cell","getRanges",this.cellGetRanges.bind(this)),this.registerComponentFunction("row","getRanges",this.rowGetRanges.bind(this)),this.registerComponentFunction("column","getRanges",this.colGetRanges.bind(this))}initialize(){this.options("selectableRange")&&(this.options("selectableRows")?console.warn("SelectRange functionality cannot be used in conjunction with row selection"):(this.maxRanges=this.options("selectableRange"),this.initializeTable(),this.initializeWatchers()),this.options("columns").findIndex(t=>t.frozen)>0&&console.warn("Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior."),this.options("columns").filter(t=>t.frozen)>1&&console.warn("Having multiple frozen columns with selectRange option may result in unpredictable behavior."))}initializeTable(){this.overlay=document.createElement("div"),this.overlay.classList.add("tabulator-range-overlay"),this.rangeContainer=document.createElement("div"),this.rangeContainer.classList.add("tabulator-range-container"),this.activeRangeCellElement=document.createElement("div"),this.activeRangeCellElement.classList.add("tabulator-range-cell-active"),this.overlay.appendChild(this.rangeContainer),this.overlay.appendChild(this.activeRangeCellElement),this.table.rowManager.element.addEventListener("keydown",this.keyDownEvent),this.resetRanges(),this.table.rowManager.element.appendChild(this.overlay),this.table.columnManager.element.setAttribute("tabindex",0),this.table.element.classList.add("tabulator-ranges")}initializeWatchers(){this.columnSelection=this.options("selectableRangeColumns"),this.rowSelection=this.options("selectableRangeRows"),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-mousedown",this.handleColumnMouseDown.bind(this)),this.subscribe("column-mousemove",this.handleColumnMouseMove.bind(this)),this.subscribe("column-resized",this.handleColumnResized.bind(this)),this.subscribe("column-moving",this.handleColumnMoving.bind(this)),this.subscribe("column-moved",this.handleColumnMoved.bind(this)),this.subscribe("column-width",this.layoutChange.bind(this)),this.subscribe("column-height",this.layoutChange.bind(this)),this.subscribe("column-resized",this.layoutChange.bind(this)),this.subscribe("columns-loaded",this.updateHeaderColumn.bind(this)),this.subscribe("cell-height",this.layoutChange.bind(this)),this.subscribe("cell-rendered",this.renderCell.bind(this)),this.subscribe("cell-mousedown",this.handleCellMouseDown.bind(this)),this.subscribe("cell-mousemove",this.handleCellMouseMove.bind(this)),this.subscribe("cell-click",this.handleCellClick.bind(this)),this.subscribe("cell-editing",this.handleEditingCell.bind(this)),this.subscribe("page-changed",this.redraw.bind(this)),this.subscribe("scroll-vertical",this.layoutChange.bind(this)),this.subscribe("scroll-horizontal",this.layoutChange.bind(this)),this.subscribe("data-destroy",this.tableDestroyed.bind(this)),this.subscribe("data-processed",this.resetRanges.bind(this)),this.subscribe("table-layout",this.layoutElement.bind(this)),this.subscribe("table-redraw",this.redraw.bind(this)),this.subscribe("table-destroy",this.tableDestroyed.bind(this)),this.subscribe("edit-editor-clear",this.finishEditingCell.bind(this)),this.subscribe("edit-blur",this.restoreFocus.bind(this)),this.subscribe("keybinding-nav-prev",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-next",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-left",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-right",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-up",this.keyNavigate.bind(this,"up")),this.subscribe("keybinding-nav-down",this.keyNavigate.bind(this,"down")),this.subscribe("keybinding-nav-range",this.keyNavigateRange.bind(this))}initializeColumn(t){this.columnSelection&&t.definition.headerSort&&this.options("headerSortClickElement")!=="icon"&&console.warn("Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'."),t.modules.edit}updateHeaderColumn(){var t;this.rowSelection&&(this.rowHeader=this.table.columnManager.getVisibleColumnsByIndex()[0],this.rowHeader&&(this.rowHeader.definition.cssClass=this.rowHeader.definition.cssClass+" tabulator-range-row-header",this.rowHeader.definition.headerSort&&console.warn("Using column headerSort with selectableRangeRows option may result in unpredictable behavior"),this.rowHeader.definition.editor&&console.warn("Using column editor with selectableRangeRows option may result in unpredictable behavior"))),this.table.modules.frozenColumns&&this.table.modules.frozenColumns.active&&(t=this.table.modules.frozenColumns.getFrozenColumns(),(t.length>1||t.length===1&&t[0]!==this.rowHeader)&&console.warn("Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior"))}getRanges(){return this.ranges.map(t=>t.getComponent())}getRangesData(){return this.ranges.map(t=>t.getData())}addRangeFromComponent(t,e){return t=t?t._cell:null,e=e?e._cell:null,this.addRange(t,e)}cellGetRanges(t){var e=[];return t.column===this.rowHeader?e=this.ranges.filter(i=>i.occupiesRow(t.row)):e=this.ranges.filter(i=>i.occupies(t)),e.map(i=>i.getComponent())}rowGetRanges(t){var e=this.ranges.filter(i=>i.occupiesRow(t));return e.map(i=>i.getComponent())}colGetRanges(t){var e=this.ranges.filter(i=>i.occupiesColumn(t));return e.map(i=>i.getComponent())}_handleMouseUp(t){this.mousedown=!1,document.removeEventListener("mouseup",this.mouseUpEvent)}_handleKeyDown(t){if(!this.blockKeydown&&(!this.table.modules.edit||this.table.modules.edit&&!this.table.modules.edit.currentCell)){if(t.key==="Enter"){if(this.table.modules.edit&&this.table.modules.edit.currentCell)return;this.table.modules.edit.editCell(this.getActiveCell()),t.preventDefault()}(t.key==="Backspace"||t.key==="Delete")&&this.options("selectableRangeClearCells")&&this.activeRange&&this.activeRange.clearValues()}}initializeFocus(t){var e;this.restoreFocus();try{document.selection?(e=document.body.createTextRange(),e.moveToElementText(t.getElement()),e.select()):window.getSelection&&(e=document.createRange(),e.selectNode(t.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(e))}catch{}}restoreFocus(t){return this.table.rowManager.element.focus(),!0}handleColumnResized(t){var e;this.selecting!=="column"&&this.selecting!=="all"||(e=this.ranges.some(i=>i.occupiesColumn(t)),e&&this.ranges.forEach(i=>{var r=i.getColumns(!0);r.forEach(s=>{s!==t&&s.setWidth(t.width)})}))}handleColumnMoving(t,e){this.resetRanges().setBounds(e),this.overlay.style.visibility="hidden"}handleColumnMoved(t,e,i){this.activeRange.setBounds(t),this.layoutElement()}handleColumnMouseDown(t,e){t.button===2&&(this.selecting==="column"||this.selecting==="all")&&this.activeRange.occupiesColumn(e)||this.table.options.movableColumns&&this.selecting==="column"&&this.activeRange.occupiesColumn(e)||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(t,e))}handleColumnMouseMove(t,e){e===this.rowHeader||!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,e,!0)}renderCell(t){var e=t.getElement(),i=this.ranges.findIndex(r=>r.occupies(t));e.classList.toggle("tabulator-range-selected",i!==-1),e.classList.toggle("tabulator-range-only-cell-selected",this.ranges.length===1&&this.ranges[0].atTopLeft(t)&&this.ranges[0].atBottomRight(t)),e.dataset.range=i}handleCellMouseDown(t,e){t.button===2&&(this.activeRange.occupies(e)||(this.selecting==="row"||this.selecting==="all")&&this.activeRange.occupiesRow(e.row))||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(t,e))}handleCellMouseMove(t,e){!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,e,!0)}handleCellClick(t,e){this.initializeFocus(e)}handleEditingCell(t){this.activeRange&&this.activeRange.setBounds(t)}finishEditingCell(){this.blockKeydown=!0,this.table.rowManager.element.focus(),setTimeout(()=>{this.blockKeydown=!1},10)}keyNavigate(t,e){this.navigate(!1,!1,t),e.preventDefault()}keyNavigateRange(t,e,i,r){this.navigate(i,r,e),t.preventDefault()}navigate(t,e,i){var r=!1,s,a,o,l,c,h;if(this.table.modules.edit&&this.table.modules.edit.currentCell)return!1;if(this.ranges.length>1&&(this.ranges=this.ranges.filter(d=>d===this.activeRange?(d.setEnd(d.start.row,d.start.col),!0):(d.destroy(),!1))),s=this.activeRange,a=e?s.end:s.start,o=a.row,l=a.col,t)switch(i){case"left":l=this.findJumpCellLeft(s.start.row,a.col);break;case"right":l=this.findJumpCellRight(s.start.row,a.col);break;case"up":o=this.findJumpCellUp(a.row,s.start.col);break;case"down":o=this.findJumpCellDown(a.row,s.start.col);break}else{if(e&&(this.selecting==="row"&&(i==="left"||i==="right")||this.selecting==="column"&&(i==="up"||i==="down")))return;switch(i){case"left":l=Math.max(l-1,0);break;case"right":l=Math.min(l+1,this.getTableColumns().length-1);break;case"up":o=Math.max(o-1,0);break;case"down":o=Math.min(o+1,this.getTableRows().length-1);break}}if(this.rowHeader&&l===0&&(l=1),r=l!==a.col||o!==a.row,e||s.setStart(o,l),s.setEnd(o,l),e||(this.selecting="cell"),r)return c=this.getRowByRangePos(s.end.row),h=this.getColumnByRangePos(s.end.col),(i==="left"||i==="right")&&h.getElement().parentNode===null?h.getComponent().scrollTo(void 0,!1):(i==="up"||i==="down")&&c.getElement().parentNode===null?c.getComponent().scrollTo(void 0,!1):this.autoScroll(s,c.getElement(),h.getElement()),this.layoutElement(),!0}rangeRemoved(t){this.ranges=this.ranges.filter(e=>e!==t),this.activeRange===t&&(this.ranges.length?this.activeRange=this.ranges[this.ranges.length-1]:this.addRange()),this.layoutElement()}findJumpRow(t,e,i,r,s){return i&&(e=e.reverse()),this.findJumpItem(r,s,e,function(a){return a.getData()[t.getField()]})}findJumpCol(t,e,i,r,s){return i&&(e=e.reverse()),this.findJumpItem(r,s,e,function(a){return t.getData()[a.getField()]})}findJumpItem(t,e,i,r){var s;for(let a of i){let o=r(a);if(t){if(s=a,o)break}else if(e){if(s=a,o)break}else if(o)s=a;else break}return s}findJumpCellLeft(t,e){var i=this.getRowByRangePos(t),r=this.getTableColumns(),s=this.isEmpty(i.getData()[r[e].getField()]),a=r[e-1]?this.isEmpty(i.getData()[r[e-1].getField()]):!1,o=this.rowHeader?r.slice(1,e):r.slice(0,e),l=this.findJumpCol(i,o,!0,s,a);return l?l.getPosition()-1:e}findJumpCellRight(t,e){var i=this.getRowByRangePos(t),r=this.getTableColumns(),s=this.isEmpty(i.getData()[r[e].getField()]),a=r[e+1]?this.isEmpty(i.getData()[r[e+1].getField()]):!1,o=this.findJumpCol(i,r.slice(e+1,r.length),!1,s,a);return o?o.getPosition()-1:e}findJumpCellUp(t,e){var i=this.getColumnByRangePos(e),r=this.getTableRows(),s=this.isEmpty(r[t].getData()[i.getField()]),a=r[t-1]?this.isEmpty(r[t-1].getData()[i.getField()]):!1,o=this.findJumpRow(i,r.slice(0,t),!0,s,a);return o?o.position-1:t}findJumpCellDown(t,e){var i=this.getColumnByRangePos(e),r=this.getTableRows(),s=this.isEmpty(r[t].getData()[i.getField()]),a=r[t+1]?this.isEmpty(r[t+1].getData()[i.getField()]):!1,o=this.findJumpRow(i,r.slice(t+1,r.length),!1,s,a);return o?o.position-1:t}newSelection(t,e){var i;if(e.type==="column"){if(!this.columnSelection)return;if(e===this.rowHeader){i=this.resetRanges(),this.selecting="all";var r,s=this.getCell(-1,-1);this.rowHeader?r=this.getCell(0,1):r=this.getCell(0,0),i.setBounds(r,s);return}else this.selecting="column"}else e.column===this.rowHeader?this.selecting="row":this.selecting="cell";t.shiftKey?this.activeRange.setBounds(!1,e):t.ctrlKey?this.addRange().setBounds(e):this.resetRanges().setBounds(e)}autoScroll(t,e,i){var r=this.table.rowManager.element,s,a,o,l,c;typeof e>"u"&&(e=this.getRowByRangePos(t.end.row).getElement()),typeof i>"u"&&(i=this.getColumnByRangePos(t.end.col).getElement()),this.rowHeader&&(s=this.rowHeader.getElement()),a={left:i.offsetLeft,right:i.offsetLeft+i.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight},o={left:r.scrollLeft,right:Math.ceil(r.scrollLeft+r.clientWidth),top:r.scrollTop,bottom:r.scrollTop+r.offsetHeight-this.table.rowManager.scrollbarWidth},s&&(o.left+=s.offsetWidth),l=o.left<a.left&&a.left<o.right&&o.left<a.right&&a.right<o.right,c=o.top<a.top&&a.top<o.bottom&&o.top<a.bottom&&a.bottom<o.bottom,l||(a.left<o.left?(r.scrollLeft=a.left,s&&(r.scrollLeft-=s.offsetWidth)):a.right>o.right&&(r.scrollLeft=a.right-r.clientWidth)),c||(a.top<o.top?r.scrollTop=a.top:a.bottom>o.bottom&&(r.scrollTop=a.bottom-r.clientHeight))}layoutChange(){this.overlay.style.visibility="hidden",clearTimeout(this.layoutChangeTimeout),this.layoutChangeTimeout=setTimeout(this.layoutRanges.bind(this),200)}redraw(t){t&&(this.selecting="cell",this.resetRanges(),this.layoutElement())}layoutElement(t){var e;t?e=this.table.rowManager.getVisibleRows(!0):e=this.table.rowManager.getRows(),e.forEach(i=>{i.type==="row"&&(this.layoutRow(i),i.cells.forEach(r=>this.renderCell(r)))}),this.getTableColumns().forEach(i=>{this.layoutColumn(i)}),this.layoutRanges()}layoutRow(t){var e=t.getElement(),i=!1,r=this.ranges.some(s=>s.occupiesRow(t));this.selecting==="row"?i=r:this.selecting==="all"&&(i=!0),e.classList.toggle("tabulator-range-selected",i),e.classList.toggle("tabulator-range-highlight",r)}layoutColumn(t){var e=t.getElement(),i=!1,r=this.ranges.some(s=>s.occupiesColumn(t));this.selecting==="column"?i=r:this.selecting==="all"&&(i=!0),e.classList.toggle("tabulator-range-selected",i),e.classList.toggle("tabulator-range-highlight",r)}layoutRanges(){var t,e,i;this.table.initialized&&(t=this.getActiveCell(),t&&(e=t.getElement(),i=t.row.getElement(),this.table.rtl?this.activeRangeCellElement.style.right=i.offsetWidth-e.offsetLeft-e.offsetWidth+"px":this.activeRangeCellElement.style.left=i.offsetLeft+e.offsetLeft+"px",this.activeRangeCellElement.style.top=i.offsetTop+"px",this.activeRangeCellElement.style.width=e.offsetWidth+"px",this.activeRangeCellElement.style.height=i.offsetHeight+"px",this.ranges.forEach(r=>r.layout()),this.overlay.style.visibility="visible"))}getCell(t,e){var i;return e<0&&(e=this.getTableColumns().length+e,e<0)?null:(t<0&&(t=this.getTableRows().length+t),i=this.table.rowManager.getRowFromPosition(t+1),i?i.getCells(!1,!0).filter(r=>r.column.visible)[e]:null)}getActiveCell(){return this.getCell(this.activeRange.start.row,this.activeRange.start.col)}getRowByRangePos(t){return this.getTableRows()[t]}getColumnByRangePos(t){return this.getTableColumns()[t]}getTableRows(){return this.table.rowManager.getDisplayRows().filter(t=>t.type==="row")}getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}addRange(t,e){var i;return this.maxRanges!==!0&&this.ranges.length>=this.maxRanges&&this.ranges.shift().destroy(),i=new ep(this.table,this,t,e),this.activeRange=i,this.ranges.push(i),this.rangeContainer.appendChild(i.element),i}resetRanges(){var t,e,i;return this.ranges.forEach(r=>r.destroy()),this.ranges=[],t=this.addRange(),this.table.rowManager.activeRows.length&&(i=this.table.rowManager.activeRows[0].cells.filter(r=>r.column.visible),e=i[this.rowHeader?1:0],e&&(t.setBounds(e),this.initializeFocus(e))),t}tableDestroyed(){document.removeEventListener("mouseup",this.mouseUpEvent),this.table.rowManager.element.removeEventListener("keydown",this.keyDownEvent)}selectedRows(t){return t?this.activeRange.getRows().map(e=>e.getComponent()):this.activeRange.getRows()}selectedColumns(t){return t?this.activeRange.getColumns().map(e=>e.getComponent()):this.activeRange.getColumns()}isEmpty(t){return t==null||t===""}};function xC(n,t,e,i,r,s,a){var o=a.alignEmptyValues,l=a.decimalSeparator,c=a.thousandSeparator,h=0;if(n=String(n),t=String(t),c&&(n=n.split(c).join(""),t=t.split(c).join("")),l&&(n=n.split(l).join("."),t=t.split(l).join(".")),n=parseFloat(n),t=parseFloat(t),isNaN(n))h=isNaN(t)?0:-1;else if(isNaN(t))h=1;else return n-t;return(o==="top"&&s==="desc"||o==="bottom"&&s==="asc")&&(h*=-1),h}function EC(n,t,e,i,r,s,a){var o=a.alignEmptyValues,l=0,c;if(!n)l=t?-1:0;else if(!t)l=1;else{switch(typeof a.locale){case"boolean":a.locale&&(c=this.langLocale());break;case"string":c=a.locale;break}return String(n).toLowerCase().localeCompare(String(t).toLowerCase(),c)}return(o==="top"&&s==="desc"||o==="bottom"&&s==="asc")&&(l*=-1),l}function Tp(n,t,e,i,r,s,a){var o=window.DateTime||luxon.DateTime,l=a.format||"dd/MM/yyyy HH:mm:ss",c=a.alignEmptyValues,h=0;if(typeof o<"u"){if(o.isDateTime(n)||(l==="iso"?n=o.fromISO(String(n)):n=o.fromFormat(String(n),l)),o.isDateTime(t)||(l==="iso"?t=o.fromISO(String(t)):t=o.fromFormat(String(t),l)),!n.isValid)h=t.isValid?-1:0;else if(!t.isValid)h=1;else return n-t;return(c==="top"&&s==="desc"||c==="bottom"&&s==="asc")&&(h*=-1),h}else console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}function CC(n,t,e,i,r,s,a){return a.format||(a.format="dd/MM/yyyy"),Tp.call(this,n,t,e,i,r,s,a)}function MC(n,t,e,i,r,s,a){return a.format||(a.format="HH:mm"),Tp.call(this,n,t,e,i,r,s,a)}function SC(n,t,e,i,r,s,a){var o=n===!0||n==="true"||n==="True"||n===1?1:0,l=t===!0||t==="true"||t==="True"||t===1?1:0;return o-l}function kC(n,t,e,i,r,s,a){var o=a.type||"length",l=a.alignEmptyValues,c=0;function h(d){var p;switch(o){case"length":p=d.length;break;case"sum":p=d.reduce(function(g,m){return g+m});break;case"max":p=Math.max.apply(null,d);break;case"min":p=Math.min.apply(null,d);break;case"avg":p=d.reduce(function(g,m){return g+m})/d.length;break}return p}if(!Array.isArray(n))c=Array.isArray(t)?-1:0;else if(!Array.isArray(t))c=1;else return h(t)-h(n);return(l==="top"&&s==="desc"||l==="bottom"&&s==="asc")&&(c*=-1),c}function LC(n,t,e,i,r,s,a){var o=typeof n>"u"?0:1,l=typeof t>"u"?0:1;return o-l}function TC(n,t,e,i,r,s,a){var o,l,c,h,d=0,p,g=/(\d+)|(\D+)/g,m=/\d/,_=a.alignEmptyValues,v=0;if(!n&&n!==0)v=!t&&t!==0?0:-1;else if(!t&&t!==0)v=1;else{if(isFinite(n)&&isFinite(t))return n-t;if(o=String(n).toLowerCase(),l=String(t).toLowerCase(),o===l)return 0;if(!(m.test(o)&&m.test(l)))return o>l?1:-1;for(o=o.match(g),l=l.match(g),p=o.length>l.length?l.length:o.length;d<p;)if(c=o[d],h=l[d++],c!==h)return isFinite(c)&&isFinite(h)?(c.charAt(0)==="0"&&(c="."+c),h.charAt(0)==="0"&&(h="."+h),c-h):c>h?1:-1;return o.length>l.length}return(_==="top"&&s==="desc"||_==="bottom"&&s==="asc")&&(v*=-1),v}var PC={number:xC,string:EC,date:CC,time:MC,datetime:Tp,boolean:SC,array:kC,exists:LC,alphanum:TC},rp=class n extends xi{static moduleName="sort";static sorters=PC;constructor(t){super(t),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerTableOption("headerSortClickElement","header"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),this.table.options.sortMode==="remote"&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(t,e,i,r){var s=this.getSort();return s.forEach(a=>{delete a.column}),r.sort=s,r}userSetSort(t,e){this.setSort(t,e),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(t){var e=!1,i,r;switch(typeof t.definition.sorter){case"string":n.sorters[t.definition.sorter]?e=n.sorters[t.definition.sorter]:console.warn("Sort Error - No such sorter found: ",t.definition.sorter);break;case"function":e=t.definition.sorter;break}if(t.modules.sort={sorter:e,dir:"none",params:t.definition.sorterParams||{},startingDir:t.definition.headerSortStartingDir||"asc",tristate:t.definition.headerSortTristate},t.definition.headerSort!==!1){switch(i=t.getElement(),i.classList.add("tabulator-sortable"),r=document.createElement("div"),r.classList.add("tabulator-col-sorter"),this.table.options.headerSortClickElement){case"icon":r.classList.add("tabulator-col-sorter-element");break;case"header":i.classList.add("tabulator-col-sorter-element");break;default:i.classList.add("tabulator-col-sorter-element");break}switch(this.table.options.headerSortElement){case"function":break;case"object":r.appendChild(this.table.options.headerSortElement);break;default:r.innerHTML=this.table.options.headerSortElement}t.titleHolderElement.appendChild(r),t.modules.sort.element=r,this.setColumnHeaderSortIcon(t,"none"),this.table.options.headerSortClickElement==="icon"&&r.addEventListener("mousedown",s=>{s.stopPropagation()}),(this.table.options.headerSortClickElement==="icon"?r:i).addEventListener("click",s=>{var a="",o=[],l=!1;if(t.modules.sort){if(t.modules.sort.tristate)t.modules.sort.dir=="none"?a=t.modules.sort.startingDir:t.modules.sort.dir==t.modules.sort.startingDir?a=t.modules.sort.dir=="asc"?"desc":"asc":a="none";else switch(t.modules.sort.dir){case"asc":a="desc";break;case"desc":a="asc";break;default:a=t.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(s.shiftKey||s.ctrlKey)?(o=this.getSort(),l=o.findIndex(c=>c.field===t.getField()),l>-1?(o[l].dir=a,l=o.splice(l,1)[0],a!="none"&&o.push(l)):a!="none"&&o.push({column:t,dir:a}),this.setSort(o)):a=="none"?this.clear():this.setSort(t,a),this.refreshSort()}})}}refreshSort(){this.table.options.sortMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0)}hasChanged(){var t=this.changed;return this.changed=!1,t}getSort(){var t=this,e=[];return t.sortList.forEach(function(i){i.column&&e.push({column:i.column.getComponent(),field:i.column.getField(),dir:i.dir})}),e}setSort(t,e){var i=this,r=[];Array.isArray(t)||(t=[{column:t,dir:e}]),t.forEach(function(s){var a;a=i.table.columnManager.findColumn(s.column),a?(s.column=a,r.push(s),i.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",s.column)}),i.sortList=r,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(t){var e=this.table.rowManager.activeRows[0],i="string",r,s;if(e&&(e=e.getData(),r=t.getField(),r))switch(s=t.getFieldValue(e),typeof s){case"undefined":i="string";break;case"boolean":i="boolean";break;default:!isNaN(s)&&s!==""?i="number":s.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(i="alphanum");break}return n.sorters[i]}sort(t,e){var i=this,r=this.table.options.sortOrderReverse?i.sortList.slice().reverse():i.sortList,s=[],a=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",i.getSort()),e||i.clearColumnHeaders(),this.table.options.sortMode!=="remote"?(r.forEach(function(o,l){var c;o.column&&(c=o.column.modules.sort,c&&(c.sorter||(c.sorter=i.findSorter(o.column)),o.params=typeof c.params=="function"?c.params(o.column.getComponent(),o.dir):c.params,s.push(o)),e||i.setColumnHeader(o.column,o.dir))}),s.length&&i._sortItems(t,s)):e||r.forEach(function(o,l){i.setColumnHeader(o.column,o.dir)}),this.subscribedExternal("dataSorted")&&(t.forEach(o=>{a.push(o.getComponent())}),this.dispatchExternal("dataSorted",i.getSort(),a)),t}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(t=>{t.modules.sort&&(t.modules.sort.dir="none",t.getElement().setAttribute("aria-sort","none"),this.setColumnHeaderSortIcon(t,"none"))})}setColumnHeader(t,e){t.modules.sort.dir=e,t.getElement().setAttribute("aria-sort",e==="asc"?"ascending":"descending"),this.setColumnHeaderSortIcon(t,e)}setColumnHeaderSortIcon(t,e){var i=t.modules.sort.element,r;if(t.definition.headerSort&&typeof this.table.options.headerSortElement=="function"){for(;i.firstChild;)i.removeChild(i.firstChild);r=this.table.options.headerSortElement.call(this.table,t.getComponent(),e),typeof r=="object"?i.appendChild(r):i.innerHTML=r}}_sortItems(t,e){var i=e.length-1;t.sort((r,s)=>{for(var a,o=i;o>=0;o--){let l=e[o];if(a=this._sortRow(r,s,l.column,l.dir,l.params),a!==0)break}return a})}_sortRow(t,e,i,r,s){var a,o,l=r=="asc"?t:e,c=r=="asc"?e:t;return t=i.getFieldValue(l.getData()),e=i.getFieldValue(c.getData()),t=typeof t<"u"?t:"",e=typeof e<"u"?e:"",a=l.getComponent(),o=c.getComponent(),i.modules.sort.sorter.call(this,t,e,a,o,i.getComponent(),r,s)}},np=class{constructor(t,e){this.columnCount=t,this.rowCount=e,this.columnString=[],this.columns=[],this.rows=[]}genColumns(t){var e=Math.max(this.columnCount,Math.max(...t.map(i=>i.length)));this.columnString=[],this.columns=[];for(let i=1;i<=e;i++)this.incrementChar(this.columnString.length-1),this.columns.push(this.columnString.join(""));return this.columns}genRows(t){var e=Math.max(this.rowCount,t.length);this.rows=[];for(let i=1;i<=e;i++)this.rows.push(i);return this.rows}incrementChar(t){let e=this.columnString[t];e?e!=="Z"?this.columnString[t]=String.fromCharCode(this.columnString[t].charCodeAt(0)+1):(this.columnString[t]="A",t?this.incrementChar(t-1):this.columnString.push("A")):this.columnString.push("A")}setRowCount(t){this.rowCount=t}setColumnCount(t){this.columnCount=t}},Fh=class{constructor(t){return this._sheet=t,new Proxy(this,{get:function(e,i,r){return typeof e[i]<"u"?e[i]:e._sheet.table.componentFunctionBinder.handle("sheet",e._sheet,i)}})}getTitle(){return this._sheet.title}getKey(){return this._sheet.key}getDefinition(){return this._sheet.getDefinition()}getData(){return this._sheet.getData()}setData(t){return this._sheet.setData(t)}clear(){return this._sheet.clear()}remove(){return this._sheet.remove()}active(){return this._sheet.active()}setTitle(t){return this._sheet.setTitle(t)}setRows(t){return this._sheet.setRows(t)}setColumns(t){return this._sheet.setColumns(t)}},zh=class extends Un{constructor(t,e){super(t.table),this.spreadsheetManager=t,this.definition=e,this.title=this.definition.title||"",this.key=this.definition.key||this.definition.title,this.rowCount=this.definition.rows,this.columnCount=this.definition.columns,this.data=this.definition.data||[],this.element=null,this.isActive=!1,this.grid=new np(this.columnCount,this.rowCount),this.defaultColumnDefinition={width:100,headerHozAlign:"center",headerSort:!1},this.columnDefinition=Object.assign(this.defaultColumnDefinition,this.options("spreadsheetColumnDefinition")),this.columnDefs=[],this.rowDefs=[],this.columnFields=[],this.columns=[],this.rows=[],this.scrollTop=null,this.scrollLeft=null,this.initialize(),this.dispatchExternal("sheetAdded",this.getComponent())}initialize(){this.initializeElement(),this.initializeColumns(),this.initializeRows()}reinitialize(){this.initializeColumns(),this.initializeRows()}initializeElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tab"),this.element.innerText=this.title,this.element.addEventListener("click",()=>{this.spreadsheetManager.loadSheet(this)})}initializeColumns(){this.grid.setColumnCount(this.columnCount),this.columnFields=this.grid.genColumns(this.data),this.columnDefs=[],this.columnFields.forEach(t=>{var e=Object.assign({},this.columnDefinition);e.field=t,e.title=t,this.columnDefs.push(e)})}initializeRows(){var t;this.grid.setRowCount(this.rowCount),t=this.grid.genRows(this.data),this.rowDefs=[],t.forEach((e,i)=>{var r={_id:e},s=this.data[i];s&&s.forEach((a,o)=>{var l=this.columnFields[o];l&&(r[l]=a)}),this.rowDefs.push(r)})}unload(){this.isActive=!1,this.scrollTop=this.table.rowManager.scrollTop,this.scrollLeft=this.table.rowManager.scrollLeft,this.data=this.getData(!0),this.element.classList.remove("tabulator-spreadsheet-tab-active")}load(){var t=!this.isActive;this.isActive=!0,this.table.blockRedraw(),this.table.setData([]),this.table.setColumns(this.columnDefs),this.table.setData(this.rowDefs),this.table.restoreRedraw(),t&&this.scrollTop!==null&&(this.table.rowManager.element.scrollLeft=this.scrollLeft,this.table.rowManager.element.scrollTop=this.scrollTop),this.element.classList.add("tabulator-spreadsheet-tab-active"),this.dispatchExternal("sheetLoaded",this.getComponent())}getComponent(){return new Fh(this)}getDefinition(){return{title:this.title,key:this.key,rows:this.rowCount,columns:this.columnCount,data:this.getData()}}getData(t){var e=[],i,r,s;return this.rowDefs.forEach(a=>{var o=[];this.columnFields.forEach(l=>{o.push(a[l])}),e.push(o)}),!t&&!this.options("spreadsheetOutputFull")&&(i=e.map(a=>a.findLastIndex(o=>typeof o<"u")+1),r=Math.max(...i),s=i.findLastIndex(a=>a>0)+1,e=e.slice(0,s),e=e.map(a=>a.slice(0,r))),e}setData(t){this.data=t,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}clear(){this.setData([])}setTitle(t){this.title=t,this.element.innerText=t,this.dispatchExternal("sheetUpdated",this.getComponent())}setRows(t){this.rowCount=t,this.initializeRows(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}setColumns(t){this.columnCount=t,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}remove(){this.spreadsheetManager.removeSheet(this)}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispatchExternal("sheetRemoved",this.getComponent())}active(){this.spreadsheetManager.loadSheet(this)}},sp=class extends xi{static moduleName="spreadsheet";constructor(t){super(t),this.sheets=[],this.element=null,this.registerTableOption("spreadsheet",!1),this.registerTableOption("spreadsheetRows",50),this.registerTableOption("spreadsheetColumns",50),this.registerTableOption("spreadsheetColumnDefinition",{}),this.registerTableOption("spreadsheetOutputFull",!1),this.registerTableOption("spreadsheetData",!1),this.registerTableOption("spreadsheetSheets",!1),this.registerTableOption("spreadsheetSheetTabs",!1),this.registerTableOption("spreadsheetSheetTabsElement",!1),this.registerTableFunction("setSheets",this.setSheets.bind(this)),this.registerTableFunction("addSheet",this.addSheet.bind(this)),this.registerTableFunction("getSheets",this.getSheets.bind(this)),this.registerTableFunction("getSheetDefinitions",this.getSheetDefinitions.bind(this)),this.registerTableFunction("setSheetData",this.setSheetData.bind(this)),this.registerTableFunction("getSheet",this.getSheet.bind(this)),this.registerTableFunction("getSheetData",this.getSheetData.bind(this)),this.registerTableFunction("clearSheet",this.clearSheet.bind(this)),this.registerTableFunction("removeSheet",this.removeSheetFunc.bind(this)),this.registerTableFunction("activeSheet",this.activeSheetFunc.bind(this))}initialize(){this.options("spreadsheet")&&(this.subscribe("table-initialized",this.tableInitialized.bind(this)),this.subscribe("data-loaded",this.loadRemoteData.bind(this)),this.table.options.index="_id",this.options("spreadsheetData")&&this.options("spreadsheetSheets")&&(console.warn("You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData"),this.table.options.spreadsheetData=!1),this.compatibilityCheck(),this.options("spreadsheetSheetTabs")&&this.initializeTabset())}compatibilityCheck(){this.options("data")&&console.warn("Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table"),this.options("pagination")&&console.warn("The spreadsheet module is not compatible with the pagination module"),this.options("groupBy")&&console.warn("The spreadsheet module is not compatible with the row grouping module"),this.options("responsiveCollapse")&&console.warn("The spreadsheet module is not compatible with the responsive collapse module")}initializeTabset(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tabs");var t=this.options("spreadsheetSheetTabsElement");t&&!(t instanceof HTMLElement)&&(t=document.querySelector(t),t||console.warn("Unable to find element matching spreadsheetSheetTabsElement selector:",this.options("spreadsheetSheetTabsElement"))),t?t.appendChild(this.element):this.footerAppend(this.element)}tableInitialized(){this.sheets.length?this.loadSheet(this.sheets[0]):this.options("spreadsheetSheets")?this.loadSheets(this.options("spreadsheetSheets")):this.options("spreadsheetData")&&this.loadData(this.options("spreadsheetData"))}loadRemoteData(t,e,i){return console.log("data",t,e,i),Array.isArray(t)?(this.table.dataLoader.clearAlert(),this.dispatchExternal("dataLoaded",t),!t.length||Array.isArray(t[0])?this.loadData(t):this.loadSheets(t)):console.error(`Spreadsheet Loading Error - Unable to process remote data due to invalid data type 
Expecting: array 
Received: `,typeof t,`
Data:     `,t),!1}loadData(t){var e={data:t};this.loadSheet(this.newSheet(e))}destroySheets(){this.sheets.forEach(t=>{t.destroy()}),this.sheets=[],this.activeSheet=null}loadSheets(t){Array.isArray(t)||(t=[]),this.destroySheets(),t.forEach(e=>{this.newSheet(e)}),this.loadSheet(this.sheets[0])}loadSheet(t){this.activeSheet!==t&&(this.activeSheet&&this.activeSheet.unload(),this.activeSheet=t,t.load())}newSheet(t={}){var e;return t.rows||(t.rows=this.options("spreadsheetRows")),t.columns||(t.columns=this.options("spreadsheetColumns")),e=new zh(this,t),this.sheets.push(e),this.element&&this.element.appendChild(e.element),e}removeSheet(t){var e=this.sheets.indexOf(t),i;this.sheets.length>1?e>-1&&(this.sheets.splice(e,1),t.destroy(),this.activeSheet===t&&(i=this.sheets[e-1]||this.sheets[0],i?this.loadSheet(i):this.activeSheet=null)):console.warn("Unable to remove sheet, at least one sheet must be active")}lookupSheet(t){return t?t instanceof zh?t:t instanceof Fh?t._sheet:this.sheets.find(e=>e.key===t)||!1:this.activeSheet}setSheets(t){return this.loadSheets(t),this.getSheets()}addSheet(t){return this.newSheet(t).getComponent()}getSheetDefinitions(){return this.sheets.map(t=>t.getDefinition())}getSheets(){return this.sheets.map(t=>t.getComponent())}getSheet(t){var e=this.lookupSheet(t);return e?e.getComponent():!1}setSheetData(t,e){t&&!e&&(e=t,t=!1);var i=this.lookupSheet(t);return i?i.setData(e):!1}getSheetData(t){var e=this.lookupSheet(t);return e?e.getData():!1}clearSheet(t){var e=this.lookupSheet(t);return e?e.clear():!1}removeSheetFunc(t){var e=this.lookupSheet(t);e&&this.removeSheet(e)}activeSheetFunc(t){var e=this.lookupSheet(t);return e?this.loadSheet(e):!1}},op=class extends xi{static moduleName="tooltip";constructor(t){super(t),this.tooltipSubscriber=null,this.headerSubscriber=null,this.timeout=null,this.popupInstance=null,this.registerTableOption("tooltipDelay",300),this.registerColumnOption("tooltip"),this.registerColumnOption("headerTooltip")}initialize(){this.deprecatedOptionsCheck(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeColumn(t){t.definition.headerTooltip&&!this.headerSubscriber&&(this.headerSubscriber=!0,this.subscribe("column-mousemove",this.mousemoveCheck.bind(this,"headerTooltip")),this.subscribe("column-mouseout",this.mouseoutCheck.bind(this,"headerTooltip"))),t.definition.tooltip&&!this.tooltipSubscriber&&(this.tooltipSubscriber=!0,this.subscribe("cell-mousemove",this.mousemoveCheck.bind(this,"tooltip")),this.subscribe("cell-mouseout",this.mouseoutCheck.bind(this,"tooltip")))}mousemoveCheck(t,e,i){var r=t==="tooltip"?i.column.definition.tooltip:i.definition.headerTooltip;r&&(this.clearPopup(),this.timeout=setTimeout(this.loadTooltip.bind(this,e,i,r),this.table.options.tooltipDelay))}mouseoutCheck(t,e,i){this.popupInstance||this.clearPopup()}clearPopup(t,e,i){clearTimeout(this.timeout),this.timeout=null,this.popupInstance&&this.popupInstance.hide()}loadTooltip(t,e,i){var r,s,a;function o(l){s=l}typeof i=="function"&&(i=i(t,e.getComponent(),o)),i instanceof HTMLElement?r=i:(r=document.createElement("div"),i===!0&&(e instanceof ga?i=e.value:e.definition.field?this.langBind("columns|"+e.definition.field,l=>{r.innerHTML=i=l||e.definition.title}):i=e.definition.title),r.innerHTML=i),(i||i===0||i===!1)&&(r.classList.add("tabulator-tooltip"),r.addEventListener("mousemove",l=>l.preventDefault()),this.popupInstance=this.popup(r),typeof s=="function"&&this.popupInstance.renderCallback(s),a=this.popupInstance.containerEventCoords(t),this.popupInstance.show(a.x+15,a.y+15).hideOnBlur(()=>{this.dispatchExternal("TooltipClosed",e.getComponent()),this.popupInstance=null}),this.dispatchExternal("TooltipOpened",e.getComponent()))}},RC={integer:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:(t=Number(t),!isNaN(t)&&isFinite(t)&&Math.floor(t)===t)},float:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:(t=Number(t),!isNaN(t)&&isFinite(t)&&t%1!==0)},numeric:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:!isNaN(t)},string:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:isNaN(t)},alphanumeric:function(n,t,e){if(t===""||t===null||typeof t>"u")return!0;var i=new RegExp(/^[a-z0-9]+$/i);return i.test(t)},max:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:parseFloat(t)<=e},min:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:parseFloat(t)>=e},starts:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).toLowerCase().startsWith(String(e).toLowerCase())},ends:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).toLowerCase().endsWith(String(e).toLowerCase())},minLength:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).length>=e},maxLength:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).length<=e},in:function(n,t,e){return t===""||t===null||typeof t>"u"?!0:(typeof e=="string"&&(e=e.split("|")),e.indexOf(t)>-1)},regex:function(n,t,e){if(t===""||t===null||typeof t>"u")return!0;var i=new RegExp(e);return i.test(t)},unique:function(n,t,e){if(t===""||t===null||typeof t>"u")return!0;var i=!0,r=n.getData(),s=n.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(a){var o=a.getData();o!==r&&t==s.getFieldValue(o)&&(i=!1)}),i},required:function(n,t,e){return t!==""&&t!==null&&typeof t<"u"}},ap=class n extends xi{static moduleName="validate";static validators=RC;constructor(t){super(t),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("edit-success",this.editValidate.bind(this)),this.subscribe("edit-editor-clear",this.editorClear.bind(this)),this.subscribe("edit-edited-clear",this.editedClear.bind(this))}editValidate(t,e,i){var r=this.table.options.validationMode!=="manual"?this.validate(t.column.modules.validate,t,e):!0;return r!==!0&&setTimeout(()=>{t.getElement().classList.add("tabulator-validation-fail"),this.dispatchExternal("validationFailed",t.getComponent(),e,r)}),r}editorClear(t,e){e&&t.column.modules.validate&&this.cellValidate(t),t.getElement().classList.remove("tabulator-validation-fail")}editedClear(t){t.modules.validate&&(t.modules.validate.invalid=!1)}cellIsValid(t){return t.modules.validate&&t.modules.validate.invalid||!0}cellValidate(t){return this.validate(t.column.modules.validate,t,t.getValue())}columnValidate(t){var e=[];return t.cells.forEach(i=>{this.cellValidate(i)!==!0&&e.push(i.getComponent())}),e.length?e:!0}rowValidate(t){var e=[];return t.cells.forEach(i=>{this.cellValidate(i)!==!0&&e.push(i.getComponent())}),e.length?e:!0}userClearCellValidation(t){t||(t=this.getInvalidCells()),Array.isArray(t)||(t=[t]),t.forEach(e=>{this.clearValidation(e._getSelf())})}userValidate(t){var e=[];return this.table.rowManager.rows.forEach(i=>{i=i.getComponent();var r=i.validate();r!==!0&&(e=e.concat(r))}),e.length?e:!0}initializeColumnCheck(t){typeof t.definition.validator<"u"&&this.initializeColumn(t)}initializeColumn(t){var e=this,i=[],r;t.definition.validator&&(Array.isArray(t.definition.validator)?t.definition.validator.forEach(s=>{r=e._extractValidator(s),r&&i.push(r)}):(r=this._extractValidator(t.definition.validator),r&&i.push(r)),t.modules.validate=i.length?i:!1)}_extractValidator(t){var e,i,r;switch(typeof t){case"string":return r=t.indexOf(":"),r>-1?(e=t.substring(0,r),i=t.substring(r+1)):e=t,this._buildValidator(e,i);case"function":return this._buildValidator(t);case"object":return this._buildValidator(t.type,t.parameters)}}_buildValidator(t,e){var i=typeof t=="function"?t:n.validators[t];return i?{type:typeof t=="function"?"function":t,func:i,params:e}:(console.warn("Validator Setup Error - No matching validator found:",t),!1)}validate(t,e,i){var r=this,s=[],a=this.invalidCells.indexOf(e);return t&&t.forEach(o=>{o.func.call(r,e.getComponent(),i,o.params)||s.push({type:o.type,parameters:o.params})}),e.modules.validate||(e.modules.validate={}),s.length?(e.modules.validate.invalid=s,this.table.options.validationMode!=="manual"&&e.getElement().classList.add("tabulator-validation-fail"),a==-1&&this.invalidCells.push(e)):(e.modules.validate.invalid=!1,e.getElement().classList.remove("tabulator-validation-fail"),a>-1&&this.invalidCells.splice(a,1)),s.length?s:!0}getInvalidCells(){var t=[];return this.invalidCells.forEach(e=>{t.push(e.getComponent())}),t}clearValidation(t){var e;t.modules.validate&&t.modules.validate.invalid&&(t.getElement().classList.remove("tabulator-validation-fail"),t.modules.validate.invalid=!1,e=this.invalidCells.indexOf(t),e>-1&&this.invalidCells.splice(e,1))}},yd=Object.freeze({__proto__:null,AccessorModule:vd,AjaxModule:wd,ClipboardModule:xd,ColumnCalcsModule:Cd,DataTreeModule:Md,DownloadModule:Sd,EditModule:kd,ExportModule:Ld,FilterModule:Td,FormatModule:Pd,FrozenColumnsModule:Rd,FrozenRowsModule:Od,GroupRowsModule:Ad,HistoryModule:Nd,HtmlTableImportModule:Dd,ImportModule:Bd,InteractionModule:Fd,KeybindingsModule:zd,MenuModule:jd,MoveColumnsModule:Hd,MoveRowsModule:Gd,MutatorModule:Ud,PageModule:Vd,PersistenceModule:qd,PopupModule:Wd,PrintModule:Xd,ReactiveDataModule:$d,ResizeColumnsModule:Yd,ResizeRowsModule:Zd,ResizeTableModule:Kd,ResponsiveLayoutModule:Jd,SelectRangeModule:ip,SelectRowModule:Qd,SortModule:rp,SpreadsheetModule:sp,TooltipModule:op,ValidateModule:ap}),OC={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,debugInvalidComponentFuncs:!0,debugInitialization:!0,debugDeprecation:!0,height:!1,minHeight:!1,maxHeight:!1,columnHeaderVertAlign:"top",popupContainer:!1,columns:[],columnDefaults:{},rowHeader:!1,data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,rowHeight:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataLoaderErrorTimeout:3e3,dataSendParams:{},dataReceiveParams:{}},jh=class{constructor(t,e,i={}){this.table=t,this.msgType=e,this.registeredDefaults=Object.assign({},i)}register(t,e){this.registeredDefaults[t]=e}generate(t,e={}){var i=Object.assign({},this.registeredDefaults),r=this.table.options.debugInvalidOptions||e.debugInvalidOptions===!0;Object.assign(i,t);for(let s in e)i.hasOwnProperty(s)||(r&&console.warn("Invalid "+this.msgType+" option:",s),i[s]=e.key);for(let s in i)s in e?i[s]=e[s]:Array.isArray(i[s])?i[s]=Object.assign([],i[s]):typeof i[s]=="object"&&i[s]!==null?i[s]=Object.assign({},i[s]):typeof i[s]>"u"&&delete i[s];return i}},nl=class extends Un{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,e){}renderRowCells(t){}rerenderRowCells(t,e){}scrollColumns(t,e){}scrollRows(t,e){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,e){var i=t.getElement();e%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,e,i){var r=this.rows().indexOf(t),s=t.getElement(),a=0;return new Promise((o,l)=>{if(r>-1){if(typeof i>"u"&&(i=this.table.options.scrollToRowIfVisible),!i&&Ir.elVisible(s)&&(a=Ir.elOffset(s).top-Ir.elOffset(this.elementVertical).top,a>0&&a<this.elementVertical.clientHeight-s.offsetHeight))return o(),!1;switch(typeof e>"u"&&(e=this.table.options.scrollToRowPosition),e==="nearest"&&(e=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),e){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(s.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-s.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-s.offsetTop)+s.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+s.offsetHeight;break;case"top":this.elementVertical.scrollTop=s.offsetTop;break}o()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")})}},lp=class extends nl{constructor(t){super(t)}renderRowCells(t,e){let i=document.createDocumentFragment();t.cells.forEach(r=>{i.appendChild(r.getElement())}),t.element.appendChild(i),e||t.cells.forEach(r=>{r.cellRendered()})}reinitializeColumnWidths(t){t.forEach(function(e){e.reinitializeWidth()})}},up=class extends nl{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.windowBuffer=200,this.visibleRows=null,this.initialized=!1,this.isFitData=!1,this.columns=[]}initialize(){this.compatibilityCheck(),this.layoutCheck(),this.vertScrollListen()}compatibilityCheck(){this.options("layout")=="fitDataTable"&&console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"),this.options("responsiveLayout")&&console.warn("Horizontal Virtual DOM is not compatible with responsive columns"),this.options("rtl")&&console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction")}layoutCheck(){this.isFitData=this.options("layout").startsWith("fitData")}vertScrollListen(){this.subscribe("scroll-vertical",this.clearVisRowCache.bind(this)),this.subscribe("data-refreshed",this.clearVisRowCache.bind(this))}clearVisRowCache(){this.visibleRows=null}renderColumns(t,e){this.dataChange()}scrollColumns(t,e){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.windowBuffer)))}calcWindowBuffer(){var t=this.elementVertical.clientWidth;this.table.columnManager.columnsByIndex.forEach(e=>{if(e.visible){var i=e.getWidth();i>t&&(t=i)}}),this.windowBuffer=t*2}rerenderColumns(t,e){var i={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},r=0;t&&!this.initialized||(this.clear(),this.calcWindowBuffer(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.windowBuffer,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,this.table.columnManager.columnsByIndex.forEach(s=>{var a={},o;s.visible&&(s.modules.frozen||(o=s.getWidth(),a.leftPos=r,a.rightPos=r+o,a.width=o,this.isFitData&&(a.fitDataCheck=s.modules.vdomHoz?s.modules.vdomHoz.fitDataCheck:!0),r+o>this.vDomScrollPosLeft&&r<this.vDomScrollPosRight?(this.leftCol==-1&&(this.leftCol=this.columns.length,this.vDomPadLeft=r),this.rightCol=this.columns.length):this.leftCol!==-1&&(this.vDomPadRight+=o),this.columns.push(s),s.modules.vdomHoz=a,r+=o))}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,e||(!t||this.reinitChanged(i))&&this.reinitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft)}renderRowCells(t){if(this.initialized)this.initializeRow(t);else{let e=document.createDocumentFragment();t.cells.forEach(i=>{e.appendChild(i.getElement())}),t.element.appendChild(e),t.cells.forEach(i=>{i.cellRendered()})}}rerenderRowCells(t,e){this.reinitializeRow(t,e)}reinitializeColumnWidths(t){for(let e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var t=!1,e,i;if(this.isFitData){if(this.table.columnManager.columnsByIndex.forEach(r=>{!r.definition.width&&r.visible&&(t=!0)}),t&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,e=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows())[0],e)){i=e.getElement(),e.generateCells(),this.tableElement.appendChild(i);for(let r=0;r<e.cells.length;r++){let s=e.cells[r];i.appendChild(s.getElement()),s.column.reinitializeWidth()}i.parentNode.removeChild(i),this.rerenderColumns(!1,!0)}}else this.options("layout")==="fitColumns"&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var e=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol?!0:(t.cols.forEach((i,r)=>{i!==this.columns[r]&&(e=!1)}),!e)}reinitializeRows(){var t=this.getVisibleRows(),e=this.table.rowManager.getRows().filter(i=>!t.includes(i));t.forEach(i=>{this.reinitializeRow(i,!0)}),e.forEach(i=>{i.deinitialize()})}getVisibleRows(){return this.visibleRows||(this.visibleRows=this.table.rowManager.getVisibleRows()),this.visibleRows}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,Math.abs(t)>this.windowBuffer/2?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,e,i){for(let r=t;r<e;r++){let s=this.columns[r];s.modules.vdomHoz.leftPos+=i,s.modules.vdomHoz.rightPos+=i}}addColRight(){for(var t=!1,e=!0;e;){let i=this.columns[this.rightCol+1];i&&i.modules.vdomHoz.leftPos<=this.vDomScrollPosRight?(t=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var s=r.getCell(i);r.getElement().insertBefore(s.getElement(),r.getCell(this.columns[this.rightCol]).getElement().nextSibling),s.cellRendered()}}),this.fitDataColActualWidthCheck(i),this.rightCol++,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.rightCol=this.rightCol)}),this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=i.getWidth()):e=!1}t&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}addColLeft(){for(var t=!1,e=!0;e;){let i=this.columns[this.leftCol-1];if(i)if(i.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){t=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var a=s.getCell(i);s.getElement().insertBefore(a.getElement(),s.getCell(this.columns[this.leftCol]).getElement()),a.cellRendered()}}),this.leftCol--,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.leftCol=this.leftCol)}),this.leftCol<=0?this.vDomPadLeft=0:this.vDomPadLeft-=i.getWidth();let r=this.fitDataColActualWidthCheck(i);r&&(this.scrollLeft=this.elementVertical.scrollLeft=this.elementVertical.scrollLeft+r,this.vDomPadRight-=r)}else e=!1;else e=!1}t&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}removeColRight(){for(var t=!1,e=!0;e;){let i=this.columns[this.rightCol];i&&i.modules.vdomHoz.leftPos>this.vDomScrollPosRight?(t=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var s=r.getCell(i);try{r.getElement().removeChild(s.getElement())}catch(a){console.warn("Could not removeColRight",a.message)}}}),this.vDomPadRight+=i.getWidth(),this.rightCol--,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.rightCol=this.rightCol)})):e=!1}t&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}removeColLeft(){for(var t=!1,e=!0;e;){let i=this.columns[this.leftCol];i&&i.modules.vdomHoz.rightPos<this.vDomScrollPosLeft?(t=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var s=r.getCell(i);try{r.getElement().removeChild(s.getElement())}catch(a){console.warn("Could not removeColLeft",a.message)}}}),this.vDomPadLeft+=i.getWidth(),this.leftCol++,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.leftCol=this.leftCol)})):e=!1}t&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}fitDataColActualWidthCheck(t){var e,i;return t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),e=t.getWidth(),i=e-t.modules.vdomHoz.width,i&&(t.modules.vdomHoz.rightPos+=i,t.modules.vdomHoz.width=e,this.colPositionAdjust(this.columns.indexOf(t)+1,this.columns.length,i)),t.modules.vdomHoz.fitDataCheck=!1),i}initializeRow(t){if(t.type!=="group"){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},this.table.modules.frozenColumns&&this.table.modules.frozenColumns.leftColumns.forEach(e=>{this.appendCell(t,e)});for(let e=this.leftCol;e<=this.rightCol;e++)this.appendCell(t,this.columns[e]);this.table.modules.frozenColumns&&this.table.modules.frozenColumns.rightColumns.forEach(e=>{this.appendCell(t,e)})}}appendCell(t,e){if(e&&e.visible){let i=t.getCell(e);t.getElement().appendChild(i.getElement()),i.cellRendered()}}reinitializeRow(t,e){if(t.type!=="group"&&(e||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var i=t.getElement();i.firstChild;)i.removeChild(i.firstChild);this.initializeRow(t)}}},hp=class extends Un{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.contentsElement=null,this.rowHeader=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new jh(this.table,"column definition",Sv),this.redrawBlock=!1,this.redrawBlockUpdate=null,this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.contentsElement=this.createHeaderContentsElement(),this.element=this.createHeaderElement(),this.contentsElement.insertBefore(this.headersElement,this.contentsElement.firstChild),this.element.insertBefore(this.contentsElement,this.element.firstChild),this.initializeScrollWheelWatcher(),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("scrollbar-vertical",this.padVerticalScrollbar.bind(this))}padVerticalScrollbar(t){this.table.rtl?this.headersElement.style.marginLeft=t+"px":this.headersElement.style.marginRight=t+"px"}initializeRenderer(){var t,e={virtual:up,basic:lp};typeof this.table.options.renderHorizontal=="string"?t=e[this.table.options.renderHorizontal]:t=this.table.options.renderHorizontal,t?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",this.table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderContentsElement(){var t=document.createElement("div");return t.classList.add("tabulator-header-contents"),t.setAttribute("role","rowgroup"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getContentsElement(){return this.contentsElement}getHeadersElement(){return this.headersElement}scrollHorizontal(t){this.contentsElement.scrollLeft=t,this.scrollLeft=t,this.renderer.scrollColumns(t)}initializeScrollWheelWatcher(){this.contentsElement.addEventListener("wheel",t=>{var e;t.deltaX&&(e=this.contentsElement.scrollLeft+t.deltaX,this.table.rowManager.scrollHorizontal(e),this.table.columnManager.scrollHorizontal(e))})}generateColumnsFromRowData(t){var e=[],i={},r=this.table.options.autoColumns==="full"?t:[t[0]],s=this.table.options.autoColumnsDefinitions;if(t&&t.length){if(r.forEach(a=>{Object.keys(a).forEach((o,l)=>{let c=a[o],h;i[o]?i[o]!==!0&&typeof c<"u"&&(i[o].sorter=this.calculateSorterFromValue(c),i[o]=!0):(h={field:o,title:o,sorter:this.calculateSorterFromValue(c)},e.splice(l,0,h),i[o]=typeof c>"u"?h:!0)})}),s)switch(typeof s){case"function":this.table.options.columns=s.call(this.table,e);break;case"object":Array.isArray(s)?e.forEach(a=>{var o=s.find(l=>l.field===a.field);o&&Object.assign(a,o)}):e.forEach(a=>{s[a.field]&&Object.assign(a,s[a.field])}),this.table.options.columns=e;break}else this.table.options.columns=e;this.setColumns(this.table.options.columns)}}calculateSorterFromValue(t){var e;switch(typeof t){case"undefined":e="string";break;case"boolean":e="boolean";break;case"number":e="number";break;case"object":Array.isArray(t)?e="array":e="string";break;default:!isNaN(t)&&t!==""?e="number":t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?e="alphanum":e="string";break}return e}setColumns(t,e){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),this.dispatchExternal("columnsLoading"),this.table.options.rowHeader&&(this.rowHeader=new ma(this.table.options.rowHeader===!0?{}:this.table.options.rowHeader,this,!0),this.columns.push(this.rowHeader),this.headersElement.appendChild(this.rowHeader.getElement()),this.rowHeader.columnRendered()),t.forEach((i,r)=>{this._addColumn(i)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.subscribedExternal("columnsLoaded")&&this.dispatchExternal("columnsLoaded",this.getComponents()),this.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,e,i){var r=new ma(t,this),s=r.getElement(),a=i&&this.findColumnIndex(i);if(e&&this.rowHeader&&(!i||i===this.rowHeader)&&(e=!1,i=this.rowHeader,a=0),i&&a>-1){var o=i.getTopColumn(),l=this.columns.indexOf(o),c=o.getElement();e?(this.columns.splice(l,0,r),c.parentNode.insertBefore(s,c)):(this.columns.splice(l+1,0,r),c.parentNode.insertBefore(s,c.nextSibling))}else e?(this.columns.unshift(r),this.headersElement.insertBefore(r.getElement(),this.headersElement.firstChild)):(this.columns.push(r),this.headersElement.appendChild(r.getElement()));return r.columnRendered(),r}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})}verticalAlignHeaders(){var t=0;this.redrawBlock||(this.headersElement.style.height="",this.columns.forEach(e=>{e.clearVerticalAlign()}),this.columns.forEach(e=>{var i=e.getHeight();i>t&&(t=i)}),this.headersElement.style.height=t+"px",this.columns.forEach(e=>{e.verticalAlign(this.table.options.columnHeaderVertAlign,t)}),this.table.rowManager.adjustTableSize())}findColumn(t){var e;if(typeof t=="object"){if(t instanceof ma)return t;if(t instanceof Dh)return t._getSelf()||!1;if(typeof HTMLElement<"u"&&t instanceof HTMLElement)return e=[],this.columns.forEach(r=>{e.push(r),e=e.concat(r.getColumns(!0))}),e.find(r=>r.element===t)||!1}else return this.columnsByField[t]||!1;return!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var e=[];return Object.keys(this.columnsByField).forEach(i=>{var r=this.table.options.nestedFieldSeparator?i.split(this.table.options.nestedFieldSeparator)[0]:i;r===t&&e.push(this.columnsByField[i])}),e}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibleColumn(){var t=this.columnsByIndex.findIndex(e=>e.visible);return t>-1?this.columnsByIndex[t]:!1}getVisibleColumnsByIndex(){return this.columnsByIndex.filter(t=>t.visible)}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex(e=>t===e)}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach((e,i)=>{t(e,i)})}getDefinitions(t){var e=[];return this.columnsByIndex.forEach(i=>{(!t||t&&i.visible)&&e.push(i.getDefinition())}),e}getDefinitionTree(){var t=[];return this.columns.forEach(e=>{t.push(e.getDefinition(!0))}),t}getComponents(t){var e=[],i=t?this.columns:this.columnsByIndex;return i.forEach(r=>{e.push(r.getComponent())}),e}getWidth(){var t=0;return this.columnsByIndex.forEach(e=>{e.visible&&(t+=e.getWidth())}),t}moveColumn(t,e,i){e.element.parentNode.insertBefore(t.element,e.element),i&&e.element.parentNode.insertBefore(e.element,t.element),this.moveColumnActual(t,e,i),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,e,i){t.parent.isGroup?this._moveColumnInArray(t.parent.columns,t,e,i):this._moveColumnInArray(this.columns,t,e,i),this._moveColumnInArray(this.columnsByIndex,t,e,i,!0),this.rerenderColumns(!0),this.dispatch("column-moved",t,e,i),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,e,i,r,s){var a=t.indexOf(e),o,l=[];a>-1&&(t.splice(a,1),o=t.indexOf(i),o>-1?r&&(o=o+1):o=a,t.splice(o,0,e),s&&(l=this.chain("column-moving-rows",[e,i,r],null,[])||[],l=l.concat(this.table.rowManager.rows),l.forEach(function(c){if(c.cells.length){var h=c.cells.splice(a,1)[0];c.cells.splice(o,0,h)}})))}scrollToColumn(t,e,i){var r=0,s=t.getLeftOffset(),a=0,o=t.getElement();return new Promise((l,c)=>{if(typeof e>"u"&&(e=this.table.options.scrollToColumnPosition),typeof i>"u"&&(i=this.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":a=-this.element.clientWidth/2;break;case"right":a=o.clientWidth-this.headersElement.clientWidth;break}if(!i&&s>0&&s+o.offsetWidth<this.element.clientWidth)return!1;r=s+a,r=Math.max(Math.min(r,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(r),this.scrollHorizontal(r),l()}else console.warn("Scroll Error - Column not visible"),c("Scroll Error - Column not visible")})}generateCells(t){var e=[];return this.columnsByIndex.forEach(i=>{e.push(i.generateCell(t))}),e}getFlexBaseWidth(){var t=this.table.element.clientWidth,e=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(i){var r,s,a;i.visible&&(r=i.definition.width||0,s=parseInt(i.minWidth),typeof r=="string"?r.indexOf("%")>-1?a=t/100*parseInt(r):a=parseInt(r):a=r,e+=a>s?a:s)}),e}addColumn(t,e,i){return new Promise((r,s)=>{var a=this._addColumn(t,e,i);this._reIndexColumns(),this.dispatch("column-add",t,e,i),this.layoutMode()!="fitColumns"&&a.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.rerenderColumns(),r(a)})}deregisterColumn(t){var e=t.getField(),i;e&&delete this.columnsByField[e],i=this.columnsByIndex.indexOf(t),i>-1&&this.columnsByIndex.splice(i,1),i=this.columns.indexOf(t),i>-1&&this.columns.splice(i,1),this.verticalAlignHeaders(),this.redraw()}rerenderColumns(t,e){this.redrawBlock?(t===!1||t===!0&&this.redrawBlockUpdate===null)&&(this.redrawBlockUpdate=t):this.renderer.rerenderColumns(t,e)}blockRedraw(){this.redrawBlock=!0,this.redrawBlockUpdate=null}restoreRedraw(){this.redrawBlock=!1,this.verticalAlignHeaders(),this.renderer.rerenderColumns(this.redrawBlockUpdate)}redraw(t){Ir.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(t),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}},cp=class extends nl{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,e=!0,i=document.createDocumentFragment(),r=this.rows();r.forEach((s,a)=>{this.styleRow(s,a),s.initialize(!1,!0),s.type!=="group"&&(e=!1),i.appendChild(s.getElement())}),t.appendChild(i),r.forEach(s=>{s.rendered(),s.heightInitialized||s.calcHeight(!0)}),r.forEach(s=>{s.heightInitialized||s.setCellHeight()}),e?t.style.minWidth=this.table.columnManager.getWidth()+"px":t.style.minWidth=""}rerenderRows(t){this.clearRows(),t&&t(),this.renderRows(),this.rows().length||this.table.rowManager.tableEmpty()}scrollToRowNearestTop(t){var e=Ir.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-e)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-e))}scrollToRow(t){var e=t.getElement();this.elementVertical.scrollTop=Ir.elOffset(e).top-Ir.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}},fp=class extends nl{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var e=this.elementVertical.scrollTop,i=!1,r=!1,s=this.table.rowManager.scrollLeft,a=this.rows(),o=this.vDomTop;o<=this.vDomBottom;o++)if(a[o]){var l=e-a[o].getElement().offsetTop;if(r===!1||Math.abs(l)<r)r=l,i=o;else break}a.forEach(c=>{c.deinitializeHeight()}),t&&t(),this.rows().length?this._virtualRenderFill(i===!1?this.rows.length-1:i,!0,r||0):(this.clear(),this.table.rowManager.tableEmpty()),this.scrollColumns(s)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,e){var i=t-this.vDomScrollPosTop,r=t-this.vDomScrollPosBottom,s=this.vDomWindowBuffer*2,a=this.rows();if(this.scrollTop=t,-i>s||r>s){var o=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*a.length)),this.scrollColumns(o)}else e?(i<0&&this._addTopRow(a,-i),r<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(a,-r):this.vDomScrollPosBottom=this.scrollTop)):(r>=0&&this._addBottomRow(a,r),i>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(a,i):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var e=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-e)>Math.abs(this.vDomBottom-e))}scrollToRow(t){var e=this.rows().indexOf(t);e>-1&&this._virtualRenderFill(e,!0)}visibleRows(t){var e=this.elementVertical.scrollTop,i=this.elementVertical.clientHeight+e,r=!1,s=0,a=0,o=this.rows();if(t)s=this.vDomTop,a=this.vDomBottom;else for(var l=this.vDomTop;l<=this.vDomBottom;l++)if(o[l])if(r)if(i-o[l].getElement().offsetTop>=0)a=l;else break;else if(e-o[l].getElement().offsetTop>=0)s=l;else if(r=!0,i-o[l].getElement().offsetTop>=0)a=l;else break;return o.slice(s,a+1)}_virtualRenderFill(t,e,i){var r=this.tableElement,s=this.elementVertical,a=0,o=0,l=0,c=0,h=0,d=0,p=this.rows(),g=p.length,m=0,_,v,x=[],S=0,O=0,D=this.table.rowManager.fixedHeight,U=this.elementVertical.clientHeight,z=this.table.options.rowHeight,V=!0;if(t=t||0,i=i||0,!t)this.clear();else{for(;r.firstChild;)r.removeChild(r.firstChild);c=(g-t+1)*this.vDomRowHeight,c<U&&(t-=Math.ceil((U-c)/this.vDomRowHeight),t<0&&(t=0)),a=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t),t-=a}if(g&&Ir.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1,D||this.table.options.maxHeight?(z&&(O=U/z+this.vDomWindowBuffer/z),O=Math.max(this.vDomWindowMinTotalRows,Math.ceil(O))):O=g;(O==g||o<=U+this.vDomWindowBuffer||S<this.vDomWindowMinTotalRows)&&this.vDomBottom<g-1;){for(x=[],v=document.createDocumentFragment(),d=0;d<O&&this.vDomBottom<g-1;)m=this.vDomBottom+1,_=p[m],this.styleRow(_,m),_.initialize(!1,!0),!_.heightInitialized&&!this.table.options.rowHeight&&_.clearCellHeight(),v.appendChild(_.getElement()),x.push(_),this.vDomBottom++,d++;if(!x.length)break;r.appendChild(v),x.forEach(G=>{G.rendered(),G.heightInitialized||G.calcHeight(!0)}),x.forEach(G=>{G.heightInitialized||G.setCellHeight()}),x.forEach(G=>{l=G.getHeight(),S<a?h+=l:o+=l,l>this.vDomWindowBuffer&&(this.vDomWindowBuffer=l*2),S++}),V=this.table.rowManager.adjustTableSize(),U=this.elementVertical.clientHeight,V&&(D||this.table.options.maxHeight)&&(z=o/S,O=Math.max(this.vDomWindowMinTotalRows,Math.ceil(U/z+this.vDomWindowBuffer/z)))}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+i:this.scrollTop-h,this.vDomBottomPad=this.vDomBottom==g-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-o-h,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((o+h)/S),this.vDomBottomPad=this.vDomRowHeight*(g-this.vDomBottom-1),this.vDomScrollHeight=h+o+this.vDomBottomPad-U),r.style.paddingTop=this.vDomTopPad+"px",r.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+h+i-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-U:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-U),this.elementVertical.scrollWidth>this.elementVertical.clientWidth&&e&&(this.scrollTop+=this.elementVertical.offsetHeight-U),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,s.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,e){for(var i=this.tableElement,r=[],s=0,a=this.vDomTop-1,o=0,l=!0;l;)if(this.vDomTop){let c=t[a],h,d;c&&o<this.vDomMaxRenderChain?(h=c.getHeight()||this.vDomRowHeight,d=c.initialized,e>=h?(this.styleRow(c,a),i.insertBefore(c.getElement(),i.firstChild),(!c.initialized||!c.heightInitialized)&&r.push(c),c.initialize(),d||(h=c.getElement().offsetHeight,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2)),e-=h,s+=h,this.vDomTop--,a--,o++):l=!1):l=!1}else l=!1;for(let c of r)c.clearCellHeight();this._quickNormalizeRowHeight(r),s&&(this.vDomTopPad-=s,this.vDomTopPad<0&&(this.vDomTopPad=a*this.vDomRowHeight),a<1&&(this.vDomTopPad=0),i.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=s)}_removeTopRow(t,e){for(var i=[],r=0,s=0,a=!0;a;){let o=t[this.vDomTop],l;o&&s<this.vDomMaxRenderChain?(l=o.getHeight()||this.vDomRowHeight,e>=l?(this.vDomTop++,e-=l,r+=l,i.push(o),s++):a=!1):a=!1}for(let o of i){let l=o.getElement();l.parentNode&&l.parentNode.removeChild(l)}r&&(this.vDomTopPad+=r,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?r:r+this.vDomWindowBuffer)}_addBottomRow(t,e){for(var i=this.tableElement,r=[],s=0,a=this.vDomBottom+1,o=0,l=!0;l;){let c=t[a],h,d;c&&o<this.vDomMaxRenderChain?(h=c.getHeight()||this.vDomRowHeight,d=c.initialized,e>=h?(this.styleRow(c,a),i.appendChild(c.getElement()),(!c.initialized||!c.heightInitialized)&&r.push(c),c.initialize(),d||(h=c.getElement().offsetHeight,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2)),e-=h,s+=h,this.vDomBottom++,a++,o++):l=!1):l=!1}for(let c of r)c.clearCellHeight();this._quickNormalizeRowHeight(r),s&&(this.vDomBottomPad-=s,(this.vDomBottomPad<0||a==t.length-1)&&(this.vDomBottomPad=0),i.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=s)}_removeBottomRow(t,e){for(var i=[],r=0,s=0,a=!0;a;){let o=t[this.vDomBottom],l;o&&s<this.vDomMaxRenderChain?(l=o.getHeight()||this.vDomRowHeight,e>=l?(this.vDomBottom--,e-=l,r+=l,i.push(o),s++):a=!1):a=!1}for(let o of i){let l=o.getElement();l.parentNode&&l.parentNode.removeChild(l)}r&&(this.vDomBottomPad+=r,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=r)}_quickNormalizeRowHeight(t){for(let e of t)e.calcHeight();for(let e of t)e.setCellHeight()}},dp=class extends Un{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.placeholder=null,this.placeholderContents=null,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRenderInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.scrollbarWidth=0,this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}initializePlaceholder(){var t=this.table.options.placeholder;if(typeof t=="function"&&(t=t.call(this.table)),t=this.chain("placeholder",[t],t,t)||t,t){let e=document.createElement("div");if(e.classList.add("tabulator-placeholder"),typeof t=="string"){let i=document.createElement("div");i.classList.add("tabulator-placeholder-contents"),i.innerHTML=t,e.appendChild(i),this.placeholderContents=i}else typeof HTMLElement<"u"&&t instanceof HTMLElement?(e.appendChild(t),this.placeholderContents=t):(console.warn("Invalid placeholder provided, must be string or HTML Element",t),this.el=null);this.placeholder=e}}getElement(){return this.element}getTableElement(){return this.tableElement}initialize(){this.initializePlaceholder(),this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var t=this.element.scrollLeft,e=this.scrollLeft>t,i=this.element.scrollTop,r=this.scrollTop>i;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,e),this.dispatchExternal("scrollHorizontal",t,e),this._positionPlaceholder()),this.scrollTop!=i&&(this.scrollTop=i,this.renderer.scrollRows(i,r),this.dispatch("scroll-vertical",i,r),this.dispatchExternal("scrollVertical",i,r))})}findRow(t){if(typeof t=="object"){if(t instanceof ts)return t;if(t instanceof rl)return t._getSelf()||!1;if(typeof HTMLElement<"u"&&t instanceof HTMLElement)return this.rows.find(i=>i.getElement()===t)||!1;if(t===null)return!1}else return typeof t>"u"?!1:this.rows.find(i=>i.data[this.table.options.index]==t)||!1;return!1}getRowFromDataObject(t){var e=this.rows.find(i=>i.data===t);return e||!1}getRowFromPosition(t){return this.getDisplayRows().find(e=>e.type==="row"&&e.getPosition()===t&&e.isDisplayed())}scrollToRow(t,e,i){return this.renderer.scrollToRowPosition(t,e,i)}setData(t,e,i){return new Promise((r,s)=>{e&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition(()=>{this._setDataActual(t)}):(this.table.options.autoColumns&&i&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),r()})}_setDataActual(t,e){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach((i,r)=>{if(i&&typeof i=="object"){var s=new ts(i,this);this.rows.push(s)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",i)}),this.refreshActiveData(!1,!1,e),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `,typeof t,`
Data:     `,t)}_wipeElements(){this.dispatch("rows-wipe"),this.destroy(),this.adjustTableSize(),this.dispatch("rows-wiped")}destroy(){this.rows.forEach(t=>{t.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0}deleteRow(t,e){var i=this.rows.indexOf(t),r=this.activeRows.indexOf(t);r>-1&&this.activeRows.splice(r,1),i>-1&&this.rows.splice(i,1),this.setActiveRows(this.activeRows),this.displayRowIterator(s=>{var a=s.indexOf(t);a>-1&&s.splice(a,1)}),e||this.reRenderInPosition(),this.regenerateRowPositions(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this.tableEmpty(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,e,i,r){var s=this.addRowActual(t,e,i,r);return s}addRows(t,e,i,r){var s=[];return new Promise((a,o)=>{e=this.findAddRowPos(e),Array.isArray(t)||(t=[t]),(typeof i>"u"&&e||typeof i<"u"&&!e)&&t.reverse(),t.forEach((l,c)=>{var h=this.addRow(l,e,i,!0);s.push(h),this.dispatch("row-added",h,l,e,i)}),this.refreshActiveData(r?"displayPipeline":!1,!1,!0),this.regenerateRowPositions(),this.displayRowsCount&&this._clearPlaceholder(),a(s)})}findAddRowPos(t){return typeof t>"u"&&(t=this.table.options.addRowPos),t==="pos"&&(t=!0),t==="bottom"&&(t=!1),t}addRowActual(t,e,i,r){var s=t instanceof ts?t:new ts(t||{},this),a=this.findAddRowPos(e),o=-1,l,c;return i||(c=this.chain("row-adding-position",[s,a],null,{index:i,top:a}),i=c.index,a=c.top),typeof i<"u"&&(i=this.findRow(i)),i=this.chain("row-adding-index",[s,i,a],null,i),i&&(o=this.rows.indexOf(i)),i&&o>-1?(l=this.activeRows.indexOf(i),this.displayRowIterator(function(h){var d=h.indexOf(i);d>-1&&h.splice(a?d:d+1,0,s)}),l>-1&&this.activeRows.splice(a?l:l+1,0,s),this.rows.splice(a?o:o+1,0,s)):a?(this.displayRowIterator(function(h){h.unshift(s)}),this.activeRows.unshift(s),this.rows.unshift(s)):(this.displayRowIterator(function(h){h.push(s)}),this.activeRows.push(s),this.rows.push(s)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",s.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),r||this.reRenderInPosition(),s}moveRow(t,e,i){this.dispatch("row-move",t,e,i),this.moveRowActual(t,e,i),this.regenerateRowPositions(),this.dispatch("row-moved",t,e,i),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,e,i){this.moveRowInArray(this.rows,t,e,i),this.moveRowInArray(this.activeRows,t,e,i),this.displayRowIterator(r=>{this.moveRowInArray(r,t,e,i)}),this.dispatch("row-moving",t,e,i)}moveRowInArray(t,e,i,r){var s,a,o,l;if(e!==i&&(s=t.indexOf(e),s>-1&&(t.splice(s,1),a=t.indexOf(i),a>-1?r?t.splice(a+1,0,e):t.splice(a,0,e):t.splice(s,0,e)),t===this.getDisplayRows())){o=s<a?s:a,l=a>s?a:s+1;for(let c=o;c<=l;c++)t[c]&&this.styleRow(t[c],c)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var e=this.getDisplayRows().indexOf(t);return e>-1?e:!1}nextDisplayRow(t,e){var i=this.getDisplayRowIndex(t),r=!1;return i!==!1&&i<this.displayRowsCount-1&&(r=this.getDisplayRows()[i+1]),r&&(!(r instanceof ts)||r.type!="row")?this.nextDisplayRow(r,e):r}prevDisplayRow(t,e){var i=this.getDisplayRowIndex(t),r=!1;return i&&(r=this.getDisplayRows()[i-1]),e&&r&&(!(r instanceof ts)||r.type!="row")?this.prevDisplayRow(r,e):r}findRowIndex(t,e){var i;return t=this.findRow(t),t&&(i=e.indexOf(t),i>-1)?i:!1}getData(t,e){var i=[],r=this.getRows(t);return r.forEach(function(s){s.type=="row"&&i.push(s.getData(e||"data"))}),i}getComponents(t){var e=[],i=this.getRows(t);return i.forEach(function(r){e.push(r.getComponent())}),e}getDataCount(t){var e=this.getRows(t);return e.length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,e){typeof e<"u"?(this.dataPipeline.push({handler:t,priority:e}),this.dataPipeline.sort((i,r)=>i.priority-r.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,e){typeof e<"u"?(this.displayPipeline.push({handler:t,priority:e}),this.displayPipeline.sort((i,r)=>i.priority-r.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,e,i){var r=this.table,s="",a=0,o=["all","dataPipeline","display","displayPipeline","end"];if(!this.table.destroyed){if(typeof t=="function")if(a=this.dataPipeline.findIndex(l=>l.handler===t),a>-1)s="dataPipeline",e&&(a==this.dataPipeline.length-1?s="display":a++);else if(a=this.displayPipeline.findIndex(l=>l.handler===t),a>-1)s="displayPipeline",e&&(a==this.displayPipeline.length-1?s="end":a++);else{console.error("Unable to refresh data, invalid handler provided",t);return}else s=t||"all",a=0;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===s&&a<this.redrawBlockRestoreConfig.index||o.indexOf(s)<o.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:e,renderInPosition:i,stage:s,index:a});return}else Ir.elVisible(this.element)?i?this.reRenderInPosition(this.refreshPipelines.bind(this,t,s,a,i)):(this.refreshPipelines(t,s,a,i),t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),r.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0)):this.refreshPipelines(t,s,a,i),this.dispatch("data-refreshed")}}refreshPipelines(t,e,i,r){switch(this.dispatch("data-refreshing"),(!t||!this.activeRowsPipeline[0])&&(this.activeRowsPipeline[0]=this.rows.slice(0)),e){case"all":case"dataPipeline":for(let s=i;s<this.dataPipeline.length;s++){let a=this.dataPipeline[s].handler(this.activeRowsPipeline[s].slice(0));this.activeRowsPipeline[s+1]=a||this.activeRowsPipeline[s].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);case"display":i=0,this.resetDisplayRows();case"displayPipeline":for(let s=i;s<this.displayPipeline.length;s++){let a=this.displayPipeline[s].handler((s?this.getDisplayRows(s-1):this.activeRows).slice(0),r);this.setDisplayRows(a||this.getDisplayRows(s-1).slice(0),s)}case"end":this.regenerateRowPositions()}this.getDisplayRows().length&&this._clearPlaceholder()}regenerateRowPositions(){var t=this.getDisplayRows(),e=1;t.forEach(i=>{i.type==="row"&&(i.setPosition(e),e++)})}setActiveRows(t){this.activeRows=this.activeRows=Object.assign([],t),this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}setDisplayRows(t,e){this.displayRows[e]=t,e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length)}getDisplayRows(t){return typeof t>"u"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t,e){var i=Object.assign([],this.renderer.visibleRows(!e));return t&&(i=this.chain("rows-visible",[e],i,i)),i}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var e=[];switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!1,!0);break;default:e=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return e}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRenderInPosition=!0:(this.dispatchExternal("renderStarted"),this.renderer.rerenderRows(t),this.fixedHeight||this.adjustTableSize(),this.scrollBarCheck(),this.dispatchExternal("renderComplete"))}scrollBarCheck(){var t=0;this.element.scrollHeight>this.element.clientHeight&&(t=this.element.offsetWidth-this.element.clientWidth),t!==this.scrollbarWidth&&(this.scrollbarWidth=t,this.dispatch("scrollbar-vertical",t))}initializeRenderer(){var t,e={virtual:fp,basic:cp};typeof this.table.options.renderVertical=="string"?t=e[this.table.options.renderVertical]:t=this.table.options.renderVertical,t?(this.renderMode=this.table.options.renderVertical,this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),(this.table.element.clientHeight||this.table.options.height)&&!(this.table.options.minHeight&&this.table.options.maxHeight)?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",this.table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.fixedHeight||this.adjustTableSize(),this.layoutRefresh(!0))):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.scrollBarCheck(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}tableEmpty(){this.renderEmptyScroll(),this._showPlaceholder()}checkPlaceholder(){this.displayRowsCount?this._clearPlaceholder():this.tableEmpty()}_showPlaceholder(){this.placeholder&&(this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.initializePlaceholder(),this.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.placeholder),this._positionPlaceholder(),this.adjustTableSize())}_clearPlaceholder(){this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.tableElement.style.minWidth="",this.tableElement.style.display=""}_positionPlaceholder(){this.placeholder&&this.placeholder.parentNode&&(this.placeholder.style.width=this.table.columnManager.getWidth()+"px",this.placeholderContents.style.width=this.table.rowManager.element.clientWidth+"px",this.placeholderContents.style.marginLeft=this.scrollLeft+"px")}styleRow(t,e){var i=t.getElement();e%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(t){t.normalizeHeight()})}adjustTableSize(){let t=this.element.clientHeight,e,i=!1;if(this.renderer.verticalFillMode==="fill"){let r=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){e=isNaN(this.table.options.minHeight)?this.table.options.minHeight:this.table.options.minHeight+"px";let s="calc(100% - "+r+"px)";this.element.style.minHeight=e||"calc(100% - "+r+"px)",this.element.style.height=s,this.element.style.maxHeight=s}else this.element.style.height="",this.element.style.height=this.table.element.clientHeight-r+"px",this.element.scrollTop=this.scrollTop;this.renderer.resize(),!this.fixedHeight&&t!=this.element.clientHeight&&(i=!0,this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw()),this.scrollBarCheck()}return this._positionPlaceholder(),i}reinitialize(){this.rows.forEach(function(t){t.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRenderInPosition&&this.reRenderInPosition(),this.redrawBlockRenderInPosition=!1}redraw(t){this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(this.scrollLeft))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}},pp=class extends Un{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.containerElement=this.createContainerElement(),this.external=!1}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}createContainerElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer-contents"),this.element.appendChild(t),t}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":this.table.options.footerElement[0]==="<"?this.containerElement.innerHTML=this.table.options.footerElement:(this.external=!0,this.containerElement=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}}getElement(){return this.element}append(t){this.activate(),this.containerElement.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t){this.activate(),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){(!this.element.firstChild||t)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""))}redraw(){this.dispatch("footer-redraw")}},mp=class extends Un{constructor(t){super(t),this.el=null,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","mouseup","mousedown","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}},this.pseudoTracking=!1}initialize(){this.el=this.table.element,this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach(e=>{t[e]={handler:null,components:[]}}),this.listeners=t}bindPseudoEvents(){Object.keys(this.pseudoTrackers).forEach(t=>{this.pseudoTrackers[t].subscriber=this.pseudoMouseEnter.bind(this,t),this.subscribe(t+"-mouseover",this.pseudoTrackers[t].subscriber)}),this.pseudoTracking=!0}pseudoMouseEnter(t,e,i){this.pseudoTrackers[t].target!==i&&(this.pseudoTrackers[t].target&&this.dispatch(t+"-mouseleave",e,this.pseudoTrackers[t].target),this.pseudoMouseLeave(t,e),this.pseudoTrackers[t].target=i,this.dispatch(t+"-mouseenter",e,i))}pseudoMouseLeave(t,e){var i=Object.keys(this.pseudoTrackers),r={row:["cell"],cell:["row"]};i=i.filter(s=>{var a=r[t];return s!==t&&(!a||a&&!a.includes(s))}),i.forEach(s=>{var a=this.pseudoTrackers[s].target;this.pseudoTrackers[s].target&&(this.dispatch(s+"-mouseleave",e,a),this.pseudoTrackers[s].target=null)})}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),e=Object.values(this.componentMap);for(let i of e)for(let r of t){let s=i+"-"+r;this.subscriptionChange(s,this.subscriptionChanged.bind(this,i,r))}this.subscribe("table-destroy",this.clearWatchers.bind(this))}subscriptionChanged(t,e,i){var r=this.listeners[e].components,s=r.indexOf(t),a=!1;i?s===-1&&(r.push(t),a=!0):this.subscribed(t+"-"+e)||s>-1&&(r.splice(s,1),a=!0),(e==="mouseenter"||e==="mouseleave")&&!this.pseudoTracking&&this.bindPseudoEvents(),a&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let e=this.listeners[t];e.components.length?e.handler||(e.handler=this.track.bind(this,t),this.el.addEventListener(t,e.handler)):e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}track(t,e){var i=e.composedPath&&e.composedPath()||e.path,r=this.findTargets(i);r=this.bindComponents(t,r),this.triggerEvents(t,e,r),this.pseudoTracking&&(t=="mouseover"||t=="mouseleave")&&!Object.keys(r).length&&this.pseudoMouseLeave("none",e)}findTargets(t){var e={};let i=Object.keys(this.componentMap);for(let r of t){let s=r.classList?[...r.classList]:[];if(s.filter(l=>this.abortClasses.includes(l)).length)break;let o=s.filter(l=>i.includes(l));for(let l of o)e[this.componentMap[l]]||(e[this.componentMap[l]]=r)}return e.group&&e.group===e.row&&delete e.row,e}bindComponents(t,e){var i=Object.keys(e).reverse(),r=this.listeners[t],s={},a={};for(let o of i){let l,c=e[o],h=this.previousTargets[o];if(h&&h.target===c)l=h.component;else switch(o){case"row":case"group":(r.components.includes("row")||r.components.includes("cell")||r.components.includes("group"))&&(l=this.table.rowManager.getVisibleRows(!0).find(p=>p.getElement()===c),e.row&&e.row.parentNode&&e.row.parentNode.closest(".tabulator-row")&&(e[o]=!1));break;case"column":r.components.includes("column")&&(l=this.table.columnManager.findColumn(c));break;case"cell":r.components.includes("cell")&&(s.row instanceof ts?l=s.row.findCell(c):e.row&&console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));break}l&&(s[o]=l,a[o]={target:c,component:l})}return this.previousTargets=a,s}triggerEvents(t,e,i){var r=this.listeners[t];for(let s in i)i[s]&&r.components.includes(s)&&this.dispatch(s+"-"+t,e,i[s])}clearWatchers(){for(let t in this.listeners){let e=this.listeners[t];e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}},gp=class{constructor(t){this.table=t,this.bindings={}}bind(t,e,i){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][e]?console.warn("Unable to bind component handler, a matching function name is already bound",t,e,i):this.bindings[t][e]=i}handle(t,e,i){if(this.bindings[t]&&this.bindings[t][i]&&typeof this.bindings[t][i].bind=="function")return this.bindings[t][i].bind(null,e);i!=="then"&&typeof i=="string"&&!i.startsWith("_")&&this.table.options.debugInvalidComponentFuncs&&console.error("The "+t+" component does not have a "+i+" function, have you checked that you have the correct Tabulator module installed?")}},yp=class extends Un{constructor(t){super(t),this.requestOrder=0,this.loading=!1}initialize(){}load(t,e,i,r,s,a){var o=++this.requestOrder;if(this.table.destroyed)return Promise.resolve();if(this.dispatchExternal("dataLoading",t),t&&(t.indexOf("{")==0||t.indexOf("[")==0)&&(t=JSON.parse(t)),this.confirm("data-loading",[t,e,i,s])){this.loading=!0,s||this.alertLoader(),e=this.chain("data-params",[t,i,s],e||{},e||{}),e=this.mapParams(e,this.table.options.dataSendParams);var l=this.chain("data-load",[t,e,i,s],!1,Promise.resolve([]));return l.then(c=>{if(this.table.destroyed)console.warn("Data Load Response Blocked - Table has been destroyed");else{!Array.isArray(c)&&typeof c=="object"&&(c=this.mapParams(c,this.objectInvert(this.table.options.dataReceiveParams)));var h=this.chain("data-loaded",[c],null,c);o==this.requestOrder?(this.clearAlert(),h!==!1&&(this.dispatchExternal("dataLoaded",h),this.table.rowManager.setData(h,r,typeof a>"u"?!r:a))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}}).catch(c=>{console.error("Data Load Error: ",c),this.dispatchExternal("dataLoadError",c),s||this.alertError(),setTimeout(()=>{this.clearAlert()},this.table.options.dataLoaderErrorTimeout)}).finally(()=>{this.loading=!1})}else return this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,r,typeof a>"u"?!r:a),Promise.resolve()}mapParams(t,e){var i={};for(let r in t)i[e.hasOwnProperty(r)?e[r]:r]=t[r];return i}objectInvert(t){var e={};for(let i in t)e[t[i]]=i;return e}blockActiveLoad(){this.requestOrder++}alertLoader(){var t=typeof this.table.options.dataLoader=="function"?this.table.options.dataLoader():this.table.options.dataLoader;t&&this.table.alertManager.alert(this.table.options.dataLoaderLoading||this.langText("data|loading"))}alertError(){this.table.alertManager.alert(this.table.options.dataLoaderError||this.langText("data|error"),"error")}clearAlert(){this.table.alertManager.clear()}},vp=class{constructor(t,e,i){this.table=t,this.events={},this.optionsList=e||{},this.subscriptionNotifiers={},this.dispatch=i?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=i}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifySubscriptionChange(t,!0)}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e),this._notifySubscriptionChange(t,!0)}unsubscribe(t,e){var i;if(this.events[t])if(e)if(i=this.events[t].findIndex(r=>r===e),i>-1)this.events[t].splice(i,1);else{console.warn("Cannot remove event, no matching event found:",t,e);return}else delete this.events[t];else{console.warn("Cannot remove event, no events set on:",t);return}this._notifySubscriptionChange(t,!1)}subscribed(t){return this.events[t]&&this.events[t].length}_notifySubscriptionChange(t,e){var i=this.subscriptionNotifiers[t];i&&i.forEach(r=>{r(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift(),i;return this.events[e]&&this.events[e].forEach((r,s)=>{let a=r.apply(this.table,t);s||(i=a)}),i}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="ExternalEvent:"+t[0],(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}},bp=class{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifySubscriptionChange(t,!0)}subscribe(t,e,i=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,priority:i}),this.events[t].sort((r,s)=>r.priority-s.priority),this._notifySubscriptionChange(t,!0)}unsubscribe(t,e){var i;if(this.events[t]){if(e)if(i=this.events[t].findIndex(r=>r.callback===e),i>-1)this.events[t].splice(i,1);else{console.warn("Cannot remove event, no matching event found:",t,e);return}}else{console.warn("Cannot remove event, no events set on:",t);return}this._notifySubscriptionChange(t,!1)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,e,i,r){var s=i;return Array.isArray(e)||(e=[e]),this.subscribed(t)?(this.events[t].forEach((a,o)=>{s=a.callback.apply(this,e.concat([s]))}),s):typeof r=="function"?r():r}_confirm(t,e){var i=!1;return Array.isArray(e)||(e=[e]),this.subscribed(t)&&this.events[t].forEach((r,s)=>{r.callback.apply(this,e)&&(i=!0)}),i}_notifySubscriptionChange(t,e){var i=this.subscriptionNotifiers[t];i&&i.forEach(r=>{r(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift();this.events[e]&&this.events[e].forEach(i=>{i.callback.apply(this,t)})}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._confirm(...arguments)}},_p=class extends Un{constructor(t){super(t)}_warnUser(){this.options("debugDeprecation")&&console.warn(...arguments)}check(t,e,i){var r="";return typeof this.options(t)<"u"?(r="Deprecated Setup Option - Use of the %c"+t+"%c option is now deprecated",e?(r=r+", Please use the %c"+e+"%c option instead",this._warnUser(r,"font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;"),i&&(this.table.options[e]=this.table.options[t])):this._warnUser(r,"font-weight: bold;","font-weight: normal;"),!1):!0}checkMsg(t,e){return typeof this.options(t)<"u"?(this._warnUser("%cDeprecated Setup Option - Use of the %c"+t+" %c option is now deprecated, "+e,"font-weight: normal;","font-weight: bold;","font-weight: normal;"),!1):!0}msg(t){this._warnUser(t)}};function IC(n,t){t&&this.table.columnManager.renderer.reinitializeColumnWidths(n),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function Ev(n,t){n.forEach(function(e){e.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function AC(n,t){var e=0,i=this.table.rowManager.element.clientWidth,r=0,s=!1;n.forEach((a,o)=>{a.widthFixed||a.reinitializeWidth(),(this.table.options.responsiveLayout?a.modules.responsive.visible:a.visible)&&(s=a),a.visible&&(e+=a.getWidth())}),s?(r=i-e+s.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(s.setWidth(0),this.table.modules.responsiveLayout.update()),r>0?s.setWidth(r):s.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function NC(n,t){var e=this.table.rowManager.element.getBoundingClientRect().width,i=0,r=0,s=0,a=0,o=[],l=[],c=0,h=0,d=0;function p(m){var _;return typeof m=="string"?m.indexOf("%")>-1?_=e/100*parseInt(m):_=parseInt(m):_=m,_}function g(m,_,v,x){var S=[],O=0,D=0,U=0,z=s,V=0,G=0,tt=[];function K(N){return v*(N.column.definition.widthGrow||1)}function B(N){return p(N.width)-v*(N.column.definition.widthShrink||0)}return m.forEach(function(N,Z){var w=x?B(N):K(N);N.column.minWidth>=w?S.push(N):N.column.maxWidth&&N.column.maxWidth<w?(N.width=N.column.maxWidth,_-=N.column.maxWidth,z-=x?N.column.definition.widthShrink||1:N.column.definition.widthGrow||1,z&&(v=Math.floor(_/z))):(tt.push(N),G+=x?N.column.definition.widthShrink||1:N.column.definition.widthGrow||1)}),S.length?(S.forEach(function(N){O+=x?N.width-N.column.minWidth:N.column.minWidth,N.width=N.column.minWidth}),D=_-O,U=G?Math.floor(D/G):D,V=g(tt,D,U,x)):(V=G?_-Math.floor(_/G)*G:_,tt.forEach(function(N){N.width=x?B(N):K(N)})),V}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),n.forEach(function(m){var _,v,x;m.visible&&(_=m.definition.width,v=parseInt(m.minWidth),_?(x=p(_),i+=x>v?x:v,m.definition.widthShrink&&(l.push({column:m,width:x>v?x:v}),c+=m.definition.widthShrink)):(o.push({column:m,width:0}),s+=m.definition.widthGrow||1))}),r=e-i,a=Math.floor(r/s),d=g(o,r,a,!1),o.length&&d>0&&(o[o.length-1].width+=d),o.forEach(function(m){r-=m.width}),h=Math.abs(d)+r,h>0&&c&&(d=g(l,h,Math.floor(h/c),!0)),d&&l.length&&(l[l.length-1].width-=d),o.forEach(function(m){m.column.setWidth(m.width)}),l.forEach(function(m){m.column.setWidth(m.width)})}var DC={fitData:IC,fitDataFill:Ev,fitDataTable:Ev,fitDataStretch:AC,fitColumns:NC},wp=class n extends xi{static moduleName="layout";static modes=DC;constructor(t){super(t,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var t=this.table.options.layout;n.modes[t]?this.mode=t:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+t),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode),this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(t){t.definition.widthGrow&&(t.definition.widthGrow=Number(t.definition.widthGrow)),t.definition.widthShrink&&(t.definition.widthShrink=Number(t.definition.widthShrink))}getMode(){return this.mode}layout(t){this.dispatch("layout-refreshing"),n.modes[this.mode].call(this,this.table.columnManager.columnsByIndex,t),this.dispatch("layout-refreshed")}},BC={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All",counter:{showing:"Showing",of:"of",rows:"rows",pages:"pages"}},headerFilters:{default:"filter column...",columns:{}}}},xp=class n extends xi{static moduleName="localize";static langs=BC;constructor(t){super(t),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Ir.deepClone(n.langs),this.table.options.columnDefaults.headerFilterPlaceholder!==!1&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let t in this.table.options.langs)this.installLang(t,this.table.options.langs[t]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(t){this.langList.default.headerFilters.default=t}installLang(t,e){this.langList[t]?this._setLangProp(this.langList[t],e):this.langList[t]=e}_setLangProp(t,e){for(let i in e)t[i]&&typeof t[i]=="object"?this._setLangProp(t[i],e[i]):t[i]=e[i]}setLocale(t){t=t||"default";function e(i,r){for(var s in i)typeof i[s]=="object"?(r[s]||(r[s]={}),e(i[s],r[s])):r[s]=i[s]}if(t===!0&&navigator.language&&(t=navigator.language.toLowerCase()),t&&!this.langList[t]){let i=t.split("-")[0];this.langList[i]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,i),t=i):(console.warn("Localization Error - Matching locale not found, using default: ",t),t="default")}this.locale=t,this.lang=Ir.deepClone(this.langList.default||{}),t!="default"&&e(this.langList[t],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(t){return this.locale}getLang(t){return t?this.langList[t]:this.lang}getText(t,e){var i=e?t+"|"+e:t,r=i.split("|"),s=this._getLangElement(r,this.locale);return s||""}_getLangElement(t,e){var i=this.lang;return t.forEach(function(r){var s;i&&(s=i[r],typeof s<"u"?i=s:i=!1)}),i}bind(t,e){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(e),e(this.getText(t),this.lang)}_executeBindings(){for(let t in this.bindings)this.bindings[t].forEach(e=>{e(this.getText(t),this.lang)})}},Ep=class extends xi{static moduleName="comms";constructor(t){super(t)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(t){var e=[],i;return i=this.table.constructor.registry.lookupTable(t),i.forEach(r=>{this.table!==r&&e.push(r)}),e}send(t,e,i,r){var s=this.getConnections(t);s.forEach(a=>{a.tableComms(this.table.element,e,i,r)}),!s.length&&t&&console.warn("Table Connection Error - No tables matching selector found",t)}receive(t,e,i,r){if(this.table.modExists(e))return this.table.modules[e].commsReceived(t,i,r);console.warn("Inter-table Comms Error - no such module:",e)}},FC=Object.freeze({__proto__:null,CommsModule:Ep,LayoutModule:wp,LocalizeModule:xp}),Cp=class n{static registry={tables:[],register(t){n.registry.tables.push(t)},deregister(t){var e=n.registry.tables.indexOf(t);e>-1&&n.registry.tables.splice(e,1)},lookupTable(t,e){var i=[],r,s;if(typeof t=="string"){if(r=document.querySelectorAll(t),r.length)for(var a=0;a<r.length;a++)s=n.registry.matchElement(r[a]),s&&i.push(s)}else typeof HTMLElement<"u"&&t instanceof HTMLElement||t instanceof n?(s=n.registry.matchElement(t),s&&i.push(s)):Array.isArray(t)?t.forEach(function(o){i=i.concat(n.registry.lookupTable(o))}):e||console.warn("Table Connection Error - Invalid Selector",t);return i},matchElement(t){return n.registry.tables.find(function(e){return t instanceof n?e===t:e.element===t})}};static findTable(t){var e=n.registry.lookupTable(t,!0);return Array.isArray(e)&&!e.length?!1:e}},Mp=class n extends Cp{static moduleBindings={};static moduleExtensions={};static modulesRegistered=!1;static defaultModules=!1;constructor(){super()}static initializeModuleBinder(t){n.modulesRegistered||(n.modulesRegistered=!0,n._registerModules(FC,!0),t&&n._registerModules(t))}static _extendModule(t,e,i){if(n.moduleBindings[t]){var r=n.moduleBindings[t][e];if(r)if(typeof i=="object")for(let s in i)r[s]=i[s];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",e)}else console.warn("Module Error - module does not exist:",t)}static _registerModules(t,e){var i=Object.values(t);e&&i.forEach(r=>{r.prototype.moduleCore=!0}),n._registerModule(i)}static _registerModule(t){Array.isArray(t)||(t=[t]),t.forEach(e=>{n._registerModuleBinding(e),n._registerModuleExtensions(e)})}static _registerModuleBinding(t){t.moduleName?n.moduleBindings[t.moduleName]=t:console.error("Unable to bind module, no moduleName defined",t.moduleName)}static _registerModuleExtensions(t){var e=t.moduleExtensions;if(t.moduleExtensions)for(let i in e){let r=e[i];if(n.moduleBindings[i])for(let s in r)n._extendModule(i,s,r[s]);else{n.moduleExtensions[i]||(n.moduleExtensions[i]={});for(let s in r)n.moduleExtensions[i][s]||(n.moduleExtensions[i][s]={}),Object.assign(n.moduleExtensions[i][s],r[s])}}n._extendModuleFromQueue(t)}static _extendModuleFromQueue(t){var e=n.moduleExtensions[t.moduleName];if(e)for(let i in e)n._extendModule(t.moduleName,i,e[i])}_bindModules(){var t=[],e=[],i=[];this.modules={};for(var r in n.moduleBindings){let s=n.moduleBindings[r],a=new s(this);this.modules[r]=a,s.prototype.moduleCore?this.modulesCore.push(a):s.moduleInitOrder?s.moduleInitOrder<0?t.push(a):e.push(a):i.push(a)}t.sort((s,a)=>s.moduleInitOrder>a.moduleInitOrder?1:-1),e.sort((s,a)=>s.moduleInitOrder>a.moduleInitOrder?1:-1),this.modulesRegular=t.concat(i.concat(e))}},Sp=class extends Un{constructor(t){super(t),this.element=this._createAlertElement(),this.msgElement=this._createMsgElement(),this.type=null,this.element.appendChild(this.msgElement)}_createAlertElement(){var t=document.createElement("div");return t.classList.add("tabulator-alert"),t}_createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-alert-msg"),t.setAttribute("role","alert"),t}_typeClass(){return"tabulator-alert-state-"+this.type}alert(t,e="msg"){if(t){for(this.clear(),this.dispatch("alert-show",e),this.type=e;this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.add(this._typeClass()),typeof t=="function"&&(t=t()),t instanceof HTMLElement?this.msgElement.appendChild(t):this.msgElement.innerHTML=t,this.table.element.appendChild(this.element)}}clear(){this.dispatch("alert-hide",this.type),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.msgElement.classList.remove(this._typeClass())}},kp=class n extends Mp{static defaultOptions=OC;static extendModule(){n.initializeModuleBinder(),n._extendModule(...arguments)}static registerModule(){n.initializeModuleBinder(),n._registerModule(...arguments)}constructor(t,e,i){super(),n.initializeModuleBinder(i),this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.alertManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new gp(this),this.dataLoader=!1,this.modules={},this.modulesCore=[],this.modulesRegular=[],this.deprecationAdvisor=new _p(this),this.optionsList=new jh(this,"table constructor"),this.initialized=!1,this.destroyed=!1,this.initializeElement(t)&&(this.initializeCoreSystems(e),setTimeout(()=>{this._create()})),this.constructor.registry.register(this)}initializeElement(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement?(this.element=t,!0):typeof t=="string"?(this.element=document.querySelector(t),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",t),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",t),!1)}initializeCoreSystems(t){this.columnManager=new hp(this),this.rowManager=new dp(this),this.footerManager=new pp(this),this.dataLoader=new yp(this),this.alertManager=new Sp(this),this._bindModules(),this.options=this.optionsList.generate(n.defaultOptions,t),this._clearObjectPointers(),this._mapDeprecatedFunctionality(),this.externalEvents=new vp(this,this.options,this.options.debugEventsExternal),this.eventBus=new bp(this.options.debugEventsInternal),this.interactionMonitor=new mp(this),this.dataLoader.initialize(),this.footerManager.initialize()}_mapDeprecatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this.initialized=!0,this._loadInitialData().finally(()=>{this.eventBus.dispatch("table-initialized"),this.externalEvents.dispatch("tableBuilt")})}_rtlCheck(){var t=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(t.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),Array.isArray(this.options.data)&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var t=this.element,e=this.options,i;if(t.tagName==="TABLE"){this.originalElement=this.element,i=document.createElement("div");var r=t.attributes;for(var s in r)typeof r[s]=="object"&&i.setAttribute(r[s].name,r[s].value);t.parentNode.replaceChild(i,t),this.element=t=i}for(t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);e.height&&(e.height=isNaN(e.height)?e.height:e.height+"px",t.style.height=e.height),e.minHeight!==!1&&(e.minHeight=isNaN(e.minHeight)?e.minHeight:e.minHeight+"px",t.style.minHeight=e.minHeight),e.maxHeight!==!1&&(e.maxHeight=isNaN(e.maxHeight)?e.maxHeight:e.maxHeight+"px",t.style.maxHeight=e.maxHeight)}_initializeTable(){var t=this.element,e=this.options;this.interactionMonitor.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modulesCore.forEach(i=>{i.initialize()}),t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),e.footerElement&&this.footerManager.activate(),e.autoColumns&&e.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modulesRegular.forEach(i=>{i.initialize()}),this.columnManager.setColumns(e.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){return this.dataLoader.load(this.options.data).finally(()=>{this.columnManager.verticalAlignHeaders()})}destroy(){var t=this.element;for(this.destroyed=!0,this.constructor.registry.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.destroy();t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("tabulator"),this.externalEvents.dispatch("tableDestroyed")}_detectBrowser(){var t=navigator.userAgent||navigator.vendor||window.opera;t.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):t.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):t.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):t.indexOf("Mac OS")>-1?(this.browser="safari",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.slice(0,4))}initGuard(t,e){var i,r;return this.options.debugInitialization&&!this.initialized&&(t||(i=new Error().stack.split(`
`),r=i[0]=="Error"?i[2]:i[1],r[0]==" "?t=r.trim().split(" ")[1].split(".")[1]:t=r.trim().split("@")[0]),console.warn("Table Not Initialized - Calling the "+t+" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function."+(e?" "+e:""))),this.initialized}blockRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-blocking"),this.rowManager.blockRedraw(),this.columnManager.blockRedraw(),this.eventBus.dispatch("redraw-blocked")}restoreRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-restoring"),this.rowManager.restoreRedraw(),this.columnManager.restoreRedraw(),this.eventBus.dispatch("redraw-restored")}setData(t,e,i){return this.initGuard(!1,"To set initial data please use the 'data' property in the table constructor."),this.dataLoader.load(t,e,i,!1)}clearData(){this.initGuard(),this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(t){return this.rowManager.getData(t)}getDataCount(t){return this.rowManager.getDataCount(t)}replaceData(t,e,i){return this.initGuard(),this.dataLoader.load(t,e,i,!0,!0)}updateData(t){var e=0;return this.initGuard(),new Promise((i,r)=>{this.dataLoader.blockActiveLoad(),typeof t=="string"&&(t=JSON.parse(t)),t&&t.length>0?t.forEach(s=>{var a=this.rowManager.findRow(s[this.options.index]);a?(e++,a.updateData(s).then(()=>{e--,e||i()}).catch(o=>{r("Update Error - Unable to update row",s,o)})):r("Update Error - Unable to find row",s)}):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))})}addData(t,e,i){return this.initGuard(),new Promise((r,s)=>{this.dataLoader.blockActiveLoad(),typeof t=="string"&&(t=JSON.parse(t)),t?this.rowManager.addRows(t,e,i).then(a=>{var o=[];a.forEach(function(l){o.push(l.getComponent())}),r(o)}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})}updateOrAddData(t){var e=[],i=0;return this.initGuard(),new Promise((r,s)=>{this.dataLoader.blockActiveLoad(),typeof t=="string"&&(t=JSON.parse(t)),t&&t.length>0?t.forEach(a=>{var o=this.rowManager.findRow(a[this.options.index]);i++,o?o.updateData(a).then(()=>{i--,e.push(o.getComponent()),i||r(e)}):this.rowManager.addRows(a).then(l=>{i--,e.push(l[0].getComponent()),i||r(e)})}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})}getRow(t){var e=this.rowManager.findRow(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)}getRowFromPosition(t){var e=this.rowManager.getRowFromPosition(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)}deleteRow(t){var e=[];this.initGuard(),Array.isArray(t)||(t=[t]);for(let i of t){let r=this.rowManager.findRow(i,!0);if(r)e.push(r);else return console.error("Delete Error - No matching row found:",i),Promise.reject("Delete Error - No matching row found")}return e.sort((i,r)=>this.rowManager.rows.indexOf(i)>this.rowManager.rows.indexOf(r)?1:-1),e.forEach(i=>{i.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(t,e,i){return this.initGuard(),typeof t=="string"&&(t=JSON.parse(t)),this.rowManager.addRows(t,e,i,!0).then(r=>r[0].getComponent())}updateOrAddRow(t,e){var i=this.rowManager.findRow(t);return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),i?i.updateData(e).then(()=>i.getComponent()):this.rowManager.addRows(e).then(r=>r[0].getComponent())}updateRow(t,e){var i=this.rowManager.findRow(t);return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),i?i.updateData(e).then(()=>Promise.resolve(i.getComponent())):(console.warn("Update Error - No matching row found:",t),Promise.reject("Update Error - No matching row found"))}scrollToRow(t,e,i){var r=this.rowManager.findRow(t);return r?this.rowManager.scrollToRow(r,e,i):(console.warn("Scroll Error - No matching row found:",t),Promise.reject("Scroll Error - No matching row found"))}moveRow(t,e,i){var r=this.rowManager.findRow(t);this.initGuard(),r?r.moveToRow(e,i):console.warn("Move Error - No matching row found:",t)}getRows(t){return this.rowManager.getComponents(t)}getRowPosition(t){var e=this.rowManager.findRow(t);return e?e.getPosition():(console.warn("Position Error - No matching row found:",t),!1)}setColumns(t){this.initGuard(!1,"To set initial columns please use the 'columns' property in the table constructor"),this.columnManager.setColumns(t)}getColumns(t){return this.columnManager.getComponents(t)}getColumn(t){var e=this.columnManager.findColumn(t);return e?e.getComponent():(console.warn("Find Error - No matching column found:",t),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(t){var e=this.columnManager.findColumn(t);if(this.initGuard(),e)e.show();else return console.warn("Column Show Error - No matching column found:",t),!1}hideColumn(t){var e=this.columnManager.findColumn(t);if(this.initGuard(),e)e.hide();else return console.warn("Column Hide Error - No matching column found:",t),!1}toggleColumn(t){var e=this.columnManager.findColumn(t);if(this.initGuard(),e)e.visible?e.hide():e.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",t),!1}addColumn(t,e,i){var r=this.columnManager.findColumn(i);return this.initGuard(),this.columnManager.addColumn(t,e,r).then(s=>s.getComponent())}deleteColumn(t){var e=this.columnManager.findColumn(t);return this.initGuard(),e?e.delete():(console.warn("Column Delete Error - No matching column found:",t),Promise.reject())}updateColumnDefinition(t,e){var i=this.columnManager.findColumn(t);return this.initGuard(),i?i.updateDefinition(e):(console.warn("Column Update Error - No matching column found:",t),Promise.reject())}moveColumn(t,e,i){var r=this.columnManager.findColumn(t),s=this.columnManager.findColumn(e);this.initGuard(),r?s?this.columnManager.moveColumn(r,s,i):console.warn("Move Error - No matching column found:",s):console.warn("Move Error - No matching column found:",t)}scrollToColumn(t,e,i){return new Promise((r,s)=>{var a=this.columnManager.findColumn(t);return a?this.columnManager.scrollToColumn(a,e,i):(console.warn("Scroll Error - No matching column found:",t),Promise.reject("Scroll Error - No matching column found"))})}redraw(t){this.initGuard(),this.columnManager.redraw(t),this.rowManager.redraw(t)}setHeight(t){this.options.height=isNaN(t)?t:t+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw(!0)}on(t,e){this.externalEvents.subscribe(t,e)}off(t,e){this.externalEvents.unsubscribe(t,e)}dispatchEvent(){var t=Array.from(arguments);t.shift(),this.externalEvents.dispatch(...arguments)}alert(t,e){this.initGuard(),this.alertManager.alert(t,e)}clearAlert(){this.initGuard(),this.alertManager.clear()}modExists(t,e){return this.modules[t]?!0:(e&&console.error("Tabulator Module Not Installed: "+t),!1)}module(t){var e=this.modules[t];return e||console.error("Tabulator module not installed: "+t),e}},tu=kp,Lp=class extends tu{static extendModule(){tu.initializeModuleBinder(yd),tu._extendModule(...arguments)}static registerModule(){tu.initializeModuleBinder(yd),tu._registerModule(...arguments)}constructor(t,e,i){super(t,e,yd)}},kv=Lp;var Pv=Mi(Tv());var zC=Mh+"/api/v1/mapentities",jC=4114,iu=new URLSearchParams(window.location.search).get("id"),ya=[{title:"Location",field:"id",formatter:"link",formatterParams:{labelField:"id",urlPrefix:"/index.html?id=",target:"_blank"}},{title:"Name",field:"name"},{title:"Contact Info",field:"contactInfo"},{title:"Nr of People",field:"nrOfPeople"},{title:"Nr of Vechiles",field:"nrOfVechiles"},{title:"Color",field:"color",formatter:"color"},{title:"Additional Square meters (m2)",field:"additionalSqm"},{title:"Amplified Sound (watts)",field:"amplifiedSound"},{title:"Power need (watts)",field:"powerNeed"},{title:"Description",field:"description",formatter:"textarea",resizable:!0,width:600,variableHeight:!0}],HC=n=>{let t={};for(let{field:e}of ya)t[e]=n[e];return t},Rv=async()=>{iu&&(ya.push({title:"Revision",field:"revision"}),ya.push({title:"Timestamp",field:"timeStamp"}),ya.push({title:"Deleted",formatter:"tickCross",field:"isDeleted"}),ya.push({title:"Deleted because",field:"deleteReason"}));let t=await(await fetch(zC+(iu?"/"+iu:""))).json(),e=[],i={nrOfMembershipsSold:{value:jC,title:"total nr. of memberships",unit:"memberships"},totalNrOfPeople:{value:0,title:"total nr. of campers",unit:"persons"},totalNrOfVechiles:{value:0,title:"total nr. of vechiles",unit:"automobiles"},totalPowerNeed:{value:0,title:"total power need of all camps",unit:"watts"},totalNrOfEntries:{value:t.length,title:"total nr. of shapes on the map",unit:"shapes"}};for(let p of t){let{properties:g}=JSON.parse(p.geoJson),m={id:Number(p.id),name:String(g.name),timeStamp:new Date(p.timeStamp),isDeleted:!!p.isDeleted,deleteReason:String(p.deleteReason),additionalSqm:Number(g.additionalSqm),amplifiedSound:Number(g.amplifiedSound),color:String(g.color),contactInfo:String(g.contactInfo),description:String(g.description),nrOfPeople:Number(g.nrOfPeople),nrOfVechiles:Number(g.nrOfVechiles),powerNeed:Number(g.powerNeed),revision:Number(p.revision),supressWarnings:Number(g.supressWarnings)};i.totalNrOfPeople.value+=+m.nrOfPeople,i.totalNrOfVechiles.value+=m.nrOfVechiles,i.totalPowerNeed.value+=m.powerNeed,e.push(m)}new kv("#stats",{data:e,columns:ya});let r=new Pv.default.Workbook;r.creator="Borderland Community Cocreators";let s=r.addWorksheet("Camps");s.columns=ya.map(p=>({header:p.title,key:p.field})),e.forEach(p=>s.addRow(HC(p)));let a=document.createElement("h1");a.innerHTML=iu?"History for shape with id "+iu:"All camps and statistics",document.querySelector("#header").appendChild(a);let o=document.createElement("ul");for(let{value:p,title:g,unit:m}of Object.values(i)){let _=document.createElement("li");_.innerHTML=`${g}: ${p} ${m}`,o.appendChild(_)}document.querySelector("#header").appendChild(o);let l=await r.xlsx.writeBuffer(),c=URL.createObjectURL(new Blob([l],{type:"application/xlsx"})),h=document.createElement("a");h.href=c,h.download="camps.xlsx";let d=document.createElement("sl-button");d.innerHTML="Download XLSX File",d.setAttribute("variant","primary"),h.appendChild(d),document.querySelector("#header").appendChild(h)};async function GC(){try{await xv()}catch(n){console.error(n)}localStorage.getItem("hasSeenPlacementWelcome")||Vs({file:"welcome",position:"bottom",onClose:()=>{localStorage.setItem("hasSeenPlacementWelcome","true")}})}window.indexMain=GC;async function UC(){await Rv()}window.statsMain=UC;})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

leaflet.locatecontrol/src/L.Control.Locate.js:
  (*!
  Copyright (c) 2016 Dominik Moritz
  
  This file is part of the leaflet locate control. It is licensed under the MIT license.
  You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
  *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

polygon-clipping/dist/polygon-clipping.umd.js:
  (**
   * splaytree v3.1.0
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   *)

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.0.2 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.2/LICENSE *)

exceljs/dist/exceljs.min.js:
  (*! ExcelJS 19-10-2023 *)
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (**
   * Character classes and associated utilities for the 5th edition of XML 1.0.
   *
   * @author Louis-Dominique Dubeau
   * @license MIT
   * @copyright Louis-Dominique Dubeau
   *)
  (**
   * Character classes and associated utilities for the 2nd edition of XML 1.1.
   *
   * @author Louis-Dominique Dubeau
   * @license MIT
   * @copyright Louis-Dominique Dubeau
   *)
  (**
   * Character class utilities for XML NS 1.0 edition 3.
   *
   * @author Louis-Dominique Dubeau
   * @license MIT
   * @copyright Louis-Dominique Dubeau
   *)

@turf/isolines/dist/es/index.js:
  (**
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)

@turf/isobands/dist/es/index.js:
  (*!
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)
*/
