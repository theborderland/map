(()=>{var wc=Object.create;var ol=Object.defineProperty;var Lc=Object.getOwnPropertyDescriptor;var kc=Object.getOwnPropertyNames;var xc=Object.getPrototypeOf,bc=Object.prototype.hasOwnProperty;var sl=(d,m)=>()=>(m||d((m={exports:{}}).exports,m),m.exports);var Cc=(d,m,p,x)=>{if(m&&typeof m=="object"||typeof m=="function")for(let T of kc(m))!bc.call(d,T)&&T!==p&&ol(d,T,{get:()=>m[T],enumerable:!(x=Lc(m,T))||x.enumerable});return d};var al=(d,m,p)=>(p=d!=null?wc(xc(d)):{},Cc(m||!d||!d.__esModule?ol(p,"default",{value:d,enumerable:!0}):p,d));var Pl=sl((lu,hu)=>{(function(d,m){typeof lu=="object"&&typeof hu<"u"?hu.exports=m():typeof define=="function"&&define.amd?define(m):(d=typeof globalThis<"u"?globalThis:d||self).jsts=m()})(lu,function(){"use strict";function d(o,t){(t==null||t>o.length)&&(t=o.length);for(var e=0,r=Array(t);e<t;e++)r[e]=o[e];return r}function m(o,t,e){return t=nt(t),function(r,l){if(l&&(typeof l=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(r)}(o,U()?Reflect.construct(t,e||[],nt(o).constructor):t.apply(o,e))}function p(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function x(o,t,e){if(U())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var l=new(o.bind.apply(o,r));return e&&Z(l,e.prototype),l}function T(o,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,ct(r.key),r)}}function C(o,t,e){return t&&T(o.prototype,t),e&&T(o,e),Object.defineProperty(o,"prototype",{writable:!1}),o}function S(o,t){var e=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(!e){if(Array.isArray(o)||(e=bt(o))||t){e&&(o=e);var r=0,l=function(){};return{s:l,n:function(){return r>=o.length?{done:!0}:{done:!1,value:o[r++]}},e:function(R){throw R},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g,v=!0,b=!1;return{s:function(){e=e.call(o)},n:function(){var R=e.next();return v=R.done,R},e:function(R){b=!0,g=R},f:function(){try{v||e.return==null||e.return()}finally{if(b)throw g}}}}function W(){return W=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(o,t,e){var r=function(g,v){for(;!{}.hasOwnProperty.call(g,v)&&(g=nt(g))!==null;);return g}(o,t);if(r){var l=Object.getOwnPropertyDescriptor(r,t);return l.get?l.get.call(arguments.length<3?o:e):l.value}},W.apply(null,arguments)}function nt(o){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nt(o)}function G(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&Z(o,t)}function U(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U=function(){return!!o})()}function Z(o,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Z(o,t)}function V(o,t,e,r){var l=W(nt(1&r?o.prototype:o),t,e);return 2&r&&typeof l=="function"?function(g){return l.apply(e,g)}:l}function tt(o){return function(t){if(Array.isArray(t))return d(t)}(o)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(o)||bt(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ct(o){var t=function(e,r){if(typeof e!="object"||!e)return e;var l=e[Symbol.toPrimitive];if(l!==void 0){var g=l.call(e,r);if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o,"string");return typeof t=="symbol"?t:t+""}function bt(o,t){if(o){if(typeof o=="string")return d(o,t);var e={}.toString.call(o).slice(8,-1);return e==="Object"&&o.constructor&&(e=o.constructor.name),e==="Map"||e==="Set"?Array.from(o):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(o,t):void 0}}function Lt(o){var t=typeof Map=="function"?new Map:void 0;return Lt=function(e){if(e===null||!function(l){try{return Function.toString.call(l).indexOf("[native code]")!==-1}catch{return typeof l=="function"}}(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return x(e,arguments,nt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Z(r,e)},Lt(o)}var _t=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=o.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=o.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==o.JOIN_ROUND&&(this._quadrantSegments=o.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=o.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=o.CAP_ROUND,this._joinStyle=o.JOIN_ROUND,this._mitreLimit=o.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=o.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(r)}else if(arguments.length===4){var l=arguments[0],g=arguments[1],v=arguments[2],b=arguments[3];this.setQuadrantSegments(l),this.setEndCapStyle(g),this.setJoinStyle(v),this.setMitreLimit(b)}}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}])}();_t.CAP_ROUND=1,_t.CAP_FLAT=2,_t.CAP_SQUARE=3,_t.JOIN_ROUND=1,_t.JOIN_MITRE=2,_t.JOIN_BEVEL=3,_t.DEFAULT_QUADRANT_SEGMENTS=8,_t.DEFAULT_MITRE_LIMIT=5,_t.DEFAULT_SIMPLIFY_FACTOR=.01;var wt=function(o){function t(e){var r;return p(this,t),(r=m(this,t,[e])).name=Object.keys({Exception:t})[0],r}return G(t,o),C(t,[{key:"toString",value:function(){return this.message}}])}(Lt(Error)),yt=function(o){function t(e){var r;return p(this,t),(r=m(this,t,[e])).name=Object.keys({IllegalArgumentException:t})[0],r}return G(t,o),C(t)}(wt),Ct=function(){return C(function o(){p(this,o)},[{key:"filter",value:function(o){}}])}();function It(){}function Nt(){}function Dt(){}var Zt,Ft,jt,Vt,oe,Pe,Tt,se,zt=function(){return C(function o(){p(this,o)},null,[{key:"equalsWithTolerance",value:function(o,t,e){return Math.abs(o-t)<=e}}])}(),Oe=function(){return C(function o(t,e){p(this,o),this.low=e||0,this.high=t||0},null,[{key:"toBinaryString",value:function(o){var t,e="";for(t=2147483648;t>0;t>>>=1)e+=(o.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)e+=(o.low&t)===t?"1":"0";return e}}])}();function vt(){}function fe(){}vt.NaN=NaN,vt.isNaN=function(o){return Number.isNaN(o)},vt.isInfinite=function(o){return!Number.isFinite(o)},vt.MAX_VALUE=Number.MAX_VALUE,vt.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,vt.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(Pe=2146435072,Tt=new Float64Array(1),se=new Int32Array(Tt.buffer),vt.doubleToLongBits=function(o){Tt[0]=o;var t=0|se[0],e=0|se[1];return(e&Pe)===Pe&&1048575&e&&t!==0&&(t=0,e=2146959360),new Oe(e,t)},vt.longBitsToDouble=function(o){return se[0]=o.low,se[1]=o.high,Tt[0]}):(Zt=1023,Ft=Math.log2,jt=Math.floor,Vt=Math.pow,oe=function(){for(var o=53;o>0;o--){var t=Vt(2,o)-1;if(jt(Ft(t))+1===o)return t}return 0}(),vt.doubleToLongBits=function(o){var t,e,r,l,g,v,b,R,z;if(o<0||1/o===Number.NEGATIVE_INFINITY?(v=1<<31,o=-o):v=0,o===0)return new Oe(R=v,z=0);if(o===1/0)return new Oe(R=2146435072|v,z=0);if(o!=o)return new Oe(R=2146959360,z=0);if(l=0,z=0,(t=jt(o))>1)if(t<=oe)(l=jt(Ft(t)))<=20?(z=0,R=t<<20-l&1048575):(z=t%(e=Vt(2,r=l-20))<<32-r,R=t/e&1048575);else for(r=t,z=0;(r=jt(e=r/2))!==0;)l++,z>>>=1,z|=(1&R)<<31,R>>>=1,e!==r&&(R|=524288);if(b=l+Zt,g=t===0,t=o-t,l<52&&t!==0)for(r=0;;){if((e=2*t)>=1?(t=e-1,g?(b--,g=!1):(r<<=1,r|=1,l++)):(t=e,g?--b==0&&(l++,g=!1):(r<<=1,l++)),l===20)R|=r,r=0;else if(l===52){z|=r;break}if(e===1){l<20?R|=r<<20-l:l<52&&(z|=r<<52-l);break}}return R|=b<<20,new Oe(R|=v,z)},vt.longBitsToDouble=function(o){var t,e,r,l,g=o.high,v=o.low,b=g&1<<31?-1:1;for(r=((2146435072&g)>>20)-Zt,l=0,e=1<<19,t=1;t<=20;t++)g&e&&(l+=Vt(2,-t)),e>>>=1;for(e=1<<31,t=21;t<=52;t++)v&e&&(l+=Vt(2,-t)),e>>>=1;if(r===-1023){if(l===0)return 0*b;r=-1022}else{if(r===1024)return l===0?b/0:NaN;l+=1}return b*l*Vt(2,r)});var xe=function(o){function t(e){var r;return p(this,t),(r=m(this,t,[e])).name=Object.keys({RuntimeException:t})[0],r}return G(t,o),C(t)}(wt),ue=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,null,[{key:"constructor_",value:function(){if(arguments.length===0)xe.constructor_.call(this);else if(arguments.length===1){var e=arguments[0];xe.constructor_.call(this,e)}}}])}(xe),Ht=function(){function o(){p(this,o)}return C(o,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)o.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new ue("Should never reach here"+(t!==null?": "+t:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var t=arguments[0];o.isTrue(t,null)}else if(arguments.length===2){var e=arguments[1];if(!arguments[0])throw e===null?new ue:new ue(e)}}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];o.equals(t,e,null)}else if(arguments.length===3){var r=arguments[0],l=arguments[1],g=arguments[2];if(!l.equals(r))throw new ue("Expected "+r+" but encountered "+l+(g!==null?": "+g:""))}}}])}(),Qt=new ArrayBuffer(8),pe=new Float64Array(Qt),ve=new Int32Array(Qt),at=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getM",value:function(){return vt.NaN}},{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;case o.Z:this.setZ(e);break;default:throw new yt("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(arguments.length===1){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(arguments.length===2){var e=arguments[0],r=arguments[1];return!!zt.equalsWithTolerance(this.x,e.x,r)&&!!zt.equalsWithTolerance(this.y,e.y,r)}}},{key:"setM",value:function(t){throw new yt("Invalid ordinate index: "+o.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y;case o.Z:return this.getZ()}throw new yt("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||vt.isNaN(this.getZ())&&vt.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof o&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return zt.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return Ht.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,r=this.y-t.y,l=this.getZ()-t.getZ();return Math.sqrt(e*e+r*r+l*l)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*t+o.hashCode(this.x))+o.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[It,Nt,Dt]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)o.constructor_.call(this,0,0);else if(arguments.length===1){var t=arguments[0];o.constructor_.call(this,t.x,t.y,t.getZ())}else if(arguments.length===2){var e=arguments[0],r=arguments[1];o.constructor_.call(this,e,r,o.NULL_ORDINATE)}else if(arguments.length===3){var l=arguments[0],g=arguments[1],v=arguments[2];this.x=l,this.y=g,this.z=v}}},{key:"hashCode",value:function(t){return pe[0]=t,ve[0]^ve[1]}}])}(),Pr=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"compare",value:function(t,e){var r=o.compare(t.x,e.x);if(r!==0)return r;var l=o.compare(t.y,e.y);return l!==0?l:this._dimensionsToTest<=2?0:o.compare(t.getZ(),e.getZ())}},{key:"interfaces_",get:function(){return[fe]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)o.constructor_.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new yt("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:vt.isNaN(t)?vt.isNaN(e)?0:-1:vt.isNaN(e)?1:0}}])}();at.DimensionalComparator=Pr,at.NULL_ORDINATE=vt.NaN,at.X=0,at.Y=1,at.Z=2,at.M=3;var Ne=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof o))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new o;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny;return new o(e,this._maxx<t._maxx?this._maxx:t._maxx,r,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof at){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof o){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(arguments.length===2){var r=arguments[0],l=arguments[1];return!this.isNull()&&r>=this._minx&&r<=this._maxx&&l>=this._miny&&l<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof o){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof at){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){if(arguments[0]instanceof at&&arguments[1]instanceof at){var r=arguments[0],l=arguments[1];return!this.isNull()&&!((r.x<l.x?r.x:l.x)>this._maxx)&&!((r.x>l.x?r.x:l.x)<this._minx)&&!((r.y<l.y?r.y:l.y)>this._maxy)&&!((r.y>l.y?r.y:l.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],v=arguments[1];return!this.isNull()&&!(g>this._maxx||g<this._minx||v>this._maxy||v<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof at){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof o){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(arguments.length===2){var r=arguments[0],l=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=l,this._maxy=l):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),l<this._miny&&(this._miny=l),l>this._maxy&&(this._maxy=l))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof o){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof at){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var r=arguments[0],l=arguments[1];return this.covers(r,l)}}},{key:"centre",value:function(){return this.isNull()?null:new at((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof at){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof o){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(arguments.length===2){var r=arguments[0],l=arguments[1];this.init(r.x,l.x,r.y,l.y)}else if(arguments.length===4){var g=arguments[0],v=arguments[1],b=arguments[2],R=arguments[3];g<v?(this._minx=g,this._maxx=v):(this._minx=v,this._maxx=g),b<R?(this._miny=b,this._maxy=R):(this._miny=R,this._maxy=b)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),e===0?r:r===0?e:Math.sqrt(e*e+r*r)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+at.hashCode(this._minx))+at.hashCode(this._maxx))+at.hashCode(this._miny))+at.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[It,Dt]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof at){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof o){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var r=arguments[0],l=arguments[1];this.init(r.x,l.x,r.y,l.y)}else if(arguments.length===4){var g=arguments[0],v=arguments[1],b=arguments[2],R=arguments[3];this.init(g,v,b,R)}}},{key:"intersects",value:function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var l=arguments[0],g=arguments[1],v=arguments[2],b=arguments[3],R=Math.min(v.x,b.x),z=Math.max(v.x,b.x),et=Math.min(l.x,g.x),lt=Math.max(l.x,g.x);return!(et>z)&&!(lt<R)&&(R=Math.min(v.y,b.y),z=Math.max(v.y,b.y),et=Math.min(l.y,g.y),lt=Math.max(l.y,g.y),!(et>z)&&!(lt<R))}}}])}(),Xt=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===o.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(o.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return t!==null&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(arguments.length===1){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(arguments.length===2){var r=arguments[0],l=arguments[1];return t=r,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(r,l)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===o.TYPECODE_GEOMETRYCOLLECTION)throw new yt("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,r){return r===0?t.equals(e):t.distance(e)<=r}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return this.envelope!=null&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=this._envelope==null?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Ne(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var r=t.iterator(),l=e.iterator();r.hasNext()&&l.hasNext();){var g=r.next(),v=l.next(),b=g.compareTo(v);if(b!==0)return b}return r.hasNext()?1:l.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===o.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===o.TYPECODE_MULTIPOINT||this.getTypeCode()===o.TYPECODE_MULTILINESTRING||this.getTypeCode()===o.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Nt,It,Dt]}},{key:"getClass",value:function(){return o}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1}}])}();Xt.constructor_=function(o){o&&(this._envelope=null,this._userData=null,this._factory=o,this._SRID=o.getSRID())},Xt.TYPECODE_POINT=0,Xt.TYPECODE_MULTIPOINT=1,Xt.TYPECODE_LINESTRING=2,Xt.TYPECODE_LINEARRING=3,Xt.TYPECODE_MULTILINESTRING=4,Xt.TYPECODE_POLYGON=5,Xt.TYPECODE_MULTIPOLYGON=6,Xt.TYPECODE_GEOMETRYCOLLECTION=7,Xt.TYPENAME_POINT="Point",Xt.TYPENAME_MULTIPOINT="MultiPoint",Xt.TYPENAME_LINESTRING="LineString",Xt.TYPENAME_LINEARRING="LinearRing",Xt.TYPENAME_MULTILINESTRING="MultiLineString",Xt.TYPENAME_POLYGON="Polygon",Xt.TYPENAME_MULTIPOLYGON="MultiPolygon",Xt.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Xt.geometryChangedFilter={get interfaces_(){return[Ct]},filter:function(o){o.geometryChangedAction()}};var Y=function(){function o(){p(this,o)}return C(o,null,[{key:"toLocationSymbol",value:function(t){switch(t){case o.EXTERIOR:return"e";case o.BOUNDARY:return"b";case o.INTERIOR:return"i";case o.NONE:return"-"}throw new yt("Unknown location value: "+t)}}])}();Y.INTERIOR=0,Y.BOUNDARY=1,Y.EXTERIOR=2,Y.NONE=-1;var kn=function(){return C(function o(){p(this,o)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),ei=function(o){function t(e){var r;return p(this,t),(r=m(this,t,[e])).name=Object.keys({NoSuchElementException:t})[0],r}return G(t,o),C(t)}(wt),Rn=function(o){function t(e){var r;return p(this,t),(r=m(this,t,[e])).name=Object.keys({UnsupportedOperationException:t})[0],r}return G(t,o),C(t)}(wt),Hn=function(o){function t(){return p(this,t),m(this,t,arguments)}return G(t,o),C(t,[{key:"contains",value:function(){}}])}(kn),Oi=function(o){function t(e){var r;return p(this,t),(r=m(this,t)).map=new Map,e instanceof kn&&r.addAll(e),r}return G(t,o),C(t,[{key:"contains",value:function(e){var r=e.hashCode?e.hashCode():e;return!!this.map.has(r)}},{key:"add",value:function(e){var r=e.hashCode?e.hashCode():e;return!this.map.has(r)&&!!this.map.set(r,e)}},{key:"addAll",value:function(e){var r,l=S(e);try{for(l.s();!(r=l.n()).done;){var g=r.value;this.add(g)}}catch(v){l.e(v)}finally{l.f()}return!0}},{key:"remove",value:function(){throw new Rn}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Ji(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Hn),Ji=function(){return C(function o(t){p(this,o),this.iterator=t.values();var e=this.iterator.next(),r=e.done,l=e.value;this.done=r,this.value=l},[{key:"next",value:function(){if(this.done)throw new ei;var o=this.value,t=this.iterator.next(),e=t.done,r=t.value;return this.done=e,this.value=r,o}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new Rn}}])}(),At=function(){function o(){p(this,o)}return C(o,null,[{key:"opposite",value:function(t){return t===o.LEFT?o.RIGHT:t===o.RIGHT?o.LEFT:t}}])}();At.ON=0,At.LEFT=1,At.RIGHT=2;var wi=function(o){function t(e){var r;return p(this,t),(r=m(this,t,[e])).name=Object.keys({EmptyStackException:t})[0],r}return G(t,o),C(t)}(wt),Li=function(o){function t(e){var r;return p(this,t),(r=m(this,t,[e])).name=Object.keys({IndexOutOfBoundsException:t})[0],r}return G(t,o),C(t)}(wt),ni=function(o){function t(){return p(this,t),m(this,t,arguments)}return G(t,o),C(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(kn),Wr=function(o){function t(){var e;return p(this,t),(e=m(this,t)).array=[],e}return G(t,o),C(t,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new Li;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(this.array.length===0)throw new wi;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new wi;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(ni);function he(o,t){return o.interfaces_&&o.interfaces_.indexOf(t)>-1}var Di=function(){return C(function o(t){p(this,o),this.str=t},[{key:"append",value:function(o){this.str+=o}},{key:"setCharAt",value:function(o,t){this.str=this.str.substr(0,o)+t+this.str.substr(o+1)}},{key:"toString",value:function(){return this.str}}])}(),jn=function(){function o(t){p(this,o),this.value=t}return C(o,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new o(t)}}])}(),ii=function(){return C(function o(){p(this,o)},null,[{key:"isWhitespace",value:function(o){return o<=32&&o>=0||o===127}},{key:"toUpperCase",value:function(o){return o.toUpperCase()}}])}(),te=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,e){var r=this.abs(),l=o.magnitude(r._hi),g=o.TEN.pow(l);(r=r.divide(g)).gt(o.TEN)?(r=r.divide(o.TEN),l+=1):r.lt(o.ONE)&&(r=r.multiply(o.TEN),l-=1);for(var v=l+1,b=new Di,R=o.MAX_PRINT_DIGITS-1,z=0;z<=R;z++){t&&z===v&&b.append(".");var et=Math.trunc(r._hi);if(et<0)break;var lt=!1,kt=0;et>9?(lt=!0,kt="9"):kt="0"+et,b.append(kt),r=r.subtract(o.valueOf(et)).multiply(o.TEN),lt&&r.selfAdd(o.TEN);var Ot=!0,Yt=o.magnitude(r._hi);if(Yt<0&&Math.abs(Yt)>=R-z&&(Ot=!1),!Ot)break}return e[0]=l,b.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof o){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof o){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof o){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof o){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var r,l,g,v,b=arguments[0],R=arguments[1],z=null,et=null,lt=null,kt=null;return g=this._hi/b,kt=(z=(lt=o.SPLIT*g)-(z=lt-g))*(et=(kt=o.SPLIT*b)-(et=kt-b))-(v=g*b)+z*(l=b-et)+(r=g-z)*et+r*l,kt=g+(lt=(this._hi-v-kt+this._lo-g*R)/b),this._hi=kt,this._lo=g-kt+lt,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof o){var t,e,r,l,g=arguments[0],v=null,b=null,R=null,z=null;return t=(r=this._hi/g._hi)-(v=(R=o.SPLIT*r)-(v=R-r)),z=v*(b=(z=o.SPLIT*g._hi)-(b=z-g._hi))-(l=r*g._hi)+v*(e=g._hi-b)+t*b+t*e,new o(z=r+(R=(this._hi-l-z+this._lo-r*g._lo)/g._hi),r-z+R)}if(typeof arguments[0]=="number"){var et=arguments[0];return vt.isNaN(et)?o.createNaN():o.copy(this).selfDivide(et,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(t===0)return o.valueOf(1);var e=new o(this),r=o.valueOf(1),l=Math.abs(t);if(l>1)for(;l>0;)l%2==1&&r.selfMultiply(e),(l/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r}},{key:"ceil",value:function(){if(this.isNaN())return o.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new o(t,e)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof o){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return o.valueOf(0);if(this.isNegative())return o.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=o.valueOf(e),l=this.subtract(r.sqr())._hi*(.5*t);return r.add(l)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof o){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e,r,l,g,v,b=arguments[0],R=null;return R=(l=this._hi+b)-(g=l-this._hi),r=(v=(R=b-g+(this._hi-R))+this._lo)+(l-(e=l+v)),this._hi=e+r,this._lo=r+(e-this._hi),this}}else if(arguments.length===2){var z,et,lt,kt,Ot=arguments[0],Yt=arguments[1],ne=null,Ce=null,we=null;lt=this._hi+Ot,et=this._lo+Yt,Ce=lt-(we=lt-this._hi),ne=et-(kt=et-this._lo);var Ue=(z=lt+(we=(Ce=Ot-we+(this._hi-Ce))+et))+(we=(ne=Yt-kt+(this._lo-ne))+(we+(lt-z))),We=we+(z-Ue);return this._hi=Ue,this._lo=We,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof o){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var r,l,g=arguments[0],v=arguments[1],b=null,R=null,z=null,et=null;b=(z=o.SPLIT*this._hi)-this._hi,et=o.SPLIT*g,b=z-b,r=this._hi-b,R=et-g;var lt=(z=this._hi*g)+(et=b*(R=et-R)-z+b*(l=g-R)+r*R+r*l+(this._hi*v+this._lo*g)),kt=et+(b=z-lt);return this._hi=lt,this._lo=kt,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return o.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new o(t,e)}},{key:"negate",value:function(){return this.isNaN()?this:new o(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof o){var t=arguments[0];return t.isNaN()?o.createNaN():o.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return vt.isNaN(e)?o.createNaN():o.copy(this).selfMultiply(e,0)}}},{key:"isNaN",value:function(){return vt.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=o.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),l=e[0]+1,g=r;if(r.charAt(0)===".")g="0"+r;else if(l<0)g="0."+o.stringOfChar("0",-l)+r;else if(r.indexOf(".")===-1){var v=l-r.length;g=r+o.stringOfChar("0",v)+".0"}return this.isNegative()?"-"+g:g}},{key:"reciprocal",value:function(){var t,e,r,l,g=null,v=null,b=null,R=null;t=(r=1/this._hi)-(g=(b=o.SPLIT*r)-(g=b-r)),v=(R=o.SPLIT*this._hi)-this._hi;var z=r+(b=(1-(l=r*this._hi)-(R=g*(v=R-v)-l+g*(e=this._hi-v)+t*v+t*e)-r*this._lo)/this._hi);return new o(z,r-z+b)}},{key:"toSciNotation",value:function(){if(this.isZero())return o.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),l=o.SCI_NOT_EXPONENT_CHAR+e[0];if(r.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+r);var g="";r.length>1&&(g=r.substring(1));var v=r.charAt(0)+"."+g;return this.isNegative()?"-"+v+l:v+l}},{key:"abs",value:function(){return this.isNaN()?o.NaN:this.isNegative()?this.negate():new o(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof o){var t=arguments[0];return o.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return o.copy(this).selfAdd(e)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof o){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(arguments.length===2){var r=arguments[0],l=arguments[1];this._hi=r,this._lo=l}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?o.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[Dt,It,Nt]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof o){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var r=arguments[0];o.constructor_.call(this,o.parse(r))}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];this.init(l,g)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],r=arguments[2],l=arguments[3];return o.determinant(o.valueOf(t),o.valueOf(e),o.valueOf(r),o.valueOf(l))}if(arguments[3]instanceof o&&arguments[2]instanceof o&&arguments[0]instanceof o&&arguments[1]instanceof o){var g=arguments[1],v=arguments[2],b=arguments[3];return arguments[0].multiply(b).selfSubtract(g.multiply(v))}}},{key:"sqr",value:function(t){return o.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var t=arguments[0];return o.parse(t)}if(typeof arguments[0]=="number")return new o(arguments[0])}},{key:"sqrt",value:function(t){return o.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var e=0,r=t.length;ii.isWhitespace(t.charAt(e));)e++;var l=!1;if(e<r){var g=t.charAt(e);g!=="-"&&g!=="+"||(e++,g==="-"&&(l=!0))}for(var v=new o,b=0,R=0,z=0,et=!1;!(e>=r);){var lt=t.charAt(e);if(e++,ii.isDigit(lt)){var kt=lt-"0";v.selfMultiply(o.TEN),v.selfAdd(kt),b++}else{if(lt!=="."){if(lt==="e"||lt==="E"){var Ot=t.substring(e);try{z=jn.parseInt(Ot)}catch(Ue){throw Ue instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+Ot+" in string "+t):Ue}break}throw new NumberFormatException("Unexpected character '"+lt+"' at position "+e+" in string "+t)}R=b,et=!0}}var Yt=v;et||(R=b);var ne=b-R-z;if(ne===0)Yt=v;else if(ne>0){var Ce=o.TEN.pow(ne);Yt=v.divide(Ce)}else if(ne<0){var we=o.TEN.pow(-ne);Yt=v.multiply(we)}return l?Yt.negate():Yt}},{key:"createNaN",value:function(){return new o(vt.NaN,vt.NaN)}},{key:"copy",value:function(t){return new o(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),l=Math.trunc(Math.floor(r));return 10*Math.pow(10,l)<=e&&(l+=1),l}},{key:"stringOfChar",value:function(t,e){for(var r=new Di,l=0;l<e;l++)r.append(t);return r.toString()}}])}();te.PI=new te(3.141592653589793,12246467991473532e-32),te.TWO_PI=new te(6.283185307179586,24492935982947064e-32),te.PI_2=new te(1.5707963267948966,6123233995736766e-32),te.E=new te(2.718281828459045,14456468917292502e-32),te.NaN=new te(vt.NaN,vt.NaN),te.EPS=123259516440783e-46,te.SPLIT=134217729,te.MAX_PRINT_DIGITS=32,te.TEN=te.valueOf(10),te.ONE=te.valueOf(1),te.SCI_NOT_EXPONENT_CHAR="E",te.SCI_NOT_ZERO="0.0E0";var Sr=function(){function o(){p(this,o)}return C(o,null,[{key:"orientationIndex",value:function(t,e,r){var l=o.orientationIndexFilter(t,e,r);if(l<=1)return l;var g=te.valueOf(e.x).selfAdd(-t.x),v=te.valueOf(e.y).selfAdd(-t.y),b=te.valueOf(r.x).selfAdd(-e.x),R=te.valueOf(r.y).selfAdd(-e.y);return g.selfMultiply(R).selfSubtract(v.selfMultiply(b)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof te&&arguments[2]instanceof te&&arguments[0]instanceof te&&arguments[1]instanceof te){var t=arguments[1],e=arguments[2],r=arguments[3];return arguments[0].multiply(r).selfSubtract(t.multiply(e)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var l=arguments[0],g=arguments[1],v=arguments[2],b=arguments[3],R=te.valueOf(l),z=te.valueOf(g),et=te.valueOf(v),lt=te.valueOf(b);return R.multiply(lt).selfSubtract(z.multiply(et)).signum()}}},{key:"intersection",value:function(t,e,r,l){var g=new te(t.y).selfSubtract(e.y),v=new te(e.x).selfSubtract(t.x),b=new te(t.x).selfMultiply(e.y).selfSubtract(new te(e.x).selfMultiply(t.y)),R=new te(r.y).selfSubtract(l.y),z=new te(l.x).selfSubtract(r.x),et=new te(r.x).selfMultiply(l.y).selfSubtract(new te(l.x).selfMultiply(r.y)),lt=v.multiply(et).selfSubtract(z.multiply(b)),kt=R.multiply(b).selfSubtract(g.multiply(et)),Ot=g.multiply(z).selfSubtract(R.multiply(v)),Yt=lt.selfDivide(Ot).doubleValue(),ne=kt.selfDivide(Ot).doubleValue();return vt.isNaN(Yt)||vt.isInfinite(Yt)||vt.isNaN(ne)||vt.isInfinite(ne)?null:new at(Yt,ne)}},{key:"orientationIndexFilter",value:function(t,e,r){var l=null,g=(t.x-r.x)*(e.y-r.y),v=(t.y-r.y)*(e.x-r.x),b=g-v;if(g>0){if(v<=0)return o.signum(b);l=g+v}else{if(!(g<0)||v>=0)return o.signum(b);l=-g-v}var R=o.DP_SAFE_EPSILON*l;return b>=R||-b>=R?o.signum(b):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}])}();Sr.DP_SAFE_EPSILON=1e-15;var ke=function(){return C(function o(){p(this,o)},[{key:"getM",value:function(o){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(o,t)}return vt.NaN}},{key:"setOrdinate",value:function(o,t,e){}},{key:"getZ",value:function(o){return this.hasZ()?this.getOrdinate(o,2):vt.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(o,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(o){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(o){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(o){}},{key:"copy",value:function(){}},{key:"getY",value:function(o){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[Nt]}}])}();ke.X=0,ke.Y=1,ke.Z=2,ke.M=3;var ie=function(){function o(){p(this,o)}return C(o,null,[{key:"index",value:function(t,e,r){return Sr.orientationIndex(t,e,r)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],e=t.length-1;if(e<3)throw new yt("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],l=0,g=1;g<=e;g++){var v=t[g];v.y>r.y&&(r=v,l=g)}var b=l;do(b-=1)<0&&(b=e);while(t[b].equals2D(r)&&b!==l);var R=l;do R=(R+1)%e;while(t[R].equals2D(r)&&R!==l);var z=t[b],et=t[R];if(z.equals2D(r)||et.equals2D(r)||z.equals2D(et))return!1;var lt=o.index(z,r,et);return lt===0?z.x>et.x:lt>0}if(he(arguments[0],ke)){var kt=arguments[0],Ot=kt.size()-1;if(Ot<3)throw new yt("Ring has fewer than 4 points, so orientation cannot be determined");for(var Yt=kt.getCoordinate(0),ne=0,Ce=1;Ce<=Ot;Ce++){var we=kt.getCoordinate(Ce);we.y>Yt.y&&(Yt=we,ne=Ce)}var Ue=null,We=ne;do(We-=1)<0&&(We=Ot),Ue=kt.getCoordinate(We);while(Ue.equals2D(Yt)&&We!==ne);var dn=null,ur=ne;do ur=(ur+1)%Ot,dn=kt.getCoordinate(ur);while(dn.equals2D(Yt)&&ur!==ne);if(Ue.equals2D(Yt)||dn.equals2D(Yt)||Ue.equals2D(dn))return!1;var ro=o.index(Ue,Yt,dn);return ro===0?Ue.x>dn.x:ro>0}}}])}();ie.CLOCKWISE=-1,ie.RIGHT=ie.CLOCKWISE,ie.COUNTERCLOCKWISE=1,ie.LEFT=ie.COUNTERCLOCKWISE,ie.COLLINEAR=0,ie.STRAIGHT=ie.COLLINEAR;var Tr=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(o,t){var e=this.getRightmostSideOfSegment(o,t);return e<0&&(e=this.getRightmostSideOfSegment(o,t-1)),e<0&&(this._minCoord=null,this.checkForRightmostCoordinate(o)),e}},{key:"findRightmostEdgeAtVertex",value:function(){var o=this._minDe.getEdge().getCoordinates();Ht.isTrue(this._minIndex>0&&this._minIndex<o.length,"rightmost point expected to be interior vertex of edge");var t=o[this._minIndex-1],e=o[this._minIndex+1],r=ie.index(this._minCoord,e,t),l=!1;(t.y<this._minCoord.y&&e.y<this._minCoord.y&&r===ie.COUNTERCLOCKWISE||t.y>this._minCoord.y&&e.y>this._minCoord.y&&r===ie.CLOCKWISE)&&(l=!0),l&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(o,t){var e=o.getEdge().getCoordinates();if(t<0||t+1>=e.length||e[t].y===e[t+1].y)return-1;var r=At.LEFT;return e[t].y<e[t+1].y&&(r=At.RIGHT),r}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(o){for(var t=o.getEdge().getCoordinates(),e=0;e<t.length-1;e++)(this._minCoord===null||t[e].x>this._minCoord.x)&&(this._minDe=o,this._minIndex=e,this._minCoord=t[e])}},{key:"findRightmostEdgeAtNode",value:function(){var o=this._minDe.getNode().getEdges();this._minDe=o.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(o){for(var t=o.iterator();t.hasNext();){var e=t.next();e.isForward()&&this.checkForRightmostCoordinate(e)}Ht.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===At.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),Nn=function(o){function t(e,r){var l;return p(this,t),(l=m(this,t,[r?e+" [ "+r+" ]":e])).pt=r?new at(r):void 0,l.name=Object.keys({TopologyException:t})[0],l}return G(t,o),C(t,[{key:"getCoordinate",value:function(){return this.pt}}])}(xe),Bn=function(){return C(function o(){p(this,o),this.array=[]},[{key:"addLast",value:function(o){this.array.push(o)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),ee=function(o){function t(e){var r;return p(this,t),(r=m(this,t)).array=[],e instanceof kn&&r.addAll(e),r}return G(t,o),C(t,[{key:"interfaces_",get:function(){return[ni,kn]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return arguments.length===1?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var r,l=S(e);try{for(l.s();!(r=l.n()).done;){var g=r.value;this.array.push(g)}}catch(v){l.e(v)}finally{l.f()}}},{key:"set",value:function(e,r){var l=this.array[e];return this.array[e]=r,l}},{key:"iterator",value:function(){return new Xn(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new Li;return this.array[e]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(e){e?this.array.sort(function(r,l){return e.compare(r,l)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var r=0,l=this.array.length;r<l;r++)if(this.array[r]===e)return!!this.array.splice(r,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(ni),Xn=function(){return C(function o(t){p(this,o),this.arrayList=t,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new ei;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(o){return this.arrayList.set(this.position-1,o)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),pn=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var o=this._dirEdgeList.iterator();o.hasNext();)o.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(o){for(var t=null,e=o.getEdges().iterator();e.hasNext();){var r=e.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(t===null)throw new Nn("unable to find edge to compute depths at "+o.getCoordinate());o.getEdges().computeDepths(t);for(var l=o.getEdges().iterator();l.hasNext();){var g=l.next();g.setVisited(!0),this.copySymDepths(g)}}},{key:"computeDepth",value:function(o){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(At.RIGHT,o),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(o){this.addReachable(o),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var o=this._dirEdgeList.iterator();o.hasNext();){var t=o.next();t.getDepth(At.RIGHT)>=1&&t.getDepth(At.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(o){var t=new Oi,e=new Bn,r=o.getNode();for(e.addLast(r),t.add(r),o.setVisited(!0);!e.isEmpty();){var l=e.removeFirst();t.add(l),this.computeNodeDepth(l);for(var g=l.getEdges().iterator();g.hasNext();){var v=g.next().getSym();if(!v.isVisited()){var b=v.getNode();t.contains(b)||(e.addLast(b),t.add(b))}}}}},{key:"compareTo",value:function(o){var t=o;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var o=new Ne,t=this._dirEdgeList.iterator();t.hasNext();)for(var e=t.next().getEdge().getCoordinates(),r=0;r<e.length-1;r++)o.expandToInclude(e[r]);this._env=o}return this._env}},{key:"addReachable",value:function(o){var t=new Wr;for(t.add(o);!t.empty();){var e=t.pop();this.add(e,t)}}},{key:"copySymDepths",value:function(o){var t=o.getSym();t.setDepth(At.LEFT,o.getDepth(At.RIGHT)),t.setDepth(At.RIGHT,o.getDepth(At.LEFT))}},{key:"add",value:function(o,t){o.setVisited(!0),this._nodes.add(o);for(var e=o.getEdges().iterator();e.hasNext();){var r=e.next();this._dirEdgeList.add(r);var l=r.getSym().getNode();l.isVisited()||t.push(l)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[It]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new ee,this._nodes=new ee,this._rightMostCoord=null,this._env=null,this._finder=new Tr}}])}(),$i=function(){return C(function o(){p(this,o)},null,[{key:"intersection",value:function(o,t,e,r){var l=o.x<t.x?o.x:t.x,g=o.y<t.y?o.y:t.y,v=o.x>t.x?o.x:t.x,b=o.y>t.y?o.y:t.y,R=e.x<r.x?e.x:r.x,z=e.y<r.y?e.y:r.y,et=e.x>r.x?e.x:r.x,lt=e.y>r.y?e.y:r.y,kt=((l>R?l:R)+(v<et?v:et))/2,Ot=((g>z?g:z)+(b<lt?b:lt))/2,Yt=o.x-kt,ne=o.y-Ot,Ce=t.x-kt,we=t.y-Ot,Ue=e.x-kt,We=e.y-Ot,dn=r.x-kt,ur=r.y-Ot,ro=ne-we,ci=Ce-Yt,oo=Yt*we-Ce*ne,Ko=We-ur,Yr=dn-Ue,Jo=Ue*ur-dn*We,Er=ro*Yr-Ko*ci,wr=(ci*Jo-Yr*oo)/Er,bo=(Ko*oo-ro*Jo)/Er;return vt.isNaN(wr)||vt.isInfinite(wr)||vt.isNaN(bo)||vt.isInfinite(bo)?null:new at(wr+kt,bo+Ot)}}])}(),on=function(){return C(function o(){p(this,o)},null,[{key:"arraycopy",value:function(o,t,e,r,l){for(var g=0,v=t;v<t+l;v++)e[r+g]=o[v],g++}},{key:"getProperty",value:function(o){return{"line.separator":`
`}[o]}}])}(),Qi=function(){function o(){p(this,o)}return C(o,null,[{key:"log10",value:function(t){var e=Math.log(t);return vt.isInfinite(e)||vt.isNaN(e)?e:e/o.LOG_10}},{key:"min",value:function(t,e,r,l){var g=t;return e<g&&(g=e),r<g&&(g=r),l<g&&(g=l),g}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],g=arguments[1],v=arguments[2];return l<g?g:l>v?v:l}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(arguments.length===3){var t=arguments[1],e=arguments[2],r=arguments[0];return t>r&&(r=t),e>r&&(r=e),r}if(arguments.length===4){var l=arguments[1],g=arguments[2],v=arguments[3],b=arguments[0];return l>b&&(b=l),g>b&&(b=g),v>b&&(b=v),b}}},{key:"average",value:function(t,e){return(t+e)/2}}])}();Qi.LOG_10=Math.log(10);var mn=function(){function o(){p(this,o)}return C(o,null,[{key:"segmentToSegment",value:function(t,e,r,l){if(t.equals(e))return o.pointToSegment(t,r,l);if(r.equals(l))return o.pointToSegment(l,t,e);var g=!1;if(Ne.intersects(t,e,r,l)){var v=(e.x-t.x)*(l.y-r.y)-(e.y-t.y)*(l.x-r.x);if(v===0)g=!0;else{var b=(t.y-r.y)*(l.x-r.x)-(t.x-r.x)*(l.y-r.y),R=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/v,z=b/v;(z<0||z>1||R<0||R>1)&&(g=!0)}}else g=!0;return g?Qi.min(o.pointToSegment(t,r,l),o.pointToSegment(e,r,l),o.pointToSegment(r,t,e),o.pointToSegment(l,t,e)):0}},{key:"pointToSegment",value:function(t,e,r){if(e.x===r.x&&e.y===r.y)return t.distance(e);var l=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),g=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/l;if(g<=0)return t.distance(e);if(g>=1)return t.distance(r);var v=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/l;return Math.abs(v)*Math.sqrt(l)}},{key:"pointToLinePerpendicular",value:function(t,e,r){var l=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),g=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/l;return Math.abs(g)*Math.sqrt(l)}},{key:"pointToSegmentString",value:function(t,e){if(e.length===0)throw new yt("Line array must contain at least one vertex");for(var r=t.distance(e[0]),l=0;l<e.length-1;l++){var g=o.pointToSegment(t,e[l],e[l+1]);g<r&&(r=g)}return r}}])}(),Fi=function(){return C(function o(){p(this,o)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||he(arguments[0],ke);else if(arguments.length!==2){if(arguments.length===3){var o=arguments[0],t=arguments[1];return this.create(o,t)}}}}])}(),Ar=function(){return C(function o(){p(this,o)},[{key:"filter",value:function(o){}}])}(),cr=function(){return C(function o(){p(this,o)},null,[{key:"ofLine",value:function(o){var t=o.size();if(t<=1)return 0;var e=0,r=new at;o.getCoordinate(0,r);for(var l=r.x,g=r.y,v=1;v<t;v++){o.getCoordinate(v,r);var b=r.x,R=r.y,z=b-l,et=R-g;e+=Math.sqrt(z*z+et*et),l=b,g=R}return e}}])}(),ao=C(function o(){p(this,o)}),zi=function(){function o(){p(this,o)}return C(o,null,[{key:"copyCoord",value:function(t,e,r,l){for(var g=Math.min(t.getDimension(),r.getDimension()),v=0;v<g;v++)r.setOrdinate(l,v,t.getOrdinate(e,v))}},{key:"isRing",value:function(t){var e=t.size();return e===0||!(e<=3)&&t.getOrdinate(0,ke.X)===t.getOrdinate(e-1,ke.X)&&t.getOrdinate(0,ke.Y)===t.getOrdinate(e-1,ke.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(he(arguments[0],ke)&&Number.isInteger(arguments[1])){var t=arguments[0],e=arguments[1];o.scroll(t,e,o.isRing(t))}else if(he(arguments[0],ke)&&arguments[1]instanceof at){var r=arguments[0],l=arguments[1],g=o.indexOf(l,r);if(g<=0)return null;o.scroll(r,g)}}else if(arguments.length===3){var v=arguments[0],b=arguments[1],R=arguments[2];if(b<=0)return null;for(var z=v.copy(),et=R?v.size()-1:v.size(),lt=0;lt<et;lt++)for(var kt=0;kt<v.getDimension();kt++)v.setOrdinate(lt,kt,z.getOrdinate((b+lt)%et,kt));if(R)for(var Ot=0;Ot<v.getDimension();Ot++)v.setOrdinate(et,Ot,v.getOrdinate(0,Ot))}}},{key:"isEqual",value:function(t,e){var r=t.size();if(r!==e.size())return!1;for(var l=Math.min(t.getDimension(),e.getDimension()),g=0;g<r;g++)for(var v=0;v<l;v++){var b=t.getOrdinate(g,v),R=e.getOrdinate(g,v);if(t.getOrdinate(g,v)!==e.getOrdinate(g,v)&&(!vt.isNaN(b)||!vt.isNaN(R)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var t=arguments[0];return o.minCoordinateIndex(t,0,t.size()-1)}if(arguments.length===3){for(var e=arguments[0],r=arguments[2],l=-1,g=null,v=arguments[1];v<=r;v++){var b=e.getCoordinate(v);(g===null||g.compareTo(b)>0)&&(g=b,l=v)}return l}}},{key:"extend",value:function(t,e,r){var l=t.create(r,e.getDimension()),g=e.size();if(o.copy(e,0,l,0,g),g>0)for(var v=g;v<r;v++)o.copy(e,g-1,l,v,1);return l}},{key:"reverse",value:function(t){for(var e=t.size()-1,r=Math.trunc(e/2),l=0;l<=r;l++)o.swap(t,l,e-l)}},{key:"swap",value:function(t,e,r){if(e===r)return null;for(var l=0;l<t.getDimension();l++){var g=t.getOrdinate(e,l);t.setOrdinate(e,l,t.getOrdinate(r,l)),t.setOrdinate(r,l,g)}}},{key:"copy",value:function(t,e,r,l,g){for(var v=0;v<g;v++)o.copyCoord(t,e+v,r,l+v)}},{key:"ensureValidRing",value:function(t,e){var r=e.size();return r===0?e:r<=3?o.createClosedRing(t,e,4):e.getOrdinate(0,ke.X)===e.getOrdinate(r-1,ke.X)&&e.getOrdinate(0,ke.Y)===e.getOrdinate(r-1,ke.Y)?e:o.createClosedRing(t,e,r+1)}},{key:"indexOf",value:function(t,e){for(var r=0;r<e.size();r++)if(t.x===e.getOrdinate(r,ke.X)&&t.y===e.getOrdinate(r,ke.Y))return r;return-1}},{key:"createClosedRing",value:function(t,e,r){var l=t.create(r,e.getDimension()),g=e.size();o.copy(e,0,l,0,g);for(var v=g;v<r;v++)o.copy(e,0,l,v,1);return l}},{key:"minCoordinate",value:function(t){for(var e=null,r=0;r<t.size();r++){var l=t.getCoordinate(r);(e===null||e.compareTo(l)>0)&&(e=l)}return e}}])}(),Mt=function(){function o(){p(this,o)}return C(o,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case o.FALSE:return o.SYM_FALSE;case o.TRUE:return o.SYM_TRUE;case o.DONTCARE:return o.SYM_DONTCARE;case o.P:return o.SYM_P;case o.L:return o.SYM_L;case o.A:return o.SYM_A}throw new yt("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(ii.toUpperCase(t)){case o.SYM_FALSE:return o.FALSE;case o.SYM_TRUE:return o.TRUE;case o.SYM_DONTCARE:return o.DONTCARE;case o.SYM_P:return o.P;case o.SYM_L:return o.L;case o.SYM_A:return o.A}throw new yt("Unknown dimension symbol: "+t)}}])}();Mt.P=0,Mt.L=1,Mt.A=2,Mt.FALSE=-1,Mt.TRUE=-2,Mt.DONTCARE=-3,Mt.SYM_FALSE="F",Mt.SYM_TRUE="T",Mt.SYM_DONTCARE="*",Mt.SYM_P="0",Mt.SYM_L="1",Mt.SYM_A="2";var Wn=function(){return C(function o(){p(this,o)},[{key:"filter",value:function(o){}}])}(),tr=function(){return C(function o(){p(this,o)},[{key:"filter",value:function(o,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),er=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Ne:this._points.expandEnvelope(new Ne)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Xt){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var l=e;if(this._points.size()!==l._points.size())return!1;for(var g=0;g<this._points.size();g++)if(!this.equal(this._points.getCoordinate(g),l._points.getCoordinate(g),r))return!1;return!0}return V(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var r=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(r))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(r))>0){var l=this._points.copy();zi.reverse(l),this._points=l}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Mt.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return zi.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Xt.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return cr.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var e=arguments[0],r=0,l=0;r<this._points.size()&&l<e._points.size();){var g=this._points.getCoordinate(r).compareTo(e._points.getCoordinate(l));if(g!==0)return g;r++,l++}return r<this._points.size()?1:l<e._points.size()?-1:0}if(arguments.length===2){var v=arguments[0];return arguments[1].compare(this._points,v._points)}}},{key:"apply",value:function(){if(he(arguments[0],Ar))for(var e=arguments[0],r=0;r<this._points.size();r++)e.filter(this._points.getCoordinate(r));else if(he(arguments[0],tr)){var l=arguments[0];if(this._points.size()===0)return null;for(var g=0;g<this._points.size()&&(l.filter(this._points,g),!l.isDone());g++);l.isGeometryChanged()&&this.geometryChanged()}else he(arguments[0],Wn)?arguments[0].filter(this):he(arguments[0],Ct)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new Rn}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return Xt.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(e){if(e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),e.size()===1)throw new yt("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var r=0;r<this._points.size();r++)if(this._points.getCoordinate(r).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[ao]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],r=arguments[1];Xt.constructor_.call(this,r),this.init(e)}}}}])}(Xt),Ir=C(function o(){p(this,o)}),fr=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Ne;var e=new Ne;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new t(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Xt){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),r))}return V(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Mt.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Xt.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var r=arguments[0];return arguments[1].compare(this._coordinates,r._coordinates)}}},{key:"apply",value:function(){if(he(arguments[0],Ar)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(he(arguments[0],tr)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this._coordinates,0),r.isGeometryChanged()&&this.geometryChanged()}else he(arguments[0],Wn)?arguments[0].filter(this):he(arguments[0],Ct)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Xt.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(e){e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),Ht.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Ir]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0],r=arguments[1];Xt.constructor_.call(this,r),this.init(e)}}])}(Xt),Kr=function(){function o(){p(this,o)}return C(o,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(o.ofRingSigned(t))}if(he(arguments[0],ke)){var e=arguments[0];return Math.abs(o.ofRingSigned(e))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,r=t[0].x,l=1;l<t.length-1;l++){var g=t[l].x-r,v=t[l+1].y;e+=g*(t[l-1].y-v)}return e/2}if(he(arguments[0],ke)){var b=arguments[0],R=b.size();if(R<3)return 0;var z=new at,et=new at,lt=new at;b.getCoordinate(0,et),b.getCoordinate(1,lt);var kt=et.x;lt.x-=kt;for(var Ot=0,Yt=1;Yt<R-1;Yt++)z.y=et.y,et.x=lt.x,et.y=lt.y,b.getCoordinate(Yt+1,lt),lt.x-=kt,Ot+=et.x*(z.y-lt.y);return Ot/2}}}])}(),sn=function(){return C(function o(){p(this,o)},null,[{key:"sort",value:function(){var o=arguments,t=arguments[0];if(arguments.length===1)t.sort(function(kt,Ot){return kt.compareTo(Ot)});else if(arguments.length===2)t.sort(function(kt,Ot){return o[1].compare(kt,Ot)});else if(arguments.length===3){var e=t.slice(arguments[1],arguments[2]);e.sort();var r=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);var l,g=S(r);try{for(g.s();!(l=g.n()).done;){var v=l.value;t.push(v)}}catch(kt){g.e(kt)}finally{g.f()}}else if(arguments.length===4){var b=t.slice(arguments[1],arguments[2]);b.sort(function(kt,Ot){return o[3].compare(kt,Ot)});var R=t.slice(0,arguments[1]).concat(b,t.slice(arguments[2],t.length));t.splice(0,t.length);var z,et=S(R);try{for(et.s();!(z=et.n()).done;){var lt=z.value;t.push(lt)}}catch(kt){et.e(kt)}finally{et.f()}}}},{key:"asList",value:function(o){var t,e=new ee,r=S(o);try{for(r.s();!(t=r.n()).done;){var l=t.value;e.add(l)}}catch(g){r.e(g)}finally{r.f()}return e}},{key:"copyOf",value:function(o,t){return o.slice(0,t)}}])}(),qt=C(function o(){p(this,o)}),ri=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),r=-1,l=this._shell.getCoordinates(),g=0;g<l.length;g++)e[++r]=l[g];for(var v=0;v<this._holes.length;v++)for(var b=this._holes[v].getCoordinates(),R=0;R<b.length;R++)e[++r]=b[R];return e}},{key:"getArea",value:function(){var e=0;e+=Kr.ofRing(this._shell.getCoordinateSequence());for(var r=0;r<this._holes.length;r++)e-=Kr.ofRing(this._holes[r].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),r=new Array(this._holes.length).fill(null),l=0;l<this._holes.length;l++)r[l]=this._holes[l].copy();return new t(e,r,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var e=this._shell.getCoordinateSequence(),r=this.getEnvelopeInternal(),l=0;l<5;l++){var g=e.getX(l);if(g!==r.getMinX()&&g!==r.getMaxX())return!1;var v=e.getY(l);if(v!==r.getMinY()&&v!==r.getMaxY())return!1}for(var b=e.getX(0),R=e.getY(0),z=1;z<=4;z++){var et=e.getX(z),lt=e.getY(z);if(et!==b==(lt!==R))return!1;b=et,R=lt}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Xt){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var l=e,g=this._shell,v=l._shell;if(!g.equalsExact(v,r)||this._holes.length!==l._holes.length)return!1;for(var b=0;b<this._holes.length;b++)if(!this._holes[b].equalsExact(l._holes[b],r))return!1;return!0}return V(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);sn.sort(this._holes)}else if(arguments.length===2){var r=arguments[0],l=arguments[1];if(r.isEmpty())return null;var g=r.getCoordinateSequence(),v=zi.minCoordinateIndex(g,0,g.size()-2);zi.scroll(g,v,!0),ie.isCCW(g)===l&&zi.reverse(g)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),r=new Array(this.getNumInteriorRing()).fill(null),l=0;l<r.length;l++)r[l]=this.getInteriorRingN(l).reverse();return this.getFactory().createPolygon(e,r)}},{key:"getTypeCode",value:function(){return Xt.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var r=0;r<this._holes.length;r++)e+=this._holes[r].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),r=0;r<this._holes.length;r++)e+=this._holes[r].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,r){var l=e.copy();return this.normalize(l,r),l}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],r=this._shell,l=e._shell;return r.compareToSameClass(l)}if(arguments.length===2){var g=arguments[1],v=arguments[0],b=this._shell,R=v._shell,z=b.compareToSameClass(R,g);if(z!==0)return z;for(var et=this.getNumInteriorRing(),lt=v.getNumInteriorRing(),kt=0;kt<et&&kt<lt;){var Ot=this.getInteriorRingN(kt),Yt=v.getInteriorRingN(kt),ne=Ot.compareToSameClass(Yt,g);if(ne!==0)return ne;kt++}return kt<et?1:kt<lt?-1:0}}},{key:"apply",value:function(){if(he(arguments[0],Ar)){var e=arguments[0];this._shell.apply(e);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(e)}else if(he(arguments[0],tr)){var l=arguments[0];if(this._shell.apply(l),!l.isDone())for(var g=0;g<this._holes.length&&(this._holes[g].apply(l),!l.isDone());g++);l.isGeometryChanged()&&this.geometryChanged()}else if(he(arguments[0],Wn))arguments[0].filter(this);else if(he(arguments[0],Ct)){var v=arguments[0];v.filter(this),this._shell.apply(v);for(var b=0;b<this._holes.length;b++)this._holes[b].apply(v)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var r=0;r<this._holes.length;r++)e[r+1]=this._holes[r];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return Xt.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[qt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],r=arguments[1],l=arguments[2];if(Xt.constructor_.call(this,l),e===null&&(e=this.getFactory().createLinearRing()),r===null&&(r=[]),Xt.hasNullElements(r))throw new yt("holes must not contain null elements");if(e.isEmpty()&&Xt.hasNonEmptyElements(r))throw new yt("shell is empty but holes are not");this._shell=e,this._holes=r}}])}(Xt),Jr=function(o){function t(){return p(this,t),m(this,t,arguments)}return G(t,o),C(t)}(Hn),Rr=function(o){function t(e){var r;return p(this,t),(r=m(this,t)).array=[],e instanceof kn&&r.addAll(e),r}return G(t,o),C(t,[{key:"contains",value:function(e){var r,l=S(this.array);try{for(l.s();!(r=l.n()).done;)if(r.value.compareTo(e)===0)return!0}catch(g){l.e(g)}finally{l.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var r=0,l=this.array.length;r<l;r++)if(this.array[r].compareTo(e)===1)return!!this.array.splice(r,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var r,l=S(e);try{for(l.s();!(r=l.n()).done;){var g=r.value;this.add(g)}}catch(v){l.e(v)}finally{l.f()}return!0}},{key:"remove",value:function(){throw new Rn}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Nr(this.array)}}])}(Jr),Nr=function(){return C(function o(t){p(this,o),this.array=t,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new ei;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new Rn}}])}(),en=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new Ne,r=0;r<this._geometries.length;r++)e.expandToInclude(this._geometries[r].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),r=-1,l=0;l<this._geometries.length;l++)for(var g=this._geometries[l].getCoordinates(),v=0;v<g.length;v++)e[++r]=g[v];return e}},{key:"getArea",value:function(){for(var e=0,r=0;r<this._geometries.length;r++)e+=this._geometries[r].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),r=0;r<e.length;r++)e[r]=this._geometries[r].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Xt){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var l=e;if(this._geometries.length!==l._geometries.length)return!1;for(var g=0;g<this._geometries.length;g++)if(!this._geometries[g].equalsExact(l._geometries[g],r))return!1;return!0}return V(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();sn.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=Mt.FALSE,r=0;r<this._geometries.length;r++)e=Math.max(e,this._geometries[r].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,r=new ee(e),l=0;l<e;l++)r.add(this._geometries[l].reverse());return this.getFactory().buildGeometry(r)}},{key:"getTypeCode",value:function(){return Xt.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=Mt.FALSE,r=0;r<this._geometries.length;r++)e=Math.max(e,this._geometries[r].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,r=0;r<this._geometries.length;r++)e+=this._geometries[r].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,r=0;r<this._geometries.length;r++)e+=this._geometries[r].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],r=new Rr(sn.asList(this._geometries)),l=new Rr(sn.asList(e._geometries));return this.compare(r,l)}if(arguments.length===2){for(var g=arguments[1],v=arguments[0],b=this.getNumGeometries(),R=v.getNumGeometries(),z=0;z<b&&z<R;){var et=this.getGeometryN(z),lt=v.getGeometryN(z),kt=et.compareToSameClass(lt,g);if(kt!==0)return kt;z++}return z<b?1:z<R?-1:0}}},{key:"apply",value:function(){if(he(arguments[0],Ar))for(var e=arguments[0],r=0;r<this._geometries.length;r++)this._geometries[r].apply(e);else if(he(arguments[0],tr)){var l=arguments[0];if(this._geometries.length===0)return null;for(var g=0;g<this._geometries.length&&(this._geometries[g].apply(l),!l.isDone());g++);l.isGeometryChanged()&&this.geometryChanged()}else if(he(arguments[0],Wn)){var v=arguments[0];v.filter(this);for(var b=0;b<this._geometries.length;b++)this._geometries[b].apply(v)}else if(he(arguments[0],Ct)){var R=arguments[0];R.filter(this);for(var z=0;z<this._geometries.length;z++)this._geometries[z].apply(R)}}},{key:"getBoundary",value:function(){return Xt.checkNotGeometryCollection(this),Ht.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Xt.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],r=arguments[1];if(Xt.constructor_.call(this,r),e===null&&(e=[]),Xt.hasNullElements(e))throw new yt("geometries must not contain null elements");this._geometries=e}}}}])}(Xt),Mn=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),r=0;r<e.length;r++)e[r]=this._geometries[r].copy();return new t(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Xt){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&V(t,"equalsExact",this,1).call(this,e,r)}return V(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var e=arguments[0];return this._geometries[e].getCoordinate()}return V(t,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Mt.FALSE}},{key:"getTypeCode",value:function(){return Xt.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Xt.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Ir]}}],[{key:"constructor_",value:function(){var e=arguments[0],r=arguments[1];en.constructor_.call(this,e,r)}}])}(en),On=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Mt.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||V(t,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return zi.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return Xt.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!V(t,"isClosed",this,1).call(this))throw new yt("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new yt("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Xt.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var e=arguments[0],r=arguments[1];er.constructor_.call(this,e,r),this.validateConstruction()}}])}(er);On.MINIMUM_VALID_SIZE=4;var oi=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"setOrdinate",value:function(e,r){switch(e){case t.X:this.x=r;break;case t.Y:this.y=r;break;default:throw new yt("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return at.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y}throw new yt("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new yt("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)at.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];at.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof at){var r=arguments[0];at.constructor_.call(this,r.x,r.y)}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];at.constructor_.call(this,l,g,at.NULL_ORDINATE)}}}])}(at);oi.X=0,oi.Y=1,oi.Z=-1,oi.M=-1;var ki=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,r){switch(e){case t.X:this.x=r;break;case t.Y:this.y=r;break;case t.M:this._m=r;break;default:throw new yt("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return at.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.M:return this._m}throw new yt("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new yt("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)at.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];at.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof at){var r=arguments[0];at.constructor_.call(this,r.x,r.y),this._m=this.getM()}}else if(arguments.length===3){var l=arguments[0],g=arguments[1],v=arguments[2];at.constructor_.call(this,l,g,at.NULL_ORDINATE),this._m=v}}}])}(at);ki.X=0,ki.Y=1,ki.Z=-1,ki.M=2;var Br=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,r){switch(e){case at.X:this.x=r;break;case at.Y:this.y=r;break;case at.Z:this.z=r;break;case at.M:this._m=r;break;default:throw new yt("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case at.X:return this.x;case at.Y:return this.y;case at.Z:return this.getZ();case at.M:return this.getM()}throw new yt("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)at.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];at.constructor_.call(this,e),this._m=e._m}else if(arguments[0]instanceof at){var r=arguments[0];at.constructor_.call(this,r),this._m=this.getM()}}else if(arguments.length===4){var l=arguments[0],g=arguments[1],v=arguments[2],b=arguments[3];at.constructor_.call(this,l,g,v),this._m=b}}}])}(at),Or=function(){function o(){p(this,o)}return C(o,null,[{key:"measures",value:function(t){return t instanceof oi?0:t instanceof ki||t instanceof Br?1:0}},{key:"dimension",value:function(t){return t instanceof oi?2:t instanceof ki?3:t instanceof Br?4:3}},{key:"create",value:function(){if(arguments.length===1){var t=arguments[0];return o.create(t,0)}if(arguments.length===2){var e=arguments[0],r=arguments[1];return e===2?new oi:e===3&&r===0?new at:e===3&&r===1?new ki:e===4&&r===1?new Br:new at}}}])}(),Jt=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&he(arguments[0],kn)){for(var e=arguments[1],r=!1,l=arguments[0].iterator();l.hasNext();)this.add(l.next(),e),r=!0;return r}return V(t,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var e=V(t,"clone",this,1).call(this),r=0;r<this.size();r++)e.add(r,this.get(r).clone());return e}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(t.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(t.coordArrayType);for(var e=this.size(),r=new Array(e).fill(null),l=0;l<e;l++)r[l]=this.get(e-l-1);return r}}},{key:"add",value:function(){if(arguments.length===1){var e=arguments[0];return V(t,"add",this,1).call(this,e)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var r=arguments[0],l=arguments[1];return this.add(r,l,!0),!0}if(arguments[0]instanceof at&&typeof arguments[1]=="boolean"){var g=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(g))return null;V(t,"add",this,1).call(this,g)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var v=arguments[0],b=arguments[1];return this.add(v,b),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var R=arguments[0],z=arguments[1];if(arguments[2])for(var et=0;et<R.length;et++)this.add(R[et],z);else for(var lt=R.length-1;lt>=0;lt--)this.add(R[lt],z);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof at){var kt=arguments[0],Ot=arguments[1];if(!arguments[2]){var Yt=this.size();if(Yt>0&&(kt>0&&this.get(kt-1).equals2D(Ot)||kt<Yt&&this.get(kt).equals2D(Ot)))return null}V(t,"add",this,1).call(this,kt,Ot)}}else if(arguments.length===4){var ne=arguments[0],Ce=arguments[1],we=arguments[2],Ue=arguments[3],We=1;we>Ue&&(We=-1);for(var dn=we;dn!==Ue;dn+=We)this.add(ne[dn],Ce);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(arguments.length===2){var r=arguments[0],l=arguments[1];this.ensureCapacity(r.length),this.add(r,l)}}}}])}(ee);Jt.coordArrayType=new Array(0).fill(null);var $=function(){function o(){p(this,o)}return C(o,null,[{key:"isRing",value:function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}},{key:"ptNotInList",value:function(t,e){for(var r=0;r<t.length;r++){var l=t[r];if(o.indexOf(l,e)<0)return l}return null}},{key:"scroll",value:function(t,e){var r=o.indexOf(e,t);if(r<0)return null;var l=new Array(t.length).fill(null);on.arraycopy(t,r,l,0,t.length-r),on.arraycopy(t,0,l,t.length-r,r),on.arraycopy(l,0,t,0,t.length)}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(arguments.length===3){var l=arguments[0],g=arguments[1],v=arguments[2];if(l===g)return!0;if(l===null||g===null||l.length!==g.length)return!1;for(var b=0;b<l.length;b++)if(v.compare(l[b],g[b])!==0)return!1;return!0}}},{key:"intersection",value:function(t,e){for(var r=new Jt,l=0;l<t.length;l++)e.intersects(t[l])&&r.add(t[l],!0);return r.toCoordinateArray()}},{key:"measures",value:function(t){if(t===null||t.length===0)return 0;var e,r=0,l=S(t);try{for(l.s();!(e=l.n()).done;){var g=e.value;r=Math.max(r,Or.measures(g))}}catch(v){l.e(v)}finally{l.f()}return r}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return o.hasRepeatedPoints(t)?new Jt(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,r=Math.trunc(e/2),l=0;l<=r;l++){var g=t[l];t[l]=t[e-l],t[e-l]=g}}},{key:"removeNull",value:function(t){for(var e=0,r=0;r<t.length;r++)t[r]!==null&&e++;var l=new Array(e).fill(null);if(e===0)return l;for(var g=0,v=0;v<t.length;v++)t[v]!==null&&(l[g++]=t[v]);return l}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),r=0;r<t.length;r++)e[r]=t[r].copy();return e}if(arguments.length===5)for(var l=arguments[0],g=arguments[1],v=arguments[2],b=arguments[3],R=arguments[4],z=0;z<R;z++)v[b+z]=l[g+z].copy()}},{key:"isEqualReversed",value:function(t,e){for(var r=0;r<t.length;r++){var l=t[r],g=e[t.length-r-1];if(l.compareTo(g)!==0)return!1}return!0}},{key:"envelope",value:function(t){for(var e=new Ne,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(o.coordArrayType)}},{key:"dimension",value:function(t){if(t===null||t.length===0)return 3;var e,r=0,l=S(t);try{for(l.s();!(e=l.n()).done;){var g=e.value;r=Math.max(r,Or.dimension(g))}}catch(v){l.e(v)}finally{l.f()}return r}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,l=t[e].compareTo(t[r]);if(l!==0)return l}return 1}},{key:"compare",value:function(t,e){for(var r=0;r<t.length&&r<e.length;){var l=t[r].compareTo(e[r]);if(l!==0)return l;r++}return r<e.length?-1:r<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,r=0;r<t.length;r++)(e===null||e.compareTo(t[r])>0)&&(e=t[r]);return e}},{key:"extract",value:function(t,e,r){e=Qi.clamp(e,0,t.length);var l=(r=Qi.clamp(r,-1,t.length))-e+1;r<0&&(l=0),e>=t.length&&(l=0),r<e&&(l=0);var g=new Array(l).fill(null);if(l===0)return g;for(var v=0,b=e;b<=r;b++)g[v++]=t[b];return g}}])}(),Rt=function(){return C(function o(){p(this,o)},[{key:"compare",value:function(o,t){var e=o,r=t;return $.compare(e,r)}},{key:"interfaces_",get:function(){return[fe]}}])}(),Ut=function(){return C(function o(){p(this,o)},[{key:"compare",value:function(o,t){var e=o,r=t;if(e.length<r.length)return-1;if(e.length>r.length)return 1;if(e.length===0)return 0;var l=$.compare(e,r);return $.isEqualReversed(e,r)?0:l}},{key:"OLDcompare",value:function(o,t){var e=o,r=t;if(e.length<r.length)return-1;if(e.length>r.length)return 1;if(e.length===0)return 0;for(var l=$.increasingDirection(e),g=$.increasingDirection(r),v=l>0?0:e.length-1,b=g>0?0:e.length-1,R=0;R<e.length;R++){var z=e[v].compareTo(r[b]);if(z!==0)return z;v+=l,b+=g}return 0}},{key:"interfaces_",get:function(){return[fe]}}])}();$.ForwardComparator=Rt,$.BidirectionalComparator=Ut,$.coordArrayType=new Array(0).fill(null);var Ae=function(){return C(function o(t){p(this,o),this.str=t},[{key:"append",value:function(o){this.str+=o}},{key:"setCharAt",value:function(o,t){this.str=this.str.substr(0,o)+t+this.str.substr(o+1)}},{key:"toString",value:function(){return this.str}}])}(),Xe=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():vt.NaN}},{key:"setOrdinate",value:function(t,e,r){switch(e){case ke.X:this._coordinates[t].x=r;break;case ke.Y:this._coordinates[t].y=r;break;default:this._coordinates[t].setOrdinate(e,r)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():vt.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case ke.X:return this._coordinates[t].x;case ke.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}if(arguments.length===2){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return Or.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++){var r=this.createCoordinate();r.setCoordinate(this._coordinates[e]),t[e]=r}return new o(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new Ae(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ke,Dt]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];o.constructor_.call(this,t,$.dimension(t),$.measures(t))}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var r=0;r<e;r++)this._coordinates[r]=new at}else if(he(arguments[0],ke)){var l=arguments[0];if(l===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=l.getDimension(),this._measures=l.getMeasures(),this._coordinates=new Array(l.size()).fill(null);for(var g=0;g<this._coordinates.length;g++)this._coordinates[g]=l.getCoordinateCopy(g)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var v=arguments[0],b=arguments[1];o.constructor_.call(this,v,b,$.measures(v))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var R=arguments[0],z=arguments[1];this._coordinates=new Array(R).fill(null),this._dimension=z;for(var et=0;et<R;et++)this._coordinates[et]=Or.create(z)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var lt=arguments[0],kt=arguments[1],Ot=arguments[2];this._dimension=kt,this._measures=Ot,this._coordinates=lt===null?new Array(0).fill(null):lt}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Yt=arguments[0],ne=arguments[1],Ce=arguments[2];this._coordinates=new Array(Yt).fill(null),this._dimension=ne,this._measures=Ce;for(var we=0;we<Yt;we++)this._coordinates[we]=this.createCoordinate()}}}}])}(),Ke=function(){function o(){p(this,o)}return C(o,[{key:"readResolve",value:function(){return o.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Xe(arguments[0]);if(he(arguments[0],ke))return new Xe(arguments[0])}else{if(arguments.length===2){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Xe(arguments[0],t)}if(arguments.length===3){var e=arguments[2],r=arguments[1]-e;return e>1&&(e=1),r>3&&(r=3),r<2&&(r=2),new Xe(arguments[0],r+e,e)}}}},{key:"interfaces_",get:function(){return[Fi,Dt]}}],[{key:"instance",value:function(){return o.instanceObject}}])}();Ke.instanceObject=new Ke;var an=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),r=0;r<e.length;r++)e[r]=this._geometries[r].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Xt){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&V(t,"equalsExact",this,1).call(this,e,r)}return V(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Xt.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new ee,r=0;r<this._geometries.length;r++)for(var l=this._geometries[r].getBoundary(),g=0;g<l.getNumGeometries();g++)e.add(l.getGeometryN(g));var v=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(v))}},{key:"getGeometryType",value:function(){return Xt.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[qt]}}],[{key:"constructor_",value:function(){var e=arguments[0],r=arguments[1];en.constructor_.call(this,e,r)}}])}(en),Dn=function(){return C(function o(){p(this,o)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),Gi=function(o){function t(){var e;return p(this,t),(e=m(this,t)).map=new Map,e}return G(t,o),C(t,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,r){return this.map.set(e,r),r}},{key:"values",value:function(){for(var e=new ee,r=this.map.values(),l=r.next();!l.done;)e.add(l.value),l=r.next();return e}},{key:"entrySet",value:function(){var e=new Oi;return this.map.entries().forEach(function(r){return e.add(r)}),e}},{key:"size",value:function(){return this.map.size()}}])}(Dn),Ie=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"equals",value:function(t){if(!(t instanceof o))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}},{key:"compareTo",value:function(t){var e=t,r=this.getMaximumSignificantDigits(),l=e.getMaximumSignificantDigits();return jn.compare(r,l)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===o.FLOATING||this._modelType===o.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===o.FLOATING?t="Floating":this._modelType===o.FLOATING_SINGLE?t="Floating-Single":this._modelType===o.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var t=arguments[0];return vt.isNaN(t)||this._modelType===o.FLOATING_SINGLE?t:this._modelType===o.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof at){var e=arguments[0];if(this._modelType===o.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===o.FLOATING?t=16:this._modelType===o.FLOATING_SINGLE?t=6:this._modelType===o.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[Dt,It]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=o.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof xi){var t=arguments[0];this._modelType=t,t===o.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this._modelType=o.FIXED,this.setScale(e)}else if(arguments[0]instanceof o){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}])}(),xi=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"readResolve",value:function(){return o.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[Dt]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,o.nameToTypeMap.put(t,this)}}])}();xi.nameToTypeMap=new Gi,Ie.Type=xi,Ie.FIXED=new xi("FIXED"),Ie.FLOATING=new xi("FLOATING"),Ie.FLOATING_SINGLE=new xi("FLOATING SINGLE"),Ie.maximumPreciseValue=9007199254740992;var dr=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),r=0;r<e.length;r++)e[r]=this._geometries[r].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Xt){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&V(t,"equalsExact",this,1).call(this,e,r)}return V(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Mt.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Xt.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new Rn}},{key:"getGeometryType",value:function(){return Xt.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[ao]}}],[{key:"constructor_",value:function(){var e=arguments[0],r=arguments[1];en.constructor_.call(this,e,r)}}])}(en),bi=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new yt("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new at(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new at(t.getMinX(),t.getMinY()),new at(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new at(t.getMinX(),t.getMinY()),new at(t.getMinX(),t.getMaxY()),new at(t.getMaxX(),t.getMaxY()),new at(t.getMaxX(),t.getMinY()),new at(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(he(arguments[0],ke))return new er(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new dr(null,this):arguments.length===1?new dr(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var e=null,r=!1,l=!1,g=t.iterator();g.hasNext();){var v=g.next(),b=v.getTypeCode();e===null&&(e=b),b!==e&&(r=!0),v instanceof en&&(l=!0)}if(e===null)return this.createGeometryCollection();if(r||l)return this.createGeometryCollection(o.toGeometryArray(t));var R=t.iterator().next();if(t.size()>1){if(R instanceof ri)return this.createMultiPolygon(o.toPolygonArray(t));if(R instanceof er)return this.createMultiLineString(o.toLineStringArray(t));if(R instanceof fr)return this.createMultiPoint(o.toPointArray(t));Ht.shouldNeverReachHere("Unhandled geometry type: "+R.getGeometryType())}return R}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof at){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(he(arguments[0],ke))return new fr(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(he(arguments[0],ke)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof On){var r=arguments[0];return this.createPolygon(r,null)}}else if(arguments.length===2)return new ri(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new en(null,this):arguments.length===1?new en(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(he(arguments[0],ke))return new On(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new an(null,this):arguments.length===1?new an(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Mn(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Mn(arguments[0],this);if(he(arguments[0],ke)){var t=arguments[0];if(t===null)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),r=0;r<t.size();r++){var l=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());zi.copy(t,r,l,0,1),e[r]=this.createPoint(l)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[Dt]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)o.constructor_.call(this,new Ie,0);else if(arguments.length===1){if(he(arguments[0],Fi)){var t=arguments[0];o.constructor_.call(this,new Ie,0,t)}else if(arguments[0]instanceof Ie){var e=arguments[0];o.constructor_.call(this,e,0,o.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var r=arguments[0],l=arguments[1];o.constructor_.call(this,r,l,o.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var g=arguments[0],v=arguments[1],b=arguments[2];this._precisionModel=g,this._coordinateSequenceFactory=b,this._SRID=v}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Ke.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}])}(),be="XY",Ze="XYZ",uo="XYM",gr="XYZM",nr={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},lo="EMPTY",ce=1,De=2,si=3,$r=4,ln=5,Cs=6;for(var ho in nr)nr[ho].toUpperCase();var pr=function(){return C(function o(t){p(this,o),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(o){return o>="a"&&o<="z"||o>="A"&&o<="Z"}},{key:"isNumeric_",value:function(o,t){return o>="0"&&o<="9"||o=="."&&!(t!==void 0&&t)}},{key:"isWhiteSpace_",value:function(o){return o==" "||o=="	"||o=="\r"||o==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var o,t=this.nextChar_(),e=this.index_,r=t;if(t=="(")o=De;else if(t==",")o=ln;else if(t==")")o=si;else if(this.isNumeric_(t)||t=="-")o=$r,r=this.readNumber_();else if(this.isAlpha_(t))o=ce,r=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t!=="")throw new Error("Unexpected character: "+t);o=Cs}return{position:e,value:r,type:o}}},{key:"readNumber_",value:function(){var o,t=this.index_,e=!1,r=!1;do o=="."?e=!0:o!="e"&&o!="E"||(r=!0),o=this.nextChar_();while(this.isNumeric_(o,e)||!r&&(o=="e"||o=="E")||r&&(o=="-"||o=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var o,t=this.index_;do o=this.nextChar_();while(this.isAlpha_(o));return this.wkt.substring(t,this.index_--).toUpperCase()}}])}(),Qe=function(){return C(function o(t,e){p(this,o),this.lexer_=t,this.token_,this.layout_=be,this.factory=e},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(o){return this.token_.type==o}},{key:"match",value:function(o){var t=this.isTokenType(o);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var o=be,t=this.token_;if(this.isTokenType(ce)){var e=t.value;e==="Z"?o=Ze:e==="M"?o=uo:e==="ZM"&&(o=gr),o!==be&&this.consume_()}return o}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(De)){var o=[];do o.push(this.parseGeometry_());while(this.match(ln));if(this.match(si))return o}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(De)){var o=this.parsePoint_();if(this.match(si))return o}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(De)){var o=this.parsePointList_();if(this.match(si))return o}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(De)){var o=this.parseLineStringTextList_();if(this.match(si))return o}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var o;if(this.match(De)){if(o=this.token_.type==De?this.parsePointTextList_():this.parsePointList_(),this.match(si))return o}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(De)){var o=this.parseLineStringTextList_();if(this.match(si))return o}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(De)){var o=this.parsePolygonTextList_();if(this.match(si))return o}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var o=[],t=this.layout_.length,e=0;e<t;++e){var r=this.token_;if(!this.match($r))break;o.push(r.value)}if(o.length==t)return o;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var o=[this.parsePoint_()];this.match(ln);)o.push(this.parsePoint_());return o}},{key:"parsePointTextList_",value:function(){for(var o=[this.parsePointText_()];this.match(ln);)o.push(this.parsePointText_());return o}},{key:"parseLineStringTextList_",value:function(){for(var o=[this.parseLineStringText_()];this.match(ln);)o.push(this.parseLineStringText_());return o}},{key:"parsePolygonTextList_",value:function(){for(var o=[this.parsePolygonText_()];this.match(ln);)o.push(this.parsePolygonText_());return o}},{key:"isEmptyGeometry_",value:function(){var o=this.isTokenType(ce)&&this.token_.value==lo;return o&&this.consume_(),o}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var o=this.factory,t=function(ne){return x(at,tt(ne))},e=function(ne){var Ce=ne.map(function(we){return o.createLinearRing(we.map(t))});return Ce.length>1?o.createPolygon(Ce[0],Ce.slice(1)):o.createPolygon(Ce[0])},r=this.token_;if(this.match(ce)){var l=r.value;if(this.layout_=this.parseGeometryLayout_(),l=="GEOMETRYCOLLECTION"){var g=this.parseGeometryCollectionText_();return o.createGeometryCollection(g)}switch(l){case"POINT":var v=this.parsePointText_();return v?o.createPoint(x(at,tt(v))):o.createPoint();case"LINESTRING":var b=this.parseLineStringText_().map(t);return o.createLineString(b);case"LINEARRING":var R=this.parseLineStringText_().map(t);return o.createLinearRing(R);case"POLYGON":var z=this.parsePolygonText_();return z&&z.length!==0?e(z):o.createPolygon();case"MULTIPOINT":var et=this.parseMultiPointText_();if(!et||et.length===0)return o.createMultiPoint();var lt=et.map(t).map(function(ne){return o.createPoint(ne)});return o.createMultiPoint(lt);case"MULTILINESTRING":var kt=this.parseMultiLineStringText_().map(function(ne){return o.createLineString(ne.map(t))});return o.createMultiLineString(kt);case"MULTIPOLYGON":var Ot=this.parseMultiPolygonText_();if(!Ot||Ot.length===0)return o.createMultiPolygon();var Yt=Ot.map(e);return o.createMultiPolygon(Yt);default:throw new Error("Invalid geometry type: "+l)}}throw new Error(this.formatErrorMessage_())}}])}();function ir(o){if(o.isEmpty())return"";var t=o.getCoordinate(),e=[t.x,t.y];return t.z===void 0||Number.isNaN(t.z)||e.push(t.z),t.m===void 0||Number.isNaN(t.m)||e.push(t.m),e.join(" ")}function qi(o){for(var t=o.getCoordinates().map(function(g){var v=[g.x,g.y];return g.z===void 0||Number.isNaN(g.z)||v.push(g.z),g.m===void 0||Number.isNaN(g.m)||v.push(g.m),v}),e=[],r=0,l=t.length;r<l;++r)e.push(t[r].join(" "));return e.join(", ")}function Dr(o){var t=[];t.push("("+qi(o.getExteriorRing())+")");for(var e=0,r=o.getNumInteriorRing();e<r;++e)t.push("("+qi(o.getInteriorRingN(e))+")");return t.join(", ")}var Oo={Point:ir,LineString:qi,LinearRing:qi,Polygon:Dr,MultiPoint:function(o){for(var t=[],e=0,r=o.getNumGeometries();e<r;++e)t.push("("+ir(o.getGeometryN(e))+")");return t.join(", ")},MultiLineString:function(o){for(var t=[],e=0,r=o.getNumGeometries();e<r;++e)t.push("("+qi(o.getGeometryN(e))+")");return t.join(", ")},MultiPolygon:function(o){for(var t=[],e=0,r=o.getNumGeometries();e<r;++e)t.push("("+Dr(o.getGeometryN(e))+")");return t.join(", ")},GeometryCollection:function(o){for(var t=[],e=0,r=o.getNumGeometries();e<r;++e)t.push(Fr(o.getGeometryN(e)));return t.join(", ")}};function Fr(o){var t=o.getGeometryType(),e=Oo[t];t=t.toUpperCase();var r=function(l){var g="";if(l.isEmpty())return g;var v=l.getCoordinate();return v.z===void 0||Number.isNaN(v.z)||(g+="Z"),v.m===void 0||Number.isNaN(v.m)||(g+="M"),g}(o);return r.length>0&&(t+=" "+r),o.isEmpty()?t+" "+lo:t+" ("+e(o)+")"}var Do=function(){return C(function o(t){p(this,o),this.geometryFactory=t||new bi,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(o){var t=new pr(o);return new Qe(t,this.geometryFactory).parse()}},{key:"write",value:function(o){return Fr(o)}}])}(),zr=function(){return C(function o(t){p(this,o),this.parser=new Do(t)},[{key:"write",value:function(o){return this.parser.write(o)}}],[{key:"toLineString",value:function(o,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+o.x+" "+o.y+", "+t.x+" "+t.y+" )"}}])}(),Ge=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new Ae;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,r,l){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=l,this._result=this.computeIntersect(t,e,r,l)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==o.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,e){return o.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===o.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return zr.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+zr.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new at,this._intPt[1]=new at,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,r){var l=Math.abs(r.x-e.x),g=Math.abs(r.y-e.y),v=-1;if(t.equals(e))v=0;else if(t.equals(r))v=l>g?l:g;else{var b=Math.abs(t.x-e.x),R=Math.abs(t.y-e.y);(v=l>g?b:R)!==0||t.equals(e)||(v=Math.max(b,R))}return Ht.isTrue(!(v===0&&!t.equals(e)),"Bad distance calculation"),v}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,r){var l=t.x-e.x,g=t.y-e.y,v=Math.sqrt(l*l+g*g);return Ht.isTrue(!(v===0&&!t.equals(e)),"Invalid distance calculation"),v}}])}();Ge.DONT_INTERSECT=0,Ge.DO_INTERSECT=1,Ge.COLLINEAR=2,Ge.NO_INTERSECTION=0,Ge.POINT_INTERSECTION=1,Ge.COLLINEAR_INTERSECTION=2;var Ui=function(o){function t(){return p(this,t),m(this,t)}return G(t,o),C(t,[{key:"isInSegmentEnvelopes",value:function(e){var r=new Ne(this._inputLines[0][0],this._inputLines[0][1]),l=new Ne(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(e)&&l.contains(e)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return V(t,"computeIntersection",this,1).apply(this,arguments);var e=arguments[0],r=arguments[1],l=arguments[2];if(this._isProper=!1,Ne.intersects(r,l,e)&&ie.index(r,l,e)===0&&ie.index(l,r,e)===0)return this._isProper=!0,(e.equals(r)||e.equals(l))&&(this._isProper=!1),this._result=Ge.POINT_INTERSECTION,null;this._result=Ge.NO_INTERSECTION}},{key:"intersection",value:function(e,r,l,g){var v=this.intersectionSafe(e,r,l,g);return this.isInSegmentEnvelopes(v)||(v=new at(t.nearestEndpoint(e,r,l,g))),this._precisionModel!==null&&this._precisionModel.makePrecise(v),v}},{key:"checkDD",value:function(e,r,l,g,v){var b=Sr.intersection(e,r,l,g),R=this.isInSegmentEnvelopes(b);on.out.println("DD in env = "+R+"  --------------------- "+b),v.distance(b)>1e-4&&on.out.println("Distance = "+v.distance(b))}},{key:"intersectionSafe",value:function(e,r,l,g){var v=$i.intersection(e,r,l,g);return v===null&&(v=t.nearestEndpoint(e,r,l,g)),v}},{key:"computeCollinearIntersection",value:function(e,r,l,g){var v=Ne.intersects(e,r,l),b=Ne.intersects(e,r,g),R=Ne.intersects(l,g,e),z=Ne.intersects(l,g,r);return v&&b?(this._intPt[0]=l,this._intPt[1]=g,Ge.COLLINEAR_INTERSECTION):R&&z?(this._intPt[0]=e,this._intPt[1]=r,Ge.COLLINEAR_INTERSECTION):v&&R?(this._intPt[0]=l,this._intPt[1]=e,!l.equals(e)||b||z?Ge.COLLINEAR_INTERSECTION:Ge.POINT_INTERSECTION):v&&z?(this._intPt[0]=l,this._intPt[1]=r,!l.equals(r)||b||R?Ge.COLLINEAR_INTERSECTION:Ge.POINT_INTERSECTION):b&&R?(this._intPt[0]=g,this._intPt[1]=e,!g.equals(e)||v||z?Ge.COLLINEAR_INTERSECTION:Ge.POINT_INTERSECTION):b&&z?(this._intPt[0]=g,this._intPt[1]=r,!g.equals(r)||v||R?Ge.COLLINEAR_INTERSECTION:Ge.POINT_INTERSECTION):Ge.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,r,l,g){if(this._isProper=!1,!Ne.intersects(e,r,l,g))return Ge.NO_INTERSECTION;var v=ie.index(e,r,l),b=ie.index(e,r,g);if(v>0&&b>0||v<0&&b<0)return Ge.NO_INTERSECTION;var R=ie.index(l,g,e),z=ie.index(l,g,r);return R>0&&z>0||R<0&&z<0?Ge.NO_INTERSECTION:v===0&&b===0&&R===0&&z===0?this.computeCollinearIntersection(e,r,l,g):(v===0||b===0||R===0||z===0?(this._isProper=!1,e.equals2D(l)||e.equals2D(g)?this._intPt[0]=e:r.equals2D(l)||r.equals2D(g)?this._intPt[0]=r:v===0?this._intPt[0]=new at(l):b===0?this._intPt[0]=new at(g):R===0?this._intPt[0]=new at(e):z===0&&(this._intPt[0]=new at(r))):(this._isProper=!0,this._intPt[0]=this.intersection(e,r,l,g)),Ge.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,r,l,g){var v=e,b=mn.pointToSegment(e,l,g),R=mn.pointToSegment(r,l,g);return R<b&&(b=R,v=r),(R=mn.pointToSegment(l,e,r))<b&&(b=R,v=l),(R=mn.pointToSegment(g,e,r))<b&&(b=R,v=g),v}}])}(Ge),Fo=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,l=e.x;return r>l&&(r=e.x,l=t.x),this._p.x>=r&&this._p.x<=l&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var g=ie.index(t,e,this._p);if(g===ie.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(g=-g),g===ie.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==Y.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?Y.BOUNDARY:this._crossingCount%2==1?Y.INTERIOR:Y.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof at&&he(arguments[1],ke)){for(var t=arguments[1],e=new o(arguments[0]),r=new at,l=new at,g=1;g<t.size();g++)if(t.getCoordinate(g,r),t.getCoordinate(g-1,l),e.countSegment(r,l),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof at&&arguments[1]instanceof Array){for(var v=arguments[1],b=new o(arguments[0]),R=1;R<v.length;R++){var z=v[R],et=v[R-1];if(b.countSegment(z,et),b.isOnSegment())return b.getLocation()}return b.getLocation()}}}])}(),Gr=function(){function o(){p(this,o)}return C(o,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof at&&he(arguments[1],ke)){for(var t=arguments[0],e=arguments[1],r=new Ui,l=new at,g=new at,v=e.size(),b=1;b<v;b++)if(e.getCoordinate(b-1,l),e.getCoordinate(b,g),r.computeIntersection(t,l,g),r.hasIntersection())return!0;return!1}if(arguments[0]instanceof at&&arguments[1]instanceof Array){for(var R=arguments[0],z=arguments[1],et=new Ui,lt=1;lt<z.length;lt++){var kt=z[lt-1],Ot=z[lt];if(et.computeIntersection(R,kt,Ot),et.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return Fo.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,e){return o.locateInRing(t,e)!==Y.EXTERIOR}}])}(),Fn=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Y.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Y.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[At.ON]=this.location[At.ON],e[At.LEFT]=Y.NONE,e[At.RIGHT]=Y.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===Y.NONE&&r<t.location.length&&(this.location[r]=t.location[r])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[At.LEFT];this.location[At.LEFT]=this.location[At.RIGHT],this.location[At.RIGHT]=t}},{key:"toString",value:function(){var t=new Di;return this.location.length>1&&t.append(Y.toLocationSymbol(this.location[At.LEFT])),t.append(Y.toLocationSymbol(this.location[At.ON])),this.location.length>1&&t.append(Y.toLocationSymbol(this.location[At.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,r){this.location[At.ON]=t,this.location[At.LEFT]=e,this.location[At.RIGHT]=r}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:Y.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Y.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(At.ON,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.location[e]=r}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(Y.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[At.ON]=e}else if(arguments[0]instanceof o){var r=arguments[0];if(this.init(r.location.length),r!==null)for(var l=0;l<this.location.length;l++)this.location[l]=r.location[l]}}else if(arguments.length===3){var g=arguments[0],v=arguments[1],b=arguments[2];this.init(3),this.location[At.ON]=g,this.location[At.LEFT]=v,this.location[At.RIGHT]=b}}}])}(),Pn=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.elt[e].setAllLocationsIfNull(r)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new Fn(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(At.ON)}if(arguments.length===2){var e=arguments[0],r=arguments[1];return this.elt[e].get(r)}}},{key:"toString",value:function(){var t=new Di;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(At.ON,e)}else if(arguments.length===3){var r=arguments[0],l=arguments[1],g=arguments[2];this.elt[r].setLocation(l,g)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new Fn(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Fn(t),this.elt[1]=new Fn(t)}else if(arguments[0]instanceof o){var e=arguments[0];this.elt[0]=new Fn(e.elt[0]),this.elt[1]=new Fn(e.elt[1])}}else if(arguments.length===2){var r=arguments[0],l=arguments[1];this.elt[0]=new Fn(Y.NONE),this.elt[1]=new Fn(Y.NONE),this.elt[r].setLocation(l)}else if(arguments.length===3){var g=arguments[0],v=arguments[1],b=arguments[2];this.elt[0]=new Fn(g,v,b),this.elt[1]=new Fn(g,v,b)}else if(arguments.length===4){var R=arguments[0],z=arguments[1],et=arguments[2],lt=arguments[3];this.elt[0]=new Fn(Y.NONE,Y.NONE,Y.NONE),this.elt[1]=new Fn(Y.NONE,Y.NONE,Y.NONE),this.elt[R].setLocations(z,et,lt)}}},{key:"toLineLabel",value:function(t){for(var e=new o(Y.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e}}])}(),co=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var o=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)o[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(o),this._isHole=ie.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(o){this._startDe=o;var t=o,e=!0;do{if(t===null)throw new Nn("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new Nn("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var r=t.getLabel();Ht.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),e),e=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(o){return this._pts.get(o)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var o=this._startDe;do{var t=o.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),o=this.getNext(o)}while(o!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(o,t,e){var r=o.getCoordinates();if(t){var l=1;e&&(l=0);for(var g=l;g<r.length;g++)this._pts.add(r[g])}else{var v=r.length-2;e&&(v=r.length-1);for(var b=v;b>=0;b--)this._pts.add(r[b])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var o=this._startDe;do o.getEdge().setInResult(!0),o=o.getNext();while(o!==this._startDe)}},{key:"containsPoint",value:function(o){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(o)||!Gr.isInRing(o,t.getCoordinates()))return!1;for(var e=this._holes.iterator();e.hasNext();)if(e.next().containsPoint(o))return!1;return!0}},{key:"addHole",value:function(o){this._holes.add(o)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var o=arguments[0];this.mergeLabel(o,0),this.mergeLabel(o,1)}else if(arguments.length===2){var t=arguments[1],e=arguments[0].getLocation(t,At.RIGHT);if(e===Y.NONE)return null;if(this._label.getLocation(t)===Y.NONE)return this._label.setLocation(t,e),null}}},{key:"setShell",value:function(o){this._shell=o,o!==null&&o.addHole(this)}},{key:"toPolygon",value:function(o){for(var t=new Array(this._holes.size()).fill(null),e=0;e<this._holes.size();e++)t[e]=this._holes.get(e).getLinearRing();return o.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new ee,this._pts=new ee,this._label=new Pn(Y.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ee,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var o=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(o),this.computeRing()}}}}])}(),me=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"setEdgeRing",value:function(e,r){e.setMinEdgeRing(r)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){var e=arguments[0],r=arguments[1];co.constructor_.call(this,e,r)}}])}(co),Ci=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"buildMinimalRings",value:function(){var e=new ee,r=this._startDe;do{if(r.getMinEdgeRing()===null){var l=new me(r,this._geometryFactory);e.add(l)}r=r.getNext()}while(r!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,r){e.setEdgeRing(r)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext();while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){var e=arguments[0],r=arguments[1];co.constructor_.call(this,e,r)}}])}(co),qe=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(o){this._isVisited=o}},{key:"setInResult",value:function(o){this._isInResult=o}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(o){this._label=o}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(o){this._isCovered=o,this._isCoveredSet=!0}},{key:"updateIM",value:function(o){Ht.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(o)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var o=arguments[0];this._label=o}}}}])}(),Qr=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,r){var l=Y.NONE;if(l=this._label.getLocation(r),!e.isNull(r)){var g=e.getLocation(r);l!==Y.BOUNDARY&&(l=g)}return l}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return V(t,"setLabel",this,1).apply(this,arguments);var e=arguments[0],r=arguments[1];this._label===null?this._label=new Pn(e,r):this._label.setLocation(e,r)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof t){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof Pn)for(var r=arguments[0],l=0;l<2;l++){var g=this.computeMergedLocation(r,l);this._label.getLocation(l)===Y.NONE&&this._label.setLocation(l,g)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(this._label===null)return null;var r=Y.NONE;this._label!==null&&(r=this._label.getLocation(e));var l=null;switch(r){case Y.BOUNDARY:l=Y.INTERIOR;break;case Y.INTERIOR:default:l=Y.BOUNDARY}this._label.setLocation(e,l)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var e=arguments[0],r=arguments[1];this._coord=e,this._edges=r,this._label=new Pn(0,Y.NONE)}}])}(qe),zo=function(o){function t(){return p(this,t),m(this,t,arguments)}return G(t,o),C(t)}(Dn);function fo(o){return o==null?0:o.color}function Se(o){return o==null?null:o.parent}function _n(o,t){o!==null&&(o.color=t)}function Mi(o){return o==null?null:o.left}function qr(o){return o==null?null:o.right}var Je=function(o){function t(){var e;return p(this,t),(e=m(this,t)).root_=null,e.size_=0,e}return G(t,o),C(t,[{key:"get",value:function(e){for(var r=this.root_;r!==null;){var l=e.compareTo(r.key);if(l<0)r=r.left;else{if(!(l>0))return r.value;r=r.right}}return null}},{key:"put",value:function(e,r){if(this.root_===null)return this.root_={key:e,value:r,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var l,g,v=this.root_;do if(l=v,(g=e.compareTo(v.key))<0)v=v.left;else{if(!(g>0)){var b=v.value;return v.value=r,b}v=v.right}while(v!==null);var R={key:e,left:null,right:null,value:r,parent:l,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return g<0?l.left=R:l.right=R,this.fixAfterInsertion(R),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var r;for(e.color=1;e!=null&&e!==this.root_&&e.parent.color===1;)Se(e)===Mi(Se(Se(e)))?fo(r=qr(Se(Se(e))))===1?(_n(Se(e),0),_n(r,0),_n(Se(Se(e)),1),e=Se(Se(e))):(e===qr(Se(e))&&(e=Se(e),this.rotateLeft(e)),_n(Se(e),0),_n(Se(Se(e)),1),this.rotateRight(Se(Se(e)))):fo(r=Mi(Se(Se(e))))===1?(_n(Se(e),0),_n(r,0),_n(Se(Se(e)),1),e=Se(Se(e))):(e===Mi(Se(e))&&(e=Se(e),this.rotateRight(e)),_n(Se(e),0),_n(Se(Se(e)),1),this.rotateLeft(Se(Se(e))));this.root_.color=0}},{key:"values",value:function(){var e=new ee,r=this.getFirstEntry();if(r!==null)for(e.add(r.value);(r=t.successor(r))!==null;)e.add(r.value);return e}},{key:"entrySet",value:function(){var e=new Oi,r=this.getFirstEntry();if(r!==null)for(e.add(r);(r=t.successor(r))!==null;)e.add(r);return e}},{key:"rotateLeft",value:function(e){if(e!=null){var r=e.right;e.right=r.left,r.left!=null&&(r.left.parent=e),r.parent=e.parent,e.parent==null?this.root_=r:e.parent.left===e?e.parent.left=r:e.parent.right=r,r.left=e,e.parent=r}}},{key:"rotateRight",value:function(e){if(e!=null){var r=e.left;e.left=r.right,r.right!=null&&(r.right.parent=e),r.parent=e.parent,e.parent==null?this.root_=r:e.parent.right===e?e.parent.right=r:e.parent.left=r,r.right=e,e.parent=r}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var r=this.root_;r!==null;){var l=e.compareTo(r.key);if(l<0)r=r.left;else{if(!(l>0))return!0;r=r.right}}return!1}}],[{key:"successor",value:function(e){var r;if(e===null)return null;if(e.right!==null){for(r=e.right;r.left!==null;)r=r.left;return r}r=e.parent;for(var l=e;r!==null&&l===r.right;)l=r,r=r.parent;return r}}])}(zo),rr=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"find",value:function(o){return this.nodeMap.get(o)}},{key:"addNode",value:function(){if(arguments[0]instanceof at){var o=arguments[0],t=this.nodeMap.get(o);return t===null&&(t=this.nodeFact.createNode(o),this.nodeMap.put(o,t)),t}if(arguments[0]instanceof Qr){var e=arguments[0],r=this.nodeMap.get(e.getCoordinate());return r===null?(this.nodeMap.put(e.getCoordinate(),e),e):(r.mergeLabel(e),r)}}},{key:"print",value:function(o){for(var t=this.iterator();t.hasNext();)t.next().print(o)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(o){for(var t=new ee,e=this.iterator();e.hasNext();){var r=e.next();r.getLabel().getLocation(o)===Y.BOUNDARY&&t.add(r)}return t}},{key:"add",value:function(o){var t=o.getCoordinate();this.addNode(t).add(o)}}],[{key:"constructor_",value:function(){this.nodeMap=new Je,this.nodeFact=null;var o=arguments[0];this.nodeFact=o}}])}(),yn=function(){function o(){p(this,o)}return C(o,null,[{key:"isNorthern",value:function(t){return t===o.NE||t===o.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&(t-e+4)%4===2}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if((t-e+4)%4===2)return-1;var r=t<e?t:e;return r===0&&(t>e?t:e)===3?3:r}},{key:"isInHalfPlane",value:function(t,e){return e===o.SE?t===o.SE||t===o.SW:t===e||t===e+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new yt("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?o.NE:o.SE:e>=0?o.NW:o.SW}if(arguments[0]instanceof at&&arguments[1]instanceof at){var r=arguments[0],l=arguments[1];if(l.x===r.x&&l.y===r.y)throw new yt("Cannot compute the quadrant for two identical points "+r);return l.x>=r.x?l.y>=r.y?o.NE:o.SE:l.y>=r.y?o.NW:o.SW}}}])}();yn.NE=0,yn.NW=1,yn.SW=2,yn.SE=3;var Go=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ie.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),l=r.lastIndexOf("."),g=r.substring(l+1);t.print("  "+g+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=yn.quadrant(this._dx,this._dy),Ht.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[It]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var e=arguments[0],r=arguments[1],l=arguments[2];o.constructor_.call(this,e,r,l,null)}else if(arguments.length===4){var g=arguments[0],v=arguments[1],b=arguments[2],R=arguments[3];o.constructor_.call(this,g),this.init(v,b),this._label=R}}}])}(),qo=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new Pn(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,r){if(this._depth[e]!==-999&&this._depth[e]!==r)throw new Nn("assigned depths do not match",this.getCoordinate());this._depth[e]=r}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,r=0;r<2;r++)this._label.isArea(r)&&this._label.getLocation(r,At.LEFT)===Y.INTERIOR&&this._label.getLocation(r,At.RIGHT)===Y.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){V(t,"print",this,1).call(this,e),e.print(" "+this._depth[At.LEFT]+"/"+this._depth[At.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,Y.EXTERIOR),l=!this._label.isArea(1)||this._label.allPositionsEqual(1,Y.EXTERIOR);return e&&r&&l}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,r){var l=this.getEdge().getDepthDelta();this._isForward||(l=-l);var g=1;e===At.LEFT&&(g=-1);var v=At.opposite(e),b=r+l*g;this.setDepth(e,r),this.setDepth(v,b)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],r=arguments[1];if(Go.constructor_.call(this,e),this._isForward=r,r)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var l=e.getNumPoints()-1;this.init(e.getCoordinate(l),e.getCoordinate(l-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,r){return e===Y.EXTERIOR&&r===Y.INTERIOR?1:e===Y.INTERIOR&&r===Y.EXTERIOR?-1:0}}])}(Go),Uo=function(){return C(function o(){p(this,o)},[{key:"createNode",value:function(o){return new Qr(o,null)}}])}(),go=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(o){o.println("Edges:");for(var t=0;t<this._edges.size();t++){o.println("edge "+t+":");var e=this._edges.get(t);e.print(o),e.eiList.print(o)}}},{key:"find",value:function(o){return this._nodes.find(o)}},{key:"addNode",value:function(){if(arguments[0]instanceof Qr){var o=arguments[0];return this._nodes.addNode(o)}if(arguments[0]instanceof at){var t=arguments[0];return this._nodes.addNode(t)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var o=this._nodes.iterator();o.hasNext();)o.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(o){on.out.println(o)}},{key:"isBoundaryNode",value:function(o,t){var e=this._nodes.find(t);if(e===null)return!1;var r=e.getLabel();return r!==null&&r.getLocation(o)===Y.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var o=this._nodes.iterator();o.hasNext();)o.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(o,t,e,r){return!!o.equals(e)&&ie.index(o,t,r)===ie.COLLINEAR&&yn.quadrant(o,t)===yn.quadrant(e,r)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(o){on.out.print(o)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(o,t){for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e),l=r.getCoordinates();if(this.matchInSameDirection(o,t,l[0],l[1])||this.matchInSameDirection(o,t,l[l.length-1],l[l.length-2]))return r}return null}},{key:"insertEdge",value:function(o){this._edges.add(o)}},{key:"findEdgeEnd",value:function(o){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var e=t.next();if(e.getEdge()===o)return e}return null}},{key:"addEdges",value:function(o){for(var t=o.iterator();t.hasNext();){var e=t.next();this._edges.add(e);var r=new qo(e,!0),l=new qo(e,!1);r.setSym(l),l.setSym(r),this.add(r),this.add(l)}}},{key:"add",value:function(o){this._nodes.add(o),this._edgeEndList.add(o)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(o,t){for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e),l=r.getCoordinates();if(o.equals(l[0])&&t.equals(l[1]))return r}return null}}],[{key:"constructor_",value:function(){if(this._edges=new ee,this._nodes=null,this._edgeEndList=new ee,arguments.length===0)this._nodes=new rr(new Uo);else if(arguments.length===1){var o=arguments[0];this._nodes=new rr(o)}}},{key:"linkResultDirectedEdges",value:function(o){for(var t=o.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}])}(),Ms=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"sortShellsAndHoles",value:function(t,e,r){for(var l=t.iterator();l.hasNext();){var g=l.next();g.isHole()?r.add(g):e.add(g)}}},{key:"computePolygons",value:function(t){for(var e=new ee,r=t.iterator();r.hasNext();){var l=r.next().toPolygon(this._geometryFactory);e.add(l)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var r=e.iterator();r.hasNext();){var l=r.next();if(l.getShell()===null){var g=o.findEdgeRingContaining(l,t);if(g===null)throw new Nn("unable to assign hole to a shell",l.getCoordinate(0));l.setShell(g)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,r){for(var l=new ee,g=t.iterator();g.hasNext();){var v=g.next();if(v.getMaxNodeDegree()>2){v.linkDirectedEdgesForMinimalEdgeRings();var b=v.buildMinimalRings(),R=this.findShell(b);R!==null?(this.placePolygonHoles(R,b),e.add(R)):r.addAll(b)}else l.add(v)}return l}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new ee,r=t.iterator();r.hasNext();){var l=r.next();if(l.isInResult()&&l.getLabel().isArea()&&l.getEdgeRing()===null){var g=new Ci(l,this._geometryFactory);e.add(g),g.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var r=e.iterator();r.hasNext();){var l=r.next();l.isHole()&&l.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,r=null,l=t.iterator();l.hasNext();){var g=l.next();g.isHole()||(r=g,e++)}return Ht.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),r}},{key:"add",value:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],r=arguments[1];go.linkResultDirectedEdges(r);var l=this.buildMaximalEdgeRings(e),g=new ee,v=this.buildMinimalEdgeRings(l,this._shellList,g);this.sortShellsAndHoles(v,this._shellList,g),this.placeFreeHoles(this._shellList,g)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new ee;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var r=t.getLinearRing(),l=r.getEnvelopeInternal(),g=r.getCoordinateN(0),v=null,b=null,R=e.iterator();R.hasNext();){var z=R.next(),et=z.getLinearRing(),lt=et.getEnvelopeInternal();if(!lt.equals(l)&&lt.contains(l)){g=$.ptNotInList(r.getCoordinates(),et.getCoordinates());var kt=!1;Gr.isInRing(g,et.getCoordinates())&&(kt=!0),kt&&(v===null||b.contains(lt))&&(b=(v=z).getLinearRing().getEnvelopeInternal())}}return v}}])}(),Zo=function(){return C(function o(){p(this,o)},[{key:"getBounds",value:function(){}}])}(),le=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Zo,Dt]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var o=arguments[0],t=arguments[1];this._bounds=o,this._item=t}}])}(),po=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var o=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),o}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(o){for(var t=null,e=this._items.get(o);2*o<=this._size&&((t=2*o)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(e)<0);o=t)this._items.set(o,this._items.get(t));this._items.set(o,e)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(o){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,o);o.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,o)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new ee,this._items.add(null)}}])}(),ai=function(){return C(function o(){p(this,o)},[{key:"insert",value:function(o,t){}},{key:"remove",value:function(o,t){}},{key:"query",value:function(){}}])}(),hn=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(o){Ht.isTrue(this._bounds===null),this._childBoundables.add(o)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Zo,Dt]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new ee,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var o=arguments[0];this._level=o}}}}])}(),Ee={reverseOrder:function(){return{compare:function(o,t){return t.compareTo(o)}}},min:function(o){return Ee.sort(o),o.get(0)},sort:function(o,t){var e=o.toArray();t?sn.sort(e,t):sn.sort(e);for(var r=o.iterator(),l=0,g=e.length;l<g;l++)r.next(),r.set(e[l])},singletonList:function(o){var t=new ee;return t.add(o),t}},Vo=function(){function o(){p(this,o)}return C(o,null,[{key:"maxDistance",value:function(t,e,r,l,g,v,b,R){var z=o.distance(t,e,g,v);return z=Math.max(z,o.distance(t,e,b,R)),z=Math.max(z,o.distance(r,l,g,v)),z=Math.max(z,o.distance(r,l,b,R))}},{key:"distance",value:function(t,e,r,l){var g=r-t,v=l-e;return Math.sqrt(g*g+v*v)}},{key:"maximumDistance",value:function(t,e){var r=Math.min(t.getMinX(),e.getMinX()),l=Math.min(t.getMinY(),e.getMinY()),g=Math.max(t.getMaxX(),e.getMaxX()),v=Math.max(t.getMaxY(),e.getMaxY());return o.distance(r,l,g,v)}},{key:"minMaxDistance",value:function(t,e){var r=t.getMinX(),l=t.getMinY(),g=t.getMaxX(),v=t.getMaxY(),b=e.getMinX(),R=e.getMinY(),z=e.getMaxX(),et=e.getMaxY(),lt=o.maxDistance(r,l,r,v,b,R,b,et);return lt=Math.min(lt,o.maxDistance(r,l,r,v,b,R,z,R)),lt=Math.min(lt,o.maxDistance(r,l,r,v,z,et,b,et)),lt=Math.min(lt,o.maxDistance(r,l,r,v,z,et,z,R)),lt=Math.min(lt,o.maxDistance(r,l,g,l,b,R,b,et)),lt=Math.min(lt,o.maxDistance(r,l,g,l,b,R,z,R)),lt=Math.min(lt,o.maxDistance(r,l,g,l,z,et,b,et)),lt=Math.min(lt,o.maxDistance(r,l,g,l,z,et,z,R)),lt=Math.min(lt,o.maxDistance(g,v,r,v,b,R,b,et)),lt=Math.min(lt,o.maxDistance(g,v,r,v,b,R,z,R)),lt=Math.min(lt,o.maxDistance(g,v,r,v,z,et,b,et)),lt=Math.min(lt,o.maxDistance(g,v,r,v,z,et,z,R)),lt=Math.min(lt,o.maxDistance(g,v,g,l,b,R,b,et)),lt=Math.min(lt,o.maxDistance(g,v,g,l,b,R,z,R)),lt=Math.min(lt,o.maxDistance(g,v,g,l,z,et,b,et)),lt=Math.min(lt,o.maxDistance(g,v,g,l,z,et,z,R))}}])}(),ui=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"maximumDistance",value:function(){return Vo.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,e){var r=o.isComposite(this._boundable1),l=o.isComposite(this._boundable2);if(r&&l)return o.area(this._boundable1)>o.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(r)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(l)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new yt("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(o.isComposite(this._boundable1)||o.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,e,r,l,g){for(var v=t.getChildBoundables().iterator();v.hasNext();){var b=v.next(),R=null;(R=r?new o(e,b,this._itemDistance):new o(b,e,this._itemDistance)).getDistance()<g&&l.add(R)}}},{key:"getBoundable",value:function(t){return t===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[It]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=r,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof hn}}])}(),rs=function(){return C(function o(){p(this,o)},[{key:"visitItem",value:function(o){}}])}(),or=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"queryInternal",value:function(){if(he(arguments[2],rs)&&arguments[0]instanceof Object&&arguments[1]instanceof hn)for(var t=arguments[0],e=arguments[2],r=arguments[1].getChildBoundables(),l=0;l<r.size();l++){var g=r.get(l);this.getIntersectsOp().intersects(g.getBounds(),t)&&(g instanceof hn?this.queryInternal(t,g,e):g instanceof le?e.visitItem(g.getItem()):Ht.shouldNeverReachHere())}else if(he(arguments[2],ni)&&arguments[0]instanceof Object&&arguments[1]instanceof hn)for(var v=arguments[0],b=arguments[2],R=arguments[1].getChildBoundables(),z=0;z<R.size();z++){var et=R.get(z);this.getIntersectsOp().intersects(et.getBounds(),v)&&(et instanceof hn?this.queryInternal(v,et,b):et instanceof le?b.add(et.getItem()):Ht.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();r instanceof hn?t+=this.size(r):r instanceof le&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var r=null,l=t.getChildBoundables().iterator();l.hasNext();){var g=l.next();g instanceof le&&g.getItem()===e&&(r=g)}return r!==null&&(t.getChildBoundables().remove(r),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new ee:t}if(arguments.length===1){for(var e=arguments[0],r=new ee,l=e.getChildBoundables().iterator();l.hasNext();){var g=l.next();if(g instanceof hn){var v=this.itemsTree(g);v!==null&&r.add(v)}else g instanceof le?r.add(g.getItem()):Ht.shouldNeverReachHere()}return r.size()<=0?null:r}}},{key:"insert",value:function(t,e){Ht.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new le(t,e))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var t=arguments[0],e=new ee;return this.boundablesAtLevel(t,this._root,e),e}if(arguments.length===3){var r=arguments[0],l=arguments[1],g=arguments[2];if(Ht.isTrue(r>-2),l.getLevel()===r)return g.add(l),null;for(var v=l.getChildBoundables().iterator();v.hasNext();){var b=v.next();b instanceof hn?this.boundablesAtLevel(r,b,g):(Ht.isTrue(b instanceof le),r===-1&&g.add(b))}return null}}},{key:"query",value:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new ee;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(arguments.length===2){var r=arguments[0],l=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.queryInternal(r,this._root,l)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(arguments.length===3){var r=arguments[0],l=arguments[1],g=arguments[2],v=this.removeItem(l,g);if(v)return!0;for(var b=null,R=l.getChildBoundables().iterator();R.hasNext();){var z=R.next();if(this.getIntersectsOp().intersects(z.getBounds(),r)&&z instanceof hn&&(v=this.remove(r,z,g))){b=z;break}}return b!==null&&b.getChildBoundables().isEmpty()&&l.getChildBoundables().remove(b),v}}},{key:"createHigherLevels",value:function(t,e){Ht.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return r.size()===1?r.get(0):this.createHigherLevels(r,e+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();if(r instanceof hn){var l=this.depth(r);l>t&&(t=l)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){Ht.isTrue(!t.isEmpty());var r=new ee;r.add(this.createNode(e));var l=new ee(t);Ee.sort(l,this.getComparator());for(var g=l.iterator();g.hasNext();){var v=g.next();this.lastNode(r).getChildBoundables().size()===this.getNodeCapacity()&&r.add(this.createNode(e)),this.lastNode(r).addChildBoundable(v)}return r}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[Dt]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new ee,this._nodeCapacity=null,arguments.length===0)o.constructor_.call(this,o.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];Ht.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}])}();or.IntersectsOp=function(){},or.DEFAULT_NODE_CAPACITY=10;var Ps=function(){return C(function o(){p(this,o)},[{key:"distance",value:function(o,t){}}])}(),Kn=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,r){Ht.isTrue(e.length>0);for(var l=new ee,g=0;g<e.length;g++)l.addAll(this.createParentBoundablesFromVerticalSlice(e[g],r));return l}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var e=arguments[0],r=arguments[1];return this.nearestNeighbourK(e,vt.POSITIVE_INFINITY,r)}if(arguments.length===3){var l=arguments[0],g=arguments[2],v=arguments[1],b=new po;b.add(l);for(var R=new po;!b.isEmpty()&&v>=0;){var z=b.poll(),et=z.getDistance();if(et>=v)break;z.isLeaves()?R.size()<g?R.add(z):(R.peek().getDistance()>et&&(R.poll(),R.add(z)),v=R.peek().getDistance()):z.expandToQueue(b,v)}return t.getItems(R)}}},{key:"createNode",value:function(e){return new mr(e)}},{key:"size",value:function(){return arguments.length===0?V(t,"size",this,1).call(this):V(t,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ne))return V(t,"insert",this,1).apply(this,arguments);var e=arguments[0],r=arguments[1];if(e.isNull())return null;V(t,"insert",this,1).call(this,e,r)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,r){for(var l=Math.trunc(Math.ceil(e.size()/r)),g=new Array(r).fill(null),v=e.iterator(),b=0;b<r;b++){g[b]=new ee;for(var R=0;v.hasNext()&&R<l;){var z=v.next();g[b].add(z),R++}}return g}},{key:"query",value:function(){if(arguments.length===1){var e=arguments[0];return V(t,"query",this,1).call(this,e)}if(arguments.length===2){var r=arguments[0],l=arguments[1];V(t,"query",this,1).call(this,r,l)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,r){return V(t,"createParentBoundables",this,1).call(this,e,r)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ne){var e=arguments[0],r=arguments[1];return V(t,"remove",this,1).call(this,e,r)}return V(t,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?V(t,"depth",this,1).call(this):V(t,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,r){Ht.isTrue(!e.isEmpty());var l=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),g=new ee(e);Ee.sort(g,t.xComparator);var v=this.verticalSlices(g,Math.trunc(Math.ceil(Math.sqrt(l))));return this.createParentBoundablesFromVerticalSlices(v,r)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(he(arguments[0],Ps)){var e=arguments[0];if(this.isEmpty())return null;var r=new ui(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(r)}if(arguments[0]instanceof ui){var l=arguments[0],g=vt.POSITIVE_INFINITY,v=null,b=new po;for(b.add(l);!b.isEmpty()&&g>0;){var R=b.poll(),z=R.getDistance();if(z>=g)break;R.isLeaves()?(g=z,v=R):R.expandToQueue(b,g)}return v===null?null:[v.getBoundable(0).getItem(),v.getBoundable(1).getItem()]}}else{if(arguments.length===2){var et=arguments[0],lt=arguments[1];if(this.isEmpty()||et.isEmpty())return null;var kt=new ui(this.getRoot(),et.getRoot(),lt);return this.nearestNeighbour(kt)}if(arguments.length===3){var Ot=arguments[2],Yt=new le(arguments[0],arguments[1]),ne=new ui(this.getRoot(),Yt,Ot);return this.nearestNeighbour(ne)[0]}if(arguments.length===4){var Ce=arguments[2],we=arguments[3],Ue=new le(arguments[0],arguments[1]),We=new ui(this.getRoot(),Ue,Ce);return this.nearestNeighbourK(We,we)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var e=arguments[0],r=arguments[1],l=vt.POSITIVE_INFINITY,g=new po;for(g.add(e);!g.isEmpty();){var v=g.poll(),b=v.getDistance();if(b>r)return!1;if(v.maximumDistance()<=r)return!0;if(v.isLeaves()){if((l=b)<=r)return!0}else v.expandToQueue(g,l)}return!1}if(arguments.length===3){var R=arguments[0],z=arguments[1],et=arguments[2],lt=new ui(this.getRoot(),R.getRoot(),z);return this.isWithinDistance(lt,et)}}},{key:"interfaces_",get:function(){return[ai,Dt]}}],[{key:"constructor_",value:function(){if(arguments.length===0)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var e=arguments[0];or.constructor_.call(this,e)}}},{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,r){return(e+r)/2}},{key:"getItems",value:function(e){for(var r=new Array(e.size()).fill(null),l=0;!e.isEmpty();){var g=e.poll();r[l]=g.getBoundable(0).getItem(),l++}return r}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}}])}(or),mr=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"computeBounds",value:function(){for(var e=null,r=this.getChildBoundables().iterator();r.hasNext();){var l=r.next();e===null?e=new Ne(l.getBounds()):e.expandToInclude(l.getBounds())}return e}}],[{key:"constructor_",value:function(){var e=arguments[0];hn.constructor_.call(this,e)}}])}(hn);Kn.STRtreeNode=mr,Kn.xComparator=new(function(){return C(function o(){p(this,o)},[{key:"interfaces_",get:function(){return[fe]}},{key:"compare",value:function(o,t){return or.compareDoubles(Kn.centreX(o.getBounds()),Kn.centreX(t.getBounds()))}}])}()),Kn.yComparator=new(function(){return C(function o(){p(this,o)},[{key:"interfaces_",get:function(){return[fe]}},{key:"compare",value:function(o,t){return or.compareDoubles(Kn.centreY(o.getBounds()),Kn.centreY(t.getBounds()))}}])}()),Kn.intersectsOp=new(function(){return C(function o(){p(this,o)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(o,t){return o.intersects(t)}}])}()),Kn.DEFAULT_NODE_CAPACITY=10;var Ss=function(){function o(){p(this,o)}return C(o,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,e,r){if(e.equals2D(r))return 0;var l=o.relativeSign(e.x,r.x),g=o.relativeSign(e.y,r.y);switch(t){case 0:return o.compareValue(l,g);case 1:return o.compareValue(g,l);case 2:return o.compareValue(g,-l);case 3:return o.compareValue(-l,g);case 4:return o.compareValue(-l,-g);case 5:return o.compareValue(-g,-l);case 6:return o.compareValue(-g,l);case 7:return o.compareValue(l,-g)}return Ht.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}])}(),cn=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(o){o.print(this.coord),o.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(o){var t=o;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?Ss.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(o){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===o}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[It]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var o=arguments[0],t=arguments[1],e=arguments[2],r=arguments[3];this._segString=o,this.coord=new at(t),this.segmentIndex=e,this._segmentOctant=r,this._isInterior=!t.equals2D(o.getCoordinate(e))}}])}(),os=function(){return C(function o(){p(this,o)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),_r=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var o=new Jt;this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var r=t.next();this.addEdgeCoordinates(e,r,o),e=r}return o.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var o=new ee;this.findCollapsesFromInsertedNodes(o),this.findCollapsesFromExistingVertices(o);for(var t=o.iterator();t.hasNext();){var e=t.next().intValue();this.add(this._edge.getCoordinate(e),e)}}},{key:"createSplitEdgePts",value:function(o,t){var e=t.segmentIndex-o.segmentIndex+2;if(e===2)return[new at(o.coord),new at(t.coord)];var r=this._edge.getCoordinate(t.segmentIndex),l=t.isInterior()||!t.coord.equals2D(r);l||e--;var g=new Array(e).fill(null),v=0;g[v++]=new at(o.coord);for(var b=o.segmentIndex+1;b<=t.segmentIndex;b++)g[v++]=this._edge.getCoordinate(b);return l&&(g[v]=new at(t.coord)),g}},{key:"print",value:function(o){o.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(o)}},{key:"findCollapsesFromExistingVertices",value:function(o){for(var t=0;t<this._edge.size()-2;t++){var e=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var r=this._edge.getCoordinate(t+2);e.equals2D(r)&&o.add(jn.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(o,t,e){var r=this.createSplitEdgePts(o,t);e.add(r,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(o){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),e=t.next();t.hasNext();){var r=t.next(),l=this.createSplitEdge(e,r);o.add(l),e=r}}},{key:"findCollapseIndex",value:function(o,t,e){if(!o.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-o.segmentIndex;return t.isInterior()||r--,r===1&&(e[0]=o.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(o){for(var t=new Array(1).fill(null),e=this.iterator(),r=e.next();e.hasNext();){var l=e.next();this.findCollapseIndex(r,l,t)&&o.add(jn.valueOf(t[0])),r=l}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var o=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(o),o)}},{key:"createSplitEdge",value:function(o,t){var e=this.createSplitEdgePts(o,t);return new Zi(e,this._edge.getData())}},{key:"add",value:function(o,t){var e=new cn(this._edge,o,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(e);return r!==null?(Ht.isTrue(r.coord.equals2D(o),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(e,e),e)}},{key:"checkSplitEdgesCorrectness",value:function(o){var t=this._edge.getCoordinates(),e=o.get(0).getCoordinate(0);if(!e.equals2D(t[0]))throw new xe("bad split edge start point at "+e);var r=o.get(o.size()-1).getCoordinates(),l=r[r.length-1];if(!l.equals2D(t[t.length-1]))throw new xe("bad split edge end point at "+l)}}],[{key:"constructor_",value:function(){this._nodeMap=new Je,this._edge=null;var o=arguments[0];this._edge=o}}])}(),sr=function(){function o(){p(this,o)}return C(o,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new yt("Cannot compute the octant for point ( "+t+", "+e+" )");var r=Math.abs(t),l=Math.abs(e);return t>=0?e>=0?r>=l?0:1:r>=l?7:6:e>=0?r>=l?3:2:r>=l?4:5}if(arguments[0]instanceof at&&arguments[1]instanceof at){var g=arguments[0],v=arguments[1],b=v.x-g.x,R=v.y-g.y;if(b===0&&R===0)throw new yt("Cannot compute the octant for two identical points "+g);return o.octant(b,R)}}}])}(),ss=function(){return C(function o(){p(this,o)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(o){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(o){}},{key:"getData",value:function(){}}])}(),as=function(){return C(function o(){p(this,o)},[{key:"addIntersection",value:function(o,t){}},{key:"interfaces_",get:function(){return[ss]}}])}(),Zi=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:sr.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var r=arguments[1],l=arguments[3],g=new at(arguments[0].getIntersection(l));this.addIntersection(g,r)}}},{key:"toString",value:function(){return zr.toLineString(new Xe(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var r=e,l=r+1;if(l<this._pts.length){var g=this._pts[l];t.equals2D(g)&&(r=l)}return this._nodeList.add(t,r)}},{key:"addIntersections",value:function(t,e,r){for(var l=0;l<t.getIntersectionNum();l++)this.addIntersection(t,e,r,l)}},{key:"interfaces_",get:function(){return[as]}}],[{key:"constructor_",value:function(){this._nodeList=new _r(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var t=arguments[0],e=new ee;return o.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var r=arguments[1],l=arguments[0].iterator();l.hasNext();)l.next().getNodeList().addSplitEdges(r)}}])}(),zn=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof o){var t=arguments[0],e=ie.index(this.p0,this.p1,t.p0),r=ie.index(this.p0,this.p1,t.p1);return e>=0&&r>=0||e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof at){var l=arguments[0];return ie.index(this.p0,this.p1,l)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof o))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}},{key:"intersection",value:function(t){var e=new Ui;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof at){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new at(t);var e=this.projectionFactor(t),r=new at;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof o){var l=arguments[0],g=this.projectionFactor(l.p0),v=this.projectionFactor(l.p1);if(g>=1&&v>=1||g<=0&&v<=0)return null;var b=this.project(l.p0);g<0&&(b=this.p0),g>1&&(b=this.p1);var R=this.project(l.p1);return v<0&&(R=this.p0),v>1&&(R=this.p1),new o(b,R)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return t===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return mn.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return o.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,l=e*e+r*r;return l<=0?vt.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/l}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var r=new Array(2).fill(null),l=vt.MAX_VALUE,g=null,v=this.closestPoint(t.p0);l=v.distance(t.p0),r[0]=v,r[1]=t.p0;var b=this.closestPoint(t.p1);(g=b.distance(t.p1))<l&&(l=g,r[0]=b,r[1]=t.p1);var R=t.closestPoint(this.p0);(g=R.distance(this.p0))<l&&(l=g,r[0]=this.p0,r[1]=R);var z=t.closestPoint(this.p1);return(g=z.distance(this.p1))<l&&(l=g,r[0]=this.p1,r[1]=z),r}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,r=this.p0.compareTo(e.p0);return r!==0?r:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return $i.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),l=this.p0.y+t*(this.p1.y-this.p0.y),g=this.p1.x-this.p0.x,v=this.p1.y-this.p0.y,b=Math.sqrt(g*g+v*v),R=0,z=0;if(e!==0){if(b<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");R=e*g/b,z=e*v/b}return new at(r-z,l+R)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=r.x,this.p1.y=r.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||vt.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),r=this.p0.getX()-this.p1.getX(),l=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),g=e*e+r*r,v=e*e-r*r,b=t.getX(),R=t.getY();return new at((-v*b-2*e*r*R-2*e*l)/g,(v*R-2*e*r*b-2*r*l)/g)}},{key:"distance",value:function(){if(arguments[0]instanceof o){var t=arguments[0];return mn.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof at){var e=arguments[0];return mn.pointToSegment(e,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new at;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=vt.doubleToLongBits(this.p0.x);t^=31*vt.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=vt.doubleToLongBits(this.p1.x);return r^=31*vt.doubleToLongBits(this.p1.y),e^(Math.trunc(r)^Math.trunc(r>>32))}},{key:"interfaces_",get:function(){return[It,Dt]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)o.constructor_.call(this,new at,new at);else if(arguments.length===1){var t=arguments[0];o.constructor_.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.p0=e,this.p1=r}else if(arguments.length===4){var l=arguments[0],g=arguments[1],v=arguments[2],b=arguments[3];o.constructor_.call(this,new at(l,g),new at(v,b))}}},{key:"midPoint",value:function(t,e){return new at((t.x+e.x)/2,(t.y+e.y)/2)}}])}(),us=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var o=arguments[1],t=arguments[2],e=arguments[3];arguments[0].getLineSegment(o,this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new zn,this._overlapSeg2=new zn}}])}(),Yo=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(o,t){t.p0=this._pts[o],t.p1=this._pts[o+1]}},{key:"computeSelect",value:function(o,t,e,r){var l=this._pts[t],g=this._pts[e];if(e-t==1)return r.select(this,t),null;if(!o.intersects(l,g))return null;var v=Math.trunc((t+e)/2);t<v&&this.computeSelect(o,t,v,r),v<e&&this.computeSelect(o,v,e,r)}},{key:"getCoordinates",value:function(){for(var o=new Array(this._end-this._start+1).fill(null),t=0,e=this._start;e<=this._end;e++)o[t++]=this._pts[e];return o}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var o=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,o,o._start,o._end,t)}else if(arguments.length===6){var e=arguments[0],r=arguments[1],l=arguments[2],g=arguments[3],v=arguments[4],b=arguments[5];if(r-e==1&&v-g==1)return b.overlap(this,e,l,g),null;if(!this.overlaps(e,r,l,g,v))return null;var R=Math.trunc((e+r)/2),z=Math.trunc((g+v)/2);e<R&&(g<z&&this.computeOverlaps(e,R,l,g,z,b),z<v&&this.computeOverlaps(e,R,l,z,v,b)),R<r&&(g<z&&this.computeOverlaps(R,r,l,g,z,b),z<v&&this.computeOverlaps(R,r,l,z,v,b))}}},{key:"setId",value:function(o){this._id=o}},{key:"select",value:function(o,t){this.computeSelect(o,this._start,this._end,t)}},{key:"getEnvelope",value:function(){if(this._env===null){var o=this._pts[this._start],t=this._pts[this._end];this._env=new Ne(o,t)}return this._env}},{key:"overlaps",value:function(o,t,e,r,l){return Ne.intersects(this._pts[o],this._pts[t],e._pts[r],e._pts[l])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var o=arguments[0],t=arguments[1],e=arguments[2],r=arguments[3];this._pts=o,this._start=t,this._end=e,this._context=r}}])}(),Ts=function(){function o(){p(this,o)}return C(o,null,[{key:"findChainEnd",value:function(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var l=yn.quadrant(t[r],t[r+1]),g=e+1;g<t.length&&!(!t[g-1].equals2D(t[g])&&yn.quadrant(t[g-1],t[g])!==l);)g++;return g-1}},{key:"getChains",value:function(){if(arguments.length===1){var t=arguments[0];return o.getChains(t,null)}if(arguments.length===2){var e=arguments[0],r=arguments[1],l=new ee,g=0;do{var v=o.findChainEnd(e,g),b=new Yo(e,g,v,r);l.add(b),g=v}while(g<e.length-1);return l}}}])}(),mo=function(){return C(function o(){p(this,o)},[{key:"computeNodes",value:function(o){}},{key:"getNodedSubstrings",value:function(){}}])}(),_o=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(o){this._segInt=o}},{key:"interfaces_",get:function(){return[mo]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var o=arguments[0];this.setSegmentIntersector(o)}}}}])}(),nn=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Zi.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var r=Ts.getChains(e.getCoordinates(),e).iterator();r.hasNext();){var l=r.next();l.setId(this._idCounter++),this._index.insert(l.getEnvelope(),l),this._monoChains.add(l)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var r=e.iterator();r.hasNext();)this.add(r.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new fn(this._segInt),r=this._monoChains.iterator();r.hasNext();)for(var l=r.next(),g=this._index.query(l.getEnvelope()).iterator();g.hasNext();){var v=g.next();if(v.getId()>l.getId()&&(l.computeOverlaps(v,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new ee,this._index=new Kn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var e=arguments[0];_o.constructor_.call(this,e)}}}}])}(_o),fn=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"overlap",value:function(){if(arguments.length!==4)return V(t,"overlap",this,1).apply(this,arguments);var e=arguments[1],r=arguments[2],l=arguments[3],g=arguments[0].getContext(),v=r.getContext();this._si.processIntersections(g,e,v,l)}}],[{key:"constructor_",value:function(){this._si=null;var e=arguments[0];this._si=e}}])}(us);nn.SegmentOverlapAction=fn;var Gn=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"isDeletable",value:function(t,e,r,l){var g=this._inputLine[t],v=this._inputLine[e],b=this._inputLine[r];return!!this.isConcave(g,v,b)&&!!this.isShallow(g,v,b,l)&&this.isShallowSampled(g,v,t,r,l)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e),l=!1;r<this._inputLine.length;){var g=!1;this.isDeletable(t,e,r,this._distanceTol)&&(this._isDeleted[e]=o.DELETE,g=!0,l=!0),t=g?r:e,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e)}return l}},{key:"isShallowConcavity",value:function(t,e,r,l){return ie.index(t,e,r)===this._angleOrientation&&mn.pointToSegment(e,t,r)<l}},{key:"isShallowSampled",value:function(t,e,r,l,g){var v=Math.trunc((l-r)/o.NUM_PTS_TO_CHECK);v<=0&&(v=1);for(var b=r;b<l;b+=v)if(!this.isShallow(t,e,this._inputLine[b],g))return!1;return!0}},{key:"isConcave",value:function(t,e,r){var l=ie.index(t,e,r)===this._angleOrientation;return l}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ie.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===o.DELETE;)e++;return e}},{key:"isShallow",value:function(t,e,r,l){return mn.pointToSegment(e,t,r)<l}},{key:"collapseLine",value:function(){for(var t=new Jt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==o.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ie.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,e){return new o(t).simplify(e)}}])}();Gn.INIT=0,Gn.DELETE=1,Gn.KEEP=1,Gn.NUM_PTS_TO_CHECK=10;var yo=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getCoordinates",value:function(){return this._ptList.toArray(o.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new at(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(var l=t.length-1;l>=0;l--)this.addPt(t[l])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return new bi().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new at(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ee}}])}();yo.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Ye=function(){function o(){p(this,o)}return C(o,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=o.PI_TIMES_2;for(;t<=-Math.PI;)t+=o.PI_TIMES_2;return t}},{key:"angle",value:function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],r=arguments[1],l=r.x-e.x,g=r.y-e.y;return Math.atan2(g,l)}}},{key:"isAcute",value:function(t,e,r){var l=t.x-e.x,g=t.y-e.y;return l*(r.x-e.x)+g*(r.y-e.y)>0}},{key:"isObtuse",value:function(t,e,r){var l=t.x-e.x,g=t.y-e.y;return l*(r.x-e.x)+g*(r.y-e.y)<0}},{key:"interiorAngle",value:function(t,e,r){var l=o.angle(e,t),g=o.angle(e,r);return Math.abs(g-l)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=o.PI_TIMES_2;t>=o.PI_TIMES_2&&(t=0)}else{for(;t>=o.PI_TIMES_2;)t-=o.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,e,r){var l=o.angle(e,t),g=o.angle(e,r);return o.diff(l,g)}},{key:"diff",value:function(t,e){var r=null;return(r=t<e?e-t:t-e)>Math.PI&&(r=2*Math.PI-r),r}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,e){var r=Math.sin(e-t);return r>0?o.COUNTERCLOCKWISE:r<0?o.CLOCKWISE:o.NONE}},{key:"angleBetweenOriented",value:function(t,e,r){var l=o.angle(e,t),g=o.angle(e,r)-l;return g<=-Math.PI?g+o.PI_TIMES_2:g>Math.PI?g-o.PI_TIMES_2:g}}])}();Ye.PI_TIMES_2=2*Math.PI,Ye.PI_OVER_2=Math.PI/2,Ye.PI_OVER_4=Math.PI/4,Ye.COUNTERCLOCKWISE=ie.COUNTERCLOCKWISE,Ye.CLOCKWISE=ie.CLOCKWISE,Ye.NONE=ie.COLLINEAR;var Pi=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=ie.index(this._s0,this._s1,this._s2),l=r===ie.CLOCKWISE&&this._side===At.LEFT||r===ie.COUNTERCLOCKWISE&&this._side===At.RIGHT;r===0?this.addCollinear(e):l?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)}},{key:"addLineEndCap",value:function(t,e){var r=new zn(t,e),l=new zn;this.computeOffsetSegment(r,At.LEFT,this._distance,l);var g=new zn;this.computeOffsetSegment(r,At.RIGHT,this._distance,g);var v=e.x-t.x,b=e.y-t.y,R=Math.atan2(b,v);switch(this._bufParams.getEndCapStyle()){case _t.CAP_ROUND:this._segList.addPt(l.p1),this.addDirectedFillet(e,R+Math.PI/2,R-Math.PI/2,ie.CLOCKWISE,this._distance),this._segList.addPt(g.p1);break;case _t.CAP_FLAT:this._segList.addPt(l.p1),this._segList.addPt(g.p1);break;case _t.CAP_SQUARE:var z=new at;z.x=Math.abs(this._distance)*Math.cos(R),z.y=Math.abs(this._distance)*Math.sin(R);var et=new at(l.p1.x+z.x,l.p1.y+z.y),lt=new at(g.p1.x+z.x,g.p1.y+z.y);this._segList.addPt(et),this._segList.addPt(lt)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,r,l){var g=$i.intersection(e.p0,e.p1,r.p0,r.p1);if(g!==null&&(l<=0?1:g.distance(t)/Math.abs(l))<=this._bufParams.getMitreLimit())return this._segList.addPt(g),null;this.addLimitedMitreJoin(e,r,l,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*o.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===_t.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===_t.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new at(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new at(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new at(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new at(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,r,l,g){var v=e.x-t.x,b=e.y-t.y,R=Math.atan2(b,v),z=r.x-t.x,et=r.y-t.y,lt=Math.atan2(et,z);l===ie.CLOCKWISE?R<=lt&&(R+=2*Math.PI):R>=lt&&(R-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,R,lt,l,g),this._segList.addPt(r)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,r){this._s1=t,this._s2=e,this._side=r,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,r,l){var g=this._seg0.p1,v=Ye.angle(g,this._seg0.p0),b=Ye.angleBetweenOriented(this._seg0.p0,g,this._seg1.p1)/2,R=Ye.normalize(v+b),z=Ye.normalize(R+Math.PI),et=l*r,lt=r-et*Math.abs(Math.sin(b)),kt=g.x+et*Math.cos(z),Ot=g.y+et*Math.sin(z),Yt=new at(kt,Ot),ne=new zn(g,Yt),Ce=ne.pointAlongOffset(1,lt),we=ne.pointAlongOffset(1,-lt);this._side===At.LEFT?(this._segList.addPt(Ce),this._segList.addPt(we)):(this._segList.addPt(we),this._segList.addPt(Ce))}},{key:"addDirectedFillet",value:function(t,e,r,l,g){var v=l===ie.CLOCKWISE?-1:1,b=Math.abs(e-r),R=Math.trunc(b/this._filletAngleQuantum+.5);if(R<1)return null;for(var z=b/R,et=new at,lt=0;lt<R;lt++){var kt=e+v*lt*z;et.x=t.x+g*Math.cos(kt),et.y=t.y+g*Math.sin(kt),this._segList.addPt(et)}}},{key:"computeOffsetSegment",value:function(t,e,r,l){var g=e===At.LEFT?1:-1,v=t.p1.x-t.p0.x,b=t.p1.y-t.p0.y,R=Math.sqrt(v*v+b*b),z=g*r*v/R,et=g*r*b/R;l.p0.x=t.p0.x-et,l.p0.y=t.p0.y+z,l.p1.x=t.p1.x-et,l.p1.y=t.p1.y+z}},{key:"addInsideTurn",value:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*o.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new at((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var l=new at((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(l)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new at(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new yo,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*o.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===_t.JOIN_BEVEL||this._bufParams.getJoinStyle()===_t.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ie.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new zn,this._seg1=new zn,this._offset0=new zn,this._offset1=new zn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new Ui,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===_t.JOIN_ROUND&&(this._closingSegLengthFactor=o.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)}}])}();Pi.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Pi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Pi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Pi.MAX_CLOSING_SEG_LEN_FACTOR=80;var Vi=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,e===0)return null;var r=e<0,l=Math.abs(e),g=this.getSegGen(l);t.length<=1?this.computePointCurve(t[0],g):this.computeOffsetCurve(t,r,g);var v=g.getCoordinates();return r&&$.reverse(v),v}},{key:"computeSingleSidedBufferCurve",value:function(t,e,r){var l=this.simplifyTolerance(this._distance);if(e){r.addSegments(t,!0);var g=Gn.simplify(t,-l),v=g.length-1;r.initSideSegments(g[v],g[v-1],At.LEFT),r.addFirstSegment();for(var b=v-2;b>=0;b--)r.addNextSegment(g[b],!0)}else{r.addSegments(t,!1);var R=Gn.simplify(t,l),z=R.length-1;r.initSideSegments(R[0],R[1],At.LEFT),r.addFirstSegment();for(var et=2;et<=z;et++)r.addNextSegment(R[et],!0)}r.addLastSegment(),r.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,r){var l=this.simplifyTolerance(this._distance);e===At.RIGHT&&(l=-l);var g=Gn.simplify(t,l),v=g.length-1;r.initSideSegments(g[v-1],g[0],e);for(var b=1;b<=v;b++){var R=b!==1;r.addNextSegment(g[b],R)}r.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var r=this.simplifyTolerance(this._distance),l=Gn.simplify(t,r),g=l.length-1;e.initSideSegments(l[0],l[1],At.LEFT);for(var v=2;v<=g;v++)e.addNextSegment(l[v],!0);e.addLastSegment(),e.addLineEndCap(l[g-1],l[g]);var b=Gn.simplify(t,-r),R=b.length-1;e.initSideSegments(b[R],b[R-1],At.LEFT);for(var z=R-2;z>=0;z--)e.addNextSegment(b[z],!0);e.addLastSegment(),e.addLineEndCap(b[1],b[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case _t.CAP_ROUND:e.createCircle(t);break;case _t.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var r=Math.abs(e),l=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],l);else if(this._bufParams.isSingleSided()){var g=e<0;this.computeSingleSidedBufferCurve(t,g,l)}else this.computeLineBufferCurve(t,l);return l.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,e,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(r===0)return o.copyCoordinates(t);var l=this.getSegGen(r);return this.computeRingBufferCurve(t,e,l),l.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,r){var l=this.simplifyTolerance(this._distance);if(e){var g=Gn.simplify(t,-l),v=g.length-1;r.initSideSegments(g[v],g[v-1],At.LEFT),r.addFirstSegment();for(var b=v-2;b>=0;b--)r.addNextSegment(g[b],!0)}else{var R=Gn.simplify(t,l),z=R.length-1;r.initSideSegments(R[0],R[1],At.LEFT),r.addFirstSegment();for(var et=2;et<=z;et++)r.addNextSegment(R[et],!0)}r.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return t===0||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new Pi(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new at(t[r]);return e}}])}(),tn=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var o=arguments[0],t=new ee,e=this._subgraphs.iterator();e.hasNext();){var r=e.next(),l=r.getEnvelope();o.y<l.getMinY()||o.y>l.getMaxY()||this.findStabbedSegments(o,r.getDirectedEdges(),t)}return t}if(arguments.length===3){if(he(arguments[2],ni)&&arguments[0]instanceof at&&arguments[1]instanceof qo){for(var g=arguments[0],v=arguments[1],b=arguments[2],R=v.getEdge().getCoordinates(),z=0;z<R.length-1;z++)if(this._seg.p0=R[z],this._seg.p1=R[z+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<g.x||this._seg.isHorizontal()||g.y<this._seg.p0.y||g.y>this._seg.p1.y||ie.index(this._seg.p0,this._seg.p1,g)===ie.RIGHT)){var et=v.getDepth(At.LEFT);this._seg.p0.equals(R[z])||(et=v.getDepth(At.RIGHT));var lt=new Ho(this._seg,et);b.add(lt)}}else if(he(arguments[2],ni)&&arguments[0]instanceof at&&he(arguments[1],ni))for(var kt=arguments[0],Ot=arguments[2],Yt=arguments[1].iterator();Yt.hasNext();){var ne=Yt.next();ne.isForward()&&this.findStabbedSegments(kt,ne,Ot)}}}},{key:"getDepth",value:function(o){var t=this.findStabbedSegments(o);return t.size()===0?0:Ee.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new zn;var o=arguments[0];this._subgraphs=o}}])}(),Ho=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(o){var t=o;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return e!==0||(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))!==0?e:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(o,t){var e=o.p0.compareTo(t.p0);return e!==0?e:o.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[It]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var o=arguments[0],t=arguments[1];this._upwardSeg=new zn(o),this._leftDepth=t}}])}();tn.DepthSegment=Ho;var jo=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,null,[{key:"constructor_",value:function(){wt.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(wt),to=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getY",value:function(){var t=this.y/this.w;if(vt.isNaN(t)||vt.isInfinite(t))throw new jo;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(vt.isNaN(t)||vt.isInfinite(t))throw new jo;return t}},{key:"getCoordinate",value:function(){var t=new at;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],r=arguments[1];this.x=e,this.y=r,this.w=1}else if(arguments[0]instanceof o&&arguments[1]instanceof o){var l=arguments[0],g=arguments[1];this.x=l.y*g.w-g.y*l.w,this.y=g.x*l.w-l.x*g.w,this.w=l.x*g.y-g.x*l.y}else if(arguments[0]instanceof at&&arguments[1]instanceof at){var v=arguments[0],b=arguments[1];this.x=v.y-b.y,this.y=b.x-v.x,this.w=v.x*b.y-b.x*v.y}}else if(arguments.length===3){var R=arguments[0],z=arguments[1],et=arguments[2];this.x=R,this.y=z,this.w=et}else if(arguments.length===4){var lt=arguments[0],kt=arguments[1],Ot=arguments[2],Yt=arguments[3],ne=lt.y-kt.y,Ce=kt.x-lt.x,we=lt.x*kt.y-kt.x*lt.y,Ue=Ot.y-Yt.y,We=Yt.x-Ot.x,dn=Ot.x*Yt.y-Yt.x*Ot.y;this.x=Ce*dn-We*we,this.y=Ue*we-ne*dn,this.w=ne*We-Ue*Ce}}}])}(),qn=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"area",value:function(){return o.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return o.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(t===null)throw new yt("Supplied point is null.");return o.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return o.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return o.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return o.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return o.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return o.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return o.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.p0=t,this.p1=e,this.p2=r}},{key:"area",value:function(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)}},{key:"signedArea",value:function(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2}},{key:"det",value:function(t,e,r,l){return t*l-e*r}},{key:"interpolateZ",value:function(t,e,r,l){var g=e.x,v=e.y,b=r.x-g,R=l.x-g,z=r.y-v,et=l.y-v,lt=b*et-R*z,kt=t.x-g,Ot=t.y-v,Yt=(et*kt-R*Ot)/lt,ne=(-z*kt+b*Ot)/lt;return e.getZ()+Yt*(r.getZ()-e.getZ())+ne*(l.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,r){var l=t.distance(e),g=e.distance(r),v=r.distance(t),b=l;return g>b&&(b=g),v>b&&(b=v),b}},{key:"circumcentreDD",value:function(t,e,r){var l=te.valueOf(t.x).subtract(r.x),g=te.valueOf(t.y).subtract(r.y),v=te.valueOf(e.x).subtract(r.x),b=te.valueOf(e.y).subtract(r.y),R=te.determinant(l,g,v,b).multiply(2),z=l.sqr().add(g.sqr()),et=v.sqr().add(b.sqr()),lt=te.determinant(g,z,b,et),kt=te.determinant(l,z,v,et),Ot=te.valueOf(r.x).subtract(lt.divide(R)).doubleValue(),Yt=te.valueOf(r.y).add(kt.divide(R)).doubleValue();return new at(Ot,Yt)}},{key:"isAcute",value:function(t,e,r){return!!Ye.isAcute(t,e,r)&&!!Ye.isAcute(e,r,t)&&!!Ye.isAcute(r,t,e)}},{key:"circumcentre",value:function(t,e,r){var l=r.x,g=r.y,v=t.x-l,b=t.y-g,R=e.x-l,z=e.y-g,et=2*o.det(v,b,R,z),lt=o.det(b,v*v+b*b,z,R*R+z*z),kt=o.det(v,v*v+b*b,R,R*R+z*z);return new at(l-lt/et,g+kt/et)}},{key:"perpendicularBisector",value:function(t,e){var r=e.x-t.x,l=e.y-t.y,g=new to(t.x+r/2,t.y+l/2,1),v=new to(t.x-l+r/2,t.y+r+l/2,1);return new to(g,v)}},{key:"angleBisector",value:function(t,e,r){var l=e.distance(t),g=l/(l+e.distance(r)),v=r.x-t.x,b=r.y-t.y;return new at(t.x+g*v,t.y+g*b)}},{key:"area3D",value:function(t,e,r){var l=e.x-t.x,g=e.y-t.y,v=e.getZ()-t.getZ(),b=r.x-t.x,R=r.y-t.y,z=r.getZ()-t.getZ(),et=g*z-v*R,lt=v*b-l*z,kt=l*R-g*b,Ot=et*et+lt*lt+kt*kt,Yt=Math.sqrt(Ot)/2;return Yt}},{key:"centroid",value:function(t,e,r){var l=(t.x+e.x+r.x)/3,g=(t.y+e.y+r.y)/3;return new at(l,g)}},{key:"inCentre",value:function(t,e,r){var l=e.distance(r),g=t.distance(r),v=t.distance(e),b=l+g+v,R=(l*t.x+g*e.x+v*r.x)/b,z=(l*t.y+g*e.y+v*r.y)/b;return new at(R,z)}}])}(),vo=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(o,t,e,r,l){if(t===0&&o.length<On.MINIMUM_VALID_SIZE)return null;var g=r,v=l;o.length>=On.MINIMUM_VALID_SIZE&&ie.isCCW(o)&&(g=l,v=r,e=At.opposite(e));var b=this._curveBuilder.getRingCurve(o,e,t);this.addCurve(b,g,v)}},{key:"addRingBothSides",value:function(o,t){this.addRingSide(o,t,At.LEFT,Y.EXTERIOR,Y.INTERIOR),this.addRingSide(o,t,At.RIGHT,Y.INTERIOR,Y.EXTERIOR)}},{key:"addPoint",value:function(o){if(this._distance<=0)return null;var t=o.getCoordinates(),e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,Y.EXTERIOR,Y.INTERIOR)}},{key:"addPolygon",value:function(o){var t=this._distance,e=At.LEFT;this._distance<0&&(t=-this._distance,e=At.RIGHT);var r=o.getExteriorRing(),l=$.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance)||this._distance<=0&&l.length<3)return null;this.addRingSide(l,t,e,Y.EXTERIOR,Y.INTERIOR);for(var g=0;g<o.getNumInteriorRing();g++){var v=o.getInteriorRingN(g),b=$.removeRepeatedPoints(v.getCoordinates());this._distance>0&&this.isErodedCompletely(v,-this._distance)||this.addRingSide(b,t,At.opposite(e),Y.INTERIOR,Y.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(o,t){var e=new qn(o[0],o[1],o[2]),r=e.inCentre();return mn.pointToSegment(r,e.p0,e.p1)<Math.abs(t)}},{key:"addLineString",value:function(o){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=$.removeRepeatedPoints(o.getCoordinates());if($.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,Y.EXTERIOR,Y.INTERIOR)}}},{key:"addCurve",value:function(o,t,e){if(o===null||o.length<2)return null;var r=new Zi(o,new Pn(0,Y.BOUNDARY,t,e));this._curveList.add(r)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(o){if(o.isEmpty())return null;if(o instanceof ri)this.addPolygon(o);else if(o instanceof er)this.addLineString(o);else if(o instanceof fr)this.addPoint(o);else if(o instanceof Mn)this.addCollection(o);else if(o instanceof dr)this.addCollection(o);else if(o instanceof an)this.addCollection(o);else{if(!(o instanceof en))throw new Rn(o.getGeometryType());this.addCollection(o)}}},{key:"isErodedCompletely",value:function(o,t){var e=o.getCoordinates();if(e.length<4)return t<0;if(e.length===4)return this.isTriangleErodedCompletely(e,t);var r=o.getEnvelopeInternal(),l=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>l}},{key:"addCollection",value:function(o){for(var t=0;t<o.getNumGeometries();t++){var e=o.getGeometryN(t);this.add(e)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ee;var o=arguments[0],t=arguments[1],e=arguments[2];this._inputGeom=o,this._distance=t,this._curveBuilder=e}}])}(),Eo=function(){return C(function o(){p(this,o)},[{key:"locate",value:function(o){}}])}(),As=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,o.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new ei;var t=this._parent.getGeometryN(this._index++);return t instanceof en?(this._subcollectionIterator=new o(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new Rn(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[os]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof en)}}])}(),li=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"locate",value:function(t){return o.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[Eo]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,e){if(e.isEmpty())return Y.EXTERIOR;var r=e.getExteriorRing(),l=o.locatePointInRing(t,r);if(l!==Y.INTERIOR)return l;for(var g=0;g<e.getNumInteriorRing();g++){var v=e.getInteriorRingN(g),b=o.locatePointInRing(t,v);if(b===Y.BOUNDARY)return Y.BOUNDARY;if(b===Y.INTERIOR)return Y.EXTERIOR}return Y.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?Gr.locateInRing(t,e.getCoordinates()):Y.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,e){return Y.EXTERIOR!==o.locatePointInPolygon(t,e)}},{key:"locateInGeometry",value:function(t,e){if(e instanceof ri)return o.locatePointInPolygon(t,e);if(e instanceof en)for(var r=new As(e);r.hasNext();){var l=r.next();if(l!==e){var g=o.locateInGeometry(t,l);if(g!==Y.EXTERIOR)return g}}return Y.EXTERIOR}},{key:"isContained",value:function(t,e){return Y.EXTERIOR!==o.locate(t,e)}},{key:"locate",value:function(t,e){return e.isEmpty()?Y.EXTERIOR:e.getEnvelopeInternal().intersects(t)?o.locateInGeometry(t,e):Y.EXTERIOR}}])}(),Si=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(o){this.getEdges();var t=this._edgeList.indexOf(o),e=t-1;return t===0&&(e=this._edgeList.size()-1),this._edgeList.get(e)}},{key:"propagateSideLabels",value:function(o){for(var t=Y.NONE,e=this.iterator();e.hasNext();){var r=e.next().getLabel();r.isArea(o)&&r.getLocation(o,At.LEFT)!==Y.NONE&&(t=r.getLocation(o,At.LEFT))}if(t===Y.NONE)return null;for(var l=t,g=this.iterator();g.hasNext();){var v=g.next(),b=v.getLabel();if(b.getLocation(o,At.ON)===Y.NONE&&b.setLocation(o,At.ON,l),b.isArea(o)){var R=b.getLocation(o,At.LEFT),z=b.getLocation(o,At.RIGHT);if(z!==Y.NONE){if(z!==l)throw new Nn("side location conflict",v.getCoordinate());R===Y.NONE&&Ht.shouldNeverReachHere("found single null side (at "+v.getCoordinate()+")"),l=R}else Ht.isTrue(b.getLocation(o,At.LEFT)===Y.NONE,"found single null side"),b.setLocation(o,At.RIGHT,l),b.setLocation(o,At.LEFT,l)}}}},{key:"getCoordinate",value:function(){var o=this.iterator();return o.hasNext()?o.next().getCoordinate():null}},{key:"print",value:function(o){on.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(o)}},{key:"isAreaLabelsConsistent",value:function(o){return this.computeEdgeEndLabels(o.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(o){var t=this.getEdges();if(t.size()<=0)return!0;var e=t.size()-1,r=t.get(e).getLabel().getLocation(o,At.LEFT);Ht.isTrue(r!==Y.NONE,"Found unlabelled area edge");for(var l=r,g=this.iterator();g.hasNext();){var v=g.next().getLabel();Ht.isTrue(v.isArea(o),"Found non-area edge");var b=v.getLocation(o,At.LEFT),R=v.getLocation(o,At.RIGHT);if(b===R||R!==l)return!1;l=b}return!0}},{key:"findIndex",value:function(o){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===o)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new ee(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(o,t,e){return this._ptInAreaLocation[o]===Y.NONE&&(this._ptInAreaLocation[o]=li.locate(t,e[o].getGeometry())),this._ptInAreaLocation[o]}},{key:"toString",value:function(){var o=new Di;o.append("EdgeEndStar:   "+this.getCoordinate()),o.append(`
`);for(var t=this.iterator();t.hasNext();){var e=t.next();o.append(e),o.append(`
`)}return o.toString()}},{key:"computeEdgeEndLabels",value:function(o){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(o)}},{key:"computeLabelling",value:function(o){this.computeEdgeEndLabels(o[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],e=this.iterator();e.hasNext();)for(var r=e.next().getLabel(),l=0;l<2;l++)r.isLine(l)&&r.getLocation(l)===Y.BOUNDARY&&(t[l]=!0);for(var g=this.iterator();g.hasNext();)for(var v=g.next(),b=v.getLabel(),R=0;R<2;R++)if(b.isAnyNull(R)){var z=Y.NONE;if(t[R])z=Y.EXTERIOR;else{var et=v.getCoordinate();z=this.getLocation(R,et,o)}b.setAllLocationsIfNull(R,z)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(o,t){this._edgeMap.put(o,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Je,this._edgeList=null,this._ptInAreaLocation=[Y.NONE,Y.NONE]}}])}(),Sn=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,r=null,l=this._SCANNING_FOR_INCOMING,g=0;g<this._resultAreaEdgeList.size();g++){var v=this._resultAreaEdgeList.get(g),b=v.getSym();if(v.getLabel().isArea())switch(e===null&&v.isInResult()&&(e=v),l){case this._SCANNING_FOR_INCOMING:if(!b.isInResult())continue;r=b,l=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!v.isInResult())continue;r.setNext(v),l=this._SCANNING_FOR_INCOMING}}if(l===this._LINKING_TO_OUTGOING){if(e===null)throw new Nn("no outgoing dirEdge found",this.getCoordinate());Ht.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),r.setNext(e)}}},{key:"insert",value:function(e){var r=e;this.insertEdgeEnd(r,r)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),r=e.size();if(r<1)return null;var l=e.get(0);if(r===1)return l;var g=e.get(r-1),v=l.getQuadrant(),b=g.getQuadrant();return yn.isNorthern(v)&&yn.isNorthern(b)?l:yn.isNorthern(v)||yn.isNorthern(b)?l.getDy()!==0?l:g.getDy()!==0?g:(Ht.shouldNeverReachHere("found two horizontal edges incident on node"),null):g}},{key:"print",value:function(e){on.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var l=r.next();e.print("out "),l.print(e),e.println(),e.print("in "),l.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ee;for(var e=this.iterator();e.hasNext();){var r=e.next();(r.isInResult()||r.getSym().isInResult())&&this._resultAreaEdgeList.add(r)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var r=this.iterator();r.hasNext();){var l=r.next().getLabel();l.setAllLocationsIfNull(0,e.getLocation(0)),l.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,r=null,l=this._edgeList.size()-1;l>=0;l--){var g=this._edgeList.get(l),v=g.getSym();r===null&&(r=v),e!==null&&v.setNext(e),e=g}r.setNext(e)}},{key:"computeDepths",value:function(){if(arguments.length===1){var e=arguments[0],r=this.findIndex(e),l=e.getDepth(At.LEFT),g=e.getDepth(At.RIGHT),v=this.computeDepths(r+1,this._edgeList.size(),l);if(this.computeDepths(0,r,v)!==g)throw new Nn("depth mismatch at "+e.getCoordinate())}else if(arguments.length===3){for(var b=arguments[1],R=arguments[2],z=arguments[0];z<b;z++){var et=this._edgeList.get(z);et.setEdgeDepths(At.RIGHT,R),R=et.getDepth(At.LEFT)}return R}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var r=e.next();r.getLabel().merge(r.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var r=null,l=null,g=this._SCANNING_FOR_INCOMING,v=this._resultAreaEdgeList.size()-1;v>=0;v--){var b=this._resultAreaEdgeList.get(v),R=b.getSym();switch(r===null&&b.getEdgeRing()===e&&(r=b),g){case this._SCANNING_FOR_INCOMING:if(R.getEdgeRing()!==e)continue;l=R,g=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(b.getEdgeRing()!==e)continue;l.setNextMin(b),g=this._SCANNING_FOR_INCOMING}}g===this._LINKING_TO_OUTGOING&&(Ht.isTrue(r!==null,"found null for first outgoing dirEdge"),Ht.isTrue(r.getEdgeRing()===e,"unable to link last incoming dirEdge"),l.setNextMin(r))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var e=0,r=this.iterator();r.hasNext();)r.next().isInResult()&&e++;return e}if(arguments.length===1){for(var l=arguments[0],g=0,v=this.iterator();v.hasNext();)v.next().getEdgeRing()===l&&g++;return g}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=Y.NONE,r=this.iterator();r.hasNext();){var l=r.next(),g=l.getSym();if(!l.isLineEdge()){if(l.isInResult()){e=Y.INTERIOR;break}if(g.isInResult()){e=Y.EXTERIOR;break}}}if(e===Y.NONE)return null;for(var v=e,b=this.iterator();b.hasNext();){var R=b.next(),z=R.getSym();R.isLineEdge()?R.getEdge().setCovered(v===Y.INTERIOR):(R.isInResult()&&(v=Y.EXTERIOR),z.isInResult()&&(v=Y.INTERIOR))}}},{key:"computeLabelling",value:function(e){V(t,"computeLabelling",this,1).call(this,e),this._label=new Pn(Y.NONE);for(var r=this.iterator();r.hasNext();)for(var l=r.next().getEdge().getLabel(),g=0;g<2;g++){var v=l.getLocation(g);v!==Y.INTERIOR&&v!==Y.BOUNDARY||this._label.setLocation(g,Y.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(Si),yr=function(o){function t(){return p(this,t),m(this,t)}return G(t,o),C(t,[{key:"createNode",value:function(e){return new Qr(e,new Sn)}}])}(Uo),wo=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"compareTo",value:function(t){var e=t;return o.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}},{key:"interfaces_",get:function(){return[It]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=o.orientation(t)}},{key:"orientation",value:function(t){return $.increasingDirection(t)===1}},{key:"compareOriented",value:function(t,e,r,l){for(var g=e?1:-1,v=l?1:-1,b=e?t.length:-1,R=l?r.length:-1,z=e?0:t.length-1,et=l?0:r.length-1;;){var lt=t[z].compareTo(r[et]);if(lt!==0)return lt;var kt=(z+=g)===b,Ot=(et+=v)===R;if(kt&&!Ot)return-1;if(!kt&&Ot)return 1;if(kt&&Ot)return 0}}}])}(),Un=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"print",value:function(o){o.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var e=this._edges.get(t);t>0&&o.print(","),o.print("(");for(var r=e.getCoordinates(),l=0;l<r.length;l++)l>0&&o.print(","),o.print(r[l].x+" "+r[l].y);o.println(")")}o.print(")  ")}},{key:"addAll",value:function(o){for(var t=o.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(o){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(o))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(o){return this._edges.get(o)}},{key:"findEqualEdge",value:function(o){var t=new wo(o.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(o){this._edges.add(o);var t=new wo(o.getCoordinates());this._ocaMap.put(t,o)}}],[{key:"constructor_",value:function(){this._edges=new ee,this._ocaMap=new Je}}])}(),ls=function(){return C(function o(){p(this,o)},[{key:"processIntersections",value:function(o,t,e,r){}},{key:"isDone",value:function(){}}])}(),Ur=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"isTrivialIntersection",value:function(t,e,r,l){if(t===r&&this._li.getIntersectionNum()===1){if(o.isAdjacentSegments(e,l))return!0;if(t.isClosed()){var g=t.size()-1;if(e===0&&l===g||l===0&&e===g)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,r,l){if(t===r&&e===l)return null;this.numTests++;var g=t.getCoordinates()[e],v=t.getCoordinates()[e+1],b=r.getCoordinates()[l],R=r.getCoordinates()[l+1];this._li.computeIntersection(g,v,b,R),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,r,l)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),r.addIntersections(this._li,l,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[ls]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return Math.abs(t-e)===1}}])}(),Xo=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(o){o.print(this.coord),o.print(" seg # = "+this.segmentIndex),o.println(" dist = "+this.dist)}},{key:"compareTo",value:function(o){var t=o;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(o){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===o}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(o,t){return this.segmentIndex<o?-1:this.segmentIndex>o?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[It]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var o=arguments[0],t=arguments[1],e=arguments[2];this.coord=new at(o),this.segmentIndex=t,this.dist=e}}])}(),eo=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"print",value:function(o){o.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(o)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(o){this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var r=t.next(),l=this.createSplitEdge(e,r);o.add(l),e=r}}},{key:"addEndpoints",value:function(){var o=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[o],o,0)}},{key:"createSplitEdge",value:function(o,t){var e=t.segmentIndex-o.segmentIndex+2,r=this.edge.pts[t.segmentIndex],l=t.dist>0||!t.coord.equals2D(r);l||e--;var g=new Array(e).fill(null),v=0;g[v++]=new at(o.coord);for(var b=o.segmentIndex+1;b<=t.segmentIndex;b++)g[v++]=this.edge.pts[b];return l&&(g[v]=t.coord),new cs(g,new Pn(this.edge._label))}},{key:"add",value:function(o,t,e){var r=new Xo(o,t,e),l=this._nodeMap.get(r);return l!==null?l:(this._nodeMap.put(r,r),r)}},{key:"isIntersection",value:function(o){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(o))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Je,this.edge=null;var o=arguments[0];this.edge=o}}])}(),hs=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(o.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])||o.isTrue(this._matrix[Y.INTERIOR][Y.BOUNDARY])||o.isTrue(this._matrix[Y.BOUNDARY][Y.INTERIOR])||o.isTrue(this._matrix[Y.BOUNDARY][Y.BOUNDARY]))&&this._matrix[Y.EXTERIOR][Y.INTERIOR]===Mt.FALSE&&this._matrix[Y.EXTERIOR][Y.BOUNDARY]===Mt.FALSE}},{key:"isCoveredBy",value:function(){return(o.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])||o.isTrue(this._matrix[Y.INTERIOR][Y.BOUNDARY])||o.isTrue(this._matrix[Y.BOUNDARY][Y.INTERIOR])||o.isTrue(this._matrix[Y.BOUNDARY][Y.BOUNDARY]))&&this._matrix[Y.INTERIOR][Y.EXTERIOR]===Mt.FALSE&&this._matrix[Y.BOUNDARY][Y.EXTERIOR]===Mt.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var r=Math.trunc(e/3),l=e%3;this._matrix[r][l]=Mt.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var g=arguments[0],v=arguments[1],b=arguments[2];this._matrix[g][v]=b}}},{key:"isContains",value:function(){return o.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&this._matrix[Y.EXTERIOR][Y.INTERIOR]===Mt.FALSE&&this._matrix[Y.EXTERIOR][Y.BOUNDARY]===Mt.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var r=Math.trunc(e/3),l=e%3;this.setAtLeast(r,l,Mt.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var g=arguments[0],v=arguments[1],b=arguments[2];this._matrix[g][v]<b&&(this._matrix[g][v]=b)}}},{key:"setAtLeastIfValid",value:function(t,e,r){t>=0&&e>=0&&this.setAtLeast(t,e,r)}},{key:"isWithin",value:function(){return o.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&this._matrix[Y.INTERIOR][Y.EXTERIOR]===Mt.FALSE&&this._matrix[Y.BOUNDARY][Y.EXTERIOR]===Mt.FALSE}},{key:"isTouches",value:function(t,e){return t>e?this.isTouches(e,t):(t===Mt.A&&e===Mt.A||t===Mt.L&&e===Mt.L||t===Mt.L&&e===Mt.A||t===Mt.P&&e===Mt.A||t===Mt.P&&e===Mt.L)&&this._matrix[Y.INTERIOR][Y.INTERIOR]===Mt.FALSE&&(o.isTrue(this._matrix[Y.INTERIOR][Y.BOUNDARY])||o.isTrue(this._matrix[Y.BOUNDARY][Y.INTERIOR])||o.isTrue(this._matrix[Y.BOUNDARY][Y.BOUNDARY]))}},{key:"isOverlaps",value:function(t,e){return t===Mt.P&&e===Mt.P||t===Mt.A&&e===Mt.A?o.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&o.isTrue(this._matrix[Y.INTERIOR][Y.EXTERIOR])&&o.isTrue(this._matrix[Y.EXTERIOR][Y.INTERIOR]):t===Mt.L&&e===Mt.L&&this._matrix[Y.INTERIOR][Y.INTERIOR]===1&&o.isTrue(this._matrix[Y.INTERIOR][Y.EXTERIOR])&&o.isTrue(this._matrix[Y.EXTERIOR][Y.INTERIOR])}},{key:"isEquals",value:function(t,e){return t===e&&o.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&this._matrix[Y.INTERIOR][Y.EXTERIOR]===Mt.FALSE&&this._matrix[Y.BOUNDARY][Y.EXTERIOR]===Mt.FALSE&&this._matrix[Y.EXTERIOR][Y.INTERIOR]===Mt.FALSE&&this._matrix[Y.EXTERIOR][Y.BOUNDARY]===Mt.FALSE}},{key:"toString",value:function(){for(var t=new Ae("123456789"),e=0;e<3;e++)for(var r=0;r<3;r++)t.setCharAt(3*e+r,Mt.toDimensionSymbol(this._matrix[e][r]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var r=0;r<3;r++)this._matrix[e][r]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(t.length!==9)throw new yt("Should be length 9: "+t);for(var e=0;e<3;e++)for(var r=0;r<3;r++)if(!o.matches(this._matrix[e][r],t.charAt(3*e+r)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var r=0;r<3;r++)this.setAtLeast(e,r,t.get(e,r))}},{key:"isDisjoint",value:function(){return this._matrix[Y.INTERIOR][Y.INTERIOR]===Mt.FALSE&&this._matrix[Y.INTERIOR][Y.BOUNDARY]===Mt.FALSE&&this._matrix[Y.BOUNDARY][Y.INTERIOR]===Mt.FALSE&&this._matrix[Y.BOUNDARY][Y.BOUNDARY]===Mt.FALSE}},{key:"isCrosses",value:function(t,e){return t===Mt.P&&e===Mt.L||t===Mt.P&&e===Mt.A||t===Mt.L&&e===Mt.A?o.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&o.isTrue(this._matrix[Y.INTERIOR][Y.EXTERIOR]):t===Mt.L&&e===Mt.P||t===Mt.A&&e===Mt.P||t===Mt.A&&e===Mt.L?o.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&o.isTrue(this._matrix[Y.EXTERIOR][Y.INTERIOR]):t===Mt.L&&e===Mt.L&&this._matrix[Y.INTERIOR][Y.INTERIOR]===0}},{key:"interfaces_",get:function(){return[Nt]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Mt.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];o.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof o){var e=arguments[0];o.constructor_.call(this),this._matrix[Y.INTERIOR][Y.INTERIOR]=e._matrix[Y.INTERIOR][Y.INTERIOR],this._matrix[Y.INTERIOR][Y.BOUNDARY]=e._matrix[Y.INTERIOR][Y.BOUNDARY],this._matrix[Y.INTERIOR][Y.EXTERIOR]=e._matrix[Y.INTERIOR][Y.EXTERIOR],this._matrix[Y.BOUNDARY][Y.INTERIOR]=e._matrix[Y.BOUNDARY][Y.INTERIOR],this._matrix[Y.BOUNDARY][Y.BOUNDARY]=e._matrix[Y.BOUNDARY][Y.BOUNDARY],this._matrix[Y.BOUNDARY][Y.EXTERIOR]=e._matrix[Y.BOUNDARY][Y.EXTERIOR],this._matrix[Y.EXTERIOR][Y.INTERIOR]=e._matrix[Y.EXTERIOR][Y.INTERIOR],this._matrix[Y.EXTERIOR][Y.BOUNDARY]=e._matrix[Y.EXTERIOR][Y.BOUNDARY],this._matrix[Y.EXTERIOR][Y.EXTERIOR]=e._matrix[Y.EXTERIOR][Y.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===Mt.SYM_DONTCARE||e===Mt.SYM_TRUE&&(t>=0||t===Mt.TRUE)||e===Mt.SYM_FALSE&&t===Mt.FALSE||e===Mt.SYM_P&&t===Mt.P||e===Mt.SYM_L&&t===Mt.L||e===Mt.SYM_A&&t===Mt.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var r=arguments[1];return new o(arguments[0]).matches(r)}}},{key:"isTrue",value:function(t){return t>=0||t===Mt.TRUE}}])}(),Lo=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return t===null||t.length===0?null:(this.ensureCapacity(this._size+t.length),on.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=sn.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return on.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)o.constructor_.call(this,10);else if(arguments.length===1){var t=arguments[0];this._data=new Array(t).fill(null)}}}])}(),Is=function(){function o(){p(this,o)}return C(o,[{key:"getChainStartIndices",value:function(t){var e=0,r=new Lo(Math.trunc(t.length/2));r.add(e);do{var l=this.findChainEnd(t,e);r.add(l),e=l}while(e<t.length-1);return r.toArray()}},{key:"findChainEnd",value:function(t,e){for(var r=yn.quadrant(t[e],t[e+1]),l=e+1;l<t.length&&yn.quadrant(t[l-1],t[l])===r;)l++;return l-1}},{key:"OLDgetChainStartIndices",value:function(t){var e=0,r=new ee;r.add(e);do{var l=this.findChainEnd(t,e);r.add(l),e=l}while(e<t.length-1);return o.toIntArray(r)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e}}])}(),Ti=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(o){var t=this.pts[this.startIndex[o]].x,e=this.pts[this.startIndex[o+1]].x;return t>e?t:e}},{key:"getMinX",value:function(o){var t=this.pts[this.startIndex[o]].x,e=this.pts[this.startIndex[o+1]].x;return t<e?t:e}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var o=arguments[0],t=arguments[1],e=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[o],this.startIndex[o+1],t,t.startIndex[e],t.startIndex[e+1],r)}else if(arguments.length===6){var l=arguments[0],g=arguments[1],v=arguments[2],b=arguments[3],R=arguments[4],z=arguments[5];if(g-l==1&&R-b==1)return z.addIntersections(this.e,l,v.e,b),null;if(!this.overlaps(l,g,v,b,R))return null;var et=Math.trunc((l+g)/2),lt=Math.trunc((b+R)/2);l<et&&(b<lt&&this.computeIntersectsForChain(l,et,v,b,lt,z),lt<R&&this.computeIntersectsForChain(l,et,v,lt,R,z)),et<g&&(b<lt&&this.computeIntersectsForChain(et,g,v,b,lt,z),lt<R&&this.computeIntersectsForChain(et,g,v,lt,R,z))}}},{key:"overlaps",value:function(o,t,e,r,l){return Ne.intersects(this.pts[o],this.pts[t],e.pts[r],e.pts[l])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(o,t){for(var e=0;e<this.startIndex.length-1;e++)for(var r=0;r<o.startIndex.length-1;r++)this.computeIntersectsForChain(e,o,r,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var o=arguments[0];this.e=o,this.pts=o.getCoordinates();var t=new Is;this.startIndex=t.getChainStartIndices(this.pts)}}])}(),no=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,r){this._depth[t][e]=r}},{key:"isNull",value:function(){if(arguments.length===0){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==o.NULL_VALUE)return!1;return!0}if(arguments.length===1){var r=arguments[0];return this._depth[r][1]===o.NULL_VALUE}if(arguments.length===2){var l=arguments[0],g=arguments[1];return this._depth[l][g]===o.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var r=1;r<3;r++){var l=0;this._depth[t][r]>e&&(l=1),this._depth[t][r]=l}}}},{key:"getDelta",value:function(t){return this._depth[t][At.RIGHT]-this._depth[t][At.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?Y.EXTERIOR:Y.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<2;e++)for(var r=1;r<3;r++){var l=t.getLocation(e,r);l!==Y.EXTERIOR&&l!==Y.INTERIOR||(this.isNull(e,r)?this._depth[e][r]=o.depthAtLocation(l):this._depth[e][r]+=o.depthAtLocation(l))}else if(arguments.length===3){var g=arguments[0],v=arguments[1];arguments[2]===Y.INTERIOR&&this._depth[g][v]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=o.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===Y.EXTERIOR?0:t===Y.INTERIOR?1:o.NULL_VALUE}}])}();no.NULL_VALUE=-1;var cs=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,Pn.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var r=e;if(this.pts.length!==r.pts.length)return!1;for(var l=!0,g=!0,v=this.pts.length,b=0;b<this.pts.length;b++)if(this.pts[b].equals2D(r.pts[b])||(l=!1),this.pts[b].equals2D(r.pts[--v])||(g=!1),!l&&!g)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var e=arguments[0];return this.pts[e]}}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var r=0;r<this.pts.length;r++)r>0&&e.print(","),e.print(this.pts[r].x+" "+this.pts[r].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var r=this.pts.length-1;r>=0;r--)e.print(this.pts[r]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Ti(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new Ne;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,r,l,g){var v=new at(e.getIntersection(g)),b=r,R=e.getEdgeDistance(l,g),z=b+1;if(z<this.pts.length){var et=this.pts[z];v.equals2D(et)&&(b=z,R=0)}this.eiList.add(v,b,R)}},{key:"toString",value:function(){var e=new Ae;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var r=0;r<this.pts.length;r++)r>0&&e.append(","),e.append(this.pts[r].x+" "+this.pts[r].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var r=0;r<this.pts.length;r++)if(!this.pts[r].equals2D(e.pts[r]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,r,l){for(var g=0;g<e.getIntersectionNum();g++)this.addIntersection(e,r,l,g)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new eo(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new no,this._depthDelta=0,arguments.length===1){var e=arguments[0];t.constructor_.call(this,e,null)}else if(arguments.length===2){var r=arguments[0],l=arguments[1];this.pts=r,this._label=l}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof hs&&arguments[0]instanceof Pn))return V(t,"updateIM",this).apply(this,arguments);var e=arguments[0],r=arguments[1];r.setAtLeastIfValid(e.getLocation(0,At.ON),e.getLocation(1,At.ON),1),e.isArea()&&(r.setAtLeastIfValid(e.getLocation(0,At.LEFT),e.getLocation(1,At.LEFT),2),r.setAtLeastIfValid(e.getLocation(0,At.RIGHT),e.getLocation(1,At.RIGHT),2))}}])}(qe),io=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(e!==null){var r=e.getLabel(),l=t.getLabel();e.isPointwiseEqual(t)||(l=new Pn(t.getLabel())).flip(),r.merge(l);var g=o.depthDelta(l),v=e.getDepthDelta()+g;e.setDepthDelta(v)}else this._edgeList.add(t),t.setDepthDelta(o.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var r=new ee,l=t.iterator();l.hasNext();){var g=l.next(),v=g.getRightmostCoordinate(),b=new tn(r).getDepth(v);g.computeDepth(b),g.findResultEdges(),r.add(g),e.add(g.getDirectedEdges(),g.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new ee,r=t.getNodes().iterator();r.hasNext();){var l=r.next();if(!l.isVisited()){var g=new pn;g.create(l),e.add(g)}}return Ee.sort(e,Ee.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(this._workingNoder!==null)return this._workingNoder;var e=new nn,r=new Ui;return r.setPrecisionModel(t),e.setSegmentIntersector(new Ur(r)),e}},{key:"buffer",value:function(t,e){var r=this._workingPrecisionModel;r===null&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var l=new Vi(r,this._bufParams),g=new vo(t,e,l).getCurves();if(g.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(g,r),this._graph=new go(new yr),this._graph.addEdges(this._edgeList.getEdges());var v=this.createSubgraphs(this._graph),b=new Ms(this._geomFact);this.buildSubgraphs(v,b);var R=b.getPolygons();return R.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(R)}},{key:"computeNodedEdges",value:function(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var l=r.getNodedSubstrings().iterator();l.hasNext();){var g=l.next(),v=g.getCoordinates();if(v.length!==2||!v[0].equals2D(v[1])){var b=g.getData(),R=new cs(g.getCoordinates(),new Pn(b));this.insertUniqueEdge(R)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Un;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,At.LEFT),r=t.getLocation(0,At.RIGHT);return e===Y.INTERIOR&&r===Y.EXTERIOR?1:e===Y.EXTERIOR&&r===Y.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new bi,r=new ee;t.hasNext();){var l=t.next(),g=e.createLineString(l.getCoordinates());r.add(g)}return e.buildGeometry(r)}}])}(),vr=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"rescale",value:function(){if(he(arguments[0],kn))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],l=0;l<r.length;l++)r[l].x=r[l].x/this._scaleFactor+this._offsetX,r[l].y=r[l].y/this._scaleFactor+this._offsetY;r.length===2&&r[0].equals2D(r[1])&&on.out.println(r)}}},{key:"scale",value:function(){if(he(arguments[0],kn)){for(var t=arguments[0],e=new ee(t.size()),r=t.iterator();r.hasNext();){var l=r.next();e.add(new Zi(this.scale(l.getCoordinates()),l.getData()))}return e}if(arguments[0]instanceof Array){for(var g=arguments[0],v=new Array(g.length).fill(null),b=0;b<g.length;b++)v[b]=new at(Math.round((g[b].x-this._offsetX)*this._scaleFactor),Math.round((g[b].y-this._offsetY)*this._scaleFactor),g[b].getZ());return $.removeRepeatedPoints(v)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[mo]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];o.constructor_.call(this,t,e,0,0)}else if(arguments.length===4){var r=arguments[0],l=arguments[1];this._noder=r,this._scaleFactor=l,this._isScaled=!this.isIntegerPrecision()}}}])}(),hi=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(arguments.length===2){for(var r=arguments[0],l=arguments[1].iterator();l.hasNext();)for(var g=l.next().getCoordinates(),v=1;v<g.length-1;v++)if(g[v].equals(r))throw new xe("found endpt/interior pt intersection at index "+v+" :pt "+r)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),r=this._segStrings.iterator();r.hasNext();){var l=r.next();this.checkInteriorIntersections(e,l)}else if(arguments.length===2)for(var g=arguments[0],v=arguments[1],b=g.getCoordinates(),R=v.getCoordinates(),z=0;z<b.length-1;z++)for(var et=0;et<R.length-1;et++)this.checkInteriorIntersections(g,z,v,et);else if(arguments.length===4){var lt=arguments[0],kt=arguments[1],Ot=arguments[2],Yt=arguments[3];if(lt===Ot&&kt===Yt)return null;var ne=lt.getCoordinates()[kt],Ce=lt.getCoordinates()[kt+1],we=Ot.getCoordinates()[Yt],Ue=Ot.getCoordinates()[Yt+1];if(this._li.computeIntersection(ne,Ce,we,Ue),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,ne,Ce)||this.hasInteriorIntersection(this._li,we,Ue)))throw new xe("found non-noded intersection at "+ne+"-"+Ce+" and "+we+"-"+Ue)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var r=arguments[0].getCoordinates(),l=0;l<r.length-2;l++)this.checkCollapse(r[l],r[l+1],r[l+2])}},{key:"hasInteriorIntersection",value:function(t,e,r){for(var l=0;l<t.getIntersectionNum();l++){var g=t.getIntersection(l);if(!g.equals(e)&&!g.equals(r))return!0}return!1}},{key:"checkCollapse",value:function(t,e,r){if(t.equals(r))throw new xe("found non-noded collapse at "+o.fact.createLineString([t,e,r]))}}],[{key:"constructor_",value:function(){this._li=new Ui,this._segStrings=null;var t=arguments[0];this._segStrings=t}}])}();hi.fact=new bi;var Wo=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"intersectsScaled",value:function(t,e){var r=Math.min(t.x,e.x),l=Math.max(t.x,e.x),g=Math.min(t.y,e.y),v=Math.max(t.y,e.y),b=this._maxx<r||this._minx>l||this._maxy<g||this._miny>v;if(b)return!1;var R=this.intersectsToleranceSquare(t,e);return Ht.isTrue(!(b&&R),"Found bad envelope test"),R}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new at(this._maxx,this._maxy),this._corner[1]=new at(this._minx,this._maxy),this._corner[2]=new at(this._minx,this._miny),this._corner[3]=new at(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return this._scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var t=o.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ne(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(t,e){var r=!1,l=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(l=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!r||!l)||!!t.equals(this._pt)||!!e.equals(this._pt))))}},{key:"addSnappedNode",value:function(t,e){var r=t.getCoordinate(e),l=t.getCoordinate(e+1);return!!this.intersects(r,l)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=r,e<=0)throw new yt("Scale factor must be non-zero");e!==1&&(this._pt=new at(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new at,this._p1Scaled=new at),this.initCorners(this._pt)}}])}();Wo.SAFE_ENV_EXPANSION_FACTOR=.75;var Jn=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var o=arguments[1];arguments[0].getLineSegment(o,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new zn}}])}(),fs=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var o=arguments[0];return this.snap(o,null,-1)}if(arguments.length===3){var t=arguments[0],e=arguments[1],r=arguments[2],l=t.getSafeEnvelope(),g=new Ai(t,e,r);return this._index.query(l,new(function(){return C(function v(){p(this,v)},[{key:"interfaces_",get:function(){return[rs]}},{key:"visitItem",value:function(v){v.select(l,g)}}])}())),g.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var o=arguments[0];this._index=o}}])}(),Ai=function(o){function t(){var e;return p(this,t),e=m(this,t),t.constructor_.apply(e,arguments),e}return G(t,o),C(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Yo))return V(t,"select",this,1).apply(this,arguments);var e=arguments[1],r=arguments[0].getContext();if(this._parentEdge===r&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(r,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],r=arguments[1],l=arguments[2];this._hotPixel=e,this._parentEdge=r,this._hotPixelVertexIndex=l}}])}(Jn);fs.HotPixelSnapAction=Ai;var Zr=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(o,t,e,r){if(o===e&&t===r)return null;var l=o.getCoordinates()[t],g=o.getCoordinates()[t+1],v=e.getCoordinates()[r],b=e.getCoordinates()[r+1];if(this._li.computeIntersection(l,g,v,b),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var R=0;R<this._li.getIntersectionNum();R++)this._interiorIntersections.add(this._li.getIntersection(R));o.addIntersections(this._li,t,0),e.addIntersections(this._li,r,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[ls]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var o=arguments[0];this._li=o,this._interiorIntersections=new ee}}])}(),Vr=function(){return C(function o(){p(this,o),o.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(o){var t=Zi.getNodedSubstrings(o),e=new hi(t);try{e.checkValid()}catch(r){if(!(r instanceof wt))throw r;r.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Zi.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(o,t){var e=this.findInteriorIntersections(o,t);this.computeIntersectionSnaps(e),this.computeVertexSnaps(o)}},{key:"findInteriorIntersections",value:function(o,t){var e=new Zr(t);return this._noder.setSegmentIntersector(e),this._noder.computeNodes(o),e.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(he(arguments[0],kn))for(var o=arguments[0].iterator();o.hasNext();){var t=o.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof Zi)for(var e=arguments[0],r=e.getCoordinates(),l=0;l<r.length;l++){var g=new Wo(r[l],this._scaleFactor,this._li);this._pointSnapper.snap(g,e,l)&&e.addIntersection(r[l],l)}}},{key:"computeNodes",value:function(o){this._nodedSegStrings=o,this._noder=new nn,this._pointSnapper=new fs(this._noder.getIndex()),this.snapRound(o,this._li)}},{key:"computeIntersectionSnaps",value:function(o){for(var t=o.iterator();t.hasNext();){var e=t.next(),r=new Wo(e,this._scaleFactor,this._li);this._pointSnapper.snap(r)}}},{key:"interfaces_",get:function(){return[mo]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var o=arguments[0];this._pm=o,this._li=new Ui,this._li.setPrecisionModel(o),this._scaleFactor=o.getScale()}}])}(),ar=function(){function o(){p(this,o),o.constructor_.apply(this,arguments)}return C(o,[{key:"bufferFixedPrecision",value:function(t){var e=new vr(new Vr(new Ie(1)),t.getScale()),r=new io(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this._resultGeometry=r.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var t=o.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(g){if(!(g instanceof Nn))throw g;this._saveException=g}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var e=arguments[0],r=o.precisionScaleFactor(this._argGeom,this._distance,e),l=new Ie(r);this.bufferFixedPrecision(l)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Ie.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new io(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof xe))throw e;this._saveException=e}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new _t,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this._argGeom=e,this._bufParams=r}}},{key:"bufferOp",value:function(){if(arguments.length===2){var t=arguments[1];return new o(arguments[0]).getResultGeometry(t)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Xt&&typeof arguments[1]=="number"){var e=arguments[1],r=arguments[2],l=new o(arguments[0]);return l.setQuadrantSegments(r),l.getResultGeometry(e)}if(arguments[2]instanceof _t&&arguments[0]instanceof Xt&&typeof arguments[1]=="number"){var g=arguments[1];return new o(arguments[0],arguments[2]).getResultGeometry(g)}}else if(arguments.length===4){var v=arguments[1],b=arguments[2],R=arguments[3],z=new o(arguments[0]);return z.setQuadrantSegments(b),z.setEndCapStyle(R),z.getResultGeometry(v)}}},{key:"precisionScaleFactor",value:function(t,e,r){var l=t.getEnvelopeInternal(),g=Qi.max(Math.abs(l.getMaxX()),Math.abs(l.getMaxY()),Math.abs(l.getMinX()),Math.abs(l.getMinY()))+2*(e>0?e:0),v=r-Math.trunc(Math.log(g)/Math.log(10)+1);return Math.pow(10,v)}}])}();ar.CAP_ROUND=_t.CAP_ROUND,ar.CAP_BUTT=_t.CAP_FLAT,ar.CAP_FLAT=_t.CAP_FLAT,ar.CAP_SQUARE=_t.CAP_SQUARE,ar.MAX_PRECISION_DIGITS=12;var ko=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xo=function(){return C(function o(t){p(this,o),this.geometryFactory=t||new bi},[{key:"read",value:function(o){var t,e=(t=typeof o=="string"?JSON.parse(o):o).type;if(!vn[e])throw new Error("Unknown GeoJSON type: "+t.type);return ko.indexOf(e)!==-1?vn[e].call(this,t.coordinates):e==="GeometryCollection"?vn[e].call(this,t.geometries):vn[e].call(this,t)}},{key:"write",value:function(o){var t=o.getGeometryType();if(!xn[t])throw new Error("Geometry is not supported");return xn[t].call(this,o)}}])}(),vn={Feature:function(o){var t={};for(var e in o)t[e]=o[e];if(o.geometry){var r=o.geometry.type;if(!vn[r])throw new Error("Unknown GeoJSON type: "+o.type);t.geometry=this.read(o.geometry)}return o.bbox&&(t.bbox=vn.bbox.call(this,o.bbox)),t},FeatureCollection:function(o){var t={};if(o.features){t.features=[];for(var e=0;e<o.features.length;++e)t.features.push(this.read(o.features[e]))}return o.bbox&&(t.bbox=this.parse.bbox.call(this,o.bbox)),t},coordinates:function(o){for(var t=[],e=0;e<o.length;++e){var r=o[e];t.push(x(at,tt(r)))}return t},bbox:function(o){return this.geometryFactory.createLinearRing([new at(o[0],o[1]),new at(o[2],o[1]),new at(o[2],o[3]),new at(o[0],o[3]),new at(o[0],o[1])])},Point:function(o){var t=x(at,tt(o));return this.geometryFactory.createPoint(t)},MultiPoint:function(o){for(var t=[],e=0;e<o.length;++e)t.push(vn.Point.call(this,o[e]));return this.geometryFactory.createMultiPoint(t)},LineString:function(o){var t=vn.coordinates.call(this,o);return this.geometryFactory.createLineString(t)},MultiLineString:function(o){for(var t=[],e=0;e<o.length;++e)t.push(vn.LineString.call(this,o[e]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(o){for(var t=vn.coordinates.call(this,o[0]),e=this.geometryFactory.createLinearRing(t),r=[],l=1;l<o.length;++l){var g=o[l],v=vn.coordinates.call(this,g),b=this.geometryFactory.createLinearRing(v);r.push(b)}return this.geometryFactory.createPolygon(e,r)},MultiPolygon:function(o){for(var t=[],e=0;e<o.length;++e){var r=o[e];t.push(vn.Polygon.call(this,r))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(o){for(var t=[],e=0;e<o.length;++e){var r=o[e];t.push(this.read(r))}return this.geometryFactory.createGeometryCollection(t)}},xn={coordinate:function(o){var t=[o.x,o.y];return o.z&&t.push(o.z),o.m&&t.push(o.m),t},Point:function(o){return{type:"Point",coordinates:xn.coordinate.call(this,o.getCoordinate())}},MultiPoint:function(o){for(var t=[],e=0;e<o._geometries.length;++e){var r=o._geometries[e],l=xn.Point.call(this,r);t.push(l.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(o){for(var t=[],e=o.getCoordinates(),r=0;r<e.length;++r){var l=e[r];t.push(xn.coordinate.call(this,l))}return{type:"LineString",coordinates:t}},MultiLineString:function(o){for(var t=[],e=0;e<o._geometries.length;++e){var r=o._geometries[e],l=xn.LineString.call(this,r);t.push(l.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(o){var t=[],e=xn.LineString.call(this,o._shell);t.push(e.coordinates);for(var r=0;r<o._holes.length;++r){var l=o._holes[r],g=xn.LineString.call(this,l);t.push(g.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(o){for(var t=[],e=0;e<o._geometries.length;++e){var r=o._geometries[e],l=xn.Polygon.call(this,r);t.push(l.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(o){for(var t=[],e=0;e<o._geometries.length;++e){var r=o._geometries[e],l=r.getGeometryType();t.push(xn[l].call(this,r))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:ar,GeoJSONReader:function(){return C(function o(t){p(this,o),this.parser=new xo(t||new bi)},[{key:"read",value:function(o){return this.parser.read(o)}}])}(),GeoJSONWriter:function(){return C(function o(){p(this,o),this.parser=new xo(this.geometryFactory)},[{key:"write",value:function(o){return this.parser.write(o)}}])}()}})});var Th=sl((Ha,Sh)=>{(function(d,m){typeof Ha=="object"&&typeof Sh<"u"?m(Ha):typeof define=="function"&&define.amd?define(["exports"],m):(d=typeof globalThis<"u"?globalThis:d||self,m(d.leaflet={}))})(Ha,function(d){"use strict";var m="1.9.4";function p(n){var a,c,_,w;for(c=1,_=arguments.length;c<_;c++){w=arguments[c];for(a in w)n[a]=w[a]}return n}var x=Object.create||function(){function n(){}return function(a){return n.prototype=a,new n}}();function T(n,a){var c=Array.prototype.slice;if(n.bind)return n.bind.apply(n,c.call(arguments,1));var _=c.call(arguments,2);return function(){return n.apply(a,_.length?_.concat(c.call(arguments)):arguments)}}var C=0;function S(n){return"_leaflet_id"in n||(n._leaflet_id=++C),n._leaflet_id}function W(n,a,c){var _,w,I,j;return j=function(){_=!1,w&&(I.apply(c,w),w=!1)},I=function(){_?w=arguments:(n.apply(c,arguments),setTimeout(j,a),_=!0)},I}function nt(n,a,c){var _=a[1],w=a[0],I=_-w;return n===_&&c?n:((n-w)%I+I)%I+w}function G(){return!1}function U(n,a){if(a===!1)return n;var c=Math.pow(10,a===void 0?6:a);return Math.round(n*c)/c}function Z(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function V(n){return Z(n).split(/\s+/)}function tt(n,a){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?x(n.options):{});for(var c in a)n.options[c]=a[c];return n.options}function ct(n,a,c){var _=[];for(var w in n)_.push(encodeURIComponent(c?w.toUpperCase():w)+"="+encodeURIComponent(n[w]));return(!a||a.indexOf("?")===-1?"?":"&")+_.join("&")}var bt=/\{ *([\w_ -]+) *\}/g;function Lt(n,a){return n.replace(bt,function(c,_){var w=a[_];if(w===void 0)throw new Error("No value provided for variable "+c);return typeof w=="function"&&(w=w(a)),w})}var _t=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function wt(n,a){for(var c=0;c<n.length;c++)if(n[c]===a)return c;return-1}var yt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ct(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var It=0;function Nt(n){var a=+new Date,c=Math.max(0,16-(a-It));return It=a+c,window.setTimeout(n,c)}var Dt=window.requestAnimationFrame||Ct("RequestAnimationFrame")||Nt,Zt=window.cancelAnimationFrame||Ct("CancelAnimationFrame")||Ct("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function Ft(n,a,c){if(c&&Dt===Nt)n.call(a);else return Dt.call(window,T(n,a))}function jt(n){n&&Zt.call(window,n)}var Vt={__proto__:null,extend:p,create:x,bind:T,get lastId(){return C},stamp:S,throttle:W,wrapNum:nt,falseFn:G,formatNum:U,trim:Z,splitWords:V,setOptions:tt,getParamString:ct,template:Lt,isArray:_t,indexOf:wt,emptyImageUrl:yt,requestFn:Dt,cancelFn:Zt,requestAnimFrame:Ft,cancelAnimFrame:jt};function oe(){}oe.extend=function(n){var a=function(){tt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,_=x(c);_.constructor=a,a.prototype=_;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(a[w]=this[w]);return n.statics&&p(a,n.statics),n.includes&&(Pe(n.includes),p.apply(null,[_].concat(n.includes))),p(_,n),delete _.statics,delete _.includes,_.options&&(_.options=c.options?x(c.options):{},p(_.options,n.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,j=_._initHooks.length;I<j;I++)_._initHooks[I].call(this)}},a},oe.include=function(n){var a=this.prototype.options;return p(this.prototype,n),n.options&&(this.prototype.options=a,this.mergeOptions(n.options)),this},oe.mergeOptions=function(n){return p(this.prototype.options,n),this},oe.addInitHook=function(n){var a=Array.prototype.slice.call(arguments,1),c=typeof n=="function"?n:function(){this[n].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Pe(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=_t(n)?n:[n];for(var a=0;a<n.length;a++)n[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Tt={on:function(n,a,c){if(typeof n=="object")for(var _ in n)this._on(_,n[_],a);else{n=V(n);for(var w=0,I=n.length;w<I;w++)this._on(n[w],a,c)}return this},off:function(n,a,c){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var _ in n)this._off(_,n[_],a);else{n=V(n);for(var w=arguments.length===1,I=0,j=n.length;I<j;I++)w?this._off(n[I]):this._off(n[I],a,c)}return this},_on:function(n,a,c,_){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(n,a,c)===!1){c===this&&(c=void 0);var w={fn:a,ctx:c};_&&(w.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(w)}},_off:function(n,a,c){var _,w,I;if(this._events&&(_=this._events[n],!!_)){if(arguments.length===1){if(this._firingCount)for(w=0,I=_.length;w<I;w++)_[w].fn=G;delete this._events[n];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var j=this._listens(n,a,c);if(j!==!1){var ft=_[j];this._firingCount&&(ft.fn=G,this._events[n]=_=_.slice()),_.splice(j,1)}}},fire:function(n,a,c){if(!this.listens(n,c))return this;var _=p({},a,{type:n,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var w=this._events[n];if(w){this._firingCount=this._firingCount+1||1;for(var I=0,j=w.length;I<j;I++){var ft=w[I],pt=ft.fn;ft.once&&this.off(n,pt,ft.ctx),pt.call(ft.ctx||this,_)}this._firingCount--}}return c&&this._propagateEvent(_),this},listens:function(n,a,c,_){typeof n!="string"&&console.warn('"string" type argument expected');var w=a;typeof a!="function"&&(_=!!a,w=void 0,c=void 0);var I=this._events&&this._events[n];if(I&&I.length&&this._listens(n,w,c)!==!1)return!0;if(_){for(var j in this._eventParents)if(this._eventParents[j].listens(n,a,c,_))return!0}return!1},_listens:function(n,a,c){if(!this._events)return!1;var _=this._events[n]||[];if(!a)return!!_.length;c===this&&(c=void 0);for(var w=0,I=_.length;w<I;w++)if(_[w].fn===a&&_[w].ctx===c)return w;return!1},once:function(n,a,c){if(typeof n=="object")for(var _ in n)this._on(_,n[_],a,!0);else{n=V(n);for(var w=0,I=n.length;w<I;w++)this._on(n[w],a,c,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[S(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[S(n)],this},_propagateEvent:function(n){for(var a in this._eventParents)this._eventParents[a].fire(n.type,p({layer:n.target,propagatedFrom:n.target},n),!0)}};Tt.addEventListener=Tt.on,Tt.removeEventListener=Tt.clearAllEventListeners=Tt.off,Tt.addOneTimeEventListener=Tt.once,Tt.fireEvent=Tt.fire,Tt.hasEventListeners=Tt.listens;var se=oe.extend(Tt);function zt(n,a,c){this.x=c?Math.round(n):n,this.y=c?Math.round(a):a}var Oe=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};zt.prototype={clone:function(){return new zt(this.x,this.y)},add:function(n){return this.clone()._add(vt(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(vt(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new zt(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new zt(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Oe(this.x),this.y=Oe(this.y),this},distanceTo:function(n){n=vt(n);var a=n.x-this.x,c=n.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(n){return n=vt(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=vt(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+U(this.x)+", "+U(this.y)+")"}};function vt(n,a,c){return n instanceof zt?n:_t(n)?new zt(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new zt(n.x,n.y):new zt(n,a,c)}function fe(n,a){if(n)for(var c=a?[n,a]:n,_=0,w=c.length;_<w;_++)this.extend(c[_])}fe.prototype={extend:function(n){var a,c;if(!n)return this;if(n instanceof zt||typeof n[0]=="number"||"x"in n)a=c=vt(n);else if(n=xe(n),a=n.min,c=n.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(n){return vt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return vt(this.min.x,this.max.y)},getTopRight:function(){return vt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var a,c;return typeof n[0]=="number"||n instanceof zt?n=vt(n):n=xe(n),n instanceof fe?(a=n.min,c=n.max):a=c=n,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(n){n=xe(n);var a=this.min,c=this.max,_=n.min,w=n.max,I=w.x>=a.x&&_.x<=c.x,j=w.y>=a.y&&_.y<=c.y;return I&&j},overlaps:function(n){n=xe(n);var a=this.min,c=this.max,_=n.min,w=n.max,I=w.x>a.x&&_.x<c.x,j=w.y>a.y&&_.y<c.y;return I&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var a=this.min,c=this.max,_=Math.abs(a.x-c.x)*n,w=Math.abs(a.y-c.y)*n;return xe(vt(a.x-_,a.y-w),vt(c.x+_,c.y+w))},equals:function(n){return n?(n=xe(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function xe(n,a){return!n||n instanceof fe?n:new fe(n,a)}function ue(n,a){if(n)for(var c=a?[n,a]:n,_=0,w=c.length;_<w;_++)this.extend(c[_])}ue.prototype={extend:function(n){var a=this._southWest,c=this._northEast,_,w;if(n instanceof Qt)_=n,w=n;else if(n instanceof ue){if(_=n._southWest,w=n._northEast,!_||!w)return this}else return n?this.extend(pe(n)||Ht(n)):this;return!a&&!c?(this._southWest=new Qt(_.lat,_.lng),this._northEast=new Qt(w.lat,w.lng)):(a.lat=Math.min(_.lat,a.lat),a.lng=Math.min(_.lng,a.lng),c.lat=Math.max(w.lat,c.lat),c.lng=Math.max(w.lng,c.lng)),this},pad:function(n){var a=this._southWest,c=this._northEast,_=Math.abs(a.lat-c.lat)*n,w=Math.abs(a.lng-c.lng)*n;return new ue(new Qt(a.lat-_,a.lng-w),new Qt(c.lat+_,c.lng+w))},getCenter:function(){return new Qt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Qt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Qt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof Qt||"lat"in n?n=pe(n):n=Ht(n);var a=this._southWest,c=this._northEast,_,w;return n instanceof ue?(_=n.getSouthWest(),w=n.getNorthEast()):_=w=n,_.lat>=a.lat&&w.lat<=c.lat&&_.lng>=a.lng&&w.lng<=c.lng},intersects:function(n){n=Ht(n);var a=this._southWest,c=this._northEast,_=n.getSouthWest(),w=n.getNorthEast(),I=w.lat>=a.lat&&_.lat<=c.lat,j=w.lng>=a.lng&&_.lng<=c.lng;return I&&j},overlaps:function(n){n=Ht(n);var a=this._southWest,c=this._northEast,_=n.getSouthWest(),w=n.getNorthEast(),I=w.lat>a.lat&&_.lat<c.lat,j=w.lng>a.lng&&_.lng<c.lng;return I&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,a){return n?(n=Ht(n),this._southWest.equals(n.getSouthWest(),a)&&this._northEast.equals(n.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ht(n,a){return n instanceof ue?n:new ue(n,a)}function Qt(n,a,c){if(isNaN(n)||isNaN(a))throw new Error("Invalid LatLng object: ("+n+", "+a+")");this.lat=+n,this.lng=+a,c!==void 0&&(this.alt=+c)}Qt.prototype={equals:function(n,a){if(!n)return!1;n=pe(n);var c=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return c<=(a===void 0?1e-9:a)},toString:function(n){return"LatLng("+U(this.lat,n)+", "+U(this.lng,n)+")"},distanceTo:function(n){return at.distance(this,pe(n))},wrap:function(){return at.wrapLatLng(this)},toBounds:function(n){var a=180*n/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Ht([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new Qt(this.lat,this.lng,this.alt)}};function pe(n,a,c){return n instanceof Qt?n:_t(n)&&typeof n[0]!="object"?n.length===3?new Qt(n[0],n[1],n[2]):n.length===2?new Qt(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new Qt(n.lat,"lng"in n?n.lng:n.lon,n.alt):a===void 0?null:new Qt(n,a,c)}var ve={latLngToPoint:function(n,a){var c=this.projection.project(n),_=this.scale(a);return this.transformation._transform(c,_)},pointToLatLng:function(n,a){var c=this.scale(a),_=this.transformation.untransform(n,c);return this.projection.unproject(_)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(n),_=this.transformation.transform(a.min,c),w=this.transformation.transform(a.max,c);return new fe(_,w)},infinite:!1,wrapLatLng:function(n){var a=this.wrapLng?nt(n.lng,this.wrapLng,!0):n.lng,c=this.wrapLat?nt(n.lat,this.wrapLat,!0):n.lat,_=n.alt;return new Qt(c,a,_)},wrapLatLngBounds:function(n){var a=n.getCenter(),c=this.wrapLatLng(a),_=a.lat-c.lat,w=a.lng-c.lng;if(_===0&&w===0)return n;var I=n.getSouthWest(),j=n.getNorthEast(),ft=new Qt(I.lat-_,I.lng-w),pt=new Qt(j.lat-_,j.lng-w);return new ue(ft,pt)}},at=p({},ve,{wrapLng:[-180,180],R:6371e3,distance:function(n,a){var c=Math.PI/180,_=n.lat*c,w=a.lat*c,I=Math.sin((a.lat-n.lat)*c/2),j=Math.sin((a.lng-n.lng)*c/2),ft=I*I+Math.cos(_)*Math.cos(w)*j*j,pt=2*Math.atan2(Math.sqrt(ft),Math.sqrt(1-ft));return this.R*pt}}),Pr=6378137,Ne={R:Pr,MAX_LATITUDE:85.0511287798,project:function(n){var a=Math.PI/180,c=this.MAX_LATITUDE,_=Math.max(Math.min(c,n.lat),-c),w=Math.sin(_*a);return new zt(this.R*n.lng*a,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(n){var a=180/Math.PI;return new Qt((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*a,n.x*a/this.R)},bounds:function(){var n=Pr*Math.PI;return new fe([-n,-n],[n,n])}()};function Xt(n,a,c,_){if(_t(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=a,this._c=c,this._d=_}Xt.prototype={transform:function(n,a){return this._transform(n.clone(),a)},_transform:function(n,a){return a=a||1,n.x=a*(this._a*n.x+this._b),n.y=a*(this._c*n.y+this._d),n},untransform:function(n,a){return a=a||1,new zt((n.x/a-this._b)/this._a,(n.y/a-this._d)/this._c)}};function Y(n,a,c,_){return new Xt(n,a,c,_)}var kn=p({},at,{code:"EPSG:3857",projection:Ne,transformation:function(){var n=.5/(Math.PI*Ne.R);return Y(n,.5,-n,.5)}()}),ei=p({},kn,{code:"EPSG:900913"});function Rn(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Hn(n,a){var c="",_,w,I,j,ft,pt;for(_=0,I=n.length;_<I;_++){for(ft=n[_],w=0,j=ft.length;w<j;w++)pt=ft[w],c+=(w?"L":"M")+pt.x+" "+pt.y;c+=a?qt.svg?"z":"x":""}return c||"M0 0"}var Oi=document.documentElement.style,Ji="ActiveXObject"in window,At=Ji&&!document.addEventListener,wi="msLaunchUri"in navigator&&!("documentMode"in document),Li=sn("webkit"),ni=sn("android"),Wr=sn("android 2")||sn("android 3"),he=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Di=ni&&sn("Google")&&he<537&&!("AudioNode"in window),jn=!!window.opera,ii=!wi&&sn("chrome"),te=sn("gecko")&&!Li&&!jn&&!Ji,Sr=!ii&&sn("safari"),ke=sn("phantom"),ie="OTransition"in Oi,Tr=navigator.platform.indexOf("Win")===0,Nn=Ji&&"transition"in Oi,Bn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Wr,ee="MozPerspective"in Oi,Xn=!window.L_DISABLE_3D&&(Nn||Bn||ee)&&!ie&&!ke,pn=typeof orientation<"u"||sn("mobile"),$i=pn&&Li,on=pn&&Bn,Qi=!window.PointerEvent&&window.MSPointerEvent,mn=!!(window.PointerEvent||Qi),Fi="ontouchstart"in window||!!window.TouchEvent,Ar=!window.L_NO_TOUCH&&(Fi||mn),cr=pn&&jn,ao=pn&&te,zi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Mt=function(){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",G,a),window.removeEventListener("testPassiveEventSupport",G,a)}catch{}return n}(),Wn=function(){return!!document.createElement("canvas").getContext}(),tr=!!(document.createElementNS&&Rn("svg").createSVGRect),er=!!tr&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ir=!tr&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var a=n.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),fr=navigator.platform.indexOf("Mac")===0,Kr=navigator.platform.indexOf("Linux")===0;function sn(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var qt={ie:Ji,ielt9:At,edge:wi,webkit:Li,android:ni,android23:Wr,androidStock:Di,opera:jn,chrome:ii,gecko:te,safari:Sr,phantom:ke,opera12:ie,win:Tr,ie3d:Nn,webkit3d:Bn,gecko3d:ee,any3d:Xn,mobile:pn,mobileWebkit:$i,mobileWebkit3d:on,msPointer:Qi,pointer:mn,touch:Ar,touchNative:Fi,mobileOpera:cr,mobileGecko:ao,retina:zi,passiveEvents:Mt,canvas:Wn,svg:tr,vml:Ir,inlineSvg:er,mac:fr,linux:Kr},ri=qt.msPointer?"MSPointerDown":"pointerdown",Jr=qt.msPointer?"MSPointerMove":"pointermove",Rr=qt.msPointer?"MSPointerUp":"pointerup",Nr=qt.msPointer?"MSPointerCancel":"pointercancel",en={touchstart:ri,touchmove:Jr,touchend:Rr,touchcancel:Nr},Mn={touchstart:Ae,touchmove:Ut,touchend:Ut,touchcancel:Ut},On={},oi=!1;function ki(n,a,c){return a==="touchstart"&&Rt(),Mn[a]?(c=Mn[a].bind(this,c),n.addEventListener(en[a],c,!1),c):(console.warn("wrong event specified:",a),G)}function Br(n,a,c){if(!en[a]){console.warn("wrong event specified:",a);return}n.removeEventListener(en[a],c,!1)}function Or(n){On[n.pointerId]=n}function Jt(n){On[n.pointerId]&&(On[n.pointerId]=n)}function $(n){delete On[n.pointerId]}function Rt(){oi||(document.addEventListener(ri,Or,!0),document.addEventListener(Jr,Jt,!0),document.addEventListener(Rr,$,!0),document.addEventListener(Nr,$,!0),oi=!0)}function Ut(n,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in On)a.touches.push(On[c]);a.changedTouches=[a],n(a)}}function Ae(n,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&Je(a),Ut(n,a)}function Xe(n){var a={},c,_;for(_ in n)c=n[_],a[_]=c&&c.bind?c.bind(n):c;return n=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Ke=200;function an(n,a){n.addEventListener("dblclick",a);var c=0,_;function w(I){if(I.detail!==1){_=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var j=yn(I);if(!(j.some(function(pt){return pt instanceof HTMLLabelElement&&pt.attributes.for})&&!j.some(function(pt){return pt instanceof HTMLInputElement||pt instanceof HTMLSelectElement}))){var ft=Date.now();ft-c<=Ke?(_++,_===2&&a(Xe(I))):_=1,c=ft}}}return n.addEventListener("click",w),{dblclick:a,simDblclick:w}}function Dn(n,a){n.removeEventListener("dblclick",a.dblclick),n.removeEventListener("click",a.simDblclick)}var Gi=ho(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ie=ho(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xi=Ie==="webkitTransition"||Ie==="OTransition"?Ie+"End":"transitionend";function dr(n){return typeof n=="string"?document.getElementById(n):n}function bi(n,a){var c=n.style[a]||n.currentStyle&&n.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(n,null);c=_?_[a]:null}return c==="auto"?null:c}function be(n,a,c){var _=document.createElement(n);return _.className=a||"",c&&c.appendChild(_),_}function Ze(n){var a=n.parentNode;a&&a.removeChild(n)}function uo(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function gr(n){var a=n.parentNode;a&&a.lastChild!==n&&a.appendChild(n)}function nr(n){var a=n.parentNode;a&&a.firstChild!==n&&a.insertBefore(n,a.firstChild)}function lo(n,a){if(n.classList!==void 0)return n.classList.contains(a);var c=$r(n);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ce(n,a){if(n.classList!==void 0)for(var c=V(a),_=0,w=c.length;_<w;_++)n.classList.add(c[_]);else if(!lo(n,a)){var I=$r(n);si(n,(I?I+" ":"")+a)}}function De(n,a){n.classList!==void 0?n.classList.remove(a):si(n,Z((" "+$r(n)+" ").replace(" "+a+" "," ")))}function si(n,a){n.className.baseVal===void 0?n.className=a:n.className.baseVal=a}function $r(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function ln(n,a){"opacity"in n.style?n.style.opacity=a:"filter"in n.style&&Cs(n,a)}function Cs(n,a){var c=!1,_="DXImageTransform.Microsoft.Alpha";try{c=n.filters.item(_)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):n.style.filter+=" progid:"+_+"(opacity="+a+")"}function ho(n){for(var a=document.documentElement.style,c=0;c<n.length;c++)if(n[c]in a)return n[c];return!1}function pr(n,a,c){var _=a||new zt(0,0);n.style[Gi]=(qt.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(c?" scale("+c+")":"")}function Qe(n,a){n._leaflet_pos=a,qt.any3d?pr(n,a):(n.style.left=a.x+"px",n.style.top=a.y+"px")}function ir(n){return n._leaflet_pos||new zt(0,0)}var qi,Dr,Oo;if("onselectstart"in document)qi=function(){me(window,"selectstart",Je)},Dr=function(){qe(window,"selectstart",Je)};else{var Fr=ho(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qi=function(){if(Fr){var n=document.documentElement.style;Oo=n[Fr],n[Fr]="none"}},Dr=function(){Fr&&(document.documentElement.style[Fr]=Oo,Oo=void 0)}}function Do(){me(window,"dragstart",Je)}function zr(){qe(window,"dragstart",Je)}var Ge,Ui;function Fo(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(Gr(),Ge=n,Ui=n.style.outlineStyle,n.style.outlineStyle="none",me(window,"keydown",Gr))}function Gr(){Ge&&(Ge.style.outlineStyle=Ui,Ge=void 0,Ui=void 0,qe(window,"keydown",Gr))}function Fn(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function Pn(n){var a=n.getBoundingClientRect();return{x:a.width/n.offsetWidth||1,y:a.height/n.offsetHeight||1,boundingClientRect:a}}var co={__proto__:null,TRANSFORM:Gi,TRANSITION:Ie,TRANSITION_END:xi,get:dr,getStyle:bi,create:be,remove:Ze,empty:uo,toFront:gr,toBack:nr,hasClass:lo,addClass:ce,removeClass:De,setClass:si,getClass:$r,setOpacity:ln,testProp:ho,setTransform:pr,setPosition:Qe,getPosition:ir,get disableTextSelection(){return qi},get enableTextSelection(){return Dr},disableImageDrag:Do,enableImageDrag:zr,preventOutline:Fo,restoreOutline:Gr,getSizedParentNode:Fn,getScale:Pn};function me(n,a,c,_){if(a&&typeof a=="object")for(var w in a)fo(n,w,a[w],c);else{a=V(a);for(var I=0,j=a.length;I<j;I++)fo(n,a[I],c,_)}return this}var Ci="_leaflet_events";function qe(n,a,c,_){if(arguments.length===1)Qr(n),delete n[Ci];else if(a&&typeof a=="object")for(var w in a)Se(n,w,a[w],c);else if(a=V(a),arguments.length===2)Qr(n,function(ft){return wt(a,ft)!==-1});else for(var I=0,j=a.length;I<j;I++)Se(n,a[I],c,_);return this}function Qr(n,a){for(var c in n[Ci]){var _=c.split(/\d/)[0];(!a||a(_))&&Se(n,_,null,null,c)}}var zo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fo(n,a,c,_){var w=a+S(c)+(_?"_"+S(_):"");if(n[Ci]&&n[Ci][w])return this;var I=function(ft){return c.call(_||n,ft||window.event)},j=I;!qt.touchNative&&qt.pointer&&a.indexOf("touch")===0?I=ki(n,a,I):qt.touch&&a==="dblclick"?I=an(n,I):"addEventListener"in n?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?n.addEventListener(zo[a]||a,I,qt.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(I=function(ft){ft=ft||window.event,go(n,ft)&&j(ft)},n.addEventListener(zo[a],I,!1)):n.addEventListener(a,j,!1):n.attachEvent("on"+a,I),n[Ci]=n[Ci]||{},n[Ci][w]=I}function Se(n,a,c,_,w){w=w||a+S(c)+(_?"_"+S(_):"");var I=n[Ci]&&n[Ci][w];if(!I)return this;!qt.touchNative&&qt.pointer&&a.indexOf("touch")===0?Br(n,a,I):qt.touch&&a==="dblclick"?Dn(n,I):"removeEventListener"in n?n.removeEventListener(zo[a]||a,I,!1):n.detachEvent("on"+a,I),n[Ci][w]=null}function _n(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Mi(n){return fo(n,"wheel",_n),this}function qr(n){return me(n,"mousedown touchstart dblclick contextmenu",_n),n._leaflet_disable_click=!0,this}function Je(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function rr(n){return Je(n),_n(n),this}function yn(n){if(n.composedPath)return n.composedPath();for(var a=[],c=n.target;c;)a.push(c),c=c.parentNode;return a}function Go(n,a){if(!a)return new zt(n.clientX,n.clientY);var c=Pn(a),_=c.boundingClientRect;return new zt((n.clientX-_.left)/c.x-a.clientLeft,(n.clientY-_.top)/c.y-a.clientTop)}var qo=qt.linux&&qt.chrome?window.devicePixelRatio:qt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Uo(n){return qt.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/qo:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function go(n,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==n;)c=c.parentNode}catch{return!1}return c!==n}var Ms={__proto__:null,on:me,off:qe,stopPropagation:_n,disableScrollPropagation:Mi,disableClickPropagation:qr,preventDefault:Je,stop:rr,getPropagationPath:yn,getMousePosition:Go,getWheelDelta:Uo,isExternalTarget:go,addListener:me,removeListener:qe},Zo=se.extend({run:function(n,a,c,_){this.stop(),this._el=n,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=ir(n),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ft(this._animate,this),this._step()},_step:function(n){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),n):(this._runFrame(1),this._complete())},_runFrame:function(n,a){var c=this._startPos.add(this._offset.multiplyBy(n));a&&c._round(),Qe(this._el,c),this.fire("step")},_complete:function(){jt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),le=se.extend({options:{crs:kn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,a){a=tt(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=T(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(pe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ie&&qt.any3d&&!qt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,xi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),n=this._limitCenter(pe(n),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=p({animate:c.animate},c.zoom),c.pan=p({animate:c.animate,duration:c.duration},c.pan));var _=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,a,c.zoom):this._tryAnimatedPan(n,c.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(n,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(n,a){return this._loaded?this.setView(this.getCenter(),n,{zoom:a}):(this._zoom=n,this)},zoomIn:function(n,a){return n=n||(qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,a)},zoomOut:function(n,a){return n=n||(qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,a)},setZoomAround:function(n,a,c){var _=this.getZoomScale(a),w=this.getSize().divideBy(2),I=n instanceof zt?n:this.latLngToContainerPoint(n),j=I.subtract(w).multiplyBy(1-1/_),ft=this.containerPointToLatLng(w.add(j));return this.setView(ft,a,{zoom:c})},_getBoundsCenterZoom:function(n,a){a=a||{},n=n.getBounds?n.getBounds():Ht(n);var c=vt(a.paddingTopLeft||a.padding||[0,0]),_=vt(a.paddingBottomRight||a.padding||[0,0]),w=this.getBoundsZoom(n,!1,c.add(_));if(w=typeof a.maxZoom=="number"?Math.min(a.maxZoom,w):w,w===1/0)return{center:n.getCenter(),zoom:w};var I=_.subtract(c).divideBy(2),j=this.project(n.getSouthWest(),w),ft=this.project(n.getNorthEast(),w),pt=this.unproject(j.add(ft).divideBy(2).add(I),w);return{center:pt,zoom:w}},fitBounds:function(n,a){if(n=Ht(n),!n.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(n,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,a){return this.setView(n,this._zoom,{pan:a})},panBy:function(n,a){if(n=vt(n).round(),a=a||{},!n.x&&!n.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ce(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,a,c){if(c=c||{},c.animate===!1||!qt.any3d)return this.setView(n,a,c);this._stop();var _=this.project(this.getCenter()),w=this.project(n),I=this.getSize(),j=this._zoom;n=pe(n),a=a===void 0?j:a;var ft=Math.max(I.x,I.y),pt=ft*this.getZoomScale(j,a),Pt=w.distanceTo(_)||1,Gt=1.42,ae=Gt*Gt;function Le($e){var _s=$e?-1:1,Qa=$e?pt:ft,la=pt*pt-ft*ft+_s*ae*ae*Pt*Pt,ha=2*Qa*ae*Pt,Ds=la/ha,Yi=Math.sqrt(Ds*Ds+1)-Ds,tu=Yi<1e-9?-18:Math.log(Yi);return tu}function Tn($e){return(Math.exp($e)-Math.exp(-$e))/2}function En($e){return(Math.exp($e)+Math.exp(-$e))/2}function Ni($e){return Tn($e)/En($e)}var $n=Le(0);function Co($e){return ft*(En($n)/En($n+Gt*$e))}function Bs($e){return ft*(En($n)*Ni($n+Gt*$e)-Tn($n))/ae}function kr($e){return 1-Math.pow(1-$e,1.5)}var $o=Date.now(),ps=(Le(1)-$n)/Gt,ms=c.duration?1e3*c.duration:1e3*ps*.8;function Os(){var $e=(Date.now()-$o)/ms,_s=kr($e)*ps;$e<=1?(this._flyToFrame=Ft(Os,this),this._move(this.unproject(_.add(w.subtract(_).multiplyBy(Bs(_s)/Pt)),j),this.getScaleZoom(ft/Co(_s),j),{flyTo:!0})):this._move(n,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Os.call(this),this},flyToBounds:function(n,a){var c=this._getBoundsCenterZoom(n,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(n){return n=Ht(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var a=this.options.minZoom;return this.options.minZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var a=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,a){this._enforcingBounds=!0;var c=this.getCenter(),_=this._limitCenter(c,this._zoom,Ht(n));return c.equals(_)||this.panTo(_,a),this._enforcingBounds=!1,this},panInside:function(n,a){a=a||{};var c=vt(a.paddingTopLeft||a.padding||[0,0]),_=vt(a.paddingBottomRight||a.padding||[0,0]),w=this.project(this.getCenter()),I=this.project(n),j=this.getPixelBounds(),ft=xe([j.min.add(c),j.max.subtract(_)]),pt=ft.getSize();if(!ft.contains(I)){this._enforcingBounds=!0;var Pt=I.subtract(ft.getCenter()),Gt=ft.extend(I).getSize().subtract(pt);w.x+=Pt.x<0?-Gt.x:Gt.x,w.y+=Pt.y<0?-Gt.y:Gt.y,this.panTo(this.unproject(w),a),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=p({animate:!1,pan:!0},n===!0?{animate:!0}:n);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),_=a.divideBy(2).round(),w=c.divideBy(2).round(),I=_.subtract(w);return!I.x&&!I.y?this:(n.animate&&n.pan?this.panBy(I):(n.pan&&this._rawPanBy(I),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(T(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=p({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=T(this._handleGeolocationResponse,this),c=T(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,n):navigator.geolocation.getCurrentPosition(a,c,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var a=n.code,c=n.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var a=n.coords.latitude,c=n.coords.longitude,_=new Qt(a,c),w=_.toBounds(n.coords.accuracy*2),I=this._locateOptions;if(I.setView){var j=this.getBoundsZoom(w);this.setView(_,I.maxZoom?Math.min(j,I.maxZoom):j)}var ft={latlng:_,bounds:w,timestamp:n.timestamp};for(var pt in n.coords)typeof n.coords[pt]=="number"&&(ft[pt]=n.coords[pt]);this.fire("locationfound",ft)}},addHandler:function(n,a){if(!a)return this;var c=this[n]=new a(this);return this._handlers.push(c),this.options[n]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ze(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(jt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Ze(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,a){var c="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),_=be("div",c,a||this._mapPane);return n&&(this._panes[n]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),a=this.unproject(n.getBottomLeft()),c=this.unproject(n.getTopRight());return new ue(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,a,c){n=Ht(n),c=vt(c||[0,0]);var _=this.getZoom()||0,w=this.getMinZoom(),I=this.getMaxZoom(),j=n.getNorthWest(),ft=n.getSouthEast(),pt=this.getSize().subtract(c),Pt=xe(this.project(ft,_),this.project(j,_)).getSize(),Gt=qt.any3d?this.options.zoomSnap:1,ae=pt.x/Pt.x,Le=pt.y/Pt.y,Tn=a?Math.max(ae,Le):Math.min(ae,Le);return _=this.getScaleZoom(Tn,_),Gt&&(_=Math.round(_/(Gt/100))*(Gt/100),_=a?Math.ceil(_/Gt)*Gt:Math.floor(_/Gt)*Gt),Math.max(w,Math.min(I,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new zt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,a){var c=this._getTopLeftPoint(n,a);return new fe(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(n)/c.scale(a)},getScaleZoom:function(n,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var _=c.zoom(n*c.scale(a));return isNaN(_)?1/0:_},project:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(pe(n),a)},unproject:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(vt(n),a)},layerPointToLatLng:function(n){var a=vt(n).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(n){var a=this.project(pe(n))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(pe(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(Ht(n))},distance:function(n,a){return this.options.crs.distance(pe(n),pe(a))},containerPointToLayerPoint:function(n){return vt(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return vt(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var a=this.containerPointToLayerPoint(vt(n));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(n)))},mouseEventToContainerPoint:function(n){return Go(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var a=this._container=dr(n);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(a,"scroll",this._onScroll,this),this._containerId=S(a)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&qt.any3d,ce(n,"leaflet-container"+(qt.touch?" leaflet-touch":"")+(qt.retina?" leaflet-retina":"")+(qt.ielt9?" leaflet-oldie":"")+(qt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=bi(n,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qe(this._mapPane,new zt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ce(n.markerPane,"leaflet-zoom-hide"),ce(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,a,c){Qe(this._mapPane,new zt(0,0));var _=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var w=this._zoom!==a;this._moveStart(w,c)._move(n,a)._moveEnd(w),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(n,a){return n&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(n,a,c,_){a===void 0&&(a=this._zoom);var w=this._zoom!==a;return this._zoom=a,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),_?c&&c.pinch&&this.fire("zoom",c):((w||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return jt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Qe(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[S(this._container)]=this;var a=n?qe:me;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),qt.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){jt(this._resizeRequest),this._resizeRequest=Ft(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,a){for(var c=[],_,w=a==="mouseout"||a==="mouseover",I=n.target||n.srcElement,j=!1;I;){if(_=this._targets[S(I)],_&&(a==="click"||a==="preclick")&&this._draggableMoved(_)){j=!0;break}if(_&&_.listens(a,!0)&&(w&&!go(I,n)||(c.push(_),w))||I===this._container)break;I=I.parentNode}return!c.length&&!j&&!w&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var a=n.target||n.srcElement;if(!(!this._loaded||a._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(a))){var c=n.type;c==="mousedown"&&Fo(a),this._fireDOMEvent(n,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,a,c){if(n.type==="click"){var _=p({},n);_.type="preclick",this._fireDOMEvent(_,_.type,c)}var w=this._findEventTargets(n,a);if(c){for(var I=[],j=0;j<c.length;j++)c[j].listens(a,!0)&&I.push(c[j]);w=I.concat(w)}if(w.length){a==="contextmenu"&&Je(n);var ft=w[0],pt={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var Pt=ft.getLatLng&&(!ft._radius||ft._radius<=10);pt.containerPoint=Pt?this.latLngToContainerPoint(ft.getLatLng()):this.mouseEventToContainerPoint(n),pt.layerPoint=this.containerPointToLayerPoint(pt.containerPoint),pt.latlng=Pt?ft.getLatLng():this.layerPointToLatLng(pt.layerPoint)}for(j=0;j<w.length;j++)if(w[j].fire(a,pt,!0),pt.originalEvent._stopped||w[j].options.bubblingMouseEvents===!1&&wt(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,a=this._handlers.length;n<a;n++)this._handlers[n].disable()},whenReady:function(n,a){return this._loaded?n.call(a||this,{target:this}):this.on("load",n,a),this},_getMapPanePos:function(){return ir(this._mapPane)||new zt(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,a){var c=n&&a!==void 0?this._getNewPixelOrigin(n,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,a){var c=this.getSize()._divideBy(2);return this.project(n,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,a,c){var _=this._getNewPixelOrigin(c,a);return this.project(n,a)._subtract(_)},_latLngBoundsToNewLayerBounds:function(n,a,c){var _=this._getNewPixelOrigin(c,a);return xe([this.project(n.getSouthWest(),a)._subtract(_),this.project(n.getNorthWest(),a)._subtract(_),this.project(n.getSouthEast(),a)._subtract(_),this.project(n.getNorthEast(),a)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,a,c){if(!c)return n;var _=this.project(n,a),w=this.getSize().divideBy(2),I=new fe(_.subtract(w),_.add(w)),j=this._getBoundsOffset(I,c,a);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?n:this.unproject(_.add(j),a)},_limitOffset:function(n,a){if(!a)return n;var c=this.getPixelBounds(),_=new fe(c.min.add(n),c.max.add(n));return n.add(this._getBoundsOffset(_,a))},_getBoundsOffset:function(n,a,c){var _=xe(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),w=_.min.subtract(n.min),I=_.max.subtract(n.max),j=this._rebound(w.x,-I.x),ft=this._rebound(w.y,-I.y);return new zt(j,ft)},_rebound:function(n,a){return n+a>0?Math.round(n-a)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(a))},_limitZoom:function(n){var a=this.getMinZoom(),c=this.getMaxZoom(),_=qt.any3d?this.options.zoomSnap:1;return _&&(n=Math.round(n/_)*_),Math.max(a,Math.min(c,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){De(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,a){var c=this._getCenterOffset(n)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var n=this._proxy=be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(a){var c=Gi,_=this._proxy.style[c];pr(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),_===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ze(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),a=this.getZoom();pr(this._proxy,this.project(n,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(a),w=this._getCenterOffset(n)._divideBy(1-1/_);return c.animate!==!0&&!this.getSize().contains(w)?!1:(Ft(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(n,a,!0)},this),!0)},_animateZoom:function(n,a,c,_){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=a,ce(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:a,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(T(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&De(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function po(n,a){return new le(n,a)}var ai=oe.extend({options:{position:"topright"},initialize:function(n){tt(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var a=this._map;return a&&a.removeControl(this),this.options.position=n,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var a=this._container=this.onAdd(n),c=this.getPosition(),_=n._controlCorners[c];return ce(a,"leaflet-control"),c.indexOf("bottom")!==-1?_.insertBefore(a,_.firstChild):_.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ze(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),hn=function(n){return new ai(n)};le.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},a="leaflet-",c=this._controlContainer=be("div",a+"control-container",this._container);function _(w,I){var j=a+w+" "+a+I;n[w+I]=be("div",j,c)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Ze(this._controlCorners[n]);Ze(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ee=ai.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,a,c,_){return c<_?-1:_<c?1:0}},initialize:function(n,a,c){tt(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in n)this._addLayer(n[_],_);for(_ in a)this._addLayer(a[_],_,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return ai.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,a){return this._addLayer(n,a),this._map?this._update():this},addOverlay:function(n,a){return this._addLayer(n,a,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var a=this._getLayer(S(n));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ce(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(ce(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):De(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return De(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",a=this._container=be("div",n),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),qr(a),Mi(a);var _=this._section=be("section",n+"-list");c&&(this._map.on("click",this.collapse,this),me(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=be("a",n+"-toggle",a);w.href="#",w.title="Layers",w.setAttribute("role","button"),me(w,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){Je(I),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=be("div",n+"-base",_),this._separator=be("div",n+"-separator",_),this._overlaysList=be("div",n+"-overlays",_),a.appendChild(_)},_getLayer:function(n){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&S(this._layers[a].layer)===n)return this._layers[a]},_addLayer:function(n,a,c){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(T(function(_,w){return this.options.sortFunction(_.layer,w.layer,_.name,w.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;uo(this._baseLayersList),uo(this._overlaysList),this._layerControlInputs=[];var n,a,c,_,w=0;for(c=0;c<this._layers.length;c++)_=this._layers[c],this._addItem(_),a=a||_.overlay,n=n||!_.overlay,w+=_.overlay?0:1;return this.options.hideSingleBase&&(n=n&&w>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=a&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var a=this._getLayer(S(n.target)),c=a.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(n,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(a?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=c,_.firstChild},_addItem:function(n){var a=document.createElement("label"),c=this._map.hasLayer(n.layer),_;n.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=c):_=this._createRadioElement("leaflet-base-layers_"+S(this),c),this._layerControlInputs.push(_),_.layerId=S(n.layer),me(_,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+n.name;var I=document.createElement("span");a.appendChild(I),I.appendChild(_),I.appendChild(w);var j=n.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,a,c,_=[],w=[];this._handlingClick=!0;for(var I=n.length-1;I>=0;I--)a=n[I],c=this._getLayer(a.layerId).layer,a.checked?_.push(c):a.checked||w.push(c);for(I=0;I<w.length;I++)this._map.hasLayer(w[I])&&this._map.removeLayer(w[I]);for(I=0;I<_.length;I++)this._map.hasLayer(_[I])||this._map.addLayer(_[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,a,c,_=this._map.getZoom(),w=n.length-1;w>=0;w--)a=n[w],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&_<c.options.minZoom||c.options.maxZoom!==void 0&&_>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,me(n,"click",Je),this.expand();var a=this;setTimeout(function(){qe(n,"click",Je),a._preventClick=!1})}}),Vo=function(n,a,c){return new Ee(n,a,c)},ui=ai.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var a="leaflet-control-zoom",c=be("div",a+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,a,c,_,w){var I=be("a",c,_);return I.innerHTML=n,I.href="#",I.title=a,I.setAttribute("role","button"),I.setAttribute("aria-label",a),qr(I),me(I,"click",rr),me(I,"click",w,this),me(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var n=this._map,a="leaflet-disabled";De(this._zoomInButton,a),De(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(ce(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(ce(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});le.mergeOptions({zoomControl:!0}),le.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ui,this.addControl(this.zoomControl))});var rs=function(n){return new ui(n)},or=ai.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var a="leaflet-control-scale",c=be("div",a),_=this.options;return this._addScales(_,a+"-line",c),n.on(_.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),c},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,a,c){n.metric&&(this._mScale=be("div",a,c)),n.imperial&&(this._iScale=be("div",a,c))},_update:function(){var n=this._map,a=n.getSize().y/2,c=n.distance(n.containerPointToLatLng([0,a]),n.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var a=this._getRoundNum(n),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/n)},_updateImperial:function(n){var a=n*3.2808399,c,_,w;a>5280?(c=a/5280,_=this._getRoundNum(c),this._updateScale(this._iScale,_+" mi",_/c)):(w=this._getRoundNum(a),this._updateScale(this._iScale,w+" ft",w/a))},_updateScale:function(n,a,c){n.style.width=Math.round(this.options.maxWidth*c)+"px",n.innerHTML=a},_getRoundNum:function(n){var a=Math.pow(10,(Math.floor(n)+"").length-1),c=n/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Ps=function(n){return new or(n)},Kn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mr=ai.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(qt.inlineSvg?Kn+" ":"")+"Leaflet</a>"},initialize:function(n){tt(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=be("div","leaflet-control-attribution"),qr(this._container);for(var a in n._layers)n._layers[a].getAttribution&&this.addAttribution(n._layers[a].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var a in this._attributions)this._attributions[a]&&n.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),n.length&&c.push(n.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});le.mergeOptions({attributionControl:!0}),le.addInitHook(function(){this.options.attributionControl&&new mr().addTo(this)});var Ss=function(n){return new mr(n)};ai.Layers=Ee,ai.Zoom=ui,ai.Scale=or,ai.Attribution=mr,hn.layers=Vo,hn.zoom=rs,hn.scale=Ps,hn.attribution=Ss;var cn=oe.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cn.addTo=function(n,a){return n.addHandler(a,this),this};var os={Events:Tt},_r=qt.touch?"touchstart mousedown":"mousedown",sr=se.extend({options:{clickTolerance:3},initialize:function(n,a,c,_){tt(this,_),this._element=n,this._dragStartTarget=a||n,this._preventOutline=c},enable:function(){this._enabled||(me(this._dragStartTarget,_r,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sr._dragging===this&&this.finishDrag(!0),qe(this._dragStartTarget,_r,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!lo(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){sr._dragging===this&&this.finishDrag();return}if(!(sr._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(sr._dragging=this,this._preventOutline&&Fo(this._element),Do(),qi(),!this._moving)){this.fire("down");var a=n.touches?n.touches[0]:n,c=Fn(this._element);this._startPoint=new zt(a.clientX,a.clientY),this._startPos=ir(this._element),this._parentScale=Pn(c);var _=n.type==="mousedown";me(document,_?"mousemove":"touchmove",this._onMove,this),me(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var a=n.touches&&n.touches.length===1?n.touches[0]:n,c=new zt(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Je(n),this._moved||(this.fire("dragstart"),this._moved=!0,ce(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ce(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Qe(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){De(document.body,"leaflet-dragging"),this._lastTarget&&(De(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),qe(document,"mousemove touchmove",this._onMove,this),qe(document,"mouseup touchend touchcancel",this._onUp,this),zr(),Dr();var a=this._moved&&this._moving;this._moving=!1,sr._dragging=!1,a&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function ss(n,a,c){var _,w=[1,4,2,8],I,j,ft,pt,Pt,Gt,ae,Le;for(I=0,Gt=n.length;I<Gt;I++)n[I]._code=Ye(n[I],a);for(ft=0;ft<4;ft++){for(ae=w[ft],_=[],I=0,Gt=n.length,j=Gt-1;I<Gt;j=I++)pt=n[I],Pt=n[j],pt._code&ae?Pt._code&ae||(Le=yo(Pt,pt,ae,a,c),Le._code=Ye(Le,a),_.push(Le)):(Pt._code&ae&&(Le=yo(Pt,pt,ae,a,c),Le._code=Ye(Le,a),_.push(Le)),_.push(pt));n=_}return n}function as(n,a){var c,_,w,I,j,ft,pt,Pt,Gt;if(!n||n.length===0)throw new Error("latlngs not passed");tn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var ae=pe([0,0]),Le=Ht(n),Tn=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());Tn<1700&&(ae=Zi(n));var En=n.length,Ni=[];for(c=0;c<En;c++){var $n=pe(n[c]);Ni.push(a.project(pe([$n.lat-ae.lat,$n.lng-ae.lng])))}for(ft=pt=Pt=0,c=0,_=En-1;c<En;_=c++)w=Ni[c],I=Ni[_],j=w.y*I.x-I.y*w.x,pt+=(w.x+I.x)*j,Pt+=(w.y+I.y)*j,ft+=j*3;ft===0?Gt=Ni[0]:Gt=[pt/ft,Pt/ft];var Co=a.unproject(vt(Gt));return pe([Co.lat+ae.lat,Co.lng+ae.lng])}function Zi(n){for(var a=0,c=0,_=0,w=0;w<n.length;w++){var I=pe(n[w]);a+=I.lat,c+=I.lng,_++}return pe([a/_,c/_])}var zn={__proto__:null,clipPolygon:ss,polygonCenter:as,centroid:Zi};function us(n,a){if(!a||!n.length)return n.slice();var c=a*a;return n=nn(n,c),n=mo(n,c),n}function Yo(n,a,c){return Math.sqrt(Vi(n,a,c,!0))}function Ts(n,a,c){return Vi(n,a,c)}function mo(n,a){var c=n.length,_=typeof Uint8Array<"u"?Uint8Array:Array,w=new _(c);w[0]=w[c-1]=1,_o(n,w,a,0,c-1);var I,j=[];for(I=0;I<c;I++)w[I]&&j.push(n[I]);return j}function _o(n,a,c,_,w){var I=0,j,ft,pt;for(ft=_+1;ft<=w-1;ft++)pt=Vi(n[ft],n[_],n[w],!0),pt>I&&(j=ft,I=pt);I>c&&(a[j]=1,_o(n,a,c,_,j),_o(n,a,c,j,w))}function nn(n,a){for(var c=[n[0]],_=1,w=0,I=n.length;_<I;_++)Pi(n[_],n[w])>a&&(c.push(n[_]),w=_);return w<I-1&&c.push(n[I-1]),c}var fn;function Gn(n,a,c,_,w){var I=_?fn:Ye(n,c),j=Ye(a,c),ft,pt,Pt;for(fn=j;;){if(!(I|j))return[n,a];if(I&j)return!1;ft=I||j,pt=yo(n,a,ft,c,w),Pt=Ye(pt,c),ft===I?(n=pt,I=Pt):(a=pt,j=Pt)}}function yo(n,a,c,_,w){var I=a.x-n.x,j=a.y-n.y,ft=_.min,pt=_.max,Pt,Gt;return c&8?(Pt=n.x+I*(pt.y-n.y)/j,Gt=pt.y):c&4?(Pt=n.x+I*(ft.y-n.y)/j,Gt=ft.y):c&2?(Pt=pt.x,Gt=n.y+j*(pt.x-n.x)/I):c&1&&(Pt=ft.x,Gt=n.y+j*(ft.x-n.x)/I),new zt(Pt,Gt,w)}function Ye(n,a){var c=0;return n.x<a.min.x?c|=1:n.x>a.max.x&&(c|=2),n.y<a.min.y?c|=4:n.y>a.max.y&&(c|=8),c}function Pi(n,a){var c=a.x-n.x,_=a.y-n.y;return c*c+_*_}function Vi(n,a,c,_){var w=a.x,I=a.y,j=c.x-w,ft=c.y-I,pt=j*j+ft*ft,Pt;return pt>0&&(Pt=((n.x-w)*j+(n.y-I)*ft)/pt,Pt>1?(w=c.x,I=c.y):Pt>0&&(w+=j*Pt,I+=ft*Pt)),j=n.x-w,ft=n.y-I,_?j*j+ft*ft:new zt(w,I)}function tn(n){return!_t(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Ho(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),tn(n)}function jo(n,a){var c,_,w,I,j,ft,pt,Pt;if(!n||n.length===0)throw new Error("latlngs not passed");tn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Gt=pe([0,0]),ae=Ht(n),Le=ae.getNorthWest().distanceTo(ae.getSouthWest())*ae.getNorthEast().distanceTo(ae.getNorthWest());Le<1700&&(Gt=Zi(n));var Tn=n.length,En=[];for(c=0;c<Tn;c++){var Ni=pe(n[c]);En.push(a.project(pe([Ni.lat-Gt.lat,Ni.lng-Gt.lng])))}for(c=0,_=0;c<Tn-1;c++)_+=En[c].distanceTo(En[c+1])/2;if(_===0)Pt=En[0];else for(c=0,I=0;c<Tn-1;c++)if(j=En[c],ft=En[c+1],w=j.distanceTo(ft),I+=w,I>_){pt=(I-_)/w,Pt=[ft.x-pt*(ft.x-j.x),ft.y-pt*(ft.y-j.y)];break}var $n=a.unproject(vt(Pt));return pe([$n.lat+Gt.lat,$n.lng+Gt.lng])}var to={__proto__:null,simplify:us,pointToSegmentDistance:Yo,closestPointOnSegment:Ts,clipSegment:Gn,_getEdgeIntersection:yo,_getBitCode:Ye,_sqClosestPointOnSegment:Vi,isFlat:tn,_flat:Ho,polylineCenter:jo},qn={project:function(n){return new zt(n.lng,n.lat)},unproject:function(n){return new Qt(n.y,n.x)},bounds:new fe([-180,-90],[180,90])},vo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var a=Math.PI/180,c=this.R,_=n.lat*a,w=this.R_MINOR/c,I=Math.sqrt(1-w*w),j=I*Math.sin(_),ft=Math.tan(Math.PI/4-_/2)/Math.pow((1-j)/(1+j),I/2);return _=-c*Math.log(Math.max(ft,1e-10)),new zt(n.lng*a*c,_)},unproject:function(n){for(var a=180/Math.PI,c=this.R,_=this.R_MINOR/c,w=Math.sqrt(1-_*_),I=Math.exp(-n.y/c),j=Math.PI/2-2*Math.atan(I),ft=0,pt=.1,Pt;ft<15&&Math.abs(pt)>1e-7;ft++)Pt=w*Math.sin(j),Pt=Math.pow((1-Pt)/(1+Pt),w/2),pt=Math.PI/2-2*Math.atan(I*Pt)-j,j+=pt;return new Qt(j*a,n.x*a/c)}},Eo={__proto__:null,LonLat:qn,Mercator:vo,SphericalMercator:Ne},As=p({},at,{code:"EPSG:3395",projection:vo,transformation:function(){var n=.5/(Math.PI*vo.R);return Y(n,.5,-n,.5)}()}),li=p({},at,{code:"EPSG:4326",projection:qn,transformation:Y(1/180,1,-1/180,.5)}),Si=p({},ve,{projection:qn,transformation:Y(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,a){var c=a.lng-n.lng,_=a.lat-n.lat;return Math.sqrt(c*c+_*_)},infinite:!0});ve.Earth=at,ve.EPSG3395=As,ve.EPSG3857=kn,ve.EPSG900913=ei,ve.EPSG4326=li,ve.Simple=Si;var Sn=se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[S(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[S(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var a=n.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});le.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var a=S(n);return this._layers[a]?this:(this._layers[a]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var a=S(n);return this._layers[a]?(this._loaded&&n.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return S(n)in this._layers},eachLayer:function(n,a){for(var c in this._layers)n.call(a,this._layers[c]);return this},_addLayers:function(n){n=n?_t(n)?n:[n]:[];for(var a=0,c=n.length;a<c;a++)this.addLayer(n[a])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[S(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var a=S(n);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,a=-1/0,c=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var w=this._zoomBoundLayers[_].options;n=w.minZoom===void 0?n:Math.min(n,w.minZoom),a=w.maxZoom===void 0?a:Math.max(a,w.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=n===1/0?void 0:n,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yr=Sn.extend({initialize:function(n,a){tt(this,a),this._layers={};var c,_;if(n)for(c=0,_=n.length;c<_;c++)this.addLayer(n[c])},addLayer:function(n){var a=this.getLayerId(n);return this._layers[a]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var a=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(n){var a=typeof n=="number"?n:this.getLayerId(n);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var a=Array.prototype.slice.call(arguments,1),c,_;for(c in this._layers)_=this._layers[c],_[n]&&_[n].apply(_,a);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,a){for(var c in this._layers)n.call(a,this._layers[c]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return S(n)}}),wo=function(n,a){return new yr(n,a)},Un=yr.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),yr.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),yr.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new ue;for(var a in this._layers){var c=this._layers[a];n.extend(c.getBounds?c.getBounds():c.getLatLng())}return n}}),ls=function(n,a){return new Un(n,a)},Ur=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){tt(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,a){var c=this._getIconUrl(n);if(!c){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(_,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(n,a){var c=this.options,_=c[a+"Size"];typeof _=="number"&&(_=[_,_]);var w=vt(_),I=vt(a==="shadow"&&c.shadowAnchor||c.iconAnchor||w&&w.divideBy(2,!0));n.className="leaflet-marker-"+a+" "+(c.className||""),I&&(n.style.marginLeft=-I.x+"px",n.style.marginTop=-I.y+"px"),w&&(n.style.width=w.x+"px",n.style.height=w.y+"px")},_createImg:function(n,a){return a=a||document.createElement("img"),a.src=n,a},_getIconUrl:function(n){return qt.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Xo(n){return new Ur(n)}var eo=Ur.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof eo.imagePath!="string"&&(eo.imagePath=this._detectIconPath()),(this.options.imagePath||eo.imagePath)+Ur.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var a=function(c,_,w){var I=_.exec(c);return I&&I[w]};return n=a(n,/^url\((['"])?(.+)\1\)$/,2),n&&a(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=be("div","leaflet-default-icon-path",document.body),a=bi(n,"background-image")||bi(n,"backgroundImage");if(document.body.removeChild(n),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),hs=cn.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new sr(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ce(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&De(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var a=this._marker,c=a._map,_=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,I=ir(a._icon),j=c.getPixelBounds(),ft=c.getPixelOrigin(),pt=xe(j.min._subtract(ft).add(w),j.max._subtract(ft).subtract(w));if(!pt.contains(I)){var Pt=vt((Math.max(pt.max.x,I.x)-pt.max.x)/(j.max.x-pt.max.x)-(Math.min(pt.min.x,I.x)-pt.min.x)/(j.min.x-pt.min.x),(Math.max(pt.max.y,I.y)-pt.max.y)/(j.max.y-pt.max.y)-(Math.min(pt.min.y,I.y)-pt.min.y)/(j.min.y-pt.min.y)).multiplyBy(_);c.panBy(Pt,{animate:!1}),this._draggable._newPos._add(Pt),this._draggable._startPos._add(Pt),Qe(a._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=Ft(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(jt(this._panRequest),this._panRequest=Ft(this._adjustPan.bind(this,n)))},_onDrag:function(n){var a=this._marker,c=a._shadow,_=ir(a._icon),w=a._map.layerPointToLatLng(_);c&&Qe(c,_),a._latlng=w,n.latlng=w,n.oldLatLng=this._oldLatLng,a.fire("move",n).fire("drag",n)},_onDragEnd:function(n){jt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Lo=Sn.extend({options:{icon:new eo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,a){tt(this,a),this._latlng=pe(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var a=this._latlng;return this._latlng=pe(n),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=n.icon.createIcon(this._icon),_=!1;c!==this._icon&&(this._icon&&this._removeIcon(),_=!0,n.title&&(c.title=n.title),c.tagName==="IMG"&&(c.alt=n.alt||"")),ce(c,a),n.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(c,"focus",this._panOnFocus,this);var w=n.icon.createShadow(this._shadow),I=!1;w!==this._shadow&&(this._removeShadow(),I=!0),w&&(ce(w,a),w.alt=""),this._shadow=w,n.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&I&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&qe(this._icon,"focus",this._panOnFocus,this),Ze(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ze(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Qe(this._icon,n),this._shadow&&Qe(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ce(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hs)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hs(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&ln(this._icon,n),this._shadow&&ln(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var a=this.options.icon.options,c=a.iconSize?vt(a.iconSize):vt(0,0),_=a.iconAnchor?vt(a.iconAnchor):vt(0,0);n.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:c.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Is(n,a){return new Lo(n,a)}var Ti=Sn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return tt(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),no=Ti.extend({options:{fill:!0,radius:10},initialize:function(n,a){tt(this,a),this._latlng=pe(n),this._radius=this.options.radius},setLatLng:function(n){var a=this._latlng;return this._latlng=pe(n),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var a=n&&n.radius||this._radius;return Ti.prototype.setStyle.call(this,n),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,a=this._radiusY||n,c=this._clickTolerance(),_=[n+c,a+c];this._pxBounds=new fe(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function cs(n,a){return new no(n,a)}var io=no.extend({initialize:function(n,a,c){if(typeof a=="number"&&(a=p({},c,{radius:a})),tt(this,a),this._latlng=pe(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new ue(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:Ti.prototype.setStyle,_project:function(){var n=this._latlng.lng,a=this._latlng.lat,c=this._map,_=c.options.crs;if(_.distance===at.distance){var w=Math.PI/180,I=this._mRadius/at.R/w,j=c.project([a+I,n]),ft=c.project([a-I,n]),pt=j.add(ft).divideBy(2),Pt=c.unproject(pt).lat,Gt=Math.acos((Math.cos(I*w)-Math.sin(a*w)*Math.sin(Pt*w))/(Math.cos(a*w)*Math.cos(Pt*w)))/w;(isNaN(Gt)||Gt===0)&&(Gt=I/Math.cos(Math.PI/180*a)),this._point=pt.subtract(c.getPixelOrigin()),this._radius=isNaN(Gt)?0:pt.x-c.project([Pt,n-Gt]).x,this._radiusY=pt.y-j.y}else{var ae=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ae).x}this._updateBounds()}});function vr(n,a,c){return new io(n,a,c)}var hi=Ti.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,a){tt(this,a),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var a=1/0,c=null,_=Vi,w,I,j=0,ft=this._parts.length;j<ft;j++)for(var pt=this._parts[j],Pt=1,Gt=pt.length;Pt<Gt;Pt++){w=pt[Pt-1],I=pt[Pt];var ae=_(n,w,I,!0);ae<a&&(a=ae,c=_(n,w,I))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,a){return a=a||this._defaultShape(),n=pe(n),a.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new ue,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var a=[],c=tn(n),_=0,w=n.length;_<w;_++)c?(a[_]=pe(n[_]),this._bounds.extend(a[_])):a[_]=this._convertLatLngs(n[_]);return a},_project:function(){var n=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),a=new zt(n,n);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(n,a,c){var _=n[0]instanceof Qt,w=n.length,I,j;if(_){for(j=[],I=0;I<w;I++)j[I]=this._map.latLngToLayerPoint(n[I]),c.extend(j[I]);a.push(j)}else for(I=0;I<w;I++)this._projectLatlngs(n[I],a,c)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,_,w,I,j,ft,pt;for(c=0,w=0,I=this._rings.length;c<I;c++)for(pt=this._rings[c],_=0,j=pt.length;_<j-1;_++)ft=Gn(pt[_],pt[_+1],n,_,!0),ft&&(a[w]=a[w]||[],a[w].push(ft[0]),(ft[1]!==pt[_+1]||_===j-2)&&(a[w].push(ft[1]),w++))}},_simplifyPoints:function(){for(var n=this._parts,a=this.options.smoothFactor,c=0,_=n.length;c<_;c++)n[c]=us(n[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,a){var c,_,w,I,j,ft,pt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(c=0,I=this._parts.length;c<I;c++)for(ft=this._parts[c],_=0,j=ft.length,w=j-1;_<j;w=_++)if(!(!a&&_===0)&&Yo(n,ft[w],ft[_])<=pt)return!0;return!1}});function Wo(n,a){return new hi(n,a)}hi._flat=Ho;var Jn=hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return as(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var a=hi.prototype._convertLatLngs.call(this,n),c=a.length;return c>=2&&a[0]instanceof Qt&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(n){hi.prototype._setLatLngs.call(this,n),tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,a=this.options.weight,c=new zt(a,a);if(n=new fe(n.min.subtract(c),n.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,w=this._rings.length,I;_<w;_++)I=ss(this._rings[_],n,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var a=!1,c,_,w,I,j,ft,pt,Pt;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(I=0,pt=this._parts.length;I<pt;I++)for(c=this._parts[I],j=0,Pt=c.length,ft=Pt-1;j<Pt;ft=j++)_=c[j],w=c[ft],_.y>n.y!=w.y>n.y&&n.x<(w.x-_.x)*(n.y-_.y)/(w.y-_.y)+_.x&&(a=!a);return a||hi.prototype._containsPoint.call(this,n,!0)}});function fs(n,a){return new Jn(n,a)}var Ai=Un.extend({initialize:function(n,a){tt(this,a),this._layers={},n&&this.addData(n)},addData:function(n){var a=_t(n)?n:n.features,c,_,w;if(a){for(c=0,_=a.length;c<_;c++)w=a[c],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var I=this.options;if(I.filter&&!I.filter(n))return this;var j=Zr(n,I);return j?(j.feature=o(n),j.defaultOptions=j.options,this.resetStyle(j),I.onEachFeature&&I.onEachFeature(n,j),this.addLayer(j)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=p({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(a){this._setLayerStyle(a,n)},this)},_setLayerStyle:function(n,a){n.setStyle&&(typeof a=="function"&&(a=a(n.feature)),n.setStyle(a))}});function Zr(n,a){var c=n.type==="Feature"?n.geometry:n,_=c?c.coordinates:null,w=[],I=a&&a.pointToLayer,j=a&&a.coordsToLatLng||ar,ft,pt,Pt,Gt;if(!_&&!c)return null;switch(c.type){case"Point":return ft=j(_),Vr(I,n,ft,a);case"MultiPoint":for(Pt=0,Gt=_.length;Pt<Gt;Pt++)ft=j(_[Pt]),w.push(Vr(I,n,ft,a));return new Un(w);case"LineString":case"MultiLineString":return pt=ko(_,c.type==="LineString"?0:1,j),new hi(pt,a);case"Polygon":case"MultiPolygon":return pt=ko(_,c.type==="Polygon"?1:2,j),new Jn(pt,a);case"GeometryCollection":for(Pt=0,Gt=c.geometries.length;Pt<Gt;Pt++){var ae=Zr({geometry:c.geometries[Pt],type:"Feature",properties:n.properties},a);ae&&w.push(ae)}return new Un(w);case"FeatureCollection":for(Pt=0,Gt=c.features.length;Pt<Gt;Pt++){var Le=Zr(c.features[Pt],a);Le&&w.push(Le)}return new Un(w);default:throw new Error("Invalid GeoJSON object.")}}function Vr(n,a,c,_){return n?n(a,c):new Lo(c,_&&_.markersInheritOptions&&_)}function ar(n){return new Qt(n[1],n[0],n[2])}function ko(n,a,c){for(var _=[],w=0,I=n.length,j;w<I;w++)j=a?ko(n[w],a-1,c):(c||ar)(n[w]),_.push(j);return _}function xo(n,a){return n=pe(n),n.alt!==void 0?[U(n.lng,a),U(n.lat,a),U(n.alt,a)]:[U(n.lng,a),U(n.lat,a)]}function vn(n,a,c,_){for(var w=[],I=0,j=n.length;I<j;I++)w.push(a?vn(n[I],tn(n[I])?0:a-1,c,_):xo(n[I],_));return!a&&c&&w.length>0&&w.push(w[0].slice()),w}function xn(n,a){return n.feature?p({},n.feature,{geometry:a}):o(a)}function o(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var t={toGeoJSON:function(n){return xn(this,{type:"Point",coordinates:xo(this.getLatLng(),n)})}};Lo.include(t),io.include(t),no.include(t),hi.include({toGeoJSON:function(n){var a=!tn(this._latlngs),c=vn(this._latlngs,a?1:0,!1,n);return xn(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),Jn.include({toGeoJSON:function(n){var a=!tn(this._latlngs),c=a&&!tn(this._latlngs[0]),_=vn(this._latlngs,c?2:a?1:0,!0,n);return a||(_=[_]),xn(this,{type:(c?"Multi":"")+"Polygon",coordinates:_})}}),yr.include({toMultiPoint:function(n){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(n).geometry.coordinates)}),xn(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(n){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(n);var c=a==="GeometryCollection",_=[];return this.eachLayer(function(w){if(w.toGeoJSON){var I=w.toGeoJSON(n);if(c)_.push(I.geometry);else{var j=o(I);j.type==="FeatureCollection"?_.push.apply(_,j.features):_.push(j)}}}),c?xn(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function e(n,a){return new Ai(n,a)}var r=e,l=Sn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,a,c){this._url=n,this._bounds=Ht(a),tt(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ce(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ze(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&gr(this._image),this},bringToBack:function(){return this._map&&nr(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=Ht(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",a=this._image=n?this._url:be("img");if(ce(a,"leaflet-image-layer"),this._zoomAnimated&&ce(a,"leaflet-zoom-animated"),this.options.className&&ce(a,this.options.className),a.onselectstart=G,a.onmousemove=G,a.onload=T(this.fire,this,"load"),a.onerror=T(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(n){var a=this._map.getZoomScale(n.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;pr(this._image,c,a)},_reset:function(){var n=this._image,a=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();Qe(n,a.min),n.style.width=c.x+"px",n.style.height=c.y+"px"},_updateOpacity:function(){ln(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),g=function(n,a,c){return new l(n,a,c)},v=l.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",a=this._image=n?this._url:be("video");if(ce(a,"leaflet-image-layer"),this._zoomAnimated&&ce(a,"leaflet-zoom-animated"),this.options.className&&ce(a,this.options.className),a.onselectstart=G,a.onmousemove=G,a.onloadeddata=T(this.fire,this,"load"),n){for(var c=a.getElementsByTagName("source"),_=[],w=0;w<c.length;w++)_.push(c[w].src);this._url=c.length>0?_:[a.src];return}_t(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var j=be("source");j.src=this._url[I],a.appendChild(j)}}});function b(n,a,c){return new v(n,a,c)}var R=l.extend({_initImage:function(){var n=this._image=this._url;ce(n,"leaflet-image-layer"),this._zoomAnimated&&ce(n,"leaflet-zoom-animated"),this.options.className&&ce(n,this.options.className),n.onselectstart=G,n.onmousemove=G}});function z(n,a,c){return new R(n,a,c)}var et=Sn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,a){n&&(n instanceof Qt||_t(n))?(this._latlng=pe(n),tt(this,a)):(tt(this,n),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&ln(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&ln(this._container,1),this.bringToFront(),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(ln(this._container,0),this._removeTimeout=setTimeout(T(Ze,void 0,this._container),200)):Ze(this._container),this.options.interactive&&(De(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=pe(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gr(this._container),this},bringToBack:function(){return this._map&&nr(this._container),this},_prepareOpen:function(n){var a=this._source;if(!a._map)return!1;if(a instanceof Un){a=null;var c=this._source._layers;for(var _ in c)if(c[_]._map){a=c[_];break}if(!a)return!1;this._source=a}if(!n)if(a.getCenter)n=a.getCenter();else if(a.getLatLng)n=a.getLatLng();else if(a.getBounds)n=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")n.innerHTML=a;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),a=vt(this.options.offset),c=this._getAnchor();this._zoomAnimated?Qe(this._container,n.add(c)):a=a.add(n).add(c);var _=this._containerBottom=-a.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=_+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});le.include({_initOverlay:function(n,a,c,_){var w=a;return w instanceof n||(w=new n(_).setContent(a)),c&&w.setLatLng(c),w}}),Sn.include({_initOverlay:function(n,a,c,_){var w=c;return w instanceof n?(tt(w,_),w._source=this):(w=a&&!_?a:new n(_,this),w.setContent(c)),w}});var lt=et.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,et.prototype.openOn.call(this,n)},onAdd:function(n){et.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ti||this._source.on("preclick",_n))},onRemove:function(n){et.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ti||this._source.off("preclick",_n))},getEvents:function(){var n=et.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",a=this._container=be("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=be("div",n+"-content-wrapper",a);if(this._contentNode=be("div",n+"-content",c),qr(a),Mi(this._contentNode),me(a,"contextmenu",_n),this._tipContainer=be("div",n+"-tip-container",a),this._tip=be("div",n+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=be("a",n+"-close-button",a);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',me(_,"click",function(w){Je(w),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,a=n.style;a.width="",a.whiteSpace="nowrap";var c=n.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var _=n.offsetHeight,w=this.options.maxHeight,I="leaflet-popup-scrolled";w&&_>w?(a.height=w+"px",ce(n,I)):De(n,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),c=this._getAnchor();Qe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,a=parseInt(bi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,_=this._containerWidth,w=new zt(this._containerLeft,-c-this._containerBottom);w._add(ir(this._container));var I=n.layerPointToContainerPoint(w),j=vt(this.options.autoPanPadding),ft=vt(this.options.autoPanPaddingTopLeft||j),pt=vt(this.options.autoPanPaddingBottomRight||j),Pt=n.getSize(),Gt=0,ae=0;I.x+_+pt.x>Pt.x&&(Gt=I.x+_-Pt.x+pt.x),I.x-Gt-ft.x<0&&(Gt=I.x-ft.x),I.y+c+pt.y>Pt.y&&(ae=I.y+c-Pt.y+pt.y),I.y-ae-ft.y<0&&(ae=I.y-ft.y),(Gt||ae)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([Gt,ae]))}},_getAnchor:function(){return vt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kt=function(n,a){return new lt(n,a)};le.mergeOptions({closePopupOnClick:!0}),le.include({openPopup:function(n,a,c){return this._initOverlay(lt,n,a,c).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),Sn.include({bindPopup:function(n,a){return this._popup=this._initOverlay(lt,this._popup,n,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof Un||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){rr(n);var a=n.layer||n.target;if(this._popup._source===a&&!(a instanceof Ti)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=a,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Ot=et.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){et.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){et.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=et.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",a=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=be("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+S(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var a,c,_=this._map,w=this._container,I=_.latLngToContainerPoint(_.getCenter()),j=_.layerPointToContainerPoint(n),ft=this.options.direction,pt=w.offsetWidth,Pt=w.offsetHeight,Gt=vt(this.options.offset),ae=this._getAnchor();ft==="top"?(a=pt/2,c=Pt):ft==="bottom"?(a=pt/2,c=0):ft==="center"?(a=pt/2,c=Pt/2):ft==="right"?(a=0,c=Pt/2):ft==="left"?(a=pt,c=Pt/2):j.x<I.x?(ft="right",a=0,c=Pt/2):(ft="left",a=pt+(Gt.x+ae.x)*2,c=Pt/2),n=n.subtract(vt(a,c,!0)).add(Gt).add(ae),De(w,"leaflet-tooltip-right"),De(w,"leaflet-tooltip-left"),De(w,"leaflet-tooltip-top"),De(w,"leaflet-tooltip-bottom"),ce(w,"leaflet-tooltip-"+ft),Qe(w,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&ln(this._container,n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(a)},_getAnchor:function(){return vt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yt=function(n,a){return new Ot(n,a)};le.include({openTooltip:function(n,a,c){return this._initOverlay(Ot,n,a,c).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),Sn.include({bindTooltip:function(n,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ot,this._tooltip,n,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var a=n?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof Un||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&(me(a,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),me(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var a=n.latlng,c,_;this._tooltip.options.sticky&&n.originalEvent&&(c=this._map.mouseEventToContainerPoint(n.originalEvent),_=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(a)}});var ne=Ur.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var a=n&&n.tagName==="DIV"?n:document.createElement("div"),c=this.options;if(c.html instanceof Element?(uo(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var _=vt(c.bgPos);a.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function Ce(n){return new ne(n)}Ur.Default=eo;var we=Sn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:qt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){tt(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Ze(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(nr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=W(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof zt?n:new zt(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var a=this.getPane().children,c=-n(-1/0,1/0),_=0,w=a.length,I;_<w;_++)I=a[_].style.zIndex,a[_]!==this._container&&I&&(c=n(c,+I));isFinite(c)&&(this.options.zIndex=c+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!qt.ielt9){ln(this._container,this.options.opacity);var n=+new Date,a=!1,c=!1;for(var _ in this._tiles){var w=this._tiles[_];if(!(!w.current||!w.loaded)){var I=Math.min(1,(n-w.loaded)/200);ln(w.el,I),I<1?a=!0:(w.active?c=!0:this._onOpaqueTile(w),w.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(jt(this._fadeFrame),this._fadeFrame=Ft(this._updateOpacity,this))}},_onOpaqueTile:G,_initContainer:function(){this._container||(this._container=be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,a=this.options.maxZoom;if(n!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===n?(this._levels[c].el.style.zIndex=a-Math.abs(n-c),this._onUpdateLevel(c)):(Ze(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var _=this._levels[n],w=this._map;return _||(_=this._levels[n]={},_.el=be("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=a,_.origin=w.project(w.unproject(w.getPixelOrigin()),n).round(),_.zoom=n,this._setZoomTransform(_,w.getCenter(),w.getZoom()),G(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:G,_onRemoveLevel:G,_onCreateLevel:G,_pruneTiles:function(){if(this._map){var n,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)a=this._tiles[n],a.retain=a.current;for(n in this._tiles)if(a=this._tiles[n],a.current&&!a.active){var _=a.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var a in this._tiles)this._tiles[a].coords.z===n&&this._removeTile(a)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Ze(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,a,c,_){var w=Math.floor(n/2),I=Math.floor(a/2),j=c-1,ft=new zt(+w,+I);ft.z=+j;var pt=this._tileCoordsToKey(ft),Pt=this._tiles[pt];return Pt&&Pt.active?(Pt.retain=!0,!0):(Pt&&Pt.loaded&&(Pt.retain=!0),j>_?this._retainParent(w,I,j,_):!1)},_retainChildren:function(n,a,c,_){for(var w=2*n;w<2*n+2;w++)for(var I=2*a;I<2*a+2;I++){var j=new zt(w,I);j.z=c+1;var ft=this._tileCoordsToKey(j),pt=this._tiles[ft];if(pt&&pt.active){pt.retain=!0;continue}else pt&&pt.loaded&&(pt.retain=!0);c+1<_&&this._retainChildren(w,I,c+1,_)}},_resetView:function(n){var a=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var a=this.options;return a.minNativeZoom!==void 0&&n<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<n?a.maxNativeZoom:n},_setView:function(n,a,c,_){var w=Math.round(a);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var I=this.options.updateWhenZooming&&w!==this._tileZoom;(!_||I)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(n),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(n,a)},_setZoomTransforms:function(n,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],n,a)},_setZoomTransform:function(n,a,c){var _=this._map.getZoomScale(c,n.zoom),w=n.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(a,c)).round();qt.any3d?pr(n.el,w,_):Qe(n.el,w)},_resetGrid:function(){var n=this._map,a=n.options.crs,c=this._tileSize=this.getTileSize(),_=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,a.wrapLng[0]],_).x/c.x),Math.ceil(n.project([0,a.wrapLng[1]],_).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([a.wrapLat[0],0],_).y/c.x),Math.ceil(n.project([a.wrapLat[1],0],_).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),_=a.getZoomScale(c,this._tileZoom),w=a.project(n,this._tileZoom).floor(),I=a.getSize().divideBy(_*2);return new fe(w.subtract(I),w.add(I))},_update:function(n){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(n===void 0&&(n=a.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(n),w=this._pxBoundsToTileRange(_),I=w.getCenter(),j=[],ft=this.options.keepBuffer,pt=new fe(w.getBottomLeft().subtract([ft,-ft]),w.getTopRight().add([ft,-ft]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Pt in this._tiles){var Gt=this._tiles[Pt].coords;(Gt.z!==this._tileZoom||!pt.contains(new zt(Gt.x,Gt.y)))&&(this._tiles[Pt].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(n,c);return}for(var ae=w.min.y;ae<=w.max.y;ae++)for(var Le=w.min.x;Le<=w.max.x;Le++){var Tn=new zt(Le,ae);if(Tn.z=this._tileZoom,!!this._isValidTile(Tn)){var En=this._tiles[this._tileCoordsToKey(Tn)];En?En.current=!0:j.push(Tn)}}if(j.sort(function($n,Co){return $n.distanceTo(I)-Co.distanceTo(I)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ni=document.createDocumentFragment();for(Le=0;Le<j.length;Le++)this._addTile(j[Le],Ni);this._level.el.appendChild(Ni)}}}},_isValidTile:function(n){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(n.x<c.min.x||n.x>c.max.x)||!a.wrapLat&&(n.y<c.min.y||n.y>c.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(n);return Ht(this.options.bounds).overlaps(_)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var a=this._map,c=this.getTileSize(),_=n.scaleBy(c),w=_.add(c),I=a.unproject(_,n.z),j=a.unproject(w,n.z);return[I,j]},_tileCoordsToBounds:function(n){var a=this._tileCoordsToNwSe(n),c=new ue(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var a=n.split(":"),c=new zt(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(n){var a=this._tiles[n];a&&(Ze(a.el),delete this._tiles[n],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){ce(n,"leaflet-tile");var a=this.getTileSize();n.style.width=a.x+"px",n.style.height=a.y+"px",n.onselectstart=G,n.onmousemove=G,qt.ielt9&&this.options.opacity<1&&ln(n,this.options.opacity)},_addTile:function(n,a){var c=this._getTilePos(n),_=this._tileCoordsToKey(n),w=this.createTile(this._wrapCoords(n),T(this._tileReady,this,n));this._initTile(w),this.createTile.length<2&&Ft(T(this._tileReady,this,n,null,w)),Qe(w,c),this._tiles[_]={el:w,coords:n,current:!0},a.appendChild(w),this.fire("tileloadstart",{tile:w,coords:n})},_tileReady:function(n,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:n});var _=this._tileCoordsToKey(n);c=this._tiles[_],c&&(c.loaded=+new Date,this._map._fadeAnimated?(ln(c.el,0),jt(this._fadeFrame),this._fadeFrame=Ft(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ce(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),qt.ielt9||!this._map._fadeAnimated?Ft(this._pruneTiles,this):setTimeout(T(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var a=new zt(this._wrapX?nt(n.x,this._wrapX):n.x,this._wrapY?nt(n.y,this._wrapY):n.y);return a.z=n.z,a},_pxBoundsToTileRange:function(n){var a=this.getTileSize();return new fe(n.min.unscaleBy(a).floor(),n.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function Ue(n){return new we(n)}var We=we.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,a){this._url=n,a=tt(this,a),a.detectRetina&&qt.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,a){return this._url===n&&a===void 0&&(a=!0),this._url=n,a||this.redraw(),this},createTile:function(n,a){var c=document.createElement("img");return me(c,"load",T(this._tileOnLoad,this,a,c)),me(c,"error",T(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(n),c},getTileUrl:function(n){var a={r:qt.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-n.y;this.options.tms&&(a.y=c),a["-y"]=c}return Lt(this._url,p(a,this.options))},_tileOnLoad:function(n,a){qt.ielt9?setTimeout(T(n,this,null,a),0):n(null,a)},_tileOnError:function(n,a,c){var _=this.options.errorTileUrl;_&&a.getAttribute("src")!==_&&(a.src=_),n(c,a)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,_=this.options.zoomOffset;return c&&(n=a-n),n+_},_getSubdomain:function(n){var a=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var n,a;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(a=this._tiles[n].el,a.onload=G,a.onerror=G,!a.complete)){a.src=yt;var c=this._tiles[n].coords;Ze(a),delete this._tiles[n],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(n){var a=this._tiles[n];if(a)return a.el.setAttribute("src",yt),we.prototype._removeTile.call(this,n)},_tileReady:function(n,a,c){if(!(!this._map||c&&c.getAttribute("src")===yt))return we.prototype._tileReady.call(this,n,a,c)}});function dn(n,a){return new We(n,a)}var ur=We.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,a){this._url=n;var c=p({},this.defaultWmsParams);for(var _ in a)_ in this.options||(c[_]=a[_]);a=tt(this,a);var w=a.detectRetina&&qt.retina?2:1,I=this.getTileSize();c.width=I.x*w,c.height=I.y*w,this.wmsParams=c},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,We.prototype.onAdd.call(this,n)},getTileUrl:function(n){var a=this._tileCoordsToNwSe(n),c=this._crs,_=xe(c.project(a[0]),c.project(a[1])),w=_.min,I=_.max,j=(this._wmsVersion>=1.3&&this._crs===li?[w.y,w.x,I.y,I.x]:[w.x,w.y,I.x,I.y]).join(","),ft=We.prototype.getTileUrl.call(this,n);return ft+ct(this.wmsParams,ft,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(n,a){return p(this.wmsParams,n),a||this.redraw(),this}});function ro(n,a){return new ur(n,a)}We.WMS=ur,dn.wms=ro;var ci=Sn.extend({options:{padding:.1},initialize:function(n){tt(this,n),S(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ce(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,a){var c=this._map.getZoomScale(a,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,a),I=_.multiplyBy(-c).add(w).subtract(this._map._getNewPixelOrigin(n,a));qt.any3d?pr(this._container,I,c):Qe(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-n)).round();this._bounds=new fe(c,c.add(a.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),oo=ci.extend({options:{tolerance:0},getEvents:function(){var n=ci.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ci.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");me(n,"mousemove",this._onMouseMove,this),me(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){jt(this._redrawRequest),delete this._ctx,Ze(this._container),qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var a in this._layers)n=this._layers[a],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ci.prototype._update.call(this);var n=this._bounds,a=this._container,c=n.getSize(),_=qt.retina?2:1;Qe(a,n.min),a.width=_*c.x,a.height=_*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",qt.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){ci.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[S(n)]=n;var a=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var a=n._order,c=a.next,_=a.prev;c?c.prev=_:this._drawLast=_,_?_.next=c:this._drawFirst=c,delete n._order,delete this._layers[S(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var a=n.options.dashArray.split(/[, ]+/),c=[],_,w;for(w=0;w<a.length;w++){if(_=Number(a[w]),isNaN(_))return;c.push(_)}n.options._dashArray=c}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||Ft(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var a=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(n._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(n._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var a=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)n=_.layer,(!a||n._pxBounds&&n._pxBounds.intersects(a))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,a){if(this._drawing){var c,_,w,I,j=n._parts,ft=j.length,pt=this._ctx;if(ft){for(pt.beginPath(),c=0;c<ft;c++){for(_=0,w=j[c].length;_<w;_++)I=j[c][_],pt[_?"lineTo":"moveTo"](I.x,I.y);a&&pt.closePath()}this._fillStroke(pt,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var a=n._point,c=this._ctx,_=Math.max(Math.round(n._radius),1),w=(Math.max(Math.round(n._radiusY),1)||_)/_;w!==1&&(c.save(),c.scale(1,w)),c.beginPath(),c.arc(a.x,a.y/w,_,0,Math.PI*2,!1),w!==1&&c.restore(),this._fillStroke(c,n)}},_fillStroke:function(n,a){var c=a.options;c.fill&&(n.globalAlpha=c.fillOpacity,n.fillStyle=c.fillColor||c.color,n.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(n.setLineDash&&n.setLineDash(a.options&&a.options._dashArray||[]),n.globalAlpha=c.opacity,n.lineWidth=c.weight,n.strokeStyle=c.color,n.lineCap=c.lineCap,n.lineJoin=c.lineJoin,n.stroke())},_onClick:function(n){for(var a=this._map.mouseEventToLayerPoint(n),c,_,w=this._drawFirst;w;w=w.next)c=w.layer,c.options.interactive&&c._containsPoint(a)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(c))&&(_=c);this._fireEvent(_?[_]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,a)}},_handleMouseOut:function(n){var a=this._hoveredLayer;a&&(De(this._container,"leaflet-interactive"),this._fireEvent([a],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,a){if(!this._mouseHoverThrottled){for(var c,_,w=this._drawFirst;w;w=w.next)c=w.layer,c.options.interactive&&c._containsPoint(a)&&(_=c);_!==this._hoveredLayer&&(this._handleMouseOut(n),_&&(ce(this._container,"leaflet-interactive"),this._fireEvent([_],n,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(T(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,a,c){this._map._fireDOMEvent(a,c||a.type,n)},_bringToFront:function(n){var a=n._order;if(a){var c=a.next,_=a.prev;if(c)c.prev=_;else return;_?_.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(n)}},_bringToBack:function(n){var a=n._order;if(a){var c=a.next,_=a.prev;if(_)_.next=c;else return;c?c.prev=_:_&&(this._drawLast=_),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(n)}}});function Ko(n){return qt.canvas?new oo(n):null}var Yr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Jo={_initContainer:function(){this._container=be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ci.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var a=n._container=Yr("shape");ce(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",n._path=Yr("path"),a.appendChild(n._path),this._updateStyle(n),this._layers[S(n)]=n},_addPath:function(n){var a=n._container;this._container.appendChild(a),n.options.interactive&&n.addInteractiveTarget(a)},_removePath:function(n){var a=n._container;Ze(a),n.removeInteractiveTarget(a),delete this._layers[S(n)]},_updateStyle:function(n){var a=n._stroke,c=n._fill,_=n.options,w=n._container;w.stroked=!!_.stroke,w.filled=!!_.fill,_.stroke?(a||(a=n._stroke=Yr("stroke")),w.appendChild(a),a.weight=_.weight+"px",a.color=_.color,a.opacity=_.opacity,_.dashArray?a.dashStyle=_t(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=_.lineCap.replace("butt","flat"),a.joinstyle=_.lineJoin):a&&(w.removeChild(a),n._stroke=null),_.fill?(c||(c=n._fill=Yr("fill")),w.appendChild(c),c.color=_.fillColor||_.color,c.opacity=_.fillOpacity):c&&(w.removeChild(c),n._fill=null)},_updateCircle:function(n){var a=n._point.round(),c=Math.round(n._radius),_=Math.round(n._radiusY||c);this._setPath(n,n._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+_+" 0,"+65535*360)},_setPath:function(n,a){n._path.v=a},_bringToFront:function(n){gr(n._container)},_bringToBack:function(n){nr(n._container)}},Er=qt.vml?Yr:Rn,wr=ci.extend({_initContainer:function(){this._container=Er("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Er("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ze(this._container),qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ci.prototype._update.call(this);var n=this._bounds,a=n.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),Qe(c,n.min),c.setAttribute("viewBox",[n.min.x,n.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(n){var a=n._path=Er("path");n.options.className&&ce(a,n.options.className),n.options.interactive&&ce(a,"leaflet-interactive"),this._updateStyle(n),this._layers[S(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Ze(n._path),n.removeInteractiveTarget(n._path),delete this._layers[S(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var a=n._path,c=n.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(n,a){this._setPath(n,Hn(n._parts,a))},_updateCircle:function(n){var a=n._point,c=Math.max(Math.round(n._radius),1),_=Math.max(Math.round(n._radiusY),1)||c,w="a"+c+","+_+" 0 1,0 ",I=n._empty()?"M0 0":"M"+(a.x-c)+","+a.y+w+c*2+",0 "+w+-c*2+",0 ";this._setPath(n,I)},_setPath:function(n,a){n._path.setAttribute("d",a)},_bringToFront:function(n){gr(n._path)},_bringToBack:function(n){nr(n._path)}});qt.vml&&wr.include(Jo);function bo(n){return qt.svg||qt.vml?new wr(n):null}le.include({getRenderer:function(n){var a=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var a=this._paneRenderers[n];return a===void 0&&(a=this._createRenderer({pane:n}),this._paneRenderers[n]=a),a},_createRenderer:function(n){return this.options.preferCanvas&&Ko(n)||bo(n)}});var ds=Jn.extend({initialize:function(n,a){Jn.prototype.initialize.call(this,this._boundsToLatLngs(n),a)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=Ht(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Ii(n,a){return new ds(n,a)}wr.create=Er,wr.pointsToPath=Hn,Ai.geometryToLayer=Zr,Ai.coordsToLatLng=ar,Ai.coordsToLatLngs=ko,Ai.latLngToCoords=xo,Ai.latLngsToCoords=vn,Ai.getFeature=xn,Ai.asFeature=o,le.mergeOptions({boxZoom:!0});var Zn=cn.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ze(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qi(),Do(),this._startPoint=this._map.mouseEventToContainerPoint(n),me(document,{contextmenu:rr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=be("div","leaflet-zoom-box",this._container),ce(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var a=new fe(this._point,this._startPoint),c=a.getSize();Qe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ze(this._box),De(this._container,"leaflet-crosshair")),Dr(),zr(),qe(document,{contextmenu:rr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(T(this._resetState,this),0);var a=new ue(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});le.addInitHook("addHandler","boxZoom",Zn),le.mergeOptions({doubleClickZoom:!0});var Rs=cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var a=this._map,c=a.getZoom(),_=a.options.zoomDelta,w=n.originalEvent.shiftKey?c-_:c+_;a.options.doubleClickZoom==="center"?a.setZoom(w):a.setZoomAround(n.containerPoint,w)}});le.addInitHook("addHandler","doubleClickZoom",Rs),le.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ri=cn.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new sr(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}ce(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){De(this._map._container,"leaflet-grab"),De(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Ht(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,a){return n-(n-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;n.x<a.min.x&&(n.x=this._viscousLimit(n.x,a.min.x)),n.y<a.min.y&&(n.y=this._viscousLimit(n.y,a.min.y)),n.x>a.max.x&&(n.x=this._viscousLimit(n.x,a.max.x)),n.y>a.max.y&&(n.y=this._viscousLimit(n.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,a=Math.round(n/2),c=this._initialWorldOffset,_=this._draggable._newPos.x,w=(_-a+c)%n+a-c,I=(_+a+c)%n-a-c,j=Math.abs(w+c)<Math.abs(I+c)?w:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(n){var a=this._map,c=a.options,_=!c.inertia||n.noInertia||this._times.length<2;if(a.fire("dragend",n),_)a.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,j=c.easeLinearity,ft=w.multiplyBy(j/I),pt=ft.distanceTo([0,0]),Pt=Math.min(c.inertiaMaxSpeed,pt),Gt=ft.multiplyBy(Pt/pt),ae=Pt/(c.inertiaDeceleration*j),Le=Gt.multiplyBy(-ae/2).round();!Le.x&&!Le.y?a.fire("moveend"):(Le=a._limitOffset(Le,a.options.maxBounds),Ft(function(){a.panBy(Le,{duration:ae,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});le.addInitHook("addHandler","dragging",Ri),le.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _e=cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),me(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,a=document.documentElement,c=n.scrollTop||a.scrollTop,_=n.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(_,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var a=this._panKeys={},c=this.keyCodes,_,w;for(_=0,w=c.left.length;_<w;_++)a[c.left[_]]=[-1*n,0];for(_=0,w=c.right.length;_<w;_++)a[c.right[_]]=[n,0];for(_=0,w=c.down.length;_<w;_++)a[c.down[_]]=[0,n];for(_=0,w=c.up.length;_<w;_++)a[c.up[_]]=[0,-1*n]},_setZoomDelta:function(n){var a=this._zoomKeys={},c=this.keyCodes,_,w;for(_=0,w=c.zoomIn.length;_<w;_++)a[c.zoomIn[_]]=n;for(_=0,w=c.zoomOut.length;_<w;_++)a[c.zoomOut[_]]=-n},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=n.keyCode,c=this._map,_;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(_=this._panKeys[a],n.shiftKey&&(_=vt(_).multiplyBy(3)),c.options.maxBounds&&(_=c._limitOffset(vt(_),c.options.maxBounds)),c.options.worldCopyJump){var w=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(_)));c.panTo(w)}else c.panBy(_)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;rr(n)}}});le.addInitHook("addHandler","keyboard",_e),le.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var gs=cn.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var a=Uo(n),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var _=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(T(this._performZoom,this),_),rr(n)},_performZoom:function(){var n=this._map,a=n.getZoom(),c=this._map.options.zoomSnap||0;n._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,I=c?Math.ceil(w/c)*c:w,j=n._limitZoom(a+(this._delta>0?I:-I))-a;this._delta=0,this._startTime=null,j&&(n.options.scrollWheelZoom==="center"?n.setZoom(a+j):n.setZoomAround(this._lastMousePos,a+j))}});le.addInitHook("addHandler","scrollWheelZoom",gs);var Ns=600;le.mergeOptions({tapHold:qt.touchNative&&qt.safari&&qt.mobile,tapTolerance:15});var Lr=cn.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var a=n.touches[0];this._startPos=this._newPos=new zt(a.clientX,a.clientY),this._holdTimeout=setTimeout(T(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",Je),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),Ns),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){qe(document,"touchend",Je),qe(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),qe(document,"touchend touchcancel contextmenu",this._cancel,this),qe(document,"touchmove",this._onMove,this)},_onMove:function(n){var a=n.touches[0];this._newPos=new zt(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,a){var c=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});le.addInitHook("addHandler","tapHold",Lr),le.mergeOptions({touchZoom:qt.touch,bounceAtZoomLimits:!0});var gn=cn.extend({addHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){De(this._map._container,"leaflet-touch-zoom"),qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var a=this._map;if(!(!n.touches||n.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(n.touches[0]),_=a.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(_)._divideBy(2))),this._startDist=c.distanceTo(_),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),Je(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(n.touches[0]),_=a.mouseEventToContainerPoint(n.touches[1]),w=c.distanceTo(_)/this._startDist;if(this._zoom=a.getScaleZoom(w,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&w<1||this._zoom>a.getMaxZoom()&&w>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var I=c._add(_)._divideBy(2)._subtract(this._centerPoint);if(w===1&&I.x===0&&I.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),jt(this._animRequest);var j=T(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ft(j,this,!0),Je(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,jt(this._animRequest),qe(document,"touchmove",this._onTouchMove,this),qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});le.addInitHook("addHandler","touchZoom",gn),le.BoxZoom=Zn,le.DoubleClickZoom=Rs,le.Drag=Ri,le.Keyboard=_e,le.ScrollWheelZoom=gs,le.TapHold=Lr,le.TouchZoom=gn,d.Bounds=fe,d.Browser=qt,d.CRS=ve,d.Canvas=oo,d.Circle=io,d.CircleMarker=no,d.Class=oe,d.Control=ai,d.DivIcon=ne,d.DivOverlay=et,d.DomEvent=Ms,d.DomUtil=co,d.Draggable=sr,d.Evented=se,d.FeatureGroup=Un,d.GeoJSON=Ai,d.GridLayer=we,d.Handler=cn,d.Icon=Ur,d.ImageOverlay=l,d.LatLng=Qt,d.LatLngBounds=ue,d.Layer=Sn,d.LayerGroup=yr,d.LineUtil=to,d.Map=le,d.Marker=Lo,d.Mixin=os,d.Path=Ti,d.Point=zt,d.PolyUtil=zn,d.Polygon=Jn,d.Polyline=hi,d.Popup=lt,d.PosAnimation=Zo,d.Projection=Eo,d.Rectangle=ds,d.Renderer=ci,d.SVG=wr,d.SVGOverlay=R,d.TileLayer=We,d.Tooltip=Ot,d.Transformation=Xt,d.Util=Vt,d.VideoOverlay=v,d.bind=T,d.bounds=xe,d.canvas=Ko,d.circle=vr,d.circleMarker=cs,d.control=hn,d.divIcon=Ce,d.extend=p,d.featureGroup=ls,d.geoJSON=e,d.geoJson=r,d.gridLayer=Ue,d.icon=Xo,d.imageOverlay=g,d.latLng=pe,d.latLngBounds=Ht,d.layerGroup=wo,d.map=po,d.marker=Is,d.point=vt,d.polygon=fs,d.polyline=Wo,d.popup=kt,d.rectangle=Ii,d.setOptions=tt,d.stamp=S,d.svg=bo,d.svgOverlay=z,d.tileLayer=dn,d.tooltip=Yt,d.transformation=Y,d.version=m,d.videoOverlay=b;var ua=window.L;d.noConflict=function(){return window.L=ua,this},window.L=d})});var ti=63710088e-1,_d={centimeters:ti*100,centimetres:ti*100,degrees:360/(2*Math.PI),feet:ti*3.28084,inches:ti*39.37,kilometers:ti/1e3,kilometres:ti/1e3,meters:ti,metres:ti,miles:ti/1609.344,millimeters:ti*1e3,millimetres:ti*1e3,nauticalmiles:ti/1852,radians:1,yards:ti*1.0936};function Mc(d,m){var p,x,T,C,S,W,nt,G,U,Z,V=0,tt=d.type==="FeatureCollection",ct=d.type==="Feature",bt=tt?d.features.length:1;for(p=0;p<bt;p++){for(W=tt?d.features[p].geometry:ct?d.geometry:d,G=tt?d.features[p].properties:ct?d.properties:{},U=tt?d.features[p].bbox:ct?d.bbox:void 0,Z=tt?d.features[p].id:ct?d.id:void 0,nt=W?W.type==="GeometryCollection":!1,S=nt?W.geometries.length:1,T=0;T<S;T++){if(C=nt?W.geometries[T]:W,C===null){if(m(null,V,G,U,Z)===!1)return!1;continue}switch(C.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(C,V,G,U,Z)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<C.geometries.length;x++)if(m(C.geometries[x],V,G,U,Z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}V++}}function ul(d,m,p){var x=p;return Mc(d,function(T,C,S,W,nt){C===0&&p===void 0?x=T:x=m(x,T,C,S,W,nt)}),x}function ou(d){return ul(d,(m,p)=>m+Pc(p),0)}function Pc(d){let m=0,p;switch(d.type){case"Polygon":return ll(d.coordinates);case"MultiPolygon":for(p=0;p<d.coordinates.length;p++)m+=ll(d.coordinates[p]);return m;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function ll(d){let m=0;if(d&&d.length>0){m+=Math.abs(hl(d[0]));for(let p=1;p<d.length;p++)m-=Math.abs(hl(d[p]))}return m}var Sc=ti*ti/2,ru=Math.PI/180;function hl(d){let m=d.length-1;if(m<=2)return 0;let p=0,x=0;for(;x<m;){let T=d[x],C=d[x+1===m?0:x+1],S=d[x+2>=m?(x+2)%m:x+2],W=T[0]*ru,nt=C[1]*ru,G=S[0]*ru;p+=(G-W)*Math.sin(nt),x++}return p*Sc}var Hi=63710088e-1,Tc={centimeters:Hi*100,centimetres:Hi*100,degrees:360/(2*Math.PI),feet:Hi*3.28084,inches:Hi*39.37,kilometers:Hi/1e3,kilometres:Hi/1e3,meters:Hi,metres:Hi,miles:Hi/1609.344,millimeters:Hi*1e3,millimetres:Hi*1e3,nauticalmiles:Hi/1852,radians:1,yards:Hi*1.0936};function Ac(d,m,p={}){let x={type:"Feature"};return(p.id===0||p.id)&&(x.id=p.id),p.bbox&&(x.bbox=p.bbox),x.properties=m||{},x.geometry=d,x}function su(d,m,p={}){if(!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!cl(d[0])||!cl(d[1]))throw new Error("coordinates must contain numbers");return Ac({type:"Point",coordinates:d},m,p)}function fl(d,m="kilometers"){let p=Tc[m];if(!p)throw new Error(m+" units is invalid");return d*p}function dl(d){return d%(2*Math.PI)*180/Math.PI}function jr(d){return d%360*Math.PI/180}function cl(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function Po(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return[...d.geometry.coordinates];if(d.type==="Point")return[...d.coordinates]}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return[...d];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function gl(d){return d.type==="Feature"?d.geometry:d}function _a(d,m,p={}){if(p.final===!0)return Ic(d,m);let x=Po(d),T=Po(m),C=jr(x[0]),S=jr(T[0]),W=jr(x[1]),nt=jr(T[1]),G=Math.sin(S-C)*Math.cos(nt),U=Math.cos(W)*Math.sin(nt)-Math.sin(W)*Math.cos(nt)*Math.cos(S-C);return dl(Math.atan2(G,U))}function Ic(d,m){let p=_a(m,d);return p=(p+180)%360,p}var Be=11102230246251565e-32,wn=134217729,Gs=(3+8*Be)*Be;function Qo(d,m,p,x,T){let C,S,W,nt,G=m[0],U=x[0],Z=0,V=0;U>G==U>-G?(C=G,G=m[++Z]):(C=U,U=x[++V]);let tt=0;if(Z<d&&V<p)for(U>G==U>-G?(S=G+C,W=C-(S-G),G=m[++Z]):(S=U+C,W=C-(S-U),U=x[++V]),C=S,W!==0&&(T[tt++]=W);Z<d&&V<p;)U>G==U>-G?(S=C+G,nt=S-C,W=C-(S-nt)+(G-nt),G=m[++Z]):(S=C+U,nt=S-C,W=C-(S-nt)+(U-nt),U=x[++V]),C=S,W!==0&&(T[tt++]=W);for(;Z<d;)S=C+G,nt=S-C,W=C-(S-nt)+(G-nt),G=m[++Z],C=S,W!==0&&(T[tt++]=W);for(;V<p;)S=C+U,nt=S-C,W=C-(S-nt)+(U-nt),U=x[++V],C=S,W!==0&&(T[tt++]=W);return(C!==0||tt===0)&&(T[tt++]=C),tt}function qs(d,m){let p=m[0];for(let x=1;x<d;x++)p+=m[x];return p}function St(d){return new Float64Array(d)}var Rc=(3+16*Be)*Be,Nc=(2+12*Be)*Be,Bc=(9+64*Be)*Be*Be,vs=St(4),pl=St(8),ml=St(12),_l=St(16),di=St(4);function Oc(d,m,p,x,T,C,S){let W,nt,G,U,Z,V,tt,ct,bt,Lt,_t,wt,yt,Ct,It,Nt,Dt,Zt,Ft=d-T,jt=p-T,Vt=m-C,oe=x-C;Ct=Ft*oe,V=wn*Ft,tt=V-(V-Ft),ct=Ft-tt,V=wn*oe,bt=V-(V-oe),Lt=oe-bt,It=ct*Lt-(Ct-tt*bt-ct*bt-tt*Lt),Nt=Vt*jt,V=wn*Vt,tt=V-(V-Vt),ct=Vt-tt,V=wn*jt,bt=V-(V-jt),Lt=jt-bt,Dt=ct*Lt-(Nt-tt*bt-ct*bt-tt*Lt),_t=It-Dt,Z=It-_t,vs[0]=It-(_t+Z)+(Z-Dt),wt=Ct+_t,Z=wt-Ct,yt=Ct-(wt-Z)+(_t-Z),_t=yt-Nt,Z=yt-_t,vs[1]=yt-(_t+Z)+(Z-Nt),Zt=wt+_t,Z=Zt-wt,vs[2]=wt-(Zt-Z)+(_t-Z),vs[3]=Zt;let Pe=qs(4,vs),Tt=Nc*S;if(Pe>=Tt||-Pe>=Tt||(Z=d-Ft,W=d-(Ft+Z)+(Z-T),Z=p-jt,G=p-(jt+Z)+(Z-T),Z=m-Vt,nt=m-(Vt+Z)+(Z-C),Z=x-oe,U=x-(oe+Z)+(Z-C),W===0&&nt===0&&G===0&&U===0)||(Tt=Bc*S+Gs*Math.abs(Pe),Pe+=Ft*U+oe*W-(Vt*G+jt*nt),Pe>=Tt||-Pe>=Tt))return Pe;Ct=W*oe,V=wn*W,tt=V-(V-W),ct=W-tt,V=wn*oe,bt=V-(V-oe),Lt=oe-bt,It=ct*Lt-(Ct-tt*bt-ct*bt-tt*Lt),Nt=nt*jt,V=wn*nt,tt=V-(V-nt),ct=nt-tt,V=wn*jt,bt=V-(V-jt),Lt=jt-bt,Dt=ct*Lt-(Nt-tt*bt-ct*bt-tt*Lt),_t=It-Dt,Z=It-_t,di[0]=It-(_t+Z)+(Z-Dt),wt=Ct+_t,Z=wt-Ct,yt=Ct-(wt-Z)+(_t-Z),_t=yt-Nt,Z=yt-_t,di[1]=yt-(_t+Z)+(Z-Nt),Zt=wt+_t,Z=Zt-wt,di[2]=wt-(Zt-Z)+(_t-Z),di[3]=Zt;let se=Qo(4,vs,4,di,pl);Ct=Ft*U,V=wn*Ft,tt=V-(V-Ft),ct=Ft-tt,V=wn*U,bt=V-(V-U),Lt=U-bt,It=ct*Lt-(Ct-tt*bt-ct*bt-tt*Lt),Nt=Vt*G,V=wn*Vt,tt=V-(V-Vt),ct=Vt-tt,V=wn*G,bt=V-(V-G),Lt=G-bt,Dt=ct*Lt-(Nt-tt*bt-ct*bt-tt*Lt),_t=It-Dt,Z=It-_t,di[0]=It-(_t+Z)+(Z-Dt),wt=Ct+_t,Z=wt-Ct,yt=Ct-(wt-Z)+(_t-Z),_t=yt-Nt,Z=yt-_t,di[1]=yt-(_t+Z)+(Z-Nt),Zt=wt+_t,Z=Zt-wt,di[2]=wt-(Zt-Z)+(_t-Z),di[3]=Zt;let zt=Qo(se,pl,4,di,ml);Ct=W*U,V=wn*W,tt=V-(V-W),ct=W-tt,V=wn*U,bt=V-(V-U),Lt=U-bt,It=ct*Lt-(Ct-tt*bt-ct*bt-tt*Lt),Nt=nt*G,V=wn*nt,tt=V-(V-nt),ct=nt-tt,V=wn*G,bt=V-(V-G),Lt=G-bt,Dt=ct*Lt-(Nt-tt*bt-ct*bt-tt*Lt),_t=It-Dt,Z=It-_t,di[0]=It-(_t+Z)+(Z-Dt),wt=Ct+_t,Z=wt-Ct,yt=Ct-(wt-Z)+(_t-Z),_t=yt-Nt,Z=yt-_t,di[1]=yt-(_t+Z)+(Z-Nt),Zt=wt+_t,Z=Zt-wt,di[2]=wt-(Zt-Z)+(_t-Z),di[3]=Zt;let Oe=Qo(zt,ml,4,di,_l);return _l[Oe-1]}function au(d,m,p,x,T,C){let S=(m-C)*(p-T),W=(d-T)*(x-C),nt=S-W,G=Math.abs(S+W);return Math.abs(nt)>=Rc*G?nt:-Oc(d,m,p,x,T,C,G)}var Id=(7+56*Be)*Be,Rd=(3+28*Be)*Be,Nd=(26+288*Be)*Be*Be,Bd=St(4),Od=St(4),Dd=St(4),Fd=St(4),zd=St(4),Gd=St(4),qd=St(4),Ud=St(4),Zd=St(4),Vd=St(8),Yd=St(8),Hd=St(8),jd=St(4),Xd=St(8),Wd=St(8),Kd=St(8),Jd=St(12),$d=St(192),Qd=St(192);var ng=(10+96*Be)*Be,ig=(4+48*Be)*Be,rg=(44+576*Be)*Be*Be,og=St(4),sg=St(4),ag=St(4),ug=St(4),lg=St(4),hg=St(4),cg=St(4),fg=St(4),dg=St(8),gg=St(8),pg=St(8),mg=St(8),_g=St(8),yg=St(8),vg=St(8),Eg=St(8),wg=St(8),Lg=St(4),kg=St(4),xg=St(4),bg=St(8),Cg=St(16),Mg=St(16),Pg=St(16),Sg=St(32),Tg=St(32),Ag=St(48),Ig=St(64),Rg=St(1152),Ng=St(1152);var Fg=(16+224*Be)*Be,zg=(5+72*Be)*Be,Gg=(71+1408*Be)*Be*Be,qg=St(4),Ug=St(4),Zg=St(4),Vg=St(4),Yg=St(4),Hg=St(4),jg=St(4),Xg=St(4),Wg=St(4),Kg=St(4),Jg=St(24),$g=St(24),Qg=St(24),tp=St(24),ep=St(24),np=St(24),ip=St(24),rp=St(24),op=St(24),sp=St(24),ap=St(1152),up=St(1152),lp=St(1152),hp=St(1152),cp=St(1152),fp=St(2304),dp=St(2304),gp=St(3456),pp=St(5760),mp=St(8),_p=St(8),yp=St(8),vp=St(16),Ep=St(24),wp=St(48),Lp=St(48),kp=St(96),xp=St(192),bp=St(384),Cp=St(384),Mp=St(384),Pp=St(768);var Sp=St(96),Tp=St(96),Ap=St(96),Ip=St(1152);function ya(d,m){var p,x,T=0,C,S,W,nt,G,U,Z,V=d[0],tt=d[1],ct=m.length;for(p=0;p<ct;p++){x=0;var bt=m[p],Lt=bt.length-1;if(U=bt[0],U[0]!==bt[Lt][0]&&U[1]!==bt[Lt][1])throw new Error("First and last coordinates in a ring must be the same");for(S=U[0]-V,W=U[1]-tt,x;x<Lt;x++){if(Z=bt[x+1],nt=Z[0]-V,G=Z[1]-tt,W===0&&G===0){if(nt<=0&&S>=0||S<=0&&nt>=0)return 0}else if(G>=0&&W<=0||G<=0&&W>=0){if(C=au(S,nt,W,G,0,0),C===0)return 0;(C>0&&G>0&&W<=0||C<0&&G<=0&&W>0)&&T++}U=Z,W=G,S=nt}}return T%2!==0}function va(d,m,p={}){if(!d)throw new Error("point is required");if(!m)throw new Error("polygon is required");let x=Po(d),T=gl(m),C=T.type,S=m.bbox,W=T.coordinates;if(S&&Fc(x,S)===!1)return!1;C==="Polygon"&&(W=[W]);let nt=!1;for(var G=0;G<W.length;++G){let U=ya(x,W[G]);if(U===0)return!p.ignoreBoundary;U&&(nt=!0)}return nt}function Fc(d,m){return m[0]<=d[0]&&m[1]<=d[1]&&m[2]>=d[0]&&m[3]>=d[1]}var ji=63710088e-1,Jp={centimeters:ji*100,centimetres:ji*100,degrees:360/(2*Math.PI),feet:ji*3.28084,inches:ji*39.37,kilometers:ji/1e3,kilometres:ji/1e3,meters:ji,metres:ji,miles:ji/1609.344,millimeters:ji*1e3,millimetres:ji*1e3,nauticalmiles:ji/1852,radians:1,yards:ji*1.0936};function vl(d,m,p={}){let x={type:"Feature"};return(p.id===0||p.id)&&(x.id=p.id),p.bbox&&(x.bbox=p.bbox),x.properties=m||{},x.geometry=d,x}function El(d,m,p={}){if(d.length<2)throw new Error("coordinates must be an array of two or more positions");return vl({type:"LineString",coordinates:d},m,p)}function wl(d,m={}){let p={type:"FeatureCollection"};return m.id&&(p.id=m.id),m.bbox&&(p.bbox=m.bbox),p.features=d,p}function Ll(d,m,p={}){return vl({type:"MultiLineString",coordinates:d},m,p)}function Ea(d){return d.type==="Feature"?d.geometry:d}function kl(d,m={}){let p=Ea(d);switch(!m.properties&&d.type==="Feature"&&(m.properties=d.properties),p.type){case"Polygon":return zc(p,m);case"MultiPolygon":return Gc(p,m);default:throw new Error("invalid poly")}}function zc(d,m={}){let x=Ea(d).coordinates,T=m.properties?m.properties:d.type==="Feature"?d.properties:{};return xl(x,T)}function Gc(d,m={}){let x=Ea(d).coordinates,T=m.properties?m.properties:d.type==="Feature"?d.properties:{},C=[];return x.forEach(S=>{C.push(xl(S,T))}),wl(C)}function xl(d,m){return d.length>1?Ll(d,m):El(d[0],m)}var Xi=63710088e-1,im={centimeters:Xi*100,centimetres:Xi*100,degrees:360/(2*Math.PI),feet:Xi*3.28084,inches:Xi*39.37,kilometers:Xi/1e3,kilometres:Xi/1e3,meters:Xi,metres:Xi,miles:Xi/1609.344,millimeters:Xi*1e3,millimetres:Xi*1e3,nauticalmiles:Xi/1852,radians:1,yards:Xi*1.0936};function qc(d,m,p={}){let x={type:"Feature"};return(p.id===0||p.id)&&(x.id=p.id),p.bbox&&(x.bbox=p.bbox),x.properties=m||{},x.geometry=d,x}function Cl(d,m,p={}){if(!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!bl(d[0])||!bl(d[1]))throw new Error("coordinates must contain numbers");return qc({type:"Point",coordinates:d},m,p)}function bl(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function uu(d,m,p){if(d!==null)for(var x,T,C,S,W,nt,G,U=0,Z=0,V,tt=d.type,ct=tt==="FeatureCollection",bt=tt==="Feature",Lt=ct?d.features.length:1,_t=0;_t<Lt;_t++){G=ct?d.features[_t].geometry:bt?d.geometry:d,V=G?G.type==="GeometryCollection":!1,W=V?G.geometries.length:1;for(var wt=0;wt<W;wt++){var yt=0,Ct=0;if(S=V?G.geometries[wt]:G,S!==null){nt=S.coordinates;var It=S.type;switch(U=p&&(It==="Polygon"||It==="MultiPolygon")?1:0,It){case null:break;case"Point":if(m(nt,Z,_t,yt,Ct)===!1)return!1;Z++,yt++;break;case"LineString":case"MultiPoint":for(x=0;x<nt.length;x++){if(m(nt[x],Z,_t,yt,Ct)===!1)return!1;Z++,It==="MultiPoint"&&yt++}It==="LineString"&&yt++;break;case"Polygon":case"MultiLineString":for(x=0;x<nt.length;x++){for(T=0;T<nt[x].length-U;T++){if(m(nt[x][T],Z,_t,yt,Ct)===!1)return!1;Z++}It==="MultiLineString"&&yt++,It==="Polygon"&&Ct++}It==="Polygon"&&yt++;break;case"MultiPolygon":for(x=0;x<nt.length;x++){for(Ct=0,T=0;T<nt[x].length;T++){for(C=0;C<nt[x][T].length-U;C++){if(m(nt[x][T][C],Z,_t,yt,Ct)===!1)return!1;Z++}Ct++}yt++}break;case"GeometryCollection":for(x=0;x<S.geometries.length;x++)if(uu(S.geometries[x],m,p)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ml(d,m={}){if(d.bbox!=null&&m.recompute!==!0)return d.bbox;let p=[1/0,1/0,-1/0,-1/0];return uu(d,x=>{p[0]>x[0]&&(p[0]=x[0]),p[1]>x[1]&&(p[1]=x[1]),p[2]<x[0]&&(p[2]=x[0]),p[3]<x[1]&&(p[3]=x[1])}),p}function Es(d,m={}){let p=Ml(d),x=(p[0]+p[2])/2,T=(p[1]+p[3])/2;return Cl([x,T],m.properties,m)}var sh=al(Pl(),1);var gi=63710088e-1,Sl={centimeters:gi*100,centimetres:gi*100,degrees:360/(2*Math.PI),feet:gi*3.28084,inches:gi*39.37,kilometers:gi/1e3,kilometres:gi/1e3,meters:gi,metres:gi,miles:gi/1609.344,millimeters:gi*1e3,millimetres:gi*1e3,nauticalmiles:gi/1852,radians:1,yards:gi*1.0936};function Tl(d,m,p={}){let x={type:"Feature"};return(p.id===0||p.id)&&(x.id=p.id),p.bbox&&(x.bbox=p.bbox),x.properties=m||{},x.geometry=d,x}function wa(d,m={}){let p={type:"FeatureCollection"};return m.id&&(p.id=m.id),m.bbox&&(p.bbox=m.bbox),p.features=d,p}function Al(d,m="kilometers"){let p=Sl[m];if(!p)throw new Error(m+" units is invalid");return d*p}function Il(d,m="kilometers"){let p=Sl[m];if(!p)throw new Error(m+" units is invalid");return d/p}function cu(d,m){if(d.type==="Feature")m(d,0);else if(d.type==="FeatureCollection")for(var p=0;p<d.features.length&&m(d.features[p],p)!==!1;p++);}function fu(d,m){var p,x,T,C,S,W,nt,G,U,Z,V=0,tt=d.type==="FeatureCollection",ct=d.type==="Feature",bt=tt?d.features.length:1;for(p=0;p<bt;p++){for(W=tt?d.features[p].geometry:ct?d.geometry:d,G=tt?d.features[p].properties:ct?d.properties:{},U=tt?d.features[p].bbox:ct?d.bbox:void 0,Z=tt?d.features[p].id:ct?d.id:void 0,nt=W?W.type==="GeometryCollection":!1,S=nt?W.geometries.length:1,T=0;T<S;T++){if(C=nt?W.geometries[T]:W,C===null){if(m(null,V,G,U,Z)===!1)return!1;continue}switch(C.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(C,V,G,U,Z)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<C.geometries.length;x++)if(m(C.geometries[x],V,G,U,Z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}V++}}function Bi(){return new ka}function ka(){this.reset()}ka.prototype={constructor:ka,reset:function(){this.s=this.t=0},add:function(d){Rl(La,d,this.t),Rl(this,La.s,this.s),this.s?this.t+=La.t:this.s=La.t},valueOf:function(){return this.s}};var La=new ka;function Rl(d,m,p){var x=d.s=m+p,T=x-m,C=x-T;d.t=m-C+(p-T)}var ye=1e-6;var Me=Math.PI,bn=Me/2,xa=Me/4,Vn=Me*2,pi=180/Me,rn=Me/180,ze=Math.abs,xr=Math.atan,In=Math.atan2,de=Math.cos;var ba=Math.exp;var Us=Math.log;var ge=Math.sin;var Ln=Math.sqrt,Zs=Math.tan;function Ca(d){return d>1?0:d<-1?Me:Math.acos(d)}function Cn(d){return d>1?bn:d<-1?-bn:Math.asin(d)}function mi(){}function Ma(d,m){d&&Bl.hasOwnProperty(d.type)&&Bl[d.type](d,m)}var Nl={Feature:function(d,m){Ma(d.geometry,m)},FeatureCollection:function(d,m){for(var p=d.features,x=-1,T=p.length;++x<T;)Ma(p[x].geometry,m)}},Bl={Sphere:function(d,m){m.sphere()},Point:function(d,m){d=d.coordinates,m.point(d[0],d[1],d[2])},MultiPoint:function(d,m){for(var p=d.coordinates,x=-1,T=p.length;++x<T;)d=p[x],m.point(d[0],d[1],d[2])},LineString:function(d,m){du(d.coordinates,m,0)},MultiLineString:function(d,m){for(var p=d.coordinates,x=-1,T=p.length;++x<T;)du(p[x],m,0)},Polygon:function(d,m){Ol(d.coordinates,m)},MultiPolygon:function(d,m){for(var p=d.coordinates,x=-1,T=p.length;++x<T;)Ol(p[x],m)},GeometryCollection:function(d,m){for(var p=d.geometries,x=-1,T=p.length;++x<T;)Ma(p[x],m)}};function du(d,m,p){var x=-1,T=d.length-p,C;for(m.lineStart();++x<T;)C=d[x],m.point(C[0],C[1],C[2]);m.lineEnd()}function Ol(d,m){var p=-1,x=d.length;for(m.polygonStart();++p<x;)du(d[p],m,1);m.polygonEnd()}function So(d,m){d&&Nl.hasOwnProperty(d.type)?Nl[d.type](d,m):Ma(d,m)}var Uc=Bi(),wm=Bi();function ws(d){return[In(d[1],d[0]),Cn(d[2])]}function br(d){var m=d[0],p=d[1],x=de(p);return[x*de(m),x*ge(m),ge(p)]}function Vs(d,m){return d[0]*m[0]+d[1]*m[1]+d[2]*m[2]}function ts(d,m){return[d[1]*m[2]-d[2]*m[1],d[2]*m[0]-d[0]*m[2],d[0]*m[1]-d[1]*m[0]]}function Pa(d,m){d[0]+=m[0],d[1]+=m[1],d[2]+=m[2]}function Ys(d,m){return[d[0]*m,d[1]*m,d[2]*m]}function Ls(d){var m=Ln(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=m,d[1]/=m,d[2]/=m}var Am=Bi();function Sa(d,m){function p(x,T){return x=d(x,T),m(x[0],x[1])}return d.invert&&m.invert&&(p.invert=function(x,T){return x=m.invert(x,T),x&&d.invert(x[0],x[1])}),p}function gu(d,m){return[d>Me?d-Vn:d<-Me?d+Vn:d,m]}gu.invert=gu;function pu(d,m,p){return(d%=Vn)?m||p?Sa(Fl(d),zl(m,p)):Fl(d):m||p?zl(m,p):gu}function Dl(d){return function(m,p){return m+=d,[m>Me?m-Vn:m<-Me?m+Vn:m,p]}}function Fl(d){var m=Dl(d);return m.invert=Dl(-d),m}function zl(d,m){var p=de(d),x=ge(d),T=de(m),C=ge(m);function S(W,nt){var G=de(nt),U=de(W)*G,Z=ge(W)*G,V=ge(nt),tt=V*p+U*x;return[In(Z*T-tt*C,U*p-V*x),Cn(tt*T+Z*C)]}return S.invert=function(W,nt){var G=de(nt),U=de(W)*G,Z=ge(W)*G,V=ge(nt),tt=V*T-Z*C;return[In(Z*T+V*C,U*p+tt*x),Cn(tt*p-U*x)]},S}function ql(d,m,p,x,T,C){if(p){var S=de(m),W=ge(m),nt=x*p;T==null?(T=m+x*Vn,C=m-nt/2):(T=Gl(S,T),C=Gl(S,C),(x>0?T<C:T>C)&&(T+=x*Vn));for(var G,U=T;x>0?U>C:U<C;U-=nt)G=ws([S,-W*de(U),-W*ge(U)]),d.point(G[0],G[1])}}function Gl(d,m){m=br(m),m[0]-=d,Ls(m);var p=Ca(-m[1]);return((-m[2]<0?-p:p)+Vn-ye)%Vn}function Ta(){var d=[],m;return{point:function(p,x){m.push([p,x])},lineStart:function(){d.push(m=[])},lineEnd:mi,rejoin:function(){d.length>1&&d.push(d.pop().concat(d.shift()))},result:function(){var p=d;return d=[],m=null,p}}}function Ul(d,m,p,x,T,C){var S=d[0],W=d[1],nt=m[0],G=m[1],U=0,Z=1,V=nt-S,tt=G-W,ct;if(ct=p-S,!(!V&&ct>0)){if(ct/=V,V<0){if(ct<U)return;ct<Z&&(Z=ct)}else if(V>0){if(ct>Z)return;ct>U&&(U=ct)}if(ct=T-S,!(!V&&ct<0)){if(ct/=V,V<0){if(ct>Z)return;ct>U&&(U=ct)}else if(V>0){if(ct<U)return;ct<Z&&(Z=ct)}if(ct=x-W,!(!tt&&ct>0)){if(ct/=tt,tt<0){if(ct<U)return;ct<Z&&(Z=ct)}else if(tt>0){if(ct>Z)return;ct>U&&(U=ct)}if(ct=C-W,!(!tt&&ct<0)){if(ct/=tt,tt<0){if(ct>Z)return;ct>U&&(U=ct)}else if(tt>0){if(ct<U)return;ct<Z&&(Z=ct)}return U>0&&(d[0]=S+U*V,d[1]=W+U*tt),Z<1&&(m[0]=S+Z*V,m[1]=W+Z*tt),!0}}}}}function ks(d,m){return ze(d[0]-m[0])<ye&&ze(d[1]-m[1])<ye}function Aa(d,m,p,x){this.x=d,this.z=m,this.o=p,this.e=x,this.v=!1,this.n=this.p=null}function Ia(d,m,p,x,T){var C=[],S=[],W,nt;if(d.forEach(function(ct){if(!((bt=ct.length-1)<=0)){var bt,Lt=ct[0],_t=ct[bt],wt;if(ks(Lt,_t)){for(T.lineStart(),W=0;W<bt;++W)T.point((Lt=ct[W])[0],Lt[1]);T.lineEnd();return}C.push(wt=new Aa(Lt,ct,null,!0)),S.push(wt.o=new Aa(Lt,null,wt,!1)),C.push(wt=new Aa(_t,ct,null,!1)),S.push(wt.o=new Aa(_t,null,wt,!0))}}),!!C.length){for(S.sort(m),Zl(C),Zl(S),W=0,nt=S.length;W<nt;++W)S[W].e=p=!p;for(var G=C[0],U,Z;;){for(var V=G,tt=!0;V.v;)if((V=V.n)===G)return;U=V.z,T.lineStart();do{if(V.v=V.o.v=!0,V.e){if(tt)for(W=0,nt=U.length;W<nt;++W)T.point((Z=U[W])[0],Z[1]);else x(V.x,V.n.x,1,T);V=V.n}else{if(tt)for(U=V.p.z,W=U.length-1;W>=0;--W)T.point((Z=U[W])[0],Z[1]);else x(V.x,V.p.x,-1,T);V=V.p}V=V.o,U=V.z,tt=!tt}while(!V.v);T.lineEnd()}}}function Zl(d){if(m=d.length){for(var m,p=0,x=d[0],T;++p<m;)x.n=T=d[p],T.p=x,x=T;x.n=T=d[0],T.p=x}}function To(d,m){return d<m?-1:d>m?1:d>=m?0:NaN}function mu(d){return d.length===1&&(d=Zc(d)),{left:function(m,p,x,T){for(x==null&&(x=0),T==null&&(T=m.length);x<T;){var C=x+T>>>1;d(m[C],p)<0?x=C+1:T=C}return x},right:function(m,p,x,T){for(x==null&&(x=0),T==null&&(T=m.length);x<T;){var C=x+T>>>1;d(m[C],p)>0?T=C:x=C+1}return x}}}function Zc(d){return function(m,p){return To(d(m),p)}}var Vl=mu(To),Vc=Vl.right,Yc=Vl.left;var Yl=Array.prototype,jc=Yl.slice,Xc=Yl.map;var k0=Math.sqrt(50),x0=Math.sqrt(10),b0=Math.sqrt(2);function Hs(d){for(var m=d.length,p,x=-1,T=0,C,S;++x<m;)T+=d[x].length;for(C=new Array(T);--m>=0;)for(S=d[m],p=S.length;--p>=0;)C[--T]=S[p];return C}var js=1e9,Na=-js;function _u(d,m,p,x){function T(G,U){return d<=G&&G<=p&&m<=U&&U<=x}function C(G,U,Z,V){var tt=0,ct=0;if(G==null||(tt=S(G,Z))!==(ct=S(U,Z))||nt(G,U)<0^Z>0)do V.point(tt===0||tt===3?d:p,tt>1?x:m);while((tt=(tt+Z+4)%4)!==ct);else V.point(U[0],U[1])}function S(G,U){return ze(G[0]-d)<ye?U>0?0:3:ze(G[0]-p)<ye?U>0?2:1:ze(G[1]-m)<ye?U>0?1:0:U>0?3:2}function W(G,U){return nt(G.x,U.x)}function nt(G,U){var Z=S(G,1),V=S(U,1);return Z!==V?Z-V:Z===0?U[1]-G[1]:Z===1?G[0]-U[0]:Z===2?G[1]-U[1]:U[0]-G[0]}return function(G){var U=G,Z=Ta(),V,tt,ct,bt,Lt,_t,wt,yt,Ct,It,Nt,Dt={point:Zt,lineStart:oe,lineEnd:Pe,polygonStart:jt,polygonEnd:Vt};function Zt(se,zt){T(se,zt)&&U.point(se,zt)}function Ft(){for(var se=0,zt=0,Oe=tt.length;zt<Oe;++zt)for(var vt=tt[zt],fe=1,xe=vt.length,ue=vt[0],Ht,Qt,pe=ue[0],ve=ue[1];fe<xe;++fe)Ht=pe,Qt=ve,ue=vt[fe],pe=ue[0],ve=ue[1],Qt<=x?ve>x&&(pe-Ht)*(x-Qt)>(ve-Qt)*(d-Ht)&&++se:ve<=x&&(pe-Ht)*(x-Qt)<(ve-Qt)*(d-Ht)&&--se;return se}function jt(){U=Z,V=[],tt=[],Nt=!0}function Vt(){var se=Ft(),zt=Nt&&se,Oe=(V=Hs(V)).length;(zt||Oe)&&(G.polygonStart(),zt&&(G.lineStart(),C(null,null,1,G),G.lineEnd()),Oe&&Ia(V,W,se,C,G),G.polygonEnd()),U=G,V=tt=ct=null}function oe(){Dt.point=Tt,tt&&tt.push(ct=[]),It=!0,Ct=!1,wt=yt=NaN}function Pe(){V&&(Tt(bt,Lt),_t&&Ct&&Z.rejoin(),V.push(Z.result())),Dt.point=Zt,Ct&&U.lineEnd()}function Tt(se,zt){var Oe=T(se,zt);if(tt&&ct.push([se,zt]),It)bt=se,Lt=zt,_t=Oe,It=!1,Oe&&(U.lineStart(),U.point(se,zt));else if(Oe&&Ct)U.point(se,zt);else{var vt=[wt=Math.max(Na,Math.min(js,wt)),yt=Math.max(Na,Math.min(js,yt))],fe=[se=Math.max(Na,Math.min(js,se)),zt=Math.max(Na,Math.min(js,zt))];Ul(vt,fe,d,m,p,x)?(Ct||(U.lineStart(),U.point(vt[0],vt[1])),U.point(fe[0],fe[1]),Oe||U.lineEnd(),Nt=!1):Oe&&(U.lineStart(),U.point(se,zt),Nt=!1)}wt=se,yt=zt,Ct=Oe}return Dt}}var yu=Bi();function vu(d,m){var p=m[0],x=m[1],T=[ge(p),-de(p),0],C=0,S=0;yu.reset();for(var W=0,nt=d.length;W<nt;++W)if(U=(G=d[W]).length)for(var G,U,Z=G[U-1],V=Z[0],tt=Z[1]/2+xa,ct=ge(tt),bt=de(tt),Lt=0;Lt<U;++Lt,V=wt,ct=Ct,bt=It,Z=_t){var _t=G[Lt],wt=_t[0],yt=_t[1]/2+xa,Ct=ge(yt),It=de(yt),Nt=wt-V,Dt=Nt>=0?1:-1,Zt=Dt*Nt,Ft=Zt>Me,jt=ct*Ct;if(yu.add(In(jt*Dt*ge(Zt),bt*It+jt*de(Zt))),C+=Ft?Nt+Dt*Vn:Nt,Ft^V>=p^wt>=p){var Vt=ts(br(Z),br(_t));Ls(Vt);var oe=ts(T,Vt);Ls(oe);var Pe=(Ft^Nt>=0?-1:1)*Cn(oe[2]);(x>Pe||x===Pe&&(Vt[0]||Vt[1]))&&(S+=Ft^Nt>=0?1:-1)}}return(C<-ye||C<ye&&yu<-ye)^S&1}var my=Bi();function Xs(d){return d}var By=Bi(),Oy=Bi();var xs=1/0,Ba=xs,Ws=-xs,Oa=Ws,of={point:sf,lineStart:mi,lineEnd:mi,polygonStart:mi,polygonEnd:mi,result:function(){var d=[[xs,Ba],[Ws,Oa]];return Ws=Oa=-(Ba=xs=1/0),d}};function sf(d,m){d<xs&&(xs=d),d>Ws&&(Ws=d),m<Ba&&(Ba=m),m>Oa&&(Oa=m)}var Da=of;function Eu(d){this._context=d}Eu.prototype={_radius:4.5,pointRadius:function(d){return this._radius=d,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(d,m){switch(this._point){case 0:{this._context.moveTo(d,m),this._point=1;break}case 1:{this._context.lineTo(d,m);break}default:{this._context.moveTo(d+this._radius,m),this._context.arc(d,m,this._radius,0,Vn);break}}},result:mi};var Xy=Bi();function wu(){this._string=[]}wu.prototype={_radius:4.5,_circle:Xl(4.5),pointRadius:function(d){return(d=+d)!==this._radius&&(this._radius=d,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(d,m){switch(this._point){case 0:{this._string.push("M",d,",",m),this._point=1;break}case 1:{this._string.push("L",d,",",m);break}default:{this._circle==null&&(this._circle=Xl(this._radius)),this._string.push("M",d,",",m,this._circle);break}}},result:function(){if(this._string.length){var d=this._string.join("");return this._string=[],d}else return null}};function Xl(d){return"m0,"+d+"a"+d+","+d+" 0 1,1 0,"+-2*d+"a"+d+","+d+" 0 1,1 0,"+2*d+"z"}function Fa(d,m,p,x){return function(T,C){var S=m(C),W=T.invert(x[0],x[1]),nt=Ta(),G=m(nt),U=!1,Z,V,tt,ct={point:bt,lineStart:_t,lineEnd:wt,polygonStart:function(){ct.point=yt,ct.lineStart=Ct,ct.lineEnd=It,V=[],Z=[]},polygonEnd:function(){ct.point=bt,ct.lineStart=_t,ct.lineEnd=wt,V=Hs(V);var Nt=vu(Z,W);V.length?(U||(C.polygonStart(),U=!0),Ia(V,uf,Nt,p,C)):Nt&&(U||(C.polygonStart(),U=!0),C.lineStart(),p(null,null,1,C),C.lineEnd()),U&&(C.polygonEnd(),U=!1),V=Z=null},sphere:function(){C.polygonStart(),C.lineStart(),p(null,null,1,C),C.lineEnd(),C.polygonEnd()}};function bt(Nt,Dt){var Zt=T(Nt,Dt);d(Nt=Zt[0],Dt=Zt[1])&&C.point(Nt,Dt)}function Lt(Nt,Dt){var Zt=T(Nt,Dt);S.point(Zt[0],Zt[1])}function _t(){ct.point=Lt,S.lineStart()}function wt(){ct.point=bt,S.lineEnd()}function yt(Nt,Dt){tt.push([Nt,Dt]);var Zt=T(Nt,Dt);G.point(Zt[0],Zt[1])}function Ct(){G.lineStart(),tt=[]}function It(){yt(tt[0][0],tt[0][1]),G.lineEnd();var Nt=G.clean(),Dt=nt.result(),Zt,Ft=Dt.length,jt,Vt,oe;if(tt.pop(),Z.push(tt),tt=null,!!Ft){if(Nt&1){if(Vt=Dt[0],(jt=Vt.length-1)>0){for(U||(C.polygonStart(),U=!0),C.lineStart(),Zt=0;Zt<jt;++Zt)C.point((oe=Vt[Zt])[0],oe[1]);C.lineEnd()}return}Ft>1&&Nt&2&&Dt.push(Dt.pop().concat(Dt.shift())),V.push(Dt.filter(af))}}return ct}}function af(d){return d.length>1}function uf(d,m){return((d=d.x)[0]<0?d[1]-bn-ye:bn-d[1])-((m=m.x)[0]<0?m[1]-bn-ye:bn-m[1])}var Lu=Fa(function(){return!0},lf,cf,[-Me,-bn]);function lf(d){var m=NaN,p=NaN,x=NaN,T;return{lineStart:function(){d.lineStart(),T=1},point:function(C,S){var W=C>0?Me:-Me,nt=ze(C-m);ze(nt-Me)<ye?(d.point(m,p=(p+S)/2>0?bn:-bn),d.point(x,p),d.lineEnd(),d.lineStart(),d.point(W,p),d.point(C,p),T=0):x!==W&&nt>=Me&&(ze(m-x)<ye&&(m-=x*ye),ze(C-W)<ye&&(C-=W*ye),p=hf(m,p,C,S),d.point(x,p),d.lineEnd(),d.lineStart(),d.point(W,p),T=0),d.point(m=C,p=S),x=W},lineEnd:function(){d.lineEnd(),m=p=NaN},clean:function(){return 2-T}}}function hf(d,m,p,x){var T,C,S=ge(d-p);return ze(S)>ye?xr((ge(m)*(C=de(x))*ge(p)-ge(x)*(T=de(m))*ge(d))/(T*C*S)):(m+x)/2}function cf(d,m,p,x){var T;if(d==null)T=p*bn,x.point(-Me,T),x.point(0,T),x.point(Me,T),x.point(Me,0),x.point(Me,-T),x.point(0,-T),x.point(-Me,-T),x.point(-Me,0),x.point(-Me,T);else if(ze(d[0]-m[0])>ye){var C=d[0]<m[0]?Me:-Me;T=p*C/2,x.point(-C,T),x.point(0,T),x.point(C,T)}else x.point(m[0],m[1])}function Wl(d,m){var p=de(d),x=p>0,T=ze(p)>ye;function C(U,Z,V,tt){ql(tt,d,m,V,U,Z)}function S(U,Z){return de(U)*de(Z)>p}function W(U){var Z,V,tt,ct,bt;return{lineStart:function(){ct=tt=!1,bt=1},point:function(Lt,_t){var wt=[Lt,_t],yt,Ct=S(Lt,_t),It=x?Ct?0:G(Lt,_t):Ct?G(Lt+(Lt<0?Me:-Me),_t):0;if(!Z&&(ct=tt=Ct)&&U.lineStart(),Ct!==tt&&(yt=nt(Z,wt),(!yt||ks(Z,yt)||ks(wt,yt))&&(wt[0]+=ye,wt[1]+=ye,Ct=S(wt[0],wt[1]))),Ct!==tt)bt=0,Ct?(U.lineStart(),yt=nt(wt,Z),U.point(yt[0],yt[1])):(yt=nt(Z,wt),U.point(yt[0],yt[1]),U.lineEnd()),Z=yt;else if(T&&Z&&x^Ct){var Nt;!(It&V)&&(Nt=nt(wt,Z,!0))&&(bt=0,x?(U.lineStart(),U.point(Nt[0][0],Nt[0][1]),U.point(Nt[1][0],Nt[1][1]),U.lineEnd()):(U.point(Nt[1][0],Nt[1][1]),U.lineEnd(),U.lineStart(),U.point(Nt[0][0],Nt[0][1])))}Ct&&(!Z||!ks(Z,wt))&&U.point(wt[0],wt[1]),Z=wt,tt=Ct,V=It},lineEnd:function(){tt&&U.lineEnd(),Z=null},clean:function(){return bt|(ct&&tt)<<1}}}function nt(U,Z,V){var tt=br(U),ct=br(Z),bt=[1,0,0],Lt=ts(tt,ct),_t=Vs(Lt,Lt),wt=Lt[0],yt=_t-wt*wt;if(!yt)return!V&&U;var Ct=p*_t/yt,It=-p*wt/yt,Nt=ts(bt,Lt),Dt=Ys(bt,Ct),Zt=Ys(Lt,It);Pa(Dt,Zt);var Ft=Nt,jt=Vs(Dt,Ft),Vt=Vs(Ft,Ft),oe=jt*jt-Vt*(Vs(Dt,Dt)-1);if(!(oe<0)){var Pe=Ln(oe),Tt=Ys(Ft,(-jt-Pe)/Vt);if(Pa(Tt,Dt),Tt=ws(Tt),!V)return Tt;var se=U[0],zt=Z[0],Oe=U[1],vt=Z[1],fe;zt<se&&(fe=se,se=zt,zt=fe);var xe=zt-se,ue=ze(xe-Me)<ye,Ht=ue||xe<ye;if(!ue&&vt<Oe&&(fe=Oe,Oe=vt,vt=fe),Ht?ue?Oe+vt>0^Tt[1]<(ze(Tt[0]-se)<ye?Oe:vt):Oe<=Tt[1]&&Tt[1]<=vt:xe>Me^(se<=Tt[0]&&Tt[0]<=zt)){var Qt=Ys(Ft,(-jt+Pe)/Vt);return Pa(Qt,Dt),[Tt,ws(Qt)]}}}function G(U,Z){var V=x?d:Me-d,tt=0;return U<-V?tt|=1:U>V&&(tt|=2),Z<-V?tt|=4:Z>V&&(tt|=8),tt}return Fa(S,W,C,x?[0,-d]:[-Me,d-Me])}function Ks(d){return function(m){var p=new ku;for(var x in d)p[x]=d[x];return p.stream=m,p}}function ku(){}ku.prototype={constructor:ku,point:function(d,m){this.stream.point(d,m)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Js(d,m,p){var x=m[1][0]-m[0][0],T=m[1][1]-m[0][1],C=d.clipExtent&&d.clipExtent();d.scale(150).translate([0,0]),C!=null&&d.clipExtent(null),So(p,d.stream(Da));var S=Da.result(),W=Math.min(x/(S[1][0]-S[0][0]),T/(S[1][1]-S[0][1])),nt=+m[0][0]+(x-W*(S[1][0]+S[0][0]))/2,G=+m[0][1]+(T-W*(S[1][1]+S[0][1]))/2;return C!=null&&d.clipExtent(C),d.scale(W*150).translate([nt,G])}function za(d,m,p){return Js(d,[[0,0],m],p)}var Kl=16,ff=de(30*rn);function xu(d,m){return+m?gf(d,m):df(d)}function df(d){return Ks({point:function(m,p){m=d(m,p),this.stream.point(m[0],m[1])}})}function gf(d,m){function p(x,T,C,S,W,nt,G,U,Z,V,tt,ct,bt,Lt){var _t=G-x,wt=U-T,yt=_t*_t+wt*wt;if(yt>4*m&&bt--){var Ct=S+V,It=W+tt,Nt=nt+ct,Dt=Ln(Ct*Ct+It*It+Nt*Nt),Zt=Cn(Nt/=Dt),Ft=ze(ze(Nt)-1)<ye||ze(C-Z)<ye?(C+Z)/2:In(It,Ct),jt=d(Ft,Zt),Vt=jt[0],oe=jt[1],Pe=Vt-x,Tt=oe-T,se=wt*Pe-_t*Tt;(se*se/yt>m||ze((_t*Pe+wt*Tt)/yt-.5)>.3||S*V+W*tt+nt*ct<ff)&&(p(x,T,C,S,W,nt,Vt,oe,Ft,Ct/=Dt,It/=Dt,Nt,bt,Lt),Lt.point(Vt,oe),p(Vt,oe,Ft,Ct,It,Nt,G,U,Z,V,tt,ct,bt,Lt))}}return function(x){var T,C,S,W,nt,G,U,Z,V,tt,ct,bt,Lt={point:_t,lineStart:wt,lineEnd:Ct,polygonStart:function(){x.polygonStart(),Lt.lineStart=It},polygonEnd:function(){x.polygonEnd(),Lt.lineStart=wt}};function _t(Zt,Ft){Zt=d(Zt,Ft),x.point(Zt[0],Zt[1])}function wt(){Z=NaN,Lt.point=yt,x.lineStart()}function yt(Zt,Ft){var jt=br([Zt,Ft]),Vt=d(Zt,Ft);p(Z,V,U,tt,ct,bt,Z=Vt[0],V=Vt[1],U=Zt,tt=jt[0],ct=jt[1],bt=jt[2],Kl,x),x.point(Z,V)}function Ct(){Lt.point=_t,x.lineEnd()}function It(){wt(),Lt.point=Nt,Lt.lineEnd=Dt}function Nt(Zt,Ft){yt(T=Zt,Ft),C=Z,S=V,W=tt,nt=ct,G=bt,Lt.point=yt}function Dt(){p(Z,V,U,tt,ct,bt,C,S,T,W,nt,G,Kl,x),Lt.lineEnd=Ct,Ct()}return Lt}}var pf=Ks({point:function(d,m){this.stream.point(d*rn,m*rn)}});function Cr(d){return bu(function(){return d})()}function bu(d){var m,p=150,x=480,T=250,C,S,W=0,nt=0,G=0,U=0,Z=0,V,tt,ct=null,bt=Lu,Lt=null,_t,wt,yt,Ct=Xs,It=.5,Nt=xu(Vt,It),Dt,Zt;function Ft(Tt){return Tt=tt(Tt[0]*rn,Tt[1]*rn),[Tt[0]*p+C,S-Tt[1]*p]}function jt(Tt){return Tt=tt.invert((Tt[0]-C)/p,(S-Tt[1])/p),Tt&&[Tt[0]*pi,Tt[1]*pi]}function Vt(Tt,se){return Tt=m(Tt,se),[Tt[0]*p+C,S-Tt[1]*p]}Ft.stream=function(Tt){return Dt&&Zt===Tt?Dt:Dt=pf(bt(V,Nt(Ct(Zt=Tt))))},Ft.clipAngle=function(Tt){return arguments.length?(bt=+Tt?Wl(ct=Tt*rn,6*rn):(ct=null,Lu),Pe()):ct*pi},Ft.clipExtent=function(Tt){return arguments.length?(Ct=Tt==null?(Lt=_t=wt=yt=null,Xs):_u(Lt=+Tt[0][0],_t=+Tt[0][1],wt=+Tt[1][0],yt=+Tt[1][1]),Pe()):Lt==null?null:[[Lt,_t],[wt,yt]]},Ft.scale=function(Tt){return arguments.length?(p=+Tt,oe()):p},Ft.translate=function(Tt){return arguments.length?(x=+Tt[0],T=+Tt[1],oe()):[x,T]},Ft.center=function(Tt){return arguments.length?(W=Tt[0]%360*rn,nt=Tt[1]%360*rn,oe()):[W*pi,nt*pi]},Ft.rotate=function(Tt){return arguments.length?(G=Tt[0]%360*rn,U=Tt[1]%360*rn,Z=Tt.length>2?Tt[2]%360*rn:0,oe()):[G*pi,U*pi,Z*pi]},Ft.precision=function(Tt){return arguments.length?(Nt=xu(Vt,It=Tt*Tt),Pe()):Ln(It)},Ft.fitExtent=function(Tt,se){return Js(Ft,Tt,se)},Ft.fitSize=function(Tt,se){return za(Ft,Tt,se)};function oe(){tt=Sa(V=pu(G,U,Z),m);var Tt=m(W,nt);return C=x-Tt[0]*p,S=T+Tt[1]*p,Pe()}function Pe(){return Dt=Zt=null,Ft}return function(){return m=d.apply(this,arguments),Ft.invert=m.invert&&jt,oe()}}function Ga(d){return function(m,p){var x=de(m),T=de(p),C=d(x*T);return[C*T*ge(m),C*ge(p)]}}function Xr(d){return function(m,p){var x=Ln(m*m+p*p),T=d(x),C=ge(T),S=de(T);return[In(m*C,x*S),Cn(x&&p*C/x)]}}var th=Ga(function(d){return Ln(2/(1+d))});th.invert=Xr(function(d){return 2*Cn(d/2)});var Cu=Ga(function(d){return(d=Ca(d))&&d/ge(d)});Cu.invert=Xr(function(d){return d});function Mu(){return Cr(Cu).scale(79.4188).clipAngle(180-.001)}function Pu(d,m){return[d,Us(Zs((bn+m)/2))]}Pu.invert=function(d,m){return[d,2*xr(ba(m))-bn]};function qa(d,m){return[d,m]}qa.invert=qa;function eh(d,m){var p=de(m),x=de(d)*p;return[p*ge(d)/x,ge(m)/x]}eh.invert=Xr(xr);function nh(d,m){var p=m*m,x=p*p;return[d*(.8707-.131979*p+x*(-.013791+x*(.003971*p-.001529*x))),m*(1.007226+p*(.015085+x*(-.044475+.028874*p-.005916*x)))]}nh.invert=function(d,m){var p=m,x=25,T;do{var C=p*p,S=C*C;p-=T=(p*(1.007226+C*(.015085+S*(-.044475+.028874*C-.005916*S)))-m)/(1.007226+C*(.015085*3+S*(-.044475*7+.028874*9*C-.005916*11*S)))}while(ze(T)>ye&&--x>0);return[d/(.8707+(C=p*p)*(-.131979+C*(-.013791+C*C*C*(.003971-.001529*C)))),p]};function ih(d,m){return[de(m)*ge(d),ge(m)]}ih.invert=Xr(Cn);function rh(d,m){var p=de(m),x=1+de(d)*p;return[p*ge(d)/x,ge(m)/x]}rh.invert=Xr(function(d){return 2*xr(d)});function oh(d,m){return[Us(Zs((bn+m)/2)),-d]}oh.invert=function(d,m){return[-m,2*xr(ba(d))-bn]};var{BufferOp:yf,GeoJSONReader:vf,GeoJSONWriter:Ef}=sh.default;function Su(d,m,p){p=p||{};var x=p.units||"kilometers",T=p.steps||8;if(!d)throw new Error("geojson is required");if(typeof p!="object")throw new Error("options must be an object");if(typeof T!="number")throw new Error("steps must be an number");if(m===void 0)throw new Error("radius is required");if(T<=0)throw new Error("steps must be greater than 0");var C=[];switch(d.type){case"GeometryCollection":return fu(d,function(S){var W=Ua(S,m,x,T);W&&C.push(W)}),wa(C);case"FeatureCollection":return cu(d,function(S){var W=Ua(S,m,x,T);W&&cu(W,function(nt){nt&&C.push(nt)})}),wa(C)}return Ua(d,m,x,T)}function Ua(d,m,p,x){var T=d.properties||{},C=d.type==="Feature"?d.geometry:d;if(C.type==="GeometryCollection"){var S=[];return fu(d,function(bt){var Lt=Ua(bt,m,p,x);Lt&&S.push(Lt)}),wa(S)}var W=wf(C),nt={type:C.type,coordinates:uh(C.coordinates,W)},G=new vf,U=G.read(nt),Z=Al(Il(m,p),"meters"),V=yf.bufferOp(U,Z,x),tt=new Ef;if(V=tt.write(V),!ah(V.coordinates)){var ct={type:V.type,coordinates:lh(V.coordinates,W)};return Tl(ct,T)}}function ah(d){return Array.isArray(d[0])?ah(d[0]):isNaN(d[0])}function uh(d,m){return typeof d[0]!="object"?m(d):d.map(function(p){return uh(p,m)})}function lh(d,m){return typeof d[0]!="object"?m.invert(d):d.map(function(p){return lh(p,m)})}function wf(d){var m=Es(d).geometry.coordinates,p=[-m[0],-m[1]];return Mu().rotate(p).scale(gi)}function Tu(d,m,p={}){var x=Po(d),T=Po(m),C=jr(T[1]-x[1]),S=jr(T[0]-x[0]),W=jr(x[1]),nt=jr(T[1]),G=Math.pow(Math.sin(C/2),2)+Math.pow(Math.sin(S/2),2)*Math.cos(W)*Math.cos(nt);return fl(2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G)),p.units)}var _i=63710088e-1,hh={centimeters:_i*100,centimetres:_i*100,degrees:360/(2*Math.PI),feet:_i*3.28084,inches:_i*39.37,kilometers:_i/1e3,kilometres:_i/1e3,meters:_i,metres:_i,miles:_i/1609.344,millimeters:_i*1e3,millimetres:_i*1e3,nauticalmiles:_i/1852,radians:1,yards:_i*1.0936};function Lf(d,m="kilometers"){let p=hh[m];if(!p)throw new Error(m+" units is invalid");return d*p}function kf(d,m="kilometers"){let p=hh[m];if(!p)throw new Error(m+" units is invalid");return d/p}function ch(d,m="kilometers",p="kilometers"){if(!(d>=0))throw new Error("length must be a positive number");return Lf(kf(d,m),p)}function Au(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return[...d.geometry.coordinates];if(d.type==="Point")return[...d.coordinates]}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return[...d];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Za(d,m,p={}){let x=Au(d),T=Au(m);T[0]+=T[0]-x[0]>180?-360:x[0]-T[0]>180?360:0;let C=xf(x,T);return ch(C,"meters",p.units)}function xf(d,m,p){p=p===void 0?_i:Number(p);let x=p,T=d[1]*Math.PI/180,C=m[1]*Math.PI/180,S=C-T,W=Math.abs(m[0]-d[0])*Math.PI/180;W>Math.PI&&(W-=2*Math.PI);let nt=Math.log(Math.tan(C/2+Math.PI/4)/Math.tan(T/2+Math.PI/4)),G=Math.abs(nt)>1e-11?S/nt:Math.cos(T);return Math.sqrt(S*S+G*G*W*W)*x}var Wi=63710088e-1,dh={centimeters:Wi*100,centimetres:Wi*100,degrees:360/(2*Math.PI),feet:Wi*3.28084,inches:Wi*39.37,kilometers:Wi/1e3,kilometres:Wi/1e3,meters:Wi,metres:Wi,miles:Wi/1609.344,millimeters:Wi*1e3,millimetres:Wi*1e3,nauticalmiles:Wi/1852,radians:1,yards:Wi*1.0936};function Ao(d,m,p={}){let x={type:"Feature"};return(p.id===0||p.id)&&(x.id=p.id),p.bbox&&(x.bbox=p.bbox),x.properties=m||{},x.geometry=d,x}function Io(d,m,p={}){if(!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!fh(d[0])||!fh(d[1]))throw new Error("coordinates must contain numbers");return Ao({type:"Point",coordinates:d},m,p)}function $s(d,m,p={}){if(d.length<2)throw new Error("coordinates must be an array of two or more positions");return Ao({type:"LineString",coordinates:d},m,p)}function Iu(d,m="kilometers"){let p=dh[m];if(!p)throw new Error(m+" units is invalid");return d*p}function bf(d,m="kilometers"){let p=dh[m];if(!p)throw new Error(m+" units is invalid");return d/p}function Ru(d){return d%(2*Math.PI)*180/Math.PI}function Ro(d){return d%360*Math.PI/180}function gh(d,m="kilometers",p="kilometers"){if(!(d>=0))throw new Error("length must be a positive number");return Iu(bf(d,m),p)}function fh(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function No(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return[...d.geometry.coordinates];if(d.type==="Point")return[...d.coordinates]}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return[...d];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ph(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Nu(d,m,p){if(!d)throw new Error("No feature passed");if(!p)throw new Error(".featureOf() requires a name");if(!d||d.type!=="Feature"||!d.geometry)throw new Error("Invalid input to "+p+", Feature with geometry required");if(!d.geometry||d.geometry.type!==m)throw new Error("Invalid input to "+p+": must be a "+m+", given "+d.geometry.type)}function Bo(d,m,p={}){var x=No(d),T=No(m),C=Ro(T[1]-x[1]),S=Ro(T[0]-x[0]),W=Ro(x[1]),nt=Ro(T[1]),G=Math.pow(Math.sin(C/2),2)+Math.pow(Math.sin(S/2),2)*Math.cos(W)*Math.cos(nt);return Iu(2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G)),p.units)}function mh(d,m,p){if(d!==null)for(var x,T,C,S,W,nt,G,U=0,Z=0,V,tt=d.type,ct=tt==="FeatureCollection",bt=tt==="Feature",Lt=ct?d.features.length:1,_t=0;_t<Lt;_t++){G=ct?d.features[_t].geometry:bt?d.geometry:d,V=G?G.type==="GeometryCollection":!1,W=V?G.geometries.length:1;for(var wt=0;wt<W;wt++){var yt=0,Ct=0;if(S=V?G.geometries[wt]:G,S!==null){nt=S.coordinates;var It=S.type;switch(U=p&&(It==="Polygon"||It==="MultiPolygon")?1:0,It){case null:break;case"Point":if(m(nt,Z,_t,yt,Ct)===!1)return!1;Z++,yt++;break;case"LineString":case"MultiPoint":for(x=0;x<nt.length;x++){if(m(nt[x],Z,_t,yt,Ct)===!1)return!1;Z++,It==="MultiPoint"&&yt++}It==="LineString"&&yt++;break;case"Polygon":case"MultiLineString":for(x=0;x<nt.length;x++){for(T=0;T<nt[x].length-U;T++){if(m(nt[x][T],Z,_t,yt,Ct)===!1)return!1;Z++}It==="MultiLineString"&&yt++,It==="Polygon"&&Ct++}It==="Polygon"&&yt++;break;case"MultiPolygon":for(x=0;x<nt.length;x++){for(Ct=0,T=0;T<nt[x].length;T++){for(C=0;C<nt[x][T].length-U;C++){if(m(nt[x][T][C],Z,_t,yt,Ct)===!1)return!1;Z++}Ct++}yt++}break;case"GeometryCollection":for(x=0;x<S.geometries.length;x++)if(mh(S.geometries[x],m,p)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Cf(d,m){var p,x,T,C,S,W,nt,G,U,Z,V=0,tt=d.type==="FeatureCollection",ct=d.type==="Feature",bt=tt?d.features.length:1;for(p=0;p<bt;p++){for(W=tt?d.features[p].geometry:ct?d.geometry:d,G=tt?d.features[p].properties:ct?d.properties:{},U=tt?d.features[p].bbox:ct?d.bbox:void 0,Z=tt?d.features[p].id:ct?d.id:void 0,nt=W?W.type==="GeometryCollection":!1,S=nt?W.geometries.length:1,T=0;T<S;T++){if(C=nt?W.geometries[T]:W,C===null){if(m(null,V,G,U,Z)===!1)return!1;continue}switch(C.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(C,V,G,U,Z)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<C.geometries.length;x++)if(m(C.geometries[x],V,G,U,Z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}V++}}function Bu(d,m){Cf(d,function(p,x,T,C,S){var W=p===null?null:p.type;switch(W){case null:case"Point":case"LineString":case"Polygon":return m(Ao(p,T,{bbox:C,id:S}),x,0)===!1?!1:void 0}var nt;switch(W){case"MultiPoint":nt="Point";break;case"MultiLineString":nt="LineString";break;case"MultiPolygon":nt="Polygon";break}for(var G=0;G<p.coordinates.length;G++){var U=p.coordinates[G],Z={type:nt,coordinates:U};if(m(Ao(Z,T),x,G)===!1)return!1}})}function _h(d,m){Bu(d,function(p,x,T){var C=0;if(p.geometry){var S=p.geometry.type;if(!(S==="Point"||S==="MultiPoint")){var W,nt=0,G=0,U=0;if(mh(p,function(Z,V,tt,ct,bt){if(W===void 0||x>nt||ct>G||bt>U){W=Z,nt=x,G=ct,U=bt,C=0;return}var Lt=$s([W,Z],p.properties);if(m(Lt,x,T,bt,C)===!1)return!1;C++,W=Z})===!1)return!1}}})}var Mf=Object.defineProperty,Pf=Object.defineProperties,Sf=Object.getOwnPropertyDescriptors,yh=Object.getOwnPropertySymbols,Tf=Object.prototype.hasOwnProperty,Af=Object.prototype.propertyIsEnumerable,vh=(d,m,p)=>m in d?Mf(d,m,{enumerable:!0,configurable:!0,writable:!0,value:p}):d[m]=p,Eh=(d,m)=>{for(var p in m||(m={}))Tf.call(m,p)&&vh(d,p,m[p]);if(yh)for(var p of yh(m))Af.call(m,p)&&vh(d,p,m[p]);return d},wh=(d,m)=>Pf(d,Sf(m));function kh(d,m,p={}){if(!d||!m)throw new Error("lines and pt are required arguments");let x=No(m),T=Io([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),C=0;return Bu(d,function(S,W,nt){let G=ph(S);for(let U=0;U<G.length-1;U++){let Z=Io(G[U]);Z.properties.dist=Bo(m,Z,p);let V=No(Z),tt=Io(G[U+1]);tt.properties.dist=Bo(m,tt,p);let ct=No(tt),bt=Bo(Z,tt,p),Lt,_t;V[0]===x[0]&&V[1]===x[1]?[Lt,,_t]=[V,void 0,!1]:ct[0]===x[0]&&ct[1]===x[1]?[Lt,,_t]=[ct,void 0,!0]:[Lt,,_t]=Nf(Z.geometry.coordinates,tt.geometry.coordinates,No(m));let wt;Lt&&(wt=Io(Lt,{dist:Bo(m,Lt,p),multiFeatureIndex:nt,location:C+Bo(Z,Lt,p)})),wt&&wt.properties.dist<T.properties.dist&&(T=wh(Eh({},wt),{properties:wh(Eh({},wt.properties),{index:_t?U+1:U})})),C+=bt}}),T}function If(d,m){let[p,x,T]=d,[C,S,W]=m;return p*C+x*S+T*W}function Rf(d,m){let[p,x,T]=d,[C,S,W]=m;return[x*W-T*S,T*C-p*W,p*S-x*C]}function Lh(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2))}function es(d,m){let p=If(d,m)/(Lh(d)*Lh(m));return Math.acos(Math.min(Math.max(p,-1),1))}function Ou(d){let m=Ro(d[1]),p=Ro(d[0]);return[Math.cos(m)*Math.cos(p),Math.cos(m)*Math.sin(p),Math.sin(m)]}function ns(d){let[m,p,x]=d,T=Ru(Math.asin(x));return[Ru(Math.atan2(p,m)),T]}function Nf(d,m,p){let x=Ou(d),T=Ou(m),C=Ou(p),[S,W,nt]=C,[G,U,Z]=Rf(x,T),V=U*nt-Z*W,tt=Z*S-G*nt,ct=G*W-U*S,bt=ct*U-tt*Z,Lt=V*Z-ct*G,_t=tt*G-V*U,wt=1/Math.sqrt(Math.pow(bt,2)+Math.pow(Lt,2)+Math.pow(_t,2)),yt=[bt*wt,Lt*wt,_t*wt],Ct=[-1*bt*wt,-1*Lt*wt,-1*_t*wt],It=es(x,T),Nt=es(x,yt),Dt=es(T,yt),Zt=es(x,Ct),Ft=es(T,Ct),jt;return Nt<Zt&&Nt<Ft||Dt<Zt&&Dt<Ft?jt=yt:jt=Ct,es(x,jt)>It||es(T,jt)>It?Bo(ns(jt),ns(x))<=Bo(ns(jt),ns(T))?[ns(x),!0,!1]:[ns(T),!1,!0]:[ns(jt),!1,!1]}function bh(d,m,p={}){var x,T;let C=(x=p.method)!=null?x:"geodesic",S=(T=p.units)!=null?T:"kilometers";if(!d)throw new Error("pt is required");if(Array.isArray(d)?d=Io(d):d.type==="Point"?d=Ao(d):Nu(d,"Point","point"),!m)throw new Error("line is required");Array.isArray(m)?m=$s(m):m.type==="LineString"?m=Ao(m):Nu(m,"LineString","line");let W=1/0,nt=d.geometry.coordinates;return _h(m,G=>{if(G){let U=G.geometry.coordinates[0],Z=G.geometry.coordinates[1],V=Bf(nt,U,Z,{method:C});V<W&&(W=V)}}),gh(W,"degrees",S)}function Bf(d,m,p,x){if(x.method==="geodesic")return kh($s([m,p]).geometry,d,{units:"degrees"}).properties.dist;let T=[p[0]-m[0],p[1]-m[1]],C=[d[0]-m[0],d[1]-m[1]],S=xh(C,T);if(S<=0)return Za(d,m,{units:"degrees"});let W=xh(T,T);if(W<=S)return Za(d,p,{units:"degrees"});let nt=S/W,G=[m[0]+nt*T[0],m[1]+nt*T[1]];return Za(d,G,{units:"degrees"})}function xh(d,m){return d[0]*m[0]+d[1]*m[1]}var Ki=63710088e-1,Ow={centimeters:Ki*100,centimetres:Ki*100,degrees:360/(2*Math.PI),feet:Ki*3.28084,inches:Ki*39.37,kilometers:Ki/1e3,kilometres:Ki/1e3,meters:Ki,metres:Ki,miles:Ki/1609.344,millimeters:Ki*1e3,millimetres:Ki*1e3,nauticalmiles:Ki/1852,radians:1,yards:Ki*1.0936};function Va(d,m,p={}){let x={type:"Feature"};return(p.id===0||p.id)&&(x.id=p.id),p.bbox&&(x.bbox=p.bbox),x.properties=m||{},x.geometry=d,x}function Du(d,m,p={}){for(let T of d){if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(T[T.length-1].length!==T[0].length)throw new Error("First and last Position are not equivalent.");for(let C=0;C<T[T.length-1].length;C++)if(T[T.length-1][C]!==T[0][C])throw new Error("First and last Position are not equivalent.")}return Va({type:"Polygon",coordinates:d},m,p)}function Ch(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return[...d.geometry.coordinates];if(d.type==="Point")return[...d.coordinates]}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return[...d];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ya(d){return d.type==="Feature"?d.geometry:d}function Fu(d,m,p={}){if(!d)throw new Error("point is required");if(!m)throw new Error("polygon is required");let x=Ch(d),T=Ya(m),C=T.type,S=m.bbox,W=T.coordinates;if(S&&Of(x,S)===!1)return!1;C==="Polygon"&&(W=[W]);let nt=!1;for(var G=0;G<W.length;++G){let U=ya(x,W[G]);if(U===0)return!p.ignoreBoundary;U&&(nt=!0)}return nt}function Of(d,m){return m[0]<=d[0]&&m[1]<=d[1]&&m[2]>=d[0]&&m[3]>=d[1]}function Df(d,m){var p,x,T,C,S,W,nt,G,U,Z,V=0,tt=d.type==="FeatureCollection",ct=d.type==="Feature",bt=tt?d.features.length:1;for(p=0;p<bt;p++){for(W=tt?d.features[p].geometry:ct?d.geometry:d,G=tt?d.features[p].properties:ct?d.properties:{},U=tt?d.features[p].bbox:ct?d.bbox:void 0,Z=tt?d.features[p].id:ct?d.id:void 0,nt=W?W.type==="GeometryCollection":!1,S=nt?W.geometries.length:1,T=0;T<S;T++){if(C=nt?W.geometries[T]:W,C===null){if(m(null,V,G,U,Z)===!1)return!1;continue}switch(C.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(C,V,G,U,Z)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<C.geometries.length;x++)if(m(C.geometries[x],V,G,U,Z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}V++}}function Mh(d,m){Df(d,function(p,x,T,C,S){var W=p===null?null:p.type;switch(W){case null:case"Point":case"LineString":case"Polygon":return m(Va(p,T,{bbox:C,id:S}),x,0)===!1?!1:void 0}var nt;switch(W){case"MultiPoint":nt="Point";break;case"MultiLineString":nt="LineString";break;case"MultiPolygon":nt="Polygon";break}for(var G=0;G<p.coordinates.length;G++){var U=p.coordinates[G],Z={type:nt,coordinates:U};if(m(Va(Z,T),x,G)===!1)return!1}})}function Qs(d,m,p={}){var x,T;let C=(x=p.method)!=null?x:"geodesic",S=(T=p.units)!=null?T:"kilometers";if(!d)throw new Error("point is required");if(!m)throw new Error("polygon or multi-polygon is required");let W=Ya(m);if(W.type==="MultiPolygon"){let U=W.coordinates.map(Z=>Qs(d,Du(Z),{method:C,units:S}));return Math.min(...U.map(Math.abs))*(Fu(d,m)?-1:1)}if(W.coordinates.length>1){let[U,...Z]=W.coordinates.map(tt=>Qs(d,Du([tt]),{method:C,units:S}));if(U>=0)return U;let V=Math.min(...Z);return V<0?Math.abs(V):Math.min(V,Math.abs(U))}let nt=kl(W),G=1/0;return Mh(nt,U=>{G=Math.min(G,bh(d,U,{method:C,units:S}))}),Fu(d,W)?-G:G}var Ja=al(Th());(()=>{var d=Object.create,m=Object.defineProperty,p=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,T=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty,S=(i,s)=>()=>(s||i((s={exports:{}}).exports,s),s.exports),W=(i,s,u,h)=>{if(s&&typeof s=="object"||typeof s=="function")for(let f of x(s))!C.call(i,f)&&f!==u&&m(i,f,{get:()=>s[f],enumerable:!(h=p(s,f))||h.enumerable});return i},nt=(i,s,u)=>(u=i!=null?d(T(i)):{},W(s||!i||!i.__esModule?m(u,"default",{value:i,enumerable:!0}):u,i)),G=S((i,s)=>{function u(){this.__data__=[],this.size=0}s.exports=u}),U=S((i,s)=>{function u(h,f){return h===f||h!==h&&f!==f}s.exports=u}),Z=S((i,s)=>{var u=U();function h(f,y){for(var E=f.length;E--;)if(u(f[E][0],y))return E;return-1}s.exports=h}),V=S((i,s)=>{var u=Z(),h=Array.prototype,f=h.splice;function y(E){var k=this.__data__,P=u(k,E);if(P<0)return!1;var A=k.length-1;return P==A?k.pop():f.call(k,P,1),--this.size,!0}s.exports=y}),tt=S((i,s)=>{var u=Z();function h(f){var y=this.__data__,E=u(y,f);return E<0?void 0:y[E][1]}s.exports=h}),ct=S((i,s)=>{var u=Z();function h(f){return u(this.__data__,f)>-1}s.exports=h}),bt=S((i,s)=>{var u=Z();function h(f,y){var E=this.__data__,k=u(E,f);return k<0?(++this.size,E.push([f,y])):E[k][1]=y,this}s.exports=h}),Lt=S((i,s)=>{var u=G(),h=V(),f=tt(),y=ct(),E=bt();function k(P){var A=-1,H=P==null?0:P.length;for(this.clear();++A<H;){var X=P[A];this.set(X[0],X[1])}}k.prototype.clear=u,k.prototype.delete=h,k.prototype.get=f,k.prototype.has=y,k.prototype.set=E,s.exports=k}),_t=S((i,s)=>{var u=Lt();function h(){this.__data__=new u,this.size=0}s.exports=h}),wt=S((i,s)=>{function u(h){var f=this.__data__,y=f.delete(h);return this.size=f.size,y}s.exports=u}),yt=S((i,s)=>{function u(h){return this.__data__.get(h)}s.exports=u}),Ct=S((i,s)=>{function u(h){return this.__data__.has(h)}s.exports=u}),It=S((i,s)=>{var u=typeof global=="object"&&global&&global.Object===Object&&global;s.exports=u}),Nt=S((i,s)=>{var u=It(),h=typeof self=="object"&&self&&self.Object===Object&&self,f=u||h||Function("return this")();s.exports=f}),Dt=S((i,s)=>{var u=Nt(),h=u.Symbol;s.exports=h}),Zt=S((i,s)=>{var u=Dt(),h=Object.prototype,f=h.hasOwnProperty,y=h.toString,E=u?u.toStringTag:void 0;function k(P){var A=f.call(P,E),H=P[E];try{P[E]=void 0;var X=!0}catch{}var dt=y.call(P);return X&&(A?P[E]=H:delete P[E]),dt}s.exports=k}),Ft=S((i,s)=>{var u=Object.prototype,h=u.toString;function f(y){return h.call(y)}s.exports=f}),jt=S((i,s)=>{var u=Dt(),h=Zt(),f=Ft(),y="[object Null]",E="[object Undefined]",k=u?u.toStringTag:void 0;function P(A){return A==null?A===void 0?E:y:k&&k in Object(A)?h(A):f(A)}s.exports=P}),Vt=S((i,s)=>{function u(h){var f=typeof h;return h!=null&&(f=="object"||f=="function")}s.exports=u}),oe=S((i,s)=>{var u=jt(),h=Vt(),f="[object AsyncFunction]",y="[object Function]",E="[object GeneratorFunction]",k="[object Proxy]";function P(A){if(!h(A))return!1;var H=u(A);return H==y||H==E||H==f||H==k}s.exports=P}),Pe=S((i,s)=>{var u=Nt(),h=u["__core-js_shared__"];s.exports=h}),Tt=S((i,s)=>{var u=Pe(),h=function(){var y=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}();function f(y){return!!h&&h in y}s.exports=f}),se=S((i,s)=>{var u=Function.prototype,h=u.toString;function f(y){if(y!=null){try{return h.call(y)}catch{}try{return y+""}catch{}}return""}s.exports=f}),zt=S((i,s)=>{var u=oe(),h=Tt(),f=Vt(),y=se(),E=/[\\^$.*+?()[\]{}|]/g,k=/^\[object .+?Constructor\]$/,P=Function.prototype,A=Object.prototype,H=P.toString,X=A.hasOwnProperty,dt=RegExp("^"+H.call(X).replace(E,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ot(Et){if(!f(Et)||h(Et))return!1;var Bt=u(Et)?dt:k;return Bt.test(y(Et))}s.exports=ot}),Oe=S((i,s)=>{function u(h,f){return h?.[f]}s.exports=u}),vt=S((i,s)=>{var u=zt(),h=Oe();function f(y,E){var k=h(y,E);return u(k)?k:void 0}s.exports=f}),fe=S((i,s)=>{var u=vt(),h=Nt(),f=u(h,"Map");s.exports=f}),xe=S((i,s)=>{var u=vt(),h=u(Object,"create");s.exports=h}),ue=S((i,s)=>{var u=xe();function h(){this.__data__=u?u(null):{},this.size=0}s.exports=h}),Ht=S((i,s)=>{function u(h){var f=this.has(h)&&delete this.__data__[h];return this.size-=f?1:0,f}s.exports=u}),Qt=S((i,s)=>{var u=xe(),h="__lodash_hash_undefined__",f=Object.prototype,y=f.hasOwnProperty;function E(k){var P=this.__data__;if(u){var A=P[k];return A===h?void 0:A}return y.call(P,k)?P[k]:void 0}s.exports=E}),pe=S((i,s)=>{var u=xe(),h=Object.prototype,f=h.hasOwnProperty;function y(E){var k=this.__data__;return u?k[E]!==void 0:f.call(k,E)}s.exports=y}),ve=S((i,s)=>{var u=xe(),h="__lodash_hash_undefined__";function f(y,E){var k=this.__data__;return this.size+=this.has(y)?0:1,k[y]=u&&E===void 0?h:E,this}s.exports=f}),at=S((i,s)=>{var u=ue(),h=Ht(),f=Qt(),y=pe(),E=ve();function k(P){var A=-1,H=P==null?0:P.length;for(this.clear();++A<H;){var X=P[A];this.set(X[0],X[1])}}k.prototype.clear=u,k.prototype.delete=h,k.prototype.get=f,k.prototype.has=y,k.prototype.set=E,s.exports=k}),Pr=S((i,s)=>{var u=at(),h=Lt(),f=fe();function y(){this.size=0,this.__data__={hash:new u,map:new(f||h),string:new u}}s.exports=y}),Ne=S((i,s)=>{function u(h){var f=typeof h;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?h!=="__proto__":h===null}s.exports=u}),Xt=S((i,s)=>{var u=Ne();function h(f,y){var E=f.__data__;return u(y)?E[typeof y=="string"?"string":"hash"]:E.map}s.exports=h}),Y=S((i,s)=>{var u=Xt();function h(f){var y=u(this,f).delete(f);return this.size-=y?1:0,y}s.exports=h}),kn=S((i,s)=>{var u=Xt();function h(f){return u(this,f).get(f)}s.exports=h}),ei=S((i,s)=>{var u=Xt();function h(f){return u(this,f).has(f)}s.exports=h}),Rn=S((i,s)=>{var u=Xt();function h(f,y){var E=u(this,f),k=E.size;return E.set(f,y),this.size+=E.size==k?0:1,this}s.exports=h}),Hn=S((i,s)=>{var u=Pr(),h=Y(),f=kn(),y=ei(),E=Rn();function k(P){var A=-1,H=P==null?0:P.length;for(this.clear();++A<H;){var X=P[A];this.set(X[0],X[1])}}k.prototype.clear=u,k.prototype.delete=h,k.prototype.get=f,k.prototype.has=y,k.prototype.set=E,s.exports=k}),Oi=S((i,s)=>{var u=Lt(),h=fe(),f=Hn(),y=200;function E(k,P){var A=this.__data__;if(A instanceof u){var H=A.__data__;if(!h||H.length<y-1)return H.push([k,P]),this.size=++A.size,this;A=this.__data__=new f(H)}return A.set(k,P),this.size=A.size,this}s.exports=E}),Ji=S((i,s)=>{var u=Lt(),h=_t(),f=wt(),y=yt(),E=Ct(),k=Oi();function P(A){var H=this.__data__=new u(A);this.size=H.size}P.prototype.clear=h,P.prototype.delete=f,P.prototype.get=y,P.prototype.has=E,P.prototype.set=k,s.exports=P}),At=S((i,s)=>{var u=vt(),h=function(){try{var f=u(Object,"defineProperty");return f({},"",{}),f}catch{}}();s.exports=h}),wi=S((i,s)=>{var u=At();function h(f,y,E){y=="__proto__"&&u?u(f,y,{configurable:!0,enumerable:!0,value:E,writable:!0}):f[y]=E}s.exports=h}),Li=S((i,s)=>{var u=wi(),h=U();function f(y,E,k){(k!==void 0&&!h(y[E],k)||k===void 0&&!(E in y))&&u(y,E,k)}s.exports=f}),ni=S((i,s)=>{function u(h){return function(f,y,E){for(var k=-1,P=Object(f),A=E(f),H=A.length;H--;){var X=A[h?H:++k];if(y(P[X],X,P)===!1)break}return f}}s.exports=u}),Wr=S((i,s)=>{var u=ni(),h=u();s.exports=h}),he=S((i,s)=>{var u=Nt(),h=typeof i=="object"&&i&&!i.nodeType&&i,f=h&&typeof s=="object"&&s&&!s.nodeType&&s,y=f&&f.exports===h,E=y?u.Buffer:void 0,k=E?E.allocUnsafe:void 0;function P(A,H){if(H)return A.slice();var X=A.length,dt=k?k(X):new A.constructor(X);return A.copy(dt),dt}s.exports=P}),Di=S((i,s)=>{var u=Nt(),h=u.Uint8Array;s.exports=h}),jn=S((i,s)=>{var u=Di();function h(f){var y=new f.constructor(f.byteLength);return new u(y).set(new u(f)),y}s.exports=h}),ii=S((i,s)=>{var u=jn();function h(f,y){var E=y?u(f.buffer):f.buffer;return new f.constructor(E,f.byteOffset,f.length)}s.exports=h}),te=S((i,s)=>{function u(h,f){var y=-1,E=h.length;for(f||(f=Array(E));++y<E;)f[y]=h[y];return f}s.exports=u}),Sr=S((i,s)=>{var u=Vt(),h=Object.create,f=function(){function y(){}return function(E){if(!u(E))return{};if(h)return h(E);y.prototype=E;var k=new y;return y.prototype=void 0,k}}();s.exports=f}),ke=S((i,s)=>{function u(h,f){return function(y){return h(f(y))}}s.exports=u}),ie=S((i,s)=>{var u=ke(),h=u(Object.getPrototypeOf,Object);s.exports=h}),Tr=S((i,s)=>{var u=Object.prototype;function h(f){var y=f&&f.constructor,E=typeof y=="function"&&y.prototype||u;return f===E}s.exports=h}),Nn=S((i,s)=>{var u=Sr(),h=ie(),f=Tr();function y(E){return typeof E.constructor=="function"&&!f(E)?u(h(E)):{}}s.exports=y}),Bn=S((i,s)=>{function u(h){return h!=null&&typeof h=="object"}s.exports=u}),ee=S((i,s)=>{var u=jt(),h=Bn(),f="[object Arguments]";function y(E){return h(E)&&u(E)==f}s.exports=y}),Xn=S((i,s)=>{var u=ee(),h=Bn(),f=Object.prototype,y=f.hasOwnProperty,E=f.propertyIsEnumerable,k=u(function(){return arguments}())?u:function(P){return h(P)&&y.call(P,"callee")&&!E.call(P,"callee")};s.exports=k}),pn=S((i,s)=>{var u=Array.isArray;s.exports=u}),$i=S((i,s)=>{var u=9007199254740991;function h(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=u}s.exports=h}),on=S((i,s)=>{var u=oe(),h=$i();function f(y){return y!=null&&h(y.length)&&!u(y)}s.exports=f}),Qi=S((i,s)=>{var u=on(),h=Bn();function f(y){return h(y)&&u(y)}s.exports=f}),mn=S((i,s)=>{function u(){return!1}s.exports=u}),Fi=S((i,s)=>{var u=Nt(),h=mn(),f=typeof i=="object"&&i&&!i.nodeType&&i,y=f&&typeof s=="object"&&s&&!s.nodeType&&s,E=y&&y.exports===f,k=E?u.Buffer:void 0,P=k?k.isBuffer:void 0,A=P||h;s.exports=A}),Ar=S((i,s)=>{var u=jt(),h=ie(),f=Bn(),y="[object Object]",E=Function.prototype,k=Object.prototype,P=E.toString,A=k.hasOwnProperty,H=P.call(Object);function X(dt){if(!f(dt)||u(dt)!=y)return!1;var ot=h(dt);if(ot===null)return!0;var Et=A.call(ot,"constructor")&&ot.constructor;return typeof Et=="function"&&Et instanceof Et&&P.call(Et)==H}s.exports=X}),cr=S((i,s)=>{var u=jt(),h=$i(),f=Bn(),y="[object Arguments]",E="[object Array]",k="[object Boolean]",P="[object Date]",A="[object Error]",H="[object Function]",X="[object Map]",dt="[object Number]",ot="[object Object]",Et="[object RegExp]",Bt="[object Set]",Kt="[object String]",Re="[object WeakMap]",q="[object ArrayBuffer]",K="[object DataView]",rt="[object Float32Array]",mt="[object Float64Array]",st="[object Int8Array]",gt="[object Int16Array]",M="[object Int32Array]",N="[object Uint8Array]",O="[object Uint8ClampedArray]",B="[object Uint16Array]",D="[object Uint32Array]",F={};F[rt]=F[mt]=F[st]=F[gt]=F[M]=F[N]=F[O]=F[B]=F[D]=!0,F[y]=F[E]=F[q]=F[k]=F[K]=F[P]=F[A]=F[H]=F[X]=F[dt]=F[ot]=F[Et]=F[Bt]=F[Kt]=F[Re]=!1;function Q(J){return f(J)&&h(J.length)&&!!F[u(J)]}s.exports=Q}),ao=S((i,s)=>{function u(h){return function(f){return h(f)}}s.exports=u}),zi=S((i,s)=>{var u=It(),h=typeof i=="object"&&i&&!i.nodeType&&i,f=h&&typeof s=="object"&&s&&!s.nodeType&&s,y=f&&f.exports===h,E=y&&u.process,k=function(){try{var P=f&&f.require&&f.require("util").types;return P||E&&E.binding&&E.binding("util")}catch{}}();s.exports=k}),Mt=S((i,s)=>{var u=cr(),h=ao(),f=zi(),y=f&&f.isTypedArray,E=y?h(y):u;s.exports=E}),Wn=S((i,s)=>{function u(h,f){if(!(f==="constructor"&&typeof h[f]=="function")&&f!="__proto__")return h[f]}s.exports=u}),tr=S((i,s)=>{var u=wi(),h=U(),f=Object.prototype,y=f.hasOwnProperty;function E(k,P,A){var H=k[P];(!(y.call(k,P)&&h(H,A))||A===void 0&&!(P in k))&&u(k,P,A)}s.exports=E}),er=S((i,s)=>{var u=tr(),h=wi();function f(y,E,k,P){var A=!k;k||(k={});for(var H=-1,X=E.length;++H<X;){var dt=E[H],ot=P?P(k[dt],y[dt],dt,k,y):void 0;ot===void 0&&(ot=y[dt]),A?h(k,dt,ot):u(k,dt,ot)}return k}s.exports=f}),Ir=S((i,s)=>{function u(h,f){for(var y=-1,E=Array(h);++y<h;)E[y]=f(y);return E}s.exports=u}),fr=S((i,s)=>{var u=9007199254740991,h=/^(?:0|[1-9]\d*)$/;function f(y,E){var k=typeof y;return E=E??u,!!E&&(k=="number"||k!="symbol"&&h.test(y))&&y>-1&&y%1==0&&y<E}s.exports=f}),Kr=S((i,s)=>{var u=Ir(),h=Xn(),f=pn(),y=Fi(),E=fr(),k=Mt(),P=Object.prototype,A=P.hasOwnProperty;function H(X,dt){var ot=f(X),Et=!ot&&h(X),Bt=!ot&&!Et&&y(X),Kt=!ot&&!Et&&!Bt&&k(X),Re=ot||Et||Bt||Kt,q=Re?u(X.length,String):[],K=q.length;for(var rt in X)(dt||A.call(X,rt))&&!(Re&&(rt=="length"||Bt&&(rt=="offset"||rt=="parent")||Kt&&(rt=="buffer"||rt=="byteLength"||rt=="byteOffset")||E(rt,K)))&&q.push(rt);return q}s.exports=H}),sn=S((i,s)=>{function u(h){var f=[];if(h!=null)for(var y in Object(h))f.push(y);return f}s.exports=u}),qt=S((i,s)=>{var u=Vt(),h=Tr(),f=sn(),y=Object.prototype,E=y.hasOwnProperty;function k(P){if(!u(P))return f(P);var A=h(P),H=[];for(var X in P)X=="constructor"&&(A||!E.call(P,X))||H.push(X);return H}s.exports=k}),ri=S((i,s)=>{var u=Kr(),h=qt(),f=on();function y(E){return f(E)?u(E,!0):h(E)}s.exports=y}),Jr=S((i,s)=>{var u=er(),h=ri();function f(y){return u(y,h(y))}s.exports=f}),Rr=S((i,s)=>{var u=Li(),h=he(),f=ii(),y=te(),E=Nn(),k=Xn(),P=pn(),A=Qi(),H=Fi(),X=oe(),dt=Vt(),ot=Ar(),Et=Mt(),Bt=Wn(),Kt=Jr();function Re(q,K,rt,mt,st,gt,M){var N=Bt(q,rt),O=Bt(K,rt),B=M.get(O);if(B){u(q,rt,B);return}var D=gt?gt(N,O,rt+"",q,K,M):void 0,F=D===void 0;if(F){var Q=P(O),J=!Q&&H(O),it=!Q&&!J&&Et(O);D=O,Q||J||it?P(N)?D=N:A(N)?D=y(N):J?(F=!1,D=h(O,!0)):it?(F=!1,D=f(O,!0)):D=[]:ot(O)||k(O)?(D=N,k(N)?D=Kt(N):(!dt(N)||X(N))&&(D=E(O))):F=!1}F&&(M.set(O,D),st(D,O,mt,gt,M),M.delete(O)),u(q,rt,D)}s.exports=Re}),Nr=S((i,s)=>{var u=Ji(),h=Li(),f=Wr(),y=Rr(),E=Vt(),k=ri(),P=Wn();function A(H,X,dt,ot,Et){H!==X&&f(X,function(Bt,Kt){if(Et||(Et=new u),E(Bt))y(H,X,Kt,dt,A,ot,Et);else{var Re=ot?ot(P(H,Kt),Bt,Kt+"",H,X,Et):void 0;Re===void 0&&(Re=Bt),h(H,Kt,Re)}},k)}s.exports=A}),en=S((i,s)=>{function u(h){return h}s.exports=u}),Mn=S((i,s)=>{function u(h,f,y){switch(y.length){case 0:return h.call(f);case 1:return h.call(f,y[0]);case 2:return h.call(f,y[0],y[1]);case 3:return h.call(f,y[0],y[1],y[2])}return h.apply(f,y)}s.exports=u}),On=S((i,s)=>{var u=Mn(),h=Math.max;function f(y,E,k){return E=h(E===void 0?y.length-1:E,0),function(){for(var P=arguments,A=-1,H=h(P.length-E,0),X=Array(H);++A<H;)X[A]=P[E+A];A=-1;for(var dt=Array(E+1);++A<E;)dt[A]=P[A];return dt[E]=k(X),u(y,this,dt)}}s.exports=f}),oi=S((i,s)=>{function u(h){return function(){return h}}s.exports=u}),ki=S((i,s)=>{var u=oi(),h=At(),f=en(),y=h?function(E,k){return h(E,"toString",{configurable:!0,enumerable:!1,value:u(k),writable:!0})}:f;s.exports=y}),Br=S((i,s)=>{var u=800,h=16,f=Date.now;function y(E){var k=0,P=0;return function(){var A=f(),H=h-(A-P);if(P=A,H>0){if(++k>=u)return arguments[0]}else k=0;return E.apply(void 0,arguments)}}s.exports=y}),Or=S((i,s)=>{var u=ki(),h=Br(),f=h(u);s.exports=f}),Jt=S((i,s)=>{var u=en(),h=On(),f=Or();function y(E,k){return f(h(E,k,u),E+"")}s.exports=y}),$=S((i,s)=>{var u=U(),h=on(),f=fr(),y=Vt();function E(k,P,A){if(!y(A))return!1;var H=typeof P;return(H=="number"?h(A)&&f(P,A.length):H=="string"&&P in A)?u(A[P],k):!1}s.exports=E}),Rt=S((i,s)=>{var u=Jt(),h=$();function f(y){return u(function(E,k){var P=-1,A=k.length,H=A>1?k[A-1]:void 0,X=A>2?k[2]:void 0;for(H=y.length>3&&typeof H=="function"?(A--,H):void 0,X&&h(k[0],k[1],X)&&(H=A<3?void 0:H,A=1),E=Object(E);++P<A;){var dt=k[P];dt&&y(E,dt,P,H)}return E})}s.exports=f}),Ut=S((i,s)=>{var u=Nr(),h=Rt(),f=h(function(y,E,k){u(y,E,k)});s.exports=f}),Ae=S((i,s)=>{var u=jt(),h=Bn(),f="[object Symbol]";function y(E){return typeof E=="symbol"||h(E)&&u(E)==f}s.exports=y}),Xe=S((i,s)=>{var u=pn(),h=Ae(),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y=/^\w*$/;function E(k,P){if(u(k))return!1;var A=typeof k;return A=="number"||A=="symbol"||A=="boolean"||k==null||h(k)?!0:y.test(k)||!f.test(k)||P!=null&&k in Object(P)}s.exports=E}),Ke=S((i,s)=>{var u=Hn(),h="Expected a function";function f(y,E){if(typeof y!="function"||E!=null&&typeof E!="function")throw new TypeError(h);var k=function(){var P=arguments,A=E?E.apply(this,P):P[0],H=k.cache;if(H.has(A))return H.get(A);var X=y.apply(this,P);return k.cache=H.set(A,X)||H,X};return k.cache=new(f.Cache||u),k}f.Cache=u,s.exports=f}),an=S((i,s)=>{var u=Ke(),h=500;function f(y){var E=u(y,function(P){return k.size===h&&k.clear(),P}),k=E.cache;return E}s.exports=f}),Dn=S((i,s)=>{var u=an(),h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,y=u(function(E){var k=[];return E.charCodeAt(0)===46&&k.push(""),E.replace(h,function(P,A,H,X){k.push(H?X.replace(f,"$1"):A||P)}),k});s.exports=y}),Gi=S((i,s)=>{function u(h,f){for(var y=-1,E=h==null?0:h.length,k=Array(E);++y<E;)k[y]=f(h[y],y,h);return k}s.exports=u}),Ie=S((i,s)=>{var u=Dt(),h=Gi(),f=pn(),y=Ae(),E=1/0,k=u?u.prototype:void 0,P=k?k.toString:void 0;function A(H){if(typeof H=="string")return H;if(f(H))return h(H,A)+"";if(y(H))return P?P.call(H):"";var X=H+"";return X=="0"&&1/H==-E?"-0":X}s.exports=A}),xi=S((i,s)=>{var u=Ie();function h(f){return f==null?"":u(f)}s.exports=h}),dr=S((i,s)=>{var u=pn(),h=Xe(),f=Dn(),y=xi();function E(k,P){return u(k)?k:h(k,P)?[k]:f(y(k))}s.exports=E}),bi=S((i,s)=>{var u=Ae(),h=1/0;function f(y){if(typeof y=="string"||u(y))return y;var E=y+"";return E=="0"&&1/y==-h?"-0":E}s.exports=f}),be=S((i,s)=>{var u=dr(),h=bi();function f(y,E){E=u(E,y);for(var k=0,P=E.length;y!=null&&k<P;)y=y[h(E[k++])];return k&&k==P?y:void 0}s.exports=f}),Ze=S((i,s)=>{var u=be();function h(f,y,E){var k=f==null?void 0:u(f,y);return k===void 0?E:k}s.exports=h}),uo=S((i,s)=>{(function(u,h){typeof i=="object"&&typeof s<"u"?s.exports=h():typeof define=="function"&&define.amd?define(h):(u=u||self).RBush=h()})(i,function(){"use strict";function u(q,K,rt,mt,st){(function gt(M,N,O,B,D){for(;B>O;){if(B-O>600){var F=B-O+1,Q=N-O+1,J=Math.log(F),it=.5*Math.exp(2*J/3),ht=.5*Math.sqrt(J*it*(F-it)/F)*(Q-F/2<0?-1:1),ut=Math.max(O,Math.floor(N-Q*it/F+ht)),xt=Math.min(B,Math.floor(N+(F-Q)*it/F+ht));gt(M,N,ut,xt,D)}var Wt=M[N],$t=O,re=B;for(h(M,O,N),D(M[B],Wt)>0&&h(M,O,B);$t<re;){for(h(M,$t,re),$t++,re--;D(M[$t],Wt)<0;)$t++;for(;D(M[re],Wt)>0;)re--}D(M[O],Wt)===0?h(M,O,re):h(M,++re,B),re<=N&&(O=re+1),N<=re&&(B=re-1)}})(q,K,rt||0,mt||q.length-1,st||f)}function h(q,K,rt){var mt=q[K];q[K]=q[rt],q[rt]=mt}function f(q,K){return q<K?-1:q>K?1:0}var y=function(q){q===void 0&&(q=9),this._maxEntries=Math.max(4,q),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function E(q,K,rt){if(!rt)return K.indexOf(q);for(var mt=0;mt<K.length;mt++)if(rt(q,K[mt]))return mt;return-1}function k(q,K){P(q,0,q.children.length,K,q)}function P(q,K,rt,mt,st){st||(st=Kt(null)),st.minX=1/0,st.minY=1/0,st.maxX=-1/0,st.maxY=-1/0;for(var gt=K;gt<rt;gt++){var M=q.children[gt];A(st,q.leaf?mt(M):M)}return st}function A(q,K){return q.minX=Math.min(q.minX,K.minX),q.minY=Math.min(q.minY,K.minY),q.maxX=Math.max(q.maxX,K.maxX),q.maxY=Math.max(q.maxY,K.maxY),q}function H(q,K){return q.minX-K.minX}function X(q,K){return q.minY-K.minY}function dt(q){return(q.maxX-q.minX)*(q.maxY-q.minY)}function ot(q){return q.maxX-q.minX+(q.maxY-q.minY)}function Et(q,K){return q.minX<=K.minX&&q.minY<=K.minY&&K.maxX<=q.maxX&&K.maxY<=q.maxY}function Bt(q,K){return K.minX<=q.maxX&&K.minY<=q.maxY&&K.maxX>=q.minX&&K.maxY>=q.minY}function Kt(q){return{children:q,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Re(q,K,rt,mt,st){for(var gt=[K,rt];gt.length;)if(!((rt=gt.pop())-(K=gt.pop())<=mt)){var M=K+Math.ceil((rt-K)/mt/2)*mt;u(q,M,K,rt,st),gt.push(K,M,M,rt)}}return y.prototype.all=function(){return this._all(this.data,[])},y.prototype.search=function(q){var K=this.data,rt=[];if(!Bt(q,K))return rt;for(var mt=this.toBBox,st=[];K;){for(var gt=0;gt<K.children.length;gt++){var M=K.children[gt],N=K.leaf?mt(M):M;Bt(q,N)&&(K.leaf?rt.push(M):Et(q,N)?this._all(M,rt):st.push(M))}K=st.pop()}return rt},y.prototype.collides=function(q){var K=this.data;if(!Bt(q,K))return!1;for(var rt=[];K;){for(var mt=0;mt<K.children.length;mt++){var st=K.children[mt],gt=K.leaf?this.toBBox(st):st;if(Bt(q,gt)){if(K.leaf||Et(q,gt))return!0;rt.push(st)}}K=rt.pop()}return!1},y.prototype.load=function(q){if(!q||!q.length)return this;if(q.length<this._minEntries){for(var K=0;K<q.length;K++)this.insert(q[K]);return this}var rt=this._build(q.slice(),0,q.length-1,0);if(this.data.children.length)if(this.data.height===rt.height)this._splitRoot(this.data,rt);else{if(this.data.height<rt.height){var mt=this.data;this.data=rt,rt=mt}this._insert(rt,this.data.height-rt.height-1,!0)}else this.data=rt;return this},y.prototype.insert=function(q){return q&&this._insert(q,this.data.height-1),this},y.prototype.clear=function(){return this.data=Kt([]),this},y.prototype.remove=function(q,K){if(!q)return this;for(var rt,mt,st,gt=this.data,M=this.toBBox(q),N=[],O=[];gt||N.length;){if(gt||(gt=N.pop(),mt=N[N.length-1],rt=O.pop(),st=!0),gt.leaf){var B=E(q,gt.children,K);if(B!==-1)return gt.children.splice(B,1),N.push(gt),this._condense(N),this}st||gt.leaf||!Et(gt,M)?mt?(rt++,gt=mt.children[rt],st=!1):gt=null:(N.push(gt),O.push(rt),rt=0,mt=gt,gt=gt.children[0])}return this},y.prototype.toBBox=function(q){return q},y.prototype.compareMinX=function(q,K){return q.minX-K.minX},y.prototype.compareMinY=function(q,K){return q.minY-K.minY},y.prototype.toJSON=function(){return this.data},y.prototype.fromJSON=function(q){return this.data=q,this},y.prototype._all=function(q,K){for(var rt=[];q;)q.leaf?K.push.apply(K,q.children):rt.push.apply(rt,q.children),q=rt.pop();return K},y.prototype._build=function(q,K,rt,mt){var st,gt=rt-K+1,M=this._maxEntries;if(gt<=M)return k(st=Kt(q.slice(K,rt+1)),this.toBBox),st;mt||(mt=Math.ceil(Math.log(gt)/Math.log(M)),M=Math.ceil(gt/Math.pow(M,mt-1))),(st=Kt([])).leaf=!1,st.height=mt;var N=Math.ceil(gt/M),O=N*Math.ceil(Math.sqrt(M));Re(q,K,rt,O,this.compareMinX);for(var B=K;B<=rt;B+=O){var D=Math.min(B+O-1,rt);Re(q,B,D,N,this.compareMinY);for(var F=B;F<=D;F+=N){var Q=Math.min(F+N-1,D);st.children.push(this._build(q,F,Q,mt-1))}}return k(st,this.toBBox),st},y.prototype._chooseSubtree=function(q,K,rt,mt){for(;mt.push(K),!K.leaf&&mt.length-1!==rt;){for(var st=1/0,gt=1/0,M=void 0,N=0;N<K.children.length;N++){var O=K.children[N],B=dt(O),D=(F=q,Q=O,(Math.max(Q.maxX,F.maxX)-Math.min(Q.minX,F.minX))*(Math.max(Q.maxY,F.maxY)-Math.min(Q.minY,F.minY))-B);D<gt?(gt=D,st=B<st?B:st,M=O):D===gt&&B<st&&(st=B,M=O)}K=M||K.children[0]}var F,Q;return K},y.prototype._insert=function(q,K,rt){var mt=rt?q:this.toBBox(q),st=[],gt=this._chooseSubtree(mt,this.data,K,st);for(gt.children.push(q),A(gt,mt);K>=0&&st[K].children.length>this._maxEntries;)this._split(st,K),K--;this._adjustParentBBoxes(mt,st,K)},y.prototype._split=function(q,K){var rt=q[K],mt=rt.children.length,st=this._minEntries;this._chooseSplitAxis(rt,st,mt);var gt=this._chooseSplitIndex(rt,st,mt),M=Kt(rt.children.splice(gt,rt.children.length-gt));M.height=rt.height,M.leaf=rt.leaf,k(rt,this.toBBox),k(M,this.toBBox),K?q[K-1].children.push(M):this._splitRoot(rt,M)},y.prototype._splitRoot=function(q,K){this.data=Kt([q,K]),this.data.height=q.height+1,this.data.leaf=!1,k(this.data,this.toBBox)},y.prototype._chooseSplitIndex=function(q,K,rt){for(var mt,st,gt,M,N,O,B,D=1/0,F=1/0,Q=K;Q<=rt-K;Q++){var J=P(q,0,Q,this.toBBox),it=P(q,Q,rt,this.toBBox),ht=(st=J,gt=it,M=void 0,N=void 0,O=void 0,B=void 0,M=Math.max(st.minX,gt.minX),N=Math.max(st.minY,gt.minY),O=Math.min(st.maxX,gt.maxX),B=Math.min(st.maxY,gt.maxY),Math.max(0,O-M)*Math.max(0,B-N)),ut=dt(J)+dt(it);ht<D?(D=ht,mt=Q,F=ut<F?ut:F):ht===D&&ut<F&&(F=ut,mt=Q)}return mt||rt-K},y.prototype._chooseSplitAxis=function(q,K,rt){var mt=q.leaf?this.compareMinX:H,st=q.leaf?this.compareMinY:X;this._allDistMargin(q,K,rt,mt)<this._allDistMargin(q,K,rt,st)&&q.children.sort(mt)},y.prototype._allDistMargin=function(q,K,rt,mt){q.children.sort(mt);for(var st=this.toBBox,gt=P(q,0,K,st),M=P(q,rt-K,rt,st),N=ot(gt)+ot(M),O=K;O<rt-K;O++){var B=q.children[O];A(gt,q.leaf?st(B):B),N+=ot(gt)}for(var D=rt-K-1;D>=K;D--){var F=q.children[D];A(M,q.leaf?st(F):F),N+=ot(M)}return N},y.prototype._adjustParentBBoxes=function(q,K,rt){for(var mt=rt;mt>=0;mt--)A(K[mt],q)},y.prototype._condense=function(q){for(var K=q.length-1,rt=void 0;K>=0;K--)q[K].children.length===0?K>0?(rt=q[K-1].children).splice(rt.indexOf(q[K]),1):this.clear():k(q[K],this.toBBox)},y})}),gr=S(i=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(B,D,F){F===void 0&&(F={});var Q={type:"Feature"};return(F.id===0||F.id)&&(Q.id=F.id),F.bbox&&(Q.bbox=F.bbox),Q.properties=D||{},Q.geometry=B,Q}i.feature=s;function u(B,D,F){switch(F===void 0&&(F={}),B){case"Point":return h(D).geometry;case"LineString":return k(D).geometry;case"Polygon":return y(D).geometry;case"MultiPoint":return X(D).geometry;case"MultiLineString":return H(D).geometry;case"MultiPolygon":return dt(D).geometry;default:throw new Error(B+" is invalid")}}i.geometry=u;function h(B,D,F){if(F===void 0&&(F={}),!B)throw new Error("coordinates is required");if(!Array.isArray(B))throw new Error("coordinates must be an Array");if(B.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!gt(B[0])||!gt(B[1]))throw new Error("coordinates must contain numbers");var Q={type:"Point",coordinates:B};return s(Q,D,F)}i.point=h;function f(B,D,F){return F===void 0&&(F={}),A(B.map(function(Q){return h(Q,D)}),F)}i.points=f;function y(B,D,F){F===void 0&&(F={});for(var Q=0,J=B;Q<J.length;Q++){var it=J[Q];if(it.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ht=0;ht<it[it.length-1].length;ht++)if(it[it.length-1][ht]!==it[0][ht])throw new Error("First and last Position are not equivalent.")}var ut={type:"Polygon",coordinates:B};return s(ut,D,F)}i.polygon=y;function E(B,D,F){return F===void 0&&(F={}),A(B.map(function(Q){return y(Q,D)}),F)}i.polygons=E;function k(B,D,F){if(F===void 0&&(F={}),B.length<2)throw new Error("coordinates must be an array of two or more positions");var Q={type:"LineString",coordinates:B};return s(Q,D,F)}i.lineString=k;function P(B,D,F){return F===void 0&&(F={}),A(B.map(function(Q){return k(Q,D)}),F)}i.lineStrings=P;function A(B,D){D===void 0&&(D={});var F={type:"FeatureCollection"};return D.id&&(F.id=D.id),D.bbox&&(F.bbox=D.bbox),F.features=B,F}i.featureCollection=A;function H(B,D,F){F===void 0&&(F={});var Q={type:"MultiLineString",coordinates:B};return s(Q,D,F)}i.multiLineString=H;function X(B,D,F){F===void 0&&(F={});var Q={type:"MultiPoint",coordinates:B};return s(Q,D,F)}i.multiPoint=X;function dt(B,D,F){F===void 0&&(F={});var Q={type:"MultiPolygon",coordinates:B};return s(Q,D,F)}i.multiPolygon=dt;function ot(B,D,F){F===void 0&&(F={});var Q={type:"GeometryCollection",geometries:B};return s(Q,D,F)}i.geometryCollection=ot;function Et(B,D){if(D===void 0&&(D=0),D&&!(D>=0))throw new Error("precision must be a positive number");var F=Math.pow(10,D||0);return Math.round(B*F)/F}i.round=Et;function Bt(B,D){D===void 0&&(D="kilometers");var F=i.factors[D];if(!F)throw new Error(D+" units is invalid");return B*F}i.radiansToLength=Bt;function Kt(B,D){D===void 0&&(D="kilometers");var F=i.factors[D];if(!F)throw new Error(D+" units is invalid");return B/F}i.lengthToRadians=Kt;function Re(B,D){return K(Kt(B,D))}i.lengthToDegrees=Re;function q(B){var D=B%360;return D<0&&(D+=360),D}i.bearingToAzimuth=q;function K(B){var D=B%(2*Math.PI);return D*180/Math.PI}i.radiansToDegrees=K;function rt(B){var D=B%360;return D*Math.PI/180}i.degreesToRadians=rt;function mt(B,D,F){if(D===void 0&&(D="kilometers"),F===void 0&&(F="kilometers"),!(B>=0))throw new Error("length must be a positive number");return Bt(Kt(B,D),F)}i.convertLength=mt;function st(B,D,F){if(D===void 0&&(D="meters"),F===void 0&&(F="kilometers"),!(B>=0))throw new Error("area must be a positive number");var Q=i.areaFactors[D];if(!Q)throw new Error("invalid original units");var J=i.areaFactors[F];if(!J)throw new Error("invalid final units");return B/Q*J}i.convertArea=st;function gt(B){return!isNaN(B)&&B!==null&&!Array.isArray(B)}i.isNumber=gt;function M(B){return!!B&&B.constructor===Object}i.isObject=M;function N(B){if(!B)throw new Error("bbox is required");if(!Array.isArray(B))throw new Error("bbox must be an Array");if(B.length!==4&&B.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");B.forEach(function(D){if(!gt(D))throw new Error("bbox must only contain numbers")})}i.validateBBox=N;function O(B){if(!B)throw new Error("id is required");if(["string","number"].indexOf(typeof B)===-1)throw new Error("id must be a number or a string")}i.validateId=O}),nr=S(i=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=gr();function u(K,rt,mt){if(K!==null)for(var st,gt,M,N,O,B,D,F=0,Q=0,J,it=K.type,ht=it==="FeatureCollection",ut=it==="Feature",xt=ht?K.features.length:1,Wt=0;Wt<xt;Wt++){D=ht?K.features[Wt].geometry:ut?K.geometry:K,J=D?D.type==="GeometryCollection":!1,O=J?D.geometries.length:1;for(var $t=0;$t<O;$t++){var re=0,Ve=0;if(N=J?D.geometries[$t]:D,N!==null){B=N.coordinates;var He=N.type;switch(F=mt&&(He==="Polygon"||He==="MultiPolygon")?1:0,He){case null:break;case"Point":if(rt(B,Q,Wt,re,Ve)===!1)return!1;Q++,re++;break;case"LineString":case"MultiPoint":for(st=0;st<B.length;st++){if(rt(B[st],Q,Wt,re,Ve)===!1)return!1;Q++,He==="MultiPoint"&&re++}He==="LineString"&&re++;break;case"Polygon":case"MultiLineString":for(st=0;st<B.length;st++){for(gt=0;gt<B[st].length-F;gt++){if(rt(B[st][gt],Q,Wt,re,Ve)===!1)return!1;Q++}He==="MultiLineString"&&re++,He==="Polygon"&&Ve++}He==="Polygon"&&re++;break;case"MultiPolygon":for(st=0;st<B.length;st++){for(Ve=0,gt=0;gt<B[st].length;gt++){for(M=0;M<B[st][gt].length-F;M++){if(rt(B[st][gt][M],Q,Wt,re,Ve)===!1)return!1;Q++}Ve++}re++}break;case"GeometryCollection":for(st=0;st<N.geometries.length;st++)if(u(N.geometries[st],rt,mt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function h(K,rt,mt,st){var gt=mt;return u(K,function(M,N,O,B,D){N===0&&mt===void 0?gt=M:gt=rt(gt,M,N,O,B,D)},st),gt}function f(K,rt){var mt;switch(K.type){case"FeatureCollection":for(mt=0;mt<K.features.length&&rt(K.features[mt].properties,mt)!==!1;mt++);break;case"Feature":rt(K.properties,0);break}}function y(K,rt,mt){var st=mt;return f(K,function(gt,M){M===0&&mt===void 0?st=gt:st=rt(st,gt,M)}),st}function E(K,rt){if(K.type==="Feature")rt(K,0);else if(K.type==="FeatureCollection")for(var mt=0;mt<K.features.length&&rt(K.features[mt],mt)!==!1;mt++);}function k(K,rt,mt){var st=mt;return E(K,function(gt,M){M===0&&mt===void 0?st=gt:st=rt(st,gt,M)}),st}function P(K){var rt=[];return u(K,function(mt){rt.push(mt)}),rt}function A(K,rt){var mt,st,gt,M,N,O,B,D,F,Q,J=0,it=K.type==="FeatureCollection",ht=K.type==="Feature",ut=it?K.features.length:1;for(mt=0;mt<ut;mt++){for(O=it?K.features[mt].geometry:ht?K.geometry:K,D=it?K.features[mt].properties:ht?K.properties:{},F=it?K.features[mt].bbox:ht?K.bbox:void 0,Q=it?K.features[mt].id:ht?K.id:void 0,B=O?O.type==="GeometryCollection":!1,N=B?O.geometries.length:1,gt=0;gt<N;gt++){if(M=B?O.geometries[gt]:O,M===null){if(rt(null,J,D,F,Q)===!1)return!1;continue}switch(M.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(rt(M,J,D,F,Q)===!1)return!1;break}case"GeometryCollection":{for(st=0;st<M.geometries.length;st++)if(rt(M.geometries[st],J,D,F,Q)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}J++}}function H(K,rt,mt){var st=mt;return A(K,function(gt,M,N,O,B){M===0&&mt===void 0?st=gt:st=rt(st,gt,M,N,O,B)}),st}function X(K,rt){A(K,function(mt,st,gt,M,N){var O=mt===null?null:mt.type;switch(O){case null:case"Point":case"LineString":case"Polygon":return rt(s.feature(mt,gt,{bbox:M,id:N}),st,0)===!1?!1:void 0}var B;switch(O){case"MultiPoint":B="Point";break;case"MultiLineString":B="LineString";break;case"MultiPolygon":B="Polygon";break}for(var D=0;D<mt.coordinates.length;D++){var F=mt.coordinates[D],Q={type:B,coordinates:F};if(rt(s.feature(Q,gt),st,D)===!1)return!1}})}function dt(K,rt,mt){var st=mt;return X(K,function(gt,M,N){M===0&&N===0&&mt===void 0?st=gt:st=rt(st,gt,M,N)}),st}function ot(K,rt){X(K,function(mt,st,gt){var M=0;if(mt.geometry){var N=mt.geometry.type;if(!(N==="Point"||N==="MultiPoint")){var O,B=0,D=0,F=0;if(u(mt,function(Q,J,it,ht,ut){if(O===void 0||st>B||ht>D||ut>F){O=Q,B=st,D=ht,F=ut,M=0;return}var xt=s.lineString([O,Q],mt.properties);if(rt(xt,st,gt,ut,M)===!1)return!1;M++,O=Q})===!1)return!1}}})}function Et(K,rt,mt){var st=mt,gt=!1;return ot(K,function(M,N,O,B,D){gt===!1&&mt===void 0?st=M:st=rt(st,M,N,O,B,D),gt=!0}),st}function Bt(K,rt){if(!K)throw new Error("geojson is required");X(K,function(mt,st,gt){if(mt.geometry!==null){var M=mt.geometry.type,N=mt.geometry.coordinates;switch(M){case"LineString":if(rt(mt,st,gt,0,0)===!1)return!1;break;case"Polygon":for(var O=0;O<N.length;O++)if(rt(s.lineString(N[O],mt.properties),st,gt,O)===!1)return!1;break}}})}function Kt(K,rt,mt){var st=mt;return Bt(K,function(gt,M,N,O){M===0&&mt===void 0?st=gt:st=rt(st,gt,M,N,O)}),st}function Re(K,rt){if(rt=rt||{},!s.isObject(rt))throw new Error("options is invalid");var mt=rt.featureIndex||0,st=rt.multiFeatureIndex||0,gt=rt.geometryIndex||0,M=rt.segmentIndex||0,N=rt.properties,O;switch(K.type){case"FeatureCollection":mt<0&&(mt=K.features.length+mt),N=N||K.features[mt].properties,O=K.features[mt].geometry;break;case"Feature":N=N||K.properties,O=K.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":O=K;break;default:throw new Error("geojson is invalid")}if(O===null)return null;var B=O.coordinates;switch(O.type){case"Point":case"MultiPoint":return null;case"LineString":return M<0&&(M=B.length+M-1),s.lineString([B[M],B[M+1]],N,rt);case"Polygon":return gt<0&&(gt=B.length+gt),M<0&&(M=B[gt].length+M-1),s.lineString([B[gt][M],B[gt][M+1]],N,rt);case"MultiLineString":return st<0&&(st=B.length+st),M<0&&(M=B[st].length+M-1),s.lineString([B[st][M],B[st][M+1]],N,rt);case"MultiPolygon":return st<0&&(st=B.length+st),gt<0&&(gt=B[st].length+gt),M<0&&(M=B[st][gt].length-M-1),s.lineString([B[st][gt][M],B[st][gt][M+1]],N,rt)}throw new Error("geojson is invalid")}function q(K,rt){if(rt=rt||{},!s.isObject(rt))throw new Error("options is invalid");var mt=rt.featureIndex||0,st=rt.multiFeatureIndex||0,gt=rt.geometryIndex||0,M=rt.coordIndex||0,N=rt.properties,O;switch(K.type){case"FeatureCollection":mt<0&&(mt=K.features.length+mt),N=N||K.features[mt].properties,O=K.features[mt].geometry;break;case"Feature":N=N||K.properties,O=K.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":O=K;break;default:throw new Error("geojson is invalid")}if(O===null)return null;var B=O.coordinates;switch(O.type){case"Point":return s.point(B,N,rt);case"MultiPoint":return st<0&&(st=B.length+st),s.point(B[st],N,rt);case"LineString":return M<0&&(M=B.length+M),s.point(B[M],N,rt);case"Polygon":return gt<0&&(gt=B.length+gt),M<0&&(M=B[gt].length+M),s.point(B[gt][M],N,rt);case"MultiLineString":return st<0&&(st=B.length+st),M<0&&(M=B[st].length+M),s.point(B[st][M],N,rt);case"MultiPolygon":return st<0&&(st=B.length+st),gt<0&&(gt=B[st].length+gt),M<0&&(M=B[st][gt].length-M),s.point(B[st][gt][M],N,rt)}throw new Error("geojson is invalid")}i.coordAll=P,i.coordEach=u,i.coordReduce=h,i.featureEach=E,i.featureReduce=k,i.findPoint=q,i.findSegment=Re,i.flattenEach=X,i.flattenReduce=dt,i.geomEach=A,i.geomReduce=H,i.lineEach=Bt,i.lineReduce=Kt,i.propEach=f,i.propReduce=y,i.segmentEach=ot,i.segmentReduce=Et}),lo=S(i=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=nr();function u(h){var f=[1/0,1/0,-1/0,-1/0];return s.coordEach(h,function(y){f[0]>y[0]&&(f[0]=y[0]),f[1]>y[1]&&(f[1]=y[1]),f[2]<y[0]&&(f[2]=y[0]),f[3]<y[1]&&(f[3]=y[1])}),f}u.default=u,i.default=u}),ce=S((i,s)=>{var u=uo(),h=gr(),f=nr(),y=lo().default,E=f.featureEach,k=f.coordEach,P=h.polygon,A=h.featureCollection;function H(X){var dt=new u(X);return dt.insert=function(ot){if(ot.type!=="Feature")throw new Error("invalid feature");return ot.bbox=ot.bbox?ot.bbox:y(ot),u.prototype.insert.call(this,ot)},dt.load=function(ot){var Et=[];return Array.isArray(ot)?ot.forEach(function(Bt){if(Bt.type!=="Feature")throw new Error("invalid features");Bt.bbox=Bt.bbox?Bt.bbox:y(Bt),Et.push(Bt)}):E(ot,function(Bt){if(Bt.type!=="Feature")throw new Error("invalid features");Bt.bbox=Bt.bbox?Bt.bbox:y(Bt),Et.push(Bt)}),u.prototype.load.call(this,Et)},dt.remove=function(ot,Et){if(ot.type!=="Feature")throw new Error("invalid feature");return ot.bbox=ot.bbox?ot.bbox:y(ot),u.prototype.remove.call(this,ot,Et)},dt.clear=function(){return u.prototype.clear.call(this)},dt.search=function(ot){var Et=u.prototype.search.call(this,this.toBBox(ot));return A(Et)},dt.collides=function(ot){return u.prototype.collides.call(this,this.toBBox(ot))},dt.all=function(){var ot=u.prototype.all.call(this);return A(ot)},dt.toJSON=function(){return u.prototype.toJSON.call(this)},dt.fromJSON=function(ot){return u.prototype.fromJSON.call(this,ot)},dt.toBBox=function(ot){var Et;if(ot.bbox)Et=ot.bbox;else if(Array.isArray(ot)&&ot.length===4)Et=ot;else if(Array.isArray(ot)&&ot.length===6)Et=[ot[0],ot[1],ot[3],ot[4]];else if(ot.type==="Feature")Et=y(ot);else if(ot.type==="FeatureCollection")Et=y(ot);else throw new Error("invalid geojson");return{minX:Et[0],minY:Et[1],maxX:Et[2],maxY:Et[3]}},dt}s.exports=H,s.exports.default=H});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var s=Object(this),u=s.length>>>0,h=arguments[1],f=0;f<u;f++)if(i.call(h,s[f],f,s))return f;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var s=Object(this),u=s.length>>>0,h=arguments[1],f=0;f<u;f++){var y=s[f];if(i.call(h,y,f,s))return y}},typeof Object.assign!="function"&&(Object.assign=function(i){"use strict";if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var s=1;s<arguments.length;s++){var u=arguments[s];if(u!=null)for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(i[h]=u[h])}return i}),function(i){i.forEach(function(s){s.hasOwnProperty("remove")||Object.defineProperty(s,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,s){if(this==null)throw new TypeError('"this" is null or not defined');var u=Object(this),h=u.length>>>0;if(h===0)return!1;var f=s|0,y=Math.max(f>=0?f:h-Math.abs(f),0);function E(k,P){return k===P||typeof k=="number"&&typeof P=="number"&&isNaN(k)&&isNaN(P)}for(;y<h;){if(E(u[y],i))return!0;y++}return!1}});var De={name:"@geoman-io/leaflet-geoman-free",version:"2.18.3",description:"A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0",keywords:["leaflet","geoman","polygon management","geometry editing","map data","map overlay","polygon","geojson","leaflet-draw","data-field-geojson","ui-leaflet-draw"],files:["dist"],main:"dist/leaflet-geoman.js",types:"dist/leaflet-geoman.d.ts",dependencies:{"@turf/boolean-contains":"^6.5.0","@turf/kinks":"^6.5.0","@turf/line-intersect":"^6.5.0","@turf/line-split":"^6.5.0",lodash:"4.17.21","polyclip-ts":"^0.16.5"},devDependencies:{"@types/leaflet":"^1.9.12","cross-env":"^7.0.3",cypress:"^13.11.0",esbuild:"^0.20.2",eslint:"8.56.0","eslint-config-airbnb-base":"15.0.0","eslint-config-prettier":"9.1.0","eslint-plugin-cypress":"2.15.1","eslint-plugin-import":"2.29.1",husky:"^9.0.11",leaflet:"1.9.3","lint-staged":"^15.2.5",prettier:"3.2.4","prosthetic-hand":"1.3.1","ts-node":"^10.9.2"},peerDependencies:{leaflet:"^1.2.0"},scripts:{start:"pnpm run dev",dev:"cross-env DEV=true ts-node bundle.mjs",build:"ts-node bundle.mjs",test:"cypress run --browser chrome",cypress:"cypress open",prepare:"pnpm run build && husky","eslint-check":"eslint --print-config . | eslint-config-prettier-check",eslint:'eslint "{src,demo}/**/*.js" --fix ',prettier:'prettier --write "{src,demo}/**/*.{js,css}" --log-level=warn',lint:"pnpm run eslint && pnpm run prettier"},repository:{type:"git",url:"git://github.com/geoman-io/leaflet-geoman.git"},author:{name:"Geoman.io",email:"sales@geoman.io",url:"http://geoman.io"},license:"MIT",bugs:{url:"https://github.com/geoman-io/leaflet-geoman/issues"},homepage:"https://geoman.io",prettier:{trailingComma:"es5",tabWidth:2,semi:!0,singleQuote:!0},"lint-staged":{"*.js":'eslint "{src,demo}/**/*.js" --fix',"*.{js,css,md}":'prettier --write "{src,demo}/**/*.{js,css}"'}},si=nt(Ut()),$r={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},ln={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex l\xF6schen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer l\xF6schen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verkn\xFCpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"L\xE4nge",segmentLength:"Segment L\xE4nge",area:"Fl\xE4che",radius:"Radius",perimeter:"Umfang",height:"H\xF6he",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Cs={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},ho={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},pr={tooltips:{placeMarker:"Adaug\u0103 un punct",firstVertex:"Apas\u0103 aici pentru a ad\u0103uga primul Vertex",continueLine:"Apas\u0103 aici pentru a continua desenul",finishLine:"Apas\u0103 pe orice obiect pentru a finisa desenul",finishPoly:"Apas\u0103 pe primul obiect pentru a finisa",finishRect:"Apas\u0103 pentru a finisa",startCircle:"Apas\u0103 pentru a desena un cerc",finishCircle:"Apas\u0103 pentru a finisa un cerc",placeCircleMarker:"Adaug\u0103 un punct"},actions:{finish:"Termin\u0103",cancel:"Anuleaz\u0103",removeLastVertex:"\u0218terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug\u0103 o bulin\u0103",drawPolyButton:"Deseneaz\u0103 un poligon",drawLineButton:"Deseneaz\u0103 o linie",drawCircleButton:"Deseneaz\u0103 un cerc",drawRectButton:"Deseneaz\u0103 un dreptunghi",editButton:"Editeaz\u0103 straturile",dragButton:"Mut\u0103 straturile",cutButton:"Taie straturile",deleteButton:"\u0218terge straturile",drawCircleMarkerButton:"Deseneaz\u0103 marcatorul cercului",snappingButton:"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri",pinningButton:"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103",rotateButton:"Roti\u021Bi stratul"}},Qe={tooltips:{placeMarker:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440",firstVertex:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442",continueLine:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435",finishLine:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F",finishPoly:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C",finishRect:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C",startCircle:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430",finishCircle:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441",placeCircleMarker:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},actions:{finish:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C",cancel:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",removeLastVertex:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},buttonTitles:{drawMarkerButton:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440",drawPolyButton:"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D",drawLineButton:"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E",drawCircleButton:"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433",drawRectButton:"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A",editButton:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439",dragButton:"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439",cutButton:"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439",deleteButton:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439",drawCircleMarkerButton:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440",snappingButton:"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C",pinningButton:"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435",rotateButton:"\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u0441\u043B\u043E\u044F"}},ir={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer v\xE9rtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del c\xEDrculo",finishCircle:"Presiona para finalizar el c\xEDrculo",placeCircleMarker:"Presiona para colocar un marcador de c\xEDrculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar \xFAltimo v\xE9rtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Pol\xEDgono",drawLineButton:"Dibujar L\xEDnea",drawCircleButton:"Dibujar C\xEDrculo",drawRectButton:"Dibujar Rect\xE1ngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de C\xEDrculo",snappingButton:"El marcador de Snap arrastrado a otras capas y v\xE9rtices",pinningButton:"Fijar juntos los v\xE9rtices compartidos",rotateButton:"Rotar capa"}},qi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te be\xEBindigen",finishPoly:"Klik op het eerst punt om te be\xEBindigen",finishRect:"Klik om te be\xEBindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te be\xEBindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Dr={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer \xE0 dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"\xC9diter des calques",dragButton:"D\xE9placer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"\xC9pingler ensemble les sommets partag\xE9s",rotateButton:"Tourner des calques"}},Oo={tooltips:{placeMarker:"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0",firstVertex:"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9",continueLine:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236",finishLine:"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210",finishPoly:"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210",finishRect:"\u5355\u51FB\u5B8C\u6210",startCircle:"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3",finishCircle:"\u5355\u51FB\u5B8C\u6210\u5706\u5F62",placeCircleMarker:"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},actions:{finish:"\u5B8C\u6210",cancel:"\u53D6\u6D88",removeLastVertex:"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},buttonTitles:{drawMarkerButton:"\u7ED8\u5236\u6807\u8BB0",drawPolyButton:"\u7ED8\u5236\u591A\u8FB9\u5F62",drawLineButton:"\u7ED8\u5236\u7EBF\u6BB5",drawCircleButton:"\u7ED8\u5236\u5706\u5F62",drawRectButton:"\u7ED8\u5236\u957F\u65B9\u5F62",editButton:"\u7F16\u8F91\u56FE\u5C42",dragButton:"\u62D6\u62FD\u56FE\u5C42",cutButton:"\u526A\u5207\u56FE\u5C42",deleteButton:"\u5220\u9664\u56FE\u5C42",drawCircleMarkerButton:"\u753B\u5706\u5708\u6807\u8BB0",snappingButton:"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9",pinningButton:"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77",rotateButton:"\u65CB\u8F6C\u56FE\u5C42"}},Fr={tooltips:{placeMarker:"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18",firstVertex:"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE",continueLine:"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD",finishLine:"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210",finishPoly:"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210",finishRect:"\u55AE\u64CA\u5B8C\u6210",startCircle:"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3",finishCircle:"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62",placeCircleMarker:"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},actions:{finish:"\u5B8C\u6210",cancel:"\u53D6\u6D88",removeLastVertex:"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},buttonTitles:{drawMarkerButton:"\u653E\u7F6E\u6A19\u8A18",drawPolyButton:"\u7E6A\u88FD\u591A\u908A\u5F62",drawLineButton:"\u7E6A\u88FD\u7DDA\u6BB5",drawCircleButton:"\u7E6A\u88FD\u5713\u5F62",drawRectButton:"\u7E6A\u88FD\u65B9\u5F62",editButton:"\u7DE8\u8F2F\u5716\u5F62",dragButton:"\u79FB\u52D5\u5716\u5F62",cutButton:"\u88C1\u5207\u5716\u5F62",deleteButton:"\u522A\u9664\u5716\u5F62",drawCircleMarkerButton:"\u756B\u5713\u5708\u6A19\u8A18",snappingButton:"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE",pinningButton:"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77",rotateButton:"\u65CB\u8F49\u5716\u5F62"}},Do={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro v\xE9rtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do c\xEDrculo",finishCircle:"Clique para finalizar o c\xEDrculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover \xFAltimo v\xE9rtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Pol\xEDgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar C\xEDrculo",drawRectButton:"Desenhar Ret\xE2ngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de C\xEDrculo",snappingButton:"Ajustar marcador arrastado a outras camadas e v\xE9rtices",pinningButton:"Unir v\xE9rtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Tra\xE7ado Autom\xE1tico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"\xC1rea",radius:"Raio",perimeter:"Per\xEDmetro",height:"Altura",width:"Largura",coordinates:"Posi\xE7\xE3o",coordinatesMarker:"Marcador de Posi\xE7\xE3o"}},zr={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro v\xE9rtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do c\xEDrculo",finishCircle:"Clique para terminar o c\xEDrculo",placeCircleMarker:"Clique para colocar marcador de c\xEDrculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover \xDAltimo V\xE9rtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Pol\xEDgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar C\xEDrculo",drawRectButton:"Desenhar Ret\xE2ngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de C\xEDrculo",snappingButton:"Ajustar marcador arrastado a outras camadas e v\xE9rtices",pinningButton:"Unir v\xE9rtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Tra\xE7ado Autom\xE1tico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"\xC1rea",radius:"Raio",perimeter:"Per\xEDmetro",height:"Altura",width:"Largura",coordinates:"Posi\xE7\xE3o",coordinatesMarker:"Marcador de Posi\xE7\xE3o"}},Ge={tooltips:{placeMarker:"Kliknij, aby umie\u015Bci\u0107 znacznik",firstVertex:"Kliknij, aby umie\u015Bci\u0107 pierwszy wierzcho\u0142ek",continueLine:"Kliknij, aby kontynuowa\u0107 rysowanie",finishLine:"Kliknij dowolny istniej\u0105cy znacznik, aby zako\u0144czy\u0107",finishPoly:"Kliknij pierwszy znacznik, aby zako\u0144czy\u0107",finishRect:"Kliknij, aby zako\u0144czy\u0107",startCircle:"Kliknij, aby umie\u015Bci\u0107 \u015Brodek okr\u0119gu",finishCircle:"Kliknij, aby zako\u0144czy\u0107 okr\u0105g",placeCircleMarker:"Kliknij, aby umie\u015Bci\u0107 znacznik okr\u0119gu",placeText:"Kliknij, aby umie\u015Bci\u0107 tekst"},actions:{finish:"Zako\u0144cz",cancel:"Anuluj",removeLastVertex:"Usu\u0144 ostatni wierzcho\u0142ek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielok\u0105t",drawLineButton:"Rysuj lini\u0119",drawCircleButton:"Rysuj okr\u0105g",drawRectButton:"Rysuj prostok\u0105t",editButton:"Edytuj warstwy",dragButton:"Przeci\u0105gnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu\u0144 warstwy",drawCircleMarkerButton:"Rysuj znacznik okr\u0105g\u0142y",snappingButton:"Przyci\u0105gnij przenoszony znacznik do innych warstw i wierzcho\u0142k\xF3w",pinningButton:"Przypnij wsp\xF3lne wierzcho\u0142ki razem",rotateButton:"Obr\xF3\u0107 warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne \u015Bledzenie linii"},measurements:{totalLength:"D\u0142ugo\u015B\u0107",segmentLength:"D\u0142ugo\u015B\u0107 odcinka",area:"Obszar",radius:"Promie\u0144",perimeter:"Obw\xF3d",height:"Wysoko\u015B\u0107",width:"Szeroko\u015B\u0107",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Ui={tooltips:{placeMarker:"Klicka f\xF6r att placera mark\xF6r",firstVertex:"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet",continueLine:"Klicka f\xF6r att forts\xE4tta rita",finishLine:"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra",finishPoly:"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra",finishRect:"Klicka f\xF6r att slutf\xF6ra",startCircle:"Klicka f\xF6r att placera cirkelns centrum",finishCircle:"Klicka f\xF6r att slutf\xF6ra cirkeln",placeCircleMarker:"Klicka f\xF6r att placera cirkelmark\xF6r"},actions:{finish:"Slutf\xF6r",cancel:"Avbryt",removeLastVertex:"Ta bort sista h\xF6rnet"},buttonTitles:{drawMarkerButton:"Rita Mark\xF6r",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmark\xF6r",snappingButton:"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn",pinningButton:"F\xE4st delade h\xF6rn tillsammans",rotateButton:"Rotera lagret"}},Fo={tooltips:{placeMarker:"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7",firstVertex:"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF",continueLine:"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5",finishLine:"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF",finishPoly:"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5",finishRect:"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5",startCircle:"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5",finishCircle:"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF",placeCircleMarker:"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},actions:{finish:"\u03A4\u03AD\u03BB\u03BF\u03C2",cancel:"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7",removeLastVertex:"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},buttonTitles:{drawMarkerButton:"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7",drawPolyButton:"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5",drawLineButton:"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2",drawCircleButton:"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5",drawRectButton:"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5",editButton:"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD",dragButton:"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD",cutButton:"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD",deleteButton:"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD",drawCircleMarkerButton:"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7",snappingButton:"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2",pinningButton:"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF",rotateButton:"\u03A0\u03B5\u03C1\u03B9\u03C3\u03C4\u03C1\u03AD\u03C8\u03C4\u03B5 \u03C4\u03BF \u03C3\u03C4\u03C1\u03CE\u03BC\u03B1"}},Gr={tooltips:{placeMarker:"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez",firstVertex:"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez",continueLine:"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez",finishLine:"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra",finishPoly:"A befejez\xE9shez kattintson az els\u0151 pontra",finishRect:"Kattintson a befejez\xE9shez",startCircle:"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez",finishCircle:"Kattintson a k\xF6r befejez\xE9s\xE9hez",placeCircleMarker:"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},actions:{finish:"Befejez\xE9s",cancel:"M\xE9gse",removeLastVertex:"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},buttonTitles:{drawMarkerButton:"Jel\xF6l\u0151 rajzol\xE1sa",drawPolyButton:"Poligon rajzol\xE1sa",drawLineButton:"Vonal rajzol\xE1sa",drawCircleButton:"K\xF6r rajzol\xE1sa",drawRectButton:"N\xE9gyzet rajzol\xE1sa",editButton:"Elemek szerkeszt\xE9se",dragButton:"Elemek mozgat\xE1sa",cutButton:"Elemek v\xE1g\xE1sa",deleteButton:"Elemek t\xF6rl\xE9se",drawCircleMarkerButton:"K\xF6r jel\xF6l\u0151 rajzol\xE1sa",snappingButton:"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz",pinningButton:"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se",rotateButton:"F\xF3lia elforgat\xE1sa"}},Fn={tooltips:{placeMarker:"Tryk for at placere en mark\xF8r",firstVertex:"Tryk for at placere det f\xF8rste punkt",continueLine:"Tryk for at forts\xE6tte linjen",finishLine:"Tryk p\xE5 et eksisterende punkt for at afslutte",finishPoly:"Tryk p\xE5 det f\xF8rste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmark\xF8r"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer mark\xF8r",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Tr\xE6k",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmark\xF8r",snappingButton:"Fastg\xF8r trukket mark\xF8r til andre elementer",pinningButton:"Sammenl\xE6g delte elementer",rotateButton:"Roter laget"}},Pn={tooltips:{placeMarker:"Klikk for \xE5 plassere punkt",firstVertex:"Klikk for \xE5 plassere f\xF8rste punkt",continueLine:"Klikk for \xE5 tegne videre",finishLine:"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re",finishPoly:"Klikk f\xF8rste punkt for \xE5 fullf\xF8re",finishRect:"Klikk for \xE5 fullf\xF8re",startCircle:"Klikk for \xE5 sette sirkel midtpunkt",finishCircle:"Klikk for \xE5 fullf\xF8re sirkel",placeCircleMarker:"Klikk for \xE5 plassere sirkel",placeText:"Klikk for \xE5 plassere tekst"},actions:{finish:"Fullf\xF8r",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rot\xE9r objekter",drawTextButton:"Tegn tekst",scaleButton:"Skal\xE9r objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omr\xE5de",radius:"Radius",perimeter:"Omriss",height:"H\xF8yde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmark\xF8r"}},co={tooltips:{placeMarker:"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646",firstVertex:"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633",continueLine:"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645",finishLine:"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646",finishPoly:"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646",finishRect:"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646",startCircle:"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647",finishCircle:"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647",placeCircleMarker:"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647",placeText:"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0646\u0648\u0634\u062A\u0646 \u0645\u062A\u0646"},actions:{finish:"\u067E\u0627\u06CC\u0627\u0646",cancel:"\u0644\u0641\u0648",removeLastVertex:"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},buttonTitles:{drawMarkerButton:"\u062F\u0631\u062C \u0646\u0634\u0627\u0646",drawPolyButton:"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC",drawLineButton:"\u0631\u0633\u0645 \u062E\u0637",drawCircleButton:"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647",drawRectButton:"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC",editButton:"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627",dragButton:"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627",cutButton:"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627",deleteButton:"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627",drawCircleMarkerButton:"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647",snappingButton:"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F",pinningButton:"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F",rotateButton:"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647",drawTextButton:"\u0631\u0633\u0645 \u0645\u062A\u0646",scaleButton:"\u0645\u0642\u06CC\u0627\u0633\u200C\u06AF\u0630\u0627\u0631\u06CC",autoTracingButton:"\u0631\u062F\u06CC\u0627\u0628 \u062E\u0648\u062F\u06A9\u0627\u0631"},measurements:{totalLength:"\u0637\u0648\u0644",segmentLength:"\u0637\u0648\u0644 \u0628\u062E\u0634",area:"\u0646\u0627\u062D\u06CC\u0647",radius:"\u0634\u0639\u0627\u0639",perimeter:"\u0645\u062D\u06CC\u0637",height:"\u0627\u0631\u062A\u0641\u0627\u0639",width:"\u0639\u0631\u0636",coordinates:"\u0645\u0648\u0642\u0639\u06CC\u062A",coordinatesMarker:"\u0645\u0648\u0642\u0639\u06CC\u062A \u0646\u0634\u0627\u0646"}},me={tooltips:{placeMarker:"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440",firstVertex:"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443",continueLine:"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438",finishLine:"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F",finishPoly:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438",finishRect:"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438",startCircle:"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430",finishCircle:"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E",placeCircleMarker:"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},actions:{finish:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438",cancel:"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438",removeLastVertex:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},buttonTitles:{drawMarkerButton:"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440",drawPolyButton:"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D",drawLineButton:"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443",drawCircleButton:"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E",drawRectButton:"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A",editButton:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438",dragButton:"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438",cutButton:"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438",deleteButton:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438",drawCircleMarkerButton:"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440",snappingButton:"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D",pinningButton:"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C",rotateButton:"\u041F\u043E\u0432\u0435\u0440\u043D\u0443\u0442\u0438 \u0448\u0430\u0440"}},Ci={tooltips:{placeMarker:"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n",firstVertex:"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n",continueLine:"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n",finishLine:"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n",finishPoly:"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n",finishRect:"Bitirmek i\xE7in t\u0131klay\u0131n",startCircle:"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n",finishCircle:"Daireyi bitirmek i\xE7in t\u0131klay\u0131n",placeCircleMarker:"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},actions:{finish:"Bitir",cancel:"\u0130ptal",removeLastVertex:"Son k\xF6\u015Feyi kald\u0131r"},buttonTitles:{drawMarkerButton:"\xC7izim \u0130\u015Faret\xE7isi",drawPolyButton:"\xC7okgenler \xE7iz",drawLineButton:"\xC7oklu \xE7izgi \xE7iz",drawCircleButton:"\xC7ember \xE7iz",drawRectButton:"Dikd\xF6rtgen \xE7iz",editButton:"Katmanlar\u0131 d\xFCzenle",dragButton:"Katmanlar\u0131 s\xFCr\xFCkle",cutButton:"Katmanlar\u0131 kes",deleteButton:"Katmanlar\u0131 kald\u0131r",drawCircleMarkerButton:"Daire i\u015Faret\xE7isi \xE7iz",snappingButton:"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r",pinningButton:"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle",rotateButton:"Katman\u0131 d\xF6nd\xFCr"}},qe={tooltips:{placeMarker:"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku",firstVertex:"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt",continueLine:"Kliknut\xEDm pokra\u010Dujte v kreslen\xED",finishLine:"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED",finishPoly:"Vyberte prvn\xED bod pro dokon\u010Den\xED",finishRect:"Klikn\u011Bte pro dokon\u010Den\xED",startCircle:"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu",finishCircle:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441",placeCircleMarker:"Kliknut\xEDm nastavte polom\u011Br"},actions:{finish:"Dokon\u010Dit",cancel:"Zru\u0161it",removeLastVertex:"Zru\u0161it posledn\xED akci"},buttonTitles:{drawMarkerButton:"P\u0159idat zna\u010Dku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit k\u0159ivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obd\xE9ln\xEDk",editButton:"Upravit vrstvu",dragButton:"P\u0159eneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"P\u0159idat kruhovou zna\u010Dku",snappingButton:"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm",pinningButton:"Spojit spole\u010Dn\xE9 body dohromady",rotateButton:"Oto\u010Dte vrstvu"}},Qr={tooltips:{placeMarker:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E",firstVertex:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u6700\u521D\u306E\u9802\u70B9\u3092\u914D\u7F6E",continueLine:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u63CF\u753B\u3092\u7D9A\u3051\u308B",finishLine:"\u4EFB\u610F\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86",finishPoly:"\u6700\u521D\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86",finishRect:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86",startCircle:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u4E2D\u5FC3\u3092\u914D\u7F6E",finishCircle:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u63CF\u753B\u3092\u7D42\u4E86",placeCircleMarker:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E",placeText:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30C6\u30AD\u30B9\u30C8\u3092\u914D\u7F6E"},actions:{finish:"\u7D42\u4E86",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",removeLastVertex:"\u6700\u5F8C\u306E\u9802\u70B9\u3092\u524A\u9664"},buttonTitles:{drawMarkerButton:"\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B",drawPolyButton:"\u30DD\u30EA\u30B4\u30F3\u3092\u63CF\u753B",drawLineButton:"\u6298\u308C\u7DDA\u3092\u63CF\u753B",drawCircleButton:"\u5186\u3092\u63CF\u753B",drawRectButton:"\u77E9\u5F62\u3092\u63CF\u753B",editButton:"\u30EC\u30A4\u30E4\u30FC\u3092\u7DE8\u96C6",dragButton:"\u30EC\u30A4\u30E4\u30FC\u3092\u30C9\u30E9\u30C3\u30B0",cutButton:"\u30EC\u30A4\u30E4\u30FC\u3092\u5207\u308A\u53D6\u308A",deleteButton:"\u30EC\u30A4\u30E4\u30FC\u3092\u524A\u9664",drawCircleMarkerButton:"\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B",snappingButton:"\u30C9\u30E9\u30C3\u30B0\u3057\u305F\u30DE\u30FC\u30AB\u30FC\u3092\u4ED6\u306E\u30EC\u30A4\u30E4\u30FC\u3084\u9802\u70B9\u306B\u30B9\u30CA\u30C3\u30D7\u3059\u308B",pinningButton:"\u5171\u6709\u3059\u308B\u9802\u70B9\u3092\u540C\u6642\u306B\u52D5\u304B\u3059",rotateButton:"\u30EC\u30A4\u30E4\u30FC\u3092\u56DE\u8EE2",drawTextButton:"\u30C6\u30AD\u30B9\u30C8\u3092\u63CF\u753B"}},zo={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimm\xE4isen osuuden",continueLine:"Klikkaa jatkaaksesi piirt\xE4mist\xE4",finishLine:"Klikkaa olemassa olevaa merkki\xE4 lopettaaksesi",finishPoly:"Klikkaa ensimm\xE4ist\xE4 merkki\xE4 lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyr\xE4n keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyr\xE4n",placeCircleMarker:"Klikkaa asettaaksesi ympyr\xE4merkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr\xE4 merkkej\xE4",drawPolyButton:"Piirr\xE4 monikulmioita",drawLineButton:"Piirr\xE4 viivoja",drawCircleButton:"Piirr\xE4 ympyr\xE4",drawRectButton:"Piirr\xE4 neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr\xE4",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr\xE4 ympyr\xE4merkki",snappingButton:"Kiinnit\xE4 siirrett\xE4v\xE4 merkki toisiin muotoihin",pinningButton:"Kiinnit\xE4 jaetut muodot yhteen",rotateButton:"K\xE4\xE4nn\xE4",drawTextButton:"Piirr\xE4 teksti\xE4"}},fo={tooltips:{placeMarker:"\uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694",firstVertex:"\uCCAB\uBC88\uC9F8 \uAF2D\uC9C0\uC810 \uC704\uCE58\uC744 \uD074\uB9AD\uD558\uC138\uC694",continueLine:"\uACC4\uC18D \uADF8\uB9AC\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694",finishLine:"\uB05D\uB0B4\uB824\uBA74 \uAE30\uC874 \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694",finishPoly:"\uB05D\uB0B4\uB824\uBA74 \uCC98\uC74C \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694",finishRect:"\uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694",startCircle:"\uC6D0\uC758 \uC911\uC2EC\uC774 \uB420 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694",finishCircle:"\uC6D0\uC744 \uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694",placeCircleMarker:"\uC6D0 \uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694",placeText:"\uD14D\uC2A4\uD2B8 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694"},actions:{finish:"\uB05D\uB0B4\uAE30",cancel:"\uCDE8\uC18C",removeLastVertex:"\uB9C8\uC9C0\uB9C9 \uAF2D\uC9C0\uC810 \uC81C\uAC70"},buttonTitles:{drawMarkerButton:"\uB9C8\uCEE4 \uADF8\uB9AC\uAE30",drawPolyButton:"\uB2E4\uAC01\uD615 \uADF8\uB9AC\uAE30",drawLineButton:"\uB2E4\uAC01\uC120 \uADF8\uB9AC\uAE30",drawCircleButton:"\uC6D0 \uADF8\uB9AC\uAE30",drawRectButton:"\uC9C1\uC0AC\uAC01\uD615 \uADF8\uB9AC\uAE30",editButton:"\uB808\uC774\uC5B4 \uD3B8\uC9D1\uD558\uAE30",dragButton:"\uB808\uC774\uC5B4 \uB04C\uAE30",cutButton:"\uB808\uC774\uC5B4 \uC790\uB974\uAE30",deleteButton:"\uB808\uC774\uC5B4 \uC81C\uAC70\uD558\uAE30",drawCircleMarkerButton:"\uC6D0 \uB9C8\uCEE4 \uADF8\uB9AC\uAE30",snappingButton:"\uC7A1\uC544\uB048 \uB9C8\uCEE4\uB97C \uB2E4\uB978 \uB808\uC774\uC5B4 \uBC0F \uAF2D\uC9C0\uC810\uC5D0 \uB4E4\uB7EC\uBD99\uAC8C \uD558\uAE30",pinningButton:"\uACF5\uC720 \uAF2D\uC9C0\uC810\uC744 \uD568\uAED8 \uCC0D\uAE30",rotateButton:"\uB808\uC774\uC5B4 \uD68C\uC804\uD558\uAE30",drawTextButton:"\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30"}},Se={tooltips:{placeMarker:"\u041C\u0430\u0440\u043A\u0435\u0440\u0434\u0438 \u0436\u0430\u0439\u0433\u0430\u0448\u0442\u044B\u0440\u0443\u0443 \u04AF\u0447\u04AF\u043D \u0431\u0430\u0441\u044B\u04A3\u044B\u0437",firstVertex:"\u0411\u0438\u0440\u0438\u043D\u0447\u0438 \u0447\u043E\u043A\u0443\u043D\u0443 \u0436\u0430\u0439\u0433\u0430\u0448\u0442\u044B\u0440\u0443\u0443\u043D\u0443 \u04AF\u0447\u04AF\u043D \u0431\u0430\u0441\u044B\u04A3\u044B\u0437",continueLine:"\u0421\u04AF\u0440\u04E9\u0442 \u0442\u0430\u0440\u0442\u0443\u0443\u043D\u0443 \u0443\u043B\u0430\u043D\u0442\u0443\u0443 \u04AF\u0447\u04AF\u043D \u0431\u0430\u0441\u044B\u04A3\u044B\u0437",finishLine:"\u0410\u044F\u043A\u0442\u043E\u043E \u04AF\u0447\u04AF\u043D \u0443\u0447\u0443\u0440\u0434\u0430\u0433\u044B \u043C\u0430\u0440\u043A\u0435\u0440\u0434\u0438 \u0431\u0430\u0441\u044B\u04A3\u044B\u0437",finishPoly:"\u0411\u04AF\u0442\u04AF\u0440\u04AF\u04AF \u04AF\u0447\u04AF\u043D \u0431\u0438\u0440\u0438\u043D\u0447\u0438 \u043C\u0430\u0440\u043A\u0435\u0440\u0434\u0438 \u0431\u0430\u0441\u044B\u04A3\u044B\u0437",finishRect:"\u0411\u04AF\u0442\u04AF\u0440\u04AF\u04AF \u04AF\u0447\u04AF\u043D \u0431\u0430\u0441\u044B\u04A3\u044B\u0437",startCircle:"\u0410\u0439\u043B\u0430\u043D\u0430\u043D\u044B\u043D \u0431\u043E\u0440\u0431\u043E\u0440\u0443\u043D \u0436\u0430\u0439\u0433\u0430\u0448\u0442\u044B\u0440\u0443\u0443\u043D\u0443 \u04AF\u0447\u04AF\u043D \u0431\u0430\u0441\u044B\u04A3\u044B\u0437",finishCircle:"\u0410\u0439\u043B\u0430\u043D\u0430\u043D\u044B \u0431\u04AF\u0442\u04AF\u0440\u04AF\u04AF \u04AF\u0447\u04AF\u043D \u0431\u0430\u0441\u044B\u04A3\u044B\u0437",placeCircleMarker:"\u0422\u0435\u0433\u0435\u0440\u0435\u043A \u043C\u0430\u0440\u043A\u0435\u0440\u0434\u0438 \u0436\u0430\u0439\u0433\u0430\u0448\u0442\u044B\u0440\u0443\u0443 \u04AF\u0447\u04AF\u043D \u0431\u0430\u0441\u044B\u04A3\u044B\u0437",placeText:"\u0422\u0435\u043A\u0441\u0442\u0442\u0438 \u0436\u0430\u0439\u0433\u0430\u0448\u0442\u044B\u0440\u0443\u0443 \u04AF\u0447\u04AF\u043D \u0431\u0430\u0441\u044B\u04A3\u044B\u0437"},actions:{finish:"\u0410\u044F\u0433\u044B",cancel:"\u0416\u043E\u043A \u043A\u044B\u043B\u0443\u0443",removeLastVertex:"\u0410\u043A\u044B\u0440\u043A\u044B \u0447\u043E\u043A\u0443\u043D\u0443 \u04E9\u0447\u04AF\u0440\u04AF\u04AF"},buttonTitles:{drawMarkerButton:"\u041C\u0430\u0440\u043A\u0435\u0440\u0434\u0438 \u0447\u0438\u0437\u0443\u0443",drawPolyButton:"\u041F\u043E\u043B\u0438\u0433\u043E\u043D \u0447\u0438\u0437\u0443\u0443",drawLineButton:"\u041F\u043E\u043B\u0438\u043B\u0438\u043D\u0438\u044F \u0447\u0438\u0437\u0443\u0443",drawCircleButton:"\u0414\u0430\u0439\u044B\u043D\u0434\u044B \u0447\u0438\u0437\u0443\u0443",drawRectButton:"\u041F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A \u0447\u0438\u0437\u0443\u0443",editButton:"\u0421\u043B\u043E\u043E\u043F\u0442\u0443 \u0442\u04AF\u0437\u04E9\u0442\u04AF\u04AF",dragButton:"\u0421\u043B\u043E\u043E\u043F\u0442\u0443 \u043A\u0430\u0440\u0430\u043F \u0441\u04AF\u0439\u043B\u04E9\u04AF",cutButton:"\u0421\u043B\u043E\u043E\u043F\u0442\u0443\u043D \u0431\u0430\u0448\u044B\u043D \u043A\u0435\u0441\u04AF\u04AF",deleteButton:"\u0421\u043B\u043E\u043E\u043F\u0442\u0443\u043D \u04E9\u0447\u04AF\u0440\u04AF\u04AF",drawCircleMarkerButton:"\u0414\u0430\u0439\u044B\u043D\u0434\u044B \u043C\u0430\u0440\u043A\u0435\u0440\u0434\u0438 \u0447\u0438\u0437\u0443\u0443",snappingButton:"\u0411\u0430\u0448\u043A\u0430 \u0441\u043B\u043E\u043E\u043F\u0442\u043E\u0440\u0434\u0443\u043D \u0436\u0430\u043D\u0430 \u0432\u0435\u0440\u0442\u0435\u043A\u0441\u0442\u0435\u0440\u0434\u0438\u043D \u0430\u0440\u0430\u0441\u044B\u043D\u0430 \u0447\u0435\u043A\u0438\u043B\u0434\u04E9\u04E9",pinningButton:"\u0411\u04E9\u043B\u04AF\u0448\u043A\u04E9\u043D \u0432\u0435\u0440\u0442\u0435\u043A\u0441\u0442\u0435\u0440\u0434\u0438 \u0431\u0438\u0440\u0433\u0435 \u0442\u0443\u0442\u0443\u0448\u0442\u0443\u0440\u0443\u0443",rotateButton:"\u0421\u043B\u043E\u043E\u043F\u0442\u0443\u043D \u04E9\u0437\u0433\u04E9\u0440\u0442\u04AF\u04AF",drawTextButton:"\u0422\u0435\u043A\u0441\u0442 \u0447\u0438\u0437\u0443\u0443",scaleButton:"\u0421\u043B\u043E\u043E\u043F\u0442\u0443\u043D \u04E9\u043B\u0447\u04E9\u043C\u04AF\u043D \u04E9\u0437\u0433\u04E9\u0440\u0442\u04AF\u04AF",autoTracingButton:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0442\u044B\u043A \u0442\u0438\u0437\u043C\u0435\u0433\u0438 \u0447\u0438\u0437\u0443\u0443"},measurements:{totalLength:"\u0423\u0437\u0443\u043D\u0434\u0443\u043A",segmentLength:"\u0421\u0435\u0433\u043C\u0435\u043D\u0442 \u0443\u0437\u0443\u043D\u0434\u0443\u0433\u0443",area:"\u0410\u0439\u043C\u0430\u043A",radius:"\u0420\u0430\u0434\u0438\u0443\u0441",perimeter:"\u041F\u0435\u0440\u0438\u043C\u0435\u0442\u0440",height:"\u0414\u0438\u0430\u043C\u0435\u0442\u0440",width:"\u041A\u0435\u043D\u0447\u0438\u043B\u0438\u043A",coordinates:"\u041A\u043E\u043E\u0440\u0434\u0438\u043D\u0430\u0442\u0442\u0430\u0440",coordinatesMarker:"\u041C\u0430\u0440\u043A\u0435\u0440\u0434\u0438\u043D \u043A\u043E\u043E\u0440\u0434\u0438\u043D\u0430\u0442\u0442\u0430\u0440\u044B"}},_n=zr,Mi={en:$r,de:ln,it:Cs,id:ho,ro:pr,ru:Qe,es:ir,nl:qi,fr:Dr,pt:_n,pt_br:Do,pt_pt:zr,zh:Oo,zh_tw:Fr,pl:Ge,sv:Ui,el:Fo,hu:Gr,da:Fn,no:Pn,fa:co,ua:me,tr:Ci,cz:qe,ja:Qr,fi:zo,ko:fo,ky:Se},qr={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let s={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(u=>{this._isRelevantForEdit(u)&&u.pm.enable(s)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let s in i){let u=i[s];this._isRelevantForEdit(u)&&u.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},Je=qr,rr={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(s=>{this._isRelevantForDrag(s)&&s.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(s=>{s.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let s in i){let u=i[s];this._isRelevantForDrag(u)&&u.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},yn=rr,Go={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let s=i.target;this._isRelevantForRemoval(s)&&!s.pm.dragging()&&(s.removeFrom(this.map.pm._getContainingLayer()),s.remove(),s instanceof L.LayerGroup?(this._fireRemoveLayerGroup(s),this._fireRemoveLayerGroup(this.map,s)):(s.pm._fireRemove(s),s.pm._fireRemove(this.map,s)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let s in i){let u=i[s];this._isRelevantForRemoval(u)&&(u.pm.enabled()&&u.pm.disable(),u.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},qo=Go,Uo={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let s in i){let u=i[s];this._isRelevantForRemoval(u)&&u.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},go=Uo,Ms=nt(Ut()),Zo={_fireDrawStart(i="Draw",s={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,s)},_fireDrawEnd(i="Draw",s={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,s)},_fireCreate(i,s="Draw",u={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},s,u)},_fireCenterPlaced(i="Draw",s={}){let u=i==="Draw"?this._layer:void 0,h=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:u,layer:h,latlng:this._layer.getLatLng()},i,s)},_fireCut(i,s,u,h="Draw",f={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:s,originalLayer:u},h,f)},_fireEdit(i=this._layer,s="Edit",u={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},s,u)},_fireEnable(i="Edit",s={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,s)},_fireDisable(i="Edit",s={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,s)},_fireUpdate(i="Edit",s={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,s)},_fireMarkerDragStart(i,s=void 0,u="Edit",h={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:s},u,h)},_fireMarkerDrag(i,s=void 0,u="Edit",h={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:s},u,h)},_fireMarkerDragEnd(i,s=void 0,u=void 0,h="Edit",f={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:s,intersectionReset:u},h,f)},_fireDragStart(i="Edit",s={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,s)},_fireDrag(i,s="Edit",u={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},s,u)},_fireDragEnd(i="Edit",s={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,s)},_fireDragEnable(i="Edit",s={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,s)},_fireDragDisable(i="Edit",s={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,s)},_fireRemove(i,s=i,u="Edit",h={}){this.__fire(i,"pm:remove",{layer:s,shape:this.getShape()},u,h)},_fireVertexAdded(i,s,u,h="Edit",f={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:s,latlng:u,shape:this.getShape()},h,f)},_fireVertexRemoved(i,s,u="Edit",h={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:s,shape:this.getShape()},u,h)},_fireVertexClick(i,s,u="Edit",h={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:s,shape:this.getShape()},u,h)},_fireIntersect(i,s=this._layer,u="Edit",h={}){this.__fire(s,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},u,h)},_fireLayerReset(i,s,u="Edit",h={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:s,shape:this.getShape()},u,h)},_fireChange(i,s="Edit",u={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},s,u)},_fireTextChange(i,s="Edit",u={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},s,u)},_fireTextFocus(i="Edit",s={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,s)},_fireTextBlur(i="Edit",s={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,s)},_fireSnapDrag(i,s,u="Snapping",h={}){this.__fire(i,"pm:snapdrag",s,u,h)},_fireSnap(i,s,u="Snapping",h={}){this.__fire(i,"pm:snap",s,u,h)},_fireUnsnap(i,s,u="Snapping",h={}){this.__fire(i,"pm:unsnap",s,u,h)},_fireRotationEnable(i,s,u="Rotation",h={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},u,h)},_fireRotationDisable(i,s="Rotation",u={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},s,u)},_fireRotationStart(i,s,u="Rotation",h={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:s},u,h)},_fireRotation(i,s,u,h=this._rotationLayer,f="Rotation",y={}){this.__fire(i,"pm:rotate",{layer:h,helpLayer:this._layer,startAngle:this._startAngle,angle:h.pm.getAngle(),angleDiff:s,oldLatLngs:u,newLatLngs:h.getLatLngs()},f,y)},_fireRotationEnd(i,s,u,h="Rotation",f={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:s,angle:this._rotationLayer.pm.getAngle(),originLatLngs:u,newLatLngs:this._rotationLayer.getLatLngs()},h,f)},_fireActionClick(i,s,u,h="Toolbar",f={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:s,button:u},h,f)},_fireButtonClick(i,s,u="Toolbar",h={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:s},u,h)},_fireLangChange(i,s,u,h,f="Global",y={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:s,fallback:u,translations:h},f,y)},_fireGlobalDragModeToggled(i,s="Global",u={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},s,u)},_fireGlobalEditModeToggled(i,s="Global",u={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},s,u)},_fireGlobalRemovalModeToggled(i,s="Global",u={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},s,u)},_fireGlobalCutModeToggled(i="Global",s={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,s)},_fireGlobalDrawModeToggled(i="Global",s={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,s)},_fireGlobalRotateModeToggled(i="Global",s={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,s)},_fireRemoveLayerGroup(i,s=i,u="Edit",h={}){this.__fire(i,"pm:remove",{layer:s,shape:void 0},u,h)},_fireKeyeventEvent(i,s,u,h="Global",f={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:s,focusOn:u},h,f)},__fire(i,s,u,h,f={}){u=(0,Ms.default)(u,f,{source:h}),L.PM.Utils._fireEvent(i,s,u)}},le=Zo,po=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let s="document";this.map.getContainer().contains(i.target)&&(s="map");let u={event:i,eventType:i.type,focusOn:s};this._lastEvents[i.type]=u,this._lastEvents.current=u,this.map.pm._fireKeyeventEvent(i,i.type,s)},_onBlur(i){i.altKey=!1;let s={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=s,this._lastEvents.current=s},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){return this._lastEvents.current?.event.shiftKey},isAltKeyPressed(){return this._lastEvents.current?.event.altKey},isCtrlKeyPressed(){return this._lastEvents.current?.event.ctrlKey},isMetaKeyPressed(){return this._lastEvents.current?.event.metaKey},getPressedKey(){return this._lastEvents.current?.event.key}}),ai=po,hn=nt(Ze());function Ee(i){let s=L.PM.activeLang;return(0,hn.default)(Mi[s],i)||(0,hn.default)(Mi.en,i)||i}function Vo(i){for(let s=0;s<i.length;s+=1){let u=i[s];if(Array.isArray(u)){if(Vo(u))return!0}else if(u!=null&&u!=="")return!0}return!1}function ui(i){return i.reduce((s,u)=>{if(u.length!==0){let h=Array.isArray(u)?ui(u):u;Array.isArray(h)?h.length!==0&&s.push(h):s.push(h)}return s},[])}function rs(i,s,u){let h={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:f,b:y,f:E}=h,k=i.lng,P=i.lat,A=u,H=Math.PI,X=s*H/180,dt=Math.sin(X),ot=Math.cos(X),Et=(1-E)*Math.tan(P*H/180),Bt=1/Math.sqrt(1+Et*Et),Kt=Et*Bt,Re=Math.atan2(Et,ot),q=Bt*dt,K=1-q*q,rt=K*(f*f-y*y)/(y*y),mt=1+rt/16384*(4096+rt*(-768+rt*(320-175*rt))),st=rt/1024*(256+rt*(-128+rt*(74-47*rt))),gt=A/(y*mt),M=2*Math.PI,N,O,B;for(;Math.abs(gt-M)>1e-12;){N=Math.cos(2*Re+gt),O=Math.sin(gt),B=Math.cos(gt);let xt=st*O*(N+st/4*(B*(-1+2*N*N)-st/6*N*(-3+4*O*O)*(-3+4*N*N)));M=gt,gt=A/(y*mt)+xt}let D=Kt*O-Bt*B*ot,F=Math.atan2(Kt*B+Bt*O*ot,(1-E)*Math.sqrt(q*q+D*D)),Q=Math.atan2(O*dt,Bt*B-Kt*O*ot),J=E/16*K*(4+E*(4-3*K)),it=Q-(1-J)*E*q*(gt+J*O*(N+J*B*(-1+2*N*N))),ht=k+it*180/H,ut=F*180/H;return L.latLng(ht,ut)}function or(i,s,u,h,f=!0){let y,E,k,P=[];for(let A=0;A<u;A+=1){if(f)y=A*360/u+h,E=rs(i,y,s),k=L.latLng(E.lng,E.lat);else{let H=i.lat+Math.cos(2*A*Math.PI/u)*s,X=i.lng+Math.sin(2*A*Math.PI/u)*s;k=L.latLng(H,X)}P.push(k)}return P}function Ps(i,s,u){s=(s+360)%360;let h=Math.PI/180,f=180/Math.PI,{R:y}=L.CRS.Earth,E=i.lng*h,k=i.lat*h,P=s*h,A=Math.sin(k),H=Math.cos(k),X=Math.cos(u/y),dt=Math.sin(u/y),ot=Math.asin(A*X+H*dt*Math.cos(P)),Et=E+Math.atan2(Math.sin(P)*dt*H,X-A*Math.sin(ot));Et*=f;let Bt=Et-360,Kt=Et<-180?Et+360:Et;return Et=Et>180?Bt:Kt,L.latLng([ot*f,Et])}function Kn(i,s,u){let h=i.latLngToContainerPoint(s),f=i.latLngToContainerPoint(u),y=Math.atan2(f.y-h.y,f.x-h.x)*180/Math.PI+90;return y+=y<0?360:0,y}function mr(i,s,u,h){let f=Kn(i,s,u);return Ps(s,f,h)}function Ss(i,s,u="asc"){if(!s||Object.keys(s).length===0)return(P,A)=>P-A;let h=Object.keys(s),f,y=h.length-1,E={};for(;y>=0;)f=h[y],E[f.toLowerCase()]=s[f],y-=1;function k(P){if(P instanceof L.Marker)return"Marker";if(P instanceof L.Circle)return"Circle";if(P instanceof L.CircleMarker)return"CircleMarker";if(P instanceof L.Rectangle)return"Rectangle";if(P instanceof L.Polygon)return"Polygon";if(P instanceof L.Polyline)return"Line"}return(P,A)=>{let H,X;if(i==="instanceofShape"){if(H=k(P.layer).toLowerCase(),X=k(A.layer).toLowerCase(),!H||!X)return 0}else{if(!P.hasOwnProperty(i)||!A.hasOwnProperty(i))return 0;H=P[i].toLowerCase(),X=A[i].toLowerCase()}let dt=H in E?E[H]:Number.MAX_SAFE_INTEGER,ot=X in E?E[X]:Number.MAX_SAFE_INTEGER,Et=0;return dt<ot?Et=-1:dt>ot&&(Et=1),u==="desc"?Et*-1:Et}}function cn(i,s=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(s).getLatLngs():L.polyline(s).getLatLngs()}function os(i,s){if(s.options.crs?.projection?.MAX_LATITUDE){let u=s.options.crs?.projection?.MAX_LATITUDE;i.lat=Math.max(Math.min(u,i.lat),-u)}return i}function _r(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var sr=L.Class.extend({includes:[Je,yn,qo,go,le],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=ai(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",s,u="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let f=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(f){let y=[`${f[1]}_${f[2]}`,`${f[1]}`];for(let E of y)if(Mi[E]){i=E;break}}}let h=L.PM.activeLang;s&&(Mi[i]=(0,si.default)(Mi[u],s)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(h,i,u,Mi[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",s){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,s)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,s={}){let u=s.ignoreShapes||[],h=s.merge||!1;this.map.pm.Draw.shapes.forEach(f=>{u.indexOf(f)===-1&&this.map.pm.Draw[f].setPathOptions(i,h)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let s=(0,si.default)(this.globalOptions,i);s.editable&&(s.resizeableCircleMarker=s.editable,delete s.editable);let u=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!s.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),u=!0);let h=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!s.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),h=!0),this.map.pm.Draw.shapes.forEach(f=>{this.map.pm.Draw[f].setOptions(s)}),u&&this.map.pm.Draw.CircleMarker.enable(),h&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(f=>{f.pm.setOptions(s)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=s,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let s=L.PM.Utils.findLayers(this.map);if(!i)return s;let u=L.featureGroup();return u._pmTempLayer=!0,s.forEach(h=>{u.addLayer(h)}),u},getGeomanDrawLayers(i=!1){let s=L.PM.Utils.findLayers(this.map).filter(h=>h._drawnByGeoman===!0);if(!i)return s;let u=L.featureGroup();return u._pmTempLayer=!0,s.forEach(h=>{u.addLayer(h)}),u},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){_r(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let s="";i.type==="touchstart"||i.type==="pointerdown"?s="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(s="mouseup"),s&&_r(this.map)._onClick(this._createMouseEvent(s,i))},_createMouseEvent(i,s){let u,h=s.touches[0]||s.changedTouches[0];try{u=new MouseEvent(i,{bubbles:s.bubbles,cancelable:s.cancelable,view:s.view,detail:h.detail,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY,ctrlKey:s.ctrlKey,altKey:s.altKey,shiftKey:s.shiftKey,metaKey:s.metaKey,button:s.button,relatedTarget:s.relatedTarget})}catch{u=document.createEvent("MouseEvents"),u.initMouseEvent(i,s.bubbles,s.cancelable,s.view,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget)}return u}}),ss=sr,as=L.Control.extend({includes:[le],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let s=this.options.position.indexOf("right")>-1?"pos-right":"",u=L.DomUtil.create("div",`button-container  ${s}`,this._container);i.title&&u.setAttribute("title",i.title);let h=L.DomUtil.create("a","leaflet-buttons-control-button",u);h.setAttribute("role","button"),h.setAttribute("tabindex","0"),h.href="#";let f=L.DomUtil.create("div",`leaflet-pm-actions-container ${s}`,u),y=i.actions,E={cancel:{text:Ee("actions.cancel"),title:Ee("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:Ee("actions.finish"),title:Ee("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:Ee("actions.removeLastVertex"),title:Ee("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:Ee("actions.finish"),title:Ee("actions.finish"),onClick(P){this._map.pm.Draw[i.jsClass]._finishShape(P)}}};i._preparedActions=y.map(P=>{let A=typeof P=="string"?P:P.name,H;if(E[A])H=E[A];else if(P.text)H=P;else return H;let X=L.DomUtil.create("a",`leaflet-pm-action ${s} action-${A}`,f);if(X.setAttribute("role","button"),X.setAttribute("tabindex","0"),X.href="#",H.title&&(X.title=H.title),X.innerHTML=H.text,L.DomEvent.disableClickPropagation(X),L.DomEvent.on(X,"click",L.DomEvent.stop),H._node=X,!i.disabled&&H.onClick){let dt=ot=>{ot.preventDefault();let Et="",{buttons:Bt}=this._map.pm.Toolbar;for(let Kt in Bt)if(Bt[Kt]._button===i){Et=Kt;break}this._fireActionClick(H,Et,i)};L.DomEvent.addListener(X,"click",dt,this),L.DomEvent.addListener(X,"click",H.onClick,this),L.DomEvent.addListener(X,"click",()=>this._updateActiveAction(i))}return H}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(u,"active");let k=L.DomUtil.create("div","control-icon",h);return i.iconUrl&&k.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(k,i.className),L.DomEvent.disableClickPropagation(h),L.DomEvent.on(h,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(h,"click",this._onBtnClick,this),L.DomEvent.addListener(h,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(h,"pm-disabled"),h.setAttribute("aria-disabled","true")),u},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:s}=this._map.pm.Toolbar;for(let u in s)if(s[u]._button===this._button){i=u;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",s=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(s,i),s.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(s,i),s.setAttribute("aria-disabled","false"))},_updateActiveAction(i){i._preparedActions?.forEach(s=>{s?._node&&(s.isActive&&s.isActive.call(this)?L.DomUtil.addClass(s._node,"active-action"):L.DomUtil.removeClass(s._node,"active-action"))})}}),Zi=as;L.Control.PMButton=Zi;var zn=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let s=`${i}Container`;return this[s]||(this[s]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[s]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),s={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let u in i){let h=i[u];L.Util.setOptions(h,{className:s.geomanIcons[u]})}},removeControls(){let i=this.getButtons();for(let s in i)i[s].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,s){return this.buttons[i]=s,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let s in this.buttons){let u=this.buttons[s];u._button.disableByOtherButtons&&u!==i&&u.toggled()&&u._triggerClick()}},toggleButton(i,s,u=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let h=i;return u&&this.triggerClickOnToggledButtons(this.buttons[h]),this.buttons[h]?this.buttons[h].toggle(s):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:Ee("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(dt,ot)=>{this.map.pm.Draw[ot.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},s={title:Ee("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(dt,ot)=>{this.map.pm.Draw[ot.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={className:"control-icon leaflet-pm-icon-polyline",title:Ee("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(dt,ot)=>{this.map.pm.Draw[ot.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={title:Ee("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(dt,ot)=>{this.map.pm.Draw[ot.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},f={title:Ee("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(dt,ot)=>{this.map.pm.Draw[ot.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},y={title:Ee("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(dt,ot)=>{this.map.pm.Draw[ot.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},E={title:Ee("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},k={title:Ee("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},P={title:Ee("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(dt,ot)=>{this.map.pm.Draw[ot.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},A={title:Ee("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},H={title:Ee("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},X={className:"control-icon leaflet-pm-icon-text",title:Ee("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(dt,ot)=>{this.map.pm.Draw[ot.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(u)),this._addButton("drawRectangle",new L.Control.PMButton(y)),this._addButton("drawPolygon",new L.Control.PMButton(s)),this._addButton("drawCircle",new L.Control.PMButton(h)),this._addButton("drawCircleMarker",new L.Control.PMButton(f)),this._addButton("drawText",new L.Control.PMButton(X)),this._addButton("editMode",new L.Control.PMButton(E)),this._addButton("dragMode",new L.Control.PMButton(k)),this._addButton("cutPolygon",new L.Control.PMButton(P)),this._addButton("removalMode",new L.Control.PMButton(A)),this._addButton("rotateMode",new L.Control.PMButton(H))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),s=[];this.options.drawControls===!1&&(s=s.concat(Object.keys(i).filter(u=>!i[u]._button.tool))),this.options.editControls===!1&&(s=s.concat(Object.keys(i).filter(u=>i[u]._button.tool==="edit"))),this.options.optionsControls===!1&&(s=s.concat(Object.keys(i).filter(u=>i[u]._button.tool==="options"))),this.options.customControls===!1&&(s=s.concat(Object.keys(i).filter(u=>i[u]._button.tool==="custom")));for(let u in i)if(this.options[u]&&s.indexOf(u)===-1){let h=i[u]._button.tool;h||(h="draw"),i[u].setPosition(this._getBtnPosition(h)),i[u].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,s){this.options.positions[i]=s,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,s){if(s)typeof s!="object"&&(s={name:s});else throw new TypeError("Button has no name");let u=this._btnNameMapping(i);if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");let h=this.map.pm.Draw.createNewDrawInstance(s.name,u);s={...this.buttons[u]._button,...s};let f=this.createCustomControl(s);return{drawInstance:h,control:f}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let s={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let u=this._addButton(i.name,new L.Control.PMButton(s));return this.changeControlOrder(),u},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let s={};if(i)for(let u in this.getButtons()){let h=this.getButtons()[u];(h._button.tool===i||i==="draw"&&!h._button.tool)&&(s[u]=h)}return s},changeControlOrder(i=[]){let s=this._shapeMapping(),u=[];i.forEach(y=>{s[y]?u.push(s[y]):u.push(y)});let h=this.getButtons(),f={};u.forEach(y=>{h[y]&&(f[y]=h[y])}),Object.keys(h).filter(y=>!h[y]._button.tool||h[y]._button.tool==="draw").forEach(y=>{u.indexOf(y)===-1&&(f[y]=h[y])}),Object.keys(h).filter(y=>h[y]._button.tool==="edit").forEach(y=>{u.indexOf(y)===-1&&(f[y]=h[y])}),Object.keys(h).filter(y=>h[y]._button.tool==="options").forEach(y=>{u.indexOf(y)===-1&&(f[y]=h[y])}),Object.keys(h).filter(y=>h[y]._button.tool==="custom").forEach(y=>{u.indexOf(y)===-1&&(f[y]=h[y])}),Object.keys(h).forEach(y=>{u.indexOf(y)===-1&&(f[y]=h[y])}),this.map.pm.Toolbar.buttons=f,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),s=[];for(let u in i)s.push(u);return s},changeActionsOfControl(i,s){let u=this._btnNameMapping(i);if(!u)throw new TypeError("No name passed");if(!s)throw new TypeError("No actions passed");if(!this.buttons[u])throw new TypeError("Button with this name not exists");this.buttons[u]._button.actions=s,this.changeControlOrder()},setButtonDisabled(i,s){let u=this._btnNameMapping(i);s?this.buttons[u].disable():this.buttons[u].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let s=this._shapeMapping();return s[i]?s[i]:i}}),us=zn,Yo=nt(Ut()),Ts={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(s=>{if(Array.isArray(s)){this._assignEvents(s);return}s.off("drag",this._handleSnapping,this),s.on("drag",this._handleSnapping,this),s.off("dragend",this._cleanupSnapping,this),s.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let s=i.target;s._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(s=>{s.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){let s=i.target;if(s._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),i?.originalEvent?.altKey||this._map?.pm?.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let u=this._calcClosestLayer(s.getLatLng(),this._snapList);if(Object.keys(u).length===0)return!1;let h=u.layer instanceof L.Marker||u.layer instanceof L.CircleMarker||!this.options.snapSegment,f;h?f=u.latlng:f=this._checkPrioritiySnapping(u);let y=this.options.snapDistance,E={marker:s,shape:this._shape,snapLatLng:f,segment:u.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:u.layer,distance:u.distance};if(this._fireSnapDrag(E.marker,E),this._fireSnapDrag(this._layer,E),u.distance<y){s._orgLatLng=s.getLatLng(),s.setLatLng(f),s._snapped=!0,s._snapInfo=E;let k=()=>{this._snapLatLng=f,this._fireSnap(s,E),this._fireSnap(this._layer,E)},P=this._snapLatLng||{},A=f||{};(P.lat!==A.lat||P.lng!==A.lng)&&k()}else this._snapLatLng&&(this._unsnap(E),s._snapped=!1,s._snapInfo=void 0,this._fireUnsnap(E.marker,E),this._fireUnsnap(this._layer,E));return!0},_createSnapList(){let i=[],s=[],u=this._map;u.off("layerremove",this._handleSnapLayerRemoval,this),u.on("layerremove",this._handleSnapLayerRemoval,this),u.eachLayer(h=>{if((h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&h.options.snapIgnore!==!0){if(h.options.snapIgnore===void 0&&(!L.PM.optIn&&h.options.pmIgnore===!0||L.PM.optIn&&h.options.pmIgnore!==!1))return;(h instanceof L.Circle||h instanceof L.CircleMarker)&&h.pm&&h.pm._hiddenPolyCircle?i.push(h.pm._hiddenPolyCircle):h instanceof L.ImageOverlay&&(h=L.rectangle(h.getBounds())),i.push(h);let f=L.polyline([],{color:"red",pmIgnore:!0});f._pmTempLayer=!0,s.push(f),(h instanceof L.Circle||h instanceof L.CircleMarker)&&s.push(f)}}),i=i.filter(h=>this._layer!==h),i=i.filter(h=>h._latlng||h._latlngs&&Vo(h._latlngs)),i=i.filter(h=>!h._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let h=L.polyline([],{color:"red",pmIgnore:!0});h._pmTempLayer=!0,s.push(h)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=s},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let s=this._snapList.findIndex(u=>u._leaflet_id===i._leaflet_id);s>-1&&this._snapList.splice(s,1)},_calcClosestLayer(i,s){return this._calcClosestLayers(i,s,1)[0]},_calcClosestLayers(i,s,u=1){let h=[],f={};s.forEach((E,k)=>{if(E._parentCopy&&E._parentCopy===this._layer||E.getLatLngs?.().flat(5).length<2)return;let P=this._calcLayerDistances(i,E);if(P.distance=Math.floor(P.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[k]){let A=L.polyline([],{color:"red",pmIgnore:!0});A._pmTempLayer=!0,this.debugIndicatorLines[k]=A}this.debugIndicatorLines[k].setLatLngs([i,P.latlng])}u===1&&(f.distance===void 0||P.distance-5<=f.distance)?(P.distance+5<f.distance&&(h=[]),f=P,f.layer=E,h.push(f)):u!==1&&(f={},f=P,f.layer=E,h.push(f))}),u!==1&&(h=h.sort((E,k)=>E.distance-k.distance)),u===-1&&(u=h.length);let y=this._getClosestLayerByPriority(h,u);return L.Util.isArray(y)?y:[y]},_calcLayerDistances(i,s){let u=this._map,h=s instanceof L.Marker||s instanceof L.CircleMarker,f=s instanceof L.Polygon,y=i;if(h){let E=s.getLatLng();return{latlng:{...E},distance:this._getDistance(u,E,y)}}return this._calcLatLngDistances(y,s.getLatLngs(),u,f)},_calcLatLngDistances(i,s,u,h=!1){let f,y,E,k=P=>{P.forEach((A,H)=>{if(Array.isArray(A)){k(A);return}if(this.options.snapSegment){let X=A,dt;h?dt=H+1===P.length?0:H+1:dt=H+1===P.length?void 0:H+1;let ot=P[dt];if(ot){let Et=this._getDistanceToSegment(u,i,X,ot);(y===void 0||Et<y)&&(y=Et,E=[X,ot])}}else{let X=this._getDistance(u,i,A);(y===void 0||X<y)&&(y=X,f=A)}})};return k(s),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(u,i,E[0],E[1])},segment:E,distance:y}:{latlng:f,distance:y}},_getClosestLayerByPriority(i,s=1){i=i.sort((E,k)=>E._leaflet_id-k._leaflet_id);let u=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],h=this._map.pm.globalOptions.snappingOrder||[],f=0,y={};return h.concat(u).forEach(E=>{y[E]||(f+=1,y[E]=f)}),i.sort(Ss("instanceofShape",y)),s===1?i[0]||{}:i.slice(0,s)},_checkPrioritiySnapping(i){let s=this._map,u=i.segment[0],h=i.segment[1],f=i.latlng,y=f;if(this.options.snapVertex){let E=this._getDistance(s,u,f),k=this._getDistance(s,h,f),P=E<k?u:h,A=E<k?E:k;if(this.options.snapMiddle){let X=L.PM.Utils.calcMiddleLatLng(s,u,h),dt=this._getDistance(s,X,f);dt<E&&dt<k&&(P=X,A=dt)}let H=this.options.snapDistance;A<H&&(y=P)}return{...y}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,s,u,h){let f=i.getMaxZoom();f===1/0&&(f=i.getZoom());let y=i.project(s,f),E=i.project(u,f),k=i.project(h,f),P=L.LineUtil.closestPointOnSegment(y,E,k);return i.unproject(P,f)},_getDistanceToSegment(i,s,u,h){let f=i.latLngToContainerPoint(s),y=i.latLngToContainerPoint(u),E=i.latLngToContainerPoint(h);return L.LineUtil.pointToSegmentDistance(f,y,E)},_getDistance(i,s,u){return i.latLngToContainerPoint(s).distanceTo(i.latLngToContainerPoint(u))}},mo=Ts,_o=L.Class.extend({includes:[mo,le],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let s=new L.Icon.Default;s.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=s,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(u=>{this[u]=new L.PM.Draw[u](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,s=!1){s?this.options.pathOptions=(0,Yo.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,s){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(s)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(s=>{this[s]._enabled&&(i=s)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(s=>{(s instanceof L.Polyline||s instanceof L.Marker||s instanceof L.Circle||s instanceof L.CircleMarker||s instanceof L.ImageOverlay)&&(s._pmTempLayer||i.push(s))}),this._enabled?i.forEach(s=>{L.PM.Utils.disablePopup(s)}):i.forEach(s=>{L.PM.Utils.enablePopup(s)})},createNewDrawInstance(i,s){let u=this._getShapeFromBtnName(s);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[u])throw new TypeError(`There is no class L.PM.Draw.${u}`);return this[i]=new L.PM.Draw[u](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[s]&&this[i].setOptions(this[s].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let s={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return s[i]?s[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,s){s==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":s==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":s==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),nn=_o;nn.Marker=nn.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Ee("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let s=i;s.target=this._hintMarker,this._handleSnapping(s)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let s=this._hintMarker.getLatLng(),u=new L.Marker(s,this.options.markerStyle);this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm&&this.options.markerEditable?u.pm.enable():u.dragging&&u.dragging.disable(),this._fireCreate(u),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){this.options.markerStyle?.icon&&this._hintMarker?.setIcon(this.options.markerStyle.icon)}});var fn=63710088e-1,Gn={centimeters:fn*100,centimetres:fn*100,degrees:fn/111325,feet:fn*3.28084,inches:fn*39.37,kilometers:fn/1e3,kilometres:fn/1e3,meters:fn,metres:fn,miles:fn/1609.344,millimeters:fn*1e3,millimetres:fn*1e3,nauticalmiles:fn/1852,radians:1,yards:fn*1.0936},yo={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/fn,yards:1.0936133};function Ye(i,s,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=s||{},h.geometry=i,h}function Pi(i,s,u){if(u===void 0&&(u={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vo(i[0])||!vo(i[1]))throw new Error("coordinates must contain numbers");var h={type:"Point",coordinates:i};return Ye(h,s,u)}function Vi(i,s,u){if(u===void 0&&(u={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var h={type:"LineString",coordinates:i};return Ye(h,s,u)}function tn(i,s){s===void 0&&(s={});var u={type:"FeatureCollection"};return s.id&&(u.id=s.id),s.bbox&&(u.bbox=s.bbox),u.features=i,u}function Ho(i,s){s===void 0&&(s="kilometers");var u=Gn[s];if(!u)throw new Error(s+" units is invalid");return i*u}function jo(i,s){s===void 0&&(s="kilometers");var u=Gn[s];if(!u)throw new Error(s+" units is invalid");return i/u}function to(i){var s=i%(2*Math.PI);return s*180/Math.PI}function qn(i){var s=i%360;return s*Math.PI/180}function vo(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function Eo(i){var s,u,h={type:"FeatureCollection",features:[]};if(i.type==="Feature"?u=i.geometry:u=i,u.type==="LineString")s=[u.coordinates];else if(u.type==="MultiLineString")s=u.coordinates;else if(u.type==="MultiPolygon")s=[].concat.apply([],u.coordinates);else if(u.type==="Polygon")s=u.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return s.forEach(function(f){s.forEach(function(y){for(var E=0;E<f.length-1;E++)for(var k=E;k<y.length-1;k++)if(!(f===y&&(Math.abs(E-k)===1||E===0&&k===f.length-2&&f[E][0]===f[f.length-1][0]&&f[E][1]===f[f.length-1][1]))){var P=As(f[E][0],f[E][1],f[E+1][0],f[E+1][1],y[k][0],y[k][1],y[k+1][0],y[k+1][1]);P&&h.features.push(Pi([P[0],P[1]]))}})}),h}function As(i,s,u,h,f,y,E,k){var P,A,H,X,dt,ot={x:null,y:null,onLine1:!1,onLine2:!1};return P=(k-y)*(u-i)-(E-f)*(h-s),P===0?ot.x!==null&&ot.y!==null?ot:!1:(A=s-y,H=i-f,X=(E-f)*A-(k-y)*H,dt=(u-i)*A-(h-s)*H,A=X/P,H=dt/P,ot.x=i+A*(u-i),ot.y=s+A*(h-s),A>=0&&A<=1&&(ot.onLine1=!0),H>=0&&H<=1&&(ot.onLine2=!0),ot.onLine1&&ot.onLine2?[ot.x,ot.y]:!1)}nn.Line=nn.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Ee("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let s=i[i.length-1];this._hintline.setLatLngs([s,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let u=i;u.target=this._hintMarker,this._handleSnapping(u)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let s=this._layer._defaultShape().slice();s.push(this._hintMarker.getLatLng()),this._change(s)},hasSelfIntersection(){return Eo(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,s){let u=L.polyline(this._layer.getLatLngs());i&&(s||(s=this._hintMarker.getLatLng()),u.addLatLng(s));let h=Eo(u.toGeoJSON(15));this._doesSelfIntersect=h.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(h,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let s=this._hintMarker.getLatLng(),u=this._layer.getLatLngs(),h=u[u.length-1];if(s.equals(u[0])||u.length>0&&s.equals(h)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:s,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(s);let f=this._createMarker(s);this._setTooltipText(),this._setHintLineAfterNewVertex(s),this._fireVertexAdded(f,void 0,s,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let s=this._layer.getLatLngs(),u=i[i.length-1],{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(i,u);i.pop(),this._layerGroup.removeLayer(u);let f=i[i.length-1],y=s.indexOf(f.getLatLng());s=s.slice(0,y+1),this._layer.setLatLngs(s),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(u,h,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let s=L.polyline(i,this.options.pathOptions);this._setPane(s,"layerPane"),this._finishLayer(s),s.addTo(this._map.pm._getContainingLayer()),this._fireCreate(s),this.options.snappable&&this._cleanupSnapping();let u=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(u))},_createMarker(i){let s=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(s,"vertexPane"),s._pmTempLayer=!0,this._layerGroup.addLayer(s),this._markers.push(s),s.on("click",this._finishShape,this),s},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),s="";i<=1?s=Ee("tooltips.continueLine"):s=Ee("tooltips.finishLine"),this._hintMarker.setTooltipContent(s)},_change(i){this._fireChange(i,"Draw")},setStyle(){this._layer?.setStyle(this.options.templineStyle),this._hintline?.setStyle(this.options.hintlineStyle)}}),nn.Polygon=nn.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let s=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(s,"vertexPane"),s._pmTempLayer=!0,this._layerGroup.addLayer(s),this._markers.push(s),this._layer.getLatLngs().flat().length===1?(s.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(s)-1,this.options.snappable&&this._cleanupSnapping()):s.on("click",()=>1),s},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),s="";i<=2?s=Ee("tooltips.continueLine"):s=Ee("tooltips.finishPoly"),this._hintMarker.setTooltipContent(s)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let s=L.polygon(i,this.options.pathOptions);this._setPane(s,"layerPane"),this._finishLayer(s),s.addTo(this._map.pm._getContainingLayer()),this._fireCreate(s),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let u=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(u))}}),nn.Rectangle=nn.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Ee("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let s=0;s<2;s+=1){let u=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(u,"vertexPane"),u._pmTempLayer=!0,this._layerGroup.addLayer(u),this._styleMarkers.push(u)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let s=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(s),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(u=>{L.DomUtil.addClass(u._icon,"visible"),u.setLatLng(s)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Ee("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let u=i;u.target=this._hintMarker,this._handleSnapping(u)}let s=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(s,"Draw")},_syncRectangleSize(){let i=os(this._startMarker.getLatLng(),this._map),s=os(this._hintMarker.getLatLng(),this._map),u=L.PM.Utils._getRotatedRectangle(i,s,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(u),this.options.cursorMarker&&this._styleMarkers){let h=[];u.forEach(f=>{!f.equals(i,1e-8)&&!f.equals(s,1e-8)&&h.push(f)}),h.forEach((f,y)=>{try{this._styleMarkers[y].setLatLng(f)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let s=this._hintMarker.getLatLng(),u=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||u.equals(s))return;let h=L.rectangle([u,s],this.options.pathOptions);if(this.options.rectangleAngle){let y=L.PM.Utils._getRotatedRectangle(u,s,this.options.rectangleAngle||0,this._map);h.setLatLngs(y),h.pm&&h.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h);let f=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(f))},setStyle(){this._layer?.setStyle(this.options.pathOptions)}}),nn.CircleMarker=nn.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let s={};L.extend(s,this.options.templineStyle),s.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),s),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Ee("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Ee("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let s=this._hintMarker.getLatLng();this._centerMarker.setLatLng(s),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Ee("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),s=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,s])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),s=this._hintMarker.getLatLng(),u=this._distanceCalculation(i,s);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(u)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let u=i;u.target=this._hintMarker,this._handleSnapping(u)}this._handleHintMarkerSnapping();let s=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(s,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let s=this._hintMarker.getLatLng(),u=new this._BaseCircleClass(s,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(u),this._fireCreate(u),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let s=this._centerMarker.getLatLng(),u=this._defaultRadius;if(this.options[this._editableOption]){let E=this._hintMarker.getLatLng();u=this._distanceCalculation(s,E),this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?u=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&(u=this.options[this._maxRadiusOption])}let h={...this.options.pathOptions,radius:u},f=new this._BaseCircleClass(s,h);this._setPane(f,"layerPane"),this._finishLayer(f),f.addTo(this._map.pm._getContainingLayer()),f.pm&&f.pm._updateHiddenPolyCircle(),this._fireCreate(f);let y=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(y))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let s=this._centerMarker.getLatLng(),u=this._distanceCalculation(s,i);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?i=mr(this._map,s,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&(i=mr(this._map,s,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),s=this._hintMarker.getLatLng(),u=this._distanceCalculation(i,s);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),this._layer?.setStyle(i),this._hintline?.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,s){return this._map.project(i).distanceTo(this._map.project(s))}}),nn.Circle=nn.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,s){return this._map.distance(i,s)}});function li(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Si(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Sn(i){return i.type==="Feature"?i.geometry:i}function yr(i,s){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function wo(i,s,u){if(i!==null)for(var h,f,y,E,k,P,A,H=0,X=0,dt,ot=i.type,Et=ot==="FeatureCollection",Bt=ot==="Feature",Kt=Et?i.features.length:1,Re=0;Re<Kt;Re++){A=Et?i.features[Re].geometry:Bt?i.geometry:i,dt=A?A.type==="GeometryCollection":!1,k=dt?A.geometries.length:1;for(var q=0;q<k;q++){var K=0,rt=0;if(E=dt?A.geometries[q]:A,E!==null){P=E.coordinates;var mt=E.type;switch(H=u&&(mt==="Polygon"||mt==="MultiPolygon")?1:0,mt){case null:break;case"Point":if(s(P,X,Re,K,rt)===!1)return!1;X++,K++;break;case"LineString":case"MultiPoint":for(h=0;h<P.length;h++){if(s(P[h],X,Re,K,rt)===!1)return!1;X++,mt==="MultiPoint"&&K++}mt==="LineString"&&K++;break;case"Polygon":case"MultiLineString":for(h=0;h<P.length;h++){for(f=0;f<P[h].length-H;f++){if(s(P[h][f],X,Re,K,rt)===!1)return!1;X++}mt==="MultiLineString"&&K++,mt==="Polygon"&&rt++}mt==="Polygon"&&K++;break;case"MultiPolygon":for(h=0;h<P.length;h++){for(rt=0,f=0;f<P[h].length;f++){for(y=0;y<P[h][f].length-H;y++){if(s(P[h][f][y],X,Re,K,rt)===!1)return!1;X++}rt++}K++}break;case"GeometryCollection":for(h=0;h<E.geometries.length;h++)if(wo(E.geometries[h],s,u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Un(i,s){if(i.type==="Feature")s(i,0);else if(i.type==="FeatureCollection")for(var u=0;u<i.features.length&&s(i.features[u],u)!==!1;u++);}function ls(i,s,u){var h=u;return Un(i,function(f,y){y===0&&u===void 0?h=f:h=s(h,f,y)}),h}function Ur(i,s){var u,h,f,y,E,k,P,A,H,X,dt=0,ot=i.type==="FeatureCollection",Et=i.type==="Feature",Bt=ot?i.features.length:1;for(u=0;u<Bt;u++){for(k=ot?i.features[u].geometry:Et?i.geometry:i,A=ot?i.features[u].properties:Et?i.properties:{},H=ot?i.features[u].bbox:Et?i.bbox:void 0,X=ot?i.features[u].id:Et?i.id:void 0,P=k?k.type==="GeometryCollection":!1,E=P?k.geometries.length:1,f=0;f<E;f++){if(y=P?k.geometries[f]:k,y===null){if(s(null,dt,A,H,X)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(y,dt,A,H,X)===!1)return!1;break}case"GeometryCollection":{for(h=0;h<y.geometries.length;h++)if(s(y.geometries[h],dt,A,H,X)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}dt++}}function Xo(i,s){Ur(i,function(u,h,f,y,E){var k=u===null?null:u.type;switch(k){case null:case"Point":case"LineString":case"Polygon":return s(Ye(u,f,{bbox:y,id:E}),h,0)===!1?!1:void 0}var P;switch(k){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var A=0;A<u.coordinates.length;A++){var H=u.coordinates[A],X={type:P,coordinates:H};if(s(Ye(X,f),h,A)===!1)return!1}})}function eo(i){if(!i)throw new Error("geojson is required");var s=[];return Xo(i,function(u){hs(u,s)}),tn(s)}function hs(i,s){var u=[],h=i.geometry;if(h!==null){switch(h.type){case"Polygon":u=Si(h);break;case"LineString":u=[Si(h)]}u.forEach(function(f){var y=Lo(f,i.properties);y.forEach(function(E){E.id=s.length,s.push(E)})})}}function Lo(i,s){var u=[];return i.reduce(function(h,f){var y=Vi([h,f],s);return y.bbox=Is(h,f),u.push(y),f}),u}function Is(i,s){var u=i[0],h=i[1],f=s[0],y=s[1],E=u<f?u:f,k=h<y?h:y,P=u>f?u:f,A=h>y?h:y;return[E,k,P,A]}var Ti=eo,no=nt(ce(),1);function cs(i,s){var u={},h=[];if(i.type==="LineString"&&(i=Ye(i)),s.type==="LineString"&&(s=Ye(s)),i.type==="Feature"&&s.type==="Feature"&&i.geometry!==null&&s.geometry!==null&&i.geometry.type==="LineString"&&s.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&s.geometry.coordinates.length===2){var f=io(i,s);return f&&h.push(f),tn(h)}var y=(0,no.default)();return y.load(Ti(s)),Un(Ti(i),function(E){Un(y.search(E),function(k){var P=io(E,k);if(P){var A=Si(P).join(",");u[A]||(u[A]=!0,h.push(P))}})}),tn(h)}function io(i,s){var u=Si(i),h=Si(s);if(u.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(h.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var f=u[0][0],y=u[0][1],E=u[1][0],k=u[1][1],P=h[0][0],A=h[0][1],H=h[1][0],X=h[1][1],dt=(X-A)*(E-f)-(H-P)*(k-y),ot=(H-P)*(y-A)-(X-A)*(f-P),Et=(E-f)*(y-A)-(k-y)*(f-P);if(dt===0)return null;var Bt=ot/dt,Kt=Et/dt;if(Bt>=0&&Bt<=1&&Kt>=0&&Kt<=1){var Re=f+Bt*(E-f),q=y+Bt*(k-y);return Pi([Re,q])}return null}var vr=cs,hi=nt(ce(),1);function Wo(i,s,u){u===void 0&&(u={});var h=li(i),f=li(s),y=qn(f[1]-h[1]),E=qn(f[0]-h[0]),k=qn(h[1]),P=qn(f[1]),A=Math.pow(Math.sin(y/2),2)+Math.pow(Math.sin(E/2),2)*Math.cos(k)*Math.cos(P);return Ho(2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A)),u.units)}var Jn=Wo;function fs(i){var s=i[0],u=i[1],h=i[2],f=i[3],y=Jn(i.slice(0,2),[h,u]),E=Jn(i.slice(0,2),[s,f]);if(y>=E){var k=(u+f)/2;return[s,k-(h-s)/2,h,k+(h-s)/2]}else{var P=(s+h)/2;return[P-(f-u)/2,u,P+(f-u)/2,f]}}var Ai=fs;function Zr(i){var s=[1/0,1/0,-1/0,-1/0];return wo(i,function(u){s[0]>u[0]&&(s[0]=u[0]),s[1]>u[1]&&(s[1]=u[1]),s[2]<u[0]&&(s[2]=u[0]),s[3]<u[1]&&(s[3]=u[1])}),s}Zr.default=Zr;var Vr=Zr;function ar(i,s){s===void 0&&(s={});var u=s.precision,h=s.coordinates,f=s.mutate;if(u=u==null||isNaN(u)?6:u,h=h==null||isNaN(h)?3:h,!i)throw new Error("<geojson> is required");if(typeof u!="number")throw new Error("<precision> must be a number");if(typeof h!="number")throw new Error("<coordinates> must be a number");(f===!1||f===void 0)&&(i=JSON.parse(JSON.stringify(i)));var y=Math.pow(10,u);return wo(i,function(E){ko(E,y,h)}),i}function ko(i,s,u){i.length>u&&i.splice(u,i.length);for(var h=0;h<i.length;h++)i[h]=Math.round(i[h]*s)/s;return i}var xo=ar;function vn(i,s,u){if(u===void 0&&(u={}),u.final===!0)return xn(i,s);var h=li(i),f=li(s),y=qn(h[0]),E=qn(f[0]),k=qn(h[1]),P=qn(f[1]),A=Math.sin(E-y)*Math.cos(P),H=Math.cos(k)*Math.sin(P)-Math.sin(k)*Math.cos(P)*Math.cos(E-y);return to(Math.atan2(A,H))}function xn(i,s){var u=vn(s,i);return u=(u+180)%360,u}function o(i,s,u,h){h===void 0&&(h={});var f=li(i),y=qn(f[0]),E=qn(f[1]),k=qn(u),P=jo(s,h.units),A=Math.asin(Math.sin(E)*Math.cos(P)+Math.cos(E)*Math.sin(P)*Math.cos(k)),H=y+Math.atan2(Math.sin(k)*Math.sin(P)*Math.cos(E),Math.cos(P)-Math.sin(E)*Math.sin(A)),X=to(H),dt=to(A);return Pi([X,dt],h.properties)}function t(i,s,u){u===void 0&&(u={});var h=Pi([1/0,1/0],{dist:1/0}),f=0;return Xo(i,function(y){for(var E=Si(y),k=0;k<E.length-1;k++){var P=Pi(E[k]);P.properties.dist=Jn(s,P,u);var A=Pi(E[k+1]);A.properties.dist=Jn(s,A,u);var H=Jn(P,A,u),X=Math.max(P.properties.dist,A.properties.dist),dt=vn(P,A),ot=o(s,X,dt+90,u),Et=o(s,X,dt-90,u),Bt=vr(Vi([ot.geometry.coordinates,Et.geometry.coordinates]),Vi([P.geometry.coordinates,A.geometry.coordinates])),Kt=null;Bt.features.length>0&&(Kt=Bt.features[0],Kt.properties.dist=Jn(s,Kt,u),Kt.properties.location=f+Jn(P,Kt,u)),P.properties.dist<h.properties.dist&&(h=P,h.properties.index=k,h.properties.location=f),A.properties.dist<h.properties.dist&&(h=A,h.properties.index=k+1,h.properties.location=f+H),Kt&&Kt.properties.dist<h.properties.dist&&(h=Kt,h.properties.index=k),f+=H}}),h}var e=t;function r(i,s){if(!i)throw new Error("line is required");if(!s)throw new Error("splitter is required");var u=yr(i),h=yr(s);if(u!=="LineString")throw new Error("line must be LineString");if(h==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(h==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var f=xo(s,{precision:7});switch(h){case"Point":return g(i,f);case"MultiPoint":return l(i,f);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return l(i,vr(i,f))}}function l(i,s){var u=[],h=(0,hi.default)();return Xo(s,function(f){if(u.forEach(function(k,P){k.id=P}),!u.length)u=g(i,f).features,u.forEach(function(k){k.bbox||(k.bbox=Ai(Vr(k)))}),h.load(tn(u));else{var y=h.search(f);if(y.features.length){var E=v(f,y);u=u.filter(function(k){return k.id!==E.id}),h.remove(E),Un(g(E,f),function(k){u.push(k),h.insert(k)})}}}),tn(u)}function g(i,s){var u=[],h=Si(i)[0],f=Si(i)[i.geometry.coordinates.length-1];if(b(h,li(s))||b(f,li(s)))return tn([i]);var y=(0,hi.default)(),E=Ti(i);y.load(E);var k=y.search(s);if(!k.features.length)return tn([i]);var P=v(s,k),A=[h],H=ls(E,function(X,dt,ot){var Et=Si(dt)[1],Bt=li(s);return ot===P.id?(X.push(Bt),u.push(Vi(X)),b(Bt,Et)?[Bt]:[Bt,Et]):(X.push(Et),X)},A);return H.length>1&&u.push(Vi(H)),tn(u)}function v(i,s){if(!s.features.length)throw new Error("lines must contain features");if(s.features.length===1)return s.features[0];var u,h=1/0;return Un(s,function(f){var y=e(f,i),E=y.properties.dist;E<h&&(u=f,h=E)}),u}function b(i,s){return i[0]===s[0]&&i[1]===s[1]}var R=r;function z(i,s,u){if(u===void 0&&(u={}),!i)throw new Error("point is required");if(!s)throw new Error("polygon is required");var h=li(i),f=Sn(s),y=f.type,E=s.bbox,k=f.coordinates;if(E&&lt(h,E)===!1)return!1;y==="Polygon"&&(k=[k]);for(var P=!1,A=0;A<k.length&&!P;A++)if(et(h,k[A][0],u.ignoreBoundary)){for(var H=!1,X=1;X<k[A].length&&!H;)et(h,k[A][X],!u.ignoreBoundary)&&(H=!0),X++;H||(P=!0)}return P}function et(i,s,u){var h=!1;s[0][0]===s[s.length-1][0]&&s[0][1]===s[s.length-1][1]&&(s=s.slice(0,s.length-1));for(var f=0,y=s.length-1;f<s.length;y=f++){var E=s[f][0],k=s[f][1],P=s[y][0],A=s[y][1],H=i[1]*(E-P)+k*(P-i[0])+A*(i[0]-E)===0&&(E-i[0])*(P-i[0])<=0&&(k-i[1])*(A-i[1])<=0;if(H)return!u;var X=k>i[1]!=A>i[1]&&i[0]<(P-E)*(i[1]-k)/(A-k)+E;X&&(h=!h)}return h}function lt(i,s){return s[0]<=i[0]&&s[1]<=i[1]&&s[2]>=i[0]&&s[3]>=i[1]}function kt(i,s,u){u===void 0&&(u={});for(var h=li(i),f=Si(s),y=0;y<f.length-1;y++){var E=!1;if(u.ignoreEndVertices&&(y===0&&(E="start"),y===f.length-2&&(E="end"),y===0&&y+1===f.length-1&&(E="both")),Ot(f[y],f[y+1],h,E,typeof u.epsilon>"u"?null:u.epsilon))return!0}return!1}function Ot(i,s,u,h,f){var y=u[0],E=u[1],k=i[0],P=i[1],A=s[0],H=s[1],X=u[0]-k,dt=u[1]-P,ot=A-k,Et=H-P,Bt=X*Et-dt*ot;if(f!==null){if(Math.abs(Bt)>f)return!1}else if(Bt!==0)return!1;if(h){if(h==="start")return Math.abs(ot)>=Math.abs(Et)?ot>0?k<y&&y<=A:A<=y&&y<k:Et>0?P<E&&E<=H:H<=E&&E<P;if(h==="end")return Math.abs(ot)>=Math.abs(Et)?ot>0?k<=y&&y<A:A<y&&y<=k:Et>0?P<=E&&E<H:H<E&&E<=P;if(h==="both")return Math.abs(ot)>=Math.abs(Et)?ot>0?k<y&&y<A:A<y&&y<k:Et>0?P<E&&E<H:H<E&&E<P}else return Math.abs(ot)>=Math.abs(Et)?ot>0?k<=y&&y<=A:A<=y&&y<=k:Et>0?P<=E&&E<=H:H<=E&&E<=P;return!1}var Yt=kt;function ne(i,s){var u=Sn(i),h=Sn(s),f=u.type,y=h.type,E=u.coordinates,k=h.coordinates;switch(f){case"Point":switch(y){case"Point":return oo(E,k);default:throw new Error("feature2 "+y+" geometry not supported")}case"MultiPoint":switch(y){case"Point":return Ce(u,h);case"MultiPoint":return we(u,h);default:throw new Error("feature2 "+y+" geometry not supported")}case"LineString":switch(y){case"Point":return Yt(h,u,{ignoreEndVertices:!0});case"LineString":return dn(u,h);case"MultiPoint":return Ue(u,h);default:throw new Error("feature2 "+y+" geometry not supported")}case"Polygon":switch(y){case"Point":return z(h,u,{ignoreBoundary:!0});case"LineString":return ur(u,h);case"Polygon":return ro(u,h);case"MultiPoint":return We(u,h);default:throw new Error("feature2 "+y+" geometry not supported")}default:throw new Error("feature1 "+f+" geometry not supported")}}function Ce(i,s){var u,h=!1;for(u=0;u<i.coordinates.length;u++)if(oo(i.coordinates[u],s.coordinates)){h=!0;break}return h}function we(i,s){for(var u=0,h=s.coordinates;u<h.length;u++){for(var f=h[u],y=!1,E=0,k=i.coordinates;E<k.length;E++){var P=k[E];if(oo(f,P)){y=!0;break}}if(!y)return!1}return!0}function Ue(i,s){for(var u=!1,h=0,f=s.coordinates;h<f.length;h++){var y=f[h];if(Yt(y,i,{ignoreEndVertices:!0})&&(u=!0),!Yt(y,i))return!1}return!!u}function We(i,s){for(var u=0,h=s.coordinates;u<h.length;u++){var f=h[u];if(!z(f,i,{ignoreBoundary:!0}))return!1}return!0}function dn(i,s){for(var u=!1,h=0,f=s.coordinates;h<f.length;h++){var y=f[h];if(Yt({type:"Point",coordinates:y},i,{ignoreEndVertices:!0})&&(u=!0),!Yt({type:"Point",coordinates:y},i,{ignoreEndVertices:!1}))return!1}return u}function ur(i,s){var u=!1,h=0,f=Vr(i),y=Vr(s);if(!ci(f,y))return!1;for(h;h<s.coordinates.length-1;h++){var E=Ko(s.coordinates[h],s.coordinates[h+1]);if(z({type:"Point",coordinates:E},i,{ignoreBoundary:!0})){u=!0;break}}return u}function ro(i,s){if(i.type==="Feature"&&i.geometry===null||s.type==="Feature"&&s.geometry===null)return!1;var u=Vr(i),h=Vr(s);if(!ci(u,h))return!1;for(var f=Sn(s).coordinates,y=0,E=f;y<E.length;y++)for(var k=E[y],P=0,A=k;P<A.length;P++){var H=A[P];if(!z(H,i))return!1}return!0}function ci(i,s){return!(i[0]>s[0]||i[2]<s[2]||i[1]>s[1]||i[3]<s[3])}function oo(i,s){return i[0]===s[0]&&i[1]===s[1]}function Ko(i,s){return[(i[0]+s[0])/2,(i[1]+s[1])/2]}var Yr=nt(Ze()),Jo=i=>()=>i,Er=i=>{let s=i?(u,h)=>h.minus(u).abs().isLessThanOrEqualTo(i):Jo(!1);return(u,h)=>s(u,h)?0:u.comparedTo(h)};function wr(i){let s=i?(u,h,f,y,E)=>u.exponentiatedBy(2).isLessThanOrEqualTo(y.minus(h).exponentiatedBy(2).plus(E.minus(f).exponentiatedBy(2)).times(i)):Jo(!1);return(u,h,f)=>{let y=u.x,E=u.y,k=f.x,P=f.y,A=E.minus(P).times(h.x.minus(k)).minus(y.minus(k).times(h.y.minus(P)));return s(A,y,E,k,P)?0:A.comparedTo(0)}}var bo=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ds=Math.ceil,Ii=Math.floor,Zn="[BigNumber Error] ",Rs=Zn+"Number primitive has more than 15 significant digits: ",Ri=1e14,_e=14,gs=9007199254740991,Ns=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Lr=1e7,gn=1e9;function ua(i){var s,u,h,f=q.prototype={constructor:q,toString:null,valueOf:null},y=new q(1),E=20,k=4,P=-7,A=21,H=-1e7,X=1e7,dt=!1,ot=1,Et=0,Bt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},Kt="0123456789abcdefghijklmnopqrstuvwxyz",Re=!0;function q(M,N){var O,B,D,F,Q,J,it,ht,ut=this;if(!(ut instanceof q))return new q(M,N);if(N==null){if(M&&M._isBigNumber===!0){ut.s=M.s,!M.c||M.e>X?ut.c=ut.e=null:M.e<H?ut.c=[ut.e=0]:(ut.e=M.e,ut.c=M.c.slice());return}if((J=typeof M=="number")&&M*0==0){if(ut.s=1/M<0?(M=-M,-1):1,M===~~M){for(F=0,Q=M;Q>=10;Q/=10,F++);F>X?ut.c=ut.e=null:(ut.e=F,ut.c=[M]);return}ht=String(M)}else{if(!bo.test(ht=String(M)))return h(ut,ht,J);ut.s=ht.charCodeAt(0)==45?(ht=ht.slice(1),-1):1}(F=ht.indexOf("."))>-1&&(ht=ht.replace(".","")),(Q=ht.search(/e/i))>0?(F<0&&(F=Q),F+=+ht.slice(Q+1),ht=ht.substring(0,Q)):F<0&&(F=ht.length)}else{if(_(N,2,Kt.length,"Base"),N==10&&Re)return ut=new q(M),st(ut,E+ut.e+1,k);if(ht=String(M),J=typeof M=="number"){if(M*0!=0)return h(ut,ht,J,N);if(ut.s=1/M<0?(ht=ht.slice(1),-1):1,q.DEBUG&&ht.replace(/^0\.0*|\./,"").length>15)throw Error(Rs+M)}else ut.s=ht.charCodeAt(0)===45?(ht=ht.slice(1),-1):1;for(O=Kt.slice(0,N),F=Q=0,it=ht.length;Q<it;Q++)if(O.indexOf(B=ht.charAt(Q))<0){if(B=="."){if(Q>F){F=it;continue}}else if(!D&&(ht==ht.toUpperCase()&&(ht=ht.toLowerCase())||ht==ht.toLowerCase()&&(ht=ht.toUpperCase()))){D=!0,Q=-1,F=0;continue}return h(ut,String(M),J,N)}J=!1,ht=u(ht,N,10,ut.s),(F=ht.indexOf("."))>-1?ht=ht.replace(".",""):F=ht.length}for(Q=0;ht.charCodeAt(Q)===48;Q++);for(it=ht.length;ht.charCodeAt(--it)===48;);if(ht=ht.slice(Q,++it)){if(it-=Q,J&&q.DEBUG&&it>15&&(M>gs||M!==Ii(M)))throw Error(Rs+ut.s*M);if((F=F-Q-1)>X)ut.c=ut.e=null;else if(F<H)ut.c=[ut.e=0];else{if(ut.e=F,ut.c=[],Q=(F+1)%_e,F<0&&(Q+=_e),Q<it){for(Q&&ut.c.push(+ht.slice(0,Q)),it-=_e;Q<it;)ut.c.push(+ht.slice(Q,Q+=_e));Q=_e-(ht=ht.slice(Q)).length}else Q-=it;for(;Q--;ht+="0");ut.c.push(+ht)}}else ut.c=[ut.e=0]}q.clone=ua,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(M){var N,O;if(M!=null)if(typeof M=="object"){if(M.hasOwnProperty(N="DECIMAL_PLACES")&&(O=M[N],_(O,0,gn,N),E=O),M.hasOwnProperty(N="ROUNDING_MODE")&&(O=M[N],_(O,0,8,N),k=O),M.hasOwnProperty(N="EXPONENTIAL_AT")&&(O=M[N],O&&O.pop?(_(O[0],-gn,0,N),_(O[1],0,gn,N),P=O[0],A=O[1]):(_(O,-gn,gn,N),P=-(A=O<0?-O:O))),M.hasOwnProperty(N="RANGE"))if(O=M[N],O&&O.pop)_(O[0],-gn,-1,N),_(O[1],1,gn,N),H=O[0],X=O[1];else if(_(O,-gn,gn,N),O)H=-(X=O<0?-O:O);else throw Error(Zn+N+" cannot be zero: "+O);if(M.hasOwnProperty(N="CRYPTO"))if(O=M[N],O===!!O)if(O)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))dt=O;else throw dt=!O,Error(Zn+"crypto unavailable");else dt=O;else throw Error(Zn+N+" not true or false: "+O);if(M.hasOwnProperty(N="MODULO_MODE")&&(O=M[N],_(O,0,9,N),ot=O),M.hasOwnProperty(N="POW_PRECISION")&&(O=M[N],_(O,0,gn,N),Et=O),M.hasOwnProperty(N="FORMAT"))if(O=M[N],typeof O=="object")Bt=O;else throw Error(Zn+N+" not an object: "+O);if(M.hasOwnProperty(N="ALPHABET"))if(O=M[N],typeof O=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(O))Re=O.slice(0,10)=="0123456789",Kt=O;else throw Error(Zn+N+" invalid: "+O)}else throw Error(Zn+"Object expected: "+M);return{DECIMAL_PLACES:E,ROUNDING_MODE:k,EXPONENTIAL_AT:[P,A],RANGE:[H,X],CRYPTO:dt,MODULO_MODE:ot,POW_PRECISION:Et,FORMAT:Bt,ALPHABET:Kt}},q.isBigNumber=function(M){if(!M||M._isBigNumber!==!0)return!1;if(!q.DEBUG)return!0;var N,O,B=M.c,D=M.e,F=M.s;t:if({}.toString.call(B)=="[object Array]"){if((F===1||F===-1)&&D>=-gn&&D<=gn&&D===Ii(D)){if(B[0]===0){if(D===0&&B.length===1)return!0;break t}if(N=(D+1)%_e,N<1&&(N+=_e),String(B[0]).length==N){for(N=0;N<B.length;N++)if(O=B[N],O<0||O>=Ri||O!==Ii(O))break t;if(O!==0)return!0}}}else if(B===null&&D===null&&(F===null||F===1||F===-1))return!0;throw Error(Zn+"Invalid BigNumber: "+M)},q.maximum=q.max=function(){return rt(arguments,-1)},q.minimum=q.min=function(){return rt(arguments,1)},q.random=function(){var M=9007199254740992,N=Math.random()*M&2097151?function(){return Ii(Math.random()*M)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(O){var B,D,F,Q,J,it=0,ht=[],ut=new q(y);if(O==null?O=E:_(O,0,gn),Q=ds(O/_e),dt)if(crypto.getRandomValues){for(B=crypto.getRandomValues(new Uint32Array(Q*=2));it<Q;)J=B[it]*131072+(B[it+1]>>>11),J>=9e15?(D=crypto.getRandomValues(new Uint32Array(2)),B[it]=D[0],B[it+1]=D[1]):(ht.push(J%1e14),it+=2);it=Q/2}else if(crypto.randomBytes){for(B=crypto.randomBytes(Q*=7);it<Q;)J=(B[it]&31)*281474976710656+B[it+1]*1099511627776+B[it+2]*4294967296+B[it+3]*16777216+(B[it+4]<<16)+(B[it+5]<<8)+B[it+6],J>=9e15?crypto.randomBytes(7).copy(B,it):(ht.push(J%1e14),it+=7);it=Q/7}else throw dt=!1,Error(Zn+"crypto unavailable");if(!dt)for(;it<Q;)J=N(),J<9e15&&(ht[it++]=J%1e14);for(Q=ht[--it],O%=_e,Q&&O&&(J=Ns[_e-O],ht[it]=Ii(Q/J)*J);ht[it]===0;ht.pop(),it--);if(it<0)ht=[F=0];else{for(F=-1;ht[0]===0;ht.splice(0,1),F-=_e);for(it=1,J=ht[0];J>=10;J/=10,it++);it<_e&&(F-=_e-it)}return ut.e=F,ut.c=ht,ut}}(),q.sum=function(){for(var M=1,N=arguments,O=new q(N[0]);M<N.length;)O=O.plus(N[M++]);return O},u=function(){var M="0123456789";function N(O,B,D,F){for(var Q,J=[0],it,ht=0,ut=O.length;ht<ut;){for(it=J.length;it--;J[it]*=B);for(J[0]+=F.indexOf(O.charAt(ht++)),Q=0;Q<J.length;Q++)J[Q]>D-1&&(J[Q+1]==null&&(J[Q+1]=0),J[Q+1]+=J[Q]/D|0,J[Q]%=D)}return J.reverse()}return function(O,B,D,F,Q){var J,it,ht,ut,xt,Wt,$t,re,Ve=O.indexOf("."),He=E,Fe=k;for(Ve>=0&&(ut=Et,Et=0,O=O.replace(".",""),re=new q(B),Wt=re.pow(O.length-Ve),Et=ut,re.c=N(j(a(Wt.c),Wt.e,"0"),10,D,M),re.e=re.c.length),$t=N(O,B,D,Q?(J=Kt,M):(J=M,Kt)),ht=ut=$t.length;$t[--ut]==0;$t.pop());if(!$t[0])return J.charAt(0);if(Ve<0?--ht:(Wt.c=$t,Wt.e=ht,Wt.s=F,Wt=s(Wt,re,He,Fe,D),$t=Wt.c,xt=Wt.r,ht=Wt.e),it=ht+He+1,Ve=$t[it],ut=D/2,xt=xt||it<0||$t[it+1]!=null,xt=Fe<4?(Ve!=null||xt)&&(Fe==0||Fe==(Wt.s<0?3:2)):Ve>ut||Ve==ut&&(Fe==4||xt||Fe==6&&$t[it-1]&1||Fe==(Wt.s<0?8:7)),it<1||!$t[0])O=xt?j(J.charAt(1),-He,J.charAt(0)):J.charAt(0);else{if($t.length=it,xt)for(--D;++$t[--it]>D;)$t[it]=0,it||(++ht,$t=[1].concat($t));for(ut=$t.length;!$t[--ut];);for(Ve=0,O="";Ve<=ut;O+=J.charAt($t[Ve++]));O=j(O,ht,J.charAt(0))}return O}}(),s=function(){function M(B,D,F){var Q,J,it,ht,ut=0,xt=B.length,Wt=D%Lr,$t=D/Lr|0;for(B=B.slice();xt--;)it=B[xt]%Lr,ht=B[xt]/Lr|0,Q=$t*it+ht*Wt,J=Wt*it+Q%Lr*Lr+ut,ut=(J/F|0)+(Q/Lr|0)+$t*ht,B[xt]=J%F;return ut&&(B=[ut].concat(B)),B}function N(B,D,F,Q){var J,it;if(F!=Q)it=F>Q?1:-1;else for(J=it=0;J<F;J++)if(B[J]!=D[J]){it=B[J]>D[J]?1:-1;break}return it}function O(B,D,F,Q){for(var J=0;F--;)B[F]-=J,J=B[F]<D[F]?1:0,B[F]=J*Q+B[F]-D[F];for(;!B[0]&&B.length>1;B.splice(0,1));}return function(B,D,F,Q,J){var it,ht,ut,xt,Wt,$t,re,Ve,He,Fe,je,Qn,ma,nu,iu,Hr,zs,lr=B.s==D.s?1:-1,fi=B.c,un=D.c;if(!fi||!fi[0]||!un||!un[0])return new q(!B.s||!D.s||(fi?un&&fi[0]==un[0]:!un)?NaN:fi&&fi[0]==0||!un?lr*0:lr/0);for(Ve=new q(lr),He=Ve.c=[],ht=B.e-D.e,lr=F+ht+1,J||(J=Ri,ht=n(B.e/_e)-n(D.e/_e),lr=lr/_e|0),ut=0;un[ut]==(fi[ut]||0);ut++);if(un[ut]>(fi[ut]||0)&&ht--,lr<0)He.push(1),xt=!0;else{for(nu=fi.length,Hr=un.length,ut=0,lr+=2,Wt=Ii(J/(un[0]+1)),Wt>1&&(un=M(un,Wt,J),fi=M(fi,Wt,J),Hr=un.length,nu=fi.length),ma=Hr,Fe=fi.slice(0,Hr),je=Fe.length;je<Hr;Fe[je++]=0);zs=un.slice(),zs=[0].concat(zs),iu=un[0],un[1]>=J/2&&iu++;do{if(Wt=0,it=N(un,Fe,Hr,je),it<0){if(Qn=Fe[0],Hr!=je&&(Qn=Qn*J+(Fe[1]||0)),Wt=Ii(Qn/iu),Wt>1)for(Wt>=J&&(Wt=J-1),$t=M(un,Wt,J),re=$t.length,je=Fe.length;N($t,Fe,re,je)==1;)Wt--,O($t,Hr<re?zs:un,re,J),re=$t.length,it=1;else Wt==0&&(it=Wt=1),$t=un.slice(),re=$t.length;if(re<je&&($t=[0].concat($t)),O(Fe,$t,je,J),je=Fe.length,it==-1)for(;N(un,Fe,Hr,je)<1;)Wt++,O(Fe,Hr<je?zs:un,je,J),je=Fe.length}else it===0&&(Wt++,Fe=[0]);He[ut++]=Wt,Fe[0]?Fe[je++]=fi[ma]||0:(Fe=[fi[ma]],je=1)}while((ma++<nu||Fe[0]!=null)&&lr--);xt=Fe[0]!=null,He[0]||He.splice(0,1)}if(J==Ri){for(ut=1,lr=He[0];lr>=10;lr/=10,ut++);st(Ve,F+(Ve.e=ut+ht*_e-1)+1,Q,xt)}else Ve.e=ht,Ve.r=+xt;return Ve}}();function K(M,N,O,B){var D,F,Q,J,it;if(O==null?O=k:_(O,0,8),!M.c)return M.toString();if(D=M.c[0],Q=M.e,N==null)it=a(M.c),it=B==1||B==2&&(Q<=P||Q>=A)?I(it,Q):j(it,Q,"0");else if(M=st(new q(M),N,O),F=M.e,it=a(M.c),J=it.length,B==1||B==2&&(N<=F||F<=P)){for(;J<N;it+="0",J++);it=I(it,F)}else if(N-=Q,it=j(it,F,"0"),F+1>J){if(--N>0)for(it+=".";N--;it+="0");}else if(N+=F-J,N>0)for(F+1==J&&(it+=".");N--;it+="0");return M.s<0&&D?"-"+it:it}function rt(M,N){for(var O,B,D=1,F=new q(M[0]);D<M.length;D++)B=new q(M[D]),(!B.s||(O=c(F,B))===N||O===0&&F.s===N)&&(F=B);return F}function mt(M,N,O){for(var B=1,D=N.length;!N[--D];N.pop());for(D=N[0];D>=10;D/=10,B++);return(O=B+O*_e-1)>X?M.c=M.e=null:O<H?M.c=[M.e=0]:(M.e=O,M.c=N),M}h=function(){var M=/^(-?)0([xbo])(?=\w[\w.]*$)/i,N=/^([^.]+)\.$/,O=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,D=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(F,Q,J,it){var ht,ut=J?Q:Q.replace(D,"");if(B.test(ut))F.s=isNaN(ut)?null:ut<0?-1:1;else{if(!J&&(ut=ut.replace(M,function(xt,Wt,$t){return ht=($t=$t.toLowerCase())=="x"?16:$t=="b"?2:8,!it||it==ht?Wt:xt}),it&&(ht=it,ut=ut.replace(N,"$1").replace(O,"0.$1")),Q!=ut))return new q(ut,ht);if(q.DEBUG)throw Error(Zn+"Not a"+(it?" base "+it:"")+" number: "+Q);F.s=null}F.c=F.e=null}}();function st(M,N,O,B){var D,F,Q,J,it,ht,ut,xt=M.c,Wt=Ns;if(xt){t:{for(D=1,J=xt[0];J>=10;J/=10,D++);if(F=N-D,F<0)F+=_e,Q=N,it=xt[ht=0],ut=Ii(it/Wt[D-Q-1]%10);else if(ht=ds((F+1)/_e),ht>=xt.length)if(B){for(;xt.length<=ht;xt.push(0));it=ut=0,D=1,F%=_e,Q=F-_e+1}else break t;else{for(it=J=xt[ht],D=1;J>=10;J/=10,D++);F%=_e,Q=F-_e+D,ut=Q<0?0:Ii(it/Wt[D-Q-1]%10)}if(B=B||N<0||xt[ht+1]!=null||(Q<0?it:it%Wt[D-Q-1]),B=O<4?(ut||B)&&(O==0||O==(M.s<0?3:2)):ut>5||ut==5&&(O==4||B||O==6&&(F>0?Q>0?it/Wt[D-Q]:0:xt[ht-1])%10&1||O==(M.s<0?8:7)),N<1||!xt[0])return xt.length=0,B?(N-=M.e+1,xt[0]=Wt[(_e-N%_e)%_e],M.e=-N||0):xt[0]=M.e=0,M;if(F==0?(xt.length=ht,J=1,ht--):(xt.length=ht+1,J=Wt[_e-F],xt[ht]=Q>0?Ii(it/Wt[D-Q]%Wt[Q])*J:0),B)for(;;)if(ht==0){for(F=1,Q=xt[0];Q>=10;Q/=10,F++);for(Q=xt[0]+=J,J=1;Q>=10;Q/=10,J++);F!=J&&(M.e++,xt[0]==Ri&&(xt[0]=1));break}else{if(xt[ht]+=J,xt[ht]!=Ri)break;xt[ht--]=0,J=1}for(F=xt.length;xt[--F]===0;xt.pop());}M.e>X?M.c=M.e=null:M.e<H&&(M.c=[M.e=0])}return M}function gt(M){var N,O=M.e;return O===null?M.toString():(N=a(M.c),N=O<=P||O>=A?I(N,O):j(N,O,"0"),M.s<0?"-"+N:N)}return f.absoluteValue=f.abs=function(){var M=new q(this);return M.s<0&&(M.s=1),M},f.comparedTo=function(M,N){return c(this,new q(M,N))},f.decimalPlaces=f.dp=function(M,N){var O,B,D,F=this;if(M!=null)return _(M,0,gn),N==null?N=k:_(N,0,8),st(new q(F),M+F.e+1,N);if(!(O=F.c))return null;if(B=((D=O.length-1)-n(this.e/_e))*_e,D=O[D])for(;D%10==0;D/=10,B--);return B<0&&(B=0),B},f.dividedBy=f.div=function(M,N){return s(this,new q(M,N),E,k)},f.dividedToIntegerBy=f.idiv=function(M,N){return s(this,new q(M,N),0,1)},f.exponentiatedBy=f.pow=function(M,N){var O,B,D,F,Q,J,it,ht,ut,xt=this;if(M=new q(M),M.c&&!M.isInteger())throw Error(Zn+"Exponent not an integer: "+gt(M));if(N!=null&&(N=new q(N)),J=M.e>14,!xt.c||!xt.c[0]||xt.c[0]==1&&!xt.e&&xt.c.length==1||!M.c||!M.c[0])return ut=new q(Math.pow(+gt(xt),J?M.s*(2-w(M)):+gt(M))),N?ut.mod(N):ut;if(it=M.s<0,N){if(N.c?!N.c[0]:!N.s)return new q(NaN);B=!it&&xt.isInteger()&&N.isInteger(),B&&(xt=xt.mod(N))}else{if(M.e>9&&(xt.e>0||xt.e<-1||(xt.e==0?xt.c[0]>1||J&&xt.c[1]>=24e7:xt.c[0]<8e13||J&&xt.c[0]<=9999975e7)))return F=xt.s<0&&w(M)?-0:0,xt.e>-1&&(F=1/F),new q(it?1/F:F);Et&&(F=ds(Et/_e+2))}for(J?(O=new q(.5),it&&(M.s=1),ht=w(M)):(D=Math.abs(+gt(M)),ht=D%2),ut=new q(y);;){if(ht){if(ut=ut.times(xt),!ut.c)break;F?ut.c.length>F&&(ut.c.length=F):B&&(ut=ut.mod(N))}if(D){if(D=Ii(D/2),D===0)break;ht=D%2}else if(M=M.times(O),st(M,M.e+1,1),M.e>14)ht=w(M);else{if(D=+gt(M),D===0)break;ht=D%2}xt=xt.times(xt),F?xt.c&&xt.c.length>F&&(xt.c.length=F):B&&(xt=xt.mod(N))}return B?ut:(it&&(ut=y.div(ut)),N?ut.mod(N):F?st(ut,Et,k,Q):ut)},f.integerValue=function(M){var N=new q(this);return M==null?M=k:_(M,0,8),st(N,N.e+1,M)},f.isEqualTo=f.eq=function(M,N){return c(this,new q(M,N))===0},f.isFinite=function(){return!!this.c},f.isGreaterThan=f.gt=function(M,N){return c(this,new q(M,N))>0},f.isGreaterThanOrEqualTo=f.gte=function(M,N){return(N=c(this,new q(M,N)))===1||N===0},f.isInteger=function(){return!!this.c&&n(this.e/_e)>this.c.length-2},f.isLessThan=f.lt=function(M,N){return c(this,new q(M,N))<0},f.isLessThanOrEqualTo=f.lte=function(M,N){return(N=c(this,new q(M,N)))===-1||N===0},f.isNaN=function(){return!this.s},f.isNegative=function(){return this.s<0},f.isPositive=function(){return this.s>0},f.isZero=function(){return!!this.c&&this.c[0]==0},f.minus=function(M,N){var O,B,D,F,Q=this,J=Q.s;if(M=new q(M,N),N=M.s,!J||!N)return new q(NaN);if(J!=N)return M.s=-N,Q.plus(M);var it=Q.e/_e,ht=M.e/_e,ut=Q.c,xt=M.c;if(!it||!ht){if(!ut||!xt)return ut?(M.s=-N,M):new q(xt?Q:NaN);if(!ut[0]||!xt[0])return xt[0]?(M.s=-N,M):new q(ut[0]?Q:k==3?-0:0)}if(it=n(it),ht=n(ht),ut=ut.slice(),J=it-ht){for((F=J<0)?(J=-J,D=ut):(ht=it,D=xt),D.reverse(),N=J;N--;D.push(0));D.reverse()}else for(B=(F=(J=ut.length)<(N=xt.length))?J:N,J=N=0;N<B;N++)if(ut[N]!=xt[N]){F=ut[N]<xt[N];break}if(F&&(D=ut,ut=xt,xt=D,M.s=-M.s),N=(B=xt.length)-(O=ut.length),N>0)for(;N--;ut[O++]=0);for(N=Ri-1;B>J;){if(ut[--B]<xt[B]){for(O=B;O&&!ut[--O];ut[O]=N);--ut[O],ut[B]+=Ri}ut[B]-=xt[B]}for(;ut[0]==0;ut.splice(0,1),--ht);return ut[0]?mt(M,ut,ht):(M.s=k==3?-1:1,M.c=[M.e=0],M)},f.modulo=f.mod=function(M,N){var O,B,D=this;return M=new q(M,N),!D.c||!M.s||M.c&&!M.c[0]?new q(NaN):!M.c||D.c&&!D.c[0]?new q(D):(ot==9?(B=M.s,M.s=1,O=s(D,M,0,3),M.s=B,O.s*=B):O=s(D,M,0,ot),M=D.minus(O.times(M)),!M.c[0]&&ot==1&&(M.s=D.s),M)},f.multipliedBy=f.times=function(M,N){var O,B,D,F,Q,J,it,ht,ut,xt,Wt,$t,re,Ve,He,Fe=this,je=Fe.c,Qn=(M=new q(M,N)).c;if(!je||!Qn||!je[0]||!Qn[0])return!Fe.s||!M.s||je&&!je[0]&&!Qn||Qn&&!Qn[0]&&!je?M.c=M.e=M.s=null:(M.s*=Fe.s,!je||!Qn?M.c=M.e=null:(M.c=[0],M.e=0)),M;for(B=n(Fe.e/_e)+n(M.e/_e),M.s*=Fe.s,it=je.length,xt=Qn.length,it<xt&&(re=je,je=Qn,Qn=re,D=it,it=xt,xt=D),D=it+xt,re=[];D--;re.push(0));for(Ve=Ri,He=Lr,D=xt;--D>=0;){for(O=0,Wt=Qn[D]%He,$t=Qn[D]/He|0,Q=it,F=D+Q;F>D;)ht=je[--Q]%He,ut=je[Q]/He|0,J=$t*ht+ut*Wt,ht=Wt*ht+J%He*He+re[F]+O,O=(ht/Ve|0)+(J/He|0)+$t*ut,re[F--]=ht%Ve;re[F]=O}return O?++B:re.splice(0,1),mt(M,re,B)},f.negated=function(){var M=new q(this);return M.s=-M.s||null,M},f.plus=function(M,N){var O,B=this,D=B.s;if(M=new q(M,N),N=M.s,!D||!N)return new q(NaN);if(D!=N)return M.s=-N,B.minus(M);var F=B.e/_e,Q=M.e/_e,J=B.c,it=M.c;if(!F||!Q){if(!J||!it)return new q(D/0);if(!J[0]||!it[0])return it[0]?M:new q(J[0]?B:D*0)}if(F=n(F),Q=n(Q),J=J.slice(),D=F-Q){for(D>0?(Q=F,O=it):(D=-D,O=J),O.reverse();D--;O.push(0));O.reverse()}for(D=J.length,N=it.length,D-N<0&&(O=it,it=J,J=O,N=D),D=0;N;)D=(J[--N]=J[N]+it[N]+D)/Ri|0,J[N]=Ri===J[N]?0:J[N]%Ri;return D&&(J=[D].concat(J),++Q),mt(M,J,Q)},f.precision=f.sd=function(M,N){var O,B,D,F=this;if(M!=null&&M!==!!M)return _(M,1,gn),N==null?N=k:_(N,0,8),st(new q(F),M,N);if(!(O=F.c))return null;if(D=O.length-1,B=D*_e+1,D=O[D]){for(;D%10==0;D/=10,B--);for(D=O[0];D>=10;D/=10,B++);}return M&&F.e+1>B&&(B=F.e+1),B},f.shiftedBy=function(M){return _(M,-gs,gs),this.times("1e"+M)},f.squareRoot=f.sqrt=function(){var M,N,O,B,D,F=this,Q=F.c,J=F.s,it=F.e,ht=E+4,ut=new q("0.5");if(J!==1||!Q||!Q[0])return new q(!J||J<0&&(!Q||Q[0])?NaN:Q?F:1/0);if(J=Math.sqrt(+gt(F)),J==0||J==1/0?(N=a(Q),(N.length+it)%2==0&&(N+="0"),J=Math.sqrt(+N),it=n((it+1)/2)-(it<0||it%2),J==1/0?N="5e"+it:(N=J.toExponential(),N=N.slice(0,N.indexOf("e")+1)+it),O=new q(N)):O=new q(J+""),O.c[0]){for(it=O.e,J=it+ht,J<3&&(J=0);;)if(D=O,O=ut.times(D.plus(s(F,D,ht,1))),a(D.c).slice(0,J)===(N=a(O.c)).slice(0,J))if(O.e<it&&--J,N=N.slice(J-3,J+1),N=="9999"||!B&&N=="4999"){if(!B&&(st(D,D.e+E+2,0),D.times(D).eq(F))){O=D;break}ht+=4,J+=4,B=1}else{(!+N||!+N.slice(1)&&N.charAt(0)=="5")&&(st(O,O.e+E+2,1),M=!O.times(O).eq(F));break}}return st(O,O.e+E+1,k,M)},f.toExponential=function(M,N){return M!=null&&(_(M,0,gn),M++),K(this,M,N,1)},f.toFixed=function(M,N){return M!=null&&(_(M,0,gn),M=M+this.e+1),K(this,M,N)},f.toFormat=function(M,N,O){var B,D=this;if(O==null)M!=null&&N&&typeof N=="object"?(O=N,N=null):M&&typeof M=="object"?(O=M,M=N=null):O=Bt;else if(typeof O!="object")throw Error(Zn+"Argument not an object: "+O);if(B=D.toFixed(M,N),D.c){var F,Q=B.split("."),J=+O.groupSize,it=+O.secondaryGroupSize,ht=O.groupSeparator||"",ut=Q[0],xt=Q[1],Wt=D.s<0,$t=Wt?ut.slice(1):ut,re=$t.length;if(it&&(F=J,J=it,it=F,re-=F),J>0&&re>0){for(F=re%J||J,ut=$t.substr(0,F);F<re;F+=J)ut+=ht+$t.substr(F,J);it>0&&(ut+=ht+$t.slice(F)),Wt&&(ut="-"+ut)}B=xt?ut+(O.decimalSeparator||"")+((it=+O.fractionGroupSize)?xt.replace(new RegExp("\\d{"+it+"}\\B","g"),"$&"+(O.fractionGroupSeparator||"")):xt):ut}return(O.prefix||"")+B+(O.suffix||"")},f.toFraction=function(M){var N,O,B,D,F,Q,J,it,ht,ut,xt,Wt,$t=this,re=$t.c;if(M!=null&&(J=new q(M),!J.isInteger()&&(J.c||J.s!==1)||J.lt(y)))throw Error(Zn+"Argument "+(J.isInteger()?"out of range: ":"not an integer: ")+gt(J));if(!re)return new q($t);for(N=new q(y),ht=O=new q(y),B=it=new q(y),Wt=a(re),F=N.e=Wt.length-$t.e-1,N.c[0]=Ns[(Q=F%_e)<0?_e+Q:Q],M=!M||J.comparedTo(N)>0?F>0?N:ht:J,Q=X,X=1/0,J=new q(Wt),it.c[0]=0;ut=s(J,N,0,1),D=O.plus(ut.times(B)),D.comparedTo(M)!=1;)O=B,B=D,ht=it.plus(ut.times(D=ht)),it=D,N=J.minus(ut.times(D=N)),J=D;return D=s(M.minus(O),B,0,1),it=it.plus(D.times(ht)),O=O.plus(D.times(B)),it.s=ht.s=$t.s,F=F*2,xt=s(ht,B,F,k).minus($t).abs().comparedTo(s(it,O,F,k).minus($t).abs())<1?[ht,B]:[it,O],X=Q,xt},f.toNumber=function(){return+gt(this)},f.toPrecision=function(M,N){return M!=null&&_(M,1,gn),K(this,M,N,2)},f.toString=function(M){var N,O=this,B=O.s,D=O.e;return D===null?B?(N="Infinity",B<0&&(N="-"+N)):N="NaN":(M==null?N=D<=P||D>=A?I(a(O.c),D):j(a(O.c),D,"0"):M===10&&Re?(O=st(new q(O),E+D+1,k),N=j(a(O.c),O.e,"0")):(_(M,2,Kt.length,"Base"),N=u(j(a(O.c),D,"0"),10,M,B,!0)),B<0&&O.c[0]&&(N="-"+N)),N},f.valueOf=f.toJSON=function(){return gt(this)},f._isBigNumber=!0,f[Symbol.toStringTag]="BigNumber",f[Symbol.for("nodejs.util.inspect.custom")]=f.valueOf,i!=null&&q.set(i),q}function n(i){var s=i|0;return i>0||i===s?s:s-1}function a(i){for(var s,u,h=1,f=i.length,y=i[0]+"";h<f;){for(s=i[h++]+"",u=_e-s.length;u--;s="0"+s);y+=s}for(f=y.length;y.charCodeAt(--f)===48;);return y.slice(0,f+1||1)}function c(i,s){var u,h,f=i.c,y=s.c,E=i.s,k=s.s,P=i.e,A=s.e;if(!E||!k)return null;if(u=f&&!f[0],h=y&&!y[0],u||h)return u?h?0:-k:E;if(E!=k)return E;if(u=E<0,h=P==A,!f||!y)return h?0:!f^u?1:-1;if(!h)return P>A^u?1:-1;for(k=(P=f.length)<(A=y.length)?P:A,E=0;E<k;E++)if(f[E]!=y[E])return f[E]>y[E]^u?1:-1;return P==A?0:P>A^u?1:-1}function _(i,s,u,h){if(i<s||i>u||i!==Ii(i))throw Error(Zn+(h||"Argument")+(typeof i=="number"?i<s||i>u?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function w(i){var s=i.c.length-1;return n(i.e/_e)==s&&i.c[s]%2!=0}function I(i,s){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(s<0?"e":"e+")+s}function j(i,s,u){var h,f;if(s<0){for(f=u+".";++s;f+=u);i=f+i}else if(h=i.length,++s>h){for(f=u,s-=h;--s;f+=u);i+=f}else s<h&&(i=i.slice(0,s)+"."+i.slice(s));return i}var ft=ua(),pt=ft,Pt=class{key;left=null;right=null;constructor(i){this.key=i}},Gt=class extends Pt{constructor(i){super(i)}},ae=class{size=0;modificationCount=0;splayCount=0;splay(i){let s=this.root;if(s==null)return this.compare(i,i),-1;let u=null,h=null,f=null,y=null,E=s,k=this.compare,P;for(;;)if(P=k(E.key,i),P>0){let A=E.left;if(A==null||(P=k(A.key,i),P>0&&(E.left=A.right,A.right=E,E=A,A=E.left,A==null)))break;u==null?h=E:u.left=E,u=E,E=A}else if(P<0){let A=E.right;if(A==null||(P=k(A.key,i),P<0&&(E.right=A.left,A.left=E,E=A,A=E.right,A==null)))break;f==null?y=E:f.right=E,f=E,E=A}else break;return f!=null&&(f.right=E.left,E.left=y),u!=null&&(u.left=E.right,E.right=h),this.root!==E&&(this.root=E,this.splayCount++),P}splayMin(i){let s=i,u=s.left;for(;u!=null;){let h=u;s.left=h.right,h.right=s,s=h,u=s.left}return s}splayMax(i){let s=i,u=s.right;for(;u!=null;){let h=u;s.right=h.left,h.left=s,s=h,u=s.right}return s}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let s=this.root,u=s,h=s.left;if(this.size--,h==null)this.root=s.right;else{let f=s.right;s=this.splayMax(h),s.right=f,this.root=s}return this.modificationCount++,u}addNewRoot(i,s){this.size++,this.modificationCount++;let u=this.root;if(u==null){this.root=i;return}s<0?(i.left=u,i.right=u.right,u.right=null):(i.right=u,i.left=u.left,u.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,s)=>i<s?-1:i>s?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},Le=class ta extends ae{root=null;compare;validKey;constructor(s,u){super(),this.compare=s??this.defaultCompare(),this.validKey=u??(h=>h!=null&&h!=null)}delete(s){return this.validKey(s)?this._delete(s)!=null:!1}deleteAll(s){for(let u of s)this.delete(u)}forEach(s){let u=this[Symbol.iterator](),h;for(;h=u.next(),!h.done;)s(h.value,h.value,this)}add(s){let u=this.splay(s);return u!=0&&this.addNewRoot(new Gt(s),u),this}addAndReturn(s){let u=this.splay(s);return u!=0&&this.addNewRoot(new Gt(s),u),this.root.key}addAll(s){for(let u of s)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(s){if(s==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(s)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let h=u.right;for(;h!=null;)u=h,h=u.right;return u.key}firstAfter(s){if(s==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(s)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let h=u.left;for(;h!=null;)u=h,h=u.left;return u.key}retainAll(s){let u=new ta(this.compare,this.validKey),h=this.modificationCount;for(let f of s){if(h!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(f)&&this.splay(f)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(s){return!this.validKey(s)||this.splay(s)!=0?null:this.root.key}intersection(s){let u=new ta(this.compare,this.validKey);for(let h of this)s.has(h)&&u.add(h);return u}difference(s){let u=new ta(this.compare,this.validKey);for(let h of this)s.has(h)||u.add(h);return u}union(s){let u=this.clone();return u.addAll(s),u}clone(){let s=new ta(this.compare,this.validKey);return s.size=this.size,s.root=this.copyNode(this.root),s}copyNode(s){if(s==null)return null;function u(f,y){let E,k;do{if(E=f.left,k=f.right,E!=null){let P=new Gt(E.key);y.left=P,u(E,P)}if(k!=null){let P=new Gt(k.key);y.right=P,f=k,y=P}}while(k!=null)}let h=new Gt(s.key);return u(s,h),h}toSet(){return this.clone()}entries(){return new Ni(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new En(this.wrap())}[Symbol.toStringTag]="[object Set]"},Tn=class{tree;path=new Array;modificationCount=null;splayCount;constructor(i){this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let u=this.tree.getRoot();for(;u!=null;)this.path.push(u),u=u.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],s=i.right;if(s!=null){for(;s!=null;)this.path.push(s),s=s.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},En=class extends Tn{getValue(i){return i.key}},Ni=class extends Tn{getValue(i){return[i.key,i.key]}},$n=i=>i,Co=i=>{if(i){let s=new Le(Er(i)),u=new Le(Er(i)),h=(y,E)=>E.addAndReturn(y),f=y=>({x:h(y.x,s),y:h(y.y,u)});return f({x:new pt(0),y:new pt(0)}),f}return $n},Bs=i=>({set:s=>{kr=Bs(s)},reset:()=>Bs(i),compare:Er(i),snap:Co(i),orient:wr(i)}),kr=Bs(),$o=(i,s)=>i.ll.x.isLessThanOrEqualTo(s.x)&&s.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(s.y)&&s.y.isLessThanOrEqualTo(i.ur.y),ps=(i,s)=>{if(s.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(s.ll.x)||s.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(s.ll.y))return null;let u=i.ll.x.isLessThan(s.ll.x)?s.ll.x:i.ll.x,h=i.ur.x.isLessThan(s.ur.x)?i.ur.x:s.ur.x,f=i.ll.y.isLessThan(s.ll.y)?s.ll.y:i.ll.y,y=i.ur.y.isLessThan(s.ur.y)?i.ur.y:s.ur.y;return{ll:{x:u,y:f},ur:{x:h,y}}},ms=(i,s)=>i.x.times(s.y).minus(i.y.times(s.x)),Os=(i,s)=>i.x.times(s.x).plus(i.y.times(s.y)),$e=i=>Os(i,i).sqrt(),_s=(i,s,u)=>{let h={x:s.x.minus(i.x),y:s.y.minus(i.y)},f={x:u.x.minus(i.x),y:u.y.minus(i.y)};return ms(f,h).div($e(f)).div($e(h))},Qa=(i,s,u)=>{let h={x:s.x.minus(i.x),y:s.y.minus(i.y)},f={x:u.x.minus(i.x),y:u.y.minus(i.y)};return Os(f,h).div($e(f)).div($e(h))},la=(i,s,u)=>s.y.isZero()?null:{x:i.x.plus(s.x.div(s.y).times(u.minus(i.y))),y:u},ha=(i,s,u)=>s.x.isZero()?null:{x:u,y:i.y.plus(s.y.div(s.x).times(u.minus(i.x)))},Ds=(i,s,u,h)=>{if(s.x.isZero())return ha(u,h,i.x);if(h.x.isZero())return ha(i,s,u.x);if(s.y.isZero())return la(u,h,i.y);if(h.y.isZero())return la(i,s,u.y);let f=ms(s,h);if(f.isZero())return null;let y={x:u.x.minus(i.x),y:u.y.minus(i.y)},E=ms(y,s).div(f),k=ms(y,h).div(f),P=i.x.plus(k.times(s.x)),A=u.x.plus(E.times(h.x)),H=i.y.plus(k.times(s.y)),X=u.y.plus(E.times(h.y)),dt=P.plus(A).div(2),ot=H.plus(X).div(2);return{x:dt,y:ot}},Yi=class Ah{point;isLeft;segment;otherSE;consumedBy;static compare(s,u){let h=Ah.comparePoints(s.point,u.point);return h!==0?h:(s.point!==u.point&&s.link(u),s.isLeft!==u.isLeft?s.isLeft?1:-1:ca.compare(s.segment,u.segment))}static comparePoints(s,u){return s.x.isLessThan(u.x)?-1:s.x.isGreaterThan(u.x)?1:s.y.isLessThan(u.y)?-1:s.y.isGreaterThan(u.y)?1:0}constructor(s,u){s.events===void 0?s.events=[this]:s.events.push(this),this.point=s,this.isLeft=u}link(s){if(s.point===this.point)throw new Error("Tried to link already linked events");let u=s.point.events;for(let h=0,f=u.length;h<f;h++){let y=u[h];this.point.events.push(y),y.point=this.point}this.checkForConsuming()}checkForConsuming(){let s=this.point.events.length;for(let u=0;u<s;u++){let h=this.point.events[u];if(h.segment.consumedBy===void 0)for(let f=u+1;f<s;f++){let y=this.point.events[f];y.consumedBy===void 0&&h.otherSE.point.events===y.otherSE.point.events&&h.segment.consume(y.segment)}}}getAvailableLinkedEvents(){let s=[];for(let u=0,h=this.point.events.length;u<h;u++){let f=this.point.events[u];f!==this&&!f.segment.ringOut&&f.segment.isInResult()&&s.push(f)}return s}getLeftmostComparator(s){let u=new Map,h=f=>{let y=f.otherSE;u.set(f,{sine:_s(this.point,s.point,y.point),cosine:Qa(this.point,s.point,y.point)})};return(f,y)=>{u.has(f)||h(f),u.has(y)||h(y);let{sine:E,cosine:k}=u.get(f),{sine:P,cosine:A}=u.get(y);return E.isGreaterThanOrEqualTo(0)&&P.isGreaterThanOrEqualTo(0)?k.isLessThan(A)?1:k.isGreaterThan(A)?-1:0:E.isLessThan(0)&&P.isLessThan(0)?k.isLessThan(A)?-1:k.isGreaterThan(A)?1:0:P.isLessThan(E)?-1:P.isGreaterThan(E)?1:0}}},tu=0,ca=class ja{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(s,u){let h=s.leftSE.point.x,f=u.leftSE.point.x,y=s.rightSE.point.x,E=u.rightSE.point.x;if(E.isLessThan(h))return 1;if(y.isLessThan(f))return-1;let k=s.leftSE.point.y,P=u.leftSE.point.y,A=s.rightSE.point.y,H=u.rightSE.point.y;if(h.isLessThan(f)){if(P.isLessThan(k)&&P.isLessThan(A))return 1;if(P.isGreaterThan(k)&&P.isGreaterThan(A))return-1;let X=s.comparePoint(u.leftSE.point);if(X<0)return 1;if(X>0)return-1;let dt=u.comparePoint(s.rightSE.point);return dt!==0?dt:-1}if(h.isGreaterThan(f)){if(k.isLessThan(P)&&k.isLessThan(H))return-1;if(k.isGreaterThan(P)&&k.isGreaterThan(H))return 1;let X=u.comparePoint(s.leftSE.point);if(X!==0)return X;let dt=s.comparePoint(u.rightSE.point);return dt<0?1:dt>0?-1:1}if(k.isLessThan(P))return-1;if(k.isGreaterThan(P))return 1;if(y.isLessThan(E)){let X=u.comparePoint(s.rightSE.point);if(X!==0)return X}if(y.isGreaterThan(E)){let X=s.comparePoint(u.rightSE.point);if(X<0)return 1;if(X>0)return-1}if(!y.eq(E)){let X=A.minus(k),dt=y.minus(h),ot=H.minus(P),Et=E.minus(f);if(X.isGreaterThan(dt)&&ot.isLessThan(Et))return 1;if(X.isLessThan(dt)&&ot.isGreaterThan(Et))return-1}return y.isGreaterThan(E)?1:y.isLessThan(E)||A.isLessThan(H)?-1:A.isGreaterThan(H)?1:s.id<u.id?-1:s.id>u.id?1:0}constructor(s,u,h,f){this.id=++tu,this.leftSE=s,s.segment=this,s.otherSE=u,this.rightSE=u,u.segment=this,u.otherSE=s,this.rings=h,this.windings=f}static fromRing(s,u,h){let f,y,E,k=Yi.comparePoints(s,u);if(k<0)f=s,y=u,E=1;else if(k>0)f=u,y=s,E=-1;else throw new Error(`Tried to create degenerate segment at [${s.x}, ${s.y}]`);let P=new Yi(f,!0),A=new Yi(y,!1);return new ja(P,A,[h],[E])}replaceRightSE(s){this.rightSE=s,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let s=this.leftSE.point.y,u=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:s.isLessThan(u)?s:u},ur:{x:this.rightSE.point.x,y:s.isGreaterThan(u)?s:u}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(s){return s.x.eq(this.leftSE.point.x)&&s.y.eq(this.leftSE.point.y)||s.x.eq(this.rightSE.point.x)&&s.y.eq(this.rightSE.point.y)}comparePoint(s){return kr.orient(this.leftSE.point,s,this.rightSE.point)}getIntersection(s){let u=this.bbox(),h=s.bbox(),f=ps(u,h);if(f===null)return null;let y=this.leftSE.point,E=this.rightSE.point,k=s.leftSE.point,P=s.rightSE.point,A=$o(u,k)&&this.comparePoint(k)===0,H=$o(h,y)&&s.comparePoint(y)===0,X=$o(u,P)&&this.comparePoint(P)===0,dt=$o(h,E)&&s.comparePoint(E)===0;if(H&&A)return dt&&!X?E:!dt&&X?P:null;if(H)return X&&y.x.eq(P.x)&&y.y.eq(P.y)?null:y;if(A)return dt&&E.x.eq(k.x)&&E.y.eq(k.y)?null:k;if(dt&&X)return null;if(dt)return E;if(X)return P;let ot=Ds(y,this.vector(),k,s.vector());return ot===null||!$o(f,ot)?null:kr.snap(ot)}split(s){let u=[],h=s.events!==void 0,f=new Yi(s,!0),y=new Yi(s,!1),E=this.rightSE;this.replaceRightSE(y),u.push(y),u.push(f);let k=new ja(f,E,this.rings.slice(),this.windings.slice());return Yi.comparePoints(k.leftSE.point,k.rightSE.point)>0&&k.swapEvents(),Yi.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),h&&(f.checkForConsuming(),y.checkForConsuming()),u}swapEvents(){let s=this.rightSE;this.rightSE=this.leftSE,this.leftSE=s,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let u=0,h=this.windings.length;u<h;u++)this.windings[u]*=-1}consume(s){let u=this,h=s;for(;u.consumedBy;)u=u.consumedBy;for(;h.consumedBy;)h=h.consumedBy;let f=ja.compare(u,h);if(f!==0){if(f>0){let y=u;u=h,h=y}if(u.prev===h){let y=u;u=h,h=y}for(let y=0,E=h.rings.length;y<E;y++){let k=h.rings[y],P=h.windings[y],A=u.rings.indexOf(k);A===-1?(u.rings.push(k),u.windings.push(P)):u.windings[A]+=P}h.rings=null,h.windings=null,h.consumedBy=u,h.leftSE.consumedBy=u.leftSE,h.rightSE.consumedBy=u.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let s=this.prev.consumedBy||this.prev;this._beforeState=s.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let s=this.beforeState();this._afterState={rings:s.rings.slice(0),windings:s.windings.slice(0),multiPolys:[]};let u=this._afterState.rings,h=this._afterState.windings,f=this._afterState.multiPolys;for(let k=0,P=this.rings.length;k<P;k++){let A=this.rings[k],H=this.windings[k],X=u.indexOf(A);X===-1?(u.push(A),h.push(H)):h[X]+=H}let y=[],E=[];for(let k=0,P=u.length;k<P;k++){if(h[k]===0)continue;let A=u[k],H=A.poly;if(E.indexOf(H)===-1)if(A.isExterior)y.push(H);else{E.indexOf(H)===-1&&E.push(H);let X=y.indexOf(A.poly);X!==-1&&y.splice(X,1)}}for(let k=0,P=y.length;k<P;k++){let A=y[k].multiPoly;f.indexOf(A)===-1&&f.push(A)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let s=this.beforeState().multiPolys,u=this.afterState().multiPolys;switch(fa.type){case"union":{let h=s.length===0,f=u.length===0;this._isInResult=h!==f;break}case"intersection":{let h,f;s.length<u.length?(h=s.length,f=u.length):(h=u.length,f=s.length),this._isInResult=f===fa.numMultiPolys&&h<f;break}case"xor":{let h=Math.abs(s.length-u.length);this._isInResult=h%2===1;break}case"difference":{let h=f=>f.length===1&&f[0].isSubject;this._isInResult=h(s)!==h(u);break}}return this._isInResult}},Ju=class{poly;isExterior;segments;bbox;constructor(i,s,u){if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=s,this.isExterior=u,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let h=kr.snap({x:new pt(i[0][0]),y:new pt(i[0][1])});this.bbox={ll:{x:h.x,y:h.y},ur:{x:h.x,y:h.y}};let f=h;for(let y=1,E=i.length;y<E;y++){if(typeof i[y][0]!="number"||typeof i[y][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let k=kr.snap({x:new pt(i[y][0]),y:new pt(i[y][1])});k.x.eq(f.x)&&k.y.eq(f.y)||(this.segments.push(ca.fromRing(f,k,this)),k.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.x),k.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.y),k.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.x),k.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.y),f=k)}(!h.x.eq(f.x)||!h.y.eq(f.y))&&this.segments.push(ca.fromRing(f,h,this))}getSweepEvents(){let i=[];for(let s=0,u=this.segments.length;s<u;s++){let h=this.segments[s];i.push(h.leftSE),i.push(h.rightSE)}return i}},Kh=class{multiPoly;exteriorRing;interiorRings;bbox;constructor(i,s){if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ju(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let u=1,h=i.length;u<h;u++){let f=new Ju(i[u],this,!1);f.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=f.bbox.ll.x),f.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=f.bbox.ll.y),f.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=f.bbox.ur.x),f.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=f.bbox.ur.y),this.interiorRings.push(f)}this.multiPoly=s}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let s=0,u=this.interiorRings.length;s<u;s++){let h=this.interiorRings[s].getSweepEvents();for(let f=0,y=h.length;f<y;f++)i.push(h[f])}return i}},$u=class{isSubject;polys;bbox;constructor(i,s){if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new pt(Number.POSITIVE_INFINITY),y:new pt(Number.POSITIVE_INFINITY)},ur:{x:new pt(Number.NEGATIVE_INFINITY),y:new pt(Number.NEGATIVE_INFINITY)}};for(let u=0,h=i.length;u<h;u++){let f=new Kh(i[u],this);f.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=f.bbox.ll.x),f.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=f.bbox.ll.y),f.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=f.bbox.ur.x),f.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=f.bbox.ur.y),this.polys.push(f)}this.isSubject=s}getSweepEvents(){let i=[];for(let s=0,u=this.polys.length;s<u;s++){let h=this.polys[s].getSweepEvents();for(let f=0,y=h.length;f<y;f++)i.push(h[f])}return i}},Jh=class zu{events;poly;_isExteriorRing;_enclosingRing;static factory(s){let u=[];for(let h=0,f=s.length;h<f;h++){let y=s[h];if(!y.isInResult()||y.ringOut)continue;let E=null,k=y.leftSE,P=y.rightSE,A=[k],H=k.point,X=[];for(;E=k,k=P,A.push(k),k.point!==H;)for(;;){let dt=k.getAvailableLinkedEvents();if(dt.length===0){let Bt=A[0].point,Kt=A[A.length-1].point;throw new Error(`Unable to complete output ring starting at [${Bt.x}, ${Bt.y}]. Last matching segment found ends at [${Kt.x}, ${Kt.y}].`)}if(dt.length===1){P=dt[0].otherSE;break}let ot=null;for(let Bt=0,Kt=X.length;Bt<Kt;Bt++)if(X[Bt].point===k.point){ot=Bt;break}if(ot!==null){let Bt=X.splice(ot)[0],Kt=A.splice(Bt.index);Kt.unshift(Kt[0].otherSE),u.push(new zu(Kt.reverse()));continue}X.push({index:A.length,point:k.point});let Et=k.getLeftmostComparator(E);P=dt.sort(Et)[0].otherSE;break}u.push(new zu(A))}return u}constructor(s){this.events=s;for(let u=0,h=s.length;u<h;u++)s[u].segment.ringOut=this;this.poly=null}getGeom(){let s=this.events[0].point,u=[s];for(let A=1,H=this.events.length-1;A<H;A++){let X=this.events[A].point,dt=this.events[A+1].point;kr.orient(X,s,dt)!==0&&(u.push(X),s=X)}if(u.length===1)return null;let h=u[0],f=u[1];kr.orient(h,s,f)===0&&u.shift(),u.push(u[0]);let y=this.isExteriorRing()?1:-1,E=this.isExteriorRing()?0:u.length-1,k=this.isExteriorRing()?u.length:-1,P=[];for(let A=E;A!=k;A+=y)P.push([u[A].x.toNumber(),u[A].y.toNumber()]);return P}isExteriorRing(){if(this._isExteriorRing===void 0){let s=this.enclosingRing();this._isExteriorRing=s?!s.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let s=this.events[0];for(let f=1,y=this.events.length;f<y;f++){let E=this.events[f];Yi.compare(s,E)>0&&(s=E)}let u=s.segment.prevInResult(),h=u?u.prevInResult():null;for(;;){if(!u)return null;if(!h)return u.ringOut;if(h.ringOut!==u.ringOut)return h.ringOut?.enclosingRing()!==u.ringOut?u.ringOut:u.ringOut?.enclosingRing();u=h.prevInResult(),h=u?u.prevInResult():null}}},Qu=class{exteriorRing;interiorRings;constructor(i){this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let s=[i];for(let u=0,h=this.interiorRings.length;u<h;u++){let f=this.interiorRings[u].getGeom();f!==null&&s.push(f)}return s}},$h=class{rings;polys;constructor(i){this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let s=0,u=this.polys.length;s<u;s++){let h=this.polys[s].getGeom();h!==null&&i.push(h)}return i}_composePolys(i){let s=[];for(let u=0,h=i.length;u<h;u++){let f=i[u];if(!f.poly)if(f.isExteriorRing())s.push(new Qu(f));else{let y=f.enclosingRing();y?.poly||s.push(new Qu(y)),y?.poly?.addInterior(f)}}return s}},Qh=class{queue;tree;segments;constructor(i,s=ca.compare){this.queue=i,this.tree=new Le(s),this.segments=[]}process(i){let s=i.segment,u=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(s),u;i.isLeft&&this.tree.add(s);let h=s,f=s;do h=this.tree.lastBefore(h);while(h!=null&&h.consumedBy!=null);do f=this.tree.firstAfter(f);while(f!=null&&f.consumedBy!=null);if(i.isLeft){let y=null;if(h){let k=h.getIntersection(s);if(k!==null&&(s.isAnEndpoint(k)||(y=k),!h.isAnEndpoint(k))){let P=this._splitSafely(h,k);for(let A=0,H=P.length;A<H;A++)u.push(P[A])}}let E=null;if(f){let k=f.getIntersection(s);if(k!==null&&(s.isAnEndpoint(k)||(E=k),!f.isAnEndpoint(k))){let P=this._splitSafely(f,k);for(let A=0,H=P.length;A<H;A++)u.push(P[A])}}if(y!==null||E!==null){let k=null;y===null?k=E:E===null?k=y:k=Yi.comparePoints(y,E)<=0?y:E,this.queue.delete(s.rightSE),u.push(s.rightSE);let P=s.split(k);for(let A=0,H=P.length;A<H;A++)u.push(P[A])}u.length>0?(this.tree.delete(s),u.push(i)):(this.segments.push(s),s.prev=h)}else{if(h&&f){let y=h.getIntersection(f);if(y!==null){if(!h.isAnEndpoint(y)){let E=this._splitSafely(h,y);for(let k=0,P=E.length;k<P;k++)u.push(E[k])}if(!f.isAnEndpoint(y)){let E=this._splitSafely(f,y);for(let k=0,P=E.length;k<P;k++)u.push(E[k])}}}this.tree.delete(s)}return u}_splitSafely(i,s){this.tree.delete(i);let u=i.rightSE;this.queue.delete(u);let h=i.split(s);return h.push(u),i.consumedBy===void 0&&this.tree.add(i),h}},tc=class{type;numMultiPolys;run(i,s,u){Fs.type=i;let h=[new $u(s,!0)];for(let P=0,A=u.length;P<A;P++)h.push(new $u(u[P],!1));if(Fs.numMultiPolys=h.length,Fs.type==="difference"){let P=h[0],A=1;for(;A<h.length;)ps(h[A].bbox,P.bbox)!==null?A++:h.splice(A,1)}if(Fs.type==="intersection")for(let P=0,A=h.length;P<A;P++){let H=h[P];for(let X=P+1,dt=h.length;X<dt;X++)if(ps(H.bbox,h[X].bbox)===null)return[]}let f=new Le(Yi.compare);for(let P=0,A=h.length;P<A;P++){let H=h[P].getSweepEvents();for(let X=0,dt=H.length;X<dt;X++)f.add(H[X])}let y=new Qh(f),E=null;for(f.size!=0&&(E=f.first(),f.delete(E));E;){let P=y.process(E);for(let A=0,H=P.length;A<H;A++){let X=P[A];X.consumedBy===void 0&&f.add(X)}f.size!=0?(E=f.first(),f.delete(E)):E=null}kr.reset();let k=Jh.factory(y.segments);return new $h(k).getGeom()}},Fs=new tc,fa=Fs,ec=(i,...s)=>fa.run("intersection",i,s),nc=(i,...s)=>fa.run("difference",i,s),pd=kr.set;function da(i){let s={type:"Feature"};return s.geometry=i,s}function ga(i){return i.type==="Feature"?i.geometry:i}function tl(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function ic(i){return da({type:"LineString",coordinates:i})}function rc(i){return da({type:"MultiLineString",coordinates:i})}function el(i){return da({type:"Polygon",coordinates:i})}function nl(i){return da({type:"MultiPolygon",coordinates:i})}function oc(i,s){let u=ga(i),h=ga(s),f=ec(u.coordinates,h.coordinates);return f.length===0?null:f.length===1?el(f[0]):nl(f)}function sc(i,s){let u=ga(i),h=ga(s),f=nc(u.coordinates,h.coordinates);return f.length===0?null:f.length===1?el(f[0]):nl(f)}function il(i){return Array.isArray(i)?1+il(i[0]):-1}function ac(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let s=tl(i),u=il(s),h=[];return u>1?s.forEach(f=>{h.push(ic(f))}):h.push(i),h}function uc(i){let s=[];return i.eachLayer(u=>{s.push(tl(u.toGeoJSON(15)))}),rc(s)}nn.Cut=nn.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let s=L.polygon(i,this.options.pathOptions);s._latlngInfos=this._layer._latlngInfo,this.cut(s),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:h,originalLayer:f})=>{this._fireCut(f,h,f),this._fireCut(this._map,h,f),f.pm._fireEdit()}),this._editedLayers=[];let u=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(u))},cut(i){let s=this._map._layers,u=i._latlngInfos||[];Object.keys(s).map(h=>s[h]).filter(h=>h.pm).filter(h=>!h._pmTempLayer).filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1).filter(h=>h instanceof L.Polyline).filter(h=>h!==i).filter(h=>h.pm.options.allowCutting).filter(h=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(h)>-1:!0).filter(h=>!this._layerGroup.hasLayer(h)).filter(h=>{try{let f=!!vr(i.toGeoJSON(15),h.toGeoJSON(15)).features.length>0;return f||h instanceof L.Polyline&&!(h instanceof L.Polygon)?f:!!oc(i.toGeoJSON(15),h.toGeoJSON(15))}catch{return h instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(h=>{let f;if(h instanceof L.Polygon){f=L.polygon(h.getLatLngs());let P=f.getLatLngs();u.forEach(A=>{if(A&&A.snapInfo){let{latlng:H}=A,X=this._calcClosestLayer(H,[f]);if(X&&X.segment&&X.distance<this.options.snapDistance){let{segment:dt}=X;if(dt&&dt.length===2){let{indexPath:ot,parentPath:Et,newIndex:Bt}=L.PM.Utils._getIndexFromSegment(P,dt);(ot.length>1?(0,Yr.default)(P,Et):P).splice(Bt,0,H)}}}})}else f=h;let y=this._cutLayer(i,f),E=L.geoJSON(y,h.options);E.getLayers().length===1&&([E]=E.getLayers()),this._setPane(E,"layerPane");let k=E.addTo(this._map.pm._getContainingLayer());if(k.pm.enable(h.pm.options),k.pm.disable(),h._pmTempLayer=!0,i._pmTempLayer=!0,h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),k.getLayers&&k.getLayers().length===0&&this._map.pm.removeLayer({target:k}),k instanceof L.LayerGroup?(k.eachLayer(P=>{this._addDrawnLayerProp(P)}),this._addDrawnLayerProp(k)):this._addDrawnLayerProp(k),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let P=this.options.layersToCut.indexOf(h);P>-1&&this.options.layersToCut.splice(P,1)}this._editedLayers.push({layer:k,originalLayer:h})})},_cutLayer(i,s){let u=L.geoJSON(),h;if(s instanceof L.Polygon)h=sc(s.toGeoJSON(15),i.toGeoJSON(15));else{let f=ac(s);f.forEach(y=>{let E=R(y,i.toGeoJSON(15)),k;E&&E.features.length>0?k=L.geoJSON(E):k=L.geoJSON(y),k.getLayers().forEach(P=>{ne(i.toGeoJSON(15),P.toGeoJSON(15))||P.addTo(u)})}),f.length>1?h=uc(u):h=u.toGeoJSON(15)}return h},_change:L.Util.falseFn}),nn.Text=nn.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Ee("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker?.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let s=i;s.target=this._hintMarker,this._handleSnapping(s)}},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let s=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),this.options.textOptions?.className){let f=this.options.textOptions.className.split(" ");this.textArea.classList.add(...f)}let u=this._createTextIcon(this.textArea),h=new L.Marker(s,{textMarker:!0,_textMarkerOverPM:!0,icon:u});if(this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm){h.pm.textArea=this.textArea,L.setOptions(h.pm,{removeIfEmpty:this.options.textOptions?.removeIfEmpty??!0});let f=this.options.textOptions?.focusAfterDraw??!0;h.pm._createTextMarker(f),this.options.textOptions?.text&&h.pm.setText(this.options.textOptions.text)}this._fireCreate(h),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var lc={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,_r(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(_r(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,_r(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(_r(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let s=i.touches?i.touches[0]:i,u={originalEvent:s,target:this._layer};return u.containerPoint=this._map.mouseEventToContainerPoint(s),u.latlng=this._map.containerPointToLatLng(u.containerPoint),this._dragMixinOnMouseDown(u),!1},_simulateMouseMoveEvent(i){let s=i.touches?i.touches[0]:i,u={originalEvent:s,target:this._layer};return u.containerPoint=this._map.mouseEventToContainerPoint(s),u.latlng=this._map.containerPointToLatLng(u.containerPoint),this._dragMixinOnMouseMove(u),!1},_simulateMouseUpEvent(i){let s={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(s.containerPoint=this._map.mouseEventToContainerPoint(i),s.latlng=this._map.containerPointToLatLng(s.containerPoint)),this._dragMixinOnMouseUp(s),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let s=i._fromLayerSync,u=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!s&&!u?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let h="resizeableCircleMarker";this._layer instanceof L.Circle&&(h="resizeableCircle"),this.options.snappable&&!s&&!u?this._layer.pm.options[h]||this._initSnappableMarkersDrag():this._layer.pm.options[h]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let s=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(s,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let s=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,s&&L.DomUtil.removeClass(s,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:s}=i,u={lat:s.lat-this._tempDragCoord.lat,lng:s.lng-this._tempDragCoord.lng},h=f=>f.map(y=>{if(Array.isArray(y))return h(y);let E={lat:y.lat+u.lat,lng:y.lng+u.lng};return(y.alt||y.alt===0)&&(E.alt=y.alt),E});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let f=h([this._layer.getLatLng()]);this._layer.setLatLng(f[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let f=this._layer.getLatLng();this._layer._snapped&&(f=this._layer._orgLatLng);let y=h([f]);this._layer.setLatLng(y[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let f=h([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(f),this._fireChange(this._layer.getBounds(),"Edit")}else{let f=h(this._layer.getLatLngs());this._layer.setLatLngs(f),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=s,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,s){if(this.enabled())return!1;if(!s._fromLayerSync&&this._layer===s.target&&this.options.syncLayersOnDrag){s._fromLayerSync=!0;let u=[];if(L.Util.isArray(this.options.syncLayersOnDrag))u=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(h=>{h instanceof L.LayerGroup&&(u=u.concat(h.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let h in this._parentLayerGroup){let f=this._parentLayerGroup[h];f.pm&&(u=f.pm.getLayers(!0))}return L.Util.isArray(u)&&u.length>0&&(u=u.filter(h=>!!h.pm).filter(h=>!!h.pm.options.draggable),u.forEach(h=>{h!==this._layer&&h.pm[i]&&(h._snapped=!1,h.pm[i](s))})),u.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},hc=lc,cc=nt(Ze());function fc(i,s,u,h){return u.unproject(s.transform(u.project(i,h)),h)}function rl(i,s,u){let h=u.getMaxZoom();if(h===1/0&&(h=u.getZoom()),L.Util.isArray(i)){let f=[];return i.forEach(y=>{f.push(rl(y,s,u))}),f}return i instanceof L.LatLng?fc(i,s,u,h):null}function ys(i,s){s instanceof L.Layer&&(s=s.getLatLng());let u=i.getMaxZoom();return u===1/0&&(u=i.getZoom()),i.project(s,u)}function pa(i,s){let u=i.getMaxZoom();return u===1/0&&(u=i.getZoom()),i.unproject(s,u)}var dc={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=ys(this._map,this._rotationOriginLatLng),this._rotationStartPoint=ys(this._map,i.target.getLatLng()),this._initialRotateLatLng=cn(this._layer),this._startAngle=this.getAngle();let s=cn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,s),this._fireRotationStart(this._map,s)},_onRotate(i){let s=ys(this._map,i.target.getLatLng()),u=this._rotationStartPoint,h=this._rotationOriginPoint,f=Math.atan2(s.y-h.y,s.x-h.x)-Math.atan2(u.y-h.y,u.x-h.x);this._layer.setLatLngs(this._rotateLayer(f,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let y=this;function E(H,X=[],dt=-1){if(dt>-1&&X.push(dt),L.Util.isArray(H[0]))H.forEach((ot,Et)=>E(ot,X.slice(),Et));else{let ot=X.length>0?(0,cc.default)(y._markers,X):y._markers[0];H.forEach((Et,Bt)=>{ot[Bt].setLatLng(Et)})}}E(this._layer.getLatLngs());let k=cn(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(f,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let P=f*180/Math.PI;P=P<0?P+360:P;let A=P+this._startAngle;this._setAngle(A),this._rotationLayer.pm._setAngle(A),this._fireRotation(this._rotationLayer,P,k),this._fireRotation(this._map,P,k),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let s=cn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=cn(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,s),this._fireRotationEnd(this._map,i,s),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,s,u,h,f){let y=ys(f,u);return this._matrix=h.clone().rotate(i,y).flip(),rl(s,this._matrix,f)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),s=i.getCenter();return i.removeFrom(this._layer._map),s},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Kn(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=cn(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let s=this.getAngle(),u=this._layer.getLatLngs(),h=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(h,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(h,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let f=this.getAngle()-s;f=f<0?f+360:f,this._startAngle=s,this._fireRotation(this._layer,f,u,this._layer),this._fireRotation(this._map||this._layer._map,f,u,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let s=i-this.getAngle();this.rotateLayer(s)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},gc=dc,pc=L.Class.extend({includes:[hc,mo,gc,le],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,s){s==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":s==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":s==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,s){let u=s.target,h={layer:this._layer,marker:u,event:s},f="";return i==="move"?f="moveVertexValidation":i==="add"?f="addVertexValidation":i==="remove"&&(f="removeVertexValidation"),this.options[f]&&typeof this.options[f]=="function"&&!this.options[f](h)?(i==="move"&&(u._cancelDragEventChain=u.getLatLng()),!1):(u._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),An=pc;An.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(h=>this._initLayer(h));let s=h=>{if(h.layer._pmTempLayer)return;this._layers=this.getLayers();let f=this._layers.filter(y=>!y.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in y.pm._parentLayerGroup));f.forEach(y=>{this._initLayer(y)}),f.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(s,100,this),this),this._layerGroup.on("layerremove",h=>{this._removeLayerFromGroup(h.target)},this);let u=h=>{h.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(u,100,this),this)},enable(i,s=[]){s.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(u=>{u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1&&(s.push(u._leaflet_id),u.pm.enable(i,s)):u.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(s=>{s instanceof L.LayerGroup?i.indexOf(s._leaflet_id)===-1&&(i.push(s._leaflet_id),s.pm.disable(i)):s.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(s=>s instanceof L.LayerGroup?i.indexOf(s._leaflet_id)===-1?(i.push(s._leaflet_id),s.pm.enabled(i)):!1:s.pm.enabled())},toggleEdit(i,s=[]){s.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(u=>{u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1&&(s.push(u._leaflet_id),u.pm.toggleEdit(i,s)):u.pm.toggleEdit(i)})},_initLayer(i){let s=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[s]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let s=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[s]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){return this._map||this._layers.find(i=>!!i._map)?._map||null},getLayers(i=!1,s=!0,u=!0,h=[]){let f=[];return i?this._layerGroup.getLayers().forEach(y=>{f.push(y),y instanceof L.LayerGroup&&h.indexOf(y._leaflet_id)===-1&&(h.push(y._leaflet_id),f=f.concat(y.pm.getLayers(!0,!0,!0,h)))}):f=this._layerGroup.getLayers(),u&&(f=f.filter(y=>!(y instanceof L.LayerGroup))),s&&(f=f.filter(y=>!!y.pm),f=f.filter(y=>!y._pmTempLayer),f=f.filter(y=>!L.PM.optIn&&!y.options.pmIgnore||L.PM.optIn&&y.options.pmIgnore===!1)),f},setOptions(i,s=[]){s.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(u=>{u.pm&&(u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1&&(s.push(u._leaflet_id),u.pm.setOptions(i,s)):u.pm.setOptions(i))})}}),An.Marker=An.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let s=i.target;s.remove(),this._fireRemove(s),this._fireRemove(this._map,s)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var Mo=nt(Ze()),mc={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((s,u,h)=>h.indexOf(s)===u)},_removeFromCache(i){let s=this.markerCache.indexOf(i);s>-1&&this.markerCache.splice(s,1)},renderLimits(i){this.markerCache.forEach(s=>{i.includes(s)?this._markerGroup.addLayer(s):this._markerGroup.removeLayer(s)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let s=[...this._filterClosestMarkers(i)];this.renderLimits(s)},_filterClosestMarkers(i){let s=[...this.markerCache],u=this.options.limitMarkersToCount;return u===-1?s:(s.sort((h,f)=>{let y=h._latlng.distanceTo(i),E=f._latlng.distanceTo(i);return y-E}),s.filter((h,f)=>u>-1?f<u:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},_c=mc;An.Line=An.extend({includes:[_c],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,s=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let u=h=>{if(Array.isArray(h[0]))return h.map(u,this);let f=h.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&h.map((y,E)=>{let k=this.isPolygon()?(E+1)%h.length:E+1;return this._createMiddleMarker(f[E],f[k])}),f};this._markers=u(s),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let s=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(s,"vertexPane"),s._pmTempLayer=!0,this.options.rotate?(s.on("dragstart",this._onRotateStart,this),s.on("drag",this._onRotate,this),s.on("dragend",this._onRotateEnd,this)):(s.on("click",this._onVertexClick,this),s.on("dragstart",this._onMarkerDragStart,this),s.on("move",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(s),s},_createMiddleMarker(i,s){if(!i||!s)return!1;let u=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),s.getLatLng()),h=this._createMarker(u),f=L.divIcon({className:"marker-icon marker-icon-middle"});return h.setIcon(f),h.leftM=i,h.rightM=s,i._middleMarkerNext=h,s._middleMarkerPrev=h,h.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),h.on("movestart",this._onMiddleMarkerMoveStart,this),h},_onMiddleMarkerClick(i){let s=i.target;if(!this._vertexValidation("add",i))return;let u=L.divIcon({className:"marker-icon"});s.setIcon(u),this._addMarker(s,s.leftM,s.rightM)},_onMiddleMarkerMoveStart(i){let s=i.target;if(s.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){s.on("move",this._onMiddleMarkerMovePrevent,this);return}s._dragging=!0,this._addMarker(s,s.leftM,s.rightM)},_onMiddleMarkerMovePrevent(i){let s=i.target;this._vertexValidationDrag(s)},_onMiddleMarkerMoveEnd(i){let s=i.target;if(s.off("move",this._onMiddleMarkerMovePrevent,this),s.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(s))return;let u=L.divIcon({className:"marker-icon"});s.setIcon(u),setTimeout(()=>{delete s._dragging},100)},_addMarker(i,s,u){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let h=i.getLatLng(),f=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:y,index:E,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),P=y.length>1?(0,Mo.default)(f,k):f,A=y.length>1?(0,Mo.default)(this._markers,k):this._markers;P.splice(E+1,0,h),A.splice(E+1,0,i),this._layer.setLatLngs(f),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(s,i),this._createMiddleMarker(i,u)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,h),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Eo(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let s=this._layer,u,h;if(this.options.allowSelfIntersection?u=!1:(h=Eo(this._layer.toGeoJSON(15)),u=h.features.length>0),u){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return u;i?this._flashLayer():(s.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(h)}else s.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return u},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,s){i.forEach(u=>{Array.isArray(u)?this._updateDisabledMarkerStyle(u,s):u._icon&&(s&&!this._checkMarkerAllowedToDrag(u)?L.DomUtil.addClass(u._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(u._icon,"vertexmarker-disabled"))})},_removeMarker(i){let s=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=cn(this._layer,this._layer.getLatLngs()));let u=this._layer.getLatLngs(),{indexPath:h,index:f,parentPath:y}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);if(!h)return;let E=h.length>1?(0,Mo.default)(u,y):u,k=h.length>1?(0,Mo.default)(this._markers,y):this._markers,P=y[y.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!P&&(E.length<=2||this.isPolygon()&&E.length<=3)){this._flashLayer();return}E.splice(f,1),this._layer.setLatLngs(u),this.isPolygon()&&E.length<=2&&E.splice(0,E.length);let A=!1;if(E.length<=1&&(E.splice(0,E.length),y.length>1&&h.length>1&&(u=ui(u)),this._layer.setLatLngs(u),this._initMarkers(),A=!0),Vo(u)||this._layer.remove(),u=ui(u),this._layer.setLatLngs(u),this._markers=ui(this._markers),!A&&(k=h.length>1?(0,Mo.default)(this._markers,y):this._markers,s._middleMarkerPrev&&(this._markerGroup.removeLayer(s._middleMarkerPrev),this._removeFromCache(s._middleMarkerPrev)),s._middleMarkerNext&&(this._markerGroup.removeLayer(s._middleMarkerNext),this._removeFromCache(s._middleMarkerNext)),this._markerGroup.removeLayer(s),this._removeFromCache(s),k)){let H,X;if(this.isPolygon()?(H=(f+1)%k.length,X=(f+(k.length-1))%k.length):(X=f-1<0?void 0:f-1,H=f+1>=k.length?void 0:f+1),H!==X){let dt=k[X],ot=k[H];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(dt,ot)}k.splice(f,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let s=this._layer.getLatLngs(),u=i.getLatLng(),{indexPath:h,index:f,parentPath:y}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(h.length>1?(0,Mo.default)(s,y):s).splice(f,1,u),this._layer.setLatLngs(s)},_getNeighborMarkers(i){let{indexPath:s,index:u,parentPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),f=s.length>1?(0,Mo.default)(this._markers,h):this._markers,y=(u+1)%f.length,E=(u+(f.length-1))%f.length,k=f[E],P=f[y];return{prevMarker:k,nextMarker:P}},_checkMarkerAllowedToDrag(i){let{prevMarker:s,nextMarker:u}=this._getNeighborMarkers(i),h=L.polyline([s.getLatLng(),i.getLatLng()]),f=L.polyline([i.getLatLng(),u.getLatLng()]),y=vr(this._layer.toGeoJSON(15),h.toGeoJSON(15)).features.length,E=vr(this._layer.toGeoJSON(15),f.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?E+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(y+=1),!(y<=2&&E<=2)},_onMarkerDragStart(i){let s=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireMarkerDragStart(i,u),this.options.allowSelfIntersection||(this._coordsBeforeEdit=cn(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(s):this._markerAllowedToDrag=null},_onMarkerDrag(i){let s=i.target;if(!this._vertexValidationDrag(s))return;let{indexPath:u,index:h,parentPath:f}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);if(!u)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(s);let y=u.length>1?(0,Mo.default)(this._markers,f):this._markers,E=(h+1)%y.length,k=(h+(y.length-1))%y.length,P=s.getLatLng(),A=y[k].getLatLng(),H=y[E].getLatLng();if(s._middleMarkerNext){let X=L.PM.Utils.calcMiddleLatLng(this._map,P,H);s._middleMarkerNext.setLatLng(X)}if(s._middleMarkerPrev){let X=L.PM.Utils.calcMiddleLatLng(this._map,P,A);s._middleMarkerPrev.setLatLng(X)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,u),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let s=i.target;if(!this._vertexValidationDragEnd(s))return;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),h=!this.options.allowSelfIntersection&&this.hasSelfIntersection();h&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(h=!1);let f=!this.options.allowSelfIntersection&&h;if(this._fireMarkerDragEnd(i,u,f),f){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,u);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let s=i.target;if(s._dragging)return;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireVertexClick(i,u)}}),An.Polygon=An.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:s,nextMarker:u}=this._getNeighborMarkers(i),h=L.polyline([s.getLatLng(),i.getLatLng()]),f=L.polyline([i.getLatLng(),u.getLatLng()]),y=vr(this._layer.toGeoJSON(15),h.toGeoJSON(15)).features.length,E=vr(this._layer.toGeoJSON(15),f.toGeoJSON(15)).features.length;return!(y<=2&&E<=2)}}),An.Rectangle=An.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,s=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=s.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((u,h)=>{let f=this._cornerMarkers.find(y=>y._index===h);f&&f.setLatLng(u)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,s){let u=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._origLatLng=i,u._index=s,u._pmTempLayer=!0,u.on("click",this._onVertexClick,this),this._markerGroup.addLayer(u),u},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let s=i.target,u=this._cornerMarkers;s._oppositeCornerLatLng=u.find(f=>f._index===(s._index+2)%4).getLatLng(),s._snapped=!1;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireMarkerDragStart(i,h)},_onMarkerDrag(i){let s=i.target;if(!this._vertexValidationDrag(s)||s._index===void 0)return;this._adjustRectangleForMarkerMove(s);let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireMarkerDrag(i,u),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let s=i.target;if(!this._vertexValidationDragEnd(s))return;this._cornerMarkers.forEach(h=>{delete h._oppositeCornerLatLng});let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireMarkerDragEnd(i,u),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let s=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(s),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let s=this._layer.getLatLngs()[0];if(s&&s.length!==4&&s.length>0)s.forEach((u,h)=>{this._cornerMarkers[h].setLatLng(u)}),this._cornerMarkers.slice(s.length).forEach(u=>{u.setLatLng(s[0])});else if(!s||!s.length)console.error("The layer has no LatLngs");else{let u=s.findIndex(h=>i.getLatLng().equals(h));u>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(s[(u+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(s[(u+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(s[(u+3)%4])):this._cornerMarkers.forEach(h=>{h.setLatLng(s[h._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Kn(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),An.CircleMarker=An.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let s=this._layer.getLatLng(),u=this._layer._radius,h=this._getLatLngOnCircle(s,u);this._centerMarker=this._createCenterMarker(s),this._outerMarker=this._createOuterMarker(h),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,s){let u=this._map.project(i),h=L.point(u.x+s,u.y);return this._map.unproject(h)},_createHintLine(i,s){let u=i.getLatLng(),h=s.getLatLng();this._hintline=L.polyline([u,h],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let s=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(s._icon,"leaflet-pm-draggable"),s.on("move",this._moveCircle,this)):s.dragging.disable(),s},_createOuterMarker(i){let s=this._createMarker(i);return s.on("drag",this._resizeCircle,this),s},_createMarker(i){let s=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(s,"vertexPane"),s._origLatLng=i,s._pmTempLayer=!0,s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),s.on("click",this._onVertexClick,this),this._helperLayers.addLayer(s),s},_moveCircle(i){if(i.target._cancelDragEventChain)return;let s=this._centerMarker.getLatLng();this._layer.setLatLng(s);let u=this._layer._radius,h=this._getLatLngOnCircle(s,u);this._outerMarker._latlng=h,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),s=this._layer._radius,u=this._getLatLngOnCircle(i,s);this._outerMarker.setLatLng(u),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),s=this._outerMarker.getLatLng(),u=this._distanceCalculation(i,s);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(u),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),s=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,s])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let s=i.target;s instanceof L.Marker&&!this._vertexValidationDrag(s)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let s=i.target;this._vertexValidationDragEnd(s)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let s=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),u=L.circle(this._layer.getLatLng(),this._layer.options);u.setRadius(s);let h=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(u,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(u,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),s=this._outerMarker.getLatLng(),u=this._distanceCalculation(i,s);return this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?s=mr(this._map,i,s,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&(s=mr(this._map,i,s,this._getMaxDistanceInMeter(i))),s},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),s=this._outerMarker.getLatLng(),u=this._distanceCalculation(i,s);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,s){return this._map.project(i).distanceTo(this._map.project(s))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),An.Circle=An.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,s){return this._map.distance(i,s)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),An.ImageOverlay=An.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),s=i.getNorthWest(),u=i.getNorthEast(),h=i.getSouthEast(),f=i.getSouthWest();return[s,u,h,f]}}),An.Text=An.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,s=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${s}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let s=this._hasFocus;this._hasFocus=i.type==="focus",!s!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let s=this.options.className.split(" ");this.textArea.classList.add(...s)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var eu=function(i,s,u,h,f,y){this._matrix=[i,s,u,h,f,y]};eu.init=()=>new L.PM.Matrix(1,0,0,1,0,0),eu.prototype={transform(i){return this._transform(i.clone())},_transform(i){let s=this._matrix,{x:u,y:h}=i;return i.x=s[0]*u+s[1]*h+s[4],i.y=s[2]*u+s[3]*h+s[5],i},untransform(i){let s=this._matrix;return new L.Point((i.x/s[0]-s[4])/s[0],(i.y/s[2]-s[5])/s[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let s,u;return typeof i=="number"?(s=i,u=i):(s=i.x,u=i.y),this._add(1,0,0,1,s,u)},scale(i,s){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let u,h;return s=s||L.point(0,0),typeof i=="number"?(u=i,h=i):(u=i.x,h=i.y),this._add(u,0,0,h,s.x,s.y)._add(1,0,0,1,-s.x,-s.y)},rotate(i,s){let u=Math.cos(i),h=Math.sin(i);return s=s||new L.Point(0,0),this._add(u,h,-h,u,s.x,s.y)._add(1,0,0,1,-s.x,-s.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,s,u,h,f,y){let E=[[],[],[]],k=this._matrix,P=[[k[0],k[2],k[4]],[k[1],k[3],k[5]],[0,0,1]],A=[[i,u,f],[s,h,y],[0,0,1]],H;i&&i instanceof L.PM.Matrix&&(k=i._matrix,A=[[k[0],k[2],k[4]],[k[1],k[3],k[5]],[0,0,1]]);for(let X=0;X<3;X+=1)for(let dt=0;dt<3;dt+=1){H=0;for(let ot=0;ot<3;ot+=1)H+=P[X][ot]*A[ot][dt];E[X][dt]=H}return this._matrix=[E[0][0],E[1][0],E[0][1],E[1][1],E[0][2],E[1][2]],this}};var yc=eu,vc={calcMiddleLatLng(i,s,u){let h=i.project(s),f=i.project(u);return i.unproject(h._add(f)._divideBy(2))},findLayers(i){let s=[];return i.eachLayer(u=>{(u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.Circle||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&s.push(u)}),s=s.filter(u=>!!u.pm),s=s.filter(u=>!u._pmTempLayer),s=s.filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1),s},circleToPolygon(i,s=60,u=!0){let h=i.getLatLng(),f=i.getRadius(),y=or(h,f,s,0,u),E=[];for(let k=0;k<y.length;k+=1){let P=[y[k].lat,y[k].lng];E.push(P)}return L.polygon(E,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,s,u,h=!1){i.fire(s,u,h);let{groups:f}=this.getAllParentGroups(i);f.forEach(y=>{y.fire(s,u,h)})},getAllParentGroups(i){let s=[],u=[],h=f=>{for(let y in f._eventParents)if(s.indexOf(y)===-1){s.push(y);let E=f._eventParents[y];u.push(E),h(E)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(h(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:u,groupIds:s},{groupIds:s,groups:u}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:or,getTranslation:Ee,findDeepCoordIndex(i,s,u=!0){let h,f=E=>(k,P)=>{let A=E.concat(P);if(u){if(k.lat&&k.lat===s.lat&&k.lng===s.lng)return h=A,!0}else if(k.lat&&L.latLng(k).equals(s))return h=A,!0;return Array.isArray(k)&&k.some(f(A))};i.some(f([]));let y={};return h&&(y={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),y},findDeepMarkerIndex(i,s){let u,h=y=>(E,k)=>{let P=y.concat(k);return E._leaflet_id===s._leaflet_id?(u=P,!0):Array.isArray(E)&&E.some(h(P))};i.some(h([]));let f={};return u&&(f={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),f},_getIndexFromSegment(i,s){if(s&&s.length===2){let u=this.findDeepCoordIndex(i,s[0]),h=this.findDeepCoordIndex(i,s[1]),f=Math.max(u.index,h.index);return(u.index===0||h.index===0)&&f!==1&&(f+=1),{indexA:u,indexB:h,newIndex:f,indexPath:u.indexPath,parentPath:u.parentPath}}return null},_getRotatedRectangle(i,s,u,h){let f=ys(h,i),y=ys(h,s),E=u*Math.PI/180,k=Math.cos(E),P=Math.sin(E),A=(y.x-f.x)*k+(y.y-f.y)*P,H=(y.y-f.y)*k-(y.x-f.x)*P,X=A*k+f.x,dt=A*P+f.y,ot=-H*P+f.x,Et=H*k+f.y,Bt=pa(h,f),Kt=pa(h,{x:X,y:dt}),Re=pa(h,y),q=pa(h,{x:ot,y:Et});return[Bt,Kt,Re,q]},pxRadiusToMeterRadius(i,s,u){let h=s.project(u),f=L.point(h.x+i,h.y);return s.distance(s.unproject(f),u)}},Ec=vc;L.PM=L.PM||{version:De.version,Map:ss,Toolbar:us,Draw:nn,Edit:An,Utils:Ec,Matrix:yc,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(s);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(u);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(h);function f(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(f);function y(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(y);function E(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(E);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(k);function P(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(P)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(s=>{this.reInitLayer(s)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let s=this._map.mouseEventToLayerPoint(i),u,h;for(let f=this._drawFirst;f;f=f.next)u=f.layer,u.options.interactive&&u._containsPoint(s)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(u))&&(h=u);h&&(L.DomEvent.fakeStop(i),this._fireEvent([h],i))}}),L.PM.initialize()})();var{entries:qh,setPrototypeOf:Ih,isFrozen:Ff,getPrototypeOf:zf,getOwnPropertyDescriptor:Gf}=Object,{freeze:vi,seal:hr,create:Uh}=Object,{apply:Yu,construct:Hu}=typeof Reflect<"u"&&Reflect;vi||(vi=function(m){return m});hr||(hr=function(m){return m});Yu||(Yu=function(m,p,x){return m.apply(p,x)});Hu||(Hu=function(m,p){return new m(...p)});var Xa=Ei(Array.prototype.forEach),qf=Ei(Array.prototype.lastIndexOf),Rh=Ei(Array.prototype.pop),ea=Ei(Array.prototype.push),Uf=Ei(Array.prototype.splice),Ka=Ei(String.prototype.toLowerCase),Gu=Ei(String.prototype.toString),Nh=Ei(String.prototype.match),na=Ei(String.prototype.replace),Zf=Ei(String.prototype.indexOf),Vf=Ei(String.prototype.trim),Mr=Ei(Object.prototype.hasOwnProperty),yi=Ei(RegExp.prototype.test),ia=Yf(TypeError);function Ei(d){return function(m){m instanceof RegExp&&(m.lastIndex=0);for(var p=arguments.length,x=new Array(p>1?p-1:0),T=1;T<p;T++)x[T-1]=arguments[T];return Yu(d,m,x)}}function Yf(d){return function(){for(var m=arguments.length,p=new Array(m),x=0;x<m;x++)p[x]=arguments[x];return Hu(d,p)}}function Te(d,m){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ka;Ih&&Ih(d,null);let x=m.length;for(;x--;){let T=m[x];if(typeof T=="string"){let C=p(T);C!==T&&(Ff(m)||(m[x]=C),T=C)}d[T]=!0}return d}function Hf(d){for(let m=0;m<d.length;m++)Mr(d,m)||(d[m]=null);return d}function is(d){let m=Uh(null);for(let[p,x]of qh(d))Mr(d,p)&&(Array.isArray(x)?m[p]=Hf(x):x&&typeof x=="object"&&x.constructor===Object?m[p]=is(x):m[p]=x);return m}function ra(d,m){for(;d!==null;){let x=Gf(d,m);if(x){if(x.get)return Ei(x.get);if(typeof x.value=="function")return Ei(x.value)}d=zf(d)}function p(){return null}return p}var Bh=vi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qu=vi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Uu=vi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jf=vi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Zu=vi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Xf=vi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Oh=vi(["#text"]),Dh=vi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Vu=vi(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Fh=vi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Wa=vi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Wf=hr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Kf=hr(/<%[\w\W]*|[\w\W]*%>/gm),Jf=hr(/\$\{[\w\W]*/gm),$f=hr(/^data-[\-\w.\u00B7-\uFFFF]+$/),Qf=hr(/^aria-[\-\w]+$/),Zh=hr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),td=hr(/^(?:\w+script|data):/i),ed=hr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Vh=hr(/^html$/i),nd=hr(/^[a-z][.\w]*(-[.\w]+)+$/i),zh=Object.freeze({__proto__:null,ARIA_ATTR:Qf,ATTR_WHITESPACE:ed,CUSTOM_ELEMENT:nd,DATA_ATTR:$f,DOCTYPE_NAME:Vh,ERB_EXPR:Kf,IS_ALLOWED_URI:Zh,IS_SCRIPT_OR_DATA:td,MUSTACHE_EXPR:Wf,TMPLIT_EXPR:Jf}),oa={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},id=function(){return typeof window>"u"?null:window},rd=function(m,p){if(typeof m!="object"||typeof m.createPolicy!="function")return null;let x=null,T="data-tt-policy-suffix";p&&p.hasAttribute(T)&&(x=p.getAttribute(T));let C="dompurify"+(x?"#"+x:"");try{return m.createPolicy(C,{createHTML(S){return S},createScriptURL(S){return S}})}catch{return console.warn("TrustedTypes policy "+C+" could not be created."),null}},Gh=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Yh(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:id(),m=Jt=>Yh(Jt);if(m.version="3.2.5",m.removed=[],!d||!d.document||d.document.nodeType!==oa.document||!d.Element)return m.isSupported=!1,m;let{document:p}=d,x=p,T=x.currentScript,{DocumentFragment:C,HTMLTemplateElement:S,Node:W,Element:nt,NodeFilter:G,NamedNodeMap:U=d.NamedNodeMap||d.MozNamedAttrMap,HTMLFormElement:Z,DOMParser:V,trustedTypes:tt}=d,ct=nt.prototype,bt=ra(ct,"cloneNode"),Lt=ra(ct,"remove"),_t=ra(ct,"nextSibling"),wt=ra(ct,"childNodes"),yt=ra(ct,"parentNode");if(typeof S=="function"){let Jt=p.createElement("template");Jt.content&&Jt.content.ownerDocument&&(p=Jt.content.ownerDocument)}let Ct,It="",{implementation:Nt,createNodeIterator:Dt,createDocumentFragment:Zt,getElementsByTagName:Ft}=p,{importNode:jt}=x,Vt=Gh();m.isSupported=typeof qh=="function"&&typeof yt=="function"&&Nt&&Nt.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:oe,ERB_EXPR:Pe,TMPLIT_EXPR:Tt,DATA_ATTR:se,ARIA_ATTR:zt,IS_SCRIPT_OR_DATA:Oe,ATTR_WHITESPACE:vt,CUSTOM_ELEMENT:fe}=zh,{IS_ALLOWED_URI:xe}=zh,ue=null,Ht=Te({},[...Bh,...qu,...Uu,...Zu,...Oh]),Qt=null,pe=Te({},[...Dh,...Vu,...Fh,...Wa]),ve=Object.seal(Uh(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),at=null,Pr=null,Ne=!0,Xt=!0,Y=!1,kn=!0,ei=!1,Rn=!0,Hn=!1,Oi=!1,Ji=!1,At=!1,wi=!1,Li=!1,ni=!0,Wr=!1,he="user-content-",Di=!0,jn=!1,ii={},te=null,Sr=Te({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ke=null,ie=Te({},["audio","video","img","source","image","track"]),Tr=null,Nn=Te({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Bn="http://www.w3.org/1998/Math/MathML",ee="http://www.w3.org/2000/svg",Xn="http://www.w3.org/1999/xhtml",pn=Xn,$i=!1,on=null,Qi=Te({},[Bn,ee,Xn],Gu),mn=Te({},["mi","mo","mn","ms","mtext"]),Fi=Te({},["annotation-xml"]),Ar=Te({},["title","style","font","a","script"]),cr=null,ao=["application/xhtml+xml","text/html"],zi="text/html",Mt=null,Wn=null,tr=p.createElement("form"),er=function($){return $ instanceof RegExp||$ instanceof Function},Ir=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Wn&&Wn===$)){if((!$||typeof $!="object")&&($={}),$=is($),cr=ao.indexOf($.PARSER_MEDIA_TYPE)===-1?zi:$.PARSER_MEDIA_TYPE,Mt=cr==="application/xhtml+xml"?Gu:Ka,ue=Mr($,"ALLOWED_TAGS")?Te({},$.ALLOWED_TAGS,Mt):Ht,Qt=Mr($,"ALLOWED_ATTR")?Te({},$.ALLOWED_ATTR,Mt):pe,on=Mr($,"ALLOWED_NAMESPACES")?Te({},$.ALLOWED_NAMESPACES,Gu):Qi,Tr=Mr($,"ADD_URI_SAFE_ATTR")?Te(is(Nn),$.ADD_URI_SAFE_ATTR,Mt):Nn,ke=Mr($,"ADD_DATA_URI_TAGS")?Te(is(ie),$.ADD_DATA_URI_TAGS,Mt):ie,te=Mr($,"FORBID_CONTENTS")?Te({},$.FORBID_CONTENTS,Mt):Sr,at=Mr($,"FORBID_TAGS")?Te({},$.FORBID_TAGS,Mt):{},Pr=Mr($,"FORBID_ATTR")?Te({},$.FORBID_ATTR,Mt):{},ii=Mr($,"USE_PROFILES")?$.USE_PROFILES:!1,Ne=$.ALLOW_ARIA_ATTR!==!1,Xt=$.ALLOW_DATA_ATTR!==!1,Y=$.ALLOW_UNKNOWN_PROTOCOLS||!1,kn=$.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ei=$.SAFE_FOR_TEMPLATES||!1,Rn=$.SAFE_FOR_XML!==!1,Hn=$.WHOLE_DOCUMENT||!1,At=$.RETURN_DOM||!1,wi=$.RETURN_DOM_FRAGMENT||!1,Li=$.RETURN_TRUSTED_TYPE||!1,Ji=$.FORCE_BODY||!1,ni=$.SANITIZE_DOM!==!1,Wr=$.SANITIZE_NAMED_PROPS||!1,Di=$.KEEP_CONTENT!==!1,jn=$.IN_PLACE||!1,xe=$.ALLOWED_URI_REGEXP||Zh,pn=$.NAMESPACE||Xn,mn=$.MATHML_TEXT_INTEGRATION_POINTS||mn,Fi=$.HTML_INTEGRATION_POINTS||Fi,ve=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&er($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ve.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&er($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ve.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ve.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ei&&(Xt=!1),wi&&(At=!0),ii&&(ue=Te({},Oh),Qt=[],ii.html===!0&&(Te(ue,Bh),Te(Qt,Dh)),ii.svg===!0&&(Te(ue,qu),Te(Qt,Vu),Te(Qt,Wa)),ii.svgFilters===!0&&(Te(ue,Uu),Te(Qt,Vu),Te(Qt,Wa)),ii.mathMl===!0&&(Te(ue,Zu),Te(Qt,Fh),Te(Qt,Wa))),$.ADD_TAGS&&(ue===Ht&&(ue=is(ue)),Te(ue,$.ADD_TAGS,Mt)),$.ADD_ATTR&&(Qt===pe&&(Qt=is(Qt)),Te(Qt,$.ADD_ATTR,Mt)),$.ADD_URI_SAFE_ATTR&&Te(Tr,$.ADD_URI_SAFE_ATTR,Mt),$.FORBID_CONTENTS&&(te===Sr&&(te=is(te)),Te(te,$.FORBID_CONTENTS,Mt)),Di&&(ue["#text"]=!0),Hn&&Te(ue,["html","head","body"]),ue.table&&(Te(ue,["tbody"]),delete at.tbody),$.TRUSTED_TYPES_POLICY){if(typeof $.TRUSTED_TYPES_POLICY.createHTML!="function")throw ia('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ia('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ct=$.TRUSTED_TYPES_POLICY,It=Ct.createHTML("")}else Ct===void 0&&(Ct=rd(tt,T)),Ct!==null&&typeof It=="string"&&(It=Ct.createHTML(""));vi&&vi($),Wn=$}},fr=Te({},[...qu,...Uu,...jf]),Kr=Te({},[...Zu,...Xf]),sn=function($){let Rt=yt($);(!Rt||!Rt.tagName)&&(Rt={namespaceURI:pn,tagName:"template"});let Ut=Ka($.tagName),Ae=Ka(Rt.tagName);return on[$.namespaceURI]?$.namespaceURI===ee?Rt.namespaceURI===Xn?Ut==="svg":Rt.namespaceURI===Bn?Ut==="svg"&&(Ae==="annotation-xml"||mn[Ae]):!!fr[Ut]:$.namespaceURI===Bn?Rt.namespaceURI===Xn?Ut==="math":Rt.namespaceURI===ee?Ut==="math"&&Fi[Ae]:!!Kr[Ut]:$.namespaceURI===Xn?Rt.namespaceURI===ee&&!Fi[Ae]||Rt.namespaceURI===Bn&&!mn[Ae]?!1:!Kr[Ut]&&(Ar[Ut]||!fr[Ut]):!!(cr==="application/xhtml+xml"&&on[$.namespaceURI]):!1},qt=function($){ea(m.removed,{element:$});try{yt($).removeChild($)}catch{Lt($)}},ri=function($,Rt){try{ea(m.removed,{attribute:Rt.getAttributeNode($),from:Rt})}catch{ea(m.removed,{attribute:null,from:Rt})}if(Rt.removeAttribute($),$==="is")if(At||wi)try{qt(Rt)}catch{}else try{Rt.setAttribute($,"")}catch{}},Jr=function($){let Rt=null,Ut=null;if(Ji)$="<remove></remove>"+$;else{let Ke=Nh($,/^[\r\n\t ]+/);Ut=Ke&&Ke[0]}cr==="application/xhtml+xml"&&pn===Xn&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");let Ae=Ct?Ct.createHTML($):$;if(pn===Xn)try{Rt=new V().parseFromString(Ae,cr)}catch{}if(!Rt||!Rt.documentElement){Rt=Nt.createDocument(pn,"template",null);try{Rt.documentElement.innerHTML=$i?It:Ae}catch{}}let Xe=Rt.body||Rt.documentElement;return $&&Ut&&Xe.insertBefore(p.createTextNode(Ut),Xe.childNodes[0]||null),pn===Xn?Ft.call(Rt,Hn?"html":"body")[0]:Hn?Rt.documentElement:Xe},Rr=function($){return Dt.call($.ownerDocument||$,$,G.SHOW_ELEMENT|G.SHOW_COMMENT|G.SHOW_TEXT|G.SHOW_PROCESSING_INSTRUCTION|G.SHOW_CDATA_SECTION,null)},Nr=function($){return $ instanceof Z&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof U)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function"||typeof $.hasChildNodes!="function")},en=function($){return typeof W=="function"&&$ instanceof W};function Mn(Jt,$,Rt){Xa(Jt,Ut=>{Ut.call(m,$,Rt,Wn)})}let On=function($){let Rt=null;if(Mn(Vt.beforeSanitizeElements,$,null),Nr($))return qt($),!0;let Ut=Mt($.nodeName);if(Mn(Vt.uponSanitizeElement,$,{tagName:Ut,allowedTags:ue}),$.hasChildNodes()&&!en($.firstElementChild)&&yi(/<[/\w!]/g,$.innerHTML)&&yi(/<[/\w!]/g,$.textContent)||$.nodeType===oa.progressingInstruction||Rn&&$.nodeType===oa.comment&&yi(/<[/\w]/g,$.data))return qt($),!0;if(!ue[Ut]||at[Ut]){if(!at[Ut]&&ki(Ut)&&(ve.tagNameCheck instanceof RegExp&&yi(ve.tagNameCheck,Ut)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(Ut)))return!1;if(Di&&!te[Ut]){let Ae=yt($)||$.parentNode,Xe=wt($)||$.childNodes;if(Xe&&Ae){let Ke=Xe.length;for(let an=Ke-1;an>=0;--an){let Dn=bt(Xe[an],!0);Dn.__removalCount=($.__removalCount||0)+1,Ae.insertBefore(Dn,_t($))}}}return qt($),!0}return $ instanceof nt&&!sn($)||(Ut==="noscript"||Ut==="noembed"||Ut==="noframes")&&yi(/<\/no(script|embed|frames)/i,$.innerHTML)?(qt($),!0):(ei&&$.nodeType===oa.text&&(Rt=$.textContent,Xa([oe,Pe,Tt],Ae=>{Rt=na(Rt,Ae," ")}),$.textContent!==Rt&&(ea(m.removed,{element:$.cloneNode()}),$.textContent=Rt)),Mn(Vt.afterSanitizeElements,$,null),!1)},oi=function($,Rt,Ut){if(ni&&(Rt==="id"||Rt==="name")&&(Ut in p||Ut in tr))return!1;if(!(Xt&&!Pr[Rt]&&yi(se,Rt))){if(!(Ne&&yi(zt,Rt))){if(!Qt[Rt]||Pr[Rt]){if(!(ki($)&&(ve.tagNameCheck instanceof RegExp&&yi(ve.tagNameCheck,$)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck($))&&(ve.attributeNameCheck instanceof RegExp&&yi(ve.attributeNameCheck,Rt)||ve.attributeNameCheck instanceof Function&&ve.attributeNameCheck(Rt))||Rt==="is"&&ve.allowCustomizedBuiltInElements&&(ve.tagNameCheck instanceof RegExp&&yi(ve.tagNameCheck,Ut)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(Ut))))return!1}else if(!Tr[Rt]){if(!yi(xe,na(Ut,vt,""))){if(!((Rt==="src"||Rt==="xlink:href"||Rt==="href")&&$!=="script"&&Zf(Ut,"data:")===0&&ke[$])){if(!(Y&&!yi(Oe,na(Ut,vt,"")))){if(Ut)return!1}}}}}}return!0},ki=function($){return $!=="annotation-xml"&&Nh($,fe)},Br=function($){Mn(Vt.beforeSanitizeAttributes,$,null);let{attributes:Rt}=$;if(!Rt||Nr($))return;let Ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Qt,forceKeepAttr:void 0},Ae=Rt.length;for(;Ae--;){let Xe=Rt[Ae],{name:Ke,namespaceURI:an,value:Dn}=Xe,Gi=Mt(Ke),Ie=Ke==="value"?Dn:Vf(Dn);if(Ut.attrName=Gi,Ut.attrValue=Ie,Ut.keepAttr=!0,Ut.forceKeepAttr=void 0,Mn(Vt.uponSanitizeAttribute,$,Ut),Ie=Ut.attrValue,Wr&&(Gi==="id"||Gi==="name")&&(ri(Ke,$),Ie=he+Ie),Rn&&yi(/((--!?|])>)|<\/(style|title)/i,Ie)){ri(Ke,$);continue}if(Ut.forceKeepAttr||(ri(Ke,$),!Ut.keepAttr))continue;if(!kn&&yi(/\/>/i,Ie)){ri(Ke,$);continue}ei&&Xa([oe,Pe,Tt],dr=>{Ie=na(Ie,dr," ")});let xi=Mt($.nodeName);if(oi(xi,Gi,Ie)){if(Ct&&typeof tt=="object"&&typeof tt.getAttributeType=="function"&&!an)switch(tt.getAttributeType(xi,Gi)){case"TrustedHTML":{Ie=Ct.createHTML(Ie);break}case"TrustedScriptURL":{Ie=Ct.createScriptURL(Ie);break}}try{an?$.setAttributeNS(an,Ke,Ie):$.setAttribute(Ke,Ie),Nr($)?qt($):Rh(m.removed)}catch{}}}Mn(Vt.afterSanitizeAttributes,$,null)},Or=function Jt($){let Rt=null,Ut=Rr($);for(Mn(Vt.beforeSanitizeShadowDOM,$,null);Rt=Ut.nextNode();)Mn(Vt.uponSanitizeShadowNode,Rt,null),On(Rt),Br(Rt),Rt.content instanceof C&&Jt(Rt.content);Mn(Vt.afterSanitizeShadowDOM,$,null)};return m.sanitize=function(Jt){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Rt=null,Ut=null,Ae=null,Xe=null;if($i=!Jt,$i&&(Jt="<!-->"),typeof Jt!="string"&&!en(Jt))if(typeof Jt.toString=="function"){if(Jt=Jt.toString(),typeof Jt!="string")throw ia("dirty is not a string, aborting")}else throw ia("toString is not a function");if(!m.isSupported)return Jt;if(Oi||Ir($),m.removed=[],typeof Jt=="string"&&(jn=!1),jn){if(Jt.nodeName){let Dn=Mt(Jt.nodeName);if(!ue[Dn]||at[Dn])throw ia("root node is forbidden and cannot be sanitized in-place")}}else if(Jt instanceof W)Rt=Jr("<!---->"),Ut=Rt.ownerDocument.importNode(Jt,!0),Ut.nodeType===oa.element&&Ut.nodeName==="BODY"||Ut.nodeName==="HTML"?Rt=Ut:Rt.appendChild(Ut);else{if(!At&&!ei&&!Hn&&Jt.indexOf("<")===-1)return Ct&&Li?Ct.createHTML(Jt):Jt;if(Rt=Jr(Jt),!Rt)return At?null:Li?It:""}Rt&&Ji&&qt(Rt.firstChild);let Ke=Rr(jn?Jt:Rt);for(;Ae=Ke.nextNode();)On(Ae),Br(Ae),Ae.content instanceof C&&Or(Ae.content);if(jn)return Jt;if(At){if(wi)for(Xe=Zt.call(Rt.ownerDocument);Rt.firstChild;)Xe.appendChild(Rt.firstChild);else Xe=Rt;return(Qt.shadowroot||Qt.shadowrootmode)&&(Xe=jt.call(x,Xe,!0)),Xe}let an=Hn?Rt.outerHTML:Rt.innerHTML;return Hn&&ue["!doctype"]&&Rt.ownerDocument&&Rt.ownerDocument.doctype&&Rt.ownerDocument.doctype.name&&yi(Vh,Rt.ownerDocument.doctype.name)&&(an="<!DOCTYPE "+Rt.ownerDocument.doctype.name+`>
`+an),ei&&Xa([oe,Pe,Tt],Dn=>{an=na(an,Dn," ")}),Ct&&Li?Ct.createHTML(an):an},m.setConfig=function(){let Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ir(Jt),Oi=!0},m.clearConfig=function(){Wn=null,Oi=!1},m.isValidAttribute=function(Jt,$,Rt){Wn||Ir({});let Ut=Mt(Jt),Ae=Mt($);return oi(Ut,Ae,Rt)},m.addHook=function(Jt,$){typeof $=="function"&&ea(Vt[Jt],$)},m.removeHook=function(Jt,$){if($!==void 0){let Rt=qf(Vt[Jt],$);return Rt===-1?void 0:Uf(Vt[Jt],Rt,1)[0]}return Rh(Vt[Jt])},m.removeHooks=function(Jt){Vt[Jt]=[]},m.removeAllHooks=function(){Vt=Gh()},m}var Yn=Yh();var Hh="#7AE9FF";var od={color:"#FFBB00",fillColor:"#FFBB00",fillOpacity:.75,weight:3},sd={color:"#FF0000",fillColor:"#FF0000",fillOpacity:.95,weight:5},so=class{constructor(m,p){this._bufferWidth=5;this._sqmPerPerson=10;this._sqmPerVehicle=70;this.supressWarnings=!1;this.areaNeedPower=!0;this.id=m.id,this._rules=p,this.revision=m.revision,this.timeStamp=m.timeStamp,this.isDeleted=m.isDeleted,this.deleteReason=m.deleteReason,this._originalGeoJson=m.geoJson;let x=JSON.parse(m.geoJson);this.layer=new Ja.GeoJSON(x,{pmIgnore:!1,interactive:!0,bubblingMouseEvents:!1,snapIgnore:!0,style:()=>this.GetDefaultLayerStyle()}),this.revisions={},this.name=Yn.sanitize(x.properties.name),this.contactInfo=Yn.sanitize(x.properties.contactInfo)??"",this.description=Yn.sanitize(x.properties.description)??"",this.nrOfPeople=x.properties.nrOfPeople??0,this.nrOfVehicles=x.properties.nrOfVechiles??0,this.additionalSqm=x.properties.additionalSqm??0,Number.isNaN(Number(x.properties.amplifiedSound))?this.amplifiedSound=-1:this.amplifiedSound=Number(x.properties.amplifiedSound),this.color=x.properties.color??Hh,this.supressWarnings=x.properties.supressWarnings??!1,this.areaNeedPower=x.properties.areaNeedPower??!0,this.powerContactInfo=Yn.sanitize(x.properties.techContactInfo)??"",this.powerPlugType=Yn.sanitize(x.properties.powerPlugType)??"",this.powerExtraInfo=Yn.sanitize(x.properties.powerExtraInfo)??"",this.powerImageUrl=Yn.sanitize(x.properties.powerImage)??"",Number.isNaN(Number(x.properties.powerNeed))?this.powerNeed=-1:this.powerNeed=Number(x.properties.powerNeed),this.powerAppliances=x.properties.powerAppliances??[],this.updateBufferedLayer()}get calculatedAreaNeeded(){try{let m=0;return this.nrOfPeople&&(m+=this.nrOfPeople*this._sqmPerPerson),this.nrOfVehicles&&(m+=this.nrOfVehicles*this._sqmPerVehicle),this.additionalSqm&&(m+=this.additionalSqm),m}catch{return NaN}}get severityOfRulesBroken(){return this._rules.reduce((m,p)=>Math.max(m,p.severity),0)}get area(){return Math.round(ou(this.calculateGeoJson()))}get geoJson(){return JSON.stringify(this.toGeoJSON())}calculateGeoJson(){let m=this.layer.toGeoJSON();return m.features&&m.features[0]&&(m=m.features[0]),m}GetDefaultLayerStyle(m=!1){let p=this.color;return m&&(p=Hh),{color:p,fillColor:p,fillOpacity:.3,weight:1}}checkAllRules(){for(let m of this._rules)m.checkRule(this)}setCustomColor(m){this.layer.setStyle({color:m,fillColor:m,fillOpacity:1,weight:1})}setLayerStyle(m="severity"){if(m=="severity"||m=="cleancolors")this.severityOfRulesBroken>=3?this.layer.setStyle(sd):this.severityOfRulesBroken==2&&!this.supressWarnings?this.layer.setStyle(od):this.layer.setStyle(this.GetDefaultLayerStyle(m=="cleancolors"));else if(m=="power"){let p="#00FF40";this.powerNeed?this.powerNeed>9e3?p="#FF0000":this.powerNeed>1e3&&(p="#FFA200"):p="#D1D1D1",this.layer.setStyle({color:p,fillColor:p,fillOpacity:.3,weight:1})}else if(m=="sound"){let p="#00FF40";this.amplifiedSound?this.amplifiedSound>2e3?p="#FF0000":this.amplifiedSound>120&&(p="#FFA200"):p="#D1D1D1",this.layer.setStyle({color:p,fillColor:p,fillOpacity:.3,weight:1})}}getAllTriggeredRules(){return this._rules.filter(m=>m.triggered)}updateBufferedLayer(){let m=this.layer.toGeoJSON(),p=Su(m,this._bufferWidth,{units:"meters"}),x=this.getAllTriggeredRules().some(T=>T.shouldShowFireBuffer)?1:0;this.bufferLayer?(this.bufferLayer.clearLayers(),this.bufferLayer.addData(p),this.bufferLayer.options.style.weight=x):this.bufferLayer=Ja.geoJSON(p,{style:{color:"red",fillOpacity:0,weight:x,dashArray:"5, 5"},interactive:!1})}toGeoJSON(){let m=this.calculateGeoJson();return m.properties=m.properties||{},m.properties.name=Yn.sanitize(this.name).substring(0,100),m.properties.description=Yn.sanitize(this.description).substring(0,1e3),m.properties.contactInfo=Yn.sanitize(this.contactInfo),m.properties.nrOfPeople=this.nrOfPeople,m.properties.nrOfVechiles=this.nrOfVehicles,m.properties.additionalSqm=this.additionalSqm,m.properties.amplifiedSound=this.amplifiedSound,m.properties.color=this.color,m.properties.supressWarnings=this.supressWarnings,m.properties.areaNeedPower=this.areaNeedPower,m.properties.techContactInfo=Yn.sanitize(this.powerContactInfo),m.properties.powerPlugType=Yn.sanitize(this.powerPlugType),m.properties.powerExtraInfo=Yn.sanitize(this.powerExtraInfo),m.properties.powerImage=Yn.sanitize(this.powerImageUrl),m.properties.powerNeed=this.powerNeed,m.properties.powerAppliances=this.powerAppliances,m}hasChanges(){return this._originalGeoJson!=this.geoJson}};var jh="https://robnowa.runasp.net";var bs=jh+"/api/v1/mapentities",sa=class{constructor(m){this._latestRevisions={};this._entityConstraints=null;this._rulesGenerator=m,this.loaded=new Promise(p=>this._update().then(()=>p(!0)))}async _update(){let m=await fetch(bs),p=m.ok?await m.json():[];this._latestRevisions={};for(let x of p){if(this._entityConstraints){let{earliest:T,latest:C}=this._entityConstraints;if(x.timeStamp>C||x.timeStamp<T)continue}this._latestRevisions[x.id]=new so(x,this._rulesGenerator())}}async reload(){let m=await fetch(bs),p=m.ok?await m.json():[],x=new Array,T={refreshedDeleted:new Array,refreshedAdded:new Array,refreshedUpdated:new Array};for(let C of p){if(this._entityConstraints){let{earliest:S,latest:W}=this._entityConstraints;if(C.timeStamp>W||C.timeStamp<S)continue}x[C.id]=new so(C,this._rulesGenerator())}for(let C in this._latestRevisions){let S=parseInt(C);x[S]||T.refreshedDeleted.push(S)}for(let C in x){let S=parseInt(C),W=x[S];this._latestRevisions[S]?this._latestRevisions[S].revision<W.revision&&(this._latestRevisions[S]=W,T.refreshedUpdated.push(S)):(this._latestRevisions[S]=W,T.refreshedAdded.push(S))}return T}async constrain(m){this._entityConstraints=m,await this._update()}async entities(){return await this.loaded,Object.values(this._latestRevisions)}getEntityById(m){return this._latestRevisions[m]}getAllEntities(){return Object.values(this._latestRevisions)}isLatest(m){return m.revision==this._latestRevisions[m.id].revision}async createEntity(m){console.log("createEntity",m);let p=await fetch(bs,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:JSON.stringify(m)})});if(p.ok){let x=await p.json();console.log("[API]","Saved initial entity",x);let T=new so(x,this._rulesGenerator());return this._latestRevisions[T.id]=T,T}else{let x=await p.json();return console.warn("[API]","Failed to save entity",x),null}}async updateEntity(m){let p=await fetch(`${bs}/${m.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:m.geoJson,id:m.id})});if(p.ok){let x=await p.json();console.log("[API]","Updated existing entity",x);let T=new so(x,this._rulesGenerator());return this._latestRevisions[m.id]=T,T}else{let x=await p.json();return console.warn("[API]","Failed to update entity with id:",m.id,x),null}}async deleteEntity(m,p="No reason given"){let x=await fetch(`${bs}/${m.id}?reason=${Yn.sanitize(p)}`,{method:"DELETE"});if(x.ok)console.log("[API]","Deleted entity with id:",m.id),delete this._latestRevisions[m.id];else{let T=await x.json();console.warn("[API]","Failed to delete entity with id:",m.id,T)}}async remove(m){delete this._latestRevisions[m.id]}async getRevisionsForEntity(m){let p=await fetch(`${bs}/${m.id}`),x=p.ok?await p.json():[];for(let T of x)m.revisions[T.revision]=new so(T,this._rulesGenerator())}};var Xu=!1,Wu="",Ku=new sa(()=>[]),aa={neighborhoods:null,plazas:null,POIs:null},$a={camp_name:document.getElementById("camp_name"),neighborhood:document.getElementById("neighborhood"),closest_plaza:document.getElementById("closest_plaza"),distance_to_plaza:document.getElementById("distance_to_plaza"),direction_from_plaza:document.getElementById("direction_from_plaza"),closest_poi:document.getElementById("closest_poi"),distance_to_poi:document.getElementById("distance_to_poi"),direction_from_poi:document.getElementById("direction_from_poi")},ad=async()=>{let d=[{url:"./data/bl25/neighbourhoods.geojson",name:"neighborhoods"},{url:"./data/bl25/Plazas_BL25_export.geojson",name:"plazas"},{url:"./data/bl25/poi/customPOIforJOMO.geojson",name:"POIs"}],m=await Promise.all(d.map(p=>ud(p.url)));d.forEach((p,x)=>{aa[p.name]=m[x]})},ud=async d=>{try{return await(await fetch(d)).json()}catch(m){throw console.error("Error loading GeoJSON:",m),m}},ld=(d,m)=>d.features.find(p=>va(m,p))?.properties.name||"",Xh=(d,m)=>{let p=1/0,x="",T=null;for(let C of d.features){let S=1/0;C.geometry.type==="Point"?S=Tu(m,C,{units:"meters"}):S=Qs(m,C,{units:"meters"}),S<p&&(p=S,x=C.properties.name||"(No name)",T=C)}return p=p<0?0:Math.round(p),{areaName:x.replace(/\n/g," "),distance:p,areaFeature:T}},Wh=(d,m)=>{let x=Es(d).geometry.coordinates,T=_a(su(x),m),C=["N","NE","E","SE","S","SW","W","NW","N"],S=Math.round((T%360+360)%360/45);return C[S]},hd=async d=>{if(!d)return null;let m=[d[1],d[0]],p=su(m),T=(await Ku.entities()).find(C=>{try{return va(p,JSON.parse(C.geoJson))}catch{return!1}});return T&&(Xu=!0,Wu=T.name),p},cd=async d=>{let m=Ku.getEntityById(d);if(m){Xu=!0,Wu=m.name;let p=JSON.parse(m.geoJson);return Es(p)}return null},fd=d=>{let m=document.getElementById("main"),p=document.createElement("table"),x=Object.keys(d);p.appendChild(Object.assign(document.createElement("tr"),{innerHTML:x.map(C=>`<th>${C}</th>`).join("")}));let T=Math.max(...x.map(C=>d[C]?.features?.length||0));for(let C=0;C<T;C++)p.appendChild(Object.assign(document.createElement("tr"),{innerHTML:x.map(S=>`<td>${d[S]?.features?.[C]?.properties?.name||""}</td>`).join("")}));m.appendChild(p)},ju=async(d,m)=>{let p={};Object.keys($a).forEach(S=>{p[S]=""});let x=await cd(d)||await hd(m);if(!x){console.error("No id (or camp not found) or coordinates provided in the query string.");return}Xu&&(p.camp_name=Wu),p.neighborhood=ld(aa.neighborhoods,x);let T=Xh(aa.plazas,x);p.closest_plaza=T.areaName,p.distance_to_plaza=Math.round(T.distance),p.direction_from_plaza=Wh(T.areaFeature,x);let C=Xh(aa.POIs,x);return p.closest_poi=C.areaName,p.distance_to_poi=Math.round(C.distance),p.direction_from_poi=Wh(C.areaFeature,x),p},dd=()=>{let d=document.createElement("input");d.type="file",d.accept=".csv,text/csv",d.onchange=async m=>{let p=m.target.files[0];if(!p)return;let x=await p.text(),T=Papa.parse(x,{skipEmptyLines:!0});if(!T.data||T.data.length===0)return;let C=T.data[0],S=T.data,W=Object.keys($a),nt=C.concat(W),G=C.findIndex(ct=>ct.trim().toLowerCase()==="location / link on the placement map"),U=[nt];for(let ct=1;ct<S.length;ct++){let bt=S[ct],Lt=bt[G]||"",_t=null,wt=null;if(/id=(\d+)/i.test(Lt))_t=Number(Lt.match(/id=(\d+)/i)[1]);else if(/^[-.\d]+\s+[-.\d]+$/.test(Lt)){let It=Lt.trim().split(/\s+/).map(Number);It.length===2&&!isNaN(It[0])&&!isNaN(It[1])&&(wt=It)}let yt={};(_t!==null||wt!==null)&&(yt=await ju(_t,wt)||{});let Ct=W.map(It=>yt[It]??"");U.push(bt.concat(Ct))}let Z=Papa.unparse(U),V=new Blob([Z],{type:"text/csv"}),tt=Object.assign(document.createElement("a"),{href:URL.createObjectURL(V),download:p.name.slice(0,-4)+"_updated"+p.name.slice(-4)});tt.click(),URL.revokeObjectURL(tt.href)},d.click()},gd=async()=>{await Ku.loaded,await ad(),fd(aa);let d=new URLSearchParams(window.location.search),m=d.has("coords"),p=d.has("id"),x={};if(p){let T=Number(d.get("id"));x=await ju(T)}else if(m){let T=d.get("coords")?d.get("coords").split(",").map(Number):[];x=await ju(null,T)}x?Object.keys($a).forEach(T=>{$a[T].value=x[T]||""}):console.error("No valid location data found.")};gd();document.getElementsByTagName("button")[0].onclick=dd;})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE *)
*/
